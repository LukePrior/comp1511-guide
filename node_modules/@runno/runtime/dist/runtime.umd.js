var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(g,I,A)=>I in g?__defProp(g,I,{enumerable:!0,configurable:!0,writable:!0,value:A}):g[I]=A,__spreadValues=(g,I)=>{for(var A in I||(I={}))__hasOwnProp.call(I,A)&&__defNormalProp(g,A,I[A]);if(__getOwnPropSymbols)for(var A of __getOwnPropSymbols(I))__propIsEnum.call(I,A)&&__defNormalProp(g,A,I[A]);return g},__spreadProps=(g,I)=>__defProps(g,__getOwnPropDescs(I)),__publicField=(g,I,A)=>(__defNormalProp(g,"symbol"!=typeof I?I+"":I,A),A);!function(g,I){"object"==typeof exports&&"undefined"!=typeof module?I(exports):"function"==typeof define&&define.amd?define(["exports"],I):I((g="undefined"!=typeof globalThis?globalThis:g||self)["@runno/runtime"]={})}(this,(function(g){"use strict";function I(g){return g&&g.__esModule&&Object.prototype.hasOwnProperty.call(g,"default")?g.default:g}function A(g,I){return g(I={exports:{}},I.exports),I.exports}var C=A((function(g,I){window,g.exports=function(g){var I={};function A(C){if(I[C])return I[C].exports;var t=I[C]={i:C,l:!1,exports:{}};return g[C].call(t.exports,t,t.exports,A),t.l=!0,t.exports}return A.m=g,A.c=I,A.d=function(g,I,C){A.o(g,I)||Object.defineProperty(g,I,{enumerable:!0,get:C})},A.r=function(g){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})},A.t=function(g,I){if(1&I&&(g=A(g)),8&I)return g;if(4&I&&"object"==typeof g&&g&&g.__esModule)return g;var C=Object.create(null);if(A.r(C),Object.defineProperty(C,"default",{enumerable:!0,value:g}),2&I&&"string"!=typeof g)for(var t in g)A.d(C,t,function(I){return g[I]}.bind(null,t));return C},A.n=function(g){var I=g&&g.__esModule?function(){return g.default}:function(){return g};return A.d(I,"a",I),I},A.o=function(g,I){return Object.prototype.hasOwnProperty.call(g,I)},A.p="",A(A.s=33)}([function(g,I,A){Object.defineProperty(I,"__esModule",{value:!0});var C=A(14);I.IBufferService=C.createDecorator("BufferService"),I.ICoreMouseService=C.createDecorator("CoreMouseService"),I.ICoreService=C.createDecorator("CoreService"),I.IDirtyRowService=C.createDecorator("DirtyRowService"),I.IInstantiationService=C.createDecorator("InstantiationService"),I.ILogService=C.createDecorator("LogService"),I.IOptionsService=C.createDecorator("OptionsService")},function(g,I,A){Object.defineProperty(I,"__esModule",{value:!0});var C=function(){function g(){this._listeners=[],this._disposed=!1}return Object.defineProperty(g.prototype,"event",{get:function(){var g=this;return this._event||(this._event=function(I){return g._listeners.push(I),{dispose:function(){if(!g._disposed)for(var A=0;A<g._listeners.length;A++)if(g._listeners[A]===I)return void g._listeners.splice(A,1)}}}),this._event},enumerable:!0,configurable:!0}),g.prototype.fire=function(g){for(var I=[],A=0;A<this._listeners.length;A++)I.push(this._listeners[A]);for(A=0;A<I.length;A++)I[A].call(void 0,g)},g.prototype.dispose=function(){this._listeners&&(this._listeners.length=0),this._disposed=!0},g}();I.EventEmitter=C},function(g,I,A){Object.defineProperty(I,"__esModule",{value:!0});var C=function(){function g(){this._disposables=[],this._isDisposed=!1}return g.prototype.dispose=function(){this._isDisposed=!0,this._disposables.forEach((function(g){return g.dispose()})),this._disposables.length=0},g.prototype.register=function(g){this._disposables.push(g)},g.prototype.unregister=function(g){var I=this._disposables.indexOf(g);-1!==I&&this._disposables.splice(I,1)},g}();I.Disposable=C},function(g,I,A){Object.defineProperty(I,"__esModule",{value:!0}),I.DEFAULT_COLOR=256,I.DEFAULT_ATTR=256|I.DEFAULT_COLOR<<9,I.CHAR_DATA_ATTR_INDEX=0,I.CHAR_DATA_CHAR_INDEX=1,I.CHAR_DATA_WIDTH_INDEX=2,I.CHAR_DATA_CODE_INDEX=3,I.NULL_CELL_CHAR="",I.NULL_CELL_WIDTH=1,I.NULL_CELL_CODE=0,I.WHITESPACE_CELL_CHAR=" ",I.WHITESPACE_CELL_WIDTH=1,I.WHITESPACE_CELL_CODE=32},function(g,I,A){Object.defineProperty(I,"__esModule",{value:!0});var C=A(14);I.ICharSizeService=C.createDecorator("CharSizeService"),I.ICoreBrowserService=C.createDecorator("CoreBrowserService"),I.IMouseService=C.createDecorator("MouseService"),I.IRenderService=C.createDecorator("RenderService"),I.ISelectionService=C.createDecorator("SelectionService"),I.ISoundService=C.createDecorator("SoundService")},function(g,I,A){var C,t=this&&this.__extends||(C=function(g,I){return(C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,I){g.__proto__=I}||function(g,I){for(var A in I)I.hasOwnProperty(A)&&(g[A]=I[A])})(g,I)},function(g,I){function A(){this.constructor=g}C(g,I),g.prototype=null===I?Object.create(I):(A.prototype=I.prototype,new A)});Object.defineProperty(I,"__esModule",{value:!0});var i=A(8),e=A(3),o=function(g){function I(){var I=null!==g&&g.apply(this,arguments)||this;return I.content=0,I.fg=0,I.bg=0,I.combinedData="",I}return t(I,g),I.fromCharData=function(g){var A=new I;return A.setFromCharData(g),A},I.prototype.isCombined=function(){return 2097152&this.content},I.prototype.getWidth=function(){return this.content>>22},I.prototype.getChars=function(){return 2097152&this.content?this.combinedData:2097151&this.content?i.stringFromCodePoint(2097151&this.content):""},I.prototype.getCode=function(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content},I.prototype.setFromCharData=function(g){this.fg=g[e.CHAR_DATA_ATTR_INDEX],this.bg=0;var I=!1;if(g[e.CHAR_DATA_CHAR_INDEX].length>2)I=!0;else if(2===g[e.CHAR_DATA_CHAR_INDEX].length){var A=g[e.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=A&&A<=56319){var C=g[e.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=C&&C<=57343?this.content=1024*(A-55296)+C-56320+65536|g[e.CHAR_DATA_WIDTH_INDEX]<<22:I=!0}else I=!0}else this.content=g[e.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|g[e.CHAR_DATA_WIDTH_INDEX]<<22;I&&(this.combinedData=g[e.CHAR_DATA_CHAR_INDEX],this.content=2097152|g[e.CHAR_DATA_WIDTH_INDEX]<<22)},I.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},I}(A(6).AttributeData);I.CellData=o},function(g,I,A){Object.defineProperty(I,"__esModule",{value:!0});var C=function(){function g(){this.fg=0,this.bg=0}return g.toColorRGB=function(g){return[g>>>16&255,g>>>8&255,255&g]},g.fromColorRGB=function(g){return(255&g[0])<<16|(255&g[1])<<8|255&g[2]},g.prototype.clone=function(){var I=new g;return I.fg=this.fg,I.bg=this.bg,I},g.prototype.isInverse=function(){return 67108864&this.fg},g.prototype.isBold=function(){return 134217728&this.fg},g.prototype.isUnderline=function(){return 268435456&this.fg},g.prototype.isBlink=function(){return 536870912&this.fg},g.prototype.isInvisible=function(){return 1073741824&this.fg},g.prototype.isItalic=function(){return 67108864&this.bg},g.prototype.isDim=function(){return 134217728&this.bg},g.prototype.getFgColorMode=function(){return 50331648&this.fg},g.prototype.getBgColorMode=function(){return 50331648&this.bg},g.prototype.isFgRGB=function(){return 50331648==(50331648&this.fg)},g.prototype.isBgRGB=function(){return 50331648==(50331648&this.bg)},g.prototype.isFgPalette=function(){return 16777216==(50331648&this.fg)||33554432==(50331648&this.fg)},g.prototype.isBgPalette=function(){return 16777216==(50331648&this.bg)||33554432==(50331648&this.bg)},g.prototype.isFgDefault=function(){return 0==(50331648&this.fg)},g.prototype.isBgDefault=function(){return 0==(50331648&this.bg)},g.prototype.getFgColor=function(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}},g.prototype.getBgColor=function(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}},g}();I.AttributeData=C},function(g,I,A){Object.defineProperty(I,"__esModule",{value:!0}),I.addDisposableDomListener=function(g,I,A,C){return g.addEventListener(I,A,C),{dispose:function(){A&&g.removeEventListener(I,A,C)}}}},function(g,I,A){Object.defineProperty(I,"__esModule",{value:!0}),I.stringFromCodePoint=function(g){return g>65535?(g-=65536,String.fromCharCode(55296+(g>>10))+String.fromCharCode(g%1024+56320)):String.fromCharCode(g)},I.utf32ToString=function(g,I,A){void 0===I&&(I=0),void 0===A&&(A=g.length);for(var C="",t=I;t<A;++t){var i=g[t];i>65535?(i-=65536,C+=String.fromCharCode(55296+(i>>10))+String.fromCharCode(i%1024+56320)):C+=String.fromCharCode(i)}return C};var C=function(){function g(){this._interim=0}return g.prototype.clear=function(){this._interim=0},g.prototype.decode=function(g,I){var A=g.length;if(!A)return 0;var C=0,t=0;this._interim&&(56320<=(o=g.charCodeAt(t++))&&o<=57343?I[C++]=1024*(this._interim-55296)+o-56320+65536:(I[C++]=this._interim,I[C++]=o),this._interim=0);for(var i=t;i<A;++i){var e=g.charCodeAt(i);if(55296<=e&&e<=56319){if(++i>=A)return this._interim=e,C;var o;56320<=(o=g.charCodeAt(i))&&o<=57343?I[C++]=1024*(e-55296)+o-56320+65536:(I[C++]=e,I[C++]=o)}else I[C++]=e}return C},g}();I.StringToUtf32=C;var t=function(){function g(){this.interim=new Uint8Array(3)}return g.prototype.clear=function(){this.interim.fill(0)},g.prototype.decode=function(g,I){var A=g.length;if(!A)return 0;var C,t,i,e,o=0,n=0,s=0;if(this.interim[0]){var l=!1,r=this.interim[0];r&=192==(224&r)?31:224==(240&r)?15:7;for(var c=0,a=void 0;(a=63&this.interim[++c])&&c<4;)r<<=6,r|=a;for(var d=192==(224&this.interim[0])?2:224==(240&this.interim[0])?3:4,h=d-c;s<h;){if(s>=A)return 0;if(128!=(192&(a=g[s++]))){s--,l=!0;break}this.interim[c++]=a,r<<=6,r|=63&a}l||(2===d?r<128?s--:I[o++]=r:3===d?r<2048||r>=55296&&r<=57343||(I[o++]=r):r<65536||r>1114111||(I[o++]=r)),this.interim.fill(0)}for(var m=A-4,Z=s;Z<A;){for(;!(!(Z<m)||128&(C=g[Z])||128&(t=g[Z+1])||128&(i=g[Z+2])||128&(e=g[Z+3]));)I[o++]=C,I[o++]=t,I[o++]=i,I[o++]=e,Z+=4;if((C=g[Z++])<128)I[o++]=C;else if(192==(224&C)){if(Z>=A)return this.interim[0]=C,o;if(128!=(192&(t=g[Z++]))){Z--;continue}if((n=(31&C)<<6|63&t)<128){Z--;continue}I[o++]=n}else if(224==(240&C)){if(Z>=A)return this.interim[0]=C,o;if(128!=(192&(t=g[Z++]))){Z--;continue}if(Z>=A)return this.interim[0]=C,this.interim[1]=t,o;if(128!=(192&(i=g[Z++]))){Z--;continue}if((n=(15&C)<<12|(63&t)<<6|63&i)<2048||n>=55296&&n<=57343)continue;I[o++]=n}else if(240==(248&C)){if(Z>=A)return this.interim[0]=C,o;if(128!=(192&(t=g[Z++]))){Z--;continue}if(Z>=A)return this.interim[0]=C,this.interim[1]=t,o;if(128!=(192&(i=g[Z++]))){Z--;continue}if(Z>=A)return this.interim[0]=C,this.interim[1]=t,this.interim[2]=i,o;if(128!=(192&(e=g[Z++]))){Z--;continue}if((n=(7&C)<<18|(63&t)<<12|(63&i)<<6|63&e)<65536||n>1114111)continue;I[o++]=n}}return o},g}();I.Utf8ToUtf32=t},function(g,I,A){Object.defineProperty(I,"__esModule",{value:!0}),I.INVERTED_DEFAULT_COLOR=257,I.DIM_OPACITY=.5,I.CHAR_ATLAS_CELL_SPACING=1},function(g,I,A){function C(g){var I=g.toString(16);return I.length<2?"0"+I:I}function t(g,I,A,t){return void 0!==t?"#"+C(g)+C(I)+C(A)+C(t):"#"+C(g)+C(I)+C(A)}function i(g,I,A,C){return void 0===C&&(C=255),(g<<24|I<<16|A<<8|C)>>>0}function e(g){return[g>>24&255,g>>16&255,g>>8&255,255&g]}function o(g){return n(g>>16&255,g>>8&255,255&g)}function n(g,I,A){var C=g/255,t=I/255,i=A/255;return.2126*(C<=.03928?C/12.92:Math.pow((C+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.0722*(i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4))}function s(g,I){return g<I?(I+.05)/(g+.05):(g+.05)/(I+.05)}function l(g,I,A){return{css:t(g,I,A),rgba:i(g,I,A)}}function r(g,I,A){var C=o(g>>8),t=o(I>>8);if(s(C,t)<A)return t<C?c(g,I,A):a(g,I,A)}function c(g,I,A){for(var C=g>>24&255,t=g>>16&255,i=g>>8&255,e=I>>24&255,o=I>>16&255,l=I>>8&255,r=s(n(e,l,o),n(C,t,i));r<A&&(e>0||o>0||l>0);)e-=Math.max(0,Math.ceil(.1*e)),o-=Math.max(0,Math.ceil(.1*o)),r=s(n(e,l-=Math.max(0,Math.ceil(.1*l)),o),n(C,t,i));return(e<<24|o<<16|l<<8|255)>>>0}function a(g,I,A){for(var C=g>>24&255,t=g>>16&255,i=g>>8&255,e=I>>24&255,o=I>>16&255,l=I>>8&255,r=s(n(e,l,o),n(C,t,i));r<A&&(e<255||o<255||l<255);)e=Math.min(255,e+Math.ceil(.1*(255-e))),o=Math.min(255,o+Math.ceil(.1*(255-o))),r=s(n(e,l=Math.min(255,l+Math.ceil(.1*(255-l))),o),n(C,t,i));return(e<<24|o<<16|l<<8|255)>>>0}Object.defineProperty(I,"__esModule",{value:!0}),I.blend=function(g,I){var A=(255&I.rgba)/255;if(1===A)return{css:I.css,rgba:I.rgba};var C=I.rgba>>24&255,e=I.rgba>>16&255,o=I.rgba>>8&255,n=g.rgba>>24&255,s=g.rgba>>16&255,l=g.rgba>>8&255,r=n+Math.round((C-n)*A),c=s+Math.round((e-s)*A),a=l+Math.round((o-l)*A);return{css:t(r,c,a),rgba:i(r,c,a)}},I.fromCss=function(g){return{css:g,rgba:(parseInt(g.slice(1),16)<<8|255)>>>0}},I.toPaddedHex=C,I.toCss=t,I.toRgba=i,I.fromRgba=e,I.opaque=function(g){var I=(255|g.rgba)>>>0,A=e(I);return{css:t(A[0],A[1],A[2]),rgba:I}},I.rgbRelativeLuminance=o,I.rgbRelativeLuminance2=n,I.contrastRatio=s,I.rgbaToColor=l,I.ensureContrastRatioRgba=r,I.ensureContrastRatio=function(g,I,A){var C=r(g.rgba,I.rgba,A);if(C)return l(C>>24&255,C>>16&255,C>>8&255)},I.reduceLuminance=c,I.increaseLuminance=a},function(g,I,A){Object.defineProperty(I,"__esModule",{value:!0});var C="undefined"==typeof navigator,t=C?"node":navigator.userAgent,i=C?"node":navigator.platform;function e(g,I){return g.indexOf(I)>=0}I.isFirefox=!!~t.indexOf("Firefox"),I.isSafari=/^((?!chrome|android).)*safari/i.test(t),I.isMac=e(["Macintosh","MacIntel","MacPPC","Mac68K"],i),I.isIpad="iPad"===i,I.isIphone="iPhone"===i,I.isWindows=e(["Windows","Win16","Win32","WinCE"],i),I.isLinux=i.indexOf("Linux")>=0},function(g,I,A){var C;Object.defineProperty(I,"__esModule",{value:!0}),(C=I.C0||(I.C0={})).NUL="\0",C.SOH="",C.STX="",C.ETX="",C.EOT="",C.ENQ="",C.ACK="",C.BEL="",C.BS="\b",C.HT="\t",C.LF="\n",C.VT="\v",C.FF="\f",C.CR="\r",C.SO="",C.SI="",C.DLE="",C.DC1="",C.DC2="",C.DC3="",C.DC4="",C.NAK="",C.SYN="",C.ETB="",C.CAN="",C.EM="",C.SUB="",C.ESC="",C.FS="",C.GS="",C.RS="",C.US="",C.SP=" ",C.DEL="",function(g){g.PAD="¬Ä",g.HOP="¬Å",g.BPH="¬Ç",g.NBH="¬É",g.IND="¬Ñ",g.NEL="¬Ö",g.SSA="¬Ü",g.ESA="¬á",g.HTS="¬à",g.HTJ="¬â",g.VTS="¬ä",g.PLD="¬ã",g.PLU="¬å",g.RI="¬ç",g.SS2="¬é",g.SS3="¬è",g.DCS="¬ê",g.PU1="¬ë",g.PU2="¬í",g.STS="¬ì",g.CCH="¬î",g.MW="¬ï",g.SPA="¬ñ",g.EPA="¬ó",g.SOS="¬ò",g.SGCI="¬ô",g.SCI="¬ö",g.CSI="¬õ",g.ST="¬ú",g.OSC="¬ù",g.PM="¬û",g.APC="¬ü"}(I.C1||(I.C1={}))},function(g,I,A){Object.defineProperty(I,"__esModule",{value:!0});var C=A(3),t=A(9),i=A(24),e=A(6),o=A(27),n=A(10),s=function(){function g(g,I,A,C,t,i,e,o){this._container=g,this._alpha=C,this._colors=t,this._rendererId=i,this._bufferService=e,this._optionsService=o,this._scaledCharWidth=0,this._scaledCharHeight=0,this._scaledCellWidth=0,this._scaledCellHeight=0,this._scaledCharLeft=0,this._scaledCharTop=0,this._currentGlyphIdentifier={chars:"",code:0,bg:0,fg:0,bold:!1,dim:!1,italic:!1},this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-"+I+"-layer"),this._canvas.style.zIndex=A.toString(),this._initCanvas(),this._container.appendChild(this._canvas)}return g.prototype.dispose=function(){var g;this._container.removeChild(this._canvas),null===(g=this._charAtlas)||void 0===g||g.dispose()},g.prototype._initCanvas=function(){this._ctx=o.throwIfFalsy(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()},g.prototype.onOptionsChanged=function(){},g.prototype.onBlur=function(){},g.prototype.onFocus=function(){},g.prototype.onCursorMove=function(){},g.prototype.onGridChanged=function(g,I){},g.prototype.onSelectionChanged=function(g,I,A){},g.prototype.setColors=function(g){this._refreshCharAtlas(g)},g.prototype._setTransparency=function(g){if(g!==this._alpha){var I=this._canvas;this._alpha=g,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,I),this._refreshCharAtlas(this._colors),this.onGridChanged(0,this._bufferService.rows-1)}},g.prototype._refreshCharAtlas=function(g){this._scaledCharWidth<=0&&this._scaledCharHeight<=0||(this._charAtlas=i.acquireCharAtlas(this._optionsService.options,this._rendererId,g,this._scaledCharWidth,this._scaledCharHeight),this._charAtlas.warmUp())},g.prototype.resize=function(g){this._scaledCellWidth=g.scaledCellWidth,this._scaledCellHeight=g.scaledCellHeight,this._scaledCharWidth=g.scaledCharWidth,this._scaledCharHeight=g.scaledCharHeight,this._scaledCharLeft=g.scaledCharLeft,this._scaledCharTop=g.scaledCharTop,this._canvas.width=g.scaledCanvasWidth,this._canvas.height=g.scaledCanvasHeight,this._canvas.style.width=g.canvasWidth+"px",this._canvas.style.height=g.canvasHeight+"px",this._alpha||this._clearAll(),this._refreshCharAtlas(this._colors)},g.prototype._fillCells=function(g,I,A,C){this._ctx.fillRect(g*this._scaledCellWidth,I*this._scaledCellHeight,A*this._scaledCellWidth,C*this._scaledCellHeight)},g.prototype._fillBottomLineAtCells=function(g,I,A){void 0===A&&(A=1),this._ctx.fillRect(g*this._scaledCellWidth,(I+1)*this._scaledCellHeight-window.devicePixelRatio-1,A*this._scaledCellWidth,window.devicePixelRatio)},g.prototype._fillLeftLineAtCell=function(g,I){this._ctx.fillRect(g*this._scaledCellWidth,I*this._scaledCellHeight,window.devicePixelRatio,this._scaledCellHeight)},g.prototype._strokeRectAtCell=function(g,I,A,C){this._ctx.lineWidth=window.devicePixelRatio,this._ctx.strokeRect(g*this._scaledCellWidth+window.devicePixelRatio/2,I*this._scaledCellHeight+window.devicePixelRatio/2,A*this._scaledCellWidth-window.devicePixelRatio,C*this._scaledCellHeight-window.devicePixelRatio)},g.prototype._clearAll=function(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))},g.prototype._clearCells=function(g,I,A,C){this._alpha?this._ctx.clearRect(g*this._scaledCellWidth,I*this._scaledCellHeight,A*this._scaledCellWidth,C*this._scaledCellHeight):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(g*this._scaledCellWidth,I*this._scaledCellHeight,A*this._scaledCellWidth,C*this._scaledCellHeight))},g.prototype._fillCharTrueColor=function(g,I,A){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline="middle",this._clipRow(A),this._ctx.fillText(g.getChars(),I*this._scaledCellWidth+this._scaledCharLeft,A*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight/2)},g.prototype._drawChars=function(g,I,A){var i,e,o=this._getContrastColor(g);o||g.isFgRGB()||g.isBgRGB()?this._drawUncachedChars(g,I,A,o):(g.isInverse()?(i=g.isBgDefault()?t.INVERTED_DEFAULT_COLOR:g.getBgColor(),e=g.isFgDefault()?t.INVERTED_DEFAULT_COLOR:g.getFgColor()):(e=g.isBgDefault()?C.DEFAULT_COLOR:g.getBgColor(),i=g.isFgDefault()?C.DEFAULT_COLOR:g.getFgColor()),i+=this._optionsService.options.drawBoldTextInBrightColors&&g.isBold()&&i<8?8:0,this._currentGlyphIdentifier.chars=g.getChars()||C.WHITESPACE_CELL_CHAR,this._currentGlyphIdentifier.code=g.getCode()||C.WHITESPACE_CELL_CODE,this._currentGlyphIdentifier.bg=e,this._currentGlyphIdentifier.fg=i,this._currentGlyphIdentifier.bold=!!g.isBold(),this._currentGlyphIdentifier.dim=!!g.isDim(),this._currentGlyphIdentifier.italic=!!g.isItalic(),this._charAtlas&&this._charAtlas.draw(this._ctx,this._currentGlyphIdentifier,I*this._scaledCellWidth+this._scaledCharLeft,A*this._scaledCellHeight+this._scaledCharTop)||this._drawUncachedChars(g,I,A))},g.prototype._drawUncachedChars=function(g,I,A,C){if(this._ctx.save(),this._ctx.font=this._getFont(!!g.isBold(),!!g.isItalic()),this._ctx.textBaseline="middle",g.isInverse())if(C)this._ctx.fillStyle=C.css;else if(g.isBgDefault())this._ctx.fillStyle=n.opaque(this._colors.background).css;else if(g.isBgRGB())this._ctx.fillStyle="rgb("+e.AttributeData.toColorRGB(g.getBgColor()).join(",")+")";else{var i=g.getBgColor();this._optionsService.options.drawBoldTextInBrightColors&&g.isBold()&&i<8&&(i+=8),this._ctx.fillStyle=this._colors.ansi[i].css}else if(C)this._ctx.fillStyle=C.css;else if(g.isFgDefault())this._ctx.fillStyle=this._colors.foreground.css;else if(g.isFgRGB())this._ctx.fillStyle="rgb("+e.AttributeData.toColorRGB(g.getFgColor()).join(",")+")";else{var o=g.getFgColor();this._optionsService.options.drawBoldTextInBrightColors&&g.isBold()&&o<8&&(o+=8),this._ctx.fillStyle=this._colors.ansi[o].css}this._clipRow(A),g.isDim()&&(this._ctx.globalAlpha=t.DIM_OPACITY),this._ctx.fillText(g.getChars(),I*this._scaledCellWidth+this._scaledCharLeft,A*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight/2),this._ctx.restore()},g.prototype._clipRow=function(g){this._ctx.beginPath(),this._ctx.rect(0,g*this._scaledCellHeight,this._bufferService.cols*this._scaledCellWidth,this._scaledCellHeight),this._ctx.clip()},g.prototype._getFont=function(g,I){return(I?"italic":"")+" "+(g?this._optionsService.options.fontWeightBold:this._optionsService.options.fontWeight)+" "+this._optionsService.options.fontSize*window.devicePixelRatio+"px "+this._optionsService.options.fontFamily},g.prototype._getContrastColor=function(g){if(1!==this._optionsService.options.minimumContrastRatio){var I=this._colors.contrastCache.getColor(g.bg,g.fg);if(void 0!==I)return I||void 0;var A=g.getFgColor(),C=g.getFgColorMode(),t=g.getBgColor(),i=g.getBgColorMode(),e=!!g.isInverse(),o=!!g.isInverse();if(e){var s=A;A=t,t=s;var l=C;C=i,i=l}var r=this._resolveBackgroundRgba(i,t,e),c=this._resolveForegroundRgba(C,A,e,o),a=n.ensureContrastRatioRgba(r,c,this._optionsService.options.minimumContrastRatio);if(a){var d={css:n.toCss(a>>24&255,a>>16&255,a>>8&255),rgba:a};return this._colors.contrastCache.setColor(g.bg,g.fg,d),d}this._colors.contrastCache.setColor(g.bg,g.fg,null)}},g.prototype._resolveBackgroundRgba=function(g,I,A){switch(g){case 16777216:case 33554432:return this._colors.ansi[I].rgba;case 50331648:return I<<8;case 0:default:return A?this._colors.foreground.rgba:this._colors.background.rgba}},g.prototype._resolveForegroundRgba=function(g,I,A,C){switch(g){case 16777216:case 33554432:return this._optionsService.options.drawBoldTextInBrightColors&&C&&I<8&&(I+=8),this._colors.ansi[I].rgba;case 50331648:return I<<8;case 0:default:return A?this._colors.background.rgba:this._colors.foreground.rgba}},g}();I.BaseRenderLayer=s},function(g,I,A){Object.defineProperty(I,"__esModule",{value:!0});var C="di$target",t="di$dependencies";function i(g,I,A){I[C]===I?I[t].push({id:g,index:A}):(I[t]=[{id:g,index:A}],I[C]=I)}I.serviceRegistry=new Map,I.getServiceDependencies=function(g){return g[t]||[]},I.createDecorator=function(g){if(I.serviceRegistry.has(g))return I.serviceRegistry.get(g);var A=function(g,I,C){if(3!==arguments.length)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");i(A,g,C)};return A.toString=function(){return g},I.serviceRegistry.set(g,A),A}},function(g,I,A){function C(g,I,A,C){if(void 0===A&&(A=0),void 0===C&&(C=g.length),A>=g.length)return g;A=(g.length+A)%g.length,C=C>=g.length?g.length:(g.length+C)%g.length;for(var t=A;t<C;++t)g[t]=I;return g}Object.defineProperty(I,"__esModule",{value:!0}),I.fill=function(g,I,A,t){return g.fill?g.fill(I,A,t):C(g,I,A,t)},I.fillFallback=C,I.concat=function(g,I){var A=new g.constructor(g.length+I.length);return A.set(g),A.set(I,g.length),A}},function(g,I,A){Object.defineProperty(I,"__esModule",{value:!0});var C=A(8),t=A(3),i=A(5),e=A(6),o=3;I.DEFAULT_ATTR_DATA=Object.freeze(new e.AttributeData);var n=function(){function g(g,I,A){void 0===A&&(A=!1),this.isWrapped=A,this._combined={},this._data=new Uint32Array(g*o);for(var C=I||i.CellData.fromCharData([0,t.NULL_CELL_CHAR,t.NULL_CELL_WIDTH,t.NULL_CELL_CODE]),e=0;e<g;++e)this.setCell(e,C);this.length=g}return g.prototype.get=function(g){var I=this._data[g*o+0],A=2097151&I;return[this._data[g*o+1],2097152&I?this._combined[g]:A?C.stringFromCodePoint(A):"",I>>22,2097152&I?this._combined[g].charCodeAt(this._combined[g].length-1):A]},g.prototype.set=function(g,I){this._data[g*o+1]=I[t.CHAR_DATA_ATTR_INDEX],I[t.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[g]=I[1],this._data[g*o+0]=2097152|g|I[t.CHAR_DATA_WIDTH_INDEX]<<22):this._data[g*o+0]=I[t.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|I[t.CHAR_DATA_WIDTH_INDEX]<<22},g.prototype.getWidth=function(g){return this._data[g*o+0]>>22},g.prototype.hasWidth=function(g){return 12582912&this._data[g*o+0]},g.prototype.getFg=function(g){return this._data[g*o+1]},g.prototype.getBg=function(g){return this._data[g*o+2]},g.prototype.hasContent=function(g){return 4194303&this._data[g*o+0]},g.prototype.getCodePoint=function(g){var I=this._data[g*o+0];return 2097152&I?this._combined[g].charCodeAt(this._combined[g].length-1):2097151&I},g.prototype.isCombined=function(g){return 2097152&this._data[g*o+0]},g.prototype.getString=function(g){var I=this._data[g*o+0];return 2097152&I?this._combined[g]:2097151&I?C.stringFromCodePoint(2097151&I):""},g.prototype.loadCell=function(g,I){var A=g*o;return I.content=this._data[A+0],I.fg=this._data[A+1],I.bg=this._data[A+2],2097152&I.content&&(I.combinedData=this._combined[g]),I},g.prototype.setCell=function(g,I){2097152&I.content&&(this._combined[g]=I.combinedData),this._data[g*o+0]=I.content,this._data[g*o+1]=I.fg,this._data[g*o+2]=I.bg},g.prototype.setCellFromCodePoint=function(g,I,A,C,t){this._data[g*o+0]=I|A<<22,this._data[g*o+1]=C,this._data[g*o+2]=t},g.prototype.addCodepointToCell=function(g,I){var A=this._data[g*o+0];2097152&A?this._combined[g]+=C.stringFromCodePoint(I):(2097151&A?(this._combined[g]=C.stringFromCodePoint(2097151&A)+C.stringFromCodePoint(I),A&=-2097152,A|=2097152):A=I|1<<22,this._data[g*o+0]=A)},g.prototype.insertCells=function(g,I,A){if(g%=this.length,I<this.length-g){for(var C=new i.CellData,t=this.length-g-I-1;t>=0;--t)this.setCell(g+I+t,this.loadCell(g+t,C));for(t=0;t<I;++t)this.setCell(g+t,A)}else for(t=g;t<this.length;++t)this.setCell(t,A)},g.prototype.deleteCells=function(g,I,A){if(g%=this.length,I<this.length-g){for(var C=new i.CellData,t=0;t<this.length-g-I;++t)this.setCell(g+t,this.loadCell(g+I+t,C));for(t=this.length-I;t<this.length;++t)this.setCell(t,A)}else for(t=g;t<this.length;++t)this.setCell(t,A)},g.prototype.replaceCells=function(g,I,A){for(;g<I&&g<this.length;)this.setCell(g++,A)},g.prototype.resize=function(g,I){if(g!==this.length){if(g>this.length){var A=new Uint32Array(g*o);this.length&&(g*o<this._data.length?A.set(this._data.subarray(0,g*o)):A.set(this._data)),this._data=A;for(var C=this.length;C<g;++C)this.setCell(C,I)}else if(g){(A=new Uint32Array(g*o)).set(this._data.subarray(0,g*o)),this._data=A;var t=Object.keys(this._combined);for(C=0;C<t.length;C++){var i=parseInt(t[C],10);i>=g&&delete this._combined[i]}}else this._data=new Uint32Array(0),this._combined={};this.length=g}},g.prototype.fill=function(g){this._combined={};for(var I=0;I<this.length;++I)this.setCell(I,g)},g.prototype.copyFrom=function(g){for(var I in this.length!==g.length?this._data=new Uint32Array(g._data):this._data.set(g._data),this.length=g.length,this._combined={},g._combined)this._combined[I]=g._combined[I];this.isWrapped=g.isWrapped},g.prototype.clone=function(){var I=new g(0);for(var A in I._data=new Uint32Array(this._data),I.length=this.length,this._combined)I._combined[A]=this._combined[A];return I.isWrapped=this.isWrapped,I},g.prototype.getTrimmedLength=function(){for(var g=this.length-1;g>=0;--g)if(4194303&this._data[g*o+0])return g+(this._data[g*o+0]>>22);return 0},g.prototype.copyCellsFrom=function(g,I,A,C,t){var i=g._data;if(t)for(var e=C-1;e>=0;e--)for(var n=0;n<o;n++)this._data[(A+e)*o+n]=i[(I+e)*o+n];else for(e=0;e<C;e++)for(n=0;n<o;n++)this._data[(A+e)*o+n]=i[(I+e)*o+n];var s=Object.keys(g._combined);for(n=0;n<s.length;n++){var l=parseInt(s[n],10);l>=I&&(this._combined[l-I+A]=g._combined[l])}},g.prototype.translateToString=function(g,I,A){void 0===g&&(g=!1),void 0===I&&(I=0),void 0===A&&(A=this.length),g&&(A=Math.min(A,this.getTrimmedLength()));for(var i="";I<A;){var e=this._data[I*o+0],n=2097151&e;i+=2097152&e?this._combined[I]:n?C.stringFromCodePoint(n):t.WHITESPACE_CELL_CHAR,I+=e>>22||1}return i},g}();I.BufferLine=n},function(g,I,A){Object.defineProperty(I,"__esModule",{value:!0}),I.promptLabel="Terminal input",I.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},function(g,I,A){Object.defineProperty(I,"__esModule",{value:!0}),I.CHARSETS={},I.DEFAULT_CHARSET=I.CHARSETS.B,I.CHARSETS[0]={"`":"‚óÜ",a:"‚ñí",b:"\t",c:"\f",d:"\r",e:"\n",f:"¬∞",g:"¬±",h:"‚ê§",i:"\v",j:"‚îò",k:"‚îê",l:"‚îå",m:"‚îî",n:"‚îº",o:"‚é∫",p:"‚éª",q:"‚îÄ",r:"‚éº",s:"‚éΩ",t:"‚îú",u:"‚î§",v:"‚î¥",w:"‚î¨",x:"‚îÇ",y:"‚â§",z:"‚â•","{":"œÄ","|":"‚â†","}":"¬£","~":"¬∑"},I.CHARSETS.A={"#":"¬£"},I.CHARSETS.B=null,I.CHARSETS[4]={"#":"¬£","@":"¬æ","[":"ij","\\":"¬Ω","]":"|","{":"¬®","|":"f","}":"¬º","~":"¬¥"},I.CHARSETS.C=I.CHARSETS[5]={"[":"√Ñ","\\":"√ñ","]":"√Ö","^":"√ú","`":"√©","{":"√§","|":"√∂","}":"√•","~":"√º"},I.CHARSETS.R={"#":"¬£","@":"√†","[":"¬∞","\\":"√ß","]":"¬ß","{":"√©","|":"√π","}":"√®","~":"¬®"},I.CHARSETS.Q={"@":"√†","[":"√¢","\\":"√ß","]":"√™","^":"√Æ","`":"√¥","{":"√©","|":"√π","}":"√®","~":"√ª"},I.CHARSETS.K={"@":"¬ß","[":"√Ñ","\\":"√ñ","]":"√ú","{":"√§","|":"√∂","}":"√º","~":"√ü"},I.CHARSETS.Y={"#":"¬£","@":"¬ß","[":"¬∞","\\":"√ß","]":"√©","`":"√π","{":"√†","|":"√≤","}":"√®","~":"√¨"},I.CHARSETS.E=I.CHARSETS[6]={"@":"√Ñ","[":"√Ü","\\":"√ò","]":"√Ö","^":"√ú","`":"√§","{":"√¶","|":"√∏","}":"√•","~":"√º"},I.CHARSETS.Z={"#":"¬£","@":"¬ß","[":"¬°","\\":"√ë","]":"¬ø","{":"¬∞","|":"√±","}":"√ß"},I.CHARSETS.H=I.CHARSETS[7]={"@":"√â","[":"√Ñ","\\":"√ñ","]":"√Ö","^":"√ú","`":"√©","{":"√§","|":"√∂","}":"√•","~":"√º"},I.CHARSETS["="]={"#":"√π","@":"√†","[":"√©","\\":"√ß","]":"√™","^":"√Æ",_:"√®","`":"√¥","{":"√§","|":"√∂","}":"√º","~":"√ª"}},function(g,I,A){Object.defineProperty(I,"__esModule",{value:!0});var C=A(15);I.wcwidth=function(g){var I=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],A=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],t=0|g.control,i=new Uint8Array(65536);C.fill(i,1),i[0]=g.nul,C.fill(i,g.control,1,32),C.fill(i,g.control,127,160),C.fill(i,2,4352,4448),i[9001]=2,i[9002]=2,C.fill(i,2,11904,42192),i[12351]=1,C.fill(i,2,44032,55204),C.fill(i,2,63744,64256),C.fill(i,2,65040,65050),C.fill(i,2,65072,65136),C.fill(i,2,65280,65377),C.fill(i,2,65504,65511);for(var e=0;e<I.length;++e)C.fill(i,0,I[e][0],I[e][1]+1);return function(g){return g<32?0|t:g<127?1:g<65536?i[g]:function(g,I){var A,C=0,t=I.length-1;if(g<I[0][0]||g>I[t][1])return!1;for(;t>=C;)if(g>I[A=C+t>>1][1])C=A+1;else{if(!(g<I[A][0]))return!0;t=A-1}return!1}(I=g,A)?0:I>=131072&&I<=196605||I>=196608&&I<=262141?2:1;var I}}({nul:0,control:0}),I.getStringCellWidth=function(g){for(var A=0,C=g.length,t=0;t<C;++t){var i=g.charCodeAt(t);if(55296<=i&&i<=56319){if(++t>=C)return A+I.wcwidth(i);var e=g.charCodeAt(t);56320<=e&&e<=57343?i=1024*(i-55296)+e-56320+65536:A+=I.wcwidth(e)}A+=I.wcwidth(i)}return A}},function(g,I,A){Object.defineProperty(I,"__esModule",{value:!0});var C=256,t=function(){function g(g,I){if(void 0===g&&(g=32),void 0===I&&(I=32),this.maxLength=g,this.maxSubParamsLength=I,I>C)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(g),this.length=0,this._subParams=new Int32Array(I),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(g),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}return g.fromArray=function(I){var A=new g;if(!I.length)return A;for(var C=I[0]instanceof Array?1:0;C<I.length;++C){var t=I[C];if(t instanceof Array)for(var i=0;i<t.length;++i)A.addSubParam(t[i]);else A.addParam(t)}return A},g.prototype.clone=function(){var I=new g(this.maxLength,this.maxSubParamsLength);return I.params.set(this.params),I.length=this.length,I._subParams.set(this._subParams),I._subParamsLength=this._subParamsLength,I._subParamsIdx.set(this._subParamsIdx),I._rejectDigits=this._rejectDigits,I._rejectSubDigits=this._rejectSubDigits,I._digitIsSub=this._digitIsSub,I},g.prototype.toArray=function(){for(var g=[],I=0;I<this.length;++I){g.push(this.params[I]);var A=this._subParamsIdx[I]>>8,C=255&this._subParamsIdx[I];C-A>0&&g.push(Array.prototype.slice.call(this._subParams,A,C))}return g},g.prototype.reset=function(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1},g.prototype.addParam=function(g){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(g<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=g>2147483647?2147483647:g}},g.prototype.addSubParam=function(g){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(g<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=g>2147483647?2147483647:g,this._subParamsIdx[this.length-1]++}},g.prototype.hasSubParams=function(g){return(255&this._subParamsIdx[g])-(this._subParamsIdx[g]>>8)>0},g.prototype.getSubParams=function(g){var I=this._subParamsIdx[g]>>8,A=255&this._subParamsIdx[g];return A-I>0?this._subParams.subarray(I,A):null},g.prototype.getSubParamsAll=function(){for(var g={},I=0;I<this.length;++I){var A=this._subParamsIdx[I]>>8,C=255&this._subParamsIdx[I];C-A>0&&(g[I]=this._subParams.slice(A,C))}return g},g.prototype.addDigit=function(g){var I;if(!(this._rejectDigits||!(I=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)){var A=this._digitIsSub?this._subParams:this.params,C=A[I-1];A[I-1]=~C?Math.min(10*C+g,2147483647):g}},g}();I.Params=t},function(g,I,A){Object.defineProperty(I,"__esModule",{value:!0});var C=A(22),t=A(8),i=function(){function g(){this._state=0,this._id=-1,this._handlers=Object.create(null),this._handlerFb=function(){}}return g.prototype.addHandler=function(g,I){void 0===this._handlers[g]&&(this._handlers[g]=[]);var A=this._handlers[g];return A.push(I),{dispose:function(){var g=A.indexOf(I);-1!==g&&A.splice(g,1)}}},g.prototype.setHandler=function(g,I){this._handlers[g]=[I]},g.prototype.clearHandler=function(g){this._handlers[g]&&delete this._handlers[g]},g.prototype.setHandlerFallback=function(g){this._handlerFb=g},g.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){}},g.prototype.reset=function(){2===this._state&&this.end(!1),this._id=-1,this._state=0},g.prototype._start=function(){var g=this._handlers[this._id];if(g)for(var I=g.length-1;I>=0;I--)g[I].start();else this._handlerFb(this._id,"START")},g.prototype._put=function(g,I,A){var C=this._handlers[this._id];if(C)for(var i=C.length-1;i>=0;i--)C[i].put(g,I,A);else this._handlerFb(this._id,"PUT",t.utf32ToString(g,I,A))},g.prototype._end=function(g){var I=this._handlers[this._id];if(I){for(var A=I.length-1;A>=0&&!1===I[A].end(g);A--);for(A--;A>=0;A--)I[A].end(!1)}else this._handlerFb(this._id,"END",g)},g.prototype.start=function(){this.reset(),this._id=-1,this._state=1},g.prototype.put=function(g,I,A){if(3!==this._state){if(1===this._state)for(;I<A;){var C=g[I++];if(59===C){this._state=2,this._start();break}if(C<48||57<C)return void(this._state=3);-1===this._id&&(this._id=0),this._id=10*this._id+C-48}2===this._state&&A-I>0&&this._put(g,I,A)}},g.prototype.end=function(g){0!==this._state&&(3!==this._state&&(1===this._state&&this._start(),this._end(g)),this._id=-1,this._state=0)},g}();I.OscParser=i;var e=function(){function g(g){this._handler=g,this._data="",this._hitLimit=!1}return g.prototype.start=function(){this._data="",this._hitLimit=!1},g.prototype.put=function(g,I,A){this._hitLimit||(this._data+=t.utf32ToString(g,I,A),this._data.length>C.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},g.prototype.end=function(g){var I;return this._hitLimit?I=!1:g&&(I=this._handler(this._data)),this._data="",this._hitLimit=!1,I},g}();I.OscHandler=e},function(g,I,A){Object.defineProperty(I,"__esModule",{value:!0}),I.PAYLOAD_LIMIT=1e7},function(g,I,A){Object.defineProperty(I,"__esModule",{value:!0});var C=A(8),t=A(20),i=A(22),e=[],o=function(){function g(){this._handlers=Object.create(null),this._active=e,this._ident=0,this._handlerFb=function(){}}return g.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){}},g.prototype.addHandler=function(g,I){void 0===this._handlers[g]&&(this._handlers[g]=[]);var A=this._handlers[g];return A.push(I),{dispose:function(){var g=A.indexOf(I);-1!==g&&A.splice(g,1)}}},g.prototype.setHandler=function(g,I){this._handlers[g]=[I]},g.prototype.clearHandler=function(g){this._handlers[g]&&delete this._handlers[g]},g.prototype.setHandlerFallback=function(g){this._handlerFb=g},g.prototype.reset=function(){this._active.length&&this.unhook(!1),this._active=e,this._ident=0},g.prototype.hook=function(g,I){if(this.reset(),this._ident=g,this._active=this._handlers[g]||e,this._active.length)for(var A=this._active.length-1;A>=0;A--)this._active[A].hook(I);else this._handlerFb(this._ident,"HOOK",I)},g.prototype.put=function(g,I,A){if(this._active.length)for(var t=this._active.length-1;t>=0;t--)this._active[t].put(g,I,A);else this._handlerFb(this._ident,"PUT",C.utf32ToString(g,I,A))},g.prototype.unhook=function(g){if(this._active.length){for(var I=this._active.length-1;I>=0&&!1===this._active[I].unhook(g);I--);for(I--;I>=0;I--)this._active[I].unhook(!1)}else this._handlerFb(this._ident,"UNHOOK",g);this._active=e,this._ident=0},g}();I.DcsParser=o;var n=function(){function g(g){this._handler=g,this._data="",this._hitLimit=!1}return g.prototype.hook=function(g){this._params=g.clone(),this._data="",this._hitLimit=!1},g.prototype.put=function(g,I,A){this._hitLimit||(this._data+=C.utf32ToString(g,I,A),this._data.length>i.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},g.prototype.unhook=function(g){var I;return this._hitLimit?I=!1:g&&(I=this._handler(this._data,this._params?this._params:new t.Params)),this._params=void 0,this._data="",this._hitLimit=!1,I},g}();I.DcsHandler=n},function(g,I,A){Object.defineProperty(I,"__esModule",{value:!0});var C=A(25),t=A(43),i=[];I.acquireCharAtlas=function(g,I,A,e,o){for(var n=C.generateConfig(e,o,g,A),s=0;s<i.length;s++){var l=(r=i[s]).ownedBy.indexOf(I);if(l>=0){if(C.configEquals(r.config,n))return r.atlas;1===r.ownedBy.length?(r.atlas.dispose(),i.splice(s,1)):r.ownedBy.splice(l,1);break}}for(s=0;s<i.length;s++){var r=i[s];if(C.configEquals(r.config,n))return r.ownedBy.push(I),r.atlas}var c={atlas:new t.DynamicCharAtlas(document,n),config:n,ownedBy:[I]};return i.push(c),c.atlas},I.removeTerminalFromCache=function(g){for(var I=0;I<i.length;I++){var A=i[I].ownedBy.indexOf(g);if(-1!==A){1===i[I].ownedBy.length?(i[I].atlas.dispose(),i.splice(I,1)):i[I].ownedBy.splice(A,1);break}}}},function(g,I,A){Object.defineProperty(I,"__esModule",{value:!0});var C=A(3);I.generateConfig=function(g,I,A,C){var t={foreground:C.foreground,background:C.background,cursor:void 0,cursorAccent:void 0,selection:void 0,ansi:C.ansi.slice(0,16)};return{devicePixelRatio:window.devicePixelRatio,scaledCharWidth:g,scaledCharHeight:I,fontFamily:A.fontFamily,fontSize:A.fontSize,fontWeight:A.fontWeight,fontWeightBold:A.fontWeightBold,allowTransparency:A.allowTransparency,colors:t}},I.configEquals=function(g,I){for(var A=0;A<g.colors.ansi.length;A++)if(g.colors.ansi[A].rgba!==I.colors.ansi[A].rgba)return!1;return g.devicePixelRatio===I.devicePixelRatio&&g.fontFamily===I.fontFamily&&g.fontSize===I.fontSize&&g.fontWeight===I.fontWeight&&g.fontWeightBold===I.fontWeightBold&&g.allowTransparency===I.allowTransparency&&g.scaledCharWidth===I.scaledCharWidth&&g.scaledCharHeight===I.scaledCharHeight&&g.colors.foreground===I.colors.foreground&&g.colors.background===I.colors.background},I.is256Color=function(g){return g<C.DEFAULT_COLOR}},function(g,I,A){Object.defineProperty(I,"__esModule",{value:!0});var C=A(10),t=A(45),i=C.fromCss("#ffffff"),e=C.fromCss("#000000"),o=C.fromCss("#ffffff"),n=C.fromCss("#000000"),s={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};I.DEFAULT_ANSI_COLORS=function(){for(var g=[C.fromCss("#2e3436"),C.fromCss("#cc0000"),C.fromCss("#4e9a06"),C.fromCss("#c4a000"),C.fromCss("#3465a4"),C.fromCss("#75507b"),C.fromCss("#06989a"),C.fromCss("#d3d7cf"),C.fromCss("#555753"),C.fromCss("#ef2929"),C.fromCss("#8ae234"),C.fromCss("#fce94f"),C.fromCss("#729fcf"),C.fromCss("#ad7fa8"),C.fromCss("#34e2e2"),C.fromCss("#eeeeec")],I=[0,95,135,175,215,255],A=0;A<216;A++){var t=I[A/36%6|0],i=I[A/6%6|0],e=I[A%6];g.push({css:C.toCss(t,i,e),rgba:C.toRgba(t,i,e)})}for(A=0;A<24;A++){var o=8+10*A;g.push({css:C.toCss(o,o,o),rgba:C.toRgba(o,o,o)})}return g}();var l=function(){function g(g,A){this.allowTransparency=A;var l=g.createElement("canvas");l.width=1,l.height=1;var r=l.getContext("2d");if(!r)throw new Error("Could not get rendering context");this._ctx=r,this._ctx.globalCompositeOperation="copy",this._litmusColor=this._ctx.createLinearGradient(0,0,1,1),this._contrastCache=new t.ColorContrastCache,this.colors={foreground:i,background:e,cursor:o,cursorAccent:n,selection:s,selectionOpaque:C.blend(e,s),ansi:I.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache}}return g.prototype.onOptionsChange=function(g){"minimumContrastRatio"===g&&this._contrastCache.clear()},g.prototype.setTheme=function(g){void 0===g&&(g={}),this.colors.foreground=this._parseColor(g.foreground,i),this.colors.background=this._parseColor(g.background,e),this.colors.cursor=this._parseColor(g.cursor,o,!0),this.colors.cursorAccent=this._parseColor(g.cursorAccent,n,!0),this.colors.selection=this._parseColor(g.selection,s,!0),this.colors.selectionOpaque=C.blend(this.colors.background,this.colors.selection),this.colors.ansi[0]=this._parseColor(g.black,I.DEFAULT_ANSI_COLORS[0]),this.colors.ansi[1]=this._parseColor(g.red,I.DEFAULT_ANSI_COLORS[1]),this.colors.ansi[2]=this._parseColor(g.green,I.DEFAULT_ANSI_COLORS[2]),this.colors.ansi[3]=this._parseColor(g.yellow,I.DEFAULT_ANSI_COLORS[3]),this.colors.ansi[4]=this._parseColor(g.blue,I.DEFAULT_ANSI_COLORS[4]),this.colors.ansi[5]=this._parseColor(g.magenta,I.DEFAULT_ANSI_COLORS[5]),this.colors.ansi[6]=this._parseColor(g.cyan,I.DEFAULT_ANSI_COLORS[6]),this.colors.ansi[7]=this._parseColor(g.white,I.DEFAULT_ANSI_COLORS[7]),this.colors.ansi[8]=this._parseColor(g.brightBlack,I.DEFAULT_ANSI_COLORS[8]),this.colors.ansi[9]=this._parseColor(g.brightRed,I.DEFAULT_ANSI_COLORS[9]),this.colors.ansi[10]=this._parseColor(g.brightGreen,I.DEFAULT_ANSI_COLORS[10]),this.colors.ansi[11]=this._parseColor(g.brightYellow,I.DEFAULT_ANSI_COLORS[11]),this.colors.ansi[12]=this._parseColor(g.brightBlue,I.DEFAULT_ANSI_COLORS[12]),this.colors.ansi[13]=this._parseColor(g.brightMagenta,I.DEFAULT_ANSI_COLORS[13]),this.colors.ansi[14]=this._parseColor(g.brightCyan,I.DEFAULT_ANSI_COLORS[14]),this.colors.ansi[15]=this._parseColor(g.brightWhite,I.DEFAULT_ANSI_COLORS[15]),this._contrastCache.clear()},g.prototype._parseColor=function(g,I,A){if(void 0===A&&(A=this.allowTransparency),void 0===g)return I;if(this._ctx.fillStyle=this._litmusColor,this._ctx.fillStyle=g,"string"!=typeof this._ctx.fillStyle)return console.warn("Color: "+g+" is invalid using fallback "+I.css),I;this._ctx.fillRect(0,0,1,1);var t=this._ctx.getImageData(0,0,1,1).data;if(255!==t[3]){if(!A)return console.warn("Color: "+g+" is using transparency, but allowTransparency is false. Using fallback "+I.css+"."),I;var i=void 0,e=void 0,o=void 0,n=void 0,s=void 0;if(5===g.length){var l=parseInt(g.substr(1),16);i=16*(l>>12&15),e=16*(l>>8&15),o=16*(l>>4&15),n=16*(15&l),s=C.toRgba(i,e,o,n)}else i=(s=parseInt(g.substr(1),16))>>24&255,e=s>>16&255,o=s>>8&255,n=255&s;return{rgba:s,css:C.toCss(i,e,o,n)}}return{css:g,rgba:C.toRgba(t[0],t[1],t[2],t[3])}},g}();I.ColorManager=l},function(g,I,A){Object.defineProperty(I,"__esModule",{value:!0}),I.throwIfFalsy=function(g){if(!g)throw new Error("value must not be falsy");return g}},function(g,I,A){var C,t=this&&this.__extends||(C=function(g,I){return(C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,I){g.__proto__=I}||function(g,I){for(var A in I)I.hasOwnProperty(A)&&(g[A]=I[A])})(g,I)},function(g,I){function A(){this.constructor=g}C(g,I),g.prototype=null===I?Object.create(I):(A.prototype=I.prototype,new A)});Object.defineProperty(I,"__esModule",{value:!0});var i=A(6),e=A(3),o=A(5),n=function(g){function I(I,A,C){var t=g.call(this)||this;return t.content=0,t.combinedData="",t.fg=I.fg,t.bg=I.bg,t.combinedData=A,t._width=C,t}return t(I,g),I.prototype.isCombined=function(){return 2097152},I.prototype.getWidth=function(){return this._width},I.prototype.getChars=function(){return this.combinedData},I.prototype.getCode=function(){return 2097151},I.prototype.setFromCharData=function(g){throw new Error("not implemented")},I.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},I}(i.AttributeData);I.JoinedCellData=n;var s=function(){function g(g){this._bufferService=g,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new o.CellData}return g.prototype.registerCharacterJoiner=function(g){var I={id:this._nextCharacterJoinerId++,handler:g};return this._characterJoiners.push(I),I.id},g.prototype.deregisterCharacterJoiner=function(g){for(var I=0;I<this._characterJoiners.length;I++)if(this._characterJoiners[I].id===g)return this._characterJoiners.splice(I,1),!0;return!1},g.prototype.getJoinedCharacters=function(g){if(0===this._characterJoiners.length)return[];var I=this._bufferService.buffer.lines.get(g);if(!I||0===I.length)return[];for(var A=[],C=I.translateToString(!0),t=0,i=0,o=0,n=I.getFg(0),s=I.getBg(0),l=0;l<I.getTrimmedLength();l++)if(I.loadCell(l,this._workCell),0!==this._workCell.getWidth()){if(this._workCell.fg!==n||this._workCell.bg!==s){if(l-t>1)for(var r=this._getJoinedRanges(C,o,i,I,t),c=0;c<r.length;c++)A.push(r[c]);t=l,o=i,n=this._workCell.fg,s=this._workCell.bg}i+=this._workCell.getChars().length||e.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-t>1)for(r=this._getJoinedRanges(C,o,i,I,t),c=0;c<r.length;c++)A.push(r[c]);return A},g.prototype._getJoinedRanges=function(I,A,C,t,i){for(var e=I.substring(A,C),o=this._characterJoiners[0].handler(e),n=1;n<this._characterJoiners.length;n++)for(var s=this._characterJoiners[n].handler(e),l=0;l<s.length;l++)g._mergeRanges(o,s[l]);return this._stringRangesToCellRanges(o,t,i),o},g.prototype._stringRangesToCellRanges=function(g,I,A){var C=0,t=!1,i=0,o=g[C];if(o){for(var n=A;n<this._bufferService.cols;n++){var s=I.getWidth(n),l=I.getString(n).length||e.WHITESPACE_CELL_CHAR.length;if(0!==s){if(!t&&o[0]<=i&&(o[0]=n,t=!0),o[1]<=i){if(o[1]=n,!(o=g[++C]))break;o[0]<=i?(o[0]=n,t=!0):t=!1}i+=l}}o&&(o[1]=this._bufferService.cols)}},g._mergeRanges=function(g,I){for(var A=!1,C=0;C<g.length;C++){var t=g[C];if(A){if(I[1]<=t[0])return g[C-1][1]=I[1],g;if(I[1]<=t[1])return g[C-1][1]=Math.max(I[1],t[1]),g.splice(C,1),g;g.splice(C,1),C--}else{if(I[1]<=t[0])return g.splice(C,0,I),g;if(I[1]<=t[1])return t[0]=Math.min(I[0],t[0]),g;I[0]<t[1]&&(t[0]=Math.min(I[0],t[0]),A=!0)}}return A?g[g.length-1][1]=I[1]:g.push(I),g},g}();I.CharacterJoinerRegistry=s},function(g,I,A){function C(g,I){var A=I.getBoundingClientRect();return[g.clientX-A.left,g.clientY-A.top]}Object.defineProperty(I,"__esModule",{value:!0}),I.getCoordsRelativeToElement=C,I.getCoords=function(g,I,A,t,i,e,o,n){if(i){var s=C(g,I);if(s)return s[0]=Math.ceil((s[0]+(n?e/2:0))/e),s[1]=Math.ceil(s[1]/o),s[0]=Math.min(Math.max(s[0],1),A+(n?1:0)),s[1]=Math.min(Math.max(s[1],1),t),s}},I.getRawByteCoords=function(g){if(g)return{x:g[0]+32,y:g[1]+32}}},function(g,I,A){Object.defineProperty(I,"__esModule",{value:!0});var C=function(){function g(g){this._renderCallback=g}return g.prototype.dispose=function(){this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},g.prototype.refresh=function(g,I,A){var C=this;this._rowCount=A,g=void 0!==g?g:0,I=void 0!==I?I:this._rowCount-1,this._rowStart=void 0!==this._rowStart?Math.min(this._rowStart,g):g,this._rowEnd=void 0!==this._rowEnd?Math.max(this._rowEnd,I):I,this._animationFrame||(this._animationFrame=window.requestAnimationFrame((function(){return C._innerRefresh()})))},g.prototype._innerRefresh=function(){void 0!==this._rowStart&&void 0!==this._rowEnd&&void 0!==this._rowCount&&(this._rowStart=Math.max(this._rowStart,0),this._rowEnd=Math.min(this._rowEnd,this._rowCount-1),this._renderCallback(this._rowStart,this._rowEnd),this._rowStart=void 0,this._rowEnd=void 0,this._animationFrame=void 0)},g}();I.RenderDebouncer=C},function(g,I,A){var C,t=this&&this.__extends||(C=function(g,I){return(C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,I){g.__proto__=I}||function(g,I){for(var A in I)I.hasOwnProperty(A)&&(g[A]=I[A])})(g,I)},function(g,I){function A(){this.constructor=g}C(g,I),g.prototype=null===I?Object.create(I):(A.prototype=I.prototype,new A)});Object.defineProperty(I,"__esModule",{value:!0});var i=function(g){function I(){var I=null!==g&&g.apply(this,arguments)||this;return I._currentDevicePixelRatio=window.devicePixelRatio,I}return t(I,g),I.prototype.setListener=function(g){var I=this;this._listener&&this.clearListener(),this._listener=g,this._outerListener=function(){I._listener&&(I._listener(window.devicePixelRatio,I._currentDevicePixelRatio),I._updateDpr())},this._updateDpr()},I.prototype.dispose=function(){g.prototype.dispose.call(this),this.clearListener()},I.prototype._updateDpr=function(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._currentDevicePixelRatio=window.devicePixelRatio,this._resolutionMediaMatchList=window.matchMedia("screen and (resolution: "+window.devicePixelRatio+"dppx)"),this._resolutionMediaMatchList.addListener(this._outerListener))},I.prototype.clearListener=function(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)},I}(A(2).Disposable);I.ScreenDprMonitor=i},function(g,I,A){Object.defineProperty(I,"__esModule",{value:!0}),I.clone=function g(I,A){if(void 0===A&&(A=5),"object"!=typeof I)return I;var C=Array.isArray(I)?[]:{};for(var t in I)C[t]=A<=1?I[t]:I[t]?g(I[t],A-1):I[t];return C}},function(g,I,A){Object.defineProperty(I,"__esModule",{value:!0});var C=A(34),t=A(17),i=A(78),e=function(){function g(g){this._core=new C.Terminal(g),this._addonManager=new i.AddonManager}return Object.defineProperty(g.prototype,"onCursorMove",{get:function(){return this._core.onCursorMove},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"onLineFeed",{get:function(){return this._core.onLineFeed},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"onSelectionChange",{get:function(){return this._core.onSelectionChange},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"onData",{get:function(){return this._core.onData},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"onBinary",{get:function(){return this._core.onBinary},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"onTitleChange",{get:function(){return this._core.onTitleChange},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"onScroll",{get:function(){return this._core.onScroll},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"onKey",{get:function(){return this._core.onKey},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"onRender",{get:function(){return this._core.onRender},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"onResize",{get:function(){return this._core.onResize},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"element",{get:function(){return this._core.element},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"parser",{get:function(){return this._parser||(this._parser=new l(this._core)),this._parser},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"textarea",{get:function(){return this._core.textarea},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"rows",{get:function(){return this._core.rows},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"cols",{get:function(){return this._core.cols},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"buffer",{get:function(){return new o(this._core.buffer)},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"markers",{get:function(){return this._core.markers},enumerable:!0,configurable:!0}),g.prototype.blur=function(){this._core.blur()},g.prototype.focus=function(){this._core.focus()},g.prototype.resize=function(g,I){this._verifyIntegers(g,I),this._core.resize(g,I)},g.prototype.open=function(g){this._core.open(g)},g.prototype.attachCustomKeyEventHandler=function(g){this._core.attachCustomKeyEventHandler(g)},g.prototype.registerLinkMatcher=function(g,I,A){return this._core.registerLinkMatcher(g,I,A)},g.prototype.deregisterLinkMatcher=function(g){this._core.deregisterLinkMatcher(g)},g.prototype.registerCharacterJoiner=function(g){return this._core.registerCharacterJoiner(g)},g.prototype.deregisterCharacterJoiner=function(g){this._core.deregisterCharacterJoiner(g)},g.prototype.addMarker=function(g){return this._verifyIntegers(g),this._core.addMarker(g)},g.prototype.hasSelection=function(){return this._core.hasSelection()},g.prototype.select=function(g,I,A){this._verifyIntegers(g,I,A),this._core.select(g,I,A)},g.prototype.getSelection=function(){return this._core.getSelection()},g.prototype.getSelectionPosition=function(){return this._core.getSelectionPosition()},g.prototype.clearSelection=function(){this._core.clearSelection()},g.prototype.selectAll=function(){this._core.selectAll()},g.prototype.selectLines=function(g,I){this._verifyIntegers(g,I),this._core.selectLines(g,I)},g.prototype.dispose=function(){this._addonManager.dispose(),this._core.dispose()},g.prototype.scrollLines=function(g){this._verifyIntegers(g),this._core.scrollLines(g)},g.prototype.scrollPages=function(g){this._verifyIntegers(g),this._core.scrollPages(g)},g.prototype.scrollToTop=function(){this._core.scrollToTop()},g.prototype.scrollToBottom=function(){this._core.scrollToBottom()},g.prototype.scrollToLine=function(g){this._verifyIntegers(g),this._core.scrollToLine(g)},g.prototype.clear=function(){this._core.clear()},g.prototype.write=function(g,I){this._core.write(g,I)},g.prototype.writeUtf8=function(g,I){this._core.write(g,I)},g.prototype.writeln=function(g,I){this._core.write(g),this._core.write("\r\n",I)},g.prototype.paste=function(g){this._core.paste(g)},g.prototype.getOption=function(g){return this._core.optionsService.getOption(g)},g.prototype.setOption=function(g,I){this._core.optionsService.setOption(g,I)},g.prototype.refresh=function(g,I){this._verifyIntegers(g,I),this._core.refresh(g,I)},g.prototype.reset=function(){this._core.reset()},g.prototype.loadAddon=function(g){return this._addonManager.loadAddon(this,g)},Object.defineProperty(g,"strings",{get:function(){return t},enumerable:!0,configurable:!0}),g.prototype._verifyIntegers=function(){for(var g=[],I=0;I<arguments.length;I++)g[I]=arguments[I];g.forEach((function(g){if(g===1/0||isNaN(g)||g%1!=0)throw new Error("This API only accepts integers")}))},g}();I.Terminal=e;var o=function(){function g(g){this._buffer=g}return Object.defineProperty(g.prototype,"cursorY",{get:function(){return this._buffer.y},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"cursorX",{get:function(){return this._buffer.x},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"viewportY",{get:function(){return this._buffer.ydisp},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"baseY",{get:function(){return this._buffer.ybase},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"length",{get:function(){return this._buffer.lines.length},enumerable:!0,configurable:!0}),g.prototype.getLine=function(g){var I=this._buffer.lines.get(g);if(I)return new n(I)},g}(),n=function(){function g(g){this._line=g}return Object.defineProperty(g.prototype,"isWrapped",{get:function(){return this._line.isWrapped},enumerable:!0,configurable:!0}),g.prototype.getCell=function(g){if(!(g<0||g>=this._line.length))return new s(this._line,g)},g.prototype.translateToString=function(g,I,A){return this._line.translateToString(g,I,A)},g}(),s=function(){function g(g,I){this._line=g,this._x=I}return Object.defineProperty(g.prototype,"char",{get:function(){return this._line.getString(this._x)},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"width",{get:function(){return this._line.getWidth(this._x)},enumerable:!0,configurable:!0}),g}(),l=function(){function g(g){this._core=g}return g.prototype.addCsiHandler=function(g,I){return this._core.addCsiHandler(g,(function(g){return I(g.toArray())}))},g.prototype.addDcsHandler=function(g,I){return this._core.addDcsHandler(g,(function(g,A){return I(g,A.toArray())}))},g.prototype.addEscHandler=function(g,I){return this._core.addEscHandler(g,I)},g.prototype.addOscHandler=function(g,I){return this._core.addOscHandler(g,I)},g}()},function(g,I,A){var C,t=this&&this.__extends||(C=function(g,I){return(C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,I){g.__proto__=I}||function(g,I){for(var A in I)I.hasOwnProperty(A)&&(g[A]=I[A])})(g,I)},function(g,I){function A(){this.constructor=g}C(g,I),g.prototype=null===I?Object.create(I):(A.prototype=I.prototype,new A)});Object.defineProperty(I,"__esModule",{value:!0});var i=A(35),e=A(36),o=A(37),n=A(12),s=A(38),l=A(40),r=A(50),c=A(51),a=A(11),d=A(7),h=A(17),m=A(54),Z=A(55),u=A(56),G=A(57),b=A(59),p=A(1),B=A(16),y=A(60),w=A(26),W=A(61),S=A(0),K=A(62),f=A(4),Y=A(63),X=A(64),V=A(2),O=A(70),R=A(71),Q=A(72),H=A(73),k=A(74),J=A(75),v=A(76),D=A(77),M="undefined"!=typeof window?window.document:null,N=function(g){function I(I){void 0===I&&(I={});var A=g.call(this)||this;return A.browser=a,A.mouseEvents=0,A._keyDownHandled=!1,A._blankLine=null,A._onCursorMove=new p.EventEmitter,A._onData=new p.EventEmitter,A._onBinary=new p.EventEmitter,A._onKey=new p.EventEmitter,A._onLineFeed=new p.EventEmitter,A._onRender=new p.EventEmitter,A._onResize=new p.EventEmitter,A._onScroll=new p.EventEmitter,A._onSelectionChange=new p.EventEmitter,A._onTitleChange=new p.EventEmitter,A._onFocus=new p.EventEmitter,A._onBlur=new p.EventEmitter,A.onA11yCharEmitter=new p.EventEmitter,A.onA11yTabEmitter=new p.EventEmitter,A._instantiationService=new k.InstantiationService,A.optionsService=new K.OptionsService(I),A._instantiationService.setService(S.IOptionsService,A.optionsService),A._bufferService=A._instantiationService.createInstance(X.BufferService),A._instantiationService.setService(S.IBufferService,A._bufferService),A._logService=A._instantiationService.createInstance(Q.LogService),A._instantiationService.setService(S.ILogService,A._logService),A._coreService=A._instantiationService.createInstance(R.CoreService,(function(){return A.scrollToBottom()})),A._instantiationService.setService(S.ICoreService,A._coreService),A._coreService.onData((function(g){return A._onData.fire(g)})),A._coreService.onBinary((function(g){return A._onBinary.fire(g)})),A._coreMouseService=A._instantiationService.createInstance(J.CoreMouseService),A._instantiationService.setService(S.ICoreMouseService,A._coreMouseService),A._dirtyRowService=A._instantiationService.createInstance(H.DirtyRowService),A._instantiationService.setService(S.IDirtyRowService,A._dirtyRowService),A._setupOptionsListeners(),A._setup(),A._writeBuffer=new v.WriteBuffer((function(g){return A._inputHandler.parse(g)})),A}return t(I,g),Object.defineProperty(I.prototype,"options",{get:function(){return this.optionsService.options},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"cols",{get:function(){return this._bufferService.cols},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"rows",{get:function(){return this._bufferService.rows},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"onData",{get:function(){return this._onData.event},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"onKey",{get:function(){return this._onKey.event},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"onFocus",{get:function(){return this._onFocus.event},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"onBlur",{get:function(){return this._onBlur.event},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"onA11yChar",{get:function(){return this.onA11yCharEmitter.event},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"onA11yTab",{get:function(){return this.onA11yTabEmitter.event},enumerable:!0,configurable:!0}),I.prototype.dispose=function(){var I,A,C,t;this._isDisposed||(g.prototype.dispose.call(this),null===(I=this._windowsMode)||void 0===I||I.dispose(),this._windowsMode=void 0,null===(A=this._renderService)||void 0===A||A.dispose(),this._customKeyEventHandler=null,this.write=function(){},null===(t=null===(C=this.element)||void 0===C?void 0:C.parentNode)||void 0===t||t.removeChild(this.element))},I.prototype._setup=function(){var g=this;this._parent=M?M.body:null,this._customKeyEventHandler=null,this.applicationKeypad=!1,this.originMode=!1,this.insertMode=!1,this.wraparoundMode=!0,this.bracketedPasteMode=!1,this.charset=null,this.gcharset=null,this.glevel=0,this.charsets=[null],this.curAttrData=B.DEFAULT_ATTR_DATA.clone(),this._eraseAttrData=B.DEFAULT_ATTR_DATA.clone(),this.params=[],this.currentParam=0,this._userScrolling=!1,this._inputHandler=new s.InputHandler(this,this._bufferService,this._coreService,this._dirtyRowService,this._logService,this.optionsService,this._coreMouseService),this._inputHandler.onCursorMove((function(){return g._onCursorMove.fire()})),this._inputHandler.onLineFeed((function(){return g._onLineFeed.fire()})),this.register(this._inputHandler),this.linkifier=this.linkifier||new r.Linkifier(this._bufferService,this._logService),this.options.windowsMode&&this._enableWindowsMode()},I.prototype._enableWindowsMode=function(){this._windowsMode||(this._windowsMode=this.onLineFeed(y.handleWindowsModeLineFeed.bind(null,this._bufferService)))},Object.defineProperty(I.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"buffers",{get:function(){return this._bufferService.buffers},enumerable:!0,configurable:!0}),I.prototype.eraseAttrData=function(){return this._eraseAttrData.bg&=-67108864,this._eraseAttrData.bg|=67108863&this.curAttrData.bg,this._eraseAttrData},I.prototype.focus=function(){this.textarea&&this.textarea.focus({preventScroll:!0})},I.prototype._setupOptionsListeners=function(){var g=this;this.optionsService.onOptionChange((function(I){var A,C,t,i,e;switch(I){case"fontFamily":case"fontSize":null===(A=g._renderService)||void 0===A||A.clear(),null===(C=g._charSizeService)||void 0===C||C.measure();break;case"drawBoldTextInBrightColors":case"letterSpacing":case"lineHeight":case"fontWeight":case"fontWeightBold":case"minimumContrastRatio":g._renderService&&(g._renderService.clear(),g._renderService.onResize(g.cols,g.rows),g.refresh(0,g.rows-1));break;case"rendererType":g._renderService&&(g._renderService.setRenderer(g._createRenderer()),g._renderService.onResize(g.cols,g.rows));break;case"scrollback":g.buffers.resize(g.cols,g.rows),null===(t=g.viewport)||void 0===t||t.syncScrollArea();break;case"screenReaderMode":g.optionsService.options.screenReaderMode?!g._accessibilityManager&&g._renderService&&(g._accessibilityManager=new u.AccessibilityManager(g,g._renderService)):(null===(i=g._accessibilityManager)||void 0===i||i.dispose(),g._accessibilityManager=null);break;case"tabStopWidth":g.buffers.setupTabStops();break;case"theme":g._setTheme(g.optionsService.options.theme);break;case"windowsMode":g.optionsService.options.windowsMode?g._enableWindowsMode():(null===(e=g._windowsMode)||void 0===e||e.dispose(),g._windowsMode=void 0)}}))},I.prototype._onTextAreaFocus=function(g){this.sendFocus&&this._coreService.triggerDataEvent(n.C0.ESC+"[I"),this.updateCursorStyle(g),this.element.classList.add("focus"),this.showCursor(),this._onFocus.fire()},I.prototype.blur=function(){return this.textarea.blur()},I.prototype._onTextAreaBlur=function(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.sendFocus&&this._coreService.triggerDataEvent(n.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()},I.prototype._initGlobal=function(){var g=this;this._bindKeys(),this.register(d.addDisposableDomListener(this.element,"copy",(function(I){g.hasSelection()&&o.copyHandler(I,g._selectionService)})));var I=function(I){return o.handlePasteEvent(I,g.textarea,g.bracketedPasteMode,g._coreService)};this.register(d.addDisposableDomListener(this.textarea,"paste",I)),this.register(d.addDisposableDomListener(this.element,"paste",I)),a.isFirefox?this.register(d.addDisposableDomListener(this.element,"mousedown",(function(I){2===I.button&&o.rightClickHandler(I,g.textarea,g.screenElement,g._selectionService,g.options.rightClickSelectsWord)}))):this.register(d.addDisposableDomListener(this.element,"contextmenu",(function(I){o.rightClickHandler(I,g.textarea,g.screenElement,g._selectionService,g.options.rightClickSelectsWord)}))),a.isLinux&&this.register(d.addDisposableDomListener(this.element,"auxclick",(function(I){1===I.button&&o.moveTextAreaUnderMouseCursor(I,g.textarea,g.screenElement)})))},I.prototype._bindKeys=function(){var g=this;this.register(d.addDisposableDomListener(this.textarea,"keyup",(function(I){return g._keyUp(I)}),!0)),this.register(d.addDisposableDomListener(this.textarea,"keydown",(function(I){return g._keyDown(I)}),!0)),this.register(d.addDisposableDomListener(this.textarea,"keypress",(function(I){return g._keyPress(I)}),!0)),this.register(d.addDisposableDomListener(this.textarea,"compositionstart",(function(){return g._compositionHelper.compositionstart()}))),this.register(d.addDisposableDomListener(this.textarea,"compositionupdate",(function(I){return g._compositionHelper.compositionupdate(I)}))),this.register(d.addDisposableDomListener(this.textarea,"compositionend",(function(){return g._compositionHelper.compositionend()}))),this.register(this.onRender((function(){return g._compositionHelper.updateCompositionElements()}))),this.register(this.onRender((function(I){return g._queueLinkification(I.start,I.end)})))},I.prototype.open=function(g){var I=this;if(this._parent=g||this._parent,!this._parent)throw new Error("Terminal requires a parent element.");M.body.contains(g)||this._logService.warn("Terminal.open was called on an element that was not attached to the DOM"),this._document=this._parent.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.setAttribute("tabindex","0"),this._parent.appendChild(this.element);var A=M.createDocumentFragment();this._viewportElement=M.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),A.appendChild(this._viewportElement),this._viewportScrollArea=M.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=M.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=M.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),A.appendChild(this.screenElement),this.textarea=M.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",h.promptLabel),this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this.register(d.addDisposableDomListener(this.textarea,"focus",(function(g){return I._onTextAreaFocus(g)}))),this.register(d.addDisposableDomListener(this.textarea,"blur",(function(){return I._onTextAreaBlur()}))),this._helperContainer.appendChild(this.textarea);var C=this._instantiationService.createInstance(D.CoreBrowserService,this.textarea);this._instantiationService.setService(f.ICoreBrowserService,C),this._charSizeService=this._instantiationService.createInstance(Y.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(f.ICharSizeService,this._charSizeService),this._compositionView=M.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(i.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(A),this._theme=this.options.theme||this._theme,this.options.theme=void 0,this._colorManager=new w.ColorManager(M,this.options.allowTransparency),this.optionsService.onOptionChange((function(g){return I._colorManager.onOptionsChange(g)})),this._colorManager.setTheme(this._theme);var t=this._createRenderer();this._renderService=this._instantiationService.createInstance(W.RenderService,t,this.rows,this.screenElement),this._instantiationService.setService(f.IRenderService,this._renderService),this._renderService.onRender((function(g){return I._onRender.fire(g)})),this.onResize((function(g){return I._renderService.resize(g.cols,g.rows)})),this._soundService=this._instantiationService.createInstance(m.SoundService),this._instantiationService.setService(f.ISoundService,this._soundService),this._mouseService=this._instantiationService.createInstance(O.MouseService),this._instantiationService.setService(f.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(e.Viewport,(function(g,A){return I.scrollLines(g,A)}),this._viewportElement,this._viewportScrollArea),this.viewport.onThemeChange(this._colorManager.colors),this.register(this.viewport),this.register(this.onCursorMove((function(){return I._renderService.onCursorMove()}))),this.register(this.onResize((function(){return I._renderService.onResize(I.cols,I.rows)}))),this.register(this.onBlur((function(){return I._renderService.onBlur()}))),this.register(this.onFocus((function(){return I._renderService.onFocus()}))),this.register(this._renderService.onDimensionsChange((function(){return I.viewport.syncScrollArea()}))),this._selectionService=this._instantiationService.createInstance(c.SelectionService,(function(g,A){return I.scrollLines(g,A)}),this.element,this.screenElement),this._instantiationService.setService(f.ISelectionService,this._selectionService),this.register(this._selectionService.onSelectionChange((function(){return I._onSelectionChange.fire()}))),this.register(this._selectionService.onRedrawRequest((function(g){return I._renderService.onSelectionChanged(g.start,g.end,g.columnSelectMode)}))),this.register(this._selectionService.onLinuxMouseSelection((function(g){I.textarea.value=g,I.textarea.focus(),I.textarea.select()}))),this.register(this.onScroll((function(){I.viewport.syncScrollArea(),I._selectionService.refresh()}))),this.register(d.addDisposableDomListener(this._viewportElement,"scroll",(function(){return I._selectionService.refresh()}))),this._mouseZoneManager=this._instantiationService.createInstance(Z.MouseZoneManager,this.element,this.screenElement),this.register(this._mouseZoneManager),this.register(this.onScroll((function(){return I._mouseZoneManager.clearAll()}))),this.linkifier.attachToDom(this.element,this._mouseZoneManager),this.register(d.addDisposableDomListener(this.element,"mousedown",(function(g){return I._selectionService.onMouseDown(g)}))),this.mouseEvents?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager=new u.AccessibilityManager(this,this._renderService)),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()},I.prototype._createRenderer=function(){switch(this.options.rendererType){case"canvas":return this._instantiationService.createInstance(l.Renderer,this._colorManager.colors,this.screenElement,this.linkifier);case"dom":return this._instantiationService.createInstance(G.DomRenderer,this._colorManager.colors,this.element,this.screenElement,this._viewportElement,this.linkifier);default:throw new Error('Unrecognized rendererType "'+this.options.rendererType+'"')}},I.prototype._setTheme=function(g){var I,A,C;this._theme=g,null===(I=this._colorManager)||void 0===I||I.setTheme(g),null===(A=this._renderService)||void 0===A||A.setColors(this._colorManager.colors),null===(C=this.viewport)||void 0===C||C.onThemeChange(this._colorManager.colors)},I.prototype.bindMouse=function(){var g=this,I=this,A=this.element;function C(g){var A,C,t;if(!(A=I._mouseService.getRawByteCoords(g,I.screenElement,I.cols,I.rows)))return!1;switch(g.overrideType||g.type){case"mousemove":t=32,void 0===g.buttons?(C=3,void 0!==g.button&&(C=g.button<3?g.button:3)):C=1&g.buttons?0:4&g.buttons?1:2&g.buttons?2:3;break;case"mouseup":t=0,C=g.button<3?g.button:3;break;case"mousedown":t=1,C=g.button<3?g.button:3;break;case"wheel":0!==g.deltaY&&(t=g.deltaY<0?0:1),C=4;break;default:return!1}return!(void 0===t||void 0===C||C>4)&&I._coreMouseService.triggerMouseEvent({col:A.x-33,row:A.y-33,button:C,action:t,ctrl:g.ctrlKey,alt:g.altKey,shift:g.shiftKey})}var t={mouseup:null,wheel:null,mousedrag:null,mousemove:null},i=function(I){return C(I),I.buttons||(g._document.removeEventListener("mouseup",t.mouseup),t.mousedrag&&g._document.removeEventListener("mousemove",t.mousedrag)),g.cancel(I)},e=function(I){return C(I),I.preventDefault(),g.cancel(I)},o=function(g){g.buttons&&C(g)},s=function(g){g.buttons||C(g)};this._coreMouseService.onProtocolChange((function(I){g.mouseEvents=I,I?("debug"===g.optionsService.options.logLevel&&g._logService.debug("Binding to mouse events:",g._coreMouseService.explainEvents(I)),g.element.classList.add("enable-mouse-events"),g._selectionService.disable()):(g._logService.debug("Unbinding from mouse events."),g.element.classList.remove("enable-mouse-events"),g._selectionService.enable()),8&I?t.mousemove||(A.addEventListener("mousemove",s),t.mousemove=s):(A.removeEventListener("mousemove",t.mousemove),t.mousemove=null),16&I?t.wheel||(A.addEventListener("wheel",e),t.wheel=e):(A.removeEventListener("wheel",t.wheel),t.wheel=null),2&I?t.mouseup||(t.mouseup=i):(g._document.removeEventListener("mouseup",t.mouseup),t.mouseup=null),4&I?t.mousedrag||(t.mousedrag=o):(g._document.removeEventListener("mousemove",t.mousedrag),t.mousedrag=null)})),this._coreMouseService.activeProtocol=this._coreMouseService.activeProtocol,this.register(d.addDisposableDomListener(A,"mousedown",(function(I){if(I.preventDefault(),g.focus(),g.mouseEvents&&!g._selectionService.shouldForceSelection(I))return C(I),t.mouseup&&g._document.addEventListener("mouseup",t.mouseup),t.mousedrag&&g._document.addEventListener("mousemove",t.mousedrag),g.cancel(I)}))),this.register(d.addDisposableDomListener(A,"wheel",(function(I){if(t.wheel);else if(!g.buffer.hasScrollback){var A=g.viewport.getLinesScrolled(I);if(0===A)return;for(var C=n.C0.ESC+(g._coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(I.deltaY<0?"A":"B"),i="",e=0;e<Math.abs(A);e++)i+=C;g._coreService.triggerDataEvent(i,!0)}}))),this.register(d.addDisposableDomListener(A,"wheel",(function(I){if(!t.wheel)return g.viewport.onWheel(I)?void 0:g.cancel(I)}))),this.register(d.addDisposableDomListener(A,"touchstart",(function(I){if(!g.mouseEvents)return g.viewport.onTouchStart(I),g.cancel(I)}))),this.register(d.addDisposableDomListener(A,"touchmove",(function(I){if(!g.mouseEvents)return g.viewport.onTouchMove(I)?void 0:g.cancel(I)})))},I.prototype.refresh=function(g,I){var A;null===(A=this._renderService)||void 0===A||A.refreshRows(g,I)},I.prototype._queueLinkification=function(g,I){var A;null===(A=this.linkifier)||void 0===A||A.linkifyRows(g,I)},I.prototype.updateCursorStyle=function(g){this._selectionService&&this._selectionService.shouldColumnSelect(g)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")},I.prototype.showCursor=function(){this._coreService.isCursorInitialized||(this._coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))},I.prototype.scroll=function(g){var I;void 0===g&&(g=!1),I=this._blankLine;var A=this.eraseAttrData();I&&I.length===this.cols&&I.getFg(0)===A.fg&&I.getBg(0)===A.bg||(I=this.buffer.getBlankLine(A,g),this._blankLine=I),I.isWrapped=g;var C=this.buffer.ybase+this.buffer.scrollTop,t=this.buffer.ybase+this.buffer.scrollBottom;if(0===this.buffer.scrollTop){var i=this.buffer.lines.isFull;t===this.buffer.lines.length-1?i?this.buffer.lines.recycle().copyFrom(I):this.buffer.lines.push(I.clone()):this.buffer.lines.splice(t+1,0,I.clone()),i?this._userScrolling&&(this.buffer.ydisp=Math.max(this.buffer.ydisp-1,0)):(this.buffer.ybase++,this._userScrolling||this.buffer.ydisp++)}else{var e=t-C+1;this.buffer.lines.shiftElements(C+1,e-1,-1),this.buffer.lines.set(t,I.clone())}this._userScrolling||(this.buffer.ydisp=this.buffer.ybase),this._dirtyRowService.markRangeDirty(this.buffer.scrollTop,this.buffer.scrollBottom),this._onScroll.fire(this.buffer.ydisp)},I.prototype.scrollLines=function(g,I){if(g<0){if(0===this.buffer.ydisp)return;this._userScrolling=!0}else g+this.buffer.ydisp>=this.buffer.ybase&&(this._userScrolling=!1);var A=this.buffer.ydisp;this.buffer.ydisp=Math.max(Math.min(this.buffer.ydisp+g,this.buffer.ybase),0),A!==this.buffer.ydisp&&(I||this._onScroll.fire(this.buffer.ydisp),this.refresh(0,this.rows-1))},I.prototype.scrollPages=function(g){this.scrollLines(g*(this.rows-1))},I.prototype.scrollToTop=function(){this.scrollLines(-this.buffer.ydisp)},I.prototype.scrollToBottom=function(){this.scrollLines(this.buffer.ybase-this.buffer.ydisp)},I.prototype.scrollToLine=function(g){var I=g-this.buffer.ydisp;0!==I&&this.scrollLines(I)},I.prototype.paste=function(g){o.paste(g,this.textarea,this.bracketedPasteMode,this._coreService)},I.prototype.attachCustomKeyEventHandler=function(g){this._customKeyEventHandler=g},I.prototype.addEscHandler=function(g,I){return this._inputHandler.addEscHandler(g,I)},I.prototype.addDcsHandler=function(g,I){return this._inputHandler.addDcsHandler(g,I)},I.prototype.addCsiHandler=function(g,I){return this._inputHandler.addCsiHandler(g,I)},I.prototype.addOscHandler=function(g,I){return this._inputHandler.addOscHandler(g,I)},I.prototype.registerLinkMatcher=function(g,I,A){var C=this.linkifier.registerLinkMatcher(g,I,A);return this.refresh(0,this.rows-1),C},I.prototype.deregisterLinkMatcher=function(g){this.linkifier.deregisterLinkMatcher(g)&&this.refresh(0,this.rows-1)},I.prototype.registerCharacterJoiner=function(g){var I=this._renderService.registerCharacterJoiner(g);return this.refresh(0,this.rows-1),I},I.prototype.deregisterCharacterJoiner=function(g){this._renderService.deregisterCharacterJoiner(g)&&this.refresh(0,this.rows-1)},Object.defineProperty(I.prototype,"markers",{get:function(){return this.buffer.markers},enumerable:!0,configurable:!0}),I.prototype.addMarker=function(g){if(this.buffer===this.buffers.normal)return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+g)},I.prototype.hasSelection=function(){return!!this._selectionService&&this._selectionService.hasSelection},I.prototype.select=function(g,I,A){this._selectionService.setSelection(g,I,A)},I.prototype.getSelection=function(){return this._selectionService?this._selectionService.selectionText:""},I.prototype.getSelectionPosition=function(){if(this._selectionService.hasSelection)return{startColumn:this._selectionService.selectionStart[0],startRow:this._selectionService.selectionStart[1],endColumn:this._selectionService.selectionEnd[0],endRow:this._selectionService.selectionEnd[1]}},I.prototype.clearSelection=function(){var g;null===(g=this._selectionService)||void 0===g||g.clearSelection()},I.prototype.selectAll=function(){var g;null===(g=this._selectionService)||void 0===g||g.selectAll()},I.prototype.selectLines=function(g,I){var A;null===(A=this._selectionService)||void 0===A||A.selectLines(g,I)},I.prototype._keyDown=function(g){if(this._keyDownHandled=!1,this._customKeyEventHandler&&!1===this._customKeyEventHandler(g))return!1;if(!this._compositionHelper.keydown(g))return this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;var I=b.evaluateKeyboardEvent(g,this._coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(g),3===I.type||2===I.type){var A=this.rows-1;return this.scrollLines(2===I.type?-A:A),this.cancel(g,!0)}return 1===I.type&&this.selectAll(),!!this._isThirdLevelShift(this.browser,g)||(I.cancel&&this.cancel(g,!0),!I.key||(I.key!==n.C0.ETX&&I.key!==n.C0.CR||(this.textarea.value=""),this._onKey.fire({key:I.key,domEvent:g}),this.showCursor(),this._coreService.triggerDataEvent(I.key,!0),this.optionsService.options.screenReaderMode?void(this._keyDownHandled=!0):this.cancel(g,!0)))},I.prototype._isThirdLevelShift=function(g,I){var A=g.isMac&&!this.options.macOptionIsMeta&&I.altKey&&!I.ctrlKey&&!I.metaKey||g.isWindows&&I.altKey&&I.ctrlKey&&!I.metaKey;return"keypress"===I.type?A:A&&(!I.keyCode||I.keyCode>47)},I.prototype.setgLevel=function(g){this.glevel=g,this.charset=this.charsets[g]},I.prototype.setgCharset=function(g,I){this.charsets[g]=I,this.glevel===g&&(this.charset=I)},I.prototype._keyUp=function(g){var I;this._customKeyEventHandler&&!1===this._customKeyEventHandler(g)||(16===(I=g).keyCode||17===I.keyCode||18===I.keyCode||this.focus(),this.updateCursorStyle(g))},I.prototype._keyPress=function(g){var I;if(this._keyDownHandled)return!1;if(this._customKeyEventHandler&&!1===this._customKeyEventHandler(g))return!1;if(this.cancel(g),g.charCode)I=g.charCode;else if(null===g.which||void 0===g.which)I=g.keyCode;else{if(0===g.which||0===g.charCode)return!1;I=g.which}return!(!I||(g.altKey||g.ctrlKey||g.metaKey)&&!this._isThirdLevelShift(this.browser,g)||(I=String.fromCharCode(I),this._onKey.fire({key:I,domEvent:g}),this.showCursor(),this._coreService.triggerDataEvent(I,!0),0))},I.prototype.bell=function(){var g=this;this._soundBell()&&this._soundService.playBellSound(),this._visualBell()&&(this.element.classList.add("visual-bell-active"),clearTimeout(this._visualBellTimer),this._visualBellTimer=window.setTimeout((function(){g.element.classList.remove("visual-bell-active")}),200))},I.prototype.resize=function(g,I){var A;isNaN(g)||isNaN(I)||(g!==this.cols||I!==this.rows?(g<X.MINIMUM_COLS&&(g=X.MINIMUM_COLS),I<X.MINIMUM_ROWS&&(I=X.MINIMUM_ROWS),this.buffers.resize(g,I),this._bufferService.resize(g,I),this.buffers.setupTabStops(this.cols),null===(A=this._charSizeService)||void 0===A||A.measure(),this.viewport.syncScrollArea(!0),this.refresh(0,this.rows-1),this._onResize.fire({cols:g,rows:I})):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure())},I.prototype.clear=function(){if(0!==this.buffer.ybase||0!==this.buffer.y){this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(var g=1;g<this.rows;g++)this.buffer.lines.push(this.buffer.getBlankLine(B.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this._onScroll.fire(this.buffer.ydisp)}},I.prototype.is=function(g){return 0===(this.options.termName+"").indexOf(g)},I.prototype.handleTitle=function(g){this._onTitleChange.fire(g)},I.prototype.reset=function(){var g,I;this.options.rows=this.rows,this.options.cols=this.cols;var A=this._customKeyEventHandler,C=this._inputHandler,t=this._userScrolling;this._setup(),this._bufferService.reset(),this._coreService.reset(),this._coreMouseService.reset(),null===(g=this._selectionService)||void 0===g||g.reset(),this._customKeyEventHandler=A,this._inputHandler=C,this._userScrolling=t,this.refresh(0,this.rows-1),null===(I=this.viewport)||void 0===I||I.syncScrollArea()},I.prototype.cancel=function(g,I){if(this.options.cancelEvents||I)return g.preventDefault(),g.stopPropagation(),!1},I.prototype._visualBell=function(){return!1},I.prototype._soundBell=function(){return"sound"===this.options.bellStyle},I.prototype.write=function(g,I){this._writeBuffer.write(g,I)},I.prototype.writeSync=function(g){this._writeBuffer.writeSync(g)},I}(V.Disposable);I.Terminal=N},function(g,I,A){var C=this&&this.__decorate||function(g,I,A,C){var t,i=arguments.length,e=i<3?I:null===C?C=Object.getOwnPropertyDescriptor(I,A):C;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)e=Reflect.decorate(g,I,A,C);else for(var o=g.length-1;o>=0;o--)(t=g[o])&&(e=(i<3?t(e):i>3?t(I,A,e):t(I,A))||e);return i>3&&e&&Object.defineProperty(I,A,e),e},t=this&&this.__param||function(g,I){return function(A,C){I(A,C,g)}};Object.defineProperty(I,"__esModule",{value:!0});var i=A(4),e=A(0),o=function(){function g(g,I,A,C,t,i){this._textarea=g,this._compositionView=I,this._bufferService=A,this._optionsService=C,this._charSizeService=t,this._coreService=i,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0}}return g.prototype.compositionstart=function(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._compositionView.classList.add("active")},g.prototype.compositionupdate=function(g){var I=this;this._compositionView.textContent=g.data,this.updateCompositionElements(),setTimeout((function(){I._compositionPosition.end=I._textarea.value.length}),0)},g.prototype.compositionend=function(){this._finalizeComposition(!0)},g.prototype.keydown=function(g){if(this._isComposing||this._isSendingComposition){if(229===g.keyCode)return!1;if(16===g.keyCode||17===g.keyCode||18===g.keyCode)return!1;this._finalizeComposition(!1)}return 229!==g.keyCode||(this._handleAnyTextareaChanges(),!1)},g.prototype._finalizeComposition=function(g){var I=this;if(this._compositionView.classList.remove("active"),this._isComposing=!1,this._clearTextareaPosition(),g){var A={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout((function(){if(I._isSendingComposition){I._isSendingComposition=!1;var g=void 0;g=I._isComposing?I._textarea.value.substring(A.start,A.end):I._textarea.value.substring(A.start),I._coreService.triggerDataEvent(g,!0)}}),0)}else{this._isSendingComposition=!1;var C=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(C,!0)}},g.prototype._handleAnyTextareaChanges=function(){var g=this,I=this._textarea.value;setTimeout((function(){if(!g._isComposing){var A=g._textarea.value.replace(I,"");A.length>0&&g._coreService.triggerDataEvent(A,!0)}}),0)},g.prototype.updateCompositionElements=function(g){var I=this;if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){var A=Math.ceil(this._charSizeService.height*this._optionsService.options.lineHeight),C=this._bufferService.buffer.y*A,t=this._bufferService.buffer.x*this._charSizeService.width;this._compositionView.style.left=t+"px",this._compositionView.style.top=C+"px",this._compositionView.style.height=A+"px",this._compositionView.style.lineHeight=A+"px",this._compositionView.style.fontFamily=this._optionsService.options.fontFamily,this._compositionView.style.fontSize=this._optionsService.options.fontSize+"px";var i=this._compositionView.getBoundingClientRect();this._textarea.style.left=t+"px",this._textarea.style.top=C+"px",this._textarea.style.width=i.width+"px",this._textarea.style.height=i.height+"px",this._textarea.style.lineHeight=i.height+"px"}g||setTimeout((function(){return I.updateCompositionElements(!0)}),0)}},g.prototype._clearTextareaPosition=function(){this._textarea.style.left="",this._textarea.style.top=""},C([t(2,e.IBufferService),t(3,e.IOptionsService),t(4,i.ICharSizeService),t(5,e.ICoreService)],g)}();I.CompositionHelper=o},function(g,I,A){var C,t=this&&this.__extends||(C=function(g,I){return(C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,I){g.__proto__=I}||function(g,I){for(var A in I)I.hasOwnProperty(A)&&(g[A]=I[A])})(g,I)},function(g,I){function A(){this.constructor=g}C(g,I),g.prototype=null===I?Object.create(I):(A.prototype=I.prototype,new A)}),i=this&&this.__decorate||function(g,I,A,C){var t,i=arguments.length,e=i<3?I:null===C?C=Object.getOwnPropertyDescriptor(I,A):C;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)e=Reflect.decorate(g,I,A,C);else for(var o=g.length-1;o>=0;o--)(t=g[o])&&(e=(i<3?t(e):i>3?t(I,A,e):t(I,A))||e);return i>3&&e&&Object.defineProperty(I,A,e),e},e=this&&this.__param||function(g,I){return function(A,C){I(A,C,g)}};Object.defineProperty(I,"__esModule",{value:!0});var o=A(2),n=A(7),s=A(4),l=A(0),r=15,c=function(g){function I(I,A,C,t,i,e,o){var s=g.call(this)||this;return s._scrollLines=I,s._viewportElement=A,s._scrollArea=C,s._bufferService=t,s._optionsService=i,s._charSizeService=e,s._renderService=o,s.scrollBarWidth=0,s._currentRowHeight=0,s._lastRecordedBufferLength=0,s._lastRecordedViewportHeight=0,s._lastRecordedBufferHeight=0,s._lastTouchY=0,s._lastScrollTop=0,s._wheelPartialScroll=0,s._refreshAnimationFrame=null,s._ignoreNextScrollEvent=!1,s.scrollBarWidth=s._viewportElement.offsetWidth-s._scrollArea.offsetWidth||r,s.register(n.addDisposableDomListener(s._viewportElement,"scroll",s._onScroll.bind(s))),setTimeout((function(){return s.syncScrollArea()}),0),s}return t(I,g),I.prototype.onThemeChange=function(g){this._viewportElement.style.backgroundColor=g.background.css},I.prototype._refresh=function(g){var I=this;if(g)return this._innerRefresh(),void(null!==this._refreshAnimationFrame&&cancelAnimationFrame(this._refreshAnimationFrame));null===this._refreshAnimationFrame&&(this._refreshAnimationFrame=requestAnimationFrame((function(){return I._innerRefresh()})))},I.prototype._innerRefresh=function(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;var g=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.canvasHeight);this._lastRecordedBufferHeight!==g&&(this._lastRecordedBufferHeight=g,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}var I=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==I&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=I),this._refreshAnimationFrame=null},I.prototype.syncScrollArea=function(g){if(void 0===g&&(g=!1),this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(g);if(this._lastRecordedViewportHeight===this._renderService.dimensions.canvasHeight){var I=this._bufferService.buffer.ydisp*this._currentRowHeight;this._lastScrollTop===I&&this._lastScrollTop===this._viewportElement.scrollTop&&this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio===this._currentRowHeight||this._refresh(g)}else this._refresh(g)},I.prototype._onScroll=function(g){if(this._lastScrollTop=this._viewportElement.scrollTop,this._viewportElement.offsetParent)if(this._ignoreNextScrollEvent)this._ignoreNextScrollEvent=!1;else{var I=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._scrollLines(I,!0)}},I.prototype._bubbleScroll=function(g,I){var A=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(I<0&&0!==this._viewportElement.scrollTop||I>0&&A<this._lastRecordedBufferHeight)||(g.cancelable&&g.preventDefault(),!1)},I.prototype.onWheel=function(g){var I=this._getPixelsScrolled(g);return 0!==I&&(this._viewportElement.scrollTop+=I,this._bubbleScroll(g,I))},I.prototype._getPixelsScrolled=function(g){if(0===g.deltaY)return 0;var I=this._applyScrollModifier(g.deltaY,g);return g.deltaMode===WheelEvent.DOM_DELTA_LINE?I*=this._currentRowHeight:g.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(I*=this._currentRowHeight*this._bufferService.rows),I},I.prototype.getLinesScrolled=function(g){if(0===g.deltaY)return 0;var I=this._applyScrollModifier(g.deltaY,g);return g.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(I/=this._currentRowHeight+0,this._wheelPartialScroll+=I,I=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):g.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(I*=this._bufferService.rows),I},I.prototype._applyScrollModifier=function(g,I){var A=this._optionsService.options.fastScrollModifier;return"alt"===A&&I.altKey||"ctrl"===A&&I.ctrlKey||"shift"===A&&I.shiftKey?g*this._optionsService.options.fastScrollSensitivity*this._optionsService.options.scrollSensitivity:g*this._optionsService.options.scrollSensitivity},I.prototype.onTouchStart=function(g){this._lastTouchY=g.touches[0].pageY},I.prototype.onTouchMove=function(g){var I=this._lastTouchY-g.touches[0].pageY;return this._lastTouchY=g.touches[0].pageY,0!==I&&(this._viewportElement.scrollTop+=I,this._bubbleScroll(g,I))},i([e(3,l.IBufferService),e(4,l.IOptionsService),e(5,s.ICharSizeService),e(6,s.IRenderService)],I)}(o.Disposable);I.Viewport=c},function(g,I,A){function C(g){return g.replace(/\r?\n/g,"\r")}function t(g,I){return I?"[200~"+g+"[201~":g}function i(g,I,A,i){g=t(g=C(g),A),i.triggerDataEvent(g,!0),I.value=""}function e(g,I,A){var C=A.getBoundingClientRect(),t=g.clientX-C.left-10,i=g.clientY-C.top-10;I.style.position="absolute",I.style.width="20px",I.style.height="20px",I.style.left=t+"px",I.style.top=i+"px",I.style.zIndex="1000",I.focus(),setTimeout((function(){I.style.position="",I.style.width="",I.style.height="",I.style.left="",I.style.top="",I.style.zIndex=""}),200)}Object.defineProperty(I,"__esModule",{value:!0}),I.prepareTextForTerminal=C,I.bracketTextForPaste=t,I.copyHandler=function(g,I){g.clipboardData&&g.clipboardData.setData("text/plain",I.selectionText),g.preventDefault()},I.handlePasteEvent=function(g,I,A,C){g.stopPropagation(),g.clipboardData&&i(g.clipboardData.getData("text/plain"),I,A,C)},I.paste=i,I.moveTextAreaUnderMouseCursor=e,I.rightClickHandler=function(g,I,A,C,t){e(g,I,A),t&&!C.isClickInSelection(g)&&C.selectWordAtCursor(g),I.value=C.selectionText,I.select()}},function(g,I,A){var C,t=this&&this.__extends||(C=function(g,I){return(C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,I){g.__proto__=I}||function(g,I){for(var A in I)I.hasOwnProperty(A)&&(g[A]=I[A])})(g,I)},function(g,I){function A(){this.constructor=g}C(g,I),g.prototype=null===I?Object.create(I):(A.prototype=I.prototype,new A)});Object.defineProperty(I,"__esModule",{value:!0});var i=A(12),e=A(18),o=A(19),n=A(39),s=A(2),l=A(15),r=A(8),c=A(16),a=A(1),d=A(3),h=A(5),m=A(6),Z=A(21),u=A(23),G={"(":0,")":1,"*":2,"+":3,"-":1,".":2},b=function(){function g(g,I,A,C){this._bufferService=g,this._coreService=I,this._logService=A,this._optionsService=C,this._data=new Uint32Array(0)}return g.prototype.hook=function(g){this._data=new Uint32Array(0)},g.prototype.put=function(g,I,A){this._data=l.concat(this._data,g.subarray(I,A))},g.prototype.unhook=function(g){if(g){var I=r.utf32ToString(this._data);switch(this._data=new Uint32Array(0),I){case'"q':return this._coreService.triggerDataEvent(i.C0.ESC+'P1$r0"q'+i.C0.ESC+"\\");case'"p':return this._coreService.triggerDataEvent(i.C0.ESC+'P1$r61"p'+i.C0.ESC+"\\");case"r":var A=this._bufferService.buffer.scrollTop+1+";"+(this._bufferService.buffer.scrollBottom+1)+"r";return this._coreService.triggerDataEvent(i.C0.ESC+"P1$r"+A+i.C0.ESC+"\\");case"m":return this._coreService.triggerDataEvent(i.C0.ESC+"P1$r0m"+i.C0.ESC+"\\");case" q":var C={block:2,underline:4,bar:6}[this._optionsService.options.cursorStyle];return C-=this._optionsService.options.cursorBlink?1:0,this._coreService.triggerDataEvent(i.C0.ESC+"P1$r"+C+" q"+i.C0.ESC+"\\");default:this._logService.debug("Unknown DCS $q %s",I),this._coreService.triggerDataEvent(i.C0.ESC+"P0$r"+i.C0.ESC+"\\")}}else this._data=new Uint32Array(0)},g}(),p=function(g){function I(I,A,C,t,o,s,l,c){void 0===c&&(c=new n.EscapeSequenceParser);var d=g.call(this)||this;d._terminal=I,d._bufferService=A,d._coreService=C,d._dirtyRowService=t,d._logService=o,d._optionsService=s,d._coreMouseService=l,d._parser=c,d._parseBuffer=new Uint32Array(4096),d._stringDecoder=new r.StringToUtf32,d._utf8Decoder=new r.Utf8ToUtf32,d._workCell=new h.CellData,d._onCursorMove=new a.EventEmitter,d._onLineFeed=new a.EventEmitter,d._onScroll=new a.EventEmitter,d.register(d._parser),d._parser.setCsiHandlerFallback((function(g,I){d._logService.debug("Unknown CSI code: ",{identifier:d._parser.identToString(g),params:I.toArray()})})),d._parser.setEscHandlerFallback((function(g){d._logService.debug("Unknown ESC code: ",{identifier:d._parser.identToString(g)})})),d._parser.setExecuteHandlerFallback((function(g){d._logService.debug("Unknown EXECUTE code: ",{code:g})})),d._parser.setOscHandlerFallback((function(g,I,A){d._logService.debug("Unknown OSC code: ",{identifier:g,action:I,data:A})})),d._parser.setDcsHandlerFallback((function(g,I,A){"HOOK"===I&&(A=A.toArray()),d._logService.debug("Unknown DCS code: ",{identifier:d._parser.identToString(g),action:I,payload:A})})),d._parser.setPrintHandler((function(g,I,A){return d.print(g,I,A)})),d._parser.setCsiHandler({final:"@"},(function(g){return d.insertChars(g)})),d._parser.setCsiHandler({intermediates:" ",final:"@"},(function(g){return d.scrollLeft(g)})),d._parser.setCsiHandler({final:"A"},(function(g){return d.cursorUp(g)})),d._parser.setCsiHandler({intermediates:" ",final:"A"},(function(g){return d.scrollRight(g)})),d._parser.setCsiHandler({final:"B"},(function(g){return d.cursorDown(g)})),d._parser.setCsiHandler({final:"C"},(function(g){return d.cursorForward(g)})),d._parser.setCsiHandler({final:"D"},(function(g){return d.cursorBackward(g)})),d._parser.setCsiHandler({final:"E"},(function(g){return d.cursorNextLine(g)})),d._parser.setCsiHandler({final:"F"},(function(g){return d.cursorPrecedingLine(g)})),d._parser.setCsiHandler({final:"G"},(function(g){return d.cursorCharAbsolute(g)})),d._parser.setCsiHandler({final:"H"},(function(g){return d.cursorPosition(g)})),d._parser.setCsiHandler({final:"I"},(function(g){return d.cursorForwardTab(g)})),d._parser.setCsiHandler({final:"J"},(function(g){return d.eraseInDisplay(g)})),d._parser.setCsiHandler({prefix:"?",final:"J"},(function(g){return d.eraseInDisplay(g)})),d._parser.setCsiHandler({final:"K"},(function(g){return d.eraseInLine(g)})),d._parser.setCsiHandler({prefix:"?",final:"K"},(function(g){return d.eraseInLine(g)})),d._parser.setCsiHandler({final:"L"},(function(g){return d.insertLines(g)})),d._parser.setCsiHandler({final:"M"},(function(g){return d.deleteLines(g)})),d._parser.setCsiHandler({final:"P"},(function(g){return d.deleteChars(g)})),d._parser.setCsiHandler({final:"S"},(function(g){return d.scrollUp(g)})),d._parser.setCsiHandler({final:"T"},(function(g){return d.scrollDown(g)})),d._parser.setCsiHandler({final:"X"},(function(g){return d.eraseChars(g)})),d._parser.setCsiHandler({final:"Z"},(function(g){return d.cursorBackwardTab(g)})),d._parser.setCsiHandler({final:"`"},(function(g){return d.charPosAbsolute(g)})),d._parser.setCsiHandler({final:"a"},(function(g){return d.hPositionRelative(g)})),d._parser.setCsiHandler({final:"b"},(function(g){return d.repeatPrecedingCharacter(g)})),d._parser.setCsiHandler({final:"c"},(function(g){return d.sendDeviceAttributesPrimary(g)})),d._parser.setCsiHandler({prefix:">",final:"c"},(function(g){return d.sendDeviceAttributesSecondary(g)})),d._parser.setCsiHandler({final:"d"},(function(g){return d.linePosAbsolute(g)})),d._parser.setCsiHandler({final:"e"},(function(g){return d.vPositionRelative(g)})),d._parser.setCsiHandler({final:"f"},(function(g){return d.hVPosition(g)})),d._parser.setCsiHandler({final:"g"},(function(g){return d.tabClear(g)})),d._parser.setCsiHandler({final:"h"},(function(g){return d.setMode(g)})),d._parser.setCsiHandler({prefix:"?",final:"h"},(function(g){return d.setModePrivate(g)})),d._parser.setCsiHandler({final:"l"},(function(g){return d.resetMode(g)})),d._parser.setCsiHandler({prefix:"?",final:"l"},(function(g){return d.resetModePrivate(g)})),d._parser.setCsiHandler({final:"m"},(function(g){return d.charAttributes(g)})),d._parser.setCsiHandler({final:"n"},(function(g){return d.deviceStatus(g)})),d._parser.setCsiHandler({prefix:"?",final:"n"},(function(g){return d.deviceStatusPrivate(g)})),d._parser.setCsiHandler({intermediates:"!",final:"p"},(function(g){return d.softReset(g)})),d._parser.setCsiHandler({intermediates:" ",final:"q"},(function(g){return d.setCursorStyle(g)})),d._parser.setCsiHandler({final:"r"},(function(g){return d.setScrollRegion(g)})),d._parser.setCsiHandler({final:"s"},(function(g){return d.saveCursor(g)})),d._parser.setCsiHandler({final:"u"},(function(g){return d.restoreCursor(g)})),d._parser.setCsiHandler({intermediates:"'",final:"}"},(function(g){return d.insertColumns(g)})),d._parser.setCsiHandler({intermediates:"'",final:"~"},(function(g){return d.deleteColumns(g)})),d._parser.setExecuteHandler(i.C0.BEL,(function(){return d.bell()})),d._parser.setExecuteHandler(i.C0.LF,(function(){return d.lineFeed()})),d._parser.setExecuteHandler(i.C0.VT,(function(){return d.lineFeed()})),d._parser.setExecuteHandler(i.C0.FF,(function(){return d.lineFeed()})),d._parser.setExecuteHandler(i.C0.CR,(function(){return d.carriageReturn()})),d._parser.setExecuteHandler(i.C0.BS,(function(){return d.backspace()})),d._parser.setExecuteHandler(i.C0.HT,(function(){return d.tab()})),d._parser.setExecuteHandler(i.C0.SO,(function(){return d.shiftOut()})),d._parser.setExecuteHandler(i.C0.SI,(function(){return d.shiftIn()})),d._parser.setExecuteHandler(i.C1.IND,(function(){return d.index()})),d._parser.setExecuteHandler(i.C1.NEL,(function(){return d.nextLine()})),d._parser.setExecuteHandler(i.C1.HTS,(function(){return d.tabSet()})),d._parser.setOscHandler(0,new Z.OscHandler((function(g){return d.setTitle(g)}))),d._parser.setOscHandler(2,new Z.OscHandler((function(g){return d.setTitle(g)}))),d._parser.setEscHandler({final:"7"},(function(){return d.saveCursor()})),d._parser.setEscHandler({final:"8"},(function(){return d.restoreCursor()})),d._parser.setEscHandler({final:"D"},(function(){return d.index()})),d._parser.setEscHandler({final:"E"},(function(){return d.nextLine()})),d._parser.setEscHandler({final:"H"},(function(){return d.tabSet()})),d._parser.setEscHandler({final:"M"},(function(){return d.reverseIndex()})),d._parser.setEscHandler({final:"="},(function(){return d.keypadApplicationMode()})),d._parser.setEscHandler({final:">"},(function(){return d.keypadNumericMode()})),d._parser.setEscHandler({final:"c"},(function(){return d.reset()})),d._parser.setEscHandler({final:"n"},(function(){return d.setgLevel(2)})),d._parser.setEscHandler({final:"o"},(function(){return d.setgLevel(3)})),d._parser.setEscHandler({final:"|"},(function(){return d.setgLevel(3)})),d._parser.setEscHandler({final:"}"},(function(){return d.setgLevel(2)})),d._parser.setEscHandler({final:"~"},(function(){return d.setgLevel(1)})),d._parser.setEscHandler({intermediates:"%",final:"@"},(function(){return d.selectDefaultCharset()})),d._parser.setEscHandler({intermediates:"%",final:"G"},(function(){return d.selectDefaultCharset()}));var m=function(g){u._parser.setEscHandler({intermediates:"(",final:g},(function(){return d.selectCharset("("+g)})),u._parser.setEscHandler({intermediates:")",final:g},(function(){return d.selectCharset(")"+g)})),u._parser.setEscHandler({intermediates:"*",final:g},(function(){return d.selectCharset("*"+g)})),u._parser.setEscHandler({intermediates:"+",final:g},(function(){return d.selectCharset("+"+g)})),u._parser.setEscHandler({intermediates:"-",final:g},(function(){return d.selectCharset("-"+g)})),u._parser.setEscHandler({intermediates:".",final:g},(function(){return d.selectCharset("."+g)})),u._parser.setEscHandler({intermediates:"/",final:g},(function(){return d.selectCharset("/"+g)}))},u=this;for(var G in e.CHARSETS)m(G);return d._parser.setEscHandler({intermediates:"#",final:"8"},(function(){return d.screenAlignmentPattern()})),d._parser.setErrorHandler((function(g){return d._logService.error("Parsing error: ",g),g})),d._parser.setDcsHandler({intermediates:"$",final:"q"},new b(d._bufferService,d._coreService,d._logService,d._optionsService)),d}return t(I,g),Object.defineProperty(I.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!0,configurable:!0}),I.prototype.dispose=function(){g.prototype.dispose.call(this)},I.prototype.parse=function(g){var I=this._bufferService.buffer,A=I.x,C=I.y;if(this._logService.debug("parsing data",g),this._parseBuffer.length<g.length&&this._parseBuffer.length<131072&&(this._parseBuffer=new Uint32Array(Math.min(g.length,131072))),this._dirtyRowService.clearRange(),g.length>131072)for(var t=0;t<g.length;t+=131072){var i=t+131072<g.length?t+131072:g.length,e="string"==typeof g?this._stringDecoder.decode(g.substring(t,i),this._parseBuffer):this._utf8Decoder.decode(g.subarray(t,i),this._parseBuffer);this._parser.parse(this._parseBuffer,e)}else e="string"==typeof g?this._stringDecoder.decode(g,this._parseBuffer):this._utf8Decoder.decode(g,this._parseBuffer),this._parser.parse(this._parseBuffer,e);(I=this._bufferService.buffer).x===A&&I.y===C||this._onCursorMove.fire(),this._terminal.refresh(this._dirtyRowService.start,this._dirtyRowService.end)},I.prototype.print=function(g,I,A){var C,t,i=this._bufferService.buffer,e=this._terminal.charset,n=this._optionsService.options.screenReaderMode,s=this._bufferService.cols,l=this._terminal.wraparoundMode,c=this._terminal.insertMode,a=this._terminal.curAttrData,h=i.lines.get(i.y+i.ybase);this._dirtyRowService.markDirty(i.y);for(var m=I;m<A;++m){if(C=g[m],t=o.wcwidth(C),C<127&&e){var Z=e[String.fromCharCode(C)];Z&&(C=Z.charCodeAt(0))}if(n&&this._terminal.onA11yCharEmitter.fire(r.stringFromCodePoint(C)),t||!i.x){if(i.x+t-1>=s)if(l)i.x=0,i.y++,i.y===i.scrollBottom+1?(i.y--,this._terminal.scroll(!0)):(i.y>=this._bufferService.rows&&(i.y=this._bufferService.rows-1),i.lines.get(i.y).isWrapped=!0),h=i.lines.get(i.y+i.ybase);else if(i.x=s-1,2===t)continue;if(c&&(h.insertCells(i.x,t,i.getNullCell(a)),2===h.getWidth(s-1)&&h.setCellFromCodePoint(s-1,d.NULL_CELL_CODE,d.NULL_CELL_WIDTH,a.fg,a.bg)),h.setCellFromCodePoint(i.x++,C,t,a.fg,a.bg),t>0)for(;--t;)h.setCellFromCodePoint(i.x++,0,0,a.fg,a.bg)}else h.getWidth(i.x-1)?h.addCodepointToCell(i.x-1,C):h.addCodepointToCell(i.x-2,C)}A&&(h.loadCell(i.x-1,this._workCell),2===this._workCell.getWidth()||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._dirtyRowService.markDirty(i.y)},I.prototype.addCsiHandler=function(g,I){return this._parser.addCsiHandler(g,I)},I.prototype.addDcsHandler=function(g,I){return this._parser.addDcsHandler(g,new u.DcsHandler(I))},I.prototype.addEscHandler=function(g,I){return this._parser.addEscHandler(g,I)},I.prototype.addOscHandler=function(g,I){return this._parser.addOscHandler(g,new Z.OscHandler(I))},I.prototype.bell=function(){this._terminal.bell()},I.prototype.lineFeed=function(){var g=this._bufferService.buffer;this._dirtyRowService.markDirty(g.y),this._optionsService.options.convertEol&&(g.x=0),g.y++,g.y===g.scrollBottom+1?(g.y--,this._terminal.scroll()):g.y>=this._bufferService.rows&&(g.y=this._bufferService.rows-1),g.x>=this._bufferService.cols&&g.x--,this._dirtyRowService.markDirty(g.y),this._onLineFeed.fire()},I.prototype.carriageReturn=function(){this._bufferService.buffer.x=0},I.prototype.backspace=function(){this._restrictCursor(),this._bufferService.buffer.x>0&&this._bufferService.buffer.x--},I.prototype.tab=function(){if(!(this._bufferService.buffer.x>=this._bufferService.cols)){var g=this._bufferService.buffer.x;this._bufferService.buffer.x=this._bufferService.buffer.nextStop(),this._optionsService.options.screenReaderMode&&this._terminal.onA11yTabEmitter.fire(this._bufferService.buffer.x-g)}},I.prototype.shiftOut=function(){this._terminal.setgLevel(1)},I.prototype.shiftIn=function(){this._terminal.setgLevel(0)},I.prototype._restrictCursor=function(){this._bufferService.buffer.x=Math.min(this._bufferService.cols-1,Math.max(0,this._bufferService.buffer.x)),this._bufferService.buffer.y=this._terminal.originMode?Math.min(this._bufferService.buffer.scrollBottom,Math.max(this._bufferService.buffer.scrollTop,this._bufferService.buffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._bufferService.buffer.y)),this._dirtyRowService.markDirty(this._bufferService.buffer.y)},I.prototype._setCursor=function(g,I){this._dirtyRowService.markDirty(this._bufferService.buffer.y),this._terminal.originMode?(this._bufferService.buffer.x=g,this._bufferService.buffer.y=this._bufferService.buffer.scrollTop+I):(this._bufferService.buffer.x=g,this._bufferService.buffer.y=I),this._restrictCursor(),this._dirtyRowService.markDirty(this._bufferService.buffer.y)},I.prototype._moveCursor=function(g,I){this._restrictCursor(),this._setCursor(this._bufferService.buffer.x+g,this._bufferService.buffer.y+I)},I.prototype.cursorUp=function(g){var I=this._bufferService.buffer.y-this._bufferService.buffer.scrollTop;I>=0?this._moveCursor(0,-Math.min(I,g.params[0]||1)):this._moveCursor(0,-(g.params[0]||1))},I.prototype.cursorDown=function(g){var I=this._bufferService.buffer.scrollBottom-this._bufferService.buffer.y;I>=0?this._moveCursor(0,Math.min(I,g.params[0]||1)):this._moveCursor(0,g.params[0]||1)},I.prototype.cursorForward=function(g){this._moveCursor(g.params[0]||1,0)},I.prototype.cursorBackward=function(g){this._moveCursor(-(g.params[0]||1),0)},I.prototype.cursorNextLine=function(g){this.cursorDown(g),this._bufferService.buffer.x=0},I.prototype.cursorPrecedingLine=function(g){this.cursorUp(g),this._bufferService.buffer.x=0},I.prototype.cursorCharAbsolute=function(g){this._setCursor((g.params[0]||1)-1,this._bufferService.buffer.y)},I.prototype.cursorPosition=function(g){this._setCursor(g.length>=2?(g.params[1]||1)-1:0,(g.params[0]||1)-1)},I.prototype.charPosAbsolute=function(g){this._setCursor((g.params[0]||1)-1,this._bufferService.buffer.y)},I.prototype.hPositionRelative=function(g){this._moveCursor(g.params[0]||1,0)},I.prototype.linePosAbsolute=function(g){this._setCursor(this._bufferService.buffer.x,(g.params[0]||1)-1)},I.prototype.vPositionRelative=function(g){this._moveCursor(0,g.params[0]||1)},I.prototype.hVPosition=function(g){this.cursorPosition(g)},I.prototype.tabClear=function(g){var I=g.params[0];0===I?delete this._bufferService.buffer.tabs[this._bufferService.buffer.x]:3===I&&(this._bufferService.buffer.tabs={})},I.prototype.cursorForwardTab=function(g){if(!(this._bufferService.buffer.x>=this._bufferService.cols))for(var I=g.params[0]||1;I--;)this._bufferService.buffer.x=this._bufferService.buffer.nextStop()},I.prototype.cursorBackwardTab=function(g){if(!(this._bufferService.buffer.x>=this._bufferService.cols))for(var I=g.params[0]||1,A=this._bufferService.buffer;I--;)A.x=A.prevStop()},I.prototype._eraseInBufferLine=function(g,I,A,C){void 0===C&&(C=!1);var t=this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase+g);t.replaceCells(I,A,this._bufferService.buffer.getNullCell(this._terminal.eraseAttrData())),C&&(t.isWrapped=!1)},I.prototype._resetBufferLine=function(g){var I=this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase+g);I.fill(this._bufferService.buffer.getNullCell(this._terminal.eraseAttrData())),I.isWrapped=!1},I.prototype.eraseInDisplay=function(g){var I;switch(this._restrictCursor(),g.params[0]){case 0:for(I=this._bufferService.buffer.y,this._dirtyRowService.markDirty(I),this._eraseInBufferLine(I++,this._bufferService.buffer.x,this._bufferService.cols,0===this._bufferService.buffer.x);I<this._bufferService.rows;I++)this._resetBufferLine(I);this._dirtyRowService.markDirty(I);break;case 1:for(I=this._bufferService.buffer.y,this._dirtyRowService.markDirty(I),this._eraseInBufferLine(I,0,this._bufferService.buffer.x+1,!0),this._bufferService.buffer.x+1>=this._bufferService.cols&&(this._bufferService.buffer.lines.get(I+1).isWrapped=!1);I--;)this._resetBufferLine(I);this._dirtyRowService.markDirty(0);break;case 2:for(I=this._bufferService.rows,this._dirtyRowService.markDirty(I-1);I--;)this._resetBufferLine(I);this._dirtyRowService.markDirty(0);break;case 3:var A=this._bufferService.buffer.lines.length-this._bufferService.rows;A>0&&(this._bufferService.buffer.lines.trimStart(A),this._bufferService.buffer.ybase=Math.max(this._bufferService.buffer.ybase-A,0),this._bufferService.buffer.ydisp=Math.max(this._bufferService.buffer.ydisp-A,0),this._onScroll.fire(0))}},I.prototype.eraseInLine=function(g){switch(this._restrictCursor(),g.params[0]){case 0:this._eraseInBufferLine(this._bufferService.buffer.y,this._bufferService.buffer.x,this._bufferService.cols);break;case 1:this._eraseInBufferLine(this._bufferService.buffer.y,0,this._bufferService.buffer.x+1);break;case 2:this._eraseInBufferLine(this._bufferService.buffer.y,0,this._bufferService.cols)}this._dirtyRowService.markDirty(this._bufferService.buffer.y)},I.prototype.insertLines=function(g){this._restrictCursor();var I=g.params[0]||1,A=this._bufferService.buffer;if(!(A.y>A.scrollBottom||A.y<A.scrollTop)){for(var C=A.y+A.ybase,t=this._bufferService.rows-1-A.scrollBottom,i=this._bufferService.rows-1+A.ybase-t+1;I--;)A.lines.splice(i-1,1),A.lines.splice(C,0,A.getBlankLine(this._terminal.eraseAttrData()));this._dirtyRowService.markRangeDirty(A.y,A.scrollBottom),A.x=0}},I.prototype.deleteLines=function(g){this._restrictCursor();var I=g.params[0]||1,A=this._bufferService.buffer;if(!(A.y>A.scrollBottom||A.y<A.scrollTop)){var C,t=A.y+A.ybase;for(C=this._bufferService.rows-1-A.scrollBottom,C=this._bufferService.rows-1+A.ybase-C;I--;)A.lines.splice(t,1),A.lines.splice(C,0,A.getBlankLine(this._terminal.eraseAttrData()));this._dirtyRowService.markRangeDirty(A.y,A.scrollBottom),A.x=0}},I.prototype.insertChars=function(g){this._restrictCursor();var I=this._bufferService.buffer.lines.get(this._bufferService.buffer.y+this._bufferService.buffer.ybase);I&&(I.insertCells(this._bufferService.buffer.x,g.params[0]||1,this._bufferService.buffer.getNullCell(this._terminal.eraseAttrData())),this._dirtyRowService.markDirty(this._bufferService.buffer.y))},I.prototype.deleteChars=function(g){this._restrictCursor();var I=this._bufferService.buffer.lines.get(this._bufferService.buffer.y+this._bufferService.buffer.ybase);I&&(I.deleteCells(this._bufferService.buffer.x,g.params[0]||1,this._bufferService.buffer.getNullCell(this._terminal.eraseAttrData())),this._dirtyRowService.markDirty(this._bufferService.buffer.y))},I.prototype.scrollUp=function(g){for(var I=g.params[0]||1,A=this._bufferService.buffer;I--;)A.lines.splice(A.ybase+A.scrollTop,1),A.lines.splice(A.ybase+A.scrollBottom,0,A.getBlankLine(this._terminal.eraseAttrData()));this._dirtyRowService.markRangeDirty(A.scrollTop,A.scrollBottom)},I.prototype.scrollDown=function(g){for(var I=g.params[0]||1,A=this._bufferService.buffer;I--;)A.lines.splice(A.ybase+A.scrollBottom,1),A.lines.splice(A.ybase+A.scrollTop,0,A.getBlankLine(c.DEFAULT_ATTR_DATA));this._dirtyRowService.markRangeDirty(A.scrollTop,A.scrollBottom)},I.prototype.scrollLeft=function(g){var I=this._bufferService.buffer;if(!(I.y>I.scrollBottom||I.y<I.scrollTop)){for(var A=g.params[0]||1,C=I.scrollTop;C<=I.scrollBottom;++C){var t=I.lines.get(I.ybase+C);t.deleteCells(0,A,I.getNullCell(this._terminal.eraseAttrData())),t.isWrapped=!1}this._dirtyRowService.markRangeDirty(I.scrollTop,I.scrollBottom)}},I.prototype.scrollRight=function(g){var I=this._bufferService.buffer;if(!(I.y>I.scrollBottom||I.y<I.scrollTop)){for(var A=g.params[0]||1,C=I.scrollTop;C<=I.scrollBottom;++C){var t=I.lines.get(I.ybase+C);t.insertCells(0,A,I.getNullCell(this._terminal.eraseAttrData())),t.isWrapped=!1}this._dirtyRowService.markRangeDirty(I.scrollTop,I.scrollBottom)}},I.prototype.insertColumns=function(g){var I=this._bufferService.buffer;if(!(I.y>I.scrollBottom||I.y<I.scrollTop)){for(var A=g.params[0]||1,C=I.scrollTop;C<=I.scrollBottom;++C){var t=this._bufferService.buffer.lines.get(I.ybase+C);t.insertCells(I.x,A,I.getNullCell(this._terminal.eraseAttrData())),t.isWrapped=!1}this._dirtyRowService.markRangeDirty(I.scrollTop,I.scrollBottom)}},I.prototype.deleteColumns=function(g){var I=this._bufferService.buffer;if(!(I.y>I.scrollBottom||I.y<I.scrollTop)){for(var A=g.params[0]||1,C=I.scrollTop;C<=I.scrollBottom;++C){var t=I.lines.get(I.ybase+C);t.deleteCells(I.x,A,I.getNullCell(this._terminal.eraseAttrData())),t.isWrapped=!1}this._dirtyRowService.markRangeDirty(I.scrollTop,I.scrollBottom)}},I.prototype.eraseChars=function(g){this._restrictCursor();var I=this._bufferService.buffer.lines.get(this._bufferService.buffer.y+this._bufferService.buffer.ybase);I&&(I.replaceCells(this._bufferService.buffer.x,this._bufferService.buffer.x+(g.params[0]||1),this._bufferService.buffer.getNullCell(this._terminal.eraseAttrData())),this._dirtyRowService.markDirty(this._bufferService.buffer.y))},I.prototype.repeatPrecedingCharacter=function(g){if(this._parser.precedingCodepoint){for(var I=g.params[0]||1,A=new Uint32Array(I),C=0;C<I;++C)A[C]=this._parser.precedingCodepoint;this.print(A,0,A.length)}},I.prototype.sendDeviceAttributesPrimary=function(g){g.params[0]>0||(this._terminal.is("xterm")||this._terminal.is("rxvt-unicode")||this._terminal.is("screen")?this._coreService.triggerDataEvent(i.C0.ESC+"[?1;2c"):this._terminal.is("linux")&&this._coreService.triggerDataEvent(i.C0.ESC+"[?6c"))},I.prototype.sendDeviceAttributesSecondary=function(g){g.params[0]>0||(this._terminal.is("xterm")?this._coreService.triggerDataEvent(i.C0.ESC+"[>0;276;0c"):this._terminal.is("rxvt-unicode")?this._coreService.triggerDataEvent(i.C0.ESC+"[>85;95;0c"):this._terminal.is("linux")?this._coreService.triggerDataEvent(g.params[0]+"c"):this._terminal.is("screen")&&this._coreService.triggerDataEvent(i.C0.ESC+"[>83;40003;0c"))},I.prototype.setMode=function(g){for(var I=0;I<g.length;I++)switch(g.params[I]){case 4:this._terminal.insertMode=!0}},I.prototype.setModePrivate=function(g){for(var I=0;I<g.length;I++)switch(g.params[I]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._terminal.setgCharset(0,e.DEFAULT_CHARSET),this._terminal.setgCharset(1,e.DEFAULT_CHARSET),this._terminal.setgCharset(2,e.DEFAULT_CHARSET),this._terminal.setgCharset(3,e.DEFAULT_CHARSET);break;case 3:this._terminal.savedCols=this._bufferService.cols,this._terminal.resize(132,this._bufferService.rows),this._terminal.reset();break;case 6:this._terminal.originMode=!0,this._setCursor(0,0);break;case 7:this._terminal.wraparoundMode=!0;break;case 12:break;case 66:this._logService.debug("Serial port requested application keypad."),this._terminal.applicationKeypad=!0,this._terminal.viewport&&this._terminal.viewport.syncScrollArea();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._terminal.sendFocus=!0;break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._terminal.eraseAttrData()),this._terminal.refresh(0,this._bufferService.rows-1),this._terminal.viewport&&this._terminal.viewport.syncScrollArea(),this._terminal.showCursor();break;case 2004:this._terminal.bracketedPasteMode=!0}},I.prototype.resetMode=function(g){for(var I=0;I<g.length;I++)switch(g.params[I]){case 4:this._terminal.insertMode=!1}},I.prototype.resetModePrivate=function(g){for(var I=0;I<g.length;I++)switch(g.params[I]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:132===this._bufferService.cols&&this._terminal.savedCols&&this._terminal.resize(this._terminal.savedCols,this._bufferService.rows),delete this._terminal.savedCols,this._terminal.reset();break;case 6:this._terminal.originMode=!1,this._setCursor(0,0);break;case 7:this._terminal.wraparoundMode=!1;break;case 12:break;case 66:this._logService.debug("Switching back to normal keypad."),this._terminal.applicationKeypad=!1,this._terminal.viewport&&this._terminal.viewport.syncScrollArea();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._terminal.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),1049===g.params[I]&&this.restoreCursor(),this._terminal.refresh(0,this._bufferService.rows-1),this._terminal.viewport&&this._terminal.viewport.syncScrollArea(),this._terminal.showCursor();break;case 2004:this._terminal.bracketedPasteMode=!1}},I.prototype._extractColor=function(g,I,A){var C=[0,0,-1,0,0,0],t=0,i=0;do{if(C[i+t]=g.params[I+i],g.hasSubParams(I+i)){var e=g.getSubParams(I+i),o=0;do{5===C[1]&&(t=1),C[i+o+1+t]=e[o]}while(++o<e.length&&o+i+1+t<C.length);break}if(5===C[1]&&i+t>=2||2===C[1]&&i+t>=5)break;C[1]&&(t=1)}while(++i+I<g.length&&i+t<C.length);for(o=2;o<C.length;++o)-1===C[o]&&(C[o]=0);return 38===C[0]?2===C[1]?(A.fg|=50331648,A.fg&=-16777216,A.fg|=m.AttributeData.fromColorRGB([C[3],C[4],C[5]])):5===C[1]&&(A.fg&=-50331904,A.fg|=33554432|255&C[3]):48===C[0]&&(2===C[1]?(A.bg|=50331648,A.bg&=-16777216,A.bg|=m.AttributeData.fromColorRGB([C[3],C[4],C[5]])):5===C[1]&&(A.bg&=-50331904,A.bg|=33554432|255&C[3])),i},I.prototype.charAttributes=function(g){if(1===g.length&&0===g.params[0])return this._terminal.curAttrData.fg=c.DEFAULT_ATTR_DATA.fg,void(this._terminal.curAttrData.bg=c.DEFAULT_ATTR_DATA.bg);for(var I,A=g.length,C=this._terminal.curAttrData,t=0;t<A;t++)(I=g.params[t])>=30&&I<=37?(C.fg&=-50331904,C.fg|=16777216|I-30):I>=40&&I<=47?(C.bg&=-50331904,C.bg|=16777216|I-40):I>=90&&I<=97?(C.fg&=-50331904,C.fg|=16777224|I-90):I>=100&&I<=107?(C.bg&=-50331904,C.bg|=16777224|I-100):0===I?(C.fg=c.DEFAULT_ATTR_DATA.fg,C.bg=c.DEFAULT_ATTR_DATA.bg):1===I?C.fg|=134217728:3===I?C.bg|=67108864:4===I?C.fg|=268435456:5===I?C.fg|=536870912:7===I?C.fg|=67108864:8===I?C.fg|=1073741824:2===I?C.bg|=134217728:22===I?(C.fg&=-134217729,C.bg&=-134217729):23===I?C.bg&=-67108865:24===I?C.fg&=-268435457:25===I?C.fg&=-536870913:27===I?C.fg&=-67108865:28===I?C.fg&=-1073741825:39===I?(C.fg&=-67108864,C.fg|=16777215&c.DEFAULT_ATTR_DATA.fg):49===I?(C.bg&=-67108864,C.bg|=16777215&c.DEFAULT_ATTR_DATA.bg):38===I||48===I?t+=this._extractColor(g,t,C):100===I?(C.fg&=-67108864,C.fg|=16777215&c.DEFAULT_ATTR_DATA.fg,C.bg&=-67108864,C.bg|=16777215&c.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",I)},I.prototype.deviceStatus=function(g){switch(g.params[0]){case 5:this._coreService.triggerDataEvent(i.C0.ESC+"[0n");break;case 6:var I=this._bufferService.buffer.y+1,A=this._bufferService.buffer.x+1;this._coreService.triggerDataEvent(i.C0.ESC+"["+I+";"+A+"R")}},I.prototype.deviceStatusPrivate=function(g){switch(g.params[0]){case 6:var I=this._bufferService.buffer.y+1,A=this._bufferService.buffer.x+1;this._coreService.triggerDataEvent(i.C0.ESC+"[?"+I+";"+A+"R")}},I.prototype.softReset=function(g){this._coreService.isCursorHidden=!1,this._terminal.insertMode=!1,this._terminal.originMode=!1,this._terminal.wraparoundMode=!0,this._terminal.applicationKeypad=!1,this._terminal.viewport&&this._terminal.viewport.syncScrollArea(),this._coreService.decPrivateModes.applicationCursorKeys=!1,this._bufferService.buffer.scrollTop=0,this._bufferService.buffer.scrollBottom=this._bufferService.rows-1,this._terminal.curAttrData=c.DEFAULT_ATTR_DATA.clone(),this._bufferService.buffer.x=this._bufferService.buffer.y=0,this._terminal.charset=null,this._terminal.glevel=0,this._terminal.charsets=[null]},I.prototype.setCursorStyle=function(g){var I=g.params[0]||1;switch(I){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}var A=I%2==1;this._optionsService.options.cursorBlink=A},I.prototype.setScrollRegion=function(g){var I,A=g.params[0]||1;(g.length<2||(I=g.params[1])>this._bufferService.rows||0===I)&&(I=this._bufferService.rows),I>A&&(this._bufferService.buffer.scrollTop=A-1,this._bufferService.buffer.scrollBottom=I-1,this._setCursor(0,0))},I.prototype.saveCursor=function(g){this._bufferService.buffer.savedX=this._bufferService.buffer.x,this._bufferService.buffer.savedY=this._bufferService.buffer.ybase+this._bufferService.buffer.y,this._bufferService.buffer.savedCurAttrData.fg=this._terminal.curAttrData.fg,this._bufferService.buffer.savedCurAttrData.bg=this._terminal.curAttrData.bg,this._bufferService.buffer.savedCharset=this._terminal.charset},I.prototype.restoreCursor=function(g){this._bufferService.buffer.x=this._bufferService.buffer.savedX||0,this._bufferService.buffer.y=Math.max(this._bufferService.buffer.savedY-this._bufferService.buffer.ybase,0),this._terminal.curAttrData.fg=this._bufferService.buffer.savedCurAttrData.fg,this._terminal.curAttrData.bg=this._bufferService.buffer.savedCurAttrData.bg,this._terminal.charset=this._savedCharset,this._bufferService.buffer.savedCharset&&(this._terminal.charset=this._bufferService.buffer.savedCharset),this._restrictCursor()},I.prototype.setTitle=function(g){this._terminal.handleTitle(g)},I.prototype.nextLine=function(){this._bufferService.buffer.x=0,this.index()},I.prototype.keypadApplicationMode=function(){this._logService.debug("Serial port requested application keypad."),this._terminal.applicationKeypad=!0,this._terminal.viewport&&this._terminal.viewport.syncScrollArea()},I.prototype.keypadNumericMode=function(){this._logService.debug("Switching back to normal keypad."),this._terminal.applicationKeypad=!1,this._terminal.viewport&&this._terminal.viewport.syncScrollArea()},I.prototype.selectDefaultCharset=function(){this._terminal.setgLevel(0),this._terminal.setgCharset(0,e.DEFAULT_CHARSET)},I.prototype.selectCharset=function(g){2===g.length?"/"!==g[0]&&this._terminal.setgCharset(G[g[0]],e.CHARSETS[g[1]]||e.DEFAULT_CHARSET):this.selectDefaultCharset()},I.prototype.index=function(){this._restrictCursor();var g=this._bufferService.buffer;this._bufferService.buffer.y++,g.y===g.scrollBottom+1?(g.y--,this._terminal.scroll()):g.y>=this._bufferService.rows&&(g.y=this._bufferService.rows-1),this._restrictCursor()},I.prototype.tabSet=function(){this._bufferService.buffer.tabs[this._bufferService.buffer.x]=!0},I.prototype.reverseIndex=function(){this._restrictCursor();var g=this._bufferService.buffer;if(g.y===g.scrollTop){var I=g.scrollBottom-g.scrollTop;g.lines.shiftElements(g.y+g.ybase,I,1),g.lines.set(g.y+g.ybase,g.getBlankLine(this._terminal.eraseAttrData())),this._dirtyRowService.markRangeDirty(g.scrollTop,g.scrollBottom)}else g.y--,this._restrictCursor()},I.prototype.reset=function(){this._parser.reset(),this._terminal.reset()},I.prototype.setgLevel=function(g){this._terminal.setgLevel(g)},I.prototype.screenAlignmentPattern=function(){var g=new h.CellData;g.content=1<<22|"E".charCodeAt(0),g.fg=this._terminal.curAttrData.fg,g.bg=this._terminal.curAttrData.bg;var I=this._bufferService.buffer;this._setCursor(0,0);for(var A=0;A<this._bufferService.rows;++A){var C=I.y+I.ybase+A;I.lines.get(C).fill(g),I.lines.get(C).isWrapped=!1}this._dirtyRowService.markAllDirty(),this._setCursor(0,0)},I}(s.Disposable);I.InputHandler=p},function(g,I,A){var C,t=this&&this.__extends||(C=function(g,I){return(C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,I){g.__proto__=I}||function(g,I){for(var A in I)I.hasOwnProperty(A)&&(g[A]=I[A])})(g,I)},function(g,I){function A(){this.constructor=g}C(g,I),g.prototype=null===I?Object.create(I):(A.prototype=I.prototype,new A)});Object.defineProperty(I,"__esModule",{value:!0});var i=A(2),e=A(15),o=A(20),n=A(21),s=A(23),l=function(){function g(g){this.table=new Uint8Array(g)}return g.prototype.setDefault=function(g,I){e.fill(this.table,g<<4|I)},g.prototype.add=function(g,I,A,C){this.table[I<<8|g]=A<<4|C},g.prototype.addMany=function(g,I,A,C){for(var t=0;t<g.length;t++)this.table[I<<8|g[t]]=A<<4|C},g}();I.TransitionTable=l,I.VT500_TRANSITION_TABLE=function(){var g=new l(4095),I=Array.apply(null,Array(256)).map((function(g,I){return I})),A=function(g,A){return I.slice(g,A)},C=A(32,127),t=A(0,24);t.push(25),t.push.apply(t,A(28,32));var i,e=A(0,14);for(i in g.setDefault(1,0),g.addMany(C,0,2,0),e)g.addMany([24,26,153,154],i,3,0),g.addMany(A(128,144),i,3,0),g.addMany(A(144,152),i,3,0),g.add(156,i,0,0),g.add(27,i,11,1),g.add(157,i,4,8),g.addMany([152,158,159],i,0,7),g.add(155,i,11,3),g.add(144,i,11,9);return g.addMany(t,0,3,0),g.addMany(t,1,3,1),g.add(127,1,0,1),g.addMany(t,8,0,8),g.addMany(t,3,3,3),g.add(127,3,0,3),g.addMany(t,4,3,4),g.add(127,4,0,4),g.addMany(t,6,3,6),g.addMany(t,5,3,5),g.add(127,5,0,5),g.addMany(t,2,3,2),g.add(127,2,0,2),g.add(93,1,4,8),g.addMany(C,8,5,8),g.add(127,8,5,8),g.addMany([156,27,24,26,7],8,6,0),g.addMany(A(28,32),8,0,8),g.addMany([88,94,95],1,0,7),g.addMany(C,7,0,7),g.addMany(t,7,0,7),g.add(156,7,0,0),g.add(127,7,0,7),g.add(91,1,11,3),g.addMany(A(64,127),3,7,0),g.addMany(A(48,60),3,8,4),g.addMany([60,61,62,63],3,9,4),g.addMany(A(48,60),4,8,4),g.addMany(A(64,127),4,7,0),g.addMany([60,61,62,63],4,0,6),g.addMany(A(32,64),6,0,6),g.add(127,6,0,6),g.addMany(A(64,127),6,0,0),g.addMany(A(32,48),3,9,5),g.addMany(A(32,48),5,9,5),g.addMany(A(48,64),5,0,6),g.addMany(A(64,127),5,7,0),g.addMany(A(32,48),4,9,5),g.addMany(A(32,48),1,9,2),g.addMany(A(32,48),2,9,2),g.addMany(A(48,127),2,10,0),g.addMany(A(48,80),1,10,0),g.addMany(A(81,88),1,10,0),g.addMany([89,90,92],1,10,0),g.addMany(A(96,127),1,10,0),g.add(80,1,11,9),g.addMany(t,9,0,9),g.add(127,9,0,9),g.addMany(A(28,32),9,0,9),g.addMany(A(32,48),9,9,12),g.addMany(A(48,60),9,8,10),g.addMany([60,61,62,63],9,9,10),g.addMany(t,11,0,11),g.addMany(A(32,128),11,0,11),g.addMany(A(28,32),11,0,11),g.addMany(t,10,0,10),g.add(127,10,0,10),g.addMany(A(28,32),10,0,10),g.addMany(A(48,60),10,8,10),g.addMany([60,61,62,63],10,0,11),g.addMany(A(32,48),10,9,12),g.addMany(t,12,0,12),g.add(127,12,0,12),g.addMany(A(28,32),12,0,12),g.addMany(A(32,48),12,9,12),g.addMany(A(48,64),12,0,11),g.addMany(A(64,127),12,12,13),g.addMany(A(64,127),10,12,13),g.addMany(A(64,127),9,12,13),g.addMany(t,13,13,13),g.addMany(C,13,13,13),g.add(127,13,0,13),g.addMany([27,156,24,26],13,14,0),g.add(160,0,2,0),g.add(160,8,5,8),g.add(160,6,0,6),g.add(160,11,0,11),g.add(160,13,13,13),g}();var r=function(g){function A(A){void 0===A&&(A=I.VT500_TRANSITION_TABLE);var C=g.call(this)||this;return C.TRANSITIONS=A,C.initialState=0,C.currentState=C.initialState,C._params=new o.Params,C._params.addParam(0),C._collect=0,C.precedingCodepoint=0,C._printHandlerFb=function(g,I,A){},C._executeHandlerFb=function(g){},C._csiHandlerFb=function(g,I){},C._escHandlerFb=function(g){},C._errorHandlerFb=function(g){return g},C._printHandler=C._printHandlerFb,C._executeHandlers=Object.create(null),C._csiHandlers=Object.create(null),C._escHandlers=Object.create(null),C._oscParser=new n.OscParser,C._dcsParser=new s.DcsParser,C._errorHandler=C._errorHandlerFb,C.setEscHandler({final:"\\"},(function(){})),C}return t(A,g),A.prototype._identifier=function(g,I){void 0===I&&(I=[64,126]);var A=0;if(g.prefix){if(g.prefix.length>1)throw new Error("only one byte as prefix supported");if((A=g.prefix.charCodeAt(0))&&60>A||A>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(g.intermediates){if(g.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(var C=0;C<g.intermediates.length;++C){var t=g.intermediates.charCodeAt(C);if(32>t||t>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");A<<=8,A|=t}}if(1!==g.final.length)throw new Error("final must be a single byte");var i=g.final.charCodeAt(0);if(I[0]>i||i>I[1])throw new Error("final must be in range "+I[0]+" .. "+I[1]);return(A<<=8)|i},A.prototype.identToString=function(g){for(var I=[];g;)I.push(String.fromCharCode(255&g)),g>>=8;return I.reverse().join("")},A.prototype.dispose=function(){this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null),this._oscParser.dispose(),this._dcsParser.dispose()},A.prototype.setPrintHandler=function(g){this._printHandler=g},A.prototype.clearPrintHandler=function(){this._printHandler=this._printHandlerFb},A.prototype.addEscHandler=function(g,I){var A=this._identifier(g,[48,126]);void 0===this._escHandlers[A]&&(this._escHandlers[A]=[]);var C=this._escHandlers[A];return C.push(I),{dispose:function(){var g=C.indexOf(I);-1!==g&&C.splice(g,1)}}},A.prototype.setEscHandler=function(g,I){this._escHandlers[this._identifier(g,[48,126])]=[I]},A.prototype.clearEscHandler=function(g){this._escHandlers[this._identifier(g,[48,126])]&&delete this._escHandlers[this._identifier(g,[48,126])]},A.prototype.setEscHandlerFallback=function(g){this._escHandlerFb=g},A.prototype.setExecuteHandler=function(g,I){this._executeHandlers[g.charCodeAt(0)]=I},A.prototype.clearExecuteHandler=function(g){this._executeHandlers[g.charCodeAt(0)]&&delete this._executeHandlers[g.charCodeAt(0)]},A.prototype.setExecuteHandlerFallback=function(g){this._executeHandlerFb=g},A.prototype.addCsiHandler=function(g,I){var A=this._identifier(g);void 0===this._csiHandlers[A]&&(this._csiHandlers[A]=[]);var C=this._csiHandlers[A];return C.push(I),{dispose:function(){var g=C.indexOf(I);-1!==g&&C.splice(g,1)}}},A.prototype.setCsiHandler=function(g,I){this._csiHandlers[this._identifier(g)]=[I]},A.prototype.clearCsiHandler=function(g){this._csiHandlers[this._identifier(g)]&&delete this._csiHandlers[this._identifier(g)]},A.prototype.setCsiHandlerFallback=function(g){this._csiHandlerFb=g},A.prototype.addDcsHandler=function(g,I){return this._dcsParser.addHandler(this._identifier(g),I)},A.prototype.setDcsHandler=function(g,I){this._dcsParser.setHandler(this._identifier(g),I)},A.prototype.clearDcsHandler=function(g){this._dcsParser.clearHandler(this._identifier(g))},A.prototype.setDcsHandlerFallback=function(g){this._dcsParser.setHandlerFallback(g)},A.prototype.addOscHandler=function(g,I){return this._oscParser.addHandler(g,I)},A.prototype.setOscHandler=function(g,I){this._oscParser.setHandler(g,I)},A.prototype.clearOscHandler=function(g){this._oscParser.clearHandler(g)},A.prototype.setOscHandlerFallback=function(g){this._oscParser.setHandlerFallback(g)},A.prototype.setErrorHandler=function(g){this._errorHandler=g},A.prototype.clearErrorHandler=function(){this._errorHandler=this._errorHandlerFb},A.prototype.reset=function(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0},A.prototype.parse=function(g,I){for(var A=0,C=0,t=this.currentState,i=this._oscParser,e=this._dcsParser,o=this._collect,n=this._params,s=this.TRANSITIONS.table,l=0;l<I;++l){switch((C=s[t<<8|((A=g[l])<160?A:160)])>>4){case 2:for(var r=l+1;;++r){if(r>=I||(A=g[r])<32||A>126&&A<160){this._printHandler(g,l,r),l=r-1;break}if(++r>=I||(A=g[r])<32||A>126&&A<160){this._printHandler(g,l,r),l=r-1;break}if(++r>=I||(A=g[r])<32||A>126&&A<160){this._printHandler(g,l,r),l=r-1;break}if(++r>=I||(A=g[r])<32||A>126&&A<160){this._printHandler(g,l,r),l=r-1;break}}break;case 3:this._executeHandlers[A]?this._executeHandlers[A]():this._executeHandlerFb(A),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:l,code:A,currentState:t,collect:o,params:n,abort:!1}).abort)return;break;case 7:for(var c=this._csiHandlers[o<<8|A],a=c?c.length-1:-1;a>=0&&!1===c[a](n);a--);a<0&&this._csiHandlerFb(o<<8|A,n),this.precedingCodepoint=0;break;case 8:do{switch(A){case 59:n.addParam(0);break;case 58:n.addSubParam(-1);break;default:n.addDigit(A-48)}}while(++l<I&&(A=g[l])>47&&A<60);l--;break;case 9:o<<=8,o|=A;break;case 10:for(var d=this._escHandlers[o<<8|A],h=d?d.length-1:-1;h>=0&&!1===d[h]();h--);h<0&&this._escHandlerFb(o<<8|A),this.precedingCodepoint=0;break;case 11:n.reset(),n.addParam(0),o=0;break;case 12:e.hook(o<<8|A,n);break;case 13:for(var m=l+1;;++m)if(m>=I||24===(A=g[m])||26===A||27===A||A>127&&A<160){e.put(g,l,m),l=m-1;break}break;case 14:e.unhook(24!==A&&26!==A),27===A&&(C|=1),n.reset(),n.addParam(0),o=0,this.precedingCodepoint=0;break;case 4:i.start();break;case 5:for(var Z=l+1;;Z++)if(Z>=I||(A=g[Z])<32||A>127&&A<=159){i.put(g,l,Z),l=Z-1;break}break;case 6:i.end(24!==A&&26!==A),27===A&&(C|=1),n.reset(),n.addParam(0),o=0,this.precedingCodepoint=0}t=15&C}this._collect=o,this.currentState=t},A}(i.Disposable);I.EscapeSequenceParser=r},function(g,I,A){var C,t=this&&this.__extends||(C=function(g,I){return(C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,I){g.__proto__=I}||function(g,I){for(var A in I)I.hasOwnProperty(A)&&(g[A]=I[A])})(g,I)},function(g,I){function A(){this.constructor=g}C(g,I),g.prototype=null===I?Object.create(I):(A.prototype=I.prototype,new A)}),i=this&&this.__decorate||function(g,I,A,C){var t,i=arguments.length,e=i<3?I:null===C?C=Object.getOwnPropertyDescriptor(I,A):C;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)e=Reflect.decorate(g,I,A,C);else for(var o=g.length-1;o>=0;o--)(t=g[o])&&(e=(i<3?t(e):i>3?t(I,A,e):t(I,A))||e);return i>3&&e&&Object.defineProperty(I,A,e),e},e=this&&this.__param||function(g,I){return function(A,C){I(A,C,g)}};Object.defineProperty(I,"__esModule",{value:!0});var o=A(41),n=A(47),s=A(48),l=A(49),r=A(28),c=A(2),a=A(4),d=A(0),h=A(24),m=A(1),Z=1,u=function(g){function I(I,A,C,t,i,e,c,a){var d=g.call(this)||this;d._colors=I,d._screenElement=A,d._linkifier=C,d._bufferService=t,d._charSizeService=i,d._optionsService=e,d.coreService=c,d.coreBrowserService=a,d._id=Z++,d._onRequestRefreshRows=new m.EventEmitter;var h=d._optionsService.options.allowTransparency;return d._characterJoinerRegistry=new r.CharacterJoinerRegistry(d._bufferService),d._renderLayers=[new o.TextRenderLayer(d._screenElement,0,d._colors,d._characterJoinerRegistry,h,d._id,d._bufferService,e),new n.SelectionRenderLayer(d._screenElement,1,d._colors,d._id,d._bufferService,e),new l.LinkRenderLayer(d._screenElement,2,d._colors,d._id,d._linkifier,d._bufferService,e),new s.CursorRenderLayer(d._screenElement,3,d._colors,d._id,d._onRequestRefreshRows,d._bufferService,e,c,a)],d.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},d._devicePixelRatio=window.devicePixelRatio,d._updateDimensions(),d.onOptionsChanged(),d}return t(I,g),Object.defineProperty(I.prototype,"onRequestRefreshRows",{get:function(){return this._onRequestRefreshRows.event},enumerable:!0,configurable:!0}),I.prototype.dispose=function(){g.prototype.dispose.call(this),this._renderLayers.forEach((function(g){return g.dispose()})),h.removeTerminalFromCache(this._id)},I.prototype.onDevicePixelRatioChange=function(){this._devicePixelRatio!==window.devicePixelRatio&&(this._devicePixelRatio=window.devicePixelRatio,this.onResize(this._bufferService.cols,this._bufferService.rows))},I.prototype.setColors=function(g){var I=this;this._colors=g,this._renderLayers.forEach((function(g){g.setColors(I._colors),g.reset()}))},I.prototype.onResize=function(g,I){var A=this;this._updateDimensions(),this._renderLayers.forEach((function(g){return g.resize(A.dimensions)})),this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},I.prototype.onCharSizeChanged=function(){this.onResize(this._bufferService.cols,this._bufferService.rows)},I.prototype.onBlur=function(){this._runOperation((function(g){return g.onBlur()}))},I.prototype.onFocus=function(){this._runOperation((function(g){return g.onFocus()}))},I.prototype.onSelectionChanged=function(g,I,A){void 0===A&&(A=!1),this._runOperation((function(C){return C.onSelectionChanged(g,I,A)}))},I.prototype.onCursorMove=function(){this._runOperation((function(g){return g.onCursorMove()}))},I.prototype.onOptionsChanged=function(){this._runOperation((function(g){return g.onOptionsChanged()}))},I.prototype.clear=function(){this._runOperation((function(g){return g.reset()}))},I.prototype._runOperation=function(g){this._renderLayers.forEach((function(I){return g(I)}))},I.prototype.renderRows=function(g,I){this._renderLayers.forEach((function(A){return A.onGridChanged(g,I)}))},I.prototype._updateDimensions=function(){this._charSizeService.hasValidSize&&(this.dimensions.scaledCharWidth=Math.floor(this._charSizeService.width*window.devicePixelRatio),this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.options.lineHeight),this.dimensions.scaledCharTop=1===this._optionsService.options.lineHeight?0:Math.round((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.options.letterSpacing),this.dimensions.scaledCharLeft=Math.floor(this._optionsService.options.letterSpacing/2),this.dimensions.scaledCanvasHeight=this._bufferService.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=this._bufferService.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows,this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols)},I.prototype.registerCharacterJoiner=function(g){return this._characterJoinerRegistry.registerCharacterJoiner(g)},I.prototype.deregisterCharacterJoiner=function(g){return this._characterJoinerRegistry.deregisterCharacterJoiner(g)},i([e(3,d.IBufferService),e(4,a.ICharSizeService),e(5,d.IOptionsService),e(6,d.ICoreService),e(7,a.ICoreBrowserService)],I)}(c.Disposable);I.Renderer=u},function(g,I,A){var C,t=this&&this.__extends||(C=function(g,I){return(C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,I){g.__proto__=I}||function(g,I){for(var A in I)I.hasOwnProperty(A)&&(g[A]=I[A])})(g,I)},function(g,I){function A(){this.constructor=g}C(g,I),g.prototype=null===I?Object.create(I):(A.prototype=I.prototype,new A)});Object.defineProperty(I,"__esModule",{value:!0});var i=A(42),e=A(13),o=A(6),n=A(3),s=A(28),l=A(5),r=function(g){function I(I,A,C,t,e,o,n,s){var r=g.call(this,I,"text",A,e,C,o,n,s)||this;return r.bufferService=n,r.optionsService=s,r._characterWidth=0,r._characterFont="",r._characterOverlapCache={},r._workCell=new l.CellData,r._state=new i.GridCache,r._characterJoinerRegistry=t,r}return t(I,g),I.prototype.resize=function(I){g.prototype.resize.call(this,I);var A=this._getFont(!1,!1);this._characterWidth===I.scaledCharWidth&&this._characterFont===A||(this._characterWidth=I.scaledCharWidth,this._characterFont=A,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)},I.prototype.reset=function(){this._state.clear(),this._clearAll()},I.prototype._forEachCell=function(g,I,A,C){for(var t=g;t<=I;t++)for(var i=t+this._bufferService.buffer.ydisp,e=this._bufferService.buffer.lines.get(i),o=A?A.getJoinedCharacters(i):[],l=0;l<this._bufferService.cols;l++){e.loadCell(l,this._workCell);var r=this._workCell,c=!1,a=l;if(0!==r.getWidth()){if(o.length>0&&l===o[0][0]){c=!0;var d=o.shift();r=new s.JoinedCellData(this._workCell,e.translateToString(!0,d[0],d[1]),d[1]-d[0]),a=d[1]-1}!c&&this._isOverlapping(r)&&a<e.length-1&&e.getCodePoint(a+1)===n.NULL_CELL_CODE&&(r.content&=-12582913,r.content|=2<<22),C(r,l,t),l=a}}},I.prototype._drawBackground=function(g,I){var A=this,C=this._ctx,t=this._bufferService.cols,i=0,e=0,n=null;C.save(),this._forEachCell(g,I,null,(function(g,I,s){var l=null;g.isInverse()?l=g.isFgDefault()?A._colors.foreground.css:g.isFgRGB()?"rgb("+o.AttributeData.toColorRGB(g.getFgColor()).join(",")+")":A._colors.ansi[g.getFgColor()].css:g.isBgRGB()?l="rgb("+o.AttributeData.toColorRGB(g.getBgColor()).join(",")+")":g.isBgPalette()&&(l=A._colors.ansi[g.getBgColor()].css),null===n&&(i=I,e=s),s!==e?(C.fillStyle=n||"",A._fillCells(i,e,t-i,1),i=I,e=s):n!==l&&(C.fillStyle=n||"",A._fillCells(i,e,I-i,1),i=I,e=s),n=l})),null!==n&&(C.fillStyle=n,this._fillCells(i,e,t-i,1)),C.restore()},I.prototype._drawForeground=function(g,I){var A=this;this._forEachCell(g,I,this._characterJoinerRegistry,(function(g,I,C){if(!g.isInvisible()&&(A._drawChars(g,I,C),g.isUnderline())){if(A._ctx.save(),g.isInverse())if(g.isBgDefault())A._ctx.fillStyle=A._colors.background.css;else if(g.isBgRGB())A._ctx.fillStyle="rgb("+o.AttributeData.toColorRGB(g.getBgColor()).join(",")+")";else{var t=g.getBgColor();A._optionsService.options.drawBoldTextInBrightColors&&g.isBold()&&t<8&&(t+=8),A._ctx.fillStyle=A._colors.ansi[t].css}else if(g.isFgDefault())A._ctx.fillStyle=A._colors.foreground.css;else if(g.isFgRGB())A._ctx.fillStyle="rgb("+o.AttributeData.toColorRGB(g.getFgColor()).join(",")+")";else{var i=g.getFgColor();A._optionsService.options.drawBoldTextInBrightColors&&g.isBold()&&i<8&&(i+=8),A._ctx.fillStyle=A._colors.ansi[i].css}A._fillBottomLineAtCells(I,C,g.getWidth()),A._ctx.restore()}}))},I.prototype.onGridChanged=function(g,I){0!==this._state.cache.length&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,g,this._bufferService.cols,I-g+1),this._drawBackground(g,I),this._drawForeground(g,I))},I.prototype.onOptionsChanged=function(){this._setTransparency(this._optionsService.options.allowTransparency)},I.prototype._isOverlapping=function(g){if(1!==g.getWidth())return!1;if(g.getCode()<256)return!1;var I=g.getChars();if(this._characterOverlapCache.hasOwnProperty(I))return this._characterOverlapCache[I];this._ctx.save(),this._ctx.font=this._characterFont;var A=Math.floor(this._ctx.measureText(I).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[I]=A,A},I}(e.BaseRenderLayer);I.TextRenderLayer=r},function(g,I,A){Object.defineProperty(I,"__esModule",{value:!0});var C=function(){function g(){this.cache=[]}return g.prototype.resize=function(g,I){for(var A=0;A<g;A++){this.cache.length<=A&&this.cache.push([]);for(var C=this.cache[A].length;C<I;C++)this.cache[A].push(void 0);this.cache[A].length=I}this.cache.length=g},g.prototype.clear=function(){for(var g=0;g<this.cache.length;g++)for(var I=0;I<this.cache[g].length;I++)this.cache[g][I]=void 0},g}();I.GridCache=C},function(g,I,A){var C,t=this&&this.__extends||(C=function(g,I){return(C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,I){g.__proto__=I}||function(g,I){for(var A in I)I.hasOwnProperty(A)&&(g[A]=I[A])})(g,I)},function(g,I){function A(){this.constructor=g}C(g,I),g.prototype=null===I?Object.create(I):(A.prototype=I.prototype,new A)});Object.defineProperty(I,"__esModule",{value:!0});var i=A(9),e=A(44),o=A(26),n=A(46),s=A(11),l=A(27),r=A(10),c=1024,a=1024,d={css:"rgba(0, 0, 0, 0)",rgba:0};function h(g){return g.code<<21|g.bg<<12|g.fg<<3|(g.bold?0:4)+(g.dim?0:2)+(g.italic?0:1)}I.getGlyphCacheKey=h;var m=function(g){function I(I,A){var C=g.call(this)||this;C._config=A,C._drawToCacheCount=0,C._glyphsWaitingOnBitmap=[],C._bitmapCommitTimeout=null,C._bitmap=null,C._cacheCanvas=I.createElement("canvas"),C._cacheCanvas.width=c,C._cacheCanvas.height=a,C._cacheCtx=l.throwIfFalsy(C._cacheCanvas.getContext("2d",{alpha:!0}));var t=I.createElement("canvas");t.width=C._config.scaledCharWidth,t.height=C._config.scaledCharHeight,C._tmpCtx=l.throwIfFalsy(t.getContext("2d",{alpha:C._config.allowTransparency})),C._width=Math.floor(c/C._config.scaledCharWidth),C._height=Math.floor(a/C._config.scaledCharHeight);var i=C._width*C._height;return C._cacheMap=new n.LRUMap(i),C._cacheMap.prealloc(i),C}return t(I,g),I.prototype.dispose=function(){null!==this._bitmapCommitTimeout&&(window.clearTimeout(this._bitmapCommitTimeout),this._bitmapCommitTimeout=null)},I.prototype.beginFrame=function(){this._drawToCacheCount=0},I.prototype.draw=function(g,I,A,C){if(32===I.code)return!0;if(!this._canCache(I))return!1;var t=h(I),i=this._cacheMap.get(t);if(null!=i)return this._drawFromCache(g,i,A,C),!0;if(this._drawToCacheCount<100){var e=void 0;e=this._cacheMap.size<this._cacheMap.capacity?this._cacheMap.size:this._cacheMap.peek().index;var o=this._drawToCache(I,e);return this._cacheMap.set(t,o),this._drawFromCache(g,o,A,C),!0}return!1},I.prototype._canCache=function(g){return g.code<256},I.prototype._toCoordinateX=function(g){return g%this._width*this._config.scaledCharWidth},I.prototype._toCoordinateY=function(g){return Math.floor(g/this._width)*this._config.scaledCharHeight},I.prototype._drawFromCache=function(g,I,A,C){if(!I.isEmpty){var t=this._toCoordinateX(I.index),i=this._toCoordinateY(I.index);g.drawImage(I.inBitmap?this._bitmap:this._cacheCanvas,t,i,this._config.scaledCharWidth,this._config.scaledCharHeight,A,C,this._config.scaledCharWidth,this._config.scaledCharHeight)}},I.prototype._getColorFromAnsiIndex=function(g){return g<this._config.colors.ansi.length?this._config.colors.ansi[g]:o.DEFAULT_ANSI_COLORS[g]},I.prototype._getBackgroundColor=function(g){return this._config.allowTransparency?d:g.bg===i.INVERTED_DEFAULT_COLOR?this._config.colors.foreground:g.bg<256?this._getColorFromAnsiIndex(g.bg):this._config.colors.background},I.prototype._getForegroundColor=function(g){return g.fg===i.INVERTED_DEFAULT_COLOR?r.opaque(this._config.colors.background):g.fg<256?this._getColorFromAnsiIndex(g.fg):this._config.colors.foreground},I.prototype._drawToCache=function(g,I){this._drawToCacheCount++,this._tmpCtx.save();var A=this._getBackgroundColor(g);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=A.css,this._tmpCtx.fillRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),this._tmpCtx.globalCompositeOperation="source-over";var C=g.bold?this._config.fontWeightBold:this._config.fontWeight,t=g.italic?"italic":"";this._tmpCtx.font=t+" "+C+" "+this._config.fontSize*this._config.devicePixelRatio+"px "+this._config.fontFamily,this._tmpCtx.textBaseline="middle",this._tmpCtx.fillStyle=this._getForegroundColor(g).css,g.dim&&(this._tmpCtx.globalAlpha=i.DIM_OPACITY),this._tmpCtx.fillText(g.chars,0,this._config.scaledCharHeight/2),this._tmpCtx.restore();var e=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),o=!1;this._config.allowTransparency||(o=function(g,I){for(var A=!0,C=I.rgba>>>24,t=I.rgba>>>16&255,i=I.rgba>>>8&255,e=0;e<g.data.length;e+=4)g.data[e]===C&&g.data[e+1]===t&&g.data[e+2]===i?g.data[e+3]=0:A=!1;return A}(e,A));var n=this._toCoordinateX(I),s=this._toCoordinateY(I);this._cacheCtx.putImageData(e,n,s);var l={index:I,isEmpty:o,inBitmap:!1};return this._addGlyphToBitmap(l),l},I.prototype._addGlyphToBitmap=function(g){var I=this;"createImageBitmap"in window&&!s.isFirefox&&!s.isSafari&&(this._glyphsWaitingOnBitmap.push(g),null===this._bitmapCommitTimeout&&(this._bitmapCommitTimeout=window.setTimeout((function(){return I._generateBitmap()}),100)))},I.prototype._generateBitmap=function(){var g=this,I=this._glyphsWaitingOnBitmap;this._glyphsWaitingOnBitmap=[],window.createImageBitmap(this._cacheCanvas).then((function(A){g._bitmap=A;for(var C=0;C<I.length;C++)I[C].inBitmap=!0})),this._bitmapCommitTimeout=null},I}(e.BaseCharAtlas);I.DynamicCharAtlas=m;var Z=function(g){function I(I,A){return g.call(this)||this}return t(I,g),I.prototype.draw=function(g,I,A,C){return!1},I}(e.BaseCharAtlas);I.NoneCharAtlas=Z},function(g,I,A){Object.defineProperty(I,"__esModule",{value:!0});var C=function(){function g(){this._didWarmUp=!1}return g.prototype.dispose=function(){},g.prototype.warmUp=function(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)},g.prototype._doWarmUp=function(){},g.prototype.beginFrame=function(){},g}();I.BaseCharAtlas=C},function(g,I,A){Object.defineProperty(I,"__esModule",{value:!0});var C=function(){function g(){this._color={},this._rgba={}}return g.prototype.clear=function(){this._color={},this._rgba={}},g.prototype.setCss=function(g,I,A){this._rgba[g]||(this._rgba[g]={}),this._rgba[g][I]=A},g.prototype.getCss=function(g,I){return this._rgba[g]?this._rgba[g][I]:void 0},g.prototype.setColor=function(g,I,A){this._color[g]||(this._color[g]={}),this._color[g][I]=A},g.prototype.getColor=function(g,I){return this._color[g]?this._color[g][I]:void 0},g}();I.ColorContrastCache=C},function(g,I,A){Object.defineProperty(I,"__esModule",{value:!0});var C=function(){function g(g){this.capacity=g,this._map={},this._head=null,this._tail=null,this._nodePool=[],this.size=0}return g.prototype._unlinkNode=function(g){var I=g.prev,A=g.next;g===this._head&&(this._head=A),g===this._tail&&(this._tail=I),null!==I&&(I.next=A),null!==A&&(A.prev=I)},g.prototype._appendNode=function(g){var I=this._tail;null!==I&&(I.next=g),g.prev=I,g.next=null,this._tail=g,null===this._head&&(this._head=g)},g.prototype.prealloc=function(g){for(var I=this._nodePool,A=0;A<g;A++)I.push({prev:null,next:null,key:null,value:null})},g.prototype.get=function(g){var I=this._map[g];return void 0!==I?(this._unlinkNode(I),this._appendNode(I),I.value):null},g.prototype.peekValue=function(g){var I=this._map[g];return void 0!==I?I.value:null},g.prototype.peek=function(){var g=this._head;return null===g?null:g.value},g.prototype.set=function(g,I){var A=this._map[g];if(void 0!==A)A=this._map[g],this._unlinkNode(A),A.value=I;else if(this.size>=this.capacity)A=this._head,this._unlinkNode(A),delete this._map[A.key],A.key=g,A.value=I,this._map[g]=A;else{var C=this._nodePool;C.length>0?((A=C.pop()).key=g,A.value=I):A={prev:null,next:null,key:g,value:I},this._map[g]=A,this.size++}this._appendNode(A)},g}();I.LRUMap=C},function(g,I,A){var C,t=this&&this.__extends||(C=function(g,I){return(C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,I){g.__proto__=I}||function(g,I){for(var A in I)I.hasOwnProperty(A)&&(g[A]=I[A])})(g,I)},function(g,I){function A(){this.constructor=g}C(g,I),g.prototype=null===I?Object.create(I):(A.prototype=I.prototype,new A)});Object.defineProperty(I,"__esModule",{value:!0});var i=function(g){function I(I,A,C,t,i,e){var o=g.call(this,I,"selection",A,!0,C,t,i,e)||this;return o.bufferService=i,o.optionsService=e,o._clearState(),o}return t(I,g),I.prototype._clearState=function(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}},I.prototype.resize=function(I){g.prototype.resize.call(this,I),this._clearState()},I.prototype.reset=function(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())},I.prototype.onSelectionChanged=function(g,I,A){if(this._didStateChange(g,I,A,this._bufferService.buffer.ydisp))if(this._clearAll(),g&&I){var C=g[1]-this._bufferService.buffer.ydisp,t=I[1]-this._bufferService.buffer.ydisp,i=Math.max(C,0),e=Math.min(t,this._bufferService.rows-1);if(!(i>=this._bufferService.rows||e<0)){if(this._ctx.fillStyle=this._colors.selection.css,A){var o=g[0],n=I[0]-o,s=e-i+1;this._fillCells(o,i,n,s)}else{o=C===i?g[0]:0;var l=i===e?I[0]:this._bufferService.cols;this._fillCells(o,i,l-o,1);var r=Math.max(e-i-1,0);if(this._fillCells(0,i+1,this._bufferService.cols,r),i!==e){var c=t===e?I[0]:this._bufferService.cols;this._fillCells(0,e,c,1)}}this._state.start=[g[0],g[1]],this._state.end=[I[0],I[1]],this._state.columnSelectMode=A,this._state.ydisp=this._bufferService.buffer.ydisp}}else this._clearState()},I.prototype._didStateChange=function(g,I,A,C){return!this._areCoordinatesEqual(g,this._state.start)||!this._areCoordinatesEqual(I,this._state.end)||A!==this._state.columnSelectMode||C!==this._state.ydisp},I.prototype._areCoordinatesEqual=function(g,I){return!(!g||!I)&&g[0]===I[0]&&g[1]===I[1]},I}(A(13).BaseRenderLayer);I.SelectionRenderLayer=i},function(g,I,A){var C,t=this&&this.__extends||(C=function(g,I){return(C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,I){g.__proto__=I}||function(g,I){for(var A in I)I.hasOwnProperty(A)&&(g[A]=I[A])})(g,I)},function(g,I){function A(){this.constructor=g}C(g,I),g.prototype=null===I?Object.create(I):(A.prototype=I.prototype,new A)});Object.defineProperty(I,"__esModule",{value:!0});var i=A(13),e=A(5),o=function(g){function I(I,A,C,t,i,o,n,s,l){var r=g.call(this,I,"cursor",A,!0,C,t,o,n)||this;return r._onRequestRefreshRowsEvent=i,r.bufferService=o,r.optionsService=n,r._coreService=s,r._coreBrowserService=l,r._cell=new e.CellData,r._state={x:0,y:0,isFocused:!1,style:"",width:0},r._cursorRenderers={bar:r._renderBarCursor.bind(r),block:r._renderBlockCursor.bind(r),underline:r._renderUnderlineCursor.bind(r)},r}return t(I,g),I.prototype.resize=function(I){g.prototype.resize.call(this,I),this._state={x:0,y:0,isFocused:!1,style:"",width:0}},I.prototype.reset=function(){this._clearCursor(),this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=void 0,this.onOptionsChanged())},I.prototype.onBlur=function(){this._cursorBlinkStateManager&&this._cursorBlinkStateManager.pause(),this._onRequestRefreshRowsEvent.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},I.prototype.onFocus=function(){this._cursorBlinkStateManager?this._cursorBlinkStateManager.resume():this._onRequestRefreshRowsEvent.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},I.prototype.onOptionsChanged=function(){var g,I=this;this._optionsService.options.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new n(this._coreBrowserService.isFocused,(function(){I._render(!0)}))):(null===(g=this._cursorBlinkStateManager)||void 0===g||g.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRefreshRowsEvent.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},I.prototype.onCursorMove=function(){this._cursorBlinkStateManager&&this._cursorBlinkStateManager.restartBlinkAnimation()},I.prototype.onGridChanged=function(g,I){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(!1):this._cursorBlinkStateManager.restartBlinkAnimation()},I.prototype._render=function(g){if(this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden){var I=this._bufferService.buffer.ybase+this._bufferService.buffer.y,A=I-this._bufferService.buffer.ydisp;if(A<0||A>=this._bufferService.rows)this._clearCursor();else if(this._bufferService.buffer.lines.get(I).loadCell(this._bufferService.buffer.x,this._cell),void 0!==this._cell.content){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css;var C=this._optionsService.options.cursorStyle;return C&&"block"!==C?this._cursorRenderers[C](this._bufferService.buffer.x,A,this._cell):this._renderBlurCursor(this._bufferService.buffer.x,A,this._cell),this._ctx.restore(),this._state.x=this._bufferService.buffer.x,this._state.y=A,this._state.isFocused=!1,this._state.style=C,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===this._bufferService.buffer.x&&this._state.y===A&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.options.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.options.cursorStyle||"block"](this._bufferService.buffer.x,A,this._cell),this._ctx.restore(),this._state.x=this._bufferService.buffer.x,this._state.y=A,this._state.isFocused=!1,this._state.style=this._optionsService.options.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}else this._clearCursor()},I.prototype._clearCursor=function(){this._state&&(this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})},I.prototype._renderBarCursor=function(g,I,A){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillLeftLineAtCell(g,I),this._ctx.restore()},I.prototype._renderBlockCursor=function(g,I,A){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillCells(g,I,A.getWidth(),1),this._ctx.fillStyle=this._colors.cursorAccent.css,this._fillCharTrueColor(A,g,I),this._ctx.restore()},I.prototype._renderUnderlineCursor=function(g,I,A){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillBottomLineAtCells(g,I),this._ctx.restore()},I.prototype._renderBlurCursor=function(g,I,A){this._ctx.save(),this._ctx.strokeStyle=this._colors.cursor.css,this._strokeRectAtCell(g,I,A.getWidth(),1),this._ctx.restore()},I}(i.BaseRenderLayer);I.CursorRenderLayer=o;var n=function(){function g(g,I){this._renderCallback=I,this.isCursorVisible=!0,g&&this._restartInterval()}return Object.defineProperty(g.prototype,"isPaused",{get:function(){return!(this._blinkStartTimeout||this._blinkInterval)},enumerable:!0,configurable:!0}),g.prototype.dispose=function(){this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},g.prototype.restartBlinkAnimation=function(){var g=this;this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=window.requestAnimationFrame((function(){g._renderCallback(),g._animationFrame=void 0}))))},g.prototype._restartInterval=function(g){var I=this;void 0===g&&(g=600),this._blinkInterval&&window.clearInterval(this._blinkInterval),this._blinkStartTimeout=setTimeout((function(){if(I._animationTimeRestarted){var g=600-(Date.now()-I._animationTimeRestarted);if(I._animationTimeRestarted=void 0,g>0)return void I._restartInterval(g)}I.isCursorVisible=!1,I._animationFrame=window.requestAnimationFrame((function(){I._renderCallback(),I._animationFrame=void 0})),I._blinkInterval=setInterval((function(){if(I._animationTimeRestarted){var g=600-(Date.now()-I._animationTimeRestarted);return I._animationTimeRestarted=void 0,void I._restartInterval(g)}I.isCursorVisible=!I.isCursorVisible,I._animationFrame=window.requestAnimationFrame((function(){I._renderCallback(),I._animationFrame=void 0}))}),600)}),g)},g.prototype.pause=function(){this.isCursorVisible=!0,this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},g.prototype.resume=function(){this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()},g}()},function(g,I,A){var C,t=this&&this.__extends||(C=function(g,I){return(C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,I){g.__proto__=I}||function(g,I){for(var A in I)I.hasOwnProperty(A)&&(g[A]=I[A])})(g,I)},function(g,I){function A(){this.constructor=g}C(g,I),g.prototype=null===I?Object.create(I):(A.prototype=I.prototype,new A)});Object.defineProperty(I,"__esModule",{value:!0});var i=A(13),e=A(9),o=A(25),n=function(g){function I(I,A,C,t,i,e,o){var n=g.call(this,I,"link",A,!0,C,t,e,o)||this;return n.bufferService=e,n.optionsService=o,i.onLinkHover((function(g){return n._onLinkHover(g)})),i.onLinkLeave((function(g){return n._onLinkLeave(g)})),n}return t(I,g),I.prototype.resize=function(I){g.prototype.resize.call(this,I),this._state=void 0},I.prototype.reset=function(){this._clearCurrentLink()},I.prototype._clearCurrentLink=function(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);var g=this._state.y2-this._state.y1-1;g>0&&this._clearCells(0,this._state.y1+1,this._state.cols,g),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}},I.prototype._onLinkHover=function(g){if(g.fg===e.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._colors.background.css:g.fg&&o.is256Color(g.fg)?this._ctx.fillStyle=this._colors.ansi[g.fg].css:this._ctx.fillStyle=this._colors.foreground.css,g.y1===g.y2)this._fillBottomLineAtCells(g.x1,g.y1,g.x2-g.x1);else{this._fillBottomLineAtCells(g.x1,g.y1,g.cols-g.x1);for(var I=g.y1+1;I<g.y2;I++)this._fillBottomLineAtCells(0,I,g.cols);this._fillBottomLineAtCells(0,g.y2,g.x2)}this._state=g},I.prototype._onLinkLeave=function(g){this._clearCurrentLink()},I}(i.BaseRenderLayer);I.LinkRenderLayer=n},function(g,I,A){Object.defineProperty(I,"__esModule",{value:!0});var C=A(19),t=A(1),i=function(){function g(g,I){this._bufferService=g,this._logService=I,this._linkMatchers=[],this._nextLinkMatcherId=0,this._onLinkHover=new t.EventEmitter,this._onLinkLeave=new t.EventEmitter,this._onLinkTooltip=new t.EventEmitter,this._rowsToLinkify={start:void 0,end:void 0}}return Object.defineProperty(g.prototype,"onLinkHover",{get:function(){return this._onLinkHover.event},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"onLinkLeave",{get:function(){return this._onLinkLeave.event},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"onLinkTooltip",{get:function(){return this._onLinkTooltip.event},enumerable:!0,configurable:!0}),g.prototype.attachToDom=function(g,I){this._element=g,this._mouseZoneManager=I},g.prototype.linkifyRows=function(I,A){var C=this;this._mouseZoneManager&&(void 0===this._rowsToLinkify.start||void 0===this._rowsToLinkify.end?(this._rowsToLinkify.start=I,this._rowsToLinkify.end=A):(this._rowsToLinkify.start=Math.min(this._rowsToLinkify.start,I),this._rowsToLinkify.end=Math.max(this._rowsToLinkify.end,A)),this._mouseZoneManager.clearAll(I,A),this._rowsTimeoutId&&clearTimeout(this._rowsTimeoutId),this._rowsTimeoutId=setTimeout((function(){return C._linkifyRows()}),g._timeBeforeLatency))},g.prototype._linkifyRows=function(){this._rowsTimeoutId=void 0;var g=this._bufferService.buffer;if(void 0!==this._rowsToLinkify.start&&void 0!==this._rowsToLinkify.end){var I=g.ydisp+this._rowsToLinkify.start;if(!(I>=g.lines.length)){for(var A=g.ydisp+Math.min(this._rowsToLinkify.end,this._bufferService.rows)+1,C=Math.ceil(2e3/this._bufferService.cols),t=this._bufferService.buffer.iterator(!1,I,A,C,C);t.hasNext();)for(var i=t.next(),e=0;e<this._linkMatchers.length;e++)this._doLinkifyRow(i.range.first,i.content,this._linkMatchers[e]);this._rowsToLinkify.start=void 0,this._rowsToLinkify.end=void 0}}else this._logService.debug("_rowToLinkify was unset before _linkifyRows was called")},g.prototype.registerLinkMatcher=function(g,I,A){if(void 0===A&&(A={}),!I)throw new Error("handler must be defined");var C={id:this._nextLinkMatcherId++,regex:g,handler:I,matchIndex:A.matchIndex,validationCallback:A.validationCallback,hoverTooltipCallback:A.tooltipCallback,hoverLeaveCallback:A.leaveCallback,willLinkActivate:A.willLinkActivate,priority:A.priority||0};return this._addLinkMatcherToList(C),C.id},g.prototype._addLinkMatcherToList=function(g){if(0!==this._linkMatchers.length){for(var I=this._linkMatchers.length-1;I>=0;I--)if(g.priority<=this._linkMatchers[I].priority)return void this._linkMatchers.splice(I+1,0,g);this._linkMatchers.splice(0,0,g)}else this._linkMatchers.push(g)},g.prototype.deregisterLinkMatcher=function(g){for(var I=0;I<this._linkMatchers.length;I++)if(this._linkMatchers[I].id===g)return this._linkMatchers.splice(I,1),!0;return!1},g.prototype._doLinkifyRow=function(g,I,A){for(var C,t=this,i=new RegExp(A.regex.source,(A.regex.flags||"")+"g"),e=-1,o=function(){var o=C["number"!=typeof A.matchIndex?0:A.matchIndex];if(!o)return n._logService.debug("match found without corresponding matchIndex",C,A),"break";if(e=I.indexOf(o,e+1),i.lastIndex=e+o.length,e<0)return"break";var s=n._bufferService.buffer.stringIndexToBufferIndex(g,e);if(s[0]<0)return"break";var l=n._bufferService.buffer.lines.get(s[0]);if(!l)return"break";var r=l.getFg(s[1]),c=r?r>>9&511:void 0;A.validationCallback?A.validationCallback(o,(function(g){t._rowsTimeoutId||g&&t._addLink(s[1],s[0]-t._bufferService.buffer.ydisp,o,A,c)})):n._addLink(s[1],s[0]-n._bufferService.buffer.ydisp,o,A,c)},n=this;null!==(C=i.exec(I))&&"break"!==o(););},g.prototype._addLink=function(g,I,A,t,i){var o=this;if(this._mouseZoneManager&&this._element){var n=C.getStringCellWidth(A),s=g%this._bufferService.cols,l=I+Math.floor(g/this._bufferService.cols),r=(s+n)%this._bufferService.cols,c=l+Math.floor((s+n)/this._bufferService.cols);0===r&&(r=this._bufferService.cols,c--),this._mouseZoneManager.add(new e(s+1,l+1,r+1,c+1,(function(g){if(t.handler)return t.handler(g,A);window.open(A,"_blank")}),(function(){o._onLinkHover.fire(o._createLinkHoverEvent(s,l,r,c,i)),o._element.classList.add("xterm-cursor-pointer")}),(function(g){o._onLinkTooltip.fire(o._createLinkHoverEvent(s,l,r,c,i)),t.hoverTooltipCallback&&t.hoverTooltipCallback(g,A,{start:{x:s,y:l},end:{x:r,y:c}})}),(function(){o._onLinkLeave.fire(o._createLinkHoverEvent(s,l,r,c,i)),o._element.classList.remove("xterm-cursor-pointer"),t.hoverLeaveCallback&&t.hoverLeaveCallback()}),(function(g){return!t.willLinkActivate||t.willLinkActivate(g,A)})))}},g.prototype._createLinkHoverEvent=function(g,I,A,C,t){return{x1:g,y1:I,x2:A,y2:C,cols:this._bufferService.cols,fg:t}},g._timeBeforeLatency=200,g}();I.Linkifier=i;var e=function(g,I,A,C,t,i,e,o,n){this.x1=g,this.y1=I,this.x2=A,this.y2=C,this.clickCallback=t,this.hoverCallback=i,this.tooltipCallback=e,this.leaveCallback=o,this.willLinkActivate=n};I.MouseZone=e},function(g,I,A){var C=this&&this.__decorate||function(g,I,A,C){var t,i=arguments.length,e=i<3?I:null===C?C=Object.getOwnPropertyDescriptor(I,A):C;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)e=Reflect.decorate(g,I,A,C);else for(var o=g.length-1;o>=0;o--)(t=g[o])&&(e=(i<3?t(e):i>3?t(I,A,e):t(I,A))||e);return i>3&&e&&Object.defineProperty(I,A,e),e},t=this&&this.__param||function(g,I){return function(A,C){I(A,C,g)}};Object.defineProperty(I,"__esModule",{value:!0});var i=A(11),e=A(52),o=A(5),n=A(1),s=A(4),l=A(0),r=A(29),c=A(53),a=String.fromCharCode(160),d=new RegExp(a,"g"),h=function(){function g(g,I,A,C,t,i,s,l){var r=this;this._scrollLines=g,this._element=I,this._screenElement=A,this._charSizeService=C,this._bufferService=t,this._coreService=i,this._mouseService=s,this._optionsService=l,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new o.CellData,this._mouseDownTimeStamp=0,this._onLinuxMouseSelection=new n.EventEmitter,this._onRedrawRequest=new n.EventEmitter,this._onSelectionChange=new n.EventEmitter,this._mouseMoveListener=function(g){return r._onMouseMove(g)},this._mouseUpListener=function(g){return r._onMouseUp(g)},this._coreService.onUserInput((function(){r.hasSelection&&r.clearSelection()})),this._trimListener=this._bufferService.buffer.lines.onTrim((function(g){return r._onTrim(g)})),this._bufferService.buffers.onBufferActivate((function(g){return r._onBufferActivate(g)})),this.enable(),this._model=new e.SelectionModel(this._bufferService),this._activeSelectionMode=0}return Object.defineProperty(g.prototype,"onLinuxMouseSelection",{get:function(){return this._onLinuxMouseSelection.event},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"onRedrawRequest",{get:function(){return this._onRedrawRequest.event},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!0,configurable:!0}),g.prototype.dispose=function(){this._removeMouseDownListeners()},g.prototype.reset=function(){this.clearSelection()},g.prototype.disable=function(){this.clearSelection(),this._enabled=!1},g.prototype.enable=function(){this._enabled=!0},Object.defineProperty(g.prototype,"selectionStart",{get:function(){return this._model.finalSelectionStart},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"selectionEnd",{get:function(){return this._model.finalSelectionEnd},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"hasSelection",{get:function(){var g=this._model.finalSelectionStart,I=this._model.finalSelectionEnd;return!(!g||!I||g[0]===I[0]&&g[1]===I[1])},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"selectionText",{get:function(){var g=this._model.finalSelectionStart,I=this._model.finalSelectionEnd;if(!g||!I)return"";var A=this._bufferService.buffer,C=[];if(3===this._activeSelectionMode){if(g[0]===I[0])return"";for(var t=g[1];t<=I[1];t++){var e=A.translateBufferLineToString(t,!0,g[0],I[0]);C.push(e)}}else{var o=g[1]===I[1]?I[0]:void 0;for(C.push(A.translateBufferLineToString(g[1],!0,g[0],o)),t=g[1]+1;t<=I[1]-1;t++){var n=A.lines.get(t);e=A.translateBufferLineToString(t,!0),n&&n.isWrapped?C[C.length-1]+=e:C.push(e)}g[1]!==I[1]&&(n=A.lines.get(I[1]),e=A.translateBufferLineToString(I[1],!0,0,I[0]),n&&n.isWrapped?C[C.length-1]+=e:C.push(e))}return C.map((function(g){return g.replace(d," ")})).join(i.isWindows?"\r\n":"\n")},enumerable:!0,configurable:!0}),g.prototype.clearSelection=function(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()},g.prototype.refresh=function(g){var I=this;this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame((function(){return I._refresh()}))),i.isLinux&&g&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)},g.prototype._refresh=function(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:3===this._activeSelectionMode})},g.prototype.isClickInSelection=function(g){var I=this._getMouseBufferCoords(g),A=this._model.finalSelectionStart,C=this._model.finalSelectionEnd;return!!(A&&C&&I)&&this._areCoordsInSelection(I,A,C)},g.prototype._areCoordsInSelection=function(g,I,A){return g[1]>I[1]&&g[1]<A[1]||I[1]===A[1]&&g[1]===I[1]&&g[0]>=I[0]&&g[0]<A[0]||I[1]<A[1]&&g[1]===A[1]&&g[0]<A[0]||I[1]<A[1]&&g[1]===I[1]&&g[0]>=I[0]},g.prototype.selectWordAtCursor=function(g){var I=this._getMouseBufferCoords(g);I&&(this._selectWordAt(I,!1),this._model.selectionEnd=void 0,this.refresh(!0))},g.prototype.selectAll=function(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()},g.prototype.selectLines=function(g,I){this._model.clearSelection(),g=Math.max(g,0),I=Math.min(I,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,g],this._model.selectionEnd=[this._bufferService.cols,I],this.refresh(),this._onSelectionChange.fire()},g.prototype._onTrim=function(g){this._model.onTrim(g)&&this.refresh()},g.prototype._getMouseBufferCoords=function(g){var I=this._mouseService.getCoords(g,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(I)return I[0]--,I[1]--,I[1]+=this._bufferService.buffer.ydisp,I},g.prototype._getMouseEventScrollAmount=function(g){var I=r.getCoordsRelativeToElement(g,this._screenElement)[1],A=this._bufferService.rows*Math.ceil(this._charSizeService.height*this._optionsService.options.lineHeight);return I>=0&&I<=A?0:(I>A&&(I-=A),I=Math.min(Math.max(I,-50),50),(I/=50)/Math.abs(I)+Math.round(14*I))},g.prototype.shouldForceSelection=function(g){return i.isMac?g.altKey&&this._optionsService.options.macOptionClickForcesSelection:g.shiftKey},g.prototype.onMouseDown=function(g){if(this._mouseDownTimeStamp=g.timeStamp,(2!==g.button||!this.hasSelection)&&0===g.button){if(!this._enabled){if(!this.shouldForceSelection(g))return;g.stopPropagation()}g.preventDefault(),this._dragScrollAmount=0,this._enabled&&g.shiftKey?this._onIncrementalClick(g):1===g.detail?this._onSingleClick(g):2===g.detail?this._onDoubleClick(g):3===g.detail&&this._onTripleClick(g),this._addMouseDownListeners(),this.refresh(!0)}},g.prototype._addMouseDownListeners=function(){var g=this;this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=window.setInterval((function(){return g._dragScroll()}),50)},g.prototype._removeMouseDownListeners=function(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0},g.prototype._onIncrementalClick=function(g){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(g))},g.prototype._onSingleClick=function(g){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(g)?3:0,this._model.selectionStart=this._getMouseBufferCoords(g),this._model.selectionStart){this._model.selectionEnd=void 0;var I=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);I&&I.length!==this._model.selectionStart[0]&&0===I.hasWidth(this._model.selectionStart[0])&&this._model.selectionStart[0]++}},g.prototype._onDoubleClick=function(g){var I=this._getMouseBufferCoords(g);I&&(this._activeSelectionMode=1,this._selectWordAt(I,!0))},g.prototype._onTripleClick=function(g){var I=this._getMouseBufferCoords(g);I&&(this._activeSelectionMode=2,this._selectLineAt(I[1]))},g.prototype.shouldColumnSelect=function(g){return g.altKey&&!(i.isMac&&this._optionsService.options.macOptionClickForcesSelection)},g.prototype._onMouseMove=function(g){if(g.stopImmediatePropagation(),this._model.selectionStart){var I=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(g),this._model.selectionEnd){2===this._activeSelectionMode?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:1===this._activeSelectionMode&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(g),3!==this._activeSelectionMode&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));var A=this._bufferService.buffer;if(this._model.selectionEnd[1]<A.lines.length){var C=A.lines.get(this._model.selectionEnd[1]);C&&0===C.hasWidth(this._model.selectionEnd[0])&&this._model.selectionEnd[0]++}I&&I[0]===this._model.selectionEnd[0]&&I[1]===this._model.selectionEnd[1]||this.refresh(!0)}else this.refresh(!0)}},g.prototype._dragScroll=function(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._scrollLines(this._dragScrollAmount,!1);var g=this._bufferService.buffer;this._dragScrollAmount>0?(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(g.ydisp+this._bufferService.rows,g.lines.length-1)):(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=g.ydisp),this.refresh()}},g.prototype._onMouseUp=function(g){var I=g.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&I<500){if(g.altKey&&this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){var A=this._mouseService.getCoords(g,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(A&&void 0!==A[0]&&void 0!==A[1]){var C=c.moveToCellSequence(A[0]-1,A[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(C,!0)}}}else this.hasSelection&&this._onSelectionChange.fire()},g.prototype._onBufferActivate=function(g){var I=this;this.clearSelection(),this._trimListener.dispose(),this._trimListener=g.activeBuffer.lines.onTrim((function(g){return I._onTrim(g)}))},g.prototype._convertViewportColToCharacterIndex=function(g,I){for(var A=I[0],C=0;I[0]>=C;C++){var t=g.loadCell(C,this._workCell).getChars().length;0===this._workCell.getWidth()?A--:t>1&&I[0]!==C&&(A+=t-1)}return A},g.prototype.setSelection=function(g,I,A){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[g,I],this._model.selectionStartLength=A,this.refresh()},g.prototype._getWordAt=function(g,I,A,C){if(void 0===A&&(A=!0),void 0===C&&(C=!0),!(g[0]>=this._bufferService.cols)){var t=this._bufferService.buffer,i=t.lines.get(g[1]);if(i){var e=t.translateBufferLineToString(g[1],!1),o=this._convertViewportColToCharacterIndex(i,g),n=o,s=g[0]-o,l=0,r=0,c=0,a=0;if(" "===e.charAt(o)){for(;o>0&&" "===e.charAt(o-1);)o--;for(;n<e.length&&" "===e.charAt(n+1);)n++}else{var d=g[0],h=g[0];0===i.getWidth(d)&&(l++,d--),2===i.getWidth(h)&&(r++,h++);var m=i.getString(h).length;for(m>1&&(a+=m-1,n+=m-1);d>0&&o>0&&!this._isCharWordSeparator(i.loadCell(d-1,this._workCell));){i.loadCell(d-1,this._workCell);var Z=this._workCell.getChars().length;0===this._workCell.getWidth()?(l++,d--):Z>1&&(c+=Z-1,o-=Z-1),o--,d--}for(;h<i.length&&n+1<e.length&&!this._isCharWordSeparator(i.loadCell(h+1,this._workCell));){i.loadCell(h+1,this._workCell);var u=this._workCell.getChars().length;2===this._workCell.getWidth()?(r++,h++):u>1&&(a+=u-1,n+=u-1),n++,h++}}n++;var G=o+s-l+c,b=Math.min(this._bufferService.cols,n-o+l+r-c-a);if(I||""!==e.slice(o,n).trim()){if(A&&0===G&&32!==i.getCodePoint(0)){var p=t.lines.get(g[1]-1);if(p&&i.isWrapped&&32!==p.getCodePoint(this._bufferService.cols-1)){var B=this._getWordAt([this._bufferService.cols-1,g[1]-1],!1,!0,!1);if(B){var y=this._bufferService.cols-B.start;G-=y,b+=y}}}if(C&&G+b===this._bufferService.cols&&32!==i.getCodePoint(this._bufferService.cols-1)){var w=t.lines.get(g[1]+1);if(w&&w.isWrapped&&32!==w.getCodePoint(0)){var W=this._getWordAt([0,g[1]+1],!1,!1,!0);W&&(b+=W.length)}}return{start:G,length:b}}}}},g.prototype._selectWordAt=function(g,I){var A=this._getWordAt(g,I);if(A){for(;A.start<0;)A.start+=this._bufferService.cols,g[1]--;this._model.selectionStart=[A.start,g[1]],this._model.selectionStartLength=A.length}},g.prototype._selectToWordAt=function(g){var I=this._getWordAt(g,!0);if(I){for(var A=g[1];I.start<0;)I.start+=this._bufferService.cols,A--;if(!this._model.areSelectionValuesReversed())for(;I.start+I.length>this._bufferService.cols;)I.length-=this._bufferService.cols,A++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?I.start:I.start+I.length,A]}},g.prototype._isCharWordSeparator=function(g){return 0!==g.getWidth()&&this._optionsService.options.wordSeparator.indexOf(g.getChars())>=0},g.prototype._selectLineAt=function(g){var I=this._bufferService.buffer.getWrappedRangeForLine(g);this._model.selectionStart=[0,I.first],this._model.selectionEnd=[this._bufferService.cols,I.last],this._model.selectionStartLength=0},C([t(3,s.ICharSizeService),t(4,l.IBufferService),t(5,l.ICoreService),t(6,s.IMouseService),t(7,l.IOptionsService)],g)}();I.SelectionService=h},function(g,I,A){Object.defineProperty(I,"__esModule",{value:!0});var C=function(){function g(g){this._bufferService=g,this.isSelectAllActive=!1,this.selectionStartLength=0}return g.prototype.clearSelection=function(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0},Object.defineProperty(g.prototype,"finalSelectionStart",{get:function(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"finalSelectionEnd",{get:function(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){var g=this.selectionStart[0]+this.selectionStartLength;return g>this._bufferService.cols?[g%this._bufferService.cols,this.selectionStart[1]+Math.floor(g/this._bufferService.cols)]:[g,this.selectionStart[1]]}return this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?[Math.max(this.selectionStart[0]+this.selectionStartLength,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd}},enumerable:!0,configurable:!0}),g.prototype.areSelectionValuesReversed=function(){var g=this.selectionStart,I=this.selectionEnd;return!(!g||!I)&&(g[1]>I[1]||g[1]===I[1]&&g[0]>I[0])},g.prototype.onTrim=function(g){return this.selectionStart&&(this.selectionStart[1]-=g),this.selectionEnd&&(this.selectionEnd[1]-=g),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)},g}();I.SelectionModel=C},function(g,I,A){Object.defineProperty(I,"__esModule",{value:!0});var C=A(12);function t(g,I,A,C){var t=g-i(A,g),e=I-i(A,I);return l(Math.abs(t-e)-function(g,I,A){for(var C=0,t=g-i(A,g),e=I-i(A,I),n=0;n<Math.abs(t-e);n++){var s="A"===o(g,I)?-1:1,l=A.buffer.lines.get(t+s*n);l&&l.isWrapped&&C++}return C}(g,I,A),s(o(g,I),C))}function i(g,I){for(var A=0,C=g.buffer.lines.get(I),t=C&&C.isWrapped;t&&I>=0&&I<g.rows;)A++,t=(C=g.buffer.lines.get(--I))&&C.isWrapped;return A}function e(g,I,A,C,e,o){var n;return n=t(A,C,e,o).length>0?C-i(e,C):I,g<A&&n<=C||g>=A&&n<C?"C":"D"}function o(g,I){return g>I?"A":"B"}function n(g,I,A,C,t,i){for(var e=g,o=I,n="";e!==A||o!==C;)e+=t?1:-1,t&&e>i.cols-1?(n+=i.buffer.translateBufferLineToString(o,!1,g,e),e=0,g=0,o++):!t&&e<0&&(n+=i.buffer.translateBufferLineToString(o,!1,0,g+1),g=e=i.cols-1,o--);return n+i.buffer.translateBufferLineToString(o,!1,g,e)}function s(g,I){var A=I?"O":"[";return C.C0.ESC+A+g}function l(g,I){g=Math.floor(g);for(var A="",C=0;C<g;C++)A+=I;return A}I.moveToCellSequence=function(g,I,A,C){var o,r,c,a,d=A.buffer.x,h=A.buffer.y;return A.buffer.hasScrollback?(a=e(o=d,h,r=g,I,A,c=C),l(Math.abs(o-r),s(a,c))):function(g,I,A,C,e,o){return 0===t(I,C,e,o).length?"":l(n(g,I,g,I-i(e,I),!1,e).length,s("D",o))}(d,h,0,I,A,C)+t(h,I,A,C)+function(g,I,A,C,o,r){var c;c=t(I,C,o,r).length>0?C-i(o,C):I;var a=C,d=e(g,I,A,C,o,r);return l(n(g,c,A,a,"C"===d,o).length,s(d,r))}(d,h,g,I,A,C)}},function(g,I,A){var C=this&&this.__decorate||function(g,I,A,C){var t,i=arguments.length,e=i<3?I:null===C?C=Object.getOwnPropertyDescriptor(I,A):C;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)e=Reflect.decorate(g,I,A,C);else for(var o=g.length-1;o>=0;o--)(t=g[o])&&(e=(i<3?t(e):i>3?t(I,A,e):t(I,A))||e);return i>3&&e&&Object.defineProperty(I,A,e),e},t=this&&this.__param||function(g,I){return function(A,C){I(A,C,g)}};Object.defineProperty(I,"__esModule",{value:!0});var i=A(0),e=function(){function g(g){this._optionsService=g}return Object.defineProperty(g,"audioContext",{get:function(){if(!g._audioContext){var I=window.AudioContext||window.webkitAudioContext;if(!I)return console.warn("Web Audio API is not supported by this browser. Consider upgrading to the latest version"),null;g._audioContext=new I}return g._audioContext},enumerable:!0,configurable:!0}),g.prototype.playBellSound=function(){var I=g.audioContext;if(I){var A=I.createBufferSource();I.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._optionsService.options.bellSound)),(function(g){A.buffer=g,A.connect(I.destination),A.start(0)}))}},g.prototype._base64ToArrayBuffer=function(g){for(var I=window.atob(g),A=I.length,C=new Uint8Array(A),t=0;t<A;t++)C[t]=I.charCodeAt(t);return C.buffer},g.prototype._removeMimeType=function(g){return g.split(",")[1]},g=C([t(0,i.IOptionsService)],g)}();I.SoundService=e},function(g,I,A){var C,t=this&&this.__extends||(C=function(g,I){return(C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,I){g.__proto__=I}||function(g,I){for(var A in I)I.hasOwnProperty(A)&&(g[A]=I[A])})(g,I)},function(g,I){function A(){this.constructor=g}C(g,I),g.prototype=null===I?Object.create(I):(A.prototype=I.prototype,new A)}),i=this&&this.__decorate||function(g,I,A,C){var t,i=arguments.length,e=i<3?I:null===C?C=Object.getOwnPropertyDescriptor(I,A):C;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)e=Reflect.decorate(g,I,A,C);else for(var o=g.length-1;o>=0;o--)(t=g[o])&&(e=(i<3?t(e):i>3?t(I,A,e):t(I,A))||e);return i>3&&e&&Object.defineProperty(I,A,e),e},e=this&&this.__param||function(g,I){return function(A,C){I(A,C,g)}};Object.defineProperty(I,"__esModule",{value:!0});var o=A(2),n=A(7),s=A(4),l=A(0),r=function(g){function I(I,A,C,t,i){var e=g.call(this)||this;return e._element=I,e._screenElement=A,e._bufferService=C,e._mouseService=t,e._selectionService=i,e._zones=[],e._areZonesActive=!1,e._lastHoverCoords=[void 0,void 0],e._initialSelectionLength=0,e.register(n.addDisposableDomListener(e._element,"mousedown",(function(g){return e._onMouseDown(g)}))),e._mouseMoveListener=function(g){return e._onMouseMove(g)},e._mouseLeaveListener=function(g){return e._onMouseLeave(g)},e._clickListener=function(g){return e._onClick(g)},e}return t(I,g),I.prototype.dispose=function(){g.prototype.dispose.call(this),this._deactivate()},I.prototype.add=function(g){this._zones.push(g),1===this._zones.length&&this._activate()},I.prototype.clearAll=function(g,I){if(0!==this._zones.length){g&&I||(g=0,I=this._bufferService.rows-1);for(var A=0;A<this._zones.length;A++){var C=this._zones[A];(C.y1>g&&C.y1<=I+1||C.y2>g&&C.y2<=I+1||C.y1<g&&C.y2>I+1)&&(this._currentZone&&this._currentZone===C&&(this._currentZone.leaveCallback(),this._currentZone=void 0),this._zones.splice(A--,1))}0===this._zones.length&&this._deactivate()}},I.prototype._activate=function(){this._areZonesActive||(this._areZonesActive=!0,this._element.addEventListener("mousemove",this._mouseMoveListener),this._element.addEventListener("mouseleave",this._mouseLeaveListener),this._element.addEventListener("click",this._clickListener))},I.prototype._deactivate=function(){this._areZonesActive&&(this._areZonesActive=!1,this._element.removeEventListener("mousemove",this._mouseMoveListener),this._element.removeEventListener("mouseleave",this._mouseLeaveListener),this._element.removeEventListener("click",this._clickListener))},I.prototype._onMouseMove=function(g){this._lastHoverCoords[0]===g.pageX&&this._lastHoverCoords[1]===g.pageY||(this._onHover(g),this._lastHoverCoords=[g.pageX,g.pageY])},I.prototype._onHover=function(g){var I=this,A=this._findZoneEventAt(g);A!==this._currentZone&&(this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout)),A&&(this._currentZone=A,A.hoverCallback&&A.hoverCallback(g),this._tooltipTimeout=setTimeout((function(){return I._onTooltip(g)}),500)))},I.prototype._onTooltip=function(g){this._tooltipTimeout=void 0;var I=this._findZoneEventAt(g);I&&I.tooltipCallback&&I.tooltipCallback(g)},I.prototype._onMouseDown=function(g){var I;this._initialSelectionLength=this._getSelectionLength(),this._areZonesActive&&(null===(I=this._findZoneEventAt(g))||void 0===I?void 0:I.willLinkActivate(g))&&(g.preventDefault(),g.stopImmediatePropagation())},I.prototype._onMouseLeave=function(g){this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout))},I.prototype._onClick=function(g){var I=this._findZoneEventAt(g),A=this._getSelectionLength();I&&A===this._initialSelectionLength&&(I.clickCallback(g),g.preventDefault(),g.stopImmediatePropagation())},I.prototype._getSelectionLength=function(){var g=this._selectionService.selectionText;return g?g.length:0},I.prototype._findZoneEventAt=function(g){var I=this._mouseService.getCoords(g,this._screenElement,this._bufferService.cols,this._bufferService.rows);if(I)for(var A=I[0],C=I[1],t=0;t<this._zones.length;t++){var i=this._zones[t];if(i.y1===i.y2){if(C===i.y1&&A>=i.x1&&A<i.x2)return i}else if(C===i.y1&&A>=i.x1||C===i.y2&&A<i.x2||C>i.y1&&C<i.y2)return i}},i([e(2,l.IBufferService),e(3,s.IMouseService),e(4,s.ISelectionService)],I)}(o.Disposable);I.MouseZoneManager=r},function(g,I,A){var C,t=this&&this.__extends||(C=function(g,I){return(C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,I){g.__proto__=I}||function(g,I){for(var A in I)I.hasOwnProperty(A)&&(g[A]=I[A])})(g,I)},function(g,I){function A(){this.constructor=g}C(g,I),g.prototype=null===I?Object.create(I):(A.prototype=I.prototype,new A)});Object.defineProperty(I,"__esModule",{value:!0});var i=A(17),e=A(11),o=A(30),n=A(7),s=A(2),l=A(31),r=function(g){function I(I,A){var C=g.call(this)||this;C._terminal=I,C._renderService=A,C._liveRegionLineCount=0,C._charsToConsume=[],C._charsToAnnounce="",C._accessibilityTreeRoot=document.createElement("div"),C._accessibilityTreeRoot.classList.add("xterm-accessibility"),C._rowContainer=document.createElement("div"),C._rowContainer.classList.add("xterm-accessibility-tree"),C._rowElements=[];for(var t=0;t<C._terminal.rows;t++)C._rowElements[t]=C._createAccessibilityTreeNode(),C._rowContainer.appendChild(C._rowElements[t]);return C._topBoundaryFocusListener=function(g){return C._onBoundaryFocus(g,0)},C._bottomBoundaryFocusListener=function(g){return C._onBoundaryFocus(g,1)},C._rowElements[0].addEventListener("focus",C._topBoundaryFocusListener),C._rowElements[C._rowElements.length-1].addEventListener("focus",C._bottomBoundaryFocusListener),C._refreshRowsDimensions(),C._accessibilityTreeRoot.appendChild(C._rowContainer),C._renderRowsDebouncer=new o.RenderDebouncer(C._renderRows.bind(C)),C._refreshRows(),C._liveRegion=document.createElement("div"),C._liveRegion.classList.add("live-region"),C._liveRegion.setAttribute("aria-live","assertive"),C._accessibilityTreeRoot.appendChild(C._liveRegion),C._terminal.element.insertAdjacentElement("afterbegin",C._accessibilityTreeRoot),C.register(C._renderRowsDebouncer),C.register(C._terminal.onResize((function(g){return C._onResize(g.rows)}))),C.register(C._terminal.onRender((function(g){return C._refreshRows(g.start,g.end)}))),C.register(C._terminal.onScroll((function(){return C._refreshRows()}))),C.register(C._terminal.onA11yChar((function(g){return C._onChar(g)}))),C.register(C._terminal.onLineFeed((function(){return C._onChar("\n")}))),C.register(C._terminal.onA11yTab((function(g){return C._onTab(g)}))),C.register(C._terminal.onKey((function(g){return C._onKey(g.key)}))),C.register(C._terminal.onBlur((function(){return C._clearLiveRegion()}))),C.register(C._renderService.onDimensionsChange((function(){return C._refreshRowsDimensions()}))),C._screenDprMonitor=new l.ScreenDprMonitor,C.register(C._screenDprMonitor),C._screenDprMonitor.setListener((function(){return C._refreshRowsDimensions()})),C.register(n.addDisposableDomListener(window,"resize",(function(){return C._refreshRowsDimensions()}))),C}return t(I,g),I.prototype.dispose=function(){g.prototype.dispose.call(this),this._terminal.element.removeChild(this._accessibilityTreeRoot),this._rowElements.length=0},I.prototype._onBoundaryFocus=function(g,I){var A=g.target,C=this._rowElements[0===I?1:this._rowElements.length-2];if(A.getAttribute("aria-posinset")!==(0===I?"1":""+this._terminal.buffer.lines.length)&&g.relatedTarget===C){var t,i;if(0===I?(t=A,i=this._rowElements.pop(),this._rowContainer.removeChild(i)):(t=this._rowElements.shift(),i=A,this._rowContainer.removeChild(t)),t.removeEventListener("focus",this._topBoundaryFocusListener),i.removeEventListener("focus",this._bottomBoundaryFocusListener),0===I){var e=this._createAccessibilityTreeNode();this._rowElements.unshift(e),this._rowContainer.insertAdjacentElement("afterbegin",e)}else e=this._createAccessibilityTreeNode(),this._rowElements.push(e),this._rowContainer.appendChild(e);this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(0===I?-1:1),this._rowElements[0===I?1:this._rowElements.length-2].focus(),g.preventDefault(),g.stopImmediatePropagation()}},I.prototype._onResize=function(g){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(var I=this._rowContainer.children.length;I<this._terminal.rows;I++)this._rowElements[I]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[I]);for(;this._rowElements.length>g;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()},I.prototype._createAccessibilityTreeNode=function(){var g=document.createElement("div");return g.setAttribute("role","listitem"),g.tabIndex=-1,this._refreshRowDimensions(g),g},I.prototype._onTab=function(g){for(var I=0;I<g;I++)this._onChar(" ")},I.prototype._onChar=function(g){var I=this;this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==g&&(this._charsToAnnounce+=g):this._charsToAnnounce+=g,"\n"===g&&(this._liveRegionLineCount++,21===this._liveRegionLineCount&&(this._liveRegion.textContent+=i.tooMuchOutput)),e.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout((function(){I._accessibilityTreeRoot.appendChild(I._liveRegion)}),0))},I.prototype._clearLiveRegion=function(){this._liveRegion.textContent="",this._liveRegionLineCount=0,e.isMac&&this._liveRegion.parentNode&&this._accessibilityTreeRoot.removeChild(this._liveRegion)},I.prototype._onKey=function(g){this._clearLiveRegion(),this._charsToConsume.push(g)},I.prototype._refreshRows=function(g,I){this._renderRowsDebouncer.refresh(g,I,this._terminal.rows)},I.prototype._renderRows=function(g,I){for(var A=this._terminal.buffer,C=A.lines.length.toString(),t=g;t<=I;t++){var i=A.translateBufferLineToString(A.ydisp+t,!0),e=(A.ydisp+t+1).toString(),o=this._rowElements[t];o&&(0===i.length?o.innerHTML="&nbsp;":o.textContent=i,o.setAttribute("aria-posinset",e),o.setAttribute("aria-setsize",C))}this._announceCharacters()},I.prototype._refreshRowsDimensions=function(){if(this._renderService.dimensions.actualCellHeight){this._rowElements.length!==this._terminal.rows&&this._onResize(this._terminal.rows);for(var g=0;g<this._terminal.rows;g++)this._refreshRowDimensions(this._rowElements[g])}},I.prototype._refreshRowDimensions=function(g){g.style.height=this._renderService.dimensions.actualCellHeight+"px"},I.prototype._announceCharacters=function(){0!==this._charsToAnnounce.length&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")},I}(s.Disposable);I.AccessibilityManager=r},function(g,I,A){var C,t=this&&this.__extends||(C=function(g,I){return(C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,I){g.__proto__=I}||function(g,I){for(var A in I)I.hasOwnProperty(A)&&(g[A]=I[A])})(g,I)},function(g,I){function A(){this.constructor=g}C(g,I),g.prototype=null===I?Object.create(I):(A.prototype=I.prototype,new A)}),i=this&&this.__decorate||function(g,I,A,C){var t,i=arguments.length,e=i<3?I:null===C?C=Object.getOwnPropertyDescriptor(I,A):C;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)e=Reflect.decorate(g,I,A,C);else for(var o=g.length-1;o>=0;o--)(t=g[o])&&(e=(i<3?t(e):i>3?t(I,A,e):t(I,A))||e);return i>3&&e&&Object.defineProperty(I,A,e),e},e=this&&this.__param||function(g,I){return function(A,C){I(A,C,g)}};Object.defineProperty(I,"__esModule",{value:!0});var o=A(58),n=A(9),s=A(2),l=A(4),r=A(0),c=A(1),a=A(10),d="xterm-dom-renderer-owner-",h="xterm-rows",m="xterm-selection",Z=1,u=function(g){function I(I,A,C,t,i,e,n,s){var l=g.call(this)||this;return l._colors=I,l._element=A,l._screenElement=C,l._viewportElement=t,l._linkifier=i,l._charSizeService=e,l._optionsService=n,l._bufferService=s,l._terminalClass=Z++,l._rowElements=[],l._onRequestRefreshRows=new c.EventEmitter,l._rowContainer=document.createElement("div"),l._rowContainer.classList.add(h),l._rowContainer.style.lineHeight="normal",l._rowContainer.setAttribute("aria-hidden","true"),l._refreshRowElements(l._bufferService.cols,l._bufferService.rows),l._selectionContainer=document.createElement("div"),l._selectionContainer.classList.add(m),l._selectionContainer.setAttribute("aria-hidden","true"),l.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},l._updateDimensions(),l._injectCss(),l._rowFactory=new o.DomRendererRowFactory(document,l._optionsService,l._colors),l._element.classList.add(d+l._terminalClass),l._screenElement.appendChild(l._rowContainer),l._screenElement.appendChild(l._selectionContainer),l._linkifier.onLinkHover((function(g){return l._onLinkHover(g)})),l._linkifier.onLinkLeave((function(g){return l._onLinkLeave(g)})),l}return t(I,g),Object.defineProperty(I.prototype,"onRequestRefreshRows",{get:function(){return this._onRequestRefreshRows.event},enumerable:!0,configurable:!0}),I.prototype.dispose=function(){this._element.classList.remove(d+this._terminalClass),this._screenElement.removeChild(this._rowContainer),this._screenElement.removeChild(this._selectionContainer),this._screenElement.removeChild(this._themeStyleElement),this._screenElement.removeChild(this._dimensionsStyleElement),g.prototype.dispose.call(this)},I.prototype._updateDimensions=function(){var g=this;this.dimensions.scaledCharWidth=this._charSizeService.width*window.devicePixelRatio,this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.options.letterSpacing),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.options.lineHeight),this.dimensions.scaledCharLeft=0,this.dimensions.scaledCharTop=0,this.dimensions.scaledCanvasWidth=this.dimensions.scaledCellWidth*this._bufferService.cols,this.dimensions.scaledCanvasHeight=this.dimensions.scaledCellHeight*this._bufferService.rows,this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols,this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows,this._rowElements.forEach((function(I){I.style.width=g.dimensions.canvasWidth+"px",I.style.height=g.dimensions.actualCellHeight+"px",I.style.lineHeight=g.dimensions.actualCellHeight+"px",I.style.overflow="hidden"})),this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));var I=this._terminalSelector+" ."+h+" span { display: inline-block; height: 100%; vertical-align: top; width: "+this.dimensions.actualCellWidth+"px}";this._dimensionsStyleElement.innerHTML=I,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},I.prototype.setColors=function(g){this._colors=g,this._injectCss()},I.prototype._injectCss=function(){var g=this;this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));var I=this._terminalSelector+" ."+h+" { color: "+this._colors.foreground.css+"; background-color: "+this._colors.background.css+"; font-family: "+this._optionsService.options.fontFamily+"; font-size: "+this._optionsService.options.fontSize+"px;}";I+=this._terminalSelector+" span:not(."+o.BOLD_CLASS+") { font-weight: "+this._optionsService.options.fontWeight+";}"+this._terminalSelector+" span."+o.BOLD_CLASS+" { font-weight: "+this._optionsService.options.fontWeightBold+";}"+this._terminalSelector+" span."+o.ITALIC_CLASS+" { font-style: italic;}",I+="@keyframes blink_box_shadow { 50% {  box-shadow: none; }}",I+="@keyframes blink_block { 0% {  background-color: "+this._colors.cursor.css+";  color: "+this._colors.cursorAccent.css+"; } 50% {  background-color: "+this._colors.cursorAccent.css+";  color: "+this._colors.cursor.css+"; }}",I+=this._terminalSelector+" ."+h+":not(.xterm-focus) ."+o.CURSOR_CLASS+"."+o.CURSOR_STYLE_BLOCK_CLASS+" { outline: 1px solid "+this._colors.cursor.css+"; outline-offset: -1px;}"+this._terminalSelector+" ."+h+".xterm-focus ."+o.CURSOR_CLASS+"."+o.CURSOR_BLINK_CLASS+":not(."+o.CURSOR_STYLE_BLOCK_CLASS+") { animation: blink_box_shadow 1s step-end infinite;}"+this._terminalSelector+" ."+h+".xterm-focus ."+o.CURSOR_CLASS+"."+o.CURSOR_BLINK_CLASS+"."+o.CURSOR_STYLE_BLOCK_CLASS+" { animation: blink_block 1s step-end infinite;}"+this._terminalSelector+" ."+h+".xterm-focus ."+o.CURSOR_CLASS+"."+o.CURSOR_STYLE_BLOCK_CLASS+" { background-color: "+this._colors.cursor.css+"; color: "+this._colors.cursorAccent.css+";}"+this._terminalSelector+" ."+h+" ."+o.CURSOR_CLASS+"."+o.CURSOR_STYLE_BAR_CLASS+" { box-shadow: 1px 0 0 "+this._colors.cursor.css+" inset;}"+this._terminalSelector+" ."+h+" ."+o.CURSOR_CLASS+"."+o.CURSOR_STYLE_UNDERLINE_CLASS+" { box-shadow: 0 -1px 0 "+this._colors.cursor.css+" inset;}",I+=this._terminalSelector+" ."+m+" { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}"+this._terminalSelector+" ."+m+" div { position: absolute; background-color: "+this._colors.selection.css+";}",this._colors.ansi.forEach((function(A,C){I+=g._terminalSelector+" .xterm-fg-"+C+" { color: "+A.css+"; }"+g._terminalSelector+" .xterm-bg-"+C+" { background-color: "+A.css+"; }"})),I+=this._terminalSelector+" .xterm-fg-"+n.INVERTED_DEFAULT_COLOR+" { color: "+a.opaque(this._colors.background).css+"; }"+this._terminalSelector+" .xterm-bg-"+n.INVERTED_DEFAULT_COLOR+" { background-color: "+this._colors.foreground.css+"; }",this._themeStyleElement.innerHTML=I},I.prototype.onDevicePixelRatioChange=function(){this._updateDimensions()},I.prototype._refreshRowElements=function(g,I){for(var A=this._rowElements.length;A<=I;A++){var C=document.createElement("div");this._rowContainer.appendChild(C),this._rowElements.push(C)}for(;this._rowElements.length>I;)this._rowContainer.removeChild(this._rowElements.pop())},I.prototype.onResize=function(g,I){this._refreshRowElements(g,I),this._updateDimensions()},I.prototype.onCharSizeChanged=function(){this._updateDimensions()},I.prototype.onBlur=function(){this._rowContainer.classList.remove("xterm-focus")},I.prototype.onFocus=function(){this._rowContainer.classList.add("xterm-focus")},I.prototype.onSelectionChanged=function(g,I,A){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(g&&I){var C=g[1]-this._bufferService.buffer.ydisp,t=I[1]-this._bufferService.buffer.ydisp,i=Math.max(C,0),e=Math.min(t,this._bufferService.rows-1);if(!(i>=this._bufferService.rows||e<0)){var o=document.createDocumentFragment();if(A)o.appendChild(this._createSelectionElement(i,g[0],I[0],e-i+1));else{var n=C===i?g[0]:0,s=i===e?I[0]:this._bufferService.cols;o.appendChild(this._createSelectionElement(i,n,s));var l=e-i-1;if(o.appendChild(this._createSelectionElement(i+1,0,this._bufferService.cols,l)),i!==e){var r=t===e?I[0]:this._bufferService.cols;o.appendChild(this._createSelectionElement(e,0,r))}}this._selectionContainer.appendChild(o)}}},I.prototype._createSelectionElement=function(g,I,A,C){void 0===C&&(C=1);var t=document.createElement("div");return t.style.height=C*this.dimensions.actualCellHeight+"px",t.style.top=g*this.dimensions.actualCellHeight+"px",t.style.left=I*this.dimensions.actualCellWidth+"px",t.style.width=this.dimensions.actualCellWidth*(A-I)+"px",t},I.prototype.onCursorMove=function(){},I.prototype.onOptionsChanged=function(){this._updateDimensions(),this._injectCss()},I.prototype.clear=function(){this._rowElements.forEach((function(g){return g.innerHTML=""}))},I.prototype.renderRows=function(g,I){for(var A=this._bufferService.buffer.ybase+this._bufferService.buffer.y,C=this._bufferService.buffer.x,t=this._optionsService.options.cursorBlink,i=g;i<=I;i++){var e=this._rowElements[i];e.innerHTML="";var o=i+this._bufferService.buffer.ydisp,n=this._bufferService.buffer.lines.get(o),s=this._optionsService.options.cursorStyle;e.appendChild(this._rowFactory.createRow(n,o===A,s,C,t,this.dimensions.actualCellWidth,this._bufferService.cols))}},Object.defineProperty(I.prototype,"_terminalSelector",{get:function(){return"."+d+this._terminalClass},enumerable:!0,configurable:!0}),I.prototype.registerCharacterJoiner=function(g){return-1},I.prototype.deregisterCharacterJoiner=function(g){return!1},I.prototype._onLinkHover=function(g){this._setCellUnderline(g.x1,g.x2,g.y1,g.y2,g.cols,!0)},I.prototype._onLinkLeave=function(g){this._setCellUnderline(g.x1,g.x2,g.y1,g.y2,g.cols,!1)},I.prototype._setCellUnderline=function(g,I,A,C,t,i){for(;g!==I||A!==C;){var e=this._rowElements[A];if(!e)return;var o=e.children[g];o&&(o.style.textDecoration=i?"underline":"none"),++g>=t&&(g=0,A++)}},i([e(5,l.ICharSizeService),e(6,r.IOptionsService),e(7,r.IBufferService)],I)}(s.Disposable);I.DomRenderer=u},function(g,I,A){Object.defineProperty(I,"__esModule",{value:!0});var C=A(9),t=A(3),i=A(5),e=A(10);I.BOLD_CLASS="xterm-bold",I.DIM_CLASS="xterm-dim",I.ITALIC_CLASS="xterm-italic",I.UNDERLINE_CLASS="xterm-underline",I.CURSOR_CLASS="xterm-cursor",I.CURSOR_BLINK_CLASS="xterm-cursor-blink",I.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",I.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",I.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";var o=function(){function g(g,I,A){this._document=g,this._optionsService=I,this._colors=A,this._workCell=new i.CellData}return g.prototype.setColors=function(g){this._colors=g},g.prototype.createRow=function(g,A,i,o,s,l,r){for(var c=this._document.createDocumentFragment(),a=0,d=Math.min(g.length,r)-1;d>=0;d--)if(g.loadCell(d,this._workCell).getCode()!==t.NULL_CELL_CODE||A&&d===o){a=d+1;break}for(d=0;d<a;d++){g.loadCell(d,this._workCell);var h=this._workCell.getWidth();if(0!==h){var m=this._document.createElement("span");if(h>1&&(m.style.width=l*h+"px"),A&&d===o)switch(m.classList.add(I.CURSOR_CLASS),s&&m.classList.add(I.CURSOR_BLINK_CLASS),i){case"bar":m.classList.add(I.CURSOR_STYLE_BAR_CLASS);break;case"underline":m.classList.add(I.CURSOR_STYLE_UNDERLINE_CLASS);break;default:m.classList.add(I.CURSOR_STYLE_BLOCK_CLASS)}this._workCell.isBold()&&m.classList.add(I.BOLD_CLASS),this._workCell.isItalic()&&m.classList.add(I.ITALIC_CLASS),this._workCell.isDim()&&m.classList.add(I.DIM_CLASS),this._workCell.isUnderline()&&m.classList.add(I.UNDERLINE_CLASS),m.textContent=this._workCell.getChars()||t.WHITESPACE_CELL_CHAR;var Z=this._workCell.getFgColor(),u=this._workCell.getFgColorMode(),G=this._workCell.getBgColor(),b=this._workCell.getBgColorMode(),p=!!this._workCell.isInverse();if(p){var B=Z;Z=G,G=B;var y=u;u=b,b=y}switch(u){case 16777216:case 33554432:this._workCell.isBold()&&Z<8&&this._optionsService.options.drawBoldTextInBrightColors&&(Z+=8),this._applyMinimumContrast(m,this._colors.background,this._colors.ansi[Z])||m.classList.add("xterm-fg-"+Z);break;case 50331648:var w=e.rgbaToColor(Z>>16&255,Z>>8&255,255&Z);this._applyMinimumContrast(m,this._colors.background,w)||this._addStyle(m,"color:#"+n(Z.toString(16),"0",6));break;case 0:default:this._applyMinimumContrast(m,this._colors.background,this._colors.foreground)||p&&m.classList.add("xterm-fg-"+C.INVERTED_DEFAULT_COLOR)}switch(b){case 16777216:case 33554432:m.classList.add("xterm-bg-"+G);break;case 50331648:this._addStyle(m,"background-color:#"+n(G.toString(16),"0",6));break;case 0:default:p&&m.classList.add("xterm-bg-"+C.INVERTED_DEFAULT_COLOR)}c.appendChild(m)}}return c},g.prototype._applyMinimumContrast=function(g,I,A){if(1===this._optionsService.options.minimumContrastRatio)return!1;var C=this._colors.contrastCache.getColor(this._workCell.bg,this._workCell.fg);return void 0===C&&(C=e.ensureContrastRatio(I,A,this._optionsService.options.minimumContrastRatio),this._colors.contrastCache.setColor(this._workCell.bg,this._workCell.fg,null!=C?C:null)),!!C&&(this._addStyle(g,"color:"+C.css),!0)},g.prototype._addStyle=function(g,I){g.setAttribute("style",""+(g.getAttribute("style")||"")+I+";")},g}();function n(g,I,A){for(;g.length<A;)g=I+g;return g}I.DomRendererRowFactory=o},function(g,I,A){Object.defineProperty(I,"__esModule",{value:!0});var C=A(12),t={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};I.evaluateKeyboardEvent=function(g,I,A,i){var e={type:0,cancel:!1,key:void 0},o=(g.shiftKey?1:0)|(g.altKey?2:0)|(g.ctrlKey?4:0)|(g.metaKey?8:0);switch(g.keyCode){case 0:"UIKeyInputUpArrow"===g.key?e.key=I?C.C0.ESC+"OA":C.C0.ESC+"[A":"UIKeyInputLeftArrow"===g.key?e.key=I?C.C0.ESC+"OD":C.C0.ESC+"[D":"UIKeyInputRightArrow"===g.key?e.key=I?C.C0.ESC+"OC":C.C0.ESC+"[C":"UIKeyInputDownArrow"===g.key&&(e.key=I?C.C0.ESC+"OB":C.C0.ESC+"[B");break;case 8:if(g.shiftKey){e.key=C.C0.BS;break}if(g.altKey){e.key=C.C0.ESC+C.C0.DEL;break}e.key=C.C0.DEL;break;case 9:if(g.shiftKey){e.key=C.C0.ESC+"[Z";break}e.key=C.C0.HT,e.cancel=!0;break;case 13:e.key=C.C0.CR,e.cancel=!0;break;case 27:e.key=C.C0.ESC,e.cancel=!0;break;case 37:if(g.metaKey)break;o?(e.key=C.C0.ESC+"[1;"+(o+1)+"D",e.key===C.C0.ESC+"[1;3D"&&(e.key=C.C0.ESC+(A?"b":"[1;5D"))):e.key=I?C.C0.ESC+"OD":C.C0.ESC+"[D";break;case 39:if(g.metaKey)break;o?(e.key=C.C0.ESC+"[1;"+(o+1)+"C",e.key===C.C0.ESC+"[1;3C"&&(e.key=C.C0.ESC+(A?"f":"[1;5C"))):e.key=I?C.C0.ESC+"OC":C.C0.ESC+"[C";break;case 38:if(g.metaKey)break;o?(e.key=C.C0.ESC+"[1;"+(o+1)+"A",A||e.key!==C.C0.ESC+"[1;3A"||(e.key=C.C0.ESC+"[1;5A")):e.key=I?C.C0.ESC+"OA":C.C0.ESC+"[A";break;case 40:if(g.metaKey)break;o?(e.key=C.C0.ESC+"[1;"+(o+1)+"B",A||e.key!==C.C0.ESC+"[1;3B"||(e.key=C.C0.ESC+"[1;5B")):e.key=I?C.C0.ESC+"OB":C.C0.ESC+"[B";break;case 45:g.shiftKey||g.ctrlKey||(e.key=C.C0.ESC+"[2~");break;case 46:e.key=o?C.C0.ESC+"[3;"+(o+1)+"~":C.C0.ESC+"[3~";break;case 36:e.key=o?C.C0.ESC+"[1;"+(o+1)+"H":I?C.C0.ESC+"OH":C.C0.ESC+"[H";break;case 35:e.key=o?C.C0.ESC+"[1;"+(o+1)+"F":I?C.C0.ESC+"OF":C.C0.ESC+"[F";break;case 33:g.shiftKey?e.type=2:e.key=C.C0.ESC+"[5~";break;case 34:g.shiftKey?e.type=3:e.key=C.C0.ESC+"[6~";break;case 112:e.key=o?C.C0.ESC+"[1;"+(o+1)+"P":C.C0.ESC+"OP";break;case 113:e.key=o?C.C0.ESC+"[1;"+(o+1)+"Q":C.C0.ESC+"OQ";break;case 114:e.key=o?C.C0.ESC+"[1;"+(o+1)+"R":C.C0.ESC+"OR";break;case 115:e.key=o?C.C0.ESC+"[1;"+(o+1)+"S":C.C0.ESC+"OS";break;case 116:e.key=o?C.C0.ESC+"[15;"+(o+1)+"~":C.C0.ESC+"[15~";break;case 117:e.key=o?C.C0.ESC+"[17;"+(o+1)+"~":C.C0.ESC+"[17~";break;case 118:e.key=o?C.C0.ESC+"[18;"+(o+1)+"~":C.C0.ESC+"[18~";break;case 119:e.key=o?C.C0.ESC+"[19;"+(o+1)+"~":C.C0.ESC+"[19~";break;case 120:e.key=o?C.C0.ESC+"[20;"+(o+1)+"~":C.C0.ESC+"[20~";break;case 121:e.key=o?C.C0.ESC+"[21;"+(o+1)+"~":C.C0.ESC+"[21~";break;case 122:e.key=o?C.C0.ESC+"[23;"+(o+1)+"~":C.C0.ESC+"[23~";break;case 123:e.key=o?C.C0.ESC+"[24;"+(o+1)+"~":C.C0.ESC+"[24~";break;default:if(!g.ctrlKey||g.shiftKey||g.altKey||g.metaKey)if(A&&!i||!g.altKey||g.metaKey)A&&!g.altKey&&!g.ctrlKey&&g.metaKey?65===g.keyCode&&(e.type=1):g.key&&!g.ctrlKey&&!g.altKey&&!g.metaKey&&g.keyCode>=48&&1===g.key.length?e.key=g.key:g.key&&g.ctrlKey&&"_"===g.key&&(e.key=C.C0.US);else{var n=t[g.keyCode],s=n&&n[g.shiftKey?1:0];if(s)e.key=C.C0.ESC+s;else if(g.keyCode>=65&&g.keyCode<=90){var l=g.ctrlKey?g.keyCode-64:g.keyCode+32;e.key=C.C0.ESC+String.fromCharCode(l)}}else g.keyCode>=65&&g.keyCode<=90?e.key=String.fromCharCode(g.keyCode-64):32===g.keyCode?e.key=C.C0.NUL:g.keyCode>=51&&g.keyCode<=55?e.key=String.fromCharCode(g.keyCode-51+27):56===g.keyCode?e.key=C.C0.DEL:219===g.keyCode?e.key=C.C0.ESC:220===g.keyCode?e.key=C.C0.FS:221===g.keyCode&&(e.key=C.C0.GS)}return e}},function(g,I,A){Object.defineProperty(I,"__esModule",{value:!0});var C=A(3);I.handleWindowsModeLineFeed=function(g){var I,A=null===(I=g.buffer.lines.get(g.buffer.ybase+g.buffer.y-1))||void 0===I?void 0:I.get(g.cols-1),t=g.buffer.lines.get(g.buffer.ybase+g.buffer.y);t&&A&&(t.isWrapped=A[C.CHAR_DATA_CODE_INDEX]!==C.NULL_CELL_CODE&&A[C.CHAR_DATA_CODE_INDEX]!==C.WHITESPACE_CELL_CODE)}},function(g,I,A){var C,t=this&&this.__extends||(C=function(g,I){return(C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,I){g.__proto__=I}||function(g,I){for(var A in I)I.hasOwnProperty(A)&&(g[A]=I[A])})(g,I)},function(g,I){function A(){this.constructor=g}C(g,I),g.prototype=null===I?Object.create(I):(A.prototype=I.prototype,new A)}),i=this&&this.__decorate||function(g,I,A,C){var t,i=arguments.length,e=i<3?I:null===C?C=Object.getOwnPropertyDescriptor(I,A):C;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)e=Reflect.decorate(g,I,A,C);else for(var o=g.length-1;o>=0;o--)(t=g[o])&&(e=(i<3?t(e):i>3?t(I,A,e):t(I,A))||e);return i>3&&e&&Object.defineProperty(I,A,e),e},e=this&&this.__param||function(g,I){return function(A,C){I(A,C,g)}};Object.defineProperty(I,"__esModule",{value:!0});var o=A(30),n=A(1),s=A(2),l=A(31),r=A(7),c=A(0),a=A(4),d=function(g){function I(I,A,C,t,i){var e=g.call(this)||this;if(e._renderer=I,e._rowCount=A,e.screenElement=C,e.optionsService=t,e.charSizeService=i,e._isPaused=!1,e._needsFullRefresh=!1,e._canvasWidth=0,e._canvasHeight=0,e._onDimensionsChange=new n.EventEmitter,e._onRender=new n.EventEmitter,e._onRefreshRequest=new n.EventEmitter,e._renderDebouncer=new o.RenderDebouncer((function(g,I){return e._renderRows(g,I)})),e.register(e._renderDebouncer),e._screenDprMonitor=new l.ScreenDprMonitor,e._screenDprMonitor.setListener((function(){return e.onDevicePixelRatioChange()})),e.register(e._screenDprMonitor),e.register(t.onOptionChange((function(){return e._renderer.onOptionsChanged()}))),e.register(i.onCharSizeChange((function(){return e.onCharSizeChanged()}))),e._renderer.onRequestRefreshRows((function(g){return e.refreshRows(g.start,g.end)})),e.register(r.addDisposableDomListener(window,"resize",(function(){return e.onDevicePixelRatioChange()}))),"IntersectionObserver"in window){var s=new IntersectionObserver((function(g){return e._onIntersectionChange(g[g.length-1])}),{threshold:0});s.observe(C),e.register({dispose:function(){return s.disconnect()}})}return e}return t(I,g),Object.defineProperty(I.prototype,"onDimensionsChange",{get:function(){return this._onDimensionsChange.event},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"onRefreshRequest",{get:function(){return this._onRefreshRequest.event},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"dimensions",{get:function(){return this._renderer.dimensions},enumerable:!0,configurable:!0}),I.prototype._onIntersectionChange=function(g){this._isPaused=0===g.intersectionRatio,!this._isPaused&&this._needsFullRefresh&&(this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)},I.prototype.refreshRows=function(g,I){this._isPaused?this._needsFullRefresh=!0:this._renderDebouncer.refresh(g,I,this._rowCount)},I.prototype._renderRows=function(g,I){this._renderer.renderRows(g,I),this._onRender.fire({start:g,end:I})},I.prototype.resize=function(g,I){this._rowCount=I,this._fireOnCanvasResize()},I.prototype.changeOptions=function(){this._renderer.onOptionsChanged(),this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize()},I.prototype._fireOnCanvasResize=function(){this._renderer.dimensions.canvasWidth===this._canvasWidth&&this._renderer.dimensions.canvasHeight===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions)},I.prototype.dispose=function(){this._renderer.dispose(),g.prototype.dispose.call(this)},I.prototype.setRenderer=function(g){var I=this;this._renderer.dispose(),this._renderer=g,this._renderer.onRequestRefreshRows((function(g){return I.refreshRows(g.start,g.end)})),this.refreshRows(0,this._rowCount-1)},I.prototype._fullRefresh=function(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)},I.prototype.setColors=function(g){this._renderer.setColors(g),this._fullRefresh()},I.prototype.onDevicePixelRatioChange=function(){this._renderer.onDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1)},I.prototype.onResize=function(g,I){this._renderer.onResize(g,I),this._fullRefresh()},I.prototype.onCharSizeChanged=function(){this._renderer.onCharSizeChanged()},I.prototype.onBlur=function(){this._renderer.onBlur()},I.prototype.onFocus=function(){this._renderer.onFocus()},I.prototype.onSelectionChanged=function(g,I,A){this._renderer.onSelectionChanged(g,I,A)},I.prototype.onCursorMove=function(){this._renderer.onCursorMove()},I.prototype.clear=function(){this._renderer.clear()},I.prototype.registerCharacterJoiner=function(g){return this._renderer.registerCharacterJoiner(g)},I.prototype.deregisterCharacterJoiner=function(g){return this._renderer.deregisterCharacterJoiner(g)},i([e(3,c.IOptionsService),e(4,a.ICharSizeService)],I)}(s.Disposable);I.RenderService=d},function(g,I,A){Object.defineProperty(I,"__esModule",{value:!0});var C=A(1),t=A(11),i=A(32);I.DEFAULT_BELL_SOUND="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",I.DEFAULT_OPTIONS=Object.freeze({cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",bellSound:I.DEFAULT_BELL_SOUND,bellStyle:"none",drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,letterSpacing:0,logLevel:"info",scrollback:1e3,scrollSensitivity:1,screenReaderMode:!1,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:t.isMac,rendererType:"canvas",windowsMode:!1,convertEol:!1,termName:"xterm",screenKeys:!1,cancelEvents:!1,useFlowControl:!1,wordSeparator:" ()[]{}',:;\"`"});var e=["cols","rows"],o=function(){function g(g){var A=this;this._onOptionChange=new C.EventEmitter,this.options=i.clone(I.DEFAULT_OPTIONS),Object.keys(g).forEach((function(I){if(I in A.options){var C=g[I];A.options[I]=C}}))}return Object.defineProperty(g.prototype,"onOptionChange",{get:function(){return this._onOptionChange.event},enumerable:!0,configurable:!0}),g.prototype.setOption=function(g,A){if(!(g in I.DEFAULT_OPTIONS))throw new Error('No option with key "'+g+'"');if(-1!==e.indexOf(g))throw new Error('Option "'+g+'" can only be set in the constructor');this.options[g]!==A&&(A=this._sanitizeAndValidateOption(g,A),this.options[g]!==A&&(this.options[g]=A,this._onOptionChange.fire(g)))},g.prototype._sanitizeAndValidateOption=function(g,A){switch(g){case"bellStyle":case"cursorStyle":case"fontWeight":case"fontWeightBold":case"rendererType":case"wordSeparator":A||(A=I.DEFAULT_OPTIONS[g]);break;case"lineHeight":case"tabStopWidth":if(A<1)throw new Error(g+" cannot be less than 1, value: "+A);break;case"minimumContrastRatio":A=Math.max(1,Math.min(21,Math.round(10*A)/10));case"scrollback":if((A=Math.min(A,4294967295))<0)throw new Error(g+" cannot be less than 0, value: "+A);break;case"fastScrollSensitivity":case"scrollSensitivity":if(A<=0)throw new Error(g+" cannot be less than or equal to 0, value: "+A)}return A},g.prototype.getOption=function(g){if(!(g in I.DEFAULT_OPTIONS))throw new Error('No option with key "'+g+'"');return this.options[g]},g}();I.OptionsService=o},function(g,I,A){var C=this&&this.__decorate||function(g,I,A,C){var t,i=arguments.length,e=i<3?I:null===C?C=Object.getOwnPropertyDescriptor(I,A):C;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)e=Reflect.decorate(g,I,A,C);else for(var o=g.length-1;o>=0;o--)(t=g[o])&&(e=(i<3?t(e):i>3?t(I,A,e):t(I,A))||e);return i>3&&e&&Object.defineProperty(I,A,e),e},t=this&&this.__param||function(g,I){return function(A,C){I(A,C,g)}};Object.defineProperty(I,"__esModule",{value:!0});var i=A(0),e=A(1),o=function(){function g(g,I,A){this.document=g,this.parentElement=I,this._optionsService=A,this.width=0,this.height=0,this._onCharSizeChange=new e.EventEmitter,this._measureStrategy=new n(g,I,this._optionsService)}return Object.defineProperty(g.prototype,"hasValidSize",{get:function(){return this.width>0&&this.height>0},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"onCharSizeChange",{get:function(){return this._onCharSizeChange.event},enumerable:!0,configurable:!0}),g.prototype.measure=function(){var g=this._measureStrategy.measure();g.width===this.width&&g.height===this.height||(this.width=g.width,this.height=g.height,this._onCharSizeChange.fire())},C([t(2,i.IOptionsService)],g)}();I.CharSizeService=o;var n=function(){function g(g,I,A){this._document=g,this._parentElement=I,this._optionsService=A,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement)}return g.prototype.measure=function(){this._measureElement.style.fontFamily=this._optionsService.options.fontFamily,this._measureElement.style.fontSize=this._optionsService.options.fontSize+"px";var g=this._measureElement.getBoundingClientRect();return 0!==g.width&&0!==g.height&&(this._result.width=g.width,this._result.height=Math.ceil(g.height)),this._result},g}()},function(g,I,A){var C=this&&this.__decorate||function(g,I,A,C){var t,i=arguments.length,e=i<3?I:null===C?C=Object.getOwnPropertyDescriptor(I,A):C;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)e=Reflect.decorate(g,I,A,C);else for(var o=g.length-1;o>=0;o--)(t=g[o])&&(e=(i<3?t(e):i>3?t(I,A,e):t(I,A))||e);return i>3&&e&&Object.defineProperty(I,A,e),e},t=this&&this.__param||function(g,I){return function(A,C){I(A,C,g)}};Object.defineProperty(I,"__esModule",{value:!0});var i=A(0),e=A(65);I.MINIMUM_COLS=2,I.MINIMUM_ROWS=1;var o=function(){function g(g){this._optionsService=g,this.cols=Math.max(g.options.cols,I.MINIMUM_COLS),this.rows=Math.max(g.options.rows,I.MINIMUM_ROWS),this.buffers=new e.BufferSet(g,this)}return Object.defineProperty(g.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!0,configurable:!0}),g.prototype.resize=function(g,I){this.cols=g,this.rows=I},g.prototype.reset=function(){this.buffers=new e.BufferSet(this._optionsService,this)},C([t(0,i.IOptionsService)],g)}();I.BufferService=o},function(g,I,A){Object.defineProperty(I,"__esModule",{value:!0});var C=A(66),t=A(1),i=function(){function g(g,I){this.optionsService=g,this.bufferService=I,this._onBufferActivate=new t.EventEmitter,this._normal=new C.Buffer(!0,g,I),this._normal.fillViewportRows(),this._alt=new C.Buffer(!1,g,I),this._activeBuffer=this._normal,this.setupTabStops()}return Object.defineProperty(g.prototype,"onBufferActivate",{get:function(){return this._onBufferActivate.event},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"alt",{get:function(){return this._alt},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"active",{get:function(){return this._activeBuffer},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"normal",{get:function(){return this._normal},enumerable:!0,configurable:!0}),g.prototype.activateNormalBuffer=function(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))},g.prototype.activateAltBuffer=function(g){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(g),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))},g.prototype.resize=function(g,I){this._normal.resize(g,I),this._alt.resize(g,I)},g.prototype.setupTabStops=function(g){this._normal.setupTabStops(g),this._alt.setupTabStops(g)},g}();I.BufferSet=i},function(g,I,A){Object.defineProperty(I,"__esModule",{value:!0});var C=A(67),t=A(16),i=A(5),e=A(3),o=A(68),n=A(69),s=A(18);I.MAX_BUFFER_SIZE=4294967295;var l=function(){function g(g,I,A){this._hasScrollback=g,this._optionsService=I,this._bufferService=A,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.savedY=0,this.savedX=0,this.savedCurAttrData=t.DEFAULT_ATTR_DATA.clone(),this.savedCharset=s.DEFAULT_CHARSET,this.markers=[],this._nullCell=i.CellData.fromCharData([0,e.NULL_CELL_CHAR,e.NULL_CELL_WIDTH,e.NULL_CELL_CODE]),this._whitespaceCell=i.CellData.fromCharData([0,e.WHITESPACE_CELL_CHAR,e.WHITESPACE_CELL_WIDTH,e.WHITESPACE_CELL_CODE]),this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new C.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}return g.prototype.getNullCell=function(g){return g?(this._nullCell.fg=g.fg,this._nullCell.bg=g.bg):(this._nullCell.fg=0,this._nullCell.bg=0),this._nullCell},g.prototype.getWhitespaceCell=function(g){return g?(this._whitespaceCell.fg=g.fg,this._whitespaceCell.bg=g.bg):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0),this._whitespaceCell},g.prototype.getBlankLine=function(g,I){return new t.BufferLine(this._bufferService.cols,this.getNullCell(g),I)},Object.defineProperty(g.prototype,"hasScrollback",{get:function(){return this._hasScrollback&&this.lines.maxLength>this._rows},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"isCursorInViewport",{get:function(){var g=this.ybase+this.y-this.ydisp;return g>=0&&g<this._rows},enumerable:!0,configurable:!0}),g.prototype._getCorrectBufferLength=function(g){if(!this._hasScrollback)return g;var A=g+this._optionsService.options.scrollback;return A>I.MAX_BUFFER_SIZE?I.MAX_BUFFER_SIZE:A},g.prototype.fillViewportRows=function(g){if(0===this.lines.length){void 0===g&&(g=t.DEFAULT_ATTR_DATA);for(var I=this._rows;I--;)this.lines.push(this.getBlankLine(g))}},g.prototype.clear=function(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new C.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()},g.prototype.resize=function(g,I){var A=this.getNullCell(t.DEFAULT_ATTR_DATA),C=this._getCorrectBufferLength(I);if(C>this.lines.maxLength&&(this.lines.maxLength=C),this.lines.length>0){if(this._cols<g)for(var i=0;i<this.lines.length;i++)this.lines.get(i).resize(g,A);var e=0;if(this._rows<I)for(var o=this._rows;o<I;o++)this.lines.length<I+this.ybase&&(this._optionsService.options.windowsMode?this.lines.push(new t.BufferLine(g,A)):this.ybase>0&&this.lines.length<=this.ybase+this.y+e+1?(this.ybase--,e++,this.ydisp>0&&this.ydisp--):this.lines.push(new t.BufferLine(g,A)));else for(o=this._rows;o>I;o--)this.lines.length>I+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(C<this.lines.maxLength){var n=this.lines.length-C;n>0&&(this.lines.trimStart(n),this.ybase=Math.max(this.ybase-n,0),this.ydisp=Math.max(this.ydisp-n,0),this.savedY=Math.max(this.savedY-n,0)),this.lines.maxLength=C}this.x=Math.min(this.x,g-1),this.y=Math.min(this.y,I-1),e&&(this.y+=e),this.savedX=Math.min(this.savedX,g-1),this.scrollTop=0}if(this.scrollBottom=I-1,this._isReflowEnabled&&(this._reflow(g,I),this._cols>g))for(i=0;i<this.lines.length;i++)this.lines.get(i).resize(g,A);this._cols=g,this._rows=I},Object.defineProperty(g.prototype,"_isReflowEnabled",{get:function(){return this._hasScrollback&&!this._optionsService.options.windowsMode},enumerable:!0,configurable:!0}),g.prototype._reflow=function(g,I){this._cols!==g&&(g>this._cols?this._reflowLarger(g,I):this._reflowSmaller(g,I))},g.prototype._reflowLarger=function(g,I){var A=o.reflowLargerGetLinesToRemove(this.lines,this._cols,g,this.ybase+this.y,this.getNullCell(t.DEFAULT_ATTR_DATA));if(A.length>0){var C=o.reflowLargerCreateNewLayout(this.lines,A);o.reflowLargerApplyNewLayout(this.lines,C.layout),this._reflowLargerAdjustViewport(g,I,C.countRemoved)}},g.prototype._reflowLargerAdjustViewport=function(g,I,A){for(var C=this.getNullCell(t.DEFAULT_ATTR_DATA),i=A;i-- >0;)0===this.ybase?(this.y>0&&this.y--,this.lines.length<I&&this.lines.push(new t.BufferLine(g,C))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-A,0)},g.prototype._reflowSmaller=function(g,I){for(var A=this.getNullCell(t.DEFAULT_ATTR_DATA),C=[],i=0,e=this.lines.length-1;e>=0;e--){var n=this.lines.get(e);if(!(!n||!n.isWrapped&&n.getTrimmedLength()<=g)){for(var s=[n];n.isWrapped&&e>0;)n=this.lines.get(--e),s.unshift(n);var l=this.ybase+this.y;if(!(l>=e&&l<e+s.length)){var r=s[s.length-1].getTrimmedLength(),c=o.reflowSmallerGetNewLineLengths(s,this._cols,g),a=c.length-s.length,d=void 0;d=0===this.ybase&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+a):Math.max(0,this.lines.length-this.lines.maxLength+a);for(var h=[],m=0;m<a;m++){var Z=this.getBlankLine(t.DEFAULT_ATTR_DATA,!0);h.push(Z)}h.length>0&&(C.push({start:e+s.length+i,newLines:h}),i+=h.length),s.push.apply(s,h);var u=c.length-1,G=c[u];0===G&&(G=c[--u]);for(var b=s.length-a-1,p=r;b>=0;){var B=Math.min(p,G);if(s[u].copyCellsFrom(s[b],p-B,G-B,B,!0),0==(G-=B)&&(G=c[--u]),0==(p-=B)){b--;var y=Math.max(b,0);p=o.getWrappedLineTrimmedLength(s,y,this._cols)}}for(m=0;m<s.length;m++)c[m]<g&&s[m].setCell(c[m],A);for(var w=a-d;w-- >0;)0===this.ybase?this.y<I-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+i)-I&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+a,this.ybase+I-1)}}}if(C.length>0){var W=[],S=[];for(m=0;m<this.lines.length;m++)S.push(this.lines.get(m));var K=this.lines.length,f=K-1,Y=0,X=C[Y];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+i);var V=0;for(m=Math.min(this.lines.maxLength-1,K+i-1);m>=0;m--)if(X&&X.start>f+V){for(var O=X.newLines.length-1;O>=0;O--)this.lines.set(m--,X.newLines[O]);m++,W.push({index:f+1,amount:X.newLines.length}),V+=X.newLines.length,X=C[++Y]}else this.lines.set(m,S[f--]);var R=0;for(m=W.length-1;m>=0;m--)W[m].index+=R,this.lines.onInsertEmitter.fire(W[m]),R+=W[m].amount;var Q=Math.max(0,K+i-this.lines.maxLength);Q>0&&this.lines.onTrimEmitter.fire(Q)}},g.prototype.stringIndexToBufferIndex=function(g,I,A){for(void 0===A&&(A=!1);I;){var C=this.lines.get(g);if(!C)return[-1,-1];for(var t=A?C.getTrimmedLength():C.length,i=0;i<t;++i)if(C.get(i)[e.CHAR_DATA_WIDTH_INDEX]&&(I-=C.get(i)[e.CHAR_DATA_CHAR_INDEX].length||1),I<0)return[g,i];g++}return[g,0]},g.prototype.translateBufferLineToString=function(g,I,A,C){void 0===A&&(A=0);var t=this.lines.get(g);return t?t.translateToString(I,A,C):""},g.prototype.getWrappedRangeForLine=function(g){for(var I=g,A=g;I>0&&this.lines.get(I).isWrapped;)I--;for(;A+1<this.lines.length&&this.lines.get(A+1).isWrapped;)A++;return{first:I,last:A}},g.prototype.setupTabStops=function(g){for(null!=g?this.tabs[g]||(g=this.prevStop(g)):(this.tabs={},g=0);g<this._cols;g+=this._optionsService.options.tabStopWidth)this.tabs[g]=!0},g.prototype.prevStop=function(g){for(null==g&&(g=this.x);!this.tabs[--g]&&g>0;);return g>=this._cols?this._cols-1:g<0?0:g},g.prototype.nextStop=function(g){for(null==g&&(g=this.x);!this.tabs[++g]&&g<this._cols;);return g>=this._cols?this._cols-1:g<0?0:g},g.prototype.addMarker=function(g){var I=this,A=new n.Marker(g);return this.markers.push(A),A.register(this.lines.onTrim((function(g){A.line-=g,A.line<0&&A.dispose()}))),A.register(this.lines.onInsert((function(g){A.line>=g.index&&(A.line+=g.amount)}))),A.register(this.lines.onDelete((function(g){A.line>=g.index&&A.line<g.index+g.amount&&A.dispose(),A.line>g.index&&(A.line-=g.amount)}))),A.register(A.onDispose((function(){return I._removeMarker(A)}))),A},g.prototype._removeMarker=function(g){this.markers.splice(this.markers.indexOf(g),1)},g.prototype.iterator=function(g,I,A,C,t){return new r(this,g,I,A,C,t)},g}();I.Buffer=l;var r=function(){function g(g,I,A,C,t,i){void 0===A&&(A=0),void 0===C&&(C=g.lines.length),void 0===t&&(t=0),void 0===i&&(i=0),this._buffer=g,this._trimRight=I,this._startIndex=A,this._endIndex=C,this._startOverscan=t,this._endOverscan=i,this._startIndex<0&&(this._startIndex=0),this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length),this._current=this._startIndex}return g.prototype.hasNext=function(){return this._current<this._endIndex},g.prototype.next=function(){var g=this._buffer.getWrappedRangeForLine(this._current);g.first<this._startIndex-this._startOverscan&&(g.first=this._startIndex-this._startOverscan),g.last>this._endIndex+this._endOverscan&&(g.last=this._endIndex+this._endOverscan),g.first=Math.max(g.first,0),g.last=Math.min(g.last,this._buffer.lines.length);for(var I="",A=g.first;A<=g.last;++A)I+=this._buffer.translateBufferLineToString(A,this._trimRight);return this._current=g.last+1,{range:g,content:I}},g}();I.BufferStringIterator=r},function(g,I,A){Object.defineProperty(I,"__esModule",{value:!0});var C=A(1),t=function(){function g(g){this._maxLength=g,this.onDeleteEmitter=new C.EventEmitter,this.onInsertEmitter=new C.EventEmitter,this.onTrimEmitter=new C.EventEmitter,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}return Object.defineProperty(g.prototype,"onDelete",{get:function(){return this.onDeleteEmitter.event},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"onInsert",{get:function(){return this.onInsertEmitter.event},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"onTrim",{get:function(){return this.onTrimEmitter.event},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"maxLength",{get:function(){return this._maxLength},set:function(g){if(this._maxLength!==g){for(var I=new Array(g),A=0;A<Math.min(g,this.length);A++)I[A]=this._array[this._getCyclicIndex(A)];this._array=I,this._maxLength=g,this._startIndex=0}},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"length",{get:function(){return this._length},set:function(g){if(g>this._length)for(var I=this._length;I<g;I++)this._array[I]=void 0;this._length=g},enumerable:!0,configurable:!0}),g.prototype.get=function(g){return this._array[this._getCyclicIndex(g)]},g.prototype.set=function(g,I){this._array[this._getCyclicIndex(g)]=I},g.prototype.push=function(g){this._array[this._getCyclicIndex(this._length)]=g,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++},g.prototype.recycle=function(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]},Object.defineProperty(g.prototype,"isFull",{get:function(){return this._length===this._maxLength},enumerable:!0,configurable:!0}),g.prototype.pop=function(){return this._array[this._getCyclicIndex(this._length---1)]},g.prototype.splice=function(g,I){for(var A=[],C=2;C<arguments.length;C++)A[C-2]=arguments[C];if(I){for(var t=g;t<this._length-I;t++)this._array[this._getCyclicIndex(t)]=this._array[this._getCyclicIndex(t+I)];this._length-=I}for(t=this._length-1;t>=g;t--)this._array[this._getCyclicIndex(t+A.length)]=this._array[this._getCyclicIndex(t)];for(t=0;t<A.length;t++)this._array[this._getCyclicIndex(g+t)]=A[t];if(this._length+A.length>this._maxLength){var i=this._length+A.length-this._maxLength;this._startIndex+=i,this._length=this._maxLength,this.onTrimEmitter.fire(i)}else this._length+=A.length},g.prototype.trimStart=function(g){g>this._length&&(g=this._length),this._startIndex+=g,this._length-=g,this.onTrimEmitter.fire(g)},g.prototype.shiftElements=function(g,I,A){if(!(I<=0)){if(g<0||g>=this._length)throw new Error("start argument out of range");if(g+A<0)throw new Error("Cannot shift elements in list beyond index 0");if(A>0){for(var C=I-1;C>=0;C--)this.set(g+C+A,this.get(g+C));var t=g+I+A-this._length;if(t>0)for(this._length+=t;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(C=0;C<I;C++)this.set(g+C+A,this.get(g+C))}},g.prototype._getCyclicIndex=function(g){return(this._startIndex+g)%this._maxLength},g}();I.CircularList=t},function(g,I,A){function C(g,I,A){if(I===g.length-1)return g[I].getTrimmedLength();var C=!g[I].hasContent(A-1)&&1===g[I].getWidth(A-1),t=2===g[I+1].getWidth(0);return C&&t?A-1:A}Object.defineProperty(I,"__esModule",{value:!0}),I.reflowLargerGetLinesToRemove=function(g,I,A,t,i){for(var e=[],o=0;o<g.length-1;o++){var n=o,s=g.get(++n);if(s.isWrapped){for(var l=[g.get(o)];n<g.length&&s.isWrapped;)l.push(s),s=g.get(++n);if(t>=o&&t<n)o+=l.length-1;else{for(var r=0,c=C(l,r,I),a=1,d=0;a<l.length;){var h=C(l,a,I),m=h-d,Z=A-c,u=Math.min(m,Z);l[r].copyCellsFrom(l[a],d,c,u,!1),(c+=u)===A&&(r++,c=0),(d+=u)===h&&(a++,d=0),0===c&&0!==r&&2===l[r-1].getWidth(A-1)&&(l[r].copyCellsFrom(l[r-1],A-1,c++,1,!1),l[r-1].setCell(A-1,i))}l[r].replaceCells(c,A,i);for(var G=0,b=l.length-1;b>0&&(b>r||0===l[b].getTrimmedLength());b--)G++;G>0&&(e.push(o+l.length-G),e.push(G)),o+=l.length-1}}}return e},I.reflowLargerCreateNewLayout=function(g,I){for(var A=[],C=0,t=I[C],i=0,e=0;e<g.length;e++)if(t===e){var o=I[++C];g.onDeleteEmitter.fire({index:e-i,amount:o}),e+=o-1,i+=o,t=I[++C]}else A.push(e);return{layout:A,countRemoved:i}},I.reflowLargerApplyNewLayout=function(g,I){for(var A=[],C=0;C<I.length;C++)A.push(g.get(I[C]));for(C=0;C<A.length;C++)g.set(C,A[C]);g.length=I.length},I.reflowSmallerGetNewLineLengths=function(g,I,A){for(var t=[],i=g.map((function(A,t){return C(g,t,I)})).reduce((function(g,I){return g+I})),e=0,o=0,n=0;n<i;){if(i-n<A){t.push(i-n);break}e+=A;var s=C(g,o,I);e>s&&(e-=s,o++);var l=2===g[o].getWidth(e-1);l&&e--;var r=l?A-1:A;t.push(r),n+=r}return t},I.getWrappedLineTrimmedLength=C},function(g,I,A){var C,t=this&&this.__extends||(C=function(g,I){return(C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,I){g.__proto__=I}||function(g,I){for(var A in I)I.hasOwnProperty(A)&&(g[A]=I[A])})(g,I)},function(g,I){function A(){this.constructor=g}C(g,I),g.prototype=null===I?Object.create(I):(A.prototype=I.prototype,new A)});Object.defineProperty(I,"__esModule",{value:!0});var i=A(1),e=function(g){function I(A){var C=g.call(this)||this;return C.line=A,C._id=I._nextId++,C.isDisposed=!1,C._onDispose=new i.EventEmitter,C}return t(I,g),Object.defineProperty(I.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"onDispose",{get:function(){return this._onDispose.event},enumerable:!0,configurable:!0}),I.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire())},I._nextId=1,I}(A(2).Disposable);I.Marker=e},function(g,I,A){var C=this&&this.__decorate||function(g,I,A,C){var t,i=arguments.length,e=i<3?I:null===C?C=Object.getOwnPropertyDescriptor(I,A):C;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)e=Reflect.decorate(g,I,A,C);else for(var o=g.length-1;o>=0;o--)(t=g[o])&&(e=(i<3?t(e):i>3?t(I,A,e):t(I,A))||e);return i>3&&e&&Object.defineProperty(I,A,e),e},t=this&&this.__param||function(g,I){return function(A,C){I(A,C,g)}};Object.defineProperty(I,"__esModule",{value:!0});var i=A(4),e=A(29),o=function(){function g(g,I){this._renderService=g,this._charSizeService=I}return g.prototype.getCoords=function(g,I,A,C,t){return e.getCoords(g,I,A,C,this._charSizeService.hasValidSize,this._renderService.dimensions.actualCellWidth,this._renderService.dimensions.actualCellHeight,t)},g.prototype.getRawByteCoords=function(g,I,A,C){var t=this.getCoords(g,I,A,C);return e.getRawByteCoords(t)},C([t(0,i.IRenderService),t(1,i.ICharSizeService)],g)}();I.MouseService=o},function(g,I,A){var C=this&&this.__decorate||function(g,I,A,C){var t,i=arguments.length,e=i<3?I:null===C?C=Object.getOwnPropertyDescriptor(I,A):C;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)e=Reflect.decorate(g,I,A,C);else for(var o=g.length-1;o>=0;o--)(t=g[o])&&(e=(i<3?t(e):i>3?t(I,A,e):t(I,A))||e);return i>3&&e&&Object.defineProperty(I,A,e),e},t=this&&this.__param||function(g,I){return function(A,C){I(A,C,g)}};Object.defineProperty(I,"__esModule",{value:!0});var i=A(0),e=A(1),o=A(32),n=Object.freeze({applicationCursorKeys:!1}),s=function(){function g(g,I,A,C){this._scrollToBottom=g,this._bufferService=I,this._logService=A,this._optionsService=C,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=new e.EventEmitter,this._onUserInput=new e.EventEmitter,this._onBinary=new e.EventEmitter,this.decPrivateModes=o.clone(n)}return Object.defineProperty(g.prototype,"onData",{get:function(){return this._onData.event},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"onUserInput",{get:function(){return this._onUserInput.event},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!0,configurable:!0}),g.prototype.reset=function(){this.decPrivateModes=o.clone(n)},g.prototype.triggerDataEvent=function(g,I){if(void 0===I&&(I=!1),!this._optionsService.options.disableStdin){var A=this._bufferService.buffer;A.ybase!==A.ydisp&&this._scrollToBottom(),I&&this._onUserInput.fire(),this._logService.debug('sending data "'+g+'"',(function(){return g.split("").map((function(g){return g.charCodeAt(0)}))})),this._onData.fire(g)}},g.prototype.triggerBinaryEvent=function(g){this._optionsService.options.disableStdin||(this._logService.debug('sending binary "'+g+'"',(function(){return g.split("").map((function(g){return g.charCodeAt(0)}))})),this._onBinary.fire(g))},C([t(1,i.IBufferService),t(2,i.ILogService),t(3,i.IOptionsService)],g)}();I.CoreService=s},function(g,I,A){var C=this&&this.__decorate||function(g,I,A,C){var t,i=arguments.length,e=i<3?I:null===C?C=Object.getOwnPropertyDescriptor(I,A):C;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)e=Reflect.decorate(g,I,A,C);else for(var o=g.length-1;o>=0;o--)(t=g[o])&&(e=(i<3?t(e):i>3?t(I,A,e):t(I,A))||e);return i>3&&e&&Object.defineProperty(I,A,e),e},t=this&&this.__param||function(g,I){return function(A,C){I(A,C,g)}},i=this&&this.__spreadArrays||function(){for(var g=0,I=0,A=arguments.length;I<A;I++)g+=arguments[I].length;var C=Array(g),t=0;for(I=0;I<A;I++)for(var i=arguments[I],e=0,o=i.length;e<o;e++,t++)C[t]=i[e];return C};Object.defineProperty(I,"__esModule",{value:!0});var e,o,n=A(0);(o=e=I.LogLevel||(I.LogLevel={}))[o.DEBUG=0]="DEBUG",o[o.INFO=1]="INFO",o[o.WARN=2]="WARN",o[o.ERROR=3]="ERROR",o[o.OFF=4]="OFF";var s={debug:e.DEBUG,info:e.INFO,warn:e.WARN,error:e.ERROR,off:e.OFF},l=function(){function g(g){var I=this;this._optionsService=g,this._updateLogLevel(),this._optionsService.onOptionChange((function(g){"logLevel"===g&&I._updateLogLevel()}))}return g.prototype._updateLogLevel=function(){this._logLevel=s[this._optionsService.options.logLevel]},g.prototype._evalLazyOptionalParams=function(g){for(var I=0;I<g.length;I++)"function"==typeof g[I]&&(g[I]=g[I]())},g.prototype._log=function(g,I,A){this._evalLazyOptionalParams(A),g.call.apply(g,i([console,"xterm.js: "+I],A))},g.prototype.debug=function(g){for(var I=[],A=1;A<arguments.length;A++)I[A-1]=arguments[A];this._logLevel<=e.DEBUG&&this._log(console.log,g,I)},g.prototype.info=function(g){for(var I=[],A=1;A<arguments.length;A++)I[A-1]=arguments[A];this._logLevel<=e.INFO&&this._log(console.info,g,I)},g.prototype.warn=function(g){for(var I=[],A=1;A<arguments.length;A++)I[A-1]=arguments[A];this._logLevel<=e.WARN&&this._log(console.warn,g,I)},g.prototype.error=function(g){for(var I=[],A=1;A<arguments.length;A++)I[A-1]=arguments[A];this._logLevel<=e.ERROR&&this._log(console.error,g,I)},C([t(0,n.IOptionsService)],g)}();I.LogService=l},function(g,I,A){var C=this&&this.__decorate||function(g,I,A,C){var t,i=arguments.length,e=i<3?I:null===C?C=Object.getOwnPropertyDescriptor(I,A):C;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)e=Reflect.decorate(g,I,A,C);else for(var o=g.length-1;o>=0;o--)(t=g[o])&&(e=(i<3?t(e):i>3?t(I,A,e):t(I,A))||e);return i>3&&e&&Object.defineProperty(I,A,e),e},t=this&&this.__param||function(g,I){return function(A,C){I(A,C,g)}};Object.defineProperty(I,"__esModule",{value:!0});var i=A(0),e=function(){function g(g){this._bufferService=g,this.clearRange()}return Object.defineProperty(g.prototype,"start",{get:function(){return this._start},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"end",{get:function(){return this._end},enumerable:!0,configurable:!0}),g.prototype.clearRange=function(){this._start=this._bufferService.buffer.y,this._end=this._bufferService.buffer.y},g.prototype.markDirty=function(g){g<this._start?this._start=g:g>this._end&&(this._end=g)},g.prototype.markRangeDirty=function(g,I){if(g>I){var A=g;g=I,I=A}g<this._start&&(this._start=g),I>this._end&&(this._end=I)},g.prototype.markAllDirty=function(){this.markRangeDirty(0,this._bufferService.rows-1)},C([t(0,i.IBufferService)],g)}();I.DirtyRowService=e},function(g,I,A){var C=this&&this.__spreadArrays||function(){for(var g=0,I=0,A=arguments.length;I<A;I++)g+=arguments[I].length;var C=Array(g),t=0;for(I=0;I<A;I++)for(var i=arguments[I],e=0,o=i.length;e<o;e++,t++)C[t]=i[e];return C};Object.defineProperty(I,"__esModule",{value:!0});var t=A(0),i=A(14),e=function(){function g(){for(var g=[],I=0;I<arguments.length;I++)g[I]=arguments[I];this._entries=new Map;for(var A=0,C=g;A<C.length;A++){var t=C[A],i=t[0],e=t[1];this.set(i,e)}}return g.prototype.set=function(g,I){var A=this._entries.get(g);return this._entries.set(g,I),A},g.prototype.forEach=function(g){this._entries.forEach((function(I,A){return g(A,I)}))},g.prototype.has=function(g){return this._entries.has(g)},g.prototype.get=function(g){return this._entries.get(g)},g}();I.ServiceCollection=e;var o=function(){function g(){this._services=new e,this._services.set(t.IInstantiationService,this)}return g.prototype.setService=function(g,I){this._services.set(g,I)},g.prototype.createInstance=function(g){for(var I=[],A=1;A<arguments.length;A++)I[A-1]=arguments[A];for(var t=i.getServiceDependencies(g).sort((function(g,I){return g.index-I.index})),e=[],o=0,n=t;o<n.length;o++){var s=n[o],l=this._services.get(s.id);if(!l)throw new Error("[createInstance] "+g.name+" depends on UNKNOWN service "+s.id+".");e.push(l)}var r=t.length>0?t[0].index:I.length;if(I.length!==r)throw new Error("[createInstance] First service dependency of "+g.name+" at position "+(r+1)+" conflicts with "+I.length+" static arguments");return new(g.bind.apply(g,C([void 0],C(I,e))))},g}();I.InstantiationService=o},function(g,I,A){var C=this&&this.__decorate||function(g,I,A,C){var t,i=arguments.length,e=i<3?I:null===C?C=Object.getOwnPropertyDescriptor(I,A):C;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)e=Reflect.decorate(g,I,A,C);else for(var o=g.length-1;o>=0;o--)(t=g[o])&&(e=(i<3?t(e):i>3?t(I,A,e):t(I,A))||e);return i>3&&e&&Object.defineProperty(I,A,e),e},t=this&&this.__param||function(g,I){return function(A,C){I(A,C,g)}};Object.defineProperty(I,"__esModule",{value:!0});var i=A(0),e=A(1),o={NONE:{events:0,restrict:function(){return!1}},X10:{events:1,restrict:function(g){return 4!==g.button&&1===g.action&&(g.ctrl=!1,g.alt=!1,g.shift=!1,!0)}},VT200:{events:19,restrict:function(g){return 32!==g.action}},DRAG:{events:23,restrict:function(g){return 32!==g.action||3!==g.button}},ANY:{events:31,restrict:function(g){return!0}}};function n(g,I){var A=(g.ctrl?16:0)|(g.shift?4:0)|(g.alt?8:0);return 4===g.button?(A|=64,A|=g.action):(A|=3&g.button,4&g.button&&(A|=64),8&g.button&&(A|=128),32===g.action?A|=32:0!==g.action||I||(A|=3)),A}var s=String.fromCharCode,l={DEFAULT:function(g){var I=[n(g,!1)+32,g.col+32,g.row+32];return I[0]>255||I[1]>255||I[2]>255?"":"[M"+s(I[0])+s(I[1])+s(I[2])},SGR:function(g){var I=0===g.action&&4!==g.button?"m":"M";return"[<"+n(g,!0)+";"+g.col+";"+g.row+I}},r=function(){function g(g,I){var A=this;this._bufferService=g,this._coreService=I,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._onProtocolChange=new e.EventEmitter,this._lastEvent=null,Object.keys(o).forEach((function(g){return A.addProtocol(g,o[g])})),Object.keys(l).forEach((function(g){return A.addEncoding(g,l[g])})),this.reset()}return g.prototype.addProtocol=function(g,I){this._protocols[g]=I},g.prototype.addEncoding=function(g,I){this._encodings[g]=I},Object.defineProperty(g.prototype,"activeProtocol",{get:function(){return this._activeProtocol},set:function(g){if(!this._protocols[g])throw new Error('unknown protocol "'+g+'"');this._activeProtocol=g,this._onProtocolChange.fire(this._protocols[g].events)},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"activeEncoding",{get:function(){return this._activeEncoding},set:function(g){if(!this._encodings[g])throw new Error('unknown encoding "'+g+'"');this._activeEncoding=g},enumerable:!0,configurable:!0}),g.prototype.reset=function(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null},Object.defineProperty(g.prototype,"onProtocolChange",{get:function(){return this._onProtocolChange.event},enumerable:!0,configurable:!0}),g.prototype.triggerMouseEvent=function(g){if(g.col<0||g.col>=this._bufferService.cols||g.row<0||g.row>=this._bufferService.rows)return!1;if(4===g.button&&32===g.action)return!1;if(3===g.button&&32!==g.action)return!1;if(4!==g.button&&(2===g.action||3===g.action))return!1;if(g.col++,g.row++,32===g.action&&this._lastEvent&&this._compareEvents(this._lastEvent,g))return!1;if(!this._protocols[this._activeProtocol].restrict(g))return!1;var I=this._encodings[this._activeEncoding](g);return I&&("DEFAULT"===this._activeEncoding?this._coreService.triggerBinaryEvent(I):this._coreService.triggerDataEvent(I,!0)),this._lastEvent=g,!0},g.prototype.explainEvents=function(g){return{DOWN:!!(1&g),UP:!!(2&g),DRAG:!!(4&g),MOVE:!!(8&g),WHEEL:!!(16&g)}},g.prototype._compareEvents=function(g,I){return g.col===I.col&&g.row===I.row&&g.button===I.button&&g.action===I.action&&g.ctrl===I.ctrl&&g.alt===I.alt&&g.shift===I.shift},C([t(0,i.IBufferService),t(1,i.ICoreService)],g)}();I.CoreMouseService=r},function(g,I,A){Object.defineProperty(I,"__esModule",{value:!0});var C=function(){function g(g){this._action=g,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0}return g.prototype.writeSync=function(g){if(this._writeBuffer.length){for(var I=this._bufferOffset;I<this._writeBuffer.length;++I){var A=this._writeBuffer[I],C=this._callbacks[I];this._action(A),C&&C()}this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=2147483647}this._action(g)},g.prototype.write=function(g,I){var A=this;if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");this._writeBuffer.length||(this._bufferOffset=0,setTimeout((function(){return A._innerWrite()}))),this._pendingData+=g.length,this._writeBuffer.push(g),this._callbacks.push(I)},g.prototype._innerWrite=function(){for(var g=this,I=Date.now();this._writeBuffer.length>this._bufferOffset;){var A=this._writeBuffer[this._bufferOffset],C=this._callbacks[this._bufferOffset];if(this._bufferOffset++,this._action(A),this._pendingData-=A.length,C&&C(),Date.now()-I>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout((function(){return g._innerWrite()}),0)):(this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0)},g}();I.WriteBuffer=C},function(g,I,A){Object.defineProperty(I,"__esModule",{value:!0});var C=function(){function g(g){this._textarea=g}return Object.defineProperty(g.prototype,"isFocused",{get:function(){return document.activeElement===this._textarea&&document.hasFocus()},enumerable:!0,configurable:!0}),g}();I.CoreBrowserService=C},function(g,I,A){Object.defineProperty(I,"__esModule",{value:!0});var C=function(){function g(){this._addons=[]}return g.prototype.dispose=function(){for(var g=this._addons.length-1;g>=0;g--)this._addons[g].instance.dispose()},g.prototype.loadAddon=function(g,I){var A=this,C={instance:I,dispose:I.dispose,isDisposed:!1};this._addons.push(C),I.dispose=function(){return A._wrappedAddonDispose(C)},I.activate(g)},g.prototype._wrappedAddonDispose=function(g){if(!g.isDisposed){for(var I=-1,A=0;A<this._addons.length;A++)if(this._addons[A]===g){I=A;break}if(-1===I)throw new Error("Could not dispose an addon that has not been loaded");g.isDisposed=!0,g.dispose.apply(g.instance),this._addons.splice(I,1)}},g}();I.AddonManager=C}])})),t=I(C),i=C.Terminal,e=A((function(g,I){var A,C;self,g.exports=(A={775:(g,I)=>{Object.defineProperty(I,"__esModule",{value:!0}),I.FitAddon=void 0;var A=function(){function g(){}return g.prototype.activate=function(g){this._terminal=g},g.prototype.dispose=function(){},g.prototype.fit=function(){var g=this.proposeDimensions();if(g&&this._terminal){var I=this._terminal._core;this._terminal.rows===g.rows&&this._terminal.cols===g.cols||(I._renderService.clear(),this._terminal.resize(g.cols,g.rows))}},g.prototype.proposeDimensions=function(){if(this._terminal&&this._terminal.element&&this._terminal.element.parentElement){var g=this._terminal._core;if(0!==g._renderService.dimensions.actualCellWidth&&0!==g._renderService.dimensions.actualCellHeight){var I=window.getComputedStyle(this._terminal.element.parentElement),A=parseInt(I.getPropertyValue("height")),C=Math.max(0,parseInt(I.getPropertyValue("width"))),t=window.getComputedStyle(this._terminal.element),i=A-(parseInt(t.getPropertyValue("padding-top"))+parseInt(t.getPropertyValue("padding-bottom"))),e=C-(parseInt(t.getPropertyValue("padding-right"))+parseInt(t.getPropertyValue("padding-left")))-g.viewport.scrollBarWidth;return{cols:Math.max(2,Math.floor(e/g._renderService.dimensions.actualCellWidth)),rows:Math.max(1,Math.floor(i/g._renderService.dimensions.actualCellHeight))}}}},g}();I.FitAddon=A}},C={},function g(I){if(C[I])return C[I].exports;var t=C[I]={exports:{}};return A[I](t,t.exports,g),t.exports}(775))}));I(e);var o=e.FitAddon,n=A((function(g,I){window,g.exports=function(g){var I={};function A(C){if(I[C])return I[C].exports;var t=I[C]={i:C,l:!1,exports:{}};return g[C].call(t.exports,t,t.exports,A),t.l=!0,t.exports}return A.m=g,A.c=I,A.d=function(g,I,C){A.o(g,I)||Object.defineProperty(g,I,{enumerable:!0,get:C})},A.r=function(g){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})},A.t=function(g,I){if(1&I&&(g=A(g)),8&I)return g;if(4&I&&"object"==typeof g&&g&&g.__esModule)return g;var C=Object.create(null);if(A.r(C),Object.defineProperty(C,"default",{enumerable:!0,value:g}),2&I&&"string"!=typeof g)for(var t in g)A.d(C,t,function(I){return g[I]}.bind(null,t));return C},A.n=function(g){var I=g&&g.__esModule?function(){return g.default}:function(){return g};return A.d(I,"a",I),I},A.o=function(g,I){return Object.prototype.hasOwnProperty.call(g,I)},A.p="",A(A.s=0)}([function(g,I,A){Object.defineProperty(I,"__esModule",{value:!0});var C=new RegExp("(?:^|[^\\da-z\\.-]+)((https?:\\/\\/)((([\\da-z\\.-]+)\\.([a-z\\.]{2,6}))|((\\d{1,3}\\.){3}\\d{1,3})|(localhost))(:\\d{1,5})?((\\/[\\/\\w\\.\\-%~:+]*)*([^:\"'\\s]))?(\\?[0-9\\w\\[\\]\\(\\)\\/\\?\\!#@$%&'*+,:;~\\=\\.\\-]*)?(#[0-9\\w\\[\\]\\(\\)\\/\\?\\!#@$%&'*+,:;~\\=\\.\\-]*)?)($|[^\\/\\w\\.\\-%]+)");function t(g,I){window.open(I,"_blank")}var i=function(){function g(g,I){void 0===g&&(g=t),void 0===I&&(I={}),this._handler=g,this._options=I,this._options.matchIndex=1}return g.prototype.activate=function(g){this._terminal=g,this._linkMatcherId=this._terminal.registerLinkMatcher(C,this._handler,this._options)},g.prototype.dispose=function(){void 0!==this._linkMatcherId&&void 0!==this._terminal&&this._terminal.deregisterLinkMatcher(this._linkMatcherId)},g}();I.WebLinksAddon=i}])}));I(n);var s=n.WebLinksAddon;function l(g,I){function A(A){return function(e){return function(A){if(C)throw new TypeError("Generator is already executing.");for(;o;)try{if(C=1,t&&(i=2&A[0]?t.return:A[0]?t.throw||((i=t.return)&&i.call(t),0):t.next)&&!(i=i.call(t,A[1])).done)return i;switch(t=0,i&&(A=[2&A[0],i.value]),A[0]){case 0:case 1:i=A;break;case 4:return o.label++,{value:A[1],done:!1};case 5:o.label++,t=A[1],A=[0];continue;case 7:A=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=0<i.length&&i[i.length-1])||6!==A[0]&&2!==A[0])){o=0;continue}if(3===A[0]&&(!i||A[1]>i[0]&&A[1]<i[3]))o.label=A[1];else if(6===A[0]&&o.label<i[1])o.label=i[1],i=A;else{if(!(i&&o.label<i[2])){i[2]&&o.ops.pop(),o.trys.pop();continue}o.label=i[2],o.ops.push(A)}}A=I.call(g,o)}catch(e){A=[6,e],t=0}finally{C=i=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}([A,e])}}var C,t,i,e,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return e={next:A(0),throw:A(1),return:A(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e}function r(g){var I="function"==typeof Symbol&&g[Symbol.iterator],A=0;return I?I.call(g):{next:function(){return g&&A>=g.length&&(g=void 0),{value:g&&g[A++],done:!g}}}}function c(g,I){var A="function"==typeof Symbol&&g[Symbol.iterator];if(!A)return g;g=A.call(g);var C,t=[];try{for(;(void 0===I||0<I--)&&!(C=g.next()).done;)t.push(C.value)}catch(e){var i={error:e}}finally{try{C&&!C.done&&(A=g.return)&&A.call(g)}finally{if(i)throw i.error}}return t}function a(){for(var g=[],I=0;I<arguments.length;I++)g=g.concat(c(arguments[I]));return g}var d="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function h(g){return g&&g.__esModule&&Object.prototype.hasOwnProperty.call(g,"default")?g.default:g}function m(g,I){return g(I={exports:{}},I.exports),I.exports}var Z=m((function(g,I){Object.defineProperty(I,"__esModule",{value:!0}),I.constants={O_RDONLY:0,O_WRONLY:1,O_RDWR:2,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:64,O_EXCL:128,O_NOCTTY:256,O_TRUNC:512,O_APPEND:1024,O_DIRECTORY:65536,O_NOATIME:262144,O_NOFOLLOW:131072,O_SYNC:1052672,O_DIRECT:16384,O_NONBLOCK:2048,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_FS_SYMLINK_DIR:1,UV_FS_SYMLINK_JUNCTION:2,UV_FS_COPYFILE_EXCL:1,UV_FS_COPYFILE_FICLONE:2,UV_FS_COPYFILE_FICLONE_FORCE:4,COPYFILE_EXCL:1,COPYFILE_FICLONE:2,COPYFILE_FICLONE_FORCE:4}}));h(Z);var u=m((function(g,I){I.default="function"==typeof BigInt?BigInt:function(){throw Error("BigInt is not supported in this environment.")}})),G=m((function(g,I){Object.defineProperty(I,"__esModule",{value:!0});var A=Z.constants.S_IFMT,C=Z.constants.S_IFDIR,t=Z.constants.S_IFREG,i=Z.constants.S_IFBLK,e=Z.constants.S_IFCHR,o=Z.constants.S_IFLNK,n=Z.constants.S_IFIFO,s=Z.constants.S_IFSOCK;g=function(){function g(){}return g.build=function(I,A){void 0===A&&(A=!1);var C=new g,t=I.gid,i=I.atime,e=I.mtime,o=I.ctime;return A=A?u.default:function(g){return g},C.uid=A(I.uid),C.gid=A(t),C.rdev=A(0),C.blksize=A(4096),C.ino=A(I.ino),C.size=A(I.getSize()),C.blocks=A(1),C.atime=i,C.mtime=e,C.ctime=o,C.birthtime=o,C.atimeMs=A(i.getTime()),C.mtimeMs=A(e.getTime()),t=A(o.getTime()),C.ctimeMs=t,C.birthtimeMs=t,C.dev=A(0),C.mode=A(I.mode),C.nlink=A(I.nlink),C},g.prototype._checkModeProperty=function(g){return(Number(this.mode)&A)===g},g.prototype.isDirectory=function(){return this._checkModeProperty(C)},g.prototype.isFile=function(){return this._checkModeProperty(t)},g.prototype.isBlockDevice=function(){return this._checkModeProperty(i)},g.prototype.isCharacterDevice=function(){return this._checkModeProperty(e)},g.prototype.isSymbolicLink=function(){return this._checkModeProperty(o)},g.prototype.isFIFO=function(){return this._checkModeProperty(n)},g.prototype.isSocket=function(){return this._checkModeProperty(s)},g}(),I.Stats=g,I.default=g}));h(G);var b="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},p=[],B=[],y="undefined"!=typeof Uint8Array?Uint8Array:Array,w=!1;function W(){w=!0;for(var g=0;64>g;++g)p[g]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[g],B["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(g)]=g;B[45]=62,B[95]=63}function S(g,I,A){for(var C=[],t=I;t<A;t+=3)I=(g[t]<<16)+(g[t+1]<<8)+g[t+2],C.push(p[I>>18&63]+p[I>>12&63]+p[I>>6&63]+p[63&I]);return C.join("")}function K(g){w||W();for(var I=g.length,A=I%3,C="",t=[],i=0,e=I-A;i<e;i+=16383)t.push(S(g,i,i+16383>e?e:i+16383));return 1===A?(g=g[I-1],C+=p[g>>2],C+=p[g<<4&63],C+="=="):2===A&&(g=(g[I-2]<<8)+g[I-1],C+=p[g>>10],C+=p[g>>4&63],C+=p[g<<2&63],C+="="),t.push(C),t.join("")}function f(g,I,A,C,t){var i=8*t-C-1,e=(1<<i)-1,o=e>>1,n=-7,s=A?-1:1,l=g[I+(t=A?t-1:0)];for(t+=s,A=l&(1<<-n)-1,l>>=-n,n+=i;0<n;A=256*A+g[I+t],t+=s,n-=8);for(i=A&(1<<-n)-1,A>>=-n,n+=C;0<n;i=256*i+g[I+t],t+=s,n-=8);if(0===A)A=1-o;else{if(A===e)return i?NaN:1/0*(l?-1:1);i+=Math.pow(2,C),A-=o}return(l?-1:1)*i*Math.pow(2,A-C)}function Y(g,I,A,C,t,i){var e,o=8*i-t-1,n=(1<<o)-1,s=n>>1,l=23===t?Math.pow(2,-24)-Math.pow(2,-77):0;i=C?0:i-1;var r=C?1:-1,c=0>I||0===I&&0>1/I?1:0;for(I=Math.abs(I),isNaN(I)||I===1/0?(I=isNaN(I)?1:0,C=n):(C=Math.floor(Math.log(I)/Math.LN2),1>I*(e=Math.pow(2,-C))&&(C--,e*=2),2<=(I=1<=C+s?I+l/e:I+l*Math.pow(2,1-s))*e&&(C++,e/=2),C+s>=n?(I=0,C=n):1<=C+s?(I=(I*e-1)*Math.pow(2,t),C+=s):(I=I*Math.pow(2,s-1)*Math.pow(2,t),C=0));8<=t;g[A+i]=255&I,i+=r,I/=256,t-=8);for(C=C<<t|I,o+=t;0<o;g[A+i]=255&C,i+=r,C/=256,o-=8);g[A+i-r]|=128*c}var X={}.toString,V=Array.isArray||function(g){return"[object Array]"==X.call(g)};Q.TYPED_ARRAY_SUPPORT=void 0===b.TYPED_ARRAY_SUPPORT||b.TYPED_ARRAY_SUPPORT;var O=Q.TYPED_ARRAY_SUPPORT?2147483647:1073741823;function R(g,I){if((Q.TYPED_ARRAY_SUPPORT?2147483647:1073741823)<I)throw new RangeError("Invalid typed array length");return Q.TYPED_ARRAY_SUPPORT?(g=new Uint8Array(I)).__proto__=Q.prototype:(null===g&&(g=new Q(I)),g.length=I),g}function Q(g,I,A){if(!(Q.TYPED_ARRAY_SUPPORT||this instanceof Q))return new Q(g,I,A);if("number"==typeof g){if("string"==typeof I)throw Error("If encoding is specified then the first argument must be a string");return J(this,g)}return H(this,g,I,A)}function H(g,I,A,C){if("number"==typeof I)throw new TypeError('"value" argument must not be a number');if("undefined"!=typeof ArrayBuffer&&I instanceof ArrayBuffer){if(I.byteLength,0>A||I.byteLength<A)throw new RangeError("'offset' is out of bounds");if(I.byteLength<A+(C||0))throw new RangeError("'length' is out of bounds");return I=void 0===A&&void 0===C?new Uint8Array(I):void 0===C?new Uint8Array(I,A):new Uint8Array(I,A,C),Q.TYPED_ARRAY_SUPPORT?(g=I).__proto__=Q.prototype:g=v(g,I),g}if("string"==typeof I){if(C=g,"string"==typeof(g=A)&&""!==g||(g="utf8"),!Q.isEncoding(g))throw new TypeError('"encoding" must be a valid string encoding');return(I=(C=R(C,A=0|N(I,g))).write(I,g))!==A&&(C=C.slice(0,I)),C}return function(g,I){if(M(I)){var A=0|D(I.length);return 0===(g=R(g,A)).length||I.copy(g,0,0,A),g}if(I){if("undefined"!=typeof ArrayBuffer&&I.buffer instanceof ArrayBuffer||"length"in I)return(A="number"!=typeof I.length)||(A=(A=I.length)!=A),A?R(g,0):v(g,I);if("Buffer"===I.type&&V(I.data))return v(g,I.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(g,I)}function k(g){if("number"!=typeof g)throw new TypeError('"size" argument must be a number');if(0>g)throw new RangeError('"size" argument must not be negative')}function J(g,I){if(k(I),g=R(g,0>I?0:0|D(I)),!Q.TYPED_ARRAY_SUPPORT)for(var A=0;A<I;++A)g[A]=0;return g}function v(g,I){var A=0>I.length?0:0|D(I.length);g=R(g,A);for(var C=0;C<A;C+=1)g[C]=255&I[C];return g}function D(g){if(g>=(Q.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(Q.TYPED_ARRAY_SUPPORT?2147483647:1073741823).toString(16)+" bytes");return 0|g}function M(g){return!(null==g||!g._isBuffer)}function N(g,I){if(M(g))return g.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(g)||g instanceof ArrayBuffer))return g.byteLength;"string"!=typeof g&&(g=""+g);var A=g.length;if(0===A)return 0;for(var C=!1;;)switch(I){case"ascii":case"latin1":case"binary":return A;case"utf8":case"utf-8":case void 0:return gg(g).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*A;case"hex":return A>>>1;case"base64":return Ag(g).length;default:if(C)return gg(g).length;I=(""+I).toLowerCase(),C=!0}}function E(g,I,A){var C=!1;if((void 0===I||0>I)&&(I=0),I>this.length)return"";if((void 0===A||A>this.length)&&(A=this.length),0>=A)return"";if((A>>>=0)<=(I>>>=0))return"";for(g||(g="utf8");;)switch(g){case"hex":for(g=I,I=A,A=this.length,(!g||0>g)&&(g=0),(!I||0>I||I>A)&&(I=A),C="",A=g;A<I;++A)C=(g=C)+(C=16>(C=this[A])?"0"+C.toString(16):C.toString(16));return C;case"utf8":case"utf-8":return z(this,I,A);case"ascii":for(g="",A=Math.min(this.length,A);I<A;++I)g+=String.fromCharCode(127&this[I]);return g;case"latin1":case"binary":for(g="",A=Math.min(this.length,A);I<A;++I)g+=String.fromCharCode(this[I]);return g;case"base64":return I=0===I&&A===this.length?K(this):K(this.slice(I,A));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(I=this.slice(I,A),A="",g=0;g<I.length;g+=2)A+=String.fromCharCode(I[g]+256*I[g+1]);return A;default:if(C)throw new TypeError("Unknown encoding: "+g);g=(g+"").toLowerCase(),C=!0}}function F(g,I,A){var C=g[I];g[I]=g[A],g[A]=C}function L(g,I,A,C,t){if(0===g.length)return-1;if("string"==typeof A?(C=A,A=0):2147483647<A?A=2147483647:-2147483648>A&&(A=-2147483648),A=+A,isNaN(A)&&(A=t?0:g.length-1),0>A&&(A=g.length+A),A>=g.length){if(t)return-1;A=g.length-1}else if(0>A){if(!t)return-1;A=0}if("string"==typeof I&&(I=Q.from(I,C)),M(I))return 0===I.length?-1:T(g,I,A,C,t);if("number"==typeof I)return I&=255,Q.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?t?Uint8Array.prototype.indexOf.call(g,I,A):Uint8Array.prototype.lastIndexOf.call(g,I,A):T(g,[I],A,C,t);throw new TypeError("val must be string, number or Buffer")}function T(g,I,A,C,t){function i(g,I){return 1===e?g[I]:g.readUInt16BE(I*e)}var e=1,o=g.length,n=I.length;if(void 0!==C&&("ucs2"===(C=String(C).toLowerCase())||"ucs-2"===C||"utf16le"===C||"utf-16le"===C)){if(2>g.length||2>I.length)return-1;e=2,o/=2,n/=2,A/=2}if(t)for(C=-1;A<o;A++)if(i(g,A)===i(I,-1===C?0:A-C)){if(-1===C&&(C=A),A-C+1===n)return C*e}else-1!==C&&(A-=A-C),C=-1;else for(A+n>o&&(A=o-n);0<=A;A--){for(o=!0,C=0;C<n;C++)if(i(g,A+C)!==i(I,C)){o=!1;break}if(o)return A}return-1}function z(g,I,A){A=Math.min(g.length,A);for(var C=[];I<A;){var t=g[I],i=null,e=239<t?4:223<t?3:191<t?2:1;if(I+e<=A)switch(e){case 1:128>t&&(i=t);break;case 2:var o=g[I+1];128==(192&o)&&(127<(t=(31&t)<<6|63&o)&&(i=t));break;case 3:o=g[I+1];var n=g[I+2];128==(192&o)&&128==(192&n)&&(2047<(t=(15&t)<<12|(63&o)<<6|63&n)&&(55296>t||57343<t)&&(i=t));break;case 4:o=g[I+1],n=g[I+2];var s=g[I+3];128==(192&o)&&128==(192&n)&&128==(192&s)&&(65535<(t=(15&t)<<18|(63&o)<<12|(63&n)<<6|63&s)&&1114112>t&&(i=t))}null===i?(i=65533,e=1):65535<i&&(i-=65536,C.push(i>>>10&1023|55296),i=56320|1023&i),C.push(i),I+=e}if((g=C.length)<=P)C=String.fromCharCode.apply(String,C);else{for(A="",I=0;I<g;)A+=String.fromCharCode.apply(String,C.slice(I,I+=P));C=A}return C}Q.poolSize=8192,Q._augment=function(g){return g.__proto__=Q.prototype,g},Q.from=function(g,I,A){return H(null,g,I,A)},Q.TYPED_ARRAY_SUPPORT&&(Q.prototype.__proto__=Uint8Array.prototype,Q.__proto__=Uint8Array),Q.alloc=function(g,I,A){return k(g),g=0>=g?R(null,g):void 0!==I?"string"==typeof A?R(null,g).fill(I,A):R(null,g).fill(I):R(null,g)},Q.allocUnsafe=function(g){return J(null,g)},Q.allocUnsafeSlow=function(g){return J(null,g)},Q.isBuffer=tg,Q.compare=function(g,I){if(!M(g)||!M(I))throw new TypeError("Arguments must be Buffers");if(g===I)return 0;for(var A=g.length,C=I.length,t=0,i=Math.min(A,C);t<i;++t)if(g[t]!==I[t]){A=g[t],C=I[t];break}return A<C?-1:C<A?1:0},Q.isEncoding=function(g){switch(String(g).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Q.concat=function(g,I){if(!V(g))throw new TypeError('"list" argument must be an Array of Buffers');if(0===g.length)return Q.alloc(0);var A;if(void 0===I)for(A=I=0;A<g.length;++A)I+=g[A].length;I=Q.allocUnsafe(I);var C=0;for(A=0;A<g.length;++A){var t=g[A];if(!M(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(I,C),C+=t.length}return I},Q.byteLength=N,Q.prototype._isBuffer=!0,Q.prototype.swap16=function(){var g=this.length;if(g%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var I=0;I<g;I+=2)F(this,I,I+1);return this},Q.prototype.swap32=function(){var g=this.length;if(g%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var I=0;I<g;I+=4)F(this,I,I+3),F(this,I+1,I+2);return this},Q.prototype.swap64=function(){var g=this.length;if(g%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var I=0;I<g;I+=8)F(this,I,I+7),F(this,I+1,I+6),F(this,I+2,I+5),F(this,I+3,I+4);return this},Q.prototype.toString=function(){var g=0|this.length;return 0===g?"":0===arguments.length?z(this,0,g):E.apply(this,arguments)},Q.prototype.equals=function(g){if(!M(g))throw new TypeError("Argument must be a Buffer");return this===g||0===Q.compare(this,g)},Q.prototype.inspect=function(){var g="";return 0<this.length&&(g=this.toString("hex",0,50).match(/.{2}/g).join(" "),50<this.length&&(g+=" ... ")),"<Buffer "+g+">"},Q.prototype.compare=function(g,I,A,C,t){if(!M(g))throw new TypeError("Argument must be a Buffer");if(void 0===I&&(I=0),void 0===A&&(A=g?g.length:0),void 0===C&&(C=0),void 0===t&&(t=this.length),0>I||A>g.length||0>C||t>this.length)throw new RangeError("out of range index");if(C>=t&&I>=A)return 0;if(C>=t)return-1;if(I>=A)return 1;if(this===g)return 0;var i=(t>>>=0)-(C>>>=0),e=(A>>>=0)-(I>>>=0),o=Math.min(i,e);for(C=this.slice(C,t),g=g.slice(I,A),I=0;I<o;++I)if(C[I]!==g[I]){i=C[I],e=g[I];break}return i<e?-1:e<i?1:0},Q.prototype.includes=function(g,I,A){return-1!==this.indexOf(g,I,A)},Q.prototype.indexOf=function(g,I,A){return L(this,g,I,A,!0)},Q.prototype.lastIndexOf=function(g,I,A){return L(this,g,I,A,!1)},Q.prototype.write=function(g,I,A,C){if(void 0===I)C="utf8",A=this.length,I=0;else if(void 0===A&&"string"==typeof I)C=I,A=this.length,I=0;else{if(!isFinite(I))throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");I|=0,isFinite(A)?(A|=0,void 0===C&&(C="utf8")):(C=A,A=void 0)}var t=this.length-I;if((void 0===A||A>t)&&(A=t),0<g.length&&(0>A||0>I)||I>this.length)throw new RangeError("Attempt to write outside buffer bounds");for(C||(C="utf8"),t=!1;;)switch(C){case"hex":g:{if(I=Number(I)||0,C=this.length-I,A?(A=Number(A))>C&&(A=C):A=C,(C=g.length)%2!=0)throw new TypeError("Invalid hex string");for(A>C/2&&(A=C/2),C=0;C<A;++C){if(t=parseInt(g.substr(2*C,2),16),isNaN(t)){g=C;break g}this[I+C]=t}g=C}return g;case"utf8":case"utf-8":return Cg(gg(g,this.length-I),this,I,A);case"ascii":return Cg(Ig(g),this,I,A);case"latin1":case"binary":return Cg(Ig(g),this,I,A);case"base64":return Cg(Ag(g),this,I,A);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":C=g,t=this.length-I;for(var i=[],e=0;e<C.length&&!(0>(t-=2));++e){var o=C.charCodeAt(e);g=o>>8,o%=256,i.push(o),i.push(g)}return Cg(i,this,I,A);default:if(t)throw new TypeError("Unknown encoding: "+C);C=(""+C).toLowerCase(),t=!0}},Q.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var P=4096;function U(g,I,A){if(g%1!=0||0>g)throw new RangeError("offset is not uint");if(g+I>A)throw new RangeError("Trying to access beyond buffer length")}function x(g,I,A,C,t,i){if(!M(g))throw new TypeError('"buffer" argument must be a Buffer instance');if(I>t||I<i)throw new RangeError('"value" argument is out of bounds');if(A+C>g.length)throw new RangeError("Index out of range")}function j(g,I,A,C){0>I&&(I=65535+I+1);for(var t=0,i=Math.min(g.length-A,2);t<i;++t)g[A+t]=(I&255<<8*(C?t:1-t))>>>8*(C?t:1-t)}function _(g,I,A,C){0>I&&(I=4294967295+I+1);for(var t=0,i=Math.min(g.length-A,4);t<i;++t)g[A+t]=I>>>8*(C?t:3-t)&255}function $(g,I,A,C){if(A+C>g.length)throw new RangeError("Index out of range");if(0>A)throw new RangeError("Index out of range")}Q.prototype.slice=function(g,I){var A=this.length;if(0>(g=~~g)?0>(g+=A)&&(g=0):g>A&&(g=A),0>(I=void 0===I?A:~~I)?0>(I+=A)&&(I=0):I>A&&(I=A),I<g&&(I=g),Q.TYPED_ARRAY_SUPPORT)(I=this.subarray(g,I)).__proto__=Q.prototype;else{I=new Q(A=I-g,void 0);for(var C=0;C<A;++C)I[C]=this[C+g]}return I},Q.prototype.readUIntLE=function(g,I,A){g|=0,I|=0,A||U(g,I,this.length),A=this[g];for(var C=1,t=0;++t<I&&(C*=256);)A+=this[g+t]*C;return A},Q.prototype.readUIntBE=function(g,I,A){g|=0,I|=0,A||U(g,I,this.length),A=this[g+--I];for(var C=1;0<I&&(C*=256);)A+=this[g+--I]*C;return A},Q.prototype.readUInt8=function(g,I){return I||U(g,1,this.length),this[g]},Q.prototype.readUInt16LE=function(g,I){return I||U(g,2,this.length),this[g]|this[g+1]<<8},Q.prototype.readUInt16BE=function(g,I){return I||U(g,2,this.length),this[g]<<8|this[g+1]},Q.prototype.readUInt32LE=function(g,I){return I||U(g,4,this.length),(this[g]|this[g+1]<<8|this[g+2]<<16)+16777216*this[g+3]},Q.prototype.readUInt32BE=function(g,I){return I||U(g,4,this.length),16777216*this[g]+(this[g+1]<<16|this[g+2]<<8|this[g+3])},Q.prototype.readIntLE=function(g,I,A){g|=0,I|=0,A||U(g,I,this.length),A=this[g];for(var C=1,t=0;++t<I&&(C*=256);)A+=this[g+t]*C;return A>=128*C&&(A-=Math.pow(2,8*I)),A},Q.prototype.readIntBE=function(g,I,A){g|=0,I|=0,A||U(g,I,this.length),A=I;for(var C=1,t=this[g+--A];0<A&&(C*=256);)t+=this[g+--A]*C;return t>=128*C&&(t-=Math.pow(2,8*I)),t},Q.prototype.readInt8=function(g,I){return I||U(g,1,this.length),128&this[g]?-1*(255-this[g]+1):this[g]},Q.prototype.readInt16LE=function(g,I){return I||U(g,2,this.length),32768&(g=this[g]|this[g+1]<<8)?4294901760|g:g},Q.prototype.readInt16BE=function(g,I){return I||U(g,2,this.length),32768&(g=this[g+1]|this[g]<<8)?4294901760|g:g},Q.prototype.readInt32LE=function(g,I){return I||U(g,4,this.length),this[g]|this[g+1]<<8|this[g+2]<<16|this[g+3]<<24},Q.prototype.readInt32BE=function(g,I){return I||U(g,4,this.length),this[g]<<24|this[g+1]<<16|this[g+2]<<8|this[g+3]},Q.prototype.readFloatLE=function(g,I){return I||U(g,4,this.length),f(this,g,!0,23,4)},Q.prototype.readFloatBE=function(g,I){return I||U(g,4,this.length),f(this,g,!1,23,4)},Q.prototype.readDoubleLE=function(g,I){return I||U(g,8,this.length),f(this,g,!0,52,8)},Q.prototype.readDoubleBE=function(g,I){return I||U(g,8,this.length),f(this,g,!1,52,8)},Q.prototype.writeUIntLE=function(g,I,A,C){g=+g,I|=0,A|=0,C||x(this,g,I,A,Math.pow(2,8*A)-1,0),C=1;var t=0;for(this[I]=255&g;++t<A&&(C*=256);)this[I+t]=g/C&255;return I+A},Q.prototype.writeUIntBE=function(g,I,A,C){g=+g,I|=0,A|=0,C||x(this,g,I,A,Math.pow(2,8*A)-1,0);var t=1;for(this[I+(C=A-1)]=255&g;0<=--C&&(t*=256);)this[I+C]=g/t&255;return I+A},Q.prototype.writeUInt8=function(g,I,A){return g=+g,I|=0,A||x(this,g,I,1,255,0),Q.TYPED_ARRAY_SUPPORT||(g=Math.floor(g)),this[I]=255&g,I+1},Q.prototype.writeUInt16LE=function(g,I,A){return g=+g,I|=0,A||x(this,g,I,2,65535,0),Q.TYPED_ARRAY_SUPPORT?(this[I]=255&g,this[I+1]=g>>>8):j(this,g,I,!0),I+2},Q.prototype.writeUInt16BE=function(g,I,A){return g=+g,I|=0,A||x(this,g,I,2,65535,0),Q.TYPED_ARRAY_SUPPORT?(this[I]=g>>>8,this[I+1]=255&g):j(this,g,I,!1),I+2},Q.prototype.writeUInt32LE=function(g,I,A){return g=+g,I|=0,A||x(this,g,I,4,4294967295,0),Q.TYPED_ARRAY_SUPPORT?(this[I+3]=g>>>24,this[I+2]=g>>>16,this[I+1]=g>>>8,this[I]=255&g):_(this,g,I,!0),I+4},Q.prototype.writeUInt32BE=function(g,I,A){return g=+g,I|=0,A||x(this,g,I,4,4294967295,0),Q.TYPED_ARRAY_SUPPORT?(this[I]=g>>>24,this[I+1]=g>>>16,this[I+2]=g>>>8,this[I+3]=255&g):_(this,g,I,!1),I+4},Q.prototype.writeIntLE=function(g,I,A,C){g=+g,I|=0,C||x(this,g,I,A,(C=Math.pow(2,8*A-1))-1,-C),C=0;var t=1,i=0;for(this[I]=255&g;++C<A&&(t*=256);)0>g&&0===i&&0!==this[I+C-1]&&(i=1),this[I+C]=(g/t>>0)-i&255;return I+A},Q.prototype.writeIntBE=function(g,I,A,C){g=+g,I|=0,C||x(this,g,I,A,(C=Math.pow(2,8*A-1))-1,-C);var t=1,i=0;for(this[I+(C=A-1)]=255&g;0<=--C&&(t*=256);)0>g&&0===i&&0!==this[I+C+1]&&(i=1),this[I+C]=(g/t>>0)-i&255;return I+A},Q.prototype.writeInt8=function(g,I,A){return g=+g,I|=0,A||x(this,g,I,1,127,-128),Q.TYPED_ARRAY_SUPPORT||(g=Math.floor(g)),0>g&&(g=255+g+1),this[I]=255&g,I+1},Q.prototype.writeInt16LE=function(g,I,A){return g=+g,I|=0,A||x(this,g,I,2,32767,-32768),Q.TYPED_ARRAY_SUPPORT?(this[I]=255&g,this[I+1]=g>>>8):j(this,g,I,!0),I+2},Q.prototype.writeInt16BE=function(g,I,A){return g=+g,I|=0,A||x(this,g,I,2,32767,-32768),Q.TYPED_ARRAY_SUPPORT?(this[I]=g>>>8,this[I+1]=255&g):j(this,g,I,!1),I+2},Q.prototype.writeInt32LE=function(g,I,A){return g=+g,I|=0,A||x(this,g,I,4,2147483647,-2147483648),Q.TYPED_ARRAY_SUPPORT?(this[I]=255&g,this[I+1]=g>>>8,this[I+2]=g>>>16,this[I+3]=g>>>24):_(this,g,I,!0),I+4},Q.prototype.writeInt32BE=function(g,I,A){return g=+g,I|=0,A||x(this,g,I,4,2147483647,-2147483648),0>g&&(g=4294967295+g+1),Q.TYPED_ARRAY_SUPPORT?(this[I]=g>>>24,this[I+1]=g>>>16,this[I+2]=g>>>8,this[I+3]=255&g):_(this,g,I,!1),I+4},Q.prototype.writeFloatLE=function(g,I,A){return A||$(this,0,I,4),Y(this,g,I,!0,23,4),I+4},Q.prototype.writeFloatBE=function(g,I,A){return A||$(this,0,I,4),Y(this,g,I,!1,23,4),I+4},Q.prototype.writeDoubleLE=function(g,I,A){return A||$(this,0,I,8),Y(this,g,I,!0,52,8),I+8},Q.prototype.writeDoubleBE=function(g,I,A){return A||$(this,0,I,8),Y(this,g,I,!1,52,8),I+8},Q.prototype.copy=function(g,I,A,C){if(A||(A=0),C||0===C||(C=this.length),I>=g.length&&(I=g.length),I||(I=0),0<C&&C<A&&(C=A),C===A||0===g.length||0===this.length)return 0;if(0>I)throw new RangeError("targetStart out of bounds");if(0>A||A>=this.length)throw new RangeError("sourceStart out of bounds");if(0>C)throw new RangeError("sourceEnd out of bounds");C>this.length&&(C=this.length),g.length-I<C-A&&(C=g.length-I+A);var t=C-A;if(this===g&&A<I&&I<C)for(C=t-1;0<=C;--C)g[C+I]=this[C+A];else if(1e3>t||!Q.TYPED_ARRAY_SUPPORT)for(C=0;C<t;++C)g[C+I]=this[C+A];else Uint8Array.prototype.set.call(g,this.subarray(A,A+t),I);return t},Q.prototype.fill=function(g,I,A,C){if("string"==typeof g){if("string"==typeof I?(C=I,I=0,A=this.length):"string"==typeof A&&(C=A,A=this.length),1===g.length){var t=g.charCodeAt(0);256>t&&(g=t)}if(void 0!==C&&"string"!=typeof C)throw new TypeError("encoding must be a string");if("string"==typeof C&&!Q.isEncoding(C))throw new TypeError("Unknown encoding: "+C)}else"number"==typeof g&&(g&=255);if(0>I||this.length<I||this.length<A)throw new RangeError("Out of range index");if(A<=I)return this;if(I>>>=0,A=void 0===A?this.length:A>>>0,g||(g=0),"number"==typeof g)for(C=I;C<A;++C)this[C]=g;else for(t=(g=M(g)?g:gg(new Q(g,C).toString())).length,C=0;C<A-I;++C)this[C+I]=g[C%t];return this};var q=/[^+\/0-9A-Za-z-_]/g;function gg(g,I){I=I||1/0;for(var A,C=g.length,t=null,i=[],e=0;e<C;++e){if(55295<(A=g.charCodeAt(e))&&57344>A){if(!t){if(56319<A){-1<(I-=3)&&i.push(239,191,189);continue}if(e+1===C){-1<(I-=3)&&i.push(239,191,189);continue}t=A;continue}if(56320>A){-1<(I-=3)&&i.push(239,191,189),t=A;continue}A=65536+(t-55296<<10|A-56320)}else t&&-1<(I-=3)&&i.push(239,191,189);if(t=null,128>A){if(0>--I)break;i.push(A)}else if(2048>A){if(0>(I-=2))break;i.push(A>>6|192,63&A|128)}else if(65536>A){if(0>(I-=3))break;i.push(A>>12|224,A>>6&63|128,63&A|128)}else{if(!(1114112>A))throw Error("Invalid code point");if(0>(I-=4))break;i.push(A>>18|240,A>>12&63|128,A>>6&63|128,63&A|128)}}return i}function Ig(g){for(var I=[],A=0;A<g.length;++A)I.push(255&g.charCodeAt(A));return I}function Ag(g){if(2>(g=(g.trim?g.trim():g.replace(/^\s+|\s+$/g,"")).replace(q,"")).length)g="";else for(;g.length%4!=0;)g+="=";w||W();var I=g.length;if(0<I%4)throw Error("Invalid string. Length must be a multiple of 4");var A="="===g[I-2]?2:"="===g[I-1]?1:0,C=new y(3*I/4-A),t=0<A?I-4:I,i=0;for(I=0;I<t;I+=4){var e=B[g.charCodeAt(I)]<<18|B[g.charCodeAt(I+1)]<<12|B[g.charCodeAt(I+2)]<<6|B[g.charCodeAt(I+3)];C[i++]=e>>16&255,C[i++]=e>>8&255,C[i++]=255&e}return 2===A?(e=B[g.charCodeAt(I)]<<2|B[g.charCodeAt(I+1)]>>4,C[i++]=255&e):1===A&&(e=B[g.charCodeAt(I)]<<10|B[g.charCodeAt(I+1)]<<4|B[g.charCodeAt(I+2)]>>2,C[i++]=e>>8&255,C[i++]=255&e),C}function Cg(g,I,A,C){for(var t=0;t<C&&!(t+A>=I.length||t>=g.length);++t)I[t+A]=g[t];return t}function tg(g){return null!=g&&(!!g._isBuffer||ig(g)||"function"==typeof g.readFloatLE&&"function"==typeof g.slice&&ig(g.slice(0,0)))}function ig(g){return!!g.constructor&&"function"==typeof g.constructor.isBuffer&&g.constructor.isBuffer(g)}var eg=Object.freeze({__proto__:null,INSPECT_MAX_BYTES:50,kMaxLength:O,Buffer:Q,SlowBuffer:function(g){return+g!=g&&(g=0),Q.alloc(+g)},isBuffer:tg}),og=m((function(g,I){function A(g){for(var I=[],A=1;A<arguments.length;A++)I[A-1]=arguments[A];return new(eg.Buffer.bind.apply(eg.Buffer,C([void 0,g],I)))}var C=d&&d.__spreadArrays||function(){for(var g=0,I=0,A=arguments.length;I<A;I++)g+=arguments[I].length;g=Array(g);var C=0;for(I=0;I<A;I++)for(var t=arguments[I],i=0,e=t.length;i<e;i++,C++)g[C]=t[i];return g};Object.defineProperty(I,"__esModule",{value:!0}),I.Buffer=eg.Buffer,I.bufferAllocUnsafe=eg.Buffer.allocUnsafe||A,I.bufferFrom=eg.Buffer.from||A}));function ng(){throw Error("setTimeout has not been defined")}function sg(){throw Error("clearTimeout has not been defined")}h(og);var lg=ng,rg=sg;function cg(g){if(lg===setTimeout)return setTimeout(g,0);if((lg===ng||!lg)&&setTimeout)return lg=setTimeout,setTimeout(g,0);try{return lg(g,0)}catch(I){try{return lg.call(null,g,0)}catch(A){return lg.call(this,g,0)}}}"function"==typeof b.setTimeout&&(lg=setTimeout),"function"==typeof b.clearTimeout&&(rg=clearTimeout);var ag,dg=[],hg=!1,mg=-1;function Zg(){hg&&ag&&(hg=!1,ag.length?dg=ag.concat(dg):mg=-1,dg.length&&ug())}function ug(){if(!hg){var g=cg(Zg);hg=!0;for(var I=dg.length;I;){for(ag=dg,dg=[];++mg<I;)ag&&ag[mg].run();mg=-1,I=dg.length}ag=null,hg=!1,function(g){if(rg===clearTimeout)return clearTimeout(g);if((rg===sg||!rg)&&clearTimeout)return rg=clearTimeout,clearTimeout(g);try{rg(g)}catch(I){try{return rg.call(null,g)}catch(A){return rg.call(this,g)}}}(g)}}function Gg(g){var I=Array(arguments.length-1);if(1<arguments.length)for(var A=1;A<arguments.length;A++)I[A-1]=arguments[A];dg.push(new bg(g,I)),1!==dg.length||hg||cg(ug)}function bg(g,I){this.fun=g,this.array=I}function pg(){}bg.prototype.run=function(){this.fun.apply(null,this.array)};var Bg=b.performance||{},yg=Bg.now||Bg.mozNow||Bg.msNow||Bg.oNow||Bg.webkitNow||function(){return(new Date).getTime()},wg=new Date,Wg={nextTick:Gg,title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:pg,addListener:pg,once:pg,off:pg,removeListener:pg,removeAllListeners:pg,emit:pg,binding:function(){throw Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(){throw Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(g){var I=.001*yg.call(Bg),A=Math.floor(I);return I=Math.floor(I%1*1e9),g&&(A-=g[0],0>(I-=g[1])&&(A--,I+=1e9)),[A,I]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-wg)/1e3}},Sg="function"==typeof Object.create?function(g,I){g.super_=I,g.prototype=Object.create(I.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}})}:function(g,I){function A(){}g.super_=I,A.prototype=I.prototype,g.prototype=new A,g.prototype.constructor=g},Kg=/%[sdj%]/g;function fg(g){if(!Eg(g)){for(var I=[],A=0;A<arguments.length;A++)I.push(Rg(arguments[A]));return I.join(" ")}A=1;var C=arguments,t=C.length;I=String(g).replace(Kg,(function(g){if("%%"===g)return"%";if(A>=t)return g;switch(g){case"%s":return String(C[A++]);case"%d":return Number(C[A++]);case"%j":try{return JSON.stringify(C[A++])}catch(I){return"[Circular]"}default:return g}}));for(var i=C[A];A<t;i=C[++A])I=null!==i&&Tg(i)?I+" "+Rg(i):I+" "+i;return I}function Yg(g,I){if(Fg(b.process))return function(){return Yg(g,I).apply(this,arguments)};if(!0===Wg.noDeprecation)return g;var A=!1;return function(){if(!A){if(Wg.throwDeprecation)throw Error(I);Wg.traceDeprecation?console.trace(I):console.error(I),A=!0}return g.apply(this,arguments)}}var Xg,Vg={};function Og(g){return Fg(Xg)&&(Xg=Wg.env.NODE_DEBUG||""),g=g.toUpperCase(),Vg[g]||(new RegExp("\\b"+g+"\\b","i").test(Xg)?Vg[g]=function(){var I=fg.apply(null,arguments);console.error("%s %d: %s",g,0,I)}:Vg[g]=function(){}),Vg[g]}function Rg(g,I){var A={seen:[],stylize:Hg};return 3<=arguments.length&&(A.depth=arguments[2]),4<=arguments.length&&(A.colors=arguments[3]),Mg(I)?A.showHidden=I:I&&qg(A,I),Fg(A.showHidden)&&(A.showHidden=!1),Fg(A.depth)&&(A.depth=2),Fg(A.colors)&&(A.colors=!1),Fg(A.customInspect)&&(A.customInspect=!0),A.colors&&(A.stylize=Qg),kg(A,g,A.depth)}function Qg(g,I){return(I=Rg.styles[I])?"["+Rg.colors[I][0]+"m"+g+"["+Rg.colors[I][1]+"m":g}function Hg(g){return g}function kg(g,I,A){if(g.customInspect&&I&&Ug(I.inspect)&&I.inspect!==Rg&&(!I.constructor||I.constructor.prototype!==I)){var C=I.inspect(A,g);return Eg(C)||(C=kg(g,C,A)),C}if(C=function(g,I){if(Fg(I))return g.stylize("undefined","undefined");if(Eg(I))return I="'"+JSON.stringify(I).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",g.stylize(I,"string");if(Ng(I))return g.stylize(""+I,"number");if(Mg(I))return g.stylize(""+I,"boolean");if(null===I)return g.stylize("null","null")}(g,I))return C;var t=Object.keys(I),i=function(g){var I={};return g.forEach((function(g){I[g]=!0})),I}(t);if(g.showHidden&&(t=Object.getOwnPropertyNames(I)),Pg(I)&&(0<=t.indexOf("message")||0<=t.indexOf("description")))return Jg(I);if(0===t.length){if(Ug(I))return g.stylize("[Function"+(I.name?": "+I.name:"")+"]","special");if(Lg(I))return g.stylize(RegExp.prototype.toString.call(I),"regexp");if(zg(I))return g.stylize(Date.prototype.toString.call(I),"date");if(Pg(I))return Jg(I)}C="";var e=!1,o=["{","}"];return Dg(I)&&(e=!0,o=["[","]"]),Ug(I)&&(C=" [Function"+(I.name?": "+I.name:"")+"]"),Lg(I)&&(C=" "+RegExp.prototype.toString.call(I)),zg(I)&&(C=" "+Date.prototype.toUTCString.call(I)),Pg(I)&&(C=" "+Jg(I)),0!==t.length||e&&0!=I.length?0>A?Lg(I)?g.stylize(RegExp.prototype.toString.call(I),"regexp"):g.stylize("[Object]","special"):(g.seen.push(I),t=e?function(g,I,A,C,t){for(var i=[],e=0,o=I.length;e<o;++e)Object.prototype.hasOwnProperty.call(I,String(e))?i.push(vg(g,I,A,C,String(e),!0)):i.push("");return t.forEach((function(t){t.match(/^\d+$/)||i.push(vg(g,I,A,C,t,!0))})),i}(g,I,A,i,t):t.map((function(C){return vg(g,I,A,i,C,e)})),g.seen.pop(),function(g,I,A){return 60<g.reduce((function(g,I){return I.indexOf("\n"),g+I.replace(/\u001b\[\d\d?m/g,"").length+1}),0)?A[0]+(""===I?"":I+"\n ")+" "+g.join(",\n  ")+" "+A[1]:A[0]+I+" "+g.join(", ")+" "+A[1]}(t,C,o)):o[0]+C+o[1]}function Jg(g){return"["+Error.prototype.toString.call(g)+"]"}function vg(g,I,A,C,t,i){var e,o;if((I=Object.getOwnPropertyDescriptor(I,t)||{value:I[t]}).get?o=I.set?g.stylize("[Getter/Setter]","special"):g.stylize("[Getter]","special"):I.set&&(o=g.stylize("[Setter]","special")),Object.prototype.hasOwnProperty.call(C,t)||(e="["+t+"]"),o||(0>g.seen.indexOf(I.value)?-1<(o=kg(g,I.value,null===A?null:A-1)).indexOf("\n")&&(o=i?o.split("\n").map((function(g){return"  "+g})).join("\n").substr(2):"\n"+o.split("\n").map((function(g){return"   "+g})).join("\n")):o=g.stylize("[Circular]","special")),Fg(e)){if(i&&t.match(/^\d+$/))return o;(e=JSON.stringify(""+t)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(e=e.substr(1,e.length-2),e=g.stylize(e,"name")):(e=e.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),e=g.stylize(e,"string"))}return e+": "+o}function Dg(g){return Array.isArray(g)}function Mg(g){return"boolean"==typeof g}function Ng(g){return"number"==typeof g}function Eg(g){return"string"==typeof g}function Fg(g){return void 0===g}function Lg(g){return Tg(g)&&"[object RegExp]"===Object.prototype.toString.call(g)}function Tg(g){return"object"==typeof g&&null!==g}function zg(g){return Tg(g)&&"[object Date]"===Object.prototype.toString.call(g)}function Pg(g){return Tg(g)&&("[object Error]"===Object.prototype.toString.call(g)||g instanceof Error)}function Ug(g){return"function"==typeof g}function xg(g){return null===g||"boolean"==typeof g||"number"==typeof g||"string"==typeof g||"symbol"==typeof g||void 0===g}function jg(g){return 10>g?"0"+g.toString(10):g.toString(10)}Rg.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},Rg.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var _g="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");function $g(){var g=new Date,I=[jg(g.getHours()),jg(g.getMinutes()),jg(g.getSeconds())].join(":");return[g.getDate(),_g[g.getMonth()],I].join(" ")}function qg(g,I){if(!I||!Tg(I))return g;for(var A=Object.keys(I),C=A.length;C--;)g[A[C]]=I[A[C]];return g}var gI={inherits:Sg,_extend:qg,log:function(){console.log("%s - %s",$g(),fg.apply(null,arguments))},isBuffer:function(g){return tg(g)},isPrimitive:xg,isFunction:Ug,isError:Pg,isDate:zg,isObject:Tg,isRegExp:Lg,isUndefined:Fg,isSymbol:function(g){return"symbol"==typeof g},isString:Eg,isNumber:Ng,isNullOrUndefined:function(g){return null==g},isNull:function(g){return null===g},isBoolean:Mg,isArray:Dg,inspect:Rg,deprecate:Yg,format:fg,debuglog:Og};function II(g,I){if(g===I)return 0;for(var A=g.length,C=I.length,t=0,i=Math.min(A,C);t<i;++t)if(g[t]!==I[t]){A=g[t],C=I[t];break}return A<C?-1:C<A?1:0}var AI,CI=Object.prototype.hasOwnProperty,tI=Object.keys||function(g){var I,A=[];for(I in g)CI.call(g,I)&&A.push(I);return A},iI=Array.prototype.slice;function eI(){return void 0!==AI?AI:AI="foo"===function(){}.name}function oI(g){return!tg(g)&&"function"==typeof b.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(g):!!g&&!!(g instanceof DataView||g.buffer&&g.buffer instanceof ArrayBuffer))}function nI(g,I){g||dI(g,!0,I,"==",hI)}var sI=/\s*function\s+([^\(\s]*)\s*/;function lI(g){if(Ug(g))return eI()?g.name:(g=g.toString().match(sI))&&g[1]}function rI(g){this.name="AssertionError",this.actual=g.actual,this.expected=g.expected,this.operator=g.operator,g.message?(this.message=g.message,this.generatedMessage=!1):(this.message=cI(aI(this.actual),128)+" "+this.operator+" "+cI(aI(this.expected),128),this.generatedMessage=!0);var I=g.stackStartFunction||dI;Error.captureStackTrace?Error.captureStackTrace(this,I):(g=Error()).stack&&(g=g.stack,I=lI(I),0<=(I=g.indexOf("\n"+I))&&(I=g.indexOf("\n",I+1),g=g.substring(I+1)),this.stack=g)}function cI(g,I){return"string"==typeof g?g.length<I?g:g.slice(0,I):g}function aI(g){return eI()||!Ug(g)?Rg(g):"[Function"+((g=lI(g))?": "+g:"")+"]"}function dI(g,I,A,C,t){throw new rI({message:A,actual:g,expected:I,operator:C,stackStartFunction:t})}function hI(g,I){g||dI(g,!0,I,"==",hI)}function mI(g,I,A,C){if(g===I)return!0;if(tg(g)&&tg(I))return 0===II(g,I);if(zg(g)&&zg(I))return g.getTime()===I.getTime();if(Lg(g)&&Lg(I))return g.source===I.source&&g.global===I.global&&g.multiline===I.multiline&&g.lastIndex===I.lastIndex&&g.ignoreCase===I.ignoreCase;if(null!==g&&"object"==typeof g||null!==I&&"object"==typeof I){if(!oI(g)||!oI(I)||Object.prototype.toString.call(g)!==Object.prototype.toString.call(I)||g instanceof Float32Array||g instanceof Float64Array){if(tg(g)!==tg(I))return!1;var t=(C=C||{actual:[],expected:[]}).actual.indexOf(g);return-1!==t&&t===C.expected.indexOf(I)||(C.actual.push(g),C.expected.push(I),function(g,I,A,C){if(null==g||null==I)return!1;if(xg(g)||xg(I))return g===I;if(A&&Object.getPrototypeOf(g)!==Object.getPrototypeOf(I))return!1;var t=ZI(g),i=ZI(I);if(t&&!i||!t&&i)return!1;if(t)return g=iI.call(g),I=iI.call(I),mI(g,I,A);t=tI(g);var e=tI(I);if(t.length!==e.length)return!1;for(t.sort(),e.sort(),i=t.length-1;0<=i;i--)if(t[i]!==e[i])return!1;for(i=t.length-1;0<=i;i--)if(e=t[i],!mI(g[e],I[e],A,C))return!1;return!0}(g,I,A,C))}return 0===II(new Uint8Array(g.buffer),new Uint8Array(I.buffer))}return A?g===I:g==I}function ZI(g){return"[object Arguments]"==Object.prototype.toString.call(g)}function uI(g,I){if(!g||!I)return!1;if("[object RegExp]"==Object.prototype.toString.call(I))return I.test(g);try{if(g instanceof I)return!0}catch(A){}return!Error.isPrototypeOf(I)&&!0===I.call({},g)}function GI(g,I,A,C){if("function"!=typeof I)throw new TypeError('"block" argument must be a function');"string"==typeof A&&(C=A,A=null);try{I()}catch(e){var t=e}I=t,C=(A&&A.name?" ("+A.name+").":".")+(C?" "+C:"."),g&&!I&&dI(I,A,"Missing expected exception"+C),t="string"==typeof C;var i=!g&&I&&!A;if((!g&&Pg(I)&&t&&uI(I,A)||i)&&dI(I,A,"Got unwanted exception"+C),g&&I&&A&&!uI(I,A)||!g&&I)throw I}nI.AssertionError=rI,Sg(rI,Error),nI.fail=dI,nI.ok=hI,nI.equal=function g(I,A,C){I!=A&&dI(I,A,C,"==",g)},nI.notEqual=function g(I,A,C){I==A&&dI(I,A,C,"!=",g)},nI.deepEqual=function g(I,A,C){mI(I,A,!1)||dI(I,A,C,"deepEqual",g)},nI.deepStrictEqual=function g(I,A,C){mI(I,A,!0)||dI(I,A,C,"deepStrictEqual",g)},nI.notDeepEqual=function g(I,A,C){mI(I,A,!1)&&dI(I,A,C,"notDeepEqual",g)},nI.notDeepStrictEqual=function g(I,A,C){mI(I,A,!0)&&dI(I,A,C,"notDeepStrictEqual",g)},nI.strictEqual=function g(I,A,C){I!==A&&dI(I,A,C,"===",g)},nI.notStrictEqual=function g(I,A,C){I===A&&dI(I,A,C,"!==",g)},nI.throws=function(g,I,A){GI(!0,g,I,A)},nI.doesNotThrow=function(g,I,A){GI(!1,g,I,A)},nI.ifError=function(g){if(g)throw g};var bI=m((function(g,I){function A(g){return function(g){function I(I){for(var A=[],t=1;t<arguments.length;t++)A[t-1]=arguments[t];return(A=g.call(this,C(I,A))||this).code=I,A[o]=I,A.name=g.prototype.name+" ["+A[o]+"]",A}return e(I,g),I}(g)}function C(g,I){nI.strictEqual(typeof g,"string");var A=n[g];if(nI(A,"An invalid error message key was used: "+g+"."),"function"==typeof A)g=A;else{if(g=gI.format,void 0===I||0===I.length)return A;I.unshift(A)}return String(g.apply(null,I))}function t(g,I){n[g]="function"==typeof I?I:String(I)}function i(g,I){if(nI(g,"expected is required"),nI("string"==typeof I,"thing is required"),Array.isArray(g)){var A=g.length;return nI(0<A,"At least one expected value needs to be specified"),g=g.map((function(g){return String(g)})),2<A?"one of "+I+" "+g.slice(0,A-1).join(", ")+", or "+g[A-1]:2===A?"one of "+I+" "+g[0]+" or "+g[1]:"of "+I+" "+g[0]}return"of "+I+" "+String(g)}var e=d&&d.__extends||function(){function g(I,A){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,I){g.__proto__=I}||function(g,I){for(var A in I)I.hasOwnProperty(A)&&(g[A]=I[A])})(I,A)}return function(I,A){function C(){this.constructor=I}g(I,A),I.prototype=null===A?Object.create(A):(C.prototype=A.prototype,new C)}}();Object.defineProperty(I,"__esModule",{value:!0});var o="undefined"==typeof Symbol?"_kCode":Symbol("code"),n={};g=function(g){function A(A){if("object"!=typeof A||null===A)throw new I.TypeError("ERR_INVALID_ARG_TYPE","options","object");var C=A.message?g.call(this,A.message)||this:g.call(this,gI.inspect(A.actual).slice(0,128)+" "+A.operator+" "+gI.inspect(A.expected).slice(0,128))||this;return C.generatedMessage=!A.message,C.name="AssertionError [ERR_ASSERTION]",C.code="ERR_ASSERTION",C.actual=A.actual,C.expected=A.expected,C.operator=A.operator,I.Error.captureStackTrace(C,A.stackStartFunction),C}return e(A,g),A}(d.Error),I.AssertionError=g,I.message=C,I.E=t,I.Error=A(d.Error),I.TypeError=A(d.TypeError),I.RangeError=A(d.RangeError),t("ERR_ARG_NOT_ITERABLE","%s must be iterable"),t("ERR_ASSERTION","%s"),t("ERR_BUFFER_OUT_OF_BOUNDS",(function(g,I){return I?"Attempt to write outside buffer bounds":'"'+g+'" is outside of buffer bounds'})),t("ERR_CHILD_CLOSED_BEFORE_REPLY","Child closed before reply received"),t("ERR_CONSOLE_WRITABLE_STREAM","Console expects a writable stream instance for %s"),t("ERR_CPU_USAGE","Unable to obtain cpu usage %s"),t("ERR_DNS_SET_SERVERS_FAILED",(function(g,I){return'c-ares failed to set servers: "'+g+'" ['+I+"]"})),t("ERR_FALSY_VALUE_REJECTION","Promise was rejected with falsy value"),t("ERR_ENCODING_NOT_SUPPORTED",(function(g){return'The "'+g+'" encoding is not supported'})),t("ERR_ENCODING_INVALID_ENCODED_DATA",(function(g){return"The encoded data was not valid for encoding "+g})),t("ERR_HTTP_HEADERS_SENT","Cannot render headers after they are sent to the client"),t("ERR_HTTP_INVALID_STATUS_CODE","Invalid status code: %s"),t("ERR_HTTP_TRAILER_INVALID","Trailers are invalid with this transfer encoding"),t("ERR_INDEX_OUT_OF_RANGE","Index out of range"),t("ERR_INVALID_ARG_TYPE",(function(g,I,A){if(nI(g,"name is required"),I.includes("not ")){var C="must not be";I=I.split("not ")[1]}else C="must be";if(Array.isArray(g))C="The "+g.map((function(g){return'"'+g+'"'})).join(", ")+" arguments "+C+" "+i(I,"type");else if(g.includes(" argument"))C="The "+g+" "+C+" "+i(I,"type");else{var t=g.includes(".")?"property":"argument";C='The "'+g+'" '+t+" "+C+" "+i(I,"type")}return 3<=arguments.length&&(C+=". Received type "+(null!==A?typeof A:"null")),C})),t("ERR_INVALID_ARRAY_LENGTH",(function(g,I,A){return nI.strictEqual(typeof A,"number"),'The array "'+g+'" (length '+A+") must be of length "+I+"."})),t("ERR_INVALID_BUFFER_SIZE","Buffer size must be a multiple of %s"),t("ERR_INVALID_CALLBACK","Callback must be a function"),t("ERR_INVALID_CHAR","Invalid character in %s"),t("ERR_INVALID_CURSOR_POS","Cannot set cursor row without setting its column"),t("ERR_INVALID_FD",'"fd" must be a positive integer: %s'),t("ERR_INVALID_FILE_URL_HOST",'File URL host must be "localhost" or empty on %s'),t("ERR_INVALID_FILE_URL_PATH","File URL path %s"),t("ERR_INVALID_HANDLE_TYPE","This handle type cannot be sent"),t("ERR_INVALID_IP_ADDRESS","Invalid IP address: %s"),t("ERR_INVALID_OPT_VALUE",(function(g,I){return'The value "'+String(I)+'" is invalid for option "'+g+'"'})),t("ERR_INVALID_OPT_VALUE_ENCODING",(function(g){return'The value "'+String(g)+'" is invalid for option "encoding"'})),t("ERR_INVALID_REPL_EVAL_CONFIG",'Cannot specify both "breakEvalOnSigint" and "eval" for REPL'),t("ERR_INVALID_SYNC_FORK_INPUT","Asynchronous forks do not support Buffer, Uint8Array or string input: %s"),t("ERR_INVALID_THIS",'Value of "this" must be of type %s'),t("ERR_INVALID_TUPLE","%s must be an iterable %s tuple"),t("ERR_INVALID_URL","Invalid URL: %s"),t("ERR_INVALID_URL_SCHEME",(function(g){return"The URL must be "+i(g,"scheme")})),t("ERR_IPC_CHANNEL_CLOSED","Channel closed"),t("ERR_IPC_DISCONNECTED","IPC channel is already disconnected"),t("ERR_IPC_ONE_PIPE","Child process can have only one IPC pipe"),t("ERR_IPC_SYNC_FORK","IPC cannot be used with synchronous forks"),t("ERR_MISSING_ARGS",(function(){for(var g=[],I=0;I<arguments.length;I++)g[I]=arguments[I];nI(0<g.length,"At least one arg needs to be specified"),I="The ";var A=g.length;switch(g=g.map((function(g){return'"'+g+'"'})),A){case 1:I+=g[0]+" argument";break;case 2:I+=g[0]+" and "+g[1]+" arguments";break;default:I+=g.slice(0,A-1).join(", "),I+=", and "+g[A-1]+" arguments"}return I+" must be specified"})),t("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),t("ERR_NAPI_CONS_FUNCTION","Constructor must be a function"),t("ERR_NAPI_CONS_PROTOTYPE_OBJECT","Constructor.prototype must be an object"),t("ERR_NO_CRYPTO","Node.js is not compiled with OpenSSL crypto support"),t("ERR_NO_LONGER_SUPPORTED","%s is no longer supported"),t("ERR_PARSE_HISTORY_DATA","Could not parse history data in %s"),t("ERR_SOCKET_ALREADY_BOUND","Socket is already bound"),t("ERR_SOCKET_BAD_PORT","Port should be > 0 and < 65536"),t("ERR_SOCKET_BAD_TYPE","Bad socket type specified. Valid types are: udp4, udp6"),t("ERR_SOCKET_CANNOT_SEND","Unable to send data"),t("ERR_SOCKET_CLOSED","Socket is closed"),t("ERR_SOCKET_DGRAM_NOT_RUNNING","Not running"),t("ERR_STDERR_CLOSE","process.stderr cannot be closed"),t("ERR_STDOUT_CLOSE","process.stdout cannot be closed"),t("ERR_STREAM_WRAP","Stream has StringDecoder set or is in objectMode"),t("ERR_TLS_CERT_ALTNAME_INVALID","Hostname/IP does not match certificate's altnames: %s"),t("ERR_TLS_DH_PARAM_SIZE",(function(g){return"DH parameter size "+g+" is less than 2048"})),t("ERR_TLS_HANDSHAKE_TIMEOUT","TLS handshake timeout"),t("ERR_TLS_RENEGOTIATION_FAILED","Failed to renegotiate"),t("ERR_TLS_REQUIRED_SERVER_NAME",'"servername" is required parameter for Server.addContext'),t("ERR_TLS_SESSION_ATTACK","TSL session renegotiation attack detected"),t("ERR_TRANSFORM_ALREADY_TRANSFORMING","Calling transform done when still transforming"),t("ERR_TRANSFORM_WITH_LENGTH_0","Calling transform done when writableState.length != 0"),t("ERR_UNKNOWN_ENCODING","Unknown encoding: %s"),t("ERR_UNKNOWN_SIGNAL","Unknown signal: %s"),t("ERR_UNKNOWN_STDIN_TYPE","Unknown stdin file type"),t("ERR_UNKNOWN_STREAM_TYPE","Unknown stream file type"),t("ERR_V8BREAKITERATOR","Full ICU data not installed. See https://github.com/nodejs/node/wiki/Intl")}));h(bI);var pI=m((function(g,I){Object.defineProperty(I,"__esModule",{value:!0}),I.ENCODING_UTF8="utf8",I.assertEncoding=function(g){if(g&&!og.Buffer.isEncoding(g))throw new bI.TypeError("ERR_INVALID_OPT_VALUE_ENCODING",g)},I.strToEncoding=function(g,A){return A&&A!==I.ENCODING_UTF8?"buffer"===A?new og.Buffer(g):new og.Buffer(g).toString(A):g}}));h(pI);var BI=m((function(g,I){Object.defineProperty(I,"__esModule",{value:!0});var A=Z.constants.S_IFMT,C=Z.constants.S_IFDIR,t=Z.constants.S_IFREG,i=Z.constants.S_IFBLK,e=Z.constants.S_IFCHR,o=Z.constants.S_IFLNK,n=Z.constants.S_IFIFO,s=Z.constants.S_IFSOCK;g=function(){function g(){this.name="",this.mode=0}return g.build=function(I,A){var C=new g,t=I.getNode().mode;return C.name=pI.strToEncoding(I.getName(),A),C.mode=t,C},g.prototype._checkModeProperty=function(g){return(this.mode&A)===g},g.prototype.isDirectory=function(){return this._checkModeProperty(C)},g.prototype.isFile=function(){return this._checkModeProperty(t)},g.prototype.isBlockDevice=function(){return this._checkModeProperty(i)},g.prototype.isCharacterDevice=function(){return this._checkModeProperty(e)},g.prototype.isSymbolicLink=function(){return this._checkModeProperty(o)},g.prototype.isFIFO=function(){return this._checkModeProperty(n)},g.prototype.isSocket=function(){return this._checkModeProperty(s)},g}(),I.Dirent=g,I.default=g}));function yI(g,I){for(var A=0,C=g.length-1;0<=C;C--){var t=g[C];"."===t?g.splice(C,1):".."===t?(g.splice(C,1),A++):A&&(g.splice(C,1),A--)}if(I)for(;A--;A)g.unshift("..");return g}h(BI);function wI(){for(var g="",I=!1,A=arguments.length-1;-1<=A&&!I;A--){var C=0<=A?arguments[A]:"/";if("string"!=typeof C)throw new TypeError("Arguments to path.resolve must be strings");C&&(g=C+"/"+g,I="/"===C.charAt(0))}return(I?"/":"")+(g=yI(YI(g.split("/"),(function(g){return!!g})),!I).join("/"))||"."}function WI(g,I){function A(g){for(var I=0;I<g.length&&""===g[I];I++);for(var A=g.length-1;0<=A&&""===g[A];A--);return I>A?[]:g.slice(I,A-I+1)}g=wI(g).substr(1),I=wI(I).substr(1),g=A(g.split("/")),I=A(I.split("/"));for(var C=Math.min(g.length,I.length),t=C,i=0;i<C;i++)if(g[i]!==I[i]){t=i;break}for(C=[],i=t;i<g.length;i++)C.push("..");return(C=C.concat(I.slice(t))).join("/")}var SI="/",KI=WI,fI=wI;function YI(g,I){if(g.filter)return g.filter(I);for(var A=[],C=0;C<g.length;C++)I(g[C],C,g)&&A.push(g[C]);return A}"ab".substr(-1);var XI=m((function(g,I){Object.defineProperty(I,"__esModule",{value:!0}),g="function"==typeof setImmediate?setImmediate.bind(d):setTimeout.bind(d),I.default=g}));h(XI);var VI=m((function(g,I){function A(){var g=Wg||{};return g.getuid||(g.getuid=function(){return 0}),g.getgid||(g.getgid=function(){return 0}),g.cwd||(g.cwd=function(){return"/"}),g.nextTick||(g.nextTick=XI.default),g.emitWarning||(g.emitWarning=function(g,I){console.warn(I+(I?": ":"")+g)}),g.env||(g.env={}),g}Object.defineProperty(I,"__esModule",{value:!0}),I.createProcess=A,I.default=A()}));function OI(){}function RI(){RI.init.call(this)}function QI(g,I,A,C){var t;if("function"!=typeof A)throw new TypeError('"listener" argument must be a function');if(t=g._events){t.newListener&&(g.emit("newListener",I,A.listener?A.listener:A),t=g._events);var i=t[I]}else t=g._events=new OI,g._eventsCount=0;return i?("function"==typeof i?i=t[I]=C?[A,i]:[i,A]:C?i.unshift(A):i.push(A),i.warned||(A=void 0===g._maxListeners?RI.defaultMaxListeners:g._maxListeners)&&0<A&&i.length>A&&(i.warned=!0,(A=Error("Possible EventEmitter memory leak detected. "+i.length+" "+I+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",A.emitter=g,A.type=I,A.count=i.length,"function"==typeof console.warn?console.warn(A):console.log(A))):(t[I]=A,++g._eventsCount),g}function HI(g,I,A){function C(){g.removeListener(I,C),t||(t=!0,A.apply(g,arguments))}var t=!1;return C.listener=A,C}function kI(g){var I=this._events;if(I){if("function"==typeof(g=I[g]))return 1;if(g)return g.length}return 0}function JI(g,I){for(var A=Array(I);I--;)A[I]=g[I];return A}h(VI),OI.prototype=Object.create(null),RI.EventEmitter=RI,RI.usingDomains=!1,RI.prototype.domain=void 0,RI.prototype._events=void 0,RI.prototype._maxListeners=void 0,RI.defaultMaxListeners=10,RI.init=function(){this.domain=null,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new OI,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},RI.prototype.setMaxListeners=function(g){if("number"!=typeof g||0>g||isNaN(g))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=g,this},RI.prototype.getMaxListeners=function(){return void 0===this._maxListeners?RI.defaultMaxListeners:this._maxListeners},RI.prototype.emit=function(g){var I,A,C="error"===g;if(I=this._events)C=C&&null==I.error;else if(!C)return!1;var t=this.domain;if(C){if(I=arguments[1],!t){if(I instanceof Error)throw I;throw(t=Error('Uncaught, unspecified "error" event. ('+I+")")).context=I,t}return I||(I=Error('Uncaught, unspecified "error" event')),I.domainEmitter=this,I.domain=t,I.domainThrown=!1,t.emit("error",I),!1}if(!(t=I[g]))return!1;I="function"==typeof t;var i=arguments.length;switch(i){case 1:if(I)t.call(this);else for(t=JI(t,I=t.length),C=0;C<I;++C)t[C].call(this);break;case 2:if(C=arguments[1],I)t.call(this,C);else for(t=JI(t,I=t.length),i=0;i<I;++i)t[i].call(this,C);break;case 3:if(C=arguments[1],i=arguments[2],I)t.call(this,C,i);else for(t=JI(t,I=t.length),A=0;A<I;++A)t[A].call(this,C,i);break;case 4:if(C=arguments[1],i=arguments[2],A=arguments[3],I)t.call(this,C,i,A);else{t=JI(t,I=t.length);for(var e=0;e<I;++e)t[e].call(this,C,i,A)}break;default:for(C=Array(i-1),A=1;A<i;A++)C[A-1]=arguments[A];if(I)t.apply(this,C);else for(t=JI(t,I=t.length),i=0;i<I;++i)t[i].apply(this,C)}return!0},RI.prototype.addListener=function(g,I){return QI(this,g,I,!1)},RI.prototype.on=RI.prototype.addListener,RI.prototype.prependListener=function(g,I){return QI(this,g,I,!0)},RI.prototype.once=function(g,I){if("function"!=typeof I)throw new TypeError('"listener" argument must be a function');return this.on(g,HI(this,g,I)),this},RI.prototype.prependOnceListener=function(g,I){if("function"!=typeof I)throw new TypeError('"listener" argument must be a function');return this.prependListener(g,HI(this,g,I)),this},RI.prototype.removeListener=function(g,I){var A;if("function"!=typeof I)throw new TypeError('"listener" argument must be a function');var C=this._events;if(!C)return this;var t=C[g];if(!t)return this;if(t===I||t.listener&&t.listener===I)0==--this._eventsCount?this._events=new OI:(delete C[g],C.removeListener&&this.emit("removeListener",g,t.listener||I));else if("function"!=typeof t){var i=-1;for(A=t.length;0<A--;)if(t[A]===I||t[A].listener&&t[A].listener===I){var e=t[A].listener;i=A;break}if(0>i)return this;if(1===t.length){if(t[0]=void 0,0==--this._eventsCount)return this._events=new OI,this;delete C[g]}else{A=i+1;for(var o=t.length;A<o;i+=1,A+=1)t[i]=t[A];t.pop()}C.removeListener&&this.emit("removeListener",g,e||I)}return this},RI.prototype.removeAllListeners=function(g){var I=this._events;if(!I)return this;if(!I.removeListener)return 0===arguments.length?(this._events=new OI,this._eventsCount=0):I[g]&&(0==--this._eventsCount?this._events=new OI:delete I[g]),this;if(0===arguments.length){I=Object.keys(I);for(var A,C=0;C<I.length;++C)"removeListener"!==(A=I[C])&&this.removeAllListeners(A);return this.removeAllListeners("removeListener"),this._events=new OI,this._eventsCount=0,this}if("function"==typeof(I=I[g]))this.removeListener(g,I);else if(I)do{this.removeListener(g,I[I.length-1])}while(I[0]);return this},RI.prototype.listeners=function(g){var I=this._events;if(I)if(g=I[g])if("function"==typeof g)g=[g.listener||g];else{I=Array(g.length);for(var A=0;A<I.length;++A)I[A]=g[A].listener||g[A];g=I}else g=[];else g=[];return g},RI.listenerCount=function(g,I){return"function"==typeof g.listenerCount?g.listenerCount(I):kI.call(g,I)},RI.prototype.listenerCount=kI,RI.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]};var vI=m((function(g,I){var A=d&&d.__extends||function(){function g(I,A){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,I){g.__proto__=I}||function(g,I){for(var A in I)I.hasOwnProperty(A)&&(g[A]=I[A])})(I,A)}return function(I,A){function C(){this.constructor=I}g(I,A),I.prototype=null===A?Object.create(A):(C.prototype=A.prototype,new C)}}();Object.defineProperty(I,"__esModule",{value:!0});var C=Z.constants.S_IFMT,t=Z.constants.S_IFDIR,i=Z.constants.S_IFREG,e=Z.constants.S_IFLNK,o=Z.constants.O_APPEND;I.SEP="/",g=function(g){function I(I,A){void 0===A&&(A=438);var C=g.call(this)||this;return C.uid=VI.default.getuid(),C.gid=VI.default.getgid(),C.atime=new Date,C.mtime=new Date,C.ctime=new Date,C.perm=438,C.mode=i,C.nlink=1,C.perm=A,C.mode|=A,C.ino=I,C}return A(I,g),I.prototype.getString=function(g){return void 0===g&&(g="utf8"),this.getBuffer().toString(g)},I.prototype.setString=function(g){this.buf=og.bufferFrom(g,"utf8"),this.touch()},I.prototype.getBuffer=function(){return this.buf||this.setBuffer(og.bufferAllocUnsafe(0)),og.bufferFrom(this.buf)},I.prototype.setBuffer=function(g){this.buf=og.bufferFrom(g),this.touch()},I.prototype.getSize=function(){return this.buf?this.buf.length:0},I.prototype.setModeProperty=function(g){this.mode=this.mode&~C|g},I.prototype.setIsFile=function(){this.setModeProperty(i)},I.prototype.setIsDirectory=function(){this.setModeProperty(t)},I.prototype.setIsSymlink=function(){this.setModeProperty(e)},I.prototype.isFile=function(){return(this.mode&C)===i},I.prototype.isDirectory=function(){return(this.mode&C)===t},I.prototype.isSymlink=function(){return(this.mode&C)===e},I.prototype.makeSymlink=function(g){this.symlink=g,this.setIsSymlink()},I.prototype.write=function(g,I,A,C){if(void 0===I&&(I=0),void 0===A&&(A=g.length),void 0===C&&(C=0),this.buf||(this.buf=og.bufferAllocUnsafe(0)),C+A>this.buf.length){var t=og.bufferAllocUnsafe(C+A);this.buf.copy(t,0,0,this.buf.length),this.buf=t}return g.copy(this.buf,C,I,I+A),this.touch(),A},I.prototype.read=function(g,I,A,C){return void 0===I&&(I=0),void 0===A&&(A=g.byteLength),void 0===C&&(C=0),this.buf||(this.buf=og.bufferAllocUnsafe(0)),A>g.byteLength&&(A=g.byteLength),A+C>this.buf.length&&(A=this.buf.length-C),this.buf.copy(g,I,C,C+A),A},I.prototype.truncate=function(g){if(void 0===g&&(g=0),g)if(this.buf||(this.buf=og.bufferAllocUnsafe(0)),g<=this.buf.length)this.buf=this.buf.slice(0,g);else{var I=og.bufferAllocUnsafe(0);this.buf.copy(I),I.fill(0,g)}else this.buf=og.bufferAllocUnsafe(0);this.touch()},I.prototype.chmod=function(g){this.perm=g,this.mode=-512&this.mode|g,this.touch()},I.prototype.chown=function(g,I){this.uid=g,this.gid=I,this.touch()},I.prototype.touch=function(){this.mtime=new Date,this.emit("change",this)},I.prototype.canRead=function(g,I){return void 0===g&&(g=VI.default.getuid()),void 0===I&&(I=VI.default.getgid()),!!(4&this.perm||I===this.gid&&32&this.perm||g===this.uid&&256&this.perm)},I.prototype.canWrite=function(g,I){return void 0===g&&(g=VI.default.getuid()),void 0===I&&(I=VI.default.getgid()),!!(2&this.perm||I===this.gid&&16&this.perm||g===this.uid&&128&this.perm)},I.prototype.del=function(){this.emit("delete",this)},I.prototype.toJSON=function(){return{ino:this.ino,uid:this.uid,gid:this.gid,atime:this.atime.getTime(),mtime:this.mtime.getTime(),ctime:this.ctime.getTime(),perm:this.perm,mode:this.mode,nlink:this.nlink,symlink:this.symlink,data:this.getString()}},I}(RI.EventEmitter),I.Node=g,g=function(g){function C(I,A,C){var t=g.call(this)||this;return t.children={},t.steps=[],t.ino=0,t.length=0,t.vol=I,t.parent=A,t.steps=A?A.steps.concat([C]):[C],t}return A(C,g),C.prototype.setNode=function(g){this.node=g,this.ino=g.ino},C.prototype.getNode=function(){return this.node},C.prototype.createChild=function(g,I){void 0===I&&(I=this.vol.createNode());var A=new C(this.vol,this,g);return A.setNode(I),I.isDirectory(),this.setChild(g,A),A},C.prototype.setChild=function(g,I){return void 0===I&&(I=new C(this.vol,this,g)),this.children[g]=I,I.parent=this,this.length++,this.emit("child:add",I,this),I},C.prototype.deleteChild=function(g){delete this.children[g.getName()],this.length--,this.emit("child:delete",g,this)},C.prototype.getChild=function(g){if(Object.hasOwnProperty.call(this.children,g))return this.children[g]},C.prototype.getPath=function(){return this.steps.join(I.SEP)},C.prototype.getName=function(){return this.steps[this.steps.length-1]},C.prototype.walk=function(g,I,A){if(void 0===I&&(I=g.length),void 0===A&&(A=0),A>=g.length||A>=I)return this;var C=this.getChild(g[A]);return C?C.walk(g,I,A+1):null},C.prototype.toJSON=function(){return{steps:this.steps,ino:this.ino,children:Object.keys(this.children)}},C}(RI.EventEmitter),I.Link=g,g=function(){function g(g,I,A,C){this.position=0,this.link=g,this.node=I,this.flags=A,this.fd=C}return g.prototype.getString=function(){return this.node.getString()},g.prototype.setString=function(g){this.node.setString(g)},g.prototype.getBuffer=function(){return this.node.getBuffer()},g.prototype.setBuffer=function(g){this.node.setBuffer(g)},g.prototype.getSize=function(){return this.node.getSize()},g.prototype.truncate=function(g){this.node.truncate(g)},g.prototype.seekTo=function(g){this.position=g},g.prototype.stats=function(){return G.default.build(this.node)},g.prototype.write=function(g,I,A,C){return void 0===I&&(I=0),void 0===A&&(A=g.length),"number"!=typeof C&&(C=this.position),this.flags&o&&(C=this.getSize()),g=this.node.write(g,I,A,C),this.position=C+g,g},g.prototype.read=function(g,I,A,C){return void 0===I&&(I=0),void 0===A&&(A=g.byteLength),"number"!=typeof C&&(C=this.position),g=this.node.read(g,I,A,C),this.position=C+g,g},g.prototype.chmod=function(g){this.node.chmod(g)},g.prototype.chown=function(g,I){this.node.chown(g,I)},g}(),I.File=g}));h(vI);var DI=vI.Node,MI=m((function(g,I){Object.defineProperty(I,"__esModule",{value:!0}),I.default=function(g,I,A){var C=setTimeout.apply(null,arguments);return C&&"object"==typeof C&&"function"==typeof C.unref&&C.unref(),C}}));function NI(){this.tail=this.head=null,this.length=0}h(MI),NI.prototype.push=function(g){g={data:g,next:null},0<this.length?this.tail.next=g:this.head=g,this.tail=g,++this.length},NI.prototype.unshift=function(g){g={data:g,next:this.head},0===this.length&&(this.tail=g),this.head=g,++this.length},NI.prototype.shift=function(){if(0!==this.length){var g=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,g}},NI.prototype.clear=function(){this.head=this.tail=null,this.length=0},NI.prototype.join=function(g){if(0===this.length)return"";for(var I=this.head,A=""+I.data;I=I.next;)A+=g+I.data;return A},NI.prototype.concat=function(g){if(0===this.length)return Q.alloc(0);if(1===this.length)return this.head.data;g=Q.allocUnsafe(g>>>0);for(var I=this.head,A=0;I;)I.data.copy(g,A),A+=I.data.length,I=I.next;return g};var EI=Q.isEncoding||function(g){switch(g&&g.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function FI(g){if(this.encoding=(g||"utf8").toLowerCase().replace(/[-_]/,""),g&&!EI(g))throw Error("Unknown encoding: "+g);switch(this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=TI;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=zI;break;default:return void(this.write=LI)}this.charBuffer=new Q(6),this.charLength=this.charReceived=0}function LI(g){return g.toString(this.encoding)}function TI(g){this.charLength=(this.charReceived=g.length%2)?2:0}function zI(g){this.charLength=(this.charReceived=g.length%3)?3:0}FI.prototype.write=function(g){for(var I="";this.charLength;){if(I=g.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:g.length,g.copy(this.charBuffer,this.charReceived,0,I),this.charReceived+=I,this.charReceived<this.charLength)return"";g=g.slice(I,g.length);var A=(I=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(I.length-1);if(!(55296<=A&&56319>=A)){if(this.charReceived=this.charLength=0,0===g.length)return I;break}this.charLength+=this.surrogateSize,I=""}this.detectIncompleteChar(g);var C=g.length;return this.charLength&&(g.copy(this.charBuffer,0,g.length-this.charReceived,C),C-=this.charReceived),C=(I+=g.toString(this.encoding,0,C)).length-1,55296<=(A=I.charCodeAt(C))&&56319>=A?(A=this.surrogateSize,this.charLength+=A,this.charReceived+=A,this.charBuffer.copy(this.charBuffer,A,0,A),g.copy(this.charBuffer,0,0,A),I.substring(0,C)):I},FI.prototype.detectIncompleteChar=function(g){for(var I=3<=g.length?3:g.length;0<I;I--){var A=g[g.length-I];if(1==I&&A>>5==6){this.charLength=2;break}if(2>=I&&A>>4==14){this.charLength=3;break}if(3>=I&&A>>3==30){this.charLength=4;break}}this.charReceived=I},FI.prototype.end=function(g){var I="";return g&&g.length&&(I=this.write(g)),this.charReceived&&(g=this.encoding,I+=this.charBuffer.slice(0,this.charReceived).toString(g)),I},xI.ReadableState=UI;var PI=Og("stream");function UI(g,I){g=g||{},this.objectMode=!!g.objectMode,I instanceof pA&&(this.objectMode=this.objectMode||!!g.readableObjectMode),I=g.highWaterMark;var A=this.objectMode?16:16384;this.highWaterMark=I||0===I?I:A,this.highWaterMark=~~this.highWaterMark,this.buffer=new NI,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.reading=this.endEmitted=this.ended=!1,this.sync=!0,this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=!1,this.defaultEncoding=g.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.encoding=this.decoder=null,g.encoding&&(this.decoder=new FI(g.encoding),this.encoding=g.encoding)}function xI(g){if(!(this instanceof xI))return new xI(g);this._readableState=new UI(g,this),this.readable=!0,g&&"function"==typeof g.read&&(this._read=g.read),RI.call(this)}function jI(g,I,A,C,t){var i=A,e=null;if(tg(i)||"string"==typeof i||null==i||I.objectMode||(e=new TypeError("Invalid non-string/buffer chunk")),i=e)g.emit("error",i);else if(null===A)I.reading=!1,I.ended||(I.decoder&&(A=I.decoder.end())&&A.length&&(I.buffer.push(A),I.length+=I.objectMode?1:A.length),I.ended=!0,$I(g));else if(I.objectMode||A&&0<A.length)if(I.ended&&!t)g.emit("error",Error("stream.push() after EOF"));else if(I.endEmitted&&t)g.emit("error",Error("stream.unshift() after end event"));else{if(I.decoder&&!t&&!C){A=I.decoder.write(A);var o=!I.objectMode&&0===A.length}t||(I.reading=!1),o||(I.flowing&&0===I.length&&!I.sync?(g.emit("data",A),g.read(0)):(I.length+=I.objectMode?1:A.length,t?I.buffer.unshift(A):I.buffer.push(A),I.needReadable&&$I(g))),I.readingMore||(I.readingMore=!0,Gg(gA,g,I))}else t||(I.reading=!1);return!I.ended&&(I.needReadable||I.length<I.highWaterMark||0===I.length)}function _I(g,I){if(0>=g||0===I.length&&I.ended)return 0;if(I.objectMode)return 1;if(g!=g)return I.flowing&&I.length?I.buffer.head.data.length:I.length;if(g>I.highWaterMark){var A=g;8388608<=A?A=8388608:(A--,A|=A>>>1,A|=A>>>2,A|=A>>>4,A|=A>>>8,A|=A>>>16,A++),I.highWaterMark=A}return g<=I.length?g:I.ended?I.length:(I.needReadable=!0,0)}function $I(g){var I=g._readableState;I.needReadable=!1,I.emittedReadable||(PI("emitReadable",I.flowing),I.emittedReadable=!0,I.sync?Gg(qI,g):qI(g))}function qI(g){PI("emit readable"),g.emit("readable"),CA(g)}function gA(g,I){for(var A=I.length;!I.reading&&!I.flowing&&!I.ended&&I.length<I.highWaterMark&&(PI("maybeReadMore read 0"),g.read(0),A!==I.length);)A=I.length;I.readingMore=!1}function IA(g){PI("readable nexttick read 0"),g.read(0)}function AA(g,I){I.reading||(PI("resume read 0"),g.read(0)),I.resumeScheduled=!1,I.awaitDrain=0,g.emit("resume"),CA(g),I.flowing&&!I.reading&&g.read(0)}function CA(g){var I=g._readableState;for(PI("flow",I.flowing);I.flowing&&null!==g.read(););}function tA(g,I){if(0===I.length)return null;if(I.objectMode)var A=I.buffer.shift();else if(!g||g>=I.length)A=I.decoder?I.buffer.join(""):1===I.buffer.length?I.buffer.head.data:I.buffer.concat(I.length),I.buffer.clear();else{if(A=I.buffer,I=I.decoder,g<A.head.data.length)I=A.head.data.slice(0,g),A.head.data=A.head.data.slice(g);else{if(g===A.head.data.length)A=A.shift();else if(I){var C=1,t=(I=A.head).data;for(g-=t.length;I=I.next;){var i=I.data,e=g>i.length?i.length:g;if(t=e===i.length?t+i:t+i.slice(0,g),0===(g-=e)){e===i.length?(++C,A.head=I.next?I.next:A.tail=null):(A.head=I,I.data=i.slice(e));break}++C}A.length-=C,A=t}else{for(I=Q.allocUnsafe(g),t=1,(C=A.head).data.copy(I),g-=C.data.length;C=C.next;){if(e=g>(i=C.data).length?i.length:g,i.copy(I,I.length-g,0,e),0===(g-=e)){e===i.length?(++t,A.head=C.next?C.next:A.tail=null):(A.head=C,C.data=i.slice(e));break}++t}A.length-=t,A=I}I=A}A=I}return A}function iA(g){var I=g._readableState;if(0<I.length)throw Error('"endReadable()" called on non-empty stream');I.endEmitted||(I.ended=!0,Gg(eA,I,g))}function eA(g,I){g.endEmitted||0!==g.length||(g.endEmitted=!0,I.readable=!1,I.emit("end"))}function oA(g,I){for(var A=0,C=g.length;A<C;A++)if(g[A]===I)return A;return-1}function nA(){}function sA(g,I,A){this.chunk=g,this.encoding=I,this.callback=A,this.next=null}function lA(g,I){Object.defineProperty(this,"buffer",{get:Yg((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),g=g||{},this.objectMode=!!g.objectMode,I instanceof pA&&(this.objectMode=this.objectMode||!!g.writableObjectMode);var A=g.highWaterMark,C=this.objectMode?16:16384;this.highWaterMark=A||0===A?A:C,this.highWaterMark=~~this.highWaterMark,this.finished=this.ended=this.ending=this.needDrain=!1,this.decodeStrings=!1!==g.decodeStrings,this.defaultEncoding=g.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(g){var A=I._writableState,C=A.sync,t=A.writecb;A.writing=!1,A.writecb=null,A.length-=A.writelen,A.writelen=0,g?(--A.pendingcb,C?Gg(t,g):t(g),I._writableState.errorEmitted=!0,I.emit("error",g)):((g=hA(A))||A.corked||A.bufferProcessing||!A.bufferedRequest||dA(I,A),C?Gg(aA,I,A,g,t):aA(I,A,g,t))},this.writecb=null,this.writelen=0,this.lastBufferedRequest=this.bufferedRequest=null,this.pendingcb=0,this.errorEmitted=this.prefinished=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new ZA(this)}function rA(g){if(!(this instanceof rA||this instanceof pA))return new rA(g);this._writableState=new lA(g,this),this.writable=!0,g&&("function"==typeof g.write&&(this._write=g.write),"function"==typeof g.writev&&(this._writev=g.writev)),RI.call(this)}function cA(g,I,A,C,t,i,e){I.writelen=C,I.writecb=e,I.writing=!0,I.sync=!0,A?g._writev(t,I.onwrite):g._write(t,i,I.onwrite),I.sync=!1}function aA(g,I,A,C){!A&&0===I.length&&I.needDrain&&(I.needDrain=!1,g.emit("drain")),I.pendingcb--,C(),mA(g,I)}function dA(g,I){I.bufferProcessing=!0;var A=I.bufferedRequest;if(g._writev&&A&&A.next){var C=Array(I.bufferedRequestCount),t=I.corkedRequestsFree;t.entry=A;for(var i=0;A;)C[i]=A,A=A.next,i+=1;cA(g,I,!0,I.length,C,"",t.finish),I.pendingcb++,I.lastBufferedRequest=null,t.next?(I.corkedRequestsFree=t.next,t.next=null):I.corkedRequestsFree=new ZA(I)}else{for(;A&&(C=A.chunk,cA(g,I,!1,I.objectMode?1:C.length,C,A.encoding,A.callback),A=A.next,!I.writing););null===A&&(I.lastBufferedRequest=null)}I.bufferedRequestCount=0,I.bufferedRequest=A,I.bufferProcessing=!1}function hA(g){return g.ending&&0===g.length&&null===g.bufferedRequest&&!g.finished&&!g.writing}function mA(g,I){var A=hA(I);return A&&(0===I.pendingcb?(I.prefinished||(I.prefinished=!0,g.emit("prefinish")),I.finished=!0,g.emit("finish")):I.prefinished||(I.prefinished=!0,g.emit("prefinish"))),A}function ZA(g){var I=this;this.entry=this.next=null,this.finish=function(A){var C=I.entry;for(I.entry=null;C;){var t=C.callback;g.pendingcb--,t(A),C=C.next}g.corkedRequestsFree?g.corkedRequestsFree.next=I:g.corkedRequestsFree=I}}Sg(xI,RI),xI.prototype.push=function(g,I){var A=this._readableState;return A.objectMode||"string"!=typeof g||(I=I||A.defaultEncoding)!==A.encoding&&(g=Q.from(g,I),I=""),jI(this,A,g,I,!1)},xI.prototype.unshift=function(g){return jI(this,this._readableState,g,"",!0)},xI.prototype.isPaused=function(){return!1===this._readableState.flowing},xI.prototype.setEncoding=function(g){return this._readableState.decoder=new FI(g),this._readableState.encoding=g,this},xI.prototype.read=function(g){PI("read",g),g=parseInt(g,10);var I=this._readableState,A=g;if(0!==g&&(I.emittedReadable=!1),0===g&&I.needReadable&&(I.length>=I.highWaterMark||I.ended))return PI("read: emitReadable",I.length,I.ended),0===I.length&&I.ended?iA(this):$I(this),null;if(0===(g=_I(g,I))&&I.ended)return 0===I.length&&iA(this),null;var C=I.needReadable;return PI("need readable",C),(0===I.length||I.length-g<I.highWaterMark)&&PI("length less than watermark",C=!0),I.ended||I.reading?PI("reading or ended",!1):C&&(PI("do read"),I.reading=!0,I.sync=!0,0===I.length&&(I.needReadable=!0),this._read(I.highWaterMark),I.sync=!1,I.reading||(g=_I(A,I))),null===(C=0<g?tA(g,I):null)?(I.needReadable=!0,g=0):I.length-=g,0===I.length&&(I.ended||(I.needReadable=!0),A!==g&&I.ended&&iA(this)),null!==C&&this.emit("data",C),C},xI.prototype._read=function(){this.emit("error",Error("not implemented"))},xI.prototype.pipe=function(g,I){function A(g){PI("onunpipe"),g===l&&t()}function C(){PI("onend"),g.end()}function t(){PI("cleanup"),g.removeListener("close",o),g.removeListener("finish",n),g.removeListener("drain",c),g.removeListener("error",e),g.removeListener("unpipe",A),l.removeListener("end",C),l.removeListener("end",t),l.removeListener("data",i),a=!0,!r.awaitDrain||g._writableState&&!g._writableState.needDrain||c()}function i(I){PI("ondata"),d=!1,!1!==g.write(I)||d||((1===r.pipesCount&&r.pipes===g||1<r.pipesCount&&-1!==oA(r.pipes,g))&&!a&&(PI("false write response, pause",l._readableState.awaitDrain),l._readableState.awaitDrain++,d=!0),l.pause())}function e(I){PI("onerror",I),s(),g.removeListener("error",e),0===g.listeners("error").length&&g.emit("error",I)}function o(){g.removeListener("finish",n),s()}function n(){PI("onfinish"),g.removeListener("close",o),s()}function s(){PI("unpipe"),l.unpipe(g)}var l=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=g;break;case 1:r.pipes=[r.pipes,g];break;default:r.pipes.push(g)}r.pipesCount+=1,PI("pipe count=%d opts=%j",r.pipesCount,I),I=I&&!1===I.end?t:C,r.endEmitted?Gg(I):l.once("end",I),g.on("unpipe",A);var c=function(g){return function(){var I=g._readableState;PI("pipeOnDrain",I.awaitDrain),I.awaitDrain&&I.awaitDrain--,0===I.awaitDrain&&g.listeners("data").length&&(I.flowing=!0,CA(g))}}(l);g.on("drain",c);var a=!1,d=!1;return l.on("data",i),function(g,I,A){if("function"==typeof g.prependListener)return g.prependListener(I,A);g._events&&g._events[I]?Array.isArray(g._events[I])?g._events[I].unshift(A):g._events[I]=[A,g._events[I]]:g.on(I,A)}(g,"error",e),g.once("close",o),g.once("finish",n),g.emit("pipe",l),r.flowing||(PI("pipe resume"),l.resume()),g},xI.prototype.unpipe=function(g){var I=this._readableState;if(0===I.pipesCount)return this;if(1===I.pipesCount)return g&&g!==I.pipes||(g||(g=I.pipes),I.pipes=null,I.pipesCount=0,I.flowing=!1,g&&g.emit("unpipe",this)),this;if(!g){g=I.pipes;var A=I.pipesCount;for(I.pipes=null,I.pipesCount=0,I.flowing=!1,I=0;I<A;I++)g[I].emit("unpipe",this);return this}return-1===(A=oA(I.pipes,g))||(I.pipes.splice(A,1),--I.pipesCount,1===I.pipesCount&&(I.pipes=I.pipes[0]),g.emit("unpipe",this)),this},xI.prototype.on=function(g,I){return I=RI.prototype.on.call(this,g,I),"data"===g?!1!==this._readableState.flowing&&this.resume():"readable"===g&&((g=this._readableState).endEmitted||g.readableListening||(g.readableListening=g.needReadable=!0,g.emittedReadable=!1,g.reading?g.length&&$I(this):Gg(IA,this))),I},xI.prototype.addListener=xI.prototype.on,xI.prototype.resume=function(){var g=this._readableState;return g.flowing||(PI("resume"),g.flowing=!0,g.resumeScheduled||(g.resumeScheduled=!0,Gg(AA,this,g))),this},xI.prototype.pause=function(){return PI("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(PI("pause"),this._readableState.flowing=!1,this.emit("pause")),this},xI.prototype.wrap=function(g){var I=this._readableState,A=!1,C=this;for(var t in g.on("end",(function(){if(PI("wrapped end"),I.decoder&&!I.ended){var g=I.decoder.end();g&&g.length&&C.push(g)}C.push(null)})),g.on("data",(function(t){PI("wrapped data"),I.decoder&&(t=I.decoder.write(t)),I.objectMode&&null==t||!(I.objectMode||t&&t.length)||C.push(t)||(A=!0,g.pause())})),g)void 0===this[t]&&"function"==typeof g[t]&&(this[t]=function(I){return function(){return g[I].apply(g,arguments)}}(t));return function(g,I){for(var A=0,C=g.length;A<C;A++)I(g[A],A)}(["error","close","destroy","pause","resume"],(function(I){g.on(I,C.emit.bind(C,I))})),C._read=function(I){PI("wrapped _read",I),A&&(A=!1,g.resume())},C},xI._fromList=tA,rA.WritableState=lA,Sg(rA,RI),lA.prototype.getBuffer=function(){for(var g=this.bufferedRequest,I=[];g;)I.push(g),g=g.next;return I},rA.prototype.pipe=function(){this.emit("error",Error("Cannot pipe, not readable"))},rA.prototype.write=function(g,I,A){var C=this._writableState,t=!1;if("function"==typeof I&&(A=I,I=null),Q.isBuffer(g)?I="buffer":I||(I=C.defaultEncoding),"function"!=typeof A&&(A=nA),C.ended)C=A,g=Error("write after end"),this.emit("error",g),Gg(C,g);else{var i=A,e=!0,o=!1;null===g?o=new TypeError("May not write null values to stream"):Q.isBuffer(g)||"string"==typeof g||void 0===g||C.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(this.emit("error",o),Gg(i,o),e=!1),e&&(C.pendingcb++,t=I,C.objectMode||!1===C.decodeStrings||"string"!=typeof g||(g=Q.from(g,t)),Q.isBuffer(g)&&(t="buffer"),i=C.objectMode?1:g.length,C.length+=i,(I=C.length<C.highWaterMark)||(C.needDrain=!0),C.writing||C.corked?(i=C.lastBufferedRequest,C.lastBufferedRequest=new sA(g,t,A),i?i.next=C.lastBufferedRequest:C.bufferedRequest=C.lastBufferedRequest,C.bufferedRequestCount+=1):cA(this,C,!1,i,g,t,A),t=I)}return t},rA.prototype.cork=function(){this._writableState.corked++},rA.prototype.uncork=function(){var g=this._writableState;g.corked&&(g.corked--,g.writing||g.corked||g.finished||g.bufferProcessing||!g.bufferedRequest||dA(this,g))},rA.prototype.setDefaultEncoding=function(g){if("string"==typeof g&&(g=g.toLowerCase()),!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((g+"").toLowerCase())))throw new TypeError("Unknown encoding: "+g);return this._writableState.defaultEncoding=g,this},rA.prototype._write=function(g,I,A){A(Error("not implemented"))},rA.prototype._writev=null,rA.prototype.end=function(g,I,A){var C=this._writableState;"function"==typeof g?(A=g,I=g=null):"function"==typeof I&&(A=I,I=null),null!=g&&this.write(g,I),C.corked&&(C.corked=1,this.uncork()),C.ending||C.finished||(g=A,C.ending=!0,mA(this,C),g&&(C.finished?Gg(g):this.once("finish",g)),C.ended=!0,this.writable=!1)},Sg(pA,xI);for(var uA=Object.keys(rA.prototype),GA=0;GA<uA.length;GA++){var bA=uA[GA];pA.prototype[bA]||(pA.prototype[bA]=rA.prototype[bA])}function pA(g){if(!(this instanceof pA))return new pA(g);xI.call(this,g),rA.call(this,g),g&&!1===g.readable&&(this.readable=!1),g&&!1===g.writable&&(this.writable=!1),this.allowHalfOpen=!0,g&&!1===g.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",BA)}function BA(){this.allowHalfOpen||this._writableState.ended||Gg(yA,this)}function yA(g){g.end()}function wA(g){this.afterTransform=function(I,A){var C=g._transformState;C.transforming=!1;var t=C.writecb;return t?(C.writechunk=null,C.writecb=null,null!=A&&g.push(A),t(I),(I=g._readableState).reading=!1,(I.needReadable||I.length<I.highWaterMark)&&g._read(I.highWaterMark),I=void 0):I=g.emit("error",Error("no writecb in Transform class")),I},this.transforming=this.needTransform=!1,this.writeencoding=this.writechunk=this.writecb=null}function WA(g){if(!(this instanceof WA))return new WA(g);pA.call(this,g),this._transformState=new wA(this);var I=this;this._readableState.needReadable=!0,this._readableState.sync=!1,g&&("function"==typeof g.transform&&(this._transform=g.transform),"function"==typeof g.flush&&(this._flush=g.flush)),this.once("prefinish",(function(){"function"==typeof this._flush?this._flush((function(g){SA(I,g)})):SA(I)}))}function SA(g,I){if(I)return g.emit("error",I);if(I=g._transformState,g._writableState.length)throw Error("Calling transform done when ws.length != 0");if(I.transforming)throw Error("Calling transform done when still transforming");return g.push(null)}function KA(g){if(!(this instanceof KA))return new KA(g);WA.call(this,g)}function fA(){RI.call(this)}Sg(WA,pA),WA.prototype.push=function(g,I){return this._transformState.needTransform=!1,pA.prototype.push.call(this,g,I)},WA.prototype._transform=function(){throw Error("Not implemented")},WA.prototype._write=function(g,I,A){var C=this._transformState;C.writecb=A,C.writechunk=g,C.writeencoding=I,C.transforming||(g=this._readableState,(C.needTransform||g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark))},WA.prototype._read=function(){var g=this._transformState;null!==g.writechunk&&g.writecb&&!g.transforming?(g.transforming=!0,this._transform(g.writechunk,g.writeencoding,g.afterTransform)):g.needTransform=!0},Sg(KA,WA),KA.prototype._transform=function(g,I,A){A(null,g)},Sg(fA,RI),fA.Readable=xI,fA.Writable=rA,fA.Duplex=pA,fA.Transform=WA,fA.PassThrough=KA,fA.Stream=fA,fA.prototype.pipe=function(g,I){function A(I){g.writable&&!1===g.write(I)&&n.pause&&n.pause()}function C(){n.readable&&n.resume&&n.resume()}function t(){s||(s=!0,g.end())}function i(){s||(s=!0,"function"==typeof g.destroy&&g.destroy())}function e(g){if(o(),0===RI.listenerCount(this,"error"))throw g}function o(){n.removeListener("data",A),g.removeListener("drain",C),n.removeListener("end",t),n.removeListener("close",i),n.removeListener("error",e),g.removeListener("error",e),n.removeListener("end",o),n.removeListener("close",o),g.removeListener("close",o)}var n=this;n.on("data",A),g.on("drain",C),g._isStdio||I&&!1===I.end||(n.on("end",t),n.on("close",i));var s=!1;return n.on("error",e),g.on("error",e),n.on("end",o),n.on("close",o),g.on("close",o),g.emit("pipe",n),g};var YA=Array.prototype.slice,XA=function g(I,A){for(var C in A)I[C]=A[C];return 3>arguments.length?I:g.apply(null,[I].concat(YA.call(arguments,2)))},VA=m((function(g,I){function A(g,I,A){return void 0===A&&(A=function(g){return g}),function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return new Promise((function(i,e){g[I].bind(g).apply(void 0,C(t,[function(g,I){return g?e(g):i(A(I))}]))}))}}var C=d&&d.__spreadArrays||function(){for(var g=0,I=0,A=arguments.length;I<A;I++)g+=arguments[I].length;g=Array(g);var C=0;for(I=0;I<A;I++)for(var t=arguments[I],i=0,e=t.length;i<e;i++,C++)g[C]=t[i];return g};Object.defineProperty(I,"__esModule",{value:!0});var t=function(){function g(g,I){this.vol=g,this.fd=I}return g.prototype.appendFile=function(g,I){return A(this.vol,"appendFile")(this.fd,g,I)},g.prototype.chmod=function(g){return A(this.vol,"fchmod")(this.fd,g)},g.prototype.chown=function(g,I){return A(this.vol,"fchown")(this.fd,g,I)},g.prototype.close=function(){return A(this.vol,"close")(this.fd)},g.prototype.datasync=function(){return A(this.vol,"fdatasync")(this.fd)},g.prototype.read=function(g,I,C,t){return A(this.vol,"read",(function(I){return{bytesRead:I,buffer:g}}))(this.fd,g,I,C,t)},g.prototype.readFile=function(g){return A(this.vol,"readFile")(this.fd,g)},g.prototype.stat=function(g){return A(this.vol,"fstat")(this.fd,g)},g.prototype.sync=function(){return A(this.vol,"fsync")(this.fd)},g.prototype.truncate=function(g){return A(this.vol,"ftruncate")(this.fd,g)},g.prototype.utimes=function(g,I){return A(this.vol,"futimes")(this.fd,g,I)},g.prototype.write=function(g,I,C,t){return A(this.vol,"write",(function(I){return{bytesWritten:I,buffer:g}}))(this.fd,g,I,C,t)},g.prototype.writeFile=function(g,I){return A(this.vol,"writeFile")(this.fd,g,I)},g}();I.FileHandle=t,I.default=function(g){return"undefined"==typeof Promise?null:{FileHandle:t,access:function(I,C){return A(g,"access")(I,C)},appendFile:function(I,C,i){return A(g,"appendFile")(I instanceof t?I.fd:I,C,i)},chmod:function(I,C){return A(g,"chmod")(I,C)},chown:function(I,C,t){return A(g,"chown")(I,C,t)},copyFile:function(I,C,t){return A(g,"copyFile")(I,C,t)},lchmod:function(I,C){return A(g,"lchmod")(I,C)},lchown:function(I,C,t){return A(g,"lchown")(I,C,t)},link:function(I,C){return A(g,"link")(I,C)},lstat:function(I,C){return A(g,"lstat")(I,C)},mkdir:function(I,C){return A(g,"mkdir")(I,C)},mkdtemp:function(I,C){return A(g,"mkdtemp")(I,C)},open:function(I,C,i){return A(g,"open",(function(I){return new t(g,I)}))(I,C,i)},readdir:function(I,C){return A(g,"readdir")(I,C)},readFile:function(I,C){return A(g,"readFile")(I instanceof t?I.fd:I,C)},readlink:function(I,C){return A(g,"readlink")(I,C)},realpath:function(I,C){return A(g,"realpath")(I,C)},rename:function(I,C){return A(g,"rename")(I,C)},rmdir:function(I){return A(g,"rmdir")(I)},stat:function(I,C){return A(g,"stat")(I,C)},symlink:function(I,C,t){return A(g,"symlink")(I,C,t)},truncate:function(I,C){return A(g,"truncate")(I,C)},unlink:function(I){return A(g,"unlink")(I)},utimes:function(I,C,t){return A(g,"utimes")(I,C,t)},writeFile:function(I,C,i){return A(g,"writeFile")(I instanceof t?I.fd:I,C,i)}}}}));h(VA);var OA=/[^\x20-\x7E]/,RA=/[\x2E\u3002\uFF0E\uFF61]/g,QA="Overflow: input needs wider integers to process",HA=Math.floor,kA=String.fromCharCode;function JA(g,I){return g+22+75*(26>g)-((0!=I)<<5)}function vA(g){return function(g,I){var A=g.split("@"),C="";1<A.length&&(C=A[0]+"@",g=A[1]),A=(g=(g=g.replace(RA,".")).split(".")).length;for(var t=[];A--;)t[A]=I(g[A]);return C+t.join(".")}(g,(function(g){if(OA.test(g)){var I,A=[],C=[],t=0;for(I=g.length;t<I;){var i=g.charCodeAt(t++);if(55296<=i&&56319>=i&&t<I){var e=g.charCodeAt(t++);56320==(64512&e)?C.push(((1023&i)<<10)+(1023&e)+65536):(C.push(i),t--)}else C.push(i)}e=(g=C).length,C=128;var o=0,n=72;for(i=0;i<e;++i){var s=g[i];128>s&&A.push(kA(s))}for((t=I=A.length)&&A.push("-");t<e;){var l=2147483647;for(i=0;i<e;++i)(s=g[i])>=C&&s<l&&(l=s);var r=t+1;if(l-C>HA((2147483647-o)/r))throw new RangeError(QA);for(o+=(l-C)*r,C=l,i=0;i<e;++i){if((s=g[i])<C&&2147483647<++o)throw new RangeError(QA);if(s==C){var c=o;for(l=36;!(c<(s=l<=n?1:l>=n+26?26:l-n));l+=36){var a=c-s;c=36-s,A.push(kA(JA(s+a%c,0))),c=HA(a/c)}for(A.push(kA(JA(c,0))),n=r,l=0,o=t==I?HA(o/700):o>>1,o+=HA(o/n);455<o;l+=36)o=HA(o/35);n=HA(l+36*o/(o+38)),o=0,++t}}++o,++C}A="xn--"+A.join("")}else A=g;return A}))}var DA=Array.isArray||function(g){return"[object Array]"===Object.prototype.toString.call(g)};function MA(g){switch(typeof g){case"string":return g;case"boolean":return g?"true":"false";case"number":return isFinite(g)?g:"";default:return""}}function NA(g,I){if(g.map)return g.map(I);for(var A=[],C=0;C<g.length;C++)A.push(I(g[C],C));return A}var EA=Object.keys||function(g){var I,A=[];for(I in g)Object.prototype.hasOwnProperty.call(g,I)&&A.push(I);return A};function FA(g,I,A,C){A=A||"=";var t={};if("string"!=typeof g||0===g.length)return t;var i=/\+/g;for(g=g.split(I||"&"),I=1e3,C&&"number"==typeof C.maxKeys&&(I=C.maxKeys),C=g.length,0<I&&C>I&&(C=I),I=0;I<C;++I){var e=g[I].replace(i,"%20"),o=e.indexOf(A);if(0<=o){var n=e.substr(0,o);e=e.substr(o+1)}else n=e,e="";n=decodeURIComponent(n),e=decodeURIComponent(e),Object.prototype.hasOwnProperty.call(t,n)?DA(t[n])?t[n].push(e):t[n]=[t[n],e]:t[n]=e}return t}var LA={parse:tC,resolve:function(g,I){return tC(g,!1,!0).resolve(I)},resolveObject:function(g,I){return g?tC(g,!1,!0).resolveObject(I):I},format:function(g){return Eg(g)&&(g=iC({},g)),eC(g)},Url:TA};function TA(){this.href=this.path=this.pathname=this.query=this.search=this.hash=this.hostname=this.port=this.host=this.auth=this.slashes=this.protocol=null}var zA=/^([a-z0-9.+-]+:)/i,PA=/:[0-9]*$/,UA=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,xA="{}|\\^`".split("").concat('<>"` \r\n\t'.split("")),jA=["'"].concat(xA),_A=["%","/","?",";","#"].concat(jA),$A=["/","?","#"],qA=/^[+a-z0-9A-Z_-]{0,63}$/,gC=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,IC={javascript:!0,"javascript:":!0},AC={javascript:!0,"javascript:":!0},CC={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function tC(g,I,A){if(g&&Tg(g)&&g instanceof TA)return g;var C=new TA;return C.parse(g,I,A),C}function iC(g,I,A,C){if(!Eg(I))throw new TypeError("Parameter 'url' must be a string, not "+typeof I);var t=I.indexOf("?");if(t=-1!==t&&t<I.indexOf("#")?"?":"#",(I=I.split(t))[0]=I[0].replace(/\\/g,"/"),t=(I=I.join(t)).trim(),!C&&1===I.split("#").length&&(I=UA.exec(t)))return g.path=t,g.href=t,g.pathname=I[1],I[2]?(g.search=I[2],g.query=A?FA(g.search.substr(1)):g.search.substr(1)):A&&(g.search="",g.query={}),g;if(I=zA.exec(t)){var i=(I=I[0]).toLowerCase();g.protocol=i,t=t.substr(I.length)}if(C||I||t.match(/^\/\/[^@\/]+@[^@\/]+/)){var e="//"===t.substr(0,2);!e||I&&AC[I]||(t=t.substr(2),g.slashes=!0)}if(!AC[I]&&(e||I&&!CC[I])){for(I=-1,C=0;C<$A.length;C++)-1!==(e=t.indexOf($A[C]))&&(-1===I||e<I)&&(I=e);for(-1!==(e=-1===I?t.lastIndexOf("@"):t.lastIndexOf("@",I))&&(C=t.slice(0,e),t=t.slice(e+1),g.auth=decodeURIComponent(C)),I=-1,C=0;C<_A.length;C++)-1!==(e=t.indexOf(_A[C]))&&(-1===I||e<I)&&(I=e);if(-1===I&&(I=t.length),g.host=t.slice(0,I),t=t.slice(I),oC(g),g.hostname=g.hostname||"",!(e="["===g.hostname[0]&&"]"===g.hostname[g.hostname.length-1])){var o=g.hostname.split(/\./);for(C=0,I=o.length;C<I;C++){var n=o[C];if(n&&!n.match(qA)){for(var s="",l=0,r=n.length;l<r;l++)s=127<n.charCodeAt(l)?s+"x":s+n[l];if(!s.match(qA)){I=o.slice(0,C),C=o.slice(C+1),(n=n.match(gC))&&(I.push(n[1]),C.unshift(n[2])),C.length&&(t="/"+C.join(".")+t),g.hostname=I.join(".");break}}}}g.hostname=g.hostname.length>255?"":g.hostname.toLowerCase(),e||(g.hostname=vA(g.hostname)),C=g.port?":"+g.port:"",g.host=(g.hostname||"")+C,g.href+=g.host,e&&(g.hostname=g.hostname.substr(1,g.hostname.length-2),"/"!==t[0]&&(t="/"+t))}if(!IC[i])for(C=0,I=jA.length;C<I;C++)e=jA[C],-1!==t.indexOf(e)&&((n=encodeURIComponent(e))===e&&(n=escape(e)),t=t.split(e).join(n));return-1!==(C=t.indexOf("#"))&&(g.hash=t.substr(C),t=t.slice(0,C)),-1!==(C=t.indexOf("?"))?(g.search=t.substr(C),g.query=t.substr(C+1),A&&(g.query=FA(g.query)),t=t.slice(0,C)):A&&(g.search="",g.query={}),t&&(g.pathname=t),CC[i]&&g.hostname&&!g.pathname&&(g.pathname="/"),(g.pathname||g.search)&&(C=g.pathname||"",g.path=C+(g.search||"")),g.href=eC(g),g}function eC(g){var I=g.auth||"";I&&(I=(I=encodeURIComponent(I)).replace(/%3A/i,":"),I+="@");var A=g.protocol||"",C=g.pathname||"",t=g.hash||"",i=!1,e="";return g.host?i=I+g.host:g.hostname&&(i=I+(-1===g.hostname.indexOf(":")?g.hostname:"["+this.hostname+"]"),g.port&&(i+=":"+g.port)),g.query&&Tg(g.query)&&Object.keys(g.query).length&&(e=function(g,I,A,C){return I=I||"&",A=A||"=",null===g&&(g=void 0),"object"==typeof g?NA(EA(g),(function(C){var t=encodeURIComponent(MA(C))+A;return DA(g[C])?NA(g[C],(function(g){return t+encodeURIComponent(MA(g))})).join(I):t+encodeURIComponent(MA(g[C]))})).join(I):C?encodeURIComponent(MA(C))+A+encodeURIComponent(MA(g)):""}(g.query)),I=g.search||e&&"?"+e||"",A&&":"!==A.substr(-1)&&(A+=":"),g.slashes||(!A||CC[A])&&!1!==i?(i="//"+(i||""),C&&"/"!==C.charAt(0)&&(C="/"+C)):i||(i=""),t&&"#"!==t.charAt(0)&&(t="#"+t),I&&"?"!==I.charAt(0)&&(I="?"+I),A+i+(C=C.replace(/[?#]/g,(function(g){return encodeURIComponent(g)})))+(I=I.replace("#","%23"))+t}function oC(g){var I=g.host,A=PA.exec(I);A&&(":"!==(A=A[0])&&(g.port=A.substr(1)),I=I.substr(0,I.length-A.length)),I&&(g.hostname=I)}TA.prototype.parse=function(g,I,A){return iC(this,g,I,A)},TA.prototype.format=function(){return eC(this)},TA.prototype.resolve=function(g){return this.resolveObject(tC(g,!1,!0)).format()},TA.prototype.resolveObject=function(g){if(Eg(g)){var I=new TA;I.parse(g,!1,!0),g=I}I=new TA;for(var A=Object.keys(this),C=0;C<A.length;C++){var t=A[C];I[t]=this[t]}if(I.hash=g.hash,""===g.href)return I.href=I.format(),I;if(g.slashes&&!g.protocol){for(A=Object.keys(g),C=0;C<A.length;C++)"protocol"!==(t=A[C])&&(I[t]=g[t]);return CC[I.protocol]&&I.hostname&&!I.pathname&&(I.path=I.pathname="/"),I.href=I.format(),I}var i;if(g.protocol&&g.protocol!==I.protocol){if(!CC[g.protocol]){for(A=Object.keys(g),C=0;C<A.length;C++)I[t=A[C]]=g[t];return I.href=I.format(),I}if(I.protocol=g.protocol,g.host||AC[g.protocol])I.pathname=g.pathname;else{for(i=(g.pathname||"").split("/");i.length&&!(g.host=i.shift()););g.host||(g.host=""),g.hostname||(g.hostname=""),""!==i[0]&&i.unshift(""),2>i.length&&i.unshift(""),I.pathname=i.join("/")}return I.search=g.search,I.query=g.query,I.host=g.host||"",I.auth=g.auth,I.hostname=g.hostname||g.host,I.port=g.port,(I.pathname||I.search)&&(I.path=(I.pathname||"")+(I.search||"")),I.slashes=I.slashes||g.slashes,I.href=I.format(),I}A=I.pathname&&"/"===I.pathname.charAt(0);var e=g.host||g.pathname&&"/"===g.pathname.charAt(0),o=A=e||A||I.host&&g.pathname;if(C=I.pathname&&I.pathname.split("/")||[],t=I.protocol&&!CC[I.protocol],i=g.pathname&&g.pathname.split("/")||[],t&&(I.hostname="",I.port=null,I.host&&(""===C[0]?C[0]=I.host:C.unshift(I.host)),I.host="",g.protocol&&(g.hostname=null,g.port=null,g.host&&(""===i[0]?i[0]=g.host:i.unshift(g.host)),g.host=null),A=A&&(""===i[0]||""===C[0])),e)I.host=g.host||""===g.host?g.host:I.host,I.hostname=g.hostname||""===g.hostname?g.hostname:I.hostname,I.search=g.search,I.query=g.query,C=i;else if(i.length)C||(C=[]),C.pop(),C=C.concat(i),I.search=g.search,I.query=g.query;else if(null!=g.search)return t&&(I.hostname=I.host=C.shift(),t=!!(I.host&&0<I.host.indexOf("@"))&&I.host.split("@"))&&(I.auth=t.shift(),I.host=I.hostname=t.shift()),I.search=g.search,I.query=g.query,null===I.pathname&&null===I.search||(I.path=(I.pathname?I.pathname:"")+(I.search?I.search:"")),I.href=I.format(),I;if(!C.length)return I.pathname=null,I.path=I.search?"/"+I.search:null,I.href=I.format(),I;e=C.slice(-1)[0],i=(I.host||g.host||1<C.length)&&("."===e||".."===e)||""===e;for(var n=0,s=C.length;0<=s;s--)"."===(e=C[s])?C.splice(s,1):".."===e?(C.splice(s,1),n++):n&&(C.splice(s,1),n--);if(!A&&!o)for(;n--;n)C.unshift("..");return!A||""===C[0]||C[0]&&"/"===C[0].charAt(0)||C.unshift(""),i&&"/"!==C.join("/").substr(-1)&&C.push(""),o=""===C[0]||C[0]&&"/"===C[0].charAt(0),t&&(I.hostname=I.host=o?"":C.length?C.shift():"",t=!!(I.host&&0<I.host.indexOf("@"))&&I.host.split("@"))&&(I.auth=t.shift(),I.host=I.hostname=t.shift()),(A=A||I.host&&C.length)&&!o&&C.unshift(""),C.length?I.pathname=C.join("/"):(I.pathname=null,I.path=null),null===I.pathname&&null===I.search||(I.path=(I.pathname?I.pathname:"")+(I.search?I.search:"")),I.auth=g.auth||I.auth,I.slashes=I.slashes||g.slashes,I.href=I.format(),I},TA.prototype.parseHost=function(){return oC(this)};var nC=m((function(g,I){function A(g,I){return g=g[I],0<I&&("/"===g||t&&"\\"===g)}function C(g){var I=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(t){var C=g;if("string"!=typeof C)throw new TypeError("expected a string");if(C=C.replace(/[\\\/]+/g,"/"),!1!==I)if(2>(C=(I=C).length-1))C=I;else{for(;A(I,C);)C--;C=I.substr(0,C+1)}return C.replace(/^([a-zA-Z]+:|\.\/)/,"")}return g}Object.defineProperty(I,"__esModule",{value:!0}),I.unixify=C,I.correctPath=function(g){return C(g.replace(/^\\\\\?\\.:\\/,"\\"))};var t="win32"===Wg.platform}));h(nC);var sC=m((function(g,I){function A(g,I){return void 0===I&&(I=VI.default.cwd()),H(I,g)}function C(g,I){return"function"==typeof g?[t(),g]:[t(g),l(I)]}function t(g){return void 0===g&&(g={}),Q({},ag,g)}function i(g){return Q({},sg,"number"==typeof g?{mode:g}:g)}function e(g,I,A,C,t){return void 0===I&&(I=""),void 0===A&&(A=""),void 0===C&&(C=""),void 0===t&&(t=Error),(I=new t(function(g,I,A,C){void 0===I&&(I=""),void 0===A&&(A=""),void 0===C&&(C="");var t="";switch(A&&(t=" '"+A+"'"),C&&(t+=" -> '"+C+"'"),g){case"ENOENT":return"ENOENT: no such file or directory, "+I+t;case"EBADF":return"EBADF: bad file descriptor, "+I+t;case"EINVAL":return"EINVAL: invalid argument, "+I+t;case"EPERM":return"EPERM: operation not permitted, "+I+t;case"EPROTO":return"EPROTO: protocol error, "+I+t;case"EEXIST":return"EEXIST: file already exists, "+I+t;case"ENOTDIR":return"ENOTDIR: not a directory, "+I+t;case"EISDIR":return"EISDIR: illegal operation on a directory, "+I+t;case"EACCES":return"EACCES: permission denied, "+I+t;case"ENOTEMPTY":return"ENOTEMPTY: directory not empty, "+I+t;case"EMFILE":return"EMFILE: too many open files, "+I+t;case"ENOSYS":return"ENOSYS: function not implemented, "+I+t;default:return g+": error occurred, "+I+t}}(g,I,A,C))).code=g,I}function o(g){if("number"==typeof g)return g;if("string"==typeof g){var I=O[g];if(void 0!==I)return I}throw new bI.TypeError("ERR_INVALID_OPT_VALUE","flags",g)}function n(g,I){if(!I)return g;var A=typeof I;switch(A){case"string":g=Q({},g,{encoding:I});break;case"object":g=Q({},g,I);break;default:throw TypeError("Expected options to be either an object or a string, but got "+A+" instead")}return"buffer"!==g.encoding&&pI.assertEncoding(g.encoding),g}function s(g){return function(I){return n(g,I)}}function l(g){if("function"!=typeof g)throw TypeError(_.CB);return g}function r(g){return function(I,A){return"function"==typeof I?[g(),I]:[g(I),l(A)]}}function c(g){if("string"!=typeof g&&!og.Buffer.isBuffer(g)){try{if(!(g instanceof LA.URL))throw new TypeError(_.PATH_STR)}catch(C){throw new TypeError(_.PATH_STR)}if(""!==g.hostname)throw new bI.TypeError("ERR_INVALID_FILE_URL_HOST",VI.default.platform);g=g.pathname;for(var I=0;I<g.length;I++)if("%"===g[I]){var A=32|g.codePointAt(I+2);if("2"===g[I+1]&&102===A)throw new bI.TypeError("ERR_INVALID_FILE_URL_PATH","must not include encoded / characters")}g=decodeURIComponent(g)}return b(g=String(g)),g}function a(g,I){return(g=A(g,I).substr(1))?g.split(U):[]}function h(g){return a(c(g))}function m(g,I){return void 0===I&&(I=pI.ENCODING_UTF8),og.Buffer.isBuffer(g)?g:g instanceof Uint8Array?og.bufferFrom(g):og.bufferFrom(String(g),I)}function u(g,I){return I&&"buffer"!==I?g.toString(I):g}function b(g,I){if(-1!==(""+g).indexOf("\0")){if((g=Error("Path must be a string without null bytes")).code="ENOENT","function"!=typeof I)throw g;return VI.default.nextTick(I,g),!1}return!0}function p(g,I){if("number"!=typeof(g="number"==typeof g?g:"string"==typeof g?parseInt(g,8):I?p(I):void 0)||isNaN(g))throw new TypeError(_.MODE_INT);return g}function B(g){if(g>>>0!==g)throw TypeError(_.FD)}function y(g){if("string"==typeof g&&+g==g)return+g;if(g instanceof Date)return g.getTime()/1e3;if(isFinite(g))return 0>g?Date.now()/1e3:g;throw Error("Cannot parse time: "+g)}function w(g){if("number"!=typeof g)throw TypeError(_.UID)}function W(g){if("number"!=typeof g)throw TypeError(_.GID)}function S(g){g.emit("stop")}function K(g,I,A){if(!(this instanceof K))return new K(g,I,A);if(this._vol=g,void 0===(A=Q({},n(A,{}))).highWaterMark&&(A.highWaterMark=65536),fA.Readable.call(this,A),this.path=c(I),this.fd=void 0===A.fd?null:A.fd,this.flags=void 0===A.flags?"r":A.flags,this.mode=void 0===A.mode?438:A.mode,this.start=A.start,this.end=A.end,this.autoClose=void 0===A.autoClose||A.autoClose,this.pos=void 0,this.bytesRead=0,void 0!==this.start){if("number"!=typeof this.start)throw new TypeError('"start" option must be a Number');if(void 0===this.end)this.end=1/0;else if("number"!=typeof this.end)throw new TypeError('"end" option must be a Number');if(this.start>this.end)throw Error('"start" option must be <= "end" option');this.pos=this.start}"number"!=typeof this.fd&&this.open(),this.on("end",(function(){this.autoClose&&this.destroy&&this.destroy()}))}function f(){this.close()}function Y(g,I,A){if(!(this instanceof Y))return new Y(g,I,A);if(this._vol=g,A=Q({},n(A,{})),fA.Writable.call(this,A),this.path=c(I),this.fd=void 0===A.fd?null:A.fd,this.flags=void 0===A.flags?"w":A.flags,this.mode=void 0===A.mode?438:A.mode,this.start=A.start,this.autoClose=void 0===A.autoClose||!!A.autoClose,this.pos=void 0,this.bytesWritten=0,void 0!==this.start){if("number"!=typeof this.start)throw new TypeError('"start" option must be a Number');if(0>this.start)throw Error('"start" must be >= zero');this.pos=this.start}A.encoding&&this.setDefaultEncoding(A.encoding),"number"!=typeof this.fd&&this.open(),this.once("finish",(function(){this.autoClose&&this.close()}))}var X=d&&d.__extends||function(){function g(I,A){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,I){g.__proto__=I}||function(g,I){for(var A in I)I.hasOwnProperty(A)&&(g[A]=I[A])})(I,A)}return function(I,A){function C(){this.constructor=I}g(I,A),I.prototype=null===A?Object.create(A):(C.prototype=A.prototype,new C)}}(),V=d&&d.__spreadArrays||function(){for(var g=0,I=0,A=arguments.length;I<A;I++)g+=arguments[I].length;g=Array(g);var C=0;for(I=0;I<A;I++)for(var t=arguments[I],i=0,e=t.length;i<e;i++,C++)g[C]=t[i];return g};Object.defineProperty(I,"__esModule",{value:!0});var O,R,Q=XA,H=fI,k=Z.constants.O_RDONLY,J=Z.constants.O_WRONLY,v=Z.constants.O_RDWR,D=Z.constants.O_CREAT,M=Z.constants.O_EXCL,N=Z.constants.O_TRUNC,E=Z.constants.O_APPEND,F=Z.constants.O_SYNC,L=Z.constants.O_DIRECTORY,T=Z.constants.F_OK,z=Z.constants.COPYFILE_EXCL,P=Z.constants.COPYFILE_FICLONE_FORCE,U=SI,x=KI,j="win32"===VI.default.platform,_={PATH_STR:"path must be a string or Buffer",FD:"fd must be a file descriptor",MODE_INT:"mode must be an int",CB:"callback must be a function",UID:"uid must be an unsigned int",GID:"gid must be an unsigned int",LEN:"len must be an integer",ATIME:"atime must be an integer",MTIME:"mtime must be an integer",PREFIX:"filename prefix is required",BUFFER:"buffer must be an instance of Buffer or StaticBuffer",OFFSET:"offset must be an integer",LENGTH:"length must be an integer",POSITION:"position must be an integer"};(R=O=I.FLAGS||(I.FLAGS={}))[R.r=k]="r",R[R["r+"]=v]="r+",R[R.rs=k|F]="rs",R[R.sr=R.rs]="sr",R[R["rs+"]=v|F]="rs+",R[R["sr+"]=R["rs+"]]="sr+",R[R.w=J|D|N]="w",R[R.wx=J|D|N|M]="wx",R[R.xw=R.wx]="xw",R[R["w+"]=v|D|N]="w+",R[R["wx+"]=v|D|N|M]="wx+",R[R["xw+"]=R["wx+"]]="xw+",R[R.a=J|E|D]="a",R[R.ax=J|E|D|M]="ax",R[R.xa=R.ax]="xa",R[R["a+"]=v|E|D]="a+",R[R["ax+"]=v|E|D|M]="ax+",R[R["xa+"]=R["ax+"]]="xa+",I.flagsToNumber=o;var $=s(g={encoding:"utf8"}),q=r($),gg=s({flag:"r"}),Ig={encoding:"utf8",mode:438,flag:O[O.w]},Ag=s(Ig),Cg={encoding:"utf8",mode:438,flag:O[O.a]},tg=s(Cg),ig=r(tg),eg=s(g),ng=r(eg),sg={mode:511,recursive:!1},lg={recursive:!1},rg=s({encoding:"utf8",withFileTypes:!1}),cg=r(rg),ag={bigint:!1};if(I.pathToFilename=c,j){var dg=A,hg=nC.unixify;A=function(g,I){return hg(dg(g,I))}}I.filenameToSteps=a,I.pathToSteps=h,I.dataToStr=function(g,I){return void 0===I&&(I=pI.ENCODING_UTF8),og.Buffer.isBuffer(g)?g.toString(I):g instanceof Uint8Array?og.bufferFrom(g).toString(I):String(g)},I.dataToBuffer=m,I.bufferToEncoding=u,I.toUnixTimestamp=y,g=function(){function g(g){void 0===g&&(g={}),this.ino=0,this.inodes={},this.releasedInos=[],this.fds={},this.releasedFds=[],this.maxFiles=1e4,this.openFiles=0,this.promisesApi=VA.default(this),this.statWatchers={},this.props=Q({Node:vI.Node,Link:vI.Link,File:vI.File},g),(g=this.createLink()).setNode(this.createNode(!0));var I=this;this.StatWatcher=function(g){function A(){return g.call(this,I)||this}return X(A,g),A}(Zg),this.ReadStream=function(g){function A(){for(var A=[],C=0;C<arguments.length;C++)A[C]=arguments[C];return g.apply(this,V([I],A))||this}return X(A,g),A}(K),this.WriteStream=function(g){function A(){for(var A=[],C=0;C<arguments.length;C++)A[C]=arguments[C];return g.apply(this,V([I],A))||this}return X(A,g),A}(Y),this.FSWatcher=function(g){function A(){return g.call(this,I)||this}return X(A,g),A}(ug),this.root=g}return g.fromJSON=function(I,A){var C=new g;return C.fromJSON(I,A),C},Object.defineProperty(g.prototype,"promises",{get:function(){if(null===this.promisesApi)throw Error("Promise is not supported in this environment.");return this.promisesApi},enumerable:!0,configurable:!0}),g.prototype.createLink=function(g,I,A,C){if(void 0===A&&(A=!1),!g)return new this.props.Link(this,null,"");if(!I)throw Error("createLink: name cannot be empty");return g.createChild(I,this.createNode(A,C))},g.prototype.deleteLink=function(g){var I=g.parent;return!!I&&(I.deleteChild(g),!0)},g.prototype.newInoNumber=function(){var g=this.releasedInos.pop();return g||(this.ino=(this.ino+1)%4294967295)},g.prototype.newFdNumber=function(){var I=this.releasedFds.pop();return"number"==typeof I?I:g.fd--},g.prototype.createNode=function(g,I){return void 0===g&&(g=!1),I=new this.props.Node(this.newInoNumber(),I),g&&I.setIsDirectory(),this.inodes[I.ino]=I},g.prototype.getNode=function(g){return this.inodes[g]},g.prototype.deleteNode=function(g){g.del(),delete this.inodes[g.ino],this.releasedInos.push(g.ino)},g.prototype.genRndStr=function(){var g=(Math.random()+1).toString(36).substr(2,6);return 6===g.length?g:this.genRndStr()},g.prototype.getLink=function(g){return this.root.walk(g)},g.prototype.getLinkOrThrow=function(g,I){var A=a(g);if(!(A=this.getLink(A)))throw e("ENOENT",I,g);return A},g.prototype.getResolvedLink=function(g){g="string"==typeof g?a(g):g;for(var I=this.root,A=0;A<g.length;){if(!(I=I.getChild(g[A])))return null;var C=I.getNode();C.isSymlink()?(g=C.symlink.concat(g.slice(A+1)),I=this.root,A=0):A++}return I},g.prototype.getResolvedLinkOrThrow=function(g,I){var A=this.getResolvedLink(g);if(!A)throw e("ENOENT",I,g);return A},g.prototype.resolveSymlinks=function(g){return this.getResolvedLink(g.steps.slice(1))},g.prototype.getLinkAsDirOrThrow=function(g,I){var A=this.getLinkOrThrow(g,I);if(!A.getNode().isDirectory())throw e("ENOTDIR",I,g);return A},g.prototype.getLinkParent=function(g){return this.root.walk(g,g.length-1)},g.prototype.getLinkParentAsDirOrThrow=function(g,I){g=g instanceof Array?g:a(g);var A=this.getLinkParent(g);if(!A)throw e("ENOENT",I,U+g.join(U));if(!A.getNode().isDirectory())throw e("ENOTDIR",I,U+g.join(U));return A},g.prototype.getFileByFd=function(g){return this.fds[String(g)]},g.prototype.getFileByFdOrThrow=function(g,I){if(g>>>0!==g)throw TypeError(_.FD);if(!(g=this.getFileByFd(g)))throw e("EBADF",I);return g},g.prototype.getNodeByIdOrCreate=function(g,I,A){if("number"==typeof g){if(!(g=this.getFileByFd(g)))throw Error("File nto found");return g.node}var C=h(g),t=this.getLink(C);if(t)return t.getNode();if(I&D&&(I=this.getLinkParent(C)))return(t=this.createLink(I,C[C.length-1],!1,A)).getNode();throw e("ENOENT","getNodeByIdOrCreate",c(g))},g.prototype.wrapAsync=function(g,I,A){var C=this;l(A),XI.default((function(){try{A(null,g.apply(C,I))}catch(t){A(t)}}))},g.prototype._toJSON=function(g,I,A){var C;void 0===g&&(g=this.root),void 0===I&&(I={});var t=!0,i=g.children;for(var e in g.getNode().isFile()&&((C={})[g.getName()]=g.parent.getChild(g.getName()),i=C,g=g.parent),i){if(t=!1,!(i=g.getChild(e)))throw Error("_toJSON: unexpected undefined");(C=i.getNode()).isFile()?(i=i.getPath(),A&&(i=x(A,i)),I[i]=C.getString()):C.isDirectory()&&this._toJSON(i,I,A)}return g=g.getPath(),A&&(g=x(A,g)),g&&t&&(I[g]=null),I},g.prototype.toJSON=function(g,I,A){void 0===I&&(I={}),void 0===A&&(A=!1);var C=[];if(g){g instanceof Array||(g=[g]);for(var t=0;t<g.length;t++){var i=c(g[t]);(i=this.getResolvedLink(i))&&C.push(i)}}else C.push(this.root);if(!C.length)return I;for(t=0;t<C.length;t++)i=C[t],this._toJSON(i,I,A?i.getPath():"");return I},g.prototype.fromJSON=function(g,I){for(var C in void 0===I&&(I=VI.default.cwd()),g){var t=g[C];if("string"==typeof t){var i=a(C=A(C,I));1<i.length&&(i=U+i.slice(0,i.length-1).join(U),this.mkdirpBase(i,511)),this.writeFileSync(C,t)}else this.mkdirpBase(C,511)}},g.prototype.reset=function(){this.ino=0,this.inodes={},this.releasedInos=[],this.fds={},this.releasedFds=[],this.openFiles=0,this.root=this.createLink(),this.root.setNode(this.createNode(!0))},g.prototype.mountSync=function(g,I){this.fromJSON(I,g)},g.prototype.openLink=function(g,I,A){if(void 0===A&&(A=!0),this.openFiles>=this.maxFiles)throw e("EMFILE","open",g.getPath());var C=g;if(A&&(C=this.resolveSymlinks(g)),!C)throw e("ENOENT","open",g.getPath());if((A=C.getNode()).isDirectory()){if((I&(k|v|J))!==k)throw e("EISDIR","open",g.getPath())}else if(I&L)throw e("ENOTDIR","open",g.getPath());if(!(I&J||A.canRead()))throw e("EACCES","open",g.getPath());return g=new this.props.File(g,A,I,this.newFdNumber()),this.fds[g.fd]=g,this.openFiles++,I&N&&g.truncate(),g},g.prototype.openFile=function(g,I,A,C){void 0===C&&(C=!0);var t=a(g),i=C?this.getResolvedLink(t):this.getLink(t);if(!i&&I&D){var o=this.getResolvedLink(t.slice(0,t.length-1));if(!o)throw e("ENOENT","open",U+t.join(U));I&D&&"number"==typeof A&&(i=this.createLink(o,t[t.length-1],!1,A))}if(i)return this.openLink(i,I,C);throw e("ENOENT","open",g)},g.prototype.openBase=function(g,I,A,C){if(void 0===C&&(C=!0),!(I=this.openFile(g,I,A,C)))throw e("ENOENT","open",g);return I.fd},g.prototype.openSync=function(g,I,A){return void 0===A&&(A=438),A=p(A),g=c(g),I=o(I),this.openBase(g,I,A)},g.prototype.open=function(g,I,A,C){var t=A;"function"==typeof A&&(t=438,C=A),A=p(t||438),g=c(g),I=o(I),this.wrapAsync(this.openBase,[g,I,A],C)},g.prototype.closeFile=function(g){this.fds[g.fd]&&(this.openFiles--,delete this.fds[g.fd],this.releasedFds.push(g.fd))},g.prototype.closeSync=function(g){B(g),g=this.getFileByFdOrThrow(g,"close"),this.closeFile(g)},g.prototype.close=function(g,I){B(g),this.wrapAsync(this.closeSync,[g],I)},g.prototype.openFileOrGetById=function(g,I,A){if("number"==typeof g){if(!(g=this.fds[g]))throw e("ENOENT");return g}return this.openFile(c(g),I,A)},g.prototype.readBase=function(g,I,A,C,t){return this.getFileByFdOrThrow(g).read(I,Number(A),Number(C),t)},g.prototype.readSync=function(g,I,A,C,t){return B(g),this.readBase(g,I,A,C,t)},g.prototype.read=function(g,I,A,C,t,i){var e=this;if(l(i),0===C)return VI.default.nextTick((function(){i&&i(null,0,I)}));XI.default((function(){try{var o=e.readBase(g,I,A,C,t);i(null,o,I)}catch(n){i(n)}}))},g.prototype.readFileBase=function(g,I,A){var C="number"==typeof g&&g>>>0===g;if(!C){var t=c(g);if(t=a(t),(t=this.getResolvedLink(t))&&t.getNode().isDirectory())throw e("EISDIR","open",t.getPath());g=this.openSync(g,I)}try{var i=u(this.getFileByFdOrThrow(g).getBuffer(),A)}finally{C||this.closeSync(g)}return i},g.prototype.readFileSync=function(g,I){var A=o((I=gg(I)).flag);return this.readFileBase(g,A,I.encoding)},g.prototype.readFile=function(g,I,A){I=(A=r(gg)(I,A))[0],A=A[1];var C=o(I.flag);this.wrapAsync(this.readFileBase,[g,C,I.encoding],A)},g.prototype.writeBase=function(g,I,A,C,t){return this.getFileByFdOrThrow(g,"write").write(I,A,C,t)},g.prototype.writeSync=function(g,I,A,C,t){B(g);var i="string"!=typeof I;if(i){var e=0|(A||0),o=C;A=t}else var n=C;return I=m(I,n),i?void 0===o&&(o=I.length):(e=0,o=I.length),this.writeBase(g,I,e,o,A)},g.prototype.write=function(g,I,A,C,t,i){var e=this;B(g);var o=typeof I,n=typeof A,s=typeof C,r=typeof t;if("string"!==o)if("function"===n)var c=A;else if("function"===s){var a=0|A;c=C}else if("function"===r){a=0|A;var d=C;c=t}else{a=0|A,d=C;var h=t;c=i}else if("function"===n)c=A;else if("function"===s)h=A,c=C;else if("function"===r){h=A;var Z=C;c=t}var u=m(I,Z);"string"!==o?void 0===d&&(d=u.length):(a=0,d=u.length);var G=l(c);XI.default((function(){try{var A=e.writeBase(g,u,a,d,h);G(null,A,"string"!==o?u:I)}catch(C){G(C)}}))},g.prototype.writeFileBase=function(g,I,A,C){var t="number"==typeof g;g=t?g:this.openBase(c(g),A,C),C=0;var i=I.length;A=A&E?void 0:0;try{for(;0<i;){var e=this.writeSync(g,I,C,i,A);C+=e,i-=e,void 0!==A&&(A+=e)}}finally{t||this.closeSync(g)}},g.prototype.writeFileSync=function(g,I,A){var C=Ag(A);A=o(C.flag);var t=p(C.mode);I=m(I,C.encoding),this.writeFileBase(g,I,A,t)},g.prototype.writeFile=function(g,I,A,C){var t=A;"function"==typeof A&&(t=Ig,C=A),A=l(C);var i=Ag(t);t=o(i.flag),C=p(i.mode),I=m(I,i.encoding),this.wrapAsync(this.writeFileBase,[g,I,t,C],A)},g.prototype.linkBase=function(g,I){var A=a(g),C=this.getLink(A);if(!C)throw e("ENOENT","link",g,I);var t=a(I);if(!(A=this.getLinkParent(t)))throw e("ENOENT","link",g,I);if(t=t[t.length-1],A.getChild(t))throw e("EEXIST","link",g,I);(g=C.getNode()).nlink++,A.createChild(t,g)},g.prototype.copyFileBase=function(g,I,A){var C=this.readFileSync(g);if(A&z&&this.existsSync(I))throw e("EEXIST","copyFile",g,I);if(A&P)throw e("ENOSYS","copyFile",g,I);this.writeFileBase(I,C,O.w,438)},g.prototype.copyFileSync=function(g,I,A){return g=c(g),I=c(I),this.copyFileBase(g,I,0|(A||0))},g.prototype.copyFile=function(g,I,A,C){if(g=c(g),I=c(I),"function"==typeof A)var t=0;else t=A,A=C;l(A),this.wrapAsync(this.copyFileBase,[g,I,t],A)},g.prototype.linkSync=function(g,I){g=c(g),I=c(I),this.linkBase(g,I)},g.prototype.link=function(g,I,A){g=c(g),I=c(I),this.wrapAsync(this.linkBase,[g,I],A)},g.prototype.unlinkBase=function(g){var I=a(g);if(!(I=this.getLink(I)))throw e("ENOENT","unlink",g);if(I.length)throw Error("Dir not empty...");this.deleteLink(I),(g=I.getNode()).nlink--,0>=g.nlink&&this.deleteNode(g)},g.prototype.unlinkSync=function(g){g=c(g),this.unlinkBase(g)},g.prototype.unlink=function(g,I){g=c(g),this.wrapAsync(this.unlinkBase,[g],I)},g.prototype.symlinkBase=function(g,I){var A=a(I),C=this.getLinkParent(A);if(!C)throw e("ENOENT","symlink",g,I);if(A=A[A.length-1],C.getChild(A))throw e("EEXIST","symlink",g,I);return(I=C.createChild(A)).getNode().makeSymlink(a(g)),I},g.prototype.symlinkSync=function(g,I){g=c(g),I=c(I),this.symlinkBase(g,I)},g.prototype.symlink=function(g,I,A,C){A=l("function"==typeof A?A:C),g=c(g),I=c(I),this.wrapAsync(this.symlinkBase,[g,I],A)},g.prototype.realpathBase=function(g,I){var A=a(g);if(!(A=this.getResolvedLink(A)))throw e("ENOENT","realpath",g);return pI.strToEncoding(A.getPath(),I)},g.prototype.realpathSync=function(g,I){return this.realpathBase(c(g),eg(I).encoding)},g.prototype.realpath=function(g,I,A){I=(A=ng(I,A))[0],A=A[1],g=c(g),this.wrapAsync(this.realpathBase,[g,I.encoding],A)},g.prototype.lstatBase=function(g,I){void 0===I&&(I=!1);var A=this.getLink(a(g));if(!A)throw e("ENOENT","lstat",g);return G.default.build(A.getNode(),I)},g.prototype.lstatSync=function(g,I){return this.lstatBase(c(g),t(I).bigint)},g.prototype.lstat=function(g,I,A){I=(A=C(I,A))[0],A=A[1],this.wrapAsync(this.lstatBase,[c(g),I.bigint],A)},g.prototype.statBase=function(g,I){void 0===I&&(I=!1);var A=this.getResolvedLink(a(g));if(!A)throw e("ENOENT","stat",g);return G.default.build(A.getNode(),I)},g.prototype.statSync=function(g,I){return this.statBase(c(g),t(I).bigint)},g.prototype.stat=function(g,I,A){I=(A=C(I,A))[0],A=A[1],this.wrapAsync(this.statBase,[c(g),I.bigint],A)},g.prototype.fstatBase=function(g,I){if(void 0===I&&(I=!1),!(g=this.getFileByFd(g)))throw e("EBADF","fstat");return G.default.build(g.node,I)},g.prototype.fstatSync=function(g,I){return this.fstatBase(g,t(I).bigint)},g.prototype.fstat=function(g,I,A){I=C(I,A),this.wrapAsync(this.fstatBase,[g,I[0].bigint],I[1])},g.prototype.renameBase=function(g,I){var A=this.getLink(a(g));if(!A)throw e("ENOENT","rename",g,I);var C=a(I),t=this.getLinkParent(C);if(!t)throw e("ENOENT","rename",g,I);(g=A.parent)&&g.deleteChild(A),A.steps=V(t.steps,[C[C.length-1]]),t.setChild(A.getName(),A)},g.prototype.renameSync=function(g,I){g=c(g),I=c(I),this.renameBase(g,I)},g.prototype.rename=function(g,I,A){g=c(g),I=c(I),this.wrapAsync(this.renameBase,[g,I],A)},g.prototype.existsBase=function(g){return!!this.statBase(g)},g.prototype.existsSync=function(g){try{return this.existsBase(c(g))}catch(I){return!1}},g.prototype.exists=function(g,I){var A=this,C=c(g);if("function"!=typeof I)throw Error(_.CB);XI.default((function(){try{I(A.existsBase(C))}catch(g){I(!1)}}))},g.prototype.accessBase=function(g){this.getLinkOrThrow(g,"access")},g.prototype.accessSync=function(g,I){void 0===I&&(I=T),g=c(g),this.accessBase(g,0|I)},g.prototype.access=function(g,I,A){var C=T;"function"!=typeof I&&(C=0|I,I=l(A)),g=c(g),this.wrapAsync(this.accessBase,[g,C],I)},g.prototype.appendFileSync=function(g,I,A){void 0===A&&(A=Cg),(A=tg(A)).flag&&g>>>0!==g||(A.flag="a"),this.writeFileSync(g,I,A)},g.prototype.appendFile=function(g,I,A,C){A=(C=ig(A,C))[0],C=C[1],A.flag&&g>>>0!==g||(A.flag="a"),this.writeFile(g,I,A,C)},g.prototype.readdirBase=function(g,I){var A=a(g);if(!(A=this.getResolvedLink(A)))throw e("ENOENT","readdir",g);if(!A.getNode().isDirectory())throw e("ENOTDIR","scandir",g);if(I.withFileTypes){var C=[];for(t in A.children)(g=A.getChild(t))&&C.push(BI.default.build(g,I.encoding));return j||"buffer"===I.encoding||C.sort((function(g,I){return g.name<I.name?-1:g.name>I.name?1:0})),C}var t=[];for(C in A.children)t.push(pI.strToEncoding(C,I.encoding));return j||"buffer"===I.encoding||t.sort(),t},g.prototype.readdirSync=function(g,I){return I=rg(I),g=c(g),this.readdirBase(g,I)},g.prototype.readdir=function(g,I,A){I=(A=cg(I,A))[0],A=A[1],g=c(g),this.wrapAsync(this.readdirBase,[g,I],A)},g.prototype.readlinkBase=function(g,I){var A=this.getLinkOrThrow(g,"readlink").getNode();if(!A.isSymlink())throw e("EINVAL","readlink",g);return g=U+A.symlink.join(U),pI.strToEncoding(g,I)},g.prototype.readlinkSync=function(g,I){return I=$(I),g=c(g),this.readlinkBase(g,I.encoding)},g.prototype.readlink=function(g,I,A){I=(A=q(I,A))[0],A=A[1],g=c(g),this.wrapAsync(this.readlinkBase,[g,I.encoding],A)},g.prototype.fsyncBase=function(g){this.getFileByFdOrThrow(g,"fsync")},g.prototype.fsyncSync=function(g){this.fsyncBase(g)},g.prototype.fsync=function(g,I){this.wrapAsync(this.fsyncBase,[g],I)},g.prototype.fdatasyncBase=function(g){this.getFileByFdOrThrow(g,"fdatasync")},g.prototype.fdatasyncSync=function(g){this.fdatasyncBase(g)},g.prototype.fdatasync=function(g,I){this.wrapAsync(this.fdatasyncBase,[g],I)},g.prototype.ftruncateBase=function(g,I){this.getFileByFdOrThrow(g,"ftruncate").truncate(I)},g.prototype.ftruncateSync=function(g,I){this.ftruncateBase(g,I)},g.prototype.ftruncate=function(g,I,A){var C="number"==typeof I?I:0;I=l("number"==typeof I?A:I),this.wrapAsync(this.ftruncateBase,[g,C],I)},g.prototype.truncateBase=function(g,I){g=this.openSync(g,"r+");try{this.ftruncateSync(g,I)}finally{this.closeSync(g)}},g.prototype.truncateSync=function(g,I){if(g>>>0===g)return this.ftruncateSync(g,I);this.truncateBase(g,I)},g.prototype.truncate=function(g,I,A){var C="number"==typeof I?I:0;if(I=l("number"==typeof I?A:I),g>>>0===g)return this.ftruncate(g,C,I);this.wrapAsync(this.truncateBase,[g,C],I)},g.prototype.futimesBase=function(g,I,A){(g=this.getFileByFdOrThrow(g,"futimes").node).atime=new Date(1e3*I),g.mtime=new Date(1e3*A)},g.prototype.futimesSync=function(g,I,A){this.futimesBase(g,y(I),y(A))},g.prototype.futimes=function(g,I,A,C){this.wrapAsync(this.futimesBase,[g,y(I),y(A)],C)},g.prototype.utimesBase=function(g,I,A){g=this.openSync(g,"r+");try{this.futimesBase(g,I,A)}finally{this.closeSync(g)}},g.prototype.utimesSync=function(g,I,A){this.utimesBase(c(g),y(I),y(A))},g.prototype.utimes=function(g,I,A,C){this.wrapAsync(this.utimesBase,[c(g),y(I),y(A)],C)},g.prototype.mkdirBase=function(g,I){var A=a(g);if(!A.length)throw e("EISDIR","mkdir",g);var C=this.getLinkParentAsDirOrThrow(g,"mkdir");if(A=A[A.length-1],C.getChild(A))throw e("EEXIST","mkdir",g);C.createChild(A,this.createNode(!0,I))},g.prototype.mkdirpBase=function(g,I){g=a(g);for(var A=this.root,C=0;C<g.length;C++){var t=g[C];if(!A.getNode().isDirectory())throw e("ENOTDIR","mkdir",A.getPath());var i=A.getChild(t);if(i){if(!i.getNode().isDirectory())throw e("ENOTDIR","mkdir",i.getPath());A=i}else A=A.createChild(t,this.createNode(!0,I))}},g.prototype.mkdirSync=function(g,I){var A=p((I=i(I)).mode,511);g=c(g),I.recursive?this.mkdirpBase(g,A):this.mkdirBase(g,A)},g.prototype.mkdir=function(g,I,A){var C=i(I);I=l("function"==typeof I?I:A),A=p(C.mode,511),g=c(g),C.recursive?this.wrapAsync(this.mkdirpBase,[g,A],I):this.wrapAsync(this.mkdirBase,[g,A],I)},g.prototype.mkdirpSync=function(g,I){this.mkdirSync(g,{mode:I,recursive:!0})},g.prototype.mkdirp=function(g,I,A){var C="function"==typeof I?void 0:I;I=l("function"==typeof I?I:A),this.mkdir(g,{mode:C,recursive:!0},I)},g.prototype.mkdtempBase=function(g,I,A){void 0===A&&(A=5);var C=g+this.genRndStr();try{return this.mkdirBase(C,511),pI.strToEncoding(C,I)}catch(t){if("EEXIST"===t.code){if(1<A)return this.mkdtempBase(g,I,A-1);throw Error("Could not create temp dir.")}throw t}},g.prototype.mkdtempSync=function(g,I){if(I=$(I).encoding,!g||"string"!=typeof g)throw new TypeError("filename prefix is required");return b(g),this.mkdtempBase(g,I)},g.prototype.mkdtemp=function(g,I,A){if(I=(A=q(I,A))[0].encoding,A=A[1],!g||"string"!=typeof g)throw new TypeError("filename prefix is required");b(g)&&this.wrapAsync(this.mkdtempBase,[g,I],A)},g.prototype.rmdirBase=function(g,I){I=Q({},lg,I);var A=this.getLinkAsDirOrThrow(g,"rmdir");if(A.length&&!I.recursive)throw e("ENOTEMPTY","rmdir",g);this.deleteLink(A)},g.prototype.rmdirSync=function(g,I){this.rmdirBase(c(g),I)},g.prototype.rmdir=function(g,I,A){var C=Q({},lg,I);I=l("function"==typeof I?I:A),this.wrapAsync(this.rmdirBase,[c(g),C],I)},g.prototype.fchmodBase=function(g,I){this.getFileByFdOrThrow(g,"fchmod").chmod(I)},g.prototype.fchmodSync=function(g,I){this.fchmodBase(g,p(I))},g.prototype.fchmod=function(g,I,A){this.wrapAsync(this.fchmodBase,[g,p(I)],A)},g.prototype.chmodBase=function(g,I){g=this.openSync(g,"r+");try{this.fchmodBase(g,I)}finally{this.closeSync(g)}},g.prototype.chmodSync=function(g,I){I=p(I),g=c(g),this.chmodBase(g,I)},g.prototype.chmod=function(g,I,A){I=p(I),g=c(g),this.wrapAsync(this.chmodBase,[g,I],A)},g.prototype.lchmodBase=function(g,I){g=this.openBase(g,v,0,!1);try{this.fchmodBase(g,I)}finally{this.closeSync(g)}},g.prototype.lchmodSync=function(g,I){I=p(I),g=c(g),this.lchmodBase(g,I)},g.prototype.lchmod=function(g,I,A){I=p(I),g=c(g),this.wrapAsync(this.lchmodBase,[g,I],A)},g.prototype.fchownBase=function(g,I,A){this.getFileByFdOrThrow(g,"fchown").chown(I,A)},g.prototype.fchownSync=function(g,I,A){w(I),W(A),this.fchownBase(g,I,A)},g.prototype.fchown=function(g,I,A,C){w(I),W(A),this.wrapAsync(this.fchownBase,[g,I,A],C)},g.prototype.chownBase=function(g,I,A){this.getResolvedLinkOrThrow(g,"chown").getNode().chown(I,A)},g.prototype.chownSync=function(g,I,A){w(I),W(A),this.chownBase(c(g),I,A)},g.prototype.chown=function(g,I,A,C){w(I),W(A),this.wrapAsync(this.chownBase,[c(g),I,A],C)},g.prototype.lchownBase=function(g,I,A){this.getLinkOrThrow(g,"lchown").getNode().chown(I,A)},g.prototype.lchownSync=function(g,I,A){w(I),W(A),this.lchownBase(c(g),I,A)},g.prototype.lchown=function(g,I,A,C){w(I),W(A),this.wrapAsync(this.lchownBase,[c(g),I,A],C)},g.prototype.watchFile=function(g,I,A){g=c(g);var C=I;if("function"==typeof C&&(A=I,C=null),"function"!=typeof A)throw Error('"watchFile()" requires a listener function');I=5007;var t=!0;return C&&"object"==typeof C&&("number"==typeof C.interval&&(I=C.interval),"boolean"==typeof C.persistent&&(t=C.persistent)),(C=this.statWatchers[g])||((C=new this.StatWatcher).start(g,t,I),this.statWatchers[g]=C),C.addListener("change",A),C},g.prototype.unwatchFile=function(g,I){g=c(g);var A=this.statWatchers[g];A&&("function"==typeof I?A.removeListener("change",I):A.removeAllListeners("change"),0===A.listenerCount("change")&&(A.stop(),delete this.statWatchers[g]))},g.prototype.createReadStream=function(g,I){return new this.ReadStream(g,I)},g.prototype.createWriteStream=function(g,I){return new this.WriteStream(g,I)},g.prototype.watch=function(g,I,A){g=c(g);var C=I;"function"==typeof I&&(A=I,C=null);var t=$(C);I=t.persistent,C=t.recursive,t=t.encoding,void 0===I&&(I=!0),void 0===C&&(C=!1);var i=new this.FSWatcher;return i.start(g,I,C,t),A&&i.addListener("change",A),i},g.fd=2147483647,g}(),I.Volume=g;var mg,Zg=function(g){function I(I){var A=g.call(this)||this;return A.onInterval=function(){try{var g=A.vol.statSync(A.filename);A.hasChanged(g)&&(A.emit("change",g,A.prev),A.prev=g)}finally{A.loop()}},A.vol=I,A}return X(I,g),I.prototype.loop=function(){this.timeoutRef=this.setTimeout(this.onInterval,this.interval)},I.prototype.hasChanged=function(g){return g.mtimeMs>this.prev.mtimeMs||g.nlink!==this.prev.nlink},I.prototype.start=function(g,I,A){void 0===I&&(I=!0),void 0===A&&(A=5007),this.filename=c(g),this.setTimeout=I?setTimeout:MI.default,this.interval=A,this.prev=this.vol.statSync(this.filename),this.loop()},I.prototype.stop=function(){clearTimeout(this.timeoutRef),VI.default.nextTick(S,this)},I}(RI.EventEmitter);I.StatWatcher=Zg,gI.inherits(K,fA.Readable),I.ReadStream=K,K.prototype.open=function(){var g=this;this._vol.open(this.path,this.flags,this.mode,(function(I,A){I?(g.autoClose&&g.destroy&&g.destroy(),g.emit("error",I)):(g.fd=A,g.emit("open",A),g.read())}))},K.prototype._read=function(g){if("number"!=typeof this.fd)return this.once("open",(function(){this._read(g)}));if(!this.destroyed){(!mg||128>mg.length-mg.used)&&((mg=og.bufferAllocUnsafe(this._readableState.highWaterMark)).used=0);var I=mg,A=Math.min(mg.length-mg.used,g),C=mg.used;if(void 0!==this.pos&&(A=Math.min(this.end-this.pos+1,A)),0>=A)return this.push(null);var t=this;this._vol.read(this.fd,mg,mg.used,A,this.pos,(function(g,A){g?(t.autoClose&&t.destroy&&t.destroy(),t.emit("error",g)):(g=null,0<A&&(t.bytesRead+=A,g=I.slice(C,C+A)),t.push(g))})),void 0!==this.pos&&(this.pos+=A),mg.used+=A}},K.prototype._destroy=function(g,I){this.close((function(A){I(g||A)}))},K.prototype.close=function(g){var I=this;if(g&&this.once("close",g),this.closed||"number"!=typeof this.fd)return"number"!=typeof this.fd?void this.once("open",f):VI.default.nextTick((function(){return I.emit("close")}));this.closed=!0,this._vol.close(this.fd,(function(g){g?I.emit("error",g):I.emit("close")})),this.fd=null},gI.inherits(Y,fA.Writable),I.WriteStream=Y,Y.prototype.open=function(){this._vol.open(this.path,this.flags,this.mode,function(g,I){g?(this.autoClose&&this.destroy&&this.destroy(),this.emit("error",g)):(this.fd=I,this.emit("open",I))}.bind(this))},Y.prototype._write=function(g,I,A){if(!(g instanceof og.Buffer))return this.emit("error",Error("Invalid data"));if("number"!=typeof this.fd)return this.once("open",(function(){this._write(g,I,A)}));var C=this;this._vol.write(this.fd,g,0,g.length,this.pos,(function(g,I){if(g)return C.autoClose&&C.destroy&&C.destroy(),A(g);C.bytesWritten+=I,A()})),void 0!==this.pos&&(this.pos+=g.length)},Y.prototype._writev=function(g,I){if("number"!=typeof this.fd)return this.once("open",(function(){this._writev(g,I)}));for(var A=this,C=g.length,t=Array(C),i=0,e=0;e<C;e++){var o=g[e].chunk;t[e]=o,i+=o.length}C=og.Buffer.concat(t),this._vol.write(this.fd,C,0,C.length,this.pos,(function(g,C){if(g)return A.destroy&&A.destroy(),I(g);A.bytesWritten+=C,I()})),void 0!==this.pos&&(this.pos+=i)},Y.prototype._destroy=K.prototype._destroy,Y.prototype.close=K.prototype.close,Y.prototype.destroySoon=Y.prototype.end;var ug=function(g){function I(I){var A=g.call(this)||this;return A._filename="",A._filenameEncoded="",A._recursive=!1,A._encoding=pI.ENCODING_UTF8,A._onNodeChange=function(){A._emit("change")},A._onParentChild=function(g){g.getName()===A._getName()&&A._emit("rename")},A._emit=function(g){A.emit("change",g,A._filenameEncoded)},A._persist=function(){A._timer=setTimeout(A._persist,1e6)},A._vol=I,A}return X(I,g),I.prototype._getName=function(){return this._steps[this._steps.length-1]},I.prototype.start=function(g,I,A,C){void 0===I&&(I=!0),void 0===A&&(A=!1),void 0===C&&(C=pI.ENCODING_UTF8),this._filename=c(g),this._steps=a(this._filename),this._filenameEncoded=pI.strToEncoding(this._filename),this._recursive=A,this._encoding=C;try{this._link=this._vol.getLinkOrThrow(this._filename,"FSWatcher")}catch(t){throw(I=Error("watch "+this._filename+" "+t.code)).code=t.code,I.errno=t.code,I}this._link.getNode().on("change",this._onNodeChange),this._link.on("child:add",this._onNodeChange),this._link.on("child:delete",this._onNodeChange),(g=this._link.parent)&&(g.setMaxListeners(g.getMaxListeners()+1),g.on("child:delete",this._onParentChild)),I&&this._persist()},I.prototype.close=function(){clearTimeout(this._timer),this._link.getNode().removeListener("change",this._onNodeChange);var g=this._link.parent;g&&g.removeListener("child:delete",this._onParentChild)},I}(RI.EventEmitter);I.FSWatcher=ug}));h(sC);var lC=sC.pathToFilename,rC=sC.filenameToSteps,cC=sC.Volume,aC=m((function(g,I){Object.defineProperty(I,"__esModule",{value:!0}),I.fsProps="constants F_OK R_OK W_OK X_OK Stats".split(" "),I.fsSyncMethods="renameSync ftruncateSync truncateSync chownSync fchownSync lchownSync chmodSync fchmodSync lchmodSync statSync lstatSync fstatSync linkSync symlinkSync readlinkSync realpathSync unlinkSync rmdirSync mkdirSync mkdirpSync readdirSync closeSync openSync utimesSync futimesSync fsyncSync writeSync readSync readFileSync writeFileSync appendFileSync existsSync accessSync fdatasyncSync mkdtempSync copyFileSync createReadStream createWriteStream".split(" "),I.fsAsyncMethods="rename ftruncate truncate chown fchown lchown chmod fchmod lchmod stat lstat fstat link symlink readlink realpath unlink rmdir mkdir mkdirp readdir close open utimes futimes fsync write read readFile writeFile appendFile exists access fdatasync mkdtemp copyFile watchFile unwatchFile watch".split(" ")}));h(aC);var dC=m((function(g,I){function A(g){for(var I={F_OK:e,R_OK:o,W_OK:n,X_OK:s,constants:Z.constants,Stats:G.default,Dirent:BI.default},A=0,C=t;A<C.length;A++){var l=C[A];"function"==typeof g[l]&&(I[l]=g[l].bind(g))}for(A=0,C=i;A<C.length;A++)"function"==typeof g[l=C[A]]&&(I[l]=g[l].bind(g));return I.StatWatcher=g.StatWatcher,I.FSWatcher=g.FSWatcher,I.WriteStream=g.WriteStream,I.ReadStream=g.ReadStream,I.promises=g.promises,I._toUnixTimestamp=sC.toUnixTimestamp,I}var C=d&&d.__assign||function(){return(C=Object.assign||function(g){for(var I,A=1,C=arguments.length;A<C;A++)for(var t in I=arguments[A])Object.prototype.hasOwnProperty.call(I,t)&&(g[t]=I[t]);return g}).apply(this,arguments)};Object.defineProperty(I,"__esModule",{value:!0});var t=aC.fsSyncMethods,i=aC.fsAsyncMethods,e=Z.constants.F_OK,o=Z.constants.R_OK,n=Z.constants.W_OK,s=Z.constants.X_OK;I.Volume=sC.Volume,I.vol=new sC.Volume,I.createFsFromVolume=A,I.fs=A(I.vol),g.exports=C(C({},g.exports),I.fs),g.exports.semantic=!0}));h(dC);var hC=dC.createFsFromVolume;DI.prototype.emit=function(g){for(var I,A,C=[],t=1;t<arguments.length;t++)C[t-1]=arguments[t];t=this.listeners(g);try{for(var i=r(t),e=i.next();!e.done;e=i.next()){var o=e.value;try{o.apply(void 0,a(C))}catch(n){console.error(n)}}}catch(n){I={error:n}}finally{try{e&&!e.done&&(A=i.return)&&A.call(i)}finally{if(I)throw I.error}}return 0<t.length};var mC=function(){function g(){this.volume=new cC,this.fs=hC(this.volume),this.fromJSON({"/dev/stdin":"","/dev/stdout":"","/dev/stderr":""})}return g.prototype._toJSON=function(g,I,A){void 0===I&&(I={});var C,t=!0;for(C in g.children){t=!1;var i=g.getChild(C);if(i){var e=i.getNode();e&&e.isFile()?(i=i.getPath(),A&&(i=WI(A,i)),I[i]=e.getBuffer()):e&&e.isDirectory()&&this._toJSON(i,I,A)}}return g=g.getPath(),A&&(g=WI(A,g)),g&&t&&(I[g]=null),I},g.prototype.toJSON=function(g,I,A){var C,t;void 0===I&&(I={}),void 0===A&&(A=!1);var i=[];if(g){g instanceof Array||(g=[g]);try{for(var e=r(g),o=e.next();!o.done;o=e.next()){var n=lC(o.value),s=this.volume.getResolvedLink(n);s&&i.push(s)}}catch(h){var l={error:h}}finally{try{o&&!o.done&&(C=e.return)&&C.call(e)}finally{if(l)throw l.error}}}else i.push(this.volume.root);if(!i.length)return I;try{for(var c=r(i),a=c.next();!a.done;a=c.next())s=a.value,this._toJSON(s,I,A?s.getPath():"")}catch(h){var d={error:h}}finally{try{a&&!a.done&&(t=c.return)&&t.call(c)}finally{if(d)throw d.error}}return I},g.prototype.fromJSONFixed=function(g,I){for(var A in I){var C=I[A];if(C?null!==Object.getPrototypeOf(C):null!==C){var t=rC(A);1<t.length&&(t="/"+t.slice(0,t.length-1).join("/"),g.mkdirpBase(t,511)),g.writeFileSync(A,C||"")}else g.mkdirpBase(A,511)}},g.prototype.fromJSON=function(g){this.volume=new cC,this.fromJSONFixed(this.volume,g),this.fs=hC(this.volume),this.volume.releasedFds=[0,1,2],g=this.volume.openSync("/dev/stderr","w");var I=this.volume.openSync("/dev/stdout","w"),A=this.volume.openSync("/dev/stdin","r");if(2!==g)throw Error("invalid handle for stderr: "+g);if(1!==I)throw Error("invalid handle for stdout: "+I);if(0!==A)throw Error("invalid handle for stdin: "+A)},g.prototype.getStdOut=function(){return function(g,I,A,C){return new(A||(A=Promise))((function(t,i){function e(g){try{n(C.next(g))}catch(I){i(I)}}function o(g){try{n(C.throw(g))}catch(I){i(I)}}function n(g){g.done?t(g.value):new A((function(I){I(g.value)})).then(e,o)}n((C=C.apply(g,I||[])).next())}))}(this,void 0,void 0,(function(){var g=this;return l(this,(function(){return[2,new Promise((function(I){I(g.fs.readFileSync("/dev/stdout","utf8"))}))]}))}))},g}();class ZC{constructor({fetchCommand:g,processWorkerUrl:I,wasmFs:A=new mC}){__publicField(this,"fetchCommand"),__publicField(this,"processWorkerUrl"),__publicField(this,"wasmFs"),this.fetchCommand=g,this.processWorkerUrl=I,this.wasmFs=A}}function uC(g,I,A){let C=0,t=0;for(let i=0;i<I;++i){"\n"===g.charAt(i)?(t=0,C+=1):(t+=1,t>A&&(t=0,C+=1))}return{row:C,col:t}}function GC(g,I){return uC(g,g.length,I).row+1}class bC{constructor(g){__publicField(this,"xterm"),__publicField(this,"_termSize"),__publicField(this,"_firstInit",!0),__publicField(this,"_promptPrefix"),__publicField(this,"_continuationPromptPrefix"),__publicField(this,"_cursor"),__publicField(this,"_input"),this.xterm=g,this._termSize={cols:this.xterm.cols,rows:this.xterm.rows},this._promptPrefix="",this._continuationPromptPrefix="",this._input="",this._cursor=0}_getAsyncRead(){let g,I;return{promise:new Promise(((A,C)=>{g=g=>{this._promptPrefix="",this._continuationPromptPrefix="",A(g)},I=C})),resolve:g,reject:I}}read(g,I="> "){return g.length>0&&this.print(g),this._firstInit=!0,this._promptPrefix=g,this._continuationPromptPrefix=I,this._input="",this._cursor=0,__spreadValues({promptPrefix:g,continuationPromptPrefix:I},this._getAsyncRead())}readChar(g){return g.length>0&&this.print(g),__spreadValues({promptPrefix:g},this._getAsyncRead())}println(g){this.print(g+"\n")}print(g,I){const A=g.replace(/[\r\n]+/g,"\n").replace(/\n/g,"\r\n");I?(this.xterm._core.writeSync(A),this.xterm._core._renderService._renderer._runOperation((g=>g.onGridChanged(0,this.xterm.rows-1)))):this.xterm.write(A)}printWide(g,I=2){if(0===g.length)return this.println("");const A=g.reduce(((g,I)=>Math.max(g,I.length)),0)+I,C=Math.floor(this._termSize.cols/A),t=Math.ceil(g.length/C);let i=0;for(let e=0;e<t;++e){let I="";for(let t=0;t<C;++t)if(i<g.length){let C=g[i++];C+=" ".repeat(A-C.length),I+=C}this.println(I)}}printStatus(g,I){this.print("[s",I),this.print(g,I)}clearStatus(g){this.print("[u",g),this.print("[1000D",g),this.print("[0J",g)}applyPrompts(g){return this._promptPrefix+g.replace(/\n/g,"\n"+this._continuationPromptPrefix)}applyPromptOffset(g,I){return this.applyPrompts(g.substr(0,I)).length}clearInput(){const g=this.applyPrompts(this._input),I=GC(g,this._termSize.cols),A=this.applyPromptOffset(this._input,this._cursor),{row:C}=uC(g,A,this._termSize.cols),t=I-C-1;for(let i=0;i<t;++i)this.xterm.write("[E");this.xterm.write("\r[K");for(let i=1;i<I;++i)this.xterm.write("[F[K")}clearTty(){this.xterm.write("[2J"),this.xterm.write("[0;0H"),this._cursor=0}getFirstInit(){return this._firstInit}getPromptPrefix(){return this._promptPrefix}getContinuationPromptPrefix(){return this._continuationPromptPrefix}getTermSize(){return this._termSize}getInput(){return this._input}getCursor(){return this._cursor}getSize(){return this._termSize}getBuffer(){return this.xterm.buffer}setInput(g,I=!1){I||this.clearInput();const A=this.applyPrompts(g);this.print(A),this._cursor>g.length&&(this._cursor=g.length);const C=this.applyPromptOffset(g,this._cursor),t=GC(A,this._termSize.cols),{col:i,row:e}=uC(A,C,this._termSize.cols),o=t-e-1;this.xterm.write("\r");for(let n=0;n<o;++n)this.xterm.write("[F");for(let n=0;n<i;++n)this.xterm.write("[C");this._input=g}setCursor(g){g<0&&(g=0),g>this._input.length&&(g=this._input.length),this._writeCursorPosition(g)}setCursorDirectly(g){this._writeCursorPosition(g)}_writeCursorPosition(g){const I=this.applyPrompts(this._input),A=this.applyPromptOffset(this._input,this._cursor),{col:C,row:t}=uC(I,A,this._termSize.cols),i=this.applyPromptOffset(this._input,g),{col:e,row:o}=uC(I,i,this._termSize.cols);if(o>t)for(let n=t;n<o;++n)this.xterm.write("[B");else for(let n=o;n<t;++n)this.xterm.write("[A");if(e>C)for(let n=C;n<e;++n)this.xterm.write("[C");else for(let n=e;n<C;++n)this.xterm.write("[D");this._cursor=g}setTermSize(g,I){this._termSize={cols:g,rows:I}}setFirstInit(g){this._firstInit=g}setPromptPrefix(g){this._promptPrefix=g}setContinuationPromptPrefix(g){this._continuationPromptPrefix=g}}for(var pC="(?:"+["\\|\\|","\\&\\&",";;","\\|\\&","\\<\\(",">>",">\\&","[&;()|<>]"].join("|")+")",BC="|&;()<> \\t",yC="(\\\\['\""+BC+"]|[^\\s'\""+BC+"])+",wC='"((\\\\"|[^"])*?)"',WC="'((\\\\'|[^'])*?)'",SC="",KC=0;KC<4;KC++)SC+=(Math.pow(16,8)*Math.random()).toString(16);var fC=function(g,I,A){var C=function(g,I,A){var C=new RegExp(["("+pC+")","("+yC+"|"+wC+"|"+WC+")*"].join("|"),"g"),t=g.match(C).filter(Boolean),i=!1;if(!t)return[];I||(I={});A||(A={});return t.map((function(g,I){if(!i){if(RegExp("^"+pC+"$").test(g))return{op:g};for(var C="'",o='"',n="$",s=A.escape||"\\",l=!1,r=!1,c="",a=!1,d=0,h=g.length;d<h;d++){var m=g.charAt(d);if(a=a||!l&&("*"===m||"?"===m),r)c+=m,r=!1;else if(l)m===l?l=!1:l==C?c+=m:m===s?(d+=1,c+=(m=g.charAt(d))===o||m===s||m===n?m:s+m):c+=m===n?Z():m;else if(m===o||m===C)l=m;else{if(RegExp("^"+pC+"$").test(m))return{op:g};if(RegExp("^#$").test(m))return i=!0,c.length?[c,{comment:g.slice(d+1)+t.slice(I+1).join(" ")}]:[{comment:g.slice(d+1)+t.slice(I+1).join(" ")}];m===s?r=!0:c+=m===n?Z():m}}return a?{op:"glob",pattern:c}:c}function Z(){var I,A;if(d+=1,"{"===g.charAt(d)){if(d+=1,"}"===g.charAt(d))throw new Error("Bad substitution: "+g.substr(d-2,3));if((I=g.indexOf("}",d))<0)throw new Error("Bad substitution: "+g.substr(d));A=g.substr(d,I-d),d=I}else/[*@#?$!_\-]/.test(g.charAt(d))?(A=g.charAt(d),d+=1):(I=g.substr(d).match(/[^\w\d_]/))?(A=g.substr(d,I.index),d+=I.index-1):(A=g.substr(d),d=g.length);return e(null,"",A)}})).reduce((function(g,I){return void 0===I?g:g.concat(I)}),[]);function e(g,A,C){var t="function"==typeof I?I(C):I[C];return void 0===t&&""!=C?t="":void 0===t&&(t="$"),"object"==typeof t?A+SC+JSON.stringify(t)+SC:A+t}}(g,I,A);return"function"!=typeof I?C:C.reduce((function(g,I){if("object"==typeof I)return g.concat(I);var A=I.split(RegExp("("+SC+".*?"+SC+")","g"));return 1===A.length?g.concat(A[0]):g.concat(A.filter(Boolean).map((function(g){return RegExp("^"+SC).test(g)?JSON.parse(g.split(SC)[1]):g})))}),[])};function YC(g,I=!0){let A;const C=[],t=/\w+/g;for(A=t.exec(g);A;)I?C.push(A.index):C.push(A.index+A[0].length),A=t.exec(g);return C}function XC(g,I){const A=YC(g,!0).reverse().find((g=>g<I));return void 0===A?0:A}function VC(g){return null!==g.match(/[^\\][ \t]$/m)}class OC{constructor(g){__publicField(this,"size"),__publicField(this,"entries"),__publicField(this,"cursor"),this.size=g,this.entries=[],this.cursor=0}push(g){if(""===g.trim())return;g!==this.entries[this.entries.length-1]&&(this.entries.push(g),this.entries.length>this.size&&this.entries.pop(),this.cursor=this.entries.length)}includes(g){return this.entries.includes(g)}rewind(){this.cursor=this.entries.length}getPrevious(){const g=Math.max(0,this.cursor-1);return this.cursor=g,this.entries[g]}getNext(){const g=Math.min(this.entries.length,this.cursor+1);return this.cursor=g,this.entries[g]}}const RC=Symbol("Comlink.proxy"),QC=Symbol("Comlink.endpoint"),HC=Symbol("Comlink.releaseProxy"),kC=Symbol("Comlink.thrown"),JC=g=>"object"==typeof g&&null!==g||"function"==typeof g,vC=new Map([["proxy",{canHandle:g=>JC(g)&&g[RC],serialize(g){const{port1:I,port2:A}=new MessageChannel;return DC(g,I),[A,[A]]},deserialize:g=>(g.start(),NC(g))}],["throw",{canHandle:g=>JC(g)&&kC in g,serialize({value:g}){let I;return I=g instanceof Error?{isError:!0,value:{message:g.message,name:g.name,stack:g.stack}}:{isError:!1,value:g},[I,[]]},deserialize(g){if(g.isError)throw Object.assign(new Error(g.value.message),g.value);throw g.value}}]]);function DC(g,I=self){I.addEventListener("message",(function A(C){if(!C||!C.data)return;const{id:t,type:i,path:e}=__spreadValues({path:[]},C.data),o=(C.data.argumentList||[]).map(UC);let n;try{const I=e.slice(0,-1).reduce(((g,I)=>g[I]),g),A=e.reduce(((g,I)=>g[I]),g);switch(i){case"GET":n=A;break;case"SET":I[e.slice(-1)[0]]=UC(C.data.value),n=!0;break;case"APPLY":n=A.apply(I,o);break;case"CONSTRUCT":n=zC(new A(...o));break;case"ENDPOINT":{const{port1:I,port2:A}=new MessageChannel;DC(g,A),n=function(g,I){return TC.set(g,I),g}(I,[I])}break;case"RELEASE":n=void 0;break;default:return}}catch(s){n={value:s,[kC]:0}}Promise.resolve(n).catch((g=>({value:g,[kC]:0}))).then((g=>{const[C,e]=PC(g);I.postMessage(__spreadProps(__spreadValues({},C),{id:t}),e),"RELEASE"===i&&(I.removeEventListener("message",A),MC(I))}))})),I.start&&I.start()}function MC(g){(function(g){return"MessagePort"===g.constructor.name})(g)&&g.close()}function NC(g,I){return FC(g,[],I)}function EC(g){if(g)throw new Error("Proxy has been released and is not useable")}function FC(g,I=[],A=function(){}){let C=!1;const t=new Proxy(A,{get(A,i){if(EC(C),i===HC)return()=>xC(g,{type:"RELEASE",path:I.map((g=>g.toString()))}).then((()=>{MC(g),C=!0}));if("then"===i){if(0===I.length)return{then:()=>t};const A=xC(g,{type:"GET",path:I.map((g=>g.toString()))}).then(UC);return A.then.bind(A)}return FC(g,[...I,i])},set(A,t,i){EC(C);const[e,o]=PC(i);return xC(g,{type:"SET",path:[...I,t].map((g=>g.toString())),value:e},o).then(UC)},apply(A,t,i){EC(C);const e=I[I.length-1];if(e===QC)return xC(g,{type:"ENDPOINT"}).then(UC);if("bind"===e)return FC(g,I.slice(0,-1));const[o,n]=LC(i);return xC(g,{type:"APPLY",path:I.map((g=>g.toString())),argumentList:o},n).then(UC)},construct(A,t){EC(C);const[i,e]=LC(t);return xC(g,{type:"CONSTRUCT",path:I.map((g=>g.toString())),argumentList:i},e).then(UC)}});return t}function LC(g){const I=g.map(PC);return[I.map((g=>g[0])),(A=I.map((g=>g[1])),Array.prototype.concat.apply([],A))];var A}const TC=new WeakMap;function zC(g){return Object.assign(g,{[RC]:!0})}function PC(g){for(const[I,A]of vC)if(A.canHandle(g)){const[C,t]=A.serialize(g);return[{type:"HANDLER",name:I,value:C},t]}return[{type:"RAW",value:g},TC.get(g)||[]]}function UC(g){switch(g.type){case"HANDLER":return vC.get(g.name).deserialize(g.value);case"RAW":return g.value}}function xC(g,I,A){return new Promise((C=>{const t=new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-");g.addEventListener("message",(function I(A){A.data&&A.data.id&&A.data.id===t&&(g.removeEventListener("message",I),C(A.data))})),g.start&&g.start(),g.postMessage(__spreadValues({id:t},I),A)}))}var jC=Array.isArray||function(g){return"[object Array]"==Object.prototype.toString.call(g)},_C=function(g,I){if(g.map)return g.map(I);for(var A=[],C=0;C<g.length;C++){var t=g[C];$C.call(g,C)&&A.push(I(t,C,g))}return A},$C=Object.prototype.hasOwnProperty,qC=function(g,I){return I?"string"==typeof I&&(I={startRule:I}):I={},gt.parse(g,I)},gt=function(){function g(g,I,A,C,t,i){this.message=g,this.expected=I,this.found=A,this.offset=C,this.line=t,this.column=i,this.name="SyntaxError"}return function(g,I){function A(){this.constructor=g}A.prototype=I.prototype,g.prototype=new A}(g,Error),{SyntaxError:g,parse:function I(A){var C,t=arguments.length>1?arguments[1]:{},i={},e={script:tA,command:sA,argument:ZA,continuationStart:xA},o=tA,n=i,s=function(g){var I=[];return $A(g,(function(g){I=I.concat(g[1])})),I},l={type:"other",description:"a list of statements"},r=null,c=function(g,I,A){var C=[g],t=g;return $A(I,(function(g,I,A){!function(g,I){for(;I.next;)I=I.next;I.control=g}(g[1],t),C.push(t=g[3])})),C},a=function(g,I){return void 0!==I&&I?(I=I[1],g.control=I[0],g.next=I[1]):(g.control=";",g.next=null),g},d="&&",h={type:"literal",value:"&&",description:'"&&"'},m="||",Z={type:"literal",value:"||",description:'"||"'},u=function(g,I){return[g,I]},G="&",b={type:"literal",value:"&",description:'"&"'},p=";",B={type:"literal",value:";",description:'";"'},y="\n",w={type:"literal",value:"\n",description:'"\\n"'},W=function(g){return"\n"==g?";":g},S={type:"other",description:"a single command"},K=function(g,I,A,C){var t={type:"command",command:I,args:[],redirects:[],env:{},control:";",next:null};return $A(g,IC).concat($A(A,AC)).forEach((function(g){if(g&&g.type)switch(g.type){case"moveFd":case"duplicateFd":case"redirectFd":return t.redirects.push(g);case"variableAssignment":return t.env[g.name]=g.value;default:t.args.push(g)}})),C&&t.redirects.push(C[1]),t},f="while",Y={type:"literal",value:"while",description:'"while"'},X="until",V={type:"literal",value:"until",description:'"until"'},O="do",R={type:"literal",value:"do",description:'"do"'},Q="done",H={type:"literal",value:"done",description:'"done"'},k=function(g,I,A){return{type:g+"-loop",test:I,body:A}},J="if",v={type:"literal",value:"if",description:'"if"'},D="then",M={type:"literal",value:"then",description:'"then"'},N="else",E={type:"literal",value:"else",description:'"else"'},F="fi",L={type:"literal",value:"fi",description:'"fi"'},T=function(g,I,A,C){return{type:"ifElse",test:g,body:I,elifBlocks:A.length?A:null,elseBody:C?C[1]:null}},z="elif",P={type:"literal",value:"elif",description:'"elif"'},U=function(g,I){return{type:"ifElse",test:g,body:I}},x=function(g){return g},j="=",_={type:"literal",value:"=",description:'"="'},$=function(g,I){return{type:"variableAssignment",name:g,value:I}},q={type:"other",description:"command name"},gg=void 0,Ig=function(g){return g},Ag="[",Cg={type:"literal",value:"[",description:'"["'},tg="[[",ig={type:"literal",value:"[[",description:'"[["'},eg={type:"other",description:"command argument"},og=function(g){return CC(g)},ng=function(g){return gC(g)},sg="\\",lg={type:"literal",value:"\\",description:'"\\\\"'},rg=function(g){return g},cg={type:"any",description:"any character"},ag=/^[$"';&<>\n()[*?|` ]/,dg={type:"class",value:"[$\"';&<>\\n()[*?|` ]",description:"[$\"';&<>\\n()[*?|` ]"},hg="*",mg={type:"literal",value:"*",description:'"*"'},Zg="?",ug={type:"literal",value:"?",description:'"?"'},Gg=function(){return{type:"glob",value:gA()}},bg="-",pg={type:"literal",value:"-",description:'"-"'},Bg="]",yg={type:"literal",value:"]",description:'"]"'},wg="$",Wg={type:"literal",value:"$",description:'"$"'},Sg="{",Kg={type:"literal",value:"{",description:'"{"'},fg="}",Yg={type:"literal",value:"}",description:'"}"'},Xg="'",Vg={type:"literal",value:"'",description:'"\'"'},Og=/^[^']/,Rg={type:"class",value:"[^']",description:"[^']"},Qg=function(g){return gC(g)},Hg='"',kg={type:"literal",value:'"',description:'"\\""'},Jg=function(g){return CC(g.map((function(g){return _A(g)?gC(g):g})))},vg="\\\\",Dg={type:"literal",value:"\\\\",description:'"\\\\\\\\"'},Mg=function(){return"\\"},Ng="`",Eg={type:"literal",value:"`",description:'"`"'},Fg=function(g){return{type:"variable",name:g}},Lg=/^[a-zA-Z0-9_]/,Tg={type:"class",value:"[a-zA-Z0-9_]",description:"[a-zA-Z0-9_]"},zg=function(){return gA()},Pg="${",Ug={type:"literal",value:"${",description:'"${"'},xg=/^[^}]/,jg={type:"class",value:"[^}]",description:"[^}]"},_g=function(g){return{type:"variableSubstitution",expression:qA(g)}},$g="$(",qg={type:"literal",value:"$(",description:'"$("'},gI=")",II={type:"literal",value:")",description:'")"'},AI=function(g){return{type:"commandSubstitution",commands:g}},CI=function(g){return{type:"commandSubstitution",commands:I(g.join(""))}},tI="\\`",iI={type:"literal",value:"\\`",description:'"\\\\`"'},eI=function(){return"`"},oI=/^[<>]/,nI={type:"class",value:"[<>]",description:"[<>]"},sI="(",lI={type:"literal",value:"(",description:'"("'},rI=function(g,I){return{type:"processSubstitution",readWrite:g,commands:I}},cI="|",aI={type:"literal",value:"|",description:'"|"'},dI=function(g){return{type:"pipe",command:g}},hI="<&",mI={type:"literal",value:"<&",description:'"<&"'},ZI=">&",uI={type:"literal",value:">&",description:'">&"'},GI=function(g,I,A){return null==g&&(g="<"==I[0]?0:1),{type:"moveFd",fd:g,op:I,dest:A}},bI=function(g,I,A){return null==g&&(g="<"==I[0]?0:1),{type:"duplicateFd",srcFd:g,op:I,destFd:A}},pI=function(g,I,A){return null==g&&(g="<"==I[0]?0:1),{type:"redirectFd",fd:g,op:I,filename:A}},BI="<",yI={type:"literal",value:"<",description:'"<"'},wI=">",WI={type:"literal",value:">",description:'">"'},SI=">|",KI={type:"literal",value:">|",description:'">|"'},fI="&>",YI={type:"literal",value:"&>",description:'"&>"'},XI=">>",VI={type:"literal",value:">>",description:'">>"'},OI="&>>",RI={type:"literal",value:"&>>",description:'"&>>"'},QI=/^[0-9]/,HI={type:"class",value:"[0-9]",description:"[0-9]"},kI=function(g){return parseInt(qA(g),10)},JI=" ",vI={type:"literal",value:" ",description:'" "'},DI="\t",MI={type:"literal",value:"\t",description:'"\\t"'},NI="for",EI={type:"literal",value:"for",description:'"for"'},FI="case",LI={type:"literal",value:"case",description:'"case"'},TI="esac",zI={type:"literal",value:"esac",description:'"esac"'},PI=0,UI=0,xI=0,jI={line:1,column:1,seenCR:!1},_I=0,$I=[],qI=0;if("startRule"in t){if(!(t.startRule in e))throw new Error("Can't start parsing from rule \""+t.startRule+'".');o=e[t.startRule]}function gA(){return A.substring(UI,PI)}function IA(g){return xI!==g&&(xI>g&&(xI=0,jI={line:1,column:1,seenCR:!1}),function(g,I,C){var t,i;for(t=I;t<C;t++)"\n"===(i=A.charAt(t))?(g.seenCR||g.line++,g.column=1,g.seenCR=!1):"\r"===i||"\u2028"===i||"\u2029"===i?(g.line++,g.column=1,g.seenCR=!0):(g.column++,g.seenCR=!1)}(jI,xI,g),xI=g),jI}function AA(g){PI<_I||(PI>_I&&(_I=PI,$I=[]),$I.push(g))}function CA(I,C,t){var i=IA(t),e=t<A.length?A.charAt(t):null;return null!==C&&function(g){var I=1;for(g.sort((function(g,I){return g.description<I.description?-1:g.description>I.description?1:0}));I<g.length;)g[I-1]===g[I]?g.splice(I,1):I++}(C),new g(null!==I?I:function(g,I){var A,C=new Array(g.length);for(A=0;A<g.length;A++)C[A]=g[A].description;return"Expected "+(g.length>1?C.slice(0,-1).join(", ")+" or "+C[g.length-1]:C[0])+" but "+(I?'"'+function(g){function I(g){return g.charCodeAt(0).toString(16).toUpperCase()}return g.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,(function(g){return"\\x0"+I(g)})).replace(/[\x10-\x1F\x80-\xFF]/g,(function(g){return"\\x"+I(g)})).replace(/[\u0180-\u0FFF]/g,(function(g){return"\\u0"+I(g)})).replace(/[\u1080-\uFFFF]/g,(function(g){return"\\u"+I(g)}))}(I)+'"':"end of input")+" found."}(C,e),C,e,t,i.line,i.column)}function tA(){var g,I,A,C,t,e,o;for(g=PI,I=[],A=PI,C=[],t=PA();t!==i;)C.push(t),t=PA();if(C!==i)if((t=iA())!==i){for(e=[],o=PA();o!==i;)e.push(o),o=PA();e!==i?A=C=[C,t,e]:(PI=A,A=n)}else PI=A,A=n;else PI=A,A=n;if(A!==i)for(;A!==i;){for(I.push(A),A=PI,C=[],t=PA();t!==i;)C.push(t),t=PA();if(C!==i)if((t=iA())!==i){for(e=[],o=PA();o!==i;)e.push(o),o=PA();e!==i?A=C=[C,t,e]:(PI=A,A=n)}else PI=A,A=n;else PI=A,A=n}else I=n;return I!==i&&(UI=g,I=s(I)),g=I}function iA(){var g,I,A,C,t,e,o,s;if(qI++,g=PI,(I=eA())!==i){for(A=[],C=PI,t=[],e=zA();e!==i;)t.push(e),e=zA();if(t!==i)if((e=nA())!==i){for(o=[],s=PA();s!==i;)o.push(s),s=PA();o!==i&&(s=eA())!==i?C=t=[t,e,o,s]:(PI=C,C=n)}else PI=C,C=n;else PI=C,C=n;for(;C!==i;){for(A.push(C),C=PI,t=[],e=zA();e!==i;)t.push(e),e=zA();if(t!==i)if((e=nA())!==i){for(o=[],s=PA();s!==i;)o.push(s),s=PA();o!==i&&(s=eA())!==i?C=t=[t,e,o,s]:(PI=C,C=n)}else PI=C,C=n;else PI=C,C=n}if(A!==i){for(C=PI,t=[],e=zA();e!==i;)t.push(e),e=zA();t!==i&&(e=nA())!==i?C=t=[t,e]:(PI=C,C=n),C===i&&(C=r),C!==i?(UI=g,g=I=c(I,A)):(PI=g,g=n)}else PI=g,g=n}else PI=g,g=n;return qI--,g===i&&(I=i,0===qI&&AA(l)),g}function eA(){var g,I,A,C,t;if(g=PI,(I=sA())===i&&(I=dA())===i&&(I=lA())===i&&(I=rA()),I!==i){for(A=PI,C=[],t=zA();t!==i;)C.push(t),t=zA();C!==i&&(t=oA())!==i?A=C=[C,t]:(PI=A,A=n),A===i&&(A=r),A!==i?(UI=g,g=I=a(I,A)):(PI=g,g=n)}else PI=g,g=n;return g}function oA(){var g,I,C,t;if(g=PI,A.substr(PI,2)===d?(I=d,PI+=2):(I=i,0===qI&&AA(h)),I===i&&(A.substr(PI,2)===m?(I=m,PI+=2):(I=i,0===qI&&AA(Z))),I!==i){for(C=[],t=PA();t!==i;)C.push(t),t=PA();C!==i&&(t=eA())!==i?(UI=g,g=I=u(I,t)):(PI=g,g=n)}else PI=g,g=n;return g}function nA(){var g,I;return g=PI,38===A.charCodeAt(PI)?(I=G,PI++):(I=i,0===qI&&AA(b)),I===i&&(59===A.charCodeAt(PI)?(I=p,PI++):(I=i,0===qI&&AA(B)),I===i&&(10===A.charCodeAt(PI)?(I=y,PI++):(I=i,0===qI&&AA(w)))),I!==i&&(UI=g,I=W(I)),g=I}function sA(){var g,I,A,C,t,e,o;if(qI++,g=PI,I=[],A=PI,(C=dA())===i&&(C=DA()),C!==i){if(t=[],(e=zA())!==i)for(;e!==i;)t.push(e),e=zA();else t=n;t!==i?A=C=[C,t]:(PI=A,A=n)}else PI=A,A=n;for(;A!==i;)if(I.push(A),A=PI,(C=dA())===i&&(C=DA()),C!==i){if(t=[],(e=zA())!==i)for(;e!==i;)t.push(e),e=zA();else t=n;t!==i?A=C=[C,t]:(PI=A,A=n)}else PI=A,A=n;if(I!==i)if((A=hA())===i&&(A=mA()),A!==i){if(C=[],t=PI,e=[],(o=zA())!==i)for(;o!==i;)e.push(o),o=zA();else e=n;for(e!==i?((o=DA())===i&&(o=ZA()),o!==i?t=e=[e,o]:(PI=t,t=n)):(PI=t,t=n);t!==i;){if(C.push(t),t=PI,e=[],(o=zA())!==i)for(;o!==i;)e.push(o),o=zA();else e=n;e!==i?((o=DA())===i&&(o=ZA()),o!==i?t=e=[e,o]:(PI=t,t=n)):(PI=t,t=n)}if(C!==i){for(t=PI,e=[],o=zA();o!==i;)e.push(o),o=zA();e!==i&&(o=MA())!==i?t=e=[e,o]:(PI=t,t=n),t===i&&(t=r),t!==i?(UI=g,g=I=K(I,A,C,t)):(PI=g,g=n)}else PI=g,g=n}else PI=g,g=n;else PI=g,g=n;return qI--,g===i&&(I=i,0===qI&&AA(S)),g}function lA(){var g,I,C,t,e,o,s,l;if(g=PI,A.substr(PI,5)===f?(I=f,PI+=5):(I=i,0===qI&&AA(Y)),I===i&&(A.substr(PI,5)===X?(I=X,PI+=5):(I=i,0===qI&&AA(V))),I!==i){if(C=[],(t=PA())!==i)for(;t!==i;)C.push(t),t=PA();else C=n;if(C!==i)if((t=aA())!==i){for(e=[],o=PA();o!==i;)e.push(o),o=PA();e!==i?(A.substr(PI,2)===O?(o=O,PI+=2):(o=i,0===qI&&AA(R)),o!==i&&PA()!==i&&(s=tA())!==i?(A.substr(PI,4)===Q?(l=Q,PI+=4):(l=i,0===qI&&AA(H)),l!==i?(UI=g,g=I=k(I,t,s)):(PI=g,g=n)):(PI=g,g=n)):(PI=g,g=n)}else PI=g,g=n;else PI=g,g=n}else PI=g,g=n;return g}function rA(){var g,I,C,t,e,o,s,l,c,a,d;if(g=PI,A.substr(PI,2)===J?(I=J,PI+=2):(I=i,0===qI&&AA(v)),I!==i){if(C=[],(t=PA())!==i)for(;t!==i;)C.push(t),t=PA();else C=n;if(C!==i)if((t=tA())!==i)if(A.substr(PI,4)===D?(e=D,PI+=4):(e=i,0===qI&&AA(M)),e!==i){if(o=[],(s=PA())!==i)for(;s!==i;)o.push(s),s=PA();else o=n;if(o!==i)if((s=tA())!==i){for(l=[],c=cA();c!==i;)l.push(c),c=cA();l!==i?(c=PI,A.substr(PI,4)===N?(a=N,PI+=4):(a=i,0===qI&&AA(E)),a!==i&&(d=tA())!==i?c=a=[a,d]:(PI=c,c=n),c===i&&(c=r),c!==i?(A.substr(PI,2)===F?(a=F,PI+=2):(a=i,0===qI&&AA(L)),a!==i?(UI=g,g=I=T(t,s,l,c)):(PI=g,g=n)):(PI=g,g=n)):(PI=g,g=n)}else PI=g,g=n;else PI=g,g=n}else PI=g,g=n;else PI=g,g=n;else PI=g,g=n}else PI=g,g=n;return g}function cA(){var g,I,C,t,e,o,s;if(g=PI,A.substr(PI,4)===z?(I=z,PI+=4):(I=i,0===qI&&AA(P)),I!==i){if(C=[],(t=PA())!==i)for(;t!==i;)C.push(t),t=PA();else C=n;if(C!==i)if((t=aA())!==i)if(A.substr(PI,4)===D?(e=D,PI+=4):(e=i,0===qI&&AA(M)),e!==i){if(o=[],(s=PA())!==i)for(;s!==i;)o.push(s),s=PA();else o=n;o!==i&&(s=tA())!==i?(UI=g,g=I=U(t,s)):(PI=g,g=n)}else PI=g,g=n;else PI=g,g=n;else PI=g,g=n}else PI=g,g=n;return g}function aA(){var g,I;return g=PI,(I=tA())!==i&&(UI=g,I=x(I)),g=I}function dA(){var g,I,C,t;return g=PI,(I=VA())!==i?(61===A.charCodeAt(PI)?(C=j,PI++):(C=i,0===qI&&AA(_)),C!==i&&(t=ZA())!==i?(UI=g,g=I=$(I,t)):(PI=g,g=n)):(PI=g,g=n),g}function hA(){var g,I,A,C,t;return qI++,g=PI,I=PI,qI++,A=DA(),qI--,A===i?I=gg:(PI=I,I=n),I!==i?(A=PI,qI++,C=UA(),qI--,C===i?A=gg:(PI=A,A=n),A!==i?(C=PI,qI++,t=dA(),qI--,t===i?C=gg:(PI=C,C=n),C!==i?((t=uA())===i&&(t=mA()),t!==i?(UI=g,g=I=Ig(t)):(PI=g,g=n)):(PI=g,g=n)):(PI=g,g=n)):(PI=g,g=n),qI--,g===i&&(I=i,0===qI&&AA(q)),g}function mA(){var g;return 91===A.charCodeAt(PI)?(g=Ag,PI++):(g=i,0===qI&&AA(Cg)),g===i&&(A.substr(PI,2)===tg?(g=tg,PI+=2):(g=i,0===qI&&AA(ig))),g}function ZA(){var g;return qI++,(g=hA())===i&&(g=vA()),qI--,g===i&&0===qI&&AA(eg),g}function uA(){var g,I,A;if(g=PI,I=[],(A=BA())===i&&(A=GA())===i&&(A=XA())===i&&(A=RA())===i&&(A=QA())===i&&(A=WA())===i&&(A=SA()),A!==i)for(;A!==i;)I.push(A),(A=BA())===i&&(A=GA())===i&&(A=XA())===i&&(A=RA())===i&&(A=QA())===i&&(A=WA())===i&&(A=SA());else I=n;return I!==i&&(UI=g,I=og(I)),g=I}function GA(){var g,I,A;if(g=PI,I=[],(A=bA())!==i)for(;A!==i;)I.push(A),A=bA();else I=n;return I!==i&&(UI=g,I=ng(I)),g=I}function bA(){var g,I,C;return g=PI,92===A.charCodeAt(PI)?(I=sg,PI++):(I=i,0===qI&&AA(lg)),I!==i&&(C=pA())!==i?(UI=g,g=I=rg(C)):(PI=g,g=n),g===i&&(g=PI,I=PI,qI++,C=pA(),qI--,C===i?I=gg:(PI=I,I=n),I!==i?(A.length>PI?(C=A.charAt(PI),PI++):(C=i,0===qI&&AA(cg)),C!==i?(UI=g,g=I=rg(C)):(PI=g,g=n)):(PI=g,g=n)),g}function pA(){var g;return ag.test(A.charAt(PI))?(g=A.charAt(PI),PI++):(g=i,0===qI&&AA(dg)),g}function BA(){var g,I,C,t,e;for(g=PI,I=[],C=bA();C!==i;)I.push(C),C=bA();if(I!==i){if(C=[],42===A.charCodeAt(PI)?(t=hg,PI++):(t=i,0===qI&&AA(mg)),t===i&&(63===A.charCodeAt(PI)?(t=Zg,PI++):(t=i,0===qI&&AA(ug)),t===i&&(t=yA())===i&&(t=wA())),t!==i)for(;t!==i;)C.push(t),42===A.charCodeAt(PI)?(t=hg,PI++):(t=i,0===qI&&AA(mg)),t===i&&(63===A.charCodeAt(PI)?(t=Zg,PI++):(t=i,0===qI&&AA(ug)),t===i&&(t=yA())===i&&(t=wA()));else C=n;if(C!==i){for(t=[],e=bA();e!==i;)t.push(e),e=bA();t!==i?(UI=g,g=I=Gg()):(PI=g,g=n)}else PI=g,g=n}else PI=g,g=n;return g}function yA(){var g,I,C,t,e,o,s,l,r;return g=PI,I=PI,91===A.charCodeAt(PI)?(C=Ag,PI++):(C=i,0===qI&&AA(Cg)),C!==i?(t=PI,qI++,45===A.charCodeAt(PI)?(e=bg,PI++):(e=i,0===qI&&AA(pg)),qI--,e===i?t=gg:(PI=t,t=n),t!==i?(A.length>PI?(e=A.charAt(PI),PI++):(e=i,0===qI&&AA(cg)),e!==i?(45===A.charCodeAt(PI)?(o=bg,PI++):(o=i,0===qI&&AA(pg)),o!==i?(s=PI,qI++,45===A.charCodeAt(PI)?(l=bg,PI++):(l=i,0===qI&&AA(pg)),qI--,l===i?s=gg:(PI=s,s=n),s!==i?(A.length>PI?(l=A.charAt(PI),PI++):(l=i,0===qI&&AA(cg)),l!==i?(93===A.charCodeAt(PI)?(r=Bg,PI++):(r=i,0===qI&&AA(yg)),r!==i?I=C=[C,t,e,o,s,l,r]:(PI=I,I=n)):(PI=I,I=n)):(PI=I,I=n)):(PI=I,I=n)):(PI=I,I=n)):(PI=I,I=n)):(PI=I,I=n),I!==i&&(I=A.substring(g,PI)),g=I}function wA(){var g,I,C,t,e;if(g=PI,I=PI,A.length>PI?(C=A.charAt(PI),PI++):(C=i,0===qI&&AA(cg)),C===i&&(C=r),C!==i?(t=PI,qI++,36===A.charCodeAt(PI)?(e=wg,PI++):(e=i,0===qI&&AA(Wg)),qI--,e===i?t=gg:(PI=t,t=n),t!==i?I=C=[C,t]:(PI=I,I=n)):(PI=I,I=n),I!==i)if(123===A.charCodeAt(PI)?(C=Sg,PI++):(C=i,0===qI&&AA(Kg)),C!==i){if(t=[],(e=bA())!==i)for(;e!==i;)t.push(e),e=bA();else t=n;t!==i?(125===A.charCodeAt(PI)?(e=fg,PI++):(e=i,0===qI&&AA(Yg)),e!==i?g=I=[I,C,t,e]:(PI=g,g=n)):(PI=g,g=n)}else PI=g,g=n;else PI=g,g=n;return g}function WA(){var g,I,C,t,e;if(g=PI,39===A.charCodeAt(PI)?(I=Xg,PI++):(I=i,0===qI&&AA(Vg)),I!==i){for(C=PI,t=[],Og.test(A.charAt(PI))?(e=A.charAt(PI),PI++):(e=i,0===qI&&AA(Rg));e!==i;)t.push(e),Og.test(A.charAt(PI))?(e=A.charAt(PI),PI++):(e=i,0===qI&&AA(Rg));t!==i&&(t=A.substring(C,PI)),(C=t)!==i?(39===A.charCodeAt(PI)?(t=Xg,PI++):(t=i,0===qI&&AA(Vg)),t!==i?(UI=g,g=I=Qg(C)):(PI=g,g=n)):(PI=g,g=n)}else PI=g,g=n;return g}function SA(){var g,I,C,t,e;if(g=PI,34===A.charCodeAt(PI)?(I=Hg,PI++):(I=i,0===qI&&AA(kg)),I!==i){if(C=[],(t=YA())===i)if(t=[],(e=KA())!==i)for(;e!==i;)t.push(e),e=KA();else t=n;for(;t!==i;)if(C.push(t),(t=YA())===i)if(t=[],(e=KA())!==i)for(;e!==i;)t.push(e),e=KA();else t=n;C!==i?(34===A.charCodeAt(PI)?(t=Hg,PI++):(t=i,0===qI&&AA(kg)),t!==i?(UI=g,g=I=Jg(C)):(PI=g,g=n)):(PI=g,g=n)}else PI=g,g=n;return g}function KA(){var g,I,C;return g=PI,92===A.charCodeAt(PI)?(I=sg,PI++):(I=i,0===qI&&AA(lg)),I!==i&&(C=fA())!==i?(UI=g,g=I=rg(C)):(PI=g,g=n),g===i&&(g=PI,A.substr(PI,2)===vg?(I=vg,PI+=2):(I=i,0===qI&&AA(Dg)),I!==i&&(UI=g,I=Mg()),(g=I)===i&&(g=PI,I=PI,qI++,C=fA(),qI--,C===i?I=gg:(PI=I,I=n),I!==i?(A.length>PI?(C=A.charAt(PI),PI++):(C=i,0===qI&&AA(cg)),C!==i?(UI=g,g=I=rg(C)):(PI=g,g=n)):(PI=g,g=n))),g}function fA(){var g;return 34===A.charCodeAt(PI)?(g=Hg,PI++):(g=i,0===qI&&AA(kg)),g===i&&(36===A.charCodeAt(PI)?(g=wg,PI++):(g=i,0===qI&&AA(Wg)),g===i&&(96===A.charCodeAt(PI)?(g=Ng,PI++):(g=i,0===qI&&AA(Eg)))),g}function YA(){var g;return(g=QA())===i&&(g=XA())===i&&(g=RA()),g}function XA(){var g,I,C;return g=PI,36===A.charCodeAt(PI)?(I=wg,PI++):(I=i,0===qI&&AA(Wg)),I!==i&&(C=OA())!==i?(UI=g,g=I=Fg(C)):(PI=g,g=n),g}function VA(){var g,I,C;if(g=PI,I=[],Lg.test(A.charAt(PI))?(C=A.charAt(PI),PI++):(C=i,0===qI&&AA(Tg)),C!==i)for(;C!==i;)I.push(C),Lg.test(A.charAt(PI))?(C=A.charAt(PI),PI++):(C=i,0===qI&&AA(Tg));else I=n;return I!==i&&(UI=g,I=zg()),g=I}function OA(){var g;return(g=VA())===i&&(63===A.charCodeAt(PI)?(g=Zg,PI++):(g=i,0===qI&&AA(ug))),g}function RA(){var g,I,C,t;if(g=PI,A.substr(PI,2)===Pg?(I=Pg,PI+=2):(I=i,0===qI&&AA(Ug)),I!==i){for(C=[],xg.test(A.charAt(PI))?(t=A.charAt(PI),PI++):(t=i,0===qI&&AA(jg));t!==i;)C.push(t),xg.test(A.charAt(PI))?(t=A.charAt(PI),PI++):(t=i,0===qI&&AA(jg));C!==i?(125===A.charCodeAt(PI)?(t=fg,PI++):(t=i,0===qI&&AA(Yg)),t!==i?(UI=g,g=I=_g(C)):(PI=g,g=n)):(PI=g,g=n)}else PI=g,g=n;return g}function QA(){var g;return(g=HA())===i&&(g=kA()),g}function HA(){var g,I,C,t;return g=PI,A.substr(PI,2)===$g?(I=$g,PI+=2):(I=i,0===qI&&AA(qg)),I!==i&&(C=iA())!==i?(41===A.charCodeAt(PI)?(t=gI,PI++):(t=i,0===qI&&AA(II)),t!==i?(UI=g,g=I=AI(C)):(PI=g,g=n)):(PI=g,g=n),g}function kA(){var g,I,C,t;if(g=PI,96===A.charCodeAt(PI)?(I=Ng,PI++):(I=i,0===qI&&AA(Eg)),I!==i){if(C=[],(t=JA())!==i)for(;t!==i;)C.push(t),t=JA();else C=n;C!==i?(96===A.charCodeAt(PI)?(t=Ng,PI++):(t=i,0===qI&&AA(Eg)),t!==i?(UI=g,g=I=CI(C)):(PI=g,g=n)):(PI=g,g=n)}else PI=g,g=n;return g}function JA(){var g,I,C;return g=PI,A.substr(PI,2)===tI?(I=tI,PI+=2):(I=i,0===qI&&AA(iI)),I!==i&&(UI=g,I=eI()),(g=I)===i&&(g=PI,A.substr(PI,2)===vg?(I=vg,PI+=2):(I=i,0===qI&&AA(Dg)),I!==i&&(UI=g,I=Mg()),(g=I)===i&&(g=PI,I=PI,qI++,96===A.charCodeAt(PI)?(C=Ng,PI++):(C=i,0===qI&&AA(Eg)),qI--,C===i?I=gg:(PI=I,I=n),I!==i?(A.length>PI?(C=A.charAt(PI),PI++):(C=i,0===qI&&AA(cg)),C!==i?(UI=g,g=I=rg(C)):(PI=g,g=n)):(PI=g,g=n))),g}function vA(){var g,I,C,t,e;return g=PI,oI.test(A.charAt(PI))?(I=A.charAt(PI),PI++):(I=i,0===qI&&AA(nI)),I!==i?(40===A.charCodeAt(PI)?(C=sI,PI++):(C=i,0===qI&&AA(lI)),C!==i&&(t=iA())!==i?(41===A.charCodeAt(PI)?(e=gI,PI++):(e=i,0===qI&&AA(II)),e!==i?(UI=g,g=I=rI(I,t)):(PI=g,g=n)):(PI=g,g=n)):(PI=g,g=n),g}function DA(){var g;return(g=NA())===i&&(g=EA())===i&&(g=FA()),g}function MA(){var g,I,C,t;if(g=PI,124===A.charCodeAt(PI)?(I=cI,PI++):(I=i,0===qI&&AA(aI)),I!==i){for(C=[],t=PA();t!==i;)C.push(t),t=PA();C!==i&&(t=sA())!==i?(UI=g,g=I=dI(t)):(PI=g,g=n)}else PI=g,g=n;return g}function NA(){var g,I,C,t,e;return g=PI,(I=TA())===i&&(I=r),I!==i?(A.substr(PI,2)===hI?(C=hI,PI+=2):(C=i,0===qI&&AA(mI)),C===i&&(A.substr(PI,2)===ZI?(C=ZI,PI+=2):(C=i,0===qI&&AA(uI))),C!==i&&(t=TA())!==i?(45===A.charCodeAt(PI)?(e=bg,PI++):(e=i,0===qI&&AA(pg)),e!==i?(UI=g,g=I=GI(I,C,t)):(PI=g,g=n)):(PI=g,g=n)):(PI=g,g=n),g}function EA(){var g,I,C,t,e;if(g=PI,(I=TA())===i&&(I=r),I!==i)if(A.substr(PI,2)===hI?(C=hI,PI+=2):(C=i,0===qI&&AA(mI)),C===i&&(A.substr(PI,2)===ZI?(C=ZI,PI+=2):(C=i,0===qI&&AA(uI))),C!==i){for(t=[],e=zA();e!==i;)t.push(e),e=zA();t!==i&&(e=TA())!==i?(UI=g,g=I=bI(I,C,e)):(PI=g,g=n)}else PI=g,g=n;else PI=g,g=n;return g}function FA(){var g,I,A,C,t;if(g=PI,(I=TA())===i&&(I=r),I!==i)if((A=LA())!==i){for(C=[],t=zA();t!==i;)C.push(t),t=zA();C!==i&&(t=ZA())!==i?(UI=g,g=I=pI(I,A,t)):(PI=g,g=n)}else PI=g,g=n;else PI=g,g=n;return g}function LA(){var g;return 60===A.charCodeAt(PI)?(g=BI,PI++):(g=i,0===qI&&AA(yI)),g===i&&(62===A.charCodeAt(PI)?(g=wI,PI++):(g=i,0===qI&&AA(WI)),g===i&&(A.substr(PI,2)===SI?(g=SI,PI+=2):(g=i,0===qI&&AA(KI)),g===i&&(A.substr(PI,2)===fI?(g=fI,PI+=2):(g=i,0===qI&&AA(YI)),g===i&&(A.substr(PI,2)===XI?(g=XI,PI+=2):(g=i,0===qI&&AA(VI)),g===i&&(A.substr(PI,3)===OI?(g=OI,PI+=3):(g=i,0===qI&&AA(RI))))))),g}function TA(){var g,I,C;if(g=PI,I=[],QI.test(A.charAt(PI))?(C=A.charAt(PI),PI++):(C=i,0===qI&&AA(HI)),C!==i)for(;C!==i;)I.push(C),QI.test(A.charAt(PI))?(C=A.charAt(PI),PI++):(C=i,0===qI&&AA(HI));else I=n;return I!==i&&(UI=g,I=kI(I)),g=I}function zA(){var g;return 32===A.charCodeAt(PI)?(g=JI,PI++):(g=i,0===qI&&AA(vI)),g===i&&(9===A.charCodeAt(PI)?(g=DI,PI++):(g=i,0===qI&&AA(MI))),g}function PA(){var g;return(g=zA())===i&&(10===A.charCodeAt(PI)?(g=y,PI++):(g=i,0===qI&&AA(w))),g}function UA(){var g,I,C,t;if(g=PI,A.substr(PI,5)===f?(I=f,PI+=5):(I=i,0===qI&&AA(Y)),I===i&&(A.substr(PI,5)===X?(I=X,PI+=5):(I=i,0===qI&&AA(V)),I===i&&(A.substr(PI,3)===NI?(I=NI,PI+=3):(I=i,0===qI&&AA(EI)),I===i&&(A.substr(PI,4)===Q?(I=Q,PI+=4):(I=i,0===qI&&AA(H)),I===i&&(A.substr(PI,2)===O?(I=O,PI+=2):(I=i,0===qI&&AA(R)),I===i&&(A.substr(PI,4)===FI?(I=FI,PI+=4):(I=i,0===qI&&AA(LI)),I===i&&(A.substr(PI,4)===TI?(I=TI,PI+=4):(I=i,0===qI&&AA(zI)),I===i&&(A.substr(PI,2)===J?(I=J,PI+=2):(I=i,0===qI&&AA(v)),I===i&&(A.substr(PI,4)===D?(I=D,PI+=4):(I=i,0===qI&&AA(M)),I===i&&(A.substr(PI,4)===N?(I=N,PI+=4):(I=i,0===qI&&AA(E)),I===i&&(A.substr(PI,4)===z?(I=z,PI+=4):(I=i,0===qI&&AA(P)),I===i&&(A.substr(PI,2)===F?(I=F,PI+=2):(I=i,0===qI&&AA(L)),I===i&&(A.substr(PI,2)===tg?(I=tg,PI+=2):(I=i,0===qI&&AA(ig)))))))))))))),I!==i){if(C=[],(t=PA())!==i)for(;t!==i;)C.push(t),t=PA();else C=n;C===i&&(C=jA()),C!==i?g=I=[I,C]:(PI=g,g=n)}else PI=g,g=n;return g}function xA(){var g,I,C,t;if(g=PI,I=PI,qI++,(C=UA())===i&&(34===A.charCodeAt(PI)?(C=Hg,PI++):(C=i,0===qI&&AA(kg)),C===i&&(39===A.charCodeAt(PI)?(C=Xg,PI++):(C=i,0===qI&&AA(Vg)),C===i&&(96===A.charCodeAt(PI)?(C=Ng,PI++):(C=i,0===qI&&AA(Eg)),C===i&&(A.substr(PI,2)===$g?(C=$g,PI+=2):(C=i,0===qI&&AA(qg)),C===i&&(A.substr(PI,2)===Pg?(C=Pg,PI+=2):(C=i,0===qI&&AA(Ug)),C===i&&(40===A.charCodeAt(PI)?(C=sI,PI++):(C=i,0===qI&&AA(lI)))))))),qI--,C!==i?(PI=I,I=gg):I=n,I!==i){for(C=[],A.length>PI?(t=A.charAt(PI),PI++):(t=i,0===qI&&AA(cg));t!==i;)C.push(t),A.length>PI?(t=A.charAt(PI),PI++):(t=i,0===qI&&AA(cg));C!==i?g=I=[I,C]:(PI=g,g=n)}else PI=g,g=n;return g}function jA(){var g,I;return g=PI,qI++,A.length>PI?(I=A.charAt(PI),PI++):(I=i,0===qI&&AA(cg)),qI--,I===i?g=gg:(PI=g,g=n),g}var _A=jC,$A=_C;function qA(g){return g.join("")}function gC(g){return{type:"literal",value:_A(g)?g.join(""):g}}function IC(g){return g[0]}function AC(g){return g[1]}function CC(g){for(var I,A=[g[0]],C=g.length,t=g[0],i=1;i<C;i++)"concatenation"==(I=g[i]).type&&(I=CC(I.pieces)),"concatenation"==I.type?A=A.concat(I.pieces):"literal"!=I.type&&"glob"!=I.type||"literal"!=t.type&&"glob"!=t.type?(A.push(I),t=I):(t.value+=I.value,"glob"!=t.type&&"glob"==I.type&&(t.type="glob"));return 1==A.length?A[0]:{type:"concatenation",pieces:A}}if((C=o())!==i&&PI===A.length)return C;throw C!==i&&PI<A.length&&AA({type:"end",description:"end of input"}),CA(null,$I,_I)}}}(),It=gt.SyntaxError;function At(g,I){return I.forEach((function(I){I&&"string"!=typeof I&&!Array.isArray(I)&&Object.keys(I).forEach((function(A){if("default"!==A&&!(A in g)){var C=Object.getOwnPropertyDescriptor(I,A);Object.defineProperty(g,A,C.get?C:{enumerable:!0,get:function(){return I[A]}})}}))})),Object.freeze(g)}qC.SyntaxError=It;const Ct="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:{},tt="undefined"!=typeof BigInt?BigInt:Ct.BigInt||Number;let it=DataView;it.prototype.setBigUint64||(it.prototype.setBigUint64=function(g,I,A){let C,t;if(I<Math.pow(2,32))C=Number(I),t=0;else{for(var i=I.toString(2),e="",o=0;o<64-i.length;o++)e+="0";e+=i,t=parseInt(e.substring(0,32),2),C=parseInt(e.substring(32),2)}this.setUint32(g+(A?0:4),C,A),this.setUint32(g+(A?4:0),t,A)},it.prototype.getBigUint64=function(g,I){let A=this.getUint32(g+(I?0:4),I),C=this.getUint32(g+(I?4:0),I);for(var t=A.toString(2),i=C.toString(2),e="",o=0;o<32-t.length;o++)e+="0";return tt("0b"+i+(e+=t))});const et=it;for(var ot="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},nt={},st={byteLength:function(g){var I=mt(g),A=I[0],C=I[1];return 3*(A+C)/4-C},toByteArray:function(g){var I,A,C=mt(g),t=C[0],i=C[1],e=new ct(function(g,I,A){return 3*(I+A)/4-A}(0,t,i)),o=0,n=i>0?t-4:t;for(A=0;A<n;A+=4)I=rt[g.charCodeAt(A)]<<18|rt[g.charCodeAt(A+1)]<<12|rt[g.charCodeAt(A+2)]<<6|rt[g.charCodeAt(A+3)],e[o++]=I>>16&255,e[o++]=I>>8&255,e[o++]=255&I;2===i&&(I=rt[g.charCodeAt(A)]<<2|rt[g.charCodeAt(A+1)]>>4,e[o++]=255&I);1===i&&(I=rt[g.charCodeAt(A)]<<10|rt[g.charCodeAt(A+1)]<<4|rt[g.charCodeAt(A+2)]>>2,e[o++]=I>>8&255,e[o++]=255&I);return e},fromByteArray:function(g){for(var I,A=g.length,C=A%3,t=[],i=16383,e=0,o=A-C;e<o;e+=i)t.push(Zt(g,e,e+i>o?o:e+i));1===C?(I=g[A-1],t.push(lt[I>>2]+lt[I<<4&63]+"==")):2===C&&(I=(g[A-2]<<8)+g[A-1],t.push(lt[I>>10]+lt[I>>4&63]+lt[I<<2&63]+"="));return t.join("")}},lt=[],rt=[],ct="undefined"!=typeof Uint8Array?Uint8Array:Array,at="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",dt=0,ht=at.length;dt<ht;++dt)lt[dt]=at[dt],rt[at.charCodeAt(dt)]=dt;function mt(g){var I=g.length;if(I%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var A=g.indexOf("=");return-1===A&&(A=I),[A,A===I?0:4-A%4]}function Zt(g,I,A){for(var C,t,i=[],e=I;e<A;e+=3)C=(g[e]<<16&16711680)+(g[e+1]<<8&65280)+(255&g[e+2]),i.push(lt[(t=C)>>18&63]+lt[t>>12&63]+lt[t>>6&63]+lt[63&t]);return i.join("")}rt["-".charCodeAt(0)]=62,rt["_".charCodeAt(0)]=63;var ut={};
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function Gt(g){if("string"!=typeof g)throw new TypeError("Path must be a string. Received "+JSON.stringify(g))}function bt(g,I){for(var A,C="",t=0,i=-1,e=0,o=0;o<=g.length;++o){if(o<g.length)A=g.charCodeAt(o);else{if(47===A)break;A=47}if(47===A){if(i===o-1||1===e);else if(i!==o-1&&2===e){if(C.length<2||2!==t||46!==C.charCodeAt(C.length-1)||46!==C.charCodeAt(C.length-2))if(C.length>2){var n=C.lastIndexOf("/");if(n!==C.length-1){-1===n?(C="",t=0):t=(C=C.slice(0,n)).length-1-C.lastIndexOf("/"),i=o,e=0;continue}}else if(2===C.length||1===C.length){C="",t=0,i=o,e=0;continue}I&&(C.length>0?C+="/..":C="..",t=2)}else C.length>0?C+="/"+g.slice(i+1,o):C=g.slice(i+1,o),t=o-i-1;i=o,e=0}else 46===A&&-1!==e?++e:e=-1}return C}ut.read=function(g,I,A,C,t){var i,e,o=8*t-C-1,n=(1<<o)-1,s=n>>1,l=-7,r=A?t-1:0,c=A?-1:1,a=g[I+r];for(r+=c,i=a&(1<<-l)-1,a>>=-l,l+=o;l>0;i=256*i+g[I+r],r+=c,l-=8);for(e=i&(1<<-l)-1,i>>=-l,l+=C;l>0;e=256*e+g[I+r],r+=c,l-=8);if(0===i)i=1-s;else{if(i===n)return e?NaN:1/0*(a?-1:1);e+=Math.pow(2,C),i-=s}return(a?-1:1)*e*Math.pow(2,i-C)},ut.write=function(g,I,A,C,t,i){var e,o,n,s=8*i-t-1,l=(1<<s)-1,r=l>>1,c=23===t?Math.pow(2,-24)-Math.pow(2,-77):0,a=C?0:i-1,d=C?1:-1,h=I<0||0===I&&1/I<0?1:0;for(I=Math.abs(I),isNaN(I)||I===1/0?(o=isNaN(I)?1:0,e=l):(e=Math.floor(Math.log(I)/Math.LN2),I*(n=Math.pow(2,-e))<1&&(e--,n*=2),(I+=e+r>=1?c/n:c*Math.pow(2,1-r))*n>=2&&(e++,n/=2),e+r>=l?(o=0,e=l):e+r>=1?(o=(I*n-1)*Math.pow(2,t),e+=r):(o=I*Math.pow(2,r-1)*Math.pow(2,t),e=0));t>=8;g[A+a]=255&o,a+=d,o/=256,t-=8);for(e=e<<t|o,s+=t;s>0;g[A+a]=255&e,a+=d,e/=256,s-=8);g[A+a-d]|=128*h},
/*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   */
function(g){const I=st,A=ut,C="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;g.Buffer=e,g.SlowBuffer=function(g){+g!=g&&(g=0);return e.alloc(+g)},g.INSPECT_MAX_BYTES=50;const t=2147483647;function i(g){if(g>t)throw new RangeError('The value "'+g+'" is invalid for option "size"');const I=new Uint8Array(g);return Object.setPrototypeOf(I,e.prototype),I}function e(g,I,A){if("number"==typeof g){if("string"==typeof I)throw new TypeError('The "string" argument must be of type string. Received type number');return s(g)}return o(g,I,A)}function o(g,I,A){if("string"==typeof g)return function(g,I){"string"==typeof I&&""!==I||(I="utf8");if(!e.isEncoding(I))throw new TypeError("Unknown encoding: "+I);const A=0|a(g,I);let C=i(A);const t=C.write(g,I);t!==A&&(C=C.slice(0,t));return C}(g,I);if(ArrayBuffer.isView(g))return function(g){if(P(g,Uint8Array)){const I=new Uint8Array(g);return r(I.buffer,I.byteOffset,I.byteLength)}return l(g)}(g);if(null==g)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g);if(P(g,ArrayBuffer)||g&&P(g.buffer,ArrayBuffer))return r(g,I,A);if("undefined"!=typeof SharedArrayBuffer&&(P(g,SharedArrayBuffer)||g&&P(g.buffer,SharedArrayBuffer)))return r(g,I,A);if("number"==typeof g)throw new TypeError('The "value" argument must not be of type number. Received type number');const C=g.valueOf&&g.valueOf();if(null!=C&&C!==g)return e.from(C,I,A);const t=function(g){if(e.isBuffer(g)){const I=0|c(g.length),A=i(I);return 0===A.length||g.copy(A,0,0,I),A}if(void 0!==g.length)return"number"!=typeof g.length||U(g.length)?i(0):l(g);if("Buffer"===g.type&&Array.isArray(g.data))return l(g.data)}(g);if(t)return t;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof g[Symbol.toPrimitive])return e.from(g[Symbol.toPrimitive]("string"),I,A);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g)}function n(g){if("number"!=typeof g)throw new TypeError('"size" argument must be of type number');if(g<0)throw new RangeError('The value "'+g+'" is invalid for option "size"')}function s(g){return n(g),i(g<0?0:0|c(g))}function l(g){const I=g.length<0?0:0|c(g.length),A=i(I);for(let C=0;C<I;C+=1)A[C]=255&g[C];return A}function r(g,I,A){if(I<0||g.byteLength<I)throw new RangeError('"offset" is outside of buffer bounds');if(g.byteLength<I+(A||0))throw new RangeError('"length" is outside of buffer bounds');let C;return C=void 0===I&&void 0===A?new Uint8Array(g):void 0===A?new Uint8Array(g,I):new Uint8Array(g,I,A),Object.setPrototypeOf(C,e.prototype),C}function c(g){if(g>=t)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+t.toString(16)+" bytes");return 0|g}function a(g,I){if(e.isBuffer(g))return g.length;if(ArrayBuffer.isView(g)||P(g,ArrayBuffer))return g.byteLength;if("string"!=typeof g)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof g);const A=g.length,C=arguments.length>2&&!0===arguments[2];if(!C&&0===A)return 0;let t=!1;for(;;)switch(I){case"ascii":case"latin1":case"binary":return A;case"utf8":case"utf-8":return L(g).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*A;case"hex":return A>>>1;case"base64":return T(g).length;default:if(t)return C?-1:L(g).length;I=(""+I).toLowerCase(),t=!0}}function d(g,I,A){let C=!1;if((void 0===I||I<0)&&(I=0),I>this.length)return"";if((void 0===A||A>this.length)&&(A=this.length),A<=0)return"";if((A>>>=0)<=(I>>>=0))return"";for(g||(g="utf8");;)switch(g){case"hex":return f(this,I,A);case"utf8":case"utf-8":return w(this,I,A);case"ascii":return S(this,I,A);case"latin1":case"binary":return K(this,I,A);case"base64":return y(this,I,A);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Y(this,I,A);default:if(C)throw new TypeError("Unknown encoding: "+g);g=(g+"").toLowerCase(),C=!0}}function h(g,I,A){const C=g[I];g[I]=g[A],g[A]=C}function m(g,I,A,C,t){if(0===g.length)return-1;if("string"==typeof A?(C=A,A=0):A>2147483647?A=2147483647:A<-2147483648&&(A=-2147483648),U(A=+A)&&(A=t?0:g.length-1),A<0&&(A=g.length+A),A>=g.length){if(t)return-1;A=g.length-1}else if(A<0){if(!t)return-1;A=0}if("string"==typeof I&&(I=e.from(I,C)),e.isBuffer(I))return 0===I.length?-1:Z(g,I,A,C,t);if("number"==typeof I)return I&=255,"function"==typeof Uint8Array.prototype.indexOf?t?Uint8Array.prototype.indexOf.call(g,I,A):Uint8Array.prototype.lastIndexOf.call(g,I,A):Z(g,[I],A,C,t);throw new TypeError("val must be string, number or Buffer")}function Z(g,I,A,C,t){let i,e=1,o=g.length,n=I.length;if(void 0!==C&&("ucs2"===(C=String(C).toLowerCase())||"ucs-2"===C||"utf16le"===C||"utf-16le"===C)){if(g.length<2||I.length<2)return-1;e=2,o/=2,n/=2,A/=2}function s(g,I){return 1===e?g[I]:g.readUInt16BE(I*e)}if(t){let C=-1;for(i=A;i<o;i++)if(s(g,i)===s(I,-1===C?0:i-C)){if(-1===C&&(C=i),i-C+1===n)return C*e}else-1!==C&&(i-=i-C),C=-1}else for(A+n>o&&(A=o-n),i=A;i>=0;i--){let A=!0;for(let C=0;C<n;C++)if(s(g,i+C)!==s(I,C)){A=!1;break}if(A)return i}return-1}function u(g,I,A,C){A=Number(A)||0;const t=g.length-A;C?(C=Number(C))>t&&(C=t):C=t;const i=I.length;let e;for(C>i/2&&(C=i/2),e=0;e<C;++e){const C=parseInt(I.substr(2*e,2),16);if(U(C))return e;g[A+e]=C}return e}function G(g,I,A,C){return z(L(I,g.length-A),g,A,C)}function b(g,I,A,C){return z(function(g){const I=[];for(let A=0;A<g.length;++A)I.push(255&g.charCodeAt(A));return I}(I),g,A,C)}function p(g,I,A,C){return z(T(I),g,A,C)}function B(g,I,A,C){return z(function(g,I){let A,C,t;const i=[];for(let e=0;e<g.length&&!((I-=2)<0);++e)A=g.charCodeAt(e),C=A>>8,t=A%256,i.push(t),i.push(C);return i}(I,g.length-A),g,A,C)}function y(g,A,C){return 0===A&&C===g.length?I.fromByteArray(g):I.fromByteArray(g.slice(A,C))}function w(g,I,A){A=Math.min(g.length,A);const C=[];let t=I;for(;t<A;){const I=g[t];let i=null,e=I>239?4:I>223?3:I>191?2:1;if(t+e<=A){let A,C,o,n;switch(e){case 1:I<128&&(i=I);break;case 2:A=g[t+1],128==(192&A)&&(n=(31&I)<<6|63&A,n>127&&(i=n));break;case 3:A=g[t+1],C=g[t+2],128==(192&A)&&128==(192&C)&&(n=(15&I)<<12|(63&A)<<6|63&C,n>2047&&(n<55296||n>57343)&&(i=n));break;case 4:A=g[t+1],C=g[t+2],o=g[t+3],128==(192&A)&&128==(192&C)&&128==(192&o)&&(n=(15&I)<<18|(63&A)<<12|(63&C)<<6|63&o,n>65535&&n<1114112&&(i=n))}}null===i?(i=65533,e=1):i>65535&&(i-=65536,C.push(i>>>10&1023|55296),i=56320|1023&i),C.push(i),t+=e}return function(g){const I=g.length;if(I<=W)return String.fromCharCode.apply(String,g);let A="",C=0;for(;C<I;)A+=String.fromCharCode.apply(String,g.slice(C,C+=W));return A}(C)}g.kMaxLength=t,e.TYPED_ARRAY_SUPPORT=function(){try{const g=new Uint8Array(1),I={foo:function(){return 42}};return Object.setPrototypeOf(I,Uint8Array.prototype),Object.setPrototypeOf(g,I),42===g.foo()}catch(g){return!1}}(),e.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(e.prototype,"parent",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.buffer}}),Object.defineProperty(e.prototype,"offset",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.byteOffset}}),e.poolSize=8192,e.from=function(g,I,A){return o(g,I,A)},Object.setPrototypeOf(e.prototype,Uint8Array.prototype),Object.setPrototypeOf(e,Uint8Array),e.alloc=function(g,I,A){return function(g,I,A){return n(g),g<=0?i(g):void 0!==I?"string"==typeof A?i(g).fill(I,A):i(g).fill(I):i(g)}(g,I,A)},e.allocUnsafe=function(g){return s(g)},e.allocUnsafeSlow=function(g){return s(g)},e.isBuffer=function(g){return null!=g&&!0===g._isBuffer&&g!==e.prototype},e.compare=function(g,I){if(P(g,Uint8Array)&&(g=e.from(g,g.offset,g.byteLength)),P(I,Uint8Array)&&(I=e.from(I,I.offset,I.byteLength)),!e.isBuffer(g)||!e.isBuffer(I))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(g===I)return 0;let A=g.length,C=I.length;for(let t=0,i=Math.min(A,C);t<i;++t)if(g[t]!==I[t]){A=g[t],C=I[t];break}return A<C?-1:C<A?1:0},e.isEncoding=function(g){switch(String(g).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(g,I){if(!Array.isArray(g))throw new TypeError('"list" argument must be an Array of Buffers');if(0===g.length)return e.alloc(0);let A;if(void 0===I)for(I=0,A=0;A<g.length;++A)I+=g[A].length;const C=e.allocUnsafe(I);let t=0;for(A=0;A<g.length;++A){let I=g[A];if(P(I,Uint8Array))t+I.length>C.length?(e.isBuffer(I)||(I=e.from(I)),I.copy(C,t)):Uint8Array.prototype.set.call(C,I,t);else{if(!e.isBuffer(I))throw new TypeError('"list" argument must be an Array of Buffers');I.copy(C,t)}t+=I.length}return C},e.byteLength=a,e.prototype._isBuffer=!0,e.prototype.swap16=function(){const g=this.length;if(g%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let I=0;I<g;I+=2)h(this,I,I+1);return this},e.prototype.swap32=function(){const g=this.length;if(g%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let I=0;I<g;I+=4)h(this,I,I+3),h(this,I+1,I+2);return this},e.prototype.swap64=function(){const g=this.length;if(g%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let I=0;I<g;I+=8)h(this,I,I+7),h(this,I+1,I+6),h(this,I+2,I+5),h(this,I+3,I+4);return this},e.prototype.toString=function(){const g=this.length;return 0===g?"":0===arguments.length?w(this,0,g):d.apply(this,arguments)},e.prototype.toLocaleString=e.prototype.toString,e.prototype.equals=function(g){if(!e.isBuffer(g))throw new TypeError("Argument must be a Buffer");return this===g||0===e.compare(this,g)},e.prototype.inspect=function(){let I="";const A=g.INSPECT_MAX_BYTES;return I=this.toString("hex",0,A).replace(/(.{2})/g,"$1 ").trim(),this.length>A&&(I+=" ... "),"<Buffer "+I+">"},C&&(e.prototype[C]=e.prototype.inspect),e.prototype.compare=function(g,I,A,C,t){if(P(g,Uint8Array)&&(g=e.from(g,g.offset,g.byteLength)),!e.isBuffer(g))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof g);if(void 0===I&&(I=0),void 0===A&&(A=g?g.length:0),void 0===C&&(C=0),void 0===t&&(t=this.length),I<0||A>g.length||C<0||t>this.length)throw new RangeError("out of range index");if(C>=t&&I>=A)return 0;if(C>=t)return-1;if(I>=A)return 1;if(this===g)return 0;let i=(t>>>=0)-(C>>>=0),o=(A>>>=0)-(I>>>=0);const n=Math.min(i,o),s=this.slice(C,t),l=g.slice(I,A);for(let e=0;e<n;++e)if(s[e]!==l[e]){i=s[e],o=l[e];break}return i<o?-1:o<i?1:0},e.prototype.includes=function(g,I,A){return-1!==this.indexOf(g,I,A)},e.prototype.indexOf=function(g,I,A){return m(this,g,I,A,!0)},e.prototype.lastIndexOf=function(g,I,A){return m(this,g,I,A,!1)},e.prototype.write=function(g,I,A,C){if(void 0===I)C="utf8",A=this.length,I=0;else if(void 0===A&&"string"==typeof I)C=I,A=this.length,I=0;else{if(!isFinite(I))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");I>>>=0,isFinite(A)?(A>>>=0,void 0===C&&(C="utf8")):(C=A,A=void 0)}const t=this.length-I;if((void 0===A||A>t)&&(A=t),g.length>0&&(A<0||I<0)||I>this.length)throw new RangeError("Attempt to write outside buffer bounds");C||(C="utf8");let i=!1;for(;;)switch(C){case"hex":return u(this,g,I,A);case"utf8":case"utf-8":return G(this,g,I,A);case"ascii":case"latin1":case"binary":return b(this,g,I,A);case"base64":return p(this,g,I,A);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,g,I,A);default:if(i)throw new TypeError("Unknown encoding: "+C);C=(""+C).toLowerCase(),i=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const W=4096;function S(g,I,A){let C="";A=Math.min(g.length,A);for(let t=I;t<A;++t)C+=String.fromCharCode(127&g[t]);return C}function K(g,I,A){let C="";A=Math.min(g.length,A);for(let t=I;t<A;++t)C+=String.fromCharCode(g[t]);return C}function f(g,I,A){const C=g.length;(!I||I<0)&&(I=0),(!A||A<0||A>C)&&(A=C);let t="";for(let i=I;i<A;++i)t+=x[g[i]];return t}function Y(g,I,A){const C=g.slice(I,A);let t="";for(let i=0;i<C.length-1;i+=2)t+=String.fromCharCode(C[i]+256*C[i+1]);return t}function X(g,I,A){if(g%1!=0||g<0)throw new RangeError("offset is not uint");if(g+I>A)throw new RangeError("Trying to access beyond buffer length")}function V(g,I,A,C,t,i){if(!e.isBuffer(g))throw new TypeError('"buffer" argument must be a Buffer instance');if(I>t||I<i)throw new RangeError('"value" argument is out of bounds');if(A+C>g.length)throw new RangeError("Index out of range")}function O(g,I,A,C,t){M(I,C,t,g,A,7);let i=Number(I&BigInt(4294967295));g[A++]=i,i>>=8,g[A++]=i,i>>=8,g[A++]=i,i>>=8,g[A++]=i;let e=Number(I>>BigInt(32)&BigInt(4294967295));return g[A++]=e,e>>=8,g[A++]=e,e>>=8,g[A++]=e,e>>=8,g[A++]=e,A}function R(g,I,A,C,t){M(I,C,t,g,A,7);let i=Number(I&BigInt(4294967295));g[A+7]=i,i>>=8,g[A+6]=i,i>>=8,g[A+5]=i,i>>=8,g[A+4]=i;let e=Number(I>>BigInt(32)&BigInt(4294967295));return g[A+3]=e,e>>=8,g[A+2]=e,e>>=8,g[A+1]=e,e>>=8,g[A]=e,A+8}function Q(g,I,A,C,t,i){if(A+C>g.length)throw new RangeError("Index out of range");if(A<0)throw new RangeError("Index out of range")}function H(g,I,C,t,i){return I=+I,C>>>=0,i||Q(g,0,C,4),A.write(g,I,C,t,23,4),C+4}function k(g,I,C,t,i){return I=+I,C>>>=0,i||Q(g,0,C,8),A.write(g,I,C,t,52,8),C+8}e.prototype.slice=function(g,I){const A=this.length;(g=~~g)<0?(g+=A)<0&&(g=0):g>A&&(g=A),(I=void 0===I?A:~~I)<0?(I+=A)<0&&(I=0):I>A&&(I=A),I<g&&(I=g);const C=this.subarray(g,I);return Object.setPrototypeOf(C,e.prototype),C},e.prototype.readUintLE=e.prototype.readUIntLE=function(g,I,A){g>>>=0,I>>>=0,A||X(g,I,this.length);let C=this[g],t=1,i=0;for(;++i<I&&(t*=256);)C+=this[g+i]*t;return C},e.prototype.readUintBE=e.prototype.readUIntBE=function(g,I,A){g>>>=0,I>>>=0,A||X(g,I,this.length);let C=this[g+--I],t=1;for(;I>0&&(t*=256);)C+=this[g+--I]*t;return C},e.prototype.readUint8=e.prototype.readUInt8=function(g,I){return g>>>=0,I||X(g,1,this.length),this[g]},e.prototype.readUint16LE=e.prototype.readUInt16LE=function(g,I){return g>>>=0,I||X(g,2,this.length),this[g]|this[g+1]<<8},e.prototype.readUint16BE=e.prototype.readUInt16BE=function(g,I){return g>>>=0,I||X(g,2,this.length),this[g]<<8|this[g+1]},e.prototype.readUint32LE=e.prototype.readUInt32LE=function(g,I){return g>>>=0,I||X(g,4,this.length),(this[g]|this[g+1]<<8|this[g+2]<<16)+16777216*this[g+3]},e.prototype.readUint32BE=e.prototype.readUInt32BE=function(g,I){return g>>>=0,I||X(g,4,this.length),16777216*this[g]+(this[g+1]<<16|this[g+2]<<8|this[g+3])},e.prototype.readBigUInt64LE=j((function(g){N(g>>>=0,"offset");const I=this[g],A=this[g+7];void 0!==I&&void 0!==A||E(g,this.length-8);const C=I+256*this[++g]+65536*this[++g]+this[++g]*2**24,t=this[++g]+256*this[++g]+65536*this[++g]+A*2**24;return BigInt(C)+(BigInt(t)<<BigInt(32))})),e.prototype.readBigUInt64BE=j((function(g){N(g>>>=0,"offset");const I=this[g],A=this[g+7];void 0!==I&&void 0!==A||E(g,this.length-8);const C=I*2**24+65536*this[++g]+256*this[++g]+this[++g],t=this[++g]*2**24+65536*this[++g]+256*this[++g]+A;return(BigInt(C)<<BigInt(32))+BigInt(t)})),e.prototype.readIntLE=function(g,I,A){g>>>=0,I>>>=0,A||X(g,I,this.length);let C=this[g],t=1,i=0;for(;++i<I&&(t*=256);)C+=this[g+i]*t;return t*=128,C>=t&&(C-=Math.pow(2,8*I)),C},e.prototype.readIntBE=function(g,I,A){g>>>=0,I>>>=0,A||X(g,I,this.length);let C=I,t=1,i=this[g+--C];for(;C>0&&(t*=256);)i+=this[g+--C]*t;return t*=128,i>=t&&(i-=Math.pow(2,8*I)),i},e.prototype.readInt8=function(g,I){return g>>>=0,I||X(g,1,this.length),128&this[g]?-1*(255-this[g]+1):this[g]},e.prototype.readInt16LE=function(g,I){g>>>=0,I||X(g,2,this.length);const A=this[g]|this[g+1]<<8;return 32768&A?4294901760|A:A},e.prototype.readInt16BE=function(g,I){g>>>=0,I||X(g,2,this.length);const A=this[g+1]|this[g]<<8;return 32768&A?4294901760|A:A},e.prototype.readInt32LE=function(g,I){return g>>>=0,I||X(g,4,this.length),this[g]|this[g+1]<<8|this[g+2]<<16|this[g+3]<<24},e.prototype.readInt32BE=function(g,I){return g>>>=0,I||X(g,4,this.length),this[g]<<24|this[g+1]<<16|this[g+2]<<8|this[g+3]},e.prototype.readBigInt64LE=j((function(g){N(g>>>=0,"offset");const I=this[g],A=this[g+7];void 0!==I&&void 0!==A||E(g,this.length-8);const C=this[g+4]+256*this[g+5]+65536*this[g+6]+(A<<24);return(BigInt(C)<<BigInt(32))+BigInt(I+256*this[++g]+65536*this[++g]+this[++g]*2**24)})),e.prototype.readBigInt64BE=j((function(g){N(g>>>=0,"offset");const I=this[g],A=this[g+7];void 0!==I&&void 0!==A||E(g,this.length-8);const C=(I<<24)+65536*this[++g]+256*this[++g]+this[++g];return(BigInt(C)<<BigInt(32))+BigInt(this[++g]*2**24+65536*this[++g]+256*this[++g]+A)})),e.prototype.readFloatLE=function(g,I){return g>>>=0,I||X(g,4,this.length),A.read(this,g,!0,23,4)},e.prototype.readFloatBE=function(g,I){return g>>>=0,I||X(g,4,this.length),A.read(this,g,!1,23,4)},e.prototype.readDoubleLE=function(g,I){return g>>>=0,I||X(g,8,this.length),A.read(this,g,!0,52,8)},e.prototype.readDoubleBE=function(g,I){return g>>>=0,I||X(g,8,this.length),A.read(this,g,!1,52,8)},e.prototype.writeUintLE=e.prototype.writeUIntLE=function(g,I,A,C){if(g=+g,I>>>=0,A>>>=0,!C){V(this,g,I,A,Math.pow(2,8*A)-1,0)}let t=1,i=0;for(this[I]=255&g;++i<A&&(t*=256);)this[I+i]=g/t&255;return I+A},e.prototype.writeUintBE=e.prototype.writeUIntBE=function(g,I,A,C){if(g=+g,I>>>=0,A>>>=0,!C){V(this,g,I,A,Math.pow(2,8*A)-1,0)}let t=A-1,i=1;for(this[I+t]=255&g;--t>=0&&(i*=256);)this[I+t]=g/i&255;return I+A},e.prototype.writeUint8=e.prototype.writeUInt8=function(g,I,A){return g=+g,I>>>=0,A||V(this,g,I,1,255,0),this[I]=255&g,I+1},e.prototype.writeUint16LE=e.prototype.writeUInt16LE=function(g,I,A){return g=+g,I>>>=0,A||V(this,g,I,2,65535,0),this[I]=255&g,this[I+1]=g>>>8,I+2},e.prototype.writeUint16BE=e.prototype.writeUInt16BE=function(g,I,A){return g=+g,I>>>=0,A||V(this,g,I,2,65535,0),this[I]=g>>>8,this[I+1]=255&g,I+2},e.prototype.writeUint32LE=e.prototype.writeUInt32LE=function(g,I,A){return g=+g,I>>>=0,A||V(this,g,I,4,4294967295,0),this[I+3]=g>>>24,this[I+2]=g>>>16,this[I+1]=g>>>8,this[I]=255&g,I+4},e.prototype.writeUint32BE=e.prototype.writeUInt32BE=function(g,I,A){return g=+g,I>>>=0,A||V(this,g,I,4,4294967295,0),this[I]=g>>>24,this[I+1]=g>>>16,this[I+2]=g>>>8,this[I+3]=255&g,I+4},e.prototype.writeBigUInt64LE=j((function(g,I=0){return O(this,g,I,BigInt(0),BigInt("0xffffffffffffffff"))})),e.prototype.writeBigUInt64BE=j((function(g,I=0){return R(this,g,I,BigInt(0),BigInt("0xffffffffffffffff"))})),e.prototype.writeIntLE=function(g,I,A,C){if(g=+g,I>>>=0,!C){const C=Math.pow(2,8*A-1);V(this,g,I,A,C-1,-C)}let t=0,i=1,e=0;for(this[I]=255&g;++t<A&&(i*=256);)g<0&&0===e&&0!==this[I+t-1]&&(e=1),this[I+t]=(g/i>>0)-e&255;return I+A},e.prototype.writeIntBE=function(g,I,A,C){if(g=+g,I>>>=0,!C){const C=Math.pow(2,8*A-1);V(this,g,I,A,C-1,-C)}let t=A-1,i=1,e=0;for(this[I+t]=255&g;--t>=0&&(i*=256);)g<0&&0===e&&0!==this[I+t+1]&&(e=1),this[I+t]=(g/i>>0)-e&255;return I+A},e.prototype.writeInt8=function(g,I,A){return g=+g,I>>>=0,A||V(this,g,I,1,127,-128),g<0&&(g=255+g+1),this[I]=255&g,I+1},e.prototype.writeInt16LE=function(g,I,A){return g=+g,I>>>=0,A||V(this,g,I,2,32767,-32768),this[I]=255&g,this[I+1]=g>>>8,I+2},e.prototype.writeInt16BE=function(g,I,A){return g=+g,I>>>=0,A||V(this,g,I,2,32767,-32768),this[I]=g>>>8,this[I+1]=255&g,I+2},e.prototype.writeInt32LE=function(g,I,A){return g=+g,I>>>=0,A||V(this,g,I,4,2147483647,-2147483648),this[I]=255&g,this[I+1]=g>>>8,this[I+2]=g>>>16,this[I+3]=g>>>24,I+4},e.prototype.writeInt32BE=function(g,I,A){return g=+g,I>>>=0,A||V(this,g,I,4,2147483647,-2147483648),g<0&&(g=4294967295+g+1),this[I]=g>>>24,this[I+1]=g>>>16,this[I+2]=g>>>8,this[I+3]=255&g,I+4},e.prototype.writeBigInt64LE=j((function(g,I=0){return O(this,g,I,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),e.prototype.writeBigInt64BE=j((function(g,I=0){return R(this,g,I,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),e.prototype.writeFloatLE=function(g,I,A){return H(this,g,I,!0,A)},e.prototype.writeFloatBE=function(g,I,A){return H(this,g,I,!1,A)},e.prototype.writeDoubleLE=function(g,I,A){return k(this,g,I,!0,A)},e.prototype.writeDoubleBE=function(g,I,A){return k(this,g,I,!1,A)},e.prototype.copy=function(g,I,A,C){if(!e.isBuffer(g))throw new TypeError("argument should be a Buffer");if(A||(A=0),C||0===C||(C=this.length),I>=g.length&&(I=g.length),I||(I=0),C>0&&C<A&&(C=A),C===A)return 0;if(0===g.length||0===this.length)return 0;if(I<0)throw new RangeError("targetStart out of bounds");if(A<0||A>=this.length)throw new RangeError("Index out of range");if(C<0)throw new RangeError("sourceEnd out of bounds");C>this.length&&(C=this.length),g.length-I<C-A&&(C=g.length-I+A);const t=C-A;return this===g&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(I,A,C):Uint8Array.prototype.set.call(g,this.subarray(A,C),I),t},e.prototype.fill=function(g,I,A,C){if("string"==typeof g){if("string"==typeof I?(C=I,I=0,A=this.length):"string"==typeof A&&(C=A,A=this.length),void 0!==C&&"string"!=typeof C)throw new TypeError("encoding must be a string");if("string"==typeof C&&!e.isEncoding(C))throw new TypeError("Unknown encoding: "+C);if(1===g.length){const I=g.charCodeAt(0);("utf8"===C&&I<128||"latin1"===C)&&(g=I)}}else"number"==typeof g?g&=255:"boolean"==typeof g&&(g=Number(g));if(I<0||this.length<I||this.length<A)throw new RangeError("Out of range index");if(A<=I)return this;let t;if(I>>>=0,A=void 0===A?this.length:A>>>0,g||(g=0),"number"==typeof g)for(t=I;t<A;++t)this[t]=g;else{const i=e.isBuffer(g)?g:e.from(g,C),o=i.length;if(0===o)throw new TypeError('The value "'+g+'" is invalid for argument "value"');for(t=0;t<A-I;++t)this[t+I]=i[t%o]}return this};const J={};function v(g,I,A){J[g]=class extends A{constructor(){super(),Object.defineProperty(this,"message",{value:I.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${g}]`,this.stack,delete this.name}get code(){return g}set code(g){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:g,writable:!0})}toString(){return`${this.name} [${g}]: ${this.message}`}}}function D(g){let I="",A=g.length;const C="-"===g[0]?1:0;for(;A>=C+4;A-=3)I=`_${g.slice(A-3,A)}${I}`;return`${g.slice(0,A)}${I}`}function M(g,I,A,C,t,i){if(g>A||g<I){const C="bigint"==typeof I?"n":"";let t;throw t=i>3?0===I||I===BigInt(0)?`>= 0${C} and < 2${C} ** ${8*(i+1)}${C}`:`>= -(2${C} ** ${8*(i+1)-1}${C}) and < 2 ** ${8*(i+1)-1}${C}`:`>= ${I}${C} and <= ${A}${C}`,new J.ERR_OUT_OF_RANGE("value",t,g)}!function(g,I,A){N(I,"offset"),void 0!==g[I]&&void 0!==g[I+A]||E(I,g.length-(A+1))}(C,t,i)}function N(g,I){if("number"!=typeof g)throw new J.ERR_INVALID_ARG_TYPE(I,"number",g)}function E(g,I,A){if(Math.floor(g)!==g)throw N(g,A),new J.ERR_OUT_OF_RANGE(A||"offset","an integer",g);if(I<0)throw new J.ERR_BUFFER_OUT_OF_BOUNDS;throw new J.ERR_OUT_OF_RANGE(A||"offset",`>= ${A?1:0} and <= ${I}`,g)}v("ERR_BUFFER_OUT_OF_BOUNDS",(function(g){return g?`${g} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),v("ERR_INVALID_ARG_TYPE",(function(g,I){return`The "${g}" argument must be of type number. Received type ${typeof I}`}),TypeError),v("ERR_OUT_OF_RANGE",(function(g,I,A){let C=`The value of "${g}" is out of range.`,t=A;return Number.isInteger(A)&&Math.abs(A)>2**32?t=D(String(A)):"bigint"==typeof A&&(t=String(A),(A>BigInt(2)**BigInt(32)||A<-(BigInt(2)**BigInt(32)))&&(t=D(t)),t+="n"),C+=` It must be ${I}. Received ${t}`,C}),RangeError);const F=/[^+/0-9A-Za-z-_]/g;function L(g,I){let A;I=I||1/0;const C=g.length;let t=null;const i=[];for(let e=0;e<C;++e){if(A=g.charCodeAt(e),A>55295&&A<57344){if(!t){if(A>56319){(I-=3)>-1&&i.push(239,191,189);continue}if(e+1===C){(I-=3)>-1&&i.push(239,191,189);continue}t=A;continue}if(A<56320){(I-=3)>-1&&i.push(239,191,189),t=A;continue}A=65536+(t-55296<<10|A-56320)}else t&&(I-=3)>-1&&i.push(239,191,189);if(t=null,A<128){if((I-=1)<0)break;i.push(A)}else if(A<2048){if((I-=2)<0)break;i.push(A>>6|192,63&A|128)}else if(A<65536){if((I-=3)<0)break;i.push(A>>12|224,A>>6&63|128,63&A|128)}else{if(!(A<1114112))throw new Error("Invalid code point");if((I-=4)<0)break;i.push(A>>18|240,A>>12&63|128,A>>6&63|128,63&A|128)}}return i}function T(g){return I.toByteArray(function(g){if((g=(g=g.split("=")[0]).trim().replace(F,"")).length<2)return"";for(;g.length%4!=0;)g+="=";return g}(g))}function z(g,I,A,C){let t;for(t=0;t<C&&!(t+A>=I.length||t>=g.length);++t)I[t+A]=g[t];return t}function P(g,I){return g instanceof I||null!=g&&null!=g.constructor&&null!=g.constructor.name&&g.constructor.name===I.name}function U(g){return g!=g}const x=function(){const g="0123456789abcdef",I=new Array(256);for(let A=0;A<16;++A){const C=16*A;for(let t=0;t<16;++t)I[C+t]=g[A]+g[t]}return I}();function j(g){return"undefined"==typeof BigInt?_:g}function _(){throw new Error("BigInt not supported")}}(nt);var pt={resolve:function(){for(var g,I="",A=!1,C=arguments.length-1;C>=-1&&!A;C--){var t;C>=0?t=arguments[C]:(void 0===g&&(g=process.cwd()),t=g),Gt(t),0!==t.length&&(I=t+"/"+I,A=47===t.charCodeAt(0))}return I=bt(I,!A),A?I.length>0?"/"+I:"/":I.length>0?I:"."},normalize:function(g){if(Gt(g),0===g.length)return".";var I=47===g.charCodeAt(0),A=47===g.charCodeAt(g.length-1);return 0!==(g=bt(g,!I)).length||I||(g="."),g.length>0&&A&&(g+="/"),I?"/"+g:g},isAbsolute:function(g){return Gt(g),g.length>0&&47===g.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var g,I=0;I<arguments.length;++I){var A=arguments[I];Gt(A),A.length>0&&(void 0===g?g=A:g+="/"+A)}return void 0===g?".":pt.normalize(g)},relative:function(g,I){if(Gt(g),Gt(I),g===I)return"";if((g=pt.resolve(g))===(I=pt.resolve(I)))return"";for(var A=1;A<g.length&&47===g.charCodeAt(A);++A);for(var C=g.length,t=C-A,i=1;i<I.length&&47===I.charCodeAt(i);++i);for(var e=I.length-i,o=t<e?t:e,n=-1,s=0;s<=o;++s){if(s===o){if(e>o){if(47===I.charCodeAt(i+s))return I.slice(i+s+1);if(0===s)return I.slice(i+s)}else t>o&&(47===g.charCodeAt(A+s)?n=s:0===s&&(n=0));break}var l=g.charCodeAt(A+s);if(l!==I.charCodeAt(i+s))break;47===l&&(n=s)}var r="";for(s=A+n+1;s<=C;++s)s!==C&&47!==g.charCodeAt(s)||(0===r.length?r+="..":r+="/..");return r.length>0?r+I.slice(i+n):(i+=n,47===I.charCodeAt(i)&&++i,I.slice(i))},_makeLong:function(g){return g},dirname:function(g){if(Gt(g),0===g.length)return".";for(var I=g.charCodeAt(0),A=47===I,C=-1,t=!0,i=g.length-1;i>=1;--i)if(47===(I=g.charCodeAt(i))){if(!t){C=i;break}}else t=!1;return-1===C?A?"/":".":A&&1===C?"//":g.slice(0,C)},basename:function(g,I){if(void 0!==I&&"string"!=typeof I)throw new TypeError('"ext" argument must be a string');Gt(g);var A,C=0,t=-1,i=!0;if(void 0!==I&&I.length>0&&I.length<=g.length){if(I.length===g.length&&I===g)return"";var e=I.length-1,o=-1;for(A=g.length-1;A>=0;--A){var n=g.charCodeAt(A);if(47===n){if(!i){C=A+1;break}}else-1===o&&(i=!1,o=A+1),e>=0&&(n===I.charCodeAt(e)?-1==--e&&(t=A):(e=-1,t=o))}return C===t?t=o:-1===t&&(t=g.length),g.slice(C,t)}for(A=g.length-1;A>=0;--A)if(47===g.charCodeAt(A)){if(!i){C=A+1;break}}else-1===t&&(i=!1,t=A+1);return-1===t?"":g.slice(C,t)},extname:function(g){Gt(g);for(var I=-1,A=0,C=-1,t=!0,i=0,e=g.length-1;e>=0;--e){var o=g.charCodeAt(e);if(47!==o)-1===C&&(t=!1,C=e+1),46===o?-1===I?I=e:1!==i&&(i=1):-1!==I&&(i=-1);else if(!t){A=e+1;break}}return-1===I||-1===C||0===i||1===i&&I===C-1&&I===A+1?"":g.slice(I,C)},format:function(g){if(null===g||"object"!=typeof g)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof g);return function(g,I){var A=I.dir||I.root,C=I.base||(I.name||"")+(I.ext||"");return A?A===I.root?A+C:A+g+C:C}("/",g)},parse:function(g){Gt(g);var I={root:"",dir:"",base:"",ext:"",name:""};if(0===g.length)return I;var A,C=g.charCodeAt(0),t=47===C;t?(I.root="/",A=1):A=0;for(var i=-1,e=0,o=-1,n=!0,s=g.length-1,l=0;s>=A;--s)if(47!==(C=g.charCodeAt(s)))-1===o&&(n=!1,o=s+1),46===C?-1===i?i=s:1!==l&&(l=1):-1!==i&&(l=-1);else if(!n){e=s+1;break}return-1===i||-1===o||0===l||1===l&&i===o-1&&i===e+1?-1!==o&&(I.base=I.name=0===e&&t?g.slice(1,o):g.slice(e,o)):(0===e&&t?(I.name=g.slice(1,i),I.base=g.slice(1,o)):(I.name=g.slice(e,i),I.base=g.slice(e,o)),I.ext=g.slice(i,o)),e>0?I.dir=g.slice(0,e-1):t&&(I.dir="/"),I},sep:"/",delimiter:":",win32:null,posix:null};pt.posix=pt;var Bt,yt=pt,wt=Object.freeze(At({__proto__:null,default:yt},[yt])),Wt={exports:{}},St={},Kt=St.randomBytes,ft=St.createHash,Yt=St.createHmac,Xt={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}},Vt={},Ot=Math.pow(2,30)-1,Rt=function(g,I){if("number"!=typeof g)throw new TypeError("Iterations not a number");if(g<0)throw new TypeError("Bad iterations");if("number"!=typeof I)throw new TypeError("Key length not a number");if(I<0||I>Ot||I!=I)throw new TypeError("Bad key length")};if(ot.process&&ot.process.browser)Bt="utf-8";else if(ot.process&&ot.process.version){Bt=parseInt(process.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary"}else Bt="utf-8";var Qt=Bt,Ht={exports:{}};!function(g,I){var A=nt,C=A.Buffer;function t(g,I){for(var A in g)I[A]=g[A]}function i(g,I,A){return C(g,I,A)}C.from&&C.alloc&&C.allocUnsafe&&C.allocUnsafeSlow?g.exports=A:(t(A,I),I.Buffer=i),i.prototype=Object.create(C.prototype),t(C,i),i.from=function(g,I,A){if("number"==typeof g)throw new TypeError("Argument must not be a number");return C(g,I,A)},i.alloc=function(g,I,A){if("number"!=typeof g)throw new TypeError("Argument must be a number");var t=C(g);return void 0!==I?"string"==typeof A?t.fill(I,A):t.fill(I):t.fill(0),t},i.allocUnsafe=function(g){if("number"!=typeof g)throw new TypeError("Argument must be a number");return C(g)},i.allocUnsafeSlow=function(g){if("number"!=typeof g)throw new TypeError("Argument must be a number");return A.SlowBuffer(g)}}(Ht,Ht.exports);var kt=Ht.exports.Buffer,Jt=function(g,I,A){if(kt.isBuffer(g))return g;if("string"==typeof g)return kt.from(g,I);if(ArrayBuffer.isView(g))return kt.from(g.buffer);throw new TypeError(A+" must be a string, a Buffer, a typed array or a DataView")},vt={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20},Dt=Yt,Mt=Ht.exports.Buffer,Nt=Rt,Et=Qt,Ft=Jt;var Lt,Tt,zt=function(g,I,A,C,t){Nt(A,C),g=Ft(g,Et,"Password"),I=Ft(I,Et,"Salt"),t=t||"sha1";var i=Mt.allocUnsafe(C),e=Mt.allocUnsafe(I.length+4);I.copy(e,0,0,I.length);for(var o=0,n=vt[t],s=Math.ceil(C/n),l=1;l<=s;l++){e.writeUInt32BE(l,I.length);for(var r=Dt(t,g).update(e).digest(),c=r,a=1;a<A;a++){c=Dt(t,g).update(c).digest();for(var d=0;d<n;d++)r[d]^=c[d]}r.copy(i,o),o+=n}return i},Pt=Ht.exports.Buffer,Ut=Rt,xt=Qt,jt=zt,_t=Jt,$t=ot.crypto&&ot.crypto.subtle,qt={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},gi=[];function Ii(){return Tt||(Tt=ot.process&&ot.process.nextTick?ot.process.nextTick:ot.queueMicrotask?ot.queueMicrotask:ot.setImmediate?ot.setImmediate:ot.setTimeout)}function Ai(g,I,A,C,t){return $t.importKey("raw",g,{name:"PBKDF2"},!1,["deriveBits"]).then((function(g){return $t.deriveBits({name:"PBKDF2",salt:I,iterations:A,hash:{name:t}},g,C<<3)})).then((function(g){return Pt.from(g)}))}var Ci=St,ti=Rt,ii=Qt,ei=Jt;Ci.pbkdf2Sync&&-1!==Ci.pbkdf2Sync.toString().indexOf("keylen, digest")?(Vt.pbkdf2Sync=function(g,I,A,C,t){return ti(A,C),g=ei(g,ii,"Password"),I=ei(I,ii,"Salt"),t=t||"sha1",Ci.pbkdf2Sync(g,I,A,C,t)},Vt.pbkdf2=function(g,I,A,C,t,i){if(ti(A,C),g=ei(g,ii,"Password"),I=ei(I,ii,"Salt"),"function"==typeof t&&(i=t,t="sha1"),"function"!=typeof i)throw new Error("No callback provided to pbkdf2");return Ci.pbkdf2(g,I,A,C,t,i)}):(Vt.pbkdf2Sync=zt,Vt.pbkdf2=function(g,I,A,C,t,i){"function"==typeof t&&(i=t,t=void 0);var e=qt[(t=t||"sha1").toLowerCase()];if(e&&"function"==typeof ot.Promise){if(Ut(A,C),g=_t(g,xt,"Password"),I=_t(I,xt,"Salt"),"function"!=typeof i)throw new Error("No callback provided to pbkdf2");!function(g,I){g.then((function(g){Ii()((function(){I(null,g)}))}),(function(g){Ii()((function(){I(g)}))}))}(function(g){if(ot.process&&!ot.process.browser)return Promise.resolve(!1);if(!$t||!$t.importKey||!$t.deriveBits)return Promise.resolve(!1);if(void 0!==gi[g])return gi[g];var I=Ai(Lt=Lt||Pt.alloc(8),Lt,10,128,g).then((function(){return!0})).catch((function(){return!1}));return gi[g]=I,I}(e).then((function(i){return i?Ai(g,I,A,C,e):jt(g,I,A,C,t)})),i)}else Ii()((function(){var e;try{e=jt(g,I,A,C,t)}catch(o){return i(o)}i(null,e)}))});var oi={},ni=St;oi.createCipher=oi.Cipher=ni.createCipher,oi.createCipheriv=oi.Cipheriv=ni.createCipheriv,oi.createDecipher=oi.Decipher=ni.createDecipher,oi.createDecipheriv=oi.Decipheriv=ni.createDecipheriv,oi.listCiphers=oi.getCiphers=ni.getCiphers;var si={},li=St;si.DiffieHellmanGroup=li.DiffieHellmanGroup,si.createDiffieHellmanGroup=li.createDiffieHellmanGroup,si.getDiffieHellman=li.getDiffieHellman,si.createDiffieHellman=li.createDiffieHellman,si.DiffieHellman=li.DiffieHellman;var ri={},ci=St;ri.createSign=ci.createSign,ri.Sign=ci.Sign,ri.createVerify=ci.createVerify,ri.Verify=ci.Verify;var ai={},di="6.5.4",hi={},mi={exports:{}};(function(g,I){function A(g,I){if(!g)throw new Error(I||"Assertion failed")}function C(g,I){g.super_=I;var A=function(){};A.prototype=I.prototype,g.prototype=new A,g.prototype.constructor=g}function t(g,I,A){if(t.isBN(g))return g;this.negative=0,this.words=null,this.length=0,this.red=null,null!==g&&("le"!==I&&"be"!==I||(A=I,I=10),this._init(g||0,I||10,A||"be"))}var i;"object"==typeof g?g.exports=t:I.BN=t,t.BN=t,t.wordSize=26;try{i="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:require("buffer").Buffer}catch(w){}function e(g,I){var A=g.charCodeAt(I);return A>=65&&A<=70?A-55:A>=97&&A<=102?A-87:A-48&15}function o(g,I,A){var C=e(g,A);return A-1>=I&&(C|=e(g,A-1)<<4),C}function n(g,I,A,C){for(var t=0,i=Math.min(g.length,A),e=I;e<i;e++){var o=g.charCodeAt(e)-48;t*=C,t+=o>=49?o-49+10:o>=17?o-17+10:o}return t}t.isBN=function(g){return g instanceof t||null!==g&&"object"==typeof g&&g.constructor.wordSize===t.wordSize&&Array.isArray(g.words)},t.max=function(g,I){return g.cmp(I)>0?g:I},t.min=function(g,I){return g.cmp(I)<0?g:I},t.prototype._init=function(g,I,C){if("number"==typeof g)return this._initNumber(g,I,C);if("object"==typeof g)return this._initArray(g,I,C);"hex"===I&&(I=16),A(I===(0|I)&&I>=2&&I<=36);var t=0;"-"===(g=g.toString().replace(/\s+/g,""))[0]&&(t++,this.negative=1),t<g.length&&(16===I?this._parseHex(g,t,C):(this._parseBase(g,I,t),"le"===C&&this._initArray(this.toArray(),I,C)))},t.prototype._initNumber=function(g,I,C){g<0&&(this.negative=1,g=-g),g<67108864?(this.words=[67108863&g],this.length=1):g<4503599627370496?(this.words=[67108863&g,g/67108864&67108863],this.length=2):(A(g<9007199254740992),this.words=[67108863&g,g/67108864&67108863,1],this.length=3),"le"===C&&this._initArray(this.toArray(),I,C)},t.prototype._initArray=function(g,I,C){if(A("number"==typeof g.length),g.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(g.length/3),this.words=new Array(this.length);for(var t=0;t<this.length;t++)this.words[t]=0;var i,e,o=0;if("be"===C)for(t=g.length-1,i=0;t>=0;t-=3)e=g[t]|g[t-1]<<8|g[t-2]<<16,this.words[i]|=e<<o&67108863,this.words[i+1]=e>>>26-o&67108863,(o+=24)>=26&&(o-=26,i++);else if("le"===C)for(t=0,i=0;t<g.length;t+=3)e=g[t]|g[t+1]<<8|g[t+2]<<16,this.words[i]|=e<<o&67108863,this.words[i+1]=e>>>26-o&67108863,(o+=24)>=26&&(o-=26,i++);return this.strip()},t.prototype._parseHex=function(g,I,A){this.length=Math.ceil((g.length-I)/6),this.words=new Array(this.length);for(var C=0;C<this.length;C++)this.words[C]=0;var t,i=0,e=0;if("be"===A)for(C=g.length-1;C>=I;C-=2)t=o(g,I,C)<<i,this.words[e]|=67108863&t,i>=18?(i-=18,e+=1,this.words[e]|=t>>>26):i+=8;else for(C=(g.length-I)%2==0?I+1:I;C<g.length;C+=2)t=o(g,I,C)<<i,this.words[e]|=67108863&t,i>=18?(i-=18,e+=1,this.words[e]|=t>>>26):i+=8;this.strip()},t.prototype._parseBase=function(g,I,A){this.words=[0],this.length=1;for(var C=0,t=1;t<=67108863;t*=I)C++;C--,t=t/I|0;for(var i=g.length-A,e=i%C,o=Math.min(i,i-e)+A,s=0,l=A;l<o;l+=C)s=n(g,l,l+C,I),this.imuln(t),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s);if(0!==e){var r=1;for(s=n(g,l,g.length,I),l=0;l<e;l++)r*=I;this.imuln(r),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s)}this.strip()},t.prototype.copy=function(g){g.words=new Array(this.length);for(var I=0;I<this.length;I++)g.words[I]=this.words[I];g.length=this.length,g.negative=this.negative,g.red=this.red},t.prototype.clone=function(){var g=new t(null);return this.copy(g),g},t.prototype._expand=function(g){for(;this.length<g;)this.words[this.length++]=0;return this},t.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},t.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},t.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var s=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],r=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function c(g,I,A){A.negative=I.negative^g.negative;var C=g.length+I.length|0;A.length=C,C=C-1|0;var t=0|g.words[0],i=0|I.words[0],e=t*i,o=67108863&e,n=e/67108864|0;A.words[0]=o;for(var s=1;s<C;s++){for(var l=n>>>26,r=67108863&n,c=Math.min(s,I.length-1),a=Math.max(0,s-g.length+1);a<=c;a++){var d=s-a|0;l+=(e=(t=0|g.words[d])*(i=0|I.words[a])+r)/67108864|0,r=67108863&e}A.words[s]=0|r,n=0|l}return 0!==n?A.words[s]=0|n:A.length--,A.strip()}t.prototype.toString=function(g,I){var C;if(I=0|I||1,16===(g=g||10)||"hex"===g){C="";for(var t=0,i=0,e=0;e<this.length;e++){var o=this.words[e],n=(16777215&(o<<t|i)).toString(16);C=0!=(i=o>>>24-t&16777215)||e!==this.length-1?s[6-n.length]+n+C:n+C,(t+=2)>=26&&(t-=26,e--)}for(0!==i&&(C=i.toString(16)+C);C.length%I!=0;)C="0"+C;return 0!==this.negative&&(C="-"+C),C}if(g===(0|g)&&g>=2&&g<=36){var c=l[g],a=r[g];C="";var d=this.clone();for(d.negative=0;!d.isZero();){var h=d.modn(a).toString(g);C=(d=d.idivn(a)).isZero()?h+C:s[c-h.length]+h+C}for(this.isZero()&&(C="0"+C);C.length%I!=0;)C="0"+C;return 0!==this.negative&&(C="-"+C),C}A(!1,"Base should be between 2 and 36")},t.prototype.toNumber=function(){var g=this.words[0];return 2===this.length?g+=67108864*this.words[1]:3===this.length&&1===this.words[2]?g+=4503599627370496+67108864*this.words[1]:this.length>2&&A(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-g:g},t.prototype.toJSON=function(){return this.toString(16)},t.prototype.toBuffer=function(g,I){return A(void 0!==i),this.toArrayLike(i,g,I)},t.prototype.toArray=function(g,I){return this.toArrayLike(Array,g,I)},t.prototype.toArrayLike=function(g,I,C){var t=this.byteLength(),i=C||Math.max(1,t);A(t<=i,"byte array longer than desired length"),A(i>0,"Requested array length <= 0"),this.strip();var e,o,n="le"===I,s=new g(i),l=this.clone();if(n){for(o=0;!l.isZero();o++)e=l.andln(255),l.iushrn(8),s[o]=e;for(;o<i;o++)s[o]=0}else{for(o=0;o<i-t;o++)s[o]=0;for(o=0;!l.isZero();o++)e=l.andln(255),l.iushrn(8),s[i-o-1]=e}return s},Math.clz32?t.prototype._countBits=function(g){return 32-Math.clz32(g)}:t.prototype._countBits=function(g){var I=g,A=0;return I>=4096&&(A+=13,I>>>=13),I>=64&&(A+=7,I>>>=7),I>=8&&(A+=4,I>>>=4),I>=2&&(A+=2,I>>>=2),A+I},t.prototype._zeroBits=function(g){if(0===g)return 26;var I=g,A=0;return 0==(8191&I)&&(A+=13,I>>>=13),0==(127&I)&&(A+=7,I>>>=7),0==(15&I)&&(A+=4,I>>>=4),0==(3&I)&&(A+=2,I>>>=2),0==(1&I)&&A++,A},t.prototype.bitLength=function(){var g=this.words[this.length-1],I=this._countBits(g);return 26*(this.length-1)+I},t.prototype.zeroBits=function(){if(this.isZero())return 0;for(var g=0,I=0;I<this.length;I++){var A=this._zeroBits(this.words[I]);if(g+=A,26!==A)break}return g},t.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},t.prototype.toTwos=function(g){return 0!==this.negative?this.abs().inotn(g).iaddn(1):this.clone()},t.prototype.fromTwos=function(g){return this.testn(g-1)?this.notn(g).iaddn(1).ineg():this.clone()},t.prototype.isNeg=function(){return 0!==this.negative},t.prototype.neg=function(){return this.clone().ineg()},t.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},t.prototype.iuor=function(g){for(;this.length<g.length;)this.words[this.length++]=0;for(var I=0;I<g.length;I++)this.words[I]=this.words[I]|g.words[I];return this.strip()},t.prototype.ior=function(g){return A(0==(this.negative|g.negative)),this.iuor(g)},t.prototype.or=function(g){return this.length>g.length?this.clone().ior(g):g.clone().ior(this)},t.prototype.uor=function(g){return this.length>g.length?this.clone().iuor(g):g.clone().iuor(this)},t.prototype.iuand=function(g){var I;I=this.length>g.length?g:this;for(var A=0;A<I.length;A++)this.words[A]=this.words[A]&g.words[A];return this.length=I.length,this.strip()},t.prototype.iand=function(g){return A(0==(this.negative|g.negative)),this.iuand(g)},t.prototype.and=function(g){return this.length>g.length?this.clone().iand(g):g.clone().iand(this)},t.prototype.uand=function(g){return this.length>g.length?this.clone().iuand(g):g.clone().iuand(this)},t.prototype.iuxor=function(g){var I,A;this.length>g.length?(I=this,A=g):(I=g,A=this);for(var C=0;C<A.length;C++)this.words[C]=I.words[C]^A.words[C];if(this!==I)for(;C<I.length;C++)this.words[C]=I.words[C];return this.length=I.length,this.strip()},t.prototype.ixor=function(g){return A(0==(this.negative|g.negative)),this.iuxor(g)},t.prototype.xor=function(g){return this.length>g.length?this.clone().ixor(g):g.clone().ixor(this)},t.prototype.uxor=function(g){return this.length>g.length?this.clone().iuxor(g):g.clone().iuxor(this)},t.prototype.inotn=function(g){A("number"==typeof g&&g>=0);var I=0|Math.ceil(g/26),C=g%26;this._expand(I),C>0&&I--;for(var t=0;t<I;t++)this.words[t]=67108863&~this.words[t];return C>0&&(this.words[t]=~this.words[t]&67108863>>26-C),this.strip()},t.prototype.notn=function(g){return this.clone().inotn(g)},t.prototype.setn=function(g,I){A("number"==typeof g&&g>=0);var C=g/26|0,t=g%26;return this._expand(C+1),this.words[C]=I?this.words[C]|1<<t:this.words[C]&~(1<<t),this.strip()},t.prototype.iadd=function(g){var I,A,C;if(0!==this.negative&&0===g.negative)return this.negative=0,I=this.isub(g),this.negative^=1,this._normSign();if(0===this.negative&&0!==g.negative)return g.negative=0,I=this.isub(g),g.negative=1,I._normSign();this.length>g.length?(A=this,C=g):(A=g,C=this);for(var t=0,i=0;i<C.length;i++)I=(0|A.words[i])+(0|C.words[i])+t,this.words[i]=67108863&I,t=I>>>26;for(;0!==t&&i<A.length;i++)I=(0|A.words[i])+t,this.words[i]=67108863&I,t=I>>>26;if(this.length=A.length,0!==t)this.words[this.length]=t,this.length++;else if(A!==this)for(;i<A.length;i++)this.words[i]=A.words[i];return this},t.prototype.add=function(g){var I;return 0!==g.negative&&0===this.negative?(g.negative=0,I=this.sub(g),g.negative^=1,I):0===g.negative&&0!==this.negative?(this.negative=0,I=g.sub(this),this.negative=1,I):this.length>g.length?this.clone().iadd(g):g.clone().iadd(this)},t.prototype.isub=function(g){if(0!==g.negative){g.negative=0;var I=this.iadd(g);return g.negative=1,I._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(g),this.negative=1,this._normSign();var A,C,t=this.cmp(g);if(0===t)return this.negative=0,this.length=1,this.words[0]=0,this;t>0?(A=this,C=g):(A=g,C=this);for(var i=0,e=0;e<C.length;e++)i=(I=(0|A.words[e])-(0|C.words[e])+i)>>26,this.words[e]=67108863&I;for(;0!==i&&e<A.length;e++)i=(I=(0|A.words[e])+i)>>26,this.words[e]=67108863&I;if(0===i&&e<A.length&&A!==this)for(;e<A.length;e++)this.words[e]=A.words[e];return this.length=Math.max(this.length,e),A!==this&&(this.negative=1),this.strip()},t.prototype.sub=function(g){return this.clone().isub(g)};var a=function(g,I,A){var C,t,i,e=g.words,o=I.words,n=A.words,s=0,l=0|e[0],r=8191&l,c=l>>>13,a=0|e[1],d=8191&a,h=a>>>13,m=0|e[2],Z=8191&m,u=m>>>13,G=0|e[3],b=8191&G,p=G>>>13,B=0|e[4],y=8191&B,w=B>>>13,W=0|e[5],S=8191&W,K=W>>>13,f=0|e[6],Y=8191&f,X=f>>>13,V=0|e[7],O=8191&V,R=V>>>13,Q=0|e[8],H=8191&Q,k=Q>>>13,J=0|e[9],v=8191&J,D=J>>>13,M=0|o[0],N=8191&M,E=M>>>13,F=0|o[1],L=8191&F,T=F>>>13,z=0|o[2],P=8191&z,U=z>>>13,x=0|o[3],j=8191&x,_=x>>>13,$=0|o[4],q=8191&$,gg=$>>>13,Ig=0|o[5],Ag=8191&Ig,Cg=Ig>>>13,tg=0|o[6],ig=8191&tg,eg=tg>>>13,og=0|o[7],ng=8191&og,sg=og>>>13,lg=0|o[8],rg=8191&lg,cg=lg>>>13,ag=0|o[9],dg=8191&ag,hg=ag>>>13;A.negative=g.negative^I.negative,A.length=19;var mg=(s+(C=Math.imul(r,N))|0)+((8191&(t=(t=Math.imul(r,E))+Math.imul(c,N)|0))<<13)|0;s=((i=Math.imul(c,E))+(t>>>13)|0)+(mg>>>26)|0,mg&=67108863,C=Math.imul(d,N),t=(t=Math.imul(d,E))+Math.imul(h,N)|0,i=Math.imul(h,E);var Zg=(s+(C=C+Math.imul(r,L)|0)|0)+((8191&(t=(t=t+Math.imul(r,T)|0)+Math.imul(c,L)|0))<<13)|0;s=((i=i+Math.imul(c,T)|0)+(t>>>13)|0)+(Zg>>>26)|0,Zg&=67108863,C=Math.imul(Z,N),t=(t=Math.imul(Z,E))+Math.imul(u,N)|0,i=Math.imul(u,E),C=C+Math.imul(d,L)|0,t=(t=t+Math.imul(d,T)|0)+Math.imul(h,L)|0,i=i+Math.imul(h,T)|0;var ug=(s+(C=C+Math.imul(r,P)|0)|0)+((8191&(t=(t=t+Math.imul(r,U)|0)+Math.imul(c,P)|0))<<13)|0;s=((i=i+Math.imul(c,U)|0)+(t>>>13)|0)+(ug>>>26)|0,ug&=67108863,C=Math.imul(b,N),t=(t=Math.imul(b,E))+Math.imul(p,N)|0,i=Math.imul(p,E),C=C+Math.imul(Z,L)|0,t=(t=t+Math.imul(Z,T)|0)+Math.imul(u,L)|0,i=i+Math.imul(u,T)|0,C=C+Math.imul(d,P)|0,t=(t=t+Math.imul(d,U)|0)+Math.imul(h,P)|0,i=i+Math.imul(h,U)|0;var Gg=(s+(C=C+Math.imul(r,j)|0)|0)+((8191&(t=(t=t+Math.imul(r,_)|0)+Math.imul(c,j)|0))<<13)|0;s=((i=i+Math.imul(c,_)|0)+(t>>>13)|0)+(Gg>>>26)|0,Gg&=67108863,C=Math.imul(y,N),t=(t=Math.imul(y,E))+Math.imul(w,N)|0,i=Math.imul(w,E),C=C+Math.imul(b,L)|0,t=(t=t+Math.imul(b,T)|0)+Math.imul(p,L)|0,i=i+Math.imul(p,T)|0,C=C+Math.imul(Z,P)|0,t=(t=t+Math.imul(Z,U)|0)+Math.imul(u,P)|0,i=i+Math.imul(u,U)|0,C=C+Math.imul(d,j)|0,t=(t=t+Math.imul(d,_)|0)+Math.imul(h,j)|0,i=i+Math.imul(h,_)|0;var bg=(s+(C=C+Math.imul(r,q)|0)|0)+((8191&(t=(t=t+Math.imul(r,gg)|0)+Math.imul(c,q)|0))<<13)|0;s=((i=i+Math.imul(c,gg)|0)+(t>>>13)|0)+(bg>>>26)|0,bg&=67108863,C=Math.imul(S,N),t=(t=Math.imul(S,E))+Math.imul(K,N)|0,i=Math.imul(K,E),C=C+Math.imul(y,L)|0,t=(t=t+Math.imul(y,T)|0)+Math.imul(w,L)|0,i=i+Math.imul(w,T)|0,C=C+Math.imul(b,P)|0,t=(t=t+Math.imul(b,U)|0)+Math.imul(p,P)|0,i=i+Math.imul(p,U)|0,C=C+Math.imul(Z,j)|0,t=(t=t+Math.imul(Z,_)|0)+Math.imul(u,j)|0,i=i+Math.imul(u,_)|0,C=C+Math.imul(d,q)|0,t=(t=t+Math.imul(d,gg)|0)+Math.imul(h,q)|0,i=i+Math.imul(h,gg)|0;var pg=(s+(C=C+Math.imul(r,Ag)|0)|0)+((8191&(t=(t=t+Math.imul(r,Cg)|0)+Math.imul(c,Ag)|0))<<13)|0;s=((i=i+Math.imul(c,Cg)|0)+(t>>>13)|0)+(pg>>>26)|0,pg&=67108863,C=Math.imul(Y,N),t=(t=Math.imul(Y,E))+Math.imul(X,N)|0,i=Math.imul(X,E),C=C+Math.imul(S,L)|0,t=(t=t+Math.imul(S,T)|0)+Math.imul(K,L)|0,i=i+Math.imul(K,T)|0,C=C+Math.imul(y,P)|0,t=(t=t+Math.imul(y,U)|0)+Math.imul(w,P)|0,i=i+Math.imul(w,U)|0,C=C+Math.imul(b,j)|0,t=(t=t+Math.imul(b,_)|0)+Math.imul(p,j)|0,i=i+Math.imul(p,_)|0,C=C+Math.imul(Z,q)|0,t=(t=t+Math.imul(Z,gg)|0)+Math.imul(u,q)|0,i=i+Math.imul(u,gg)|0,C=C+Math.imul(d,Ag)|0,t=(t=t+Math.imul(d,Cg)|0)+Math.imul(h,Ag)|0,i=i+Math.imul(h,Cg)|0;var Bg=(s+(C=C+Math.imul(r,ig)|0)|0)+((8191&(t=(t=t+Math.imul(r,eg)|0)+Math.imul(c,ig)|0))<<13)|0;s=((i=i+Math.imul(c,eg)|0)+(t>>>13)|0)+(Bg>>>26)|0,Bg&=67108863,C=Math.imul(O,N),t=(t=Math.imul(O,E))+Math.imul(R,N)|0,i=Math.imul(R,E),C=C+Math.imul(Y,L)|0,t=(t=t+Math.imul(Y,T)|0)+Math.imul(X,L)|0,i=i+Math.imul(X,T)|0,C=C+Math.imul(S,P)|0,t=(t=t+Math.imul(S,U)|0)+Math.imul(K,P)|0,i=i+Math.imul(K,U)|0,C=C+Math.imul(y,j)|0,t=(t=t+Math.imul(y,_)|0)+Math.imul(w,j)|0,i=i+Math.imul(w,_)|0,C=C+Math.imul(b,q)|0,t=(t=t+Math.imul(b,gg)|0)+Math.imul(p,q)|0,i=i+Math.imul(p,gg)|0,C=C+Math.imul(Z,Ag)|0,t=(t=t+Math.imul(Z,Cg)|0)+Math.imul(u,Ag)|0,i=i+Math.imul(u,Cg)|0,C=C+Math.imul(d,ig)|0,t=(t=t+Math.imul(d,eg)|0)+Math.imul(h,ig)|0,i=i+Math.imul(h,eg)|0;var yg=(s+(C=C+Math.imul(r,ng)|0)|0)+((8191&(t=(t=t+Math.imul(r,sg)|0)+Math.imul(c,ng)|0))<<13)|0;s=((i=i+Math.imul(c,sg)|0)+(t>>>13)|0)+(yg>>>26)|0,yg&=67108863,C=Math.imul(H,N),t=(t=Math.imul(H,E))+Math.imul(k,N)|0,i=Math.imul(k,E),C=C+Math.imul(O,L)|0,t=(t=t+Math.imul(O,T)|0)+Math.imul(R,L)|0,i=i+Math.imul(R,T)|0,C=C+Math.imul(Y,P)|0,t=(t=t+Math.imul(Y,U)|0)+Math.imul(X,P)|0,i=i+Math.imul(X,U)|0,C=C+Math.imul(S,j)|0,t=(t=t+Math.imul(S,_)|0)+Math.imul(K,j)|0,i=i+Math.imul(K,_)|0,C=C+Math.imul(y,q)|0,t=(t=t+Math.imul(y,gg)|0)+Math.imul(w,q)|0,i=i+Math.imul(w,gg)|0,C=C+Math.imul(b,Ag)|0,t=(t=t+Math.imul(b,Cg)|0)+Math.imul(p,Ag)|0,i=i+Math.imul(p,Cg)|0,C=C+Math.imul(Z,ig)|0,t=(t=t+Math.imul(Z,eg)|0)+Math.imul(u,ig)|0,i=i+Math.imul(u,eg)|0,C=C+Math.imul(d,ng)|0,t=(t=t+Math.imul(d,sg)|0)+Math.imul(h,ng)|0,i=i+Math.imul(h,sg)|0;var wg=(s+(C=C+Math.imul(r,rg)|0)|0)+((8191&(t=(t=t+Math.imul(r,cg)|0)+Math.imul(c,rg)|0))<<13)|0;s=((i=i+Math.imul(c,cg)|0)+(t>>>13)|0)+(wg>>>26)|0,wg&=67108863,C=Math.imul(v,N),t=(t=Math.imul(v,E))+Math.imul(D,N)|0,i=Math.imul(D,E),C=C+Math.imul(H,L)|0,t=(t=t+Math.imul(H,T)|0)+Math.imul(k,L)|0,i=i+Math.imul(k,T)|0,C=C+Math.imul(O,P)|0,t=(t=t+Math.imul(O,U)|0)+Math.imul(R,P)|0,i=i+Math.imul(R,U)|0,C=C+Math.imul(Y,j)|0,t=(t=t+Math.imul(Y,_)|0)+Math.imul(X,j)|0,i=i+Math.imul(X,_)|0,C=C+Math.imul(S,q)|0,t=(t=t+Math.imul(S,gg)|0)+Math.imul(K,q)|0,i=i+Math.imul(K,gg)|0,C=C+Math.imul(y,Ag)|0,t=(t=t+Math.imul(y,Cg)|0)+Math.imul(w,Ag)|0,i=i+Math.imul(w,Cg)|0,C=C+Math.imul(b,ig)|0,t=(t=t+Math.imul(b,eg)|0)+Math.imul(p,ig)|0,i=i+Math.imul(p,eg)|0,C=C+Math.imul(Z,ng)|0,t=(t=t+Math.imul(Z,sg)|0)+Math.imul(u,ng)|0,i=i+Math.imul(u,sg)|0,C=C+Math.imul(d,rg)|0,t=(t=t+Math.imul(d,cg)|0)+Math.imul(h,rg)|0,i=i+Math.imul(h,cg)|0;var Wg=(s+(C=C+Math.imul(r,dg)|0)|0)+((8191&(t=(t=t+Math.imul(r,hg)|0)+Math.imul(c,dg)|0))<<13)|0;s=((i=i+Math.imul(c,hg)|0)+(t>>>13)|0)+(Wg>>>26)|0,Wg&=67108863,C=Math.imul(v,L),t=(t=Math.imul(v,T))+Math.imul(D,L)|0,i=Math.imul(D,T),C=C+Math.imul(H,P)|0,t=(t=t+Math.imul(H,U)|0)+Math.imul(k,P)|0,i=i+Math.imul(k,U)|0,C=C+Math.imul(O,j)|0,t=(t=t+Math.imul(O,_)|0)+Math.imul(R,j)|0,i=i+Math.imul(R,_)|0,C=C+Math.imul(Y,q)|0,t=(t=t+Math.imul(Y,gg)|0)+Math.imul(X,q)|0,i=i+Math.imul(X,gg)|0,C=C+Math.imul(S,Ag)|0,t=(t=t+Math.imul(S,Cg)|0)+Math.imul(K,Ag)|0,i=i+Math.imul(K,Cg)|0,C=C+Math.imul(y,ig)|0,t=(t=t+Math.imul(y,eg)|0)+Math.imul(w,ig)|0,i=i+Math.imul(w,eg)|0,C=C+Math.imul(b,ng)|0,t=(t=t+Math.imul(b,sg)|0)+Math.imul(p,ng)|0,i=i+Math.imul(p,sg)|0,C=C+Math.imul(Z,rg)|0,t=(t=t+Math.imul(Z,cg)|0)+Math.imul(u,rg)|0,i=i+Math.imul(u,cg)|0;var Sg=(s+(C=C+Math.imul(d,dg)|0)|0)+((8191&(t=(t=t+Math.imul(d,hg)|0)+Math.imul(h,dg)|0))<<13)|0;s=((i=i+Math.imul(h,hg)|0)+(t>>>13)|0)+(Sg>>>26)|0,Sg&=67108863,C=Math.imul(v,P),t=(t=Math.imul(v,U))+Math.imul(D,P)|0,i=Math.imul(D,U),C=C+Math.imul(H,j)|0,t=(t=t+Math.imul(H,_)|0)+Math.imul(k,j)|0,i=i+Math.imul(k,_)|0,C=C+Math.imul(O,q)|0,t=(t=t+Math.imul(O,gg)|0)+Math.imul(R,q)|0,i=i+Math.imul(R,gg)|0,C=C+Math.imul(Y,Ag)|0,t=(t=t+Math.imul(Y,Cg)|0)+Math.imul(X,Ag)|0,i=i+Math.imul(X,Cg)|0,C=C+Math.imul(S,ig)|0,t=(t=t+Math.imul(S,eg)|0)+Math.imul(K,ig)|0,i=i+Math.imul(K,eg)|0,C=C+Math.imul(y,ng)|0,t=(t=t+Math.imul(y,sg)|0)+Math.imul(w,ng)|0,i=i+Math.imul(w,sg)|0,C=C+Math.imul(b,rg)|0,t=(t=t+Math.imul(b,cg)|0)+Math.imul(p,rg)|0,i=i+Math.imul(p,cg)|0;var Kg=(s+(C=C+Math.imul(Z,dg)|0)|0)+((8191&(t=(t=t+Math.imul(Z,hg)|0)+Math.imul(u,dg)|0))<<13)|0;s=((i=i+Math.imul(u,hg)|0)+(t>>>13)|0)+(Kg>>>26)|0,Kg&=67108863,C=Math.imul(v,j),t=(t=Math.imul(v,_))+Math.imul(D,j)|0,i=Math.imul(D,_),C=C+Math.imul(H,q)|0,t=(t=t+Math.imul(H,gg)|0)+Math.imul(k,q)|0,i=i+Math.imul(k,gg)|0,C=C+Math.imul(O,Ag)|0,t=(t=t+Math.imul(O,Cg)|0)+Math.imul(R,Ag)|0,i=i+Math.imul(R,Cg)|0,C=C+Math.imul(Y,ig)|0,t=(t=t+Math.imul(Y,eg)|0)+Math.imul(X,ig)|0,i=i+Math.imul(X,eg)|0,C=C+Math.imul(S,ng)|0,t=(t=t+Math.imul(S,sg)|0)+Math.imul(K,ng)|0,i=i+Math.imul(K,sg)|0,C=C+Math.imul(y,rg)|0,t=(t=t+Math.imul(y,cg)|0)+Math.imul(w,rg)|0,i=i+Math.imul(w,cg)|0;var fg=(s+(C=C+Math.imul(b,dg)|0)|0)+((8191&(t=(t=t+Math.imul(b,hg)|0)+Math.imul(p,dg)|0))<<13)|0;s=((i=i+Math.imul(p,hg)|0)+(t>>>13)|0)+(fg>>>26)|0,fg&=67108863,C=Math.imul(v,q),t=(t=Math.imul(v,gg))+Math.imul(D,q)|0,i=Math.imul(D,gg),C=C+Math.imul(H,Ag)|0,t=(t=t+Math.imul(H,Cg)|0)+Math.imul(k,Ag)|0,i=i+Math.imul(k,Cg)|0,C=C+Math.imul(O,ig)|0,t=(t=t+Math.imul(O,eg)|0)+Math.imul(R,ig)|0,i=i+Math.imul(R,eg)|0,C=C+Math.imul(Y,ng)|0,t=(t=t+Math.imul(Y,sg)|0)+Math.imul(X,ng)|0,i=i+Math.imul(X,sg)|0,C=C+Math.imul(S,rg)|0,t=(t=t+Math.imul(S,cg)|0)+Math.imul(K,rg)|0,i=i+Math.imul(K,cg)|0;var Yg=(s+(C=C+Math.imul(y,dg)|0)|0)+((8191&(t=(t=t+Math.imul(y,hg)|0)+Math.imul(w,dg)|0))<<13)|0;s=((i=i+Math.imul(w,hg)|0)+(t>>>13)|0)+(Yg>>>26)|0,Yg&=67108863,C=Math.imul(v,Ag),t=(t=Math.imul(v,Cg))+Math.imul(D,Ag)|0,i=Math.imul(D,Cg),C=C+Math.imul(H,ig)|0,t=(t=t+Math.imul(H,eg)|0)+Math.imul(k,ig)|0,i=i+Math.imul(k,eg)|0,C=C+Math.imul(O,ng)|0,t=(t=t+Math.imul(O,sg)|0)+Math.imul(R,ng)|0,i=i+Math.imul(R,sg)|0,C=C+Math.imul(Y,rg)|0,t=(t=t+Math.imul(Y,cg)|0)+Math.imul(X,rg)|0,i=i+Math.imul(X,cg)|0;var Xg=(s+(C=C+Math.imul(S,dg)|0)|0)+((8191&(t=(t=t+Math.imul(S,hg)|0)+Math.imul(K,dg)|0))<<13)|0;s=((i=i+Math.imul(K,hg)|0)+(t>>>13)|0)+(Xg>>>26)|0,Xg&=67108863,C=Math.imul(v,ig),t=(t=Math.imul(v,eg))+Math.imul(D,ig)|0,i=Math.imul(D,eg),C=C+Math.imul(H,ng)|0,t=(t=t+Math.imul(H,sg)|0)+Math.imul(k,ng)|0,i=i+Math.imul(k,sg)|0,C=C+Math.imul(O,rg)|0,t=(t=t+Math.imul(O,cg)|0)+Math.imul(R,rg)|0,i=i+Math.imul(R,cg)|0;var Vg=(s+(C=C+Math.imul(Y,dg)|0)|0)+((8191&(t=(t=t+Math.imul(Y,hg)|0)+Math.imul(X,dg)|0))<<13)|0;s=((i=i+Math.imul(X,hg)|0)+(t>>>13)|0)+(Vg>>>26)|0,Vg&=67108863,C=Math.imul(v,ng),t=(t=Math.imul(v,sg))+Math.imul(D,ng)|0,i=Math.imul(D,sg),C=C+Math.imul(H,rg)|0,t=(t=t+Math.imul(H,cg)|0)+Math.imul(k,rg)|0,i=i+Math.imul(k,cg)|0;var Og=(s+(C=C+Math.imul(O,dg)|0)|0)+((8191&(t=(t=t+Math.imul(O,hg)|0)+Math.imul(R,dg)|0))<<13)|0;s=((i=i+Math.imul(R,hg)|0)+(t>>>13)|0)+(Og>>>26)|0,Og&=67108863,C=Math.imul(v,rg),t=(t=Math.imul(v,cg))+Math.imul(D,rg)|0,i=Math.imul(D,cg);var Rg=(s+(C=C+Math.imul(H,dg)|0)|0)+((8191&(t=(t=t+Math.imul(H,hg)|0)+Math.imul(k,dg)|0))<<13)|0;s=((i=i+Math.imul(k,hg)|0)+(t>>>13)|0)+(Rg>>>26)|0,Rg&=67108863;var Qg=(s+(C=Math.imul(v,dg))|0)+((8191&(t=(t=Math.imul(v,hg))+Math.imul(D,dg)|0))<<13)|0;return s=((i=Math.imul(D,hg))+(t>>>13)|0)+(Qg>>>26)|0,Qg&=67108863,n[0]=mg,n[1]=Zg,n[2]=ug,n[3]=Gg,n[4]=bg,n[5]=pg,n[6]=Bg,n[7]=yg,n[8]=wg,n[9]=Wg,n[10]=Sg,n[11]=Kg,n[12]=fg,n[13]=Yg,n[14]=Xg,n[15]=Vg,n[16]=Og,n[17]=Rg,n[18]=Qg,0!==s&&(n[19]=s,A.length++),A};function d(g,I,A){return(new h).mulp(g,I,A)}function h(g,I){this.x=g,this.y=I}Math.imul||(a=c),t.prototype.mulTo=function(g,I){var A=this.length+g.length;return 10===this.length&&10===g.length?a(this,g,I):A<63?c(this,g,I):A<1024?function(g,I,A){A.negative=I.negative^g.negative,A.length=g.length+I.length;for(var C=0,t=0,i=0;i<A.length-1;i++){var e=t;t=0;for(var o=67108863&C,n=Math.min(i,I.length-1),s=Math.max(0,i-g.length+1);s<=n;s++){var l=i-s,r=(0|g.words[l])*(0|I.words[s]),c=67108863&r;o=67108863&(c=c+o|0),t+=(e=(e=e+(r/67108864|0)|0)+(c>>>26)|0)>>>26,e&=67108863}A.words[i]=o,C=e,e=t}return 0!==C?A.words[i]=C:A.length--,A.strip()}(this,g,I):d(this,g,I)},h.prototype.makeRBT=function(g){for(var I=new Array(g),A=t.prototype._countBits(g)-1,C=0;C<g;C++)I[C]=this.revBin(C,A,g);return I},h.prototype.revBin=function(g,I,A){if(0===g||g===A-1)return g;for(var C=0,t=0;t<I;t++)C|=(1&g)<<I-t-1,g>>=1;return C},h.prototype.permute=function(g,I,A,C,t,i){for(var e=0;e<i;e++)C[e]=I[g[e]],t[e]=A[g[e]]},h.prototype.transform=function(g,I,A,C,t,i){this.permute(i,g,I,A,C,t);for(var e=1;e<t;e<<=1)for(var o=e<<1,n=Math.cos(2*Math.PI/o),s=Math.sin(2*Math.PI/o),l=0;l<t;l+=o)for(var r=n,c=s,a=0;a<e;a++){var d=A[l+a],h=C[l+a],m=A[l+a+e],Z=C[l+a+e],u=r*m-c*Z;Z=r*Z+c*m,m=u,A[l+a]=d+m,C[l+a]=h+Z,A[l+a+e]=d-m,C[l+a+e]=h-Z,a!==o&&(u=n*r-s*c,c=n*c+s*r,r=u)}},h.prototype.guessLen13b=function(g,I){var A=1|Math.max(I,g),C=1&A,t=0;for(A=A/2|0;A;A>>>=1)t++;return 1<<t+1+C},h.prototype.conjugate=function(g,I,A){if(!(A<=1))for(var C=0;C<A/2;C++){var t=g[C];g[C]=g[A-C-1],g[A-C-1]=t,t=I[C],I[C]=-I[A-C-1],I[A-C-1]=-t}},h.prototype.normalize13b=function(g,I){for(var A=0,C=0;C<I/2;C++){var t=8192*Math.round(g[2*C+1]/I)+Math.round(g[2*C]/I)+A;g[C]=67108863&t,A=t<67108864?0:t/67108864|0}return g},h.prototype.convert13b=function(g,I,C,t){for(var i=0,e=0;e<I;e++)i+=0|g[e],C[2*e]=8191&i,i>>>=13,C[2*e+1]=8191&i,i>>>=13;for(e=2*I;e<t;++e)C[e]=0;A(0===i),A(0==(-8192&i))},h.prototype.stub=function(g){for(var I=new Array(g),A=0;A<g;A++)I[A]=0;return I},h.prototype.mulp=function(g,I,A){var C=2*this.guessLen13b(g.length,I.length),t=this.makeRBT(C),i=this.stub(C),e=new Array(C),o=new Array(C),n=new Array(C),s=new Array(C),l=new Array(C),r=new Array(C),c=A.words;c.length=C,this.convert13b(g.words,g.length,e,C),this.convert13b(I.words,I.length,s,C),this.transform(e,i,o,n,C,t),this.transform(s,i,l,r,C,t);for(var a=0;a<C;a++){var d=o[a]*l[a]-n[a]*r[a];n[a]=o[a]*r[a]+n[a]*l[a],o[a]=d}return this.conjugate(o,n,C),this.transform(o,n,c,i,C,t),this.conjugate(c,i,C),this.normalize13b(c,C),A.negative=g.negative^I.negative,A.length=g.length+I.length,A.strip()},t.prototype.mul=function(g){var I=new t(null);return I.words=new Array(this.length+g.length),this.mulTo(g,I)},t.prototype.mulf=function(g){var I=new t(null);return I.words=new Array(this.length+g.length),d(this,g,I)},t.prototype.imul=function(g){return this.clone().mulTo(g,this)},t.prototype.imuln=function(g){A("number"==typeof g),A(g<67108864);for(var I=0,C=0;C<this.length;C++){var t=(0|this.words[C])*g,i=(67108863&t)+(67108863&I);I>>=26,I+=t/67108864|0,I+=i>>>26,this.words[C]=67108863&i}return 0!==I&&(this.words[C]=I,this.length++),this},t.prototype.muln=function(g){return this.clone().imuln(g)},t.prototype.sqr=function(){return this.mul(this)},t.prototype.isqr=function(){return this.imul(this.clone())},t.prototype.pow=function(g){var I=function(g){for(var I=new Array(g.bitLength()),A=0;A<I.length;A++){var C=A/26|0,t=A%26;I[A]=(g.words[C]&1<<t)>>>t}return I}(g);if(0===I.length)return new t(1);for(var A=this,C=0;C<I.length&&0===I[C];C++,A=A.sqr());if(++C<I.length)for(var i=A.sqr();C<I.length;C++,i=i.sqr())0!==I[C]&&(A=A.mul(i));return A},t.prototype.iushln=function(g){A("number"==typeof g&&g>=0);var I,C=g%26,t=(g-C)/26,i=67108863>>>26-C<<26-C;if(0!==C){var e=0;for(I=0;I<this.length;I++){var o=this.words[I]&i,n=(0|this.words[I])-o<<C;this.words[I]=n|e,e=o>>>26-C}e&&(this.words[I]=e,this.length++)}if(0!==t){for(I=this.length-1;I>=0;I--)this.words[I+t]=this.words[I];for(I=0;I<t;I++)this.words[I]=0;this.length+=t}return this.strip()},t.prototype.ishln=function(g){return A(0===this.negative),this.iushln(g)},t.prototype.iushrn=function(g,I,C){var t;A("number"==typeof g&&g>=0),t=I?(I-I%26)/26:0;var i=g%26,e=Math.min((g-i)/26,this.length),o=67108863^67108863>>>i<<i,n=C;if(t-=e,t=Math.max(0,t),n){for(var s=0;s<e;s++)n.words[s]=this.words[s];n.length=e}if(0===e);else if(this.length>e)for(this.length-=e,s=0;s<this.length;s++)this.words[s]=this.words[s+e];else this.words[0]=0,this.length=1;var l=0;for(s=this.length-1;s>=0&&(0!==l||s>=t);s--){var r=0|this.words[s];this.words[s]=l<<26-i|r>>>i,l=r&o}return n&&0!==l&&(n.words[n.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},t.prototype.ishrn=function(g,I,C){return A(0===this.negative),this.iushrn(g,I,C)},t.prototype.shln=function(g){return this.clone().ishln(g)},t.prototype.ushln=function(g){return this.clone().iushln(g)},t.prototype.shrn=function(g){return this.clone().ishrn(g)},t.prototype.ushrn=function(g){return this.clone().iushrn(g)},t.prototype.testn=function(g){A("number"==typeof g&&g>=0);var I=g%26,C=(g-I)/26,t=1<<I;return!(this.length<=C||!(this.words[C]&t))},t.prototype.imaskn=function(g){A("number"==typeof g&&g>=0);var I=g%26,C=(g-I)/26;if(A(0===this.negative,"imaskn works only with positive numbers"),this.length<=C)return this;if(0!==I&&C++,this.length=Math.min(C,this.length),0!==I){var t=67108863^67108863>>>I<<I;this.words[this.length-1]&=t}return this.strip()},t.prototype.maskn=function(g){return this.clone().imaskn(g)},t.prototype.iaddn=function(g){return A("number"==typeof g),A(g<67108864),g<0?this.isubn(-g):0!==this.negative?1===this.length&&(0|this.words[0])<g?(this.words[0]=g-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(g),this.negative=1,this):this._iaddn(g)},t.prototype._iaddn=function(g){this.words[0]+=g;for(var I=0;I<this.length&&this.words[I]>=67108864;I++)this.words[I]-=67108864,I===this.length-1?this.words[I+1]=1:this.words[I+1]++;return this.length=Math.max(this.length,I+1),this},t.prototype.isubn=function(g){if(A("number"==typeof g),A(g<67108864),g<0)return this.iaddn(-g);if(0!==this.negative)return this.negative=0,this.iaddn(g),this.negative=1,this;if(this.words[0]-=g,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var I=0;I<this.length&&this.words[I]<0;I++)this.words[I]+=67108864,this.words[I+1]-=1;return this.strip()},t.prototype.addn=function(g){return this.clone().iaddn(g)},t.prototype.subn=function(g){return this.clone().isubn(g)},t.prototype.iabs=function(){return this.negative=0,this},t.prototype.abs=function(){return this.clone().iabs()},t.prototype._ishlnsubmul=function(g,I,C){var t,i,e=g.length+C;this._expand(e);var o=0;for(t=0;t<g.length;t++){i=(0|this.words[t+C])+o;var n=(0|g.words[t])*I;o=((i-=67108863&n)>>26)-(n/67108864|0),this.words[t+C]=67108863&i}for(;t<this.length-C;t++)o=(i=(0|this.words[t+C])+o)>>26,this.words[t+C]=67108863&i;if(0===o)return this.strip();for(A(-1===o),o=0,t=0;t<this.length;t++)o=(i=-(0|this.words[t])+o)>>26,this.words[t]=67108863&i;return this.negative=1,this.strip()},t.prototype._wordDiv=function(g,I){var A=(this.length,g.length),C=this.clone(),i=g,e=0|i.words[i.length-1];0!=(A=26-this._countBits(e))&&(i=i.ushln(A),C.iushln(A),e=0|i.words[i.length-1]);var o,n=C.length-i.length;if("mod"!==I){(o=new t(null)).length=n+1,o.words=new Array(o.length);for(var s=0;s<o.length;s++)o.words[s]=0}var l=C.clone()._ishlnsubmul(i,1,n);0===l.negative&&(C=l,o&&(o.words[n]=1));for(var r=n-1;r>=0;r--){var c=67108864*(0|C.words[i.length+r])+(0|C.words[i.length+r-1]);for(c=Math.min(c/e|0,67108863),C._ishlnsubmul(i,c,r);0!==C.negative;)c--,C.negative=0,C._ishlnsubmul(i,1,r),C.isZero()||(C.negative^=1);o&&(o.words[r]=c)}return o&&o.strip(),C.strip(),"div"!==I&&0!==A&&C.iushrn(A),{div:o||null,mod:C}},t.prototype.divmod=function(g,I,C){return A(!g.isZero()),this.isZero()?{div:new t(0),mod:new t(0)}:0!==this.negative&&0===g.negative?(o=this.neg().divmod(g,I),"mod"!==I&&(i=o.div.neg()),"div"!==I&&(e=o.mod.neg(),C&&0!==e.negative&&e.iadd(g)),{div:i,mod:e}):0===this.negative&&0!==g.negative?(o=this.divmod(g.neg(),I),"mod"!==I&&(i=o.div.neg()),{div:i,mod:o.mod}):0!=(this.negative&g.negative)?(o=this.neg().divmod(g.neg(),I),"div"!==I&&(e=o.mod.neg(),C&&0!==e.negative&&e.isub(g)),{div:o.div,mod:e}):g.length>this.length||this.cmp(g)<0?{div:new t(0),mod:this}:1===g.length?"div"===I?{div:this.divn(g.words[0]),mod:null}:"mod"===I?{div:null,mod:new t(this.modn(g.words[0]))}:{div:this.divn(g.words[0]),mod:new t(this.modn(g.words[0]))}:this._wordDiv(g,I);var i,e,o},t.prototype.div=function(g){return this.divmod(g,"div",!1).div},t.prototype.mod=function(g){return this.divmod(g,"mod",!1).mod},t.prototype.umod=function(g){return this.divmod(g,"mod",!0).mod},t.prototype.divRound=function(g){var I=this.divmod(g);if(I.mod.isZero())return I.div;var A=0!==I.div.negative?I.mod.isub(g):I.mod,C=g.ushrn(1),t=g.andln(1),i=A.cmp(C);return i<0||1===t&&0===i?I.div:0!==I.div.negative?I.div.isubn(1):I.div.iaddn(1)},t.prototype.modn=function(g){A(g<=67108863);for(var I=(1<<26)%g,C=0,t=this.length-1;t>=0;t--)C=(I*C+(0|this.words[t]))%g;return C},t.prototype.idivn=function(g){A(g<=67108863);for(var I=0,C=this.length-1;C>=0;C--){var t=(0|this.words[C])+67108864*I;this.words[C]=t/g|0,I=t%g}return this.strip()},t.prototype.divn=function(g){return this.clone().idivn(g)},t.prototype.egcd=function(g){A(0===g.negative),A(!g.isZero());var I=this,C=g.clone();I=0!==I.negative?I.umod(g):I.clone();for(var i=new t(1),e=new t(0),o=new t(0),n=new t(1),s=0;I.isEven()&&C.isEven();)I.iushrn(1),C.iushrn(1),++s;for(var l=C.clone(),r=I.clone();!I.isZero();){for(var c=0,a=1;0==(I.words[0]&a)&&c<26;++c,a<<=1);if(c>0)for(I.iushrn(c);c-- >0;)(i.isOdd()||e.isOdd())&&(i.iadd(l),e.isub(r)),i.iushrn(1),e.iushrn(1);for(var d=0,h=1;0==(C.words[0]&h)&&d<26;++d,h<<=1);if(d>0)for(C.iushrn(d);d-- >0;)(o.isOdd()||n.isOdd())&&(o.iadd(l),n.isub(r)),o.iushrn(1),n.iushrn(1);I.cmp(C)>=0?(I.isub(C),i.isub(o),e.isub(n)):(C.isub(I),o.isub(i),n.isub(e))}return{a:o,b:n,gcd:C.iushln(s)}},t.prototype._invmp=function(g){A(0===g.negative),A(!g.isZero());var I=this,C=g.clone();I=0!==I.negative?I.umod(g):I.clone();for(var i,e=new t(1),o=new t(0),n=C.clone();I.cmpn(1)>0&&C.cmpn(1)>0;){for(var s=0,l=1;0==(I.words[0]&l)&&s<26;++s,l<<=1);if(s>0)for(I.iushrn(s);s-- >0;)e.isOdd()&&e.iadd(n),e.iushrn(1);for(var r=0,c=1;0==(C.words[0]&c)&&r<26;++r,c<<=1);if(r>0)for(C.iushrn(r);r-- >0;)o.isOdd()&&o.iadd(n),o.iushrn(1);I.cmp(C)>=0?(I.isub(C),e.isub(o)):(C.isub(I),o.isub(e))}return(i=0===I.cmpn(1)?e:o).cmpn(0)<0&&i.iadd(g),i},t.prototype.gcd=function(g){if(this.isZero())return g.abs();if(g.isZero())return this.abs();var I=this.clone(),A=g.clone();I.negative=0,A.negative=0;for(var C=0;I.isEven()&&A.isEven();C++)I.iushrn(1),A.iushrn(1);for(;;){for(;I.isEven();)I.iushrn(1);for(;A.isEven();)A.iushrn(1);var t=I.cmp(A);if(t<0){var i=I;I=A,A=i}else if(0===t||0===A.cmpn(1))break;I.isub(A)}return A.iushln(C)},t.prototype.invm=function(g){return this.egcd(g).a.umod(g)},t.prototype.isEven=function(){return 0==(1&this.words[0])},t.prototype.isOdd=function(){return 1==(1&this.words[0])},t.prototype.andln=function(g){return this.words[0]&g},t.prototype.bincn=function(g){A("number"==typeof g);var I=g%26,C=(g-I)/26,t=1<<I;if(this.length<=C)return this._expand(C+1),this.words[C]|=t,this;for(var i=t,e=C;0!==i&&e<this.length;e++){var o=0|this.words[e];i=(o+=i)>>>26,o&=67108863,this.words[e]=o}return 0!==i&&(this.words[e]=i,this.length++),this},t.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},t.prototype.cmpn=function(g){var I,C=g<0;if(0!==this.negative&&!C)return-1;if(0===this.negative&&C)return 1;if(this.strip(),this.length>1)I=1;else{C&&(g=-g),A(g<=67108863,"Number is too big");var t=0|this.words[0];I=t===g?0:t<g?-1:1}return 0!==this.negative?0|-I:I},t.prototype.cmp=function(g){if(0!==this.negative&&0===g.negative)return-1;if(0===this.negative&&0!==g.negative)return 1;var I=this.ucmp(g);return 0!==this.negative?0|-I:I},t.prototype.ucmp=function(g){if(this.length>g.length)return 1;if(this.length<g.length)return-1;for(var I=0,A=this.length-1;A>=0;A--){var C=0|this.words[A],t=0|g.words[A];if(C!==t){C<t?I=-1:C>t&&(I=1);break}}return I},t.prototype.gtn=function(g){return 1===this.cmpn(g)},t.prototype.gt=function(g){return 1===this.cmp(g)},t.prototype.gten=function(g){return this.cmpn(g)>=0},t.prototype.gte=function(g){return this.cmp(g)>=0},t.prototype.ltn=function(g){return-1===this.cmpn(g)},t.prototype.lt=function(g){return-1===this.cmp(g)},t.prototype.lten=function(g){return this.cmpn(g)<=0},t.prototype.lte=function(g){return this.cmp(g)<=0},t.prototype.eqn=function(g){return 0===this.cmpn(g)},t.prototype.eq=function(g){return 0===this.cmp(g)},t.red=function(g){return new B(g)},t.prototype.toRed=function(g){return A(!this.red,"Already a number in reduction context"),A(0===this.negative,"red works only with positives"),g.convertTo(this)._forceRed(g)},t.prototype.fromRed=function(){return A(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},t.prototype._forceRed=function(g){return this.red=g,this},t.prototype.forceRed=function(g){return A(!this.red,"Already a number in reduction context"),this._forceRed(g)},t.prototype.redAdd=function(g){return A(this.red,"redAdd works only with red numbers"),this.red.add(this,g)},t.prototype.redIAdd=function(g){return A(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,g)},t.prototype.redSub=function(g){return A(this.red,"redSub works only with red numbers"),this.red.sub(this,g)},t.prototype.redISub=function(g){return A(this.red,"redISub works only with red numbers"),this.red.isub(this,g)},t.prototype.redShl=function(g){return A(this.red,"redShl works only with red numbers"),this.red.shl(this,g)},t.prototype.redMul=function(g){return A(this.red,"redMul works only with red numbers"),this.red._verify2(this,g),this.red.mul(this,g)},t.prototype.redIMul=function(g){return A(this.red,"redMul works only with red numbers"),this.red._verify2(this,g),this.red.imul(this,g)},t.prototype.redSqr=function(){return A(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},t.prototype.redISqr=function(){return A(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},t.prototype.redSqrt=function(){return A(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},t.prototype.redInvm=function(){return A(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},t.prototype.redNeg=function(){return A(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},t.prototype.redPow=function(g){return A(this.red&&!g.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,g)};var m={k256:null,p224:null,p192:null,p25519:null};function Z(g,I){this.name=g,this.p=new t(I,16),this.n=this.p.bitLength(),this.k=new t(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function u(){Z.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function G(){Z.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function b(){Z.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function p(){Z.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function B(g){if("string"==typeof g){var I=t._prime(g);this.m=I.p,this.prime=I}else A(g.gtn(1),"modulus must be greater than 1"),this.m=g,this.prime=null}function y(g){B.call(this,g),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new t(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}Z.prototype._tmp=function(){var g=new t(null);return g.words=new Array(Math.ceil(this.n/13)),g},Z.prototype.ireduce=function(g){var I,A=g;do{this.split(A,this.tmp),I=(A=(A=this.imulK(A)).iadd(this.tmp)).bitLength()}while(I>this.n);var C=I<this.n?-1:A.ucmp(this.p);return 0===C?(A.words[0]=0,A.length=1):C>0?A.isub(this.p):void 0!==A.strip?A.strip():A._strip(),A},Z.prototype.split=function(g,I){g.iushrn(this.n,0,I)},Z.prototype.imulK=function(g){return g.imul(this.k)},C(u,Z),u.prototype.split=function(g,I){for(var A=4194303,C=Math.min(g.length,9),t=0;t<C;t++)I.words[t]=g.words[t];if(I.length=C,g.length<=9)return g.words[0]=0,void(g.length=1);var i=g.words[9];for(I.words[I.length++]=i&A,t=10;t<g.length;t++){var e=0|g.words[t];g.words[t-10]=(e&A)<<4|i>>>22,i=e}i>>>=22,g.words[t-10]=i,0===i&&g.length>10?g.length-=10:g.length-=9},u.prototype.imulK=function(g){g.words[g.length]=0,g.words[g.length+1]=0,g.length+=2;for(var I=0,A=0;A<g.length;A++){var C=0|g.words[A];I+=977*C,g.words[A]=67108863&I,I=64*C+(I/67108864|0)}return 0===g.words[g.length-1]&&(g.length--,0===g.words[g.length-1]&&g.length--),g},C(G,Z),C(b,Z),C(p,Z),p.prototype.imulK=function(g){for(var I=0,A=0;A<g.length;A++){var C=19*(0|g.words[A])+I,t=67108863&C;C>>>=26,g.words[A]=t,I=C}return 0!==I&&(g.words[g.length++]=I),g},t._prime=function(g){if(m[g])return m[g];var I;if("k256"===g)I=new u;else if("p224"===g)I=new G;else if("p192"===g)I=new b;else{if("p25519"!==g)throw new Error("Unknown prime "+g);I=new p}return m[g]=I,I},B.prototype._verify1=function(g){A(0===g.negative,"red works only with positives"),A(g.red,"red works only with red numbers")},B.prototype._verify2=function(g,I){A(0==(g.negative|I.negative),"red works only with positives"),A(g.red&&g.red===I.red,"red works only with red numbers")},B.prototype.imod=function(g){return this.prime?this.prime.ireduce(g)._forceRed(this):g.umod(this.m)._forceRed(this)},B.prototype.neg=function(g){return g.isZero()?g.clone():this.m.sub(g)._forceRed(this)},B.prototype.add=function(g,I){this._verify2(g,I);var A=g.add(I);return A.cmp(this.m)>=0&&A.isub(this.m),A._forceRed(this)},B.prototype.iadd=function(g,I){this._verify2(g,I);var A=g.iadd(I);return A.cmp(this.m)>=0&&A.isub(this.m),A},B.prototype.sub=function(g,I){this._verify2(g,I);var A=g.sub(I);return A.cmpn(0)<0&&A.iadd(this.m),A._forceRed(this)},B.prototype.isub=function(g,I){this._verify2(g,I);var A=g.isub(I);return A.cmpn(0)<0&&A.iadd(this.m),A},B.prototype.shl=function(g,I){return this._verify1(g),this.imod(g.ushln(I))},B.prototype.imul=function(g,I){return this._verify2(g,I),this.imod(g.imul(I))},B.prototype.mul=function(g,I){return this._verify2(g,I),this.imod(g.mul(I))},B.prototype.isqr=function(g){return this.imul(g,g.clone())},B.prototype.sqr=function(g){return this.mul(g,g)},B.prototype.sqrt=function(g){if(g.isZero())return g.clone();var I=this.m.andln(3);if(A(I%2==1),3===I){var C=this.m.add(new t(1)).iushrn(2);return this.pow(g,C)}for(var i=this.m.subn(1),e=0;!i.isZero()&&0===i.andln(1);)e++,i.iushrn(1);A(!i.isZero());var o=new t(1).toRed(this),n=o.redNeg(),s=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new t(2*l*l).toRed(this);0!==this.pow(l,s).cmp(n);)l.redIAdd(n);for(var r=this.pow(l,i),c=this.pow(g,i.addn(1).iushrn(1)),a=this.pow(g,i),d=e;0!==a.cmp(o);){for(var h=a,m=0;0!==h.cmp(o);m++)h=h.redSqr();A(m<d);var Z=this.pow(r,new t(1).iushln(d-m-1));c=c.redMul(Z),r=Z.redSqr(),a=a.redMul(r),d=m}return c},B.prototype.invm=function(g){var I=g._invmp(this.m);return 0!==I.negative?(I.negative=0,this.imod(I).redNeg()):this.imod(I)},B.prototype.pow=function(g,I){if(I.isZero())return new t(1).toRed(this);if(0===I.cmpn(1))return g.clone();var A=new Array(16);A[0]=new t(1).toRed(this),A[1]=g;for(var C=2;C<A.length;C++)A[C]=this.mul(A[C-1],g);var i=A[0],e=0,o=0,n=I.bitLength()%26;for(0===n&&(n=26),C=I.length-1;C>=0;C--){for(var s=I.words[C],l=n-1;l>=0;l--){var r=s>>l&1;i!==A[0]&&(i=this.sqr(i)),0!==r||0!==e?(e<<=1,e|=r,(4==++o||0===C&&0===l)&&(i=this.mul(i,A[e]),o=0,e=0)):o=0}n=26}return i},B.prototype.convertTo=function(g){var I=g.umod(this.m);return I===g?I.clone():I},B.prototype.convertFrom=function(g){var I=g.clone();return I.red=null,I},t.mont=function(g){return new y(g)},C(y,B),y.prototype.convertTo=function(g){return this.imod(g.ushln(this.shift))},y.prototype.convertFrom=function(g){var I=this.imod(g.mul(this.rinv));return I.red=null,I},y.prototype.imul=function(g,I){if(g.isZero()||I.isZero())return g.words[0]=0,g.length=1,g;var A=g.imul(I),C=A.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),t=A.isub(C).iushrn(this.shift),i=t;return t.cmp(this.m)>=0?i=t.isub(this.m):t.cmpn(0)<0&&(i=t.iadd(this.m)),i._forceRed(this)},y.prototype.mul=function(g,I){if(g.isZero()||I.isZero())return new t(0)._forceRed(this);var A=g.mul(I),C=A.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=A.isub(C).iushrn(this.shift),e=i;return i.cmp(this.m)>=0?e=i.isub(this.m):i.cmpn(0)<0&&(e=i.iadd(this.m)),e._forceRed(this)},y.prototype.invm=function(g){return this.imod(g._invmp(this.m).mul(this.r2))._forceRed(this)}})(mi,ot);var Zi=ui;function ui(g,I){if(!g)throw new Error(I||"Assertion failed")}ui.equal=function(g,I,A){if(g!=I)throw new Error(A||"Assertion failed: "+g+" != "+I)};var Gi,bi,pi,Bi={};!function(g){var I=g;function A(g){return 1===g.length?"0"+g:g}function C(g){for(var I="",C=0;C<g.length;C++)I+=A(g[C].toString(16));return I}I.toArray=function(g,I){if(Array.isArray(g))return g.slice();if(!g)return[];var A=[];if("string"!=typeof g){for(var C=0;C<g.length;C++)A[C]=0|g[C];return A}if("hex"===I){(g=g.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(g="0"+g);for(C=0;C<g.length;C+=2)A.push(parseInt(g[C]+g[C+1],16))}else for(C=0;C<g.length;C++){var t=g.charCodeAt(C),i=t>>8,e=255&t;i?A.push(i,e):A.push(e)}return A},I.zero2=A,I.toHex=C,I.encode=function(g,I){return"hex"===I?C(g):g}}(Bi),bi=mi.exports,pi=Bi,(Gi=hi).assert=Zi,Gi.toArray=pi.toArray,Gi.zero2=pi.zero2,Gi.toHex=pi.toHex,Gi.encode=pi.encode,Gi.getNAF=function(g,I,A){var C=new Array(Math.max(g.bitLength(),A)+1);C.fill(0);for(var t=1<<I+1,i=g.clone(),e=0;e<C.length;e++){var o,n=i.andln(t-1);i.isOdd()?(o=n>(t>>1)-1?(t>>1)-n:n,i.isubn(o)):o=0,C[e]=o,i.iushrn(1)}return C},Gi.getJSF=function(g,I){var A=[[],[]];g=g.clone(),I=I.clone();for(var C,t=0,i=0;g.cmpn(-t)>0||I.cmpn(-i)>0;){var e,o,n=g.andln(3)+t&3,s=I.andln(3)+i&3;3===n&&(n=-1),3===s&&(s=-1),e=0==(1&n)?0:3!=(C=g.andln(7)+t&7)&&5!==C||2!==s?n:-n,A[0].push(e),o=0==(1&s)?0:3!=(C=I.andln(7)+i&7)&&5!==C||2!==n?s:-s,A[1].push(o),2*t===e+1&&(t=1-t),2*i===o+1&&(i=1-i),g.iushrn(1),I.iushrn(1)}return A},Gi.cachedProperty=function(g,I,A){var C="_"+I;g.prototype[I]=function(){return void 0!==this[C]?this[C]:this[C]=A.call(this)}},Gi.parseBytes=function(g){return"string"==typeof g?Gi.toArray(g,"hex"):g},Gi.intFromLE=function(g){return new bi(g,"hex","le")};var yi,wi={exports:{}};function Wi(g){this.rand=g}if(wi.exports=function(g){return yi||(yi=new Wi(null)),yi.generate(g)},wi.exports.Rand=Wi,Wi.prototype.generate=function(g){return this._rand(g)},Wi.prototype._rand=function(g){if(this.rand.getBytes)return this.rand.getBytes(g);for(var I=new Uint8Array(g),A=0;A<I.length;A++)I[A]=this.rand.getByte();return I},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?Wi.prototype._rand=function(g){var I=new Uint8Array(g);return self.crypto.getRandomValues(I),I}:self.msCrypto&&self.msCrypto.getRandomValues?Wi.prototype._rand=function(g){var I=new Uint8Array(g);return self.msCrypto.getRandomValues(I),I}:"object"==typeof window&&(Wi.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var Si=require("crypto");if("function"!=typeof Si.randomBytes)throw new Error("Not supported");Wi.prototype._rand=function(g){return Si.randomBytes(g)}}catch(dD){}var Ki={},fi=mi.exports,Yi=hi,Xi=Yi.getNAF,Vi=Yi.getJSF,Oi=Yi.assert;function Ri(g,I){this.type=g,this.p=new fi(I.p,16),this.red=I.prime?fi.red(I.prime):fi.mont(this.p),this.zero=new fi(0).toRed(this.red),this.one=new fi(1).toRed(this.red),this.two=new fi(2).toRed(this.red),this.n=I.n&&new fi(I.n,16),this.g=I.g&&this.pointFromJSON(I.g,I.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var A=this.n&&this.p.div(this.n);!A||A.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Qi=Ri;function Hi(g,I){this.curve=g,this.type=I,this.precomputed=null}Ri.prototype.point=function(){throw new Error("Not implemented")},Ri.prototype.validate=function(){throw new Error("Not implemented")},Ri.prototype._fixedNafMul=function(g,I){Oi(g.precomputed);var A=g._getDoubles(),C=Xi(I,1,this._bitLength),t=(1<<A.step+1)-(A.step%2==0?2:1);t/=3;var i,e,o=[];for(i=0;i<C.length;i+=A.step){e=0;for(var n=i+A.step-1;n>=i;n--)e=(e<<1)+C[n];o.push(e)}for(var s=this.jpoint(null,null,null),l=this.jpoint(null,null,null),r=t;r>0;r--){for(i=0;i<o.length;i++)(e=o[i])===r?l=l.mixedAdd(A.points[i]):e===-r&&(l=l.mixedAdd(A.points[i].neg()));s=s.add(l)}return s.toP()},Ri.prototype._wnafMul=function(g,I){var A=4,C=g._getNAFPoints(A);A=C.wnd;for(var t=C.points,i=Xi(I,A,this._bitLength),e=this.jpoint(null,null,null),o=i.length-1;o>=0;o--){for(var n=0;o>=0&&0===i[o];o--)n++;if(o>=0&&n++,e=e.dblp(n),o<0)break;var s=i[o];Oi(0!==s),e="affine"===g.type?s>0?e.mixedAdd(t[s-1>>1]):e.mixedAdd(t[-s-1>>1].neg()):s>0?e.add(t[s-1>>1]):e.add(t[-s-1>>1].neg())}return"affine"===g.type?e.toP():e},Ri.prototype._wnafMulAdd=function(g,I,A,C,t){var i,e,o,n=this._wnafT1,s=this._wnafT2,l=this._wnafT3,r=0;for(i=0;i<C;i++){var c=(o=I[i])._getNAFPoints(g);n[i]=c.wnd,s[i]=c.points}for(i=C-1;i>=1;i-=2){var a=i-1,d=i;if(1===n[a]&&1===n[d]){var h=[I[a],null,null,I[d]];0===I[a].y.cmp(I[d].y)?(h[1]=I[a].add(I[d]),h[2]=I[a].toJ().mixedAdd(I[d].neg())):0===I[a].y.cmp(I[d].y.redNeg())?(h[1]=I[a].toJ().mixedAdd(I[d]),h[2]=I[a].add(I[d].neg())):(h[1]=I[a].toJ().mixedAdd(I[d]),h[2]=I[a].toJ().mixedAdd(I[d].neg()));var m=[-3,-1,-5,-7,0,7,5,1,3],Z=Vi(A[a],A[d]);for(r=Math.max(Z[0].length,r),l[a]=new Array(r),l[d]=new Array(r),e=0;e<r;e++){var u=0|Z[0][e],G=0|Z[1][e];l[a][e]=m[3*(u+1)+(G+1)],l[d][e]=0,s[a]=h}}else l[a]=Xi(A[a],n[a],this._bitLength),l[d]=Xi(A[d],n[d],this._bitLength),r=Math.max(l[a].length,r),r=Math.max(l[d].length,r)}var b=this.jpoint(null,null,null),p=this._wnafT4;for(i=r;i>=0;i--){for(var B=0;i>=0;){var y=!0;for(e=0;e<C;e++)p[e]=0|l[e][i],0!==p[e]&&(y=!1);if(!y)break;B++,i--}if(i>=0&&B++,b=b.dblp(B),i<0)break;for(e=0;e<C;e++){var w=p[e];0!==w&&(w>0?o=s[e][w-1>>1]:w<0&&(o=s[e][-w-1>>1].neg()),b="affine"===o.type?b.mixedAdd(o):b.add(o))}}for(i=0;i<C;i++)s[i]=null;return t?b:b.toP()},Ri.BasePoint=Hi,Hi.prototype.eq=function(){throw new Error("Not implemented")},Hi.prototype.validate=function(){return this.curve.validate(this)},Ri.prototype.decodePoint=function(g,I){g=Yi.toArray(g,I);var A=this.p.byteLength();if((4===g[0]||6===g[0]||7===g[0])&&g.length-1==2*A)return 6===g[0]?Oi(g[g.length-1]%2==0):7===g[0]&&Oi(g[g.length-1]%2==1),this.point(g.slice(1,1+A),g.slice(1+A,1+2*A));if((2===g[0]||3===g[0])&&g.length-1===A)return this.pointFromX(g.slice(1,1+A),3===g[0]);throw new Error("Unknown point format")},Hi.prototype.encodeCompressed=function(g){return this.encode(g,!0)},Hi.prototype._encode=function(g){var I=this.curve.p.byteLength(),A=this.getX().toArray("be",I);return g?[this.getY().isEven()?2:3].concat(A):[4].concat(A,this.getY().toArray("be",I))},Hi.prototype.encode=function(g,I){return Yi.encode(this._encode(I),g)},Hi.prototype.precompute=function(g){if(this.precomputed)return this;var I={doubles:null,naf:null,beta:null};return I.naf=this._getNAFPoints(8),I.doubles=this._getDoubles(4,g),I.beta=this._getBeta(),this.precomputed=I,this},Hi.prototype._hasDoubles=function(g){if(!this.precomputed)return!1;var I=this.precomputed.doubles;return!!I&&I.points.length>=Math.ceil((g.bitLength()+1)/I.step)},Hi.prototype._getDoubles=function(g,I){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var A=[this],C=this,t=0;t<I;t+=g){for(var i=0;i<g;i++)C=C.dbl();A.push(C)}return{step:g,points:A}},Hi.prototype._getNAFPoints=function(g){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var I=[this],A=(1<<g)-1,C=1===A?null:this.dbl(),t=1;t<A;t++)I[t]=I[t-1].add(C);return{wnd:g,points:I}},Hi.prototype._getBeta=function(){return null},Hi.prototype.dblp=function(g){for(var I=this,A=0;A<g;A++)I=I.dbl();return I};var ki={exports:{}},Ji={exports:{}};"function"==typeof Object.create?Ji.exports=function(g,I){I&&(g.super_=I,g.prototype=Object.create(I.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}))}:Ji.exports=function(g,I){if(I){g.super_=I;var A=function(){};A.prototype=I.prototype,g.prototype=new A,g.prototype.constructor=g}};try{var vi=require("util");if("function"!=typeof vi.inherits)throw"";ki.exports=vi.inherits}catch(dD){ki.exports=Ji.exports}var Di=hi,Mi=mi.exports,Ni=ki.exports,Ei=Qi,Fi=Di.assert;function Li(g){Ei.call(this,"short",g),this.a=new Mi(g.a,16).toRed(this.red),this.b=new Mi(g.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(g),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Ni(Li,Ei);var Ti=Li;function zi(g,I,A,C){Ei.BasePoint.call(this,g,"affine"),null===I&&null===A?(this.x=null,this.y=null,this.inf=!0):(this.x=new Mi(I,16),this.y=new Mi(A,16),C&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function Pi(g,I,A,C){Ei.BasePoint.call(this,g,"jacobian"),null===I&&null===A&&null===C?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Mi(0)):(this.x=new Mi(I,16),this.y=new Mi(A,16),this.z=new Mi(C,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Li.prototype._getEndomorphism=function(g){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var I,A;if(g.beta)I=new Mi(g.beta,16).toRed(this.red);else{var C=this._getEndoRoots(this.p);I=(I=C[0].cmp(C[1])<0?C[0]:C[1]).toRed(this.red)}if(g.lambda)A=new Mi(g.lambda,16);else{var t=this._getEndoRoots(this.n);0===this.g.mul(t[0]).x.cmp(this.g.x.redMul(I))?A=t[0]:(A=t[1],Fi(0===this.g.mul(A).x.cmp(this.g.x.redMul(I))))}return{beta:I,lambda:A,basis:g.basis?g.basis.map((function(g){return{a:new Mi(g.a,16),b:new Mi(g.b,16)}})):this._getEndoBasis(A)}}},Li.prototype._getEndoRoots=function(g){var I=g===this.p?this.red:Mi.mont(g),A=new Mi(2).toRed(I).redInvm(),C=A.redNeg(),t=new Mi(3).toRed(I).redNeg().redSqrt().redMul(A);return[C.redAdd(t).fromRed(),C.redSub(t).fromRed()]},Li.prototype._getEndoBasis=function(g){for(var I,A,C,t,i,e,o,n,s,l=this.n.ushrn(Math.floor(this.n.bitLength()/2)),r=g,c=this.n.clone(),a=new Mi(1),d=new Mi(0),h=new Mi(0),m=new Mi(1),Z=0;0!==r.cmpn(0);){var u=c.div(r);n=c.sub(u.mul(r)),s=h.sub(u.mul(a));var G=m.sub(u.mul(d));if(!C&&n.cmp(l)<0)I=o.neg(),A=a,C=n.neg(),t=s;else if(C&&2==++Z)break;o=n,c=r,r=n,h=a,a=s,m=d,d=G}i=n.neg(),e=s;var b=C.sqr().add(t.sqr());return i.sqr().add(e.sqr()).cmp(b)>=0&&(i=I,e=A),C.negative&&(C=C.neg(),t=t.neg()),i.negative&&(i=i.neg(),e=e.neg()),[{a:C,b:t},{a:i,b:e}]},Li.prototype._endoSplit=function(g){var I=this.endo.basis,A=I[0],C=I[1],t=C.b.mul(g).divRound(this.n),i=A.b.neg().mul(g).divRound(this.n),e=t.mul(A.a),o=i.mul(C.a),n=t.mul(A.b),s=i.mul(C.b);return{k1:g.sub(e).sub(o),k2:n.add(s).neg()}},Li.prototype.pointFromX=function(g,I){(g=new Mi(g,16)).red||(g=g.toRed(this.red));var A=g.redSqr().redMul(g).redIAdd(g.redMul(this.a)).redIAdd(this.b),C=A.redSqrt();if(0!==C.redSqr().redSub(A).cmp(this.zero))throw new Error("invalid point");var t=C.fromRed().isOdd();return(I&&!t||!I&&t)&&(C=C.redNeg()),this.point(g,C)},Li.prototype.validate=function(g){if(g.inf)return!0;var I=g.x,A=g.y,C=this.a.redMul(I),t=I.redSqr().redMul(I).redIAdd(C).redIAdd(this.b);return 0===A.redSqr().redISub(t).cmpn(0)},Li.prototype._endoWnafMulAdd=function(g,I,A){for(var C=this._endoWnafT1,t=this._endoWnafT2,i=0;i<g.length;i++){var e=this._endoSplit(I[i]),o=g[i],n=o._getBeta();e.k1.negative&&(e.k1.ineg(),o=o.neg(!0)),e.k2.negative&&(e.k2.ineg(),n=n.neg(!0)),C[2*i]=o,C[2*i+1]=n,t[2*i]=e.k1,t[2*i+1]=e.k2}for(var s=this._wnafMulAdd(1,C,t,2*i,A),l=0;l<2*i;l++)C[l]=null,t[l]=null;return s},Ni(zi,Ei.BasePoint),Li.prototype.point=function(g,I,A){return new zi(this,g,I,A)},Li.prototype.pointFromJSON=function(g,I){return zi.fromJSON(this,g,I)},zi.prototype._getBeta=function(){if(this.curve.endo){var g=this.precomputed;if(g&&g.beta)return g.beta;var I=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(g){var A=this.curve,C=function(g){return A.point(g.x.redMul(A.endo.beta),g.y)};g.beta=I,I.precomputed={beta:null,naf:g.naf&&{wnd:g.naf.wnd,points:g.naf.points.map(C)},doubles:g.doubles&&{step:g.doubles.step,points:g.doubles.points.map(C)}}}return I}},zi.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},zi.fromJSON=function(g,I,A){"string"==typeof I&&(I=JSON.parse(I));var C=g.point(I[0],I[1],A);if(!I[2])return C;function t(I){return g.point(I[0],I[1],A)}var i=I[2];return C.precomputed={beta:null,doubles:i.doubles&&{step:i.doubles.step,points:[C].concat(i.doubles.points.map(t))},naf:i.naf&&{wnd:i.naf.wnd,points:[C].concat(i.naf.points.map(t))}},C},zi.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},zi.prototype.isInfinity=function(){return this.inf},zi.prototype.add=function(g){if(this.inf)return g;if(g.inf)return this;if(this.eq(g))return this.dbl();if(this.neg().eq(g))return this.curve.point(null,null);if(0===this.x.cmp(g.x))return this.curve.point(null,null);var I=this.y.redSub(g.y);0!==I.cmpn(0)&&(I=I.redMul(this.x.redSub(g.x).redInvm()));var A=I.redSqr().redISub(this.x).redISub(g.x),C=I.redMul(this.x.redSub(A)).redISub(this.y);return this.curve.point(A,C)},zi.prototype.dbl=function(){if(this.inf)return this;var g=this.y.redAdd(this.y);if(0===g.cmpn(0))return this.curve.point(null,null);var I=this.curve.a,A=this.x.redSqr(),C=g.redInvm(),t=A.redAdd(A).redIAdd(A).redIAdd(I).redMul(C),i=t.redSqr().redISub(this.x.redAdd(this.x)),e=t.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,e)},zi.prototype.getX=function(){return this.x.fromRed()},zi.prototype.getY=function(){return this.y.fromRed()},zi.prototype.mul=function(g){return g=new Mi(g,16),this.isInfinity()?this:this._hasDoubles(g)?this.curve._fixedNafMul(this,g):this.curve.endo?this.curve._endoWnafMulAdd([this],[g]):this.curve._wnafMul(this,g)},zi.prototype.mulAdd=function(g,I,A){var C=[this,I],t=[g,A];return this.curve.endo?this.curve._endoWnafMulAdd(C,t):this.curve._wnafMulAdd(1,C,t,2)},zi.prototype.jmulAdd=function(g,I,A){var C=[this,I],t=[g,A];return this.curve.endo?this.curve._endoWnafMulAdd(C,t,!0):this.curve._wnafMulAdd(1,C,t,2,!0)},zi.prototype.eq=function(g){return this===g||this.inf===g.inf&&(this.inf||0===this.x.cmp(g.x)&&0===this.y.cmp(g.y))},zi.prototype.neg=function(g){if(this.inf)return this;var I=this.curve.point(this.x,this.y.redNeg());if(g&&this.precomputed){var A=this.precomputed,C=function(g){return g.neg()};I.precomputed={naf:A.naf&&{wnd:A.naf.wnd,points:A.naf.points.map(C)},doubles:A.doubles&&{step:A.doubles.step,points:A.doubles.points.map(C)}}}return I},zi.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},Ni(Pi,Ei.BasePoint),Li.prototype.jpoint=function(g,I,A){return new Pi(this,g,I,A)},Pi.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var g=this.z.redInvm(),I=g.redSqr(),A=this.x.redMul(I),C=this.y.redMul(I).redMul(g);return this.curve.point(A,C)},Pi.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},Pi.prototype.add=function(g){if(this.isInfinity())return g;if(g.isInfinity())return this;var I=g.z.redSqr(),A=this.z.redSqr(),C=this.x.redMul(I),t=g.x.redMul(A),i=this.y.redMul(I.redMul(g.z)),e=g.y.redMul(A.redMul(this.z)),o=C.redSub(t),n=i.redSub(e);if(0===o.cmpn(0))return 0!==n.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var s=o.redSqr(),l=s.redMul(o),r=C.redMul(s),c=n.redSqr().redIAdd(l).redISub(r).redISub(r),a=n.redMul(r.redISub(c)).redISub(i.redMul(l)),d=this.z.redMul(g.z).redMul(o);return this.curve.jpoint(c,a,d)},Pi.prototype.mixedAdd=function(g){if(this.isInfinity())return g.toJ();if(g.isInfinity())return this;var I=this.z.redSqr(),A=this.x,C=g.x.redMul(I),t=this.y,i=g.y.redMul(I).redMul(this.z),e=A.redSub(C),o=t.redSub(i);if(0===e.cmpn(0))return 0!==o.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var n=e.redSqr(),s=n.redMul(e),l=A.redMul(n),r=o.redSqr().redIAdd(s).redISub(l).redISub(l),c=o.redMul(l.redISub(r)).redISub(t.redMul(s)),a=this.z.redMul(e);return this.curve.jpoint(r,c,a)},Pi.prototype.dblp=function(g){if(0===g)return this;if(this.isInfinity())return this;if(!g)return this.dbl();var I;if(this.curve.zeroA||this.curve.threeA){var A=this;for(I=0;I<g;I++)A=A.dbl();return A}var C=this.curve.a,t=this.curve.tinv,i=this.x,e=this.y,o=this.z,n=o.redSqr().redSqr(),s=e.redAdd(e);for(I=0;I<g;I++){var l=i.redSqr(),r=s.redSqr(),c=r.redSqr(),a=l.redAdd(l).redIAdd(l).redIAdd(C.redMul(n)),d=i.redMul(r),h=a.redSqr().redISub(d.redAdd(d)),m=d.redISub(h),Z=a.redMul(m);Z=Z.redIAdd(Z).redISub(c);var u=s.redMul(o);I+1<g&&(n=n.redMul(c)),i=h,o=u,s=Z}return this.curve.jpoint(i,s.redMul(t),o)},Pi.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},Pi.prototype._zeroDbl=function(){var g,I,A;if(this.zOne){var C=this.x.redSqr(),t=this.y.redSqr(),i=t.redSqr(),e=this.x.redAdd(t).redSqr().redISub(C).redISub(i);e=e.redIAdd(e);var o=C.redAdd(C).redIAdd(C),n=o.redSqr().redISub(e).redISub(e),s=i.redIAdd(i);s=(s=s.redIAdd(s)).redIAdd(s),g=n,I=o.redMul(e.redISub(n)).redISub(s),A=this.y.redAdd(this.y)}else{var l=this.x.redSqr(),r=this.y.redSqr(),c=r.redSqr(),a=this.x.redAdd(r).redSqr().redISub(l).redISub(c);a=a.redIAdd(a);var d=l.redAdd(l).redIAdd(l),h=d.redSqr(),m=c.redIAdd(c);m=(m=m.redIAdd(m)).redIAdd(m),g=h.redISub(a).redISub(a),I=d.redMul(a.redISub(g)).redISub(m),A=(A=this.y.redMul(this.z)).redIAdd(A)}return this.curve.jpoint(g,I,A)},Pi.prototype._threeDbl=function(){var g,I,A;if(this.zOne){var C=this.x.redSqr(),t=this.y.redSqr(),i=t.redSqr(),e=this.x.redAdd(t).redSqr().redISub(C).redISub(i);e=e.redIAdd(e);var o=C.redAdd(C).redIAdd(C).redIAdd(this.curve.a),n=o.redSqr().redISub(e).redISub(e);g=n;var s=i.redIAdd(i);s=(s=s.redIAdd(s)).redIAdd(s),I=o.redMul(e.redISub(n)).redISub(s),A=this.y.redAdd(this.y)}else{var l=this.z.redSqr(),r=this.y.redSqr(),c=this.x.redMul(r),a=this.x.redSub(l).redMul(this.x.redAdd(l));a=a.redAdd(a).redIAdd(a);var d=c.redIAdd(c),h=(d=d.redIAdd(d)).redAdd(d);g=a.redSqr().redISub(h),A=this.y.redAdd(this.z).redSqr().redISub(r).redISub(l);var m=r.redSqr();m=(m=(m=m.redIAdd(m)).redIAdd(m)).redIAdd(m),I=a.redMul(d.redISub(g)).redISub(m)}return this.curve.jpoint(g,I,A)},Pi.prototype._dbl=function(){var g=this.curve.a,I=this.x,A=this.y,C=this.z,t=C.redSqr().redSqr(),i=I.redSqr(),e=A.redSqr(),o=i.redAdd(i).redIAdd(i).redIAdd(g.redMul(t)),n=I.redAdd(I),s=(n=n.redIAdd(n)).redMul(e),l=o.redSqr().redISub(s.redAdd(s)),r=s.redISub(l),c=e.redSqr();c=(c=(c=c.redIAdd(c)).redIAdd(c)).redIAdd(c);var a=o.redMul(r).redISub(c),d=A.redAdd(A).redMul(C);return this.curve.jpoint(l,a,d)},Pi.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var g=this.x.redSqr(),I=this.y.redSqr(),A=this.z.redSqr(),C=I.redSqr(),t=g.redAdd(g).redIAdd(g),i=t.redSqr(),e=this.x.redAdd(I).redSqr().redISub(g).redISub(C),o=(e=(e=(e=e.redIAdd(e)).redAdd(e).redIAdd(e)).redISub(i)).redSqr(),n=C.redIAdd(C);n=(n=(n=n.redIAdd(n)).redIAdd(n)).redIAdd(n);var s=t.redIAdd(e).redSqr().redISub(i).redISub(o).redISub(n),l=I.redMul(s);l=(l=l.redIAdd(l)).redIAdd(l);var r=this.x.redMul(o).redISub(l);r=(r=r.redIAdd(r)).redIAdd(r);var c=this.y.redMul(s.redMul(n.redISub(s)).redISub(e.redMul(o)));c=(c=(c=c.redIAdd(c)).redIAdd(c)).redIAdd(c);var a=this.z.redAdd(e).redSqr().redISub(A).redISub(o);return this.curve.jpoint(r,c,a)},Pi.prototype.mul=function(g,I){return g=new Mi(g,I),this.curve._wnafMul(this,g)},Pi.prototype.eq=function(g){if("affine"===g.type)return this.eq(g.toJ());if(this===g)return!0;var I=this.z.redSqr(),A=g.z.redSqr();if(0!==this.x.redMul(A).redISub(g.x.redMul(I)).cmpn(0))return!1;var C=I.redMul(this.z),t=A.redMul(g.z);return 0===this.y.redMul(t).redISub(g.y.redMul(C)).cmpn(0)},Pi.prototype.eqXToP=function(g){var I=this.z.redSqr(),A=g.toRed(this.curve.red).redMul(I);if(0===this.x.cmp(A))return!0;for(var C=g.clone(),t=this.curve.redN.redMul(I);;){if(C.iadd(this.curve.n),C.cmp(this.curve.p)>=0)return!1;if(A.redIAdd(t),0===this.x.cmp(A))return!0}},Pi.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},Pi.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var Ui=mi.exports,xi=ki.exports,ji=Qi,_i=hi;function $i(g){ji.call(this,"mont",g),this.a=new Ui(g.a,16).toRed(this.red),this.b=new Ui(g.b,16).toRed(this.red),this.i4=new Ui(4).toRed(this.red).redInvm(),this.two=new Ui(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}xi($i,ji);var qi=$i;function ge(g,I,A){ji.BasePoint.call(this,g,"projective"),null===I&&null===A?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new Ui(I,16),this.z=new Ui(A,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}$i.prototype.validate=function(g){var I=g.normalize().x,A=I.redSqr(),C=A.redMul(I).redAdd(A.redMul(this.a)).redAdd(I);return 0===C.redSqrt().redSqr().cmp(C)},xi(ge,ji.BasePoint),$i.prototype.decodePoint=function(g,I){return this.point(_i.toArray(g,I),1)},$i.prototype.point=function(g,I){return new ge(this,g,I)},$i.prototype.pointFromJSON=function(g){return ge.fromJSON(this,g)},ge.prototype.precompute=function(){},ge.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},ge.fromJSON=function(g,I){return new ge(g,I[0],I[1]||g.one)},ge.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},ge.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},ge.prototype.dbl=function(){var g=this.x.redAdd(this.z).redSqr(),I=this.x.redSub(this.z).redSqr(),A=g.redSub(I),C=g.redMul(I),t=A.redMul(I.redAdd(this.curve.a24.redMul(A)));return this.curve.point(C,t)},ge.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},ge.prototype.diffAdd=function(g,I){var A=this.x.redAdd(this.z),C=this.x.redSub(this.z),t=g.x.redAdd(g.z),i=g.x.redSub(g.z).redMul(A),e=t.redMul(C),o=I.z.redMul(i.redAdd(e).redSqr()),n=I.x.redMul(i.redISub(e).redSqr());return this.curve.point(o,n)},ge.prototype.mul=function(g){for(var I=g.clone(),A=this,C=this.curve.point(null,null),t=[];0!==I.cmpn(0);I.iushrn(1))t.push(I.andln(1));for(var i=t.length-1;i>=0;i--)0===t[i]?(A=A.diffAdd(C,this),C=C.dbl()):(C=A.diffAdd(C,this),A=A.dbl());return C},ge.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},ge.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},ge.prototype.eq=function(g){return 0===this.getX().cmp(g.getX())},ge.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},ge.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var Ie=hi,Ae=mi.exports,Ce=ki.exports,te=Qi,ie=Ie.assert;function ee(g){this.twisted=1!=(0|g.a),this.mOneA=this.twisted&&-1==(0|g.a),this.extended=this.mOneA,te.call(this,"edwards",g),this.a=new Ae(g.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new Ae(g.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new Ae(g.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),ie(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|g.c)}Ce(ee,te);var oe=ee;function ne(g,I,A,C,t){te.BasePoint.call(this,g,"projective"),null===I&&null===A&&null===C?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new Ae(I,16),this.y=new Ae(A,16),this.z=C?new Ae(C,16):this.curve.one,this.t=t&&new Ae(t,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}ee.prototype._mulA=function(g){return this.mOneA?g.redNeg():this.a.redMul(g)},ee.prototype._mulC=function(g){return this.oneC?g:this.c.redMul(g)},ee.prototype.jpoint=function(g,I,A,C){return this.point(g,I,A,C)},ee.prototype.pointFromX=function(g,I){(g=new Ae(g,16)).red||(g=g.toRed(this.red));var A=g.redSqr(),C=this.c2.redSub(this.a.redMul(A)),t=this.one.redSub(this.c2.redMul(this.d).redMul(A)),i=C.redMul(t.redInvm()),e=i.redSqrt();if(0!==e.redSqr().redSub(i).cmp(this.zero))throw new Error("invalid point");var o=e.fromRed().isOdd();return(I&&!o||!I&&o)&&(e=e.redNeg()),this.point(g,e)},ee.prototype.pointFromY=function(g,I){(g=new Ae(g,16)).red||(g=g.toRed(this.red));var A=g.redSqr(),C=A.redSub(this.c2),t=A.redMul(this.d).redMul(this.c2).redSub(this.a),i=C.redMul(t.redInvm());if(0===i.cmp(this.zero)){if(I)throw new Error("invalid point");return this.point(this.zero,g)}var e=i.redSqrt();if(0!==e.redSqr().redSub(i).cmp(this.zero))throw new Error("invalid point");return e.fromRed().isOdd()!==I&&(e=e.redNeg()),this.point(e,g)},ee.prototype.validate=function(g){if(g.isInfinity())return!0;g.normalize();var I=g.x.redSqr(),A=g.y.redSqr(),C=I.redMul(this.a).redAdd(A),t=this.c2.redMul(this.one.redAdd(this.d.redMul(I).redMul(A)));return 0===C.cmp(t)},Ce(ne,te.BasePoint),ee.prototype.pointFromJSON=function(g){return ne.fromJSON(this,g)},ee.prototype.point=function(g,I,A,C){return new ne(this,g,I,A,C)},ne.fromJSON=function(g,I){return new ne(g,I[0],I[1],I[2])},ne.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},ne.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},ne.prototype._extDbl=function(){var g=this.x.redSqr(),I=this.y.redSqr(),A=this.z.redSqr();A=A.redIAdd(A);var C=this.curve._mulA(g),t=this.x.redAdd(this.y).redSqr().redISub(g).redISub(I),i=C.redAdd(I),e=i.redSub(A),o=C.redSub(I),n=t.redMul(e),s=i.redMul(o),l=t.redMul(o),r=e.redMul(i);return this.curve.point(n,s,r,l)},ne.prototype._projDbl=function(){var g,I,A,C,t,i,e=this.x.redAdd(this.y).redSqr(),o=this.x.redSqr(),n=this.y.redSqr();if(this.curve.twisted){var s=(C=this.curve._mulA(o)).redAdd(n);this.zOne?(g=e.redSub(o).redSub(n).redMul(s.redSub(this.curve.two)),I=s.redMul(C.redSub(n)),A=s.redSqr().redSub(s).redSub(s)):(t=this.z.redSqr(),i=s.redSub(t).redISub(t),g=e.redSub(o).redISub(n).redMul(i),I=s.redMul(C.redSub(n)),A=s.redMul(i))}else C=o.redAdd(n),t=this.curve._mulC(this.z).redSqr(),i=C.redSub(t).redSub(t),g=this.curve._mulC(e.redISub(C)).redMul(i),I=this.curve._mulC(C).redMul(o.redISub(n)),A=C.redMul(i);return this.curve.point(g,I,A)},ne.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},ne.prototype._extAdd=function(g){var I=this.y.redSub(this.x).redMul(g.y.redSub(g.x)),A=this.y.redAdd(this.x).redMul(g.y.redAdd(g.x)),C=this.t.redMul(this.curve.dd).redMul(g.t),t=this.z.redMul(g.z.redAdd(g.z)),i=A.redSub(I),e=t.redSub(C),o=t.redAdd(C),n=A.redAdd(I),s=i.redMul(e),l=o.redMul(n),r=i.redMul(n),c=e.redMul(o);return this.curve.point(s,l,c,r)},ne.prototype._projAdd=function(g){var I,A,C=this.z.redMul(g.z),t=C.redSqr(),i=this.x.redMul(g.x),e=this.y.redMul(g.y),o=this.curve.d.redMul(i).redMul(e),n=t.redSub(o),s=t.redAdd(o),l=this.x.redAdd(this.y).redMul(g.x.redAdd(g.y)).redISub(i).redISub(e),r=C.redMul(n).redMul(l);return this.curve.twisted?(I=C.redMul(s).redMul(e.redSub(this.curve._mulA(i))),A=n.redMul(s)):(I=C.redMul(s).redMul(e.redSub(i)),A=this.curve._mulC(n).redMul(s)),this.curve.point(r,I,A)},ne.prototype.add=function(g){return this.isInfinity()?g:g.isInfinity()?this:this.curve.extended?this._extAdd(g):this._projAdd(g)},ne.prototype.mul=function(g){return this._hasDoubles(g)?this.curve._fixedNafMul(this,g):this.curve._wnafMul(this,g)},ne.prototype.mulAdd=function(g,I,A){return this.curve._wnafMulAdd(1,[this,I],[g,A],2,!1)},ne.prototype.jmulAdd=function(g,I,A){return this.curve._wnafMulAdd(1,[this,I],[g,A],2,!0)},ne.prototype.normalize=function(){if(this.zOne)return this;var g=this.z.redInvm();return this.x=this.x.redMul(g),this.y=this.y.redMul(g),this.t&&(this.t=this.t.redMul(g)),this.z=this.curve.one,this.zOne=!0,this},ne.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},ne.prototype.getX=function(){return this.normalize(),this.x.fromRed()},ne.prototype.getY=function(){return this.normalize(),this.y.fromRed()},ne.prototype.eq=function(g){return this===g||0===this.getX().cmp(g.getX())&&0===this.getY().cmp(g.getY())},ne.prototype.eqXToP=function(g){var I=g.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(I))return!0;for(var A=g.clone(),C=this.curve.redN.redMul(this.z);;){if(A.iadd(this.curve.n),A.cmp(this.curve.p)>=0)return!1;if(I.redIAdd(C),0===this.x.cmp(I))return!0}},ne.prototype.toP=ne.prototype.normalize,ne.prototype.mixedAdd=ne.prototype.add,function(g){var I=g;I.base=Qi,I.short=Ti,I.mont=qi,I.edwards=oe}(Ki);var se={},le={},re={},ce=Zi,ae=ki.exports;function de(g,I){return 55296==(64512&g.charCodeAt(I))&&(!(I<0||I+1>=g.length)&&56320==(64512&g.charCodeAt(I+1)))}function he(g){return(g>>>24|g>>>8&65280|g<<8&16711680|(255&g)<<24)>>>0}function me(g){return 1===g.length?"0"+g:g}function Ze(g){return 7===g.length?"0"+g:6===g.length?"00"+g:5===g.length?"000"+g:4===g.length?"0000"+g:3===g.length?"00000"+g:2===g.length?"000000"+g:1===g.length?"0000000"+g:g}re.inherits=ae,re.toArray=function(g,I){if(Array.isArray(g))return g.slice();if(!g)return[];var A=[];if("string"==typeof g)if(I){if("hex"===I)for((g=g.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(g="0"+g),t=0;t<g.length;t+=2)A.push(parseInt(g[t]+g[t+1],16))}else for(var C=0,t=0;t<g.length;t++){var i=g.charCodeAt(t);i<128?A[C++]=i:i<2048?(A[C++]=i>>6|192,A[C++]=63&i|128):de(g,t)?(i=65536+((1023&i)<<10)+(1023&g.charCodeAt(++t)),A[C++]=i>>18|240,A[C++]=i>>12&63|128,A[C++]=i>>6&63|128,A[C++]=63&i|128):(A[C++]=i>>12|224,A[C++]=i>>6&63|128,A[C++]=63&i|128)}else for(t=0;t<g.length;t++)A[t]=0|g[t];return A},re.toHex=function(g){for(var I="",A=0;A<g.length;A++)I+=me(g[A].toString(16));return I},re.htonl=he,re.toHex32=function(g,I){for(var A="",C=0;C<g.length;C++){var t=g[C];"little"===I&&(t=he(t)),A+=Ze(t.toString(16))}return A},re.zero2=me,re.zero8=Ze,re.join32=function(g,I,A,C){var t=A-I;ce(t%4==0);for(var i=new Array(t/4),e=0,o=I;e<i.length;e++,o+=4){var n;n="big"===C?g[o]<<24|g[o+1]<<16|g[o+2]<<8|g[o+3]:g[o+3]<<24|g[o+2]<<16|g[o+1]<<8|g[o],i[e]=n>>>0}return i},re.split32=function(g,I){for(var A=new Array(4*g.length),C=0,t=0;C<g.length;C++,t+=4){var i=g[C];"big"===I?(A[t]=i>>>24,A[t+1]=i>>>16&255,A[t+2]=i>>>8&255,A[t+3]=255&i):(A[t+3]=i>>>24,A[t+2]=i>>>16&255,A[t+1]=i>>>8&255,A[t]=255&i)}return A},re.rotr32=function(g,I){return g>>>I|g<<32-I},re.rotl32=function(g,I){return g<<I|g>>>32-I},re.sum32=function(g,I){return g+I>>>0},re.sum32_3=function(g,I,A){return g+I+A>>>0},re.sum32_4=function(g,I,A,C){return g+I+A+C>>>0},re.sum32_5=function(g,I,A,C,t){return g+I+A+C+t>>>0},re.sum64=function(g,I,A,C){var t=g[I],i=C+g[I+1]>>>0,e=(i<C?1:0)+A+t;g[I]=e>>>0,g[I+1]=i},re.sum64_hi=function(g,I,A,C){return(I+C>>>0<I?1:0)+g+A>>>0},re.sum64_lo=function(g,I,A,C){return I+C>>>0},re.sum64_4_hi=function(g,I,A,C,t,i,e,o){var n=0,s=I;return n+=(s=s+C>>>0)<I?1:0,n+=(s=s+i>>>0)<i?1:0,g+A+t+e+(n+=(s=s+o>>>0)<o?1:0)>>>0},re.sum64_4_lo=function(g,I,A,C,t,i,e,o){return I+C+i+o>>>0},re.sum64_5_hi=function(g,I,A,C,t,i,e,o,n,s){var l=0,r=I;return l+=(r=r+C>>>0)<I?1:0,l+=(r=r+i>>>0)<i?1:0,l+=(r=r+o>>>0)<o?1:0,g+A+t+e+n+(l+=(r=r+s>>>0)<s?1:0)>>>0},re.sum64_5_lo=function(g,I,A,C,t,i,e,o,n,s){return I+C+i+o+s>>>0},re.rotr64_hi=function(g,I,A){return(I<<32-A|g>>>A)>>>0},re.rotr64_lo=function(g,I,A){return(g<<32-A|I>>>A)>>>0},re.shr64_hi=function(g,I,A){return g>>>A},re.shr64_lo=function(g,I,A){return(g<<32-A|I>>>A)>>>0};var ue={},Ge=re,be=Zi;function pe(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}ue.BlockHash=pe,pe.prototype.update=function(g,I){if(g=Ge.toArray(g,I),this.pending?this.pending=this.pending.concat(g):this.pending=g,this.pendingTotal+=g.length,this.pending.length>=this._delta8){var A=(g=this.pending).length%this._delta8;this.pending=g.slice(g.length-A,g.length),0===this.pending.length&&(this.pending=null),g=Ge.join32(g,0,g.length-A,this.endian);for(var C=0;C<g.length;C+=this._delta32)this._update(g,C,C+this._delta32)}return this},pe.prototype.digest=function(g){return this.update(this._pad()),be(null===this.pending),this._digest(g)},pe.prototype._pad=function(){var g=this.pendingTotal,I=this._delta8,A=I-(g+this.padLength)%I,C=new Array(A+this.padLength);C[0]=128;for(var t=1;t<A;t++)C[t]=0;if(g<<=3,"big"===this.endian){for(var i=8;i<this.padLength;i++)C[t++]=0;C[t++]=0,C[t++]=0,C[t++]=0,C[t++]=0,C[t++]=g>>>24&255,C[t++]=g>>>16&255,C[t++]=g>>>8&255,C[t++]=255&g}else for(C[t++]=255&g,C[t++]=g>>>8&255,C[t++]=g>>>16&255,C[t++]=g>>>24&255,C[t++]=0,C[t++]=0,C[t++]=0,C[t++]=0,i=8;i<this.padLength;i++)C[t++]=0;return C};var Be={},ye={},we=re.rotr32;function We(g,I,A){return g&I^~g&A}function Se(g,I,A){return g&I^g&A^I&A}function Ke(g,I,A){return g^I^A}ye.ft_1=function(g,I,A,C){return 0===g?We(I,A,C):1===g||3===g?Ke(I,A,C):2===g?Se(I,A,C):void 0},ye.ch32=We,ye.maj32=Se,ye.p32=Ke,ye.s0_256=function(g){return we(g,2)^we(g,13)^we(g,22)},ye.s1_256=function(g){return we(g,6)^we(g,11)^we(g,25)},ye.g0_256=function(g){return we(g,7)^we(g,18)^g>>>3},ye.g1_256=function(g){return we(g,17)^we(g,19)^g>>>10};var fe=re,Ye=ue,Xe=ye,Ve=fe.rotl32,Oe=fe.sum32,Re=fe.sum32_5,Qe=Xe.ft_1,He=Ye.BlockHash,ke=[1518500249,1859775393,2400959708,3395469782];function Je(){if(!(this instanceof Je))return new Je;He.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}fe.inherits(Je,He);var ve=Je;Je.blockSize=512,Je.outSize=160,Je.hmacStrength=80,Je.padLength=64,Je.prototype._update=function(g,I){for(var A=this.W,C=0;C<16;C++)A[C]=g[I+C];for(;C<A.length;C++)A[C]=Ve(A[C-3]^A[C-8]^A[C-14]^A[C-16],1);var t=this.h[0],i=this.h[1],e=this.h[2],o=this.h[3],n=this.h[4];for(C=0;C<A.length;C++){var s=~~(C/20),l=Re(Ve(t,5),Qe(s,i,e,o),n,A[C],ke[s]);n=o,o=e,e=Ve(i,30),i=t,t=l}this.h[0]=Oe(this.h[0],t),this.h[1]=Oe(this.h[1],i),this.h[2]=Oe(this.h[2],e),this.h[3]=Oe(this.h[3],o),this.h[4]=Oe(this.h[4],n)},Je.prototype._digest=function(g){return"hex"===g?fe.toHex32(this.h,"big"):fe.split32(this.h,"big")};var De=re,Me=ue,Ne=ye,Ee=Zi,Fe=De.sum32,Le=De.sum32_4,Te=De.sum32_5,ze=Ne.ch32,Pe=Ne.maj32,Ue=Ne.s0_256,xe=Ne.s1_256,je=Ne.g0_256,_e=Ne.g1_256,$e=Me.BlockHash,qe=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function go(){if(!(this instanceof go))return new go;$e.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=qe,this.W=new Array(64)}De.inherits(go,$e);var Io=go;go.blockSize=512,go.outSize=256,go.hmacStrength=192,go.padLength=64,go.prototype._update=function(g,I){for(var A=this.W,C=0;C<16;C++)A[C]=g[I+C];for(;C<A.length;C++)A[C]=Le(_e(A[C-2]),A[C-7],je(A[C-15]),A[C-16]);var t=this.h[0],i=this.h[1],e=this.h[2],o=this.h[3],n=this.h[4],s=this.h[5],l=this.h[6],r=this.h[7];for(Ee(this.k.length===A.length),C=0;C<A.length;C++){var c=Te(r,xe(n),ze(n,s,l),this.k[C],A[C]),a=Fe(Ue(t),Pe(t,i,e));r=l,l=s,s=n,n=Fe(o,c),o=e,e=i,i=t,t=Fe(c,a)}this.h[0]=Fe(this.h[0],t),this.h[1]=Fe(this.h[1],i),this.h[2]=Fe(this.h[2],e),this.h[3]=Fe(this.h[3],o),this.h[4]=Fe(this.h[4],n),this.h[5]=Fe(this.h[5],s),this.h[6]=Fe(this.h[6],l),this.h[7]=Fe(this.h[7],r)},go.prototype._digest=function(g){return"hex"===g?De.toHex32(this.h,"big"):De.split32(this.h,"big")};var Ao=re,Co=Io;function to(){if(!(this instanceof to))return new to;Co.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}Ao.inherits(to,Co);var io=to;to.blockSize=512,to.outSize=224,to.hmacStrength=192,to.padLength=64,to.prototype._digest=function(g){return"hex"===g?Ao.toHex32(this.h.slice(0,7),"big"):Ao.split32(this.h.slice(0,7),"big")};var eo=re,oo=ue,no=Zi,so=eo.rotr64_hi,lo=eo.rotr64_lo,ro=eo.shr64_hi,co=eo.shr64_lo,ao=eo.sum64,ho=eo.sum64_hi,mo=eo.sum64_lo,Zo=eo.sum64_4_hi,uo=eo.sum64_4_lo,Go=eo.sum64_5_hi,bo=eo.sum64_5_lo,po=oo.BlockHash,Bo=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function yo(){if(!(this instanceof yo))return new yo;po.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=Bo,this.W=new Array(160)}eo.inherits(yo,po);var wo=yo;function Wo(g,I,A,C,t){var i=g&A^~g&t;return i<0&&(i+=4294967296),i}function So(g,I,A,C,t,i){var e=I&C^~I&i;return e<0&&(e+=4294967296),e}function Ko(g,I,A,C,t){var i=g&A^g&t^A&t;return i<0&&(i+=4294967296),i}function fo(g,I,A,C,t,i){var e=I&C^I&i^C&i;return e<0&&(e+=4294967296),e}function Yo(g,I){var A=so(g,I,28)^so(I,g,2)^so(I,g,7);return A<0&&(A+=4294967296),A}function Xo(g,I){var A=lo(g,I,28)^lo(I,g,2)^lo(I,g,7);return A<0&&(A+=4294967296),A}function Vo(g,I){var A=so(g,I,14)^so(g,I,18)^so(I,g,9);return A<0&&(A+=4294967296),A}function Oo(g,I){var A=lo(g,I,14)^lo(g,I,18)^lo(I,g,9);return A<0&&(A+=4294967296),A}function Ro(g,I){var A=so(g,I,1)^so(g,I,8)^ro(g,I,7);return A<0&&(A+=4294967296),A}function Qo(g,I){var A=lo(g,I,1)^lo(g,I,8)^co(g,I,7);return A<0&&(A+=4294967296),A}function Ho(g,I){var A=so(g,I,19)^so(I,g,29)^ro(g,I,6);return A<0&&(A+=4294967296),A}function ko(g,I){var A=lo(g,I,19)^lo(I,g,29)^co(g,I,6);return A<0&&(A+=4294967296),A}yo.blockSize=1024,yo.outSize=512,yo.hmacStrength=192,yo.padLength=128,yo.prototype._prepareBlock=function(g,I){for(var A=this.W,C=0;C<32;C++)A[C]=g[I+C];for(;C<A.length;C+=2){var t=Ho(A[C-4],A[C-3]),i=ko(A[C-4],A[C-3]),e=A[C-14],o=A[C-13],n=Ro(A[C-30],A[C-29]),s=Qo(A[C-30],A[C-29]),l=A[C-32],r=A[C-31];A[C]=Zo(t,i,e,o,n,s,l,r),A[C+1]=uo(t,i,e,o,n,s,l,r)}},yo.prototype._update=function(g,I){this._prepareBlock(g,I);var A=this.W,C=this.h[0],t=this.h[1],i=this.h[2],e=this.h[3],o=this.h[4],n=this.h[5],s=this.h[6],l=this.h[7],r=this.h[8],c=this.h[9],a=this.h[10],d=this.h[11],h=this.h[12],m=this.h[13],Z=this.h[14],u=this.h[15];no(this.k.length===A.length);for(var G=0;G<A.length;G+=2){var b=Z,p=u,B=Vo(r,c),y=Oo(r,c),w=Wo(r,c,a,d,h),W=So(r,c,a,d,h,m),S=this.k[G],K=this.k[G+1],f=A[G],Y=A[G+1],X=Go(b,p,B,y,w,W,S,K,f,Y),V=bo(b,p,B,y,w,W,S,K,f,Y);b=Yo(C,t),p=Xo(C,t),B=Ko(C,t,i,e,o),y=fo(C,t,i,e,o,n);var O=ho(b,p,B,y),R=mo(b,p,B,y);Z=h,u=m,h=a,m=d,a=r,d=c,r=ho(s,l,X,V),c=mo(l,l,X,V),s=o,l=n,o=i,n=e,i=C,e=t,C=ho(X,V,O,R),t=mo(X,V,O,R)}ao(this.h,0,C,t),ao(this.h,2,i,e),ao(this.h,4,o,n),ao(this.h,6,s,l),ao(this.h,8,r,c),ao(this.h,10,a,d),ao(this.h,12,h,m),ao(this.h,14,Z,u)},yo.prototype._digest=function(g){return"hex"===g?eo.toHex32(this.h,"big"):eo.split32(this.h,"big")};var Jo=re,vo=wo;function Do(){if(!(this instanceof Do))return new Do;vo.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}Jo.inherits(Do,vo);var Mo=Do;Do.blockSize=1024,Do.outSize=384,Do.hmacStrength=192,Do.padLength=128,Do.prototype._digest=function(g){return"hex"===g?Jo.toHex32(this.h.slice(0,12),"big"):Jo.split32(this.h.slice(0,12),"big")},Be.sha1=ve,Be.sha224=io,Be.sha256=Io,Be.sha384=Mo,Be.sha512=wo;var No={},Eo=re,Fo=ue,Lo=Eo.rotl32,To=Eo.sum32,zo=Eo.sum32_3,Po=Eo.sum32_4,Uo=Fo.BlockHash;function xo(){if(!(this instanceof xo))return new xo;Uo.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function jo(g,I,A,C){return g<=15?I^A^C:g<=31?I&A|~I&C:g<=47?(I|~A)^C:g<=63?I&C|A&~C:I^(A|~C)}function _o(g){return g<=15?0:g<=31?1518500249:g<=47?1859775393:g<=63?2400959708:2840853838}function $o(g){return g<=15?1352829926:g<=31?1548603684:g<=47?1836072691:g<=63?2053994217:0}Eo.inherits(xo,Uo),No.ripemd160=xo,xo.blockSize=512,xo.outSize=160,xo.hmacStrength=192,xo.padLength=64,xo.prototype._update=function(g,I){for(var A=this.h[0],C=this.h[1],t=this.h[2],i=this.h[3],e=this.h[4],o=A,n=C,s=t,l=i,r=e,c=0;c<80;c++){var a=To(Lo(Po(A,jo(c,C,t,i),g[qo[c]+I],_o(c)),In[c]),e);A=e,e=i,i=Lo(t,10),t=C,C=a,a=To(Lo(Po(o,jo(79-c,n,s,l),g[gn[c]+I],$o(c)),An[c]),r),o=r,r=l,l=Lo(s,10),s=n,n=a}a=zo(this.h[1],t,l),this.h[1]=zo(this.h[2],i,r),this.h[2]=zo(this.h[3],e,o),this.h[3]=zo(this.h[4],A,n),this.h[4]=zo(this.h[0],C,s),this.h[0]=a},xo.prototype._digest=function(g){return"hex"===g?Eo.toHex32(this.h,"little"):Eo.split32(this.h,"little")};var qo=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],gn=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],In=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],An=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],Cn=re,tn=Zi;function en(g,I,A){if(!(this instanceof en))return new en(g,I,A);this.Hash=g,this.blockSize=g.blockSize/8,this.outSize=g.outSize/8,this.inner=null,this.outer=null,this._init(Cn.toArray(I,A))}var on=en;en.prototype._init=function(g){g.length>this.blockSize&&(g=(new this.Hash).update(g).digest()),tn(g.length<=this.blockSize);for(var I=g.length;I<this.blockSize;I++)g.push(0);for(I=0;I<g.length;I++)g[I]^=54;for(this.inner=(new this.Hash).update(g),I=0;I<g.length;I++)g[I]^=106;this.outer=(new this.Hash).update(g)},en.prototype.update=function(g,I){return this.inner.update(g,I),this},en.prototype.digest=function(g){return this.outer.update(this.inner.digest()),this.outer.digest(g)},function(g){var I=g;I.utils=re,I.common=ue,I.sha=Be,I.ripemd=No,I.hmac=on,I.sha1=I.sha.sha1,I.sha256=I.sha.sha256,I.sha224=I.sha.sha224,I.sha384=I.sha.sha384,I.sha512=I.sha.sha512,I.ripemd160=I.ripemd.ripemd160}(le),function(g){var I,A=g,C=le,t=Ki,i=hi.assert;function e(g){"short"===g.type?this.curve=new t.short(g):"edwards"===g.type?this.curve=new t.edwards(g):this.curve=new t.mont(g),this.g=this.curve.g,this.n=this.curve.n,this.hash=g.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function o(g,I){Object.defineProperty(A,g,{configurable:!0,enumerable:!0,get:function(){var C=new e(I);return Object.defineProperty(A,g,{configurable:!0,enumerable:!0,value:C}),C}})}A.PresetCurve=e,o("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:C.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),o("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:C.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),o("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:C.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),o("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:C.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),o("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:C.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),o("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:C.sha256,gRed:!1,g:["9"]}),o("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:C.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{I=require("./precomputed/secp256k1")}catch(dD){I=void 0}o("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:C.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",I]})}(se);var nn=le,sn=Bi,ln=Zi;function rn(g){if(!(this instanceof rn))return new rn(g);this.hash=g.hash,this.predResist=!!g.predResist,this.outLen=this.hash.outSize,this.minEntropy=g.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var I=sn.toArray(g.entropy,g.entropyEnc||"hex"),A=sn.toArray(g.nonce,g.nonceEnc||"hex"),C=sn.toArray(g.pers,g.persEnc||"hex");ln(I.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(I,A,C)}var cn=rn;rn.prototype._init=function(g,I,A){var C=g.concat(I).concat(A);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var t=0;t<this.V.length;t++)this.K[t]=0,this.V[t]=1;this._update(C),this._reseed=1,this.reseedInterval=281474976710656},rn.prototype._hmac=function(){return new nn.hmac(this.hash,this.K)},rn.prototype._update=function(g){var I=this._hmac().update(this.V).update([0]);g&&(I=I.update(g)),this.K=I.digest(),this.V=this._hmac().update(this.V).digest(),g&&(this.K=this._hmac().update(this.V).update([1]).update(g).digest(),this.V=this._hmac().update(this.V).digest())},rn.prototype.reseed=function(g,I,A,C){"string"!=typeof I&&(C=A,A=I,I=null),g=sn.toArray(g,I),A=sn.toArray(A,C),ln(g.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(g.concat(A||[])),this._reseed=1},rn.prototype.generate=function(g,I,A,C){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof I&&(C=A,A=I,I=null),A&&(A=sn.toArray(A,C||"hex"),this._update(A));for(var t=[];t.length<g;)this.V=this._hmac().update(this.V).digest(),t=t.concat(this.V);var i=t.slice(0,g);return this._update(A),this._reseed++,sn.encode(i,I)};var an=mi.exports,dn=hi.assert;function hn(g,I){this.ec=g,this.priv=null,this.pub=null,I.priv&&this._importPrivate(I.priv,I.privEnc),I.pub&&this._importPublic(I.pub,I.pubEnc)}var mn=hn;hn.fromPublic=function(g,I,A){return I instanceof hn?I:new hn(g,{pub:I,pubEnc:A})},hn.fromPrivate=function(g,I,A){return I instanceof hn?I:new hn(g,{priv:I,privEnc:A})},hn.prototype.validate=function(){var g=this.getPublic();return g.isInfinity()?{result:!1,reason:"Invalid public key"}:g.validate()?g.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},hn.prototype.getPublic=function(g,I){return"string"==typeof g&&(I=g,g=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),I?this.pub.encode(I,g):this.pub},hn.prototype.getPrivate=function(g){return"hex"===g?this.priv.toString(16,2):this.priv},hn.prototype._importPrivate=function(g,I){this.priv=new an(g,I||16),this.priv=this.priv.umod(this.ec.curve.n)},hn.prototype._importPublic=function(g,I){if(g.x||g.y)return"mont"===this.ec.curve.type?dn(g.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||dn(g.x&&g.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(g.x,g.y));this.pub=this.ec.curve.decodePoint(g,I)},hn.prototype.derive=function(g){return g.validate()||dn(g.validate(),"public point not validated"),g.mul(this.priv).getX()},hn.prototype.sign=function(g,I,A){return this.ec.sign(g,this,I,A)},hn.prototype.verify=function(g,I){return this.ec.verify(g,I,this)},hn.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var Zn=mi.exports,un=hi,Gn=un.assert;function bn(g,I){if(g instanceof bn)return g;this._importDER(g,I)||(Gn(g.r&&g.s,"Signature without r or s"),this.r=new Zn(g.r,16),this.s=new Zn(g.s,16),void 0===g.recoveryParam?this.recoveryParam=null:this.recoveryParam=g.recoveryParam)}var pn=bn;function Bn(){this.place=0}function yn(g,I){var A=g[I.place++];if(!(128&A))return A;var C=15&A;if(0===C||C>4)return!1;for(var t=0,i=0,e=I.place;i<C;i++,e++)t<<=8,t|=g[e],t>>>=0;return!(t<=127)&&(I.place=e,t)}function wn(g){for(var I=0,A=g.length-1;!g[I]&&!(128&g[I+1])&&I<A;)I++;return 0===I?g:g.slice(I)}function Wn(g,I){if(I<128)g.push(I);else{var A=1+(Math.log(I)/Math.LN2>>>3);for(g.push(128|A);--A;)g.push(I>>>(A<<3)&255);g.push(I)}}bn.prototype._importDER=function(g,I){g=un.toArray(g,I);var A=new Bn;if(48!==g[A.place++])return!1;var C=yn(g,A);if(!1===C)return!1;if(C+A.place!==g.length)return!1;if(2!==g[A.place++])return!1;var t=yn(g,A);if(!1===t)return!1;var i=g.slice(A.place,t+A.place);if(A.place+=t,2!==g[A.place++])return!1;var e=yn(g,A);if(!1===e)return!1;if(g.length!==e+A.place)return!1;var o=g.slice(A.place,e+A.place);if(0===i[0]){if(!(128&i[1]))return!1;i=i.slice(1)}if(0===o[0]){if(!(128&o[1]))return!1;o=o.slice(1)}return this.r=new Zn(i),this.s=new Zn(o),this.recoveryParam=null,!0},bn.prototype.toDER=function(g){var I=this.r.toArray(),A=this.s.toArray();for(128&I[0]&&(I=[0].concat(I)),128&A[0]&&(A=[0].concat(A)),I=wn(I),A=wn(A);!(A[0]||128&A[1]);)A=A.slice(1);var C=[2];Wn(C,I.length),(C=C.concat(I)).push(2),Wn(C,A.length);var t=C.concat(A),i=[48];return Wn(i,t.length),i=i.concat(t),un.encode(i,g)};var Sn=mi.exports,Kn=cn,fn=hi,Yn=se,Xn=wi.exports,Vn=fn.assert,On=mn,Rn=pn;function Qn(g){if(!(this instanceof Qn))return new Qn(g);"string"==typeof g&&(Vn(Object.prototype.hasOwnProperty.call(Yn,g),"Unknown curve "+g),g=Yn[g]),g instanceof Yn.PresetCurve&&(g={curve:g}),this.curve=g.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=g.curve.g,this.g.precompute(g.curve.n.bitLength()+1),this.hash=g.hash||g.curve.hash}var Hn=Qn;Qn.prototype.keyPair=function(g){return new On(this,g)},Qn.prototype.keyFromPrivate=function(g,I){return On.fromPrivate(this,g,I)},Qn.prototype.keyFromPublic=function(g,I){return On.fromPublic(this,g,I)},Qn.prototype.genKeyPair=function(g){g||(g={});for(var I=new Kn({hash:this.hash,pers:g.pers,persEnc:g.persEnc||"utf8",entropy:g.entropy||Xn(this.hash.hmacStrength),entropyEnc:g.entropy&&g.entropyEnc||"utf8",nonce:this.n.toArray()}),A=this.n.byteLength(),C=this.n.sub(new Sn(2));;){var t=new Sn(I.generate(A));if(!(t.cmp(C)>0))return t.iaddn(1),this.keyFromPrivate(t)}},Qn.prototype._truncateToN=function(g,I){var A=8*g.byteLength()-this.n.bitLength();return A>0&&(g=g.ushrn(A)),!I&&g.cmp(this.n)>=0?g.sub(this.n):g},Qn.prototype.sign=function(g,I,A,C){"object"==typeof A&&(C=A,A=null),C||(C={}),I=this.keyFromPrivate(I,A),g=this._truncateToN(new Sn(g,16));for(var t=this.n.byteLength(),i=I.getPrivate().toArray("be",t),e=g.toArray("be",t),o=new Kn({hash:this.hash,entropy:i,nonce:e,pers:C.pers,persEnc:C.persEnc||"utf8"}),n=this.n.sub(new Sn(1)),s=0;;s++){var l=C.k?C.k(s):new Sn(o.generate(this.n.byteLength()));if(!((l=this._truncateToN(l,!0)).cmpn(1)<=0||l.cmp(n)>=0)){var r=this.g.mul(l);if(!r.isInfinity()){var c=r.getX(),a=c.umod(this.n);if(0!==a.cmpn(0)){var d=l.invm(this.n).mul(a.mul(I.getPrivate()).iadd(g));if(0!==(d=d.umod(this.n)).cmpn(0)){var h=(r.getY().isOdd()?1:0)|(0!==c.cmp(a)?2:0);return C.canonical&&d.cmp(this.nh)>0&&(d=this.n.sub(d),h^=1),new Rn({r:a,s:d,recoveryParam:h})}}}}}},Qn.prototype.verify=function(g,I,A,C){g=this._truncateToN(new Sn(g,16)),A=this.keyFromPublic(A,C);var t=(I=new Rn(I,"hex")).r,i=I.s;if(t.cmpn(1)<0||t.cmp(this.n)>=0)return!1;if(i.cmpn(1)<0||i.cmp(this.n)>=0)return!1;var e,o=i.invm(this.n),n=o.mul(g).umod(this.n),s=o.mul(t).umod(this.n);return this.curve._maxwellTrick?!(e=this.g.jmulAdd(n,A.getPublic(),s)).isInfinity()&&e.eqXToP(t):!(e=this.g.mulAdd(n,A.getPublic(),s)).isInfinity()&&0===e.getX().umod(this.n).cmp(t)},Qn.prototype.recoverPubKey=function(g,I,A,C){Vn((3&A)===A,"The recovery param is more than two bits"),I=new Rn(I,C);var t=this.n,i=new Sn(g),e=I.r,o=I.s,n=1&A,s=A>>1;if(e.cmp(this.curve.p.umod(this.curve.n))>=0&&s)throw new Error("Unable to find sencond key candinate");e=s?this.curve.pointFromX(e.add(this.curve.n),n):this.curve.pointFromX(e,n);var l=I.r.invm(t),r=t.sub(i).mul(l).umod(t),c=o.mul(l).umod(t);return this.g.mulAdd(r,e,c)},Qn.prototype.getKeyRecoveryParam=function(g,I,A,C){if(null!==(I=new Rn(I,C)).recoveryParam)return I.recoveryParam;for(var t=0;t<4;t++){var i;try{i=this.recoverPubKey(g,I,t)}catch(e){continue}if(i.eq(A))return t}throw new Error("Unable to find valid recovery factor")};var kn=hi,Jn=kn.assert,vn=kn.parseBytes,Dn=kn.cachedProperty;function Mn(g,I){this.eddsa=g,this._secret=vn(I.secret),g.isPoint(I.pub)?this._pub=I.pub:this._pubBytes=vn(I.pub)}Mn.fromPublic=function(g,I){return I instanceof Mn?I:new Mn(g,{pub:I})},Mn.fromSecret=function(g,I){return I instanceof Mn?I:new Mn(g,{secret:I})},Mn.prototype.secret=function(){return this._secret},Dn(Mn,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),Dn(Mn,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),Dn(Mn,"privBytes",(function(){var g=this.eddsa,I=this.hash(),A=g.encodingLength-1,C=I.slice(0,g.encodingLength);return C[0]&=248,C[A]&=127,C[A]|=64,C})),Dn(Mn,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),Dn(Mn,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),Dn(Mn,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),Mn.prototype.sign=function(g){return Jn(this._secret,"KeyPair can only verify"),this.eddsa.sign(g,this)},Mn.prototype.verify=function(g,I){return this.eddsa.verify(g,I,this)},Mn.prototype.getSecret=function(g){return Jn(this._secret,"KeyPair is public only"),kn.encode(this.secret(),g)},Mn.prototype.getPublic=function(g){return kn.encode(this.pubBytes(),g)};var Nn=Mn,En=mi.exports,Fn=hi,Ln=Fn.assert,Tn=Fn.cachedProperty,zn=Fn.parseBytes;function Pn(g,I){this.eddsa=g,"object"!=typeof I&&(I=zn(I)),Array.isArray(I)&&(I={R:I.slice(0,g.encodingLength),S:I.slice(g.encodingLength)}),Ln(I.R&&I.S,"Signature without R or S"),g.isPoint(I.R)&&(this._R=I.R),I.S instanceof En&&(this._S=I.S),this._Rencoded=Array.isArray(I.R)?I.R:I.Rencoded,this._Sencoded=Array.isArray(I.S)?I.S:I.Sencoded}Tn(Pn,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),Tn(Pn,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),Tn(Pn,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),Tn(Pn,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),Pn.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},Pn.prototype.toHex=function(){return Fn.encode(this.toBytes(),"hex").toUpperCase()};var Un=Pn,xn=le,jn=se,_n=hi,$n=_n.assert,qn=_n.parseBytes,gs=Nn,Is=Un;function As(g){if($n("ed25519"===g,"only tested with ed25519 so far"),!(this instanceof As))return new As(g);g=jn[g].curve,this.curve=g,this.g=g.g,this.g.precompute(g.n.bitLength()+1),this.pointClass=g.point().constructor,this.encodingLength=Math.ceil(g.n.bitLength()/8),this.hash=xn.sha512}var Cs=As;As.prototype.sign=function(g,I){g=qn(g);var A=this.keyFromSecret(I),C=this.hashInt(A.messagePrefix(),g),t=this.g.mul(C),i=this.encodePoint(t),e=this.hashInt(i,A.pubBytes(),g).mul(A.priv()),o=C.add(e).umod(this.curve.n);return this.makeSignature({R:t,S:o,Rencoded:i})},As.prototype.verify=function(g,I,A){g=qn(g),I=this.makeSignature(I);var C=this.keyFromPublic(A),t=this.hashInt(I.Rencoded(),C.pubBytes(),g),i=this.g.mul(I.S());return I.R().add(C.pub().mul(t)).eq(i)},As.prototype.hashInt=function(){for(var g=this.hash(),I=0;I<arguments.length;I++)g.update(arguments[I]);return _n.intFromLE(g.digest()).umod(this.curve.n)},As.prototype.keyFromPublic=function(g){return gs.fromPublic(this,g)},As.prototype.keyFromSecret=function(g){return gs.fromSecret(this,g)},As.prototype.makeSignature=function(g){return g instanceof Is?g:new Is(this,g)},As.prototype.encodePoint=function(g){var I=g.getY().toArray("le",this.encodingLength);return I[this.encodingLength-1]|=g.getX().isOdd()?128:0,I},As.prototype.decodePoint=function(g){var I=(g=_n.parseBytes(g)).length-1,A=g.slice(0,I).concat(-129&g[I]),C=0!=(128&g[I]),t=_n.intFromLE(A);return this.curve.pointFromY(t,C)},As.prototype.encodeInt=function(g){return g.toArray("le",this.encodingLength)},As.prototype.decodeInt=function(g){return _n.intFromLE(g)},As.prototype.isPoint=function(g){return g instanceof this.pointClass},function(g){var I=g;I.version=di,I.utils=hi,I.rand=wi.exports,I.curve=Ki,I.curves=se,I.ec=Hn,I.eddsa=Cs}(ai);var ts={exports:{}};!function(g){!function(g,I){function A(g,I){if(!g)throw new Error(I||"Assertion failed")}function C(g,I){g.super_=I;var A=function(){};A.prototype=I.prototype,g.prototype=new A,g.prototype.constructor=g}function t(g,I,A){if(t.isBN(g))return g;this.negative=0,this.words=null,this.length=0,this.red=null,null!==g&&("le"!==I&&"be"!==I||(A=I,I=10),this._init(g||0,I||10,A||"be"))}var i;"object"==typeof g?g.exports=t:I.BN=t,t.BN=t,t.wordSize=26;try{i="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:require("buffer").Buffer}catch(dD){}function e(g,I){var A=g.charCodeAt(I);return A>=65&&A<=70?A-55:A>=97&&A<=102?A-87:A-48&15}function o(g,I,A){var C=e(g,A);return A-1>=I&&(C|=e(g,A-1)<<4),C}function n(g,I,A,C){for(var t=0,i=Math.min(g.length,A),e=I;e<i;e++){var o=g.charCodeAt(e)-48;t*=C,t+=o>=49?o-49+10:o>=17?o-17+10:o}return t}t.isBN=function(g){return g instanceof t||null!==g&&"object"==typeof g&&g.constructor.wordSize===t.wordSize&&Array.isArray(g.words)},t.max=function(g,I){return g.cmp(I)>0?g:I},t.min=function(g,I){return g.cmp(I)<0?g:I},t.prototype._init=function(g,I,C){if("number"==typeof g)return this._initNumber(g,I,C);if("object"==typeof g)return this._initArray(g,I,C);"hex"===I&&(I=16),A(I===(0|I)&&I>=2&&I<=36);var t=0;"-"===(g=g.toString().replace(/\s+/g,""))[0]&&(t++,this.negative=1),t<g.length&&(16===I?this._parseHex(g,t,C):(this._parseBase(g,I,t),"le"===C&&this._initArray(this.toArray(),I,C)))},t.prototype._initNumber=function(g,I,C){g<0&&(this.negative=1,g=-g),g<67108864?(this.words=[67108863&g],this.length=1):g<4503599627370496?(this.words=[67108863&g,g/67108864&67108863],this.length=2):(A(g<9007199254740992),this.words=[67108863&g,g/67108864&67108863,1],this.length=3),"le"===C&&this._initArray(this.toArray(),I,C)},t.prototype._initArray=function(g,I,C){if(A("number"==typeof g.length),g.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(g.length/3),this.words=new Array(this.length);for(var t=0;t<this.length;t++)this.words[t]=0;var i,e,o=0;if("be"===C)for(t=g.length-1,i=0;t>=0;t-=3)e=g[t]|g[t-1]<<8|g[t-2]<<16,this.words[i]|=e<<o&67108863,this.words[i+1]=e>>>26-o&67108863,(o+=24)>=26&&(o-=26,i++);else if("le"===C)for(t=0,i=0;t<g.length;t+=3)e=g[t]|g[t+1]<<8|g[t+2]<<16,this.words[i]|=e<<o&67108863,this.words[i+1]=e>>>26-o&67108863,(o+=24)>=26&&(o-=26,i++);return this.strip()},t.prototype._parseHex=function(g,I,A){this.length=Math.ceil((g.length-I)/6),this.words=new Array(this.length);for(var C=0;C<this.length;C++)this.words[C]=0;var t,i=0,e=0;if("be"===A)for(C=g.length-1;C>=I;C-=2)t=o(g,I,C)<<i,this.words[e]|=67108863&t,i>=18?(i-=18,e+=1,this.words[e]|=t>>>26):i+=8;else for(C=(g.length-I)%2==0?I+1:I;C<g.length;C+=2)t=o(g,I,C)<<i,this.words[e]|=67108863&t,i>=18?(i-=18,e+=1,this.words[e]|=t>>>26):i+=8;this.strip()},t.prototype._parseBase=function(g,I,A){this.words=[0],this.length=1;for(var C=0,t=1;t<=67108863;t*=I)C++;C--,t=t/I|0;for(var i=g.length-A,e=i%C,o=Math.min(i,i-e)+A,s=0,l=A;l<o;l+=C)s=n(g,l,l+C,I),this.imuln(t),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s);if(0!==e){var r=1;for(s=n(g,l,g.length,I),l=0;l<e;l++)r*=I;this.imuln(r),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s)}this.strip()},t.prototype.copy=function(g){g.words=new Array(this.length);for(var I=0;I<this.length;I++)g.words[I]=this.words[I];g.length=this.length,g.negative=this.negative,g.red=this.red},t.prototype.clone=function(){var g=new t(null);return this.copy(g),g},t.prototype._expand=function(g){for(;this.length<g;)this.words[this.length++]=0;return this},t.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},t.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},t.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var s=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],r=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function c(g,I,A){A.negative=I.negative^g.negative;var C=g.length+I.length|0;A.length=C,C=C-1|0;var t=0|g.words[0],i=0|I.words[0],e=t*i,o=67108863&e,n=e/67108864|0;A.words[0]=o;for(var s=1;s<C;s++){for(var l=n>>>26,r=67108863&n,c=Math.min(s,I.length-1),a=Math.max(0,s-g.length+1);a<=c;a++){var d=s-a|0;l+=(e=(t=0|g.words[d])*(i=0|I.words[a])+r)/67108864|0,r=67108863&e}A.words[s]=0|r,n=0|l}return 0!==n?A.words[s]=0|n:A.length--,A.strip()}t.prototype.toString=function(g,I){var C;if(I=0|I||1,16===(g=g||10)||"hex"===g){C="";for(var t=0,i=0,e=0;e<this.length;e++){var o=this.words[e],n=(16777215&(o<<t|i)).toString(16);C=0!==(i=o>>>24-t&16777215)||e!==this.length-1?s[6-n.length]+n+C:n+C,(t+=2)>=26&&(t-=26,e--)}for(0!==i&&(C=i.toString(16)+C);C.length%I!=0;)C="0"+C;return 0!==this.negative&&(C="-"+C),C}if(g===(0|g)&&g>=2&&g<=36){var c=l[g],a=r[g];C="";var d=this.clone();for(d.negative=0;!d.isZero();){var h=d.modn(a).toString(g);C=(d=d.idivn(a)).isZero()?h+C:s[c-h.length]+h+C}for(this.isZero()&&(C="0"+C);C.length%I!=0;)C="0"+C;return 0!==this.negative&&(C="-"+C),C}A(!1,"Base should be between 2 and 36")},t.prototype.toNumber=function(){var g=this.words[0];return 2===this.length?g+=67108864*this.words[1]:3===this.length&&1===this.words[2]?g+=4503599627370496+67108864*this.words[1]:this.length>2&&A(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-g:g},t.prototype.toJSON=function(){return this.toString(16)},t.prototype.toBuffer=function(g,I){return A(void 0!==i),this.toArrayLike(i,g,I)},t.prototype.toArray=function(g,I){return this.toArrayLike(Array,g,I)},t.prototype.toArrayLike=function(g,I,C){var t=this.byteLength(),i=C||Math.max(1,t);A(t<=i,"byte array longer than desired length"),A(i>0,"Requested array length <= 0"),this.strip();var e,o,n="le"===I,s=new g(i),l=this.clone();if(n){for(o=0;!l.isZero();o++)e=l.andln(255),l.iushrn(8),s[o]=e;for(;o<i;o++)s[o]=0}else{for(o=0;o<i-t;o++)s[o]=0;for(o=0;!l.isZero();o++)e=l.andln(255),l.iushrn(8),s[i-o-1]=e}return s},Math.clz32?t.prototype._countBits=function(g){return 32-Math.clz32(g)}:t.prototype._countBits=function(g){var I=g,A=0;return I>=4096&&(A+=13,I>>>=13),I>=64&&(A+=7,I>>>=7),I>=8&&(A+=4,I>>>=4),I>=2&&(A+=2,I>>>=2),A+I},t.prototype._zeroBits=function(g){if(0===g)return 26;var I=g,A=0;return 0==(8191&I)&&(A+=13,I>>>=13),0==(127&I)&&(A+=7,I>>>=7),0==(15&I)&&(A+=4,I>>>=4),0==(3&I)&&(A+=2,I>>>=2),0==(1&I)&&A++,A},t.prototype.bitLength=function(){var g=this.words[this.length-1],I=this._countBits(g);return 26*(this.length-1)+I},t.prototype.zeroBits=function(){if(this.isZero())return 0;for(var g=0,I=0;I<this.length;I++){var A=this._zeroBits(this.words[I]);if(g+=A,26!==A)break}return g},t.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},t.prototype.toTwos=function(g){return 0!==this.negative?this.abs().inotn(g).iaddn(1):this.clone()},t.prototype.fromTwos=function(g){return this.testn(g-1)?this.notn(g).iaddn(1).ineg():this.clone()},t.prototype.isNeg=function(){return 0!==this.negative},t.prototype.neg=function(){return this.clone().ineg()},t.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},t.prototype.iuor=function(g){for(;this.length<g.length;)this.words[this.length++]=0;for(var I=0;I<g.length;I++)this.words[I]=this.words[I]|g.words[I];return this.strip()},t.prototype.ior=function(g){return A(0==(this.negative|g.negative)),this.iuor(g)},t.prototype.or=function(g){return this.length>g.length?this.clone().ior(g):g.clone().ior(this)},t.prototype.uor=function(g){return this.length>g.length?this.clone().iuor(g):g.clone().iuor(this)},t.prototype.iuand=function(g){var I;I=this.length>g.length?g:this;for(var A=0;A<I.length;A++)this.words[A]=this.words[A]&g.words[A];return this.length=I.length,this.strip()},t.prototype.iand=function(g){return A(0==(this.negative|g.negative)),this.iuand(g)},t.prototype.and=function(g){return this.length>g.length?this.clone().iand(g):g.clone().iand(this)},t.prototype.uand=function(g){return this.length>g.length?this.clone().iuand(g):g.clone().iuand(this)},t.prototype.iuxor=function(g){var I,A;this.length>g.length?(I=this,A=g):(I=g,A=this);for(var C=0;C<A.length;C++)this.words[C]=I.words[C]^A.words[C];if(this!==I)for(;C<I.length;C++)this.words[C]=I.words[C];return this.length=I.length,this.strip()},t.prototype.ixor=function(g){return A(0==(this.negative|g.negative)),this.iuxor(g)},t.prototype.xor=function(g){return this.length>g.length?this.clone().ixor(g):g.clone().ixor(this)},t.prototype.uxor=function(g){return this.length>g.length?this.clone().iuxor(g):g.clone().iuxor(this)},t.prototype.inotn=function(g){A("number"==typeof g&&g>=0);var I=0|Math.ceil(g/26),C=g%26;this._expand(I),C>0&&I--;for(var t=0;t<I;t++)this.words[t]=67108863&~this.words[t];return C>0&&(this.words[t]=~this.words[t]&67108863>>26-C),this.strip()},t.prototype.notn=function(g){return this.clone().inotn(g)},t.prototype.setn=function(g,I){A("number"==typeof g&&g>=0);var C=g/26|0,t=g%26;return this._expand(C+1),this.words[C]=I?this.words[C]|1<<t:this.words[C]&~(1<<t),this.strip()},t.prototype.iadd=function(g){var I,A,C;if(0!==this.negative&&0===g.negative)return this.negative=0,I=this.isub(g),this.negative^=1,this._normSign();if(0===this.negative&&0!==g.negative)return g.negative=0,I=this.isub(g),g.negative=1,I._normSign();this.length>g.length?(A=this,C=g):(A=g,C=this);for(var t=0,i=0;i<C.length;i++)I=(0|A.words[i])+(0|C.words[i])+t,this.words[i]=67108863&I,t=I>>>26;for(;0!==t&&i<A.length;i++)I=(0|A.words[i])+t,this.words[i]=67108863&I,t=I>>>26;if(this.length=A.length,0!==t)this.words[this.length]=t,this.length++;else if(A!==this)for(;i<A.length;i++)this.words[i]=A.words[i];return this},t.prototype.add=function(g){var I;return 0!==g.negative&&0===this.negative?(g.negative=0,I=this.sub(g),g.negative^=1,I):0===g.negative&&0!==this.negative?(this.negative=0,I=g.sub(this),this.negative=1,I):this.length>g.length?this.clone().iadd(g):g.clone().iadd(this)},t.prototype.isub=function(g){if(0!==g.negative){g.negative=0;var I=this.iadd(g);return g.negative=1,I._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(g),this.negative=1,this._normSign();var A,C,t=this.cmp(g);if(0===t)return this.negative=0,this.length=1,this.words[0]=0,this;t>0?(A=this,C=g):(A=g,C=this);for(var i=0,e=0;e<C.length;e++)i=(I=(0|A.words[e])-(0|C.words[e])+i)>>26,this.words[e]=67108863&I;for(;0!==i&&e<A.length;e++)i=(I=(0|A.words[e])+i)>>26,this.words[e]=67108863&I;if(0===i&&e<A.length&&A!==this)for(;e<A.length;e++)this.words[e]=A.words[e];return this.length=Math.max(this.length,e),A!==this&&(this.negative=1),this.strip()},t.prototype.sub=function(g){return this.clone().isub(g)};var a=function(g,I,A){var C,t,i,e=g.words,o=I.words,n=A.words,s=0,l=0|e[0],r=8191&l,c=l>>>13,a=0|e[1],d=8191&a,h=a>>>13,m=0|e[2],Z=8191&m,u=m>>>13,G=0|e[3],b=8191&G,p=G>>>13,B=0|e[4],y=8191&B,w=B>>>13,W=0|e[5],S=8191&W,K=W>>>13,f=0|e[6],Y=8191&f,X=f>>>13,V=0|e[7],O=8191&V,R=V>>>13,Q=0|e[8],H=8191&Q,k=Q>>>13,J=0|e[9],v=8191&J,D=J>>>13,M=0|o[0],N=8191&M,E=M>>>13,F=0|o[1],L=8191&F,T=F>>>13,z=0|o[2],P=8191&z,U=z>>>13,x=0|o[3],j=8191&x,_=x>>>13,$=0|o[4],q=8191&$,gg=$>>>13,Ig=0|o[5],Ag=8191&Ig,Cg=Ig>>>13,tg=0|o[6],ig=8191&tg,eg=tg>>>13,og=0|o[7],ng=8191&og,sg=og>>>13,lg=0|o[8],rg=8191&lg,cg=lg>>>13,ag=0|o[9],dg=8191&ag,hg=ag>>>13;A.negative=g.negative^I.negative,A.length=19;var mg=(s+(C=Math.imul(r,N))|0)+((8191&(t=(t=Math.imul(r,E))+Math.imul(c,N)|0))<<13)|0;s=((i=Math.imul(c,E))+(t>>>13)|0)+(mg>>>26)|0,mg&=67108863,C=Math.imul(d,N),t=(t=Math.imul(d,E))+Math.imul(h,N)|0,i=Math.imul(h,E);var Zg=(s+(C=C+Math.imul(r,L)|0)|0)+((8191&(t=(t=t+Math.imul(r,T)|0)+Math.imul(c,L)|0))<<13)|0;s=((i=i+Math.imul(c,T)|0)+(t>>>13)|0)+(Zg>>>26)|0,Zg&=67108863,C=Math.imul(Z,N),t=(t=Math.imul(Z,E))+Math.imul(u,N)|0,i=Math.imul(u,E),C=C+Math.imul(d,L)|0,t=(t=t+Math.imul(d,T)|0)+Math.imul(h,L)|0,i=i+Math.imul(h,T)|0;var ug=(s+(C=C+Math.imul(r,P)|0)|0)+((8191&(t=(t=t+Math.imul(r,U)|0)+Math.imul(c,P)|0))<<13)|0;s=((i=i+Math.imul(c,U)|0)+(t>>>13)|0)+(ug>>>26)|0,ug&=67108863,C=Math.imul(b,N),t=(t=Math.imul(b,E))+Math.imul(p,N)|0,i=Math.imul(p,E),C=C+Math.imul(Z,L)|0,t=(t=t+Math.imul(Z,T)|0)+Math.imul(u,L)|0,i=i+Math.imul(u,T)|0,C=C+Math.imul(d,P)|0,t=(t=t+Math.imul(d,U)|0)+Math.imul(h,P)|0,i=i+Math.imul(h,U)|0;var Gg=(s+(C=C+Math.imul(r,j)|0)|0)+((8191&(t=(t=t+Math.imul(r,_)|0)+Math.imul(c,j)|0))<<13)|0;s=((i=i+Math.imul(c,_)|0)+(t>>>13)|0)+(Gg>>>26)|0,Gg&=67108863,C=Math.imul(y,N),t=(t=Math.imul(y,E))+Math.imul(w,N)|0,i=Math.imul(w,E),C=C+Math.imul(b,L)|0,t=(t=t+Math.imul(b,T)|0)+Math.imul(p,L)|0,i=i+Math.imul(p,T)|0,C=C+Math.imul(Z,P)|0,t=(t=t+Math.imul(Z,U)|0)+Math.imul(u,P)|0,i=i+Math.imul(u,U)|0,C=C+Math.imul(d,j)|0,t=(t=t+Math.imul(d,_)|0)+Math.imul(h,j)|0,i=i+Math.imul(h,_)|0;var bg=(s+(C=C+Math.imul(r,q)|0)|0)+((8191&(t=(t=t+Math.imul(r,gg)|0)+Math.imul(c,q)|0))<<13)|0;s=((i=i+Math.imul(c,gg)|0)+(t>>>13)|0)+(bg>>>26)|0,bg&=67108863,C=Math.imul(S,N),t=(t=Math.imul(S,E))+Math.imul(K,N)|0,i=Math.imul(K,E),C=C+Math.imul(y,L)|0,t=(t=t+Math.imul(y,T)|0)+Math.imul(w,L)|0,i=i+Math.imul(w,T)|0,C=C+Math.imul(b,P)|0,t=(t=t+Math.imul(b,U)|0)+Math.imul(p,P)|0,i=i+Math.imul(p,U)|0,C=C+Math.imul(Z,j)|0,t=(t=t+Math.imul(Z,_)|0)+Math.imul(u,j)|0,i=i+Math.imul(u,_)|0,C=C+Math.imul(d,q)|0,t=(t=t+Math.imul(d,gg)|0)+Math.imul(h,q)|0,i=i+Math.imul(h,gg)|0;var pg=(s+(C=C+Math.imul(r,Ag)|0)|0)+((8191&(t=(t=t+Math.imul(r,Cg)|0)+Math.imul(c,Ag)|0))<<13)|0;s=((i=i+Math.imul(c,Cg)|0)+(t>>>13)|0)+(pg>>>26)|0,pg&=67108863,C=Math.imul(Y,N),t=(t=Math.imul(Y,E))+Math.imul(X,N)|0,i=Math.imul(X,E),C=C+Math.imul(S,L)|0,t=(t=t+Math.imul(S,T)|0)+Math.imul(K,L)|0,i=i+Math.imul(K,T)|0,C=C+Math.imul(y,P)|0,t=(t=t+Math.imul(y,U)|0)+Math.imul(w,P)|0,i=i+Math.imul(w,U)|0,C=C+Math.imul(b,j)|0,t=(t=t+Math.imul(b,_)|0)+Math.imul(p,j)|0,i=i+Math.imul(p,_)|0,C=C+Math.imul(Z,q)|0,t=(t=t+Math.imul(Z,gg)|0)+Math.imul(u,q)|0,i=i+Math.imul(u,gg)|0,C=C+Math.imul(d,Ag)|0,t=(t=t+Math.imul(d,Cg)|0)+Math.imul(h,Ag)|0,i=i+Math.imul(h,Cg)|0;var Bg=(s+(C=C+Math.imul(r,ig)|0)|0)+((8191&(t=(t=t+Math.imul(r,eg)|0)+Math.imul(c,ig)|0))<<13)|0;s=((i=i+Math.imul(c,eg)|0)+(t>>>13)|0)+(Bg>>>26)|0,Bg&=67108863,C=Math.imul(O,N),t=(t=Math.imul(O,E))+Math.imul(R,N)|0,i=Math.imul(R,E),C=C+Math.imul(Y,L)|0,t=(t=t+Math.imul(Y,T)|0)+Math.imul(X,L)|0,i=i+Math.imul(X,T)|0,C=C+Math.imul(S,P)|0,t=(t=t+Math.imul(S,U)|0)+Math.imul(K,P)|0,i=i+Math.imul(K,U)|0,C=C+Math.imul(y,j)|0,t=(t=t+Math.imul(y,_)|0)+Math.imul(w,j)|0,i=i+Math.imul(w,_)|0,C=C+Math.imul(b,q)|0,t=(t=t+Math.imul(b,gg)|0)+Math.imul(p,q)|0,i=i+Math.imul(p,gg)|0,C=C+Math.imul(Z,Ag)|0,t=(t=t+Math.imul(Z,Cg)|0)+Math.imul(u,Ag)|0,i=i+Math.imul(u,Cg)|0,C=C+Math.imul(d,ig)|0,t=(t=t+Math.imul(d,eg)|0)+Math.imul(h,ig)|0,i=i+Math.imul(h,eg)|0;var yg=(s+(C=C+Math.imul(r,ng)|0)|0)+((8191&(t=(t=t+Math.imul(r,sg)|0)+Math.imul(c,ng)|0))<<13)|0;s=((i=i+Math.imul(c,sg)|0)+(t>>>13)|0)+(yg>>>26)|0,yg&=67108863,C=Math.imul(H,N),t=(t=Math.imul(H,E))+Math.imul(k,N)|0,i=Math.imul(k,E),C=C+Math.imul(O,L)|0,t=(t=t+Math.imul(O,T)|0)+Math.imul(R,L)|0,i=i+Math.imul(R,T)|0,C=C+Math.imul(Y,P)|0,t=(t=t+Math.imul(Y,U)|0)+Math.imul(X,P)|0,i=i+Math.imul(X,U)|0,C=C+Math.imul(S,j)|0,t=(t=t+Math.imul(S,_)|0)+Math.imul(K,j)|0,i=i+Math.imul(K,_)|0,C=C+Math.imul(y,q)|0,t=(t=t+Math.imul(y,gg)|0)+Math.imul(w,q)|0,i=i+Math.imul(w,gg)|0,C=C+Math.imul(b,Ag)|0,t=(t=t+Math.imul(b,Cg)|0)+Math.imul(p,Ag)|0,i=i+Math.imul(p,Cg)|0,C=C+Math.imul(Z,ig)|0,t=(t=t+Math.imul(Z,eg)|0)+Math.imul(u,ig)|0,i=i+Math.imul(u,eg)|0,C=C+Math.imul(d,ng)|0,t=(t=t+Math.imul(d,sg)|0)+Math.imul(h,ng)|0,i=i+Math.imul(h,sg)|0;var wg=(s+(C=C+Math.imul(r,rg)|0)|0)+((8191&(t=(t=t+Math.imul(r,cg)|0)+Math.imul(c,rg)|0))<<13)|0;s=((i=i+Math.imul(c,cg)|0)+(t>>>13)|0)+(wg>>>26)|0,wg&=67108863,C=Math.imul(v,N),t=(t=Math.imul(v,E))+Math.imul(D,N)|0,i=Math.imul(D,E),C=C+Math.imul(H,L)|0,t=(t=t+Math.imul(H,T)|0)+Math.imul(k,L)|0,i=i+Math.imul(k,T)|0,C=C+Math.imul(O,P)|0,t=(t=t+Math.imul(O,U)|0)+Math.imul(R,P)|0,i=i+Math.imul(R,U)|0,C=C+Math.imul(Y,j)|0,t=(t=t+Math.imul(Y,_)|0)+Math.imul(X,j)|0,i=i+Math.imul(X,_)|0,C=C+Math.imul(S,q)|0,t=(t=t+Math.imul(S,gg)|0)+Math.imul(K,q)|0,i=i+Math.imul(K,gg)|0,C=C+Math.imul(y,Ag)|0,t=(t=t+Math.imul(y,Cg)|0)+Math.imul(w,Ag)|0,i=i+Math.imul(w,Cg)|0,C=C+Math.imul(b,ig)|0,t=(t=t+Math.imul(b,eg)|0)+Math.imul(p,ig)|0,i=i+Math.imul(p,eg)|0,C=C+Math.imul(Z,ng)|0,t=(t=t+Math.imul(Z,sg)|0)+Math.imul(u,ng)|0,i=i+Math.imul(u,sg)|0,C=C+Math.imul(d,rg)|0,t=(t=t+Math.imul(d,cg)|0)+Math.imul(h,rg)|0,i=i+Math.imul(h,cg)|0;var Wg=(s+(C=C+Math.imul(r,dg)|0)|0)+((8191&(t=(t=t+Math.imul(r,hg)|0)+Math.imul(c,dg)|0))<<13)|0;s=((i=i+Math.imul(c,hg)|0)+(t>>>13)|0)+(Wg>>>26)|0,Wg&=67108863,C=Math.imul(v,L),t=(t=Math.imul(v,T))+Math.imul(D,L)|0,i=Math.imul(D,T),C=C+Math.imul(H,P)|0,t=(t=t+Math.imul(H,U)|0)+Math.imul(k,P)|0,i=i+Math.imul(k,U)|0,C=C+Math.imul(O,j)|0,t=(t=t+Math.imul(O,_)|0)+Math.imul(R,j)|0,i=i+Math.imul(R,_)|0,C=C+Math.imul(Y,q)|0,t=(t=t+Math.imul(Y,gg)|0)+Math.imul(X,q)|0,i=i+Math.imul(X,gg)|0,C=C+Math.imul(S,Ag)|0,t=(t=t+Math.imul(S,Cg)|0)+Math.imul(K,Ag)|0,i=i+Math.imul(K,Cg)|0,C=C+Math.imul(y,ig)|0,t=(t=t+Math.imul(y,eg)|0)+Math.imul(w,ig)|0,i=i+Math.imul(w,eg)|0,C=C+Math.imul(b,ng)|0,t=(t=t+Math.imul(b,sg)|0)+Math.imul(p,ng)|0,i=i+Math.imul(p,sg)|0,C=C+Math.imul(Z,rg)|0,t=(t=t+Math.imul(Z,cg)|0)+Math.imul(u,rg)|0,i=i+Math.imul(u,cg)|0;var Sg=(s+(C=C+Math.imul(d,dg)|0)|0)+((8191&(t=(t=t+Math.imul(d,hg)|0)+Math.imul(h,dg)|0))<<13)|0;s=((i=i+Math.imul(h,hg)|0)+(t>>>13)|0)+(Sg>>>26)|0,Sg&=67108863,C=Math.imul(v,P),t=(t=Math.imul(v,U))+Math.imul(D,P)|0,i=Math.imul(D,U),C=C+Math.imul(H,j)|0,t=(t=t+Math.imul(H,_)|0)+Math.imul(k,j)|0,i=i+Math.imul(k,_)|0,C=C+Math.imul(O,q)|0,t=(t=t+Math.imul(O,gg)|0)+Math.imul(R,q)|0,i=i+Math.imul(R,gg)|0,C=C+Math.imul(Y,Ag)|0,t=(t=t+Math.imul(Y,Cg)|0)+Math.imul(X,Ag)|0,i=i+Math.imul(X,Cg)|0,C=C+Math.imul(S,ig)|0,t=(t=t+Math.imul(S,eg)|0)+Math.imul(K,ig)|0,i=i+Math.imul(K,eg)|0,C=C+Math.imul(y,ng)|0,t=(t=t+Math.imul(y,sg)|0)+Math.imul(w,ng)|0,i=i+Math.imul(w,sg)|0,C=C+Math.imul(b,rg)|0,t=(t=t+Math.imul(b,cg)|0)+Math.imul(p,rg)|0,i=i+Math.imul(p,cg)|0;var Kg=(s+(C=C+Math.imul(Z,dg)|0)|0)+((8191&(t=(t=t+Math.imul(Z,hg)|0)+Math.imul(u,dg)|0))<<13)|0;s=((i=i+Math.imul(u,hg)|0)+(t>>>13)|0)+(Kg>>>26)|0,Kg&=67108863,C=Math.imul(v,j),t=(t=Math.imul(v,_))+Math.imul(D,j)|0,i=Math.imul(D,_),C=C+Math.imul(H,q)|0,t=(t=t+Math.imul(H,gg)|0)+Math.imul(k,q)|0,i=i+Math.imul(k,gg)|0,C=C+Math.imul(O,Ag)|0,t=(t=t+Math.imul(O,Cg)|0)+Math.imul(R,Ag)|0,i=i+Math.imul(R,Cg)|0,C=C+Math.imul(Y,ig)|0,t=(t=t+Math.imul(Y,eg)|0)+Math.imul(X,ig)|0,i=i+Math.imul(X,eg)|0,C=C+Math.imul(S,ng)|0,t=(t=t+Math.imul(S,sg)|0)+Math.imul(K,ng)|0,i=i+Math.imul(K,sg)|0,C=C+Math.imul(y,rg)|0,t=(t=t+Math.imul(y,cg)|0)+Math.imul(w,rg)|0,i=i+Math.imul(w,cg)|0;var fg=(s+(C=C+Math.imul(b,dg)|0)|0)+((8191&(t=(t=t+Math.imul(b,hg)|0)+Math.imul(p,dg)|0))<<13)|0;s=((i=i+Math.imul(p,hg)|0)+(t>>>13)|0)+(fg>>>26)|0,fg&=67108863,C=Math.imul(v,q),t=(t=Math.imul(v,gg))+Math.imul(D,q)|0,i=Math.imul(D,gg),C=C+Math.imul(H,Ag)|0,t=(t=t+Math.imul(H,Cg)|0)+Math.imul(k,Ag)|0,i=i+Math.imul(k,Cg)|0,C=C+Math.imul(O,ig)|0,t=(t=t+Math.imul(O,eg)|0)+Math.imul(R,ig)|0,i=i+Math.imul(R,eg)|0,C=C+Math.imul(Y,ng)|0,t=(t=t+Math.imul(Y,sg)|0)+Math.imul(X,ng)|0,i=i+Math.imul(X,sg)|0,C=C+Math.imul(S,rg)|0,t=(t=t+Math.imul(S,cg)|0)+Math.imul(K,rg)|0,i=i+Math.imul(K,cg)|0;var Yg=(s+(C=C+Math.imul(y,dg)|0)|0)+((8191&(t=(t=t+Math.imul(y,hg)|0)+Math.imul(w,dg)|0))<<13)|0;s=((i=i+Math.imul(w,hg)|0)+(t>>>13)|0)+(Yg>>>26)|0,Yg&=67108863,C=Math.imul(v,Ag),t=(t=Math.imul(v,Cg))+Math.imul(D,Ag)|0,i=Math.imul(D,Cg),C=C+Math.imul(H,ig)|0,t=(t=t+Math.imul(H,eg)|0)+Math.imul(k,ig)|0,i=i+Math.imul(k,eg)|0,C=C+Math.imul(O,ng)|0,t=(t=t+Math.imul(O,sg)|0)+Math.imul(R,ng)|0,i=i+Math.imul(R,sg)|0,C=C+Math.imul(Y,rg)|0,t=(t=t+Math.imul(Y,cg)|0)+Math.imul(X,rg)|0,i=i+Math.imul(X,cg)|0;var Xg=(s+(C=C+Math.imul(S,dg)|0)|0)+((8191&(t=(t=t+Math.imul(S,hg)|0)+Math.imul(K,dg)|0))<<13)|0;s=((i=i+Math.imul(K,hg)|0)+(t>>>13)|0)+(Xg>>>26)|0,Xg&=67108863,C=Math.imul(v,ig),t=(t=Math.imul(v,eg))+Math.imul(D,ig)|0,i=Math.imul(D,eg),C=C+Math.imul(H,ng)|0,t=(t=t+Math.imul(H,sg)|0)+Math.imul(k,ng)|0,i=i+Math.imul(k,sg)|0,C=C+Math.imul(O,rg)|0,t=(t=t+Math.imul(O,cg)|0)+Math.imul(R,rg)|0,i=i+Math.imul(R,cg)|0;var Vg=(s+(C=C+Math.imul(Y,dg)|0)|0)+((8191&(t=(t=t+Math.imul(Y,hg)|0)+Math.imul(X,dg)|0))<<13)|0;s=((i=i+Math.imul(X,hg)|0)+(t>>>13)|0)+(Vg>>>26)|0,Vg&=67108863,C=Math.imul(v,ng),t=(t=Math.imul(v,sg))+Math.imul(D,ng)|0,i=Math.imul(D,sg),C=C+Math.imul(H,rg)|0,t=(t=t+Math.imul(H,cg)|0)+Math.imul(k,rg)|0,i=i+Math.imul(k,cg)|0;var Og=(s+(C=C+Math.imul(O,dg)|0)|0)+((8191&(t=(t=t+Math.imul(O,hg)|0)+Math.imul(R,dg)|0))<<13)|0;s=((i=i+Math.imul(R,hg)|0)+(t>>>13)|0)+(Og>>>26)|0,Og&=67108863,C=Math.imul(v,rg),t=(t=Math.imul(v,cg))+Math.imul(D,rg)|0,i=Math.imul(D,cg);var Rg=(s+(C=C+Math.imul(H,dg)|0)|0)+((8191&(t=(t=t+Math.imul(H,hg)|0)+Math.imul(k,dg)|0))<<13)|0;s=((i=i+Math.imul(k,hg)|0)+(t>>>13)|0)+(Rg>>>26)|0,Rg&=67108863;var Qg=(s+(C=Math.imul(v,dg))|0)+((8191&(t=(t=Math.imul(v,hg))+Math.imul(D,dg)|0))<<13)|0;return s=((i=Math.imul(D,hg))+(t>>>13)|0)+(Qg>>>26)|0,Qg&=67108863,n[0]=mg,n[1]=Zg,n[2]=ug,n[3]=Gg,n[4]=bg,n[5]=pg,n[6]=Bg,n[7]=yg,n[8]=wg,n[9]=Wg,n[10]=Sg,n[11]=Kg,n[12]=fg,n[13]=Yg,n[14]=Xg,n[15]=Vg,n[16]=Og,n[17]=Rg,n[18]=Qg,0!==s&&(n[19]=s,A.length++),A};function d(g,I,A){return(new h).mulp(g,I,A)}function h(g,I){this.x=g,this.y=I}Math.imul||(a=c),t.prototype.mulTo=function(g,I){var A=this.length+g.length;return 10===this.length&&10===g.length?a(this,g,I):A<63?c(this,g,I):A<1024?function(g,I,A){A.negative=I.negative^g.negative,A.length=g.length+I.length;for(var C=0,t=0,i=0;i<A.length-1;i++){var e=t;t=0;for(var o=67108863&C,n=Math.min(i,I.length-1),s=Math.max(0,i-g.length+1);s<=n;s++){var l=i-s,r=(0|g.words[l])*(0|I.words[s]),c=67108863&r;o=67108863&(c=c+o|0),t+=(e=(e=e+(r/67108864|0)|0)+(c>>>26)|0)>>>26,e&=67108863}A.words[i]=o,C=e,e=t}return 0!==C?A.words[i]=C:A.length--,A.strip()}(this,g,I):d(this,g,I)},h.prototype.makeRBT=function(g){for(var I=new Array(g),A=t.prototype._countBits(g)-1,C=0;C<g;C++)I[C]=this.revBin(C,A,g);return I},h.prototype.revBin=function(g,I,A){if(0===g||g===A-1)return g;for(var C=0,t=0;t<I;t++)C|=(1&g)<<I-t-1,g>>=1;return C},h.prototype.permute=function(g,I,A,C,t,i){for(var e=0;e<i;e++)C[e]=I[g[e]],t[e]=A[g[e]]},h.prototype.transform=function(g,I,A,C,t,i){this.permute(i,g,I,A,C,t);for(var e=1;e<t;e<<=1)for(var o=e<<1,n=Math.cos(2*Math.PI/o),s=Math.sin(2*Math.PI/o),l=0;l<t;l+=o)for(var r=n,c=s,a=0;a<e;a++){var d=A[l+a],h=C[l+a],m=A[l+a+e],Z=C[l+a+e],u=r*m-c*Z;Z=r*Z+c*m,m=u,A[l+a]=d+m,C[l+a]=h+Z,A[l+a+e]=d-m,C[l+a+e]=h-Z,a!==o&&(u=n*r-s*c,c=n*c+s*r,r=u)}},h.prototype.guessLen13b=function(g,I){var A=1|Math.max(I,g),C=1&A,t=0;for(A=A/2|0;A;A>>>=1)t++;return 1<<t+1+C},h.prototype.conjugate=function(g,I,A){if(!(A<=1))for(var C=0;C<A/2;C++){var t=g[C];g[C]=g[A-C-1],g[A-C-1]=t,t=I[C],I[C]=-I[A-C-1],I[A-C-1]=-t}},h.prototype.normalize13b=function(g,I){for(var A=0,C=0;C<I/2;C++){var t=8192*Math.round(g[2*C+1]/I)+Math.round(g[2*C]/I)+A;g[C]=67108863&t,A=t<67108864?0:t/67108864|0}return g},h.prototype.convert13b=function(g,I,C,t){for(var i=0,e=0;e<I;e++)i+=0|g[e],C[2*e]=8191&i,i>>>=13,C[2*e+1]=8191&i,i>>>=13;for(e=2*I;e<t;++e)C[e]=0;A(0===i),A(0==(-8192&i))},h.prototype.stub=function(g){for(var I=new Array(g),A=0;A<g;A++)I[A]=0;return I},h.prototype.mulp=function(g,I,A){var C=2*this.guessLen13b(g.length,I.length),t=this.makeRBT(C),i=this.stub(C),e=new Array(C),o=new Array(C),n=new Array(C),s=new Array(C),l=new Array(C),r=new Array(C),c=A.words;c.length=C,this.convert13b(g.words,g.length,e,C),this.convert13b(I.words,I.length,s,C),this.transform(e,i,o,n,C,t),this.transform(s,i,l,r,C,t);for(var a=0;a<C;a++){var d=o[a]*l[a]-n[a]*r[a];n[a]=o[a]*r[a]+n[a]*l[a],o[a]=d}return this.conjugate(o,n,C),this.transform(o,n,c,i,C,t),this.conjugate(c,i,C),this.normalize13b(c,C),A.negative=g.negative^I.negative,A.length=g.length+I.length,A.strip()},t.prototype.mul=function(g){var I=new t(null);return I.words=new Array(this.length+g.length),this.mulTo(g,I)},t.prototype.mulf=function(g){var I=new t(null);return I.words=new Array(this.length+g.length),d(this,g,I)},t.prototype.imul=function(g){return this.clone().mulTo(g,this)},t.prototype.imuln=function(g){A("number"==typeof g),A(g<67108864);for(var I=0,C=0;C<this.length;C++){var t=(0|this.words[C])*g,i=(67108863&t)+(67108863&I);I>>=26,I+=t/67108864|0,I+=i>>>26,this.words[C]=67108863&i}return 0!==I&&(this.words[C]=I,this.length++),this},t.prototype.muln=function(g){return this.clone().imuln(g)},t.prototype.sqr=function(){return this.mul(this)},t.prototype.isqr=function(){return this.imul(this.clone())},t.prototype.pow=function(g){var I=function(g){for(var I=new Array(g.bitLength()),A=0;A<I.length;A++){var C=A/26|0,t=A%26;I[A]=(g.words[C]&1<<t)>>>t}return I}(g);if(0===I.length)return new t(1);for(var A=this,C=0;C<I.length&&0===I[C];C++,A=A.sqr());if(++C<I.length)for(var i=A.sqr();C<I.length;C++,i=i.sqr())0!==I[C]&&(A=A.mul(i));return A},t.prototype.iushln=function(g){A("number"==typeof g&&g>=0);var I,C=g%26,t=(g-C)/26,i=67108863>>>26-C<<26-C;if(0!==C){var e=0;for(I=0;I<this.length;I++){var o=this.words[I]&i,n=(0|this.words[I])-o<<C;this.words[I]=n|e,e=o>>>26-C}e&&(this.words[I]=e,this.length++)}if(0!==t){for(I=this.length-1;I>=0;I--)this.words[I+t]=this.words[I];for(I=0;I<t;I++)this.words[I]=0;this.length+=t}return this.strip()},t.prototype.ishln=function(g){return A(0===this.negative),this.iushln(g)},t.prototype.iushrn=function(g,I,C){var t;A("number"==typeof g&&g>=0),t=I?(I-I%26)/26:0;var i=g%26,e=Math.min((g-i)/26,this.length),o=67108863^67108863>>>i<<i,n=C;if(t-=e,t=Math.max(0,t),n){for(var s=0;s<e;s++)n.words[s]=this.words[s];n.length=e}if(0===e);else if(this.length>e)for(this.length-=e,s=0;s<this.length;s++)this.words[s]=this.words[s+e];else this.words[0]=0,this.length=1;var l=0;for(s=this.length-1;s>=0&&(0!==l||s>=t);s--){var r=0|this.words[s];this.words[s]=l<<26-i|r>>>i,l=r&o}return n&&0!==l&&(n.words[n.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},t.prototype.ishrn=function(g,I,C){return A(0===this.negative),this.iushrn(g,I,C)},t.prototype.shln=function(g){return this.clone().ishln(g)},t.prototype.ushln=function(g){return this.clone().iushln(g)},t.prototype.shrn=function(g){return this.clone().ishrn(g)},t.prototype.ushrn=function(g){return this.clone().iushrn(g)},t.prototype.testn=function(g){A("number"==typeof g&&g>=0);var I=g%26,C=(g-I)/26,t=1<<I;return!(this.length<=C)&&!!(this.words[C]&t)},t.prototype.imaskn=function(g){A("number"==typeof g&&g>=0);var I=g%26,C=(g-I)/26;if(A(0===this.negative,"imaskn works only with positive numbers"),this.length<=C)return this;if(0!==I&&C++,this.length=Math.min(C,this.length),0!==I){var t=67108863^67108863>>>I<<I;this.words[this.length-1]&=t}return this.strip()},t.prototype.maskn=function(g){return this.clone().imaskn(g)},t.prototype.iaddn=function(g){return A("number"==typeof g),A(g<67108864),g<0?this.isubn(-g):0!==this.negative?1===this.length&&(0|this.words[0])<g?(this.words[0]=g-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(g),this.negative=1,this):this._iaddn(g)},t.prototype._iaddn=function(g){this.words[0]+=g;for(var I=0;I<this.length&&this.words[I]>=67108864;I++)this.words[I]-=67108864,I===this.length-1?this.words[I+1]=1:this.words[I+1]++;return this.length=Math.max(this.length,I+1),this},t.prototype.isubn=function(g){if(A("number"==typeof g),A(g<67108864),g<0)return this.iaddn(-g);if(0!==this.negative)return this.negative=0,this.iaddn(g),this.negative=1,this;if(this.words[0]-=g,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var I=0;I<this.length&&this.words[I]<0;I++)this.words[I]+=67108864,this.words[I+1]-=1;return this.strip()},t.prototype.addn=function(g){return this.clone().iaddn(g)},t.prototype.subn=function(g){return this.clone().isubn(g)},t.prototype.iabs=function(){return this.negative=0,this},t.prototype.abs=function(){return this.clone().iabs()},t.prototype._ishlnsubmul=function(g,I,C){var t,i,e=g.length+C;this._expand(e);var o=0;for(t=0;t<g.length;t++){i=(0|this.words[t+C])+o;var n=(0|g.words[t])*I;o=((i-=67108863&n)>>26)-(n/67108864|0),this.words[t+C]=67108863&i}for(;t<this.length-C;t++)o=(i=(0|this.words[t+C])+o)>>26,this.words[t+C]=67108863&i;if(0===o)return this.strip();for(A(-1===o),o=0,t=0;t<this.length;t++)o=(i=-(0|this.words[t])+o)>>26,this.words[t]=67108863&i;return this.negative=1,this.strip()},t.prototype._wordDiv=function(g,I){var A=(this.length,g.length),C=this.clone(),i=g,e=0|i.words[i.length-1];0!==(A=26-this._countBits(e))&&(i=i.ushln(A),C.iushln(A),e=0|i.words[i.length-1]);var o,n=C.length-i.length;if("mod"!==I){(o=new t(null)).length=n+1,o.words=new Array(o.length);for(var s=0;s<o.length;s++)o.words[s]=0}var l=C.clone()._ishlnsubmul(i,1,n);0===l.negative&&(C=l,o&&(o.words[n]=1));for(var r=n-1;r>=0;r--){var c=67108864*(0|C.words[i.length+r])+(0|C.words[i.length+r-1]);for(c=Math.min(c/e|0,67108863),C._ishlnsubmul(i,c,r);0!==C.negative;)c--,C.negative=0,C._ishlnsubmul(i,1,r),C.isZero()||(C.negative^=1);o&&(o.words[r]=c)}return o&&o.strip(),C.strip(),"div"!==I&&0!==A&&C.iushrn(A),{div:o||null,mod:C}},t.prototype.divmod=function(g,I,C){return A(!g.isZero()),this.isZero()?{div:new t(0),mod:new t(0)}:0!==this.negative&&0===g.negative?(o=this.neg().divmod(g,I),"mod"!==I&&(i=o.div.neg()),"div"!==I&&(e=o.mod.neg(),C&&0!==e.negative&&e.iadd(g)),{div:i,mod:e}):0===this.negative&&0!==g.negative?(o=this.divmod(g.neg(),I),"mod"!==I&&(i=o.div.neg()),{div:i,mod:o.mod}):0!=(this.negative&g.negative)?(o=this.neg().divmod(g.neg(),I),"div"!==I&&(e=o.mod.neg(),C&&0!==e.negative&&e.isub(g)),{div:o.div,mod:e}):g.length>this.length||this.cmp(g)<0?{div:new t(0),mod:this}:1===g.length?"div"===I?{div:this.divn(g.words[0]),mod:null}:"mod"===I?{div:null,mod:new t(this.modn(g.words[0]))}:{div:this.divn(g.words[0]),mod:new t(this.modn(g.words[0]))}:this._wordDiv(g,I);var i,e,o},t.prototype.div=function(g){return this.divmod(g,"div",!1).div},t.prototype.mod=function(g){return this.divmod(g,"mod",!1).mod},t.prototype.umod=function(g){return this.divmod(g,"mod",!0).mod},t.prototype.divRound=function(g){var I=this.divmod(g);if(I.mod.isZero())return I.div;var A=0!==I.div.negative?I.mod.isub(g):I.mod,C=g.ushrn(1),t=g.andln(1),i=A.cmp(C);return i<0||1===t&&0===i?I.div:0!==I.div.negative?I.div.isubn(1):I.div.iaddn(1)},t.prototype.modn=function(g){A(g<=67108863);for(var I=(1<<26)%g,C=0,t=this.length-1;t>=0;t--)C=(I*C+(0|this.words[t]))%g;return C},t.prototype.idivn=function(g){A(g<=67108863);for(var I=0,C=this.length-1;C>=0;C--){var t=(0|this.words[C])+67108864*I;this.words[C]=t/g|0,I=t%g}return this.strip()},t.prototype.divn=function(g){return this.clone().idivn(g)},t.prototype.egcd=function(g){A(0===g.negative),A(!g.isZero());var I=this,C=g.clone();I=0!==I.negative?I.umod(g):I.clone();for(var i=new t(1),e=new t(0),o=new t(0),n=new t(1),s=0;I.isEven()&&C.isEven();)I.iushrn(1),C.iushrn(1),++s;for(var l=C.clone(),r=I.clone();!I.isZero();){for(var c=0,a=1;0==(I.words[0]&a)&&c<26;++c,a<<=1);if(c>0)for(I.iushrn(c);c-- >0;)(i.isOdd()||e.isOdd())&&(i.iadd(l),e.isub(r)),i.iushrn(1),e.iushrn(1);for(var d=0,h=1;0==(C.words[0]&h)&&d<26;++d,h<<=1);if(d>0)for(C.iushrn(d);d-- >0;)(o.isOdd()||n.isOdd())&&(o.iadd(l),n.isub(r)),o.iushrn(1),n.iushrn(1);I.cmp(C)>=0?(I.isub(C),i.isub(o),e.isub(n)):(C.isub(I),o.isub(i),n.isub(e))}return{a:o,b:n,gcd:C.iushln(s)}},t.prototype._invmp=function(g){A(0===g.negative),A(!g.isZero());var I=this,C=g.clone();I=0!==I.negative?I.umod(g):I.clone();for(var i,e=new t(1),o=new t(0),n=C.clone();I.cmpn(1)>0&&C.cmpn(1)>0;){for(var s=0,l=1;0==(I.words[0]&l)&&s<26;++s,l<<=1);if(s>0)for(I.iushrn(s);s-- >0;)e.isOdd()&&e.iadd(n),e.iushrn(1);for(var r=0,c=1;0==(C.words[0]&c)&&r<26;++r,c<<=1);if(r>0)for(C.iushrn(r);r-- >0;)o.isOdd()&&o.iadd(n),o.iushrn(1);I.cmp(C)>=0?(I.isub(C),e.isub(o)):(C.isub(I),o.isub(e))}return(i=0===I.cmpn(1)?e:o).cmpn(0)<0&&i.iadd(g),i},t.prototype.gcd=function(g){if(this.isZero())return g.abs();if(g.isZero())return this.abs();var I=this.clone(),A=g.clone();I.negative=0,A.negative=0;for(var C=0;I.isEven()&&A.isEven();C++)I.iushrn(1),A.iushrn(1);for(;;){for(;I.isEven();)I.iushrn(1);for(;A.isEven();)A.iushrn(1);var t=I.cmp(A);if(t<0){var i=I;I=A,A=i}else if(0===t||0===A.cmpn(1))break;I.isub(A)}return A.iushln(C)},t.prototype.invm=function(g){return this.egcd(g).a.umod(g)},t.prototype.isEven=function(){return 0==(1&this.words[0])},t.prototype.isOdd=function(){return 1==(1&this.words[0])},t.prototype.andln=function(g){return this.words[0]&g},t.prototype.bincn=function(g){A("number"==typeof g);var I=g%26,C=(g-I)/26,t=1<<I;if(this.length<=C)return this._expand(C+1),this.words[C]|=t,this;for(var i=t,e=C;0!==i&&e<this.length;e++){var o=0|this.words[e];i=(o+=i)>>>26,o&=67108863,this.words[e]=o}return 0!==i&&(this.words[e]=i,this.length++),this},t.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},t.prototype.cmpn=function(g){var I,C=g<0;if(0!==this.negative&&!C)return-1;if(0===this.negative&&C)return 1;if(this.strip(),this.length>1)I=1;else{C&&(g=-g),A(g<=67108863,"Number is too big");var t=0|this.words[0];I=t===g?0:t<g?-1:1}return 0!==this.negative?0|-I:I},t.prototype.cmp=function(g){if(0!==this.negative&&0===g.negative)return-1;if(0===this.negative&&0!==g.negative)return 1;var I=this.ucmp(g);return 0!==this.negative?0|-I:I},t.prototype.ucmp=function(g){if(this.length>g.length)return 1;if(this.length<g.length)return-1;for(var I=0,A=this.length-1;A>=0;A--){var C=0|this.words[A],t=0|g.words[A];if(C!==t){C<t?I=-1:C>t&&(I=1);break}}return I},t.prototype.gtn=function(g){return 1===this.cmpn(g)},t.prototype.gt=function(g){return 1===this.cmp(g)},t.prototype.gten=function(g){return this.cmpn(g)>=0},t.prototype.gte=function(g){return this.cmp(g)>=0},t.prototype.ltn=function(g){return-1===this.cmpn(g)},t.prototype.lt=function(g){return-1===this.cmp(g)},t.prototype.lten=function(g){return this.cmpn(g)<=0},t.prototype.lte=function(g){return this.cmp(g)<=0},t.prototype.eqn=function(g){return 0===this.cmpn(g)},t.prototype.eq=function(g){return 0===this.cmp(g)},t.red=function(g){return new B(g)},t.prototype.toRed=function(g){return A(!this.red,"Already a number in reduction context"),A(0===this.negative,"red works only with positives"),g.convertTo(this)._forceRed(g)},t.prototype.fromRed=function(){return A(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},t.prototype._forceRed=function(g){return this.red=g,this},t.prototype.forceRed=function(g){return A(!this.red,"Already a number in reduction context"),this._forceRed(g)},t.prototype.redAdd=function(g){return A(this.red,"redAdd works only with red numbers"),this.red.add(this,g)},t.prototype.redIAdd=function(g){return A(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,g)},t.prototype.redSub=function(g){return A(this.red,"redSub works only with red numbers"),this.red.sub(this,g)},t.prototype.redISub=function(g){return A(this.red,"redISub works only with red numbers"),this.red.isub(this,g)},t.prototype.redShl=function(g){return A(this.red,"redShl works only with red numbers"),this.red.shl(this,g)},t.prototype.redMul=function(g){return A(this.red,"redMul works only with red numbers"),this.red._verify2(this,g),this.red.mul(this,g)},t.prototype.redIMul=function(g){return A(this.red,"redMul works only with red numbers"),this.red._verify2(this,g),this.red.imul(this,g)},t.prototype.redSqr=function(){return A(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},t.prototype.redISqr=function(){return A(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},t.prototype.redSqrt=function(){return A(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},t.prototype.redInvm=function(){return A(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},t.prototype.redNeg=function(){return A(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},t.prototype.redPow=function(g){return A(this.red&&!g.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,g)};var m={k256:null,p224:null,p192:null,p25519:null};function Z(g,I){this.name=g,this.p=new t(I,16),this.n=this.p.bitLength(),this.k=new t(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function u(){Z.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function G(){Z.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function b(){Z.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function p(){Z.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function B(g){if("string"==typeof g){var I=t._prime(g);this.m=I.p,this.prime=I}else A(g.gtn(1),"modulus must be greater than 1"),this.m=g,this.prime=null}function y(g){B.call(this,g),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new t(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}Z.prototype._tmp=function(){var g=new t(null);return g.words=new Array(Math.ceil(this.n/13)),g},Z.prototype.ireduce=function(g){var I,A=g;do{this.split(A,this.tmp),I=(A=(A=this.imulK(A)).iadd(this.tmp)).bitLength()}while(I>this.n);var C=I<this.n?-1:A.ucmp(this.p);return 0===C?(A.words[0]=0,A.length=1):C>0?A.isub(this.p):void 0!==A.strip?A.strip():A._strip(),A},Z.prototype.split=function(g,I){g.iushrn(this.n,0,I)},Z.prototype.imulK=function(g){return g.imul(this.k)},C(u,Z),u.prototype.split=function(g,I){for(var A=4194303,C=Math.min(g.length,9),t=0;t<C;t++)I.words[t]=g.words[t];if(I.length=C,g.length<=9)return g.words[0]=0,void(g.length=1);var i=g.words[9];for(I.words[I.length++]=i&A,t=10;t<g.length;t++){var e=0|g.words[t];g.words[t-10]=(e&A)<<4|i>>>22,i=e}i>>>=22,g.words[t-10]=i,0===i&&g.length>10?g.length-=10:g.length-=9},u.prototype.imulK=function(g){g.words[g.length]=0,g.words[g.length+1]=0,g.length+=2;for(var I=0,A=0;A<g.length;A++){var C=0|g.words[A];I+=977*C,g.words[A]=67108863&I,I=64*C+(I/67108864|0)}return 0===g.words[g.length-1]&&(g.length--,0===g.words[g.length-1]&&g.length--),g},C(G,Z),C(b,Z),C(p,Z),p.prototype.imulK=function(g){for(var I=0,A=0;A<g.length;A++){var C=19*(0|g.words[A])+I,t=67108863&C;C>>>=26,g.words[A]=t,I=C}return 0!==I&&(g.words[g.length++]=I),g},t._prime=function(g){if(m[g])return m[g];var I;if("k256"===g)I=new u;else if("p224"===g)I=new G;else if("p192"===g)I=new b;else{if("p25519"!==g)throw new Error("Unknown prime "+g);I=new p}return m[g]=I,I},B.prototype._verify1=function(g){A(0===g.negative,"red works only with positives"),A(g.red,"red works only with red numbers")},B.prototype._verify2=function(g,I){A(0==(g.negative|I.negative),"red works only with positives"),A(g.red&&g.red===I.red,"red works only with red numbers")},B.prototype.imod=function(g){return this.prime?this.prime.ireduce(g)._forceRed(this):g.umod(this.m)._forceRed(this)},B.prototype.neg=function(g){return g.isZero()?g.clone():this.m.sub(g)._forceRed(this)},B.prototype.add=function(g,I){this._verify2(g,I);var A=g.add(I);return A.cmp(this.m)>=0&&A.isub(this.m),A._forceRed(this)},B.prototype.iadd=function(g,I){this._verify2(g,I);var A=g.iadd(I);return A.cmp(this.m)>=0&&A.isub(this.m),A},B.prototype.sub=function(g,I){this._verify2(g,I);var A=g.sub(I);return A.cmpn(0)<0&&A.iadd(this.m),A._forceRed(this)},B.prototype.isub=function(g,I){this._verify2(g,I);var A=g.isub(I);return A.cmpn(0)<0&&A.iadd(this.m),A},B.prototype.shl=function(g,I){return this._verify1(g),this.imod(g.ushln(I))},B.prototype.imul=function(g,I){return this._verify2(g,I),this.imod(g.imul(I))},B.prototype.mul=function(g,I){return this._verify2(g,I),this.imod(g.mul(I))},B.prototype.isqr=function(g){return this.imul(g,g.clone())},B.prototype.sqr=function(g){return this.mul(g,g)},B.prototype.sqrt=function(g){if(g.isZero())return g.clone();var I=this.m.andln(3);if(A(I%2==1),3===I){var C=this.m.add(new t(1)).iushrn(2);return this.pow(g,C)}for(var i=this.m.subn(1),e=0;!i.isZero()&&0===i.andln(1);)e++,i.iushrn(1);A(!i.isZero());var o=new t(1).toRed(this),n=o.redNeg(),s=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new t(2*l*l).toRed(this);0!==this.pow(l,s).cmp(n);)l.redIAdd(n);for(var r=this.pow(l,i),c=this.pow(g,i.addn(1).iushrn(1)),a=this.pow(g,i),d=e;0!==a.cmp(o);){for(var h=a,m=0;0!==h.cmp(o);m++)h=h.redSqr();A(m<d);var Z=this.pow(r,new t(1).iushln(d-m-1));c=c.redMul(Z),r=Z.redSqr(),a=a.redMul(r),d=m}return c},B.prototype.invm=function(g){var I=g._invmp(this.m);return 0!==I.negative?(I.negative=0,this.imod(I).redNeg()):this.imod(I)},B.prototype.pow=function(g,I){if(I.isZero())return new t(1).toRed(this);if(0===I.cmpn(1))return g.clone();var A=new Array(16);A[0]=new t(1).toRed(this),A[1]=g;for(var C=2;C<A.length;C++)A[C]=this.mul(A[C-1],g);var i=A[0],e=0,o=0,n=I.bitLength()%26;for(0===n&&(n=26),C=I.length-1;C>=0;C--){for(var s=I.words[C],l=n-1;l>=0;l--){var r=s>>l&1;i!==A[0]&&(i=this.sqr(i)),0!==r||0!==e?(e<<=1,e|=r,(4===++o||0===C&&0===l)&&(i=this.mul(i,A[e]),o=0,e=0)):o=0}n=26}return i},B.prototype.convertTo=function(g){var I=g.umod(this.m);return I===g?I.clone():I},B.prototype.convertFrom=function(g){var I=g.clone();return I.red=null,I},t.mont=function(g){return new y(g)},C(y,B),y.prototype.convertTo=function(g){return this.imod(g.ushln(this.shift))},y.prototype.convertFrom=function(g){var I=this.imod(g.mul(this.rinv));return I.red=null,I},y.prototype.imul=function(g,I){if(g.isZero()||I.isZero())return g.words[0]=0,g.length=1,g;var A=g.imul(I),C=A.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),t=A.isub(C).iushrn(this.shift),i=t;return t.cmp(this.m)>=0?i=t.isub(this.m):t.cmpn(0)<0&&(i=t.iadd(this.m)),i._forceRed(this)},y.prototype.mul=function(g,I){if(g.isZero()||I.isZero())return new t(0)._forceRed(this);var A=g.mul(I),C=A.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=A.isub(C).iushrn(this.shift),e=i;return i.cmp(this.m)>=0?e=i.isub(this.m):i.cmpn(0)<0&&(e=i.iadd(this.m)),e._forceRed(this)},y.prototype.invm=function(g){return this.imod(g._invmp(this.m).mul(this.r2))._forceRed(this)}}(g,ot)}(ts);var is=ai,es=ts.exports,os={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function ns(g){this.curveType=os[g],this.curveType||(this.curveType={name:g}),this.curve=new is.ec(this.curveType.name),this.keys=void 0}function ss(g,I,A){Array.isArray(g)||(g=g.toArray());var C=new Buffer(g);if(A&&C.length<A){var t=new Buffer(A-C.length);t.fill(0),C=Buffer.concat([t,C])}return I?C.toString(I):C}os.p224=os.secp224r1,os.p256=os.secp256r1=os.prime256v1,os.p192=os.secp192r1=os.prime192v1,os.p384=os.secp384r1,os.p521=os.secp521r1,ns.prototype.generateKeys=function(g,I){return this.keys=this.curve.genKeyPair(),this.getPublicKey(g,I)},ns.prototype.computeSecret=function(g,I,A){return I=I||"utf8",Buffer.isBuffer(g)||(g=new Buffer(g,I)),ss(this.curve.keyFromPublic(g).getPublic().mul(this.keys.getPrivate()).getX(),A,this.curveType.byteLength)},ns.prototype.getPublicKey=function(g,I){var A=this.keys.getPublic("compressed"===I,!0);return"hybrid"===I&&(A[A.length-1]%2?A[0]=7:A[0]=6),ss(A,g)},ns.prototype.getPrivateKey=function(g){return ss(this.keys.getPrivate(),g)},ns.prototype.setPublicKey=function(g,I){return I=I||"utf8",Buffer.isBuffer(g)||(g=new Buffer(g,I)),this.keys._importPublic(g),this},ns.prototype.setPrivateKey=function(g,I){I=I||"utf8",Buffer.isBuffer(g)||(g=new Buffer(g,I));var A=new es(g);return A=A.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(A),this};var ls=St.createECDH||function(g){return new ns(g)},rs={},cs={},as={},ds={},hs={exports:{}};!function(g){!function(g,I){function A(g,I){if(!g)throw new Error(I||"Assertion failed")}function C(g,I){g.super_=I;var A=function(){};A.prototype=I.prototype,g.prototype=new A,g.prototype.constructor=g}function t(g,I,A){if(t.isBN(g))return g;this.negative=0,this.words=null,this.length=0,this.red=null,null!==g&&("le"!==I&&"be"!==I||(A=I,I=10),this._init(g||0,I||10,A||"be"))}var i;"object"==typeof g?g.exports=t:I.BN=t,t.BN=t,t.wordSize=26;try{i="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:require("buffer").Buffer}catch(dD){}function e(g,I){var A=g.charCodeAt(I);return A>=65&&A<=70?A-55:A>=97&&A<=102?A-87:A-48&15}function o(g,I,A){var C=e(g,A);return A-1>=I&&(C|=e(g,A-1)<<4),C}function n(g,I,A,C){for(var t=0,i=Math.min(g.length,A),e=I;e<i;e++){var o=g.charCodeAt(e)-48;t*=C,t+=o>=49?o-49+10:o>=17?o-17+10:o}return t}t.isBN=function(g){return g instanceof t||null!==g&&"object"==typeof g&&g.constructor.wordSize===t.wordSize&&Array.isArray(g.words)},t.max=function(g,I){return g.cmp(I)>0?g:I},t.min=function(g,I){return g.cmp(I)<0?g:I},t.prototype._init=function(g,I,C){if("number"==typeof g)return this._initNumber(g,I,C);if("object"==typeof g)return this._initArray(g,I,C);"hex"===I&&(I=16),A(I===(0|I)&&I>=2&&I<=36);var t=0;"-"===(g=g.toString().replace(/\s+/g,""))[0]&&(t++,this.negative=1),t<g.length&&(16===I?this._parseHex(g,t,C):(this._parseBase(g,I,t),"le"===C&&this._initArray(this.toArray(),I,C)))},t.prototype._initNumber=function(g,I,C){g<0&&(this.negative=1,g=-g),g<67108864?(this.words=[67108863&g],this.length=1):g<4503599627370496?(this.words=[67108863&g,g/67108864&67108863],this.length=2):(A(g<9007199254740992),this.words=[67108863&g,g/67108864&67108863,1],this.length=3),"le"===C&&this._initArray(this.toArray(),I,C)},t.prototype._initArray=function(g,I,C){if(A("number"==typeof g.length),g.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(g.length/3),this.words=new Array(this.length);for(var t=0;t<this.length;t++)this.words[t]=0;var i,e,o=0;if("be"===C)for(t=g.length-1,i=0;t>=0;t-=3)e=g[t]|g[t-1]<<8|g[t-2]<<16,this.words[i]|=e<<o&67108863,this.words[i+1]=e>>>26-o&67108863,(o+=24)>=26&&(o-=26,i++);else if("le"===C)for(t=0,i=0;t<g.length;t+=3)e=g[t]|g[t+1]<<8|g[t+2]<<16,this.words[i]|=e<<o&67108863,this.words[i+1]=e>>>26-o&67108863,(o+=24)>=26&&(o-=26,i++);return this.strip()},t.prototype._parseHex=function(g,I,A){this.length=Math.ceil((g.length-I)/6),this.words=new Array(this.length);for(var C=0;C<this.length;C++)this.words[C]=0;var t,i=0,e=0;if("be"===A)for(C=g.length-1;C>=I;C-=2)t=o(g,I,C)<<i,this.words[e]|=67108863&t,i>=18?(i-=18,e+=1,this.words[e]|=t>>>26):i+=8;else for(C=(g.length-I)%2==0?I+1:I;C<g.length;C+=2)t=o(g,I,C)<<i,this.words[e]|=67108863&t,i>=18?(i-=18,e+=1,this.words[e]|=t>>>26):i+=8;this.strip()},t.prototype._parseBase=function(g,I,A){this.words=[0],this.length=1;for(var C=0,t=1;t<=67108863;t*=I)C++;C--,t=t/I|0;for(var i=g.length-A,e=i%C,o=Math.min(i,i-e)+A,s=0,l=A;l<o;l+=C)s=n(g,l,l+C,I),this.imuln(t),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s);if(0!==e){var r=1;for(s=n(g,l,g.length,I),l=0;l<e;l++)r*=I;this.imuln(r),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s)}this.strip()},t.prototype.copy=function(g){g.words=new Array(this.length);for(var I=0;I<this.length;I++)g.words[I]=this.words[I];g.length=this.length,g.negative=this.negative,g.red=this.red},t.prototype.clone=function(){var g=new t(null);return this.copy(g),g},t.prototype._expand=function(g){for(;this.length<g;)this.words[this.length++]=0;return this},t.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},t.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},t.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var s=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],r=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function c(g,I,A){A.negative=I.negative^g.negative;var C=g.length+I.length|0;A.length=C,C=C-1|0;var t=0|g.words[0],i=0|I.words[0],e=t*i,o=67108863&e,n=e/67108864|0;A.words[0]=o;for(var s=1;s<C;s++){for(var l=n>>>26,r=67108863&n,c=Math.min(s,I.length-1),a=Math.max(0,s-g.length+1);a<=c;a++){var d=s-a|0;l+=(e=(t=0|g.words[d])*(i=0|I.words[a])+r)/67108864|0,r=67108863&e}A.words[s]=0|r,n=0|l}return 0!==n?A.words[s]=0|n:A.length--,A.strip()}t.prototype.toString=function(g,I){var C;if(I=0|I||1,16===(g=g||10)||"hex"===g){C="";for(var t=0,i=0,e=0;e<this.length;e++){var o=this.words[e],n=(16777215&(o<<t|i)).toString(16);C=0!==(i=o>>>24-t&16777215)||e!==this.length-1?s[6-n.length]+n+C:n+C,(t+=2)>=26&&(t-=26,e--)}for(0!==i&&(C=i.toString(16)+C);C.length%I!=0;)C="0"+C;return 0!==this.negative&&(C="-"+C),C}if(g===(0|g)&&g>=2&&g<=36){var c=l[g],a=r[g];C="";var d=this.clone();for(d.negative=0;!d.isZero();){var h=d.modn(a).toString(g);C=(d=d.idivn(a)).isZero()?h+C:s[c-h.length]+h+C}for(this.isZero()&&(C="0"+C);C.length%I!=0;)C="0"+C;return 0!==this.negative&&(C="-"+C),C}A(!1,"Base should be between 2 and 36")},t.prototype.toNumber=function(){var g=this.words[0];return 2===this.length?g+=67108864*this.words[1]:3===this.length&&1===this.words[2]?g+=4503599627370496+67108864*this.words[1]:this.length>2&&A(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-g:g},t.prototype.toJSON=function(){return this.toString(16)},t.prototype.toBuffer=function(g,I){return A(void 0!==i),this.toArrayLike(i,g,I)},t.prototype.toArray=function(g,I){return this.toArrayLike(Array,g,I)},t.prototype.toArrayLike=function(g,I,C){var t=this.byteLength(),i=C||Math.max(1,t);A(t<=i,"byte array longer than desired length"),A(i>0,"Requested array length <= 0"),this.strip();var e,o,n="le"===I,s=new g(i),l=this.clone();if(n){for(o=0;!l.isZero();o++)e=l.andln(255),l.iushrn(8),s[o]=e;for(;o<i;o++)s[o]=0}else{for(o=0;o<i-t;o++)s[o]=0;for(o=0;!l.isZero();o++)e=l.andln(255),l.iushrn(8),s[i-o-1]=e}return s},Math.clz32?t.prototype._countBits=function(g){return 32-Math.clz32(g)}:t.prototype._countBits=function(g){var I=g,A=0;return I>=4096&&(A+=13,I>>>=13),I>=64&&(A+=7,I>>>=7),I>=8&&(A+=4,I>>>=4),I>=2&&(A+=2,I>>>=2),A+I},t.prototype._zeroBits=function(g){if(0===g)return 26;var I=g,A=0;return 0==(8191&I)&&(A+=13,I>>>=13),0==(127&I)&&(A+=7,I>>>=7),0==(15&I)&&(A+=4,I>>>=4),0==(3&I)&&(A+=2,I>>>=2),0==(1&I)&&A++,A},t.prototype.bitLength=function(){var g=this.words[this.length-1],I=this._countBits(g);return 26*(this.length-1)+I},t.prototype.zeroBits=function(){if(this.isZero())return 0;for(var g=0,I=0;I<this.length;I++){var A=this._zeroBits(this.words[I]);if(g+=A,26!==A)break}return g},t.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},t.prototype.toTwos=function(g){return 0!==this.negative?this.abs().inotn(g).iaddn(1):this.clone()},t.prototype.fromTwos=function(g){return this.testn(g-1)?this.notn(g).iaddn(1).ineg():this.clone()},t.prototype.isNeg=function(){return 0!==this.negative},t.prototype.neg=function(){return this.clone().ineg()},t.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},t.prototype.iuor=function(g){for(;this.length<g.length;)this.words[this.length++]=0;for(var I=0;I<g.length;I++)this.words[I]=this.words[I]|g.words[I];return this.strip()},t.prototype.ior=function(g){return A(0==(this.negative|g.negative)),this.iuor(g)},t.prototype.or=function(g){return this.length>g.length?this.clone().ior(g):g.clone().ior(this)},t.prototype.uor=function(g){return this.length>g.length?this.clone().iuor(g):g.clone().iuor(this)},t.prototype.iuand=function(g){var I;I=this.length>g.length?g:this;for(var A=0;A<I.length;A++)this.words[A]=this.words[A]&g.words[A];return this.length=I.length,this.strip()},t.prototype.iand=function(g){return A(0==(this.negative|g.negative)),this.iuand(g)},t.prototype.and=function(g){return this.length>g.length?this.clone().iand(g):g.clone().iand(this)},t.prototype.uand=function(g){return this.length>g.length?this.clone().iuand(g):g.clone().iuand(this)},t.prototype.iuxor=function(g){var I,A;this.length>g.length?(I=this,A=g):(I=g,A=this);for(var C=0;C<A.length;C++)this.words[C]=I.words[C]^A.words[C];if(this!==I)for(;C<I.length;C++)this.words[C]=I.words[C];return this.length=I.length,this.strip()},t.prototype.ixor=function(g){return A(0==(this.negative|g.negative)),this.iuxor(g)},t.prototype.xor=function(g){return this.length>g.length?this.clone().ixor(g):g.clone().ixor(this)},t.prototype.uxor=function(g){return this.length>g.length?this.clone().iuxor(g):g.clone().iuxor(this)},t.prototype.inotn=function(g){A("number"==typeof g&&g>=0);var I=0|Math.ceil(g/26),C=g%26;this._expand(I),C>0&&I--;for(var t=0;t<I;t++)this.words[t]=67108863&~this.words[t];return C>0&&(this.words[t]=~this.words[t]&67108863>>26-C),this.strip()},t.prototype.notn=function(g){return this.clone().inotn(g)},t.prototype.setn=function(g,I){A("number"==typeof g&&g>=0);var C=g/26|0,t=g%26;return this._expand(C+1),this.words[C]=I?this.words[C]|1<<t:this.words[C]&~(1<<t),this.strip()},t.prototype.iadd=function(g){var I,A,C;if(0!==this.negative&&0===g.negative)return this.negative=0,I=this.isub(g),this.negative^=1,this._normSign();if(0===this.negative&&0!==g.negative)return g.negative=0,I=this.isub(g),g.negative=1,I._normSign();this.length>g.length?(A=this,C=g):(A=g,C=this);for(var t=0,i=0;i<C.length;i++)I=(0|A.words[i])+(0|C.words[i])+t,this.words[i]=67108863&I,t=I>>>26;for(;0!==t&&i<A.length;i++)I=(0|A.words[i])+t,this.words[i]=67108863&I,t=I>>>26;if(this.length=A.length,0!==t)this.words[this.length]=t,this.length++;else if(A!==this)for(;i<A.length;i++)this.words[i]=A.words[i];return this},t.prototype.add=function(g){var I;return 0!==g.negative&&0===this.negative?(g.negative=0,I=this.sub(g),g.negative^=1,I):0===g.negative&&0!==this.negative?(this.negative=0,I=g.sub(this),this.negative=1,I):this.length>g.length?this.clone().iadd(g):g.clone().iadd(this)},t.prototype.isub=function(g){if(0!==g.negative){g.negative=0;var I=this.iadd(g);return g.negative=1,I._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(g),this.negative=1,this._normSign();var A,C,t=this.cmp(g);if(0===t)return this.negative=0,this.length=1,this.words[0]=0,this;t>0?(A=this,C=g):(A=g,C=this);for(var i=0,e=0;e<C.length;e++)i=(I=(0|A.words[e])-(0|C.words[e])+i)>>26,this.words[e]=67108863&I;for(;0!==i&&e<A.length;e++)i=(I=(0|A.words[e])+i)>>26,this.words[e]=67108863&I;if(0===i&&e<A.length&&A!==this)for(;e<A.length;e++)this.words[e]=A.words[e];return this.length=Math.max(this.length,e),A!==this&&(this.negative=1),this.strip()},t.prototype.sub=function(g){return this.clone().isub(g)};var a=function(g,I,A){var C,t,i,e=g.words,o=I.words,n=A.words,s=0,l=0|e[0],r=8191&l,c=l>>>13,a=0|e[1],d=8191&a,h=a>>>13,m=0|e[2],Z=8191&m,u=m>>>13,G=0|e[3],b=8191&G,p=G>>>13,B=0|e[4],y=8191&B,w=B>>>13,W=0|e[5],S=8191&W,K=W>>>13,f=0|e[6],Y=8191&f,X=f>>>13,V=0|e[7],O=8191&V,R=V>>>13,Q=0|e[8],H=8191&Q,k=Q>>>13,J=0|e[9],v=8191&J,D=J>>>13,M=0|o[0],N=8191&M,E=M>>>13,F=0|o[1],L=8191&F,T=F>>>13,z=0|o[2],P=8191&z,U=z>>>13,x=0|o[3],j=8191&x,_=x>>>13,$=0|o[4],q=8191&$,gg=$>>>13,Ig=0|o[5],Ag=8191&Ig,Cg=Ig>>>13,tg=0|o[6],ig=8191&tg,eg=tg>>>13,og=0|o[7],ng=8191&og,sg=og>>>13,lg=0|o[8],rg=8191&lg,cg=lg>>>13,ag=0|o[9],dg=8191&ag,hg=ag>>>13;A.negative=g.negative^I.negative,A.length=19;var mg=(s+(C=Math.imul(r,N))|0)+((8191&(t=(t=Math.imul(r,E))+Math.imul(c,N)|0))<<13)|0;s=((i=Math.imul(c,E))+(t>>>13)|0)+(mg>>>26)|0,mg&=67108863,C=Math.imul(d,N),t=(t=Math.imul(d,E))+Math.imul(h,N)|0,i=Math.imul(h,E);var Zg=(s+(C=C+Math.imul(r,L)|0)|0)+((8191&(t=(t=t+Math.imul(r,T)|0)+Math.imul(c,L)|0))<<13)|0;s=((i=i+Math.imul(c,T)|0)+(t>>>13)|0)+(Zg>>>26)|0,Zg&=67108863,C=Math.imul(Z,N),t=(t=Math.imul(Z,E))+Math.imul(u,N)|0,i=Math.imul(u,E),C=C+Math.imul(d,L)|0,t=(t=t+Math.imul(d,T)|0)+Math.imul(h,L)|0,i=i+Math.imul(h,T)|0;var ug=(s+(C=C+Math.imul(r,P)|0)|0)+((8191&(t=(t=t+Math.imul(r,U)|0)+Math.imul(c,P)|0))<<13)|0;s=((i=i+Math.imul(c,U)|0)+(t>>>13)|0)+(ug>>>26)|0,ug&=67108863,C=Math.imul(b,N),t=(t=Math.imul(b,E))+Math.imul(p,N)|0,i=Math.imul(p,E),C=C+Math.imul(Z,L)|0,t=(t=t+Math.imul(Z,T)|0)+Math.imul(u,L)|0,i=i+Math.imul(u,T)|0,C=C+Math.imul(d,P)|0,t=(t=t+Math.imul(d,U)|0)+Math.imul(h,P)|0,i=i+Math.imul(h,U)|0;var Gg=(s+(C=C+Math.imul(r,j)|0)|0)+((8191&(t=(t=t+Math.imul(r,_)|0)+Math.imul(c,j)|0))<<13)|0;s=((i=i+Math.imul(c,_)|0)+(t>>>13)|0)+(Gg>>>26)|0,Gg&=67108863,C=Math.imul(y,N),t=(t=Math.imul(y,E))+Math.imul(w,N)|0,i=Math.imul(w,E),C=C+Math.imul(b,L)|0,t=(t=t+Math.imul(b,T)|0)+Math.imul(p,L)|0,i=i+Math.imul(p,T)|0,C=C+Math.imul(Z,P)|0,t=(t=t+Math.imul(Z,U)|0)+Math.imul(u,P)|0,i=i+Math.imul(u,U)|0,C=C+Math.imul(d,j)|0,t=(t=t+Math.imul(d,_)|0)+Math.imul(h,j)|0,i=i+Math.imul(h,_)|0;var bg=(s+(C=C+Math.imul(r,q)|0)|0)+((8191&(t=(t=t+Math.imul(r,gg)|0)+Math.imul(c,q)|0))<<13)|0;s=((i=i+Math.imul(c,gg)|0)+(t>>>13)|0)+(bg>>>26)|0,bg&=67108863,C=Math.imul(S,N),t=(t=Math.imul(S,E))+Math.imul(K,N)|0,i=Math.imul(K,E),C=C+Math.imul(y,L)|0,t=(t=t+Math.imul(y,T)|0)+Math.imul(w,L)|0,i=i+Math.imul(w,T)|0,C=C+Math.imul(b,P)|0,t=(t=t+Math.imul(b,U)|0)+Math.imul(p,P)|0,i=i+Math.imul(p,U)|0,C=C+Math.imul(Z,j)|0,t=(t=t+Math.imul(Z,_)|0)+Math.imul(u,j)|0,i=i+Math.imul(u,_)|0,C=C+Math.imul(d,q)|0,t=(t=t+Math.imul(d,gg)|0)+Math.imul(h,q)|0,i=i+Math.imul(h,gg)|0;var pg=(s+(C=C+Math.imul(r,Ag)|0)|0)+((8191&(t=(t=t+Math.imul(r,Cg)|0)+Math.imul(c,Ag)|0))<<13)|0;s=((i=i+Math.imul(c,Cg)|0)+(t>>>13)|0)+(pg>>>26)|0,pg&=67108863,C=Math.imul(Y,N),t=(t=Math.imul(Y,E))+Math.imul(X,N)|0,i=Math.imul(X,E),C=C+Math.imul(S,L)|0,t=(t=t+Math.imul(S,T)|0)+Math.imul(K,L)|0,i=i+Math.imul(K,T)|0,C=C+Math.imul(y,P)|0,t=(t=t+Math.imul(y,U)|0)+Math.imul(w,P)|0,i=i+Math.imul(w,U)|0,C=C+Math.imul(b,j)|0,t=(t=t+Math.imul(b,_)|0)+Math.imul(p,j)|0,i=i+Math.imul(p,_)|0,C=C+Math.imul(Z,q)|0,t=(t=t+Math.imul(Z,gg)|0)+Math.imul(u,q)|0,i=i+Math.imul(u,gg)|0,C=C+Math.imul(d,Ag)|0,t=(t=t+Math.imul(d,Cg)|0)+Math.imul(h,Ag)|0,i=i+Math.imul(h,Cg)|0;var Bg=(s+(C=C+Math.imul(r,ig)|0)|0)+((8191&(t=(t=t+Math.imul(r,eg)|0)+Math.imul(c,ig)|0))<<13)|0;s=((i=i+Math.imul(c,eg)|0)+(t>>>13)|0)+(Bg>>>26)|0,Bg&=67108863,C=Math.imul(O,N),t=(t=Math.imul(O,E))+Math.imul(R,N)|0,i=Math.imul(R,E),C=C+Math.imul(Y,L)|0,t=(t=t+Math.imul(Y,T)|0)+Math.imul(X,L)|0,i=i+Math.imul(X,T)|0,C=C+Math.imul(S,P)|0,t=(t=t+Math.imul(S,U)|0)+Math.imul(K,P)|0,i=i+Math.imul(K,U)|0,C=C+Math.imul(y,j)|0,t=(t=t+Math.imul(y,_)|0)+Math.imul(w,j)|0,i=i+Math.imul(w,_)|0,C=C+Math.imul(b,q)|0,t=(t=t+Math.imul(b,gg)|0)+Math.imul(p,q)|0,i=i+Math.imul(p,gg)|0,C=C+Math.imul(Z,Ag)|0,t=(t=t+Math.imul(Z,Cg)|0)+Math.imul(u,Ag)|0,i=i+Math.imul(u,Cg)|0,C=C+Math.imul(d,ig)|0,t=(t=t+Math.imul(d,eg)|0)+Math.imul(h,ig)|0,i=i+Math.imul(h,eg)|0;var yg=(s+(C=C+Math.imul(r,ng)|0)|0)+((8191&(t=(t=t+Math.imul(r,sg)|0)+Math.imul(c,ng)|0))<<13)|0;s=((i=i+Math.imul(c,sg)|0)+(t>>>13)|0)+(yg>>>26)|0,yg&=67108863,C=Math.imul(H,N),t=(t=Math.imul(H,E))+Math.imul(k,N)|0,i=Math.imul(k,E),C=C+Math.imul(O,L)|0,t=(t=t+Math.imul(O,T)|0)+Math.imul(R,L)|0,i=i+Math.imul(R,T)|0,C=C+Math.imul(Y,P)|0,t=(t=t+Math.imul(Y,U)|0)+Math.imul(X,P)|0,i=i+Math.imul(X,U)|0,C=C+Math.imul(S,j)|0,t=(t=t+Math.imul(S,_)|0)+Math.imul(K,j)|0,i=i+Math.imul(K,_)|0,C=C+Math.imul(y,q)|0,t=(t=t+Math.imul(y,gg)|0)+Math.imul(w,q)|0,i=i+Math.imul(w,gg)|0,C=C+Math.imul(b,Ag)|0,t=(t=t+Math.imul(b,Cg)|0)+Math.imul(p,Ag)|0,i=i+Math.imul(p,Cg)|0,C=C+Math.imul(Z,ig)|0,t=(t=t+Math.imul(Z,eg)|0)+Math.imul(u,ig)|0,i=i+Math.imul(u,eg)|0,C=C+Math.imul(d,ng)|0,t=(t=t+Math.imul(d,sg)|0)+Math.imul(h,ng)|0,i=i+Math.imul(h,sg)|0;var wg=(s+(C=C+Math.imul(r,rg)|0)|0)+((8191&(t=(t=t+Math.imul(r,cg)|0)+Math.imul(c,rg)|0))<<13)|0;s=((i=i+Math.imul(c,cg)|0)+(t>>>13)|0)+(wg>>>26)|0,wg&=67108863,C=Math.imul(v,N),t=(t=Math.imul(v,E))+Math.imul(D,N)|0,i=Math.imul(D,E),C=C+Math.imul(H,L)|0,t=(t=t+Math.imul(H,T)|0)+Math.imul(k,L)|0,i=i+Math.imul(k,T)|0,C=C+Math.imul(O,P)|0,t=(t=t+Math.imul(O,U)|0)+Math.imul(R,P)|0,i=i+Math.imul(R,U)|0,C=C+Math.imul(Y,j)|0,t=(t=t+Math.imul(Y,_)|0)+Math.imul(X,j)|0,i=i+Math.imul(X,_)|0,C=C+Math.imul(S,q)|0,t=(t=t+Math.imul(S,gg)|0)+Math.imul(K,q)|0,i=i+Math.imul(K,gg)|0,C=C+Math.imul(y,Ag)|0,t=(t=t+Math.imul(y,Cg)|0)+Math.imul(w,Ag)|0,i=i+Math.imul(w,Cg)|0,C=C+Math.imul(b,ig)|0,t=(t=t+Math.imul(b,eg)|0)+Math.imul(p,ig)|0,i=i+Math.imul(p,eg)|0,C=C+Math.imul(Z,ng)|0,t=(t=t+Math.imul(Z,sg)|0)+Math.imul(u,ng)|0,i=i+Math.imul(u,sg)|0,C=C+Math.imul(d,rg)|0,t=(t=t+Math.imul(d,cg)|0)+Math.imul(h,rg)|0,i=i+Math.imul(h,cg)|0;var Wg=(s+(C=C+Math.imul(r,dg)|0)|0)+((8191&(t=(t=t+Math.imul(r,hg)|0)+Math.imul(c,dg)|0))<<13)|0;s=((i=i+Math.imul(c,hg)|0)+(t>>>13)|0)+(Wg>>>26)|0,Wg&=67108863,C=Math.imul(v,L),t=(t=Math.imul(v,T))+Math.imul(D,L)|0,i=Math.imul(D,T),C=C+Math.imul(H,P)|0,t=(t=t+Math.imul(H,U)|0)+Math.imul(k,P)|0,i=i+Math.imul(k,U)|0,C=C+Math.imul(O,j)|0,t=(t=t+Math.imul(O,_)|0)+Math.imul(R,j)|0,i=i+Math.imul(R,_)|0,C=C+Math.imul(Y,q)|0,t=(t=t+Math.imul(Y,gg)|0)+Math.imul(X,q)|0,i=i+Math.imul(X,gg)|0,C=C+Math.imul(S,Ag)|0,t=(t=t+Math.imul(S,Cg)|0)+Math.imul(K,Ag)|0,i=i+Math.imul(K,Cg)|0,C=C+Math.imul(y,ig)|0,t=(t=t+Math.imul(y,eg)|0)+Math.imul(w,ig)|0,i=i+Math.imul(w,eg)|0,C=C+Math.imul(b,ng)|0,t=(t=t+Math.imul(b,sg)|0)+Math.imul(p,ng)|0,i=i+Math.imul(p,sg)|0,C=C+Math.imul(Z,rg)|0,t=(t=t+Math.imul(Z,cg)|0)+Math.imul(u,rg)|0,i=i+Math.imul(u,cg)|0;var Sg=(s+(C=C+Math.imul(d,dg)|0)|0)+((8191&(t=(t=t+Math.imul(d,hg)|0)+Math.imul(h,dg)|0))<<13)|0;s=((i=i+Math.imul(h,hg)|0)+(t>>>13)|0)+(Sg>>>26)|0,Sg&=67108863,C=Math.imul(v,P),t=(t=Math.imul(v,U))+Math.imul(D,P)|0,i=Math.imul(D,U),C=C+Math.imul(H,j)|0,t=(t=t+Math.imul(H,_)|0)+Math.imul(k,j)|0,i=i+Math.imul(k,_)|0,C=C+Math.imul(O,q)|0,t=(t=t+Math.imul(O,gg)|0)+Math.imul(R,q)|0,i=i+Math.imul(R,gg)|0,C=C+Math.imul(Y,Ag)|0,t=(t=t+Math.imul(Y,Cg)|0)+Math.imul(X,Ag)|0,i=i+Math.imul(X,Cg)|0,C=C+Math.imul(S,ig)|0,t=(t=t+Math.imul(S,eg)|0)+Math.imul(K,ig)|0,i=i+Math.imul(K,eg)|0,C=C+Math.imul(y,ng)|0,t=(t=t+Math.imul(y,sg)|0)+Math.imul(w,ng)|0,i=i+Math.imul(w,sg)|0,C=C+Math.imul(b,rg)|0,t=(t=t+Math.imul(b,cg)|0)+Math.imul(p,rg)|0,i=i+Math.imul(p,cg)|0;var Kg=(s+(C=C+Math.imul(Z,dg)|0)|0)+((8191&(t=(t=t+Math.imul(Z,hg)|0)+Math.imul(u,dg)|0))<<13)|0;s=((i=i+Math.imul(u,hg)|0)+(t>>>13)|0)+(Kg>>>26)|0,Kg&=67108863,C=Math.imul(v,j),t=(t=Math.imul(v,_))+Math.imul(D,j)|0,i=Math.imul(D,_),C=C+Math.imul(H,q)|0,t=(t=t+Math.imul(H,gg)|0)+Math.imul(k,q)|0,i=i+Math.imul(k,gg)|0,C=C+Math.imul(O,Ag)|0,t=(t=t+Math.imul(O,Cg)|0)+Math.imul(R,Ag)|0,i=i+Math.imul(R,Cg)|0,C=C+Math.imul(Y,ig)|0,t=(t=t+Math.imul(Y,eg)|0)+Math.imul(X,ig)|0,i=i+Math.imul(X,eg)|0,C=C+Math.imul(S,ng)|0,t=(t=t+Math.imul(S,sg)|0)+Math.imul(K,ng)|0,i=i+Math.imul(K,sg)|0,C=C+Math.imul(y,rg)|0,t=(t=t+Math.imul(y,cg)|0)+Math.imul(w,rg)|0,i=i+Math.imul(w,cg)|0;var fg=(s+(C=C+Math.imul(b,dg)|0)|0)+((8191&(t=(t=t+Math.imul(b,hg)|0)+Math.imul(p,dg)|0))<<13)|0;s=((i=i+Math.imul(p,hg)|0)+(t>>>13)|0)+(fg>>>26)|0,fg&=67108863,C=Math.imul(v,q),t=(t=Math.imul(v,gg))+Math.imul(D,q)|0,i=Math.imul(D,gg),C=C+Math.imul(H,Ag)|0,t=(t=t+Math.imul(H,Cg)|0)+Math.imul(k,Ag)|0,i=i+Math.imul(k,Cg)|0,C=C+Math.imul(O,ig)|0,t=(t=t+Math.imul(O,eg)|0)+Math.imul(R,ig)|0,i=i+Math.imul(R,eg)|0,C=C+Math.imul(Y,ng)|0,t=(t=t+Math.imul(Y,sg)|0)+Math.imul(X,ng)|0,i=i+Math.imul(X,sg)|0,C=C+Math.imul(S,rg)|0,t=(t=t+Math.imul(S,cg)|0)+Math.imul(K,rg)|0,i=i+Math.imul(K,cg)|0;var Yg=(s+(C=C+Math.imul(y,dg)|0)|0)+((8191&(t=(t=t+Math.imul(y,hg)|0)+Math.imul(w,dg)|0))<<13)|0;s=((i=i+Math.imul(w,hg)|0)+(t>>>13)|0)+(Yg>>>26)|0,Yg&=67108863,C=Math.imul(v,Ag),t=(t=Math.imul(v,Cg))+Math.imul(D,Ag)|0,i=Math.imul(D,Cg),C=C+Math.imul(H,ig)|0,t=(t=t+Math.imul(H,eg)|0)+Math.imul(k,ig)|0,i=i+Math.imul(k,eg)|0,C=C+Math.imul(O,ng)|0,t=(t=t+Math.imul(O,sg)|0)+Math.imul(R,ng)|0,i=i+Math.imul(R,sg)|0,C=C+Math.imul(Y,rg)|0,t=(t=t+Math.imul(Y,cg)|0)+Math.imul(X,rg)|0,i=i+Math.imul(X,cg)|0;var Xg=(s+(C=C+Math.imul(S,dg)|0)|0)+((8191&(t=(t=t+Math.imul(S,hg)|0)+Math.imul(K,dg)|0))<<13)|0;s=((i=i+Math.imul(K,hg)|0)+(t>>>13)|0)+(Xg>>>26)|0,Xg&=67108863,C=Math.imul(v,ig),t=(t=Math.imul(v,eg))+Math.imul(D,ig)|0,i=Math.imul(D,eg),C=C+Math.imul(H,ng)|0,t=(t=t+Math.imul(H,sg)|0)+Math.imul(k,ng)|0,i=i+Math.imul(k,sg)|0,C=C+Math.imul(O,rg)|0,t=(t=t+Math.imul(O,cg)|0)+Math.imul(R,rg)|0,i=i+Math.imul(R,cg)|0;var Vg=(s+(C=C+Math.imul(Y,dg)|0)|0)+((8191&(t=(t=t+Math.imul(Y,hg)|0)+Math.imul(X,dg)|0))<<13)|0;s=((i=i+Math.imul(X,hg)|0)+(t>>>13)|0)+(Vg>>>26)|0,Vg&=67108863,C=Math.imul(v,ng),t=(t=Math.imul(v,sg))+Math.imul(D,ng)|0,i=Math.imul(D,sg),C=C+Math.imul(H,rg)|0,t=(t=t+Math.imul(H,cg)|0)+Math.imul(k,rg)|0,i=i+Math.imul(k,cg)|0;var Og=(s+(C=C+Math.imul(O,dg)|0)|0)+((8191&(t=(t=t+Math.imul(O,hg)|0)+Math.imul(R,dg)|0))<<13)|0;s=((i=i+Math.imul(R,hg)|0)+(t>>>13)|0)+(Og>>>26)|0,Og&=67108863,C=Math.imul(v,rg),t=(t=Math.imul(v,cg))+Math.imul(D,rg)|0,i=Math.imul(D,cg);var Rg=(s+(C=C+Math.imul(H,dg)|0)|0)+((8191&(t=(t=t+Math.imul(H,hg)|0)+Math.imul(k,dg)|0))<<13)|0;s=((i=i+Math.imul(k,hg)|0)+(t>>>13)|0)+(Rg>>>26)|0,Rg&=67108863;var Qg=(s+(C=Math.imul(v,dg))|0)+((8191&(t=(t=Math.imul(v,hg))+Math.imul(D,dg)|0))<<13)|0;return s=((i=Math.imul(D,hg))+(t>>>13)|0)+(Qg>>>26)|0,Qg&=67108863,n[0]=mg,n[1]=Zg,n[2]=ug,n[3]=Gg,n[4]=bg,n[5]=pg,n[6]=Bg,n[7]=yg,n[8]=wg,n[9]=Wg,n[10]=Sg,n[11]=Kg,n[12]=fg,n[13]=Yg,n[14]=Xg,n[15]=Vg,n[16]=Og,n[17]=Rg,n[18]=Qg,0!==s&&(n[19]=s,A.length++),A};function d(g,I,A){return(new h).mulp(g,I,A)}function h(g,I){this.x=g,this.y=I}Math.imul||(a=c),t.prototype.mulTo=function(g,I){var A=this.length+g.length;return 10===this.length&&10===g.length?a(this,g,I):A<63?c(this,g,I):A<1024?function(g,I,A){A.negative=I.negative^g.negative,A.length=g.length+I.length;for(var C=0,t=0,i=0;i<A.length-1;i++){var e=t;t=0;for(var o=67108863&C,n=Math.min(i,I.length-1),s=Math.max(0,i-g.length+1);s<=n;s++){var l=i-s,r=(0|g.words[l])*(0|I.words[s]),c=67108863&r;o=67108863&(c=c+o|0),t+=(e=(e=e+(r/67108864|0)|0)+(c>>>26)|0)>>>26,e&=67108863}A.words[i]=o,C=e,e=t}return 0!==C?A.words[i]=C:A.length--,A.strip()}(this,g,I):d(this,g,I)},h.prototype.makeRBT=function(g){for(var I=new Array(g),A=t.prototype._countBits(g)-1,C=0;C<g;C++)I[C]=this.revBin(C,A,g);return I},h.prototype.revBin=function(g,I,A){if(0===g||g===A-1)return g;for(var C=0,t=0;t<I;t++)C|=(1&g)<<I-t-1,g>>=1;return C},h.prototype.permute=function(g,I,A,C,t,i){for(var e=0;e<i;e++)C[e]=I[g[e]],t[e]=A[g[e]]},h.prototype.transform=function(g,I,A,C,t,i){this.permute(i,g,I,A,C,t);for(var e=1;e<t;e<<=1)for(var o=e<<1,n=Math.cos(2*Math.PI/o),s=Math.sin(2*Math.PI/o),l=0;l<t;l+=o)for(var r=n,c=s,a=0;a<e;a++){var d=A[l+a],h=C[l+a],m=A[l+a+e],Z=C[l+a+e],u=r*m-c*Z;Z=r*Z+c*m,m=u,A[l+a]=d+m,C[l+a]=h+Z,A[l+a+e]=d-m,C[l+a+e]=h-Z,a!==o&&(u=n*r-s*c,c=n*c+s*r,r=u)}},h.prototype.guessLen13b=function(g,I){var A=1|Math.max(I,g),C=1&A,t=0;for(A=A/2|0;A;A>>>=1)t++;return 1<<t+1+C},h.prototype.conjugate=function(g,I,A){if(!(A<=1))for(var C=0;C<A/2;C++){var t=g[C];g[C]=g[A-C-1],g[A-C-1]=t,t=I[C],I[C]=-I[A-C-1],I[A-C-1]=-t}},h.prototype.normalize13b=function(g,I){for(var A=0,C=0;C<I/2;C++){var t=8192*Math.round(g[2*C+1]/I)+Math.round(g[2*C]/I)+A;g[C]=67108863&t,A=t<67108864?0:t/67108864|0}return g},h.prototype.convert13b=function(g,I,C,t){for(var i=0,e=0;e<I;e++)i+=0|g[e],C[2*e]=8191&i,i>>>=13,C[2*e+1]=8191&i,i>>>=13;for(e=2*I;e<t;++e)C[e]=0;A(0===i),A(0==(-8192&i))},h.prototype.stub=function(g){for(var I=new Array(g),A=0;A<g;A++)I[A]=0;return I},h.prototype.mulp=function(g,I,A){var C=2*this.guessLen13b(g.length,I.length),t=this.makeRBT(C),i=this.stub(C),e=new Array(C),o=new Array(C),n=new Array(C),s=new Array(C),l=new Array(C),r=new Array(C),c=A.words;c.length=C,this.convert13b(g.words,g.length,e,C),this.convert13b(I.words,I.length,s,C),this.transform(e,i,o,n,C,t),this.transform(s,i,l,r,C,t);for(var a=0;a<C;a++){var d=o[a]*l[a]-n[a]*r[a];n[a]=o[a]*r[a]+n[a]*l[a],o[a]=d}return this.conjugate(o,n,C),this.transform(o,n,c,i,C,t),this.conjugate(c,i,C),this.normalize13b(c,C),A.negative=g.negative^I.negative,A.length=g.length+I.length,A.strip()},t.prototype.mul=function(g){var I=new t(null);return I.words=new Array(this.length+g.length),this.mulTo(g,I)},t.prototype.mulf=function(g){var I=new t(null);return I.words=new Array(this.length+g.length),d(this,g,I)},t.prototype.imul=function(g){return this.clone().mulTo(g,this)},t.prototype.imuln=function(g){A("number"==typeof g),A(g<67108864);for(var I=0,C=0;C<this.length;C++){var t=(0|this.words[C])*g,i=(67108863&t)+(67108863&I);I>>=26,I+=t/67108864|0,I+=i>>>26,this.words[C]=67108863&i}return 0!==I&&(this.words[C]=I,this.length++),this},t.prototype.muln=function(g){return this.clone().imuln(g)},t.prototype.sqr=function(){return this.mul(this)},t.prototype.isqr=function(){return this.imul(this.clone())},t.prototype.pow=function(g){var I=function(g){for(var I=new Array(g.bitLength()),A=0;A<I.length;A++){var C=A/26|0,t=A%26;I[A]=(g.words[C]&1<<t)>>>t}return I}(g);if(0===I.length)return new t(1);for(var A=this,C=0;C<I.length&&0===I[C];C++,A=A.sqr());if(++C<I.length)for(var i=A.sqr();C<I.length;C++,i=i.sqr())0!==I[C]&&(A=A.mul(i));return A},t.prototype.iushln=function(g){A("number"==typeof g&&g>=0);var I,C=g%26,t=(g-C)/26,i=67108863>>>26-C<<26-C;if(0!==C){var e=0;for(I=0;I<this.length;I++){var o=this.words[I]&i,n=(0|this.words[I])-o<<C;this.words[I]=n|e,e=o>>>26-C}e&&(this.words[I]=e,this.length++)}if(0!==t){for(I=this.length-1;I>=0;I--)this.words[I+t]=this.words[I];for(I=0;I<t;I++)this.words[I]=0;this.length+=t}return this.strip()},t.prototype.ishln=function(g){return A(0===this.negative),this.iushln(g)},t.prototype.iushrn=function(g,I,C){var t;A("number"==typeof g&&g>=0),t=I?(I-I%26)/26:0;var i=g%26,e=Math.min((g-i)/26,this.length),o=67108863^67108863>>>i<<i,n=C;if(t-=e,t=Math.max(0,t),n){for(var s=0;s<e;s++)n.words[s]=this.words[s];n.length=e}if(0===e);else if(this.length>e)for(this.length-=e,s=0;s<this.length;s++)this.words[s]=this.words[s+e];else this.words[0]=0,this.length=1;var l=0;for(s=this.length-1;s>=0&&(0!==l||s>=t);s--){var r=0|this.words[s];this.words[s]=l<<26-i|r>>>i,l=r&o}return n&&0!==l&&(n.words[n.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},t.prototype.ishrn=function(g,I,C){return A(0===this.negative),this.iushrn(g,I,C)},t.prototype.shln=function(g){return this.clone().ishln(g)},t.prototype.ushln=function(g){return this.clone().iushln(g)},t.prototype.shrn=function(g){return this.clone().ishrn(g)},t.prototype.ushrn=function(g){return this.clone().iushrn(g)},t.prototype.testn=function(g){A("number"==typeof g&&g>=0);var I=g%26,C=(g-I)/26,t=1<<I;return!(this.length<=C)&&!!(this.words[C]&t)},t.prototype.imaskn=function(g){A("number"==typeof g&&g>=0);var I=g%26,C=(g-I)/26;if(A(0===this.negative,"imaskn works only with positive numbers"),this.length<=C)return this;if(0!==I&&C++,this.length=Math.min(C,this.length),0!==I){var t=67108863^67108863>>>I<<I;this.words[this.length-1]&=t}return this.strip()},t.prototype.maskn=function(g){return this.clone().imaskn(g)},t.prototype.iaddn=function(g){return A("number"==typeof g),A(g<67108864),g<0?this.isubn(-g):0!==this.negative?1===this.length&&(0|this.words[0])<g?(this.words[0]=g-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(g),this.negative=1,this):this._iaddn(g)},t.prototype._iaddn=function(g){this.words[0]+=g;for(var I=0;I<this.length&&this.words[I]>=67108864;I++)this.words[I]-=67108864,I===this.length-1?this.words[I+1]=1:this.words[I+1]++;return this.length=Math.max(this.length,I+1),this},t.prototype.isubn=function(g){if(A("number"==typeof g),A(g<67108864),g<0)return this.iaddn(-g);if(0!==this.negative)return this.negative=0,this.iaddn(g),this.negative=1,this;if(this.words[0]-=g,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var I=0;I<this.length&&this.words[I]<0;I++)this.words[I]+=67108864,this.words[I+1]-=1;return this.strip()},t.prototype.addn=function(g){return this.clone().iaddn(g)},t.prototype.subn=function(g){return this.clone().isubn(g)},t.prototype.iabs=function(){return this.negative=0,this},t.prototype.abs=function(){return this.clone().iabs()},t.prototype._ishlnsubmul=function(g,I,C){var t,i,e=g.length+C;this._expand(e);var o=0;for(t=0;t<g.length;t++){i=(0|this.words[t+C])+o;var n=(0|g.words[t])*I;o=((i-=67108863&n)>>26)-(n/67108864|0),this.words[t+C]=67108863&i}for(;t<this.length-C;t++)o=(i=(0|this.words[t+C])+o)>>26,this.words[t+C]=67108863&i;if(0===o)return this.strip();for(A(-1===o),o=0,t=0;t<this.length;t++)o=(i=-(0|this.words[t])+o)>>26,this.words[t]=67108863&i;return this.negative=1,this.strip()},t.prototype._wordDiv=function(g,I){var A=(this.length,g.length),C=this.clone(),i=g,e=0|i.words[i.length-1];0!==(A=26-this._countBits(e))&&(i=i.ushln(A),C.iushln(A),e=0|i.words[i.length-1]);var o,n=C.length-i.length;if("mod"!==I){(o=new t(null)).length=n+1,o.words=new Array(o.length);for(var s=0;s<o.length;s++)o.words[s]=0}var l=C.clone()._ishlnsubmul(i,1,n);0===l.negative&&(C=l,o&&(o.words[n]=1));for(var r=n-1;r>=0;r--){var c=67108864*(0|C.words[i.length+r])+(0|C.words[i.length+r-1]);for(c=Math.min(c/e|0,67108863),C._ishlnsubmul(i,c,r);0!==C.negative;)c--,C.negative=0,C._ishlnsubmul(i,1,r),C.isZero()||(C.negative^=1);o&&(o.words[r]=c)}return o&&o.strip(),C.strip(),"div"!==I&&0!==A&&C.iushrn(A),{div:o||null,mod:C}},t.prototype.divmod=function(g,I,C){return A(!g.isZero()),this.isZero()?{div:new t(0),mod:new t(0)}:0!==this.negative&&0===g.negative?(o=this.neg().divmod(g,I),"mod"!==I&&(i=o.div.neg()),"div"!==I&&(e=o.mod.neg(),C&&0!==e.negative&&e.iadd(g)),{div:i,mod:e}):0===this.negative&&0!==g.negative?(o=this.divmod(g.neg(),I),"mod"!==I&&(i=o.div.neg()),{div:i,mod:o.mod}):0!=(this.negative&g.negative)?(o=this.neg().divmod(g.neg(),I),"div"!==I&&(e=o.mod.neg(),C&&0!==e.negative&&e.isub(g)),{div:o.div,mod:e}):g.length>this.length||this.cmp(g)<0?{div:new t(0),mod:this}:1===g.length?"div"===I?{div:this.divn(g.words[0]),mod:null}:"mod"===I?{div:null,mod:new t(this.modn(g.words[0]))}:{div:this.divn(g.words[0]),mod:new t(this.modn(g.words[0]))}:this._wordDiv(g,I);var i,e,o},t.prototype.div=function(g){return this.divmod(g,"div",!1).div},t.prototype.mod=function(g){return this.divmod(g,"mod",!1).mod},t.prototype.umod=function(g){return this.divmod(g,"mod",!0).mod},t.prototype.divRound=function(g){var I=this.divmod(g);if(I.mod.isZero())return I.div;var A=0!==I.div.negative?I.mod.isub(g):I.mod,C=g.ushrn(1),t=g.andln(1),i=A.cmp(C);return i<0||1===t&&0===i?I.div:0!==I.div.negative?I.div.isubn(1):I.div.iaddn(1)},t.prototype.modn=function(g){A(g<=67108863);for(var I=(1<<26)%g,C=0,t=this.length-1;t>=0;t--)C=(I*C+(0|this.words[t]))%g;return C},t.prototype.idivn=function(g){A(g<=67108863);for(var I=0,C=this.length-1;C>=0;C--){var t=(0|this.words[C])+67108864*I;this.words[C]=t/g|0,I=t%g}return this.strip()},t.prototype.divn=function(g){return this.clone().idivn(g)},t.prototype.egcd=function(g){A(0===g.negative),A(!g.isZero());var I=this,C=g.clone();I=0!==I.negative?I.umod(g):I.clone();for(var i=new t(1),e=new t(0),o=new t(0),n=new t(1),s=0;I.isEven()&&C.isEven();)I.iushrn(1),C.iushrn(1),++s;for(var l=C.clone(),r=I.clone();!I.isZero();){for(var c=0,a=1;0==(I.words[0]&a)&&c<26;++c,a<<=1);if(c>0)for(I.iushrn(c);c-- >0;)(i.isOdd()||e.isOdd())&&(i.iadd(l),e.isub(r)),i.iushrn(1),e.iushrn(1);for(var d=0,h=1;0==(C.words[0]&h)&&d<26;++d,h<<=1);if(d>0)for(C.iushrn(d);d-- >0;)(o.isOdd()||n.isOdd())&&(o.iadd(l),n.isub(r)),o.iushrn(1),n.iushrn(1);I.cmp(C)>=0?(I.isub(C),i.isub(o),e.isub(n)):(C.isub(I),o.isub(i),n.isub(e))}return{a:o,b:n,gcd:C.iushln(s)}},t.prototype._invmp=function(g){A(0===g.negative),A(!g.isZero());var I=this,C=g.clone();I=0!==I.negative?I.umod(g):I.clone();for(var i,e=new t(1),o=new t(0),n=C.clone();I.cmpn(1)>0&&C.cmpn(1)>0;){for(var s=0,l=1;0==(I.words[0]&l)&&s<26;++s,l<<=1);if(s>0)for(I.iushrn(s);s-- >0;)e.isOdd()&&e.iadd(n),e.iushrn(1);for(var r=0,c=1;0==(C.words[0]&c)&&r<26;++r,c<<=1);if(r>0)for(C.iushrn(r);r-- >0;)o.isOdd()&&o.iadd(n),o.iushrn(1);I.cmp(C)>=0?(I.isub(C),e.isub(o)):(C.isub(I),o.isub(e))}return(i=0===I.cmpn(1)?e:o).cmpn(0)<0&&i.iadd(g),i},t.prototype.gcd=function(g){if(this.isZero())return g.abs();if(g.isZero())return this.abs();var I=this.clone(),A=g.clone();I.negative=0,A.negative=0;for(var C=0;I.isEven()&&A.isEven();C++)I.iushrn(1),A.iushrn(1);for(;;){for(;I.isEven();)I.iushrn(1);for(;A.isEven();)A.iushrn(1);var t=I.cmp(A);if(t<0){var i=I;I=A,A=i}else if(0===t||0===A.cmpn(1))break;I.isub(A)}return A.iushln(C)},t.prototype.invm=function(g){return this.egcd(g).a.umod(g)},t.prototype.isEven=function(){return 0==(1&this.words[0])},t.prototype.isOdd=function(){return 1==(1&this.words[0])},t.prototype.andln=function(g){return this.words[0]&g},t.prototype.bincn=function(g){A("number"==typeof g);var I=g%26,C=(g-I)/26,t=1<<I;if(this.length<=C)return this._expand(C+1),this.words[C]|=t,this;for(var i=t,e=C;0!==i&&e<this.length;e++){var o=0|this.words[e];i=(o+=i)>>>26,o&=67108863,this.words[e]=o}return 0!==i&&(this.words[e]=i,this.length++),this},t.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},t.prototype.cmpn=function(g){var I,C=g<0;if(0!==this.negative&&!C)return-1;if(0===this.negative&&C)return 1;if(this.strip(),this.length>1)I=1;else{C&&(g=-g),A(g<=67108863,"Number is too big");var t=0|this.words[0];I=t===g?0:t<g?-1:1}return 0!==this.negative?0|-I:I},t.prototype.cmp=function(g){if(0!==this.negative&&0===g.negative)return-1;if(0===this.negative&&0!==g.negative)return 1;var I=this.ucmp(g);return 0!==this.negative?0|-I:I},t.prototype.ucmp=function(g){if(this.length>g.length)return 1;if(this.length<g.length)return-1;for(var I=0,A=this.length-1;A>=0;A--){var C=0|this.words[A],t=0|g.words[A];if(C!==t){C<t?I=-1:C>t&&(I=1);break}}return I},t.prototype.gtn=function(g){return 1===this.cmpn(g)},t.prototype.gt=function(g){return 1===this.cmp(g)},t.prototype.gten=function(g){return this.cmpn(g)>=0},t.prototype.gte=function(g){return this.cmp(g)>=0},t.prototype.ltn=function(g){return-1===this.cmpn(g)},t.prototype.lt=function(g){return-1===this.cmp(g)},t.prototype.lten=function(g){return this.cmpn(g)<=0},t.prototype.lte=function(g){return this.cmp(g)<=0},t.prototype.eqn=function(g){return 0===this.cmpn(g)},t.prototype.eq=function(g){return 0===this.cmp(g)},t.red=function(g){return new B(g)},t.prototype.toRed=function(g){return A(!this.red,"Already a number in reduction context"),A(0===this.negative,"red works only with positives"),g.convertTo(this)._forceRed(g)},t.prototype.fromRed=function(){return A(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},t.prototype._forceRed=function(g){return this.red=g,this},t.prototype.forceRed=function(g){return A(!this.red,"Already a number in reduction context"),this._forceRed(g)},t.prototype.redAdd=function(g){return A(this.red,"redAdd works only with red numbers"),this.red.add(this,g)},t.prototype.redIAdd=function(g){return A(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,g)},t.prototype.redSub=function(g){return A(this.red,"redSub works only with red numbers"),this.red.sub(this,g)},t.prototype.redISub=function(g){return A(this.red,"redISub works only with red numbers"),this.red.isub(this,g)},t.prototype.redShl=function(g){return A(this.red,"redShl works only with red numbers"),this.red.shl(this,g)},t.prototype.redMul=function(g){return A(this.red,"redMul works only with red numbers"),this.red._verify2(this,g),this.red.mul(this,g)},t.prototype.redIMul=function(g){return A(this.red,"redMul works only with red numbers"),this.red._verify2(this,g),this.red.imul(this,g)},t.prototype.redSqr=function(){return A(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},t.prototype.redISqr=function(){return A(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},t.prototype.redSqrt=function(){return A(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},t.prototype.redInvm=function(){return A(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},t.prototype.redNeg=function(){return A(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},t.prototype.redPow=function(g){return A(this.red&&!g.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,g)};var m={k256:null,p224:null,p192:null,p25519:null};function Z(g,I){this.name=g,this.p=new t(I,16),this.n=this.p.bitLength(),this.k=new t(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function u(){Z.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function G(){Z.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function b(){Z.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function p(){Z.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function B(g){if("string"==typeof g){var I=t._prime(g);this.m=I.p,this.prime=I}else A(g.gtn(1),"modulus must be greater than 1"),this.m=g,this.prime=null}function y(g){B.call(this,g),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new t(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}Z.prototype._tmp=function(){var g=new t(null);return g.words=new Array(Math.ceil(this.n/13)),g},Z.prototype.ireduce=function(g){var I,A=g;do{this.split(A,this.tmp),I=(A=(A=this.imulK(A)).iadd(this.tmp)).bitLength()}while(I>this.n);var C=I<this.n?-1:A.ucmp(this.p);return 0===C?(A.words[0]=0,A.length=1):C>0?A.isub(this.p):void 0!==A.strip?A.strip():A._strip(),A},Z.prototype.split=function(g,I){g.iushrn(this.n,0,I)},Z.prototype.imulK=function(g){return g.imul(this.k)},C(u,Z),u.prototype.split=function(g,I){for(var A=4194303,C=Math.min(g.length,9),t=0;t<C;t++)I.words[t]=g.words[t];if(I.length=C,g.length<=9)return g.words[0]=0,void(g.length=1);var i=g.words[9];for(I.words[I.length++]=i&A,t=10;t<g.length;t++){var e=0|g.words[t];g.words[t-10]=(e&A)<<4|i>>>22,i=e}i>>>=22,g.words[t-10]=i,0===i&&g.length>10?g.length-=10:g.length-=9},u.prototype.imulK=function(g){g.words[g.length]=0,g.words[g.length+1]=0,g.length+=2;for(var I=0,A=0;A<g.length;A++){var C=0|g.words[A];I+=977*C,g.words[A]=67108863&I,I=64*C+(I/67108864|0)}return 0===g.words[g.length-1]&&(g.length--,0===g.words[g.length-1]&&g.length--),g},C(G,Z),C(b,Z),C(p,Z),p.prototype.imulK=function(g){for(var I=0,A=0;A<g.length;A++){var C=19*(0|g.words[A])+I,t=67108863&C;C>>>=26,g.words[A]=t,I=C}return 0!==I&&(g.words[g.length++]=I),g},t._prime=function(g){if(m[g])return m[g];var I;if("k256"===g)I=new u;else if("p224"===g)I=new G;else if("p192"===g)I=new b;else{if("p25519"!==g)throw new Error("Unknown prime "+g);I=new p}return m[g]=I,I},B.prototype._verify1=function(g){A(0===g.negative,"red works only with positives"),A(g.red,"red works only with red numbers")},B.prototype._verify2=function(g,I){A(0==(g.negative|I.negative),"red works only with positives"),A(g.red&&g.red===I.red,"red works only with red numbers")},B.prototype.imod=function(g){return this.prime?this.prime.ireduce(g)._forceRed(this):g.umod(this.m)._forceRed(this)},B.prototype.neg=function(g){return g.isZero()?g.clone():this.m.sub(g)._forceRed(this)},B.prototype.add=function(g,I){this._verify2(g,I);var A=g.add(I);return A.cmp(this.m)>=0&&A.isub(this.m),A._forceRed(this)},B.prototype.iadd=function(g,I){this._verify2(g,I);var A=g.iadd(I);return A.cmp(this.m)>=0&&A.isub(this.m),A},B.prototype.sub=function(g,I){this._verify2(g,I);var A=g.sub(I);return A.cmpn(0)<0&&A.iadd(this.m),A._forceRed(this)},B.prototype.isub=function(g,I){this._verify2(g,I);var A=g.isub(I);return A.cmpn(0)<0&&A.iadd(this.m),A},B.prototype.shl=function(g,I){return this._verify1(g),this.imod(g.ushln(I))},B.prototype.imul=function(g,I){return this._verify2(g,I),this.imod(g.imul(I))},B.prototype.mul=function(g,I){return this._verify2(g,I),this.imod(g.mul(I))},B.prototype.isqr=function(g){return this.imul(g,g.clone())},B.prototype.sqr=function(g){return this.mul(g,g)},B.prototype.sqrt=function(g){if(g.isZero())return g.clone();var I=this.m.andln(3);if(A(I%2==1),3===I){var C=this.m.add(new t(1)).iushrn(2);return this.pow(g,C)}for(var i=this.m.subn(1),e=0;!i.isZero()&&0===i.andln(1);)e++,i.iushrn(1);A(!i.isZero());var o=new t(1).toRed(this),n=o.redNeg(),s=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new t(2*l*l).toRed(this);0!==this.pow(l,s).cmp(n);)l.redIAdd(n);for(var r=this.pow(l,i),c=this.pow(g,i.addn(1).iushrn(1)),a=this.pow(g,i),d=e;0!==a.cmp(o);){for(var h=a,m=0;0!==h.cmp(o);m++)h=h.redSqr();A(m<d);var Z=this.pow(r,new t(1).iushln(d-m-1));c=c.redMul(Z),r=Z.redSqr(),a=a.redMul(r),d=m}return c},B.prototype.invm=function(g){var I=g._invmp(this.m);return 0!==I.negative?(I.negative=0,this.imod(I).redNeg()):this.imod(I)},B.prototype.pow=function(g,I){if(I.isZero())return new t(1).toRed(this);if(0===I.cmpn(1))return g.clone();var A=new Array(16);A[0]=new t(1).toRed(this),A[1]=g;for(var C=2;C<A.length;C++)A[C]=this.mul(A[C-1],g);var i=A[0],e=0,o=0,n=I.bitLength()%26;for(0===n&&(n=26),C=I.length-1;C>=0;C--){for(var s=I.words[C],l=n-1;l>=0;l--){var r=s>>l&1;i!==A[0]&&(i=this.sqr(i)),0!==r||0!==e?(e<<=1,e|=r,(4===++o||0===C&&0===l)&&(i=this.mul(i,A[e]),o=0,e=0)):o=0}n=26}return i},B.prototype.convertTo=function(g){var I=g.umod(this.m);return I===g?I.clone():I},B.prototype.convertFrom=function(g){var I=g.clone();return I.red=null,I},t.mont=function(g){return new y(g)},C(y,B),y.prototype.convertTo=function(g){return this.imod(g.ushln(this.shift))},y.prototype.convertFrom=function(g){var I=this.imod(g.mul(this.rinv));return I.red=null,I},y.prototype.imul=function(g,I){if(g.isZero()||I.isZero())return g.words[0]=0,g.length=1,g;var A=g.imul(I),C=A.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),t=A.isub(C).iushrn(this.shift),i=t;return t.cmp(this.m)>=0?i=t.isub(this.m):t.cmpn(0)<0&&(i=t.iadd(this.m)),i._forceRed(this)},y.prototype.mul=function(g,I){if(g.isZero()||I.isZero())return new t(0)._forceRed(this);var A=g.mul(I),C=A.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=A.isub(C).iushrn(this.shift),e=i;return i.cmp(this.m)>=0?e=i.isub(this.m):i.cmpn(0)<0&&(e=i.iadd(this.m)),e._forceRed(this)},y.prototype.invm=function(g){return this.imod(g._invmp(this.m).mul(this.r2))._forceRed(this)}}(g,ot)}(hs);var ms,Zs={},us={},Gs=nt,bs=Gs.Buffer,ps={};for(ms in Gs)Gs.hasOwnProperty(ms)&&"SlowBuffer"!==ms&&"Buffer"!==ms&&(ps[ms]=Gs[ms]);var Bs=ps.Buffer={};for(ms in bs)bs.hasOwnProperty(ms)&&"allocUnsafe"!==ms&&"allocUnsafeSlow"!==ms&&(Bs[ms]=bs[ms]);if(ps.Buffer.prototype=bs.prototype,Bs.from&&Bs.from!==Uint8Array.from||(Bs.from=function(g,I,A){if("number"==typeof g)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof g);if(g&&void 0===g.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g);return bs(g,I,A)}),Bs.alloc||(Bs.alloc=function(g,I,A){if("number"!=typeof g)throw new TypeError('The "size" argument must be of type number. Received type '+typeof g);if(g<0||g>=2*(1<<30))throw new RangeError('The value "'+g+'" is invalid for option "size"');var C=bs(g);return I&&0!==I.length?"string"==typeof A?C.fill(I,A):C.fill(I):C.fill(0),C}),!ps.kStringMaxLength)try{ps.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch(dD){}ps.constants||(ps.constants={MAX_LENGTH:ps.kMaxLength},ps.kStringMaxLength&&(ps.constants.MAX_STRING_LENGTH=ps.kStringMaxLength));var ys=ps,ws={};const Ws=ki.exports;function Ss(g){this._reporterState={obj:null,path:[],options:g||{},errors:[]}}function Ks(g,I){this.path=g,this.rethrow(I)}ws.Reporter=Ss,Ss.prototype.isError=function(g){return g instanceof Ks},Ss.prototype.save=function(){const g=this._reporterState;return{obj:g.obj,pathLen:g.path.length}},Ss.prototype.restore=function(g){const I=this._reporterState;I.obj=g.obj,I.path=I.path.slice(0,g.pathLen)},Ss.prototype.enterKey=function(g){return this._reporterState.path.push(g)},Ss.prototype.exitKey=function(g){const I=this._reporterState;I.path=I.path.slice(0,g-1)},Ss.prototype.leaveKey=function(g,I,A){const C=this._reporterState;this.exitKey(g),null!==C.obj&&(C.obj[I]=A)},Ss.prototype.path=function(){return this._reporterState.path.join("/")},Ss.prototype.enterObject=function(){const g=this._reporterState,I=g.obj;return g.obj={},I},Ss.prototype.leaveObject=function(g){const I=this._reporterState,A=I.obj;return I.obj=g,A},Ss.prototype.error=function(g){let I;const A=this._reporterState,C=g instanceof Ks;if(I=C?g:new Ks(A.path.map((function(g){return"["+JSON.stringify(g)+"]"})).join(""),g.message||g,g.stack),!A.options.partial)throw I;return C||A.errors.push(I),I},Ss.prototype.wrapResult=function(g){const I=this._reporterState;return I.options.partial?{result:this.isError(g)?null:g,errors:I.errors}:g},Ws(Ks,Error),Ks.prototype.rethrow=function(g){if(this.message=g+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,Ks),!this.stack)try{throw new Error(this.message)}catch(dD){this.stack=dD.stack}return this};var fs={};const Ys=ki.exports,Xs=ws.Reporter,Vs=ys.Buffer;function Os(g,I){Xs.call(this,I),Vs.isBuffer(g)?(this.base=g,this.offset=0,this.length=g.length):this.error("Input not Buffer")}function Rs(g,I){if(Array.isArray(g))this.length=0,this.value=g.map((function(g){return Rs.isEncoderBuffer(g)||(g=new Rs(g,I)),this.length+=g.length,g}),this);else if("number"==typeof g){if(!(0<=g&&g<=255))return I.error("non-byte EncoderBuffer value");this.value=g,this.length=1}else if("string"==typeof g)this.value=g,this.length=Vs.byteLength(g);else{if(!Vs.isBuffer(g))return I.error("Unsupported type: "+typeof g);this.value=g,this.length=g.length}}Ys(Os,Xs),fs.DecoderBuffer=Os,Os.isDecoderBuffer=function(g){if(g instanceof Os)return!0;return"object"==typeof g&&Vs.isBuffer(g.base)&&"DecoderBuffer"===g.constructor.name&&"number"==typeof g.offset&&"number"==typeof g.length&&"function"==typeof g.save&&"function"==typeof g.restore&&"function"==typeof g.isEmpty&&"function"==typeof g.readUInt8&&"function"==typeof g.skip&&"function"==typeof g.raw},Os.prototype.save=function(){return{offset:this.offset,reporter:Xs.prototype.save.call(this)}},Os.prototype.restore=function(g){const I=new Os(this.base);return I.offset=g.offset,I.length=this.offset,this.offset=g.offset,Xs.prototype.restore.call(this,g.reporter),I},Os.prototype.isEmpty=function(){return this.offset===this.length},Os.prototype.readUInt8=function(g){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(g||"DecoderBuffer overrun")},Os.prototype.skip=function(g,I){if(!(this.offset+g<=this.length))return this.error(I||"DecoderBuffer overrun");const A=new Os(this.base);return A._reporterState=this._reporterState,A.offset=this.offset,A.length=this.offset+g,this.offset+=g,A},Os.prototype.raw=function(g){return this.base.slice(g?g.offset:this.offset,this.length)},fs.EncoderBuffer=Rs,Rs.isEncoderBuffer=function(g){if(g instanceof Rs)return!0;return"object"==typeof g&&"EncoderBuffer"===g.constructor.name&&"number"==typeof g.length&&"function"==typeof g.join},Rs.prototype.join=function(g,I){return g||(g=Vs.alloc(this.length)),I||(I=0),0===this.length||(Array.isArray(this.value)?this.value.forEach((function(A){A.join(g,I),I+=A.length})):("number"==typeof this.value?g[I]=this.value:"string"==typeof this.value?g.write(this.value,I):Vs.isBuffer(this.value)&&this.value.copy(g,I),I+=this.length)),g};const Qs=ws.Reporter,Hs=fs.EncoderBuffer,ks=fs.DecoderBuffer,Js=Zi,vs=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],Ds=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(vs);function Ms(g,I,A){const C={};this._baseState=C,C.name=A,C.enc=g,C.parent=I||null,C.children=null,C.tag=null,C.args=null,C.reverseArgs=null,C.choice=null,C.optional=!1,C.any=!1,C.obj=!1,C.use=null,C.useDecoder=null,C.key=null,C.default=null,C.explicit=null,C.implicit=null,C.contains=null,C.parent||(C.children=[],this._wrap())}var Ns=Ms;const Es=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];Ms.prototype.clone=function(){const g=this._baseState,I={};Es.forEach((function(A){I[A]=g[A]}));const A=new this.constructor(I.parent);return A._baseState=I,A},Ms.prototype._wrap=function(){const g=this._baseState;Ds.forEach((function(I){this[I]=function(){const A=new this.constructor(this);return g.children.push(A),A[I].apply(A,arguments)}}),this)},Ms.prototype._init=function(g){const I=this._baseState;Js(null===I.parent),g.call(this),I.children=I.children.filter((function(g){return g._baseState.parent===this}),this),Js.equal(I.children.length,1,"Root node can have only one child")},Ms.prototype._useArgs=function(g){const I=this._baseState,A=g.filter((function(g){return g instanceof this.constructor}),this);g=g.filter((function(g){return!(g instanceof this.constructor)}),this),0!==A.length&&(Js(null===I.children),I.children=A,A.forEach((function(g){g._baseState.parent=this}),this)),0!==g.length&&(Js(null===I.args),I.args=g,I.reverseArgs=g.map((function(g){if("object"!=typeof g||g.constructor!==Object)return g;const I={};return Object.keys(g).forEach((function(A){A==(0|A)&&(A|=0);const C=g[A];I[C]=A})),I})))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach((function(g){Ms.prototype[g]=function(){const I=this._baseState;throw new Error(g+" not implemented for encoding: "+I.enc)}})),vs.forEach((function(g){Ms.prototype[g]=function(){const I=this._baseState,A=Array.prototype.slice.call(arguments);return Js(null===I.tag),I.tag=g,this._useArgs(A),this}})),Ms.prototype.use=function(g){Js(g);const I=this._baseState;return Js(null===I.use),I.use=g,this},Ms.prototype.optional=function(){return this._baseState.optional=!0,this},Ms.prototype.def=function(g){const I=this._baseState;return Js(null===I.default),I.default=g,I.optional=!0,this},Ms.prototype.explicit=function(g){const I=this._baseState;return Js(null===I.explicit&&null===I.implicit),I.explicit=g,this},Ms.prototype.implicit=function(g){const I=this._baseState;return Js(null===I.explicit&&null===I.implicit),I.implicit=g,this},Ms.prototype.obj=function(){const g=this._baseState,I=Array.prototype.slice.call(arguments);return g.obj=!0,0!==I.length&&this._useArgs(I),this},Ms.prototype.key=function(g){const I=this._baseState;return Js(null===I.key),I.key=g,this},Ms.prototype.any=function(){return this._baseState.any=!0,this},Ms.prototype.choice=function(g){const I=this._baseState;return Js(null===I.choice),I.choice=g,this._useArgs(Object.keys(g).map((function(I){return g[I]}))),this},Ms.prototype.contains=function(g){const I=this._baseState;return Js(null===I.use),I.contains=g,this},Ms.prototype._decode=function(g,I){const A=this._baseState;if(null===A.parent)return g.wrapResult(A.children[0]._decode(g,I));let C,t=A.default,i=!0,e=null;if(null!==A.key&&(e=g.enterKey(A.key)),A.optional){let C=null;if(null!==A.explicit?C=A.explicit:null!==A.implicit?C=A.implicit:null!==A.tag&&(C=A.tag),null!==C||A.any){if(i=this._peekTag(g,C,A.any),g.isError(i))return i}else{const C=g.save();try{null===A.choice?this._decodeGeneric(A.tag,g,I):this._decodeChoice(g,I),i=!0}catch(dD){i=!1}g.restore(C)}}if(A.obj&&i&&(C=g.enterObject()),i){if(null!==A.explicit){const I=this._decodeTag(g,A.explicit);if(g.isError(I))return I;g=I}const C=g.offset;if(null===A.use&&null===A.choice){let I;A.any&&(I=g.save());const C=this._decodeTag(g,null!==A.implicit?A.implicit:A.tag,A.any);if(g.isError(C))return C;A.any?t=g.raw(I):g=C}if(I&&I.track&&null!==A.tag&&I.track(g.path(),C,g.length,"tagged"),I&&I.track&&null!==A.tag&&I.track(g.path(),g.offset,g.length,"content"),A.any||(t=null===A.choice?this._decodeGeneric(A.tag,g,I):this._decodeChoice(g,I)),g.isError(t))return t;if(A.any||null!==A.choice||null===A.children||A.children.forEach((function(A){A._decode(g,I)})),A.contains&&("octstr"===A.tag||"bitstr"===A.tag)){const C=new ks(t);t=this._getUse(A.contains,g._reporterState.obj)._decode(C,I)}}return A.obj&&i&&(t=g.leaveObject(C)),null===A.key||null===t&&!0!==i?null!==e&&g.exitKey(e):g.leaveKey(e,A.key,t),t},Ms.prototype._decodeGeneric=function(g,I,A){const C=this._baseState;return"seq"===g||"set"===g?null:"seqof"===g||"setof"===g?this._decodeList(I,g,C.args[0],A):/str$/.test(g)?this._decodeStr(I,g,A):"objid"===g&&C.args?this._decodeObjid(I,C.args[0],C.args[1],A):"objid"===g?this._decodeObjid(I,null,null,A):"gentime"===g||"utctime"===g?this._decodeTime(I,g,A):"null_"===g?this._decodeNull(I,A):"bool"===g?this._decodeBool(I,A):"objDesc"===g?this._decodeStr(I,g,A):"int"===g||"enum"===g?this._decodeInt(I,C.args&&C.args[0],A):null!==C.use?this._getUse(C.use,I._reporterState.obj)._decode(I,A):I.error("unknown tag: "+g)},Ms.prototype._getUse=function(g,I){const A=this._baseState;return A.useDecoder=this._use(g,I),Js(null===A.useDecoder._baseState.parent),A.useDecoder=A.useDecoder._baseState.children[0],A.implicit!==A.useDecoder._baseState.implicit&&(A.useDecoder=A.useDecoder.clone(),A.useDecoder._baseState.implicit=A.implicit),A.useDecoder},Ms.prototype._decodeChoice=function(g,I){const A=this._baseState;let C=null,t=!1;return Object.keys(A.choice).some((function(i){const e=g.save(),o=A.choice[i];try{const A=o._decode(g,I);if(g.isError(A))return!1;C={type:i,value:A},t=!0}catch(dD){return g.restore(e),!1}return!0}),this),t?C:g.error("Choice not matched")},Ms.prototype._createEncoderBuffer=function(g){return new Hs(g,this.reporter)},Ms.prototype._encode=function(g,I,A){const C=this._baseState;if(null!==C.default&&C.default===g)return;const t=this._encodeValue(g,I,A);return void 0===t||this._skipDefault(t,I,A)?void 0:t},Ms.prototype._encodeValue=function(g,I,A){const C=this._baseState;if(null===C.parent)return C.children[0]._encode(g,I||new Qs);let t=null;if(this.reporter=I,C.optional&&void 0===g){if(null===C.default)return;g=C.default}let i=null,e=!1;if(C.any)t=this._createEncoderBuffer(g);else if(C.choice)t=this._encodeChoice(g,I);else if(C.contains)i=this._getUse(C.contains,A)._encode(g,I),e=!0;else if(C.children)i=C.children.map((function(A){if("null_"===A._baseState.tag)return A._encode(null,I,g);if(null===A._baseState.key)return I.error("Child should have a key");const C=I.enterKey(A._baseState.key);if("object"!=typeof g)return I.error("Child expected, but input is not object");const t=A._encode(g[A._baseState.key],I,g);return I.leaveKey(C),t}),this).filter((function(g){return g})),i=this._createEncoderBuffer(i);else if("seqof"===C.tag||"setof"===C.tag){if(!C.args||1!==C.args.length)return I.error("Too many args for : "+C.tag);if(!Array.isArray(g))return I.error("seqof/setof, but data is not Array");const A=this.clone();A._baseState.implicit=null,i=this._createEncoderBuffer(g.map((function(A){const C=this._baseState;return this._getUse(C.args[0],g)._encode(A,I)}),A))}else null!==C.use?t=this._getUse(C.use,A)._encode(g,I):(i=this._encodePrimitive(C.tag,g),e=!0);if(!C.any&&null===C.choice){const g=null!==C.implicit?C.implicit:C.tag,A=null===C.implicit?"universal":"context";null===g?null===C.use&&I.error("Tag could be omitted only for .use()"):null===C.use&&(t=this._encodeComposite(g,e,A,i))}return null!==C.explicit&&(t=this._encodeComposite(C.explicit,!1,"context",t)),t},Ms.prototype._encodeChoice=function(g,I){const A=this._baseState,C=A.choice[g.type];return C||Js(!1,g.type+" not found in "+JSON.stringify(Object.keys(A.choice))),C._encode(g.value,I)},Ms.prototype._encodePrimitive=function(g,I){const A=this._baseState;if(/str$/.test(g))return this._encodeStr(I,g);if("objid"===g&&A.args)return this._encodeObjid(I,A.reverseArgs[0],A.args[1]);if("objid"===g)return this._encodeObjid(I,null,null);if("gentime"===g||"utctime"===g)return this._encodeTime(I,g);if("null_"===g)return this._encodeNull();if("int"===g||"enum"===g)return this._encodeInt(I,A.args&&A.reverseArgs[0]);if("bool"===g)return this._encodeBool(I);if("objDesc"===g)return this._encodeStr(I,g);throw new Error("Unsupported tag: "+g)},Ms.prototype._isNumstr=function(g){return/^[0-9 ]*$/.test(g)},Ms.prototype._isPrintstr=function(g){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(g)};var Fs={};!function(g){function I(g){const I={};return Object.keys(g).forEach((function(A){(0|A)==A&&(A|=0);const C=g[A];I[C]=A})),I}g.tagClass={0:"universal",1:"application",2:"context",3:"private"},g.tagClassByName=I(g.tagClass),g.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},g.tagByName=I(g.tag)}(Fs);const Ls=ki.exports,Ts=ys.Buffer,zs=Ns,Ps=Fs;function Us(g){this.enc="der",this.name=g.name,this.entity=g,this.tree=new js,this.tree._init(g.body)}var xs=Us;function js(g){zs.call(this,"der",g)}function _s(g){return g<10?"0"+g:g}Us.prototype.encode=function(g,I){return this.tree._encode(g,I).join()},Ls(js,zs),js.prototype._encodeComposite=function(g,I,A,C){const t=function(g,I,A,C){let t;"seqof"===g?g="seq":"setof"===g&&(g="set");if(Ps.tagByName.hasOwnProperty(g))t=Ps.tagByName[g];else{if("number"!=typeof g||(0|g)!==g)return C.error("Unknown tag: "+g);t=g}if(t>=31)return C.error("Multi-octet tag encoding unsupported");I||(t|=32);return t|=Ps.tagClassByName[A||"universal"]<<6,t}(g,I,A,this.reporter);if(C.length<128){const g=Ts.alloc(2);return g[0]=t,g[1]=C.length,this._createEncoderBuffer([g,C])}let i=1;for(let o=C.length;o>=256;o>>=8)i++;const e=Ts.alloc(2+i);e[0]=t,e[1]=128|i;for(let o=1+i,n=C.length;n>0;o--,n>>=8)e[o]=255&n;return this._createEncoderBuffer([e,C])},js.prototype._encodeStr=function(g,I){if("bitstr"===I)return this._createEncoderBuffer([0|g.unused,g.data]);if("bmpstr"===I){const I=Ts.alloc(2*g.length);for(let A=0;A<g.length;A++)I.writeUInt16BE(g.charCodeAt(A),2*A);return this._createEncoderBuffer(I)}return"numstr"===I?this._isNumstr(g)?this._createEncoderBuffer(g):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===I?this._isPrintstr(g)?this._createEncoderBuffer(g):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(I)||"objDesc"===I?this._createEncoderBuffer(g):this.reporter.error("Encoding of string type: "+I+" unsupported")},js.prototype._encodeObjid=function(g,I,A){if("string"==typeof g){if(!I)return this.reporter.error("string objid given, but no values map found");if(!I.hasOwnProperty(g))return this.reporter.error("objid not found in values map");g=I[g].split(/[\s.]+/g);for(let I=0;I<g.length;I++)g[I]|=0}else if(Array.isArray(g)){g=g.slice();for(let I=0;I<g.length;I++)g[I]|=0}if(!Array.isArray(g))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(g));if(!A){if(g[1]>=40)return this.reporter.error("Second objid identifier OOB");g.splice(0,2,40*g[0]+g[1])}let C=0;for(let e=0;e<g.length;e++){let I=g[e];for(C++;I>=128;I>>=7)C++}const t=Ts.alloc(C);let i=t.length-1;for(let e=g.length-1;e>=0;e--){let I=g[e];for(t[i--]=127&I;(I>>=7)>0;)t[i--]=128|127&I}return this._createEncoderBuffer(t)},js.prototype._encodeTime=function(g,I){let A;const C=new Date(g);return"gentime"===I?A=[_s(C.getUTCFullYear()),_s(C.getUTCMonth()+1),_s(C.getUTCDate()),_s(C.getUTCHours()),_s(C.getUTCMinutes()),_s(C.getUTCSeconds()),"Z"].join(""):"utctime"===I?A=[_s(C.getUTCFullYear()%100),_s(C.getUTCMonth()+1),_s(C.getUTCDate()),_s(C.getUTCHours()),_s(C.getUTCMinutes()),_s(C.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+I+" time is not supported yet"),this._encodeStr(A,"octstr")},js.prototype._encodeNull=function(){return this._createEncoderBuffer("")},js.prototype._encodeInt=function(g,I){if("string"==typeof g){if(!I)return this.reporter.error("String int or enum given, but no values map");if(!I.hasOwnProperty(g))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(g));g=I[g]}if("number"!=typeof g&&!Ts.isBuffer(g)){const I=g.toArray();!g.sign&&128&I[0]&&I.unshift(0),g=Ts.from(I)}if(Ts.isBuffer(g)){let I=g.length;0===g.length&&I++;const A=Ts.alloc(I);return g.copy(A),0===g.length&&(A[0]=0),this._createEncoderBuffer(A)}if(g<128)return this._createEncoderBuffer(g);if(g<256)return this._createEncoderBuffer([0,g]);let A=1;for(let t=g;t>=256;t>>=8)A++;const C=new Array(A);for(let t=C.length-1;t>=0;t--)C[t]=255&g,g>>=8;return 128&C[0]&&C.unshift(0),this._createEncoderBuffer(Ts.from(C))},js.prototype._encodeBool=function(g){return this._createEncoderBuffer(g?255:0)},js.prototype._use=function(g,I){return"function"==typeof g&&(g=g(I)),g._getEncoder("der").tree},js.prototype._skipDefault=function(g,I,A){const C=this._baseState;let t;if(null===C.default)return!1;const i=g.join();if(void 0===C.defaultBuffer&&(C.defaultBuffer=this._encodeValue(C.default,I,A).join()),i.length!==C.defaultBuffer.length)return!1;for(t=0;t<i.length;t++)if(i[t]!==C.defaultBuffer[t])return!1;return!0};const $s=ki.exports,qs=xs;function gl(g){qs.call(this,g),this.enc="pem"}$s(gl,qs);var Il=gl;gl.prototype.encode=function(g,I){const A=qs.prototype.encode.call(this,g).toString("base64"),C=["-----BEGIN "+I.label+"-----"];for(let t=0;t<A.length;t+=64)C.push(A.slice(t,t+64));return C.push("-----END "+I.label+"-----"),C.join("\n")},function(g){const I=g;I.der=xs,I.pem=Il}(us);var Al={};const Cl=ki.exports,tl=hs.exports,il=fs.DecoderBuffer,el=Ns,ol=Fs;function nl(g){this.enc="der",this.name=g.name,this.entity=g,this.tree=new ll,this.tree._init(g.body)}var sl=nl;function ll(g){el.call(this,"der",g)}function rl(g,I){let A=g.readUInt8(I);if(g.isError(A))return A;const C=ol.tagClass[A>>6],t=0==(32&A);if(31==(31&A)){let C=A;for(A=0;128==(128&C);){if(C=g.readUInt8(I),g.isError(C))return C;A<<=7,A|=127&C}}else A&=31;return{cls:C,primitive:t,tag:A,tagStr:ol.tag[A]}}function cl(g,I,A){let C=g.readUInt8(A);if(g.isError(C))return C;if(!I&&128===C)return null;if(0==(128&C))return C;const t=127&C;if(t>4)return g.error("length octect is too long");C=0;for(let i=0;i<t;i++){C<<=8;const I=g.readUInt8(A);if(g.isError(I))return I;C|=I}return C}nl.prototype.decode=function(g,I){return il.isDecoderBuffer(g)||(g=new il(g,I)),this.tree._decode(g,I)},Cl(ll,el),ll.prototype._peekTag=function(g,I,A){if(g.isEmpty())return!1;const C=g.save(),t=rl(g,'Failed to peek tag: "'+I+'"');return g.isError(t)?t:(g.restore(C),t.tag===I||t.tagStr===I||t.tagStr+"of"===I||A)},ll.prototype._decodeTag=function(g,I,A){const C=rl(g,'Failed to decode tag of "'+I+'"');if(g.isError(C))return C;let t=cl(g,C.primitive,'Failed to get length of "'+I+'"');if(g.isError(t))return t;if(!A&&C.tag!==I&&C.tagStr!==I&&C.tagStr+"of"!==I)return g.error('Failed to match tag: "'+I+'"');if(C.primitive||null!==t)return g.skip(t,'Failed to match body of: "'+I+'"');const i=g.save(),e=this._skipUntilEnd(g,'Failed to skip indefinite length body: "'+this.tag+'"');return g.isError(e)?e:(t=g.offset-i.offset,g.restore(i),g.skip(t,'Failed to match body of: "'+I+'"'))},ll.prototype._skipUntilEnd=function(g,I){for(;;){const A=rl(g,I);if(g.isError(A))return A;const C=cl(g,A.primitive,I);if(g.isError(C))return C;let t;if(t=A.primitive||null!==C?g.skip(C):this._skipUntilEnd(g,I),g.isError(t))return t;if("end"===A.tagStr)break}},ll.prototype._decodeList=function(g,I,A,C){const t=[];for(;!g.isEmpty();){const I=this._peekTag(g,"end");if(g.isError(I))return I;const i=A.decode(g,"der",C);if(g.isError(i)&&I)break;t.push(i)}return t},ll.prototype._decodeStr=function(g,I){if("bitstr"===I){const I=g.readUInt8();return g.isError(I)?I:{unused:I,data:g.raw()}}if("bmpstr"===I){const I=g.raw();if(I.length%2==1)return g.error("Decoding of string type: bmpstr length mismatch");let A="";for(let g=0;g<I.length/2;g++)A+=String.fromCharCode(I.readUInt16BE(2*g));return A}if("numstr"===I){const I=g.raw().toString("ascii");return this._isNumstr(I)?I:g.error("Decoding of string type: numstr unsupported characters")}if("octstr"===I)return g.raw();if("objDesc"===I)return g.raw();if("printstr"===I){const I=g.raw().toString("ascii");return this._isPrintstr(I)?I:g.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(I)?g.raw().toString():g.error("Decoding of string type: "+I+" unsupported")},ll.prototype._decodeObjid=function(g,I,A){let C;const t=[];let i=0,e=0;for(;!g.isEmpty();)e=g.readUInt8(),i<<=7,i|=127&e,0==(128&e)&&(t.push(i),i=0);128&e&&t.push(i);const o=t[0]/40|0,n=t[0]%40;if(C=A?t:[o,n].concat(t.slice(1)),I){let g=I[C.join(" ")];void 0===g&&(g=I[C.join(".")]),void 0!==g&&(C=g)}return C},ll.prototype._decodeTime=function(g,I){const A=g.raw().toString();let C,t,i,e,o,n;if("gentime"===I)C=0|A.slice(0,4),t=0|A.slice(4,6),i=0|A.slice(6,8),e=0|A.slice(8,10),o=0|A.slice(10,12),n=0|A.slice(12,14);else{if("utctime"!==I)return g.error("Decoding "+I+" time is not supported yet");C=0|A.slice(0,2),t=0|A.slice(2,4),i=0|A.slice(4,6),e=0|A.slice(6,8),o=0|A.slice(8,10),n=0|A.slice(10,12),C=C<70?2e3+C:1900+C}return Date.UTC(C,t-1,i,e,o,n,0)},ll.prototype._decodeNull=function(){return null},ll.prototype._decodeBool=function(g){const I=g.readUInt8();return g.isError(I)?I:0!==I},ll.prototype._decodeInt=function(g,I){const A=g.raw();let C=new tl(A);return I&&(C=I[C.toString(10)]||C),C},ll.prototype._use=function(g,I){return"function"==typeof g&&(g=g(I)),g._getDecoder("der").tree};const al=ki.exports,dl=ys.Buffer,hl=sl;function ml(g){hl.call(this,g),this.enc="pem"}al(ml,hl);var Zl=ml;ml.prototype.decode=function(g,I){const A=g.toString().split(/[\r\n]+/g),C=I.label.toUpperCase(),t=/^-----(BEGIN|END) ([^-]+)-----$/;let i=-1,e=-1;for(let s=0;s<A.length;s++){const g=A[s].match(t);if(null!==g&&g[2]===C){if(-1!==i){if("END"!==g[1])break;e=s;break}if("BEGIN"!==g[1])break;i=s}}if(-1===i||-1===e)throw new Error("PEM section not found for: "+C);const o=A.slice(i+1,e).join("");o.replace(/[^a-z0-9+/=]+/gi,"");const n=dl.from(o,"base64");return hl.prototype.decode.call(this,n,I)},function(g){const I=g;I.der=sl,I.pem=Zl}(Al),function(g){const I=us,A=Al,C=ki.exports;function t(g,I){this.name=g,this.body=I,this.decoders={},this.encoders={}}g.define=function(g,I){return new t(g,I)},t.prototype._createNamed=function(g){const I=this.name;function A(g){this._initNamed(g,I)}return C(A,g),A.prototype._initNamed=function(I,A){g.call(this,I,A)},new A(this)},t.prototype._getDecoder=function(g){return g=g||"der",this.decoders.hasOwnProperty(g)||(this.decoders[g]=this._createNamed(A[g])),this.decoders[g]},t.prototype.decode=function(g,I,A){return this._getDecoder(I).decode(g,A)},t.prototype._getEncoder=function(g){return g=g||"der",this.encoders.hasOwnProperty(g)||(this.encoders[g]=this._createNamed(I[g])),this.encoders[g]},t.prototype.encode=function(g,I,A){return this._getEncoder(I).encode(g,A)}}(Zs);var ul={};!function(g){const I=g;I.Reporter=ws.Reporter,I.DecoderBuffer=fs.DecoderBuffer,I.EncoderBuffer=fs.EncoderBuffer,I.Node=Ns}(ul);var Gl={};!function(g){const I=g;I._reverse=function(g){const I={};return Object.keys(g).forEach((function(A){(0|A)==A&&(A|=0);const C=g[A];I[C]=A})),I},I.der=Fs}(Gl),function(g){const I=g;I.bignum=hs.exports,I.define=Zs.define,I.base=ul,I.constants=Gl,I.decoders=Al,I.encoders=us}(ds);var bl=ds,pl=bl.define("Time",(function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})})),Bl=bl.define("AttributeTypeValue",(function(){this.seq().obj(this.key("type").objid(),this.key("value").any())})),yl=bl.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())})),wl=bl.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(yl),this.key("subjectPublicKey").bitstr())})),Wl=bl.define("RelativeDistinguishedName",(function(){this.setof(Bl)})),Sl=bl.define("RDNSequence",(function(){this.seqof(Wl)})),Kl=bl.define("Name",(function(){this.choice({rdnSequence:this.use(Sl)})})),fl=bl.define("Validity",(function(){this.seq().obj(this.key("notBefore").use(pl),this.key("notAfter").use(pl))})),Yl=bl.define("Extension",(function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())})),Xl=bl.define("TBSCertificate",(function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(yl),this.key("issuer").use(Kl),this.key("validity").use(fl),this.key("subject").use(Kl),this.key("subjectPublicKeyInfo").use(wl),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(Yl).optional())})),Vl=bl.define("X509Certificate",(function(){this.seq().obj(this.key("tbsCertificate").use(Xl),this.key("signatureAlgorithm").use(yl),this.key("signatureValue").bitstr())})),Ol=ds;as.certificate=Vl;var Rl=Ol.define("RSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())}));as.RSAPrivateKey=Rl;var Ql=Ol.define("RSAPublicKey",(function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())}));as.RSAPublicKey=Ql;var Hl=Ol.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(kl),this.key("subjectPublicKey").bitstr())}));as.PublicKey=Hl;var kl=Ol.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())})),Jl=Ol.define("PrivateKeyInfo",(function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(kl),this.key("subjectPrivateKey").octstr())}));as.PrivateKey=Jl;var vl=Ol.define("EncryptedPrivateKeyInfo",(function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())}));as.EncryptedPrivateKey=vl;var Dl=Ol.define("DSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())}));as.DSAPrivateKey=Dl,as.DSAparam=Ol.define("DSAparam",(function(){this.int()}));var Ml=Ol.define("ECPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(Nl),this.key("publicKey").optional().explicit(1).bitstr())}));as.ECPrivateKey=Ml;var Nl=Ol.define("ECParameters",(function(){this.choice({namedCurve:this.objid()})}));as.signature=Ol.define("signature",(function(){this.seq().obj(this.key("r").int(),this.key("s").int())}));var El,Fl={exports:{}},Ll={exports:{}},Tl="object"==typeof Reflect?Reflect:null,zl=Tl&&"function"==typeof Tl.apply?Tl.apply:function(g,I,A){return Function.prototype.apply.call(g,I,A)};El=Tl&&"function"==typeof Tl.ownKeys?Tl.ownKeys:Object.getOwnPropertySymbols?function(g){return Object.getOwnPropertyNames(g).concat(Object.getOwnPropertySymbols(g))}:function(g){return Object.getOwnPropertyNames(g)};var Pl=Number.isNaN||function(g){return g!=g};function Ul(){Ul.init.call(this)}Ll.exports=Ul,Ll.exports.once=function(g,I){return new Promise((function(A,C){function t(A){g.removeListener(I,i),C(A)}function i(){"function"==typeof g.removeListener&&g.removeListener("error",t),A([].slice.call(arguments))}tr(g,I,i,{once:!0}),"error"!==I&&function(g,I,A){"function"==typeof g.on&&tr(g,"error",I,A)}(g,t,{once:!0})}))},Ul.EventEmitter=Ul,Ul.prototype._events=void 0,Ul.prototype._eventsCount=0,Ul.prototype._maxListeners=void 0;var xl=10;function jl(g){if("function"!=typeof g)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof g)}function _l(g){return void 0===g._maxListeners?Ul.defaultMaxListeners:g._maxListeners}function $l(g,I,A,C){var t,i,e,o;if(jl(A),void 0===(i=g._events)?(i=g._events=Object.create(null),g._eventsCount=0):(void 0!==i.newListener&&(g.emit("newListener",I,A.listener?A.listener:A),i=g._events),e=i[I]),void 0===e)e=i[I]=A,++g._eventsCount;else if("function"==typeof e?e=i[I]=C?[A,e]:[e,A]:C?e.unshift(A):e.push(A),(t=_l(g))>0&&e.length>t&&!e.warned){e.warned=!0;var n=new Error("Possible EventEmitter memory leak detected. "+e.length+" "+String(I)+" listeners added. Use emitter.setMaxListeners() to increase limit");n.name="MaxListenersExceededWarning",n.emitter=g,n.type=I,n.count=e.length,o=n,console&&console.warn&&console.warn(o)}return g}function ql(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function gr(g,I,A){var C={fired:!1,wrapFn:void 0,target:g,type:I,listener:A},t=ql.bind(C);return t.listener=A,C.wrapFn=t,t}function Ir(g,I,A){var C=g._events;if(void 0===C)return[];var t=C[I];return void 0===t?[]:"function"==typeof t?A?[t.listener||t]:[t]:A?function(g){for(var I=new Array(g.length),A=0;A<I.length;++A)I[A]=g[A].listener||g[A];return I}(t):Cr(t,t.length)}function Ar(g){var I=this._events;if(void 0!==I){var A=I[g];if("function"==typeof A)return 1;if(void 0!==A)return A.length}return 0}function Cr(g,I){for(var A=new Array(I),C=0;C<I;++C)A[C]=g[C];return A}function tr(g,I,A,C){if("function"==typeof g.on)C.once?g.once(I,A):g.on(I,A);else{if("function"!=typeof g.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof g);g.addEventListener(I,(function t(i){C.once&&g.removeEventListener(I,t),A(i)}))}}Object.defineProperty(Ul,"defaultMaxListeners",{enumerable:!0,get:function(){return xl},set:function(g){if("number"!=typeof g||g<0||Pl(g))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+g+".");xl=g}}),Ul.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Ul.prototype.setMaxListeners=function(g){if("number"!=typeof g||g<0||Pl(g))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+g+".");return this._maxListeners=g,this},Ul.prototype.getMaxListeners=function(){return _l(this)},Ul.prototype.emit=function(g){for(var I=[],A=1;A<arguments.length;A++)I.push(arguments[A]);var C="error"===g,t=this._events;if(void 0!==t)C=C&&void 0===t.error;else if(!C)return!1;if(C){var i;if(I.length>0&&(i=I[0]),i instanceof Error)throw i;var e=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw e.context=i,e}var o=t[g];if(void 0===o)return!1;if("function"==typeof o)zl(o,this,I);else{var n=o.length,s=Cr(o,n);for(A=0;A<n;++A)zl(s[A],this,I)}return!0},Ul.prototype.addListener=function(g,I){return $l(this,g,I,!1)},Ul.prototype.on=Ul.prototype.addListener,Ul.prototype.prependListener=function(g,I){return $l(this,g,I,!0)},Ul.prototype.once=function(g,I){return jl(I),this.on(g,gr(this,g,I)),this},Ul.prototype.prependOnceListener=function(g,I){return jl(I),this.prependListener(g,gr(this,g,I)),this},Ul.prototype.removeListener=function(g,I){var A,C,t,i,e;if(jl(I),void 0===(C=this._events))return this;if(void 0===(A=C[g]))return this;if(A===I||A.listener===I)0==--this._eventsCount?this._events=Object.create(null):(delete C[g],C.removeListener&&this.emit("removeListener",g,A.listener||I));else if("function"!=typeof A){for(t=-1,i=A.length-1;i>=0;i--)if(A[i]===I||A[i].listener===I){e=A[i].listener,t=i;break}if(t<0)return this;0===t?A.shift():function(g,I){for(;I+1<g.length;I++)g[I]=g[I+1];g.pop()}(A,t),1===A.length&&(C[g]=A[0]),void 0!==C.removeListener&&this.emit("removeListener",g,e||I)}return this},Ul.prototype.off=Ul.prototype.removeListener,Ul.prototype.removeAllListeners=function(g){var I,A,C;if(void 0===(A=this._events))return this;if(void 0===A.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==A[g]&&(0==--this._eventsCount?this._events=Object.create(null):delete A[g]),this;if(0===arguments.length){var t,i=Object.keys(A);for(C=0;C<i.length;++C)"removeListener"!==(t=i[C])&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(I=A[g]))this.removeListener(g,I);else if(void 0!==I)for(C=I.length-1;C>=0;C--)this.removeListener(g,I[C]);return this},Ul.prototype.listeners=function(g){return Ir(this,g,!0)},Ul.prototype.rawListeners=function(g){return Ir(this,g,!1)},Ul.listenerCount=function(g,I){return"function"==typeof g.listenerCount?g.listenerCount(I):Ar.call(g,I)},Ul.prototype.listenerCount=Ar,Ul.prototype.eventNames=function(){return this._eventsCount>0?El(this._events):[]};var ir,er=Mh,or={},nr={},sr=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var g={},I=Symbol("test"),A=Object(I);if("string"==typeof I)return!1;if("[object Symbol]"!==Object.prototype.toString.call(I))return!1;if("[object Symbol]"!==Object.prototype.toString.call(A))return!1;for(I in g[I]=42,g)return!1;if("function"==typeof Object.keys&&0!==Object.keys(g).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(g).length)return!1;var C=Object.getOwnPropertySymbols(g);if(1!==C.length||C[0]!==I)return!1;if(!Object.prototype.propertyIsEnumerable.call(g,I))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var t=Object.getOwnPropertyDescriptor(g,I);if(42!==t.value||!0!==t.enumerable)return!1}return!0},lr=sr,rr=function(){return lr()&&!!Symbol.toStringTag},cr="undefined"!=typeof Symbol&&Symbol,ar=sr,dr="Function.prototype.bind called on incompatible ",hr=Array.prototype.slice,mr=Object.prototype.toString,Zr="[object Function]",ur=function(g){var I=this;if("function"!=typeof I||mr.call(I)!==Zr)throw new TypeError(dr+I);for(var A,C=hr.call(arguments,1),t=function(){if(this instanceof A){var t=I.apply(this,C.concat(hr.call(arguments)));return Object(t)===t?t:this}return I.apply(g,C.concat(hr.call(arguments)))},i=Math.max(0,I.length-C.length),e=[],o=0;o<i;o++)e.push("$"+o);if(A=Function("binder","return function ("+e.join(",")+"){ return binder.apply(this,arguments); }")(t),I.prototype){var n=function(){};n.prototype=I.prototype,A.prototype=new n,n.prototype=null}return A},Gr=Function.prototype.bind||ur,br=Gr.call(Function.call,Object.prototype.hasOwnProperty),pr=SyntaxError,Br=Function,yr=TypeError,wr=function(g){try{return Br('"use strict"; return ('+g+").constructor;")()}catch(dD){}},Wr=Object.getOwnPropertyDescriptor;if(Wr)try{Wr({},"")}catch(dD){Wr=null}var Sr=function(){throw new yr},Kr=Wr?function(){try{return Sr}catch(g){try{return Wr(arguments,"callee").get}catch(I){return Sr}}}():Sr,fr="function"==typeof cr&&"function"==typeof Symbol&&"symbol"==typeof cr("foo")&&"symbol"==typeof Symbol("bar")&&ar(),Yr=Object.getPrototypeOf||function(g){return g.__proto__},Xr={},Vr="undefined"==typeof Uint8Array?ir:Yr(Uint8Array),Or={"%AggregateError%":"undefined"==typeof AggregateError?ir:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?ir:ArrayBuffer,"%ArrayIteratorPrototype%":fr?Yr([][Symbol.iterator]()):ir,"%AsyncFromSyncIteratorPrototype%":ir,"%AsyncFunction%":Xr,"%AsyncGenerator%":Xr,"%AsyncGeneratorFunction%":Xr,"%AsyncIteratorPrototype%":Xr,"%Atomics%":"undefined"==typeof Atomics?ir:Atomics,"%BigInt%":"undefined"==typeof BigInt?ir:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?ir:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?ir:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?ir:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?ir:FinalizationRegistry,"%Function%":Br,"%GeneratorFunction%":Xr,"%Int8Array%":"undefined"==typeof Int8Array?ir:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?ir:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?ir:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":fr?Yr(Yr([][Symbol.iterator]())):ir,"%JSON%":"object"==typeof JSON?JSON:ir,"%Map%":"undefined"==typeof Map?ir:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&fr?Yr((new Map)[Symbol.iterator]()):ir,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?ir:Promise,"%Proxy%":"undefined"==typeof Proxy?ir:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?ir:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?ir:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&fr?Yr((new Set)[Symbol.iterator]()):ir,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?ir:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":fr?Yr(""[Symbol.iterator]()):ir,"%Symbol%":fr?Symbol:ir,"%SyntaxError%":pr,"%ThrowTypeError%":Kr,"%TypedArray%":Vr,"%TypeError%":yr,"%Uint8Array%":"undefined"==typeof Uint8Array?ir:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?ir:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?ir:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?ir:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?ir:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?ir:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?ir:WeakSet},Rr=function g(I){var A;if("%AsyncFunction%"===I)A=wr("async function () {}");else if("%GeneratorFunction%"===I)A=wr("function* () {}");else if("%AsyncGeneratorFunction%"===I)A=wr("async function* () {}");else if("%AsyncGenerator%"===I){var C=g("%AsyncGeneratorFunction%");C&&(A=C.prototype)}else if("%AsyncIteratorPrototype%"===I){var t=g("%AsyncGenerator%");t&&(A=Yr(t.prototype))}return Or[I]=A,A},Qr={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Hr=Gr,kr=br,Jr=Hr.call(Function.call,Array.prototype.concat),vr=Hr.call(Function.apply,Array.prototype.splice),Dr=Hr.call(Function.call,String.prototype.replace),Mr=Hr.call(Function.call,String.prototype.slice),Nr=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Er=/\\(\\)?/g,Fr=function(g){var I=Mr(g,0,1),A=Mr(g,-1);if("%"===I&&"%"!==A)throw new pr("invalid intrinsic syntax, expected closing `%`");if("%"===A&&"%"!==I)throw new pr("invalid intrinsic syntax, expected opening `%`");var C=[];return Dr(g,Nr,(function(g,I,A,t){C[C.length]=A?Dr(t,Er,"$1"):I||g})),C},Lr=function(g,I){var A,C=g;if(kr(Qr,C)&&(C="%"+(A=Qr[C])[0]+"%"),kr(Or,C)){var t=Or[C];if(t===Xr&&(t=Rr(C)),void 0===t&&!I)throw new yr("intrinsic "+g+" exists, but is not available. Please file an issue!");return{alias:A,name:C,value:t}}throw new pr("intrinsic "+g+" does not exist!")},Tr=function(g,I){if("string"!=typeof g||0===g.length)throw new yr("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof I)throw new yr('"allowMissing" argument must be a boolean');var A=Fr(g),C=A.length>0?A[0]:"",t=Lr("%"+C+"%",I),i=t.name,e=t.value,o=!1,n=t.alias;n&&(C=n[0],vr(A,Jr([0,1],n)));for(var s=1,l=!0;s<A.length;s+=1){var r=A[s],c=Mr(r,0,1),a=Mr(r,-1);if(('"'===c||"'"===c||"`"===c||'"'===a||"'"===a||"`"===a)&&c!==a)throw new pr("property names with quotes must have matching quotes");if("constructor"!==r&&l||(o=!0),kr(Or,i="%"+(C+="."+r)+"%"))e=Or[i];else if(null!=e){if(!(r in e)){if(!I)throw new yr("base intrinsic for "+g+" exists, but the property is not available.");return}if(Wr&&s+1>=A.length){var d=Wr(e,r);e=(l=!!d)&&"get"in d&&!("originalValue"in d.get)?d.get:e[r]}else l=kr(e,r),e=e[r];l&&!o&&(Or[i]=e)}}return e},zr={exports:{}};!function(g){var I=Gr,A=Tr,C=A("%Function.prototype.apply%"),t=A("%Function.prototype.call%"),i=A("%Reflect.apply%",!0)||I.call(t,C),e=A("%Object.getOwnPropertyDescriptor%",!0),o=A("%Object.defineProperty%",!0),n=A("%Math.max%");if(o)try{o({},"a",{value:1})}catch(dD){o=null}g.exports=function(g){var A=i(I,t,arguments);if(e&&o){var C=e(A,"length");C.configurable&&o(A,"length",{value:1+n(0,g.length-(arguments.length-1))})}return A};var s=function(){return i(I,C,arguments)};o?o(g.exports,"apply",{value:s}):g.exports.apply=s}(zr);var Pr=Tr,Ur=zr.exports,xr=Ur(Pr("String.prototype.indexOf")),jr=function(g,I){var A=Pr(g,!!I);return"function"==typeof A&&xr(g,".prototype.")>-1?Ur(A):A},_r=rr(),$r=jr("Object.prototype.toString"),qr=function(g){return!(_r&&g&&"object"==typeof g&&Symbol.toStringTag in g)&&"[object Arguments]"===$r(g)},gc=function(g){return!!qr(g)||null!==g&&"object"==typeof g&&"number"==typeof g.length&&g.length>=0&&"[object Array]"!==$r(g)&&"[object Function]"===$r(g.callee)},Ic=function(){return qr(arguments)}();qr.isLegacyArguments=gc;var Ac,Cc=Ic?qr:gc,tc=Object.prototype.toString,ic=Function.prototype.toString,ec=/^\s*(?:function)?\*/,oc=rr(),nc=Object.getPrototypeOf,sc=function(g){if("function"!=typeof g)return!1;if(ec.test(ic.call(g)))return!0;if(!oc)return"[object GeneratorFunction]"===tc.call(g);if(!nc)return!1;if(void 0===Ac){var I=function(){if(!oc)return!1;try{return Function("return function*() {}")()}catch(dD){}}();Ac=!!I&&nc(I)}return nc(g)===Ac},lc=Object.prototype.hasOwnProperty,rc=Object.prototype.toString,cc=function(g,I,A){if("[object Function]"!==rc.call(I))throw new TypeError("iterator must be a function");var C=g.length;if(C===+C)for(var t=0;t<C;t++)I.call(A,g[t],t,g);else for(var i in g)lc.call(g,i)&&I.call(A,g[i],i,g)},ac=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],dc="undefined"==typeof globalThis?ot:globalThis,hc=function(){for(var g=[],I=0;I<ac.length;I++)"function"==typeof dc[ac[I]]&&(g[g.length]=ac[I]);return g},mc=Tr("%Object.getOwnPropertyDescriptor%");if(mc)try{mc([],"length")}catch(dD){mc=null}var Zc=mc,uc=cc,Gc=hc,bc=jr,pc=bc("Object.prototype.toString"),Bc=rr(),yc="undefined"==typeof globalThis?ot:globalThis,wc=Gc(),Wc=bc("Array.prototype.indexOf",!0)||function(g,I){for(var A=0;A<g.length;A+=1)if(g[A]===I)return A;return-1},Sc=bc("String.prototype.slice"),Kc={},fc=Zc,Yc=Object.getPrototypeOf;Bc&&fc&&Yc&&uc(wc,(function(g){var I=new yc[g];if(Symbol.toStringTag in I){var A=Yc(I),C=fc(A,Symbol.toStringTag);if(!C){var t=Yc(A);C=fc(t,Symbol.toStringTag)}Kc[g]=C.get}}));var Xc=function(g){if(!g||"object"!=typeof g)return!1;if(!Bc||!(Symbol.toStringTag in g)){var I=Sc(pc(g),8,-1);return Wc(wc,I)>-1}return!!fc&&function(g){var I=!1;return uc(Kc,(function(A,C){if(!I)try{I=A.call(g)===C}catch(dD){}})),I}(g)},Vc=cc,Oc=hc,Rc=jr,Qc=Rc("Object.prototype.toString"),Hc=rr(),kc="undefined"==typeof globalThis?ot:globalThis,Jc=Oc(),vc=Rc("String.prototype.slice"),Dc={},Mc=Zc,Nc=Object.getPrototypeOf;Hc&&Mc&&Nc&&Vc(Jc,(function(g){if("function"==typeof kc[g]){var I=new kc[g];if(Symbol.toStringTag in I){var A=Nc(I),C=Mc(A,Symbol.toStringTag);if(!C){var t=Nc(A);C=Mc(t,Symbol.toStringTag)}Dc[g]=C.get}}}));var Ec=Xc,Fc=function(g){return!!Ec(g)&&(Hc&&Symbol.toStringTag in g?function(g){var I=!1;return Vc(Dc,(function(A,C){if(!I)try{var t=A.call(g);t===C&&(I=t)}catch(dD){}})),I}(g):vc(Qc(g),8,-1))};!function(g){var I=Cc,A=sc,C=Fc,t=Xc;function i(g){return g.call.bind(g)}var e="undefined"!=typeof BigInt,o="undefined"!=typeof Symbol,n=i(Object.prototype.toString),s=i(Number.prototype.valueOf),l=i(String.prototype.valueOf),r=i(Boolean.prototype.valueOf);if(e)var c=i(BigInt.prototype.valueOf);if(o)var a=i(Symbol.prototype.valueOf);function d(g,I){if("object"!=typeof g)return!1;try{return I(g),!0}catch(dD){return!1}}function h(g){return"[object Map]"===n(g)}function m(g){return"[object Set]"===n(g)}function Z(g){return"[object WeakMap]"===n(g)}function u(g){return"[object WeakSet]"===n(g)}function G(g){return"[object ArrayBuffer]"===n(g)}function b(g){return"undefined"!=typeof ArrayBuffer&&(G.working?G(g):g instanceof ArrayBuffer)}function p(g){return"[object DataView]"===n(g)}function B(g){return"undefined"!=typeof DataView&&(p.working?p(g):g instanceof DataView)}g.isArgumentsObject=I,g.isGeneratorFunction=A,g.isTypedArray=t,g.isPromise=function(g){return"undefined"!=typeof Promise&&g instanceof Promise||null!==g&&"object"==typeof g&&"function"==typeof g.then&&"function"==typeof g.catch},g.isArrayBufferView=function(g){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(g):t(g)||B(g)},g.isUint8Array=function(g){return"Uint8Array"===C(g)},g.isUint8ClampedArray=function(g){return"Uint8ClampedArray"===C(g)},g.isUint16Array=function(g){return"Uint16Array"===C(g)},g.isUint32Array=function(g){return"Uint32Array"===C(g)},g.isInt8Array=function(g){return"Int8Array"===C(g)},g.isInt16Array=function(g){return"Int16Array"===C(g)},g.isInt32Array=function(g){return"Int32Array"===C(g)},g.isFloat32Array=function(g){return"Float32Array"===C(g)},g.isFloat64Array=function(g){return"Float64Array"===C(g)},g.isBigInt64Array=function(g){return"BigInt64Array"===C(g)},g.isBigUint64Array=function(g){return"BigUint64Array"===C(g)},h.working="undefined"!=typeof Map&&h(new Map),g.isMap=function(g){return"undefined"!=typeof Map&&(h.working?h(g):g instanceof Map)},m.working="undefined"!=typeof Set&&m(new Set),g.isSet=function(g){return"undefined"!=typeof Set&&(m.working?m(g):g instanceof Set)},Z.working="undefined"!=typeof WeakMap&&Z(new WeakMap),g.isWeakMap=function(g){return"undefined"!=typeof WeakMap&&(Z.working?Z(g):g instanceof WeakMap)},u.working="undefined"!=typeof WeakSet&&u(new WeakSet),g.isWeakSet=function(g){return u(g)},G.working="undefined"!=typeof ArrayBuffer&&G(new ArrayBuffer),g.isArrayBuffer=b,p.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&p(new DataView(new ArrayBuffer(1),0,1)),g.isDataView=B;var y="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function w(g){return"[object SharedArrayBuffer]"===n(g)}function W(g){return void 0!==y&&(void 0===w.working&&(w.working=w(new y)),w.working?w(g):g instanceof y)}function S(g){return d(g,s)}function K(g){return d(g,l)}function f(g){return d(g,r)}function Y(g){return e&&d(g,c)}function X(g){return o&&d(g,a)}g.isSharedArrayBuffer=W,g.isAsyncFunction=function(g){return"[object AsyncFunction]"===n(g)},g.isMapIterator=function(g){return"[object Map Iterator]"===n(g)},g.isSetIterator=function(g){return"[object Set Iterator]"===n(g)},g.isGeneratorObject=function(g){return"[object Generator]"===n(g)},g.isWebAssemblyCompiledModule=function(g){return"[object WebAssembly.Module]"===n(g)},g.isNumberObject=S,g.isStringObject=K,g.isBooleanObject=f,g.isBigIntObject=Y,g.isSymbolObject=X,g.isBoxedPrimitive=function(g){return S(g)||K(g)||f(g)||Y(g)||X(g)},g.isAnyArrayBuffer=function(g){return"undefined"!=typeof Uint8Array&&(b(g)||W(g))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(I){Object.defineProperty(g,I,{enumerable:!1,value:function(){throw new Error(I+" is not supported in userland")}})}))}(nr);var Lc=function(g){return g instanceof Buffer};function Tc(g,I){var A=Object.keys(g);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(g);I&&(C=C.filter((function(I){return Object.getOwnPropertyDescriptor(g,I).enumerable}))),A.push.apply(A,C)}return A}function zc(g,I,A){return I in g?Object.defineProperty(g,I,{value:A,enumerable:!0,configurable:!0,writable:!0}):g[I]=A,g}function Pc(g,I){for(var A=0;A<I.length;A++){var C=I[A];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(g,C.key,C)}}!function(g){var I=Object.getOwnPropertyDescriptors||function(g){for(var I=Object.keys(g),A={},C=0;C<I.length;C++)A[I[C]]=Object.getOwnPropertyDescriptor(g,I[C]);return A},A=/%[sdj%]/g;g.format=function(g){if(!h(g)){for(var I=[],C=0;C<arguments.length;C++)I.push(i(arguments[C]));return I.join(" ")}C=1;for(var t=arguments,e=t.length,o=String(g).replace(A,(function(g){if("%%"===g)return"%";if(C>=e)return g;switch(g){case"%s":return String(t[C++]);case"%d":return Number(t[C++]);case"%j":try{return JSON.stringify(t[C++])}catch(I){return"[Circular]"}default:return g}})),n=t[C];C<e;n=t[++C])a(n)||!u(n)?o+=" "+n:o+=" "+i(n);return o},g.deprecate=function(I,A){if("undefined"!=typeof process&&!0===process.noDeprecation)return I;if("undefined"==typeof process)return function(){return g.deprecate(I,A).apply(this,arguments)};var C=!1;return function(){if(!C){if(process.throwDeprecation)throw new Error(A);process.traceDeprecation?console.trace(A):console.error(A),C=!0}return I.apply(this,arguments)}};var C={},t=/^$/;function i(I,A){var C={seen:[],stylize:o};return arguments.length>=3&&(C.depth=arguments[2]),arguments.length>=4&&(C.colors=arguments[3]),c(A)?C.showHidden=A:A&&g._extend(C,A),m(C.showHidden)&&(C.showHidden=!1),m(C.depth)&&(C.depth=2),m(C.colors)&&(C.colors=!1),m(C.customInspect)&&(C.customInspect=!0),C.colors&&(C.stylize=e),n(C,I,C.depth)}function e(g,I){var A=i.styles[I];return A?"["+i.colors[A][0]+"m"+g+"["+i.colors[A][1]+"m":g}function o(g,I){return g}function n(I,A,C){if(I.customInspect&&A&&p(A.inspect)&&A.inspect!==g.inspect&&(!A.constructor||A.constructor.prototype!==A)){var t=A.inspect(C,I);return h(t)||(t=n(I,t,C)),t}var i=function(g,I){if(m(I))return g.stylize("undefined","undefined");if(h(I)){var A="'"+JSON.stringify(I).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return g.stylize(A,"string")}if(d(I))return g.stylize(""+I,"number");if(c(I))return g.stylize(""+I,"boolean");if(a(I))return g.stylize("null","null")}(I,A);if(i)return i;var e=Object.keys(A),o=function(g){var I={};return g.forEach((function(g,A){I[g]=!0})),I}(e);if(I.showHidden&&(e=Object.getOwnPropertyNames(A)),b(A)&&(e.indexOf("message")>=0||e.indexOf("description")>=0))return s(A);if(0===e.length){if(p(A)){var u=A.name?": "+A.name:"";return I.stylize("[Function"+u+"]","special")}if(Z(A))return I.stylize(RegExp.prototype.toString.call(A),"regexp");if(G(A))return I.stylize(Date.prototype.toString.call(A),"date");if(b(A))return s(A)}var B,y="",w=!1,W=["{","}"];(r(A)&&(w=!0,W=["[","]"]),p(A))&&(y=" [Function"+(A.name?": "+A.name:"")+"]");return Z(A)&&(y=" "+RegExp.prototype.toString.call(A)),G(A)&&(y=" "+Date.prototype.toUTCString.call(A)),b(A)&&(y=" "+s(A)),0!==e.length||w&&0!=A.length?C<0?Z(A)?I.stylize(RegExp.prototype.toString.call(A),"regexp"):I.stylize("[Object]","special"):(I.seen.push(A),B=w?function(g,I,A,C,t){for(var i=[],e=0,o=I.length;e<o;++e)S(I,String(e))?i.push(l(g,I,A,C,String(e),!0)):i.push("");return t.forEach((function(t){t.match(/^\d+$/)||i.push(l(g,I,A,C,t,!0))})),i}(I,A,C,o,e):e.map((function(g){return l(I,A,C,o,g,w)})),I.seen.pop(),function(g,I,A){if(g.reduce((function(g,I){return I.indexOf("\n"),g+I.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return A[0]+(""===I?"":I+"\n ")+" "+g.join(",\n  ")+" "+A[1];return A[0]+I+" "+g.join(", ")+" "+A[1]}(B,y,W)):W[0]+y+W[1]}function s(g){return"["+Error.prototype.toString.call(g)+"]"}function l(g,I,A,C,t,i){var e,o,s;if((s=Object.getOwnPropertyDescriptor(I,t)||{value:I[t]}).get?o=s.set?g.stylize("[Getter/Setter]","special"):g.stylize("[Getter]","special"):s.set&&(o=g.stylize("[Setter]","special")),S(C,t)||(e="["+t+"]"),o||(g.seen.indexOf(s.value)<0?(o=a(A)?n(g,s.value,null):n(g,s.value,A-1)).indexOf("\n")>-1&&(o=i?o.split("\n").map((function(g){return"  "+g})).join("\n").substr(2):"\n"+o.split("\n").map((function(g){return"   "+g})).join("\n")):o=g.stylize("[Circular]","special")),m(e)){if(i&&t.match(/^\d+$/))return o;(e=JSON.stringify(""+t)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(e=e.substr(1,e.length-2),e=g.stylize(e,"name")):(e=e.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),e=g.stylize(e,"string"))}return e+": "+o}function r(g){return Array.isArray(g)}function c(g){return"boolean"==typeof g}function a(g){return null===g}function d(g){return"number"==typeof g}function h(g){return"string"==typeof g}function m(g){return void 0===g}function Z(g){return u(g)&&"[object RegExp]"===B(g)}function u(g){return"object"==typeof g&&null!==g}function G(g){return u(g)&&"[object Date]"===B(g)}function b(g){return u(g)&&("[object Error]"===B(g)||g instanceof Error)}function p(g){return"function"==typeof g}function B(g){return Object.prototype.toString.call(g)}function y(g){return g<10?"0"+g.toString(10):g.toString(10)}g.debuglog=function(I){if(I=I.toUpperCase(),!C[I])if(t.test(I)){var A=process.pid;C[I]=function(){var C=g.format.apply(g,arguments);console.error("%s %d: %s",I,A,C)}}else C[I]=function(){};return C[I]},g.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},g.types=nr,g.isArray=r,g.isBoolean=c,g.isNull=a,g.isNullOrUndefined=function(g){return null==g},g.isNumber=d,g.isString=h,g.isSymbol=function(g){return"symbol"==typeof g},g.isUndefined=m,g.isRegExp=Z,g.types.isRegExp=Z,g.isObject=u,g.isDate=G,g.types.isDate=G,g.isError=b,g.types.isNativeError=b,g.isFunction=p,g.isPrimitive=function(g){return null===g||"boolean"==typeof g||"number"==typeof g||"string"==typeof g||"symbol"==typeof g||void 0===g},g.isBuffer=Lc;var w=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function W(){var g=new Date,I=[y(g.getHours()),y(g.getMinutes()),y(g.getSeconds())].join(":");return[g.getDate(),w[g.getMonth()],I].join(" ")}function S(g,I){return Object.prototype.hasOwnProperty.call(g,I)}g.log=function(){console.log("%s - %s",W(),g.format.apply(g,arguments))},g.inherits=ki.exports,g._extend=function(g,I){if(!I||!u(I))return g;for(var A=Object.keys(I),C=A.length;C--;)g[A[C]]=I[A[C]];return g};var K="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function f(g,I){if(!g){var A=new Error("Promise was rejected with a falsy value");A.reason=g,g=A}return I(g)}g.promisify=function(g){if("function"!=typeof g)throw new TypeError('The "original" argument must be of type Function');if(K&&g[K]){var A;if("function"!=typeof(A=g[K]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(A,K,{value:A,enumerable:!1,writable:!1,configurable:!0}),A}function A(){for(var I,A,C=new Promise((function(g,C){I=g,A=C})),t=[],i=0;i<arguments.length;i++)t.push(arguments[i]);t.push((function(g,C){g?A(g):I(C)}));try{g.apply(this,t)}catch(e){A(e)}return C}return Object.setPrototypeOf(A,Object.getPrototypeOf(g)),K&&Object.defineProperty(A,K,{value:A,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(A,I(g))},g.promisify.custom=K,g.callbackify=function(g){if("function"!=typeof g)throw new TypeError('The "original" argument must be of type Function');function A(){for(var I=[],A=0;A<arguments.length;A++)I.push(arguments[A]);var C=I.pop();if("function"!=typeof C)throw new TypeError("The last argument must be of type Function");var t=this,i=function(){return C.apply(t,arguments)};g.apply(this,I).then((function(g){process.nextTick(i.bind(null,null,g))}),(function(g){process.nextTick(f.bind(null,g,i))}))}return Object.setPrototypeOf(A,Object.getPrototypeOf(g)),Object.defineProperties(A,I(g)),A}}(or);var Uc=nt.Buffer,xc=or.inspect,jc=xc&&xc.custom||"inspect";var _c=function(){function g(){!function(g,I){if(!(g instanceof I))throw new TypeError("Cannot call a class as a function")}(this,g),this.head=null,this.tail=null,this.length=0}var I,A,C;return I=g,(A=[{key:"push",value:function(g){var I={data:g,next:null};this.length>0?this.tail.next=I:this.head=I,this.tail=I,++this.length}},{key:"unshift",value:function(g){var I={data:g,next:this.head};0===this.length&&(this.tail=I),this.head=I,++this.length}},{key:"shift",value:function(){if(0!==this.length){var g=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,g}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(g){if(0===this.length)return"";for(var I=this.head,A=""+I.data;I=I.next;)A+=g+I.data;return A}},{key:"concat",value:function(g){if(0===this.length)return Uc.alloc(0);for(var I,A,C,t=Uc.allocUnsafe(g>>>0),i=this.head,e=0;i;)I=i.data,A=t,C=e,Uc.prototype.copy.call(I,A,C),e+=i.data.length,i=i.next;return t}},{key:"consume",value:function(g,I){var A;return g<this.head.data.length?(A=this.head.data.slice(0,g),this.head.data=this.head.data.slice(g)):A=g===this.head.data.length?this.shift():I?this._getString(g):this._getBuffer(g),A}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(g){var I=this.head,A=1,C=I.data;for(g-=C.length;I=I.next;){var t=I.data,i=g>t.length?t.length:g;if(i===t.length?C+=t:C+=t.slice(0,g),0==(g-=i)){i===t.length?(++A,I.next?this.head=I.next:this.head=this.tail=null):(this.head=I,I.data=t.slice(i));break}++A}return this.length-=A,C}},{key:"_getBuffer",value:function(g){var I=Uc.allocUnsafe(g),A=this.head,C=1;for(A.data.copy(I),g-=A.data.length;A=A.next;){var t=A.data,i=g>t.length?t.length:g;if(t.copy(I,I.length-g,0,i),0==(g-=i)){i===t.length?(++C,A.next?this.head=A.next:this.head=this.tail=null):(this.head=A,A.data=t.slice(i));break}++C}return this.length-=C,I}},{key:jc,value:function(g,I){return xc(this,function(g){for(var I=1;I<arguments.length;I++){var A=null!=arguments[I]?arguments[I]:{};I%2?Tc(Object(A),!0).forEach((function(I){zc(g,I,A[I])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(A)):Tc(Object(A)).forEach((function(I){Object.defineProperty(g,I,Object.getOwnPropertyDescriptor(A,I))}))}return g}({},I,{depth:0,customInspect:!1}))}}])&&Pc(I.prototype,A),C&&Pc(I,C),g}();function $c(g,I){ga(g,I),qc(g)}function qc(g){g._writableState&&!g._writableState.emitClose||g._readableState&&!g._readableState.emitClose||g.emit("close")}function ga(g,I){g.emit("error",I)}var Ia={destroy:function(g,I){var A=this,C=this._readableState&&this._readableState.destroyed,t=this._writableState&&this._writableState.destroyed;return C||t?(I?I(g):g&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(ga,this,g)):process.nextTick(ga,this,g)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(g||null,(function(g){!I&&g?A._writableState?A._writableState.errorEmitted?process.nextTick(qc,A):(A._writableState.errorEmitted=!0,process.nextTick($c,A,g)):process.nextTick($c,A,g):I?(process.nextTick(qc,A),I(g)):process.nextTick(qc,A)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(g,I){var A=g._readableState,C=g._writableState;A&&A.autoDestroy||C&&C.autoDestroy?g.destroy(I):g.emit("error",I)}},Aa={};const Ca={};function ta(g,I,A){A||(A=Error);class C extends A{constructor(g,A,C){super(function(g,A,C){return"string"==typeof I?I:I(g,A,C)}(g,A,C))}}C.prototype.name=A.name,C.prototype.code=g,Ca[g]=C}function ia(g,I){if(Array.isArray(g)){const A=g.length;return g=g.map((g=>String(g))),A>2?`one of ${I} ${g.slice(0,A-1).join(", ")}, or `+g[A-1]:2===A?`one of ${I} ${g[0]} or ${g[1]}`:`of ${I} ${g[0]}`}return`of ${I} ${String(g)}`}ta("ERR_INVALID_OPT_VALUE",(function(g,I){return'The value "'+I+'" is invalid for option "'+g+'"'}),TypeError),ta("ERR_INVALID_ARG_TYPE",(function(g,I,A){let C;var t,i;let e;if("string"==typeof I&&(t="not ",I.substr(!i||i<0?0:+i,t.length)===t)?(C="must not be",I=I.replace(/^not /,"")):C="must be",function(g,I,A){return(void 0===A||A>g.length)&&(A=g.length),g.substring(A-I.length,A)===I}(g," argument"))e=`The ${g} ${C} ${ia(I,"type")}`;else{e=`The "${g}" ${function(g,I,A){return"number"!=typeof A&&(A=0),!(A+I.length>g.length)&&-1!==g.indexOf(I,A)}(g,".")?"property":"argument"} ${C} ${ia(I,"type")}`}return e+=". Received type "+typeof A,e}),TypeError),ta("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),ta("ERR_METHOD_NOT_IMPLEMENTED",(function(g){return"The "+g+" method is not implemented"})),ta("ERR_STREAM_PREMATURE_CLOSE","Premature close"),ta("ERR_STREAM_DESTROYED",(function(g){return"Cannot call "+g+" after a stream was destroyed"})),ta("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),ta("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),ta("ERR_STREAM_WRITE_AFTER_END","write after end"),ta("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),ta("ERR_UNKNOWN_ENCODING",(function(g){return"Unknown encoding: "+g}),TypeError),ta("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Aa.codes=Ca;var ea=Aa.codes.ERR_INVALID_OPT_VALUE;var oa,na={getHighWaterMark:function(g,I,A,C){var t=function(g,I,A){return null!=g.highWaterMark?g.highWaterMark:I?g[A]:null}(I,C,A);if(null!=t){if(!isFinite(t)||Math.floor(t)!==t||t<0)throw new ea(C?A:"highWaterMark",t);return Math.floor(t)}return g.objectMode?16:16384}},sa=or.deprecate,la=Va;function ra(g){var I=this;this.next=null,this.entry=null,this.finish=function(){!function(g,I,A){var C=g.entry;g.entry=null;for(;C;){var t=C.callback;I.pendingcb--,t(A),C=C.next}I.corkedRequestsFree.next=g}(I,g)}}Va.WritableState=Xa;var ca={deprecate:sa},aa=er,da=nt.Buffer,ha=ot.Uint8Array||function(){};var ma,Za=Ia,ua=na.getHighWaterMark,Ga=Aa.codes,ba=Ga.ERR_INVALID_ARG_TYPE,pa=Ga.ERR_METHOD_NOT_IMPLEMENTED,Ba=Ga.ERR_MULTIPLE_CALLBACK,ya=Ga.ERR_STREAM_CANNOT_PIPE,wa=Ga.ERR_STREAM_DESTROYED,Wa=Ga.ERR_STREAM_NULL_VALUES,Sa=Ga.ERR_STREAM_WRITE_AFTER_END,Ka=Ga.ERR_UNKNOWN_ENCODING,fa=Za.errorOrDestroy;function Ya(){}function Xa(g,I,A){oa=oa||Da,g=g||{},"boolean"!=typeof A&&(A=I instanceof oa),this.objectMode=!!g.objectMode,A&&(this.objectMode=this.objectMode||!!g.writableObjectMode),this.highWaterMark=ua(this,g,"writableHighWaterMark",A),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var C=!1===g.decodeStrings;this.decodeStrings=!C,this.defaultEncoding=g.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(g){!function(g,I){var A=g._writableState,C=A.sync,t=A.writecb;if("function"!=typeof t)throw new Ba;if(function(g){g.writing=!1,g.writecb=null,g.length-=g.writelen,g.writelen=0}(A),I)!function(g,I,A,C,t){--I.pendingcb,A?(process.nextTick(t,C),process.nextTick(Ja,g,I),g._writableState.errorEmitted=!0,fa(g,C)):(t(C),g._writableState.errorEmitted=!0,fa(g,C),Ja(g,I))}(g,A,C,I,t);else{var i=Ha(A)||g.destroyed;i||A.corked||A.bufferProcessing||!A.bufferedRequest||Qa(g,A),C?process.nextTick(Ra,g,A,i,t):Ra(g,A,i,t)}}(I,g)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==g.emitClose,this.autoDestroy=!!g.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new ra(this)}function Va(g){var I=this instanceof(oa=oa||Da);if(!I&&!ma.call(Va,this))return new Va(g);this._writableState=new Xa(g,this,I),this.writable=!0,g&&("function"==typeof g.write&&(this._write=g.write),"function"==typeof g.writev&&(this._writev=g.writev),"function"==typeof g.destroy&&(this._destroy=g.destroy),"function"==typeof g.final&&(this._final=g.final)),aa.call(this)}function Oa(g,I,A,C,t,i,e){I.writelen=C,I.writecb=e,I.writing=!0,I.sync=!0,I.destroyed?I.onwrite(new wa("write")):A?g._writev(t,I.onwrite):g._write(t,i,I.onwrite),I.sync=!1}function Ra(g,I,A,C){A||function(g,I){0===I.length&&I.needDrain&&(I.needDrain=!1,g.emit("drain"))}(g,I),I.pendingcb--,C(),Ja(g,I)}function Qa(g,I){I.bufferProcessing=!0;var A=I.bufferedRequest;if(g._writev&&A&&A.next){var C=I.bufferedRequestCount,t=new Array(C),i=I.corkedRequestsFree;i.entry=A;for(var e=0,o=!0;A;)t[e]=A,A.isBuf||(o=!1),A=A.next,e+=1;t.allBuffers=o,Oa(g,I,!0,I.length,t,"",i.finish),I.pendingcb++,I.lastBufferedRequest=null,i.next?(I.corkedRequestsFree=i.next,i.next=null):I.corkedRequestsFree=new ra(I),I.bufferedRequestCount=0}else{for(;A;){var n=A.chunk,s=A.encoding,l=A.callback;if(Oa(g,I,!1,I.objectMode?1:n.length,n,s,l),A=A.next,I.bufferedRequestCount--,I.writing)break}null===A&&(I.lastBufferedRequest=null)}I.bufferedRequest=A,I.bufferProcessing=!1}function Ha(g){return g.ending&&0===g.length&&null===g.bufferedRequest&&!g.finished&&!g.writing}function ka(g,I){g._final((function(A){I.pendingcb--,A&&fa(g,A),I.prefinished=!0,g.emit("prefinish"),Ja(g,I)}))}function Ja(g,I){var A=Ha(I);if(A&&(function(g,I){I.prefinished||I.finalCalled||("function"!=typeof g._final||I.destroyed?(I.prefinished=!0,g.emit("prefinish")):(I.pendingcb++,I.finalCalled=!0,process.nextTick(ka,g,I)))}(g,I),0===I.pendingcb&&(I.finished=!0,g.emit("finish"),I.autoDestroy))){var C=g._readableState;(!C||C.autoDestroy&&C.endEmitted)&&g.destroy()}return A}ki.exports(Va,aa),Xa.prototype.getBuffer=function(){for(var g=this.bufferedRequest,I=[];g;)I.push(g),g=g.next;return I},function(){try{Object.defineProperty(Xa.prototype,"buffer",{get:ca.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(g){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(ma=Function.prototype[Symbol.hasInstance],Object.defineProperty(Va,Symbol.hasInstance,{value:function(g){return!!ma.call(this,g)||this===Va&&(g&&g._writableState instanceof Xa)}})):ma=function(g){return g instanceof this},Va.prototype.pipe=function(){fa(this,new ya)},Va.prototype.write=function(g,I,A){var C,t=this._writableState,i=!1,e=!t.objectMode&&(C=g,da.isBuffer(C)||C instanceof ha);return e&&!da.isBuffer(g)&&(g=function(g){return da.from(g)}(g)),"function"==typeof I&&(A=I,I=null),e?I="buffer":I||(I=t.defaultEncoding),"function"!=typeof A&&(A=Ya),t.ending?function(g,I){var A=new Sa;fa(g,A),process.nextTick(I,A)}(this,A):(e||function(g,I,A,C){var t;return null===A?t=new Wa:"string"==typeof A||I.objectMode||(t=new ba("chunk",["string","Buffer"],A)),!t||(fa(g,t),process.nextTick(C,t),!1)}(this,t,g,A))&&(t.pendingcb++,i=function(g,I,A,C,t,i){if(!A){var e=function(g,I,A){g.objectMode||!1===g.decodeStrings||"string"!=typeof I||(I=da.from(I,A));return I}(I,C,t);C!==e&&(A=!0,t="buffer",C=e)}var o=I.objectMode?1:C.length;I.length+=o;var n=I.length<I.highWaterMark;n||(I.needDrain=!0);if(I.writing||I.corked){var s=I.lastBufferedRequest;I.lastBufferedRequest={chunk:C,encoding:t,isBuf:A,callback:i,next:null},s?s.next=I.lastBufferedRequest:I.bufferedRequest=I.lastBufferedRequest,I.bufferedRequestCount+=1}else Oa(g,I,!1,o,C,t,i);return n}(this,t,e,g,I,A)),i},Va.prototype.cork=function(){this._writableState.corked++},Va.prototype.uncork=function(){var g=this._writableState;g.corked&&(g.corked--,g.writing||g.corked||g.bufferProcessing||!g.bufferedRequest||Qa(this,g))},Va.prototype.setDefaultEncoding=function(g){if("string"==typeof g&&(g=g.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((g+"").toLowerCase())>-1))throw new Ka(g);return this._writableState.defaultEncoding=g,this},Object.defineProperty(Va.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Va.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Va.prototype._write=function(g,I,A){A(new pa("_write()"))},Va.prototype._writev=null,Va.prototype.end=function(g,I,A){var C=this._writableState;return"function"==typeof g?(A=g,g=null,I=null):"function"==typeof I&&(A=I,I=null),null!=g&&this.write(g,I),C.corked&&(C.corked=1,this.uncork()),C.ending||function(g,I,A){I.ending=!0,Ja(g,I),A&&(I.finished?process.nextTick(A):g.once("finish",A));I.ended=!0,g.writable=!1}(this,C,A),this},Object.defineProperty(Va.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(Va.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(g){this._writableState&&(this._writableState.destroyed=g)}}),Va.prototype.destroy=Za.destroy,Va.prototype._undestroy=Za.undestroy,Va.prototype._destroy=function(g,I){I(g)};var va=Object.keys||function(g){var I=[];for(var A in g)I.push(A);return I},Da=Ta,Ma=Od,Na=la;ki.exports(Ta,Ma);for(var Ea=va(Na.prototype),Fa=0;Fa<Ea.length;Fa++){var La=Ea[Fa];Ta.prototype[La]||(Ta.prototype[La]=Na.prototype[La])}function Ta(g){if(!(this instanceof Ta))return new Ta(g);Ma.call(this,g),Na.call(this,g),this.allowHalfOpen=!0,g&&(!1===g.readable&&(this.readable=!1),!1===g.writable&&(this.writable=!1),!1===g.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",za)))}function za(){this._writableState.ended||process.nextTick(Pa,this)}function Pa(g){g.end()}Object.defineProperty(Ta.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(Ta.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Ta.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(Ta.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(g){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=g,this._writableState.destroyed=g)}});var Ua={},xa=Ht.exports.Buffer,ja=xa.isEncoding||function(g){switch((g=""+g)&&g.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function _a(g){var I;switch(this.encoding=function(g){var I=function(g){if(!g)return"utf8";for(var I;;)switch(g){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return g;default:if(I)return;g=(""+g).toLowerCase(),I=!0}}(g);if("string"!=typeof I&&(xa.isEncoding===ja||!ja(g)))throw new Error("Unknown encoding: "+g);return I||g}(g),this.encoding){case"utf16le":this.text=gd,this.end=Id,I=4;break;case"utf8":this.fillLast=qa,I=4;break;case"base64":this.text=Ad,this.end=Cd,I=3;break;default:return this.write=td,void(this.end=id)}this.lastNeed=0,this.lastTotal=0,this.lastChar=xa.allocUnsafe(I)}function $a(g){return g<=127?0:g>>5==6?2:g>>4==14?3:g>>3==30?4:g>>6==2?-1:-2}function qa(g){var I=this.lastTotal-this.lastNeed,A=function(g,I,A){if(128!=(192&I[0]))return g.lastNeed=0,"ÔøΩ";if(g.lastNeed>1&&I.length>1){if(128!=(192&I[1]))return g.lastNeed=1,"ÔøΩ";if(g.lastNeed>2&&I.length>2&&128!=(192&I[2]))return g.lastNeed=2,"ÔøΩ"}}(this,g);return void 0!==A?A:this.lastNeed<=g.length?(g.copy(this.lastChar,I,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(g.copy(this.lastChar,I,0,g.length),void(this.lastNeed-=g.length))}function gd(g,I){if((g.length-I)%2==0){var A=g.toString("utf16le",I);if(A){var C=A.charCodeAt(A.length-1);if(C>=55296&&C<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1],A.slice(0,-1)}return A}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=g[g.length-1],g.toString("utf16le",I,g.length-1)}function Id(g){var I=g&&g.length?this.write(g):"";if(this.lastNeed){var A=this.lastTotal-this.lastNeed;return I+this.lastChar.toString("utf16le",0,A)}return I}function Ad(g,I){var A=(g.length-I)%3;return 0===A?g.toString("base64",I):(this.lastNeed=3-A,this.lastTotal=3,1===A?this.lastChar[0]=g[g.length-1]:(this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1]),g.toString("base64",I,g.length-A))}function Cd(g){var I=g&&g.length?this.write(g):"";return this.lastNeed?I+this.lastChar.toString("base64",0,3-this.lastNeed):I}function td(g){return g.toString(this.encoding)}function id(g){return g&&g.length?this.write(g):""}Ua.StringDecoder=_a,_a.prototype.write=function(g){if(0===g.length)return"";var I,A;if(this.lastNeed){if(void 0===(I=this.fillLast(g)))return"";A=this.lastNeed,this.lastNeed=0}else A=0;return A<g.length?I?I+this.text(g,A):this.text(g,A):I||""},_a.prototype.end=function(g){var I=g&&g.length?this.write(g):"";return this.lastNeed?I+"ÔøΩ":I},_a.prototype.text=function(g,I){var A=function(g,I,A){var C=I.length-1;if(C<A)return 0;var t=$a(I[C]);if(t>=0)return t>0&&(g.lastNeed=t-1),t;if(--C<A||-2===t)return 0;if((t=$a(I[C]))>=0)return t>0&&(g.lastNeed=t-2),t;if(--C<A||-2===t)return 0;if((t=$a(I[C]))>=0)return t>0&&(2===t?t=0:g.lastNeed=t-3),t;return 0}(this,g,I);if(!this.lastNeed)return g.toString("utf8",I);this.lastTotal=A;var C=g.length-(A-this.lastNeed);return g.copy(this.lastChar,0,C),g.toString("utf8",I,C)},_a.prototype.fillLast=function(g){if(this.lastNeed<=g.length)return g.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);g.copy(this.lastChar,this.lastTotal-this.lastNeed,0,g.length),this.lastNeed-=g.length};var ed=Aa.codes.ERR_STREAM_PREMATURE_CLOSE;function od(){}var nd,sd=function g(I,A,C){if("function"==typeof A)return g(I,null,A);A||(A={}),C=function(g){var I=!1;return function(){if(!I){I=!0;for(var A=arguments.length,C=new Array(A),t=0;t<A;t++)C[t]=arguments[t];g.apply(this,C)}}}(C||od);var t=A.readable||!1!==A.readable&&I.readable,i=A.writable||!1!==A.writable&&I.writable,e=function(){I.writable||n()},o=I._writableState&&I._writableState.finished,n=function(){i=!1,o=!0,t||C.call(I)},s=I._readableState&&I._readableState.endEmitted,l=function(){t=!1,s=!0,i||C.call(I)},r=function(g){C.call(I,g)},c=function(){var g;return t&&!s?(I._readableState&&I._readableState.ended||(g=new ed),C.call(I,g)):i&&!o?(I._writableState&&I._writableState.ended||(g=new ed),C.call(I,g)):void 0},a=function(){I.req.on("finish",n)};return!function(g){return g.setHeader&&"function"==typeof g.abort}(I)?i&&!I._writableState&&(I.on("end",e),I.on("close",e)):(I.on("complete",n),I.on("abort",c),I.req?a():I.on("request",a)),I.on("end",l),I.on("finish",n),!1!==A.error&&I.on("error",r),I.on("close",c),function(){I.removeListener("complete",n),I.removeListener("abort",c),I.removeListener("request",a),I.req&&I.req.removeListener("finish",n),I.removeListener("end",e),I.removeListener("close",e),I.removeListener("finish",n),I.removeListener("end",l),I.removeListener("error",r),I.removeListener("close",c)}};function ld(g,I,A){return I in g?Object.defineProperty(g,I,{value:A,enumerable:!0,configurable:!0,writable:!0}):g[I]=A,g}var rd=sd,cd=Symbol("lastResolve"),ad=Symbol("lastReject"),dd=Symbol("error"),hd=Symbol("ended"),md=Symbol("lastPromise"),Zd=Symbol("handlePromise"),ud=Symbol("stream");function Gd(g,I){return{value:g,done:I}}function bd(g){var I=g[cd];if(null!==I){var A=g[ud].read();null!==A&&(g[md]=null,g[cd]=null,g[ad]=null,I(Gd(A,!1)))}}function pd(g){process.nextTick(bd,g)}var Bd=Object.getPrototypeOf((function(){})),yd=Object.setPrototypeOf((ld(nd={get stream(){return this[ud]},next:function(){var g=this,I=this[dd];if(null!==I)return Promise.reject(I);if(this[hd])return Promise.resolve(Gd(void 0,!0));if(this[ud].destroyed)return new Promise((function(I,A){process.nextTick((function(){g[dd]?A(g[dd]):I(Gd(void 0,!0))}))}));var A,C=this[md];if(C)A=new Promise(function(g,I){return function(A,C){g.then((function(){I[hd]?A(Gd(void 0,!0)):I[Zd](A,C)}),C)}}(C,this));else{var t=this[ud].read();if(null!==t)return Promise.resolve(Gd(t,!1));A=new Promise(this[Zd])}return this[md]=A,A}},Symbol.asyncIterator,(function(){return this})),ld(nd,"return",(function(){var g=this;return new Promise((function(I,A){g[ud].destroy(null,(function(g){g?A(g):I(Gd(void 0,!0))}))}))})),nd),Bd),wd=function(g){var I,A=Object.create(yd,(ld(I={},ud,{value:g,writable:!0}),ld(I,cd,{value:null,writable:!0}),ld(I,ad,{value:null,writable:!0}),ld(I,dd,{value:null,writable:!0}),ld(I,hd,{value:g._readableState.endEmitted,writable:!0}),ld(I,Zd,{value:function(g,I){var C=A[ud].read();C?(A[md]=null,A[cd]=null,A[ad]=null,g(Gd(C,!1))):(A[cd]=g,A[ad]=I)},writable:!0}),I));return A[md]=null,rd(g,(function(g){if(g&&"ERR_STREAM_PREMATURE_CLOSE"!==g.code){var I=A[ad];return null!==I&&(A[md]=null,A[cd]=null,A[ad]=null,I(g)),void(A[dd]=g)}var C=A[cd];null!==C&&(A[md]=null,A[cd]=null,A[ad]=null,C(Gd(void 0,!0))),A[hd]=!0})),g.on("readable",pd.bind(null,A)),A};function Wd(g,I,A,C,t,i,e){try{var o=g[i](e),n=o.value}catch(s){return void A(s)}o.done?I(n):Promise.resolve(n).then(C,t)}function Sd(g){return function(){var I=this,A=arguments;return new Promise((function(C,t){var i=g.apply(I,A);function e(g){Wd(i,C,t,e,o,"next",g)}function o(g){Wd(i,C,t,e,o,"throw",g)}e(void 0)}))}}function Kd(g,I){var A=Object.keys(g);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(g);I&&(C=C.filter((function(I){return Object.getOwnPropertyDescriptor(g,I).enumerable}))),A.push.apply(A,C)}return A}function fd(g,I,A){return I in g?Object.defineProperty(g,I,{value:A,enumerable:!0,configurable:!0,writable:!0}):g[I]=A,g}var Yd=Aa.codes.ERR_INVALID_ARG_TYPE;var Xd,Vd=function(g,I,A){var C;if(I&&"function"==typeof I.next)C=I;else if(I&&I[Symbol.asyncIterator])C=I[Symbol.asyncIterator]();else{if(!I||!I[Symbol.iterator])throw new Yd("iterable",["Iterable"],I);C=I[Symbol.iterator]()}var t=new g(function(g){for(var I=1;I<arguments.length;I++){var A=null!=arguments[I]?arguments[I]:{};I%2?Kd(Object(A),!0).forEach((function(I){fd(g,I,A[I])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(A)):Kd(Object(A)).forEach((function(I){Object.defineProperty(g,I,Object.getOwnPropertyDescriptor(A,I))}))}return g}({objectMode:!0},A)),i=!1;function e(){return o.apply(this,arguments)}function o(){return(o=Sd((function*(){try{var g=yield C.next(),I=g.value;g.done?t.push(null):t.push(yield I)?e():i=!1}catch(A){t.destroy(A)}}))).apply(this,arguments)}return t._read=function(){i||(i=!0,e())},t},Od=qd;qd.ReadableState=$d,Ll.exports.EventEmitter;var Rd=function(g,I){return g.listeners(I).length},Qd=er,Hd=nt.Buffer,kd=ot.Uint8Array||function(){};var Jd,vd=or;Jd=vd&&vd.debuglog?vd.debuglog("stream"):function(){};var Dd,Md,Nd,Ed=_c,Fd=Ia,Ld=na.getHighWaterMark,Td=Aa.codes,zd=Td.ERR_INVALID_ARG_TYPE,Pd=Td.ERR_STREAM_PUSH_AFTER_EOF,Ud=Td.ERR_METHOD_NOT_IMPLEMENTED,xd=Td.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;ki.exports(qd,Qd);var jd=Fd.errorOrDestroy,_d=["error","close","destroy","pause","resume"];function $d(g,I,A){Xd=Xd||Da,g=g||{},"boolean"!=typeof A&&(A=I instanceof Xd),this.objectMode=!!g.objectMode,A&&(this.objectMode=this.objectMode||!!g.readableObjectMode),this.highWaterMark=Ld(this,g,"readableHighWaterMark",A),this.buffer=new Ed,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==g.emitClose,this.autoDestroy=!!g.autoDestroy,this.destroyed=!1,this.defaultEncoding=g.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,g.encoding&&(Dd||(Dd=Ua.StringDecoder),this.decoder=new Dd(g.encoding),this.encoding=g.encoding)}function qd(g){if(Xd=Xd||Da,!(this instanceof qd))return new qd(g);var I=this instanceof Xd;this._readableState=new $d(g,this,I),this.readable=!0,g&&("function"==typeof g.read&&(this._read=g.read),"function"==typeof g.destroy&&(this._destroy=g.destroy)),Qd.call(this)}function gh(g,I,A,C,t){Jd("readableAddChunk",I);var i,e=g._readableState;if(null===I)e.reading=!1,function(g,I){if(Jd("onEofChunk"),I.ended)return;if(I.decoder){var A=I.decoder.end();A&&A.length&&(I.buffer.push(A),I.length+=I.objectMode?1:A.length)}I.ended=!0,I.sync?th(g):(I.needReadable=!1,I.emittedReadable||(I.emittedReadable=!0,ih(g)))}(g,e);else if(t||(i=function(g,I){var A;C=I,Hd.isBuffer(C)||C instanceof kd||"string"==typeof I||void 0===I||g.objectMode||(A=new zd("chunk",["string","Buffer","Uint8Array"],I));var C;return A}(e,I)),i)jd(g,i);else if(e.objectMode||I&&I.length>0)if("string"==typeof I||e.objectMode||Object.getPrototypeOf(I)===Hd.prototype||(I=function(g){return Hd.from(g)}(I)),C)e.endEmitted?jd(g,new xd):Ih(g,e,I,!0);else if(e.ended)jd(g,new Pd);else{if(e.destroyed)return!1;e.reading=!1,e.decoder&&!A?(I=e.decoder.write(I),e.objectMode||0!==I.length?Ih(g,e,I,!1):eh(g,e)):Ih(g,e,I,!1)}else C||(e.reading=!1,eh(g,e));return!e.ended&&(e.length<e.highWaterMark||0===e.length)}function Ih(g,I,A,C){I.flowing&&0===I.length&&!I.sync?(I.awaitDrain=0,g.emit("data",A)):(I.length+=I.objectMode?1:A.length,C?I.buffer.unshift(A):I.buffer.push(A),I.needReadable&&th(g)),eh(g,I)}Object.defineProperty(qd.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(g){this._readableState&&(this._readableState.destroyed=g)}}),qd.prototype.destroy=Fd.destroy,qd.prototype._undestroy=Fd.undestroy,qd.prototype._destroy=function(g,I){I(g)},qd.prototype.push=function(g,I){var A,C=this._readableState;return C.objectMode?A=!0:"string"==typeof g&&((I=I||C.defaultEncoding)!==C.encoding&&(g=Hd.from(g,I),I=""),A=!0),gh(this,g,I,!1,A)},qd.prototype.unshift=function(g){return gh(this,g,null,!0,!1)},qd.prototype.isPaused=function(){return!1===this._readableState.flowing},qd.prototype.setEncoding=function(g){Dd||(Dd=Ua.StringDecoder);var I=new Dd(g);this._readableState.decoder=I,this._readableState.encoding=this._readableState.decoder.encoding;for(var A=this._readableState.buffer.head,C="";null!==A;)C+=I.write(A.data),A=A.next;return this._readableState.buffer.clear(),""!==C&&this._readableState.buffer.push(C),this._readableState.length=C.length,this};var Ah=1073741824;function Ch(g,I){return g<=0||0===I.length&&I.ended?0:I.objectMode?1:g!=g?I.flowing&&I.length?I.buffer.head.data.length:I.length:(g>I.highWaterMark&&(I.highWaterMark=function(g){return g>=Ah?g=Ah:(g--,g|=g>>>1,g|=g>>>2,g|=g>>>4,g|=g>>>8,g|=g>>>16,g++),g}(g)),g<=I.length?g:I.ended?I.length:(I.needReadable=!0,0))}function th(g){var I=g._readableState;Jd("emitReadable",I.needReadable,I.emittedReadable),I.needReadable=!1,I.emittedReadable||(Jd("emitReadable",I.flowing),I.emittedReadable=!0,process.nextTick(ih,g))}function ih(g){var I=g._readableState;Jd("emitReadable_",I.destroyed,I.length,I.ended),I.destroyed||!I.length&&!I.ended||(g.emit("readable"),I.emittedReadable=!1),I.needReadable=!I.flowing&&!I.ended&&I.length<=I.highWaterMark,rh(g)}function eh(g,I){I.readingMore||(I.readingMore=!0,process.nextTick(oh,g,I))}function oh(g,I){for(;!I.reading&&!I.ended&&(I.length<I.highWaterMark||I.flowing&&0===I.length);){var A=I.length;if(Jd("maybeReadMore read 0"),g.read(0),A===I.length)break}I.readingMore=!1}function nh(g){var I=g._readableState;I.readableListening=g.listenerCount("readable")>0,I.resumeScheduled&&!I.paused?I.flowing=!0:g.listenerCount("data")>0&&g.resume()}function sh(g){Jd("readable nexttick read 0"),g.read(0)}function lh(g,I){Jd("resume",I.reading),I.reading||g.read(0),I.resumeScheduled=!1,g.emit("resume"),rh(g),I.flowing&&!I.reading&&g.read(0)}function rh(g){var I=g._readableState;for(Jd("flow",I.flowing);I.flowing&&null!==g.read(););}function ch(g,I){return 0===I.length?null:(I.objectMode?A=I.buffer.shift():!g||g>=I.length?(A=I.decoder?I.buffer.join(""):1===I.buffer.length?I.buffer.first():I.buffer.concat(I.length),I.buffer.clear()):A=I.buffer.consume(g,I.decoder),A);var A}function ah(g){var I=g._readableState;Jd("endReadable",I.endEmitted),I.endEmitted||(I.ended=!0,process.nextTick(dh,I,g))}function dh(g,I){if(Jd("endReadableNT",g.endEmitted,g.length),!g.endEmitted&&0===g.length&&(g.endEmitted=!0,I.readable=!1,I.emit("end"),g.autoDestroy)){var A=I._writableState;(!A||A.autoDestroy&&A.finished)&&I.destroy()}}function hh(g,I){for(var A=0,C=g.length;A<C;A++)if(g[A]===I)return A;return-1}qd.prototype.read=function(g){Jd("read",g),g=parseInt(g,10);var I=this._readableState,A=g;if(0!==g&&(I.emittedReadable=!1),0===g&&I.needReadable&&((0!==I.highWaterMark?I.length>=I.highWaterMark:I.length>0)||I.ended))return Jd("read: emitReadable",I.length,I.ended),0===I.length&&I.ended?ah(this):th(this),null;if(0===(g=Ch(g,I))&&I.ended)return 0===I.length&&ah(this),null;var C,t=I.needReadable;return Jd("need readable",t),(0===I.length||I.length-g<I.highWaterMark)&&Jd("length less than watermark",t=!0),I.ended||I.reading?Jd("reading or ended",t=!1):t&&(Jd("do read"),I.reading=!0,I.sync=!0,0===I.length&&(I.needReadable=!0),this._read(I.highWaterMark),I.sync=!1,I.reading||(g=Ch(A,I))),null===(C=g>0?ch(g,I):null)?(I.needReadable=I.length<=I.highWaterMark,g=0):(I.length-=g,I.awaitDrain=0),0===I.length&&(I.ended||(I.needReadable=!0),A!==g&&I.ended&&ah(this)),null!==C&&this.emit("data",C),C},qd.prototype._read=function(g){jd(this,new Ud("_read()"))},qd.prototype.pipe=function(g,I){var A=this,C=this._readableState;switch(C.pipesCount){case 0:C.pipes=g;break;case 1:C.pipes=[C.pipes,g];break;default:C.pipes.push(g)}C.pipesCount+=1,Jd("pipe count=%d opts=%j",C.pipesCount,I);var t=(!I||!1!==I.end)&&g!==process.stdout&&g!==process.stderr?e:a;function i(I,t){Jd("onunpipe"),I===A&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,Jd("cleanup"),g.removeListener("close",r),g.removeListener("finish",c),g.removeListener("drain",o),g.removeListener("error",l),g.removeListener("unpipe",i),A.removeListener("end",e),A.removeListener("end",a),A.removeListener("data",s),n=!0,!C.awaitDrain||g._writableState&&!g._writableState.needDrain||o())}function e(){Jd("onend"),g.end()}C.endEmitted?process.nextTick(t):A.once("end",t),g.on("unpipe",i);var o=function(g){return function(){var I=g._readableState;Jd("pipeOnDrain",I.awaitDrain),I.awaitDrain&&I.awaitDrain--,0===I.awaitDrain&&Rd(g,"data")&&(I.flowing=!0,rh(g))}}(A);g.on("drain",o);var n=!1;function s(I){Jd("ondata");var t=g.write(I);Jd("dest.write",t),!1===t&&((1===C.pipesCount&&C.pipes===g||C.pipesCount>1&&-1!==hh(C.pipes,g))&&!n&&(Jd("false write response, pause",C.awaitDrain),C.awaitDrain++),A.pause())}function l(I){Jd("onerror",I),a(),g.removeListener("error",l),0===Rd(g,"error")&&jd(g,I)}function r(){g.removeListener("finish",c),a()}function c(){Jd("onfinish"),g.removeListener("close",r),a()}function a(){Jd("unpipe"),A.unpipe(g)}return A.on("data",s),function(g,I,A){if("function"==typeof g.prependListener)return g.prependListener(I,A);g._events&&g._events[I]?Array.isArray(g._events[I])?g._events[I].unshift(A):g._events[I]=[A,g._events[I]]:g.on(I,A)}(g,"error",l),g.once("close",r),g.once("finish",c),g.emit("pipe",A),C.flowing||(Jd("pipe resume"),A.resume()),g},qd.prototype.unpipe=function(g){var I=this._readableState,A={hasUnpiped:!1};if(0===I.pipesCount)return this;if(1===I.pipesCount)return g&&g!==I.pipes||(g||(g=I.pipes),I.pipes=null,I.pipesCount=0,I.flowing=!1,g&&g.emit("unpipe",this,A)),this;if(!g){var C=I.pipes,t=I.pipesCount;I.pipes=null,I.pipesCount=0,I.flowing=!1;for(var i=0;i<t;i++)C[i].emit("unpipe",this,{hasUnpiped:!1});return this}var e=hh(I.pipes,g);return-1===e||(I.pipes.splice(e,1),I.pipesCount-=1,1===I.pipesCount&&(I.pipes=I.pipes[0]),g.emit("unpipe",this,A)),this},qd.prototype.on=function(g,I){var A=Qd.prototype.on.call(this,g,I),C=this._readableState;return"data"===g?(C.readableListening=this.listenerCount("readable")>0,!1!==C.flowing&&this.resume()):"readable"===g&&(C.endEmitted||C.readableListening||(C.readableListening=C.needReadable=!0,C.flowing=!1,C.emittedReadable=!1,Jd("on readable",C.length,C.reading),C.length?th(this):C.reading||process.nextTick(sh,this))),A},qd.prototype.addListener=qd.prototype.on,qd.prototype.removeListener=function(g,I){var A=Qd.prototype.removeListener.call(this,g,I);return"readable"===g&&process.nextTick(nh,this),A},qd.prototype.removeAllListeners=function(g){var I=Qd.prototype.removeAllListeners.apply(this,arguments);return"readable"!==g&&void 0!==g||process.nextTick(nh,this),I},qd.prototype.resume=function(){var g=this._readableState;return g.flowing||(Jd("resume"),g.flowing=!g.readableListening,function(g,I){I.resumeScheduled||(I.resumeScheduled=!0,process.nextTick(lh,g,I))}(this,g)),g.paused=!1,this},qd.prototype.pause=function(){return Jd("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(Jd("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},qd.prototype.wrap=function(g){var I=this,A=this._readableState,C=!1;for(var t in g.on("end",(function(){if(Jd("wrapped end"),A.decoder&&!A.ended){var g=A.decoder.end();g&&g.length&&I.push(g)}I.push(null)})),g.on("data",(function(t){(Jd("wrapped data"),A.decoder&&(t=A.decoder.write(t)),A.objectMode&&null==t)||(A.objectMode||t&&t.length)&&(I.push(t)||(C=!0,g.pause()))})),g)void 0===this[t]&&"function"==typeof g[t]&&(this[t]=function(I){return function(){return g[I].apply(g,arguments)}}(t));for(var i=0;i<_d.length;i++)g.on(_d[i],this.emit.bind(this,_d[i]));return this._read=function(I){Jd("wrapped _read",I),C&&(C=!1,g.resume())},this},"function"==typeof Symbol&&(qd.prototype[Symbol.asyncIterator]=function(){return void 0===Md&&(Md=wd),Md(this)}),Object.defineProperty(qd.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(qd.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(qd.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(g){this._readableState&&(this._readableState.flowing=g)}}),qd._fromList=ch,Object.defineProperty(qd.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(qd.from=function(g,I){return void 0===Nd&&(Nd=Vd),Nd(qd,g,I)});var mh=wh,Zh=Aa.codes,uh=Zh.ERR_METHOD_NOT_IMPLEMENTED,Gh=Zh.ERR_MULTIPLE_CALLBACK,bh=Zh.ERR_TRANSFORM_ALREADY_TRANSFORMING,ph=Zh.ERR_TRANSFORM_WITH_LENGTH_0,Bh=Da;function yh(g,I){var A=this._transformState;A.transforming=!1;var C=A.writecb;if(null===C)return this.emit("error",new Gh);A.writechunk=null,A.writecb=null,null!=I&&this.push(I),C(g);var t=this._readableState;t.reading=!1,(t.needReadable||t.length<t.highWaterMark)&&this._read(t.highWaterMark)}function wh(g){if(!(this instanceof wh))return new wh(g);Bh.call(this,g),this._transformState={afterTransform:yh.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,g&&("function"==typeof g.transform&&(this._transform=g.transform),"function"==typeof g.flush&&(this._flush=g.flush)),this.on("prefinish",Wh)}function Wh(){var g=this;"function"!=typeof this._flush||this._readableState.destroyed?Sh(this,null,null):this._flush((function(I,A){Sh(g,I,A)}))}function Sh(g,I,A){if(I)return g.emit("error",I);if(null!=A&&g.push(A),g._writableState.length)throw new ph;if(g._transformState.transforming)throw new bh;return g.push(null)}ki.exports(wh,Bh),wh.prototype.push=function(g,I){return this._transformState.needTransform=!1,Bh.prototype.push.call(this,g,I)},wh.prototype._transform=function(g,I,A){A(new uh("_transform()"))},wh.prototype._write=function(g,I,A){var C=this._transformState;if(C.writecb=A,C.writechunk=g,C.writeencoding=I,!C.transforming){var t=this._readableState;(C.needTransform||t.needReadable||t.length<t.highWaterMark)&&this._read(t.highWaterMark)}},wh.prototype._read=function(g){var I=this._transformState;null===I.writechunk||I.transforming?I.needTransform=!0:(I.transforming=!0,this._transform(I.writechunk,I.writeencoding,I.afterTransform))},wh.prototype._destroy=function(g,I){Bh.prototype._destroy.call(this,g,(function(g){I(g)}))};var Kh,fh=Xh,Yh=mh;function Xh(g){if(!(this instanceof Xh))return new Xh(g);Yh.call(this,g)}ki.exports(Xh,Yh),Xh.prototype._transform=function(g,I,A){A(null,g)};var Vh=Aa.codes,Oh=Vh.ERR_MISSING_ARGS,Rh=Vh.ERR_STREAM_DESTROYED;function Qh(g){if(g)throw g}function Hh(g,I,A,C){C=function(g){var I=!1;return function(){I||(I=!0,g.apply(void 0,arguments))}}(C);var t=!1;g.on("close",(function(){t=!0})),void 0===Kh&&(Kh=sd),Kh(g,{readable:I,writable:A},(function(g){if(g)return C(g);t=!0,C()}));var i=!1;return function(I){if(!t&&!i)return i=!0,function(g){return g.setHeader&&"function"==typeof g.abort}(g)?g.abort():"function"==typeof g.destroy?g.destroy():void C(I||new Rh("pipe"))}}function kh(g){g()}function Jh(g,I){return g.pipe(I)}function vh(g){return g.length?"function"!=typeof g[g.length-1]?Qh:g.pop():Qh}var Dh=function(){for(var g=arguments.length,I=new Array(g),A=0;A<g;A++)I[A]=arguments[A];var C,t=vh(I);if(Array.isArray(I[0])&&(I=I[0]),I.length<2)throw new Oh("streams");var i=I.map((function(g,A){var e=A<I.length-1;return Hh(g,e,A>0,(function(g){C||(C=g),g&&i.forEach(kh),e||(i.forEach(kh),t(C))}))}));return I.reduce(Jh)},Mh=Eh,Nh=Ll.exports.EventEmitter;function Eh(){Nh.call(this)}(0,ki.exports)(Eh,Nh),Eh.Readable=Od,Eh.Writable=la,Eh.Duplex=Da,Eh.Transform=mh,Eh.PassThrough=fh,Eh.finished=sd,Eh.pipeline=Dh,Eh.Stream=Eh,Eh.prototype.pipe=function(g,I){var A=this;function C(I){g.writable&&!1===g.write(I)&&A.pause&&A.pause()}function t(){A.readable&&A.resume&&A.resume()}A.on("data",C),g.on("drain",t),g._isStdio||I&&!1===I.end||(A.on("end",e),A.on("close",o));var i=!1;function e(){i||(i=!0,g.end())}function o(){i||(i=!0,"function"==typeof g.destroy&&g.destroy())}function n(g){if(s(),0===Nh.listenerCount(this,"error"))throw g}function s(){A.removeListener("data",C),g.removeListener("drain",t),A.removeListener("end",e),A.removeListener("close",o),A.removeListener("error",n),g.removeListener("error",n),A.removeListener("end",s),A.removeListener("close",s),g.removeListener("close",s)}return A.on("error",n),g.on("error",n),A.on("end",s),A.on("close",s),g.on("close",s),g.emit("pipe",A),g},function(g,I){var A=Mh;(I=g.exports=Od).Stream=A||I,I.Readable=I,I.Writable=la,I.Duplex=Da,I.Transform=mh,I.PassThrough=fh,I.finished=sd,I.pipeline=Dh}(Fl,Fl.exports);var Fh=Ht.exports.Buffer,Lh=Fl.exports.Transform;function Th(g){Lh.call(this),this._block=Fh.allocUnsafe(g),this._blockSize=g,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}(0,ki.exports)(Th,Lh),Th.prototype._transform=function(g,I,A){var C=null;try{this.update(g,I)}catch(t){C=t}A(C)},Th.prototype._flush=function(g){var I=null;try{this.push(this.digest())}catch(A){I=A}g(I)},Th.prototype.update=function(g,I){if(function(g,I){if(!Fh.isBuffer(g)&&"string"!=typeof g)throw new TypeError(I+" must be a string or a buffer")}(g,"Data"),this._finalized)throw new Error("Digest already called");Fh.isBuffer(g)||(g=Fh.from(g,I));for(var A=this._block,C=0;this._blockOffset+g.length-C>=this._blockSize;){for(var t=this._blockOffset;t<this._blockSize;)A[t++]=g[C++];this._update(),this._blockOffset=0}for(;C<g.length;)A[this._blockOffset++]=g[C++];for(var i=0,e=8*g.length;e>0;++i)this._length[i]+=e,(e=this._length[i]/4294967296|0)>0&&(this._length[i]-=4294967296*e);return this},Th.prototype._update=function(){throw new Error("_update is not implemented")},Th.prototype.digest=function(g){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var I=this._digest();void 0!==g&&(I=I.toString(g)),this._block.fill(0),this._blockOffset=0;for(var A=0;A<4;++A)this._length[A]=0;return I},Th.prototype._digest=function(){throw new Error("_digest is not implemented")};var zh=Th,Ph=ki.exports,Uh=zh,xh=Ht.exports.Buffer,jh=new Array(16);function _h(){Uh.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function $h(g,I){return g<<I|g>>>32-I}function qh(g,I,A,C,t,i,e){return $h(g+(I&A|~I&C)+t+i|0,e)+I|0}function gm(g,I,A,C,t,i,e){return $h(g+(I&C|A&~C)+t+i|0,e)+I|0}function Im(g,I,A,C,t,i,e){return $h(g+(I^A^C)+t+i|0,e)+I|0}function Am(g,I,A,C,t,i,e){return $h(g+(A^(I|~C))+t+i|0,e)+I|0}Ph(_h,Uh),_h.prototype._update=function(){for(var g=jh,I=0;I<16;++I)g[I]=this._block.readInt32LE(4*I);var A=this._a,C=this._b,t=this._c,i=this._d;A=qh(A,C,t,i,g[0],3614090360,7),i=qh(i,A,C,t,g[1],3905402710,12),t=qh(t,i,A,C,g[2],606105819,17),C=qh(C,t,i,A,g[3],3250441966,22),A=qh(A,C,t,i,g[4],4118548399,7),i=qh(i,A,C,t,g[5],1200080426,12),t=qh(t,i,A,C,g[6],2821735955,17),C=qh(C,t,i,A,g[7],4249261313,22),A=qh(A,C,t,i,g[8],1770035416,7),i=qh(i,A,C,t,g[9],2336552879,12),t=qh(t,i,A,C,g[10],4294925233,17),C=qh(C,t,i,A,g[11],2304563134,22),A=qh(A,C,t,i,g[12],1804603682,7),i=qh(i,A,C,t,g[13],4254626195,12),t=qh(t,i,A,C,g[14],2792965006,17),A=gm(A,C=qh(C,t,i,A,g[15],1236535329,22),t,i,g[1],4129170786,5),i=gm(i,A,C,t,g[6],3225465664,9),t=gm(t,i,A,C,g[11],643717713,14),C=gm(C,t,i,A,g[0],3921069994,20),A=gm(A,C,t,i,g[5],3593408605,5),i=gm(i,A,C,t,g[10],38016083,9),t=gm(t,i,A,C,g[15],3634488961,14),C=gm(C,t,i,A,g[4],3889429448,20),A=gm(A,C,t,i,g[9],568446438,5),i=gm(i,A,C,t,g[14],3275163606,9),t=gm(t,i,A,C,g[3],4107603335,14),C=gm(C,t,i,A,g[8],1163531501,20),A=gm(A,C,t,i,g[13],2850285829,5),i=gm(i,A,C,t,g[2],4243563512,9),t=gm(t,i,A,C,g[7],1735328473,14),A=Im(A,C=gm(C,t,i,A,g[12],2368359562,20),t,i,g[5],4294588738,4),i=Im(i,A,C,t,g[8],2272392833,11),t=Im(t,i,A,C,g[11],1839030562,16),C=Im(C,t,i,A,g[14],4259657740,23),A=Im(A,C,t,i,g[1],2763975236,4),i=Im(i,A,C,t,g[4],1272893353,11),t=Im(t,i,A,C,g[7],4139469664,16),C=Im(C,t,i,A,g[10],3200236656,23),A=Im(A,C,t,i,g[13],681279174,4),i=Im(i,A,C,t,g[0],3936430074,11),t=Im(t,i,A,C,g[3],3572445317,16),C=Im(C,t,i,A,g[6],76029189,23),A=Im(A,C,t,i,g[9],3654602809,4),i=Im(i,A,C,t,g[12],3873151461,11),t=Im(t,i,A,C,g[15],530742520,16),A=Am(A,C=Im(C,t,i,A,g[2],3299628645,23),t,i,g[0],4096336452,6),i=Am(i,A,C,t,g[7],1126891415,10),t=Am(t,i,A,C,g[14],2878612391,15),C=Am(C,t,i,A,g[5],4237533241,21),A=Am(A,C,t,i,g[12],1700485571,6),i=Am(i,A,C,t,g[3],2399980690,10),t=Am(t,i,A,C,g[10],4293915773,15),C=Am(C,t,i,A,g[1],2240044497,21),A=Am(A,C,t,i,g[8],1873313359,6),i=Am(i,A,C,t,g[15],4264355552,10),t=Am(t,i,A,C,g[6],2734768916,15),C=Am(C,t,i,A,g[13],1309151649,21),A=Am(A,C,t,i,g[4],4149444226,6),i=Am(i,A,C,t,g[11],3174756917,10),t=Am(t,i,A,C,g[2],718787259,15),C=Am(C,t,i,A,g[9],3951481745,21),this._a=this._a+A|0,this._b=this._b+C|0,this._c=this._c+t|0,this._d=this._d+i|0},_h.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var g=xh.allocUnsafe(16);return g.writeInt32LE(this._a,0),g.writeInt32LE(this._b,4),g.writeInt32LE(this._c,8),g.writeInt32LE(this._d,12),g};var Cm=_h,tm=Ht.exports.Buffer,im=Cm;var em=function(g,I,A,C){if(tm.isBuffer(g)||(g=tm.from(g,"binary")),I&&(tm.isBuffer(I)||(I=tm.from(I,"binary")),8!==I.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var t=A/8,i=tm.alloc(t),e=tm.alloc(C||0),o=tm.alloc(0);t>0||C>0;){var n=new im;n.update(o),n.update(g),I&&n.update(I),o=n.digest();var s=0;if(t>0){var l=i.length-t;s=Math.min(t,o.length),o.copy(i,l,0,s),t-=s}if(s<o.length&&C>0){var r=e.length-C,c=Math.min(C,o.length-s);o.copy(e,r,s,s+c),C-=c}}return o.fill(0),{key:i,iv:e}},om={},nm=St;om.createCipher=om.Cipher=nm.createCipher,om.createCipheriv=om.Cipheriv=nm.createCipheriv,om.createDecipher=om.Decipher=nm.createDecipher,om.createDecipheriv=om.Decipheriv=nm.createDecipheriv,om.listCiphers=om.getCiphers=nm.getCiphers;var sm=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,lm=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,rm=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,cm=em,am=om,dm=Ht.exports.Buffer,hm=as,mm={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"},Zm=function(g,I){var A,C=g.toString(),t=C.match(sm);if(t){var i="aes"+t[1],e=dm.from(t[2],"hex"),o=dm.from(t[3].replace(/[\r\n]/g,""),"base64"),n=cm(I,e.slice(0,8),parseInt(t[1],10)).key,s=[],l=am.createDecipheriv(i,n,e);s.push(l.update(o)),s.push(l.final()),A=dm.concat(s)}else{var r=C.match(rm);A=dm.from(r[2].replace(/[\r\n]/g,""),"base64")}return{tag:C.match(lm)[1],data:A}},um=om,Gm=Vt,bm=Ht.exports.Buffer,pm=Bm;function Bm(g){var I;"object"!=typeof g||bm.isBuffer(g)||(I=g.passphrase,g=g.key),"string"==typeof g&&(g=bm.from(g));var A,C,t=Zm(g,I),i=t.tag,e=t.data;switch(i){case"CERTIFICATE":C=hm.certificate.decode(e,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(C||(C=hm.PublicKey.decode(e,"der")),A=C.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return hm.RSAPublicKey.decode(C.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return C.subjectPrivateKey=C.subjectPublicKey,{type:"ec",data:C};case"1.2.840.10040.4.1":return C.algorithm.params.pub_key=hm.DSAparam.decode(C.subjectPublicKey.data,"der"),{type:"dsa",data:C.algorithm.params};default:throw new Error("unknown key id "+A)}case"ENCRYPTED PRIVATE KEY":e=function(g,I){var A=g.algorithm.decrypt.kde.kdeparams.salt,C=parseInt(g.algorithm.decrypt.kde.kdeparams.iters.toString(),10),t=mm[g.algorithm.decrypt.cipher.algo.join(".")],i=g.algorithm.decrypt.cipher.iv,e=g.subjectPrivateKey,o=parseInt(t.split("-")[1],10)/8,n=Gm.pbkdf2Sync(I,A,C,o,"sha1"),s=um.createDecipheriv(t,n,i),l=[];return l.push(s.update(e)),l.push(s.final()),bm.concat(l)}(e=hm.EncryptedPrivateKey.decode(e,"der"),I);case"PRIVATE KEY":switch(A=(C=hm.PrivateKey.decode(e,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return hm.RSAPrivateKey.decode(C.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:C.algorithm.curve,privateKey:hm.ECPrivateKey.decode(C.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return C.algorithm.params.priv_key=hm.DSAparam.decode(C.subjectPrivateKey,"der"),{type:"dsa",params:C.algorithm.params};default:throw new Error("unknown key id "+A)}case"RSA PUBLIC KEY":return hm.RSAPublicKey.decode(e,"der");case"RSA PRIVATE KEY":return hm.RSAPrivateKey.decode(e,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:hm.DSAPrivateKey.decode(e,"der")};case"EC PRIVATE KEY":return{curve:(e=hm.ECPrivateKey.decode(e,"der")).parameters.value,privateKey:e.privateKey};default:throw new Error("unknown key type "+i)}}Bm.signature=hm.signature;var ym=ft,wm=Ht.exports.Buffer,Wm=function(g,I){for(var A,C=wm.alloc(0),t=0;C.length<I;)A=Sm(t++),C=wm.concat([C,ym("sha1").update(g).update(A).digest()]);return C.slice(0,I)};function Sm(g){var I=wm.allocUnsafe(4);return I.writeUInt32BE(g,0),I}var Km=function(g,I){for(var A=g.length,C=-1;++C<A;)g[C]^=I[C];return g},fm={exports:{}};!function(g){!function(g,I){function A(g,I){if(!g)throw new Error(I||"Assertion failed")}function C(g,I){g.super_=I;var A=function(){};A.prototype=I.prototype,g.prototype=new A,g.prototype.constructor=g}function t(g,I,A){if(t.isBN(g))return g;this.negative=0,this.words=null,this.length=0,this.red=null,null!==g&&("le"!==I&&"be"!==I||(A=I,I=10),this._init(g||0,I||10,A||"be"))}var i;"object"==typeof g?g.exports=t:I.BN=t,t.BN=t,t.wordSize=26;try{i="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:require("buffer").Buffer}catch(dD){}function e(g,I){var A=g.charCodeAt(I);return A>=65&&A<=70?A-55:A>=97&&A<=102?A-87:A-48&15}function o(g,I,A){var C=e(g,A);return A-1>=I&&(C|=e(g,A-1)<<4),C}function n(g,I,A,C){for(var t=0,i=Math.min(g.length,A),e=I;e<i;e++){var o=g.charCodeAt(e)-48;t*=C,t+=o>=49?o-49+10:o>=17?o-17+10:o}return t}t.isBN=function(g){return g instanceof t||null!==g&&"object"==typeof g&&g.constructor.wordSize===t.wordSize&&Array.isArray(g.words)},t.max=function(g,I){return g.cmp(I)>0?g:I},t.min=function(g,I){return g.cmp(I)<0?g:I},t.prototype._init=function(g,I,C){if("number"==typeof g)return this._initNumber(g,I,C);if("object"==typeof g)return this._initArray(g,I,C);"hex"===I&&(I=16),A(I===(0|I)&&I>=2&&I<=36);var t=0;"-"===(g=g.toString().replace(/\s+/g,""))[0]&&(t++,this.negative=1),t<g.length&&(16===I?this._parseHex(g,t,C):(this._parseBase(g,I,t),"le"===C&&this._initArray(this.toArray(),I,C)))},t.prototype._initNumber=function(g,I,C){g<0&&(this.negative=1,g=-g),g<67108864?(this.words=[67108863&g],this.length=1):g<4503599627370496?(this.words=[67108863&g,g/67108864&67108863],this.length=2):(A(g<9007199254740992),this.words=[67108863&g,g/67108864&67108863,1],this.length=3),"le"===C&&this._initArray(this.toArray(),I,C)},t.prototype._initArray=function(g,I,C){if(A("number"==typeof g.length),g.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(g.length/3),this.words=new Array(this.length);for(var t=0;t<this.length;t++)this.words[t]=0;var i,e,o=0;if("be"===C)for(t=g.length-1,i=0;t>=0;t-=3)e=g[t]|g[t-1]<<8|g[t-2]<<16,this.words[i]|=e<<o&67108863,this.words[i+1]=e>>>26-o&67108863,(o+=24)>=26&&(o-=26,i++);else if("le"===C)for(t=0,i=0;t<g.length;t+=3)e=g[t]|g[t+1]<<8|g[t+2]<<16,this.words[i]|=e<<o&67108863,this.words[i+1]=e>>>26-o&67108863,(o+=24)>=26&&(o-=26,i++);return this.strip()},t.prototype._parseHex=function(g,I,A){this.length=Math.ceil((g.length-I)/6),this.words=new Array(this.length);for(var C=0;C<this.length;C++)this.words[C]=0;var t,i=0,e=0;if("be"===A)for(C=g.length-1;C>=I;C-=2)t=o(g,I,C)<<i,this.words[e]|=67108863&t,i>=18?(i-=18,e+=1,this.words[e]|=t>>>26):i+=8;else for(C=(g.length-I)%2==0?I+1:I;C<g.length;C+=2)t=o(g,I,C)<<i,this.words[e]|=67108863&t,i>=18?(i-=18,e+=1,this.words[e]|=t>>>26):i+=8;this.strip()},t.prototype._parseBase=function(g,I,A){this.words=[0],this.length=1;for(var C=0,t=1;t<=67108863;t*=I)C++;C--,t=t/I|0;for(var i=g.length-A,e=i%C,o=Math.min(i,i-e)+A,s=0,l=A;l<o;l+=C)s=n(g,l,l+C,I),this.imuln(t),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s);if(0!==e){var r=1;for(s=n(g,l,g.length,I),l=0;l<e;l++)r*=I;this.imuln(r),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s)}this.strip()},t.prototype.copy=function(g){g.words=new Array(this.length);for(var I=0;I<this.length;I++)g.words[I]=this.words[I];g.length=this.length,g.negative=this.negative,g.red=this.red},t.prototype.clone=function(){var g=new t(null);return this.copy(g),g},t.prototype._expand=function(g){for(;this.length<g;)this.words[this.length++]=0;return this},t.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},t.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},t.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var s=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],r=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function c(g,I,A){A.negative=I.negative^g.negative;var C=g.length+I.length|0;A.length=C,C=C-1|0;var t=0|g.words[0],i=0|I.words[0],e=t*i,o=67108863&e,n=e/67108864|0;A.words[0]=o;for(var s=1;s<C;s++){for(var l=n>>>26,r=67108863&n,c=Math.min(s,I.length-1),a=Math.max(0,s-g.length+1);a<=c;a++){var d=s-a|0;l+=(e=(t=0|g.words[d])*(i=0|I.words[a])+r)/67108864|0,r=67108863&e}A.words[s]=0|r,n=0|l}return 0!==n?A.words[s]=0|n:A.length--,A.strip()}t.prototype.toString=function(g,I){var C;if(I=0|I||1,16===(g=g||10)||"hex"===g){C="";for(var t=0,i=0,e=0;e<this.length;e++){var o=this.words[e],n=(16777215&(o<<t|i)).toString(16);C=0!==(i=o>>>24-t&16777215)||e!==this.length-1?s[6-n.length]+n+C:n+C,(t+=2)>=26&&(t-=26,e--)}for(0!==i&&(C=i.toString(16)+C);C.length%I!=0;)C="0"+C;return 0!==this.negative&&(C="-"+C),C}if(g===(0|g)&&g>=2&&g<=36){var c=l[g],a=r[g];C="";var d=this.clone();for(d.negative=0;!d.isZero();){var h=d.modn(a).toString(g);C=(d=d.idivn(a)).isZero()?h+C:s[c-h.length]+h+C}for(this.isZero()&&(C="0"+C);C.length%I!=0;)C="0"+C;return 0!==this.negative&&(C="-"+C),C}A(!1,"Base should be between 2 and 36")},t.prototype.toNumber=function(){var g=this.words[0];return 2===this.length?g+=67108864*this.words[1]:3===this.length&&1===this.words[2]?g+=4503599627370496+67108864*this.words[1]:this.length>2&&A(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-g:g},t.prototype.toJSON=function(){return this.toString(16)},t.prototype.toBuffer=function(g,I){return A(void 0!==i),this.toArrayLike(i,g,I)},t.prototype.toArray=function(g,I){return this.toArrayLike(Array,g,I)},t.prototype.toArrayLike=function(g,I,C){var t=this.byteLength(),i=C||Math.max(1,t);A(t<=i,"byte array longer than desired length"),A(i>0,"Requested array length <= 0"),this.strip();var e,o,n="le"===I,s=new g(i),l=this.clone();if(n){for(o=0;!l.isZero();o++)e=l.andln(255),l.iushrn(8),s[o]=e;for(;o<i;o++)s[o]=0}else{for(o=0;o<i-t;o++)s[o]=0;for(o=0;!l.isZero();o++)e=l.andln(255),l.iushrn(8),s[i-o-1]=e}return s},Math.clz32?t.prototype._countBits=function(g){return 32-Math.clz32(g)}:t.prototype._countBits=function(g){var I=g,A=0;return I>=4096&&(A+=13,I>>>=13),I>=64&&(A+=7,I>>>=7),I>=8&&(A+=4,I>>>=4),I>=2&&(A+=2,I>>>=2),A+I},t.prototype._zeroBits=function(g){if(0===g)return 26;var I=g,A=0;return 0==(8191&I)&&(A+=13,I>>>=13),0==(127&I)&&(A+=7,I>>>=7),0==(15&I)&&(A+=4,I>>>=4),0==(3&I)&&(A+=2,I>>>=2),0==(1&I)&&A++,A},t.prototype.bitLength=function(){var g=this.words[this.length-1],I=this._countBits(g);return 26*(this.length-1)+I},t.prototype.zeroBits=function(){if(this.isZero())return 0;for(var g=0,I=0;I<this.length;I++){var A=this._zeroBits(this.words[I]);if(g+=A,26!==A)break}return g},t.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},t.prototype.toTwos=function(g){return 0!==this.negative?this.abs().inotn(g).iaddn(1):this.clone()},t.prototype.fromTwos=function(g){return this.testn(g-1)?this.notn(g).iaddn(1).ineg():this.clone()},t.prototype.isNeg=function(){return 0!==this.negative},t.prototype.neg=function(){return this.clone().ineg()},t.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},t.prototype.iuor=function(g){for(;this.length<g.length;)this.words[this.length++]=0;for(var I=0;I<g.length;I++)this.words[I]=this.words[I]|g.words[I];return this.strip()},t.prototype.ior=function(g){return A(0==(this.negative|g.negative)),this.iuor(g)},t.prototype.or=function(g){return this.length>g.length?this.clone().ior(g):g.clone().ior(this)},t.prototype.uor=function(g){return this.length>g.length?this.clone().iuor(g):g.clone().iuor(this)},t.prototype.iuand=function(g){var I;I=this.length>g.length?g:this;for(var A=0;A<I.length;A++)this.words[A]=this.words[A]&g.words[A];return this.length=I.length,this.strip()},t.prototype.iand=function(g){return A(0==(this.negative|g.negative)),this.iuand(g)},t.prototype.and=function(g){return this.length>g.length?this.clone().iand(g):g.clone().iand(this)},t.prototype.uand=function(g){return this.length>g.length?this.clone().iuand(g):g.clone().iuand(this)},t.prototype.iuxor=function(g){var I,A;this.length>g.length?(I=this,A=g):(I=g,A=this);for(var C=0;C<A.length;C++)this.words[C]=I.words[C]^A.words[C];if(this!==I)for(;C<I.length;C++)this.words[C]=I.words[C];return this.length=I.length,this.strip()},t.prototype.ixor=function(g){return A(0==(this.negative|g.negative)),this.iuxor(g)},t.prototype.xor=function(g){return this.length>g.length?this.clone().ixor(g):g.clone().ixor(this)},t.prototype.uxor=function(g){return this.length>g.length?this.clone().iuxor(g):g.clone().iuxor(this)},t.prototype.inotn=function(g){A("number"==typeof g&&g>=0);var I=0|Math.ceil(g/26),C=g%26;this._expand(I),C>0&&I--;for(var t=0;t<I;t++)this.words[t]=67108863&~this.words[t];return C>0&&(this.words[t]=~this.words[t]&67108863>>26-C),this.strip()},t.prototype.notn=function(g){return this.clone().inotn(g)},t.prototype.setn=function(g,I){A("number"==typeof g&&g>=0);var C=g/26|0,t=g%26;return this._expand(C+1),this.words[C]=I?this.words[C]|1<<t:this.words[C]&~(1<<t),this.strip()},t.prototype.iadd=function(g){var I,A,C;if(0!==this.negative&&0===g.negative)return this.negative=0,I=this.isub(g),this.negative^=1,this._normSign();if(0===this.negative&&0!==g.negative)return g.negative=0,I=this.isub(g),g.negative=1,I._normSign();this.length>g.length?(A=this,C=g):(A=g,C=this);for(var t=0,i=0;i<C.length;i++)I=(0|A.words[i])+(0|C.words[i])+t,this.words[i]=67108863&I,t=I>>>26;for(;0!==t&&i<A.length;i++)I=(0|A.words[i])+t,this.words[i]=67108863&I,t=I>>>26;if(this.length=A.length,0!==t)this.words[this.length]=t,this.length++;else if(A!==this)for(;i<A.length;i++)this.words[i]=A.words[i];return this},t.prototype.add=function(g){var I;return 0!==g.negative&&0===this.negative?(g.negative=0,I=this.sub(g),g.negative^=1,I):0===g.negative&&0!==this.negative?(this.negative=0,I=g.sub(this),this.negative=1,I):this.length>g.length?this.clone().iadd(g):g.clone().iadd(this)},t.prototype.isub=function(g){if(0!==g.negative){g.negative=0;var I=this.iadd(g);return g.negative=1,I._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(g),this.negative=1,this._normSign();var A,C,t=this.cmp(g);if(0===t)return this.negative=0,this.length=1,this.words[0]=0,this;t>0?(A=this,C=g):(A=g,C=this);for(var i=0,e=0;e<C.length;e++)i=(I=(0|A.words[e])-(0|C.words[e])+i)>>26,this.words[e]=67108863&I;for(;0!==i&&e<A.length;e++)i=(I=(0|A.words[e])+i)>>26,this.words[e]=67108863&I;if(0===i&&e<A.length&&A!==this)for(;e<A.length;e++)this.words[e]=A.words[e];return this.length=Math.max(this.length,e),A!==this&&(this.negative=1),this.strip()},t.prototype.sub=function(g){return this.clone().isub(g)};var a=function(g,I,A){var C,t,i,e=g.words,o=I.words,n=A.words,s=0,l=0|e[0],r=8191&l,c=l>>>13,a=0|e[1],d=8191&a,h=a>>>13,m=0|e[2],Z=8191&m,u=m>>>13,G=0|e[3],b=8191&G,p=G>>>13,B=0|e[4],y=8191&B,w=B>>>13,W=0|e[5],S=8191&W,K=W>>>13,f=0|e[6],Y=8191&f,X=f>>>13,V=0|e[7],O=8191&V,R=V>>>13,Q=0|e[8],H=8191&Q,k=Q>>>13,J=0|e[9],v=8191&J,D=J>>>13,M=0|o[0],N=8191&M,E=M>>>13,F=0|o[1],L=8191&F,T=F>>>13,z=0|o[2],P=8191&z,U=z>>>13,x=0|o[3],j=8191&x,_=x>>>13,$=0|o[4],q=8191&$,gg=$>>>13,Ig=0|o[5],Ag=8191&Ig,Cg=Ig>>>13,tg=0|o[6],ig=8191&tg,eg=tg>>>13,og=0|o[7],ng=8191&og,sg=og>>>13,lg=0|o[8],rg=8191&lg,cg=lg>>>13,ag=0|o[9],dg=8191&ag,hg=ag>>>13;A.negative=g.negative^I.negative,A.length=19;var mg=(s+(C=Math.imul(r,N))|0)+((8191&(t=(t=Math.imul(r,E))+Math.imul(c,N)|0))<<13)|0;s=((i=Math.imul(c,E))+(t>>>13)|0)+(mg>>>26)|0,mg&=67108863,C=Math.imul(d,N),t=(t=Math.imul(d,E))+Math.imul(h,N)|0,i=Math.imul(h,E);var Zg=(s+(C=C+Math.imul(r,L)|0)|0)+((8191&(t=(t=t+Math.imul(r,T)|0)+Math.imul(c,L)|0))<<13)|0;s=((i=i+Math.imul(c,T)|0)+(t>>>13)|0)+(Zg>>>26)|0,Zg&=67108863,C=Math.imul(Z,N),t=(t=Math.imul(Z,E))+Math.imul(u,N)|0,i=Math.imul(u,E),C=C+Math.imul(d,L)|0,t=(t=t+Math.imul(d,T)|0)+Math.imul(h,L)|0,i=i+Math.imul(h,T)|0;var ug=(s+(C=C+Math.imul(r,P)|0)|0)+((8191&(t=(t=t+Math.imul(r,U)|0)+Math.imul(c,P)|0))<<13)|0;s=((i=i+Math.imul(c,U)|0)+(t>>>13)|0)+(ug>>>26)|0,ug&=67108863,C=Math.imul(b,N),t=(t=Math.imul(b,E))+Math.imul(p,N)|0,i=Math.imul(p,E),C=C+Math.imul(Z,L)|0,t=(t=t+Math.imul(Z,T)|0)+Math.imul(u,L)|0,i=i+Math.imul(u,T)|0,C=C+Math.imul(d,P)|0,t=(t=t+Math.imul(d,U)|0)+Math.imul(h,P)|0,i=i+Math.imul(h,U)|0;var Gg=(s+(C=C+Math.imul(r,j)|0)|0)+((8191&(t=(t=t+Math.imul(r,_)|0)+Math.imul(c,j)|0))<<13)|0;s=((i=i+Math.imul(c,_)|0)+(t>>>13)|0)+(Gg>>>26)|0,Gg&=67108863,C=Math.imul(y,N),t=(t=Math.imul(y,E))+Math.imul(w,N)|0,i=Math.imul(w,E),C=C+Math.imul(b,L)|0,t=(t=t+Math.imul(b,T)|0)+Math.imul(p,L)|0,i=i+Math.imul(p,T)|0,C=C+Math.imul(Z,P)|0,t=(t=t+Math.imul(Z,U)|0)+Math.imul(u,P)|0,i=i+Math.imul(u,U)|0,C=C+Math.imul(d,j)|0,t=(t=t+Math.imul(d,_)|0)+Math.imul(h,j)|0,i=i+Math.imul(h,_)|0;var bg=(s+(C=C+Math.imul(r,q)|0)|0)+((8191&(t=(t=t+Math.imul(r,gg)|0)+Math.imul(c,q)|0))<<13)|0;s=((i=i+Math.imul(c,gg)|0)+(t>>>13)|0)+(bg>>>26)|0,bg&=67108863,C=Math.imul(S,N),t=(t=Math.imul(S,E))+Math.imul(K,N)|0,i=Math.imul(K,E),C=C+Math.imul(y,L)|0,t=(t=t+Math.imul(y,T)|0)+Math.imul(w,L)|0,i=i+Math.imul(w,T)|0,C=C+Math.imul(b,P)|0,t=(t=t+Math.imul(b,U)|0)+Math.imul(p,P)|0,i=i+Math.imul(p,U)|0,C=C+Math.imul(Z,j)|0,t=(t=t+Math.imul(Z,_)|0)+Math.imul(u,j)|0,i=i+Math.imul(u,_)|0,C=C+Math.imul(d,q)|0,t=(t=t+Math.imul(d,gg)|0)+Math.imul(h,q)|0,i=i+Math.imul(h,gg)|0;var pg=(s+(C=C+Math.imul(r,Ag)|0)|0)+((8191&(t=(t=t+Math.imul(r,Cg)|0)+Math.imul(c,Ag)|0))<<13)|0;s=((i=i+Math.imul(c,Cg)|0)+(t>>>13)|0)+(pg>>>26)|0,pg&=67108863,C=Math.imul(Y,N),t=(t=Math.imul(Y,E))+Math.imul(X,N)|0,i=Math.imul(X,E),C=C+Math.imul(S,L)|0,t=(t=t+Math.imul(S,T)|0)+Math.imul(K,L)|0,i=i+Math.imul(K,T)|0,C=C+Math.imul(y,P)|0,t=(t=t+Math.imul(y,U)|0)+Math.imul(w,P)|0,i=i+Math.imul(w,U)|0,C=C+Math.imul(b,j)|0,t=(t=t+Math.imul(b,_)|0)+Math.imul(p,j)|0,i=i+Math.imul(p,_)|0,C=C+Math.imul(Z,q)|0,t=(t=t+Math.imul(Z,gg)|0)+Math.imul(u,q)|0,i=i+Math.imul(u,gg)|0,C=C+Math.imul(d,Ag)|0,t=(t=t+Math.imul(d,Cg)|0)+Math.imul(h,Ag)|0,i=i+Math.imul(h,Cg)|0;var Bg=(s+(C=C+Math.imul(r,ig)|0)|0)+((8191&(t=(t=t+Math.imul(r,eg)|0)+Math.imul(c,ig)|0))<<13)|0;s=((i=i+Math.imul(c,eg)|0)+(t>>>13)|0)+(Bg>>>26)|0,Bg&=67108863,C=Math.imul(O,N),t=(t=Math.imul(O,E))+Math.imul(R,N)|0,i=Math.imul(R,E),C=C+Math.imul(Y,L)|0,t=(t=t+Math.imul(Y,T)|0)+Math.imul(X,L)|0,i=i+Math.imul(X,T)|0,C=C+Math.imul(S,P)|0,t=(t=t+Math.imul(S,U)|0)+Math.imul(K,P)|0,i=i+Math.imul(K,U)|0,C=C+Math.imul(y,j)|0,t=(t=t+Math.imul(y,_)|0)+Math.imul(w,j)|0,i=i+Math.imul(w,_)|0,C=C+Math.imul(b,q)|0,t=(t=t+Math.imul(b,gg)|0)+Math.imul(p,q)|0,i=i+Math.imul(p,gg)|0,C=C+Math.imul(Z,Ag)|0,t=(t=t+Math.imul(Z,Cg)|0)+Math.imul(u,Ag)|0,i=i+Math.imul(u,Cg)|0,C=C+Math.imul(d,ig)|0,t=(t=t+Math.imul(d,eg)|0)+Math.imul(h,ig)|0,i=i+Math.imul(h,eg)|0;var yg=(s+(C=C+Math.imul(r,ng)|0)|0)+((8191&(t=(t=t+Math.imul(r,sg)|0)+Math.imul(c,ng)|0))<<13)|0;s=((i=i+Math.imul(c,sg)|0)+(t>>>13)|0)+(yg>>>26)|0,yg&=67108863,C=Math.imul(H,N),t=(t=Math.imul(H,E))+Math.imul(k,N)|0,i=Math.imul(k,E),C=C+Math.imul(O,L)|0,t=(t=t+Math.imul(O,T)|0)+Math.imul(R,L)|0,i=i+Math.imul(R,T)|0,C=C+Math.imul(Y,P)|0,t=(t=t+Math.imul(Y,U)|0)+Math.imul(X,P)|0,i=i+Math.imul(X,U)|0,C=C+Math.imul(S,j)|0,t=(t=t+Math.imul(S,_)|0)+Math.imul(K,j)|0,i=i+Math.imul(K,_)|0,C=C+Math.imul(y,q)|0,t=(t=t+Math.imul(y,gg)|0)+Math.imul(w,q)|0,i=i+Math.imul(w,gg)|0,C=C+Math.imul(b,Ag)|0,t=(t=t+Math.imul(b,Cg)|0)+Math.imul(p,Ag)|0,i=i+Math.imul(p,Cg)|0,C=C+Math.imul(Z,ig)|0,t=(t=t+Math.imul(Z,eg)|0)+Math.imul(u,ig)|0,i=i+Math.imul(u,eg)|0,C=C+Math.imul(d,ng)|0,t=(t=t+Math.imul(d,sg)|0)+Math.imul(h,ng)|0,i=i+Math.imul(h,sg)|0;var wg=(s+(C=C+Math.imul(r,rg)|0)|0)+((8191&(t=(t=t+Math.imul(r,cg)|0)+Math.imul(c,rg)|0))<<13)|0;s=((i=i+Math.imul(c,cg)|0)+(t>>>13)|0)+(wg>>>26)|0,wg&=67108863,C=Math.imul(v,N),t=(t=Math.imul(v,E))+Math.imul(D,N)|0,i=Math.imul(D,E),C=C+Math.imul(H,L)|0,t=(t=t+Math.imul(H,T)|0)+Math.imul(k,L)|0,i=i+Math.imul(k,T)|0,C=C+Math.imul(O,P)|0,t=(t=t+Math.imul(O,U)|0)+Math.imul(R,P)|0,i=i+Math.imul(R,U)|0,C=C+Math.imul(Y,j)|0,t=(t=t+Math.imul(Y,_)|0)+Math.imul(X,j)|0,i=i+Math.imul(X,_)|0,C=C+Math.imul(S,q)|0,t=(t=t+Math.imul(S,gg)|0)+Math.imul(K,q)|0,i=i+Math.imul(K,gg)|0,C=C+Math.imul(y,Ag)|0,t=(t=t+Math.imul(y,Cg)|0)+Math.imul(w,Ag)|0,i=i+Math.imul(w,Cg)|0,C=C+Math.imul(b,ig)|0,t=(t=t+Math.imul(b,eg)|0)+Math.imul(p,ig)|0,i=i+Math.imul(p,eg)|0,C=C+Math.imul(Z,ng)|0,t=(t=t+Math.imul(Z,sg)|0)+Math.imul(u,ng)|0,i=i+Math.imul(u,sg)|0,C=C+Math.imul(d,rg)|0,t=(t=t+Math.imul(d,cg)|0)+Math.imul(h,rg)|0,i=i+Math.imul(h,cg)|0;var Wg=(s+(C=C+Math.imul(r,dg)|0)|0)+((8191&(t=(t=t+Math.imul(r,hg)|0)+Math.imul(c,dg)|0))<<13)|0;s=((i=i+Math.imul(c,hg)|0)+(t>>>13)|0)+(Wg>>>26)|0,Wg&=67108863,C=Math.imul(v,L),t=(t=Math.imul(v,T))+Math.imul(D,L)|0,i=Math.imul(D,T),C=C+Math.imul(H,P)|0,t=(t=t+Math.imul(H,U)|0)+Math.imul(k,P)|0,i=i+Math.imul(k,U)|0,C=C+Math.imul(O,j)|0,t=(t=t+Math.imul(O,_)|0)+Math.imul(R,j)|0,i=i+Math.imul(R,_)|0,C=C+Math.imul(Y,q)|0,t=(t=t+Math.imul(Y,gg)|0)+Math.imul(X,q)|0,i=i+Math.imul(X,gg)|0,C=C+Math.imul(S,Ag)|0,t=(t=t+Math.imul(S,Cg)|0)+Math.imul(K,Ag)|0,i=i+Math.imul(K,Cg)|0,C=C+Math.imul(y,ig)|0,t=(t=t+Math.imul(y,eg)|0)+Math.imul(w,ig)|0,i=i+Math.imul(w,eg)|0,C=C+Math.imul(b,ng)|0,t=(t=t+Math.imul(b,sg)|0)+Math.imul(p,ng)|0,i=i+Math.imul(p,sg)|0,C=C+Math.imul(Z,rg)|0,t=(t=t+Math.imul(Z,cg)|0)+Math.imul(u,rg)|0,i=i+Math.imul(u,cg)|0;var Sg=(s+(C=C+Math.imul(d,dg)|0)|0)+((8191&(t=(t=t+Math.imul(d,hg)|0)+Math.imul(h,dg)|0))<<13)|0;s=((i=i+Math.imul(h,hg)|0)+(t>>>13)|0)+(Sg>>>26)|0,Sg&=67108863,C=Math.imul(v,P),t=(t=Math.imul(v,U))+Math.imul(D,P)|0,i=Math.imul(D,U),C=C+Math.imul(H,j)|0,t=(t=t+Math.imul(H,_)|0)+Math.imul(k,j)|0,i=i+Math.imul(k,_)|0,C=C+Math.imul(O,q)|0,t=(t=t+Math.imul(O,gg)|0)+Math.imul(R,q)|0,i=i+Math.imul(R,gg)|0,C=C+Math.imul(Y,Ag)|0,t=(t=t+Math.imul(Y,Cg)|0)+Math.imul(X,Ag)|0,i=i+Math.imul(X,Cg)|0,C=C+Math.imul(S,ig)|0,t=(t=t+Math.imul(S,eg)|0)+Math.imul(K,ig)|0,i=i+Math.imul(K,eg)|0,C=C+Math.imul(y,ng)|0,t=(t=t+Math.imul(y,sg)|0)+Math.imul(w,ng)|0,i=i+Math.imul(w,sg)|0,C=C+Math.imul(b,rg)|0,t=(t=t+Math.imul(b,cg)|0)+Math.imul(p,rg)|0,i=i+Math.imul(p,cg)|0;var Kg=(s+(C=C+Math.imul(Z,dg)|0)|0)+((8191&(t=(t=t+Math.imul(Z,hg)|0)+Math.imul(u,dg)|0))<<13)|0;s=((i=i+Math.imul(u,hg)|0)+(t>>>13)|0)+(Kg>>>26)|0,Kg&=67108863,C=Math.imul(v,j),t=(t=Math.imul(v,_))+Math.imul(D,j)|0,i=Math.imul(D,_),C=C+Math.imul(H,q)|0,t=(t=t+Math.imul(H,gg)|0)+Math.imul(k,q)|0,i=i+Math.imul(k,gg)|0,C=C+Math.imul(O,Ag)|0,t=(t=t+Math.imul(O,Cg)|0)+Math.imul(R,Ag)|0,i=i+Math.imul(R,Cg)|0,C=C+Math.imul(Y,ig)|0,t=(t=t+Math.imul(Y,eg)|0)+Math.imul(X,ig)|0,i=i+Math.imul(X,eg)|0,C=C+Math.imul(S,ng)|0,t=(t=t+Math.imul(S,sg)|0)+Math.imul(K,ng)|0,i=i+Math.imul(K,sg)|0,C=C+Math.imul(y,rg)|0,t=(t=t+Math.imul(y,cg)|0)+Math.imul(w,rg)|0,i=i+Math.imul(w,cg)|0;var fg=(s+(C=C+Math.imul(b,dg)|0)|0)+((8191&(t=(t=t+Math.imul(b,hg)|0)+Math.imul(p,dg)|0))<<13)|0;s=((i=i+Math.imul(p,hg)|0)+(t>>>13)|0)+(fg>>>26)|0,fg&=67108863,C=Math.imul(v,q),t=(t=Math.imul(v,gg))+Math.imul(D,q)|0,i=Math.imul(D,gg),C=C+Math.imul(H,Ag)|0,t=(t=t+Math.imul(H,Cg)|0)+Math.imul(k,Ag)|0,i=i+Math.imul(k,Cg)|0,C=C+Math.imul(O,ig)|0,t=(t=t+Math.imul(O,eg)|0)+Math.imul(R,ig)|0,i=i+Math.imul(R,eg)|0,C=C+Math.imul(Y,ng)|0,t=(t=t+Math.imul(Y,sg)|0)+Math.imul(X,ng)|0,i=i+Math.imul(X,sg)|0,C=C+Math.imul(S,rg)|0,t=(t=t+Math.imul(S,cg)|0)+Math.imul(K,rg)|0,i=i+Math.imul(K,cg)|0;var Yg=(s+(C=C+Math.imul(y,dg)|0)|0)+((8191&(t=(t=t+Math.imul(y,hg)|0)+Math.imul(w,dg)|0))<<13)|0;s=((i=i+Math.imul(w,hg)|0)+(t>>>13)|0)+(Yg>>>26)|0,Yg&=67108863,C=Math.imul(v,Ag),t=(t=Math.imul(v,Cg))+Math.imul(D,Ag)|0,i=Math.imul(D,Cg),C=C+Math.imul(H,ig)|0,t=(t=t+Math.imul(H,eg)|0)+Math.imul(k,ig)|0,i=i+Math.imul(k,eg)|0,C=C+Math.imul(O,ng)|0,t=(t=t+Math.imul(O,sg)|0)+Math.imul(R,ng)|0,i=i+Math.imul(R,sg)|0,C=C+Math.imul(Y,rg)|0,t=(t=t+Math.imul(Y,cg)|0)+Math.imul(X,rg)|0,i=i+Math.imul(X,cg)|0;var Xg=(s+(C=C+Math.imul(S,dg)|0)|0)+((8191&(t=(t=t+Math.imul(S,hg)|0)+Math.imul(K,dg)|0))<<13)|0;s=((i=i+Math.imul(K,hg)|0)+(t>>>13)|0)+(Xg>>>26)|0,Xg&=67108863,C=Math.imul(v,ig),t=(t=Math.imul(v,eg))+Math.imul(D,ig)|0,i=Math.imul(D,eg),C=C+Math.imul(H,ng)|0,t=(t=t+Math.imul(H,sg)|0)+Math.imul(k,ng)|0,i=i+Math.imul(k,sg)|0,C=C+Math.imul(O,rg)|0,t=(t=t+Math.imul(O,cg)|0)+Math.imul(R,rg)|0,i=i+Math.imul(R,cg)|0;var Vg=(s+(C=C+Math.imul(Y,dg)|0)|0)+((8191&(t=(t=t+Math.imul(Y,hg)|0)+Math.imul(X,dg)|0))<<13)|0;s=((i=i+Math.imul(X,hg)|0)+(t>>>13)|0)+(Vg>>>26)|0,Vg&=67108863,C=Math.imul(v,ng),t=(t=Math.imul(v,sg))+Math.imul(D,ng)|0,i=Math.imul(D,sg),C=C+Math.imul(H,rg)|0,t=(t=t+Math.imul(H,cg)|0)+Math.imul(k,rg)|0,i=i+Math.imul(k,cg)|0;var Og=(s+(C=C+Math.imul(O,dg)|0)|0)+((8191&(t=(t=t+Math.imul(O,hg)|0)+Math.imul(R,dg)|0))<<13)|0;s=((i=i+Math.imul(R,hg)|0)+(t>>>13)|0)+(Og>>>26)|0,Og&=67108863,C=Math.imul(v,rg),t=(t=Math.imul(v,cg))+Math.imul(D,rg)|0,i=Math.imul(D,cg);var Rg=(s+(C=C+Math.imul(H,dg)|0)|0)+((8191&(t=(t=t+Math.imul(H,hg)|0)+Math.imul(k,dg)|0))<<13)|0;s=((i=i+Math.imul(k,hg)|0)+(t>>>13)|0)+(Rg>>>26)|0,Rg&=67108863;var Qg=(s+(C=Math.imul(v,dg))|0)+((8191&(t=(t=Math.imul(v,hg))+Math.imul(D,dg)|0))<<13)|0;return s=((i=Math.imul(D,hg))+(t>>>13)|0)+(Qg>>>26)|0,Qg&=67108863,n[0]=mg,n[1]=Zg,n[2]=ug,n[3]=Gg,n[4]=bg,n[5]=pg,n[6]=Bg,n[7]=yg,n[8]=wg,n[9]=Wg,n[10]=Sg,n[11]=Kg,n[12]=fg,n[13]=Yg,n[14]=Xg,n[15]=Vg,n[16]=Og,n[17]=Rg,n[18]=Qg,0!==s&&(n[19]=s,A.length++),A};function d(g,I,A){return(new h).mulp(g,I,A)}function h(g,I){this.x=g,this.y=I}Math.imul||(a=c),t.prototype.mulTo=function(g,I){var A=this.length+g.length;return 10===this.length&&10===g.length?a(this,g,I):A<63?c(this,g,I):A<1024?function(g,I,A){A.negative=I.negative^g.negative,A.length=g.length+I.length;for(var C=0,t=0,i=0;i<A.length-1;i++){var e=t;t=0;for(var o=67108863&C,n=Math.min(i,I.length-1),s=Math.max(0,i-g.length+1);s<=n;s++){var l=i-s,r=(0|g.words[l])*(0|I.words[s]),c=67108863&r;o=67108863&(c=c+o|0),t+=(e=(e=e+(r/67108864|0)|0)+(c>>>26)|0)>>>26,e&=67108863}A.words[i]=o,C=e,e=t}return 0!==C?A.words[i]=C:A.length--,A.strip()}(this,g,I):d(this,g,I)},h.prototype.makeRBT=function(g){for(var I=new Array(g),A=t.prototype._countBits(g)-1,C=0;C<g;C++)I[C]=this.revBin(C,A,g);return I},h.prototype.revBin=function(g,I,A){if(0===g||g===A-1)return g;for(var C=0,t=0;t<I;t++)C|=(1&g)<<I-t-1,g>>=1;return C},h.prototype.permute=function(g,I,A,C,t,i){for(var e=0;e<i;e++)C[e]=I[g[e]],t[e]=A[g[e]]},h.prototype.transform=function(g,I,A,C,t,i){this.permute(i,g,I,A,C,t);for(var e=1;e<t;e<<=1)for(var o=e<<1,n=Math.cos(2*Math.PI/o),s=Math.sin(2*Math.PI/o),l=0;l<t;l+=o)for(var r=n,c=s,a=0;a<e;a++){var d=A[l+a],h=C[l+a],m=A[l+a+e],Z=C[l+a+e],u=r*m-c*Z;Z=r*Z+c*m,m=u,A[l+a]=d+m,C[l+a]=h+Z,A[l+a+e]=d-m,C[l+a+e]=h-Z,a!==o&&(u=n*r-s*c,c=n*c+s*r,r=u)}},h.prototype.guessLen13b=function(g,I){var A=1|Math.max(I,g),C=1&A,t=0;for(A=A/2|0;A;A>>>=1)t++;return 1<<t+1+C},h.prototype.conjugate=function(g,I,A){if(!(A<=1))for(var C=0;C<A/2;C++){var t=g[C];g[C]=g[A-C-1],g[A-C-1]=t,t=I[C],I[C]=-I[A-C-1],I[A-C-1]=-t}},h.prototype.normalize13b=function(g,I){for(var A=0,C=0;C<I/2;C++){var t=8192*Math.round(g[2*C+1]/I)+Math.round(g[2*C]/I)+A;g[C]=67108863&t,A=t<67108864?0:t/67108864|0}return g},h.prototype.convert13b=function(g,I,C,t){for(var i=0,e=0;e<I;e++)i+=0|g[e],C[2*e]=8191&i,i>>>=13,C[2*e+1]=8191&i,i>>>=13;for(e=2*I;e<t;++e)C[e]=0;A(0===i),A(0==(-8192&i))},h.prototype.stub=function(g){for(var I=new Array(g),A=0;A<g;A++)I[A]=0;return I},h.prototype.mulp=function(g,I,A){var C=2*this.guessLen13b(g.length,I.length),t=this.makeRBT(C),i=this.stub(C),e=new Array(C),o=new Array(C),n=new Array(C),s=new Array(C),l=new Array(C),r=new Array(C),c=A.words;c.length=C,this.convert13b(g.words,g.length,e,C),this.convert13b(I.words,I.length,s,C),this.transform(e,i,o,n,C,t),this.transform(s,i,l,r,C,t);for(var a=0;a<C;a++){var d=o[a]*l[a]-n[a]*r[a];n[a]=o[a]*r[a]+n[a]*l[a],o[a]=d}return this.conjugate(o,n,C),this.transform(o,n,c,i,C,t),this.conjugate(c,i,C),this.normalize13b(c,C),A.negative=g.negative^I.negative,A.length=g.length+I.length,A.strip()},t.prototype.mul=function(g){var I=new t(null);return I.words=new Array(this.length+g.length),this.mulTo(g,I)},t.prototype.mulf=function(g){var I=new t(null);return I.words=new Array(this.length+g.length),d(this,g,I)},t.prototype.imul=function(g){return this.clone().mulTo(g,this)},t.prototype.imuln=function(g){A("number"==typeof g),A(g<67108864);for(var I=0,C=0;C<this.length;C++){var t=(0|this.words[C])*g,i=(67108863&t)+(67108863&I);I>>=26,I+=t/67108864|0,I+=i>>>26,this.words[C]=67108863&i}return 0!==I&&(this.words[C]=I,this.length++),this},t.prototype.muln=function(g){return this.clone().imuln(g)},t.prototype.sqr=function(){return this.mul(this)},t.prototype.isqr=function(){return this.imul(this.clone())},t.prototype.pow=function(g){var I=function(g){for(var I=new Array(g.bitLength()),A=0;A<I.length;A++){var C=A/26|0,t=A%26;I[A]=(g.words[C]&1<<t)>>>t}return I}(g);if(0===I.length)return new t(1);for(var A=this,C=0;C<I.length&&0===I[C];C++,A=A.sqr());if(++C<I.length)for(var i=A.sqr();C<I.length;C++,i=i.sqr())0!==I[C]&&(A=A.mul(i));return A},t.prototype.iushln=function(g){A("number"==typeof g&&g>=0);var I,C=g%26,t=(g-C)/26,i=67108863>>>26-C<<26-C;if(0!==C){var e=0;for(I=0;I<this.length;I++){var o=this.words[I]&i,n=(0|this.words[I])-o<<C;this.words[I]=n|e,e=o>>>26-C}e&&(this.words[I]=e,this.length++)}if(0!==t){for(I=this.length-1;I>=0;I--)this.words[I+t]=this.words[I];for(I=0;I<t;I++)this.words[I]=0;this.length+=t}return this.strip()},t.prototype.ishln=function(g){return A(0===this.negative),this.iushln(g)},t.prototype.iushrn=function(g,I,C){var t;A("number"==typeof g&&g>=0),t=I?(I-I%26)/26:0;var i=g%26,e=Math.min((g-i)/26,this.length),o=67108863^67108863>>>i<<i,n=C;if(t-=e,t=Math.max(0,t),n){for(var s=0;s<e;s++)n.words[s]=this.words[s];n.length=e}if(0===e);else if(this.length>e)for(this.length-=e,s=0;s<this.length;s++)this.words[s]=this.words[s+e];else this.words[0]=0,this.length=1;var l=0;for(s=this.length-1;s>=0&&(0!==l||s>=t);s--){var r=0|this.words[s];this.words[s]=l<<26-i|r>>>i,l=r&o}return n&&0!==l&&(n.words[n.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},t.prototype.ishrn=function(g,I,C){return A(0===this.negative),this.iushrn(g,I,C)},t.prototype.shln=function(g){return this.clone().ishln(g)},t.prototype.ushln=function(g){return this.clone().iushln(g)},t.prototype.shrn=function(g){return this.clone().ishrn(g)},t.prototype.ushrn=function(g){return this.clone().iushrn(g)},t.prototype.testn=function(g){A("number"==typeof g&&g>=0);var I=g%26,C=(g-I)/26,t=1<<I;return!(this.length<=C)&&!!(this.words[C]&t)},t.prototype.imaskn=function(g){A("number"==typeof g&&g>=0);var I=g%26,C=(g-I)/26;if(A(0===this.negative,"imaskn works only with positive numbers"),this.length<=C)return this;if(0!==I&&C++,this.length=Math.min(C,this.length),0!==I){var t=67108863^67108863>>>I<<I;this.words[this.length-1]&=t}return this.strip()},t.prototype.maskn=function(g){return this.clone().imaskn(g)},t.prototype.iaddn=function(g){return A("number"==typeof g),A(g<67108864),g<0?this.isubn(-g):0!==this.negative?1===this.length&&(0|this.words[0])<g?(this.words[0]=g-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(g),this.negative=1,this):this._iaddn(g)},t.prototype._iaddn=function(g){this.words[0]+=g;for(var I=0;I<this.length&&this.words[I]>=67108864;I++)this.words[I]-=67108864,I===this.length-1?this.words[I+1]=1:this.words[I+1]++;return this.length=Math.max(this.length,I+1),this},t.prototype.isubn=function(g){if(A("number"==typeof g),A(g<67108864),g<0)return this.iaddn(-g);if(0!==this.negative)return this.negative=0,this.iaddn(g),this.negative=1,this;if(this.words[0]-=g,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var I=0;I<this.length&&this.words[I]<0;I++)this.words[I]+=67108864,this.words[I+1]-=1;return this.strip()},t.prototype.addn=function(g){return this.clone().iaddn(g)},t.prototype.subn=function(g){return this.clone().isubn(g)},t.prototype.iabs=function(){return this.negative=0,this},t.prototype.abs=function(){return this.clone().iabs()},t.prototype._ishlnsubmul=function(g,I,C){var t,i,e=g.length+C;this._expand(e);var o=0;for(t=0;t<g.length;t++){i=(0|this.words[t+C])+o;var n=(0|g.words[t])*I;o=((i-=67108863&n)>>26)-(n/67108864|0),this.words[t+C]=67108863&i}for(;t<this.length-C;t++)o=(i=(0|this.words[t+C])+o)>>26,this.words[t+C]=67108863&i;if(0===o)return this.strip();for(A(-1===o),o=0,t=0;t<this.length;t++)o=(i=-(0|this.words[t])+o)>>26,this.words[t]=67108863&i;return this.negative=1,this.strip()},t.prototype._wordDiv=function(g,I){var A=(this.length,g.length),C=this.clone(),i=g,e=0|i.words[i.length-1];0!==(A=26-this._countBits(e))&&(i=i.ushln(A),C.iushln(A),e=0|i.words[i.length-1]);var o,n=C.length-i.length;if("mod"!==I){(o=new t(null)).length=n+1,o.words=new Array(o.length);for(var s=0;s<o.length;s++)o.words[s]=0}var l=C.clone()._ishlnsubmul(i,1,n);0===l.negative&&(C=l,o&&(o.words[n]=1));for(var r=n-1;r>=0;r--){var c=67108864*(0|C.words[i.length+r])+(0|C.words[i.length+r-1]);for(c=Math.min(c/e|0,67108863),C._ishlnsubmul(i,c,r);0!==C.negative;)c--,C.negative=0,C._ishlnsubmul(i,1,r),C.isZero()||(C.negative^=1);o&&(o.words[r]=c)}return o&&o.strip(),C.strip(),"div"!==I&&0!==A&&C.iushrn(A),{div:o||null,mod:C}},t.prototype.divmod=function(g,I,C){return A(!g.isZero()),this.isZero()?{div:new t(0),mod:new t(0)}:0!==this.negative&&0===g.negative?(o=this.neg().divmod(g,I),"mod"!==I&&(i=o.div.neg()),"div"!==I&&(e=o.mod.neg(),C&&0!==e.negative&&e.iadd(g)),{div:i,mod:e}):0===this.negative&&0!==g.negative?(o=this.divmod(g.neg(),I),"mod"!==I&&(i=o.div.neg()),{div:i,mod:o.mod}):0!=(this.negative&g.negative)?(o=this.neg().divmod(g.neg(),I),"div"!==I&&(e=o.mod.neg(),C&&0!==e.negative&&e.isub(g)),{div:o.div,mod:e}):g.length>this.length||this.cmp(g)<0?{div:new t(0),mod:this}:1===g.length?"div"===I?{div:this.divn(g.words[0]),mod:null}:"mod"===I?{div:null,mod:new t(this.modn(g.words[0]))}:{div:this.divn(g.words[0]),mod:new t(this.modn(g.words[0]))}:this._wordDiv(g,I);var i,e,o},t.prototype.div=function(g){return this.divmod(g,"div",!1).div},t.prototype.mod=function(g){return this.divmod(g,"mod",!1).mod},t.prototype.umod=function(g){return this.divmod(g,"mod",!0).mod},t.prototype.divRound=function(g){var I=this.divmod(g);if(I.mod.isZero())return I.div;var A=0!==I.div.negative?I.mod.isub(g):I.mod,C=g.ushrn(1),t=g.andln(1),i=A.cmp(C);return i<0||1===t&&0===i?I.div:0!==I.div.negative?I.div.isubn(1):I.div.iaddn(1)},t.prototype.modn=function(g){A(g<=67108863);for(var I=(1<<26)%g,C=0,t=this.length-1;t>=0;t--)C=(I*C+(0|this.words[t]))%g;return C},t.prototype.idivn=function(g){A(g<=67108863);for(var I=0,C=this.length-1;C>=0;C--){var t=(0|this.words[C])+67108864*I;this.words[C]=t/g|0,I=t%g}return this.strip()},t.prototype.divn=function(g){return this.clone().idivn(g)},t.prototype.egcd=function(g){A(0===g.negative),A(!g.isZero());var I=this,C=g.clone();I=0!==I.negative?I.umod(g):I.clone();for(var i=new t(1),e=new t(0),o=new t(0),n=new t(1),s=0;I.isEven()&&C.isEven();)I.iushrn(1),C.iushrn(1),++s;for(var l=C.clone(),r=I.clone();!I.isZero();){for(var c=0,a=1;0==(I.words[0]&a)&&c<26;++c,a<<=1);if(c>0)for(I.iushrn(c);c-- >0;)(i.isOdd()||e.isOdd())&&(i.iadd(l),e.isub(r)),i.iushrn(1),e.iushrn(1);for(var d=0,h=1;0==(C.words[0]&h)&&d<26;++d,h<<=1);if(d>0)for(C.iushrn(d);d-- >0;)(o.isOdd()||n.isOdd())&&(o.iadd(l),n.isub(r)),o.iushrn(1),n.iushrn(1);I.cmp(C)>=0?(I.isub(C),i.isub(o),e.isub(n)):(C.isub(I),o.isub(i),n.isub(e))}return{a:o,b:n,gcd:C.iushln(s)}},t.prototype._invmp=function(g){A(0===g.negative),A(!g.isZero());var I=this,C=g.clone();I=0!==I.negative?I.umod(g):I.clone();for(var i,e=new t(1),o=new t(0),n=C.clone();I.cmpn(1)>0&&C.cmpn(1)>0;){for(var s=0,l=1;0==(I.words[0]&l)&&s<26;++s,l<<=1);if(s>0)for(I.iushrn(s);s-- >0;)e.isOdd()&&e.iadd(n),e.iushrn(1);for(var r=0,c=1;0==(C.words[0]&c)&&r<26;++r,c<<=1);if(r>0)for(C.iushrn(r);r-- >0;)o.isOdd()&&o.iadd(n),o.iushrn(1);I.cmp(C)>=0?(I.isub(C),e.isub(o)):(C.isub(I),o.isub(e))}return(i=0===I.cmpn(1)?e:o).cmpn(0)<0&&i.iadd(g),i},t.prototype.gcd=function(g){if(this.isZero())return g.abs();if(g.isZero())return this.abs();var I=this.clone(),A=g.clone();I.negative=0,A.negative=0;for(var C=0;I.isEven()&&A.isEven();C++)I.iushrn(1),A.iushrn(1);for(;;){for(;I.isEven();)I.iushrn(1);for(;A.isEven();)A.iushrn(1);var t=I.cmp(A);if(t<0){var i=I;I=A,A=i}else if(0===t||0===A.cmpn(1))break;I.isub(A)}return A.iushln(C)},t.prototype.invm=function(g){return this.egcd(g).a.umod(g)},t.prototype.isEven=function(){return 0==(1&this.words[0])},t.prototype.isOdd=function(){return 1==(1&this.words[0])},t.prototype.andln=function(g){return this.words[0]&g},t.prototype.bincn=function(g){A("number"==typeof g);var I=g%26,C=(g-I)/26,t=1<<I;if(this.length<=C)return this._expand(C+1),this.words[C]|=t,this;for(var i=t,e=C;0!==i&&e<this.length;e++){var o=0|this.words[e];i=(o+=i)>>>26,o&=67108863,this.words[e]=o}return 0!==i&&(this.words[e]=i,this.length++),this},t.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},t.prototype.cmpn=function(g){var I,C=g<0;if(0!==this.negative&&!C)return-1;if(0===this.negative&&C)return 1;if(this.strip(),this.length>1)I=1;else{C&&(g=-g),A(g<=67108863,"Number is too big");var t=0|this.words[0];I=t===g?0:t<g?-1:1}return 0!==this.negative?0|-I:I},t.prototype.cmp=function(g){if(0!==this.negative&&0===g.negative)return-1;if(0===this.negative&&0!==g.negative)return 1;var I=this.ucmp(g);return 0!==this.negative?0|-I:I},t.prototype.ucmp=function(g){if(this.length>g.length)return 1;if(this.length<g.length)return-1;for(var I=0,A=this.length-1;A>=0;A--){var C=0|this.words[A],t=0|g.words[A];if(C!==t){C<t?I=-1:C>t&&(I=1);break}}return I},t.prototype.gtn=function(g){return 1===this.cmpn(g)},t.prototype.gt=function(g){return 1===this.cmp(g)},t.prototype.gten=function(g){return this.cmpn(g)>=0},t.prototype.gte=function(g){return this.cmp(g)>=0},t.prototype.ltn=function(g){return-1===this.cmpn(g)},t.prototype.lt=function(g){return-1===this.cmp(g)},t.prototype.lten=function(g){return this.cmpn(g)<=0},t.prototype.lte=function(g){return this.cmp(g)<=0},t.prototype.eqn=function(g){return 0===this.cmpn(g)},t.prototype.eq=function(g){return 0===this.cmp(g)},t.red=function(g){return new B(g)},t.prototype.toRed=function(g){return A(!this.red,"Already a number in reduction context"),A(0===this.negative,"red works only with positives"),g.convertTo(this)._forceRed(g)},t.prototype.fromRed=function(){return A(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},t.prototype._forceRed=function(g){return this.red=g,this},t.prototype.forceRed=function(g){return A(!this.red,"Already a number in reduction context"),this._forceRed(g)},t.prototype.redAdd=function(g){return A(this.red,"redAdd works only with red numbers"),this.red.add(this,g)},t.prototype.redIAdd=function(g){return A(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,g)},t.prototype.redSub=function(g){return A(this.red,"redSub works only with red numbers"),this.red.sub(this,g)},t.prototype.redISub=function(g){return A(this.red,"redISub works only with red numbers"),this.red.isub(this,g)},t.prototype.redShl=function(g){return A(this.red,"redShl works only with red numbers"),this.red.shl(this,g)},t.prototype.redMul=function(g){return A(this.red,"redMul works only with red numbers"),this.red._verify2(this,g),this.red.mul(this,g)},t.prototype.redIMul=function(g){return A(this.red,"redMul works only with red numbers"),this.red._verify2(this,g),this.red.imul(this,g)},t.prototype.redSqr=function(){return A(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},t.prototype.redISqr=function(){return A(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},t.prototype.redSqrt=function(){return A(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},t.prototype.redInvm=function(){return A(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},t.prototype.redNeg=function(){return A(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},t.prototype.redPow=function(g){return A(this.red&&!g.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,g)};var m={k256:null,p224:null,p192:null,p25519:null};function Z(g,I){this.name=g,this.p=new t(I,16),this.n=this.p.bitLength(),this.k=new t(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function u(){Z.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function G(){Z.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function b(){Z.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function p(){Z.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function B(g){if("string"==typeof g){var I=t._prime(g);this.m=I.p,this.prime=I}else A(g.gtn(1),"modulus must be greater than 1"),this.m=g,this.prime=null}function y(g){B.call(this,g),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new t(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}Z.prototype._tmp=function(){var g=new t(null);return g.words=new Array(Math.ceil(this.n/13)),g},Z.prototype.ireduce=function(g){var I,A=g;do{this.split(A,this.tmp),I=(A=(A=this.imulK(A)).iadd(this.tmp)).bitLength()}while(I>this.n);var C=I<this.n?-1:A.ucmp(this.p);return 0===C?(A.words[0]=0,A.length=1):C>0?A.isub(this.p):void 0!==A.strip?A.strip():A._strip(),A},Z.prototype.split=function(g,I){g.iushrn(this.n,0,I)},Z.prototype.imulK=function(g){return g.imul(this.k)},C(u,Z),u.prototype.split=function(g,I){for(var A=4194303,C=Math.min(g.length,9),t=0;t<C;t++)I.words[t]=g.words[t];if(I.length=C,g.length<=9)return g.words[0]=0,void(g.length=1);var i=g.words[9];for(I.words[I.length++]=i&A,t=10;t<g.length;t++){var e=0|g.words[t];g.words[t-10]=(e&A)<<4|i>>>22,i=e}i>>>=22,g.words[t-10]=i,0===i&&g.length>10?g.length-=10:g.length-=9},u.prototype.imulK=function(g){g.words[g.length]=0,g.words[g.length+1]=0,g.length+=2;for(var I=0,A=0;A<g.length;A++){var C=0|g.words[A];I+=977*C,g.words[A]=67108863&I,I=64*C+(I/67108864|0)}return 0===g.words[g.length-1]&&(g.length--,0===g.words[g.length-1]&&g.length--),g},C(G,Z),C(b,Z),C(p,Z),p.prototype.imulK=function(g){for(var I=0,A=0;A<g.length;A++){var C=19*(0|g.words[A])+I,t=67108863&C;C>>>=26,g.words[A]=t,I=C}return 0!==I&&(g.words[g.length++]=I),g},t._prime=function(g){if(m[g])return m[g];var I;if("k256"===g)I=new u;else if("p224"===g)I=new G;else if("p192"===g)I=new b;else{if("p25519"!==g)throw new Error("Unknown prime "+g);I=new p}return m[g]=I,I},B.prototype._verify1=function(g){A(0===g.negative,"red works only with positives"),A(g.red,"red works only with red numbers")},B.prototype._verify2=function(g,I){A(0==(g.negative|I.negative),"red works only with positives"),A(g.red&&g.red===I.red,"red works only with red numbers")},B.prototype.imod=function(g){return this.prime?this.prime.ireduce(g)._forceRed(this):g.umod(this.m)._forceRed(this)},B.prototype.neg=function(g){return g.isZero()?g.clone():this.m.sub(g)._forceRed(this)},B.prototype.add=function(g,I){this._verify2(g,I);var A=g.add(I);return A.cmp(this.m)>=0&&A.isub(this.m),A._forceRed(this)},B.prototype.iadd=function(g,I){this._verify2(g,I);var A=g.iadd(I);return A.cmp(this.m)>=0&&A.isub(this.m),A},B.prototype.sub=function(g,I){this._verify2(g,I);var A=g.sub(I);return A.cmpn(0)<0&&A.iadd(this.m),A._forceRed(this)},B.prototype.isub=function(g,I){this._verify2(g,I);var A=g.isub(I);return A.cmpn(0)<0&&A.iadd(this.m),A},B.prototype.shl=function(g,I){return this._verify1(g),this.imod(g.ushln(I))},B.prototype.imul=function(g,I){return this._verify2(g,I),this.imod(g.imul(I))},B.prototype.mul=function(g,I){return this._verify2(g,I),this.imod(g.mul(I))},B.prototype.isqr=function(g){return this.imul(g,g.clone())},B.prototype.sqr=function(g){return this.mul(g,g)},B.prototype.sqrt=function(g){if(g.isZero())return g.clone();var I=this.m.andln(3);if(A(I%2==1),3===I){var C=this.m.add(new t(1)).iushrn(2);return this.pow(g,C)}for(var i=this.m.subn(1),e=0;!i.isZero()&&0===i.andln(1);)e++,i.iushrn(1);A(!i.isZero());var o=new t(1).toRed(this),n=o.redNeg(),s=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new t(2*l*l).toRed(this);0!==this.pow(l,s).cmp(n);)l.redIAdd(n);for(var r=this.pow(l,i),c=this.pow(g,i.addn(1).iushrn(1)),a=this.pow(g,i),d=e;0!==a.cmp(o);){for(var h=a,m=0;0!==h.cmp(o);m++)h=h.redSqr();A(m<d);var Z=this.pow(r,new t(1).iushln(d-m-1));c=c.redMul(Z),r=Z.redSqr(),a=a.redMul(r),d=m}return c},B.prototype.invm=function(g){var I=g._invmp(this.m);return 0!==I.negative?(I.negative=0,this.imod(I).redNeg()):this.imod(I)},B.prototype.pow=function(g,I){if(I.isZero())return new t(1).toRed(this);if(0===I.cmpn(1))return g.clone();var A=new Array(16);A[0]=new t(1).toRed(this),A[1]=g;for(var C=2;C<A.length;C++)A[C]=this.mul(A[C-1],g);var i=A[0],e=0,o=0,n=I.bitLength()%26;for(0===n&&(n=26),C=I.length-1;C>=0;C--){for(var s=I.words[C],l=n-1;l>=0;l--){var r=s>>l&1;i!==A[0]&&(i=this.sqr(i)),0!==r||0!==e?(e<<=1,e|=r,(4===++o||0===C&&0===l)&&(i=this.mul(i,A[e]),o=0,e=0)):o=0}n=26}return i},B.prototype.convertTo=function(g){var I=g.umod(this.m);return I===g?I.clone():I},B.prototype.convertFrom=function(g){var I=g.clone();return I.red=null,I},t.mont=function(g){return new y(g)},C(y,B),y.prototype.convertTo=function(g){return this.imod(g.ushln(this.shift))},y.prototype.convertFrom=function(g){var I=this.imod(g.mul(this.rinv));return I.red=null,I},y.prototype.imul=function(g,I){if(g.isZero()||I.isZero())return g.words[0]=0,g.length=1,g;var A=g.imul(I),C=A.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),t=A.isub(C).iushrn(this.shift),i=t;return t.cmp(this.m)>=0?i=t.isub(this.m):t.cmpn(0)<0&&(i=t.iadd(this.m)),i._forceRed(this)},y.prototype.mul=function(g,I){if(g.isZero()||I.isZero())return new t(0)._forceRed(this);var A=g.mul(I),C=A.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=A.isub(C).iushrn(this.shift),e=i;return i.cmp(this.m)>=0?e=i.isub(this.m):i.cmpn(0)<0&&(e=i.iadd(this.m)),e._forceRed(this)},y.prototype.invm=function(g){return this.imod(g._invmp(this.m).mul(this.r2))._forceRed(this)}}(g,ot)}(fm);var Ym=fm.exports,Xm=Ht.exports.Buffer;var Vm=function(g,I){return Xm.from(g.toRed(Ym.mont(I.modulus)).redPow(new Ym(I.publicExponent)).fromRed().toArray())},Om={exports:{}};!function(g){!function(g,I){function A(g,I){if(!g)throw new Error(I||"Assertion failed")}function C(g,I){g.super_=I;var A=function(){};A.prototype=I.prototype,g.prototype=new A,g.prototype.constructor=g}function t(g,I,A){if(t.isBN(g))return g;this.negative=0,this.words=null,this.length=0,this.red=null,null!==g&&("le"!==I&&"be"!==I||(A=I,I=10),this._init(g||0,I||10,A||"be"))}var i;"object"==typeof g?g.exports=t:I.BN=t,t.BN=t,t.wordSize=26;try{i="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:require("buffer").Buffer}catch(dD){}function e(g,I){var C=g.charCodeAt(I);return C>=48&&C<=57?C-48:C>=65&&C<=70?C-55:C>=97&&C<=102?C-87:void A(!1,"Invalid character in "+g)}function o(g,I,A){var C=e(g,A);return A-1>=I&&(C|=e(g,A-1)<<4),C}function n(g,I,C,t){for(var i=0,e=0,o=Math.min(g.length,C),n=I;n<o;n++){var s=g.charCodeAt(n)-48;i*=t,e=s>=49?s-49+10:s>=17?s-17+10:s,A(s>=0&&e<t,"Invalid character"),i+=e}return i}function s(g,I){g.words=I.words,g.length=I.length,g.negative=I.negative,g.red=I.red}if(t.isBN=function(g){return g instanceof t||null!==g&&"object"==typeof g&&g.constructor.wordSize===t.wordSize&&Array.isArray(g.words)},t.max=function(g,I){return g.cmp(I)>0?g:I},t.min=function(g,I){return g.cmp(I)<0?g:I},t.prototype._init=function(g,I,C){if("number"==typeof g)return this._initNumber(g,I,C);if("object"==typeof g)return this._initArray(g,I,C);"hex"===I&&(I=16),A(I===(0|I)&&I>=2&&I<=36);var t=0;"-"===(g=g.toString().replace(/\s+/g,""))[0]&&(t++,this.negative=1),t<g.length&&(16===I?this._parseHex(g,t,C):(this._parseBase(g,I,t),"le"===C&&this._initArray(this.toArray(),I,C)))},t.prototype._initNumber=function(g,I,C){g<0&&(this.negative=1,g=-g),g<67108864?(this.words=[67108863&g],this.length=1):g<4503599627370496?(this.words=[67108863&g,g/67108864&67108863],this.length=2):(A(g<9007199254740992),this.words=[67108863&g,g/67108864&67108863,1],this.length=3),"le"===C&&this._initArray(this.toArray(),I,C)},t.prototype._initArray=function(g,I,C){if(A("number"==typeof g.length),g.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(g.length/3),this.words=new Array(this.length);for(var t=0;t<this.length;t++)this.words[t]=0;var i,e,o=0;if("be"===C)for(t=g.length-1,i=0;t>=0;t-=3)e=g[t]|g[t-1]<<8|g[t-2]<<16,this.words[i]|=e<<o&67108863,this.words[i+1]=e>>>26-o&67108863,(o+=24)>=26&&(o-=26,i++);else if("le"===C)for(t=0,i=0;t<g.length;t+=3)e=g[t]|g[t+1]<<8|g[t+2]<<16,this.words[i]|=e<<o&67108863,this.words[i+1]=e>>>26-o&67108863,(o+=24)>=26&&(o-=26,i++);return this._strip()},t.prototype._parseHex=function(g,I,A){this.length=Math.ceil((g.length-I)/6),this.words=new Array(this.length);for(var C=0;C<this.length;C++)this.words[C]=0;var t,i=0,e=0;if("be"===A)for(C=g.length-1;C>=I;C-=2)t=o(g,I,C)<<i,this.words[e]|=67108863&t,i>=18?(i-=18,e+=1,this.words[e]|=t>>>26):i+=8;else for(C=(g.length-I)%2==0?I+1:I;C<g.length;C+=2)t=o(g,I,C)<<i,this.words[e]|=67108863&t,i>=18?(i-=18,e+=1,this.words[e]|=t>>>26):i+=8;this._strip()},t.prototype._parseBase=function(g,I,A){this.words=[0],this.length=1;for(var C=0,t=1;t<=67108863;t*=I)C++;C--,t=t/I|0;for(var i=g.length-A,e=i%C,o=Math.min(i,i-e)+A,s=0,l=A;l<o;l+=C)s=n(g,l,l+C,I),this.imuln(t),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s);if(0!==e){var r=1;for(s=n(g,l,g.length,I),l=0;l<e;l++)r*=I;this.imuln(r),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s)}this._strip()},t.prototype.copy=function(g){g.words=new Array(this.length);for(var I=0;I<this.length;I++)g.words[I]=this.words[I];g.length=this.length,g.negative=this.negative,g.red=this.red},t.prototype._move=function(g){s(g,this)},t.prototype.clone=function(){var g=new t(null);return this.copy(g),g},t.prototype._expand=function(g){for(;this.length<g;)this.words[this.length++]=0;return this},t.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},t.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{t.prototype[Symbol.for("nodejs.util.inspect.custom")]=l}catch(dD){t.prototype.inspect=l}else t.prototype.inspect=l;function l(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var r=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],c=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],a=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];t.prototype.toString=function(g,I){var C;if(I=0|I||1,16===(g=g||10)||"hex"===g){C="";for(var t=0,i=0,e=0;e<this.length;e++){var o=this.words[e],n=(16777215&(o<<t|i)).toString(16);C=0!==(i=o>>>24-t&16777215)||e!==this.length-1?r[6-n.length]+n+C:n+C,(t+=2)>=26&&(t-=26,e--)}for(0!==i&&(C=i.toString(16)+C);C.length%I!=0;)C="0"+C;return 0!==this.negative&&(C="-"+C),C}if(g===(0|g)&&g>=2&&g<=36){var s=c[g],l=a[g];C="";var d=this.clone();for(d.negative=0;!d.isZero();){var h=d.modrn(l).toString(g);C=(d=d.idivn(l)).isZero()?h+C:r[s-h.length]+h+C}for(this.isZero()&&(C="0"+C);C.length%I!=0;)C="0"+C;return 0!==this.negative&&(C="-"+C),C}A(!1,"Base should be between 2 and 36")},t.prototype.toNumber=function(){var g=this.words[0];return 2===this.length?g+=67108864*this.words[1]:3===this.length&&1===this.words[2]?g+=4503599627370496+67108864*this.words[1]:this.length>2&&A(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-g:g},t.prototype.toJSON=function(){return this.toString(16,2)},i&&(t.prototype.toBuffer=function(g,I){return this.toArrayLike(i,g,I)}),t.prototype.toArray=function(g,I){return this.toArrayLike(Array,g,I)};function d(g,I,A){A.negative=I.negative^g.negative;var C=g.length+I.length|0;A.length=C,C=C-1|0;var t=0|g.words[0],i=0|I.words[0],e=t*i,o=67108863&e,n=e/67108864|0;A.words[0]=o;for(var s=1;s<C;s++){for(var l=n>>>26,r=67108863&n,c=Math.min(s,I.length-1),a=Math.max(0,s-g.length+1);a<=c;a++){var d=s-a|0;l+=(e=(t=0|g.words[d])*(i=0|I.words[a])+r)/67108864|0,r=67108863&e}A.words[s]=0|r,n=0|l}return 0!==n?A.words[s]=0|n:A.length--,A._strip()}t.prototype.toArrayLike=function(g,I,C){this._strip();var t=this.byteLength(),i=C||Math.max(1,t);A(t<=i,"byte array longer than desired length"),A(i>0,"Requested array length <= 0");var e=function(g,I){return g.allocUnsafe?g.allocUnsafe(I):new g(I)}(g,i);return this["_toArrayLike"+("le"===I?"LE":"BE")](e,t),e},t.prototype._toArrayLikeLE=function(g,I){for(var A=0,C=0,t=0,i=0;t<this.length;t++){var e=this.words[t]<<i|C;g[A++]=255&e,A<g.length&&(g[A++]=e>>8&255),A<g.length&&(g[A++]=e>>16&255),6===i?(A<g.length&&(g[A++]=e>>24&255),C=0,i=0):(C=e>>>24,i+=2)}if(A<g.length)for(g[A++]=C;A<g.length;)g[A++]=0},t.prototype._toArrayLikeBE=function(g,I){for(var A=g.length-1,C=0,t=0,i=0;t<this.length;t++){var e=this.words[t]<<i|C;g[A--]=255&e,A>=0&&(g[A--]=e>>8&255),A>=0&&(g[A--]=e>>16&255),6===i?(A>=0&&(g[A--]=e>>24&255),C=0,i=0):(C=e>>>24,i+=2)}if(A>=0)for(g[A--]=C;A>=0;)g[A--]=0},Math.clz32?t.prototype._countBits=function(g){return 32-Math.clz32(g)}:t.prototype._countBits=function(g){var I=g,A=0;return I>=4096&&(A+=13,I>>>=13),I>=64&&(A+=7,I>>>=7),I>=8&&(A+=4,I>>>=4),I>=2&&(A+=2,I>>>=2),A+I},t.prototype._zeroBits=function(g){if(0===g)return 26;var I=g,A=0;return 0==(8191&I)&&(A+=13,I>>>=13),0==(127&I)&&(A+=7,I>>>=7),0==(15&I)&&(A+=4,I>>>=4),0==(3&I)&&(A+=2,I>>>=2),0==(1&I)&&A++,A},t.prototype.bitLength=function(){var g=this.words[this.length-1],I=this._countBits(g);return 26*(this.length-1)+I},t.prototype.zeroBits=function(){if(this.isZero())return 0;for(var g=0,I=0;I<this.length;I++){var A=this._zeroBits(this.words[I]);if(g+=A,26!==A)break}return g},t.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},t.prototype.toTwos=function(g){return 0!==this.negative?this.abs().inotn(g).iaddn(1):this.clone()},t.prototype.fromTwos=function(g){return this.testn(g-1)?this.notn(g).iaddn(1).ineg():this.clone()},t.prototype.isNeg=function(){return 0!==this.negative},t.prototype.neg=function(){return this.clone().ineg()},t.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},t.prototype.iuor=function(g){for(;this.length<g.length;)this.words[this.length++]=0;for(var I=0;I<g.length;I++)this.words[I]=this.words[I]|g.words[I];return this._strip()},t.prototype.ior=function(g){return A(0==(this.negative|g.negative)),this.iuor(g)},t.prototype.or=function(g){return this.length>g.length?this.clone().ior(g):g.clone().ior(this)},t.prototype.uor=function(g){return this.length>g.length?this.clone().iuor(g):g.clone().iuor(this)},t.prototype.iuand=function(g){var I;I=this.length>g.length?g:this;for(var A=0;A<I.length;A++)this.words[A]=this.words[A]&g.words[A];return this.length=I.length,this._strip()},t.prototype.iand=function(g){return A(0==(this.negative|g.negative)),this.iuand(g)},t.prototype.and=function(g){return this.length>g.length?this.clone().iand(g):g.clone().iand(this)},t.prototype.uand=function(g){return this.length>g.length?this.clone().iuand(g):g.clone().iuand(this)},t.prototype.iuxor=function(g){var I,A;this.length>g.length?(I=this,A=g):(I=g,A=this);for(var C=0;C<A.length;C++)this.words[C]=I.words[C]^A.words[C];if(this!==I)for(;C<I.length;C++)this.words[C]=I.words[C];return this.length=I.length,this._strip()},t.prototype.ixor=function(g){return A(0==(this.negative|g.negative)),this.iuxor(g)},t.prototype.xor=function(g){return this.length>g.length?this.clone().ixor(g):g.clone().ixor(this)},t.prototype.uxor=function(g){return this.length>g.length?this.clone().iuxor(g):g.clone().iuxor(this)},t.prototype.inotn=function(g){A("number"==typeof g&&g>=0);var I=0|Math.ceil(g/26),C=g%26;this._expand(I),C>0&&I--;for(var t=0;t<I;t++)this.words[t]=67108863&~this.words[t];return C>0&&(this.words[t]=~this.words[t]&67108863>>26-C),this._strip()},t.prototype.notn=function(g){return this.clone().inotn(g)},t.prototype.setn=function(g,I){A("number"==typeof g&&g>=0);var C=g/26|0,t=g%26;return this._expand(C+1),this.words[C]=I?this.words[C]|1<<t:this.words[C]&~(1<<t),this._strip()},t.prototype.iadd=function(g){var I,A,C;if(0!==this.negative&&0===g.negative)return this.negative=0,I=this.isub(g),this.negative^=1,this._normSign();if(0===this.negative&&0!==g.negative)return g.negative=0,I=this.isub(g),g.negative=1,I._normSign();this.length>g.length?(A=this,C=g):(A=g,C=this);for(var t=0,i=0;i<C.length;i++)I=(0|A.words[i])+(0|C.words[i])+t,this.words[i]=67108863&I,t=I>>>26;for(;0!==t&&i<A.length;i++)I=(0|A.words[i])+t,this.words[i]=67108863&I,t=I>>>26;if(this.length=A.length,0!==t)this.words[this.length]=t,this.length++;else if(A!==this)for(;i<A.length;i++)this.words[i]=A.words[i];return this},t.prototype.add=function(g){var I;return 0!==g.negative&&0===this.negative?(g.negative=0,I=this.sub(g),g.negative^=1,I):0===g.negative&&0!==this.negative?(this.negative=0,I=g.sub(this),this.negative=1,I):this.length>g.length?this.clone().iadd(g):g.clone().iadd(this)},t.prototype.isub=function(g){if(0!==g.negative){g.negative=0;var I=this.iadd(g);return g.negative=1,I._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(g),this.negative=1,this._normSign();var A,C,t=this.cmp(g);if(0===t)return this.negative=0,this.length=1,this.words[0]=0,this;t>0?(A=this,C=g):(A=g,C=this);for(var i=0,e=0;e<C.length;e++)i=(I=(0|A.words[e])-(0|C.words[e])+i)>>26,this.words[e]=67108863&I;for(;0!==i&&e<A.length;e++)i=(I=(0|A.words[e])+i)>>26,this.words[e]=67108863&I;if(0===i&&e<A.length&&A!==this)for(;e<A.length;e++)this.words[e]=A.words[e];return this.length=Math.max(this.length,e),A!==this&&(this.negative=1),this._strip()},t.prototype.sub=function(g){return this.clone().isub(g)};var h=function(g,I,A){var C,t,i,e=g.words,o=I.words,n=A.words,s=0,l=0|e[0],r=8191&l,c=l>>>13,a=0|e[1],d=8191&a,h=a>>>13,m=0|e[2],Z=8191&m,u=m>>>13,G=0|e[3],b=8191&G,p=G>>>13,B=0|e[4],y=8191&B,w=B>>>13,W=0|e[5],S=8191&W,K=W>>>13,f=0|e[6],Y=8191&f,X=f>>>13,V=0|e[7],O=8191&V,R=V>>>13,Q=0|e[8],H=8191&Q,k=Q>>>13,J=0|e[9],v=8191&J,D=J>>>13,M=0|o[0],N=8191&M,E=M>>>13,F=0|o[1],L=8191&F,T=F>>>13,z=0|o[2],P=8191&z,U=z>>>13,x=0|o[3],j=8191&x,_=x>>>13,$=0|o[4],q=8191&$,gg=$>>>13,Ig=0|o[5],Ag=8191&Ig,Cg=Ig>>>13,tg=0|o[6],ig=8191&tg,eg=tg>>>13,og=0|o[7],ng=8191&og,sg=og>>>13,lg=0|o[8],rg=8191&lg,cg=lg>>>13,ag=0|o[9],dg=8191&ag,hg=ag>>>13;A.negative=g.negative^I.negative,A.length=19;var mg=(s+(C=Math.imul(r,N))|0)+((8191&(t=(t=Math.imul(r,E))+Math.imul(c,N)|0))<<13)|0;s=((i=Math.imul(c,E))+(t>>>13)|0)+(mg>>>26)|0,mg&=67108863,C=Math.imul(d,N),t=(t=Math.imul(d,E))+Math.imul(h,N)|0,i=Math.imul(h,E);var Zg=(s+(C=C+Math.imul(r,L)|0)|0)+((8191&(t=(t=t+Math.imul(r,T)|0)+Math.imul(c,L)|0))<<13)|0;s=((i=i+Math.imul(c,T)|0)+(t>>>13)|0)+(Zg>>>26)|0,Zg&=67108863,C=Math.imul(Z,N),t=(t=Math.imul(Z,E))+Math.imul(u,N)|0,i=Math.imul(u,E),C=C+Math.imul(d,L)|0,t=(t=t+Math.imul(d,T)|0)+Math.imul(h,L)|0,i=i+Math.imul(h,T)|0;var ug=(s+(C=C+Math.imul(r,P)|0)|0)+((8191&(t=(t=t+Math.imul(r,U)|0)+Math.imul(c,P)|0))<<13)|0;s=((i=i+Math.imul(c,U)|0)+(t>>>13)|0)+(ug>>>26)|0,ug&=67108863,C=Math.imul(b,N),t=(t=Math.imul(b,E))+Math.imul(p,N)|0,i=Math.imul(p,E),C=C+Math.imul(Z,L)|0,t=(t=t+Math.imul(Z,T)|0)+Math.imul(u,L)|0,i=i+Math.imul(u,T)|0,C=C+Math.imul(d,P)|0,t=(t=t+Math.imul(d,U)|0)+Math.imul(h,P)|0,i=i+Math.imul(h,U)|0;var Gg=(s+(C=C+Math.imul(r,j)|0)|0)+((8191&(t=(t=t+Math.imul(r,_)|0)+Math.imul(c,j)|0))<<13)|0;s=((i=i+Math.imul(c,_)|0)+(t>>>13)|0)+(Gg>>>26)|0,Gg&=67108863,C=Math.imul(y,N),t=(t=Math.imul(y,E))+Math.imul(w,N)|0,i=Math.imul(w,E),C=C+Math.imul(b,L)|0,t=(t=t+Math.imul(b,T)|0)+Math.imul(p,L)|0,i=i+Math.imul(p,T)|0,C=C+Math.imul(Z,P)|0,t=(t=t+Math.imul(Z,U)|0)+Math.imul(u,P)|0,i=i+Math.imul(u,U)|0,C=C+Math.imul(d,j)|0,t=(t=t+Math.imul(d,_)|0)+Math.imul(h,j)|0,i=i+Math.imul(h,_)|0;var bg=(s+(C=C+Math.imul(r,q)|0)|0)+((8191&(t=(t=t+Math.imul(r,gg)|0)+Math.imul(c,q)|0))<<13)|0;s=((i=i+Math.imul(c,gg)|0)+(t>>>13)|0)+(bg>>>26)|0,bg&=67108863,C=Math.imul(S,N),t=(t=Math.imul(S,E))+Math.imul(K,N)|0,i=Math.imul(K,E),C=C+Math.imul(y,L)|0,t=(t=t+Math.imul(y,T)|0)+Math.imul(w,L)|0,i=i+Math.imul(w,T)|0,C=C+Math.imul(b,P)|0,t=(t=t+Math.imul(b,U)|0)+Math.imul(p,P)|0,i=i+Math.imul(p,U)|0,C=C+Math.imul(Z,j)|0,t=(t=t+Math.imul(Z,_)|0)+Math.imul(u,j)|0,i=i+Math.imul(u,_)|0,C=C+Math.imul(d,q)|0,t=(t=t+Math.imul(d,gg)|0)+Math.imul(h,q)|0,i=i+Math.imul(h,gg)|0;var pg=(s+(C=C+Math.imul(r,Ag)|0)|0)+((8191&(t=(t=t+Math.imul(r,Cg)|0)+Math.imul(c,Ag)|0))<<13)|0;s=((i=i+Math.imul(c,Cg)|0)+(t>>>13)|0)+(pg>>>26)|0,pg&=67108863,C=Math.imul(Y,N),t=(t=Math.imul(Y,E))+Math.imul(X,N)|0,i=Math.imul(X,E),C=C+Math.imul(S,L)|0,t=(t=t+Math.imul(S,T)|0)+Math.imul(K,L)|0,i=i+Math.imul(K,T)|0,C=C+Math.imul(y,P)|0,t=(t=t+Math.imul(y,U)|0)+Math.imul(w,P)|0,i=i+Math.imul(w,U)|0,C=C+Math.imul(b,j)|0,t=(t=t+Math.imul(b,_)|0)+Math.imul(p,j)|0,i=i+Math.imul(p,_)|0,C=C+Math.imul(Z,q)|0,t=(t=t+Math.imul(Z,gg)|0)+Math.imul(u,q)|0,i=i+Math.imul(u,gg)|0,C=C+Math.imul(d,Ag)|0,t=(t=t+Math.imul(d,Cg)|0)+Math.imul(h,Ag)|0,i=i+Math.imul(h,Cg)|0;var Bg=(s+(C=C+Math.imul(r,ig)|0)|0)+((8191&(t=(t=t+Math.imul(r,eg)|0)+Math.imul(c,ig)|0))<<13)|0;s=((i=i+Math.imul(c,eg)|0)+(t>>>13)|0)+(Bg>>>26)|0,Bg&=67108863,C=Math.imul(O,N),t=(t=Math.imul(O,E))+Math.imul(R,N)|0,i=Math.imul(R,E),C=C+Math.imul(Y,L)|0,t=(t=t+Math.imul(Y,T)|0)+Math.imul(X,L)|0,i=i+Math.imul(X,T)|0,C=C+Math.imul(S,P)|0,t=(t=t+Math.imul(S,U)|0)+Math.imul(K,P)|0,i=i+Math.imul(K,U)|0,C=C+Math.imul(y,j)|0,t=(t=t+Math.imul(y,_)|0)+Math.imul(w,j)|0,i=i+Math.imul(w,_)|0,C=C+Math.imul(b,q)|0,t=(t=t+Math.imul(b,gg)|0)+Math.imul(p,q)|0,i=i+Math.imul(p,gg)|0,C=C+Math.imul(Z,Ag)|0,t=(t=t+Math.imul(Z,Cg)|0)+Math.imul(u,Ag)|0,i=i+Math.imul(u,Cg)|0,C=C+Math.imul(d,ig)|0,t=(t=t+Math.imul(d,eg)|0)+Math.imul(h,ig)|0,i=i+Math.imul(h,eg)|0;var yg=(s+(C=C+Math.imul(r,ng)|0)|0)+((8191&(t=(t=t+Math.imul(r,sg)|0)+Math.imul(c,ng)|0))<<13)|0;s=((i=i+Math.imul(c,sg)|0)+(t>>>13)|0)+(yg>>>26)|0,yg&=67108863,C=Math.imul(H,N),t=(t=Math.imul(H,E))+Math.imul(k,N)|0,i=Math.imul(k,E),C=C+Math.imul(O,L)|0,t=(t=t+Math.imul(O,T)|0)+Math.imul(R,L)|0,i=i+Math.imul(R,T)|0,C=C+Math.imul(Y,P)|0,t=(t=t+Math.imul(Y,U)|0)+Math.imul(X,P)|0,i=i+Math.imul(X,U)|0,C=C+Math.imul(S,j)|0,t=(t=t+Math.imul(S,_)|0)+Math.imul(K,j)|0,i=i+Math.imul(K,_)|0,C=C+Math.imul(y,q)|0,t=(t=t+Math.imul(y,gg)|0)+Math.imul(w,q)|0,i=i+Math.imul(w,gg)|0,C=C+Math.imul(b,Ag)|0,t=(t=t+Math.imul(b,Cg)|0)+Math.imul(p,Ag)|0,i=i+Math.imul(p,Cg)|0,C=C+Math.imul(Z,ig)|0,t=(t=t+Math.imul(Z,eg)|0)+Math.imul(u,ig)|0,i=i+Math.imul(u,eg)|0,C=C+Math.imul(d,ng)|0,t=(t=t+Math.imul(d,sg)|0)+Math.imul(h,ng)|0,i=i+Math.imul(h,sg)|0;var wg=(s+(C=C+Math.imul(r,rg)|0)|0)+((8191&(t=(t=t+Math.imul(r,cg)|0)+Math.imul(c,rg)|0))<<13)|0;s=((i=i+Math.imul(c,cg)|0)+(t>>>13)|0)+(wg>>>26)|0,wg&=67108863,C=Math.imul(v,N),t=(t=Math.imul(v,E))+Math.imul(D,N)|0,i=Math.imul(D,E),C=C+Math.imul(H,L)|0,t=(t=t+Math.imul(H,T)|0)+Math.imul(k,L)|0,i=i+Math.imul(k,T)|0,C=C+Math.imul(O,P)|0,t=(t=t+Math.imul(O,U)|0)+Math.imul(R,P)|0,i=i+Math.imul(R,U)|0,C=C+Math.imul(Y,j)|0,t=(t=t+Math.imul(Y,_)|0)+Math.imul(X,j)|0,i=i+Math.imul(X,_)|0,C=C+Math.imul(S,q)|0,t=(t=t+Math.imul(S,gg)|0)+Math.imul(K,q)|0,i=i+Math.imul(K,gg)|0,C=C+Math.imul(y,Ag)|0,t=(t=t+Math.imul(y,Cg)|0)+Math.imul(w,Ag)|0,i=i+Math.imul(w,Cg)|0,C=C+Math.imul(b,ig)|0,t=(t=t+Math.imul(b,eg)|0)+Math.imul(p,ig)|0,i=i+Math.imul(p,eg)|0,C=C+Math.imul(Z,ng)|0,t=(t=t+Math.imul(Z,sg)|0)+Math.imul(u,ng)|0,i=i+Math.imul(u,sg)|0,C=C+Math.imul(d,rg)|0,t=(t=t+Math.imul(d,cg)|0)+Math.imul(h,rg)|0,i=i+Math.imul(h,cg)|0;var Wg=(s+(C=C+Math.imul(r,dg)|0)|0)+((8191&(t=(t=t+Math.imul(r,hg)|0)+Math.imul(c,dg)|0))<<13)|0;s=((i=i+Math.imul(c,hg)|0)+(t>>>13)|0)+(Wg>>>26)|0,Wg&=67108863,C=Math.imul(v,L),t=(t=Math.imul(v,T))+Math.imul(D,L)|0,i=Math.imul(D,T),C=C+Math.imul(H,P)|0,t=(t=t+Math.imul(H,U)|0)+Math.imul(k,P)|0,i=i+Math.imul(k,U)|0,C=C+Math.imul(O,j)|0,t=(t=t+Math.imul(O,_)|0)+Math.imul(R,j)|0,i=i+Math.imul(R,_)|0,C=C+Math.imul(Y,q)|0,t=(t=t+Math.imul(Y,gg)|0)+Math.imul(X,q)|0,i=i+Math.imul(X,gg)|0,C=C+Math.imul(S,Ag)|0,t=(t=t+Math.imul(S,Cg)|0)+Math.imul(K,Ag)|0,i=i+Math.imul(K,Cg)|0,C=C+Math.imul(y,ig)|0,t=(t=t+Math.imul(y,eg)|0)+Math.imul(w,ig)|0,i=i+Math.imul(w,eg)|0,C=C+Math.imul(b,ng)|0,t=(t=t+Math.imul(b,sg)|0)+Math.imul(p,ng)|0,i=i+Math.imul(p,sg)|0,C=C+Math.imul(Z,rg)|0,t=(t=t+Math.imul(Z,cg)|0)+Math.imul(u,rg)|0,i=i+Math.imul(u,cg)|0;var Sg=(s+(C=C+Math.imul(d,dg)|0)|0)+((8191&(t=(t=t+Math.imul(d,hg)|0)+Math.imul(h,dg)|0))<<13)|0;s=((i=i+Math.imul(h,hg)|0)+(t>>>13)|0)+(Sg>>>26)|0,Sg&=67108863,C=Math.imul(v,P),t=(t=Math.imul(v,U))+Math.imul(D,P)|0,i=Math.imul(D,U),C=C+Math.imul(H,j)|0,t=(t=t+Math.imul(H,_)|0)+Math.imul(k,j)|0,i=i+Math.imul(k,_)|0,C=C+Math.imul(O,q)|0,t=(t=t+Math.imul(O,gg)|0)+Math.imul(R,q)|0,i=i+Math.imul(R,gg)|0,C=C+Math.imul(Y,Ag)|0,t=(t=t+Math.imul(Y,Cg)|0)+Math.imul(X,Ag)|0,i=i+Math.imul(X,Cg)|0,C=C+Math.imul(S,ig)|0,t=(t=t+Math.imul(S,eg)|0)+Math.imul(K,ig)|0,i=i+Math.imul(K,eg)|0,C=C+Math.imul(y,ng)|0,t=(t=t+Math.imul(y,sg)|0)+Math.imul(w,ng)|0,i=i+Math.imul(w,sg)|0,C=C+Math.imul(b,rg)|0,t=(t=t+Math.imul(b,cg)|0)+Math.imul(p,rg)|0,i=i+Math.imul(p,cg)|0;var Kg=(s+(C=C+Math.imul(Z,dg)|0)|0)+((8191&(t=(t=t+Math.imul(Z,hg)|0)+Math.imul(u,dg)|0))<<13)|0;s=((i=i+Math.imul(u,hg)|0)+(t>>>13)|0)+(Kg>>>26)|0,Kg&=67108863,C=Math.imul(v,j),t=(t=Math.imul(v,_))+Math.imul(D,j)|0,i=Math.imul(D,_),C=C+Math.imul(H,q)|0,t=(t=t+Math.imul(H,gg)|0)+Math.imul(k,q)|0,i=i+Math.imul(k,gg)|0,C=C+Math.imul(O,Ag)|0,t=(t=t+Math.imul(O,Cg)|0)+Math.imul(R,Ag)|0,i=i+Math.imul(R,Cg)|0,C=C+Math.imul(Y,ig)|0,t=(t=t+Math.imul(Y,eg)|0)+Math.imul(X,ig)|0,i=i+Math.imul(X,eg)|0,C=C+Math.imul(S,ng)|0,t=(t=t+Math.imul(S,sg)|0)+Math.imul(K,ng)|0,i=i+Math.imul(K,sg)|0,C=C+Math.imul(y,rg)|0,t=(t=t+Math.imul(y,cg)|0)+Math.imul(w,rg)|0,i=i+Math.imul(w,cg)|0;var fg=(s+(C=C+Math.imul(b,dg)|0)|0)+((8191&(t=(t=t+Math.imul(b,hg)|0)+Math.imul(p,dg)|0))<<13)|0;s=((i=i+Math.imul(p,hg)|0)+(t>>>13)|0)+(fg>>>26)|0,fg&=67108863,C=Math.imul(v,q),t=(t=Math.imul(v,gg))+Math.imul(D,q)|0,i=Math.imul(D,gg),C=C+Math.imul(H,Ag)|0,t=(t=t+Math.imul(H,Cg)|0)+Math.imul(k,Ag)|0,i=i+Math.imul(k,Cg)|0,C=C+Math.imul(O,ig)|0,t=(t=t+Math.imul(O,eg)|0)+Math.imul(R,ig)|0,i=i+Math.imul(R,eg)|0,C=C+Math.imul(Y,ng)|0,t=(t=t+Math.imul(Y,sg)|0)+Math.imul(X,ng)|0,i=i+Math.imul(X,sg)|0,C=C+Math.imul(S,rg)|0,t=(t=t+Math.imul(S,cg)|0)+Math.imul(K,rg)|0,i=i+Math.imul(K,cg)|0;var Yg=(s+(C=C+Math.imul(y,dg)|0)|0)+((8191&(t=(t=t+Math.imul(y,hg)|0)+Math.imul(w,dg)|0))<<13)|0;s=((i=i+Math.imul(w,hg)|0)+(t>>>13)|0)+(Yg>>>26)|0,Yg&=67108863,C=Math.imul(v,Ag),t=(t=Math.imul(v,Cg))+Math.imul(D,Ag)|0,i=Math.imul(D,Cg),C=C+Math.imul(H,ig)|0,t=(t=t+Math.imul(H,eg)|0)+Math.imul(k,ig)|0,i=i+Math.imul(k,eg)|0,C=C+Math.imul(O,ng)|0,t=(t=t+Math.imul(O,sg)|0)+Math.imul(R,ng)|0,i=i+Math.imul(R,sg)|0,C=C+Math.imul(Y,rg)|0,t=(t=t+Math.imul(Y,cg)|0)+Math.imul(X,rg)|0,i=i+Math.imul(X,cg)|0;var Xg=(s+(C=C+Math.imul(S,dg)|0)|0)+((8191&(t=(t=t+Math.imul(S,hg)|0)+Math.imul(K,dg)|0))<<13)|0;s=((i=i+Math.imul(K,hg)|0)+(t>>>13)|0)+(Xg>>>26)|0,Xg&=67108863,C=Math.imul(v,ig),t=(t=Math.imul(v,eg))+Math.imul(D,ig)|0,i=Math.imul(D,eg),C=C+Math.imul(H,ng)|0,t=(t=t+Math.imul(H,sg)|0)+Math.imul(k,ng)|0,i=i+Math.imul(k,sg)|0,C=C+Math.imul(O,rg)|0,t=(t=t+Math.imul(O,cg)|0)+Math.imul(R,rg)|0,i=i+Math.imul(R,cg)|0;var Vg=(s+(C=C+Math.imul(Y,dg)|0)|0)+((8191&(t=(t=t+Math.imul(Y,hg)|0)+Math.imul(X,dg)|0))<<13)|0;s=((i=i+Math.imul(X,hg)|0)+(t>>>13)|0)+(Vg>>>26)|0,Vg&=67108863,C=Math.imul(v,ng),t=(t=Math.imul(v,sg))+Math.imul(D,ng)|0,i=Math.imul(D,sg),C=C+Math.imul(H,rg)|0,t=(t=t+Math.imul(H,cg)|0)+Math.imul(k,rg)|0,i=i+Math.imul(k,cg)|0;var Og=(s+(C=C+Math.imul(O,dg)|0)|0)+((8191&(t=(t=t+Math.imul(O,hg)|0)+Math.imul(R,dg)|0))<<13)|0;s=((i=i+Math.imul(R,hg)|0)+(t>>>13)|0)+(Og>>>26)|0,Og&=67108863,C=Math.imul(v,rg),t=(t=Math.imul(v,cg))+Math.imul(D,rg)|0,i=Math.imul(D,cg);var Rg=(s+(C=C+Math.imul(H,dg)|0)|0)+((8191&(t=(t=t+Math.imul(H,hg)|0)+Math.imul(k,dg)|0))<<13)|0;s=((i=i+Math.imul(k,hg)|0)+(t>>>13)|0)+(Rg>>>26)|0,Rg&=67108863;var Qg=(s+(C=Math.imul(v,dg))|0)+((8191&(t=(t=Math.imul(v,hg))+Math.imul(D,dg)|0))<<13)|0;return s=((i=Math.imul(D,hg))+(t>>>13)|0)+(Qg>>>26)|0,Qg&=67108863,n[0]=mg,n[1]=Zg,n[2]=ug,n[3]=Gg,n[4]=bg,n[5]=pg,n[6]=Bg,n[7]=yg,n[8]=wg,n[9]=Wg,n[10]=Sg,n[11]=Kg,n[12]=fg,n[13]=Yg,n[14]=Xg,n[15]=Vg,n[16]=Og,n[17]=Rg,n[18]=Qg,0!==s&&(n[19]=s,A.length++),A};function m(g,I,A){A.negative=I.negative^g.negative,A.length=g.length+I.length;for(var C=0,t=0,i=0;i<A.length-1;i++){var e=t;t=0;for(var o=67108863&C,n=Math.min(i,I.length-1),s=Math.max(0,i-g.length+1);s<=n;s++){var l=i-s,r=(0|g.words[l])*(0|I.words[s]),c=67108863&r;o=67108863&(c=c+o|0),t+=(e=(e=e+(r/67108864|0)|0)+(c>>>26)|0)>>>26,e&=67108863}A.words[i]=o,C=e,e=t}return 0!==C?A.words[i]=C:A.length--,A._strip()}function Z(g,I,A){return m(g,I,A)}Math.imul||(h=d),t.prototype.mulTo=function(g,I){var A=this.length+g.length;return 10===this.length&&10===g.length?h(this,g,I):A<63?d(this,g,I):A<1024?m(this,g,I):Z(this,g,I)},t.prototype.mul=function(g){var I=new t(null);return I.words=new Array(this.length+g.length),this.mulTo(g,I)},t.prototype.mulf=function(g){var I=new t(null);return I.words=new Array(this.length+g.length),Z(this,g,I)},t.prototype.imul=function(g){return this.clone().mulTo(g,this)},t.prototype.imuln=function(g){var I=g<0;I&&(g=-g),A("number"==typeof g),A(g<67108864);for(var C=0,t=0;t<this.length;t++){var i=(0|this.words[t])*g,e=(67108863&i)+(67108863&C);C>>=26,C+=i/67108864|0,C+=e>>>26,this.words[t]=67108863&e}return 0!==C&&(this.words[t]=C,this.length++),I?this.ineg():this},t.prototype.muln=function(g){return this.clone().imuln(g)},t.prototype.sqr=function(){return this.mul(this)},t.prototype.isqr=function(){return this.imul(this.clone())},t.prototype.pow=function(g){var I=function(g){for(var I=new Array(g.bitLength()),A=0;A<I.length;A++){var C=A/26|0,t=A%26;I[A]=g.words[C]>>>t&1}return I}(g);if(0===I.length)return new t(1);for(var A=this,C=0;C<I.length&&0===I[C];C++,A=A.sqr());if(++C<I.length)for(var i=A.sqr();C<I.length;C++,i=i.sqr())0!==I[C]&&(A=A.mul(i));return A},t.prototype.iushln=function(g){A("number"==typeof g&&g>=0);var I,C=g%26,t=(g-C)/26,i=67108863>>>26-C<<26-C;if(0!==C){var e=0;for(I=0;I<this.length;I++){var o=this.words[I]&i,n=(0|this.words[I])-o<<C;this.words[I]=n|e,e=o>>>26-C}e&&(this.words[I]=e,this.length++)}if(0!==t){for(I=this.length-1;I>=0;I--)this.words[I+t]=this.words[I];for(I=0;I<t;I++)this.words[I]=0;this.length+=t}return this._strip()},t.prototype.ishln=function(g){return A(0===this.negative),this.iushln(g)},t.prototype.iushrn=function(g,I,C){var t;A("number"==typeof g&&g>=0),t=I?(I-I%26)/26:0;var i=g%26,e=Math.min((g-i)/26,this.length),o=67108863^67108863>>>i<<i,n=C;if(t-=e,t=Math.max(0,t),n){for(var s=0;s<e;s++)n.words[s]=this.words[s];n.length=e}if(0===e);else if(this.length>e)for(this.length-=e,s=0;s<this.length;s++)this.words[s]=this.words[s+e];else this.words[0]=0,this.length=1;var l=0;for(s=this.length-1;s>=0&&(0!==l||s>=t);s--){var r=0|this.words[s];this.words[s]=l<<26-i|r>>>i,l=r&o}return n&&0!==l&&(n.words[n.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},t.prototype.ishrn=function(g,I,C){return A(0===this.negative),this.iushrn(g,I,C)},t.prototype.shln=function(g){return this.clone().ishln(g)},t.prototype.ushln=function(g){return this.clone().iushln(g)},t.prototype.shrn=function(g){return this.clone().ishrn(g)},t.prototype.ushrn=function(g){return this.clone().iushrn(g)},t.prototype.testn=function(g){A("number"==typeof g&&g>=0);var I=g%26,C=(g-I)/26,t=1<<I;return!(this.length<=C)&&!!(this.words[C]&t)},t.prototype.imaskn=function(g){A("number"==typeof g&&g>=0);var I=g%26,C=(g-I)/26;if(A(0===this.negative,"imaskn works only with positive numbers"),this.length<=C)return this;if(0!==I&&C++,this.length=Math.min(C,this.length),0!==I){var t=67108863^67108863>>>I<<I;this.words[this.length-1]&=t}return this._strip()},t.prototype.maskn=function(g){return this.clone().imaskn(g)},t.prototype.iaddn=function(g){return A("number"==typeof g),A(g<67108864),g<0?this.isubn(-g):0!==this.negative?1===this.length&&(0|this.words[0])<=g?(this.words[0]=g-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(g),this.negative=1,this):this._iaddn(g)},t.prototype._iaddn=function(g){this.words[0]+=g;for(var I=0;I<this.length&&this.words[I]>=67108864;I++)this.words[I]-=67108864,I===this.length-1?this.words[I+1]=1:this.words[I+1]++;return this.length=Math.max(this.length,I+1),this},t.prototype.isubn=function(g){if(A("number"==typeof g),A(g<67108864),g<0)return this.iaddn(-g);if(0!==this.negative)return this.negative=0,this.iaddn(g),this.negative=1,this;if(this.words[0]-=g,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var I=0;I<this.length&&this.words[I]<0;I++)this.words[I]+=67108864,this.words[I+1]-=1;return this._strip()},t.prototype.addn=function(g){return this.clone().iaddn(g)},t.prototype.subn=function(g){return this.clone().isubn(g)},t.prototype.iabs=function(){return this.negative=0,this},t.prototype.abs=function(){return this.clone().iabs()},t.prototype._ishlnsubmul=function(g,I,C){var t,i,e=g.length+C;this._expand(e);var o=0;for(t=0;t<g.length;t++){i=(0|this.words[t+C])+o;var n=(0|g.words[t])*I;o=((i-=67108863&n)>>26)-(n/67108864|0),this.words[t+C]=67108863&i}for(;t<this.length-C;t++)o=(i=(0|this.words[t+C])+o)>>26,this.words[t+C]=67108863&i;if(0===o)return this._strip();for(A(-1===o),o=0,t=0;t<this.length;t++)o=(i=-(0|this.words[t])+o)>>26,this.words[t]=67108863&i;return this.negative=1,this._strip()},t.prototype._wordDiv=function(g,I){var A=(this.length,g.length),C=this.clone(),i=g,e=0|i.words[i.length-1];0!==(A=26-this._countBits(e))&&(i=i.ushln(A),C.iushln(A),e=0|i.words[i.length-1]);var o,n=C.length-i.length;if("mod"!==I){(o=new t(null)).length=n+1,o.words=new Array(o.length);for(var s=0;s<o.length;s++)o.words[s]=0}var l=C.clone()._ishlnsubmul(i,1,n);0===l.negative&&(C=l,o&&(o.words[n]=1));for(var r=n-1;r>=0;r--){var c=67108864*(0|C.words[i.length+r])+(0|C.words[i.length+r-1]);for(c=Math.min(c/e|0,67108863),C._ishlnsubmul(i,c,r);0!==C.negative;)c--,C.negative=0,C._ishlnsubmul(i,1,r),C.isZero()||(C.negative^=1);o&&(o.words[r]=c)}return o&&o._strip(),C._strip(),"div"!==I&&0!==A&&C.iushrn(A),{div:o||null,mod:C}},t.prototype.divmod=function(g,I,C){return A(!g.isZero()),this.isZero()?{div:new t(0),mod:new t(0)}:0!==this.negative&&0===g.negative?(o=this.neg().divmod(g,I),"mod"!==I&&(i=o.div.neg()),"div"!==I&&(e=o.mod.neg(),C&&0!==e.negative&&e.iadd(g)),{div:i,mod:e}):0===this.negative&&0!==g.negative?(o=this.divmod(g.neg(),I),"mod"!==I&&(i=o.div.neg()),{div:i,mod:o.mod}):0!=(this.negative&g.negative)?(o=this.neg().divmod(g.neg(),I),"div"!==I&&(e=o.mod.neg(),C&&0!==e.negative&&e.isub(g)),{div:o.div,mod:e}):g.length>this.length||this.cmp(g)<0?{div:new t(0),mod:this}:1===g.length?"div"===I?{div:this.divn(g.words[0]),mod:null}:"mod"===I?{div:null,mod:new t(this.modrn(g.words[0]))}:{div:this.divn(g.words[0]),mod:new t(this.modrn(g.words[0]))}:this._wordDiv(g,I);var i,e,o},t.prototype.div=function(g){return this.divmod(g,"div",!1).div},t.prototype.mod=function(g){return this.divmod(g,"mod",!1).mod},t.prototype.umod=function(g){return this.divmod(g,"mod",!0).mod},t.prototype.divRound=function(g){var I=this.divmod(g);if(I.mod.isZero())return I.div;var A=0!==I.div.negative?I.mod.isub(g):I.mod,C=g.ushrn(1),t=g.andln(1),i=A.cmp(C);return i<0||1===t&&0===i?I.div:0!==I.div.negative?I.div.isubn(1):I.div.iaddn(1)},t.prototype.modrn=function(g){var I=g<0;I&&(g=-g),A(g<=67108863);for(var C=(1<<26)%g,t=0,i=this.length-1;i>=0;i--)t=(C*t+(0|this.words[i]))%g;return I?-t:t},t.prototype.modn=function(g){return this.modrn(g)},t.prototype.idivn=function(g){var I=g<0;I&&(g=-g),A(g<=67108863);for(var C=0,t=this.length-1;t>=0;t--){var i=(0|this.words[t])+67108864*C;this.words[t]=i/g|0,C=i%g}return this._strip(),I?this.ineg():this},t.prototype.divn=function(g){return this.clone().idivn(g)},t.prototype.egcd=function(g){A(0===g.negative),A(!g.isZero());var I=this,C=g.clone();I=0!==I.negative?I.umod(g):I.clone();for(var i=new t(1),e=new t(0),o=new t(0),n=new t(1),s=0;I.isEven()&&C.isEven();)I.iushrn(1),C.iushrn(1),++s;for(var l=C.clone(),r=I.clone();!I.isZero();){for(var c=0,a=1;0==(I.words[0]&a)&&c<26;++c,a<<=1);if(c>0)for(I.iushrn(c);c-- >0;)(i.isOdd()||e.isOdd())&&(i.iadd(l),e.isub(r)),i.iushrn(1),e.iushrn(1);for(var d=0,h=1;0==(C.words[0]&h)&&d<26;++d,h<<=1);if(d>0)for(C.iushrn(d);d-- >0;)(o.isOdd()||n.isOdd())&&(o.iadd(l),n.isub(r)),o.iushrn(1),n.iushrn(1);I.cmp(C)>=0?(I.isub(C),i.isub(o),e.isub(n)):(C.isub(I),o.isub(i),n.isub(e))}return{a:o,b:n,gcd:C.iushln(s)}},t.prototype._invmp=function(g){A(0===g.negative),A(!g.isZero());var I=this,C=g.clone();I=0!==I.negative?I.umod(g):I.clone();for(var i,e=new t(1),o=new t(0),n=C.clone();I.cmpn(1)>0&&C.cmpn(1)>0;){for(var s=0,l=1;0==(I.words[0]&l)&&s<26;++s,l<<=1);if(s>0)for(I.iushrn(s);s-- >0;)e.isOdd()&&e.iadd(n),e.iushrn(1);for(var r=0,c=1;0==(C.words[0]&c)&&r<26;++r,c<<=1);if(r>0)for(C.iushrn(r);r-- >0;)o.isOdd()&&o.iadd(n),o.iushrn(1);I.cmp(C)>=0?(I.isub(C),e.isub(o)):(C.isub(I),o.isub(e))}return(i=0===I.cmpn(1)?e:o).cmpn(0)<0&&i.iadd(g),i},t.prototype.gcd=function(g){if(this.isZero())return g.abs();if(g.isZero())return this.abs();var I=this.clone(),A=g.clone();I.negative=0,A.negative=0;for(var C=0;I.isEven()&&A.isEven();C++)I.iushrn(1),A.iushrn(1);for(;;){for(;I.isEven();)I.iushrn(1);for(;A.isEven();)A.iushrn(1);var t=I.cmp(A);if(t<0){var i=I;I=A,A=i}else if(0===t||0===A.cmpn(1))break;I.isub(A)}return A.iushln(C)},t.prototype.invm=function(g){return this.egcd(g).a.umod(g)},t.prototype.isEven=function(){return 0==(1&this.words[0])},t.prototype.isOdd=function(){return 1==(1&this.words[0])},t.prototype.andln=function(g){return this.words[0]&g},t.prototype.bincn=function(g){A("number"==typeof g);var I=g%26,C=(g-I)/26,t=1<<I;if(this.length<=C)return this._expand(C+1),this.words[C]|=t,this;for(var i=t,e=C;0!==i&&e<this.length;e++){var o=0|this.words[e];i=(o+=i)>>>26,o&=67108863,this.words[e]=o}return 0!==i&&(this.words[e]=i,this.length++),this},t.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},t.prototype.cmpn=function(g){var I,C=g<0;if(0!==this.negative&&!C)return-1;if(0===this.negative&&C)return 1;if(this._strip(),this.length>1)I=1;else{C&&(g=-g),A(g<=67108863,"Number is too big");var t=0|this.words[0];I=t===g?0:t<g?-1:1}return 0!==this.negative?0|-I:I},t.prototype.cmp=function(g){if(0!==this.negative&&0===g.negative)return-1;if(0===this.negative&&0!==g.negative)return 1;var I=this.ucmp(g);return 0!==this.negative?0|-I:I},t.prototype.ucmp=function(g){if(this.length>g.length)return 1;if(this.length<g.length)return-1;for(var I=0,A=this.length-1;A>=0;A--){var C=0|this.words[A],t=0|g.words[A];if(C!==t){C<t?I=-1:C>t&&(I=1);break}}return I},t.prototype.gtn=function(g){return 1===this.cmpn(g)},t.prototype.gt=function(g){return 1===this.cmp(g)},t.prototype.gten=function(g){return this.cmpn(g)>=0},t.prototype.gte=function(g){return this.cmp(g)>=0},t.prototype.ltn=function(g){return-1===this.cmpn(g)},t.prototype.lt=function(g){return-1===this.cmp(g)},t.prototype.lten=function(g){return this.cmpn(g)<=0},t.prototype.lte=function(g){return this.cmp(g)<=0},t.prototype.eqn=function(g){return 0===this.cmpn(g)},t.prototype.eq=function(g){return 0===this.cmp(g)},t.red=function(g){return new w(g)},t.prototype.toRed=function(g){return A(!this.red,"Already a number in reduction context"),A(0===this.negative,"red works only with positives"),g.convertTo(this)._forceRed(g)},t.prototype.fromRed=function(){return A(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},t.prototype._forceRed=function(g){return this.red=g,this},t.prototype.forceRed=function(g){return A(!this.red,"Already a number in reduction context"),this._forceRed(g)},t.prototype.redAdd=function(g){return A(this.red,"redAdd works only with red numbers"),this.red.add(this,g)},t.prototype.redIAdd=function(g){return A(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,g)},t.prototype.redSub=function(g){return A(this.red,"redSub works only with red numbers"),this.red.sub(this,g)},t.prototype.redISub=function(g){return A(this.red,"redISub works only with red numbers"),this.red.isub(this,g)},t.prototype.redShl=function(g){return A(this.red,"redShl works only with red numbers"),this.red.shl(this,g)},t.prototype.redMul=function(g){return A(this.red,"redMul works only with red numbers"),this.red._verify2(this,g),this.red.mul(this,g)},t.prototype.redIMul=function(g){return A(this.red,"redMul works only with red numbers"),this.red._verify2(this,g),this.red.imul(this,g)},t.prototype.redSqr=function(){return A(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},t.prototype.redISqr=function(){return A(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},t.prototype.redSqrt=function(){return A(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},t.prototype.redInvm=function(){return A(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},t.prototype.redNeg=function(){return A(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},t.prototype.redPow=function(g){return A(this.red&&!g.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,g)};var u={k256:null,p224:null,p192:null,p25519:null};function G(g,I){this.name=g,this.p=new t(I,16),this.n=this.p.bitLength(),this.k=new t(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){G.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function p(){G.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function B(){G.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function y(){G.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function w(g){if("string"==typeof g){var I=t._prime(g);this.m=I.p,this.prime=I}else A(g.gtn(1),"modulus must be greater than 1"),this.m=g,this.prime=null}function W(g){w.call(this,g),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new t(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}G.prototype._tmp=function(){var g=new t(null);return g.words=new Array(Math.ceil(this.n/13)),g},G.prototype.ireduce=function(g){var I,A=g;do{this.split(A,this.tmp),I=(A=(A=this.imulK(A)).iadd(this.tmp)).bitLength()}while(I>this.n);var C=I<this.n?-1:A.ucmp(this.p);return 0===C?(A.words[0]=0,A.length=1):C>0?A.isub(this.p):void 0!==A.strip?A.strip():A._strip(),A},G.prototype.split=function(g,I){g.iushrn(this.n,0,I)},G.prototype.imulK=function(g){return g.imul(this.k)},C(b,G),b.prototype.split=function(g,I){for(var A=4194303,C=Math.min(g.length,9),t=0;t<C;t++)I.words[t]=g.words[t];if(I.length=C,g.length<=9)return g.words[0]=0,void(g.length=1);var i=g.words[9];for(I.words[I.length++]=i&A,t=10;t<g.length;t++){var e=0|g.words[t];g.words[t-10]=(e&A)<<4|i>>>22,i=e}i>>>=22,g.words[t-10]=i,0===i&&g.length>10?g.length-=10:g.length-=9},b.prototype.imulK=function(g){g.words[g.length]=0,g.words[g.length+1]=0,g.length+=2;for(var I=0,A=0;A<g.length;A++){var C=0|g.words[A];I+=977*C,g.words[A]=67108863&I,I=64*C+(I/67108864|0)}return 0===g.words[g.length-1]&&(g.length--,0===g.words[g.length-1]&&g.length--),g},C(p,G),C(B,G),C(y,G),y.prototype.imulK=function(g){for(var I=0,A=0;A<g.length;A++){var C=19*(0|g.words[A])+I,t=67108863&C;C>>>=26,g.words[A]=t,I=C}return 0!==I&&(g.words[g.length++]=I),g},t._prime=function(g){if(u[g])return u[g];var I;if("k256"===g)I=new b;else if("p224"===g)I=new p;else if("p192"===g)I=new B;else{if("p25519"!==g)throw new Error("Unknown prime "+g);I=new y}return u[g]=I,I},w.prototype._verify1=function(g){A(0===g.negative,"red works only with positives"),A(g.red,"red works only with red numbers")},w.prototype._verify2=function(g,I){A(0==(g.negative|I.negative),"red works only with positives"),A(g.red&&g.red===I.red,"red works only with red numbers")},w.prototype.imod=function(g){return this.prime?this.prime.ireduce(g)._forceRed(this):(s(g,g.umod(this.m)._forceRed(this)),g)},w.prototype.neg=function(g){return g.isZero()?g.clone():this.m.sub(g)._forceRed(this)},w.prototype.add=function(g,I){this._verify2(g,I);var A=g.add(I);return A.cmp(this.m)>=0&&A.isub(this.m),A._forceRed(this)},w.prototype.iadd=function(g,I){this._verify2(g,I);var A=g.iadd(I);return A.cmp(this.m)>=0&&A.isub(this.m),A},w.prototype.sub=function(g,I){this._verify2(g,I);var A=g.sub(I);return A.cmpn(0)<0&&A.iadd(this.m),A._forceRed(this)},w.prototype.isub=function(g,I){this._verify2(g,I);var A=g.isub(I);return A.cmpn(0)<0&&A.iadd(this.m),A},w.prototype.shl=function(g,I){return this._verify1(g),this.imod(g.ushln(I))},w.prototype.imul=function(g,I){return this._verify2(g,I),this.imod(g.imul(I))},w.prototype.mul=function(g,I){return this._verify2(g,I),this.imod(g.mul(I))},w.prototype.isqr=function(g){return this.imul(g,g.clone())},w.prototype.sqr=function(g){return this.mul(g,g)},w.prototype.sqrt=function(g){if(g.isZero())return g.clone();var I=this.m.andln(3);if(A(I%2==1),3===I){var C=this.m.add(new t(1)).iushrn(2);return this.pow(g,C)}for(var i=this.m.subn(1),e=0;!i.isZero()&&0===i.andln(1);)e++,i.iushrn(1);A(!i.isZero());var o=new t(1).toRed(this),n=o.redNeg(),s=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new t(2*l*l).toRed(this);0!==this.pow(l,s).cmp(n);)l.redIAdd(n);for(var r=this.pow(l,i),c=this.pow(g,i.addn(1).iushrn(1)),a=this.pow(g,i),d=e;0!==a.cmp(o);){for(var h=a,m=0;0!==h.cmp(o);m++)h=h.redSqr();A(m<d);var Z=this.pow(r,new t(1).iushln(d-m-1));c=c.redMul(Z),r=Z.redSqr(),a=a.redMul(r),d=m}return c},w.prototype.invm=function(g){var I=g._invmp(this.m);return 0!==I.negative?(I.negative=0,this.imod(I).redNeg()):this.imod(I)},w.prototype.pow=function(g,I){if(I.isZero())return new t(1).toRed(this);if(0===I.cmpn(1))return g.clone();var A=new Array(16);A[0]=new t(1).toRed(this),A[1]=g;for(var C=2;C<A.length;C++)A[C]=this.mul(A[C-1],g);var i=A[0],e=0,o=0,n=I.bitLength()%26;for(0===n&&(n=26),C=I.length-1;C>=0;C--){for(var s=I.words[C],l=n-1;l>=0;l--){var r=s>>l&1;i!==A[0]&&(i=this.sqr(i)),0!==r||0!==e?(e<<=1,e|=r,(4===++o||0===C&&0===l)&&(i=this.mul(i,A[e]),o=0,e=0)):o=0}n=26}return i},w.prototype.convertTo=function(g){var I=g.umod(this.m);return I===g?I.clone():I},w.prototype.convertFrom=function(g){var I=g.clone();return I.red=null,I},t.mont=function(g){return new W(g)},C(W,w),W.prototype.convertTo=function(g){return this.imod(g.ushln(this.shift))},W.prototype.convertFrom=function(g){var I=this.imod(g.mul(this.rinv));return I.red=null,I},W.prototype.imul=function(g,I){if(g.isZero()||I.isZero())return g.words[0]=0,g.length=1,g;var A=g.imul(I),C=A.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),t=A.isub(C).iushrn(this.shift),i=t;return t.cmp(this.m)>=0?i=t.isub(this.m):t.cmpn(0)<0&&(i=t.iadd(this.m)),i._forceRed(this)},W.prototype.mul=function(g,I){if(g.isZero()||I.isZero())return new t(0)._forceRed(this);var A=g.mul(I),C=A.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=A.isub(C).iushrn(this.shift),e=i;return i.cmp(this.m)>=0?e=i.isub(this.m):i.cmpn(0)<0&&(e=i.iadd(this.m)),e._forceRed(this)},W.prototype.invm=function(g){return this.imod(g._invmp(this.m).mul(this.r2))._forceRed(this)}}(g,ot)}(Om);var Rm=Om.exports,Qm=Kt;function Hm(g){var I,A=g.modulus.byteLength();do{I=new Rm(Qm(A))}while(I.cmp(g.modulus)>=0||!I.umod(g.prime1)||!I.umod(g.prime2));return I}function km(g,I){var A=function(g){var I=Hm(g);return{blinder:I.toRed(Rm.mont(g.modulus)).redPow(new Rm(g.publicExponent)).fromRed(),unblinder:I.invm(g.modulus)}}(I),C=I.modulus.byteLength(),t=new Rm(g).mul(A.blinder).umod(I.modulus),i=t.toRed(Rm.mont(I.prime1)),e=t.toRed(Rm.mont(I.prime2)),o=I.coefficient,n=I.prime1,s=I.prime2,l=i.redPow(I.exponent1).fromRed(),r=e.redPow(I.exponent2).fromRed(),c=l.isub(r).imul(o).umod(n).imul(s);return r.iadd(c).imul(A.unblinder).umod(I.modulus).toArrayLike(Buffer,"be",C)}km.getr=Hm;var Jm=km,vm=pm,Dm=Kt,Mm=ft,Nm=Wm,Em=Km,Fm=fm.exports,Lm=Vm,Tm=Jm,zm=Ht.exports.Buffer,Pm=function(g,I,A){var C;C=g.padding?g.padding:A?1:4;var t,i=vm(g);if(4===C)t=function(g,I){var A=g.modulus.byteLength(),C=I.length,t=Mm("sha1").update(zm.alloc(0)).digest(),i=t.length,e=2*i;if(C>A-e-2)throw new Error("message too long");var o=zm.alloc(A-C-e-2),n=A-i-1,s=Dm(i),l=Em(zm.concat([t,o,zm.alloc(1,1),I],n),Nm(s,n)),r=Em(s,Nm(l,i));return new Fm(zm.concat([zm.alloc(1),r,l],A))}(i,I);else if(1===C)t=function(g,I,A){var C,t=I.length,i=g.modulus.byteLength();if(t>i-11)throw new Error("message too long");C=A?zm.alloc(i-t-3,255):function(g){var I,A=zm.allocUnsafe(g),C=0,t=Dm(2*g),i=0;for(;C<g;)i===t.length&&(t=Dm(2*g),i=0),(I=t[i++])&&(A[C++]=I);return A}(i-t-3);return new Fm(zm.concat([zm.from([0,A?1:2]),C,zm.alloc(1),I],i))}(i,I,A);else{if(3!==C)throw new Error("unknown padding");if((t=new Fm(I)).cmp(i.modulus)>=0)throw new Error("data too long for modulus")}return A?Tm(t,i):Lm(t,i)};var Um=pm,xm=Wm,jm=Km,_m=fm.exports,$m=Jm,qm=ft,gZ=Vm,IZ=Ht.exports.Buffer,AZ=function(g,I,A){var C;C=g.padding?g.padding:A?1:4;var t,i=Um(g),e=i.modulus.byteLength();if(I.length>e||new _m(I).cmp(i.modulus)>=0)throw new Error("decryption error");t=A?gZ(new _m(I),i):$m(I,i);var o=IZ.alloc(e-t.length);if(t=IZ.concat([o,t],e),4===C)return function(g,I){var A=g.modulus.byteLength(),C=qm("sha1").update(IZ.alloc(0)).digest(),t=C.length;if(0!==I[0])throw new Error("decryption error");var i=I.slice(1,t+1),e=I.slice(t+1),o=jm(i,xm(e,t)),n=jm(e,xm(o,A-t-1));if(function(g,I){g=IZ.from(g),I=IZ.from(I);var A=0,C=g.length;g.length!==I.length&&(A++,C=Math.min(g.length,I.length));var t=-1;for(;++t<C;)A+=g[t]^I[t];return A}(C,n.slice(0,t)))throw new Error("decryption error");var s=t;for(;0===n[s];)s++;if(1!==n[s++])throw new Error("decryption error");return n.slice(s)}(i,t);if(1===C)return function(g,I,A){var C=I.slice(0,2),t=2,i=0;for(;0!==I[t++];)if(t>=I.length){i++;break}var e=I.slice(2,t-1);("0002"!==C.toString("hex")&&!A||"0001"!==C.toString("hex")&&A)&&i++;e.length<8&&i++;if(i)throw new Error("decryption error");return I.slice(t)}(0,t,A);if(3===C)return t;throw new Error("unknown padding")};!function(g){g.publicEncrypt=Pm,g.privateDecrypt=AZ,g.privateEncrypt=function(I,A){return g.publicEncrypt(I,A,!0)},g.publicDecrypt=function(I,A){return g.privateDecrypt(I,A,!0)}}(cs);var CZ=St;"function"!=typeof CZ.publicEncrypt&&(CZ=cs),rs.publicEncrypt=CZ.publicEncrypt,rs.privateDecrypt=CZ.privateDecrypt,"function"!=typeof CZ.privateEncrypt?rs.privateEncrypt=cs.privateEncrypt:rs.privateEncrypt=CZ.privateEncrypt,"function"!=typeof CZ.publicDecrypt?rs.publicDecrypt=cs.publicDecrypt:rs.publicDecrypt=CZ.publicDecrypt,St.randomBytes=St.rng=St.pseudoRandomBytes=St.prng=Kt,St.createHash=St.Hash=ft,St.createHmac=St.Hmac=Yt;var tZ=Xt,iZ=Object.keys(tZ),eZ=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(iZ);St.getHashes=function(){return eZ};var oZ=Vt;St.pbkdf2=oZ.pbkdf2,St.pbkdf2Sync=oZ.pbkdf2Sync;var nZ=oi;St.Cipher=nZ.Cipher,St.createCipher=nZ.createCipher,St.Cipheriv=nZ.Cipheriv,St.createCipheriv=nZ.createCipheriv,St.Decipher=nZ.Decipher,St.createDecipher=nZ.createDecipher,St.Decipheriv=nZ.Decipheriv,St.createDecipheriv=nZ.createDecipheriv,St.getCiphers=nZ.getCiphers,St.listCiphers=nZ.listCiphers;var sZ=si;St.DiffieHellmanGroup=sZ.DiffieHellmanGroup,St.createDiffieHellmanGroup=sZ.createDiffieHellmanGroup,St.getDiffieHellman=sZ.getDiffieHellman,St.createDiffieHellman=sZ.createDiffieHellman,St.DiffieHellman=sZ.DiffieHellman;var lZ=ri;St.createSign=lZ.createSign,St.Sign=lZ.Sign,St.createVerify=lZ.createVerify,St.Verify=lZ.Verify,St.createECDH=ls;var rZ=rs;St.publicEncrypt=rZ.publicEncrypt,St.privateEncrypt=rZ.privateEncrypt,St.publicDecrypt=rZ.publicDecrypt,St.privateDecrypt=rZ.privateDecrypt;var cZ=Wt.exports;St.randomFill=cZ.randomFill,St.randomFillSync=cZ.randomFillSync,St.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))},St.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6};var aZ={};function dZ(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var hZ=Ht.exports,mZ=Kt,ZZ=hZ.Buffer,uZ=hZ.kMaxLength,GZ=ot.crypto||ot.msCrypto,bZ=Math.pow(2,32)-1;function pZ(g,I){if("number"!=typeof g||g!=g)throw new TypeError("offset must be a number");if(g>bZ||g<0)throw new TypeError("offset must be a uint32");if(g>uZ||g>I)throw new RangeError("offset out of range")}function BZ(g,I,A){if("number"!=typeof g||g!=g)throw new TypeError("size must be a number");if(g>bZ||g<0)throw new TypeError("size must be a uint32");if(g+I>A||g>uZ)throw new RangeError("buffer too small")}function yZ(g,I,A,C){if(process.browser){var t=g.buffer,i=new Uint8Array(t,I,A);return GZ.getRandomValues(i),C?void process.nextTick((function(){C(null,g)})):g}if(!C)return mZ(A).copy(g,I),g;mZ(A,(function(A,t){if(A)return C(A);t.copy(g,I),C(null,g)}))}GZ&&GZ.getRandomValues||!process.browser?(aZ.randomFill=function(g,I,A,C){if(!(ZZ.isBuffer(g)||g instanceof ot.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof I)C=I,I=0,A=g.length;else if("function"==typeof A)C=A,A=g.length-I;else if("function"!=typeof C)throw new TypeError('"cb" argument must be a function');return pZ(I,g.length),BZ(A,I,g.length),yZ(g,I,A,C)},aZ.randomFillSync=function(g,I,A){void 0===I&&(I=0);if(!(ZZ.isBuffer(g)||g instanceof ot.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');pZ(I,g.length),void 0===A&&(A=g.length-I);return BZ(A,I,g.length),yZ(g,I,A)}):(aZ.randomFill=dZ,aZ.randomFillSync=dZ),function(g,I){var A=St;"function"==typeof A.randomFill&&"function"==typeof A.randomFillSync?(I.randomFill=A.randomFill,I.randomFillSync=A.randomFillSync):g.exports=aZ}(Wt,Wt.exports);const wZ=Math.floor(.001*(Date.now()-performance.now()));class WZ extends Error{constructor(g){super(),this.errno=g,Object.setPrototypeOf(this,WZ.prototype)}}class SZ extends Error{constructor(g){super(`WASI Exit error: ${g}`),this.code=g,Object.setPrototypeOf(this,SZ.prototype)}}class KZ extends Error{constructor(g){super(`WASI Kill signal: ${g}`),this.signal=g,Object.setPrototypeOf(this,KZ.prototype)}}const fZ={hrtime:(YZ=function(g){let I=.001*performance.now(),A=Math.floor(I)+wZ,C=Math.floor(I%1*1e9);return g&&(A-=g[0],C-=g[1],C<0&&(A--,C+=1e9)),[A,C]},g=>{const I=YZ(g);return 1e9*I[0]+I[1]}),exit:g=>{throw new SZ(g)},kill:g=>{throw new KZ(g)},randomFillSync:Wt.exports.randomFillSync,isTTY:()=>!0,path:wt,fs:null};var YZ;const XZ=28,VZ=52,OZ=tt(1),RZ=tt(2),QZ=tt(4),HZ=tt(8),kZ=tt(16),JZ=tt(32),vZ=tt(64),DZ=tt(128),MZ=tt(256),NZ=tt(512),EZ=tt(1024),FZ=tt(2048),LZ=tt(4096),TZ=tt(8192),zZ=tt(16384),PZ=tt(32768),UZ=tt(65536),xZ=tt(131072),jZ=tt(262144),_Z=tt(524288),$Z=tt(1048576),qZ=tt(2097152),gu=tt(4194304),Iu=tt(8388608),Au=tt(16777216),Cu=tt(33554432),tu=tt(67108864),iu=tt(134217728),eu=tt(268435456),ou=OZ|RZ|QZ|HZ|kZ|JZ|vZ|DZ|MZ|NZ|EZ|FZ|LZ|TZ|zZ|PZ|UZ|xZ|jZ|_Z|$Z|qZ|Iu|gu|Au|tu|Cu|iu|eu,nu=ou,su=ou,lu=ou,ru=ou,cu=OZ|RZ|QZ|HZ|kZ|JZ|vZ|DZ|MZ|qZ|gu|Iu|iu,au=tt(0),du=HZ|kZ|DZ|NZ|EZ|FZ|LZ|TZ|zZ|PZ|UZ|xZ|jZ|_Z|$Z|qZ|Iu|Au|tu|Cu|iu,hu=du|cu,mu=RZ|HZ|vZ|qZ|iu|eu,Zu=ou,uu=RZ|HZ|vZ|qZ|iu,Gu=tt(0),bu={E2BIG:1,EACCES:2,EADDRINUSE:3,EADDRNOTAVAIL:4,EAFNOSUPPORT:5,EALREADY:7,EAGAIN:6,EBADF:8,EBADMSG:9,EBUSY:10,ECANCELED:11,ECHILD:12,ECONNABORTED:13,ECONNREFUSED:14,ECONNRESET:15,EDEADLOCK:16,EDESTADDRREQ:17,EDOM:18,EDQUOT:19,EEXIST:20,EFAULT:21,EFBIG:22,EHOSTDOWN:23,EHOSTUNREACH:23,EIDRM:24,EILSEQ:25,EINPROGRESS:26,EINTR:27,EINVAL:XZ,EIO:29,EISCONN:30,EISDIR:31,ELOOP:32,EMFILE:33,EMLINK:34,EMSGSIZE:35,EMULTIHOP:36,ENAMETOOLONG:37,ENETDOWN:38,ENETRESET:39,ENETUNREACH:40,ENFILE:41,ENOBUFS:42,ENODEV:43,ENOENT:44,ENOEXEC:45,ENOLCK:46,ENOLINK:47,ENOMEM:48,ENOMSG:49,ENOPROTOOPT:50,ENOSPC:51,ENOSYS:VZ,ENOTCONN:53,ENOTDIR:54,ENOTEMPTY:55,ENOTRECOVERABLE:56,ENOTSOCK:57,ENOTTY:59,ENXIO:60,EOVERFLOW:61,EOWNERDEAD:62,EPERM:63,EPIPE:64,EPROTO:65,EPROTONOSUPPORT:66,EPROTOTYPE:67,ERANGE:68,EROFS:69,ESPIPE:70,ESRCH:71,ESTALE:72,ETIMEDOUT:73,ETXTBSY:74,EXDEV:75},pu={6:"SIGHUP",8:"SIGINT",11:"SIGQUIT",7:"SIGILL",15:"SIGTRAP",0:"SIGABRT",2:"SIGBUS",5:"SIGFPE",9:"SIGKILL",20:"SIGUSR1",12:"SIGSEGV",21:"SIGUSR2",10:"SIGPIPE",1:"SIGALRM",14:"SIGTERM",3:"SIGCHLD",4:"SIGCONT",13:"SIGSTOP",16:"SIGTSTP",17:"SIGTTIN",18:"SIGTTOU",19:"SIGURG",23:"SIGXCPU",24:"SIGXFSZ",22:"SIGVTALRM"},Bu=OZ|RZ|kZ|DZ|qZ|iu,yu=OZ|vZ|kZ|DZ|qZ|iu,wu=yu,Wu=g=>{const I=Math.trunc(g),A=tt(Math.round(1e3*(g-I)));return tt(I)*tt(1e3)+A},Su=g=>(...I)=>{try{return g(...I)}catch(dD){const I=dD;if(I&&I.code&&"string"==typeof I.code)return bu[I.code]||XZ;if(dD instanceof WZ)return dD.errno;throw dD}},Ku=(g,I)=>{const A=g.FD_MAP.get(I);if(!A)throw new WZ(8);if(void 0===A.filetype){const C=g.bindings.fs.fstatSync(A.real),{filetype:t,rightsBase:i,rightsInheriting:e}=fu(g,I,C);A.filetype=t,A.rights||(A.rights={base:i,inheriting:e})}return A},fu=(g,I,A)=>{switch(!0){case A.isBlockDevice():return{filetype:1,rightsBase:nu,rightsInheriting:su};case A.isCharacterDevice():{const A=2;return void 0!==I&&g.bindings.isTTY(I)?{filetype:A,rightsBase:uu,rightsInheriting:Gu}:{filetype:A,rightsBase:lu,rightsInheriting:ru}}case A.isDirectory():return{filetype:3,rightsBase:du,rightsInheriting:hu};case A.isFIFO():return{filetype:6,rightsBase:mu,rightsInheriting:Zu};case A.isFile():return{filetype:4,rightsBase:cu,rightsInheriting:au};case A.isSocket():return{filetype:6,rightsBase:mu,rightsInheriting:Zu};case A.isSymbolicLink():return{filetype:7,rightsBase:tt(0),rightsInheriting:tt(0)};default:return{filetype:0,rightsBase:tt(0),rightsInheriting:tt(0)}}};class Yu{constructor(g){let I={};g&&g.preopens?I=g.preopens:g&&g.preopenDirectories&&(I=g.preopenDirectories);let A={};g&&g.env&&(A=g.env);let C=[];g&&g.args&&(C=g.args);let t=fZ;g&&g.bindings&&(t=g.bindings),this.memory=void 0,this.view=void 0,this.bindings=t,this.FD_MAP=new Map([[0,{real:0,filetype:2,rights:{base:Bu,inheriting:tt(0)},path:void 0}],[1,{real:1,filetype:2,rights:{base:yu,inheriting:tt(0)},path:void 0}],[2,{real:2,filetype:2,rights:{base:wu,inheriting:tt(0)},path:void 0}]]);let i=this.bindings.fs,e=this.bindings.path;for(const[r,c]of Object.entries(I)){const g=i.openSync(c,i.constants.O_RDONLY),I=[...this.FD_MAP.keys()].reverse()[0]+1;this.FD_MAP.set(I,{real:g,filetype:3,rights:{base:du,inheriting:hu},fakePath:r,path:c})}const o=(g,I)=>{this.refreshMemory();return Array.from({length:I},((I,A)=>{const C=g+8*A,t=this.view.getUint32(C,!0),i=this.view.getUint32(C+4,!0);return new Uint8Array(this.memory.buffer,t,i)}))},n=(g,I)=>{const A=Ku(this,g);if(I!==tt(0)&&(A.rights.base&I)===tt(0))throw new WZ(63);return A},s=t.hrtime(),l=g=>{switch(g){case 0:case 2:return t.hrtime();case 1:case 3:return t.hrtime()-s;default:return null}};this.wasiImport={args_get:(g,I)=>{this.refreshMemory();let A=g,t=I;return C.forEach((g=>{this.view.setUint32(A,t,!0),A+=4,t+=nt.Buffer.from(this.memory.buffer).write(`${g}\0`,t)})),0},args_sizes_get:(g,I)=>{this.refreshMemory(),this.view.setUint32(g,C.length,!0);const A=C.reduce(((g,I)=>g+nt.Buffer.byteLength(I)+1),0);return this.view.setUint32(I,A,!0),0},environ_get:(g,I)=>{this.refreshMemory();let C=g,t=I;return Object.entries(A).forEach((([g,I])=>{this.view.setUint32(C,t,!0),C+=4,t+=nt.Buffer.from(this.memory.buffer).write(`${g}=${I}\0`,t)})),0},environ_sizes_get:(g,I)=>{this.refreshMemory();const C=Object.entries(A).map((([g,I])=>`${g}=${I}\0`)),t=C.reduce(((g,I)=>g+nt.Buffer.byteLength(I)),0);return this.view.setUint32(g,C.length,!0),this.view.setUint32(I,t,!0),0},clock_res_get:(g,I)=>(this.view.setBigUint64(I,tt(0)),0),clock_time_get:(g,I,A)=>{this.refreshMemory();const C=l(g);return null===C?XZ:(this.view.setBigUint64(A,tt(C),!0),0)},fd_advise:Su(((g,I,A,C)=>(n(g,DZ),VZ))),fd_allocate:Su(((g,I,A)=>(n(g,MZ),VZ))),fd_close:Su((g=>{const I=n(g,tt(0));return i.closeSync(I.real),this.FD_MAP.delete(g),0})),fd_datasync:g=>{const I=n(g,OZ);return i.fdatasyncSync(I.real),0},fd_fdstat_get:Su(((g,I)=>{const A=n(g,tt(0));return this.refreshMemory(),this.view.setUint8(I,A.filetype),this.view.setUint16(I+2,0,!0),this.view.setUint16(I+4,0,!0),this.view.setBigUint64(I+8,tt(A.rights.base),!0),this.view.setBigUint64(I+8+8,tt(A.rights.inheriting),!0),0})),fd_fdstat_set_flags:Su(((g,I)=>(n(g,HZ),VZ))),fd_fdstat_set_rights:Su(((g,I,A)=>{const C=n(g,tt(0)),t=C.rights.base|I;if(t>C.rights.base)return 63;const i=C.rights.inheriting|A;return i>C.rights.inheriting?63:(C.rights.base=t,C.rights.inheriting=i,0)})),fd_filestat_get:Su(((g,I)=>{const A=n(g,qZ),C=i.fstatSync(A.real);return this.refreshMemory(),this.view.setBigUint64(I,tt(C.dev),!0),I+=8,this.view.setBigUint64(I,tt(C.ino),!0),I+=8,this.view.setUint8(I,A.filetype),I+=4,this.view.setUint32(I,Number(C.nlink),!0),I+=4,this.view.setBigUint64(I,tt(C.size),!0),I+=8,this.view.setBigUint64(I,Wu(C.atimeMs),!0),I+=8,this.view.setBigUint64(I,Wu(C.mtimeMs),!0),I+=8,this.view.setBigUint64(I,Wu(C.ctimeMs),!0),I+=8,0})),fd_filestat_set_size:Su(((g,I)=>{const A=n(g,gu);return i.ftruncate(A.real,Number(I)),0})),fd_filestat_set_times:Su(((g,I,A,C)=>{const t=n(g,Iu),e=l(2),o=2==(2&C),s=8==(8&C);return i.futimesSync(t.real,o?e:I,s?e:A),0})),fd_prestat_get:Su(((g,I)=>{const A=n(g,tt(0));return A.path?(this.refreshMemory(),this.view.setUint8(I,0),this.view.setUint32(I+4,nt.Buffer.byteLength(A.fakePath),!0),0):XZ})),fd_prestat_dir_name:Su(((g,I,A)=>{const C=n(g,tt(0));return C.path?(this.refreshMemory(),nt.Buffer.from(this.memory.buffer).write(C.fakePath,I,A,"utf8"),0):XZ})),fd_pwrite:Su(((g,I,A,C,t)=>{const e=n(g,vZ|QZ);let s=0;return o(I,A).forEach((g=>{let I=0;for(;I<g.byteLength;)I+=i.writeSync(e.real,g,I,g.byteLength-I,C+s+I);s+=I})),this.view.setUint32(t,s,!0),0})),fd_write:Su(((g,I,A,C)=>{const t=n(g,vZ);let e=0;return o(I,A).forEach((g=>{let I=0;for(;I<g.byteLength;){const A=i.writeSync(t.real,g,I,g.byteLength-I,t.offset?Number(t.offset):null);t.offset&&(t.offset+=tt(A)),I+=A}e+=I})),this.view.setUint32(C,e,!0),0})),fd_pread:Su(((g,I,A,C,t)=>{const e=n(g,RZ|QZ);let s=0;return o(I,A).forEach((g=>{let I=0;for(;I<g.byteLength;)I+=i.readSync(e.real,g,I,g.byteLength-I,Number(C)+s+I);s+=I})),this.view.setUint32(t,s,!0),0})),fd_read:Su(((g,I,A,C)=>{const t=n(g,RZ),e=0===t.real;let s=0;g:for(const n of o(I,A)){let g=0;for(;g<n.byteLength;){let I=n.byteLength-g,A=e||void 0===t.offset?null:Number(t.offset),C=i.readSync(t.real,n,g,I,A);if(e||(t.offset=(t.offset?t.offset:tt(0))+tt(C)),g+=C,s+=C,0===C||C<I)break g}}return this.view.setUint32(C,s,!0),0})),fd_readdir:Su(((g,I,A,C,t)=>{const o=n(g,zZ);this.refreshMemory();const s=i.readdirSync(o.path,{withFileTypes:!0}),l=I;for(let n=Number(C);n<s.length;n+=1){const g=s[n];let C=nt.Buffer.byteLength(g.name);if(I-l>A)break;if(this.view.setBigUint64(I,tt(n+1),!0),(I+=8)-l>A)break;const t=i.statSync(e.resolve(o.path,g.name));if(this.view.setBigUint64(I,tt(t.ino),!0),(I+=8)-l>A)break;if(this.view.setUint32(I,C,!0),(I+=4)-l>A)break;let r;switch(!0){case t.isBlockDevice():r=1;break;case t.isCharacterDevice():r=2;break;case t.isDirectory():r=3;break;case t.isFIFO():r=6;break;case t.isFile():r=4;break;case t.isSocket():r=6;break;case t.isSymbolicLink():r=7;break;default:r=0}if(this.view.setUint8(I,r),I+=1,(I+=3)+C>=l+A)break;nt.Buffer.from(this.memory.buffer).write(g.name,I),I+=C}const r=I-l;return this.view.setUint32(t,Math.min(r,A),!0),0})),fd_renumber:Su(((g,I)=>(n(g,tt(0)),n(I,tt(0)),i.closeSync(this.FD_MAP.get(g).real),this.FD_MAP.set(g,this.FD_MAP.get(I)),this.FD_MAP.delete(I),0))),fd_seek:Su(((g,I,A,C)=>{const t=n(g,QZ);switch(this.refreshMemory(),A){case 0:t.offset=(t.offset?t.offset:tt(0))+tt(I);break;case 1:const{size:g}=i.fstatSync(t.real);t.offset=tt(g)+tt(I);break;case 2:t.offset=tt(I)}return this.view.setBigUint64(C,t.offset,!0),0})),fd_tell:Su(((g,I)=>{const A=n(g,JZ);return this.refreshMemory(),A.offset||(A.offset=tt(0)),this.view.setBigUint64(I,A.offset,!0),0})),fd_sync:Su((g=>{const I=n(g,kZ);return i.fsyncSync(I.real),0})),path_create_directory:Su(((g,I,A)=>{const C=n(g,NZ);if(!C.path)return XZ;this.refreshMemory();const t=nt.Buffer.from(this.memory.buffer,I,A).toString();return i.mkdirSync(e.resolve(C.path,t)),0})),path_filestat_get:Su(((g,I,A,C,t)=>{const e=n(g,jZ);if(!e.path)return XZ;this.refreshMemory();const o=nt.Buffer.from(this.memory.buffer,A,C).toString(),s=i.statSync(yt.resolve(e.path,o));return this.view.setBigUint64(t,tt(s.dev),!0),t+=8,this.view.setBigUint64(t,tt(s.ino),!0),t+=8,this.view.setUint8(t,fu(this,void 0,s).filetype),t+=4,this.view.setUint32(t,Number(s.nlink),!0),t+=4,this.view.setBigUint64(t,tt(s.size),!0),t+=8,this.view.setBigUint64(t,Wu(s.atimeMs),!0),t+=8,this.view.setBigUint64(t,Wu(s.mtimeMs),!0),t+=8,this.view.setBigUint64(t,Wu(s.ctimeMs),!0),t+=8,0})),path_filestat_set_times:Su(((g,I,A,C,t,o)=>{const s=n(g,$Z);if(!s.path)return XZ;this.refreshMemory();const r=l(2),c=2==(2&I),a=8==(8&I),d=nt.Buffer.from(this.memory.buffer,A,C).toString();return i.utimesSync(e.resolve(s.path,d),c?r:t,a?r:o),0})),path_link:Su(((g,I,A,C,t,o,s)=>{const l=n(g,FZ),r=n(t,LZ);if(!l.path||!r.path)return XZ;this.refreshMemory();const c=nt.Buffer.from(this.memory.buffer,A,C).toString(),a=nt.Buffer.from(this.memory.buffer,o,s).toString();return i.linkSync(e.resolve(l.path,c),e.resolve(r.path,a)),0})),path_open:Su(((g,I,A,C,t,o,s,l,r)=>{const c=n(g,TZ);o=tt(o),s=tt(s);const a=(o&(RZ|zZ))!==tt(0),d=(o&(OZ|vZ|MZ|gu))!==tt(0);let h;d&&a?h=i.constants.O_RDWR:a?h=i.constants.O_RDONLY:d&&(h=i.constants.O_WRONLY);let m=o|TZ,Z=o|s;0!=(1&t)&&(h|=i.constants.O_CREAT,m|=EZ),0!=(2&t)&&(h|=i.constants.O_DIRECTORY),0!=(4&t)&&(h|=i.constants.O_EXCL),0!=(8&t)&&(h|=i.constants.O_TRUNC,m|=_Z),0!=(1&l)&&(h|=i.constants.O_APPEND),0!=(2&l)&&(i.constants.O_DSYNC?h|=i.constants.O_DSYNC:h|=i.constants.O_SYNC,Z|=OZ),0!=(4&l)&&(h|=i.constants.O_NONBLOCK),0!=(8&l)&&(i.constants.O_RSYNC?h|=i.constants.O_RSYNC:h|=i.constants.O_SYNC,Z|=kZ),0!=(16&l)&&(h|=i.constants.O_SYNC,Z|=kZ),d&&0==(h&(i.constants.O_APPEND|i.constants.O_TRUNC))&&(Z|=QZ),this.refreshMemory();const u=nt.Buffer.from(this.memory.buffer,A,C).toString(),G=e.resolve(c.path,u);if(e.relative(c.path,G).startsWith(".."))return 76;let b;try{if(b=i.realpathSync(G),e.relative(c.path,b).startsWith(".."))return 76}catch(dD){const I=dD;if(!I||!I.code||"ENOENT"!==I.code)throw dD;b=G}const p=i.openSync(b,h),B=[...this.FD_MAP.keys()].reverse()[0]+1;return this.FD_MAP.set(B,{real:p,filetype:void 0,rights:{base:m,inheriting:Z},path:b}),Ku(this,B),this.view.setUint32(r,B,!0),0})),path_readlink:Su(((g,I,A,C,t,o)=>{const s=n(g,PZ);if(!s.path)return XZ;this.refreshMemory();const l=nt.Buffer.from(this.memory.buffer,I,A).toString(),r=e.resolve(s.path,l),c=i.readlinkSync(r),a=nt.Buffer.from(this.memory.buffer).write(c,C,t);return this.view.setUint32(o,a,!0),0})),path_remove_directory:Su(((g,I,A)=>{const C=n(g,Cu);if(!C.path)return XZ;this.refreshMemory();const t=nt.Buffer.from(this.memory.buffer,I,A).toString();return i.rmdirSync(e.resolve(C.path,t)),0})),path_rename:Su(((g,I,A,C,t,o)=>{const s=n(g,UZ),l=n(C,xZ);if(!s.path||!l.path)return XZ;this.refreshMemory();const r=nt.Buffer.from(this.memory.buffer,I,A).toString(),c=nt.Buffer.from(this.memory.buffer,t,o).toString();return i.renameSync(e.resolve(s.path,r),e.resolve(l.path,c)),0})),path_symlink:Su(((g,I,A,C,t)=>{const o=n(A,Au);if(!o.path)return XZ;this.refreshMemory();const s=nt.Buffer.from(this.memory.buffer,g,I).toString(),l=nt.Buffer.from(this.memory.buffer,C,t).toString();return i.symlinkSync(s,e.resolve(o.path,l)),0})),path_unlink_file:Su(((g,I,A)=>{const C=n(g,tu);if(!C.path)return XZ;this.refreshMemory();const t=nt.Buffer.from(this.memory.buffer,I,A).toString();return i.unlinkSync(e.resolve(C.path,t)),0})),poll_oneoff:(g,I,A,C)=>{let i=0,e=0;this.refreshMemory();for(let t=0;t<A;t+=1){const A=this.view.getBigUint64(g,!0);g+=8;const C=this.view.getUint8(g);switch(g+=1,C){case 0:{g+=7,g+=8;const C=this.view.getUint32(g,!0);g+=4,g+=4;const t=this.view.getBigUint64(g,!0);g+=8,g+=8;const o=this.view.getUint16(g,!0);g+=2,g+=6;const n=1===o;let s=0;const r=l(C),c=r&&tt(r);if(null===c)s=XZ;else{const g=n?t:c+t;e=g>e?g:e}this.view.setBigUint64(I,A,!0),I+=8,this.view.setUint16(I,s,!0),I+=2,this.view.setUint8(I,0),I+=1,I+=5,i+=1;break}case 1:case 2:g+=3,g+=4,this.view.setBigUint64(I,A,!0),I+=8,this.view.setUint16(I,VZ,!0),I+=2,this.view.setUint8(I,C),I+=1,I+=5,i+=1;break;default:return XZ}}for(this.view.setUint32(C,i,!0);t.hrtime()<e;);return 0},proc_exit:g=>(t.exit(g),0),proc_raise:g=>g in pu?(t.kill(pu[g]),0):XZ,random_get:(g,I)=>(this.refreshMemory(),t.randomFillSync(new Uint8Array(this.memory.buffer),g,I),0),sched_yield:()=>0,sock_recv:()=>VZ,sock_send:()=>VZ,sock_shutdown:()=>VZ}}refreshMemory(){this.view&&0!==this.view.buffer.byteLength||(this.view=new et(this.memory.buffer))}setMemory(g){this.memory=g}start(g){const I=g.exports;if(null===I||"object"!=typeof I)throw new Error(`instance.exports must be an Object. Received ${I}.`);const{memory:A}=I;if(!(A instanceof WebAssembly.Memory))throw new Error(`instance.exports.memory must be a WebAssembly.Memory. Recceived ${A}.`);this.setMemory(A),I._start&&I._start()}getImportNamespace(g){let I=null;for(let A of WebAssembly.Module.imports(g))if("function"===A.kind&&A.module.startsWith("wasi_"))if(I){if(I!==A.module)throw new Error("Multiple namespaces detected.")}else I=A.module;return I}getImports(g){switch(this.getImportNamespace(g)){case"wasi_unstable":return{wasi_unstable:this.wasiImport};case"wasi_snapshot_preview1":return{wasi_snapshot_preview1:this.wasiImport};default:throw new Error("Can't detect a WASI namespace for the WebAssembly Module")}}}Yu.defaultBindings=fZ;const Xu=Yu;class Vu{constructor(g){__publicField(this,"options"),this.options=g}async run(g){throw new Error("run not implemented by the Command subclass")}}class Ou extends Vu{constructor(g){if(super(g),!g.module)throw new Error("Did not find a WebAssembly.Module for the WASI Command")}async run(g){const I={preopens:__spreadValues({".":".","/":"/"},this.options.preopens||{}),env:this.options.env,args:this.options.args,bindings:__spreadProps(__spreadValues({},Xu.defaultBindings),{fs:g.fs})},A=new Xu(I);let C=this.options.module,t=await WebAssembly.instantiate(C,__spreadValues({},A.getImports(C)));A.start(t)}}class Ru extends Vu{constructor(g){if(super(g),__publicField(this,"callback"),__publicField(this,"stdoutCallback"),!g.callback)throw new Error("The Command Options provided are not for a Callback Command");this.callback=g.callback}async run(g){let I=await Promise.resolve(this.callback(this.options,g));"string"==typeof I&&g.fs.writeFileSync("/dev/stdout",(new TextEncoder).encode(I+"\n"))}}class Qu extends Error{constructor(){super(...arguments),__publicField(this,"user",!0)}}class Hu{constructor(g,I,A,C,t,i,e,o,n){let s;__publicField(this,"commandOptions"),__publicField(this,"wasmFs"),__publicField(this,"originalWasmFsJson"),__publicField(this,"stdoutCallback"),__publicField(this,"stderrCallback"),__publicField(this,"endCallback"),__publicField(this,"errorCallback"),__publicField(this,"sharedStdin"),__publicField(this,"startStdinReadCallback"),__publicField(this,"serviceWorkerBaseURL"),__publicField(this,"pipedStdin"),__publicField(this,"stdinPrompt",""),__publicField(this,"readStdinCounter"),__publicField(this,"command"),this.commandOptions=g,this.wasmFs=new mC,this.wasmFs.fromJSON(I),this.originalWasmFsJson=I,this.stdoutCallback=A,this.stderrCallback=C,this.endCallback=t,this.errorCallback=i,o&&(s=new Int32Array(o)),g.module?this.command=new Ou(g):this.command=new Ru(g),this.wasmFs.volume.fds[0].node.read=this.stdinRead.bind(this),this.wasmFs.volume.fds[1].node.write=this.stdoutWrite.bind(this),this.wasmFs.volume.fds[2].node.write=this.stderrWrite.bind(this);const l=this.wasmFs.volume.openSync("/dev/tty","w+");this.wasmFs.volume.fds[l].node.read=this.stdinRead.bind(this),this.wasmFs.volume.fds[l].node.write=this.stdoutWrite.bind(this),this.sharedStdin=s,this.startStdinReadCallback=e,this.serviceWorkerBaseURL=n,this.readStdinCounter=0,this.pipedStdin=""}async start(g){const I=g=>{setTimeout((()=>{this.endCallback(this.wasmFs.toJSON(),g)}),50)};try{g&&(this.pipedStdin=new TextDecoder("utf-8").decode(g)),await this.command.run(this.wasmFs),I(0)}catch(dD){if(dD instanceof SZ)return void I(dD.code||0);if(dD instanceof Qu)return void I(0);dD instanceof KZ?this.errorCallback(`Killed with signal: ${dD.signal}`,this.wasmFs.toJSON(),!1):this.errorCallback(dD.toString(),this.wasmFs.toJSON(),!1)}}stdoutWrite(g){this.stdoutCallback&&this.stdoutCallback(g);let I=new TextDecoder("utf-8").decode(g).split("\n");return I.length>0?this.stdinPrompt=(g=>{const I=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:[a-zA-Z\\d]*(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|"),A=new RegExp(I,"g");return g.replace(A,"")})(I[I.length-1]):this.stdinPrompt="",g.length}stderrWrite(g){return this.stderrCallback&&this.stderrCallback(g),g.length}stdinRead(g){if(this.readStdinCounter%2!=0)return this.readStdinCounter++,0;let I=null;if(this.pipedStdin)I=this.pipedStdin,this.pipedStdin="",this.readStdinCounter++;else if(this.sharedStdin&&this.startStdinReadCallback){this.startStdinReadCallback(),Atomics.wait(this.sharedStdin,0,-1);const g=this.sharedStdin[0];this.sharedStdin[0]=-1;const A=new Uint8Array(g);for(let I=0;I<g;I++)A[I]=this.sharedStdin[1+I];I=new TextDecoder("utf-8").decode(A)}else if(this.serviceWorkerBaseURL&&this.startStdinReadCallback)this.startStdinReadCallback(),I=function(g,I){let A=performance.now();for(;;){const C=performance.now();let t=performance.now();for(;t-C<250;)t=performance.now();if(self.importScripts(`${g}/runno-message?id=${I}`),null!==self[I]){const g=self[I];return delete self[I],g}if(t-A>3e5)throw new Error("Timeout waiting")}}(this.serviceWorkerBaseURL,"stdin");else{if(I=prompt(this.stdinPrompt),null===I){this.stdoutCallback&&this.stdoutCallback((new TextEncoder).encode("\n"));throw new Qu("Process killed by user")}I+="\n",this.stdoutCallback&&this.stdoutCallback((new TextEncoder).encode(I))}if(!I)return 0;const A=(new TextEncoder).encode(I);for(let C=0;C<A.length;++C)g[C]=A[C];return A.length}}function ku(g){return"worker"in g}let Ju;class vu{constructor(g,I,A,C,t){var i,e;__publicField(this,"commandOptionsForProcessesToRun"),__publicField(this,"spawnedProcessObjects"),__publicField(this,"spawnedProcesses"),__publicField(this,"pipedStdinDataForNextProcess"),__publicField(this,"isRunning"),__publicField(this,"supportsSharedArrayBuffer"),__publicField(this,"supportsServiceWorker"),__publicField(this,"wasmTerminalConfig"),__publicField(this,"commandString"),__publicField(this,"commandStartReadCallback"),__publicField(this,"commandEndCallback"),__publicField(this,"wasmTty"),__publicField(this,"stdin"),__publicField(this,"stdout"),__publicField(this,"stderr"),__publicField(this,"tty"),this.stdin="",this.stdout="",this.stderr="",this.tty="",this.wasmTerminalConfig=g,this.commandString=I,this.commandStartReadCallback=A,this.commandEndCallback=C,t&&(this.wasmTty=t),this.commandOptionsForProcessesToRun=[],this.spawnedProcessObjects=[],this.spawnedProcesses=0,this.pipedStdinDataForNextProcess=new Uint8Array,this.isRunning=!1,this.supportsSharedArrayBuffer=this.wasmTerminalConfig.processWorkerUrl&&window.SharedArrayBuffer&&window.Atomics,this.supportsServiceWorker="activated"===(null==(e=null==(i=navigator.serviceWorker)?void 0:i.controller)?void 0:e.state)}async runCommand(){const g=qC(this.commandString);try{if(g.length>1)throw new Error("Only one command permitted");if("command"!==g[0].type)throw new Error("Only commands allowed");this.commandOptionsForProcessesToRun=await this._getCommandOptionsFromAST(g[0],this.wasmTerminalConfig,this.wasmTty)}catch(I){return this.wasmTty&&(this.wasmTty.print("\r\n"),this.wasmTty.print(`wasm shell: parse error (${I})\r\n`)),console.error(I),void this.commandEndCallback({stdin:this.stdin,stdout:this.stdout,stderr:this.stderr,tty:this.tty,fs:{},exit:1})}this.isRunning=!0,await this._tryToSpawnProcess(0)}kill(){this.isRunning&&(this.spawnedProcessObjects.forEach((g=>{ku(g)&&g.worker.terminate()})),this.commandOptionsForProcessesToRun=[],this.spawnedProcessObjects=[],this.isRunning=!1,this.commandEndCallback({stdin:this.stdin,stdout:this.stdout,stderr:this.stderr,tty:this.tty,fs:{},exit:1}))}_addStdinToSharedStdin(g,I){const A=this.spawnedProcessObjects[I];if(!A)return;if(!ku(A)||!A.sharedStdin)return;const C=A.sharedStdin;let t=1;C[0]>0&&(t=C[0]),g.forEach(((g,I)=>{C[t+I]=g})),C[0]=t+g.length-1,Atomics.notify(C,0,1);const i=(new TextDecoder).decode(g);this.stdin+=i,this.tty+=i}_addStdinToServiceWorkerStdin(g){g&&fetch("/runno-message?id=stdin",{method:"POST",body:JSON.stringify(g)})}async _tryToSpawnProcess(g){g+1>this.spawnedProcesses&&this.spawnedProcessObjects.length<2&&g<this.commandOptionsForProcessesToRun.length&&(this.spawnedProcesses++,await this._spawnProcess(g))}async _spawnProcess(g){let I;I=this.commandOptionsForProcessesToRun[g].module&&(this.supportsSharedArrayBuffer||this.supportsServiceWorker)?await this._spawnProcessAsWorker(g):await this._spawnProcessAsService(g),this.spawnedProcessObjects.push(I),I.process.start(this.pipedStdinDataForNextProcess.length>0?this.pipedStdinDataForNextProcess:void 0),this.pipedStdinDataForNextProcess.length>0&&(this.pipedStdinDataForNextProcess=new Uint8Array);let A=!1;this.commandOptionsForProcessesToRun.length>g+1&&(A=void 0!==this.commandOptionsForProcessesToRun[g+1].callback),A||this._tryToSpawnProcess(g+1)}async _spawnProcessAsWorker(g){if(!this.wasmTerminalConfig.processWorkerUrl)throw new Error("Terminal Config missing the Process Worker URL");let I=this.wasmTerminalConfig.processWorkerUrl;const A=await this._getBlobUrlForProcessWorker(I,this.wasmTty),C=new Worker(A),t=NC(C);let i,e,o;this.supportsSharedArrayBuffer&&(i=new SharedArrayBuffer(8192),e=new Int32Array(i),e[0]=-1),this.supportsServiceWorker&&(o=window.location.origin);const n=this.wasmTerminalConfig.wasmFs.toJSON();return{process:await new t(this.commandOptionsForProcessesToRun[g],n,zC(this._processStdoutCallback.bind(this,{commandOptionIndex:g,sync:!1})),zC(this._processStderrCallback.bind(this,{commandOptionIndex:g,sync:!1})),zC(this._processEndCallback.bind(this,{commandOptionIndex:g,processWorker:C})),zC(this._processErrorCallback.bind(this,{commandOptionIndex:g})),zC(this._processStartStdinReadCallback.bind(this)),i,o),commandOptionIndex:g,worker:C,sharedStdin:e}}async _spawnProcessAsService(g){const I=this.wasmTerminalConfig.wasmFs.toJSON();return{process:new Hu(this.commandOptionsForProcessesToRun[g],I,this._processStdoutCallback.bind(this,{commandOptionIndex:g,sync:!0}),this._processStderrCallback.bind(this,{commandOptionIndex:g,sync:!0}),this._processEndCallback.bind(this,{commandOptionIndex:g}),this._processErrorCallback.bind(this,{commandOptionIndex:g})),commandOptionIndex:g}}_processStdoutCallback({commandOptionIndex:g,sync:I},A){let C=new TextDecoder("utf-8").decode(A);if(this.stdout+=C,this.tty+=C,this.isRunning)if(g<this.commandOptionsForProcessesToRun.length-1)if(this.supportsSharedArrayBuffer&&this.spawnedProcessObjects.length>1&&this.spawnedProcessObjects[this.spawnedProcessObjects.length-1].commandOptionIndex>g)this._addStdinToSharedStdin(A,1);else{const g=new Uint8Array(A.length+this.pipedStdinDataForNextProcess.length);g.set(this.pipedStdinDataForNextProcess),g.set(A,this.pipedStdinDataForNextProcess.length),this.pipedStdinDataForNextProcess=g}else this.wasmTty&&this.wasmTty.print(C,I)}_processStderrCallback({commandOptionIndex:g,sync:I},A){let C=new TextDecoder("utf-8").decode(A);if(this.stderr+=C,this.tty+=C,this.isRunning)if(g<this.commandOptionsForProcessesToRun.length-1)if(this.supportsSharedArrayBuffer&&this.spawnedProcessObjects.length>1&&this.spawnedProcessObjects[this.spawnedProcessObjects.length-1].commandOptionIndex>g)this._addStdinToSharedStdin(A,1);else{const g=new Uint8Array(A.length+this.pipedStdinDataForNextProcess.length);g.set(this.pipedStdinDataForNextProcess),g.set(A,this.pipedStdinDataForNextProcess.length),this.pipedStdinDataForNextProcess=g}else this.wasmTty&&this.wasmTty.print(C,I)}_processEndCallback(g,I,A){const{commandOptionIndex:C,processWorker:t}=g;t&&t.terminate(),I&&this.wasmTerminalConfig.wasmFs.fromJSON(I),C<this.commandOptionsForProcessesToRun.length-1?this._tryToSpawnProcess(C+1):(this.isRunning=!1,this.commandEndCallback({stdin:this.stdin,stdout:this.stdout,stderr:this.stderr,tty:this.tty,fs:I,exit:A})),this.spawnedProcessObjects.shift()}_processErrorCallback(g,I,A){var C,t;const{commandOptionIndex:i}=g;console.error(`${this.commandOptionsForProcessesToRun[i].args[0]}`,I),A&&this.wasmTerminalConfig.wasmFs.fromJSON(A),I.includes("call stack")?null==(C=this.wasmTty)||C.print(`Error in runtime "${I}". If you're using Safari try running again.`):null==(t=this.wasmTty)||t.print(`Error in runtime "${I}".`),this.kill(),this.commandEndCallback({stdin:this.stdin,stdout:this.stdout,stderr:this.stderr,tty:this.tty,fs:A,exit:1})}_processStartStdinReadCallback(){this.commandStartReadCallback().then((g=>{if(this.supportsSharedArrayBuffer){const I=(new TextEncoder).encode(g+"\n");this._addStdinToSharedStdin(I,0)}else this._addStdinToServiceWorkerStdin(g+"\n")}))}async _getBlobUrlForProcessWorker(g,I){if(Ju)return Ju;I&&I.printStatus("[INFO] Downloading the process Web Worker (This happens once)...");const A=await Promise.all([fetch(g).then((g=>g.text())),new Promise((g=>setTimeout(g,500)))]).then((g=>g[0]));I&&I.clearStatus();const C=new Blob([A]);return Ju=window.URL.createObjectURL(C),Ju}async _getCommandOptionsFromAST(g,I,A){let C=[],t=g.command.value,i=[t,...g.args.map((g=>g.value))];const e=Object.entries(g.env).map((([g,I])=>[g,I.value]));let o={};if(e.forEach((([g,I])=>{o[g]=I})),A){const{rows:g,cols:I}=A.getTermSize();o.LINES=g,o.COLUMNS=I}await(async()=>{if(g.redirects){let t=g.redirects[0];if(t&&"pipe"===t.type){const g=await this._getCommandOptionsFromAST(t.command,I,A);C=C.concat(g)}}})(),A&&A.printStatus(`[INFO] Fetching the command ${t} ...`);const n=await I.fetchCommand({args:i,env:o});if(A&&A.clearStatus(),n instanceof Uint8Array){const g=await WebAssembly.compile(n);C.unshift({args:i,env:o,module:g})}else(s=n)&&("[object Function]"===Object.prototype.toString.call(s)||"function"==typeof s||s instanceof Function)?C.unshift({args:i,env:o,callback:n}):C.unshift(n);var s;return C}}class Du{constructor(g,I,A={}){__publicField(this,"wasmTerminalConfig"),__publicField(this,"wasmTty"),__publicField(this,"history"),__publicField(this,"commandRunner"),__publicField(this,"maxAutocompleteEntries"),__publicField(this,"disablePrompt"),__publicField(this,"_autocompleteHandlers"),__publicField(this,"_active"),__publicField(this,"_activePrompt"),__publicField(this,"_activeCharPrompt"),__publicField(this,"handleCursorMove",(g=>{if(g>0){const I=Math.min(g,this.wasmTty.getInput().length-this.wasmTty.getCursor());this.wasmTty.setCursorDirectly(this.wasmTty.getCursor()+I)}else if(g<0){const I=Math.max(g,-this.wasmTty.getCursor());this.wasmTty.setCursorDirectly(this.wasmTty.getCursor()+I)}})),__publicField(this,"handleCursorErase",(g=>{if(g){if(this.wasmTty.getCursor()<=0)return;const g=this.wasmTty.getInput().substr(0,this.wasmTty.getCursor()-1)+this.wasmTty.getInput().substr(this.wasmTty.getCursor());this.wasmTty.clearInput(),this.wasmTty.setCursorDirectly(this.wasmTty.getCursor()-1),this.wasmTty.setInput(g,!0)}else{const g=this.wasmTty.getInput().substr(0,this.wasmTty.getCursor())+this.wasmTty.getInput().substr(this.wasmTty.getCursor()+1);this.wasmTty.setInput(g)}})),__publicField(this,"handleCursorInsert",(g=>{const I=this.wasmTty.getInput().substr(0,this.wasmTty.getCursor())+g+this.wasmTty.getInput().substr(this.wasmTty.getCursor());this.wasmTty.setCursorDirectly(this.wasmTty.getCursor()+g.length),this.wasmTty.setInput(I)})),__publicField(this,"handleReadComplete",(async()=>{this._activePrompt&&this._activePrompt.resolve&&(this._activePrompt.resolve(this.wasmTty.getInput()),this._activePrompt=void 0),this.wasmTty.print("\r\n"),this._active=!1})),__publicField(this,"handleTermData",(g=>{if(this._active||""===g){if(this.wasmTty.getFirstInit()&&this._activePrompt){let g=this.wasmTty.getBuffer().getLine(this.wasmTty.getBuffer().cursorY+this.wasmTty.getBuffer().baseY).translateToString(!1,0,this.wasmTty.getBuffer().cursorX);this._activePrompt.promptPrefix=g,this.wasmTty.setPromptPrefix(g),this.wasmTty.setFirstInit(!1)}if(this._activeCharPrompt&&this._activeCharPrompt.resolve)return this._activeCharPrompt.resolve(g),this._activeCharPrompt=void 0,void this.wasmTty.print("\r\n");if(g.length>3&&27!==g.charCodeAt(0)){const I=g.replace(/[\r\n]+/g,"\r");Array.from(I).forEach((g=>this.handleData(g)))}else this.handleData(g)}})),__publicField(this,"handleData",(g=>{if(!this._active&&""!==g)return;const I=g.charCodeAt(0);let A;if(27===I)switch(g.substr(1)){case"[A":if(this.history){let g=this.history.getPrevious();g&&(this.wasmTty.setInput(g),this.wasmTty.setCursor(g.length))}break;case"[B":if(this.history){let g=this.history.getNext();g||(g=""),this.wasmTty.setInput(g),this.wasmTty.setCursor(g.length)}break;case"[D":this.handleCursorMove(-1);break;case"[C":this.handleCursorMove(1);break;case"[3~":this.handleCursorErase(!1);break;case"[F":this.wasmTty.setCursor(this.wasmTty.getInput().length);break;case"[H":this.wasmTty.setCursor(0);break;case"b":A=XC(this.wasmTty.getInput(),this.wasmTty.getCursor()),A&&this.wasmTty.setCursor(A);break;case"f":A=function(g,I){const A=YC(g,!1).find((g=>g>I));return void 0===A?g.length:A}(this.wasmTty.getInput(),this.wasmTty.getCursor()),A&&this.wasmTty.setCursor(A);break;case"":A=XC(this.wasmTty.getInput(),this.wasmTty.getCursor()),A&&(this.wasmTty.setInput(this.wasmTty.getInput().substr(0,A)+this.wasmTty.getInput().substr(this.wasmTty.getCursor())),this.wasmTty.setCursor(A))}else if(I<32||127===I)switch(g){case"\r":case"\n":case"\r":this.handleReadComplete();break;case"":case"\b":case"":this.handleCursorErase(!0);break;case"\t":if(this._autocompleteHandlers.length>0){const g=this.wasmTty.getInput().substr(0,this.wasmTty.getCursor()),I=VC(g),A=function(g,I){const A=fC(I);let C=A.length-1,t=A[C]||"";return""===I.trim()?(C=0,t=""):VC(I)&&(C+=1,t=""),g.reduce(((g,I)=>{try{let t=I(C,A);return g.concat(t)}catch(dD){return console.error("Auto-complete error:",dD),g}}),[]).filter((g=>g.startsWith(t)))}(this._autocompleteHandlers,g);if(A.sort(),0===A.length)I||this.handleCursorInsert(" ");else if(1===A.length){const I=""===(C=g).trim()||VC(C)?"":fC(C).pop()||"";this.handleCursorInsert(A[0].substr(I.length)+" ")}else A.length<=this.maxAutocompleteEntries?this.printAndRestartPrompt((()=>{this.wasmTty.printWide(A)})):this.printAndRestartPrompt((()=>this.wasmTty.readChar(`Display all ${A.length} possibilities? (y or n)`).promise.then((g=>{"y"!==g&&"Y"!==g||this.wasmTty.printWide(A)}))))}else this.handleCursorInsert("    ");break;case"":this.wasmTty.setCursor(0);break;case"":this.handleCursorMove(-1);break;case"":case"":const g=this.wasmTty.getInput();this.wasmTty.setCursor(g.length),this.wasmTty.setInput(""),this.wasmTty.setCursorDirectly(0),this.wasmTty.print(g+"^C\r\n"),this.history&&this.history.rewind(),this.commandRunner&&(this.commandRunner.kill(),this.commandRunner=void 0),this.resolveActiveRead();break;case"":this.wasmTty.setCursor(this.wasmTty.getInput().length);break;case"":this.handleCursorMove(1);break;case"":this.history&&this.history.rewind(),this.wasmTty.setInput("");break;case"\v":this.wasmTty.setInput(this.wasmTty.getInput().substring(0,this.wasmTty.getCursor())),this.wasmTty.setCursor(this.wasmTty.getInput().length);break;case"\f":this.wasmTty.clearTty(),this.wasmTty.print(`$ ${this.wasmTty.getInput()}`);break;case"":if(this.history){let g=this.history.getNext();g||(g=""),this.wasmTty.setInput(g),this.wasmTty.setCursor(g.length)}break;case"":if(this.history){let g=this.history.getPrevious();g&&(this.wasmTty.setInput(g),this.wasmTty.setCursor(g.length))}break;case"":this.wasmTty.setInput(this.wasmTty.getInput().substring(this.wasmTty.getCursor())),this.wasmTty.setCursor(0)}else this.handleCursorInsert(g);var C}));const C=__spreadValues({historySize:10,maxAutocompleteEntries:100,disablePrompt:!1},A);this.wasmTerminalConfig=g,this.wasmTty=I,this.history=new OC(C.historySize),this.commandRunner=void 0,this.maxAutocompleteEntries=C.maxAutocompleteEntries,this.disablePrompt=C.disablePrompt,this._autocompleteHandlers=[()=>this.history.entries],this._active=!1}async prompt(){if(!this._activePrompt&&!this.disablePrompt)try{this._activePrompt=this.wasmTty.read("$ "),this._active=!0;let g=await this._activePrompt.promise;if(this.commandRunner&&this.commandRunner.kill(),""===g)return void this.prompt();if("!!"===g){if(!(this.history&&this.history.entries.length>0))throw new Error("No Previous command in History");g=this.history.entries[this.history.entries.length-1]}else this.history&&this.history.push(this.wasmTty.getInput());this.commandRunner=this.getCommandRunner(g),await this.commandRunner.runCommand()}catch(dD){this.wasmTty.println(`${dD}`),this.prompt()}}runCommand(g){return new Promise((I=>{this.commandRunner=new vu(this.wasmTerminalConfig,g,(()=>(this._activePrompt=this.wasmTty.read(""),this._active=!0,this._activePrompt.promise)),(g=>{I(g),setTimeout((()=>{this.prompt()}))}),this.wasmTty),this.commandRunner.runCommand()}))}isPrompting(){return this._active}getCommandRunner(g){return new vu(this.wasmTerminalConfig,g,(async()=>(this._activePrompt=this.wasmTty.read(""),this._active=!0,this._activePrompt.promise)),(()=>{setTimeout((()=>{this.prompt()}))}),this.wasmTty)}printAndRestartPrompt(g){this.wasmTty.setCursor(this.wasmTty.getInput().length),this.wasmTty.print("\r\n");const I=()=>{this.wasmTty.setCursor(this.wasmTty.getCursor()),this.wasmTty.setInput(this.wasmTty.getInput())},A=g();A?A.then(I):I()}resolveActiveRead(){this._activePrompt&&this._activePrompt.resolve&&(this._activePrompt.resolve(""),this._activePrompt=void 0),this._activeCharPrompt&&this._activeCharPrompt.resolve&&(this._activeCharPrompt.resolve(""),this._activeCharPrompt=void 0),this._active=!1}rejectActiveRead(g="aborted"){(this._activePrompt||this._activeCharPrompt)&&this.wasmTty.print("\r\n"),this._activePrompt&&this._activePrompt.reject&&(this._activePrompt.reject(new Error(g)),this._activePrompt=void 0),this._activeCharPrompt&&this._activeCharPrompt.reject&&(this._activeCharPrompt.reject(new Error(g)),this._activeCharPrompt=void 0),this._active=!1}}const Mu=i||t.Terminal,Nu=["click","tap"];class Eu{constructor(g){__publicField(this,"xterm"),__publicField(this,"container"),__publicField(this,"webLinksAddon"),__publicField(this,"fitAddon"),__publicField(this,"wasmTerminalConfig"),__publicField(this,"wasmTty"),__publicField(this,"wasmShell"),__publicField(this,"pasteEvent"),__publicField(this,"resizeEvent"),__publicField(this,"dataEvent"),__publicField(this,"isOpen"),__publicField(this,"pendingPrintOnOpen"),__publicField(this,"handleTermResize",(g=>{const{rows:I,cols:A}=g;this.wasmTty.clearInput(),this.wasmTty.setTermSize(A,I),this.wasmTty.setInput(this.wasmTty.getInput(),!0)})),this.wasmTerminalConfig=new ZC(g),this.xterm=new Mu({}),this.resizeEvent=this.xterm.onResize(this.handleTermResize),this.xterm.onKey((g=>{" "===g.key&&g.domEvent.preventDefault()})),this.container=void 0,this.webLinksAddon=new s,this.fitAddon=new o,this.xterm.loadAddon(this.fitAddon),this.xterm.loadAddon(this.webLinksAddon),this.wasmTerminalConfig=new ZC(g),this.wasmTty=new bC(this.xterm),this.wasmShell=new Du(this.wasmTerminalConfig,this.wasmTty,{disablePrompt:!0}),this.dataEvent=this.xterm.onData(this.wasmShell.handleTermData),this.isOpen=!1,this.pendingPrintOnOpen=""}open(g){const I=this.focus.bind(this);void 0!==this.container&&Nu.forEach((g=>{this.container.removeEventListener(g,I)})),this.container=g,this.xterm.open(g),this.isOpen=!0,setTimeout((()=>{void 0!==this.container&&Nu.forEach((g=>{this.container.addEventListener(g,I)})),this.pendingPrintOnOpen&&(this.wasmTty.print(this.pendingPrintOnOpen+"\n"),this.pendingPrintOnOpen=""),this.wasmShell.prompt()}))}fit(){this.fitAddon.fit()}clear(){this.xterm.clear()}focus(){this.xterm.focus()}print(g,I){g=g.replace(/\n\n/g,"\n \n"),this.isOpen?this.wasmShell.isPrompting()?this.wasmShell.printAndRestartPrompt((()=>{this.wasmTty.print(g+"\n",I)})):this.wasmTty.print(g,I):this.pendingPrintOnOpen?this.pendingPrintOnOpen+=g:this.pendingPrintOnOpen=g}runCommand(g){this.wasmShell.isPrompting()&&(this.wasmTty.setInput(g),this.wasmShell.handleReadComplete())}runCommandDirect(g){return this.wasmShell.runCommand(g)}kill(){var g;return null==(g=this.wasmShell.commandRunner)?void 0:g.kill()}destroy(){this.xterm.dispose(),delete this.xterm}onPaste(g){this.wasmTty.print(g)}}var Fu="data:application/javascript;base64,KGZ1bmN0aW9uICgpIHsKICAndXNlIHN0cmljdCc7CgogIC8qKg0KICAgKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLg0KICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsNCiAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLg0KICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAgICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMA0KICAgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlDQogICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsDQogICAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLg0KICAgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kDQogICAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLg0KICAgKi8NCiAgY29uc3QgcHJveHlNYXJrZXIgPSBTeW1ib2woIkNvbWxpbmsucHJveHkiKTsNCiAgY29uc3QgY3JlYXRlRW5kcG9pbnQgPSBTeW1ib2woIkNvbWxpbmsuZW5kcG9pbnQiKTsNCiAgY29uc3QgcmVsZWFzZVByb3h5ID0gU3ltYm9sKCJDb21saW5rLnJlbGVhc2VQcm94eSIpOw0KICBjb25zdCB0aHJvd01hcmtlciA9IFN5bWJvbCgiQ29tbGluay50aHJvd24iKTsNCiAgY29uc3QgaXNPYmplY3QgPSAodmFsKSA9PiAodHlwZW9mIHZhbCA9PT0gIm9iamVjdCIgJiYgdmFsICE9PSBudWxsKSB8fCB0eXBlb2YgdmFsID09PSAiZnVuY3Rpb24iOw0KICAvKioNCiAgICogSW50ZXJuYWwgdHJhbnNmZXIgaGFuZGxlIHRvIGhhbmRsZSBvYmplY3RzIG1hcmtlZCB0byBwcm94eS4NCiAgICovDQogIGNvbnN0IHByb3h5VHJhbnNmZXJIYW5kbGVyID0gew0KICAgICAgY2FuSGFuZGxlOiAodmFsKSA9PiBpc09iamVjdCh2YWwpICYmIHZhbFtwcm94eU1hcmtlcl0sDQogICAgICBzZXJpYWxpemUob2JqKSB7DQogICAgICAgICAgY29uc3QgeyBwb3J0MSwgcG9ydDIgfSA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpOw0KICAgICAgICAgIGV4cG9zZShvYmosIHBvcnQxKTsNCiAgICAgICAgICByZXR1cm4gW3BvcnQyLCBbcG9ydDJdXTsNCiAgICAgIH0sDQogICAgICBkZXNlcmlhbGl6ZShwb3J0KSB7DQogICAgICAgICAgcG9ydC5zdGFydCgpOw0KICAgICAgICAgIHJldHVybiB3cmFwJDEocG9ydCk7DQogICAgICB9LA0KICB9Ow0KICAvKioNCiAgICogSW50ZXJuYWwgdHJhbnNmZXIgaGFuZGxlciB0byBoYW5kbGUgdGhyb3duIGV4Y2VwdGlvbnMuDQogICAqLw0KICBjb25zdCB0aHJvd1RyYW5zZmVySGFuZGxlciA9IHsNCiAgICAgIGNhbkhhbmRsZTogKHZhbHVlKSA9PiBpc09iamVjdCh2YWx1ZSkgJiYgdGhyb3dNYXJrZXIgaW4gdmFsdWUsDQogICAgICBzZXJpYWxpemUoeyB2YWx1ZSB9KSB7DQogICAgICAgICAgbGV0IHNlcmlhbGl6ZWQ7DQogICAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgRXJyb3IpIHsNCiAgICAgICAgICAgICAgc2VyaWFsaXplZCA9IHsNCiAgICAgICAgICAgICAgICAgIGlzRXJyb3I6IHRydWUsDQogICAgICAgICAgICAgICAgICB2YWx1ZTogew0KICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHZhbHVlLm1lc3NhZ2UsDQogICAgICAgICAgICAgICAgICAgICAgbmFtZTogdmFsdWUubmFtZSwNCiAgICAgICAgICAgICAgICAgICAgICBzdGFjazogdmFsdWUuc3RhY2ssDQogICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICB9Ow0KICAgICAgICAgIH0NCiAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgc2VyaWFsaXplZCA9IHsgaXNFcnJvcjogZmFsc2UsIHZhbHVlIH07DQogICAgICAgICAgfQ0KICAgICAgICAgIHJldHVybiBbc2VyaWFsaXplZCwgW11dOw0KICAgICAgfSwNCiAgICAgIGRlc2VyaWFsaXplKHNlcmlhbGl6ZWQpIHsNCiAgICAgICAgICBpZiAoc2VyaWFsaXplZC5pc0Vycm9yKSB7DQogICAgICAgICAgICAgIHRocm93IE9iamVjdC5hc3NpZ24obmV3IEVycm9yKHNlcmlhbGl6ZWQudmFsdWUubWVzc2FnZSksIHNlcmlhbGl6ZWQudmFsdWUpOw0KICAgICAgICAgIH0NCiAgICAgICAgICB0aHJvdyBzZXJpYWxpemVkLnZhbHVlOw0KICAgICAgfSwNCiAgfTsNCiAgLyoqDQogICAqIEFsbG93cyBjdXN0b21pemluZyB0aGUgc2VyaWFsaXphdGlvbiBvZiBjZXJ0YWluIHZhbHVlcy4NCiAgICovDQogIGNvbnN0IHRyYW5zZmVySGFuZGxlcnMgPSBuZXcgTWFwKFsNCiAgICAgIFsicHJveHkiLCBwcm94eVRyYW5zZmVySGFuZGxlcl0sDQogICAgICBbInRocm93IiwgdGhyb3dUcmFuc2ZlckhhbmRsZXJdLA0KICBdKTsNCiAgZnVuY3Rpb24gZXhwb3NlKG9iaiwgZXAgPSBzZWxmKSB7DQogICAgICBlcC5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIiwgZnVuY3Rpb24gY2FsbGJhY2soZXYpIHsNCiAgICAgICAgICBpZiAoIWV2IHx8ICFldi5kYXRhKSB7DQogICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICB9DQogICAgICAgICAgY29uc3QgeyBpZCwgdHlwZSwgcGF0aCB9ID0gew0KICAgICAgICAgICAgICBwYXRoOiBbXSwNCiAgICAgICAgICAgICAgLi4uZXYuZGF0YSwNCiAgICAgICAgICB9Ow0KICAgICAgICAgIGNvbnN0IGFyZ3VtZW50TGlzdCA9IChldi5kYXRhLmFyZ3VtZW50TGlzdCB8fCBbXSkubWFwKGZyb21XaXJlVmFsdWUpOw0KICAgICAgICAgIGxldCByZXR1cm5WYWx1ZTsNCiAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICBjb25zdCBwYXJlbnQgPSBwYXRoLnNsaWNlKDAsIC0xKS5yZWR1Y2UoKG9iaiwgcHJvcCkgPT4gb2JqW3Byb3BdLCBvYmopOw0KICAgICAgICAgICAgICBjb25zdCByYXdWYWx1ZSA9IHBhdGgucmVkdWNlKChvYmosIHByb3ApID0+IG9ialtwcm9wXSwgb2JqKTsNCiAgICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7DQogICAgICAgICAgICAgICAgICBjYXNlICJHRVQiIC8qIEdFVCAqLzoNCiAgICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblZhbHVlID0gcmF3VmFsdWU7DQogICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgY2FzZSAiU0VUIiAvKiBTRVQgKi86DQogICAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRbcGF0aC5zbGljZSgtMSlbMF1dID0gZnJvbVdpcmVWYWx1ZShldi5kYXRhLnZhbHVlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgIGNhc2UgIkFQUExZIiAvKiBBUFBMWSAqLzoNCiAgICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblZhbHVlID0gcmF3VmFsdWUuYXBwbHkocGFyZW50LCBhcmd1bWVudExpc3QpOw0KICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgIGNhc2UgIkNPTlNUUlVDVCIgLyogQ09OU1RSVUNUICovOg0KICAgICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBuZXcgcmF3VmFsdWUoLi4uYXJndW1lbnRMaXN0KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSBwcm94eSh2YWx1ZSk7DQogICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgY2FzZSAiRU5EUE9JTlQiIC8qIEVORFBPSU5UICovOg0KICAgICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBwb3J0MSwgcG9ydDIgfSA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICBleHBvc2Uob2JqLCBwb3J0Mik7DQogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblZhbHVlID0gdHJhbnNmZXIocG9ydDEsIFtwb3J0MV0pOw0KICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgIGNhc2UgIlJFTEVBU0UiIC8qIFJFTEVBU0UgKi86DQogICAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5WYWx1ZSA9IHVuZGVmaW5lZDsNCiAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICBkZWZhdWx0Og0KICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgICBjYXRjaCAodmFsdWUpIHsNCiAgICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSB7IHZhbHVlLCBbdGhyb3dNYXJrZXJdOiAwIH07DQogICAgICAgICAgfQ0KICAgICAgICAgIFByb21pc2UucmVzb2x2ZShyZXR1cm5WYWx1ZSkNCiAgICAgICAgICAgICAgLmNhdGNoKCh2YWx1ZSkgPT4gew0KICAgICAgICAgICAgICByZXR1cm4geyB2YWx1ZSwgW3Rocm93TWFya2VyXTogMCB9Ow0KICAgICAgICAgIH0pDQogICAgICAgICAgICAgIC50aGVuKChyZXR1cm5WYWx1ZSkgPT4gew0KICAgICAgICAgICAgICBjb25zdCBbd2lyZVZhbHVlLCB0cmFuc2ZlcmFibGVzXSA9IHRvV2lyZVZhbHVlKHJldHVyblZhbHVlKTsNCiAgICAgICAgICAgICAgZXAucG9zdE1lc3NhZ2UoeyAuLi53aXJlVmFsdWUsIGlkIH0sIHRyYW5zZmVyYWJsZXMpOw0KICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gIlJFTEVBU0UiIC8qIFJFTEVBU0UgKi8pIHsNCiAgICAgICAgICAgICAgICAgIC8vIGRldGFjaCBhbmQgZGVhY3RpdmUgYWZ0ZXIgc2VuZGluZyByZWxlYXNlIHJlc3BvbnNlIGFib3ZlLg0KICAgICAgICAgICAgICAgICAgZXAucmVtb3ZlRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsIGNhbGxiYWNrKTsNCiAgICAgICAgICAgICAgICAgIGNsb3NlRW5kUG9pbnQoZXApOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgfSk7DQogICAgICB9KTsNCiAgICAgIGlmIChlcC5zdGFydCkgew0KICAgICAgICAgIGVwLnN0YXJ0KCk7DQogICAgICB9DQogIH0NCiAgZnVuY3Rpb24gaXNNZXNzYWdlUG9ydChlbmRwb2ludCkgew0KICAgICAgcmV0dXJuIGVuZHBvaW50LmNvbnN0cnVjdG9yLm5hbWUgPT09ICJNZXNzYWdlUG9ydCI7DQogIH0NCiAgZnVuY3Rpb24gY2xvc2VFbmRQb2ludChlbmRwb2ludCkgew0KICAgICAgaWYgKGlzTWVzc2FnZVBvcnQoZW5kcG9pbnQpKQ0KICAgICAgICAgIGVuZHBvaW50LmNsb3NlKCk7DQogIH0NCiAgZnVuY3Rpb24gd3JhcCQxKGVwLCB0YXJnZXQpIHsNCiAgICAgIHJldHVybiBjcmVhdGVQcm94eShlcCwgW10sIHRhcmdldCk7DQogIH0NCiAgZnVuY3Rpb24gdGhyb3dJZlByb3h5UmVsZWFzZWQoaXNSZWxlYXNlZCkgew0KICAgICAgaWYgKGlzUmVsZWFzZWQpIHsNCiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIlByb3h5IGhhcyBiZWVuIHJlbGVhc2VkIGFuZCBpcyBub3QgdXNlYWJsZSIpOw0KICAgICAgfQ0KICB9DQogIGZ1bmN0aW9uIGNyZWF0ZVByb3h5KGVwLCBwYXRoID0gW10sIHRhcmdldCA9IGZ1bmN0aW9uICgpIHsgfSkgew0KICAgICAgbGV0IGlzUHJveHlSZWxlYXNlZCA9IGZhbHNlOw0KICAgICAgY29uc3QgcHJveHkgPSBuZXcgUHJveHkodGFyZ2V0LCB7DQogICAgICAgICAgZ2V0KF90YXJnZXQsIHByb3ApIHsNCiAgICAgICAgICAgICAgdGhyb3dJZlByb3h5UmVsZWFzZWQoaXNQcm94eVJlbGVhc2VkKTsNCiAgICAgICAgICAgICAgaWYgKHByb3AgPT09IHJlbGVhc2VQcm94eSkgew0KICAgICAgICAgICAgICAgICAgcmV0dXJuICgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVxdWVzdFJlc3BvbnNlTWVzc2FnZShlcCwgew0KICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAiUkVMRUFTRSIgLyogUkVMRUFTRSAqLywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogcGF0aC5tYXAoKHApID0+IHAudG9TdHJpbmcoKSksDQogICAgICAgICAgICAgICAgICAgICAgfSkudGhlbigoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlRW5kUG9pbnQoZXApOw0KICAgICAgICAgICAgICAgICAgICAgICAgICBpc1Byb3h5UmVsZWFzZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICBpZiAocHJvcCA9PT0gInRoZW4iKSB7DQogICAgICAgICAgICAgICAgICBpZiAocGF0aC5sZW5ndGggPT09IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyB0aGVuOiAoKSA9PiBwcm94eSB9Ow0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgY29uc3QgciA9IHJlcXVlc3RSZXNwb25zZU1lc3NhZ2UoZXAsIHsNCiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAiR0VUIiAvKiBHRVQgKi8sDQogICAgICAgICAgICAgICAgICAgICAgcGF0aDogcGF0aC5tYXAoKHApID0+IHAudG9TdHJpbmcoKSksDQogICAgICAgICAgICAgICAgICB9KS50aGVuKGZyb21XaXJlVmFsdWUpOw0KICAgICAgICAgICAgICAgICAgcmV0dXJuIHIudGhlbi5iaW5kKHIpOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIHJldHVybiBjcmVhdGVQcm94eShlcCwgWy4uLnBhdGgsIHByb3BdKTsNCiAgICAgICAgICB9LA0KICAgICAgICAgIHNldChfdGFyZ2V0LCBwcm9wLCByYXdWYWx1ZSkgew0KICAgICAgICAgICAgICB0aHJvd0lmUHJveHlSZWxlYXNlZChpc1Byb3h5UmVsZWFzZWQpOw0KICAgICAgICAgICAgICAvLyBGSVhNRTogRVM2IFByb3h5IEhhbmRsZXIgYHNldGAgbWV0aG9kcyBhcmUgc3VwcG9zZWQgdG8gcmV0dXJuIGENCiAgICAgICAgICAgICAgLy8gYm9vbGVhbi4gVG8gc2hvdyBnb29kIHdpbGwsIHdlIHJldHVybiB0cnVlIGFzeW5jaHJvbm91c2x5IMKvXF8o44OEKV8vwq8NCiAgICAgICAgICAgICAgY29uc3QgW3ZhbHVlLCB0cmFuc2ZlcmFibGVzXSA9IHRvV2lyZVZhbHVlKHJhd1ZhbHVlKTsNCiAgICAgICAgICAgICAgcmV0dXJuIHJlcXVlc3RSZXNwb25zZU1lc3NhZ2UoZXAsIHsNCiAgICAgICAgICAgICAgICAgIHR5cGU6ICJTRVQiIC8qIFNFVCAqLywNCiAgICAgICAgICAgICAgICAgIHBhdGg6IFsuLi5wYXRoLCBwcm9wXS5tYXAoKHApID0+IHAudG9TdHJpbmcoKSksDQogICAgICAgICAgICAgICAgICB2YWx1ZSwNCiAgICAgICAgICAgICAgfSwgdHJhbnNmZXJhYmxlcykudGhlbihmcm9tV2lyZVZhbHVlKTsNCiAgICAgICAgICB9LA0KICAgICAgICAgIGFwcGx5KF90YXJnZXQsIF90aGlzQXJnLCByYXdBcmd1bWVudExpc3QpIHsNCiAgICAgICAgICAgICAgdGhyb3dJZlByb3h5UmVsZWFzZWQoaXNQcm94eVJlbGVhc2VkKTsNCiAgICAgICAgICAgICAgY29uc3QgbGFzdCA9IHBhdGhbcGF0aC5sZW5ndGggLSAxXTsNCiAgICAgICAgICAgICAgaWYgKGxhc3QgPT09IGNyZWF0ZUVuZHBvaW50KSB7DQogICAgICAgICAgICAgICAgICByZXR1cm4gcmVxdWVzdFJlc3BvbnNlTWVzc2FnZShlcCwgew0KICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJFTkRQT0lOVCIgLyogRU5EUE9JTlQgKi8sDQogICAgICAgICAgICAgICAgICB9KS50aGVuKGZyb21XaXJlVmFsdWUpOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIC8vIFdlIGp1c3QgcHJldGVuZCB0aGF0IGBiaW5kKClgIGRpZG7igJl0IGhhcHBlbi4NCiAgICAgICAgICAgICAgaWYgKGxhc3QgPT09ICJiaW5kIikgew0KICAgICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVByb3h5KGVwLCBwYXRoLnNsaWNlKDAsIC0xKSk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgY29uc3QgW2FyZ3VtZW50TGlzdCwgdHJhbnNmZXJhYmxlc10gPSBwcm9jZXNzQXJndW1lbnRzKHJhd0FyZ3VtZW50TGlzdCk7DQogICAgICAgICAgICAgIHJldHVybiByZXF1ZXN0UmVzcG9uc2VNZXNzYWdlKGVwLCB7DQogICAgICAgICAgICAgICAgICB0eXBlOiAiQVBQTFkiIC8qIEFQUExZICovLA0KICAgICAgICAgICAgICAgICAgcGF0aDogcGF0aC5tYXAoKHApID0+IHAudG9TdHJpbmcoKSksDQogICAgICAgICAgICAgICAgICBhcmd1bWVudExpc3QsDQogICAgICAgICAgICAgIH0sIHRyYW5zZmVyYWJsZXMpLnRoZW4oZnJvbVdpcmVWYWx1ZSk7DQogICAgICAgICAgfSwNCiAgICAgICAgICBjb25zdHJ1Y3QoX3RhcmdldCwgcmF3QXJndW1lbnRMaXN0KSB7DQogICAgICAgICAgICAgIHRocm93SWZQcm94eVJlbGVhc2VkKGlzUHJveHlSZWxlYXNlZCk7DQogICAgICAgICAgICAgIGNvbnN0IFthcmd1bWVudExpc3QsIHRyYW5zZmVyYWJsZXNdID0gcHJvY2Vzc0FyZ3VtZW50cyhyYXdBcmd1bWVudExpc3QpOw0KICAgICAgICAgICAgICByZXR1cm4gcmVxdWVzdFJlc3BvbnNlTWVzc2FnZShlcCwgew0KICAgICAgICAgICAgICAgICAgdHlwZTogIkNPTlNUUlVDVCIgLyogQ09OU1RSVUNUICovLA0KICAgICAgICAgICAgICAgICAgcGF0aDogcGF0aC5tYXAoKHApID0+IHAudG9TdHJpbmcoKSksDQogICAgICAgICAgICAgICAgICBhcmd1bWVudExpc3QsDQogICAgICAgICAgICAgIH0sIHRyYW5zZmVyYWJsZXMpLnRoZW4oZnJvbVdpcmVWYWx1ZSk7DQogICAgICAgICAgfSwNCiAgICAgIH0pOw0KICAgICAgcmV0dXJuIHByb3h5Ow0KICB9DQogIGZ1bmN0aW9uIG15RmxhdChhcnIpIHsNCiAgICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLCBhcnIpOw0KICB9DQogIGZ1bmN0aW9uIHByb2Nlc3NBcmd1bWVudHMoYXJndW1lbnRMaXN0KSB7DQogICAgICBjb25zdCBwcm9jZXNzZWQgPSBhcmd1bWVudExpc3QubWFwKHRvV2lyZVZhbHVlKTsNCiAgICAgIHJldHVybiBbcHJvY2Vzc2VkLm1hcCgodikgPT4gdlswXSksIG15RmxhdChwcm9jZXNzZWQubWFwKCh2KSA9PiB2WzFdKSldOw0KICB9DQogIGNvbnN0IHRyYW5zZmVyQ2FjaGUgPSBuZXcgV2Vha01hcCgpOw0KICBmdW5jdGlvbiB0cmFuc2ZlcihvYmosIHRyYW5zZmVycykgew0KICAgICAgdHJhbnNmZXJDYWNoZS5zZXQob2JqLCB0cmFuc2ZlcnMpOw0KICAgICAgcmV0dXJuIG9iajsNCiAgfQ0KICBmdW5jdGlvbiBwcm94eShvYmopIHsNCiAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKG9iaiwgeyBbcHJveHlNYXJrZXJdOiB0cnVlIH0pOw0KICB9DQogIGZ1bmN0aW9uIHRvV2lyZVZhbHVlKHZhbHVlKSB7DQogICAgICBmb3IgKGNvbnN0IFtuYW1lLCBoYW5kbGVyXSBvZiB0cmFuc2ZlckhhbmRsZXJzKSB7DQogICAgICAgICAgaWYgKGhhbmRsZXIuY2FuSGFuZGxlKHZhbHVlKSkgew0KICAgICAgICAgICAgICBjb25zdCBbc2VyaWFsaXplZFZhbHVlLCB0cmFuc2ZlcmFibGVzXSA9IGhhbmRsZXIuc2VyaWFsaXplKHZhbHVlKTsNCiAgICAgICAgICAgICAgcmV0dXJuIFsNCiAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAiSEFORExFUiIgLyogSEFORExFUiAqLywNCiAgICAgICAgICAgICAgICAgICAgICBuYW1lLA0KICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBzZXJpYWxpemVkVmFsdWUsDQogICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgdHJhbnNmZXJhYmxlcywNCiAgICAgICAgICAgICAgXTsNCiAgICAgICAgICB9DQogICAgICB9DQogICAgICByZXR1cm4gWw0KICAgICAgICAgIHsNCiAgICAgICAgICAgICAgdHlwZTogIlJBVyIgLyogUkFXICovLA0KICAgICAgICAgICAgICB2YWx1ZSwNCiAgICAgICAgICB9LA0KICAgICAgICAgIHRyYW5zZmVyQ2FjaGUuZ2V0KHZhbHVlKSB8fCBbXSwNCiAgICAgIF07DQogIH0NCiAgZnVuY3Rpb24gZnJvbVdpcmVWYWx1ZSh2YWx1ZSkgew0KICAgICAgc3dpdGNoICh2YWx1ZS50eXBlKSB7DQogICAgICAgICAgY2FzZSAiSEFORExFUiIgLyogSEFORExFUiAqLzoNCiAgICAgICAgICAgICAgcmV0dXJuIHRyYW5zZmVySGFuZGxlcnMuZ2V0KHZhbHVlLm5hbWUpLmRlc2VyaWFsaXplKHZhbHVlLnZhbHVlKTsNCiAgICAgICAgICBjYXNlICJSQVciIC8qIFJBVyAqLzoNCiAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlLnZhbHVlOw0KICAgICAgfQ0KICB9DQogIGZ1bmN0aW9uIHJlcXVlc3RSZXNwb25zZU1lc3NhZ2UoZXAsIG1zZywgdHJhbnNmZXJzKSB7DQogICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHsNCiAgICAgICAgICBjb25zdCBpZCA9IGdlbmVyYXRlVVVJRCgpOw0KICAgICAgICAgIGVwLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLCBmdW5jdGlvbiBsKGV2KSB7DQogICAgICAgICAgICAgIGlmICghZXYuZGF0YSB8fCAhZXYuZGF0YS5pZCB8fCBldi5kYXRhLmlkICE9PSBpZCkgew0KICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIGVwLnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLCBsKTsNCiAgICAgICAgICAgICAgcmVzb2x2ZShldi5kYXRhKTsNCiAgICAgICAgICB9KTsNCiAgICAgICAgICBpZiAoZXAuc3RhcnQpIHsNCiAgICAgICAgICAgICAgZXAuc3RhcnQoKTsNCiAgICAgICAgICB9DQogICAgICAgICAgZXAucG9zdE1lc3NhZ2UoeyBpZCwgLi4ubXNnIH0sIHRyYW5zZmVycyk7DQogICAgICB9KTsNCiAgfQ0KICBmdW5jdGlvbiBnZW5lcmF0ZVVVSUQoKSB7DQogICAgICByZXR1cm4gbmV3IEFycmF5KDQpDQogICAgICAgICAgLmZpbGwoMCkNCiAgICAgICAgICAubWFwKCgpID0+IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIE51bWJlci5NQVhfU0FGRV9JTlRFR0VSKS50b1N0cmluZygxNikpDQogICAgICAgICAgLmpvaW4oIi0iKTsNCiAgfQoKICB2YXIgZ2xvYmFsJDEgPSAodHlwZW9mIGdsb2JhbCAhPT0gInVuZGVmaW5lZCIgPyBnbG9iYWwgOgogICAgICAgICAgICAgIHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIiA/IHNlbGYgOgogICAgICAgICAgICAgIHR5cGVvZiB3aW5kb3cgIT09ICJ1bmRlZmluZWQiID8gd2luZG93IDoge30pOwoKICAvKgogICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOyB5b3UgbWF5IG5vdCB1c2UKICB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZQogIExpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgogIFRISVMgQ09ERSBJUyBQUk9WSURFRCBPTiBBTiAqQVMgSVMqIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICBLSU5ELCBFSVRIRVIgRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgV0lUSE9VVCBMSU1JVEFUSU9OIEFOWSBJTVBMSUVECiAgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIFRJVExFLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSwKICBNRVJDSEFOVEFCTElUWSBPUiBOT04tSU5GUklOR0VNRU5ULgoKICBTZWUgdGhlIEFwYWNoZSBWZXJzaW9uIDIuMCBMaWNlbnNlIGZvciBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMKICBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiBodHRwczovL210aHMuYmUvcHVueWNvZGUgdjEuNC4xIGJ5IEBtYXRoaWFzICovCiAgZnVuY3Rpb24gYmEoYSxiLGMsZCl7cmV0dXJuIG5ldyAoY3x8KGM9UHJvbWlzZSkpKGZ1bmN0aW9uKGUsZil7ZnVuY3Rpb24gZyhhKXt0cnl7ayhkLm5leHQoYSkpO31jYXRjaChuKXtmKG4pO319ZnVuY3Rpb24gaChhKXt0cnl7ayhkWyJ0aHJvdyJdKGEpKTt9Y2F0Y2gobil7ZihuKTt9fWZ1bmN0aW9uIGsoYSl7YS5kb25lP2UoYS52YWx1ZSk6KG5ldyBjKGZ1bmN0aW9uKGIpe2IoYS52YWx1ZSk7fSkpLnRoZW4oZyxoKTt9aygoZD1kLmFwcGx5KGEsYnx8W10pKS5uZXh0KCkpO30pfQogIGZ1bmN0aW9uIGNhKGEsYil7ZnVuY3Rpb24gYyhhKXtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIGQoW2EsYl0pfX1mdW5jdGlvbiBkKGMpe2lmKGYpdGhyb3cgbmV3IFR5cGVFcnJvcigiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLiIpO2Zvcig7ZTspdHJ5e2lmKGY9MSxnJiYoaD1jWzBdJjI/Z1sicmV0dXJuIl06Y1swXT9nWyJ0aHJvdyJdfHwoKGg9Z1sicmV0dXJuIl0pJiZoLmNhbGwoZyksMCk6Zy5uZXh0KSYmIShoPWguY2FsbChnLGNbMV0pKS5kb25lKXJldHVybiBoO2lmKGc9MCxoKWM9W2NbMF0mMixoLnZhbHVlXTtzd2l0Y2goY1swXSl7Y2FzZSAwOmNhc2UgMTpoPWM7YnJlYWs7Y2FzZSA0OnJldHVybiBlLmxhYmVsKysse3ZhbHVlOmNbMV0sZG9uZTohMX07Y2FzZSA1OmUubGFiZWwrKztnPWNbMV07Yz1bMF07Y29udGludWU7Y2FzZSA3OmM9ZS5vcHMucG9wKCk7ZS50cnlzLnBvcCgpO2NvbnRpbnVlO2RlZmF1bHQ6aWYoIShoPWUudHJ5cyxoPTA8aC5sZW5ndGgmJgogIGhbaC5sZW5ndGgtMV0pJiYoNj09PWNbMF18fDI9PT1jWzBdKSl7ZT0wO2NvbnRpbnVlfWlmKDM9PT1jWzBdJiYoIWh8fGNbMV0+aFswXSYmY1sxXTxoWzNdKSllLmxhYmVsPWNbMV07ZWxzZSBpZig2PT09Y1swXSYmZS5sYWJlbDxoWzFdKWUubGFiZWw9aFsxXSxoPWM7ZWxzZSBpZihoJiZlLmxhYmVsPGhbMl0pZS5sYWJlbD1oWzJdLGUub3BzLnB1c2goYyk7ZWxzZSB7aFsyXSYmZS5vcHMucG9wKCk7ZS50cnlzLnBvcCgpO2NvbnRpbnVlfX1jPWIuY2FsbChhLGUpO31jYXRjaChuKXtjPVs2LG5dLGc9MDt9ZmluYWxseXtmPWg9MDt9aWYoY1swXSY1KXRocm93IGNbMV07cmV0dXJuIHt2YWx1ZTpjWzBdP2NbMV06dm9pZCAwLGRvbmU6ITB9fXZhciBlPXtsYWJlbDowLHNlbnQ6ZnVuY3Rpb24oKXtpZihoWzBdJjEpdGhyb3cgaFsxXTtyZXR1cm4gaFsxXX0sdHJ5czpbXSxvcHM6W119LGYsZyxoLGs7cmV0dXJuIGs9e25leHQ6YygwKSwidGhyb3ciOmMoMSksInJldHVybiI6YygyKX0sImZ1bmN0aW9uIj09PQogIHR5cGVvZiBTeW1ib2wmJihrW1N5bWJvbC5pdGVyYXRvcl09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pLGt9ZnVuY3Rpb24gZGEoYSl7dmFyIGI9ImZ1bmN0aW9uIj09PXR5cGVvZiBTeW1ib2wmJmFbU3ltYm9sLml0ZXJhdG9yXSxjPTA7cmV0dXJuIGI/Yi5jYWxsKGEpOntuZXh0OmZ1bmN0aW9uKCl7YSYmYz49YS5sZW5ndGgmJihhPXZvaWQgMCk7cmV0dXJuIHt2YWx1ZTphJiZhW2MrK10sZG9uZTohYX19fX0KICBmdW5jdGlvbiBlYShhLGIpe3ZhciBjPSJmdW5jdGlvbiI9PT10eXBlb2YgU3ltYm9sJiZhW1N5bWJvbC5pdGVyYXRvcl07aWYoIWMpcmV0dXJuIGE7YT1jLmNhbGwoYSk7dmFyIGQsZT1bXTt0cnl7Zm9yKDsodm9pZCAwPT09Ynx8MDxiLS0pJiYhKGQ9YS5uZXh0KCkpLmRvbmU7KWUucHVzaChkLnZhbHVlKTt9Y2F0Y2goZyl7dmFyIGY9e2Vycm9yOmd9O31maW5hbGx5e3RyeXtkJiYhZC5kb25lJiYoYz1hWyJyZXR1cm4iXSkmJmMuY2FsbChhKTt9ZmluYWxseXtpZihmKXRocm93IGYuZXJyb3I7fX1yZXR1cm4gZX1mdW5jdGlvbiBpYSgpe2Zvcih2YXIgYT1bXSxiPTA7Yjxhcmd1bWVudHMubGVuZ3RoO2IrKylhPWEuY29uY2F0KGVhKGFyZ3VtZW50c1tiXSkpO3JldHVybiBhfQogIHZhciBsPSJ1bmRlZmluZWQiIT09dHlwZW9mIGdsb2JhbFRoaXM/Z2xvYmFsVGhpczoidW5kZWZpbmVkIiE9PXR5cGVvZiB3aW5kb3c/d2luZG93OiJ1bmRlZmluZWQiIT09dHlwZW9mIGdsb2JhbCQxP2dsb2JhbCQxOiJ1bmRlZmluZWQiIT09dHlwZW9mIHNlbGY/c2VsZjp7fTtmdW5jdGlvbiB0KGEpe3JldHVybiBhJiZhLl9fZXNNb2R1bGUmJk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhLCJkZWZhdWx0Iik/YVsiZGVmYXVsdCJdOmF9ZnVuY3Rpb24gdShhLGIpe3JldHVybiBiPXtleHBvcnRzOnt9fSxhKGIsYi5leHBvcnRzKSxiLmV4cG9ydHN9CiAgdmFyIHc9dShmdW5jdGlvbihhLGIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShiLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTtiLmNvbnN0YW50cz17T19SRE9OTFk6MCxPX1dST05MWToxLE9fUkRXUjoyLFNfSUZNVDo2MTQ0MCxTX0lGUkVHOjMyNzY4LFNfSUZESVI6MTYzODQsU19JRkNIUjo4MTkyLFNfSUZCTEs6MjQ1NzYsU19JRklGTzo0MDk2LFNfSUZMTks6NDA5NjAsU19JRlNPQ0s6NDkxNTIsT19DUkVBVDo2NCxPX0VYQ0w6MTI4LE9fTk9DVFRZOjI1NixPX1RSVU5DOjUxMixPX0FQUEVORDoxMDI0LE9fRElSRUNUT1JZOjY1NTM2LE9fTk9BVElNRToyNjIxNDQsT19OT0ZPTExPVzoxMzEwNzIsT19TWU5DOjEwNTI2NzIsT19ESVJFQ1Q6MTYzODQsT19OT05CTE9DSzoyMDQ4LFNfSVJXWFU6NDQ4LFNfSVJVU1I6MjU2LFNfSVdVU1I6MTI4LFNfSVhVU1I6NjQsU19JUldYRzo1NixTX0lSR1JQOjMyLFNfSVdHUlA6MTYsU19JWEdSUDo4LFNfSVJXWE86NyxTX0lST1RIOjQsU19JV09USDoyLAogIFNfSVhPVEg6MSxGX09LOjAsUl9PSzo0LFdfT0s6MixYX09LOjEsVVZfRlNfU1lNTElOS19ESVI6MSxVVl9GU19TWU1MSU5LX0pVTkNUSU9OOjIsVVZfRlNfQ09QWUZJTEVfRVhDTDoxLFVWX0ZTX0NPUFlGSUxFX0ZJQ0xPTkU6MixVVl9GU19DT1BZRklMRV9GSUNMT05FX0ZPUkNFOjQsQ09QWUZJTEVfRVhDTDoxLENPUFlGSUxFX0ZJQ0xPTkU6MixDT1BZRklMRV9GSUNMT05FX0ZPUkNFOjR9O30pO3Qodyk7CiAgdmFyIGphPXUoZnVuY3Rpb24oYSxiKXtiLmRlZmF1bHQ9ImZ1bmN0aW9uIj09PXR5cGVvZiBCaWdJbnQ/QmlnSW50OmZ1bmN0aW9uKCl7dGhyb3cgRXJyb3IoIkJpZ0ludCBpcyBub3Qgc3VwcG9ydGVkIGluIHRoaXMgZW52aXJvbm1lbnQuIik7fTt9KSxrYT11KGZ1bmN0aW9uKGEsYil7T2JqZWN0LmRlZmluZVByb3BlcnR5KGIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBjPXcuY29uc3RhbnRzLlNfSUZNVCxkPXcuY29uc3RhbnRzLlNfSUZESVIsZT13LmNvbnN0YW50cy5TX0lGUkVHLGY9dy5jb25zdGFudHMuU19JRkJMSyxnPXcuY29uc3RhbnRzLlNfSUZDSFIsaD13LmNvbnN0YW50cy5TX0lGTE5LLGs9dy5jb25zdGFudHMuU19JRklGTyxwPXcuY29uc3RhbnRzLlNfSUZTT0NLO2E9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKCl7fWEuYnVpbGQ9ZnVuY3Rpb24oYixjKXt2b2lkIDA9PT1jJiYoYz0hMSk7dmFyIGQ9bmV3IGEsZT1iLmdpZCxmPWIuYXRpbWUsZz1iLm10aW1lLGg9Yi5jdGltZTsKICBjPWM/amEuZGVmYXVsdDpmdW5jdGlvbihhKXtyZXR1cm4gYX07ZC51aWQ9YyhiLnVpZCk7ZC5naWQ9YyhlKTtkLnJkZXY9YygwKTtkLmJsa3NpemU9Yyg0MDk2KTtkLmlubz1jKGIuaW5vKTtkLnNpemU9YyhiLmdldFNpemUoKSk7ZC5ibG9ja3M9YygxKTtkLmF0aW1lPWY7ZC5tdGltZT1nO2QuY3RpbWU9aDtkLmJpcnRodGltZT1oO2QuYXRpbWVNcz1jKGYuZ2V0VGltZSgpKTtkLm10aW1lTXM9YyhnLmdldFRpbWUoKSk7ZT1jKGguZ2V0VGltZSgpKTtkLmN0aW1lTXM9ZTtkLmJpcnRodGltZU1zPWU7ZC5kZXY9YygwKTtkLm1vZGU9YyhiLm1vZGUpO2Qubmxpbms9YyhiLm5saW5rKTtyZXR1cm4gZH07YS5wcm90b3R5cGUuX2NoZWNrTW9kZVByb3BlcnR5PWZ1bmN0aW9uKGEpe3JldHVybiAoTnVtYmVyKHRoaXMubW9kZSkmYyk9PT1hfTthLnByb3RvdHlwZS5pc0RpcmVjdG9yeT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGVja01vZGVQcm9wZXJ0eShkKX07YS5wcm90b3R5cGUuaXNGaWxlPQogIGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoZWNrTW9kZVByb3BlcnR5KGUpfTthLnByb3RvdHlwZS5pc0Jsb2NrRGV2aWNlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoZWNrTW9kZVByb3BlcnR5KGYpfTthLnByb3RvdHlwZS5pc0NoYXJhY3RlckRldmljZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGVja01vZGVQcm9wZXJ0eShnKX07YS5wcm90b3R5cGUuaXNTeW1ib2xpY0xpbms9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hlY2tNb2RlUHJvcGVydHkoaCl9O2EucHJvdG90eXBlLmlzRklGTz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGVja01vZGVQcm9wZXJ0eShrKX07YS5wcm90b3R5cGUuaXNTb2NrZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hlY2tNb2RlUHJvcGVydHkocCl9O3JldHVybiBhfSgpO2IuU3RhdHM9YTtiLmRlZmF1bHQ9YTt9KTt0KGthKTsKICB2YXIgbGE9InVuZGVmaW5lZCIhPT10eXBlb2YgZ2xvYmFsJDE/Z2xvYmFsJDE6InVuZGVmaW5lZCIhPT10eXBlb2Ygc2VsZj9zZWxmOiJ1bmRlZmluZWQiIT09dHlwZW9mIHdpbmRvdz93aW5kb3c6e30seD1bXSx5PVtdLG1hPSJ1bmRlZmluZWQiIT09dHlwZW9mIFVpbnQ4QXJyYXk/VWludDhBcnJheTpBcnJheSxvYT0hMTtmdW5jdGlvbiBwYSgpe29hPSEwO2Zvcih2YXIgYT0wOzY0PmE7KythKXhbYV09IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8iW2FdLHlbIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8iLmNoYXJDb2RlQXQoYSldPWE7eVs0NV09NjI7eVs5NV09NjM7fQogIGZ1bmN0aW9uIHFhKGEsYixjKXtmb3IodmFyIGQ9W10sZT1iO2U8YztlKz0zKWI9KGFbZV08PDE2KSsoYVtlKzFdPDw4KSthW2UrMl0sZC5wdXNoKHhbYj4+MTgmNjNdK3hbYj4+MTImNjNdK3hbYj4+NiY2M10reFtiJjYzXSk7cmV0dXJuIGQuam9pbigiIil9ZnVuY3Rpb24gcmEoYSl7b2F8fHBhKCk7Zm9yKHZhciBiPWEubGVuZ3RoLGM9YiUzLGQ9IiIsZT1bXSxmPTAsZz1iLWM7ZjxnO2YrPTE2MzgzKWUucHVzaChxYShhLGYsZisxNjM4Mz5nP2c6ZisxNjM4MykpOzE9PT1jPyhhPWFbYi0xXSxkKz14W2E+PjJdLGQrPXhbYTw8NCY2M10sZCs9Ij09Iik6Mj09PWMmJihhPShhW2ItMl08PDgpK2FbYi0xXSxkKz14W2E+PjEwXSxkKz14W2E+PjQmNjNdLGQrPXhbYTw8MiY2M10sZCs9Ij0iKTtlLnB1c2goZCk7cmV0dXJuIGUuam9pbigiIil9CiAgZnVuY3Rpb24gc2EoYSxiLGMsZCxlKXt2YXIgZj04KmUtZC0xO3ZhciBnPSgxPDxmKS0xLGg9Zz4+MSxrPS03O2U9Yz9lLTE6MDt2YXIgcD1jPy0xOjEsbj1hW2IrZV07ZSs9cDtjPW4mKDE8PC1rKS0xO24+Pj0taztmb3Ioays9ZjswPGs7Yz0yNTYqYythW2IrZV0sZSs9cCxrLT04KTtmPWMmKDE8PC1rKS0xO2M+Pj0taztmb3Ioays9ZDswPGs7Zj0yNTYqZithW2IrZV0sZSs9cCxrLT04KTtpZigwPT09YyljPTEtaDtlbHNlIHtpZihjPT09ZylyZXR1cm4gZj9OYU46SW5maW5pdHkqKG4/LTE6MSk7Zis9TWF0aC5wb3coMixkKTtjLT1oO31yZXR1cm4gKG4/LTE6MSkqZipNYXRoLnBvdygyLGMtZCl9CiAgZnVuY3Rpb24gdGEoYSxiLGMsZCxlLGYpe3ZhciBnLGg9OCpmLWUtMSxrPSgxPDxoKS0xLHA9az4+MSxuPTIzPT09ZT9NYXRoLnBvdygyLC0yNCktTWF0aC5wb3coMiwtNzcpOjA7Zj1kPzA6Zi0xO3ZhciBxPWQ/MTotMSxCPTA+Ynx8MD09PWImJjA+MS9iPzE6MDtiPU1hdGguYWJzKGIpO2lzTmFOKGIpfHxJbmZpbml0eT09PWI/KGI9aXNOYU4oYik/MTowLGQ9ayk6KGQ9TWF0aC5mbG9vcihNYXRoLmxvZyhiKS9NYXRoLkxOMiksMT5iKihnPU1hdGgucG93KDIsLWQpKSYmKGQtLSxnKj0yKSxiPTE8PWQrcD9iK24vZzpiK24qTWF0aC5wb3coMiwxLXApLDI8PWIqZyYmKGQrKyxnLz0yKSxkK3A+PWs/KGI9MCxkPWspOjE8PWQrcD8oYj0oYipnLTEpKk1hdGgucG93KDIsZSksZCs9cCk6KGI9YipNYXRoLnBvdygyLHAtMSkqTWF0aC5wb3coMixlKSxkPTApKTtmb3IoOzg8PWU7YVtjK2ZdPWImMjU1LGYrPXEsYi89MjU2LGUtPTgpO2Q9ZDw8ZXxiO2ZvcihoKz1lOzA8aDthW2MrZl09ZCYyNTUsCiAgZis9cSxkLz0yNTYsaC09OCk7YVtjK2YtcV18PTEyOCpCO312YXIgd2E9e30udG9TdHJpbmcseWE9QXJyYXkuaXNBcnJheXx8ZnVuY3Rpb24oYSl7cmV0dXJuICJbb2JqZWN0IEFycmF5XSI9PXdhLmNhbGwoYSl9O3ouVFlQRURfQVJSQVlfU1VQUE9SVD12b2lkIDAhPT1sYS5UWVBFRF9BUlJBWV9TVVBQT1JUP2xhLlRZUEVEX0FSUkFZX1NVUFBPUlQ6ITA7dmFyIHphPXouVFlQRURfQVJSQVlfU1VQUE9SVD8yMTQ3NDgzNjQ3OjEwNzM3NDE4MjM7ZnVuY3Rpb24gQWEoYSxiKXtpZigoei5UWVBFRF9BUlJBWV9TVVBQT1JUPzIxNDc0ODM2NDc6MTA3Mzc0MTgyMyk8Yil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCB0eXBlZCBhcnJheSBsZW5ndGgiKTt6LlRZUEVEX0FSUkFZX1NVUFBPUlQ/KGE9bmV3IFVpbnQ4QXJyYXkoYiksYS5fX3Byb3RvX189ei5wcm90b3R5cGUpOihudWxsPT09YSYmKGE9bmV3IHooYikpLGEubGVuZ3RoPWIpO3JldHVybiBhfQogIGZ1bmN0aW9uIHooYSxiLGMpe2lmKCEoei5UWVBFRF9BUlJBWV9TVVBQT1JUfHx0aGlzIGluc3RhbmNlb2YgeikpcmV0dXJuIG5ldyB6KGEsYixjKTtpZigibnVtYmVyIj09PXR5cGVvZiBhKXtpZigic3RyaW5nIj09PXR5cGVvZiBiKXRocm93IEVycm9yKCJJZiBlbmNvZGluZyBpcyBzcGVjaWZpZWQgdGhlbiB0aGUgZmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIHN0cmluZyIpO3JldHVybiBCYSh0aGlzLGEpfXJldHVybiBDYSh0aGlzLGEsYixjKX16LnBvb2xTaXplPTgxOTI7ei5fYXVnbWVudD1mdW5jdGlvbihhKXthLl9fcHJvdG9fXz16LnByb3RvdHlwZTtyZXR1cm4gYX07CiAgZnVuY3Rpb24gQ2EoYSxiLGMsZCl7aWYoIm51bWJlciI9PT10eXBlb2YgYil0aHJvdyBuZXcgVHlwZUVycm9yKCcidmFsdWUiIGFyZ3VtZW50IG11c3Qgbm90IGJlIGEgbnVtYmVyJyk7aWYoInVuZGVmaW5lZCIhPT10eXBlb2YgQXJyYXlCdWZmZXImJmIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcil7Yi5ieXRlTGVuZ3RoO2lmKDA+Y3x8Yi5ieXRlTGVuZ3RoPGMpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIidvZmZzZXQnIGlzIG91dCBvZiBib3VuZHMiKTtpZihiLmJ5dGVMZW5ndGg8YysoZHx8MCkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIidsZW5ndGgnIGlzIG91dCBvZiBib3VuZHMiKTtiPXZvaWQgMD09PWMmJnZvaWQgMD09PWQ/bmV3IFVpbnQ4QXJyYXkoYik6dm9pZCAwPT09ZD9uZXcgVWludDhBcnJheShiLGMpOm5ldyBVaW50OEFycmF5KGIsYyxkKTt6LlRZUEVEX0FSUkFZX1NVUFBPUlQ/KGE9YixhLl9fcHJvdG9fXz16LnByb3RvdHlwZSk6YT1EYShhLGIpO3JldHVybiBhfWlmKCJzdHJpbmciPT09CiAgdHlwZW9mIGIpe2Q9YTthPWM7aWYoInN0cmluZyIhPT10eXBlb2YgYXx8IiI9PT1hKWE9InV0ZjgiO2lmKCF6LmlzRW5jb2RpbmcoYSkpdGhyb3cgbmV3IFR5cGVFcnJvcignImVuY29kaW5nIiBtdXN0IGJlIGEgdmFsaWQgc3RyaW5nIGVuY29kaW5nJyk7Yz1FYShiLGEpfDA7ZD1BYShkLGMpO2I9ZC53cml0ZShiLGEpO2IhPT1jJiYoZD1kLnNsaWNlKDAsYikpO3JldHVybiBkfXJldHVybiBGYShhLGIpfXouZnJvbT1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIENhKG51bGwsYSxiLGMpfTt6LlRZUEVEX0FSUkFZX1NVUFBPUlQmJih6LnByb3RvdHlwZS5fX3Byb3RvX189VWludDhBcnJheS5wcm90b3R5cGUsei5fX3Byb3RvX189VWludDhBcnJheSk7CiAgZnVuY3Rpb24gR2EoYSl7aWYoIm51bWJlciIhPT10eXBlb2YgYSl0aHJvdyBuZXcgVHlwZUVycm9yKCcic2l6ZSIgYXJndW1lbnQgbXVzdCBiZSBhIG51bWJlcicpO2lmKDA+YSl0aHJvdyBuZXcgUmFuZ2VFcnJvcignInNpemUiIGFyZ3VtZW50IG11c3Qgbm90IGJlIG5lZ2F0aXZlJyk7fXouYWxsb2M9ZnVuY3Rpb24oYSxiLGMpe0dhKGEpO2E9MD49YT9BYShudWxsLGEpOnZvaWQgMCE9PWI/InN0cmluZyI9PT10eXBlb2YgYz9BYShudWxsLGEpLmZpbGwoYixjKTpBYShudWxsLGEpLmZpbGwoYik6QWEobnVsbCxhKTtyZXR1cm4gYX07ZnVuY3Rpb24gQmEoYSxiKXtHYShiKTthPUFhKGEsMD5iPzA6TWEoYil8MCk7aWYoIXouVFlQRURfQVJSQVlfU1VQUE9SVClmb3IodmFyIGM9MDtjPGI7KytjKWFbY109MDtyZXR1cm4gYX16LmFsbG9jVW5zYWZlPWZ1bmN0aW9uKGEpe3JldHVybiBCYShudWxsLGEpfTt6LmFsbG9jVW5zYWZlU2xvdz1mdW5jdGlvbihhKXtyZXR1cm4gQmEobnVsbCxhKX07CiAgZnVuY3Rpb24gRGEoYSxiKXt2YXIgYz0wPmIubGVuZ3RoPzA6TWEoYi5sZW5ndGgpfDA7YT1BYShhLGMpO2Zvcih2YXIgZD0wO2Q8YztkKz0xKWFbZF09YltkXSYyNTU7cmV0dXJuIGF9CiAgZnVuY3Rpb24gRmEoYSxiKXtpZihBKGIpKXt2YXIgYz1NYShiLmxlbmd0aCl8MDthPUFhKGEsYyk7aWYoMD09PWEubGVuZ3RoKXJldHVybiBhO2IuY29weShhLDAsMCxjKTtyZXR1cm4gYX1pZihiKXtpZigidW5kZWZpbmVkIiE9PXR5cGVvZiBBcnJheUJ1ZmZlciYmYi5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcnx8Imxlbmd0aCJpbiBiKXJldHVybiAoYz0ibnVtYmVyIiE9PXR5cGVvZiBiLmxlbmd0aCl8fChjPWIubGVuZ3RoLGM9YyE9PWMpLGM/QWEoYSwwKTpEYShhLGIpO2lmKCJCdWZmZXIiPT09Yi50eXBlJiZ5YShiLmRhdGEpKXJldHVybiBEYShhLGIuZGF0YSl9dGhyb3cgbmV3IFR5cGVFcnJvcigiRmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIHN0cmluZywgQnVmZmVyLCBBcnJheUJ1ZmZlciwgQXJyYXksIG9yIGFycmF5LWxpa2Ugb2JqZWN0LiIpO30KICBmdW5jdGlvbiBNYShhKXtpZihhPj0oei5UWVBFRF9BUlJBWV9TVVBQT1JUPzIxNDc0ODM2NDc6MTA3Mzc0MTgyMykpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkF0dGVtcHQgdG8gYWxsb2NhdGUgQnVmZmVyIGxhcmdlciB0aGFuIG1heGltdW0gc2l6ZTogMHgiKyh6LlRZUEVEX0FSUkFZX1NVUFBPUlQ/MjE0NzQ4MzY0NzoxMDczNzQxODIzKS50b1N0cmluZygxNikrIiBieXRlcyIpO3JldHVybiBhfDB9ei5pc0J1ZmZlcj1OYTtmdW5jdGlvbiBBKGEpe3JldHVybiAhKG51bGw9PWF8fCFhLl9pc0J1ZmZlcil9CiAgei5jb21wYXJlPWZ1bmN0aW9uKGEsYil7aWYoIUEoYSl8fCFBKGIpKXRocm93IG5ldyBUeXBlRXJyb3IoIkFyZ3VtZW50cyBtdXN0IGJlIEJ1ZmZlcnMiKTtpZihhPT09YilyZXR1cm4gMDtmb3IodmFyIGM9YS5sZW5ndGgsZD1iLmxlbmd0aCxlPTAsZj1NYXRoLm1pbihjLGQpO2U8ZjsrK2UpaWYoYVtlXSE9PWJbZV0pe2M9YVtlXTtkPWJbZV07YnJlYWt9cmV0dXJuIGM8ZD8tMTpkPGM/MTowfTt6LmlzRW5jb2Rpbmc9ZnVuY3Rpb24oYSl7c3dpdGNoKFN0cmluZyhhKS50b0xvd2VyQ2FzZSgpKXtjYXNlICJoZXgiOmNhc2UgInV0ZjgiOmNhc2UgInV0Zi04IjpjYXNlICJhc2NpaSI6Y2FzZSAibGF0aW4xIjpjYXNlICJiaW5hcnkiOmNhc2UgImJhc2U2NCI6Y2FzZSAidWNzMiI6Y2FzZSAidWNzLTIiOmNhc2UgInV0ZjE2bGUiOmNhc2UgInV0Zi0xNmxlIjpyZXR1cm4gITA7ZGVmYXVsdDpyZXR1cm4gITF9fTsKICB6LmNvbmNhdD1mdW5jdGlvbihhLGIpe2lmKCF5YShhKSl0aHJvdyBuZXcgVHlwZUVycm9yKCcibGlzdCIgYXJndW1lbnQgbXVzdCBiZSBhbiBBcnJheSBvZiBCdWZmZXJzJyk7aWYoMD09PWEubGVuZ3RoKXJldHVybiB6LmFsbG9jKDApO3ZhciBjO2lmKHZvaWQgMD09PWIpZm9yKGM9Yj0wO2M8YS5sZW5ndGg7KytjKWIrPWFbY10ubGVuZ3RoO2I9ei5hbGxvY1Vuc2FmZShiKTt2YXIgZD0wO2ZvcihjPTA7YzxhLmxlbmd0aDsrK2Mpe3ZhciBlPWFbY107aWYoIUEoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcignImxpc3QiIGFyZ3VtZW50IG11c3QgYmUgYW4gQXJyYXkgb2YgQnVmZmVycycpO2UuY29weShiLGQpO2QrPWUubGVuZ3RoO31yZXR1cm4gYn07CiAgZnVuY3Rpb24gRWEoYSxiKXtpZihBKGEpKXJldHVybiBhLmxlbmd0aDtpZigidW5kZWZpbmVkIiE9PXR5cGVvZiBBcnJheUJ1ZmZlciYmImZ1bmN0aW9uIj09PXR5cGVvZiBBcnJheUJ1ZmZlci5pc1ZpZXcmJihBcnJheUJ1ZmZlci5pc1ZpZXcoYSl8fGEgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikpcmV0dXJuIGEuYnl0ZUxlbmd0aDsic3RyaW5nIiE9PXR5cGVvZiBhJiYoYT0iIithKTt2YXIgYz1hLmxlbmd0aDtpZigwPT09YylyZXR1cm4gMDtmb3IodmFyIGQ9ITE7Oylzd2l0Y2goYil7Y2FzZSAiYXNjaWkiOmNhc2UgImxhdGluMSI6Y2FzZSAiYmluYXJ5IjpyZXR1cm4gYztjYXNlICJ1dGY4IjpjYXNlICJ1dGYtOCI6Y2FzZSB2b2lkIDA6cmV0dXJuIE9hKGEpLmxlbmd0aDtjYXNlICJ1Y3MyIjpjYXNlICJ1Y3MtMiI6Y2FzZSAidXRmMTZsZSI6Y2FzZSAidXRmLTE2bGUiOnJldHVybiAyKmM7Y2FzZSAiaGV4IjpyZXR1cm4gYz4+PjE7Y2FzZSAiYmFzZTY0IjpyZXR1cm4gUGEoYSkubGVuZ3RoOwogIGRlZmF1bHQ6aWYoZClyZXR1cm4gT2EoYSkubGVuZ3RoO2I9KCIiK2IpLnRvTG93ZXJDYXNlKCk7ZD0hMDt9fXouYnl0ZUxlbmd0aD1FYTsKICBmdW5jdGlvbiBRYShhLGIsYyl7dmFyIGQ9ITE7aWYodm9pZCAwPT09Ynx8MD5iKWI9MDtpZihiPnRoaXMubGVuZ3RoKXJldHVybiAiIjtpZih2b2lkIDA9PT1jfHxjPnRoaXMubGVuZ3RoKWM9dGhpcy5sZW5ndGg7aWYoMD49YylyZXR1cm4gIiI7Yz4+Pj0wO2I+Pj49MDtpZihjPD1iKXJldHVybiAiIjtmb3IoYXx8KGE9InV0ZjgiKTs7KXN3aXRjaChhKXtjYXNlICJoZXgiOmE9YjtiPWM7Yz10aGlzLmxlbmd0aDtpZighYXx8MD5hKWE9MDtpZighYnx8MD5ifHxiPmMpYj1jO2Q9IiI7Zm9yKGM9YTtjPGI7KytjKWE9ZCxkPXRoaXNbY10sZD0xNj5kPyIwIitkLnRvU3RyaW5nKDE2KTpkLnRvU3RyaW5nKDE2KSxkPWErZDtyZXR1cm4gZDtjYXNlICJ1dGY4IjpjYXNlICJ1dGYtOCI6cmV0dXJuIFJhKHRoaXMsYixjKTtjYXNlICJhc2NpaSI6YT0iIjtmb3IoYz1NYXRoLm1pbih0aGlzLmxlbmd0aCxjKTtiPGM7KytiKWErPVN0cmluZy5mcm9tQ2hhckNvZGUodGhpc1tiXSYxMjcpO3JldHVybiBhOwogIGNhc2UgImxhdGluMSI6Y2FzZSAiYmluYXJ5IjphPSIiO2ZvcihjPU1hdGgubWluKHRoaXMubGVuZ3RoLGMpO2I8YzsrK2IpYSs9U3RyaW5nLmZyb21DaGFyQ29kZSh0aGlzW2JdKTtyZXR1cm4gYTtjYXNlICJiYXNlNjQiOnJldHVybiBiPTA9PT1iJiZjPT09dGhpcy5sZW5ndGg/cmEodGhpcyk6cmEodGhpcy5zbGljZShiLGMpKSxiO2Nhc2UgInVjczIiOmNhc2UgInVjcy0yIjpjYXNlICJ1dGYxNmxlIjpjYXNlICJ1dGYtMTZsZSI6Yj10aGlzLnNsaWNlKGIsYyk7Yz0iIjtmb3IoYT0wO2E8Yi5sZW5ndGg7YSs9MiljKz1TdHJpbmcuZnJvbUNoYXJDb2RlKGJbYV0rMjU2KmJbYSsxXSk7cmV0dXJuIGM7ZGVmYXVsdDppZihkKXRocm93IG5ldyBUeXBlRXJyb3IoIlVua25vd24gZW5jb2Rpbmc6ICIrYSk7YT0oYSsiIikudG9Mb3dlckNhc2UoKTtkPSEwO319ei5wcm90b3R5cGUuX2lzQnVmZmVyPSEwO2Z1bmN0aW9uIFNhKGEsYixjKXt2YXIgZD1hW2JdO2FbYl09YVtjXTthW2NdPWQ7fQogIHoucHJvdG90eXBlLnN3YXAxNj1mdW5jdGlvbigpe3ZhciBhPXRoaXMubGVuZ3RoO2lmKDAhPT1hJTIpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkJ1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiAxNi1iaXRzIik7Zm9yKHZhciBiPTA7YjxhO2IrPTIpU2EodGhpcyxiLGIrMSk7cmV0dXJuIHRoaXN9O3oucHJvdG90eXBlLnN3YXAzMj1mdW5jdGlvbigpe3ZhciBhPXRoaXMubGVuZ3RoO2lmKDAhPT1hJTQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkJ1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiAzMi1iaXRzIik7Zm9yKHZhciBiPTA7YjxhO2IrPTQpU2EodGhpcyxiLGIrMyksU2EodGhpcyxiKzEsYisyKTtyZXR1cm4gdGhpc307CiAgei5wcm90b3R5cGUuc3dhcDY0PWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5sZW5ndGg7aWYoMCE9PWElOCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDY0LWJpdHMiKTtmb3IodmFyIGI9MDtiPGE7Yis9OClTYSh0aGlzLGIsYis3KSxTYSh0aGlzLGIrMSxiKzYpLFNhKHRoaXMsYisyLGIrNSksU2EodGhpcyxiKzMsYis0KTtyZXR1cm4gdGhpc307ei5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmxlbmd0aHwwO3JldHVybiAwPT09YT8iIjowPT09YXJndW1lbnRzLmxlbmd0aD9SYSh0aGlzLDAsYSk6UWEuYXBwbHkodGhpcyxhcmd1bWVudHMpfTt6LnByb3RvdHlwZS5lcXVhbHM9ZnVuY3Rpb24oYSl7aWYoIUEoYSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlciIpO3JldHVybiB0aGlzPT09YT8hMDowPT09ei5jb21wYXJlKHRoaXMsYSl9OwogIHoucHJvdG90eXBlLmluc3BlY3Q9ZnVuY3Rpb24oKXt2YXIgYT0iIjswPHRoaXMubGVuZ3RoJiYoYT10aGlzLnRvU3RyaW5nKCJoZXgiLDAsNTApLm1hdGNoKC8uezJ9L2cpLmpvaW4oIiAiKSw1MDx0aGlzLmxlbmd0aCYmKGErPSIgLi4uICIpKTtyZXR1cm4gIjxCdWZmZXIgIithKyI+In07CiAgei5wcm90b3R5cGUuY29tcGFyZT1mdW5jdGlvbihhLGIsYyxkLGUpe2lmKCFBKGEpKXRocm93IG5ldyBUeXBlRXJyb3IoIkFyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXIiKTt2b2lkIDA9PT1iJiYoYj0wKTt2b2lkIDA9PT1jJiYoYz1hP2EubGVuZ3RoOjApO3ZvaWQgMD09PWQmJihkPTApO3ZvaWQgMD09PWUmJihlPXRoaXMubGVuZ3RoKTtpZigwPmJ8fGM+YS5sZW5ndGh8fDA+ZHx8ZT50aGlzLmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigib3V0IG9mIHJhbmdlIGluZGV4Iik7aWYoZD49ZSYmYj49YylyZXR1cm4gMDtpZihkPj1lKXJldHVybiAtMTtpZihiPj1jKXJldHVybiAxO2I+Pj49MDtjPj4+PTA7ZD4+Pj0wO2U+Pj49MDtpZih0aGlzPT09YSlyZXR1cm4gMDt2YXIgZj1lLWQsZz1jLWIsaD1NYXRoLm1pbihmLGcpO2Q9dGhpcy5zbGljZShkLGUpO2E9YS5zbGljZShiLGMpO2ZvcihiPTA7YjxoOysrYilpZihkW2JdIT09YVtiXSl7Zj1kW2JdO2c9YVtiXTticmVha31yZXR1cm4gZjwKICBnPy0xOmc8Zj8xOjB9OwogIGZ1bmN0aW9uIFRhKGEsYixjLGQsZSl7aWYoMD09PWEubGVuZ3RoKXJldHVybiAtMTsic3RyaW5nIj09PXR5cGVvZiBjPyhkPWMsYz0wKToyMTQ3NDgzNjQ3PGM/Yz0yMTQ3NDgzNjQ3Oi0yMTQ3NDgzNjQ4PmMmJihjPS0yMTQ3NDgzNjQ4KTtjPStjO2lzTmFOKGMpJiYoYz1lPzA6YS5sZW5ndGgtMSk7MD5jJiYoYz1hLmxlbmd0aCtjKTtpZihjPj1hLmxlbmd0aCl7aWYoZSlyZXR1cm4gLTE7Yz1hLmxlbmd0aC0xO31lbHNlIGlmKDA+YylpZihlKWM9MDtlbHNlIHJldHVybiAtMTsic3RyaW5nIj09PXR5cGVvZiBiJiYoYj16LmZyb20oYixkKSk7aWYoQShiKSlyZXR1cm4gMD09PWIubGVuZ3RoPy0xOlVhKGEsYixjLGQsZSk7aWYoIm51bWJlciI9PT10eXBlb2YgYilyZXR1cm4gYiY9MjU1LHouVFlQRURfQVJSQVlfU1VQUE9SVCYmImZ1bmN0aW9uIj09PXR5cGVvZiBVaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mP2U/VWludDhBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGEsYixjKToKICBVaW50OEFycmF5LnByb3RvdHlwZS5sYXN0SW5kZXhPZi5jYWxsKGEsYixjKTpVYShhLFtiXSxjLGQsZSk7dGhyb3cgbmV3IFR5cGVFcnJvcigidmFsIG11c3QgYmUgc3RyaW5nLCBudW1iZXIgb3IgQnVmZmVyIik7fQogIGZ1bmN0aW9uIFVhKGEsYixjLGQsZSl7ZnVuY3Rpb24gZihhLGIpe3JldHVybiAxPT09Zz9hW2JdOmEucmVhZFVJbnQxNkJFKGIqZyl9dmFyIGc9MSxoPWEubGVuZ3RoLGs9Yi5sZW5ndGg7aWYodm9pZCAwIT09ZCYmKGQ9U3RyaW5nKGQpLnRvTG93ZXJDYXNlKCksInVjczIiPT09ZHx8InVjcy0yIj09PWR8fCJ1dGYxNmxlIj09PWR8fCJ1dGYtMTZsZSI9PT1kKSl7aWYoMj5hLmxlbmd0aHx8Mj5iLmxlbmd0aClyZXR1cm4gLTE7Zz0yO2gvPTI7ay89MjtjLz0yO31pZihlKWZvcihkPS0xO2M8aDtjKyspaWYoZihhLGMpPT09ZihiLC0xPT09ZD8wOmMtZCkpe2lmKC0xPT09ZCYmKGQ9YyksYy1kKzE9PT1rKXJldHVybiBkKmd9ZWxzZSAtMSE9PWQmJihjLT1jLWQpLGQ9LTE7ZWxzZSBmb3IoYytrPmgmJihjPWgtayk7MDw9YztjLS0pe2g9ITA7Zm9yKGQ9MDtkPGs7ZCsrKWlmKGYoYSxjK2QpIT09ZihiLGQpKXtoPSExO2JyZWFrfWlmKGgpcmV0dXJuIGN9cmV0dXJuIC0xfQogIHoucHJvdG90eXBlLmluY2x1ZGVzPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gLTEhPT10aGlzLmluZGV4T2YoYSxiLGMpfTt6LnByb3RvdHlwZS5pbmRleE9mPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gVGEodGhpcyxhLGIsYywhMCl9O3oucHJvdG90eXBlLmxhc3RJbmRleE9mPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gVGEodGhpcyxhLGIsYywhMSl9OwogIHoucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGEsYixjLGQpe2lmKHZvaWQgMD09PWIpZD0idXRmOCIsYz10aGlzLmxlbmd0aCxiPTA7ZWxzZSBpZih2b2lkIDA9PT1jJiYic3RyaW5nIj09PXR5cGVvZiBiKWQ9YixjPXRoaXMubGVuZ3RoLGI9MDtlbHNlIGlmKGlzRmluaXRlKGIpKWJ8PTAsaXNGaW5pdGUoYyk/KGN8PTAsdm9pZCAwPT09ZCYmKGQ9InV0ZjgiKSk6KGQ9YyxjPXZvaWQgMCk7ZWxzZSB0aHJvdyBFcnJvcigiQnVmZmVyLndyaXRlKHN0cmluZywgZW5jb2RpbmcsIG9mZnNldFssIGxlbmd0aF0pIGlzIG5vIGxvbmdlciBzdXBwb3J0ZWQiKTt2YXIgZT10aGlzLmxlbmd0aC1iO2lmKHZvaWQgMD09PWN8fGM+ZSljPWU7aWYoMDxhLmxlbmd0aCYmKDA+Y3x8MD5iKXx8Yj50aGlzLmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQXR0ZW1wdCB0byB3cml0ZSBvdXRzaWRlIGJ1ZmZlciBib3VuZHMiKTtkfHwoZD0idXRmOCIpO2ZvcihlPSExOzspc3dpdGNoKGQpe2Nhc2UgImhleCI6YTp7Yj0KICBOdW1iZXIoYil8fDA7ZD10aGlzLmxlbmd0aC1iO2M/KGM9TnVtYmVyKGMpLGM+ZCYmKGM9ZCkpOmM9ZDtkPWEubGVuZ3RoO2lmKDAhPT1kJTIpdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBoZXggc3RyaW5nIik7Yz5kLzImJihjPWQvMik7Zm9yKGQ9MDtkPGM7KytkKXtlPXBhcnNlSW50KGEuc3Vic3RyKDIqZCwyKSwxNik7aWYoaXNOYU4oZSkpe2E9ZDticmVhayBhfXRoaXNbYitkXT1lO31hPWQ7fXJldHVybiBhO2Nhc2UgInV0ZjgiOmNhc2UgInV0Zi04IjpyZXR1cm4gVmEoT2EoYSx0aGlzLmxlbmd0aC1iKSx0aGlzLGIsYyk7Y2FzZSAiYXNjaWkiOnJldHVybiBWYShXYShhKSx0aGlzLGIsYyk7Y2FzZSAibGF0aW4xIjpjYXNlICJiaW5hcnkiOnJldHVybiBWYShXYShhKSx0aGlzLGIsYyk7Y2FzZSAiYmFzZTY0IjpyZXR1cm4gVmEoUGEoYSksdGhpcyxiLGMpO2Nhc2UgInVjczIiOmNhc2UgInVjcy0yIjpjYXNlICJ1dGYxNmxlIjpjYXNlICJ1dGYtMTZsZSI6ZD1hO2U9dGhpcy5sZW5ndGgtCiAgYjtmb3IodmFyIGY9W10sZz0wO2c8ZC5sZW5ndGgmJiEoMD4oZS09MikpOysrZyl7dmFyIGg9ZC5jaGFyQ29kZUF0KGcpO2E9aD4+ODtoJT0yNTY7Zi5wdXNoKGgpO2YucHVzaChhKTt9cmV0dXJuIFZhKGYsdGhpcyxiLGMpO2RlZmF1bHQ6aWYoZSl0aHJvdyBuZXcgVHlwZUVycm9yKCJVbmtub3duIGVuY29kaW5nOiAiK2QpO2Q9KCIiK2QpLnRvTG93ZXJDYXNlKCk7ZT0hMDt9fTt6LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4ge3R5cGU6IkJ1ZmZlciIsZGF0YTpBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLl9hcnJ8fHRoaXMsMCl9fTsKICBmdW5jdGlvbiBSYShhLGIsYyl7Yz1NYXRoLm1pbihhLmxlbmd0aCxjKTtmb3IodmFyIGQ9W107YjxjOyl7dmFyIGU9YVtiXSxmPW51bGwsZz0yMzk8ZT80OjIyMzxlPzM6MTkxPGU/MjoxO2lmKGIrZzw9Yylzd2l0Y2goZyl7Y2FzZSAxOjEyOD5lJiYoZj1lKTticmVhaztjYXNlIDI6dmFyIGg9YVtiKzFdOzEyOD09PShoJjE5MikmJihlPShlJjMxKTw8NnxoJjYzLDEyNzxlJiYoZj1lKSk7YnJlYWs7Y2FzZSAzOmg9YVtiKzFdO3ZhciBrPWFbYisyXTsxMjg9PT0oaCYxOTIpJiYxMjg9PT0oayYxOTIpJiYoZT0oZSYxNSk8PDEyfChoJjYzKTw8NnxrJjYzLDIwNDc8ZSYmKDU1Mjk2PmV8fDU3MzQzPGUpJiYoZj1lKSk7YnJlYWs7Y2FzZSA0Omg9YVtiKzFdO2s9YVtiKzJdO3ZhciBwPWFbYiszXTsxMjg9PT0oaCYxOTIpJiYxMjg9PT0oayYxOTIpJiYxMjg9PT0ocCYxOTIpJiYoZT0oZSYxNSk8PDE4fChoJjYzKTw8MTJ8KGsmNjMpPDw2fHAmNjMsNjU1MzU8ZSYmMTExNDExMj5lJiYoZj0KICBlKSk7fW51bGw9PT1mPyhmPTY1NTMzLGc9MSk6NjU1MzU8ZiYmKGYtPTY1NTM2LGQucHVzaChmPj4+MTAmMTAyM3w1NTI5NiksZj01NjMyMHxmJjEwMjMpO2QucHVzaChmKTtiKz1nO31hPWQubGVuZ3RoO2lmKGE8PWFiKWQ9U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsZCk7ZWxzZSB7Yz0iIjtmb3IoYj0wO2I8YTspYys9U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsZC5zbGljZShiLGIrPWFiKSk7ZD1jO31yZXR1cm4gZH12YXIgYWI9NDA5NjsKICB6LnByb3RvdHlwZS5zbGljZT1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMubGVuZ3RoO2E9fn5hO2I9dm9pZCAwPT09Yj9jOn5+YjswPmE/KGErPWMsMD5hJiYoYT0wKSk6YT5jJiYoYT1jKTswPmI/KGIrPWMsMD5iJiYoYj0wKSk6Yj5jJiYoYj1jKTtiPGEmJihiPWEpO2lmKHouVFlQRURfQVJSQVlfU1VQUE9SVCliPXRoaXMuc3ViYXJyYXkoYSxiKSxiLl9fcHJvdG9fXz16LnByb3RvdHlwZTtlbHNlIHtjPWItYTtiPW5ldyB6KGMsdm9pZCAwKTtmb3IodmFyIGQ9MDtkPGM7KytkKWJbZF09dGhpc1tkK2FdO31yZXR1cm4gYn07ZnVuY3Rpb24gQyhhLGIsYyl7aWYoMCE9PWElMXx8MD5hKXRocm93IG5ldyBSYW5nZUVycm9yKCJvZmZzZXQgaXMgbm90IHVpbnQiKTtpZihhK2I+Yyl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVHJ5aW5nIHRvIGFjY2VzcyBiZXlvbmQgYnVmZmVyIGxlbmd0aCIpO30KICB6LnByb3RvdHlwZS5yZWFkVUludExFPWZ1bmN0aW9uKGEsYixjKXthfD0wO2J8PTA7Y3x8QyhhLGIsdGhpcy5sZW5ndGgpO2M9dGhpc1thXTtmb3IodmFyIGQ9MSxlPTA7KytlPGImJihkKj0yNTYpOyljKz10aGlzW2ErZV0qZDtyZXR1cm4gY307ei5wcm90b3R5cGUucmVhZFVJbnRCRT1mdW5jdGlvbihhLGIsYyl7YXw9MDtifD0wO2N8fEMoYSxiLHRoaXMubGVuZ3RoKTtjPXRoaXNbYSstLWJdO2Zvcih2YXIgZD0xOzA8YiYmKGQqPTI1Nik7KWMrPXRoaXNbYSstLWJdKmQ7cmV0dXJuIGN9O3oucHJvdG90eXBlLnJlYWRVSW50OD1mdW5jdGlvbihhLGIpe2J8fEMoYSwxLHRoaXMubGVuZ3RoKTtyZXR1cm4gdGhpc1thXX07ei5wcm90b3R5cGUucmVhZFVJbnQxNkxFPWZ1bmN0aW9uKGEsYil7Ynx8QyhhLDIsdGhpcy5sZW5ndGgpO3JldHVybiB0aGlzW2FdfHRoaXNbYSsxXTw8OH07CiAgei5wcm90b3R5cGUucmVhZFVJbnQxNkJFPWZ1bmN0aW9uKGEsYil7Ynx8QyhhLDIsdGhpcy5sZW5ndGgpO3JldHVybiB0aGlzW2FdPDw4fHRoaXNbYSsxXX07ei5wcm90b3R5cGUucmVhZFVJbnQzMkxFPWZ1bmN0aW9uKGEsYil7Ynx8QyhhLDQsdGhpcy5sZW5ndGgpO3JldHVybiAodGhpc1thXXx0aGlzW2ErMV08PDh8dGhpc1thKzJdPDwxNikrMTY3NzcyMTYqdGhpc1thKzNdfTt6LnByb3RvdHlwZS5yZWFkVUludDMyQkU9ZnVuY3Rpb24oYSxiKXtifHxDKGEsNCx0aGlzLmxlbmd0aCk7cmV0dXJuIDE2Nzc3MjE2KnRoaXNbYV0rKHRoaXNbYSsxXTw8MTZ8dGhpc1thKzJdPDw4fHRoaXNbYSszXSl9O3oucHJvdG90eXBlLnJlYWRJbnRMRT1mdW5jdGlvbihhLGIsYyl7YXw9MDtifD0wO2N8fEMoYSxiLHRoaXMubGVuZ3RoKTtjPXRoaXNbYV07Zm9yKHZhciBkPTEsZT0wOysrZTxiJiYoZCo9MjU2KTspYys9dGhpc1thK2VdKmQ7Yz49MTI4KmQmJihjLT1NYXRoLnBvdygyLDgqYikpO3JldHVybiBjfTsKICB6LnByb3RvdHlwZS5yZWFkSW50QkU9ZnVuY3Rpb24oYSxiLGMpe2F8PTA7Ynw9MDtjfHxDKGEsYix0aGlzLmxlbmd0aCk7Yz1iO2Zvcih2YXIgZD0xLGU9dGhpc1thKy0tY107MDxjJiYoZCo9MjU2KTspZSs9dGhpc1thKy0tY10qZDtlPj0xMjgqZCYmKGUtPU1hdGgucG93KDIsOCpiKSk7cmV0dXJuIGV9O3oucHJvdG90eXBlLnJlYWRJbnQ4PWZ1bmN0aW9uKGEsYil7Ynx8QyhhLDEsdGhpcy5sZW5ndGgpO3JldHVybiB0aGlzW2FdJjEyOD8tMSooMjU1LXRoaXNbYV0rMSk6dGhpc1thXX07ei5wcm90b3R5cGUucmVhZEludDE2TEU9ZnVuY3Rpb24oYSxiKXtifHxDKGEsMix0aGlzLmxlbmd0aCk7YT10aGlzW2FdfHRoaXNbYSsxXTw8ODtyZXR1cm4gYSYzMjc2OD9hfDQyOTQ5MDE3NjA6YX07CiAgei5wcm90b3R5cGUucmVhZEludDE2QkU9ZnVuY3Rpb24oYSxiKXtifHxDKGEsMix0aGlzLmxlbmd0aCk7YT10aGlzW2ErMV18dGhpc1thXTw8ODtyZXR1cm4gYSYzMjc2OD9hfDQyOTQ5MDE3NjA6YX07ei5wcm90b3R5cGUucmVhZEludDMyTEU9ZnVuY3Rpb24oYSxiKXtifHxDKGEsNCx0aGlzLmxlbmd0aCk7cmV0dXJuIHRoaXNbYV18dGhpc1thKzFdPDw4fHRoaXNbYSsyXTw8MTZ8dGhpc1thKzNdPDwyNH07ei5wcm90b3R5cGUucmVhZEludDMyQkU9ZnVuY3Rpb24oYSxiKXtifHxDKGEsNCx0aGlzLmxlbmd0aCk7cmV0dXJuIHRoaXNbYV08PDI0fHRoaXNbYSsxXTw8MTZ8dGhpc1thKzJdPDw4fHRoaXNbYSszXX07ei5wcm90b3R5cGUucmVhZEZsb2F0TEU9ZnVuY3Rpb24oYSxiKXtifHxDKGEsNCx0aGlzLmxlbmd0aCk7cmV0dXJuIHNhKHRoaXMsYSwhMCwyMyw0KX07CiAgei5wcm90b3R5cGUucmVhZEZsb2F0QkU9ZnVuY3Rpb24oYSxiKXtifHxDKGEsNCx0aGlzLmxlbmd0aCk7cmV0dXJuIHNhKHRoaXMsYSwhMSwyMyw0KX07ei5wcm90b3R5cGUucmVhZERvdWJsZUxFPWZ1bmN0aW9uKGEsYil7Ynx8QyhhLDgsdGhpcy5sZW5ndGgpO3JldHVybiBzYSh0aGlzLGEsITAsNTIsOCl9O3oucHJvdG90eXBlLnJlYWREb3VibGVCRT1mdW5jdGlvbihhLGIpe2J8fEMoYSw4LHRoaXMubGVuZ3RoKTtyZXR1cm4gc2EodGhpcyxhLCExLDUyLDgpfTtmdW5jdGlvbiBFKGEsYixjLGQsZSxmKXtpZighQShhKSl0aHJvdyBuZXcgVHlwZUVycm9yKCciYnVmZmVyIiBhcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyIGluc3RhbmNlJyk7aWYoYj5lfHxiPGYpdGhyb3cgbmV3IFJhbmdlRXJyb3IoJyJ2YWx1ZSIgYXJndW1lbnQgaXMgb3V0IG9mIGJvdW5kcycpO2lmKGMrZD5hLmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW5kZXggb3V0IG9mIHJhbmdlIik7fQogIHoucHJvdG90eXBlLndyaXRlVUludExFPWZ1bmN0aW9uKGEsYixjLGQpe2E9K2E7Ynw9MDtjfD0wO2R8fEUodGhpcyxhLGIsYyxNYXRoLnBvdygyLDgqYyktMSwwKTtkPTE7dmFyIGU9MDtmb3IodGhpc1tiXT1hJjI1NTsrK2U8YyYmKGQqPTI1Nik7KXRoaXNbYitlXT1hL2QmMjU1O3JldHVybiBiK2N9O3oucHJvdG90eXBlLndyaXRlVUludEJFPWZ1bmN0aW9uKGEsYixjLGQpe2E9K2E7Ynw9MDtjfD0wO2R8fEUodGhpcyxhLGIsYyxNYXRoLnBvdygyLDgqYyktMSwwKTtkPWMtMTt2YXIgZT0xO2Zvcih0aGlzW2IrZF09YSYyNTU7MDw9LS1kJiYoZSo9MjU2KTspdGhpc1tiK2RdPWEvZSYyNTU7cmV0dXJuIGIrY307ei5wcm90b3R5cGUud3JpdGVVSW50OD1mdW5jdGlvbihhLGIsYyl7YT0rYTtifD0wO2N8fEUodGhpcyxhLGIsMSwyNTUsMCk7ei5UWVBFRF9BUlJBWV9TVVBQT1JUfHwoYT1NYXRoLmZsb29yKGEpKTt0aGlzW2JdPWEmMjU1O3JldHVybiBiKzF9OwogIGZ1bmN0aW9uIGJiKGEsYixjLGQpezA+YiYmKGI9NjU1MzUrYisxKTtmb3IodmFyIGU9MCxmPU1hdGgubWluKGEubGVuZ3RoLWMsMik7ZTxmOysrZSlhW2MrZV09KGImMjU1PDw4KihkP2U6MS1lKSk+Pj44KihkP2U6MS1lKTt9ei5wcm90b3R5cGUud3JpdGVVSW50MTZMRT1mdW5jdGlvbihhLGIsYyl7YT0rYTtifD0wO2N8fEUodGhpcyxhLGIsMiw2NTUzNSwwKTt6LlRZUEVEX0FSUkFZX1NVUFBPUlQ/KHRoaXNbYl09YSYyNTUsdGhpc1tiKzFdPWE+Pj44KTpiYih0aGlzLGEsYiwhMCk7cmV0dXJuIGIrMn07ei5wcm90b3R5cGUud3JpdGVVSW50MTZCRT1mdW5jdGlvbihhLGIsYyl7YT0rYTtifD0wO2N8fEUodGhpcyxhLGIsMiw2NTUzNSwwKTt6LlRZUEVEX0FSUkFZX1NVUFBPUlQ/KHRoaXNbYl09YT4+PjgsdGhpc1tiKzFdPWEmMjU1KTpiYih0aGlzLGEsYiwhMSk7cmV0dXJuIGIrMn07CiAgZnVuY3Rpb24gY2IoYSxiLGMsZCl7MD5iJiYoYj00Mjk0OTY3Mjk1K2IrMSk7Zm9yKHZhciBlPTAsZj1NYXRoLm1pbihhLmxlbmd0aC1jLDQpO2U8ZjsrK2UpYVtjK2VdPWI+Pj44KihkP2U6My1lKSYyNTU7fXoucHJvdG90eXBlLndyaXRlVUludDMyTEU9ZnVuY3Rpb24oYSxiLGMpe2E9K2E7Ynw9MDtjfHxFKHRoaXMsYSxiLDQsNDI5NDk2NzI5NSwwKTt6LlRZUEVEX0FSUkFZX1NVUFBPUlQ/KHRoaXNbYiszXT1hPj4+MjQsdGhpc1tiKzJdPWE+Pj4xNix0aGlzW2IrMV09YT4+PjgsdGhpc1tiXT1hJjI1NSk6Y2IodGhpcyxhLGIsITApO3JldHVybiBiKzR9OwogIHoucHJvdG90eXBlLndyaXRlVUludDMyQkU9ZnVuY3Rpb24oYSxiLGMpe2E9K2E7Ynw9MDtjfHxFKHRoaXMsYSxiLDQsNDI5NDk2NzI5NSwwKTt6LlRZUEVEX0FSUkFZX1NVUFBPUlQ/KHRoaXNbYl09YT4+PjI0LHRoaXNbYisxXT1hPj4+MTYsdGhpc1tiKzJdPWE+Pj44LHRoaXNbYiszXT1hJjI1NSk6Y2IodGhpcyxhLGIsITEpO3JldHVybiBiKzR9O3oucHJvdG90eXBlLndyaXRlSW50TEU9ZnVuY3Rpb24oYSxiLGMsZCl7YT0rYTtifD0wO2R8fChkPU1hdGgucG93KDIsOCpjLTEpLEUodGhpcyxhLGIsYyxkLTEsLWQpKTtkPTA7dmFyIGU9MSxmPTA7Zm9yKHRoaXNbYl09YSYyNTU7KytkPGMmJihlKj0yNTYpOykwPmEmJjA9PT1mJiYwIT09dGhpc1tiK2QtMV0mJihmPTEpLHRoaXNbYitkXT0oYS9lPj4wKS1mJjI1NTtyZXR1cm4gYitjfTsKICB6LnByb3RvdHlwZS53cml0ZUludEJFPWZ1bmN0aW9uKGEsYixjLGQpe2E9K2E7Ynw9MDtkfHwoZD1NYXRoLnBvdygyLDgqYy0xKSxFKHRoaXMsYSxiLGMsZC0xLC1kKSk7ZD1jLTE7dmFyIGU9MSxmPTA7Zm9yKHRoaXNbYitkXT1hJjI1NTswPD0tLWQmJihlKj0yNTYpOykwPmEmJjA9PT1mJiYwIT09dGhpc1tiK2QrMV0mJihmPTEpLHRoaXNbYitkXT0oYS9lPj4wKS1mJjI1NTtyZXR1cm4gYitjfTt6LnByb3RvdHlwZS53cml0ZUludDg9ZnVuY3Rpb24oYSxiLGMpe2E9K2E7Ynw9MDtjfHxFKHRoaXMsYSxiLDEsMTI3LC0xMjgpO3ouVFlQRURfQVJSQVlfU1VQUE9SVHx8KGE9TWF0aC5mbG9vcihhKSk7MD5hJiYoYT0yNTUrYSsxKTt0aGlzW2JdPWEmMjU1O3JldHVybiBiKzF9OwogIHoucHJvdG90eXBlLndyaXRlSW50MTZMRT1mdW5jdGlvbihhLGIsYyl7YT0rYTtifD0wO2N8fEUodGhpcyxhLGIsMiwzMjc2NywtMzI3NjgpO3ouVFlQRURfQVJSQVlfU1VQUE9SVD8odGhpc1tiXT1hJjI1NSx0aGlzW2IrMV09YT4+PjgpOmJiKHRoaXMsYSxiLCEwKTtyZXR1cm4gYisyfTt6LnByb3RvdHlwZS53cml0ZUludDE2QkU9ZnVuY3Rpb24oYSxiLGMpe2E9K2E7Ynw9MDtjfHxFKHRoaXMsYSxiLDIsMzI3NjcsLTMyNzY4KTt6LlRZUEVEX0FSUkFZX1NVUFBPUlQ/KHRoaXNbYl09YT4+PjgsdGhpc1tiKzFdPWEmMjU1KTpiYih0aGlzLGEsYiwhMSk7cmV0dXJuIGIrMn07CiAgei5wcm90b3R5cGUud3JpdGVJbnQzMkxFPWZ1bmN0aW9uKGEsYixjKXthPSthO2J8PTA7Y3x8RSh0aGlzLGEsYiw0LDIxNDc0ODM2NDcsLTIxNDc0ODM2NDgpO3ouVFlQRURfQVJSQVlfU1VQUE9SVD8odGhpc1tiXT1hJjI1NSx0aGlzW2IrMV09YT4+PjgsdGhpc1tiKzJdPWE+Pj4xNix0aGlzW2IrM109YT4+PjI0KTpjYih0aGlzLGEsYiwhMCk7cmV0dXJuIGIrNH07ei5wcm90b3R5cGUud3JpdGVJbnQzMkJFPWZ1bmN0aW9uKGEsYixjKXthPSthO2J8PTA7Y3x8RSh0aGlzLGEsYiw0LDIxNDc0ODM2NDcsLTIxNDc0ODM2NDgpOzA+YSYmKGE9NDI5NDk2NzI5NSthKzEpO3ouVFlQRURfQVJSQVlfU1VQUE9SVD8odGhpc1tiXT1hPj4+MjQsdGhpc1tiKzFdPWE+Pj4xNix0aGlzW2IrMl09YT4+PjgsdGhpc1tiKzNdPWEmMjU1KTpjYih0aGlzLGEsYiwhMSk7cmV0dXJuIGIrNH07CiAgZnVuY3Rpb24gZGIoYSxiLGMsZCl7aWYoYytkPmEubGVuZ3RoKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbmRleCBvdXQgb2YgcmFuZ2UiKTtpZigwPmMpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkluZGV4IG91dCBvZiByYW5nZSIpO316LnByb3RvdHlwZS53cml0ZUZsb2F0TEU9ZnVuY3Rpb24oYSxiLGMpe2N8fGRiKHRoaXMsYSxiLDQpO3RhKHRoaXMsYSxiLCEwLDIzLDQpO3JldHVybiBiKzR9O3oucHJvdG90eXBlLndyaXRlRmxvYXRCRT1mdW5jdGlvbihhLGIsYyl7Y3x8ZGIodGhpcyxhLGIsNCk7dGEodGhpcyxhLGIsITEsMjMsNCk7cmV0dXJuIGIrNH07ei5wcm90b3R5cGUud3JpdGVEb3VibGVMRT1mdW5jdGlvbihhLGIsYyl7Y3x8ZGIodGhpcyxhLGIsOCk7dGEodGhpcyxhLGIsITAsNTIsOCk7cmV0dXJuIGIrOH07ei5wcm90b3R5cGUud3JpdGVEb3VibGVCRT1mdW5jdGlvbihhLGIsYyl7Y3x8ZGIodGhpcyxhLGIsOCk7dGEodGhpcyxhLGIsITEsNTIsOCk7cmV0dXJuIGIrOH07CiAgei5wcm90b3R5cGUuY29weT1mdW5jdGlvbihhLGIsYyxkKXtjfHwoYz0wKTtkfHwwPT09ZHx8KGQ9dGhpcy5sZW5ndGgpO2I+PWEubGVuZ3RoJiYoYj1hLmxlbmd0aCk7Ynx8KGI9MCk7MDxkJiZkPGMmJihkPWMpO2lmKGQ9PT1jfHwwPT09YS5sZW5ndGh8fDA9PT10aGlzLmxlbmd0aClyZXR1cm4gMDtpZigwPmIpdGhyb3cgbmV3IFJhbmdlRXJyb3IoInRhcmdldFN0YXJ0IG91dCBvZiBib3VuZHMiKTtpZigwPmN8fGM+PXRoaXMubGVuZ3RoKXRocm93IG5ldyBSYW5nZUVycm9yKCJzb3VyY2VTdGFydCBvdXQgb2YgYm91bmRzIik7aWYoMD5kKXRocm93IG5ldyBSYW5nZUVycm9yKCJzb3VyY2VFbmQgb3V0IG9mIGJvdW5kcyIpO2Q+dGhpcy5sZW5ndGgmJihkPXRoaXMubGVuZ3RoKTthLmxlbmd0aC1iPGQtYyYmKGQ9YS5sZW5ndGgtYitjKTt2YXIgZT1kLWM7aWYodGhpcz09PWEmJmM8YiYmYjxkKWZvcihkPWUtMTswPD1kOy0tZClhW2QrYl09dGhpc1tkK2NdO2Vsc2UgaWYoMUUzPmV8fAogICF6LlRZUEVEX0FSUkFZX1NVUFBPUlQpZm9yKGQ9MDtkPGU7KytkKWFbZCtiXT10aGlzW2QrY107ZWxzZSBVaW50OEFycmF5LnByb3RvdHlwZS5zZXQuY2FsbChhLHRoaXMuc3ViYXJyYXkoYyxjK2UpLGIpO3JldHVybiBlfTsKICB6LnByb3RvdHlwZS5maWxsPWZ1bmN0aW9uKGEsYixjLGQpe2lmKCJzdHJpbmciPT09dHlwZW9mIGEpeyJzdHJpbmciPT09dHlwZW9mIGI/KGQ9YixiPTAsYz10aGlzLmxlbmd0aCk6InN0cmluZyI9PT10eXBlb2YgYyYmKGQ9YyxjPXRoaXMubGVuZ3RoKTtpZigxPT09YS5sZW5ndGgpe3ZhciBlPWEuY2hhckNvZGVBdCgwKTsyNTY+ZSYmKGE9ZSk7fWlmKHZvaWQgMCE9PWQmJiJzdHJpbmciIT09dHlwZW9mIGQpdGhyb3cgbmV3IFR5cGVFcnJvcigiZW5jb2RpbmcgbXVzdCBiZSBhIHN0cmluZyIpO2lmKCJzdHJpbmciPT09dHlwZW9mIGQmJiF6LmlzRW5jb2RpbmcoZCkpdGhyb3cgbmV3IFR5cGVFcnJvcigiVW5rbm93biBlbmNvZGluZzogIitkKTt9ZWxzZSAibnVtYmVyIj09PXR5cGVvZiBhJiYoYSY9MjU1KTtpZigwPmJ8fHRoaXMubGVuZ3RoPGJ8fHRoaXMubGVuZ3RoPGMpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIk91dCBvZiByYW5nZSBpbmRleCIpO2lmKGM8PWIpcmV0dXJuIHRoaXM7Yj4+Pj0KICAwO2M9dm9pZCAwPT09Yz90aGlzLmxlbmd0aDpjPj4+MDthfHwoYT0wKTtpZigibnVtYmVyIj09PXR5cGVvZiBhKWZvcihkPWI7ZDxjOysrZCl0aGlzW2RdPWE7ZWxzZSBmb3IoYT1BKGEpP2E6T2EoKG5ldyB6KGEsZCkpLnRvU3RyaW5nKCkpLGU9YS5sZW5ndGgsZD0wO2Q8Yy1iOysrZCl0aGlzW2QrYl09YVtkJWVdO3JldHVybiB0aGlzfTt2YXIgZWI9L1teK1wvMC05QS1aYS16LV9dL2c7CiAgZnVuY3Rpb24gT2EoYSxiKXtiPWJ8fEluZmluaXR5O2Zvcih2YXIgYyxkPWEubGVuZ3RoLGU9bnVsbCxmPVtdLGc9MDtnPGQ7KytnKXtjPWEuY2hhckNvZGVBdChnKTtpZig1NTI5NTxjJiY1NzM0ND5jKXtpZighZSl7aWYoNTYzMTk8Yyl7LTE8KGItPTMpJiZmLnB1c2goMjM5LDE5MSwxODkpO2NvbnRpbnVlfWVsc2UgaWYoZysxPT09ZCl7LTE8KGItPTMpJiZmLnB1c2goMjM5LDE5MSwxODkpO2NvbnRpbnVlfWU9Yztjb250aW51ZX1pZig1NjMyMD5jKXstMTwoYi09MykmJmYucHVzaCgyMzksMTkxLDE4OSk7ZT1jO2NvbnRpbnVlfWM9KGUtNTUyOTY8PDEwfGMtNTYzMjApKzY1NTM2O31lbHNlIGUmJi0xPChiLT0zKSYmZi5wdXNoKDIzOSwxOTEsMTg5KTtlPW51bGw7aWYoMTI4PmMpe2lmKDA+LS1iKWJyZWFrO2YucHVzaChjKTt9ZWxzZSBpZigyMDQ4PmMpe2lmKDA+KGItPTIpKWJyZWFrO2YucHVzaChjPj42fDE5MixjJjYzfDEyOCk7fWVsc2UgaWYoNjU1MzY+Yyl7aWYoMD4oYi09MykpYnJlYWs7CiAgZi5wdXNoKGM+PjEyfDIyNCxjPj42JjYzfDEyOCxjJjYzfDEyOCk7fWVsc2UgaWYoMTExNDExMj5jKXtpZigwPihiLT00KSlicmVhaztmLnB1c2goYz4+MTh8MjQwLGM+PjEyJjYzfDEyOCxjPj42JjYzfDEyOCxjJjYzfDEyOCk7fWVsc2UgdGhyb3cgRXJyb3IoIkludmFsaWQgY29kZSBwb2ludCIpO31yZXR1cm4gZn1mdW5jdGlvbiBXYShhKXtmb3IodmFyIGI9W10sYz0wO2M8YS5sZW5ndGg7KytjKWIucHVzaChhLmNoYXJDb2RlQXQoYykmMjU1KTtyZXR1cm4gYn0KICBmdW5jdGlvbiBQYShhKXthPShhLnRyaW0/YS50cmltKCk6YS5yZXBsYWNlKC9eXHMrfFxzKyQvZywiIikpLnJlcGxhY2UoZWIsIiIpO2lmKDI+YS5sZW5ndGgpYT0iIjtlbHNlIGZvcig7MCE9PWEubGVuZ3RoJTQ7KWErPSI9IjtvYXx8cGEoKTt2YXIgYj1hLmxlbmd0aDtpZigwPGIlNCl0aHJvdyBFcnJvcigiSW52YWxpZCBzdHJpbmcuIExlbmd0aCBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgNCIpO3ZhciBjPSI9Ij09PWFbYi0yXT8yOiI9Ij09PWFbYi0xXT8xOjA7dmFyIGQ9bmV3IG1hKDMqYi80LWMpO3ZhciBlPTA8Yz9iLTQ6Yjt2YXIgZj0wO2ZvcihiPTA7YjxlO2IrPTQpe3ZhciBnPXlbYS5jaGFyQ29kZUF0KGIpXTw8MTh8eVthLmNoYXJDb2RlQXQoYisxKV08PDEyfHlbYS5jaGFyQ29kZUF0KGIrMildPDw2fHlbYS5jaGFyQ29kZUF0KGIrMyldO2RbZisrXT1nPj4xNiYyNTU7ZFtmKytdPWc+PjgmMjU1O2RbZisrXT1nJjI1NTt9Mj09PWM/KGc9eVthLmNoYXJDb2RlQXQoYildPDwyfAogIHlbYS5jaGFyQ29kZUF0KGIrMSldPj40LGRbZisrXT1nJjI1NSk6MT09PWMmJihnPXlbYS5jaGFyQ29kZUF0KGIpXTw8MTB8eVthLmNoYXJDb2RlQXQoYisxKV08PDR8eVthLmNoYXJDb2RlQXQoYisyKV0+PjIsZFtmKytdPWc+PjgmMjU1LGRbZisrXT1nJjI1NSk7cmV0dXJuIGR9ZnVuY3Rpb24gVmEoYSxiLGMsZCl7Zm9yKHZhciBlPTA7ZTxkJiYhKGUrYz49Yi5sZW5ndGh8fGU+PWEubGVuZ3RoKTsrK2UpYltlK2NdPWFbZV07cmV0dXJuIGV9ZnVuY3Rpb24gTmEoYSl7cmV0dXJuIG51bGwhPWEmJighIWEuX2lzQnVmZmVyfHxmYihhKXx8ImZ1bmN0aW9uIj09PXR5cGVvZiBhLnJlYWRGbG9hdExFJiYiZnVuY3Rpb24iPT09dHlwZW9mIGEuc2xpY2UmJmZiKGEuc2xpY2UoMCwwKSkpfWZ1bmN0aW9uIGZiKGEpe3JldHVybiAhIWEuY29uc3RydWN0b3ImJiJmdW5jdGlvbiI9PT10eXBlb2YgYS5jb25zdHJ1Y3Rvci5pc0J1ZmZlciYmYS5jb25zdHJ1Y3Rvci5pc0J1ZmZlcihhKX0KICB2YXIgZ2I9T2JqZWN0LmZyZWV6ZSh7X19wcm90b19fOm51bGwsSU5TUEVDVF9NQVhfQllURVM6NTAsa01heExlbmd0aDp6YSxCdWZmZXI6eixTbG93QnVmZmVyOmZ1bmN0aW9uKGEpeythIT1hJiYoYT0wKTtyZXR1cm4gei5hbGxvYygrYSl9LGlzQnVmZmVyOk5hfSksRj11KGZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhKXtmb3IodmFyIGI9W10sYz0xO2M8YXJndW1lbnRzLmxlbmd0aDtjKyspYltjLTFdPWFyZ3VtZW50c1tjXTtyZXR1cm4gbmV3IChnYi5CdWZmZXIuYmluZC5hcHBseShnYi5CdWZmZXIsZChbdm9pZCAwLGFdLGIpKSl9dmFyIGQ9bCYmbC5fX3NwcmVhZEFycmF5c3x8ZnVuY3Rpb24oKXtmb3IodmFyIGE9MCxiPTAsYz1hcmd1bWVudHMubGVuZ3RoO2I8YztiKyspYSs9YXJndW1lbnRzW2JdLmxlbmd0aDthPUFycmF5KGEpO3ZhciBkPTA7Zm9yKGI9MDtiPGM7YisrKWZvcih2YXIgaz1hcmd1bWVudHNbYl0scD0wLG49ay5sZW5ndGg7cDxuO3ArKyxkKyspYVtkXT1rW3BdOwogIHJldHVybiBhfTtPYmplY3QuZGVmaW5lUHJvcGVydHkoYiwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7Yi5CdWZmZXI9Z2IuQnVmZmVyO2IuYnVmZmVyQWxsb2NVbnNhZmU9Z2IuQnVmZmVyLmFsbG9jVW5zYWZlfHxjO2IuYnVmZmVyRnJvbT1nYi5CdWZmZXIuZnJvbXx8Yzt9KTt0KEYpO2Z1bmN0aW9uIGhiKCl7dGhyb3cgRXJyb3IoInNldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQiKTt9ZnVuY3Rpb24gaWIoKXt0aHJvdyBFcnJvcigiY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkIik7fXZhciBqYj1oYixrYj1pYjsiZnVuY3Rpb24iPT09dHlwZW9mIGxhLnNldFRpbWVvdXQmJihqYj1zZXRUaW1lb3V0KTsiZnVuY3Rpb24iPT09dHlwZW9mIGxhLmNsZWFyVGltZW91dCYmKGtiPWNsZWFyVGltZW91dCk7CiAgZnVuY3Rpb24gcGIoYSl7aWYoamI9PT1zZXRUaW1lb3V0KXJldHVybiBzZXRUaW1lb3V0KGEsMCk7aWYoKGpiPT09aGJ8fCFqYikmJnNldFRpbWVvdXQpcmV0dXJuIGpiPXNldFRpbWVvdXQsc2V0VGltZW91dChhLDApO3RyeXtyZXR1cm4gamIoYSwwKX1jYXRjaChiKXt0cnl7cmV0dXJuIGpiLmNhbGwobnVsbCxhLDApfWNhdGNoKGMpe3JldHVybiBqYi5jYWxsKHRoaXMsYSwwKX19fWZ1bmN0aW9uIHJiKGEpe2lmKGtiPT09Y2xlYXJUaW1lb3V0KXJldHVybiBjbGVhclRpbWVvdXQoYSk7aWYoKGtiPT09aWJ8fCFrYikmJmNsZWFyVGltZW91dClyZXR1cm4ga2I9Y2xlYXJUaW1lb3V0LGNsZWFyVGltZW91dChhKTt0cnl7cmV0dXJuIGtiKGEpfWNhdGNoKGIpe3RyeXtyZXR1cm4ga2IuY2FsbChudWxsLGEpfWNhdGNoKGMpe3JldHVybiBrYi5jYWxsKHRoaXMsYSl9fX12YXIgc2I9W10sdGI9ITEsdWIsdmI9LTE7CiAgZnVuY3Rpb24gd2IoKXt0YiYmdWImJih0Yj0hMSx1Yi5sZW5ndGg/c2I9dWIuY29uY2F0KHNiKTp2Yj0tMSxzYi5sZW5ndGgmJnhiKCkpO31mdW5jdGlvbiB4Yigpe2lmKCF0Yil7dmFyIGE9cGIod2IpO3RiPSEwO2Zvcih2YXIgYj1zYi5sZW5ndGg7Yjspe3ViPXNiO2ZvcihzYj1bXTsrK3ZiPGI7KXViJiZ1Ylt2Yl0ucnVuKCk7dmI9LTE7Yj1zYi5sZW5ndGg7fXViPW51bGw7dGI9ITE7cmIoYSk7fX1mdW5jdGlvbiBHKGEpe3ZhciBiPUFycmF5KGFyZ3VtZW50cy5sZW5ndGgtMSk7aWYoMTxhcmd1bWVudHMubGVuZ3RoKWZvcih2YXIgYz0xO2M8YXJndW1lbnRzLmxlbmd0aDtjKyspYltjLTFdPWFyZ3VtZW50c1tjXTtzYi5wdXNoKG5ldyB5YihhLGIpKTsxIT09c2IubGVuZ3RofHx0Ynx8cGIoeGIpO31mdW5jdGlvbiB5YihhLGIpe3RoaXMuZnVuPWE7dGhpcy5hcnJheT1iO315Yi5wcm90b3R5cGUucnVuPWZ1bmN0aW9uKCl7dGhpcy5mdW4uYXBwbHkobnVsbCx0aGlzLmFycmF5KTt9OwogIGZ1bmN0aW9uIHpiKCl7fQogIHZhciBwZXJmb3JtYW5jZSQyPWxhLnBlcmZvcm1hbmNlfHx7fSxBYj1wZXJmb3JtYW5jZSQyLm5vd3x8cGVyZm9ybWFuY2UkMi5tb3pOb3d8fHBlcmZvcm1hbmNlJDIubXNOb3d8fHBlcmZvcm1hbmNlJDIub05vd3x8cGVyZm9ybWFuY2UkMi53ZWJraXROb3d8fGZ1bmN0aW9uKCl7cmV0dXJuIChuZXcgRGF0ZSkuZ2V0VGltZSgpfSxCYj1uZXcgRGF0ZSxDYj17bmV4dFRpY2s6Ryx0aXRsZToiYnJvd3NlciIsYnJvd3NlcjohMCxlbnY6e30sYXJndjpbXSx2ZXJzaW9uOiIiLHZlcnNpb25zOnt9LG9uOnpiLGFkZExpc3RlbmVyOnpiLG9uY2U6emIsb2ZmOnpiLHJlbW92ZUxpc3RlbmVyOnpiLHJlbW92ZUFsbExpc3RlbmVyczp6YixlbWl0OnpiLGJpbmRpbmc6ZnVuY3Rpb24oKXt0aHJvdyBFcnJvcigicHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQiKTt9LGN3ZDpmdW5jdGlvbigpe3JldHVybiAiLyJ9LGNoZGlyOmZ1bmN0aW9uKCl7dGhyb3cgRXJyb3IoInByb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCIpO30sCiAgdW1hc2s6ZnVuY3Rpb24oKXtyZXR1cm4gMH0saHJ0aW1lOmZ1bmN0aW9uKGEpe3ZhciBiPS4wMDEqQWIuY2FsbChwZXJmb3JtYW5jZSQyKSxjPU1hdGguZmxvb3IoYik7Yj1NYXRoLmZsb29yKGIlMSoxRTkpO2EmJihjLT1hWzBdLGItPWFbMV0sMD5iJiYoYy0tLGIrPTFFOSkpO3JldHVybiBbYyxiXX0scGxhdGZvcm06ImJyb3dzZXIiLHJlbGVhc2U6e30sY29uZmlnOnt9LHVwdGltZTpmdW5jdGlvbigpe3JldHVybiAobmV3IERhdGUtQmIpLzFFM319LERiPSJmdW5jdGlvbiI9PT10eXBlb2YgT2JqZWN0LmNyZWF0ZT9mdW5jdGlvbihhLGIpe2Euc3VwZXJfPWI7YS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmEsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSk7fTpmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoKXt9YS5zdXBlcl89YjtjLnByb3RvdHlwZT1iLnByb3RvdHlwZTthLnByb3RvdHlwZT1uZXcgYzsKICBhLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1hO30sRWI9LyVbc2RqJV0vZztmdW5jdGlvbiBGYihhKXtpZighR2IoYSkpe2Zvcih2YXIgYj1bXSxjPTA7Yzxhcmd1bWVudHMubGVuZ3RoO2MrKyliLnB1c2goSChhcmd1bWVudHNbY10pKTtyZXR1cm4gYi5qb2luKCIgIil9Yz0xO3ZhciBkPWFyZ3VtZW50cyxlPWQubGVuZ3RoO2I9U3RyaW5nKGEpLnJlcGxhY2UoRWIsZnVuY3Rpb24oYSl7aWYoIiUlIj09PWEpcmV0dXJuICIlIjtpZihjPj1lKXJldHVybiBhO3N3aXRjaChhKXtjYXNlICIlcyI6cmV0dXJuIFN0cmluZyhkW2MrK10pO2Nhc2UgIiVkIjpyZXR1cm4gTnVtYmVyKGRbYysrXSk7Y2FzZSAiJWoiOnRyeXtyZXR1cm4gSlNPTi5zdHJpbmdpZnkoZFtjKytdKX1jYXRjaChoKXtyZXR1cm4gIltDaXJjdWxhcl0ifWRlZmF1bHQ6cmV0dXJuIGF9fSk7Zm9yKHZhciBmPWRbY107YzxlO2Y9ZFsrK2NdKWI9bnVsbCE9PWYmJkhiKGYpP2IrKCIgIitIKGYpKTpiKygiICIrZik7cmV0dXJuIGJ9CiAgZnVuY3Rpb24gSWIoYSxiKXtpZihKYihsYS5wcm9jZXNzKSlyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gSWIoYSxiKS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O2lmKCEwPT09Q2Iubm9EZXByZWNhdGlvbilyZXR1cm4gYTt2YXIgYz0hMTtyZXR1cm4gZnVuY3Rpb24oKXtpZighYyl7aWYoQ2IudGhyb3dEZXByZWNhdGlvbil0aHJvdyBFcnJvcihiKTtDYi50cmFjZURlcHJlY2F0aW9uP2NvbnNvbGUudHJhY2UoYik6Y29uc29sZS5lcnJvcihiKTtjPSEwO31yZXR1cm4gYS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fXZhciBLYj17fSxMYjsKICBmdW5jdGlvbiBNYihhKXtKYihMYikmJihMYj1DYi5lbnYuTk9ERV9ERUJVR3x8IiIpO2E9YS50b1VwcGVyQ2FzZSgpO0tiW2FdfHwoKG5ldyBSZWdFeHAoIlxcYiIrYSsiXFxiIiwiaSIpKS50ZXN0KExiKT9LYlthXT1mdW5jdGlvbigpe3ZhciBiPUZiLmFwcGx5KG51bGwsYXJndW1lbnRzKTtjb25zb2xlLmVycm9yKCIlcyAlZDogJXMiLGEsMCxiKTt9OktiW2FdPWZ1bmN0aW9uKCl7fSk7cmV0dXJuIEtiW2FdfQogIGZ1bmN0aW9uIEgoYSxiKXt2YXIgYz17c2VlbjpbXSxzdHlsaXplOk5ifTszPD1hcmd1bWVudHMubGVuZ3RoJiYoYy5kZXB0aD1hcmd1bWVudHNbMl0pOzQ8PWFyZ3VtZW50cy5sZW5ndGgmJihjLmNvbG9ycz1hcmd1bWVudHNbM10pO09iKGIpP2Muc2hvd0hpZGRlbj1iOmImJlBiKGMsYik7SmIoYy5zaG93SGlkZGVuKSYmKGMuc2hvd0hpZGRlbj0hMSk7SmIoYy5kZXB0aCkmJihjLmRlcHRoPTIpO0piKGMuY29sb3JzKSYmKGMuY29sb3JzPSExKTtKYihjLmN1c3RvbUluc3BlY3QpJiYoYy5jdXN0b21JbnNwZWN0PSEwKTtjLmNvbG9ycyYmKGMuc3R5bGl6ZT1RYik7cmV0dXJuIFJiKGMsYSxjLmRlcHRoKX0KICBILmNvbG9ycz17Ym9sZDpbMSwyMl0saXRhbGljOlszLDIzXSx1bmRlcmxpbmU6WzQsMjRdLGludmVyc2U6WzcsMjddLHdoaXRlOlszNywzOV0sZ3JleTpbOTAsMzldLGJsYWNrOlszMCwzOV0sYmx1ZTpbMzQsMzldLGN5YW46WzM2LDM5XSxncmVlbjpbMzIsMzldLG1hZ2VudGE6WzM1LDM5XSxyZWQ6WzMxLDM5XSx5ZWxsb3c6WzMzLDM5XX07SC5zdHlsZXM9e3NwZWNpYWw6ImN5YW4iLG51bWJlcjoieWVsbG93IiwiYm9vbGVhbiI6InllbGxvdyIsdW5kZWZpbmVkOiJncmV5IiwibnVsbCI6ImJvbGQiLHN0cmluZzoiZ3JlZW4iLGRhdGU6Im1hZ2VudGEiLHJlZ2V4cDoicmVkIn07ZnVuY3Rpb24gUWIoYSxiKXtyZXR1cm4gKGI9SC5zdHlsZXNbYl0pPyJcdTAwMWJbIitILmNvbG9yc1tiXVswXSsibSIrYSsiXHUwMDFiWyIrSC5jb2xvcnNbYl1bMV0rIm0iOmF9ZnVuY3Rpb24gTmIoYSl7cmV0dXJuIGF9CiAgZnVuY3Rpb24gU2IoYSl7dmFyIGI9e307YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2JbYV09ITA7fSk7cmV0dXJuIGJ9CiAgZnVuY3Rpb24gUmIoYSxiLGMpe2lmKGEuY3VzdG9tSW5zcGVjdCYmYiYmVGIoYi5pbnNwZWN0KSYmYi5pbnNwZWN0IT09SCYmKCFiLmNvbnN0cnVjdG9yfHxiLmNvbnN0cnVjdG9yLnByb3RvdHlwZSE9PWIpKXt2YXIgZD1iLmluc3BlY3QoYyxhKTtHYihkKXx8KGQ9UmIoYSxkLGMpKTtyZXR1cm4gZH1pZihkPVViKGEsYikpcmV0dXJuIGQ7dmFyIGU9T2JqZWN0LmtleXMoYiksZj1TYihlKTthLnNob3dIaWRkZW4mJihlPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGIpKTtpZihWYihiKSYmKDA8PWUuaW5kZXhPZigibWVzc2FnZSIpfHwwPD1lLmluZGV4T2YoImRlc2NyaXB0aW9uIikpKXJldHVybiBaYihiKTtpZigwPT09ZS5sZW5ndGgpe2lmKFRiKGIpKXJldHVybiBhLnN0eWxpemUoIltGdW5jdGlvbiIrKGIubmFtZT8iOiAiK2IubmFtZToiIikrIl0iLCJzcGVjaWFsIik7aWYoYWMoYikpcmV0dXJuIGEuc3R5bGl6ZShSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYiksCiAgInJlZ2V4cCIpO2lmKGJjKGIpKXJldHVybiBhLnN0eWxpemUoRGF0ZS5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChiKSwiZGF0ZSIpO2lmKFZiKGIpKXJldHVybiBaYihiKX1kPSIiO3ZhciBnPSExLGg9WyJ7IiwifSJdO2NjKGIpJiYoZz0hMCxoPVsiWyIsIl0iXSk7VGIoYikmJihkPSIgW0Z1bmN0aW9uIisoYi5uYW1lPyI6ICIrYi5uYW1lOiIiKSsiXSIpO2FjKGIpJiYoZD0iICIrUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGIpKTtiYyhiKSYmKGQ9IiAiK0RhdGUucHJvdG90eXBlLnRvVVRDU3RyaW5nLmNhbGwoYikpO1ZiKGIpJiYoZD0iICIrWmIoYikpO2lmKDA9PT1lLmxlbmd0aCYmKCFnfHwwPT1iLmxlbmd0aCkpcmV0dXJuIGhbMF0rZCtoWzFdO2lmKDA+YylyZXR1cm4gYWMoYik/YS5zdHlsaXplKFJlZ0V4cC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChiKSwicmVnZXhwIik6YS5zdHlsaXplKCJbT2JqZWN0XSIsInNwZWNpYWwiKTthLnNlZW4ucHVzaChiKTtlPWc/CiAgZGMoYSxiLGMsZixlKTplLm1hcChmdW5jdGlvbihkKXtyZXR1cm4gZWMkMShhLGIsYyxmLGQsZyl9KTthLnNlZW4ucG9wKCk7cmV0dXJuIGZjKGUsZCxoKX1mdW5jdGlvbiBVYihhLGIpe2lmKEpiKGIpKXJldHVybiBhLnN0eWxpemUoInVuZGVmaW5lZCIsInVuZGVmaW5lZCIpO2lmKEdiKGIpKXJldHVybiBiPSInIitKU09OLnN0cmluZ2lmeShiKS5yZXBsYWNlKC9eInwiJC9nLCIiKS5yZXBsYWNlKC8nL2csIlxcJyIpLnJlcGxhY2UoL1xcIi9nLCciJykrIiciLGEuc3R5bGl6ZShiLCJzdHJpbmciKTtpZihnYyhiKSlyZXR1cm4gYS5zdHlsaXplKCIiK2IsIm51bWJlciIpO2lmKE9iKGIpKXJldHVybiBhLnN0eWxpemUoIiIrYiwiYm9vbGVhbiIpO2lmKG51bGw9PT1iKXJldHVybiBhLnN0eWxpemUoIm51bGwiLCJudWxsIil9ZnVuY3Rpb24gWmIoYSl7cmV0dXJuICJbIitFcnJvci5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhKSsiXSJ9CiAgZnVuY3Rpb24gZGMoYSxiLGMsZCxlKXtmb3IodmFyIGY9W10sZz0wLGg9Yi5sZW5ndGg7ZzxoOysrZylPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYixTdHJpbmcoZykpP2YucHVzaChlYyQxKGEsYixjLGQsU3RyaW5nKGcpLCEwKSk6Zi5wdXNoKCIiKTtlLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5tYXRjaCgvXlxkKyQvKXx8Zi5wdXNoKGVjJDEoYSxiLGMsZCxlLCEwKSk7fSk7cmV0dXJuIGZ9CiAgZnVuY3Rpb24gZWMkMShhLGIsYyxkLGUsZil7dmFyIGcsaDtiPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYixlKXx8e3ZhbHVlOmJbZV19O2IuZ2V0P2g9Yi5zZXQ/YS5zdHlsaXplKCJbR2V0dGVyL1NldHRlcl0iLCJzcGVjaWFsIik6YS5zdHlsaXplKCJbR2V0dGVyXSIsInNwZWNpYWwiKTpiLnNldCYmKGg9YS5zdHlsaXplKCJbU2V0dGVyXSIsInNwZWNpYWwiKSk7T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGQsZSl8fChnPSJbIitlKyJdIik7aHx8KDA+YS5zZWVuLmluZGV4T2YoYi52YWx1ZSk/KGg9bnVsbD09PWM/UmIoYSxiLnZhbHVlLG51bGwpOlJiKGEsYi52YWx1ZSxjLTEpLC0xPGguaW5kZXhPZigiXG4iKSYmKGg9Zj9oLnNwbGl0KCJcbiIpLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gIiAgIithfSkuam9pbigiXG4iKS5zdWJzdHIoMik6IlxuIitoLnNwbGl0KCJcbiIpLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gIiAgICIrYX0pLmpvaW4oIlxuIikpKToKICBoPWEuc3R5bGl6ZSgiW0NpcmN1bGFyXSIsInNwZWNpYWwiKSk7aWYoSmIoZykpe2lmKGYmJmUubWF0Y2goL15cZCskLykpcmV0dXJuIGg7Zz1KU09OLnN0cmluZ2lmeSgiIitlKTtnLm1hdGNoKC9eIihbYS16QS1aX11bYS16QS1aXzAtOV0qKSIkLyk/KGc9Zy5zdWJzdHIoMSxnLmxlbmd0aC0yKSxnPWEuc3R5bGl6ZShnLCJuYW1lIikpOihnPWcucmVwbGFjZSgvJy9nLCJcXCciKS5yZXBsYWNlKC9cXCIvZywnIicpLnJlcGxhY2UoLyheInwiJCkvZywiJyIpLGc9YS5zdHlsaXplKGcsInN0cmluZyIpKTt9cmV0dXJuIGcrIjogIitofQogIGZ1bmN0aW9uIGZjKGEsYixjKXtyZXR1cm4gNjA8YS5yZWR1Y2UoZnVuY3Rpb24oYSxiKXtiLmluZGV4T2YoIlxuIik7cmV0dXJuIGErYi5yZXBsYWNlKC9cdTAwMWJcW1xkXGQ/bS9nLCIiKS5sZW5ndGgrMX0sMCk/Y1swXSsoIiI9PT1iPyIiOmIrIlxuICIpKyIgIithLmpvaW4oIixcbiAgIikrIiAiK2NbMV06Y1swXStiKyIgIithLmpvaW4oIiwgIikrIiAiK2NbMV19ZnVuY3Rpb24gY2MoYSl7cmV0dXJuIEFycmF5LmlzQXJyYXkoYSl9ZnVuY3Rpb24gT2IoYSl7cmV0dXJuICJib29sZWFuIj09PXR5cGVvZiBhfWZ1bmN0aW9uIGdjKGEpe3JldHVybiAibnVtYmVyIj09PXR5cGVvZiBhfWZ1bmN0aW9uIEdiKGEpe3JldHVybiAic3RyaW5nIj09PXR5cGVvZiBhfWZ1bmN0aW9uIEpiKGEpe3JldHVybiB2b2lkIDA9PT1hfWZ1bmN0aW9uIGFjKGEpe3JldHVybiBIYihhKSYmIltvYmplY3QgUmVnRXhwXSI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYSl9CiAgZnVuY3Rpb24gSGIoYSl7cmV0dXJuICJvYmplY3QiPT09dHlwZW9mIGEmJm51bGwhPT1hfWZ1bmN0aW9uIGJjKGEpe3JldHVybiBIYihhKSYmIltvYmplY3QgRGF0ZV0iPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpfWZ1bmN0aW9uIFZiKGEpe3JldHVybiBIYihhKSYmKCJbb2JqZWN0IEVycm9yXSI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYSl8fGEgaW5zdGFuY2VvZiBFcnJvcil9ZnVuY3Rpb24gVGIoYSl7cmV0dXJuICJmdW5jdGlvbiI9PT10eXBlb2YgYX1mdW5jdGlvbiBoYyhhKXtyZXR1cm4gbnVsbD09PWF8fCJib29sZWFuIj09PXR5cGVvZiBhfHwibnVtYmVyIj09PXR5cGVvZiBhfHwic3RyaW5nIj09PXR5cGVvZiBhfHwic3ltYm9sIj09PXR5cGVvZiBhfHwidW5kZWZpbmVkIj09PXR5cGVvZiBhfWZ1bmN0aW9uIGljKGEpe3JldHVybiAxMD5hPyIwIithLnRvU3RyaW5nKDEwKTphLnRvU3RyaW5nKDEwKX12YXIgamM9IkphbiBGZWIgTWFyIEFwciBNYXkgSnVuIEp1bCBBdWcgU2VwIE9jdCBOb3YgRGVjIi5zcGxpdCgiICIpOwogIGZ1bmN0aW9uIGtjKCl7dmFyIGE9bmV3IERhdGUsYj1baWMoYS5nZXRIb3VycygpKSxpYyhhLmdldE1pbnV0ZXMoKSksaWMoYS5nZXRTZWNvbmRzKCkpXS5qb2luKCI6Iik7cmV0dXJuIFthLmdldERhdGUoKSxqY1thLmdldE1vbnRoKCldLGJdLmpvaW4oIiAiKX1mdW5jdGlvbiBQYihhLGIpe2lmKCFifHwhSGIoYikpcmV0dXJuIGE7Zm9yKHZhciBjPU9iamVjdC5rZXlzKGIpLGQ9Yy5sZW5ndGg7ZC0tOylhW2NbZF1dPWJbY1tkXV07cmV0dXJuIGF9CiAgdmFyIGxjPXtpbmhlcml0czpEYixfZXh0ZW5kOlBiLGxvZzpmdW5jdGlvbigpe2NvbnNvbGUubG9nKCIlcyAtICVzIixrYygpLEZiLmFwcGx5KG51bGwsYXJndW1lbnRzKSk7fSxpc0J1ZmZlcjpmdW5jdGlvbihhKXtyZXR1cm4gTmEoYSl9LGlzUHJpbWl0aXZlOmhjLGlzRnVuY3Rpb246VGIsaXNFcnJvcjpWYixpc0RhdGU6YmMsaXNPYmplY3Q6SGIsaXNSZWdFeHA6YWMsaXNVbmRlZmluZWQ6SmIsaXNTeW1ib2w6ZnVuY3Rpb24oYSl7cmV0dXJuICJzeW1ib2wiPT09dHlwZW9mIGF9LGlzU3RyaW5nOkdiLGlzTnVtYmVyOmdjLGlzTnVsbE9yVW5kZWZpbmVkOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hfSxpc051bGw6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PT1hfSxpc0Jvb2xlYW46T2IsaXNBcnJheTpjYyxpbnNwZWN0OkgsZGVwcmVjYXRlOkliLGZvcm1hdDpGYixkZWJ1Z2xvZzpNYn07CiAgZnVuY3Rpb24gbWMoYSxiKXtpZihhPT09YilyZXR1cm4gMDtmb3IodmFyIGM9YS5sZW5ndGgsZD1iLmxlbmd0aCxlPTAsZj1NYXRoLm1pbihjLGQpO2U8ZjsrK2UpaWYoYVtlXSE9PWJbZV0pe2M9YVtlXTtkPWJbZV07YnJlYWt9cmV0dXJuIGM8ZD8tMTpkPGM/MTowfXZhciBuYz1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LG9jPU9iamVjdC5rZXlzfHxmdW5jdGlvbihhKXt2YXIgYj1bXSxjO2ZvcihjIGluIGEpbmMuY2FsbChhLGMpJiZiLnB1c2goYyk7cmV0dXJuIGJ9LHBjPUFycmF5LnByb3RvdHlwZS5zbGljZSxxYztmdW5jdGlvbiByYygpe3JldHVybiAidW5kZWZpbmVkIiE9PXR5cGVvZiBxYz9xYzpxYz1mdW5jdGlvbigpe3JldHVybiAiZm9vIj09PWZ1bmN0aW9uKCl7fS5uYW1lfSgpfQogIGZ1bmN0aW9uIHNjKGEpe3JldHVybiBOYShhKXx8ImZ1bmN0aW9uIiE9PXR5cGVvZiBsYS5BcnJheUJ1ZmZlcj8hMToiZnVuY3Rpb24iPT09dHlwZW9mIEFycmF5QnVmZmVyLmlzVmlldz9BcnJheUJ1ZmZlci5pc1ZpZXcoYSk6YT9hIGluc3RhbmNlb2YgRGF0YVZpZXd8fGEuYnVmZmVyJiZhLmJ1ZmZlciBpbnN0YW5jZW9mIEFycmF5QnVmZmVyPyEwOiExOiExfWZ1bmN0aW9uIEkoYSxiKXthfHxKKGEsITAsYiwiPT0iLHRjKTt9dmFyIHVjPS9ccypmdW5jdGlvblxzKyhbXlwoXHNdKilccyovO2Z1bmN0aW9uIHZjKGEpe2lmKFRiKGEpKXJldHVybiByYygpP2EubmFtZTooYT1hLnRvU3RyaW5nKCkubWF0Y2godWMpKSYmYVsxXX1JLkFzc2VydGlvbkVycm9yPXdjOwogIGZ1bmN0aW9uIHdjKGEpe3RoaXMubmFtZT0iQXNzZXJ0aW9uRXJyb3IiO3RoaXMuYWN0dWFsPWEuYWN0dWFsO3RoaXMuZXhwZWN0ZWQ9YS5leHBlY3RlZDt0aGlzLm9wZXJhdG9yPWEub3BlcmF0b3I7YS5tZXNzYWdlPyh0aGlzLm1lc3NhZ2U9YS5tZXNzYWdlLHRoaXMuZ2VuZXJhdGVkTWVzc2FnZT0hMSk6KHRoaXMubWVzc2FnZT14Yyh5Yyh0aGlzLmFjdHVhbCksMTI4KSsiICIrdGhpcy5vcGVyYXRvcisiICIreGMoeWModGhpcy5leHBlY3RlZCksMTI4KSx0aGlzLmdlbmVyYXRlZE1lc3NhZ2U9ITApO3ZhciBiPWEuc3RhY2tTdGFydEZ1bmN0aW9ufHxKO0Vycm9yLmNhcHR1cmVTdGFja1RyYWNlP0Vycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsYik6KGE9RXJyb3IoKSxhLnN0YWNrJiYoYT1hLnN0YWNrLGI9dmMoYiksYj1hLmluZGV4T2YoIlxuIitiKSwwPD1iJiYoYj1hLmluZGV4T2YoIlxuIixiKzEpLGE9YS5zdWJzdHJpbmcoYisxKSksdGhpcy5zdGFjaz1hKSk7fURiKHdjLEVycm9yKTsKICBmdW5jdGlvbiB4YyhhLGIpe3JldHVybiAic3RyaW5nIj09PXR5cGVvZiBhP2EubGVuZ3RoPGI/YTphLnNsaWNlKDAsYik6YX1mdW5jdGlvbiB5YyhhKXtpZihyYygpfHwhVGIoYSkpcmV0dXJuIEgoYSk7YT12YyhhKTtyZXR1cm4gIltGdW5jdGlvbiIrKGE/IjogIithOiIiKSsiXSJ9ZnVuY3Rpb24gSihhLGIsYyxkLGUpe3Rocm93IG5ldyB3Yyh7bWVzc2FnZTpjLGFjdHVhbDphLGV4cGVjdGVkOmIsb3BlcmF0b3I6ZCxzdGFja1N0YXJ0RnVuY3Rpb246ZX0pO31JLmZhaWw9SjtmdW5jdGlvbiB0YyhhLGIpe2F8fEooYSwhMCxiLCI9PSIsdGMpO31JLm9rPXRjO0kuZXF1YWw9emM7ZnVuY3Rpb24gemMoYSxiLGMpe2EhPWImJkooYSxiLGMsIj09Iix6Yyk7fUkubm90RXF1YWw9QWM7ZnVuY3Rpb24gQWMoYSxiLGMpe2E9PWImJkooYSxiLGMsIiE9IixBYyk7fUkuZGVlcEVxdWFsPUJjO2Z1bmN0aW9uIEJjKGEsYixjKXtDYyhhLGIsITEpfHxKKGEsYixjLCJkZWVwRXF1YWwiLEJjKTt9CiAgSS5kZWVwU3RyaWN0RXF1YWw9RGM7ZnVuY3Rpb24gRGMoYSxiLGMpe0NjKGEsYiwhMCl8fEooYSxiLGMsImRlZXBTdHJpY3RFcXVhbCIsRGMpO30KICBmdW5jdGlvbiBDYyhhLGIsYyxkKXtpZihhPT09YilyZXR1cm4gITA7aWYoTmEoYSkmJk5hKGIpKXJldHVybiAwPT09bWMoYSxiKTtpZihiYyhhKSYmYmMoYikpcmV0dXJuIGEuZ2V0VGltZSgpPT09Yi5nZXRUaW1lKCk7aWYoYWMoYSkmJmFjKGIpKXJldHVybiBhLnNvdXJjZT09PWIuc291cmNlJiZhLmdsb2JhbD09PWIuZ2xvYmFsJiZhLm11bHRpbGluZT09PWIubXVsdGlsaW5lJiZhLmxhc3RJbmRleD09PWIubGFzdEluZGV4JiZhLmlnbm9yZUNhc2U9PT1iLmlnbm9yZUNhc2U7aWYobnVsbCE9PWEmJiJvYmplY3QiPT09dHlwZW9mIGF8fG51bGwhPT1iJiYib2JqZWN0Ij09PXR5cGVvZiBiKXtpZighc2MoYSl8fCFzYyhiKXx8T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpIT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGIpfHxhIGluc3RhbmNlb2YgRmxvYXQzMkFycmF5fHxhIGluc3RhbmNlb2YgRmxvYXQ2NEFycmF5KXtpZihOYShhKSE9PU5hKGIpKXJldHVybiAhMTsKICBkPWR8fHthY3R1YWw6W10sZXhwZWN0ZWQ6W119O3ZhciBlPWQuYWN0dWFsLmluZGV4T2YoYSk7aWYoLTEhPT1lJiZlPT09ZC5leHBlY3RlZC5pbmRleE9mKGIpKXJldHVybiAhMDtkLmFjdHVhbC5wdXNoKGEpO2QuZXhwZWN0ZWQucHVzaChiKTtyZXR1cm4gRWMoYSxiLGMsZCl9cmV0dXJuIDA9PT1tYyhuZXcgVWludDhBcnJheShhLmJ1ZmZlciksbmV3IFVpbnQ4QXJyYXkoYi5idWZmZXIpKX1yZXR1cm4gYz9hPT09YjphPT1ifWZ1bmN0aW9uIEZjKGEpe3JldHVybiAiW29iamVjdCBBcmd1bWVudHNdIj09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpfQogIGZ1bmN0aW9uIEVjKGEsYixjLGQpe2lmKG51bGw9PT1hfHx2b2lkIDA9PT1hfHxudWxsPT09Ynx8dm9pZCAwPT09YilyZXR1cm4gITE7aWYoaGMoYSl8fGhjKGIpKXJldHVybiBhPT09YjtpZihjJiZPYmplY3QuZ2V0UHJvdG90eXBlT2YoYSkhPT1PYmplY3QuZ2V0UHJvdG90eXBlT2YoYikpcmV0dXJuICExO3ZhciBlPUZjKGEpLGY9RmMoYik7aWYoZSYmIWZ8fCFlJiZmKXJldHVybiAhMTtpZihlKXJldHVybiBhPXBjLmNhbGwoYSksYj1wYy5jYWxsKGIpLENjKGEsYixjKTtlPW9jKGEpO3ZhciBnPW9jKGIpO2lmKGUubGVuZ3RoIT09Zy5sZW5ndGgpcmV0dXJuICExO2Uuc29ydCgpO2cuc29ydCgpO2ZvcihmPWUubGVuZ3RoLTE7MDw9ZjtmLS0paWYoZVtmXSE9PWdbZl0pcmV0dXJuICExO2ZvcihmPWUubGVuZ3RoLTE7MDw9ZjtmLS0paWYoZz1lW2ZdLCFDYyhhW2ddLGJbZ10sYyxkKSlyZXR1cm4gITE7cmV0dXJuICEwfUkubm90RGVlcEVxdWFsPUdjOwogIGZ1bmN0aW9uIEdjKGEsYixjKXtDYyhhLGIsITEpJiZKKGEsYixjLCJub3REZWVwRXF1YWwiLEdjKTt9SS5ub3REZWVwU3RyaWN0RXF1YWw9SGM7ZnVuY3Rpb24gSGMoYSxiLGMpe0NjKGEsYiwhMCkmJkooYSxiLGMsIm5vdERlZXBTdHJpY3RFcXVhbCIsSGMpO31JLnN0cmljdEVxdWFsPUljO2Z1bmN0aW9uIEljKGEsYixjKXthIT09YiYmSihhLGIsYywiPT09IixJYyk7fUkubm90U3RyaWN0RXF1YWw9SmM7ZnVuY3Rpb24gSmMoYSxiLGMpe2E9PT1iJiZKKGEsYixjLCIhPT0iLEpjKTt9ZnVuY3Rpb24gS2MoYSxiKXtpZighYXx8IWIpcmV0dXJuICExO2lmKCJbb2JqZWN0IFJlZ0V4cF0iPT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYikpcmV0dXJuIGIudGVzdChhKTt0cnl7aWYoYSBpbnN0YW5jZW9mIGIpcmV0dXJuICEwfWNhdGNoKGMpe31yZXR1cm4gRXJyb3IuaXNQcm90b3R5cGVPZihiKT8hMTohMD09PWIuY2FsbCh7fSxhKX0KICBmdW5jdGlvbiBMYyhhLGIsYyxkKXtpZigiZnVuY3Rpb24iIT09dHlwZW9mIGIpdGhyb3cgbmV3IFR5cGVFcnJvcignImJsb2NrIiBhcmd1bWVudCBtdXN0IGJlIGEgZnVuY3Rpb24nKTsic3RyaW5nIj09PXR5cGVvZiBjJiYoZD1jLGM9bnVsbCk7dHJ5e2IoKTt9Y2F0Y2goaCl7dmFyIGU9aDt9Yj1lO2Q9KGMmJmMubmFtZT8iICgiK2MubmFtZSsiKS4iOiIuIikrKGQ/IiAiK2Q6Ii4iKTthJiYhYiYmSihiLGMsIk1pc3NpbmcgZXhwZWN0ZWQgZXhjZXB0aW9uIitkKTtlPSJzdHJpbmciPT09dHlwZW9mIGQ7dmFyIGY9IWEmJlZiKGIpLGc9IWEmJmImJiFjOyhmJiZlJiZLYyhiLGMpfHxnKSYmSihiLGMsIkdvdCB1bndhbnRlZCBleGNlcHRpb24iK2QpO2lmKGEmJmImJmMmJiFLYyhiLGMpfHwhYSYmYil0aHJvdyBiO31JLnRocm93cz1NYztmdW5jdGlvbiBNYyhhLGIsYyl7TGMoITAsYSxiLGMpO31JLmRvZXNOb3RUaHJvdz1OYztmdW5jdGlvbiBOYyhhLGIsYyl7TGMoITEsYSxiLGMpO30KICBJLmlmRXJyb3I9T2M7ZnVuY3Rpb24gT2MoYSl7aWYoYSl0aHJvdyBhO30KICB2YXIgUGM9dShmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoYSl7cmV0dXJuIGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYil7Zm9yKHZhciBjPVtdLGU9MTtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKWNbZS0xXT1hcmd1bWVudHNbZV07Yz1hLmNhbGwodGhpcyxkKGIsYykpfHx0aGlzO2MuY29kZT1iO2NbaF09YjtjLm5hbWU9YS5wcm90b3R5cGUubmFtZSsiIFsiK2NbaF0rIl0iO3JldHVybiBjfWcoYixhKTtyZXR1cm4gYn0oYSl9ZnVuY3Rpb24gZChhLGIpe0kuc3RyaWN0RXF1YWwodHlwZW9mIGEsInN0cmluZyIpO3ZhciBjPWtbYV07SShjLCJBbiBpbnZhbGlkIGVycm9yIG1lc3NhZ2Uga2V5IHdhcyB1c2VkOiAiK2ErIi4iKTtpZigiZnVuY3Rpb24iPT09dHlwZW9mIGMpYT1jO2Vsc2Uge2E9bGMuZm9ybWF0O2lmKHZvaWQgMD09PWJ8fDA9PT1iLmxlbmd0aClyZXR1cm4gYztiLnVuc2hpZnQoYyk7fXJldHVybiBTdHJpbmcoYS5hcHBseShudWxsLGIpKX1mdW5jdGlvbiBlKGEsYil7a1thXT0KICAiZnVuY3Rpb24iPT09dHlwZW9mIGI/YjpTdHJpbmcoYik7fWZ1bmN0aW9uIGYoYSxiKXtJKGEsImV4cGVjdGVkIGlzIHJlcXVpcmVkIik7SSgic3RyaW5nIj09PXR5cGVvZiBiLCJ0aGluZyBpcyByZXF1aXJlZCIpO2lmKEFycmF5LmlzQXJyYXkoYSkpe3ZhciBjPWEubGVuZ3RoO0koMDxjLCJBdCBsZWFzdCBvbmUgZXhwZWN0ZWQgdmFsdWUgbmVlZHMgdG8gYmUgc3BlY2lmaWVkIik7YT1hLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gU3RyaW5nKGEpfSk7cmV0dXJuIDI8Yz8ib25lIG9mICIrYisiICIrYS5zbGljZSgwLGMtMSkuam9pbigiLCAiKSsiLCBvciAiK2FbYy0xXToyPT09Yz8ib25lIG9mICIrYisiICIrYVswXSsiIG9yICIrYVsxXToib2YgIitiKyIgIithWzBdfXJldHVybiAib2YgIitiKyIgIitTdHJpbmcoYSl9dmFyIGc9bCYmbC5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShiLGMpe2E9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YKICBBcnJheSYmZnVuY3Rpb24oYSxiKXthLl9fcHJvdG9fXz1iO318fGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjIGluIGIpYi5oYXNPd25Qcm9wZXJ0eShjKSYmKGFbY109YltjXSk7fTtyZXR1cm4gYShiLGMpfXJldHVybiBmdW5jdGlvbihiLGMpe2Z1bmN0aW9uIGQoKXt0aGlzLmNvbnN0cnVjdG9yPWI7fWEoYixjKTtiLnByb3RvdHlwZT1udWxsPT09Yz9PYmplY3QuY3JlYXRlKGMpOihkLnByb3RvdHlwZT1jLnByb3RvdHlwZSxuZXcgZCk7fX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkoYiwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGg9InVuZGVmaW5lZCI9PT10eXBlb2YgU3ltYm9sPyJfa0NvZGUiOlN5bWJvbCgiY29kZSIpLGs9e307YT1mdW5jdGlvbihhKXtmdW5jdGlvbiBjKGMpe2lmKCJvYmplY3QiIT09dHlwZW9mIGN8fG51bGw9PT1jKXRocm93IG5ldyBiLlR5cGVFcnJvcigiRVJSX0lOVkFMSURfQVJHX1RZUEUiLCJvcHRpb25zIiwib2JqZWN0Iik7dmFyIGQ9Yy5tZXNzYWdlPwogIGEuY2FsbCh0aGlzLGMubWVzc2FnZSl8fHRoaXM6YS5jYWxsKHRoaXMsbGMuaW5zcGVjdChjLmFjdHVhbCkuc2xpY2UoMCwxMjgpKyIgIisoYy5vcGVyYXRvcisiICIrbGMuaW5zcGVjdChjLmV4cGVjdGVkKS5zbGljZSgwLDEyOCkpKXx8dGhpcztkLmdlbmVyYXRlZE1lc3NhZ2U9IWMubWVzc2FnZTtkLm5hbWU9IkFzc2VydGlvbkVycm9yIFtFUlJfQVNTRVJUSU9OXSI7ZC5jb2RlPSJFUlJfQVNTRVJUSU9OIjtkLmFjdHVhbD1jLmFjdHVhbDtkLmV4cGVjdGVkPWMuZXhwZWN0ZWQ7ZC5vcGVyYXRvcj1jLm9wZXJhdG9yO2IuRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UoZCxjLnN0YWNrU3RhcnRGdW5jdGlvbik7cmV0dXJuIGR9ZyhjLGEpO3JldHVybiBjfShsLkVycm9yKTtiLkFzc2VydGlvbkVycm9yPWE7Yi5tZXNzYWdlPWQ7Yi5FPWU7Yi5FcnJvcj1jKGwuRXJyb3IpO2IuVHlwZUVycm9yPWMobC5UeXBlRXJyb3IpO2IuUmFuZ2VFcnJvcj1jKGwuUmFuZ2VFcnJvcik7ZSgiRVJSX0FSR19OT1RfSVRFUkFCTEUiLAogICIlcyBtdXN0IGJlIGl0ZXJhYmxlIik7ZSgiRVJSX0FTU0VSVElPTiIsIiVzIik7ZSgiRVJSX0JVRkZFUl9PVVRfT0ZfQk9VTkRTIixmdW5jdGlvbihhLGIpe3JldHVybiBiPyJBdHRlbXB0IHRvIHdyaXRlIG91dHNpZGUgYnVmZmVyIGJvdW5kcyI6JyInK2ErJyIgaXMgb3V0c2lkZSBvZiBidWZmZXIgYm91bmRzJ30pO2UoIkVSUl9DSElMRF9DTE9TRURfQkVGT1JFX1JFUExZIiwiQ2hpbGQgY2xvc2VkIGJlZm9yZSByZXBseSByZWNlaXZlZCIpO2UoIkVSUl9DT05TT0xFX1dSSVRBQkxFX1NUUkVBTSIsIkNvbnNvbGUgZXhwZWN0cyBhIHdyaXRhYmxlIHN0cmVhbSBpbnN0YW5jZSBmb3IgJXMiKTtlKCJFUlJfQ1BVX1VTQUdFIiwiVW5hYmxlIHRvIG9idGFpbiBjcHUgdXNhZ2UgJXMiKTtlKCJFUlJfRE5TX1NFVF9TRVJWRVJTX0ZBSUxFRCIsZnVuY3Rpb24oYSxiKXtyZXR1cm4gJ2MtYXJlcyBmYWlsZWQgdG8gc2V0IHNlcnZlcnM6ICInK2ErJyIgWycrYisiXSJ9KTtlKCJFUlJfRkFMU1lfVkFMVUVfUkVKRUNUSU9OIiwKICAiUHJvbWlzZSB3YXMgcmVqZWN0ZWQgd2l0aCBmYWxzeSB2YWx1ZSIpO2UoIkVSUl9FTkNPRElOR19OT1RfU1VQUE9SVEVEIixmdW5jdGlvbihhKXtyZXR1cm4gJ1RoZSAiJythKyciIGVuY29kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnfSk7ZSgiRVJSX0VOQ09ESU5HX0lOVkFMSURfRU5DT0RFRF9EQVRBIixmdW5jdGlvbihhKXtyZXR1cm4gIlRoZSBlbmNvZGVkIGRhdGEgd2FzIG5vdCB2YWxpZCBmb3IgZW5jb2RpbmcgIithfSk7ZSgiRVJSX0hUVFBfSEVBREVSU19TRU5UIiwiQ2Fubm90IHJlbmRlciBoZWFkZXJzIGFmdGVyIHRoZXkgYXJlIHNlbnQgdG8gdGhlIGNsaWVudCIpO2UoIkVSUl9IVFRQX0lOVkFMSURfU1RBVFVTX0NPREUiLCJJbnZhbGlkIHN0YXR1cyBjb2RlOiAlcyIpO2UoIkVSUl9IVFRQX1RSQUlMRVJfSU5WQUxJRCIsIlRyYWlsZXJzIGFyZSBpbnZhbGlkIHdpdGggdGhpcyB0cmFuc2ZlciBlbmNvZGluZyIpO2UoIkVSUl9JTkRFWF9PVVRfT0ZfUkFOR0UiLCJJbmRleCBvdXQgb2YgcmFuZ2UiKTsKICBlKCJFUlJfSU5WQUxJRF9BUkdfVFlQRSIsZnVuY3Rpb24oYSxiLGMpe0koYSwibmFtZSBpcyByZXF1aXJlZCIpO2lmKGIuaW5jbHVkZXMoIm5vdCAiKSl7dmFyIGQ9Im11c3Qgbm90IGJlIjtiPWIuc3BsaXQoIm5vdCAiKVsxXTt9ZWxzZSBkPSJtdXN0IGJlIjtpZihBcnJheS5pc0FycmF5KGEpKWQ9IlRoZSAiK2EubWFwKGZ1bmN0aW9uKGEpe3JldHVybiAnIicrYSsnIid9KS5qb2luKCIsICIpKyIgYXJndW1lbnRzICIrZCsiICIrZihiLCJ0eXBlIik7ZWxzZSBpZihhLmluY2x1ZGVzKCIgYXJndW1lbnQiKSlkPSJUaGUgIithKyIgIitkKyIgIitmKGIsInR5cGUiKTtlbHNlIHt2YXIgZT1hLmluY2x1ZGVzKCIuIik/InByb3BlcnR5IjoiYXJndW1lbnQiO2Q9J1RoZSAiJythKyciICcrZSsiICIrZCsiICIrZihiLCJ0eXBlIik7fTM8PWFyZ3VtZW50cy5sZW5ndGgmJihkKz0iLiBSZWNlaXZlZCB0eXBlICIrKG51bGwhPT1jP3R5cGVvZiBjOiJudWxsIikpO3JldHVybiBkfSk7ZSgiRVJSX0lOVkFMSURfQVJSQVlfTEVOR1RIIiwKICBmdW5jdGlvbihhLGIsYyl7SS5zdHJpY3RFcXVhbCh0eXBlb2YgYywibnVtYmVyIik7cmV0dXJuICdUaGUgYXJyYXkgIicrYSsnIiAobGVuZ3RoICcrYysiKSBtdXN0IGJlIG9mIGxlbmd0aCAiK2IrIi4ifSk7ZSgiRVJSX0lOVkFMSURfQlVGRkVSX1NJWkUiLCJCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgJXMiKTtlKCJFUlJfSU5WQUxJRF9DQUxMQkFDSyIsIkNhbGxiYWNrIG11c3QgYmUgYSBmdW5jdGlvbiIpO2UoIkVSUl9JTlZBTElEX0NIQVIiLCJJbnZhbGlkIGNoYXJhY3RlciBpbiAlcyIpO2UoIkVSUl9JTlZBTElEX0NVUlNPUl9QT1MiLCJDYW5ub3Qgc2V0IGN1cnNvciByb3cgd2l0aG91dCBzZXR0aW5nIGl0cyBjb2x1bW4iKTtlKCJFUlJfSU5WQUxJRF9GRCIsJyJmZCIgbXVzdCBiZSBhIHBvc2l0aXZlIGludGVnZXI6ICVzJyk7ZSgiRVJSX0lOVkFMSURfRklMRV9VUkxfSE9TVCIsJ0ZpbGUgVVJMIGhvc3QgbXVzdCBiZSAibG9jYWxob3N0IiBvciBlbXB0eSBvbiAlcycpOwogIGUoIkVSUl9JTlZBTElEX0ZJTEVfVVJMX1BBVEgiLCJGaWxlIFVSTCBwYXRoICVzIik7ZSgiRVJSX0lOVkFMSURfSEFORExFX1RZUEUiLCJUaGlzIGhhbmRsZSB0eXBlIGNhbm5vdCBiZSBzZW50Iik7ZSgiRVJSX0lOVkFMSURfSVBfQUREUkVTUyIsIkludmFsaWQgSVAgYWRkcmVzczogJXMiKTtlKCJFUlJfSU5WQUxJRF9PUFRfVkFMVUUiLGZ1bmN0aW9uKGEsYil7cmV0dXJuICdUaGUgdmFsdWUgIicrU3RyaW5nKGIpKyciIGlzIGludmFsaWQgZm9yIG9wdGlvbiAiJythKyciJ30pO2UoIkVSUl9JTlZBTElEX09QVF9WQUxVRV9FTkNPRElORyIsZnVuY3Rpb24oYSl7cmV0dXJuICdUaGUgdmFsdWUgIicrU3RyaW5nKGEpKyciIGlzIGludmFsaWQgZm9yIG9wdGlvbiAiZW5jb2RpbmciJ30pO2UoIkVSUl9JTlZBTElEX1JFUExfRVZBTF9DT05GSUciLCdDYW5ub3Qgc3BlY2lmeSBib3RoICJicmVha0V2YWxPblNpZ2ludCIgYW5kICJldmFsIiBmb3IgUkVQTCcpO2UoIkVSUl9JTlZBTElEX1NZTkNfRk9SS19JTlBVVCIsCiAgIkFzeW5jaHJvbm91cyBmb3JrcyBkbyBub3Qgc3VwcG9ydCBCdWZmZXIsIFVpbnQ4QXJyYXkgb3Igc3RyaW5nIGlucHV0OiAlcyIpO2UoIkVSUl9JTlZBTElEX1RISVMiLCdWYWx1ZSBvZiAidGhpcyIgbXVzdCBiZSBvZiB0eXBlICVzJyk7ZSgiRVJSX0lOVkFMSURfVFVQTEUiLCIlcyBtdXN0IGJlIGFuIGl0ZXJhYmxlICVzIHR1cGxlIik7ZSgiRVJSX0lOVkFMSURfVVJMIiwiSW52YWxpZCBVUkw6ICVzIik7ZSgiRVJSX0lOVkFMSURfVVJMX1NDSEVNRSIsZnVuY3Rpb24oYSl7cmV0dXJuICJUaGUgVVJMIG11c3QgYmUgIitmKGEsInNjaGVtZSIpfSk7ZSgiRVJSX0lQQ19DSEFOTkVMX0NMT1NFRCIsIkNoYW5uZWwgY2xvc2VkIik7ZSgiRVJSX0lQQ19ESVNDT05ORUNURUQiLCJJUEMgY2hhbm5lbCBpcyBhbHJlYWR5IGRpc2Nvbm5lY3RlZCIpO2UoIkVSUl9JUENfT05FX1BJUEUiLCJDaGlsZCBwcm9jZXNzIGNhbiBoYXZlIG9ubHkgb25lIElQQyBwaXBlIik7ZSgiRVJSX0lQQ19TWU5DX0ZPUksiLAogICJJUEMgY2Fubm90IGJlIHVzZWQgd2l0aCBzeW5jaHJvbm91cyBmb3JrcyIpO2UoIkVSUl9NSVNTSU5HX0FSR1MiLGZ1bmN0aW9uKCl7Zm9yKHZhciBhPVtdLGI9MDtiPGFyZ3VtZW50cy5sZW5ndGg7YisrKWFbYl09YXJndW1lbnRzW2JdO0koMDxhLmxlbmd0aCwiQXQgbGVhc3Qgb25lIGFyZyBuZWVkcyB0byBiZSBzcGVjaWZpZWQiKTtiPSJUaGUgIjt2YXIgYz1hLmxlbmd0aDthPWEubWFwKGZ1bmN0aW9uKGEpe3JldHVybiAnIicrYSsnIid9KTtzd2l0Y2goYyl7Y2FzZSAxOmIrPWFbMF0rIiBhcmd1bWVudCI7YnJlYWs7Y2FzZSAyOmIrPWFbMF0rIiBhbmQgIithWzFdKyIgYXJndW1lbnRzIjticmVhaztkZWZhdWx0OmIrPWEuc2xpY2UoMCxjLTEpLmpvaW4oIiwgIiksYis9IiwgYW5kICIrYVtjLTFdKyIgYXJndW1lbnRzIjt9cmV0dXJuIGIrIiBtdXN0IGJlIHNwZWNpZmllZCJ9KTtlKCJFUlJfTVVMVElQTEVfQ0FMTEJBQ0siLCJDYWxsYmFjayBjYWxsZWQgbXVsdGlwbGUgdGltZXMiKTsKICBlKCJFUlJfTkFQSV9DT05TX0ZVTkNUSU9OIiwiQ29uc3RydWN0b3IgbXVzdCBiZSBhIGZ1bmN0aW9uIik7ZSgiRVJSX05BUElfQ09OU19QUk9UT1RZUEVfT0JKRUNUIiwiQ29uc3RydWN0b3IucHJvdG90eXBlIG11c3QgYmUgYW4gb2JqZWN0Iik7ZSgiRVJSX05PX0NSWVBUTyIsIk5vZGUuanMgaXMgbm90IGNvbXBpbGVkIHdpdGggT3BlblNTTCBjcnlwdG8gc3VwcG9ydCIpO2UoIkVSUl9OT19MT05HRVJfU1VQUE9SVEVEIiwiJXMgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZCIpO2UoIkVSUl9QQVJTRV9ISVNUT1JZX0RBVEEiLCJDb3VsZCBub3QgcGFyc2UgaGlzdG9yeSBkYXRhIGluICVzIik7ZSgiRVJSX1NPQ0tFVF9BTFJFQURZX0JPVU5EIiwiU29ja2V0IGlzIGFscmVhZHkgYm91bmQiKTtlKCJFUlJfU09DS0VUX0JBRF9QT1JUIiwiUG9ydCBzaG91bGQgYmUgPiAwIGFuZCA8IDY1NTM2Iik7ZSgiRVJSX1NPQ0tFVF9CQURfVFlQRSIsIkJhZCBzb2NrZXQgdHlwZSBzcGVjaWZpZWQuIFZhbGlkIHR5cGVzIGFyZTogdWRwNCwgdWRwNiIpOwogIGUoIkVSUl9TT0NLRVRfQ0FOTk9UX1NFTkQiLCJVbmFibGUgdG8gc2VuZCBkYXRhIik7ZSgiRVJSX1NPQ0tFVF9DTE9TRUQiLCJTb2NrZXQgaXMgY2xvc2VkIik7ZSgiRVJSX1NPQ0tFVF9ER1JBTV9OT1RfUlVOTklORyIsIk5vdCBydW5uaW5nIik7ZSgiRVJSX1NUREVSUl9DTE9TRSIsInByb2Nlc3Muc3RkZXJyIGNhbm5vdCBiZSBjbG9zZWQiKTtlKCJFUlJfU1RET1VUX0NMT1NFIiwicHJvY2Vzcy5zdGRvdXQgY2Fubm90IGJlIGNsb3NlZCIpO2UoIkVSUl9TVFJFQU1fV1JBUCIsIlN0cmVhbSBoYXMgU3RyaW5nRGVjb2RlciBzZXQgb3IgaXMgaW4gb2JqZWN0TW9kZSIpO2UoIkVSUl9UTFNfQ0VSVF9BTFROQU1FX0lOVkFMSUQiLCJIb3N0bmFtZS9JUCBkb2VzIG5vdCBtYXRjaCBjZXJ0aWZpY2F0ZSdzIGFsdG5hbWVzOiAlcyIpO2UoIkVSUl9UTFNfREhfUEFSQU1fU0laRSIsZnVuY3Rpb24oYSl7cmV0dXJuICJESCBwYXJhbWV0ZXIgc2l6ZSAiK2ErIiBpcyBsZXNzIHRoYW4gMjA0OCJ9KTsKICBlKCJFUlJfVExTX0hBTkRTSEFLRV9USU1FT1VUIiwiVExTIGhhbmRzaGFrZSB0aW1lb3V0Iik7ZSgiRVJSX1RMU19SRU5FR09USUFUSU9OX0ZBSUxFRCIsIkZhaWxlZCB0byByZW5lZ290aWF0ZSIpO2UoIkVSUl9UTFNfUkVRVUlSRURfU0VSVkVSX05BTUUiLCcic2VydmVybmFtZSIgaXMgcmVxdWlyZWQgcGFyYW1ldGVyIGZvciBTZXJ2ZXIuYWRkQ29udGV4dCcpO2UoIkVSUl9UTFNfU0VTU0lPTl9BVFRBQ0siLCJUU0wgc2Vzc2lvbiByZW5lZ290aWF0aW9uIGF0dGFjayBkZXRlY3RlZCIpO2UoIkVSUl9UUkFOU0ZPUk1fQUxSRUFEWV9UUkFOU0ZPUk1JTkciLCJDYWxsaW5nIHRyYW5zZm9ybSBkb25lIHdoZW4gc3RpbGwgdHJhbnNmb3JtaW5nIik7ZSgiRVJSX1RSQU5TRk9STV9XSVRIX0xFTkdUSF8wIiwiQ2FsbGluZyB0cmFuc2Zvcm0gZG9uZSB3aGVuIHdyaXRhYmxlU3RhdGUubGVuZ3RoICE9IDAiKTtlKCJFUlJfVU5LTk9XTl9FTkNPRElORyIsIlVua25vd24gZW5jb2Rpbmc6ICVzIik7CiAgZSgiRVJSX1VOS05PV05fU0lHTkFMIiwiVW5rbm93biBzaWduYWw6ICVzIik7ZSgiRVJSX1VOS05PV05fU1RESU5fVFlQRSIsIlVua25vd24gc3RkaW4gZmlsZSB0eXBlIik7ZSgiRVJSX1VOS05PV05fU1RSRUFNX1RZUEUiLCJVbmtub3duIHN0cmVhbSBmaWxlIHR5cGUiKTtlKCJFUlJfVjhCUkVBS0lURVJBVE9SIiwiRnVsbCBJQ1UgZGF0YSBub3QgaW5zdGFsbGVkLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL25vZGVqcy9ub2RlL3dpa2kvSW50bCIpO30pO3QoUGMpOwogIHZhciBLJDE9dShmdW5jdGlvbihhLGIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShiLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTtiLkVOQ09ESU5HX1VURjg9InV0ZjgiO2IuYXNzZXJ0RW5jb2Rpbmc9ZnVuY3Rpb24oYSl7aWYoYSYmIUYuQnVmZmVyLmlzRW5jb2RpbmcoYSkpdGhyb3cgbmV3IFBjLlR5cGVFcnJvcigiRVJSX0lOVkFMSURfT1BUX1ZBTFVFX0VOQ09ESU5HIixhKTt9O2Iuc3RyVG9FbmNvZGluZz1mdW5jdGlvbihhLGQpe3JldHVybiBkJiZkIT09Yi5FTkNPRElOR19VVEY4PyJidWZmZXIiPT09ZD9uZXcgRi5CdWZmZXIoYSk6KG5ldyBGLkJ1ZmZlcihhKSkudG9TdHJpbmcoZCk6YX07fSk7dChLJDEpOwogIHZhciBRYz11KGZ1bmN0aW9uKGEsYil7T2JqZWN0LmRlZmluZVByb3BlcnR5KGIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBjPXcuY29uc3RhbnRzLlNfSUZNVCxkPXcuY29uc3RhbnRzLlNfSUZESVIsZT13LmNvbnN0YW50cy5TX0lGUkVHLGY9dy5jb25zdGFudHMuU19JRkJMSyxnPXcuY29uc3RhbnRzLlNfSUZDSFIsaD13LmNvbnN0YW50cy5TX0lGTE5LLGs9dy5jb25zdGFudHMuU19JRklGTyxwPXcuY29uc3RhbnRzLlNfSUZTT0NLO2E9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKCl7dGhpcy5uYW1lPSIiO3RoaXMubW9kZT0wO31hLmJ1aWxkPWZ1bmN0aW9uKGIsYyl7dmFyIGQ9bmV3IGEsZT1iLmdldE5vZGUoKS5tb2RlO2QubmFtZT1LJDEuc3RyVG9FbmNvZGluZyhiLmdldE5hbWUoKSxjKTtkLm1vZGU9ZTtyZXR1cm4gZH07YS5wcm90b3R5cGUuX2NoZWNrTW9kZVByb3BlcnR5PWZ1bmN0aW9uKGEpe3JldHVybiAodGhpcy5tb2RlJmMpPT09YX07YS5wcm90b3R5cGUuaXNEaXJlY3Rvcnk9CiAgZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hlY2tNb2RlUHJvcGVydHkoZCl9O2EucHJvdG90eXBlLmlzRmlsZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGVja01vZGVQcm9wZXJ0eShlKX07YS5wcm90b3R5cGUuaXNCbG9ja0RldmljZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGVja01vZGVQcm9wZXJ0eShmKX07YS5wcm90b3R5cGUuaXNDaGFyYWN0ZXJEZXZpY2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hlY2tNb2RlUHJvcGVydHkoZyl9O2EucHJvdG90eXBlLmlzU3ltYm9saWNMaW5rPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoZWNrTW9kZVByb3BlcnR5KGgpfTthLnByb3RvdHlwZS5pc0ZJRk89ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hlY2tNb2RlUHJvcGVydHkoayl9O2EucHJvdG90eXBlLmlzU29ja2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoZWNrTW9kZVByb3BlcnR5KHApfTtyZXR1cm4gYX0oKTtiLkRpcmVudD1hO2IuZGVmYXVsdD1hO30pOwogIHQoUWMpO2Z1bmN0aW9uIFJjKGEsYil7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aC0xOzA8PWQ7ZC0tKXt2YXIgZT1hW2RdOyIuIj09PWU/YS5zcGxpY2UoZCwxKToiLi4iPT09ZT8oYS5zcGxpY2UoZCwxKSxjKyspOmMmJihhLnNwbGljZShkLDEpLGMtLSk7fWlmKGIpZm9yKDtjLS07YylhLnVuc2hpZnQoIi4uIik7cmV0dXJuIGF9dmFyIFNjPS9eKFwvP3wpKFtcc1xTXSo/KSgoPzpcLnsxLDJ9fFteXC9dKz98KShcLlteLlwvXSp8KSkoPzpbXC9dKikkLzsKICBmdW5jdGlvbiBUYygpe2Zvcih2YXIgYT0iIixiPSExLGM9YXJndW1lbnRzLmxlbmd0aC0xOy0xPD1jJiYhYjtjLS0pe3ZhciBkPTA8PWM/YXJndW1lbnRzW2NdOiIvIjtpZigic3RyaW5nIiE9PXR5cGVvZiBkKXRocm93IG5ldyBUeXBlRXJyb3IoIkFyZ3VtZW50cyB0byBwYXRoLnJlc29sdmUgbXVzdCBiZSBzdHJpbmdzIik7ZCYmKGE9ZCsiLyIrYSxiPSIvIj09PWQuY2hhckF0KDApKTt9YT1SYyhVYyhhLnNwbGl0KCIvIiksZnVuY3Rpb24oYSl7cmV0dXJuICEhYX0pLCFiKS5qb2luKCIvIik7cmV0dXJuIChiPyIvIjoiIikrYXx8Ii4ifWZ1bmN0aW9uIFZjKGEpe3ZhciBiPVdjKGEpLGM9Ii8iPT09WGMoYSwtMSk7KGE9UmMoVWMoYS5zcGxpdCgiLyIpLGZ1bmN0aW9uKGEpe3JldHVybiAhIWF9KSwhYikuam9pbigiLyIpKXx8Ynx8KGE9Ii4iKTthJiZjJiYoYSs9Ii8iKTtyZXR1cm4gKGI/Ii8iOiIiKSthfWZ1bmN0aW9uIFdjKGEpe3JldHVybiAiLyI9PT1hLmNoYXJBdCgwKX0KICBmdW5jdGlvbiBZYyhhLGIpe2Z1bmN0aW9uIGMoYSl7Zm9yKHZhciBiPTA7YjxhLmxlbmd0aCYmIiI9PT1hW2JdO2IrKyk7Zm9yKHZhciBjPWEubGVuZ3RoLTE7MDw9YyYmIiI9PT1hW2NdO2MtLSk7cmV0dXJuIGI+Yz9bXTphLnNsaWNlKGIsYy1iKzEpfWE9VGMoYSkuc3Vic3RyKDEpO2I9VGMoYikuc3Vic3RyKDEpO2E9YyhhLnNwbGl0KCIvIikpO2I9YyhiLnNwbGl0KCIvIikpO2Zvcih2YXIgZD1NYXRoLm1pbihhLmxlbmd0aCxiLmxlbmd0aCksZT1kLGY9MDtmPGQ7ZisrKWlmKGFbZl0hPT1iW2ZdKXtlPWY7YnJlYWt9ZD1bXTtmb3IoZj1lO2Y8YS5sZW5ndGg7ZisrKWQucHVzaCgiLi4iKTtkPWQuY29uY2F0KGIuc2xpY2UoZSkpO3JldHVybiBkLmpvaW4oIi8iKX0KICB2YXIgWmM9e2V4dG5hbWU6ZnVuY3Rpb24oYSl7cmV0dXJuIFNjLmV4ZWMoYSkuc2xpY2UoMSlbM119LGJhc2VuYW1lOmZ1bmN0aW9uKGEsYil7YT1TYy5leGVjKGEpLnNsaWNlKDEpWzJdO2ImJmEuc3Vic3RyKC0xKmIubGVuZ3RoKT09PWImJihhPWEuc3Vic3RyKDAsYS5sZW5ndGgtYi5sZW5ndGgpKTtyZXR1cm4gYX0sZGlybmFtZTpmdW5jdGlvbihhKXt2YXIgYj1TYy5leGVjKGEpLnNsaWNlKDEpO2E9YlswXTtiPWJbMV07aWYoIWEmJiFiKXJldHVybiAiLiI7YiYmKGI9Yi5zdWJzdHIoMCxiLmxlbmd0aC0xKSk7cmV0dXJuIGErYn0sc2VwOiIvIixkZWxpbWl0ZXI6IjoiLHJlbGF0aXZlOlljLGpvaW46ZnVuY3Rpb24oKXt2YXIgYT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMCk7cmV0dXJuIFZjKFVjKGEsZnVuY3Rpb24oYSl7aWYoInN0cmluZyIhPT10eXBlb2YgYSl0aHJvdyBuZXcgVHlwZUVycm9yKCJBcmd1bWVudHMgdG8gcGF0aC5qb2luIG11c3QgYmUgc3RyaW5ncyIpOwogIHJldHVybiBhfSkuam9pbigiLyIpKX0saXNBYnNvbHV0ZTpXYyxub3JtYWxpemU6VmMscmVzb2x2ZTpUY307ZnVuY3Rpb24gVWMoYSxiKXtpZihhLmZpbHRlcilyZXR1cm4gYS5maWx0ZXIoYik7Zm9yKHZhciBjPVtdLGQ9MDtkPGEubGVuZ3RoO2QrKyliKGFbZF0sZCxhKSYmYy5wdXNoKGFbZF0pO3JldHVybiBjfXZhciBYYz0iYiI9PT0iYWIiLnN1YnN0cigtMSk/ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBhLnN1YnN0cihiLGMpfTpmdW5jdGlvbihhLGIsYyl7MD5iJiYoYj1hLmxlbmd0aCtiKTtyZXR1cm4gYS5zdWJzdHIoYixjKX0sJGM9dShmdW5jdGlvbihhLGIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShiLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTthPSJmdW5jdGlvbiI9PT10eXBlb2Ygc2V0SW1tZWRpYXRlP3NldEltbWVkaWF0ZS5iaW5kKGwpOnNldFRpbWVvdXQuYmluZChsKTtiLmRlZmF1bHQ9YTt9KTt0KCRjKTsKICB2YXIgTD11KGZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYygpe3ZhciBhPUNifHx7fTthLmdldHVpZHx8KGEuZ2V0dWlkPWZ1bmN0aW9uKCl7cmV0dXJuIDB9KTthLmdldGdpZHx8KGEuZ2V0Z2lkPWZ1bmN0aW9uKCl7cmV0dXJuIDB9KTthLmN3ZHx8KGEuY3dkPWZ1bmN0aW9uKCl7cmV0dXJuICIvIn0pO2EubmV4dFRpY2t8fChhLm5leHRUaWNrPSRjLmRlZmF1bHQpO2EuZW1pdFdhcm5pbmd8fChhLmVtaXRXYXJuaW5nPWZ1bmN0aW9uKGEsYil7Y29uc29sZS53YXJuKCIiK2IrKGI/IjogIjoiIikrYSk7fSk7YS5lbnZ8fChhLmVudj17fSk7cmV0dXJuIGF9T2JqZWN0LmRlZmluZVByb3BlcnR5KGIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO2IuY3JlYXRlUHJvY2Vzcz1jO2IuZGVmYXVsdD1jKCk7fSk7dChMKTtmdW5jdGlvbiBhZCgpe31hZC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShudWxsKTtmdW5jdGlvbiBPKCl7Ty5pbml0LmNhbGwodGhpcyk7fU8uRXZlbnRFbWl0dGVyPU87CiAgTy51c2luZ0RvbWFpbnM9ITE7Ty5wcm90b3R5cGUuZG9tYWluPXZvaWQgMDtPLnByb3RvdHlwZS5fZXZlbnRzPXZvaWQgMDtPLnByb3RvdHlwZS5fbWF4TGlzdGVuZXJzPXZvaWQgMDtPLmRlZmF1bHRNYXhMaXN0ZW5lcnM9MTA7Ty5pbml0PWZ1bmN0aW9uKCl7dGhpcy5kb21haW49bnVsbDt0aGlzLl9ldmVudHMmJnRoaXMuX2V2ZW50cyE9PU9iamVjdC5nZXRQcm90b3R5cGVPZih0aGlzKS5fZXZlbnRzfHwodGhpcy5fZXZlbnRzPW5ldyBhZCx0aGlzLl9ldmVudHNDb3VudD0wKTt0aGlzLl9tYXhMaXN0ZW5lcnM9dGhpcy5fbWF4TGlzdGVuZXJzfHx2b2lkIDA7fTtPLnByb3RvdHlwZS5zZXRNYXhMaXN0ZW5lcnM9ZnVuY3Rpb24oYSl7aWYoIm51bWJlciIhPT10eXBlb2YgYXx8MD5hfHxpc05hTihhKSl0aHJvdyBuZXcgVHlwZUVycm9yKCcibiIgYXJndW1lbnQgbXVzdCBiZSBhIHBvc2l0aXZlIG51bWJlcicpO3RoaXMuX21heExpc3RlbmVycz1hO3JldHVybiB0aGlzfTsKICBPLnByb3RvdHlwZS5nZXRNYXhMaXN0ZW5lcnM9ZnVuY3Rpb24oKXtyZXR1cm4gdm9pZCAwPT09dGhpcy5fbWF4TGlzdGVuZXJzP08uZGVmYXVsdE1heExpc3RlbmVyczp0aGlzLl9tYXhMaXN0ZW5lcnN9OwogIE8ucHJvdG90eXBlLmVtaXQ9ZnVuY3Rpb24oYSl7dmFyIGIsYzt2YXIgZD0iZXJyb3IiPT09YTtpZihiPXRoaXMuX2V2ZW50cylkPWQmJm51bGw9PWIuZXJyb3I7ZWxzZSBpZighZClyZXR1cm4gITE7dmFyIGU9dGhpcy5kb21haW47aWYoZCl7Yj1hcmd1bWVudHNbMV07aWYoZSlifHwoYj1FcnJvcignVW5jYXVnaHQsIHVuc3BlY2lmaWVkICJlcnJvciIgZXZlbnQnKSksYi5kb21haW5FbWl0dGVyPXRoaXMsYi5kb21haW49ZSxiLmRvbWFpblRocm93bj0hMSxlLmVtaXQoImVycm9yIixiKTtlbHNlIHtpZihiIGluc3RhbmNlb2YgRXJyb3IpdGhyb3cgYjtlPUVycm9yKCdVbmNhdWdodCwgdW5zcGVjaWZpZWQgImVycm9yIiBldmVudC4gKCcrYisiKSIpO2UuY29udGV4dD1iO3Rocm93IGU7fXJldHVybiAhMX1lPWJbYV07aWYoIWUpcmV0dXJuICExO2I9ImZ1bmN0aW9uIj09PXR5cGVvZiBlO3ZhciBmPWFyZ3VtZW50cy5sZW5ndGg7c3dpdGNoKGYpe2Nhc2UgMTppZihiKWUuY2FsbCh0aGlzKTsKICBlbHNlIGZvcihiPWUubGVuZ3RoLGU9YmQoZSxiKSxkPTA7ZDxiOysrZCllW2RdLmNhbGwodGhpcyk7YnJlYWs7Y2FzZSAyOmQ9YXJndW1lbnRzWzFdO2lmKGIpZS5jYWxsKHRoaXMsZCk7ZWxzZSBmb3IoYj1lLmxlbmd0aCxlPWJkKGUsYiksZj0wO2Y8YjsrK2YpZVtmXS5jYWxsKHRoaXMsZCk7YnJlYWs7Y2FzZSAzOmQ9YXJndW1lbnRzWzFdO2Y9YXJndW1lbnRzWzJdO2lmKGIpZS5jYWxsKHRoaXMsZCxmKTtlbHNlIGZvcihiPWUubGVuZ3RoLGU9YmQoZSxiKSxjPTA7YzxiOysrYyllW2NdLmNhbGwodGhpcyxkLGYpO2JyZWFrO2Nhc2UgNDpkPWFyZ3VtZW50c1sxXTtmPWFyZ3VtZW50c1syXTtjPWFyZ3VtZW50c1szXTtpZihiKWUuY2FsbCh0aGlzLGQsZixjKTtlbHNlIHtiPWUubGVuZ3RoO2U9YmQoZSxiKTtmb3IodmFyIGc9MDtnPGI7KytnKWVbZ10uY2FsbCh0aGlzLGQsZixjKTt9YnJlYWs7ZGVmYXVsdDpkPUFycmF5KGYtMSk7Zm9yKGM9MTtjPGY7YysrKWRbYy0xXT1hcmd1bWVudHNbY107CiAgaWYoYillLmFwcGx5KHRoaXMsZCk7ZWxzZSBmb3IoYj1lLmxlbmd0aCxlPWJkKGUsYiksZj0wO2Y8YjsrK2YpZVtmXS5hcHBseSh0aGlzLGQpO31yZXR1cm4gITB9OwogIGZ1bmN0aW9uIGNkKGEsYixjLGQpe3ZhciBlO2lmKCJmdW5jdGlvbiIhPT10eXBlb2YgYyl0aHJvdyBuZXcgVHlwZUVycm9yKCcibGlzdGVuZXIiIGFyZ3VtZW50IG11c3QgYmUgYSBmdW5jdGlvbicpO2lmKGU9YS5fZXZlbnRzKXtlLm5ld0xpc3RlbmVyJiYoYS5lbWl0KCJuZXdMaXN0ZW5lciIsYixjLmxpc3RlbmVyP2MubGlzdGVuZXI6YyksZT1hLl9ldmVudHMpO3ZhciBmPWVbYl07fWVsc2UgZT1hLl9ldmVudHM9bmV3IGFkLGEuX2V2ZW50c0NvdW50PTA7Zj8oImZ1bmN0aW9uIj09PXR5cGVvZiBmP2Y9ZVtiXT1kP1tjLGZdOltmLGNdOmQ/Zi51bnNoaWZ0KGMpOmYucHVzaChjKSxmLndhcm5lZHx8KGM9dm9pZCAwPT09YS5fbWF4TGlzdGVuZXJzP08uZGVmYXVsdE1heExpc3RlbmVyczphLl9tYXhMaXN0ZW5lcnMpJiYwPGMmJmYubGVuZ3RoPmMmJihmLndhcm5lZD0hMCxjPUVycm9yKCJQb3NzaWJsZSBFdmVudEVtaXR0ZXIgbWVtb3J5IGxlYWsgZGV0ZWN0ZWQuICIrZi5sZW5ndGgrCiAgIiAiK2IrIiBsaXN0ZW5lcnMgYWRkZWQuIFVzZSBlbWl0dGVyLnNldE1heExpc3RlbmVycygpIHRvIGluY3JlYXNlIGxpbWl0IiksYy5uYW1lPSJNYXhMaXN0ZW5lcnNFeGNlZWRlZFdhcm5pbmciLGMuZW1pdHRlcj1hLGMudHlwZT1iLGMuY291bnQ9Zi5sZW5ndGgsImZ1bmN0aW9uIj09PXR5cGVvZiBjb25zb2xlLndhcm4/Y29uc29sZS53YXJuKGMpOmNvbnNvbGUubG9nKGMpKSk6KGVbYl09YywrK2EuX2V2ZW50c0NvdW50KTtyZXR1cm4gYX1PLnByb3RvdHlwZS5hZGRMaXN0ZW5lcj1mdW5jdGlvbihhLGIpe3JldHVybiBjZCh0aGlzLGEsYiwhMSl9O08ucHJvdG90eXBlLm9uPU8ucHJvdG90eXBlLmFkZExpc3RlbmVyO08ucHJvdG90eXBlLnByZXBlbmRMaXN0ZW5lcj1mdW5jdGlvbihhLGIpe3JldHVybiBjZCh0aGlzLGEsYiwhMCl9OwogIGZ1bmN0aW9uIGRkKGEsYixjKXtmdW5jdGlvbiBkKCl7YS5yZW1vdmVMaXN0ZW5lcihiLGQpO2V8fChlPSEwLGMuYXBwbHkoYSxhcmd1bWVudHMpKTt9dmFyIGU9ITE7ZC5saXN0ZW5lcj1jO3JldHVybiBkfU8ucHJvdG90eXBlLm9uY2U9ZnVuY3Rpb24oYSxiKXtpZigiZnVuY3Rpb24iIT09dHlwZW9mIGIpdGhyb3cgbmV3IFR5cGVFcnJvcignImxpc3RlbmVyIiBhcmd1bWVudCBtdXN0IGJlIGEgZnVuY3Rpb24nKTt0aGlzLm9uKGEsZGQodGhpcyxhLGIpKTtyZXR1cm4gdGhpc307Ty5wcm90b3R5cGUucHJlcGVuZE9uY2VMaXN0ZW5lcj1mdW5jdGlvbihhLGIpe2lmKCJmdW5jdGlvbiIhPT10eXBlb2YgYil0aHJvdyBuZXcgVHlwZUVycm9yKCcibGlzdGVuZXIiIGFyZ3VtZW50IG11c3QgYmUgYSBmdW5jdGlvbicpO3RoaXMucHJlcGVuZExpc3RlbmVyKGEsZGQodGhpcyxhLGIpKTtyZXR1cm4gdGhpc307CiAgTy5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXI9ZnVuY3Rpb24oYSxiKXt2YXIgYztpZigiZnVuY3Rpb24iIT09dHlwZW9mIGIpdGhyb3cgbmV3IFR5cGVFcnJvcignImxpc3RlbmVyIiBhcmd1bWVudCBtdXN0IGJlIGEgZnVuY3Rpb24nKTt2YXIgZD10aGlzLl9ldmVudHM7aWYoIWQpcmV0dXJuIHRoaXM7dmFyIGU9ZFthXTtpZighZSlyZXR1cm4gdGhpcztpZihlPT09Ynx8ZS5saXN0ZW5lciYmZS5saXN0ZW5lcj09PWIpMD09PS0tdGhpcy5fZXZlbnRzQ291bnQ/dGhpcy5fZXZlbnRzPW5ldyBhZDooZGVsZXRlIGRbYV0sZC5yZW1vdmVMaXN0ZW5lciYmdGhpcy5lbWl0KCJyZW1vdmVMaXN0ZW5lciIsYSxlLmxpc3RlbmVyfHxiKSk7ZWxzZSBpZigiZnVuY3Rpb24iIT09dHlwZW9mIGUpe3ZhciBmPS0xO2ZvcihjPWUubGVuZ3RoOzA8Yy0tOylpZihlW2NdPT09Ynx8ZVtjXS5saXN0ZW5lciYmZVtjXS5saXN0ZW5lcj09PWIpe3ZhciBnPWVbY10ubGlzdGVuZXI7Zj1jO2JyZWFrfWlmKDA+CiAgZilyZXR1cm4gdGhpcztpZigxPT09ZS5sZW5ndGgpe2VbMF09dm9pZCAwO2lmKDA9PT0tLXRoaXMuX2V2ZW50c0NvdW50KXJldHVybiB0aGlzLl9ldmVudHM9bmV3IGFkLHRoaXM7ZGVsZXRlIGRbYV07fWVsc2Uge2M9ZisxO2Zvcih2YXIgaD1lLmxlbmd0aDtjPGg7Zis9MSxjKz0xKWVbZl09ZVtjXTtlLnBvcCgpO31kLnJlbW92ZUxpc3RlbmVyJiZ0aGlzLmVtaXQoInJlbW92ZUxpc3RlbmVyIixhLGd8fGIpO31yZXR1cm4gdGhpc307CiAgTy5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuX2V2ZW50cztpZighYilyZXR1cm4gdGhpcztpZighYi5yZW1vdmVMaXN0ZW5lcilyZXR1cm4gMD09PWFyZ3VtZW50cy5sZW5ndGg/KHRoaXMuX2V2ZW50cz1uZXcgYWQsdGhpcy5fZXZlbnRzQ291bnQ9MCk6YlthXSYmKDA9PT0tLXRoaXMuX2V2ZW50c0NvdW50P3RoaXMuX2V2ZW50cz1uZXcgYWQ6ZGVsZXRlIGJbYV0pLHRoaXM7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpe2I9T2JqZWN0LmtleXMoYik7Zm9yKHZhciBjPTAsZDtjPGIubGVuZ3RoOysrYylkPWJbY10sInJlbW92ZUxpc3RlbmVyIiE9PWQmJnRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKGQpO3RoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCJyZW1vdmVMaXN0ZW5lciIpO3RoaXMuX2V2ZW50cz1uZXcgYWQ7dGhpcy5fZXZlbnRzQ291bnQ9MDtyZXR1cm4gdGhpc31iPWJbYV07aWYoImZ1bmN0aW9uIj09PXR5cGVvZiBiKXRoaXMucmVtb3ZlTGlzdGVuZXIoYSwKICBiKTtlbHNlIGlmKGIpe2RvIHRoaXMucmVtb3ZlTGlzdGVuZXIoYSxiW2IubGVuZ3RoLTFdKTt3aGlsZShiWzBdKX1yZXR1cm4gdGhpc307Ty5wcm90b3R5cGUubGlzdGVuZXJzPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuX2V2ZW50cztpZihiKWlmKGE9YlthXSlpZigiZnVuY3Rpb24iPT09dHlwZW9mIGEpYT1bYS5saXN0ZW5lcnx8YV07ZWxzZSB7Yj1BcnJheShhLmxlbmd0aCk7Zm9yKHZhciBjPTA7YzxiLmxlbmd0aDsrK2MpYltjXT1hW2NdLmxpc3RlbmVyfHxhW2NdO2E9Yjt9ZWxzZSBhPVtdO2Vsc2UgYT1bXTtyZXR1cm4gYX07Ty5saXN0ZW5lckNvdW50PWZ1bmN0aW9uKGEsYil7cmV0dXJuICJmdW5jdGlvbiI9PT10eXBlb2YgYS5saXN0ZW5lckNvdW50P2EubGlzdGVuZXJDb3VudChiKTplZC5jYWxsKGEsYil9O08ucHJvdG90eXBlLmxpc3RlbmVyQ291bnQ9ZWQ7CiAgZnVuY3Rpb24gZWQoYSl7dmFyIGI9dGhpcy5fZXZlbnRzO2lmKGIpe2E9YlthXTtpZigiZnVuY3Rpb24iPT09dHlwZW9mIGEpcmV0dXJuIDE7aWYoYSlyZXR1cm4gYS5sZW5ndGh9cmV0dXJuIDB9Ty5wcm90b3R5cGUuZXZlbnROYW1lcz1mdW5jdGlvbigpe3JldHVybiAwPHRoaXMuX2V2ZW50c0NvdW50P1JlZmxlY3Qub3duS2V5cyh0aGlzLl9ldmVudHMpOltdfTtmdW5jdGlvbiBiZChhLGIpe2Zvcih2YXIgYz1BcnJheShiKTtiLS07KWNbYl09YVtiXTtyZXR1cm4gY30KICB2YXIgZmQ9dShmdW5jdGlvbihhLGIpe3ZhciBjPWwmJmwuX19leHRlbmRzfHxmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYixjKXthPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihhLGIpe2EuX19wcm90b19fPWI7fXx8ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMgaW4gYiliLmhhc093blByb3BlcnR5KGMpJiYoYVtjXT1iW2NdKTt9O3JldHVybiBhKGIsYyl9cmV0dXJuIGZ1bmN0aW9uKGIsYyl7ZnVuY3Rpb24gZCgpe3RoaXMuY29uc3RydWN0b3I9Yjt9YShiLGMpO2IucHJvdG90eXBlPW51bGw9PT1jP09iamVjdC5jcmVhdGUoYyk6KGQucHJvdG90eXBlPWMucHJvdG90eXBlLG5ldyBkKTt9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShiLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgZD13LmNvbnN0YW50cy5TX0lGTVQsZT13LmNvbnN0YW50cy5TX0lGRElSLGY9dy5jb25zdGFudHMuU19JRlJFRyxnPXcuY29uc3RhbnRzLlNfSUZMTkssCiAgaD13LmNvbnN0YW50cy5PX0FQUEVORDtiLlNFUD0iLyI7YT1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKGIsYyl7dm9pZCAwPT09YyYmKGM9NDM4KTt2YXIgZD1hLmNhbGwodGhpcyl8fHRoaXM7ZC51aWQ9TC5kZWZhdWx0LmdldHVpZCgpO2QuZ2lkPUwuZGVmYXVsdC5nZXRnaWQoKTtkLmF0aW1lPW5ldyBEYXRlO2QubXRpbWU9bmV3IERhdGU7ZC5jdGltZT1uZXcgRGF0ZTtkLnBlcm09NDM4O2QubW9kZT1mO2Qubmxpbms9MTtkLnBlcm09YztkLm1vZGV8PWM7ZC5pbm89YjtyZXR1cm4gZH1jKGIsYSk7Yi5wcm90b3R5cGUuZ2V0U3RyaW5nPWZ1bmN0aW9uKGEpe3ZvaWQgMD09PWEmJihhPSJ1dGY4Iik7cmV0dXJuIHRoaXMuZ2V0QnVmZmVyKCkudG9TdHJpbmcoYSl9O2IucHJvdG90eXBlLnNldFN0cmluZz1mdW5jdGlvbihhKXt0aGlzLmJ1Zj1GLmJ1ZmZlckZyb20oYSwidXRmOCIpO3RoaXMudG91Y2goKTt9O2IucHJvdG90eXBlLmdldEJ1ZmZlcj1mdW5jdGlvbigpe3RoaXMuYnVmfHx0aGlzLnNldEJ1ZmZlcihGLmJ1ZmZlckFsbG9jVW5zYWZlKDApKTsKICByZXR1cm4gRi5idWZmZXJGcm9tKHRoaXMuYnVmKX07Yi5wcm90b3R5cGUuc2V0QnVmZmVyPWZ1bmN0aW9uKGEpe3RoaXMuYnVmPUYuYnVmZmVyRnJvbShhKTt0aGlzLnRvdWNoKCk7fTtiLnByb3RvdHlwZS5nZXRTaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYnVmP3RoaXMuYnVmLmxlbmd0aDowfTtiLnByb3RvdHlwZS5zZXRNb2RlUHJvcGVydHk9ZnVuY3Rpb24oYSl7dGhpcy5tb2RlPXRoaXMubW9kZSZ+ZHxhO307Yi5wcm90b3R5cGUuc2V0SXNGaWxlPWZ1bmN0aW9uKCl7dGhpcy5zZXRNb2RlUHJvcGVydHkoZik7fTtiLnByb3RvdHlwZS5zZXRJc0RpcmVjdG9yeT1mdW5jdGlvbigpe3RoaXMuc2V0TW9kZVByb3BlcnR5KGUpO307Yi5wcm90b3R5cGUuc2V0SXNTeW1saW5rPWZ1bmN0aW9uKCl7dGhpcy5zZXRNb2RlUHJvcGVydHkoZyk7fTtiLnByb3RvdHlwZS5pc0ZpbGU9ZnVuY3Rpb24oKXtyZXR1cm4gKHRoaXMubW9kZSZkKT09PWZ9O2IucHJvdG90eXBlLmlzRGlyZWN0b3J5PWZ1bmN0aW9uKCl7cmV0dXJuICh0aGlzLm1vZGUmCiAgZCk9PT1lfTtiLnByb3RvdHlwZS5pc1N5bWxpbms9ZnVuY3Rpb24oKXtyZXR1cm4gKHRoaXMubW9kZSZkKT09PWd9O2IucHJvdG90eXBlLm1ha2VTeW1saW5rPWZ1bmN0aW9uKGEpe3RoaXMuc3ltbGluaz1hO3RoaXMuc2V0SXNTeW1saW5rKCk7fTtiLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbihhLGIsYyxkKXt2b2lkIDA9PT1iJiYoYj0wKTt2b2lkIDA9PT1jJiYoYz1hLmxlbmd0aCk7dm9pZCAwPT09ZCYmKGQ9MCk7dGhpcy5idWZ8fCh0aGlzLmJ1Zj1GLmJ1ZmZlckFsbG9jVW5zYWZlKDApKTtpZihkK2M+dGhpcy5idWYubGVuZ3RoKXt2YXIgZT1GLmJ1ZmZlckFsbG9jVW5zYWZlKGQrYyk7dGhpcy5idWYuY29weShlLDAsMCx0aGlzLmJ1Zi5sZW5ndGgpO3RoaXMuYnVmPWU7fWEuY29weSh0aGlzLmJ1ZixkLGIsYitjKTt0aGlzLnRvdWNoKCk7cmV0dXJuIGN9O2IucHJvdG90eXBlLnJlYWQ9ZnVuY3Rpb24oYSxiLGMsZCl7dm9pZCAwPT09YiYmKGI9MCk7dm9pZCAwPT09YyYmKGM9YS5ieXRlTGVuZ3RoKTsKICB2b2lkIDA9PT1kJiYoZD0wKTt0aGlzLmJ1Znx8KHRoaXMuYnVmPUYuYnVmZmVyQWxsb2NVbnNhZmUoMCkpO2M+YS5ieXRlTGVuZ3RoJiYoYz1hLmJ5dGVMZW5ndGgpO2MrZD50aGlzLmJ1Zi5sZW5ndGgmJihjPXRoaXMuYnVmLmxlbmd0aC1kKTt0aGlzLmJ1Zi5jb3B5KGEsYixkLGQrYyk7cmV0dXJuIGN9O2IucHJvdG90eXBlLnRydW5jYXRlPWZ1bmN0aW9uKGEpe3ZvaWQgMD09PWEmJihhPTApO2lmKGEpaWYodGhpcy5idWZ8fCh0aGlzLmJ1Zj1GLmJ1ZmZlckFsbG9jVW5zYWZlKDApKSxhPD10aGlzLmJ1Zi5sZW5ndGgpdGhpcy5idWY9dGhpcy5idWYuc2xpY2UoMCxhKTtlbHNlIHt2YXIgYj1GLmJ1ZmZlckFsbG9jVW5zYWZlKDApO3RoaXMuYnVmLmNvcHkoYik7Yi5maWxsKDAsYSk7fWVsc2UgdGhpcy5idWY9Ri5idWZmZXJBbGxvY1Vuc2FmZSgwKTt0aGlzLnRvdWNoKCk7fTtiLnByb3RvdHlwZS5jaG1vZD1mdW5jdGlvbihhKXt0aGlzLnBlcm09YTt0aGlzLm1vZGU9dGhpcy5tb2RlJi01MTJ8CiAgYTt0aGlzLnRvdWNoKCk7fTtiLnByb3RvdHlwZS5jaG93bj1mdW5jdGlvbihhLGIpe3RoaXMudWlkPWE7dGhpcy5naWQ9Yjt0aGlzLnRvdWNoKCk7fTtiLnByb3RvdHlwZS50b3VjaD1mdW5jdGlvbigpe3RoaXMubXRpbWU9bmV3IERhdGU7dGhpcy5lbWl0KCJjaGFuZ2UiLHRoaXMpO307Yi5wcm90b3R5cGUuY2FuUmVhZD1mdW5jdGlvbihhLGIpe3ZvaWQgMD09PWEmJihhPUwuZGVmYXVsdC5nZXR1aWQoKSk7dm9pZCAwPT09YiYmKGI9TC5kZWZhdWx0LmdldGdpZCgpKTtyZXR1cm4gdGhpcy5wZXJtJjR8fGI9PT10aGlzLmdpZCYmdGhpcy5wZXJtJjMyfHxhPT09dGhpcy51aWQmJnRoaXMucGVybSYyNTY/ITA6ITF9O2IucHJvdG90eXBlLmNhbldyaXRlPWZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YSYmKGE9TC5kZWZhdWx0LmdldHVpZCgpKTt2b2lkIDA9PT1iJiYoYj1MLmRlZmF1bHQuZ2V0Z2lkKCkpO3JldHVybiB0aGlzLnBlcm0mMnx8Yj09PXRoaXMuZ2lkJiZ0aGlzLnBlcm0mMTZ8fGE9PT0KICB0aGlzLnVpZCYmdGhpcy5wZXJtJjEyOD8hMDohMX07Yi5wcm90b3R5cGUuZGVsPWZ1bmN0aW9uKCl7dGhpcy5lbWl0KCJkZWxldGUiLHRoaXMpO307Yi5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHtpbm86dGhpcy5pbm8sdWlkOnRoaXMudWlkLGdpZDp0aGlzLmdpZCxhdGltZTp0aGlzLmF0aW1lLmdldFRpbWUoKSxtdGltZTp0aGlzLm10aW1lLmdldFRpbWUoKSxjdGltZTp0aGlzLmN0aW1lLmdldFRpbWUoKSxwZXJtOnRoaXMucGVybSxtb2RlOnRoaXMubW9kZSxubGluazp0aGlzLm5saW5rLHN5bWxpbms6dGhpcy5zeW1saW5rLGRhdGE6dGhpcy5nZXRTdHJpbmcoKX19O3JldHVybiBifShPLkV2ZW50RW1pdHRlcik7Yi5Ob2RlPWE7YT1mdW5jdGlvbihhKXtmdW5jdGlvbiBkKGIsYyxkKXt2YXIgZT1hLmNhbGwodGhpcyl8fHRoaXM7ZS5jaGlsZHJlbj17fTtlLnN0ZXBzPVtdO2UuaW5vPTA7ZS5sZW5ndGg9MDtlLnZvbD1iO2UucGFyZW50PWM7ZS5zdGVwcz1jP2Muc3RlcHMuY29uY2F0KFtkXSk6CiAgW2RdO3JldHVybiBlfWMoZCxhKTtkLnByb3RvdHlwZS5zZXROb2RlPWZ1bmN0aW9uKGEpe3RoaXMubm9kZT1hO3RoaXMuaW5vPWEuaW5vO307ZC5wcm90b3R5cGUuZ2V0Tm9kZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGV9O2QucHJvdG90eXBlLmNyZWF0ZUNoaWxkPWZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YiYmKGI9dGhpcy52b2wuY3JlYXRlTm9kZSgpKTt2YXIgYz1uZXcgZCh0aGlzLnZvbCx0aGlzLGEpO2Muc2V0Tm9kZShiKTtiLmlzRGlyZWN0b3J5KCk7dGhpcy5zZXRDaGlsZChhLGMpO3JldHVybiBjfTtkLnByb3RvdHlwZS5zZXRDaGlsZD1mdW5jdGlvbihhLGIpe3ZvaWQgMD09PWImJihiPW5ldyBkKHRoaXMudm9sLHRoaXMsYSkpO3RoaXMuY2hpbGRyZW5bYV09YjtiLnBhcmVudD10aGlzO3RoaXMubGVuZ3RoKys7dGhpcy5lbWl0KCJjaGlsZDphZGQiLGIsdGhpcyk7cmV0dXJuIGJ9O2QucHJvdG90eXBlLmRlbGV0ZUNoaWxkPWZ1bmN0aW9uKGEpe2RlbGV0ZSB0aGlzLmNoaWxkcmVuW2EuZ2V0TmFtZSgpXTsKICB0aGlzLmxlbmd0aC0tO3RoaXMuZW1pdCgiY2hpbGQ6ZGVsZXRlIixhLHRoaXMpO307ZC5wcm90b3R5cGUuZ2V0Q2hpbGQ9ZnVuY3Rpb24oYSl7aWYoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwodGhpcy5jaGlsZHJlbixhKSlyZXR1cm4gdGhpcy5jaGlsZHJlblthXX07ZC5wcm90b3R5cGUuZ2V0UGF0aD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnN0ZXBzLmpvaW4oYi5TRVApfTtkLnByb3RvdHlwZS5nZXROYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RlcHNbdGhpcy5zdGVwcy5sZW5ndGgtMV19O2QucHJvdG90eXBlLndhbGs9ZnVuY3Rpb24oYSxiLGMpe3ZvaWQgMD09PWImJihiPWEubGVuZ3RoKTt2b2lkIDA9PT1jJiYoYz0wKTtpZihjPj1hLmxlbmd0aHx8Yz49YilyZXR1cm4gdGhpczt2YXIgZD10aGlzLmdldENoaWxkKGFbY10pO3JldHVybiBkP2Qud2FsayhhLGIsYysxKTpudWxsfTtkLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4ge3N0ZXBzOnRoaXMuc3RlcHMsCiAgaW5vOnRoaXMuaW5vLGNoaWxkcmVuOk9iamVjdC5rZXlzKHRoaXMuY2hpbGRyZW4pfX07cmV0dXJuIGR9KE8uRXZlbnRFbWl0dGVyKTtiLkxpbms9YTthPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGIsYyxkKXt0aGlzLnBvc2l0aW9uPTA7dGhpcy5saW5rPWE7dGhpcy5ub2RlPWI7dGhpcy5mbGFncz1jO3RoaXMuZmQ9ZDt9YS5wcm90b3R5cGUuZ2V0U3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZS5nZXRTdHJpbmcoKX07YS5wcm90b3R5cGUuc2V0U3RyaW5nPWZ1bmN0aW9uKGEpe3RoaXMubm9kZS5zZXRTdHJpbmcoYSk7fTthLnByb3RvdHlwZS5nZXRCdWZmZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2RlLmdldEJ1ZmZlcigpfTthLnByb3RvdHlwZS5zZXRCdWZmZXI9ZnVuY3Rpb24oYSl7dGhpcy5ub2RlLnNldEJ1ZmZlcihhKTt9O2EucHJvdG90eXBlLmdldFNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2RlLmdldFNpemUoKX07YS5wcm90b3R5cGUudHJ1bmNhdGU9CiAgZnVuY3Rpb24oYSl7dGhpcy5ub2RlLnRydW5jYXRlKGEpO307YS5wcm90b3R5cGUuc2Vla1RvPWZ1bmN0aW9uKGEpe3RoaXMucG9zaXRpb249YTt9O2EucHJvdG90eXBlLnN0YXRzPWZ1bmN0aW9uKCl7cmV0dXJuIGthLmRlZmF1bHQuYnVpbGQodGhpcy5ub2RlKX07YS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oYSxiLGMsZCl7dm9pZCAwPT09YiYmKGI9MCk7dm9pZCAwPT09YyYmKGM9YS5sZW5ndGgpOyJudW1iZXIiIT09dHlwZW9mIGQmJihkPXRoaXMucG9zaXRpb24pO3RoaXMuZmxhZ3MmaCYmKGQ9dGhpcy5nZXRTaXplKCkpO2E9dGhpcy5ub2RlLndyaXRlKGEsYixjLGQpO3RoaXMucG9zaXRpb249ZCthO3JldHVybiBhfTthLnByb3RvdHlwZS5yZWFkPWZ1bmN0aW9uKGEsYixjLGQpe3ZvaWQgMD09PWImJihiPTApO3ZvaWQgMD09PWMmJihjPWEuYnl0ZUxlbmd0aCk7Im51bWJlciIhPT10eXBlb2YgZCYmKGQ9dGhpcy5wb3NpdGlvbik7YT10aGlzLm5vZGUucmVhZChhLGIsYyxkKTsKICB0aGlzLnBvc2l0aW9uPWQrYTtyZXR1cm4gYX07YS5wcm90b3R5cGUuY2htb2Q9ZnVuY3Rpb24oYSl7dGhpcy5ub2RlLmNobW9kKGEpO307YS5wcm90b3R5cGUuY2hvd249ZnVuY3Rpb24oYSxiKXt0aGlzLm5vZGUuY2hvd24oYSxiKTt9O3JldHVybiBhfSgpO2IuRmlsZT1hO30pO3QoZmQpO3ZhciBnZD1mZC5Ob2RlLGhkPXUoZnVuY3Rpb24oYSxiKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoYiwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7Yi5kZWZhdWx0PWZ1bmN0aW9uKGEsYixlKXt2YXIgYz1zZXRUaW1lb3V0LmFwcGx5KG51bGwsYXJndW1lbnRzKTtjJiYib2JqZWN0Ij09PXR5cGVvZiBjJiYiZnVuY3Rpb24iPT09dHlwZW9mIGMudW5yZWYmJmMudW5yZWYoKTtyZXR1cm4gY307fSk7dChoZCk7ZnVuY3Rpb24gaWQoKXt0aGlzLnRhaWw9dGhpcy5oZWFkPW51bGw7dGhpcy5sZW5ndGg9MDt9CiAgaWQucHJvdG90eXBlLnB1c2g9ZnVuY3Rpb24oYSl7YT17ZGF0YTphLG5leHQ6bnVsbH07MDx0aGlzLmxlbmd0aD90aGlzLnRhaWwubmV4dD1hOnRoaXMuaGVhZD1hO3RoaXMudGFpbD1hOysrdGhpcy5sZW5ndGg7fTtpZC5wcm90b3R5cGUudW5zaGlmdD1mdW5jdGlvbihhKXthPXtkYXRhOmEsbmV4dDp0aGlzLmhlYWR9OzA9PT10aGlzLmxlbmd0aCYmKHRoaXMudGFpbD1hKTt0aGlzLmhlYWQ9YTsrK3RoaXMubGVuZ3RoO307aWQucHJvdG90eXBlLnNoaWZ0PWZ1bmN0aW9uKCl7aWYoMCE9PXRoaXMubGVuZ3RoKXt2YXIgYT10aGlzLmhlYWQuZGF0YTt0aGlzLmhlYWQ9MT09PXRoaXMubGVuZ3RoP3RoaXMudGFpbD1udWxsOnRoaXMuaGVhZC5uZXh0Oy0tdGhpcy5sZW5ndGg7cmV0dXJuIGF9fTtpZC5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLmhlYWQ9dGhpcy50YWlsPW51bGw7dGhpcy5sZW5ndGg9MDt9OwogIGlkLnByb3RvdHlwZS5qb2luPWZ1bmN0aW9uKGEpe2lmKDA9PT10aGlzLmxlbmd0aClyZXR1cm4gIiI7Zm9yKHZhciBiPXRoaXMuaGVhZCxjPSIiK2IuZGF0YTtiPWIubmV4dDspYys9YStiLmRhdGE7cmV0dXJuIGN9O2lkLnByb3RvdHlwZS5jb25jYXQ9ZnVuY3Rpb24oYSl7aWYoMD09PXRoaXMubGVuZ3RoKXJldHVybiB6LmFsbG9jKDApO2lmKDE9PT10aGlzLmxlbmd0aClyZXR1cm4gdGhpcy5oZWFkLmRhdGE7YT16LmFsbG9jVW5zYWZlKGE+Pj4wKTtmb3IodmFyIGI9dGhpcy5oZWFkLGM9MDtiOyliLmRhdGEuY29weShhLGMpLGMrPWIuZGF0YS5sZW5ndGgsYj1iLm5leHQ7cmV0dXJuIGF9OwogIHZhciBqZD16LmlzRW5jb2Rpbmd8fGZ1bmN0aW9uKGEpe3N3aXRjaChhJiZhLnRvTG93ZXJDYXNlKCkpe2Nhc2UgImhleCI6Y2FzZSAidXRmOCI6Y2FzZSAidXRmLTgiOmNhc2UgImFzY2lpIjpjYXNlICJiaW5hcnkiOmNhc2UgImJhc2U2NCI6Y2FzZSAidWNzMiI6Y2FzZSAidWNzLTIiOmNhc2UgInV0ZjE2bGUiOmNhc2UgInV0Zi0xNmxlIjpjYXNlICJyYXciOnJldHVybiAhMDtkZWZhdWx0OnJldHVybiAhMX19OwogIGZ1bmN0aW9uIGtkKGEpe3RoaXMuZW5jb2Rpbmc9KGF8fCJ1dGY4IikudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9bLV9dLywiIik7aWYoYSYmIWpkKGEpKXRocm93IEVycm9yKCJVbmtub3duIGVuY29kaW5nOiAiK2EpO3N3aXRjaCh0aGlzLmVuY29kaW5nKXtjYXNlICJ1dGY4Ijp0aGlzLnN1cnJvZ2F0ZVNpemU9MzticmVhaztjYXNlICJ1Y3MyIjpjYXNlICJ1dGYxNmxlIjp0aGlzLnN1cnJvZ2F0ZVNpemU9Mjt0aGlzLmRldGVjdEluY29tcGxldGVDaGFyPWxkO2JyZWFrO2Nhc2UgImJhc2U2NCI6dGhpcy5zdXJyb2dhdGVTaXplPTM7dGhpcy5kZXRlY3RJbmNvbXBsZXRlQ2hhcj1tZDticmVhaztkZWZhdWx0OnRoaXMud3JpdGU9bmQ7cmV0dXJufXRoaXMuY2hhckJ1ZmZlcj1uZXcgeig2KTt0aGlzLmNoYXJMZW5ndGg9dGhpcy5jaGFyUmVjZWl2ZWQ9MDt9CiAga2QucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0iIjt0aGlzLmNoYXJMZW5ndGg7KXtiPWEubGVuZ3RoPj10aGlzLmNoYXJMZW5ndGgtdGhpcy5jaGFyUmVjZWl2ZWQ/dGhpcy5jaGFyTGVuZ3RoLXRoaXMuY2hhclJlY2VpdmVkOmEubGVuZ3RoO2EuY29weSh0aGlzLmNoYXJCdWZmZXIsdGhpcy5jaGFyUmVjZWl2ZWQsMCxiKTt0aGlzLmNoYXJSZWNlaXZlZCs9YjtpZih0aGlzLmNoYXJSZWNlaXZlZDx0aGlzLmNoYXJMZW5ndGgpcmV0dXJuICIiO2E9YS5zbGljZShiLGEubGVuZ3RoKTtiPXRoaXMuY2hhckJ1ZmZlci5zbGljZSgwLHRoaXMuY2hhckxlbmd0aCkudG9TdHJpbmcodGhpcy5lbmNvZGluZyk7dmFyIGM9Yi5jaGFyQ29kZUF0KGIubGVuZ3RoLTEpO2lmKDU1Mjk2PD1jJiY1NjMxOT49Yyl0aGlzLmNoYXJMZW5ndGgrPXRoaXMuc3Vycm9nYXRlU2l6ZSxiPSIiO2Vsc2Uge3RoaXMuY2hhclJlY2VpdmVkPXRoaXMuY2hhckxlbmd0aD0wO2lmKDA9PT1hLmxlbmd0aClyZXR1cm4gYjsKICBicmVha319dGhpcy5kZXRlY3RJbmNvbXBsZXRlQ2hhcihhKTt2YXIgZD1hLmxlbmd0aDt0aGlzLmNoYXJMZW5ndGgmJihhLmNvcHkodGhpcy5jaGFyQnVmZmVyLDAsYS5sZW5ndGgtdGhpcy5jaGFyUmVjZWl2ZWQsZCksZC09dGhpcy5jaGFyUmVjZWl2ZWQpO2IrPWEudG9TdHJpbmcodGhpcy5lbmNvZGluZywwLGQpO2Q9Yi5sZW5ndGgtMTtjPWIuY2hhckNvZGVBdChkKTtyZXR1cm4gNTUyOTY8PWMmJjU2MzE5Pj1jPyhjPXRoaXMuc3Vycm9nYXRlU2l6ZSx0aGlzLmNoYXJMZW5ndGgrPWMsdGhpcy5jaGFyUmVjZWl2ZWQrPWMsdGhpcy5jaGFyQnVmZmVyLmNvcHkodGhpcy5jaGFyQnVmZmVyLGMsMCxjKSxhLmNvcHkodGhpcy5jaGFyQnVmZmVyLDAsMCxjKSxiLnN1YnN0cmluZygwLGQpKTpifTsKICBrZC5wcm90b3R5cGUuZGV0ZWN0SW5jb21wbGV0ZUNoYXI9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTM8PWEubGVuZ3RoPzM6YS5sZW5ndGg7MDxiO2ItLSl7dmFyIGM9YVthLmxlbmd0aC1iXTtpZigxPT1iJiY2PT1jPj41KXt0aGlzLmNoYXJMZW5ndGg9MjticmVha31pZigyPj1iJiYxND09Yz4+NCl7dGhpcy5jaGFyTGVuZ3RoPTM7YnJlYWt9aWYoMz49YiYmMzA9PWM+PjMpe3RoaXMuY2hhckxlbmd0aD00O2JyZWFrfX10aGlzLmNoYXJSZWNlaXZlZD1iO307a2QucHJvdG90eXBlLmVuZD1mdW5jdGlvbihhKXt2YXIgYj0iIjthJiZhLmxlbmd0aCYmKGI9dGhpcy53cml0ZShhKSk7dGhpcy5jaGFyUmVjZWl2ZWQmJihhPXRoaXMuZW5jb2RpbmcsYis9dGhpcy5jaGFyQnVmZmVyLnNsaWNlKDAsdGhpcy5jaGFyUmVjZWl2ZWQpLnRvU3RyaW5nKGEpKTtyZXR1cm4gYn07ZnVuY3Rpb24gbmQoYSl7cmV0dXJuIGEudG9TdHJpbmcodGhpcy5lbmNvZGluZyl9CiAgZnVuY3Rpb24gbGQoYSl7dGhpcy5jaGFyTGVuZ3RoPSh0aGlzLmNoYXJSZWNlaXZlZD1hLmxlbmd0aCUyKT8yOjA7fWZ1bmN0aW9uIG1kKGEpe3RoaXMuY2hhckxlbmd0aD0odGhpcy5jaGFyUmVjZWl2ZWQ9YS5sZW5ndGglMyk/MzowO31QLlJlYWRhYmxlU3RhdGU9b2Q7dmFyIFE9TWIoInN0cmVhbSIpO0RiKFAsTyk7ZnVuY3Rpb24gcGQoYSxiLGMpe2lmKCJmdW5jdGlvbiI9PT10eXBlb2YgYS5wcmVwZW5kTGlzdGVuZXIpcmV0dXJuIGEucHJlcGVuZExpc3RlbmVyKGIsYyk7aWYoYS5fZXZlbnRzJiZhLl9ldmVudHNbYl0pQXJyYXkuaXNBcnJheShhLl9ldmVudHNbYl0pP2EuX2V2ZW50c1tiXS51bnNoaWZ0KGMpOmEuX2V2ZW50c1tiXT1bYyxhLl9ldmVudHNbYl1dO2Vsc2UgYS5vbihiLGMpO30KICBmdW5jdGlvbiBvZChhLGIpe2E9YXx8e307dGhpcy5vYmplY3RNb2RlPSEhYS5vYmplY3RNb2RlO2IgaW5zdGFuY2VvZiBWJiYodGhpcy5vYmplY3RNb2RlPXRoaXMub2JqZWN0TW9kZXx8ISFhLnJlYWRhYmxlT2JqZWN0TW9kZSk7Yj1hLmhpZ2hXYXRlck1hcms7dmFyIGM9dGhpcy5vYmplY3RNb2RlPzE2OjE2Mzg0O3RoaXMuaGlnaFdhdGVyTWFyaz1ifHwwPT09Yj9iOmM7dGhpcy5oaWdoV2F0ZXJNYXJrPX5+dGhpcy5oaWdoV2F0ZXJNYXJrO3RoaXMuYnVmZmVyPW5ldyBpZDt0aGlzLmxlbmd0aD0wO3RoaXMucGlwZXM9bnVsbDt0aGlzLnBpcGVzQ291bnQ9MDt0aGlzLmZsb3dpbmc9bnVsbDt0aGlzLnJlYWRpbmc9dGhpcy5lbmRFbWl0dGVkPXRoaXMuZW5kZWQ9ITE7dGhpcy5zeW5jPSEwO3RoaXMucmVzdW1lU2NoZWR1bGVkPXRoaXMucmVhZGFibGVMaXN0ZW5pbmc9dGhpcy5lbWl0dGVkUmVhZGFibGU9dGhpcy5uZWVkUmVhZGFibGU9ITE7dGhpcy5kZWZhdWx0RW5jb2Rpbmc9YS5kZWZhdWx0RW5jb2Rpbmd8fAogICJ1dGY4Ijt0aGlzLnJhbk91dD0hMTt0aGlzLmF3YWl0RHJhaW49MDt0aGlzLnJlYWRpbmdNb3JlPSExO3RoaXMuZW5jb2Rpbmc9dGhpcy5kZWNvZGVyPW51bGw7YS5lbmNvZGluZyYmKHRoaXMuZGVjb2Rlcj1uZXcga2QoYS5lbmNvZGluZyksdGhpcy5lbmNvZGluZz1hLmVuY29kaW5nKTt9ZnVuY3Rpb24gUChhKXtpZighKHRoaXMgaW5zdGFuY2VvZiBQKSlyZXR1cm4gbmV3IFAoYSk7dGhpcy5fcmVhZGFibGVTdGF0ZT1uZXcgb2QoYSx0aGlzKTt0aGlzLnJlYWRhYmxlPSEwO2EmJiJmdW5jdGlvbiI9PT10eXBlb2YgYS5yZWFkJiYodGhpcy5fcmVhZD1hLnJlYWQpO08uY2FsbCh0aGlzKTt9CiAgUC5wcm90b3R5cGUucHVzaD1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuX3JlYWRhYmxlU3RhdGU7Yy5vYmplY3RNb2RlfHwic3RyaW5nIiE9PXR5cGVvZiBhfHwoYj1ifHxjLmRlZmF1bHRFbmNvZGluZyxiIT09Yy5lbmNvZGluZyYmKGE9ei5mcm9tKGEsYiksYj0iIikpO3JldHVybiBxZCh0aGlzLGMsYSxiLCExKX07UC5wcm90b3R5cGUudW5zaGlmdD1mdW5jdGlvbihhKXtyZXR1cm4gcWQodGhpcyx0aGlzLl9yZWFkYWJsZVN0YXRlLGEsIiIsITApfTtQLnByb3RvdHlwZS5pc1BhdXNlZD1mdW5jdGlvbigpe3JldHVybiAhMT09PXRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZ307CiAgZnVuY3Rpb24gcWQoYSxiLGMsZCxlKXt2YXIgZj1jO3ZhciBnPW51bGw7TmEoZil8fCJzdHJpbmciPT09dHlwZW9mIGZ8fG51bGw9PT1mfHx2b2lkIDA9PT1mfHxiLm9iamVjdE1vZGV8fChnPW5ldyBUeXBlRXJyb3IoIkludmFsaWQgbm9uLXN0cmluZy9idWZmZXIgY2h1bmsiKSk7aWYoZj1nKWEuZW1pdCgiZXJyb3IiLGYpO2Vsc2UgaWYobnVsbD09PWMpYi5yZWFkaW5nPSExLGIuZW5kZWR8fChiLmRlY29kZXImJihjPWIuZGVjb2Rlci5lbmQoKSkmJmMubGVuZ3RoJiYoYi5idWZmZXIucHVzaChjKSxiLmxlbmd0aCs9Yi5vYmplY3RNb2RlPzE6Yy5sZW5ndGgpLGIuZW5kZWQ9ITAscmQoYSkpO2Vsc2UgaWYoYi5vYmplY3RNb2RlfHxjJiYwPGMubGVuZ3RoKWlmKGIuZW5kZWQmJiFlKWEuZW1pdCgiZXJyb3IiLEVycm9yKCJzdHJlYW0ucHVzaCgpIGFmdGVyIEVPRiIpKTtlbHNlIGlmKGIuZW5kRW1pdHRlZCYmZSlhLmVtaXQoImVycm9yIixFcnJvcigic3RyZWFtLnVuc2hpZnQoKSBhZnRlciBlbmQgZXZlbnQiKSk7CiAgZWxzZSB7aWYoYi5kZWNvZGVyJiYhZSYmIWQpe2M9Yi5kZWNvZGVyLndyaXRlKGMpO3ZhciBoPSFiLm9iamVjdE1vZGUmJjA9PT1jLmxlbmd0aDt9ZXx8KGIucmVhZGluZz0hMSk7aHx8KGIuZmxvd2luZyYmMD09PWIubGVuZ3RoJiYhYi5zeW5jPyhhLmVtaXQoImRhdGEiLGMpLGEucmVhZCgwKSk6KGIubGVuZ3RoKz1iLm9iamVjdE1vZGU/MTpjLmxlbmd0aCxlP2IuYnVmZmVyLnVuc2hpZnQoYyk6Yi5idWZmZXIucHVzaChjKSxiLm5lZWRSZWFkYWJsZSYmcmQoYSkpKTtiLnJlYWRpbmdNb3JlfHwoYi5yZWFkaW5nTW9yZT0hMCxHKHNkLGEsYikpO31lbHNlIGV8fChiLnJlYWRpbmc9ITEpO3JldHVybiAhYi5lbmRlZCYmKGIubmVlZFJlYWRhYmxlfHxiLmxlbmd0aDxiLmhpZ2hXYXRlck1hcmt8fDA9PT1iLmxlbmd0aCl9CiAgUC5wcm90b3R5cGUuc2V0RW5jb2Rpbmc9ZnVuY3Rpb24oYSl7dGhpcy5fcmVhZGFibGVTdGF0ZS5kZWNvZGVyPW5ldyBrZChhKTt0aGlzLl9yZWFkYWJsZVN0YXRlLmVuY29kaW5nPWE7cmV0dXJuIHRoaXN9O2Z1bmN0aW9uIHRkKGEsYil7aWYoMD49YXx8MD09PWIubGVuZ3RoJiZiLmVuZGVkKXJldHVybiAwO2lmKGIub2JqZWN0TW9kZSlyZXR1cm4gMTtpZihhIT09YSlyZXR1cm4gYi5mbG93aW5nJiZiLmxlbmd0aD9iLmJ1ZmZlci5oZWFkLmRhdGEubGVuZ3RoOmIubGVuZ3RoO2lmKGE+Yi5oaWdoV2F0ZXJNYXJrKXt2YXIgYz1hOzgzODg2MDg8PWM/Yz04Mzg4NjA4OihjLS0sY3w9Yz4+PjEsY3w9Yz4+PjIsY3w9Yz4+PjQsY3w9Yz4+PjgsY3w9Yz4+PjE2LGMrKyk7Yi5oaWdoV2F0ZXJNYXJrPWM7fXJldHVybiBhPD1iLmxlbmd0aD9hOmIuZW5kZWQ/Yi5sZW5ndGg6KGIubmVlZFJlYWRhYmxlPSEwLDApfQogIFAucHJvdG90eXBlLnJlYWQ9ZnVuY3Rpb24oYSl7USgicmVhZCIsYSk7YT1wYXJzZUludChhLDEwKTt2YXIgYj10aGlzLl9yZWFkYWJsZVN0YXRlLGM9YTswIT09YSYmKGIuZW1pdHRlZFJlYWRhYmxlPSExKTtpZigwPT09YSYmYi5uZWVkUmVhZGFibGUmJihiLmxlbmd0aD49Yi5oaWdoV2F0ZXJNYXJrfHxiLmVuZGVkKSlyZXR1cm4gUSgicmVhZDogZW1pdFJlYWRhYmxlIixiLmxlbmd0aCxiLmVuZGVkKSwwPT09Yi5sZW5ndGgmJmIuZW5kZWQ/SmQodGhpcyk6cmQodGhpcyksbnVsbDthPXRkKGEsYik7aWYoMD09PWEmJmIuZW5kZWQpcmV0dXJuIDA9PT1iLmxlbmd0aCYmSmQodGhpcyksbnVsbDt2YXIgZD1iLm5lZWRSZWFkYWJsZTtRKCJuZWVkIHJlYWRhYmxlIixkKTtpZigwPT09Yi5sZW5ndGh8fGIubGVuZ3RoLWE8Yi5oaWdoV2F0ZXJNYXJrKWQ9ITAsUSgibGVuZ3RoIGxlc3MgdGhhbiB3YXRlcm1hcmsiLGQpO2IuZW5kZWR8fGIucmVhZGluZz9RKCJyZWFkaW5nIG9yIGVuZGVkIiwKICAhMSk6ZCYmKFEoImRvIHJlYWQiKSxiLnJlYWRpbmc9ITAsYi5zeW5jPSEwLDA9PT1iLmxlbmd0aCYmKGIubmVlZFJlYWRhYmxlPSEwKSx0aGlzLl9yZWFkKGIuaGlnaFdhdGVyTWFyayksYi5zeW5jPSExLGIucmVhZGluZ3x8KGE9dGQoYyxiKSkpO2Q9MDxhP0tkKGEsYik6bnVsbDtudWxsPT09ZD8oYi5uZWVkUmVhZGFibGU9ITAsYT0wKTpiLmxlbmd0aC09YTswPT09Yi5sZW5ndGgmJihiLmVuZGVkfHwoYi5uZWVkUmVhZGFibGU9ITApLGMhPT1hJiZiLmVuZGVkJiZKZCh0aGlzKSk7bnVsbCE9PWQmJnRoaXMuZW1pdCgiZGF0YSIsZCk7cmV0dXJuIGR9O2Z1bmN0aW9uIHJkKGEpe3ZhciBiPWEuX3JlYWRhYmxlU3RhdGU7Yi5uZWVkUmVhZGFibGU9ITE7Yi5lbWl0dGVkUmVhZGFibGV8fChRKCJlbWl0UmVhZGFibGUiLGIuZmxvd2luZyksYi5lbWl0dGVkUmVhZGFibGU9ITAsYi5zeW5jP0coTGQsYSk6TGQoYSkpO30KICBmdW5jdGlvbiBMZChhKXtRKCJlbWl0IHJlYWRhYmxlIik7YS5lbWl0KCJyZWFkYWJsZSIpO01kKGEpO31mdW5jdGlvbiBzZChhLGIpe2Zvcih2YXIgYz1iLmxlbmd0aDshYi5yZWFkaW5nJiYhYi5mbG93aW5nJiYhYi5lbmRlZCYmYi5sZW5ndGg8Yi5oaWdoV2F0ZXJNYXJrJiYoUSgibWF5YmVSZWFkTW9yZSByZWFkIDAiKSxhLnJlYWQoMCksYyE9PWIubGVuZ3RoKTspYz1iLmxlbmd0aDtiLnJlYWRpbmdNb3JlPSExO31QLnByb3RvdHlwZS5fcmVhZD1mdW5jdGlvbigpe3RoaXMuZW1pdCgiZXJyb3IiLEVycm9yKCJub3QgaW1wbGVtZW50ZWQiKSk7fTsKICBQLnByb3RvdHlwZS5waXBlPWZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhKXtRKCJvbnVucGlwZSIpO2E9PT1uJiZlKCk7fWZ1bmN0aW9uIGQoKXtRKCJvbmVuZCIpO2EuZW5kKCk7fWZ1bmN0aW9uIGUoKXtRKCJjbGVhbnVwIik7YS5yZW1vdmVMaXN0ZW5lcigiY2xvc2UiLGgpO2EucmVtb3ZlTGlzdGVuZXIoImZpbmlzaCIsayk7YS5yZW1vdmVMaXN0ZW5lcigiZHJhaW4iLEIpO2EucmVtb3ZlTGlzdGVuZXIoImVycm9yIixnKTthLnJlbW92ZUxpc3RlbmVyKCJ1bnBpcGUiLGMpO24ucmVtb3ZlTGlzdGVuZXIoImVuZCIsZCk7bi5yZW1vdmVMaXN0ZW5lcigiZW5kIixlKTtuLnJlbW92ZUxpc3RlbmVyKCJkYXRhIixmKTttPSEwOyFxLmF3YWl0RHJhaW58fGEuX3dyaXRhYmxlU3RhdGUmJiFhLl93cml0YWJsZVN0YXRlLm5lZWREcmFpbnx8QigpO31mdW5jdGlvbiBmKGIpe1EoIm9uZGF0YSIpO3Y9ITE7ITEhPT1hLndyaXRlKGIpfHx2fHwoKDE9PT1xLnBpcGVzQ291bnQmJnEucGlwZXM9PT0KICBhfHwxPHEucGlwZXNDb3VudCYmLTEhPT1OZChxLnBpcGVzLGEpKSYmIW0mJihRKCJmYWxzZSB3cml0ZSByZXNwb25zZSwgcGF1c2UiLG4uX3JlYWRhYmxlU3RhdGUuYXdhaXREcmFpbiksbi5fcmVhZGFibGVTdGF0ZS5hd2FpdERyYWluKyssdj0hMCksbi5wYXVzZSgpKTt9ZnVuY3Rpb24gZyhiKXtRKCJvbmVycm9yIixiKTtwKCk7YS5yZW1vdmVMaXN0ZW5lcigiZXJyb3IiLGcpOzA9PT1hLmxpc3RlbmVycygiZXJyb3IiKS5sZW5ndGgmJmEuZW1pdCgiZXJyb3IiLGIpO31mdW5jdGlvbiBoKCl7YS5yZW1vdmVMaXN0ZW5lcigiZmluaXNoIixrKTtwKCk7fWZ1bmN0aW9uIGsoKXtRKCJvbmZpbmlzaCIpO2EucmVtb3ZlTGlzdGVuZXIoImNsb3NlIixoKTtwKCk7fWZ1bmN0aW9uIHAoKXtRKCJ1bnBpcGUiKTtuLnVucGlwZShhKTt9dmFyIG49dGhpcyxxPXRoaXMuX3JlYWRhYmxlU3RhdGU7c3dpdGNoKHEucGlwZXNDb3VudCl7Y2FzZSAwOnEucGlwZXM9YTticmVhaztjYXNlIDE6cS5waXBlcz1bcS5waXBlcywKICBhXTticmVhaztkZWZhdWx0OnEucGlwZXMucHVzaChhKTt9cS5waXBlc0NvdW50Kz0xO1EoInBpcGUgY291bnQ9JWQgb3B0cz0laiIscS5waXBlc0NvdW50LGIpO2I9YiYmITE9PT1iLmVuZD9lOmQ7aWYocS5lbmRFbWl0dGVkKUcoYik7ZWxzZSBuLm9uY2UoImVuZCIsYik7YS5vbigidW5waXBlIixjKTt2YXIgQj1PZChuKTthLm9uKCJkcmFpbiIsQik7dmFyIG09ITEsdj0hMTtuLm9uKCJkYXRhIixmKTtwZChhLCJlcnJvciIsZyk7YS5vbmNlKCJjbG9zZSIsaCk7YS5vbmNlKCJmaW5pc2giLGspO2EuZW1pdCgicGlwZSIsbik7cS5mbG93aW5nfHwoUSgicGlwZSByZXN1bWUiKSxuLnJlc3VtZSgpKTtyZXR1cm4gYX07CiAgZnVuY3Rpb24gT2QoYSl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGI9YS5fcmVhZGFibGVTdGF0ZTtRKCJwaXBlT25EcmFpbiIsYi5hd2FpdERyYWluKTtiLmF3YWl0RHJhaW4mJmIuYXdhaXREcmFpbi0tOzA9PT1iLmF3YWl0RHJhaW4mJmEubGlzdGVuZXJzKCJkYXRhIikubGVuZ3RoJiYoYi5mbG93aW5nPSEwLE1kKGEpKTt9fQogIFAucHJvdG90eXBlLnVucGlwZT1mdW5jdGlvbihhKXt2YXIgYj10aGlzLl9yZWFkYWJsZVN0YXRlO2lmKDA9PT1iLnBpcGVzQ291bnQpcmV0dXJuIHRoaXM7aWYoMT09PWIucGlwZXNDb3VudCl7aWYoYSYmYSE9PWIucGlwZXMpcmV0dXJuIHRoaXM7YXx8KGE9Yi5waXBlcyk7Yi5waXBlcz1udWxsO2IucGlwZXNDb3VudD0wO2IuZmxvd2luZz0hMTthJiZhLmVtaXQoInVucGlwZSIsdGhpcyk7cmV0dXJuIHRoaXN9aWYoIWEpe2E9Yi5waXBlczt2YXIgYz1iLnBpcGVzQ291bnQ7Yi5waXBlcz1udWxsO2IucGlwZXNDb3VudD0wO2IuZmxvd2luZz0hMTtmb3IoYj0wO2I8YztiKyspYVtiXS5lbWl0KCJ1bnBpcGUiLHRoaXMpO3JldHVybiB0aGlzfWM9TmQoYi5waXBlcyxhKTtpZigtMT09PWMpcmV0dXJuIHRoaXM7Yi5waXBlcy5zcGxpY2UoYywxKTstLWIucGlwZXNDb3VudDsxPT09Yi5waXBlc0NvdW50JiYoYi5waXBlcz1iLnBpcGVzWzBdKTthLmVtaXQoInVucGlwZSIsdGhpcyk7cmV0dXJuIHRoaXN9OwogIFAucHJvdG90eXBlLm9uPWZ1bmN0aW9uKGEsYil7Yj1PLnByb3RvdHlwZS5vbi5jYWxsKHRoaXMsYSxiKTsiZGF0YSI9PT1hPyExIT09dGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nJiZ0aGlzLnJlc3VtZSgpOiJyZWFkYWJsZSI9PT1hJiYoYT10aGlzLl9yZWFkYWJsZVN0YXRlLGEuZW5kRW1pdHRlZHx8YS5yZWFkYWJsZUxpc3RlbmluZ3x8KGEucmVhZGFibGVMaXN0ZW5pbmc9YS5uZWVkUmVhZGFibGU9ITAsYS5lbWl0dGVkUmVhZGFibGU9ITEsYS5yZWFkaW5nP2EubGVuZ3RoJiZyZCh0aGlzKTpHKFBkLHRoaXMpKSk7cmV0dXJuIGJ9O1AucHJvdG90eXBlLmFkZExpc3RlbmVyPVAucHJvdG90eXBlLm9uO2Z1bmN0aW9uIFBkKGEpe1EoInJlYWRhYmxlIG5leHR0aWNrIHJlYWQgMCIpO2EucmVhZCgwKTt9CiAgUC5wcm90b3R5cGUucmVzdW1lPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5fcmVhZGFibGVTdGF0ZTthLmZsb3dpbmd8fChRKCJyZXN1bWUiKSxhLmZsb3dpbmc9ITAsYS5yZXN1bWVTY2hlZHVsZWR8fChhLnJlc3VtZVNjaGVkdWxlZD0hMCxHKFFkLHRoaXMsYSkpKTtyZXR1cm4gdGhpc307ZnVuY3Rpb24gUWQoYSxiKXtiLnJlYWRpbmd8fChRKCJyZXN1bWUgcmVhZCAwIiksYS5yZWFkKDApKTtiLnJlc3VtZVNjaGVkdWxlZD0hMTtiLmF3YWl0RHJhaW49MDthLmVtaXQoInJlc3VtZSIpO01kKGEpO2IuZmxvd2luZyYmIWIucmVhZGluZyYmYS5yZWFkKDApO31QLnByb3RvdHlwZS5wYXVzZT1mdW5jdGlvbigpe1EoImNhbGwgcGF1c2UgZmxvd2luZz0laiIsdGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nKTshMSE9PXRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZyYmKFEoInBhdXNlIiksdGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nPSExLHRoaXMuZW1pdCgicGF1c2UiKSk7cmV0dXJuIHRoaXN9OwogIGZ1bmN0aW9uIE1kKGEpe3ZhciBiPWEuX3JlYWRhYmxlU3RhdGU7Zm9yKFEoImZsb3ciLGIuZmxvd2luZyk7Yi5mbG93aW5nJiZudWxsIT09YS5yZWFkKCk7KTt9CiAgUC5wcm90b3R5cGUud3JhcD1mdW5jdGlvbihhKXt2YXIgYj10aGlzLl9yZWFkYWJsZVN0YXRlLGM9ITEsZD10aGlzO2Eub24oImVuZCIsZnVuY3Rpb24oKXtRKCJ3cmFwcGVkIGVuZCIpO2lmKGIuZGVjb2RlciYmIWIuZW5kZWQpe3ZhciBhPWIuZGVjb2Rlci5lbmQoKTthJiZhLmxlbmd0aCYmZC5wdXNoKGEpO31kLnB1c2gobnVsbCk7fSk7YS5vbigiZGF0YSIsZnVuY3Rpb24oZSl7USgid3JhcHBlZCBkYXRhIik7Yi5kZWNvZGVyJiYoZT1iLmRlY29kZXIud3JpdGUoZSkpO2Iub2JqZWN0TW9kZSYmKG51bGw9PT1lfHx2b2lkIDA9PT1lKXx8IShiLm9iamVjdE1vZGV8fGUmJmUubGVuZ3RoKXx8ZC5wdXNoKGUpfHwoYz0hMCxhLnBhdXNlKCkpO30pO2Zvcih2YXIgZSBpbiBhKXZvaWQgMD09PXRoaXNbZV0mJiJmdW5jdGlvbiI9PT10eXBlb2YgYVtlXSYmKHRoaXNbZV09ZnVuY3Rpb24oYil7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGFbYl0uYXBwbHkoYSxhcmd1bWVudHMpfX0oZSkpO1JkKFsiZXJyb3IiLAogICJjbG9zZSIsImRlc3Ryb3kiLCJwYXVzZSIsInJlc3VtZSJdLGZ1bmN0aW9uKGIpe2Eub24oYixkLmVtaXQuYmluZChkLGIpKTt9KTtkLl9yZWFkPWZ1bmN0aW9uKGIpe1EoIndyYXBwZWQgX3JlYWQiLGIpO2MmJihjPSExLGEucmVzdW1lKCkpO307cmV0dXJuIGR9O1AuX2Zyb21MaXN0PUtkOwogIGZ1bmN0aW9uIEtkKGEsYil7aWYoMD09PWIubGVuZ3RoKXJldHVybiBudWxsO2lmKGIub2JqZWN0TW9kZSl2YXIgYz1iLmJ1ZmZlci5zaGlmdCgpO2Vsc2UgaWYoIWF8fGE+PWIubGVuZ3RoKWM9Yi5kZWNvZGVyP2IuYnVmZmVyLmpvaW4oIiIpOjE9PT1iLmJ1ZmZlci5sZW5ndGg/Yi5idWZmZXIuaGVhZC5kYXRhOmIuYnVmZmVyLmNvbmNhdChiLmxlbmd0aCksYi5idWZmZXIuY2xlYXIoKTtlbHNlIHtjPWIuYnVmZmVyO2I9Yi5kZWNvZGVyO2lmKGE8Yy5oZWFkLmRhdGEubGVuZ3RoKWI9Yy5oZWFkLmRhdGEuc2xpY2UoMCxhKSxjLmhlYWQuZGF0YT1jLmhlYWQuZGF0YS5zbGljZShhKTtlbHNlIHtpZihhPT09Yy5oZWFkLmRhdGEubGVuZ3RoKWM9Yy5zaGlmdCgpO2Vsc2UgaWYoYil7Yj1jLmhlYWQ7dmFyIGQ9MSxlPWIuZGF0YTtmb3IoYS09ZS5sZW5ndGg7Yj1iLm5leHQ7KXt2YXIgZj1iLmRhdGEsZz1hPmYubGVuZ3RoP2YubGVuZ3RoOmE7ZT1nPT09Zi5sZW5ndGg/ZStmOmUrZi5zbGljZSgwLAogIGEpO2EtPWc7aWYoMD09PWEpe2c9PT1mLmxlbmd0aD8oKytkLGMuaGVhZD1iLm5leHQ/Yi5uZXh0OmMudGFpbD1udWxsKTooYy5oZWFkPWIsYi5kYXRhPWYuc2xpY2UoZykpO2JyZWFrfSsrZDt9Yy5sZW5ndGgtPWQ7Yz1lO31lbHNlIHtiPXouYWxsb2NVbnNhZmUoYSk7ZD1jLmhlYWQ7ZT0xO2QuZGF0YS5jb3B5KGIpO2ZvcihhLT1kLmRhdGEubGVuZ3RoO2Q9ZC5uZXh0Oyl7Zj1kLmRhdGE7Zz1hPmYubGVuZ3RoP2YubGVuZ3RoOmE7Zi5jb3B5KGIsYi5sZW5ndGgtYSwwLGcpO2EtPWc7aWYoMD09PWEpe2c9PT1mLmxlbmd0aD8oKytlLGMuaGVhZD1kLm5leHQ/ZC5uZXh0OmMudGFpbD1udWxsKTooYy5oZWFkPWQsZC5kYXRhPWYuc2xpY2UoZykpO2JyZWFrfSsrZTt9Yy5sZW5ndGgtPWU7Yz1iO31iPWM7fWM9Yjt9cmV0dXJuIGN9CiAgZnVuY3Rpb24gSmQoYSl7dmFyIGI9YS5fcmVhZGFibGVTdGF0ZTtpZigwPGIubGVuZ3RoKXRocm93IEVycm9yKCciZW5kUmVhZGFibGUoKSIgY2FsbGVkIG9uIG5vbi1lbXB0eSBzdHJlYW0nKTtiLmVuZEVtaXR0ZWR8fChiLmVuZGVkPSEwLEcoU2QsYixhKSk7fWZ1bmN0aW9uIFNkKGEsYil7YS5lbmRFbWl0dGVkfHwwIT09YS5sZW5ndGh8fChhLmVuZEVtaXR0ZWQ9ITAsYi5yZWFkYWJsZT0hMSxiLmVtaXQoImVuZCIpKTt9ZnVuY3Rpb24gUmQoYSxiKXtmb3IodmFyIGM9MCxkPWEubGVuZ3RoO2M8ZDtjKyspYihhW2NdLGMpO31mdW5jdGlvbiBOZChhLGIpe2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7YzxkO2MrKylpZihhW2NdPT09YilyZXR1cm4gYztyZXR1cm4gLTF9Vy5Xcml0YWJsZVN0YXRlPVRkO0RiKFcsTyk7ZnVuY3Rpb24gVWQoKXt9ZnVuY3Rpb24gVmQoYSxiLGMpe3RoaXMuY2h1bms9YTt0aGlzLmVuY29kaW5nPWI7dGhpcy5jYWxsYmFjaz1jO3RoaXMubmV4dD1udWxsO30KICBmdW5jdGlvbiBUZChhLGIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCJidWZmZXIiLHtnZXQ6SWIoZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRCdWZmZXIoKX0sIl93cml0YWJsZVN0YXRlLmJ1ZmZlciBpcyBkZXByZWNhdGVkLiBVc2UgX3dyaXRhYmxlU3RhdGUuZ2V0QnVmZmVyIGluc3RlYWQuIil9KTthPWF8fHt9O3RoaXMub2JqZWN0TW9kZT0hIWEub2JqZWN0TW9kZTtiIGluc3RhbmNlb2YgViYmKHRoaXMub2JqZWN0TW9kZT10aGlzLm9iamVjdE1vZGV8fCEhYS53cml0YWJsZU9iamVjdE1vZGUpO3ZhciBjPWEuaGlnaFdhdGVyTWFyayxkPXRoaXMub2JqZWN0TW9kZT8xNjoxNjM4NDt0aGlzLmhpZ2hXYXRlck1hcms9Y3x8MD09PWM/YzpkO3RoaXMuaGlnaFdhdGVyTWFyaz1+fnRoaXMuaGlnaFdhdGVyTWFyazt0aGlzLmZpbmlzaGVkPXRoaXMuZW5kZWQ9dGhpcy5lbmRpbmc9dGhpcy5uZWVkRHJhaW49ITE7dGhpcy5kZWNvZGVTdHJpbmdzPSExIT09YS5kZWNvZGVTdHJpbmdzOwogIHRoaXMuZGVmYXVsdEVuY29kaW5nPWEuZGVmYXVsdEVuY29kaW5nfHwidXRmOCI7dGhpcy5sZW5ndGg9MDt0aGlzLndyaXRpbmc9ITE7dGhpcy5jb3JrZWQ9MDt0aGlzLnN5bmM9ITA7dGhpcy5idWZmZXJQcm9jZXNzaW5nPSExO3RoaXMub253cml0ZT1mdW5jdGlvbihhKXt2YXIgYz1iLl93cml0YWJsZVN0YXRlLGQ9Yy5zeW5jLGU9Yy53cml0ZWNiO2Mud3JpdGluZz0hMTtjLndyaXRlY2I9bnVsbDtjLmxlbmd0aC09Yy53cml0ZWxlbjtjLndyaXRlbGVuPTA7YT8oLS1jLnBlbmRpbmdjYixkP0coZSxhKTplKGEpLGIuX3dyaXRhYmxlU3RhdGUuZXJyb3JFbWl0dGVkPSEwLGIuZW1pdCgiZXJyb3IiLGEpKTooKGE9V2QoYykpfHxjLmNvcmtlZHx8Yy5idWZmZXJQcm9jZXNzaW5nfHwhYy5idWZmZXJlZFJlcXVlc3R8fFhkKGIsYyksZD9HKFlkLGIsYyxhLGUpOllkKGIsYyxhLGUpKTt9O3RoaXMud3JpdGVjYj1udWxsO3RoaXMud3JpdGVsZW49MDt0aGlzLmxhc3RCdWZmZXJlZFJlcXVlc3Q9CiAgdGhpcy5idWZmZXJlZFJlcXVlc3Q9bnVsbDt0aGlzLnBlbmRpbmdjYj0wO3RoaXMuZXJyb3JFbWl0dGVkPXRoaXMucHJlZmluaXNoZWQ9ITE7dGhpcy5idWZmZXJlZFJlcXVlc3RDb3VudD0wO3RoaXMuY29ya2VkUmVxdWVzdHNGcmVlPW5ldyBaZCh0aGlzKTt9VGQucHJvdG90eXBlLmdldEJ1ZmZlcj1mdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmJ1ZmZlcmVkUmVxdWVzdCxiPVtdO2E7KWIucHVzaChhKSxhPWEubmV4dDtyZXR1cm4gYn07ZnVuY3Rpb24gVyhhKXtpZighKHRoaXMgaW5zdGFuY2VvZiBXfHx0aGlzIGluc3RhbmNlb2YgVikpcmV0dXJuIG5ldyBXKGEpO3RoaXMuX3dyaXRhYmxlU3RhdGU9bmV3IFRkKGEsdGhpcyk7dGhpcy53cml0YWJsZT0hMDthJiYoImZ1bmN0aW9uIj09PXR5cGVvZiBhLndyaXRlJiYodGhpcy5fd3JpdGU9YS53cml0ZSksImZ1bmN0aW9uIj09PXR5cGVvZiBhLndyaXRldiYmKHRoaXMuX3dyaXRldj1hLndyaXRldikpO08uY2FsbCh0aGlzKTt9CiAgVy5wcm90b3R5cGUucGlwZT1mdW5jdGlvbigpe3RoaXMuZW1pdCgiZXJyb3IiLEVycm9yKCJDYW5ub3QgcGlwZSwgbm90IHJlYWRhYmxlIikpO307CiAgVy5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMuX3dyaXRhYmxlU3RhdGUsZT0hMTsiZnVuY3Rpb24iPT09dHlwZW9mIGImJihjPWIsYj1udWxsKTt6LmlzQnVmZmVyKGEpP2I9ImJ1ZmZlciI6Ynx8KGI9ZC5kZWZhdWx0RW5jb2RpbmcpOyJmdW5jdGlvbiIhPT10eXBlb2YgYyYmKGM9VWQpO2lmKGQuZW5kZWQpZD1jLGE9RXJyb3IoIndyaXRlIGFmdGVyIGVuZCIpLHRoaXMuZW1pdCgiZXJyb3IiLGEpLEcoZCxhKTtlbHNlIHt2YXIgZj1jLGc9ITAsaD0hMTtudWxsPT09YT9oPW5ldyBUeXBlRXJyb3IoIk1heSBub3Qgd3JpdGUgbnVsbCB2YWx1ZXMgdG8gc3RyZWFtIik6ei5pc0J1ZmZlcihhKXx8InN0cmluZyI9PT10eXBlb2YgYXx8dm9pZCAwPT09YXx8ZC5vYmplY3RNb2RlfHwoaD1uZXcgVHlwZUVycm9yKCJJbnZhbGlkIG5vbi1zdHJpbmcvYnVmZmVyIGNodW5rIikpO2gmJih0aGlzLmVtaXQoImVycm9yIixoKSxHKGYsaCksZz0hMSk7ZyYmKGQucGVuZGluZ2NiKyssCiAgZT1iLGQub2JqZWN0TW9kZXx8ITE9PT1kLmRlY29kZVN0cmluZ3N8fCJzdHJpbmciIT09dHlwZW9mIGF8fChhPXouZnJvbShhLGUpKSx6LmlzQnVmZmVyKGEpJiYoZT0iYnVmZmVyIiksZj1kLm9iamVjdE1vZGU/MTphLmxlbmd0aCxkLmxlbmd0aCs9ZixiPWQubGVuZ3RoPGQuaGlnaFdhdGVyTWFyayxifHwoZC5uZWVkRHJhaW49ITApLGQud3JpdGluZ3x8ZC5jb3JrZWQ/KGY9ZC5sYXN0QnVmZmVyZWRSZXF1ZXN0LGQubGFzdEJ1ZmZlcmVkUmVxdWVzdD1uZXcgVmQoYSxlLGMpLGY/Zi5uZXh0PWQubGFzdEJ1ZmZlcmVkUmVxdWVzdDpkLmJ1ZmZlcmVkUmVxdWVzdD1kLmxhc3RCdWZmZXJlZFJlcXVlc3QsZC5idWZmZXJlZFJlcXVlc3RDb3VudCs9MSk6JGQodGhpcyxkLCExLGYsYSxlLGMpLGU9Yik7fXJldHVybiBlfTtXLnByb3RvdHlwZS5jb3JrPWZ1bmN0aW9uKCl7dGhpcy5fd3JpdGFibGVTdGF0ZS5jb3JrZWQrKzt9OwogIFcucHJvdG90eXBlLnVuY29yaz1mdW5jdGlvbigpe3ZhciBhPXRoaXMuX3dyaXRhYmxlU3RhdGU7YS5jb3JrZWQmJihhLmNvcmtlZC0tLGEud3JpdGluZ3x8YS5jb3JrZWR8fGEuZmluaXNoZWR8fGEuYnVmZmVyUHJvY2Vzc2luZ3x8IWEuYnVmZmVyZWRSZXF1ZXN0fHxYZCh0aGlzLGEpKTt9O1cucHJvdG90eXBlLnNldERlZmF1bHRFbmNvZGluZz1mdW5jdGlvbihhKXsic3RyaW5nIj09PXR5cGVvZiBhJiYoYT1hLnRvTG93ZXJDYXNlKCkpO2lmKCEoLTE8ImhleCB1dGY4IHV0Zi04IGFzY2lpIGJpbmFyeSBiYXNlNjQgdWNzMiB1Y3MtMiB1dGYxNmxlIHV0Zi0xNmxlIHJhdyIuc3BsaXQoIiAiKS5pbmRleE9mKChhKyIiKS50b0xvd2VyQ2FzZSgpKSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiVW5rbm93biBlbmNvZGluZzogIithKTt0aGlzLl93cml0YWJsZVN0YXRlLmRlZmF1bHRFbmNvZGluZz1hO3JldHVybiB0aGlzfTsKICBmdW5jdGlvbiAkZChhLGIsYyxkLGUsZixnKXtiLndyaXRlbGVuPWQ7Yi53cml0ZWNiPWc7Yi53cml0aW5nPSEwO2Iuc3luYz0hMDtjP2EuX3dyaXRldihlLGIub253cml0ZSk6YS5fd3JpdGUoZSxmLGIub253cml0ZSk7Yi5zeW5jPSExO31mdW5jdGlvbiBZZChhLGIsYyxkKXshYyYmMD09PWIubGVuZ3RoJiZiLm5lZWREcmFpbiYmKGIubmVlZERyYWluPSExLGEuZW1pdCgiZHJhaW4iKSk7Yi5wZW5kaW5nY2ItLTtkKCk7YWUoYSxiKTt9CiAgZnVuY3Rpb24gWGQoYSxiKXtiLmJ1ZmZlclByb2Nlc3Npbmc9ITA7dmFyIGM9Yi5idWZmZXJlZFJlcXVlc3Q7aWYoYS5fd3JpdGV2JiZjJiZjLm5leHQpe3ZhciBkPUFycmF5KGIuYnVmZmVyZWRSZXF1ZXN0Q291bnQpLGU9Yi5jb3JrZWRSZXF1ZXN0c0ZyZWU7ZS5lbnRyeT1jO2Zvcih2YXIgZj0wO2M7KWRbZl09YyxjPWMubmV4dCxmKz0xOyRkKGEsYiwhMCxiLmxlbmd0aCxkLCIiLGUuZmluaXNoKTtiLnBlbmRpbmdjYisrO2IubGFzdEJ1ZmZlcmVkUmVxdWVzdD1udWxsO2UubmV4dD8oYi5jb3JrZWRSZXF1ZXN0c0ZyZWU9ZS5uZXh0LGUubmV4dD1udWxsKTpiLmNvcmtlZFJlcXVlc3RzRnJlZT1uZXcgWmQoYik7fWVsc2Uge2Zvcig7YyYmKGQ9Yy5jaHVuaywkZChhLGIsITEsYi5vYmplY3RNb2RlPzE6ZC5sZW5ndGgsZCxjLmVuY29kaW5nLGMuY2FsbGJhY2spLGM9Yy5uZXh0LCFiLndyaXRpbmcpOyk7bnVsbD09PWMmJihiLmxhc3RCdWZmZXJlZFJlcXVlc3Q9bnVsbCk7fWIuYnVmZmVyZWRSZXF1ZXN0Q291bnQ9CiAgMDtiLmJ1ZmZlcmVkUmVxdWVzdD1jO2IuYnVmZmVyUHJvY2Vzc2luZz0hMTt9Vy5wcm90b3R5cGUuX3dyaXRlPWZ1bmN0aW9uKGEsYixjKXtjKEVycm9yKCJub3QgaW1wbGVtZW50ZWQiKSk7fTtXLnByb3RvdHlwZS5fd3JpdGV2PW51bGw7Vy5wcm90b3R5cGUuZW5kPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLl93cml0YWJsZVN0YXRlOyJmdW5jdGlvbiI9PT10eXBlb2YgYT8oYz1hLGI9YT1udWxsKToiZnVuY3Rpb24iPT09dHlwZW9mIGImJihjPWIsYj1udWxsKTtudWxsIT09YSYmdm9pZCAwIT09YSYmdGhpcy53cml0ZShhLGIpO2QuY29ya2VkJiYoZC5jb3JrZWQ9MSx0aGlzLnVuY29yaygpKTtpZighZC5lbmRpbmcmJiFkLmZpbmlzaGVkKXthPWM7ZC5lbmRpbmc9ITA7YWUodGhpcyxkKTtpZihhKWlmKGQuZmluaXNoZWQpRyhhKTtlbHNlIHRoaXMub25jZSgiZmluaXNoIixhKTtkLmVuZGVkPSEwO3RoaXMud3JpdGFibGU9ITE7fX07CiAgZnVuY3Rpb24gV2QoYSl7cmV0dXJuIGEuZW5kaW5nJiYwPT09YS5sZW5ndGgmJm51bGw9PT1hLmJ1ZmZlcmVkUmVxdWVzdCYmIWEuZmluaXNoZWQmJiFhLndyaXRpbmd9ZnVuY3Rpb24gYWUoYSxiKXt2YXIgYz1XZChiKTtjJiYoMD09PWIucGVuZGluZ2NiPyhiLnByZWZpbmlzaGVkfHwoYi5wcmVmaW5pc2hlZD0hMCxhLmVtaXQoInByZWZpbmlzaCIpKSxiLmZpbmlzaGVkPSEwLGEuZW1pdCgiZmluaXNoIikpOmIucHJlZmluaXNoZWR8fChiLnByZWZpbmlzaGVkPSEwLGEuZW1pdCgicHJlZmluaXNoIikpKTtyZXR1cm4gY30KICBmdW5jdGlvbiBaZChhKXt2YXIgYj10aGlzO3RoaXMuZW50cnk9dGhpcy5uZXh0PW51bGw7dGhpcy5maW5pc2g9ZnVuY3Rpb24oYyl7dmFyIGQ9Yi5lbnRyeTtmb3IoYi5lbnRyeT1udWxsO2Q7KXt2YXIgZT1kLmNhbGxiYWNrO2EucGVuZGluZ2NiLS07ZShjKTtkPWQubmV4dDt9YS5jb3JrZWRSZXF1ZXN0c0ZyZWU/YS5jb3JrZWRSZXF1ZXN0c0ZyZWUubmV4dD1iOmEuY29ya2VkUmVxdWVzdHNGcmVlPWI7fTt9RGIoVixQKTtmb3IodmFyIGJlPU9iamVjdC5rZXlzKFcucHJvdG90eXBlKSxjZT0wO2NlPGJlLmxlbmd0aDtjZSsrKXt2YXIgZGU9YmVbY2VdO1YucHJvdG90eXBlW2RlXXx8KFYucHJvdG90eXBlW2RlXT1XLnByb3RvdHlwZVtkZV0pO30KICBmdW5jdGlvbiBWKGEpe2lmKCEodGhpcyBpbnN0YW5jZW9mIFYpKXJldHVybiBuZXcgVihhKTtQLmNhbGwodGhpcyxhKTtXLmNhbGwodGhpcyxhKTthJiYhMT09PWEucmVhZGFibGUmJih0aGlzLnJlYWRhYmxlPSExKTthJiYhMT09PWEud3JpdGFibGUmJih0aGlzLndyaXRhYmxlPSExKTt0aGlzLmFsbG93SGFsZk9wZW49ITA7YSYmITE9PT1hLmFsbG93SGFsZk9wZW4mJih0aGlzLmFsbG93SGFsZk9wZW49ITEpO3RoaXMub25jZSgiZW5kIixlZSk7fWZ1bmN0aW9uIGVlKCl7dGhpcy5hbGxvd0hhbGZPcGVufHx0aGlzLl93cml0YWJsZVN0YXRlLmVuZGVkfHxHKGZlLHRoaXMpO31mdW5jdGlvbiBmZShhKXthLmVuZCgpO31EYihYLFYpOwogIGZ1bmN0aW9uIGdlKGEpe3RoaXMuYWZ0ZXJUcmFuc2Zvcm09ZnVuY3Rpb24oYixjKXt2YXIgZD1hLl90cmFuc2Zvcm1TdGF0ZTtkLnRyYW5zZm9ybWluZz0hMTt2YXIgZT1kLndyaXRlY2I7ZT8oZC53cml0ZWNodW5rPW51bGwsZC53cml0ZWNiPW51bGwsbnVsbCE9PWMmJnZvaWQgMCE9PWMmJmEucHVzaChjKSxlKGIpLGI9YS5fcmVhZGFibGVTdGF0ZSxiLnJlYWRpbmc9ITEsKGIubmVlZFJlYWRhYmxlfHxiLmxlbmd0aDxiLmhpZ2hXYXRlck1hcmspJiZhLl9yZWFkKGIuaGlnaFdhdGVyTWFyayksYj12b2lkIDApOmI9YS5lbWl0KCJlcnJvciIsRXJyb3IoIm5vIHdyaXRlY2IgaW4gVHJhbnNmb3JtIGNsYXNzIikpO3JldHVybiBifTt0aGlzLnRyYW5zZm9ybWluZz10aGlzLm5lZWRUcmFuc2Zvcm09ITE7dGhpcy53cml0ZWVuY29kaW5nPXRoaXMud3JpdGVjaHVuaz10aGlzLndyaXRlY2I9bnVsbDt9CiAgZnVuY3Rpb24gWChhKXtpZighKHRoaXMgaW5zdGFuY2VvZiBYKSlyZXR1cm4gbmV3IFgoYSk7Vi5jYWxsKHRoaXMsYSk7dGhpcy5fdHJhbnNmb3JtU3RhdGU9bmV3IGdlKHRoaXMpO3ZhciBiPXRoaXM7dGhpcy5fcmVhZGFibGVTdGF0ZS5uZWVkUmVhZGFibGU9ITA7dGhpcy5fcmVhZGFibGVTdGF0ZS5zeW5jPSExO2EmJigiZnVuY3Rpb24iPT09dHlwZW9mIGEudHJhbnNmb3JtJiYodGhpcy5fdHJhbnNmb3JtPWEudHJhbnNmb3JtKSwiZnVuY3Rpb24iPT09dHlwZW9mIGEuZmx1c2gmJih0aGlzLl9mbHVzaD1hLmZsdXNoKSk7dGhpcy5vbmNlKCJwcmVmaW5pc2giLGZ1bmN0aW9uKCl7ImZ1bmN0aW9uIj09PXR5cGVvZiB0aGlzLl9mbHVzaD90aGlzLl9mbHVzaChmdW5jdGlvbihhKXtoZShiLGEpO30pOmhlKGIpO30pO30KICBYLnByb3RvdHlwZS5wdXNoPWZ1bmN0aW9uKGEsYil7dGhpcy5fdHJhbnNmb3JtU3RhdGUubmVlZFRyYW5zZm9ybT0hMTtyZXR1cm4gVi5wcm90b3R5cGUucHVzaC5jYWxsKHRoaXMsYSxiKX07WC5wcm90b3R5cGUuX3RyYW5zZm9ybT1mdW5jdGlvbigpe3Rocm93IEVycm9yKCJOb3QgaW1wbGVtZW50ZWQiKTt9O1gucHJvdG90eXBlLl93cml0ZT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5fdHJhbnNmb3JtU3RhdGU7ZC53cml0ZWNiPWM7ZC53cml0ZWNodW5rPWE7ZC53cml0ZWVuY29kaW5nPWI7ZC50cmFuc2Zvcm1pbmd8fChhPXRoaXMuX3JlYWRhYmxlU3RhdGUsKGQubmVlZFRyYW5zZm9ybXx8YS5uZWVkUmVhZGFibGV8fGEubGVuZ3RoPGEuaGlnaFdhdGVyTWFyaykmJnRoaXMuX3JlYWQoYS5oaWdoV2F0ZXJNYXJrKSk7fTsKICBYLnByb3RvdHlwZS5fcmVhZD1mdW5jdGlvbigpe3ZhciBhPXRoaXMuX3RyYW5zZm9ybVN0YXRlO251bGwhPT1hLndyaXRlY2h1bmsmJmEud3JpdGVjYiYmIWEudHJhbnNmb3JtaW5nPyhhLnRyYW5zZm9ybWluZz0hMCx0aGlzLl90cmFuc2Zvcm0oYS53cml0ZWNodW5rLGEud3JpdGVlbmNvZGluZyxhLmFmdGVyVHJhbnNmb3JtKSk6YS5uZWVkVHJhbnNmb3JtPSEwO307ZnVuY3Rpb24gaGUoYSxiKXtpZihiKXJldHVybiBhLmVtaXQoImVycm9yIixiKTtiPWEuX3RyYW5zZm9ybVN0YXRlO2lmKGEuX3dyaXRhYmxlU3RhdGUubGVuZ3RoKXRocm93IEVycm9yKCJDYWxsaW5nIHRyYW5zZm9ybSBkb25lIHdoZW4gd3MubGVuZ3RoICE9IDAiKTtpZihiLnRyYW5zZm9ybWluZyl0aHJvdyBFcnJvcigiQ2FsbGluZyB0cmFuc2Zvcm0gZG9uZSB3aGVuIHN0aWxsIHRyYW5zZm9ybWluZyIpO3JldHVybiBhLnB1c2gobnVsbCl9RGIoaWUsWCk7CiAgZnVuY3Rpb24gaWUoYSl7aWYoISh0aGlzIGluc3RhbmNlb2YgaWUpKXJldHVybiBuZXcgaWUoYSk7WC5jYWxsKHRoaXMsYSk7fWllLnByb3RvdHlwZS5fdHJhbnNmb3JtPWZ1bmN0aW9uKGEsYixjKXtjKG51bGwsYSk7fTtEYihZLE8pO1kuUmVhZGFibGU9UDtZLldyaXRhYmxlPVc7WS5EdXBsZXg9VjtZLlRyYW5zZm9ybT1YO1kuUGFzc1Rocm91Z2g9aWU7WS5TdHJlYW09WTtmdW5jdGlvbiBZKCl7Ty5jYWxsKHRoaXMpO30KICBZLnByb3RvdHlwZS5waXBlPWZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhiKXthLndyaXRhYmxlJiYhMT09PWEud3JpdGUoYikmJmsucGF1c2UmJmsucGF1c2UoKTt9ZnVuY3Rpb24gZCgpe2sucmVhZGFibGUmJmsucmVzdW1lJiZrLnJlc3VtZSgpO31mdW5jdGlvbiBlKCl7cHx8KHA9ITAsYS5lbmQoKSk7fWZ1bmN0aW9uIGYoKXtwfHwocD0hMCwiZnVuY3Rpb24iPT09dHlwZW9mIGEuZGVzdHJveSYmYS5kZXN0cm95KCkpO31mdW5jdGlvbiBnKGEpe2goKTtpZigwPT09Ty5saXN0ZW5lckNvdW50KHRoaXMsImVycm9yIikpdGhyb3cgYTt9ZnVuY3Rpb24gaCgpe2sucmVtb3ZlTGlzdGVuZXIoImRhdGEiLGMpO2EucmVtb3ZlTGlzdGVuZXIoImRyYWluIixkKTtrLnJlbW92ZUxpc3RlbmVyKCJlbmQiLGUpO2sucmVtb3ZlTGlzdGVuZXIoImNsb3NlIixmKTtrLnJlbW92ZUxpc3RlbmVyKCJlcnJvciIsZyk7YS5yZW1vdmVMaXN0ZW5lcigiZXJyb3IiLGcpO2sucmVtb3ZlTGlzdGVuZXIoImVuZCIsCiAgaCk7ay5yZW1vdmVMaXN0ZW5lcigiY2xvc2UiLGgpO2EucmVtb3ZlTGlzdGVuZXIoImNsb3NlIixoKTt9dmFyIGs9dGhpcztrLm9uKCJkYXRhIixjKTthLm9uKCJkcmFpbiIsZCk7YS5faXNTdGRpb3x8YiYmITE9PT1iLmVuZHx8KGsub24oImVuZCIsZSksay5vbigiY2xvc2UiLGYpKTt2YXIgcD0hMTtrLm9uKCJlcnJvciIsZyk7YS5vbigiZXJyb3IiLGcpO2sub24oImVuZCIsaCk7ay5vbigiY2xvc2UiLGgpO2Eub24oImNsb3NlIixoKTthLmVtaXQoInBpcGUiLGspO3JldHVybiBhfTsKICB2YXIgamU9QXJyYXkucHJvdG90eXBlLnNsaWNlLGxlPXtleHRlbmQ6ZnVuY3Rpb24ga2UoYSxiKXtmb3IodmFyIGQgaW4gYilhW2RdPWJbZF07cmV0dXJuIDM+YXJndW1lbnRzLmxlbmd0aD9hOmtlLmFwcGx5KG51bGwsW2FdLmNvbmNhdChqZS5jYWxsKGFyZ3VtZW50cywyKSkpfX0sbWU9dShmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoYSxiLGMpe3ZvaWQgMD09PWMmJihjPWZ1bmN0aW9uKGEpe3JldHVybiBhfSk7cmV0dXJuIGZ1bmN0aW9uKCl7Zm9yKHZhciBlPVtdLGY9MDtmPGFyZ3VtZW50cy5sZW5ndGg7ZisrKWVbZl09YXJndW1lbnRzW2ZdO3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihmLGcpe2FbYl0uYmluZChhKS5hcHBseSh2b2lkIDAsZChlLFtmdW5jdGlvbihhLGIpe3JldHVybiBhP2coYSk6ZihjKGIpKX1dKSk7fSl9fXZhciBkPWwmJmwuX19zcHJlYWRBcnJheXN8fGZ1bmN0aW9uKCl7Zm9yKHZhciBhPTAsYj0wLGM9YXJndW1lbnRzLmxlbmd0aDtiPGM7YisrKWErPQogIGFyZ3VtZW50c1tiXS5sZW5ndGg7YT1BcnJheShhKTt2YXIgZD0wO2ZvcihiPTA7YjxjO2IrKylmb3IodmFyIGU9YXJndW1lbnRzW2JdLG49MCxxPWUubGVuZ3RoO248cTtuKyssZCsrKWFbZF09ZVtuXTtyZXR1cm4gYX07T2JqZWN0LmRlZmluZVByb3BlcnR5KGIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGIpe3RoaXMudm9sPWE7dGhpcy5mZD1iO31hLnByb3RvdHlwZS5hcHBlbmRGaWxlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGModGhpcy52b2wsImFwcGVuZEZpbGUiKSh0aGlzLmZkLGEsYil9O2EucHJvdG90eXBlLmNobW9kPWZ1bmN0aW9uKGEpe3JldHVybiBjKHRoaXMudm9sLCJmY2htb2QiKSh0aGlzLmZkLGEpfTthLnByb3RvdHlwZS5jaG93bj1mdW5jdGlvbihhLGIpe3JldHVybiBjKHRoaXMudm9sLCJmY2hvd24iKSh0aGlzLmZkLGEsYil9O2EucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIGModGhpcy52b2wsCiAgImNsb3NlIikodGhpcy5mZCl9O2EucHJvdG90eXBlLmRhdGFzeW5jPWZ1bmN0aW9uKCl7cmV0dXJuIGModGhpcy52b2wsImZkYXRhc3luYyIpKHRoaXMuZmQpfTthLnByb3RvdHlwZS5yZWFkPWZ1bmN0aW9uKGEsYixkLGUpe3JldHVybiBjKHRoaXMudm9sLCJyZWFkIixmdW5jdGlvbihiKXtyZXR1cm4ge2J5dGVzUmVhZDpiLGJ1ZmZlcjphfX0pKHRoaXMuZmQsYSxiLGQsZSl9O2EucHJvdG90eXBlLnJlYWRGaWxlPWZ1bmN0aW9uKGEpe3JldHVybiBjKHRoaXMudm9sLCJyZWFkRmlsZSIpKHRoaXMuZmQsYSl9O2EucHJvdG90eXBlLnN0YXQ9ZnVuY3Rpb24oYSl7cmV0dXJuIGModGhpcy52b2wsImZzdGF0IikodGhpcy5mZCxhKX07YS5wcm90b3R5cGUuc3luYz1mdW5jdGlvbigpe3JldHVybiBjKHRoaXMudm9sLCJmc3luYyIpKHRoaXMuZmQpfTthLnByb3RvdHlwZS50cnVuY2F0ZT1mdW5jdGlvbihhKXtyZXR1cm4gYyh0aGlzLnZvbCwiZnRydW5jYXRlIikodGhpcy5mZCxhKX07YS5wcm90b3R5cGUudXRpbWVzPQogIGZ1bmN0aW9uKGEsYil7cmV0dXJuIGModGhpcy52b2wsImZ1dGltZXMiKSh0aGlzLmZkLGEsYil9O2EucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGEsYixkLGUpe3JldHVybiBjKHRoaXMudm9sLCJ3cml0ZSIsZnVuY3Rpb24oYil7cmV0dXJuIHtieXRlc1dyaXR0ZW46YixidWZmZXI6YX19KSh0aGlzLmZkLGEsYixkLGUpfTthLnByb3RvdHlwZS53cml0ZUZpbGU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYyh0aGlzLnZvbCwid3JpdGVGaWxlIikodGhpcy5mZCxhLGIpfTtyZXR1cm4gYX0oKTtiLkZpbGVIYW5kbGU9ZTtiLmRlZmF1bHQ9ZnVuY3Rpb24oYSl7cmV0dXJuICJ1bmRlZmluZWQiPT09dHlwZW9mIFByb21pc2U/bnVsbDp7RmlsZUhhbmRsZTplLGFjY2VzczpmdW5jdGlvbihiLGQpe3JldHVybiBjKGEsImFjY2VzcyIpKGIsZCl9LGFwcGVuZEZpbGU6ZnVuY3Rpb24oYixkLGYpe3JldHVybiBjKGEsImFwcGVuZEZpbGUiKShiIGluc3RhbmNlb2YgZT9iLmZkOmIsZCxmKX0sY2htb2Q6ZnVuY3Rpb24oYiwKICBkKXtyZXR1cm4gYyhhLCJjaG1vZCIpKGIsZCl9LGNob3duOmZ1bmN0aW9uKGIsZCxlKXtyZXR1cm4gYyhhLCJjaG93biIpKGIsZCxlKX0sY29weUZpbGU6ZnVuY3Rpb24oYixkLGUpe3JldHVybiBjKGEsImNvcHlGaWxlIikoYixkLGUpfSxsY2htb2Q6ZnVuY3Rpb24oYixkKXtyZXR1cm4gYyhhLCJsY2htb2QiKShiLGQpfSxsY2hvd246ZnVuY3Rpb24oYixkLGUpe3JldHVybiBjKGEsImxjaG93biIpKGIsZCxlKX0sbGluazpmdW5jdGlvbihiLGQpe3JldHVybiBjKGEsImxpbmsiKShiLGQpfSxsc3RhdDpmdW5jdGlvbihiLGQpe3JldHVybiBjKGEsImxzdGF0IikoYixkKX0sbWtkaXI6ZnVuY3Rpb24oYixkKXtyZXR1cm4gYyhhLCJta2RpciIpKGIsZCl9LG1rZHRlbXA6ZnVuY3Rpb24oYixkKXtyZXR1cm4gYyhhLCJta2R0ZW1wIikoYixkKX0sb3BlbjpmdW5jdGlvbihiLGQsZil7cmV0dXJuIGMoYSwib3BlbiIsZnVuY3Rpb24oYil7cmV0dXJuIG5ldyBlKGEsYil9KShiLGQsZil9LHJlYWRkaXI6ZnVuY3Rpb24oYiwKICBkKXtyZXR1cm4gYyhhLCJyZWFkZGlyIikoYixkKX0scmVhZEZpbGU6ZnVuY3Rpb24oYixkKXtyZXR1cm4gYyhhLCJyZWFkRmlsZSIpKGIgaW5zdGFuY2VvZiBlP2IuZmQ6YixkKX0scmVhZGxpbms6ZnVuY3Rpb24oYixkKXtyZXR1cm4gYyhhLCJyZWFkbGluayIpKGIsZCl9LHJlYWxwYXRoOmZ1bmN0aW9uKGIsZCl7cmV0dXJuIGMoYSwicmVhbHBhdGgiKShiLGQpfSxyZW5hbWU6ZnVuY3Rpb24oYixkKXtyZXR1cm4gYyhhLCJyZW5hbWUiKShiLGQpfSxybWRpcjpmdW5jdGlvbihiKXtyZXR1cm4gYyhhLCJybWRpciIpKGIpfSxzdGF0OmZ1bmN0aW9uKGIsZCl7cmV0dXJuIGMoYSwic3RhdCIpKGIsZCl9LHN5bWxpbms6ZnVuY3Rpb24oYixkLGUpe3JldHVybiBjKGEsInN5bWxpbmsiKShiLGQsZSl9LHRydW5jYXRlOmZ1bmN0aW9uKGIsZCl7cmV0dXJuIGMoYSwidHJ1bmNhdGUiKShiLGQpfSx1bmxpbms6ZnVuY3Rpb24oYil7cmV0dXJuIGMoYSwidW5saW5rIikoYil9LHV0aW1lczpmdW5jdGlvbihiLAogIGQsZSl7cmV0dXJuIGMoYSwidXRpbWVzIikoYixkLGUpfSx3cml0ZUZpbGU6ZnVuY3Rpb24oYixkLGYpe3JldHVybiBjKGEsIndyaXRlRmlsZSIpKGIgaW5zdGFuY2VvZiBlP2IuZmQ6YixkLGYpfX19O30pO3QobWUpO3ZhciBuZT0vW15ceDIwLVx4N0VdLyxvZT0vW1x4MkVcdTMwMDJcdUZGMEVcdUZGNjFdL2cscGU9e292ZXJmbG93OiJPdmVyZmxvdzogaW5wdXQgbmVlZHMgd2lkZXIgaW50ZWdlcnMgdG8gcHJvY2VzcyIsIm5vdC1iYXNpYyI6IklsbGVnYWwgaW5wdXQgPj0gMHg4MCAobm90IGEgYmFzaWMgY29kZSBwb2ludCkiLCJpbnZhbGlkLWlucHV0IjoiSW52YWxpZCBpbnB1dCJ9LHFlPU1hdGguZmxvb3IscmU9U3RyaW5nLmZyb21DaGFyQ29kZTsKICBmdW5jdGlvbiBzZShhLGIpe3ZhciBjPWEuc3BsaXQoIkAiKSxkPSIiOzE8Yy5sZW5ndGgmJihkPWNbMF0rIkAiLGE9Y1sxXSk7YT1hLnJlcGxhY2Uob2UsIi4iKTthPWEuc3BsaXQoIi4iKTtjPWEubGVuZ3RoO2Zvcih2YXIgZT1bXTtjLS07KWVbY109YihhW2NdKTtiPWUuam9pbigiLiIpO3JldHVybiBkK2J9ZnVuY3Rpb24gdGUoYSxiKXtyZXR1cm4gYSsyMis3NSooMjY+YSktKCgwIT1iKTw8NSl9CiAgZnVuY3Rpb24gdWUoYSl7cmV0dXJuIHNlKGEsZnVuY3Rpb24oYSl7aWYobmUudGVzdChhKSl7dmFyIGI7dmFyIGQ9W107dmFyIGU9W107dmFyIGY9MDtmb3IoYj1hLmxlbmd0aDtmPGI7KXt2YXIgZz1hLmNoYXJDb2RlQXQoZisrKTtpZig1NTI5Njw9ZyYmNTYzMTk+PWcmJmY8Yil7dmFyIGg9YS5jaGFyQ29kZUF0KGYrKyk7NTYzMjA9PShoJjY0NTEyKT9lLnB1c2goKChnJjEwMjMpPDwxMCkrKGgmMTAyMykrNjU1MzYpOihlLnB1c2goZyksZi0tKTt9ZWxzZSBlLnB1c2goZyk7fWE9ZTtoPWEubGVuZ3RoO2U9MTI4O3ZhciBrPTA7dmFyIHA9NzI7Zm9yKGc9MDtnPGg7KytnKXt2YXIgbj1hW2ddOzEyOD5uJiZkLnB1c2gocmUobikpO31mb3IoKGY9Yj1kLmxlbmd0aCkmJmQucHVzaCgiLSIpO2Y8aDspe3ZhciBxPTIxNDc0ODM2NDc7Zm9yKGc9MDtnPGg7KytnKW49YVtnXSxuPj1lJiZuPHEmJihxPW4pO3ZhciBCPWYrMTtpZihxLWU+cWUoKDIxNDc0ODM2NDctaykvQikpdGhyb3cgbmV3IFJhbmdlRXJyb3IocGUub3ZlcmZsb3cpOwogIGsrPShxLWUpKkI7ZT1xO2ZvcihnPTA7ZzxoOysrZyl7bj1hW2ddO2lmKG48ZSYmMjE0NzQ4MzY0NzwrK2spdGhyb3cgbmV3IFJhbmdlRXJyb3IocGUub3ZlcmZsb3cpO2lmKG49PWUpe3ZhciBtPWs7Zm9yKHE9MzY7O3ErPTM2KXtuPXE8PXA/MTpxPj1wKzI2PzI2OnEtcDtpZihtPG4pYnJlYWs7dmFyIHY9bS1uO209MzYtbjtkLnB1c2gocmUodGUobit2JW0sMCkpKTttPXFlKHYvbSk7fWQucHVzaChyZSh0ZShtLDApKSk7cD1CO3E9MDtrPWY9PWI/cWUoay83MDApOms+PjE7Zm9yKGsrPXFlKGsvcCk7NDU1PGs7cSs9MzYpaz1xZShrLzM1KTtwPXFlKHErMzYqay8oayszOCkpO2s9MDsrK2Y7fX0rK2s7KytlO31kPSJ4bi0tIitkLmpvaW4oIiIpO31lbHNlIGQ9YTtyZXR1cm4gZH0pfXZhciB2ZT1BcnJheS5pc0FycmF5fHxmdW5jdGlvbihhKXtyZXR1cm4gIltvYmplY3QgQXJyYXldIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhKX07CiAgZnVuY3Rpb24gd2UoYSl7c3dpdGNoKHR5cGVvZiBhKXtjYXNlICJzdHJpbmciOnJldHVybiBhO2Nhc2UgImJvb2xlYW4iOnJldHVybiBhPyJ0cnVlIjoiZmFsc2UiO2Nhc2UgIm51bWJlciI6cmV0dXJuIGlzRmluaXRlKGEpP2E6IiI7ZGVmYXVsdDpyZXR1cm4gIiJ9fWZ1bmN0aW9uIHhlKGEsYixjLGQpe2I9Ynx8IiYiO2M9Y3x8Ij0iO251bGw9PT1hJiYoYT12b2lkIDApO3JldHVybiAib2JqZWN0Ij09PXR5cGVvZiBhP3llKHplKGEpLGZ1bmN0aW9uKGQpe3ZhciBlPWVuY29kZVVSSUNvbXBvbmVudCh3ZShkKSkrYztyZXR1cm4gdmUoYVtkXSk/eWUoYVtkXSxmdW5jdGlvbihhKXtyZXR1cm4gZStlbmNvZGVVUklDb21wb25lbnQod2UoYSkpfSkuam9pbihiKTplK2VuY29kZVVSSUNvbXBvbmVudCh3ZShhW2RdKSl9KS5qb2luKGIpOmQ/ZW5jb2RlVVJJQ29tcG9uZW50KHdlKGQpKStjK2VuY29kZVVSSUNvbXBvbmVudCh3ZShhKSk6IiJ9CiAgZnVuY3Rpb24geWUoYSxiKXtpZihhLm1hcClyZXR1cm4gYS5tYXAoYik7Zm9yKHZhciBjPVtdLGQ9MDtkPGEubGVuZ3RoO2QrKyljLnB1c2goYihhW2RdLGQpKTtyZXR1cm4gY312YXIgemU9T2JqZWN0LmtleXN8fGZ1bmN0aW9uKGEpe3ZhciBiPVtdLGM7Zm9yKGMgaW4gYSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYSxjKSYmYi5wdXNoKGMpO3JldHVybiBifTsKICBmdW5jdGlvbiBBZShhLGIsYyxkKXtjPWN8fCI9Ijt2YXIgZT17fTtpZigic3RyaW5nIiE9PXR5cGVvZiBhfHwwPT09YS5sZW5ndGgpcmV0dXJuIGU7dmFyIGY9L1wrL2c7YT1hLnNwbGl0KGJ8fCImIik7Yj0xRTM7ZCYmIm51bWJlciI9PT10eXBlb2YgZC5tYXhLZXlzJiYoYj1kLm1heEtleXMpO2Q9YS5sZW5ndGg7MDxiJiZkPmImJihkPWIpO2ZvcihiPTA7YjxkOysrYil7dmFyIGc9YVtiXS5yZXBsYWNlKGYsIiUyMCIpLGg9Zy5pbmRleE9mKGMpO2lmKDA8PWgpe3ZhciBrPWcuc3Vic3RyKDAsaCk7Zz1nLnN1YnN0cihoKzEpO31lbHNlIGs9ZyxnPSIiO2s9ZGVjb2RlVVJJQ29tcG9uZW50KGspO2c9ZGVjb2RlVVJJQ29tcG9uZW50KGcpO09iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLGspP3ZlKGVba10pP2Vba10ucHVzaChnKTplW2tdPVtlW2tdLGddOmVba109Zzt9cmV0dXJuIGV9CiAgdmFyIEZlPXtwYXJzZTpCZSxyZXNvbHZlOkNlLHJlc29sdmVPYmplY3Q6RGUsZm9ybWF0OkVlLFVybDpafTtmdW5jdGlvbiBaKCl7dGhpcy5ocmVmPXRoaXMucGF0aD10aGlzLnBhdGhuYW1lPXRoaXMucXVlcnk9dGhpcy5zZWFyY2g9dGhpcy5oYXNoPXRoaXMuaG9zdG5hbWU9dGhpcy5wb3J0PXRoaXMuaG9zdD10aGlzLmF1dGg9dGhpcy5zbGFzaGVzPXRoaXMucHJvdG9jb2w9bnVsbDt9CiAgdmFyIEdlPS9eKFthLXowLTkuKy1dKzopL2ksSGU9LzpbMC05XSokLyxJZT0vXihcL1wvPyg/IVwvKVteXD9cc10qKShcP1teXHNdKik/JC8sSmU9Int9fFxcXmAiLnNwbGl0KCIiKS5jb25jYXQoJzw+ImAgXHJcblx0Jy5zcGxpdCgiIikpLEtlPVsiJyJdLmNvbmNhdChKZSksTGU9WyIlIiwiLyIsIj8iLCI7IiwiIyJdLmNvbmNhdChLZSksTWU9WyIvIiwiPyIsIiMiXSxOZT0yNTUsT2U9L15bK2EtejAtOUEtWl8tXXswLDYzfSQvLFBlPS9eKFsrYS16MC05QS1aXy1dezAsNjN9KSguKikkLyxRZT17amF2YXNjcmlwdDohMCwiamF2YXNjcmlwdDoiOiEwfSxSZT17amF2YXNjcmlwdDohMCwiamF2YXNjcmlwdDoiOiEwfSxTZT17aHR0cDohMCxodHRwczohMCxmdHA6ITAsZ29waGVyOiEwLGZpbGU6ITAsImh0dHA6IjohMCwiaHR0cHM6IjohMCwiZnRwOiI6ITAsImdvcGhlcjoiOiEwLCJmaWxlOiI6ITB9OwogIGZ1bmN0aW9uIEJlKGEsYixjKXtpZihhJiZIYihhKSYmYSBpbnN0YW5jZW9mIFopcmV0dXJuIGE7dmFyIGQ9bmV3IFo7ZC5wYXJzZShhLGIsYyk7cmV0dXJuIGR9Wi5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBUZSh0aGlzLGEsYixjKX07CiAgZnVuY3Rpb24gVGUoYSxiLGMsZCl7aWYoIUdiKGIpKXRocm93IG5ldyBUeXBlRXJyb3IoIlBhcmFtZXRlciAndXJsJyBtdXN0IGJlIGEgc3RyaW5nLCBub3QgIit0eXBlb2YgYik7dmFyIGU9Yi5pbmRleE9mKCI/Iik7ZT0tMSE9PWUmJmU8Yi5pbmRleE9mKCIjIik/Ij8iOiIjIjtiPWIuc3BsaXQoZSk7YlswXT1iWzBdLnJlcGxhY2UoL1xcL2csIi8iKTtiPWIuam9pbihlKTtlPWIudHJpbSgpO2lmKCFkJiYxPT09Yi5zcGxpdCgiIyIpLmxlbmd0aCYmKGI9SWUuZXhlYyhlKSkpcmV0dXJuIGEucGF0aD1lLGEuaHJlZj1lLGEucGF0aG5hbWU9YlsxXSxiWzJdPyhhLnNlYXJjaD1iWzJdLGEucXVlcnk9Yz9BZShhLnNlYXJjaC5zdWJzdHIoMSkpOmEuc2VhcmNoLnN1YnN0cigxKSk6YyYmKGEuc2VhcmNoPSIiLGEucXVlcnk9e30pLGE7aWYoYj1HZS5leGVjKGUpKXtiPWJbMF07dmFyIGY9Yi50b0xvd2VyQ2FzZSgpO2EucHJvdG9jb2w9ZjtlPWUuc3Vic3RyKGIubGVuZ3RoKTt9aWYoZHx8Ynx8CiAgZS5tYXRjaCgvXlwvXC9bXkBcL10rQFteQFwvXSsvKSl7dmFyIGc9Ii8vIj09PWUuc3Vic3RyKDAsMik7IWd8fGImJlJlW2JdfHwoZT1lLnN1YnN0cigyKSxhLnNsYXNoZXM9ITApO31pZighUmVbYl0mJihnfHxiJiYhU2VbYl0pKXtiPS0xO2ZvcihkPTA7ZDxNZS5sZW5ndGg7ZCsrKWc9ZS5pbmRleE9mKE1lW2RdKSwtMSE9PWcmJigtMT09PWJ8fGc8YikmJihiPWcpO2c9LTE9PT1iP2UubGFzdEluZGV4T2YoIkAiKTplLmxhc3RJbmRleE9mKCJAIixiKTstMSE9PWcmJihkPWUuc2xpY2UoMCxnKSxlPWUuc2xpY2UoZysxKSxhLmF1dGg9ZGVjb2RlVVJJQ29tcG9uZW50KGQpKTtiPS0xO2ZvcihkPTA7ZDxMZS5sZW5ndGg7ZCsrKWc9ZS5pbmRleE9mKExlW2RdKSwtMSE9PWcmJigtMT09PWJ8fGc8YikmJihiPWcpOy0xPT09YiYmKGI9ZS5sZW5ndGgpO2EuaG9zdD1lLnNsaWNlKDAsYik7ZT1lLnNsaWNlKGIpO1VlKGEpO2EuaG9zdG5hbWU9YS5ob3N0bmFtZXx8IiI7Zz0iWyI9PT1hLmhvc3RuYW1lWzBdJiYKICAiXSI9PT1hLmhvc3RuYW1lW2EuaG9zdG5hbWUubGVuZ3RoLTFdO2lmKCFnKXt2YXIgaD1hLmhvc3RuYW1lLnNwbGl0KC9cLi8pO2Q9MDtmb3IoYj1oLmxlbmd0aDtkPGI7ZCsrKXt2YXIgaz1oW2RdO2lmKGsmJiFrLm1hdGNoKE9lKSl7Zm9yKHZhciBwPSIiLG49MCxxPWsubGVuZ3RoO248cTtuKyspcD0xMjc8ay5jaGFyQ29kZUF0KG4pP3ArIngiOnAra1tuXTtpZighcC5tYXRjaChPZSkpe2I9aC5zbGljZSgwLGQpO2Q9aC5zbGljZShkKzEpO2lmKGs9ay5tYXRjaChQZSkpYi5wdXNoKGtbMV0pLGQudW5zaGlmdChrWzJdKTtkLmxlbmd0aCYmKGU9Ii8iK2Quam9pbigiLiIpK2UpO2EuaG9zdG5hbWU9Yi5qb2luKCIuIik7YnJlYWt9fX19YS5ob3N0bmFtZT1hLmhvc3RuYW1lLmxlbmd0aD5OZT8iIjphLmhvc3RuYW1lLnRvTG93ZXJDYXNlKCk7Z3x8KGEuaG9zdG5hbWU9dWUoYS5ob3N0bmFtZSkpO2Q9YS5wb3J0PyI6IithLnBvcnQ6IiI7YS5ob3N0PShhLmhvc3RuYW1lfHwiIikrZDsKICBhLmhyZWYrPWEuaG9zdDtnJiYoYS5ob3N0bmFtZT1hLmhvc3RuYW1lLnN1YnN0cigxLGEuaG9zdG5hbWUubGVuZ3RoLTIpLCIvIiE9PWVbMF0mJihlPSIvIitlKSk7fWlmKCFRZVtmXSlmb3IoZD0wLGI9S2UubGVuZ3RoO2Q8YjtkKyspZz1LZVtkXSwtMSE9PWUuaW5kZXhPZihnKSYmKGs9ZW5jb2RlVVJJQ29tcG9uZW50KGcpLGs9PT1nJiYoaz1lc2NhcGUoZykpLGU9ZS5zcGxpdChnKS5qb2luKGspKTtkPWUuaW5kZXhPZigiIyIpOy0xIT09ZCYmKGEuaGFzaD1lLnN1YnN0cihkKSxlPWUuc2xpY2UoMCxkKSk7ZD1lLmluZGV4T2YoIj8iKTstMSE9PWQ/KGEuc2VhcmNoPWUuc3Vic3RyKGQpLGEucXVlcnk9ZS5zdWJzdHIoZCsxKSxjJiYoYS5xdWVyeT1BZShhLnF1ZXJ5KSksZT1lLnNsaWNlKDAsZCkpOmMmJihhLnNlYXJjaD0iIixhLnF1ZXJ5PXt9KTtlJiYoYS5wYXRobmFtZT1lKTtTZVtmXSYmYS5ob3N0bmFtZSYmIWEucGF0aG5hbWUmJihhLnBhdGhuYW1lPSIvIik7aWYoYS5wYXRobmFtZXx8CiAgYS5zZWFyY2gpZD1hLnBhdGhuYW1lfHwiIixhLnBhdGg9ZCsoYS5zZWFyY2h8fCIiKTthLmhyZWY9VmUoYSk7cmV0dXJuIGF9ZnVuY3Rpb24gRWUoYSl7R2IoYSkmJihhPVRlKHt9LGEpKTtyZXR1cm4gVmUoYSl9CiAgZnVuY3Rpb24gVmUoYSl7dmFyIGI9YS5hdXRofHwiIjtiJiYoYj1lbmNvZGVVUklDb21wb25lbnQoYiksYj1iLnJlcGxhY2UoLyUzQS9pLCI6IiksYis9IkAiKTt2YXIgYz1hLnByb3RvY29sfHwiIixkPWEucGF0aG5hbWV8fCIiLGU9YS5oYXNofHwiIixmPSExLGc9IiI7YS5ob3N0P2Y9YithLmhvc3Q6YS5ob3N0bmFtZSYmKGY9YisoLTE9PT1hLmhvc3RuYW1lLmluZGV4T2YoIjoiKT9hLmhvc3RuYW1lOiJbIit0aGlzLmhvc3RuYW1lKyJdIiksYS5wb3J0JiYoZis9IjoiK2EucG9ydCkpO2EucXVlcnkmJkhiKGEucXVlcnkpJiZPYmplY3Qua2V5cyhhLnF1ZXJ5KS5sZW5ndGgmJihnPXhlKGEucXVlcnkpKTtiPWEuc2VhcmNofHxnJiYiPyIrZ3x8IiI7YyYmIjoiIT09Yy5zdWJzdHIoLTEpJiYoYys9IjoiKTthLnNsYXNoZXN8fCghY3x8U2VbY10pJiYhMSE9PWY/KGY9Ii8vIisoZnx8IiIpLGQmJiIvIiE9PWQuY2hhckF0KDApJiYoZD0iLyIrZCkpOmZ8fChmPSIiKTtlJiYiIyIhPT1lLmNoYXJBdCgwKSYmCiAgKGU9IiMiK2UpO2ImJiI/IiE9PWIuY2hhckF0KDApJiYoYj0iPyIrYik7ZD1kLnJlcGxhY2UoL1s/I10vZyxmdW5jdGlvbihhKXtyZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KGEpfSk7Yj1iLnJlcGxhY2UoIiMiLCIlMjMiKTtyZXR1cm4gYytmK2QrYitlfVoucHJvdG90eXBlLmZvcm1hdD1mdW5jdGlvbigpe3JldHVybiBWZSh0aGlzKX07ZnVuY3Rpb24gQ2UoYSxiKXtyZXR1cm4gQmUoYSwhMSwhMCkucmVzb2x2ZShiKX1aLnByb3RvdHlwZS5yZXNvbHZlPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnJlc29sdmVPYmplY3QoQmUoYSwhMSwhMCkpLmZvcm1hdCgpfTtmdW5jdGlvbiBEZShhLGIpe3JldHVybiBhP0JlKGEsITEsITApLnJlc29sdmVPYmplY3QoYik6Yn0KICBaLnByb3RvdHlwZS5yZXNvbHZlT2JqZWN0PWZ1bmN0aW9uKGEpe2lmKEdiKGEpKXt2YXIgYj1uZXcgWjtiLnBhcnNlKGEsITEsITApO2E9Yjt9Yj1uZXcgWjtmb3IodmFyIGM9T2JqZWN0LmtleXModGhpcyksZD0wO2Q8Yy5sZW5ndGg7ZCsrKXt2YXIgZT1jW2RdO2JbZV09dGhpc1tlXTt9Yi5oYXNoPWEuaGFzaDtpZigiIj09PWEuaHJlZilyZXR1cm4gYi5ocmVmPWIuZm9ybWF0KCksYjtpZihhLnNsYXNoZXMmJiFhLnByb3RvY29sKXtjPU9iamVjdC5rZXlzKGEpO2ZvcihkPTA7ZDxjLmxlbmd0aDtkKyspZT1jW2RdLCJwcm90b2NvbCIhPT1lJiYoYltlXT1hW2VdKTtTZVtiLnByb3RvY29sXSYmYi5ob3N0bmFtZSYmIWIucGF0aG5hbWUmJihiLnBhdGg9Yi5wYXRobmFtZT0iLyIpO2IuaHJlZj1iLmZvcm1hdCgpO3JldHVybiBifXZhciBmO2lmKGEucHJvdG9jb2wmJmEucHJvdG9jb2whPT1iLnByb3RvY29sKXtpZighU2VbYS5wcm90b2NvbF0pe2M9T2JqZWN0LmtleXMoYSk7Zm9yKGQ9MDtkPAogIGMubGVuZ3RoO2QrKyllPWNbZF0sYltlXT1hW2VdO2IuaHJlZj1iLmZvcm1hdCgpO3JldHVybiBifWIucHJvdG9jb2w9YS5wcm90b2NvbDtpZihhLmhvc3R8fFJlW2EucHJvdG9jb2xdKWIucGF0aG5hbWU9YS5wYXRobmFtZTtlbHNlIHtmb3IoZj0oYS5wYXRobmFtZXx8IiIpLnNwbGl0KCIvIik7Zi5sZW5ndGgmJiEoYS5ob3N0PWYuc2hpZnQoKSk7KTthLmhvc3R8fChhLmhvc3Q9IiIpO2EuaG9zdG5hbWV8fChhLmhvc3RuYW1lPSIiKTsiIiE9PWZbMF0mJmYudW5zaGlmdCgiIik7Mj5mLmxlbmd0aCYmZi51bnNoaWZ0KCIiKTtiLnBhdGhuYW1lPWYuam9pbigiLyIpO31iLnNlYXJjaD1hLnNlYXJjaDtiLnF1ZXJ5PWEucXVlcnk7Yi5ob3N0PWEuaG9zdHx8IiI7Yi5hdXRoPWEuYXV0aDtiLmhvc3RuYW1lPWEuaG9zdG5hbWV8fGEuaG9zdDtiLnBvcnQ9YS5wb3J0O2lmKGIucGF0aG5hbWV8fGIuc2VhcmNoKWIucGF0aD0oYi5wYXRobmFtZXx8IiIpKyhiLnNlYXJjaHx8IiIpO2Iuc2xhc2hlcz0KICBiLnNsYXNoZXN8fGEuc2xhc2hlcztiLmhyZWY9Yi5mb3JtYXQoKTtyZXR1cm4gYn1jPWIucGF0aG5hbWUmJiIvIj09PWIucGF0aG5hbWUuY2hhckF0KDApO3ZhciBnPWEuaG9zdHx8YS5wYXRobmFtZSYmIi8iPT09YS5wYXRobmFtZS5jaGFyQXQoMCksaD1jPWd8fGN8fGIuaG9zdCYmYS5wYXRobmFtZTtkPWIucGF0aG5hbWUmJmIucGF0aG5hbWUuc3BsaXQoIi8iKXx8W107ZT1iLnByb3RvY29sJiYhU2VbYi5wcm90b2NvbF07Zj1hLnBhdGhuYW1lJiZhLnBhdGhuYW1lLnNwbGl0KCIvIil8fFtdO2UmJihiLmhvc3RuYW1lPSIiLGIucG9ydD1udWxsLGIuaG9zdCYmKCIiPT09ZFswXT9kWzBdPWIuaG9zdDpkLnVuc2hpZnQoYi5ob3N0KSksYi5ob3N0PSIiLGEucHJvdG9jb2wmJihhLmhvc3RuYW1lPW51bGwsYS5wb3J0PW51bGwsYS5ob3N0JiYoIiI9PT1mWzBdP2ZbMF09YS5ob3N0OmYudW5zaGlmdChhLmhvc3QpKSxhLmhvc3Q9bnVsbCksYz1jJiYoIiI9PT1mWzBdfHwiIj09PWRbMF0pKTsKICBpZihnKWIuaG9zdD1hLmhvc3R8fCIiPT09YS5ob3N0P2EuaG9zdDpiLmhvc3QsYi5ob3N0bmFtZT1hLmhvc3RuYW1lfHwiIj09PWEuaG9zdG5hbWU/YS5ob3N0bmFtZTpiLmhvc3RuYW1lLGIuc2VhcmNoPWEuc2VhcmNoLGIucXVlcnk9YS5xdWVyeSxkPWY7ZWxzZSBpZihmLmxlbmd0aClkfHwoZD1bXSksZC5wb3AoKSxkPWQuY29uY2F0KGYpLGIuc2VhcmNoPWEuc2VhcmNoLGIucXVlcnk9YS5xdWVyeTtlbHNlIGlmKG51bGwhPWEuc2VhcmNoKXtlJiYoYi5ob3N0bmFtZT1iLmhvc3Q9ZC5zaGlmdCgpLGU9Yi5ob3N0JiYwPGIuaG9zdC5pbmRleE9mKCJAIik/Yi5ob3N0LnNwbGl0KCJAIik6ITEpJiYoYi5hdXRoPWUuc2hpZnQoKSxiLmhvc3Q9Yi5ob3N0bmFtZT1lLnNoaWZ0KCkpO2Iuc2VhcmNoPWEuc2VhcmNoO2IucXVlcnk9YS5xdWVyeTtpZihudWxsIT09Yi5wYXRobmFtZXx8bnVsbCE9PWIuc2VhcmNoKWIucGF0aD0oYi5wYXRobmFtZT9iLnBhdGhuYW1lOiIiKSsoYi5zZWFyY2g/CiAgYi5zZWFyY2g6IiIpO2IuaHJlZj1iLmZvcm1hdCgpO3JldHVybiBifWlmKCFkLmxlbmd0aClyZXR1cm4gYi5wYXRobmFtZT1udWxsLGIucGF0aD1iLnNlYXJjaD8iLyIrYi5zZWFyY2g6bnVsbCxiLmhyZWY9Yi5mb3JtYXQoKSxiO2c9ZC5zbGljZSgtMSlbMF07Zj0oYi5ob3N0fHxhLmhvc3R8fDE8ZC5sZW5ndGgpJiYoIi4iPT09Z3x8Ii4uIj09PWcpfHwiIj09PWc7Zm9yKHZhciBrPTAscD1kLmxlbmd0aDswPD1wO3AtLSlnPWRbcF0sIi4iPT09Zz9kLnNwbGljZShwLDEpOiIuLiI9PT1nPyhkLnNwbGljZShwLDEpLGsrKyk6ayYmKGQuc3BsaWNlKHAsMSksay0tKTtpZighYyYmIWgpZm9yKDtrLS07aylkLnVuc2hpZnQoIi4uIik7IWN8fCIiPT09ZFswXXx8ZFswXSYmIi8iPT09ZFswXS5jaGFyQXQoMCl8fGQudW5zaGlmdCgiIik7ZiYmIi8iIT09ZC5qb2luKCIvIikuc3Vic3RyKC0xKSYmZC5wdXNoKCIiKTtoPSIiPT09ZFswXXx8ZFswXSYmIi8iPT09ZFswXS5jaGFyQXQoMCk7ZSYmCiAgKGIuaG9zdG5hbWU9Yi5ob3N0PWg/IiI6ZC5sZW5ndGg/ZC5zaGlmdCgpOiIiLGU9Yi5ob3N0JiYwPGIuaG9zdC5pbmRleE9mKCJAIik/Yi5ob3N0LnNwbGl0KCJAIik6ITEpJiYoYi5hdXRoPWUuc2hpZnQoKSxiLmhvc3Q9Yi5ob3N0bmFtZT1lLnNoaWZ0KCkpOyhjPWN8fGIuaG9zdCYmZC5sZW5ndGgpJiYhaCYmZC51bnNoaWZ0KCIiKTtkLmxlbmd0aD9iLnBhdGhuYW1lPWQuam9pbigiLyIpOihiLnBhdGhuYW1lPW51bGwsYi5wYXRoPW51bGwpO2lmKG51bGwhPT1iLnBhdGhuYW1lfHxudWxsIT09Yi5zZWFyY2gpYi5wYXRoPShiLnBhdGhuYW1lP2IucGF0aG5hbWU6IiIpKyhiLnNlYXJjaD9iLnNlYXJjaDoiIik7Yi5hdXRoPWEuYXV0aHx8Yi5hdXRoO2Iuc2xhc2hlcz1iLnNsYXNoZXN8fGEuc2xhc2hlcztiLmhyZWY9Yi5mb3JtYXQoKTtyZXR1cm4gYn07Wi5wcm90b3R5cGUucGFyc2VIb3N0PWZ1bmN0aW9uKCl7cmV0dXJuIFVlKHRoaXMpfTsKICBmdW5jdGlvbiBVZShhKXt2YXIgYj1hLmhvc3QsYz1IZS5leGVjKGIpO2MmJihjPWNbMF0sIjoiIT09YyYmKGEucG9ydD1jLnN1YnN0cigxKSksYj1iLnN1YnN0cigwLGIubGVuZ3RoLWMubGVuZ3RoKSk7YiYmKGEuaG9zdG5hbWU9Yik7fQogIHZhciBXZT11KGZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhLGIpe2E9YVtiXTtyZXR1cm4gMDxiJiYoIi8iPT09YXx8ZSYmIlxcIj09PWEpfWZ1bmN0aW9uIGQoYSl7dmFyIGI9MTxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOiEwO2lmKGUpe3ZhciBkPWE7aWYoInN0cmluZyIhPT10eXBlb2YgZCl0aHJvdyBuZXcgVHlwZUVycm9yKCJleHBlY3RlZCBhIHN0cmluZyIpO2Q9ZC5yZXBsYWNlKC9bXFxcL10rL2csIi8iKTtpZighMSE9PWIpaWYoYj1kLGQ9Yi5sZW5ndGgtMSwyPmQpZD1iO2Vsc2Uge2Zvcig7YyhiLGQpOylkLS07ZD1iLnN1YnN0cigwLGQrMSk7fXJldHVybiBkLnJlcGxhY2UoL14oW2EtekEtWl0rOnxcLlwvKS8sIiIpfXJldHVybiBhfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShiLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTtiLnVuaXhpZnk9ZDtiLmNvcnJlY3RQYXRoPWZ1bmN0aW9uKGEpe3JldHVybiBkKGEucmVwbGFjZSgvXlxcXFxcP1xcLjpcXC8sCiAgIlxcIikpfTt2YXIgZT0id2luMzIiPT09Q2IucGxhdGZvcm07fSk7dChXZSk7CiAgdmFyIFhlPXUoZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGEsYil7dm9pZCAwPT09YiYmKGI9TC5kZWZhdWx0LmN3ZCgpKTtyZXR1cm4gY2YoYixhKX1mdW5jdGlvbiBkKGEsYil7cmV0dXJuICJmdW5jdGlvbiI9PT10eXBlb2YgYT9bZSgpLGFdOltlKGEpLHEoYildfWZ1bmN0aW9uIGUoYSl7dm9pZCAwPT09YSYmKGE9e30pO3JldHVybiBhYSh7fSxkZixhKX1mdW5jdGlvbiBmKGEpe3JldHVybiAibnVtYmVyIj09PXR5cGVvZiBhP2FhKHt9LHVkLHttb2RlOmF9KTphYSh7fSx1ZCxhKX1mdW5jdGlvbiBnKGEsYixjLGQpe3ZvaWQgMD09PWImJihiPSIiKTt2b2lkIDA9PT1jJiYoYz0iIik7dm9pZCAwPT09ZCYmKGQ9IiIpO3ZhciBlPSIiO2MmJihlPSIgJyIrYysiJyIpO2QmJihlKz0iIC0+ICciK2QrIiciKTtzd2l0Y2goYSl7Y2FzZSAiRU5PRU5UIjpyZXR1cm4gIkVOT0VOVDogbm8gc3VjaCBmaWxlIG9yIGRpcmVjdG9yeSwgIitiK2U7Y2FzZSAiRUJBREYiOnJldHVybiAiRUJBREY6IGJhZCBmaWxlIGRlc2NyaXB0b3IsICIrCiAgYitlO2Nhc2UgIkVJTlZBTCI6cmV0dXJuICJFSU5WQUw6IGludmFsaWQgYXJndW1lbnQsICIrYitlO2Nhc2UgIkVQRVJNIjpyZXR1cm4gIkVQRVJNOiBvcGVyYXRpb24gbm90IHBlcm1pdHRlZCwgIitiK2U7Y2FzZSAiRVBST1RPIjpyZXR1cm4gIkVQUk9UTzogcHJvdG9jb2wgZXJyb3IsICIrYitlO2Nhc2UgIkVFWElTVCI6cmV0dXJuICJFRVhJU1Q6IGZpbGUgYWxyZWFkeSBleGlzdHMsICIrYitlO2Nhc2UgIkVOT1RESVIiOnJldHVybiAiRU5PVERJUjogbm90IGEgZGlyZWN0b3J5LCAiK2IrZTtjYXNlICJFSVNESVIiOnJldHVybiAiRUlTRElSOiBpbGxlZ2FsIG9wZXJhdGlvbiBvbiBhIGRpcmVjdG9yeSwgIitiK2U7Y2FzZSAiRUFDQ0VTIjpyZXR1cm4gIkVBQ0NFUzogcGVybWlzc2lvbiBkZW5pZWQsICIrYitlO2Nhc2UgIkVOT1RFTVBUWSI6cmV0dXJuICJFTk9URU1QVFk6IGRpcmVjdG9yeSBub3QgZW1wdHksICIrYitlO2Nhc2UgIkVNRklMRSI6cmV0dXJuICJFTUZJTEU6IHRvbyBtYW55IG9wZW4gZmlsZXMsICIrCiAgYitlO2Nhc2UgIkVOT1NZUyI6cmV0dXJuICJFTk9TWVM6IGZ1bmN0aW9uIG5vdCBpbXBsZW1lbnRlZCwgIitiK2U7ZGVmYXVsdDpyZXR1cm4gYSsiOiBlcnJvciBvY2N1cnJlZCwgIitiK2V9fWZ1bmN0aW9uIGgoYSxiLGMsZCxlKXt2b2lkIDA9PT1iJiYoYj0iIik7dm9pZCAwPT09YyYmKGM9IiIpO3ZvaWQgMD09PWQmJihkPSIiKTt2b2lkIDA9PT1lJiYoZT1FcnJvcik7Yj1uZXcgZShnKGEsYixjLGQpKTtiLmNvZGU9YTtyZXR1cm4gYn1mdW5jdGlvbiBrKGEpe2lmKCJudW1iZXIiPT09dHlwZW9mIGEpcmV0dXJuIGE7aWYoInN0cmluZyI9PT10eXBlb2YgYSl7dmFyIGI9dWFbYV07aWYoInVuZGVmaW5lZCIhPT10eXBlb2YgYilyZXR1cm4gYn10aHJvdyBuZXcgUGMuVHlwZUVycm9yKCJFUlJfSU5WQUxJRF9PUFRfVkFMVUUiLCJmbGFncyIsYSk7fWZ1bmN0aW9uIHAoYSxiKXtpZihiKXt2YXIgYz10eXBlb2YgYjtzd2l0Y2goYyl7Y2FzZSAic3RyaW5nIjphPWFhKHt9LGEse2VuY29kaW5nOmJ9KTsKICBicmVhaztjYXNlICJvYmplY3QiOmE9YWEoe30sYSxiKTticmVhaztkZWZhdWx0OnRocm93IFR5cGVFcnJvcigiRXhwZWN0ZWQgb3B0aW9ucyB0byBiZSBlaXRoZXIgYW4gb2JqZWN0IG9yIGEgc3RyaW5nLCBidXQgZ290ICIrYysiIGluc3RlYWQiKTt9fWVsc2UgcmV0dXJuIGE7ImJ1ZmZlciIhPT1hLmVuY29kaW5nJiZLJDEuYXNzZXJ0RW5jb2RpbmcoYS5lbmNvZGluZyk7cmV0dXJuIGF9ZnVuY3Rpb24gbihhKXtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIHAoYSxiKX19ZnVuY3Rpb24gcShhKXtpZigiZnVuY3Rpb24iIT09dHlwZW9mIGEpdGhyb3cgVHlwZUVycm9yKGZhLkNCKTtyZXR1cm4gYX1mdW5jdGlvbiBCKGEpe3JldHVybiBmdW5jdGlvbihiLGMpe3JldHVybiAiZnVuY3Rpb24iPT09dHlwZW9mIGI/W2EoKSxiXTpbYShiKSxxKGMpXX19ZnVuY3Rpb24gbShhKXtpZigic3RyaW5nIiE9PXR5cGVvZiBhJiYhRi5CdWZmZXIuaXNCdWZmZXIoYSkpe3RyeXtpZighKGEgaW5zdGFuY2VvZgogIEZlLlVSTCkpdGhyb3cgbmV3IFR5cGVFcnJvcihmYS5QQVRIX1NUUik7fWNhdGNoKFhhKXt0aHJvdyBuZXcgVHlwZUVycm9yKGZhLlBBVEhfU1RSKTt9aWYoIiIhPT1hLmhvc3RuYW1lKXRocm93IG5ldyBQYy5UeXBlRXJyb3IoIkVSUl9JTlZBTElEX0ZJTEVfVVJMX0hPU1QiLEwuZGVmYXVsdC5wbGF0Zm9ybSk7YT1hLnBhdGhuYW1lO2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7YisrKWlmKCIlIj09PWFbYl0pe3ZhciBjPWEuY29kZVBvaW50QXQoYisyKXwzMjtpZigiMiI9PT1hW2IrMV0mJjEwMj09PWMpdGhyb3cgbmV3IFBjLlR5cGVFcnJvcigiRVJSX0lOVkFMSURfRklMRV9VUkxfUEFUSCIsIm11c3Qgbm90IGluY2x1ZGUgZW5jb2RlZCAvIGNoYXJhY3RlcnMiKTt9YT1kZWNvZGVVUklDb21wb25lbnQoYSk7fWE9U3RyaW5nKGEpO3FiKGEpO3JldHVybiBhfWZ1bmN0aW9uIHYoYSxiKXtyZXR1cm4gKGE9YyhhLGIpLnN1YnN0cigxKSk/YS5zcGxpdChTKTpbXX1mdW5jdGlvbiB4YShhKXtyZXR1cm4gdihtKGEpKX0KICBmdW5jdGlvbiBMYShhLGIpe3ZvaWQgMD09PWImJihiPUskMS5FTkNPRElOR19VVEY4KTtyZXR1cm4gRi5CdWZmZXIuaXNCdWZmZXIoYSk/YTphIGluc3RhbmNlb2YgVWludDhBcnJheT9GLmJ1ZmZlckZyb20oYSk6Ri5idWZmZXJGcm9tKFN0cmluZyhhKSxiKX1mdW5jdGlvbiAkYihhLGIpe3JldHVybiBiJiYiYnVmZmVyIiE9PWI/YS50b1N0cmluZyhiKTphfWZ1bmN0aW9uIHFiKGEsYil7aWYoLTEhPT0oIiIrYSkuaW5kZXhPZigiXHgwMCIpKXthPUVycm9yKCJQYXRoIG11c3QgYmUgYSBzdHJpbmcgd2l0aG91dCBudWxsIGJ5dGVzIik7YS5jb2RlPSJFTk9FTlQiO2lmKCJmdW5jdGlvbiIhPT10eXBlb2YgYil0aHJvdyBhO0wuZGVmYXVsdC5uZXh0VGljayhiLGEpO3JldHVybiAhMX1yZXR1cm4gITB9ZnVuY3Rpb24gTShhLGIpe2E9Im51bWJlciI9PT10eXBlb2YgYT9hOiJzdHJpbmciPT09dHlwZW9mIGE/cGFyc2VJbnQoYSw4KTpiP00oYik6dm9pZCAwO2lmKCJudW1iZXIiIT09dHlwZW9mIGF8fAogIGlzTmFOKGEpKXRocm93IG5ldyBUeXBlRXJyb3IoZmEuTU9ERV9JTlQpO3JldHVybiBhfWZ1bmN0aW9uIFlhKGEpe2lmKGE+Pj4wIT09YSl0aHJvdyBUeXBlRXJyb3IoZmEuRkQpO31mdW5jdGlvbiBoYShhKXtpZigic3RyaW5nIj09PXR5cGVvZiBhJiYrYT09YSlyZXR1cm4gK2E7aWYoYSBpbnN0YW5jZW9mIERhdGUpcmV0dXJuIGEuZ2V0VGltZSgpLzFFMztpZihpc0Zpbml0ZShhKSlyZXR1cm4gMD5hP0RhdGUubm93KCkvMUUzOmE7dGhyb3cgRXJyb3IoIkNhbm5vdCBwYXJzZSB0aW1lOiAiK2EpO31mdW5jdGlvbiBIYShhKXtpZigibnVtYmVyIiE9PXR5cGVvZiBhKXRocm93IFR5cGVFcnJvcihmYS5VSUQpO31mdW5jdGlvbiBJYShhKXtpZigibnVtYmVyIiE9PXR5cGVvZiBhKXRocm93IFR5cGVFcnJvcihmYS5HSUQpO31mdW5jdGlvbiBlZihhKXthLmVtaXQoInN0b3AiKTt9ZnVuY3Rpb24gVChhLGIsYyl7aWYoISh0aGlzIGluc3RhbmNlb2YgVCkpcmV0dXJuIG5ldyBUKGEsYixjKTt0aGlzLl92b2w9CiAgYTtjPWFhKHt9LHAoYyx7fSkpO3ZvaWQgMD09PWMuaGlnaFdhdGVyTWFyayYmKGMuaGlnaFdhdGVyTWFyaz02NTUzNik7WS5SZWFkYWJsZS5jYWxsKHRoaXMsYyk7dGhpcy5wYXRoPW0oYik7dGhpcy5mZD12b2lkIDA9PT1jLmZkP251bGw6Yy5mZDt0aGlzLmZsYWdzPXZvaWQgMD09PWMuZmxhZ3M/InIiOmMuZmxhZ3M7dGhpcy5tb2RlPXZvaWQgMD09PWMubW9kZT80Mzg6Yy5tb2RlO3RoaXMuc3RhcnQ9Yy5zdGFydDt0aGlzLmVuZD1jLmVuZDt0aGlzLmF1dG9DbG9zZT12b2lkIDA9PT1jLmF1dG9DbG9zZT8hMDpjLmF1dG9DbG9zZTt0aGlzLnBvcz12b2lkIDA7dGhpcy5ieXRlc1JlYWQ9MDtpZih2b2lkIDAhPT10aGlzLnN0YXJ0KXtpZigibnVtYmVyIiE9PXR5cGVvZiB0aGlzLnN0YXJ0KXRocm93IG5ldyBUeXBlRXJyb3IoJyJzdGFydCIgb3B0aW9uIG11c3QgYmUgYSBOdW1iZXInKTtpZih2b2lkIDA9PT10aGlzLmVuZCl0aGlzLmVuZD1JbmZpbml0eTtlbHNlIGlmKCJudW1iZXIiIT09CiAgdHlwZW9mIHRoaXMuZW5kKXRocm93IG5ldyBUeXBlRXJyb3IoJyJlbmQiIG9wdGlvbiBtdXN0IGJlIGEgTnVtYmVyJyk7aWYodGhpcy5zdGFydD50aGlzLmVuZCl0aHJvdyBFcnJvcignInN0YXJ0IiBvcHRpb24gbXVzdCBiZSA8PSAiZW5kIiBvcHRpb24nKTt0aGlzLnBvcz10aGlzLnN0YXJ0O30ibnVtYmVyIiE9PXR5cGVvZiB0aGlzLmZkJiZ0aGlzLm9wZW4oKTt0aGlzLm9uKCJlbmQiLGZ1bmN0aW9uKCl7dGhpcy5hdXRvQ2xvc2UmJnRoaXMuZGVzdHJveSYmdGhpcy5kZXN0cm95KCk7fSk7fWZ1bmN0aW9uIGZmKCl7dGhpcy5jbG9zZSgpO31mdW5jdGlvbiBSKGEsYixjKXtpZighKHRoaXMgaW5zdGFuY2VvZiBSKSlyZXR1cm4gbmV3IFIoYSxiLGMpO3RoaXMuX3ZvbD1hO2M9YWEoe30scChjLHt9KSk7WS5Xcml0YWJsZS5jYWxsKHRoaXMsYyk7dGhpcy5wYXRoPW0oYik7dGhpcy5mZD12b2lkIDA9PT1jLmZkP251bGw6Yy5mZDt0aGlzLmZsYWdzPXZvaWQgMD09PWMuZmxhZ3M/InciOmMuZmxhZ3M7CiAgdGhpcy5tb2RlPXZvaWQgMD09PWMubW9kZT80Mzg6Yy5tb2RlO3RoaXMuc3RhcnQ9Yy5zdGFydDt0aGlzLmF1dG9DbG9zZT12b2lkIDA9PT1jLmF1dG9DbG9zZT8hMDohIWMuYXV0b0Nsb3NlO3RoaXMucG9zPXZvaWQgMDt0aGlzLmJ5dGVzV3JpdHRlbj0wO2lmKHZvaWQgMCE9PXRoaXMuc3RhcnQpe2lmKCJudW1iZXIiIT09dHlwZW9mIHRoaXMuc3RhcnQpdGhyb3cgbmV3IFR5cGVFcnJvcignInN0YXJ0IiBvcHRpb24gbXVzdCBiZSBhIE51bWJlcicpO2lmKDA+dGhpcy5zdGFydCl0aHJvdyBFcnJvcignInN0YXJ0IiBtdXN0IGJlID49IHplcm8nKTt0aGlzLnBvcz10aGlzLnN0YXJ0O31jLmVuY29kaW5nJiZ0aGlzLnNldERlZmF1bHRFbmNvZGluZyhjLmVuY29kaW5nKTsibnVtYmVyIiE9PXR5cGVvZiB0aGlzLmZkJiZ0aGlzLm9wZW4oKTt0aGlzLm9uY2UoImZpbmlzaCIsZnVuY3Rpb24oKXt0aGlzLmF1dG9DbG9zZSYmdGhpcy5jbG9zZSgpO30pO312YXIgSmE9bCYmbC5fX2V4dGVuZHN8fAogIGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShiLGMpe2E9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGEsYil7YS5fX3Byb3RvX189Yjt9fHxmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyBpbiBiKWIuaGFzT3duUHJvcGVydHkoYykmJihhW2NdPWJbY10pO307cmV0dXJuIGEoYixjKX1yZXR1cm4gZnVuY3Rpb24oYixjKXtmdW5jdGlvbiBkKCl7dGhpcy5jb25zdHJ1Y3Rvcj1iO31hKGIsYyk7Yi5wcm90b3R5cGU9bnVsbD09PWM/T2JqZWN0LmNyZWF0ZShjKTooZC5wcm90b3R5cGU9Yy5wcm90b3R5cGUsbmV3IGQpO319KCksWGI9bCYmbC5fX3NwcmVhZEFycmF5c3x8ZnVuY3Rpb24oKXtmb3IodmFyIGE9MCxiPTAsYz1hcmd1bWVudHMubGVuZ3RoO2I8YztiKyspYSs9YXJndW1lbnRzW2JdLmxlbmd0aDthPUFycmF5KGEpO3ZhciBkPTA7Zm9yKGI9MDtiPGM7YisrKWZvcih2YXIgZT1hcmd1bWVudHNbYl0sZj0wLGc9ZS5sZW5ndGg7ZjwKICBnO2YrKyxkKyspYVtkXT1lW2ZdO3JldHVybiBhfTtPYmplY3QuZGVmaW5lUHJvcGVydHkoYiwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGFhPWxlLmV4dGVuZCxjZj1aYy5yZXNvbHZlLG1iPXcuY29uc3RhbnRzLk9fUkRPTkxZLEthPXcuY29uc3RhbnRzLk9fV1JPTkxZLG5hPXcuY29uc3RhbnRzLk9fUkRXUixVPXcuY29uc3RhbnRzLk9fQ1JFQVQsbmI9dy5jb25zdGFudHMuT19FWENMLFphPXcuY29uc3RhbnRzLk9fVFJVTkMsJGE9dy5jb25zdGFudHMuT19BUFBFTkQsdmQ9dy5jb25zdGFudHMuT19TWU5DLGdmPXcuY29uc3RhbnRzLk9fRElSRUNUT1JZLHdkPXcuY29uc3RhbnRzLkZfT0ssaGY9dy5jb25zdGFudHMuQ09QWUZJTEVfRVhDTCxqZj13LmNvbnN0YW50cy5DT1BZRklMRV9GSUNMT05FX0ZPUkNFO3ZhciBTPVpjLnNlcDt2YXIgeGQ9WmMucmVsYXRpdmU7dmFyIFliPSJ3aW4zMiI9PT1MLmRlZmF1bHQucGxhdGZvcm0sZmE9e1BBVEhfU1RSOiJwYXRoIG11c3QgYmUgYSBzdHJpbmcgb3IgQnVmZmVyIiwKICBGRDoiZmQgbXVzdCBiZSBhIGZpbGUgZGVzY3JpcHRvciIsTU9ERV9JTlQ6Im1vZGUgbXVzdCBiZSBhbiBpbnQiLENCOiJjYWxsYmFjayBtdXN0IGJlIGEgZnVuY3Rpb24iLFVJRDoidWlkIG11c3QgYmUgYW4gdW5zaWduZWQgaW50IixHSUQ6ImdpZCBtdXN0IGJlIGFuIHVuc2lnbmVkIGludCIsTEVOOiJsZW4gbXVzdCBiZSBhbiBpbnRlZ2VyIixBVElNRToiYXRpbWUgbXVzdCBiZSBhbiBpbnRlZ2VyIixNVElNRToibXRpbWUgbXVzdCBiZSBhbiBpbnRlZ2VyIixQUkVGSVg6ImZpbGVuYW1lIHByZWZpeCBpcyByZXF1aXJlZCIsQlVGRkVSOiJidWZmZXIgbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiBCdWZmZXIgb3IgU3RhdGljQnVmZmVyIixPRkZTRVQ6Im9mZnNldCBtdXN0IGJlIGFuIGludGVnZXIiLExFTkdUSDoibGVuZ3RoIG11c3QgYmUgYW4gaW50ZWdlciIsUE9TSVRJT046InBvc2l0aW9uIG11c3QgYmUgYW4gaW50ZWdlciJ9LHVhOyhmdW5jdGlvbihhKXthW2Eucj1tYl09InIiO2FbYVsicisiXT0KICBuYV09InIrIjthW2EucnM9bWJ8dmRdPSJycyI7YVthLnNyPWEucnNdPSJzciI7YVthWyJycysiXT1uYXx2ZF09InJzKyI7YVthWyJzcisiXT1hWyJycysiXV09InNyKyI7YVthLnc9S2F8VXxaYV09InciO2FbYS53eD1LYXxVfFphfG5iXT0id3giO2FbYS54dz1hLnd4XT0ieHciO2FbYVsidysiXT1uYXxVfFphXT0idysiO2FbYVsid3grIl09bmF8VXxaYXxuYl09Ind4KyI7YVthWyJ4dysiXT1hWyJ3eCsiXV09Inh3KyI7YVthLmE9S2F8JGF8VV09ImEiO2FbYS5heD1LYXwkYXxVfG5iXT0iYXgiO2FbYS54YT1hLmF4XT0ieGEiO2FbYVsiYSsiXT1uYXwkYXxVXT0iYSsiO2FbYVsiYXgrIl09bmF8JGF8VXxuYl09ImF4KyI7YVthWyJ4YSsiXT1hWyJheCsiXV09InhhKyI7fSkodWE9Yi5GTEFHU3x8KGIuRkxBR1M9e30pKTtiLmZsYWdzVG9OdW1iZXI9azthPXtlbmNvZGluZzoidXRmOCJ9O3ZhciBvYj1uKGEpLHlkPUIob2IpLHpkPW4oe2ZsYWc6InIifSksQWQ9e2VuY29kaW5nOiJ1dGY4IiwKICBtb2RlOjQzOCxmbGFnOnVhW3VhLnddfSxCZD1uKEFkKSxDZD17ZW5jb2Rpbmc6InV0ZjgiLG1vZGU6NDM4LGZsYWc6dWFbdWEuYV19LERkPW4oQ2QpLGtmPUIoRGQpLEVkPW4oYSksbGY9QihFZCksdWQ9e21vZGU6NTExLHJlY3Vyc2l2ZTohMX0sRmQ9e3JlY3Vyc2l2ZTohMX0sR2Q9bih7ZW5jb2Rpbmc6InV0ZjgiLHdpdGhGaWxlVHlwZXM6ITF9KSxtZj1CKEdkKSxkZj17YmlnaW50OiExfTtiLnBhdGhUb0ZpbGVuYW1lPW07aWYoWWIpe3ZhciBuZj1jLG9mPVdlLnVuaXhpZnk7Yz1mdW5jdGlvbihhLGIpe3JldHVybiBvZihuZihhLGIpKX07fWIuZmlsZW5hbWVUb1N0ZXBzPXY7Yi5wYXRoVG9TdGVwcz14YTtiLmRhdGFUb1N0cj1mdW5jdGlvbihhLGIpe3ZvaWQgMD09PWImJihiPUskMS5FTkNPRElOR19VVEY4KTtyZXR1cm4gRi5CdWZmZXIuaXNCdWZmZXIoYSk/YS50b1N0cmluZyhiKTphIGluc3RhbmNlb2YgVWludDhBcnJheT9GLmJ1ZmZlckZyb20oYSkudG9TdHJpbmcoYik6U3RyaW5nKGEpfTsKICBiLmRhdGFUb0J1ZmZlcj1MYTtiLmJ1ZmZlclRvRW5jb2Rpbmc9JGI7Yi50b1VuaXhUaW1lc3RhbXA9aGE7YT1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7dm9pZCAwPT09YSYmKGE9e30pO3RoaXMuaW5vPTA7dGhpcy5pbm9kZXM9e307dGhpcy5yZWxlYXNlZElub3M9W107dGhpcy5mZHM9e307dGhpcy5yZWxlYXNlZEZkcz1bXTt0aGlzLm1heEZpbGVzPTFFNDt0aGlzLm9wZW5GaWxlcz0wO3RoaXMucHJvbWlzZXNBcGk9bWUuZGVmYXVsdCh0aGlzKTt0aGlzLnN0YXRXYXRjaGVycz17fTt0aGlzLnByb3BzPWFhKHtOb2RlOmZkLk5vZGUsTGluazpmZC5MaW5rLEZpbGU6ZmQuRmlsZX0sYSk7YT10aGlzLmNyZWF0ZUxpbmsoKTthLnNldE5vZGUodGhpcy5jcmVhdGVOb2RlKCEwKSk7dmFyIGI9dGhpczt0aGlzLlN0YXRXYXRjaGVyPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGMoKXtyZXR1cm4gYS5jYWxsKHRoaXMsYil8fHRoaXN9SmEoYyxhKTtyZXR1cm4gY30oSGQpO3RoaXMuUmVhZFN0cmVhbT0KICBmdW5jdGlvbihhKXtmdW5jdGlvbiBjKCl7Zm9yKHZhciBjPVtdLGQ9MDtkPGFyZ3VtZW50cy5sZW5ndGg7ZCsrKWNbZF09YXJndW1lbnRzW2RdO3JldHVybiBhLmFwcGx5KHRoaXMsWGIoW2JdLGMpKXx8dGhpc31KYShjLGEpO3JldHVybiBjfShUKTt0aGlzLldyaXRlU3RyZWFtPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGMoKXtmb3IodmFyIGM9W10sZD0wO2Q8YXJndW1lbnRzLmxlbmd0aDtkKyspY1tkXT1hcmd1bWVudHNbZF07cmV0dXJuIGEuYXBwbHkodGhpcyxYYihbYl0sYykpfHx0aGlzfUphKGMsYSk7cmV0dXJuIGN9KFIpO3RoaXMuRlNXYXRjaGVyPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGMoKXtyZXR1cm4gYS5jYWxsKHRoaXMsYil8fHRoaXN9SmEoYyxhKTtyZXR1cm4gY30oSWQpO3RoaXMucm9vdD1hO31hLmZyb21KU09OPWZ1bmN0aW9uKGIsYyl7dmFyIGQ9bmV3IGE7ZC5mcm9tSlNPTihiLGMpO3JldHVybiBkfTtPYmplY3QuZGVmaW5lUHJvcGVydHkoYS5wcm90b3R5cGUsInByb21pc2VzIiwKICB7Z2V0OmZ1bmN0aW9uKCl7aWYobnVsbD09PXRoaXMucHJvbWlzZXNBcGkpdGhyb3cgRXJyb3IoIlByb21pc2UgaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGVudmlyb25tZW50LiIpO3JldHVybiB0aGlzLnByb21pc2VzQXBpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pO2EucHJvdG90eXBlLmNyZWF0ZUxpbms9ZnVuY3Rpb24oYSxiLGMsZCl7dm9pZCAwPT09YyYmKGM9ITEpO2lmKCFhKXJldHVybiBuZXcgdGhpcy5wcm9wcy5MaW5rKHRoaXMsbnVsbCwiIik7aWYoIWIpdGhyb3cgRXJyb3IoImNyZWF0ZUxpbms6IG5hbWUgY2Fubm90IGJlIGVtcHR5Iik7cmV0dXJuIGEuY3JlYXRlQ2hpbGQoYix0aGlzLmNyZWF0ZU5vZGUoYyxkKSl9O2EucHJvdG90eXBlLmRlbGV0ZUxpbms9ZnVuY3Rpb24oYSl7dmFyIGI9YS5wYXJlbnQ7cmV0dXJuIGI/KGIuZGVsZXRlQ2hpbGQoYSksITApOiExfTthLnByb3RvdHlwZS5uZXdJbm9OdW1iZXI9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnJlbGVhc2VkSW5vcy5wb3AoKTsKICByZXR1cm4gYT9hOnRoaXMuaW5vPSh0aGlzLmlubysxKSU0Mjk0OTY3Mjk1fTthLnByb3RvdHlwZS5uZXdGZE51bWJlcj1mdW5jdGlvbigpe3ZhciBiPXRoaXMucmVsZWFzZWRGZHMucG9wKCk7cmV0dXJuICJudW1iZXIiPT09dHlwZW9mIGI/YjphLmZkLS19O2EucHJvdG90eXBlLmNyZWF0ZU5vZGU9ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1hJiYoYT0hMSk7Yj1uZXcgdGhpcy5wcm9wcy5Ob2RlKHRoaXMubmV3SW5vTnVtYmVyKCksYik7YSYmYi5zZXRJc0RpcmVjdG9yeSgpO3JldHVybiB0aGlzLmlub2Rlc1tiLmlub109Yn07YS5wcm90b3R5cGUuZ2V0Tm9kZT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5pbm9kZXNbYV19O2EucHJvdG90eXBlLmRlbGV0ZU5vZGU9ZnVuY3Rpb24oYSl7YS5kZWwoKTtkZWxldGUgdGhpcy5pbm9kZXNbYS5pbm9dO3RoaXMucmVsZWFzZWRJbm9zLnB1c2goYS5pbm8pO307YS5wcm90b3R5cGUuZ2VuUm5kU3RyPWZ1bmN0aW9uKCl7dmFyIGE9KE1hdGgucmFuZG9tKCkrCiAgMSkudG9TdHJpbmcoMzYpLnN1YnN0cigyLDYpO3JldHVybiA2PT09YS5sZW5ndGg/YTp0aGlzLmdlblJuZFN0cigpfTthLnByb3RvdHlwZS5nZXRMaW5rPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnJvb3Qud2FsayhhKX07YS5wcm90b3R5cGUuZ2V0TGlua09yVGhyb3c9ZnVuY3Rpb24oYSxiKXt2YXIgYz12KGEpO2M9dGhpcy5nZXRMaW5rKGMpO2lmKCFjKXRocm93IGgoIkVOT0VOVCIsYixhKTtyZXR1cm4gY307YS5wcm90b3R5cGUuZ2V0UmVzb2x2ZWRMaW5rPWZ1bmN0aW9uKGEpe2E9InN0cmluZyI9PT10eXBlb2YgYT92KGEpOmE7Zm9yKHZhciBiPXRoaXMucm9vdCxjPTA7YzxhLmxlbmd0aDspe2I9Yi5nZXRDaGlsZChhW2NdKTtpZighYilyZXR1cm4gbnVsbDt2YXIgZD1iLmdldE5vZGUoKTtkLmlzU3ltbGluaygpPyhhPWQuc3ltbGluay5jb25jYXQoYS5zbGljZShjKzEpKSxiPXRoaXMucm9vdCxjPTApOmMrKzt9cmV0dXJuIGJ9O2EucHJvdG90eXBlLmdldFJlc29sdmVkTGlua09yVGhyb3c9CiAgZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldFJlc29sdmVkTGluayhhKTtpZighYyl0aHJvdyBoKCJFTk9FTlQiLGIsYSk7cmV0dXJuIGN9O2EucHJvdG90eXBlLnJlc29sdmVTeW1saW5rcz1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5nZXRSZXNvbHZlZExpbmsoYS5zdGVwcy5zbGljZSgxKSl9O2EucHJvdG90eXBlLmdldExpbmtBc0Rpck9yVGhyb3c9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldExpbmtPclRocm93KGEsYik7aWYoIWMuZ2V0Tm9kZSgpLmlzRGlyZWN0b3J5KCkpdGhyb3cgaCgiRU5PVERJUiIsYixhKTtyZXR1cm4gY307YS5wcm90b3R5cGUuZ2V0TGlua1BhcmVudD1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5yb290LndhbGsoYSxhLmxlbmd0aC0xKX07YS5wcm90b3R5cGUuZ2V0TGlua1BhcmVudEFzRGlyT3JUaHJvdz1mdW5jdGlvbihhLGIpe2E9YSBpbnN0YW5jZW9mIEFycmF5P2E6dihhKTt2YXIgYz10aGlzLmdldExpbmtQYXJlbnQoYSk7aWYoIWMpdGhyb3cgaCgiRU5PRU5UIiwKICBiLFMrYS5qb2luKFMpKTtpZighYy5nZXROb2RlKCkuaXNEaXJlY3RvcnkoKSl0aHJvdyBoKCJFTk9URElSIixiLFMrYS5qb2luKFMpKTtyZXR1cm4gY307YS5wcm90b3R5cGUuZ2V0RmlsZUJ5RmQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZmRzW1N0cmluZyhhKV19O2EucHJvdG90eXBlLmdldEZpbGVCeUZkT3JUaHJvdz1mdW5jdGlvbihhLGIpe2lmKGE+Pj4wIT09YSl0aHJvdyBUeXBlRXJyb3IoZmEuRkQpO2E9dGhpcy5nZXRGaWxlQnlGZChhKTtpZighYSl0aHJvdyBoKCJFQkFERiIsYik7cmV0dXJuIGF9O2EucHJvdG90eXBlLmdldE5vZGVCeUlkT3JDcmVhdGU9ZnVuY3Rpb24oYSxiLGMpe2lmKCJudW1iZXIiPT09dHlwZW9mIGEpe2E9dGhpcy5nZXRGaWxlQnlGZChhKTtpZighYSl0aHJvdyBFcnJvcigiRmlsZSBudG8gZm91bmQiKTtyZXR1cm4gYS5ub2RlfXZhciBkPXhhKGEpLGU9dGhpcy5nZXRMaW5rKGQpO2lmKGUpcmV0dXJuIGUuZ2V0Tm9kZSgpO2lmKGImVSYmKGI9dGhpcy5nZXRMaW5rUGFyZW50KGQpKSlyZXR1cm4gZT0KICB0aGlzLmNyZWF0ZUxpbmsoYixkW2QubGVuZ3RoLTFdLCExLGMpLGUuZ2V0Tm9kZSgpO3Rocm93IGgoIkVOT0VOVCIsImdldE5vZGVCeUlkT3JDcmVhdGUiLG0oYSkpO307YS5wcm90b3R5cGUud3JhcEFzeW5jPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzO3EoYyk7JGMuZGVmYXVsdChmdW5jdGlvbigpe3RyeXtjKG51bGwsYS5hcHBseShkLGIpKTt9Y2F0Y2godmEpe2ModmEpO319KTt9O2EucHJvdG90eXBlLl90b0pTT049ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO3ZvaWQgMD09PWEmJihhPXRoaXMucm9vdCk7dm9pZCAwPT09YiYmKGI9e30pO3ZhciBlPSEwLHI9YS5jaGlsZHJlbjthLmdldE5vZGUoKS5pc0ZpbGUoKSYmKHI9KGQ9e30sZFthLmdldE5hbWUoKV09YS5wYXJlbnQuZ2V0Q2hpbGQoYS5nZXROYW1lKCkpLGQpLGE9YS5wYXJlbnQpO2Zvcih2YXIgRCBpbiByKXtlPSExO3I9YS5nZXRDaGlsZChEKTtpZighcil0aHJvdyBFcnJvcigiX3RvSlNPTjogdW5leHBlY3RlZCB1bmRlZmluZWQiKTsKICBkPXIuZ2V0Tm9kZSgpO2QuaXNGaWxlKCk/KHI9ci5nZXRQYXRoKCksYyYmKHI9eGQoYyxyKSksYltyXT1kLmdldFN0cmluZygpKTpkLmlzRGlyZWN0b3J5KCkmJnRoaXMuX3RvSlNPTihyLGIsYyk7fWE9YS5nZXRQYXRoKCk7YyYmKGE9eGQoYyxhKSk7YSYmZSYmKGJbYV09bnVsbCk7cmV0dXJuIGJ9O2EucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbihhLGIsYyl7dm9pZCAwPT09YiYmKGI9e30pO3ZvaWQgMD09PWMmJihjPSExKTt2YXIgZD1bXTtpZihhKXthIGluc3RhbmNlb2YgQXJyYXl8fChhPVthXSk7Zm9yKHZhciBlPTA7ZTxhLmxlbmd0aDtlKyspe3ZhciByPW0oYVtlXSk7KHI9dGhpcy5nZXRSZXNvbHZlZExpbmsocikpJiZkLnB1c2gocik7fX1lbHNlIGQucHVzaCh0aGlzLnJvb3QpO2lmKCFkLmxlbmd0aClyZXR1cm4gYjtmb3IoZT0wO2U8ZC5sZW5ndGg7ZSsrKXI9ZFtlXSx0aGlzLl90b0pTT04ocixiLGM/ci5nZXRQYXRoKCk6IiIpO3JldHVybiBifTthLnByb3RvdHlwZS5mcm9tSlNPTj0KICBmdW5jdGlvbihhLGIpe3ZvaWQgMD09PWImJihiPUwuZGVmYXVsdC5jd2QoKSk7Zm9yKHZhciBkIGluIGEpe3ZhciBlPWFbZF07aWYoInN0cmluZyI9PT10eXBlb2YgZSl7ZD1jKGQsYik7dmFyIHI9dihkKTsxPHIubGVuZ3RoJiYocj1TK3Iuc2xpY2UoMCxyLmxlbmd0aC0xKS5qb2luKFMpLHRoaXMubWtkaXJwQmFzZShyLDUxMSkpO3RoaXMud3JpdGVGaWxlU3luYyhkLGUpO31lbHNlIHRoaXMubWtkaXJwQmFzZShkLDUxMSk7fX07YS5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLmlubz0wO3RoaXMuaW5vZGVzPXt9O3RoaXMucmVsZWFzZWRJbm9zPVtdO3RoaXMuZmRzPXt9O3RoaXMucmVsZWFzZWRGZHM9W107dGhpcy5vcGVuRmlsZXM9MDt0aGlzLnJvb3Q9dGhpcy5jcmVhdGVMaW5rKCk7dGhpcy5yb290LnNldE5vZGUodGhpcy5jcmVhdGVOb2RlKCEwKSk7fTthLnByb3RvdHlwZS5tb3VudFN5bmM9ZnVuY3Rpb24oYSxiKXt0aGlzLmZyb21KU09OKGIsYSk7fTthLnByb3RvdHlwZS5vcGVuTGluaz0KICBmdW5jdGlvbihhLGIsYyl7dm9pZCAwPT09YyYmKGM9ITApO2lmKHRoaXMub3BlbkZpbGVzPj10aGlzLm1heEZpbGVzKXRocm93IGgoIkVNRklMRSIsIm9wZW4iLGEuZ2V0UGF0aCgpKTt2YXIgZD1hO2MmJihkPXRoaXMucmVzb2x2ZVN5bWxpbmtzKGEpKTtpZighZCl0aHJvdyBoKCJFTk9FTlQiLCJvcGVuIixhLmdldFBhdGgoKSk7Yz1kLmdldE5vZGUoKTtpZihjLmlzRGlyZWN0b3J5KCkpe2lmKChiJihtYnxuYXxLYSkpIT09bWIpdGhyb3cgaCgiRUlTRElSIiwib3BlbiIsYS5nZXRQYXRoKCkpO31lbHNlIGlmKGImZ2YpdGhyb3cgaCgiRU5PVERJUiIsIm9wZW4iLGEuZ2V0UGF0aCgpKTtpZighKGImS2F8fGMuY2FuUmVhZCgpKSl0aHJvdyBoKCJFQUNDRVMiLCJvcGVuIixhLmdldFBhdGgoKSk7YT1uZXcgdGhpcy5wcm9wcy5GaWxlKGEsYyxiLHRoaXMubmV3RmROdW1iZXIoKSk7dGhpcy5mZHNbYS5mZF09YTt0aGlzLm9wZW5GaWxlcysrO2ImWmEmJmEudHJ1bmNhdGUoKTtyZXR1cm4gYX07CiAgYS5wcm90b3R5cGUub3BlbkZpbGU9ZnVuY3Rpb24oYSxiLGMsZCl7dm9pZCAwPT09ZCYmKGQ9ITApO3ZhciBlPXYoYSkscj1kP3RoaXMuZ2V0UmVzb2x2ZWRMaW5rKGUpOnRoaXMuZ2V0TGluayhlKTtpZighciYmYiZVKXt2YXIgRD10aGlzLmdldFJlc29sdmVkTGluayhlLnNsaWNlKDAsZS5sZW5ndGgtMSkpO2lmKCFEKXRocm93IGgoIkVOT0VOVCIsIm9wZW4iLFMrZS5qb2luKFMpKTtiJlUmJiJudW1iZXIiPT09dHlwZW9mIGMmJihyPXRoaXMuY3JlYXRlTGluayhELGVbZS5sZW5ndGgtMV0sITEsYykpO31pZihyKXJldHVybiB0aGlzLm9wZW5MaW5rKHIsYixkKTt0aHJvdyBoKCJFTk9FTlQiLCJvcGVuIixhKTt9O2EucHJvdG90eXBlLm9wZW5CYXNlPWZ1bmN0aW9uKGEsYixjLGQpe3ZvaWQgMD09PWQmJihkPSEwKTtiPXRoaXMub3BlbkZpbGUoYSxiLGMsZCk7aWYoIWIpdGhyb3cgaCgiRU5PRU5UIiwib3BlbiIsYSk7cmV0dXJuIGIuZmR9O2EucHJvdG90eXBlLm9wZW5TeW5jPWZ1bmN0aW9uKGEsCiAgYixjKXt2b2lkIDA9PT1jJiYoYz00MzgpO2M9TShjKTthPW0oYSk7Yj1rKGIpO3JldHVybiB0aGlzLm9wZW5CYXNlKGEsYixjKX07YS5wcm90b3R5cGUub3Blbj1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1jOyJmdW5jdGlvbiI9PT10eXBlb2YgYyYmKGU9NDM4LGQ9Yyk7Yz1NKGV8fDQzOCk7YT1tKGEpO2I9ayhiKTt0aGlzLndyYXBBc3luYyh0aGlzLm9wZW5CYXNlLFthLGIsY10sZCk7fTthLnByb3RvdHlwZS5jbG9zZUZpbGU9ZnVuY3Rpb24oYSl7dGhpcy5mZHNbYS5mZF0mJih0aGlzLm9wZW5GaWxlcy0tLGRlbGV0ZSB0aGlzLmZkc1thLmZkXSx0aGlzLnJlbGVhc2VkRmRzLnB1c2goYS5mZCkpO307YS5wcm90b3R5cGUuY2xvc2VTeW5jPWZ1bmN0aW9uKGEpe1lhKGEpO2E9dGhpcy5nZXRGaWxlQnlGZE9yVGhyb3coYSwiY2xvc2UiKTt0aGlzLmNsb3NlRmlsZShhKTt9O2EucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uKGEsYil7WWEoYSk7dGhpcy53cmFwQXN5bmModGhpcy5jbG9zZVN5bmMsCiAgW2FdLGIpO307YS5wcm90b3R5cGUub3BlbkZpbGVPckdldEJ5SWQ9ZnVuY3Rpb24oYSxiLGMpe2lmKCJudW1iZXIiPT09dHlwZW9mIGEpe2E9dGhpcy5mZHNbYV07aWYoIWEpdGhyb3cgaCgiRU5PRU5UIik7cmV0dXJuIGF9cmV0dXJuIHRoaXMub3BlbkZpbGUobShhKSxiLGMpfTthLnByb3RvdHlwZS5yZWFkQmFzZT1mdW5jdGlvbihhLGIsYyxkLGUpe3JldHVybiB0aGlzLmdldEZpbGVCeUZkT3JUaHJvdyhhKS5yZWFkKGIsTnVtYmVyKGMpLE51bWJlcihkKSxlKX07YS5wcm90b3R5cGUucmVhZFN5bmM9ZnVuY3Rpb24oYSxiLGMsZCxlKXtZYShhKTtyZXR1cm4gdGhpcy5yZWFkQmFzZShhLGIsYyxkLGUpfTthLnByb3RvdHlwZS5yZWFkPWZ1bmN0aW9uKGEsYixjLGQsZSxmKXt2YXIgcj10aGlzO3EoZik7aWYoMD09PWQpcmV0dXJuIEwuZGVmYXVsdC5uZXh0VGljayhmdW5jdGlvbigpe2YmJmYobnVsbCwwLGIpO30pOyRjLmRlZmF1bHQoZnVuY3Rpb24oKXt0cnl7dmFyIEQ9ci5yZWFkQmFzZShhLAogIGIsYyxkLGUpO2YobnVsbCxELGIpO31jYXRjaChwZil7ZihwZik7fX0pO307YS5wcm90b3R5cGUucmVhZEZpbGVCYXNlPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD0ibnVtYmVyIj09PXR5cGVvZiBhJiZhPj4+MD09PWE7aWYoIWQpe3ZhciBlPW0oYSk7ZT12KGUpO2lmKChlPXRoaXMuZ2V0UmVzb2x2ZWRMaW5rKGUpKSYmZS5nZXROb2RlKCkuaXNEaXJlY3RvcnkoKSl0aHJvdyBoKCJFSVNESVIiLCJvcGVuIixlLmdldFBhdGgoKSk7YT10aGlzLm9wZW5TeW5jKGEsYik7fXRyeXt2YXIgcj0kYih0aGlzLmdldEZpbGVCeUZkT3JUaHJvdyhhKS5nZXRCdWZmZXIoKSxjKTt9ZmluYWxseXtkfHx0aGlzLmNsb3NlU3luYyhhKTt9cmV0dXJuIHJ9O2EucHJvdG90eXBlLnJlYWRGaWxlU3luYz1mdW5jdGlvbihhLGIpe2I9emQoYik7dmFyIGM9ayhiLmZsYWcpO3JldHVybiB0aGlzLnJlYWRGaWxlQmFzZShhLGMsYi5lbmNvZGluZyl9O2EucHJvdG90eXBlLnJlYWRGaWxlPWZ1bmN0aW9uKGEsYixjKXtjPUIoemQpKGIsCiAgYyk7Yj1jWzBdO2M9Y1sxXTt2YXIgZD1rKGIuZmxhZyk7dGhpcy53cmFwQXN5bmModGhpcy5yZWFkRmlsZUJhc2UsW2EsZCxiLmVuY29kaW5nXSxjKTt9O2EucHJvdG90eXBlLndyaXRlQmFzZT1mdW5jdGlvbihhLGIsYyxkLGUpe3JldHVybiB0aGlzLmdldEZpbGVCeUZkT3JUaHJvdyhhLCJ3cml0ZSIpLndyaXRlKGIsYyxkLGUpfTthLnByb3RvdHlwZS53cml0ZVN5bmM9ZnVuY3Rpb24oYSxiLGMsZCxlKXtZYShhKTt2YXIgcj0ic3RyaW5nIiE9PXR5cGVvZiBiO2lmKHIpe3ZhciBEPShjfHwwKXwwO3ZhciBmPWQ7Yz1lO31lbHNlIHZhciBYYT1kO2I9TGEoYixYYSk7cj8idW5kZWZpbmVkIj09PXR5cGVvZiBmJiYoZj1iLmxlbmd0aCk6KEQ9MCxmPWIubGVuZ3RoKTtyZXR1cm4gdGhpcy53cml0ZUJhc2UoYSxiLEQsZixjKX07YS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3ZhciByPXRoaXM7WWEoYSk7dmFyIEQ9dHlwZW9mIGIsWGE9dHlwZW9mIGMsZz10eXBlb2YgZCwKICBoPXR5cGVvZiBlO2lmKCJzdHJpbmciIT09RClpZigiZnVuY3Rpb24iPT09WGEpdmFyIGs9YztlbHNlIGlmKCJmdW5jdGlvbiI9PT1nKXt2YXIgbGI9Y3wwO2s9ZDt9ZWxzZSBpZigiZnVuY3Rpb24iPT09aCl7bGI9Y3wwO3ZhciBtPWQ7az1lO31lbHNlIHtsYj1jfDA7bT1kO3ZhciBuPWU7az1mO31lbHNlIGlmKCJmdW5jdGlvbiI9PT1YYSlrPWM7ZWxzZSBpZigiZnVuY3Rpb24iPT09ZyluPWMsaz1kO2Vsc2UgaWYoImZ1bmN0aW9uIj09PWgpe249Yzt2YXIgdmE9ZDtrPWU7fXZhciBwPUxhKGIsdmEpOyJzdHJpbmciIT09RD8idW5kZWZpbmVkIj09PXR5cGVvZiBtJiYobT1wLmxlbmd0aCk6KGxiPTAsbT1wLmxlbmd0aCk7dmFyIHY9cShrKTskYy5kZWZhdWx0KGZ1bmN0aW9uKCl7dHJ5e3ZhciBjPXIud3JpdGVCYXNlKGEscCxsYixtLG4pOyJzdHJpbmciIT09RD92KG51bGwsYyxwKTp2KG51bGwsYyxiKTt9Y2F0Y2gocWYpe3YocWYpO319KTt9O2EucHJvdG90eXBlLndyaXRlRmlsZUJhc2U9ZnVuY3Rpb24oYSwKICBiLGMsZCl7dmFyIGU9Im51bWJlciI9PT10eXBlb2YgYTthPWU/YTp0aGlzLm9wZW5CYXNlKG0oYSksYyxkKTtkPTA7dmFyIHI9Yi5sZW5ndGg7Yz1jJiRhP3ZvaWQgMDowO3RyeXtmb3IoOzA8cjspe3ZhciBEPXRoaXMud3JpdGVTeW5jKGEsYixkLHIsYyk7ZCs9RDtyLT1EO3ZvaWQgMCE9PWMmJihjKz1EKTt9fWZpbmFsbHl7ZXx8dGhpcy5jbG9zZVN5bmMoYSk7fX07YS5wcm90b3R5cGUud3JpdGVGaWxlU3luYz1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9QmQoYyk7Yz1rKGQuZmxhZyk7dmFyIGU9TShkLm1vZGUpO2I9TGEoYixkLmVuY29kaW5nKTt0aGlzLndyaXRlRmlsZUJhc2UoYSxiLGMsZSk7fTthLnByb3RvdHlwZS53cml0ZUZpbGU9ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9YzsiZnVuY3Rpb24iPT09dHlwZW9mIGMmJihlPUFkLGQ9Yyk7Yz1xKGQpO3ZhciByPUJkKGUpO2U9ayhyLmZsYWcpO2Q9TShyLm1vZGUpO2I9TGEoYixyLmVuY29kaW5nKTt0aGlzLndyYXBBc3luYyh0aGlzLndyaXRlRmlsZUJhc2UsCiAgW2EsYixlLGRdLGMpO307YS5wcm90b3R5cGUubGlua0Jhc2U9ZnVuY3Rpb24oYSxiKXt2YXIgYz12KGEpLGQ9dGhpcy5nZXRMaW5rKGMpO2lmKCFkKXRocm93IGgoIkVOT0VOVCIsImxpbmsiLGEsYik7dmFyIGU9dihiKTtjPXRoaXMuZ2V0TGlua1BhcmVudChlKTtpZighYyl0aHJvdyBoKCJFTk9FTlQiLCJsaW5rIixhLGIpO2U9ZVtlLmxlbmd0aC0xXTtpZihjLmdldENoaWxkKGUpKXRocm93IGgoIkVFWElTVCIsImxpbmsiLGEsYik7YT1kLmdldE5vZGUoKTthLm5saW5rKys7Yy5jcmVhdGVDaGlsZChlLGEpO307YS5wcm90b3R5cGUuY29weUZpbGVCYXNlPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLnJlYWRGaWxlU3luYyhhKTtpZihjJmhmJiZ0aGlzLmV4aXN0c1N5bmMoYikpdGhyb3cgaCgiRUVYSVNUIiwiY29weUZpbGUiLGEsYik7aWYoYyZqZil0aHJvdyBoKCJFTk9TWVMiLCJjb3B5RmlsZSIsYSxiKTt0aGlzLndyaXRlRmlsZUJhc2UoYixkLHVhLncsNDM4KTt9O2EucHJvdG90eXBlLmNvcHlGaWxlU3luYz0KICBmdW5jdGlvbihhLGIsYyl7YT1tKGEpO2I9bShiKTtyZXR1cm4gdGhpcy5jb3B5RmlsZUJhc2UoYSxiLChjfHwwKXwwKX07YS5wcm90b3R5cGUuY29weUZpbGU9ZnVuY3Rpb24oYSxiLGMsZCl7YT1tKGEpO2I9bShiKTtpZigiZnVuY3Rpb24iPT09dHlwZW9mIGMpdmFyIGU9MDtlbHNlIGU9YyxjPWQ7cShjKTt0aGlzLndyYXBBc3luYyh0aGlzLmNvcHlGaWxlQmFzZSxbYSxiLGVdLGMpO307YS5wcm90b3R5cGUubGlua1N5bmM9ZnVuY3Rpb24oYSxiKXthPW0oYSk7Yj1tKGIpO3RoaXMubGlua0Jhc2UoYSxiKTt9O2EucHJvdG90eXBlLmxpbms9ZnVuY3Rpb24oYSxiLGMpe2E9bShhKTtiPW0oYik7dGhpcy53cmFwQXN5bmModGhpcy5saW5rQmFzZSxbYSxiXSxjKTt9O2EucHJvdG90eXBlLnVubGlua0Jhc2U9ZnVuY3Rpb24oYSl7dmFyIGI9dihhKTtiPXRoaXMuZ2V0TGluayhiKTtpZighYil0aHJvdyBoKCJFTk9FTlQiLCJ1bmxpbmsiLGEpO2lmKGIubGVuZ3RoKXRocm93IEVycm9yKCJEaXIgbm90IGVtcHR5Li4uIik7CiAgdGhpcy5kZWxldGVMaW5rKGIpO2E9Yi5nZXROb2RlKCk7YS5ubGluay0tOzA+PWEubmxpbmsmJnRoaXMuZGVsZXRlTm9kZShhKTt9O2EucHJvdG90eXBlLnVubGlua1N5bmM9ZnVuY3Rpb24oYSl7YT1tKGEpO3RoaXMudW5saW5rQmFzZShhKTt9O2EucHJvdG90eXBlLnVubGluaz1mdW5jdGlvbihhLGIpe2E9bShhKTt0aGlzLndyYXBBc3luYyh0aGlzLnVubGlua0Jhc2UsW2FdLGIpO307YS5wcm90b3R5cGUuc3ltbGlua0Jhc2U9ZnVuY3Rpb24oYSxiKXt2YXIgYz12KGIpLGQ9dGhpcy5nZXRMaW5rUGFyZW50KGMpO2lmKCFkKXRocm93IGgoIkVOT0VOVCIsInN5bWxpbmsiLGEsYik7Yz1jW2MubGVuZ3RoLTFdO2lmKGQuZ2V0Q2hpbGQoYykpdGhyb3cgaCgiRUVYSVNUIiwic3ltbGluayIsYSxiKTtiPWQuY3JlYXRlQ2hpbGQoYyk7Yi5nZXROb2RlKCkubWFrZVN5bWxpbmsodihhKSk7cmV0dXJuIGJ9O2EucHJvdG90eXBlLnN5bWxpbmtTeW5jPWZ1bmN0aW9uKGEsYil7YT1tKGEpO2I9bShiKTsKICB0aGlzLnN5bWxpbmtCYXNlKGEsYik7fTthLnByb3RvdHlwZS5zeW1saW5rPWZ1bmN0aW9uKGEsYixjLGQpe2M9cSgiZnVuY3Rpb24iPT09dHlwZW9mIGM/YzpkKTthPW0oYSk7Yj1tKGIpO3RoaXMud3JhcEFzeW5jKHRoaXMuc3ltbGlua0Jhc2UsW2EsYl0sYyk7fTthLnByb3RvdHlwZS5yZWFscGF0aEJhc2U9ZnVuY3Rpb24oYSxiKXt2YXIgYz12KGEpO2M9dGhpcy5nZXRSZXNvbHZlZExpbmsoYyk7aWYoIWMpdGhyb3cgaCgiRU5PRU5UIiwicmVhbHBhdGgiLGEpO3JldHVybiBLJDEuc3RyVG9FbmNvZGluZyhjLmdldFBhdGgoKSxiKX07YS5wcm90b3R5cGUucmVhbHBhdGhTeW5jPWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMucmVhbHBhdGhCYXNlKG0oYSksRWQoYikuZW5jb2RpbmcpfTthLnByb3RvdHlwZS5yZWFscGF0aD1mdW5jdGlvbihhLGIsYyl7Yz1sZihiLGMpO2I9Y1swXTtjPWNbMV07YT1tKGEpO3RoaXMud3JhcEFzeW5jKHRoaXMucmVhbHBhdGhCYXNlLFthLGIuZW5jb2RpbmddLAogIGMpO307YS5wcm90b3R5cGUubHN0YXRCYXNlPWZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YiYmKGI9ITEpO3ZhciBjPXRoaXMuZ2V0TGluayh2KGEpKTtpZighYyl0aHJvdyBoKCJFTk9FTlQiLCJsc3RhdCIsYSk7cmV0dXJuIGthLmRlZmF1bHQuYnVpbGQoYy5nZXROb2RlKCksYil9O2EucHJvdG90eXBlLmxzdGF0U3luYz1mdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmxzdGF0QmFzZShtKGEpLGUoYikuYmlnaW50KX07YS5wcm90b3R5cGUubHN0YXQ9ZnVuY3Rpb24oYSxiLGMpe2M9ZChiLGMpO2I9Y1swXTtjPWNbMV07dGhpcy53cmFwQXN5bmModGhpcy5sc3RhdEJhc2UsW20oYSksYi5iaWdpbnRdLGMpO307YS5wcm90b3R5cGUuc3RhdEJhc2U9ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1iJiYoYj0hMSk7dmFyIGM9dGhpcy5nZXRSZXNvbHZlZExpbmsodihhKSk7aWYoIWMpdGhyb3cgaCgiRU5PRU5UIiwic3RhdCIsYSk7cmV0dXJuIGthLmRlZmF1bHQuYnVpbGQoYy5nZXROb2RlKCksYil9OwogIGEucHJvdG90eXBlLnN0YXRTeW5jPWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuc3RhdEJhc2UobShhKSxlKGIpLmJpZ2ludCl9O2EucHJvdG90eXBlLnN0YXQ9ZnVuY3Rpb24oYSxiLGMpe2M9ZChiLGMpO2I9Y1swXTtjPWNbMV07dGhpcy53cmFwQXN5bmModGhpcy5zdGF0QmFzZSxbbShhKSxiLmJpZ2ludF0sYyk7fTthLnByb3RvdHlwZS5mc3RhdEJhc2U9ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1iJiYoYj0hMSk7YT10aGlzLmdldEZpbGVCeUZkKGEpO2lmKCFhKXRocm93IGgoIkVCQURGIiwiZnN0YXQiKTtyZXR1cm4ga2EuZGVmYXVsdC5idWlsZChhLm5vZGUsYil9O2EucHJvdG90eXBlLmZzdGF0U3luYz1mdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmZzdGF0QmFzZShhLGUoYikuYmlnaW50KX07YS5wcm90b3R5cGUuZnN0YXQ9ZnVuY3Rpb24oYSxiLGMpe2I9ZChiLGMpO3RoaXMud3JhcEFzeW5jKHRoaXMuZnN0YXRCYXNlLFthLGJbMF0uYmlnaW50XSxiWzFdKTt9O2EucHJvdG90eXBlLnJlbmFtZUJhc2U9CiAgZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldExpbmsodihhKSk7aWYoIWMpdGhyb3cgaCgiRU5PRU5UIiwicmVuYW1lIixhLGIpO3ZhciBkPXYoYiksZT10aGlzLmdldExpbmtQYXJlbnQoZCk7aWYoIWUpdGhyb3cgaCgiRU5PRU5UIiwicmVuYW1lIixhLGIpOyhhPWMucGFyZW50KSYmYS5kZWxldGVDaGlsZChjKTtjLnN0ZXBzPVhiKGUuc3RlcHMsW2RbZC5sZW5ndGgtMV1dKTtlLnNldENoaWxkKGMuZ2V0TmFtZSgpLGMpO307YS5wcm90b3R5cGUucmVuYW1lU3luYz1mdW5jdGlvbihhLGIpe2E9bShhKTtiPW0oYik7dGhpcy5yZW5hbWVCYXNlKGEsYik7fTthLnByb3RvdHlwZS5yZW5hbWU9ZnVuY3Rpb24oYSxiLGMpe2E9bShhKTtiPW0oYik7dGhpcy53cmFwQXN5bmModGhpcy5yZW5hbWVCYXNlLFthLGJdLGMpO307YS5wcm90b3R5cGUuZXhpc3RzQmFzZT1mdW5jdGlvbihhKXtyZXR1cm4gISF0aGlzLnN0YXRCYXNlKGEpfTthLnByb3RvdHlwZS5leGlzdHNTeW5jPWZ1bmN0aW9uKGEpe3RyeXtyZXR1cm4gdGhpcy5leGlzdHNCYXNlKG0oYSkpfWNhdGNoKEQpe3JldHVybiAhMX19OwogIGEucHJvdG90eXBlLmV4aXN0cz1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMsZD1tKGEpO2lmKCJmdW5jdGlvbiIhPT10eXBlb2YgYil0aHJvdyBFcnJvcihmYS5DQik7JGMuZGVmYXVsdChmdW5jdGlvbigpe3RyeXtiKGMuZXhpc3RzQmFzZShkKSk7fWNhdGNoKHZhKXtiKCExKTt9fSk7fTthLnByb3RvdHlwZS5hY2Nlc3NCYXNlPWZ1bmN0aW9uKGEpe3RoaXMuZ2V0TGlua09yVGhyb3coYSwiYWNjZXNzIik7fTthLnByb3RvdHlwZS5hY2Nlc3NTeW5jPWZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YiYmKGI9d2QpO2E9bShhKTt0aGlzLmFjY2Vzc0Jhc2UoYSxifDApO307YS5wcm90b3R5cGUuYWNjZXNzPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD13ZDsiZnVuY3Rpb24iIT09dHlwZW9mIGImJihkPWJ8MCxiPXEoYykpO2E9bShhKTt0aGlzLndyYXBBc3luYyh0aGlzLmFjY2Vzc0Jhc2UsW2EsZF0sYik7fTthLnByb3RvdHlwZS5hcHBlbmRGaWxlU3luYz1mdW5jdGlvbihhLGIsYyl7dm9pZCAwPT09YyYmKGM9CiAgQ2QpO2M9RGQoYyk7Yy5mbGFnJiZhPj4+MCE9PWF8fChjLmZsYWc9ImEiKTt0aGlzLndyaXRlRmlsZVN5bmMoYSxiLGMpO307YS5wcm90b3R5cGUuYXBwZW5kRmlsZT1mdW5jdGlvbihhLGIsYyxkKXtkPWtmKGMsZCk7Yz1kWzBdO2Q9ZFsxXTtjLmZsYWcmJmE+Pj4wIT09YXx8KGMuZmxhZz0iYSIpO3RoaXMud3JpdGVGaWxlKGEsYixjLGQpO307YS5wcm90b3R5cGUucmVhZGRpckJhc2U9ZnVuY3Rpb24oYSxiKXt2YXIgYz12KGEpO2M9dGhpcy5nZXRSZXNvbHZlZExpbmsoYyk7aWYoIWMpdGhyb3cgaCgiRU5PRU5UIiwicmVhZGRpciIsYSk7aWYoIWMuZ2V0Tm9kZSgpLmlzRGlyZWN0b3J5KCkpdGhyb3cgaCgiRU5PVERJUiIsInNjYW5kaXIiLGEpO2lmKGIud2l0aEZpbGVUeXBlcyl7dmFyIGQ9W107Zm9yKGUgaW4gYy5jaGlsZHJlbikoYT1jLmdldENoaWxkKGUpKSYmZC5wdXNoKFFjLmRlZmF1bHQuYnVpbGQoYSxiLmVuY29kaW5nKSk7WWJ8fCJidWZmZXIiPT09Yi5lbmNvZGluZ3x8ZC5zb3J0KGZ1bmN0aW9uKGEsCiAgYil7cmV0dXJuIGEubmFtZTxiLm5hbWU/LTE6YS5uYW1lPmIubmFtZT8xOjB9KTtyZXR1cm4gZH12YXIgZT1bXTtmb3IoZCBpbiBjLmNoaWxkcmVuKWUucHVzaChLJDEuc3RyVG9FbmNvZGluZyhkLGIuZW5jb2RpbmcpKTtZYnx8ImJ1ZmZlciI9PT1iLmVuY29kaW5nfHxlLnNvcnQoKTtyZXR1cm4gZX07YS5wcm90b3R5cGUucmVhZGRpclN5bmM9ZnVuY3Rpb24oYSxiKXtiPUdkKGIpO2E9bShhKTtyZXR1cm4gdGhpcy5yZWFkZGlyQmFzZShhLGIpfTthLnByb3RvdHlwZS5yZWFkZGlyPWZ1bmN0aW9uKGEsYixjKXtjPW1mKGIsYyk7Yj1jWzBdO2M9Y1sxXTthPW0oYSk7dGhpcy53cmFwQXN5bmModGhpcy5yZWFkZGlyQmFzZSxbYSxiXSxjKTt9O2EucHJvdG90eXBlLnJlYWRsaW5rQmFzZT1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0TGlua09yVGhyb3coYSwicmVhZGxpbmsiKS5nZXROb2RlKCk7aWYoIWMuaXNTeW1saW5rKCkpdGhyb3cgaCgiRUlOVkFMIiwicmVhZGxpbmsiLGEpO2E9CiAgUytjLnN5bWxpbmsuam9pbihTKTtyZXR1cm4gSyQxLnN0clRvRW5jb2RpbmcoYSxiKX07YS5wcm90b3R5cGUucmVhZGxpbmtTeW5jPWZ1bmN0aW9uKGEsYil7Yj1vYihiKTthPW0oYSk7cmV0dXJuIHRoaXMucmVhZGxpbmtCYXNlKGEsYi5lbmNvZGluZyl9O2EucHJvdG90eXBlLnJlYWRsaW5rPWZ1bmN0aW9uKGEsYixjKXtjPXlkKGIsYyk7Yj1jWzBdO2M9Y1sxXTthPW0oYSk7dGhpcy53cmFwQXN5bmModGhpcy5yZWFkbGlua0Jhc2UsW2EsYi5lbmNvZGluZ10sYyk7fTthLnByb3RvdHlwZS5mc3luY0Jhc2U9ZnVuY3Rpb24oYSl7dGhpcy5nZXRGaWxlQnlGZE9yVGhyb3coYSwiZnN5bmMiKTt9O2EucHJvdG90eXBlLmZzeW5jU3luYz1mdW5jdGlvbihhKXt0aGlzLmZzeW5jQmFzZShhKTt9O2EucHJvdG90eXBlLmZzeW5jPWZ1bmN0aW9uKGEsYil7dGhpcy53cmFwQXN5bmModGhpcy5mc3luY0Jhc2UsW2FdLGIpO307YS5wcm90b3R5cGUuZmRhdGFzeW5jQmFzZT1mdW5jdGlvbihhKXt0aGlzLmdldEZpbGVCeUZkT3JUaHJvdyhhLAogICJmZGF0YXN5bmMiKTt9O2EucHJvdG90eXBlLmZkYXRhc3luY1N5bmM9ZnVuY3Rpb24oYSl7dGhpcy5mZGF0YXN5bmNCYXNlKGEpO307YS5wcm90b3R5cGUuZmRhdGFzeW5jPWZ1bmN0aW9uKGEsYil7dGhpcy53cmFwQXN5bmModGhpcy5mZGF0YXN5bmNCYXNlLFthXSxiKTt9O2EucHJvdG90eXBlLmZ0cnVuY2F0ZUJhc2U9ZnVuY3Rpb24oYSxiKXt0aGlzLmdldEZpbGVCeUZkT3JUaHJvdyhhLCJmdHJ1bmNhdGUiKS50cnVuY2F0ZShiKTt9O2EucHJvdG90eXBlLmZ0cnVuY2F0ZVN5bmM9ZnVuY3Rpb24oYSxiKXt0aGlzLmZ0cnVuY2F0ZUJhc2UoYSxiKTt9O2EucHJvdG90eXBlLmZ0cnVuY2F0ZT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9Im51bWJlciI9PT10eXBlb2YgYj9iOjA7Yj1xKCJudW1iZXIiPT09dHlwZW9mIGI/YzpiKTt0aGlzLndyYXBBc3luYyh0aGlzLmZ0cnVuY2F0ZUJhc2UsW2EsZF0sYik7fTthLnByb3RvdHlwZS50cnVuY2F0ZUJhc2U9ZnVuY3Rpb24oYSxiKXthPXRoaXMub3BlblN5bmMoYSwKICAicisiKTt0cnl7dGhpcy5mdHJ1bmNhdGVTeW5jKGEsYik7fWZpbmFsbHl7dGhpcy5jbG9zZVN5bmMoYSk7fX07YS5wcm90b3R5cGUudHJ1bmNhdGVTeW5jPWZ1bmN0aW9uKGEsYil7aWYoYT4+PjA9PT1hKXJldHVybiB0aGlzLmZ0cnVuY2F0ZVN5bmMoYSxiKTt0aGlzLnRydW5jYXRlQmFzZShhLGIpO307YS5wcm90b3R5cGUudHJ1bmNhdGU9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPSJudW1iZXIiPT09dHlwZW9mIGI/YjowO2I9cSgibnVtYmVyIj09PXR5cGVvZiBiP2M6Yik7aWYoYT4+PjA9PT1hKXJldHVybiB0aGlzLmZ0cnVuY2F0ZShhLGQsYik7dGhpcy53cmFwQXN5bmModGhpcy50cnVuY2F0ZUJhc2UsW2EsZF0sYik7fTthLnByb3RvdHlwZS5mdXRpbWVzQmFzZT1mdW5jdGlvbihhLGIsYyl7YT10aGlzLmdldEZpbGVCeUZkT3JUaHJvdyhhLCJmdXRpbWVzIikubm9kZTthLmF0aW1lPW5ldyBEYXRlKDFFMypiKTthLm10aW1lPW5ldyBEYXRlKDFFMypjKTt9O2EucHJvdG90eXBlLmZ1dGltZXNTeW5jPQogIGZ1bmN0aW9uKGEsYixjKXt0aGlzLmZ1dGltZXNCYXNlKGEsaGEoYiksaGEoYykpO307YS5wcm90b3R5cGUuZnV0aW1lcz1mdW5jdGlvbihhLGIsYyxkKXt0aGlzLndyYXBBc3luYyh0aGlzLmZ1dGltZXNCYXNlLFthLGhhKGIpLGhhKGMpXSxkKTt9O2EucHJvdG90eXBlLnV0aW1lc0Jhc2U9ZnVuY3Rpb24oYSxiLGMpe2E9dGhpcy5vcGVuU3luYyhhLCJyKyIpO3RyeXt0aGlzLmZ1dGltZXNCYXNlKGEsYixjKTt9ZmluYWxseXt0aGlzLmNsb3NlU3luYyhhKTt9fTthLnByb3RvdHlwZS51dGltZXNTeW5jPWZ1bmN0aW9uKGEsYixjKXt0aGlzLnV0aW1lc0Jhc2UobShhKSxoYShiKSxoYShjKSk7fTthLnByb3RvdHlwZS51dGltZXM9ZnVuY3Rpb24oYSxiLGMsZCl7dGhpcy53cmFwQXN5bmModGhpcy51dGltZXNCYXNlLFttKGEpLGhhKGIpLGhhKGMpXSxkKTt9O2EucHJvdG90eXBlLm1rZGlyQmFzZT1mdW5jdGlvbihhLGIpe3ZhciBjPXYoYSk7aWYoIWMubGVuZ3RoKXRocm93IGgoIkVJU0RJUiIsIm1rZGlyIiwKICBhKTt2YXIgZD10aGlzLmdldExpbmtQYXJlbnRBc0Rpck9yVGhyb3coYSwibWtkaXIiKTtjPWNbYy5sZW5ndGgtMV07aWYoZC5nZXRDaGlsZChjKSl0aHJvdyBoKCJFRVhJU1QiLCJta2RpciIsYSk7ZC5jcmVhdGVDaGlsZChjLHRoaXMuY3JlYXRlTm9kZSghMCxiKSk7fTthLnByb3RvdHlwZS5ta2RpcnBCYXNlPWZ1bmN0aW9uKGEsYil7YT12KGEpO2Zvcih2YXIgYz10aGlzLnJvb3QsZD0wO2Q8YS5sZW5ndGg7ZCsrKXt2YXIgZT1hW2RdO2lmKCFjLmdldE5vZGUoKS5pc0RpcmVjdG9yeSgpKXRocm93IGgoIkVOT1RESVIiLCJta2RpciIsYy5nZXRQYXRoKCkpO3ZhciBmPWMuZ2V0Q2hpbGQoZSk7aWYoZilpZihmLmdldE5vZGUoKS5pc0RpcmVjdG9yeSgpKWM9ZjtlbHNlIHRocm93IGgoIkVOT1RESVIiLCJta2RpciIsZi5nZXRQYXRoKCkpO2Vsc2UgYz1jLmNyZWF0ZUNoaWxkKGUsdGhpcy5jcmVhdGVOb2RlKCEwLGIpKTt9fTthLnByb3RvdHlwZS5ta2RpclN5bmM9ZnVuY3Rpb24oYSxiKXtiPQogIGYoYik7dmFyIGM9TShiLm1vZGUsNTExKTthPW0oYSk7Yi5yZWN1cnNpdmU/dGhpcy5ta2RpcnBCYXNlKGEsYyk6dGhpcy5ta2RpckJhc2UoYSxjKTt9O2EucHJvdG90eXBlLm1rZGlyPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1mKGIpO2I9cSgiZnVuY3Rpb24iPT09dHlwZW9mIGI/YjpjKTtjPU0oZC5tb2RlLDUxMSk7YT1tKGEpO2QucmVjdXJzaXZlP3RoaXMud3JhcEFzeW5jKHRoaXMubWtkaXJwQmFzZSxbYSxjXSxiKTp0aGlzLndyYXBBc3luYyh0aGlzLm1rZGlyQmFzZSxbYSxjXSxiKTt9O2EucHJvdG90eXBlLm1rZGlycFN5bmM9ZnVuY3Rpb24oYSxiKXt0aGlzLm1rZGlyU3luYyhhLHttb2RlOmIscmVjdXJzaXZlOiEwfSk7fTthLnByb3RvdHlwZS5ta2RpcnA9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPSJmdW5jdGlvbiI9PT10eXBlb2YgYj92b2lkIDA6YjtiPXEoImZ1bmN0aW9uIj09PXR5cGVvZiBiP2I6Yyk7dGhpcy5ta2RpcihhLHttb2RlOmQscmVjdXJzaXZlOiEwfSxiKTt9O2EucHJvdG90eXBlLm1rZHRlbXBCYXNlPQogIGZ1bmN0aW9uKGEsYixjKXt2b2lkIDA9PT1jJiYoYz01KTt2YXIgZD1hK3RoaXMuZ2VuUm5kU3RyKCk7dHJ5e3JldHVybiB0aGlzLm1rZGlyQmFzZShkLDUxMSksSyQxLnN0clRvRW5jb2RpbmcoZCxiKX1jYXRjaCh2YSl7aWYoIkVFWElTVCI9PT12YS5jb2RlKXtpZigxPGMpcmV0dXJuIHRoaXMubWtkdGVtcEJhc2UoYSxiLGMtMSk7dGhyb3cgRXJyb3IoIkNvdWxkIG5vdCBjcmVhdGUgdGVtcCBkaXIuIik7fXRocm93IHZhO319O2EucHJvdG90eXBlLm1rZHRlbXBTeW5jPWZ1bmN0aW9uKGEsYil7Yj1vYihiKS5lbmNvZGluZztpZighYXx8InN0cmluZyIhPT10eXBlb2YgYSl0aHJvdyBuZXcgVHlwZUVycm9yKCJmaWxlbmFtZSBwcmVmaXggaXMgcmVxdWlyZWQiKTtxYihhKTtyZXR1cm4gdGhpcy5ta2R0ZW1wQmFzZShhLGIpfTthLnByb3RvdHlwZS5ta2R0ZW1wPWZ1bmN0aW9uKGEsYixjKXtjPXlkKGIsYyk7Yj1jWzBdLmVuY29kaW5nO2M9Y1sxXTtpZighYXx8InN0cmluZyIhPT10eXBlb2YgYSl0aHJvdyBuZXcgVHlwZUVycm9yKCJmaWxlbmFtZSBwcmVmaXggaXMgcmVxdWlyZWQiKTsKICBxYihhKSYmdGhpcy53cmFwQXN5bmModGhpcy5ta2R0ZW1wQmFzZSxbYSxiXSxjKTt9O2EucHJvdG90eXBlLnJtZGlyQmFzZT1mdW5jdGlvbihhLGIpe2I9YWEoe30sRmQsYik7dmFyIGM9dGhpcy5nZXRMaW5rQXNEaXJPclRocm93KGEsInJtZGlyIik7aWYoYy5sZW5ndGgmJiFiLnJlY3Vyc2l2ZSl0aHJvdyBoKCJFTk9URU1QVFkiLCJybWRpciIsYSk7dGhpcy5kZWxldGVMaW5rKGMpO307YS5wcm90b3R5cGUucm1kaXJTeW5jPWZ1bmN0aW9uKGEsYil7dGhpcy5ybWRpckJhc2UobShhKSxiKTt9O2EucHJvdG90eXBlLnJtZGlyPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1hYSh7fSxGZCxiKTtiPXEoImZ1bmN0aW9uIj09PXR5cGVvZiBiP2I6Yyk7dGhpcy53cmFwQXN5bmModGhpcy5ybWRpckJhc2UsW20oYSksZF0sYik7fTthLnByb3RvdHlwZS5mY2htb2RCYXNlPWZ1bmN0aW9uKGEsYil7dGhpcy5nZXRGaWxlQnlGZE9yVGhyb3coYSwiZmNobW9kIikuY2htb2QoYik7fTthLnByb3RvdHlwZS5mY2htb2RTeW5jPQogIGZ1bmN0aW9uKGEsYil7dGhpcy5mY2htb2RCYXNlKGEsTShiKSk7fTthLnByb3RvdHlwZS5mY2htb2Q9ZnVuY3Rpb24oYSxiLGMpe3RoaXMud3JhcEFzeW5jKHRoaXMuZmNobW9kQmFzZSxbYSxNKGIpXSxjKTt9O2EucHJvdG90eXBlLmNobW9kQmFzZT1mdW5jdGlvbihhLGIpe2E9dGhpcy5vcGVuU3luYyhhLCJyKyIpO3RyeXt0aGlzLmZjaG1vZEJhc2UoYSxiKTt9ZmluYWxseXt0aGlzLmNsb3NlU3luYyhhKTt9fTthLnByb3RvdHlwZS5jaG1vZFN5bmM9ZnVuY3Rpb24oYSxiKXtiPU0oYik7YT1tKGEpO3RoaXMuY2htb2RCYXNlKGEsYik7fTthLnByb3RvdHlwZS5jaG1vZD1mdW5jdGlvbihhLGIsYyl7Yj1NKGIpO2E9bShhKTt0aGlzLndyYXBBc3luYyh0aGlzLmNobW9kQmFzZSxbYSxiXSxjKTt9O2EucHJvdG90eXBlLmxjaG1vZEJhc2U9ZnVuY3Rpb24oYSxiKXthPXRoaXMub3BlbkJhc2UoYSxuYSwwLCExKTt0cnl7dGhpcy5mY2htb2RCYXNlKGEsYik7fWZpbmFsbHl7dGhpcy5jbG9zZVN5bmMoYSk7fX07CiAgYS5wcm90b3R5cGUubGNobW9kU3luYz1mdW5jdGlvbihhLGIpe2I9TShiKTthPW0oYSk7dGhpcy5sY2htb2RCYXNlKGEsYik7fTthLnByb3RvdHlwZS5sY2htb2Q9ZnVuY3Rpb24oYSxiLGMpe2I9TShiKTthPW0oYSk7dGhpcy53cmFwQXN5bmModGhpcy5sY2htb2RCYXNlLFthLGJdLGMpO307YS5wcm90b3R5cGUuZmNob3duQmFzZT1mdW5jdGlvbihhLGIsYyl7dGhpcy5nZXRGaWxlQnlGZE9yVGhyb3coYSwiZmNob3duIikuY2hvd24oYixjKTt9O2EucHJvdG90eXBlLmZjaG93blN5bmM9ZnVuY3Rpb24oYSxiLGMpe0hhKGIpO0lhKGMpO3RoaXMuZmNob3duQmFzZShhLGIsYyk7fTthLnByb3RvdHlwZS5mY2hvd249ZnVuY3Rpb24oYSxiLGMsZCl7SGEoYik7SWEoYyk7dGhpcy53cmFwQXN5bmModGhpcy5mY2hvd25CYXNlLFthLGIsY10sZCk7fTthLnByb3RvdHlwZS5jaG93bkJhc2U9ZnVuY3Rpb24oYSxiLGMpe3RoaXMuZ2V0UmVzb2x2ZWRMaW5rT3JUaHJvdyhhLCJjaG93biIpLmdldE5vZGUoKS5jaG93bihiLAogIGMpO307YS5wcm90b3R5cGUuY2hvd25TeW5jPWZ1bmN0aW9uKGEsYixjKXtIYShiKTtJYShjKTt0aGlzLmNob3duQmFzZShtKGEpLGIsYyk7fTthLnByb3RvdHlwZS5jaG93bj1mdW5jdGlvbihhLGIsYyxkKXtIYShiKTtJYShjKTt0aGlzLndyYXBBc3luYyh0aGlzLmNob3duQmFzZSxbbShhKSxiLGNdLGQpO307YS5wcm90b3R5cGUubGNob3duQmFzZT1mdW5jdGlvbihhLGIsYyl7dGhpcy5nZXRMaW5rT3JUaHJvdyhhLCJsY2hvd24iKS5nZXROb2RlKCkuY2hvd24oYixjKTt9O2EucHJvdG90eXBlLmxjaG93blN5bmM9ZnVuY3Rpb24oYSxiLGMpe0hhKGIpO0lhKGMpO3RoaXMubGNob3duQmFzZShtKGEpLGIsYyk7fTthLnByb3RvdHlwZS5sY2hvd249ZnVuY3Rpb24oYSxiLGMsZCl7SGEoYik7SWEoYyk7dGhpcy53cmFwQXN5bmModGhpcy5sY2hvd25CYXNlLFttKGEpLGIsY10sZCk7fTthLnByb3RvdHlwZS53YXRjaEZpbGU9ZnVuY3Rpb24oYSxiLGMpe2E9bShhKTt2YXIgZD1iOyJmdW5jdGlvbiI9PT0KICB0eXBlb2YgZCYmKGM9YixkPW51bGwpO2lmKCJmdW5jdGlvbiIhPT10eXBlb2YgYyl0aHJvdyBFcnJvcignIndhdGNoRmlsZSgpIiByZXF1aXJlcyBhIGxpc3RlbmVyIGZ1bmN0aW9uJyk7Yj01MDA3O3ZhciBlPSEwO2QmJiJvYmplY3QiPT09dHlwZW9mIGQmJigibnVtYmVyIj09PXR5cGVvZiBkLmludGVydmFsJiYoYj1kLmludGVydmFsKSwiYm9vbGVhbiI9PT10eXBlb2YgZC5wZXJzaXN0ZW50JiYoZT1kLnBlcnNpc3RlbnQpKTtkPXRoaXMuc3RhdFdhdGNoZXJzW2FdO2R8fChkPW5ldyB0aGlzLlN0YXRXYXRjaGVyLGQuc3RhcnQoYSxlLGIpLHRoaXMuc3RhdFdhdGNoZXJzW2FdPWQpO2QuYWRkTGlzdGVuZXIoImNoYW5nZSIsYyk7cmV0dXJuIGR9O2EucHJvdG90eXBlLnVud2F0Y2hGaWxlPWZ1bmN0aW9uKGEsYil7YT1tKGEpO3ZhciBjPXRoaXMuc3RhdFdhdGNoZXJzW2FdO2MmJigiZnVuY3Rpb24iPT09dHlwZW9mIGI/Yy5yZW1vdmVMaXN0ZW5lcigiY2hhbmdlIixiKTpjLnJlbW92ZUFsbExpc3RlbmVycygiY2hhbmdlIiksCiAgMD09PWMubGlzdGVuZXJDb3VudCgiY2hhbmdlIikmJihjLnN0b3AoKSxkZWxldGUgdGhpcy5zdGF0V2F0Y2hlcnNbYV0pKTt9O2EucHJvdG90eXBlLmNyZWF0ZVJlYWRTdHJlYW09ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IHRoaXMuUmVhZFN0cmVhbShhLGIpfTthLnByb3RvdHlwZS5jcmVhdGVXcml0ZVN0cmVhbT1mdW5jdGlvbihhLGIpe3JldHVybiBuZXcgdGhpcy5Xcml0ZVN0cmVhbShhLGIpfTthLnByb3RvdHlwZS53YXRjaD1mdW5jdGlvbihhLGIsYyl7YT1tKGEpO3ZhciBkPWI7ImZ1bmN0aW9uIj09PXR5cGVvZiBiJiYoYz1iLGQ9bnVsbCk7dmFyIGU9b2IoZCk7Yj1lLnBlcnNpc3RlbnQ7ZD1lLnJlY3Vyc2l2ZTtlPWUuZW5jb2Rpbmc7dm9pZCAwPT09YiYmKGI9ITApO3ZvaWQgMD09PWQmJihkPSExKTt2YXIgZj1uZXcgdGhpcy5GU1dhdGNoZXI7Zi5zdGFydChhLGIsZCxlKTtjJiZmLmFkZExpc3RlbmVyKCJjaGFuZ2UiLGMpO3JldHVybiBmfTthLmZkPTIxNDc0ODM2NDc7cmV0dXJuIGF9KCk7CiAgYi5Wb2x1bWU9YTt2YXIgSGQ9ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihiKXt2YXIgYz1hLmNhbGwodGhpcyl8fHRoaXM7Yy5vbkludGVydmFsPWZ1bmN0aW9uKCl7dHJ5e3ZhciBhPWMudm9sLnN0YXRTeW5jKGMuZmlsZW5hbWUpO2MuaGFzQ2hhbmdlZChhKSYmKGMuZW1pdCgiY2hhbmdlIixhLGMucHJldiksYy5wcmV2PWEpO31maW5hbGx5e2MubG9vcCgpO319O2Mudm9sPWI7cmV0dXJuIGN9SmEoYixhKTtiLnByb3RvdHlwZS5sb29wPWZ1bmN0aW9uKCl7dGhpcy50aW1lb3V0UmVmPXRoaXMuc2V0VGltZW91dCh0aGlzLm9uSW50ZXJ2YWwsdGhpcy5pbnRlcnZhbCk7fTtiLnByb3RvdHlwZS5oYXNDaGFuZ2VkPWZ1bmN0aW9uKGEpe3JldHVybiBhLm10aW1lTXM+dGhpcy5wcmV2Lm10aW1lTXN8fGEubmxpbmshPT10aGlzLnByZXYubmxpbms/ITA6ITF9O2IucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKGEsYixjKXt2b2lkIDA9PT1iJiYoYj0hMCk7dm9pZCAwPT09YyYmKGM9NTAwNyk7dGhpcy5maWxlbmFtZT0KICBtKGEpO3RoaXMuc2V0VGltZW91dD1iP3NldFRpbWVvdXQ6aGQuZGVmYXVsdDt0aGlzLmludGVydmFsPWM7dGhpcy5wcmV2PXRoaXMudm9sLnN0YXRTeW5jKHRoaXMuZmlsZW5hbWUpO3RoaXMubG9vcCgpO307Yi5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbigpe2NsZWFyVGltZW91dCh0aGlzLnRpbWVvdXRSZWYpO0wuZGVmYXVsdC5uZXh0VGljayhlZix0aGlzKTt9O3JldHVybiBifShPLkV2ZW50RW1pdHRlcik7Yi5TdGF0V2F0Y2hlcj1IZDt2YXIgTjtsYy5pbmhlcml0cyhULFkuUmVhZGFibGUpO2IuUmVhZFN0cmVhbT1UO1QucHJvdG90eXBlLm9wZW49ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3RoaXMuX3ZvbC5vcGVuKHRoaXMucGF0aCx0aGlzLmZsYWdzLHRoaXMubW9kZSxmdW5jdGlvbihiLGMpe2I/KGEuYXV0b0Nsb3NlJiZhLmRlc3Ryb3kmJmEuZGVzdHJveSgpLGEuZW1pdCgiZXJyb3IiLGIpKTooYS5mZD1jLGEuZW1pdCgib3BlbiIsYyksYS5yZWFkKCkpO30pO307VC5wcm90b3R5cGUuX3JlYWQ9CiAgZnVuY3Rpb24oYSl7aWYoIm51bWJlciIhPT10eXBlb2YgdGhpcy5mZClyZXR1cm4gdGhpcy5vbmNlKCJvcGVuIixmdW5jdGlvbigpe3RoaXMuX3JlYWQoYSk7fSk7aWYoIXRoaXMuZGVzdHJveWVkKXtpZighTnx8MTI4Pk4ubGVuZ3RoLU4udXNlZClOPUYuYnVmZmVyQWxsb2NVbnNhZmUodGhpcy5fcmVhZGFibGVTdGF0ZS5oaWdoV2F0ZXJNYXJrKSxOLnVzZWQ9MDt2YXIgYj1OLGM9TWF0aC5taW4oTi5sZW5ndGgtTi51c2VkLGEpLGQ9Ti51c2VkO3ZvaWQgMCE9PXRoaXMucG9zJiYoYz1NYXRoLm1pbih0aGlzLmVuZC10aGlzLnBvcysxLGMpKTtpZigwPj1jKXJldHVybiB0aGlzLnB1c2gobnVsbCk7dmFyIGU9dGhpczt0aGlzLl92b2wucmVhZCh0aGlzLmZkLE4sTi51c2VkLGMsdGhpcy5wb3MsZnVuY3Rpb24oYSxjKXthPyhlLmF1dG9DbG9zZSYmZS5kZXN0cm95JiZlLmRlc3Ryb3koKSxlLmVtaXQoImVycm9yIixhKSk6KGE9bnVsbCwwPGMmJihlLmJ5dGVzUmVhZCs9YyxhPWIuc2xpY2UoZCwKICBkK2MpKSxlLnB1c2goYSkpO30pO3ZvaWQgMCE9PXRoaXMucG9zJiYodGhpcy5wb3MrPWMpO04udXNlZCs9Yzt9fTtULnByb3RvdHlwZS5fZGVzdHJveT1mdW5jdGlvbihhLGIpe3RoaXMuY2xvc2UoZnVuY3Rpb24oYyl7YihhfHxjKTt9KTt9O1QucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7aWYoYSl0aGlzLm9uY2UoImNsb3NlIixhKTtpZih0aGlzLmNsb3NlZHx8Im51bWJlciIhPT10eXBlb2YgdGhpcy5mZCl7aWYoIm51bWJlciIhPT10eXBlb2YgdGhpcy5mZCl7dGhpcy5vbmNlKCJvcGVuIixmZik7cmV0dXJufXJldHVybiBMLmRlZmF1bHQubmV4dFRpY2soZnVuY3Rpb24oKXtyZXR1cm4gYi5lbWl0KCJjbG9zZSIpfSl9dGhpcy5jbG9zZWQ9ITA7dGhpcy5fdm9sLmNsb3NlKHRoaXMuZmQsZnVuY3Rpb24oYSl7YT9iLmVtaXQoImVycm9yIixhKTpiLmVtaXQoImNsb3NlIik7fSk7dGhpcy5mZD1udWxsO307bGMuaW5oZXJpdHMoUixZLldyaXRhYmxlKTtiLldyaXRlU3RyZWFtPQogIFI7Ui5wcm90b3R5cGUub3Blbj1mdW5jdGlvbigpe3RoaXMuX3ZvbC5vcGVuKHRoaXMucGF0aCx0aGlzLmZsYWdzLHRoaXMubW9kZSxmdW5jdGlvbihhLGIpe2E/KHRoaXMuYXV0b0Nsb3NlJiZ0aGlzLmRlc3Ryb3kmJnRoaXMuZGVzdHJveSgpLHRoaXMuZW1pdCgiZXJyb3IiLGEpKToodGhpcy5mZD1iLHRoaXMuZW1pdCgib3BlbiIsYikpO30uYmluZCh0aGlzKSk7fTtSLnByb3RvdHlwZS5fd3JpdGU9ZnVuY3Rpb24oYSxiLGMpe2lmKCEoYSBpbnN0YW5jZW9mIEYuQnVmZmVyKSlyZXR1cm4gdGhpcy5lbWl0KCJlcnJvciIsRXJyb3IoIkludmFsaWQgZGF0YSIpKTtpZigibnVtYmVyIiE9PXR5cGVvZiB0aGlzLmZkKXJldHVybiB0aGlzLm9uY2UoIm9wZW4iLGZ1bmN0aW9uKCl7dGhpcy5fd3JpdGUoYSxiLGMpO30pO3ZhciBkPXRoaXM7dGhpcy5fdm9sLndyaXRlKHRoaXMuZmQsYSwwLGEubGVuZ3RoLHRoaXMucG9zLGZ1bmN0aW9uKGEsYil7aWYoYSlyZXR1cm4gZC5hdXRvQ2xvc2UmJmQuZGVzdHJveSYmCiAgZC5kZXN0cm95KCksYyhhKTtkLmJ5dGVzV3JpdHRlbis9YjtjKCk7fSk7dm9pZCAwIT09dGhpcy5wb3MmJih0aGlzLnBvcys9YS5sZW5ndGgpO307Ui5wcm90b3R5cGUuX3dyaXRldj1mdW5jdGlvbihhLGIpe2lmKCJudW1iZXIiIT09dHlwZW9mIHRoaXMuZmQpcmV0dXJuIHRoaXMub25jZSgib3BlbiIsZnVuY3Rpb24oKXt0aGlzLl93cml0ZXYoYSxiKTt9KTtmb3IodmFyIGM9dGhpcyxkPWEubGVuZ3RoLGU9QXJyYXkoZCksZj0wLGc9MDtnPGQ7ZysrKXt2YXIgaD1hW2ddLmNodW5rO2VbZ109aDtmKz1oLmxlbmd0aDt9ZD1GLkJ1ZmZlci5jb25jYXQoZSk7dGhpcy5fdm9sLndyaXRlKHRoaXMuZmQsZCwwLGQubGVuZ3RoLHRoaXMucG9zLGZ1bmN0aW9uKGEsZCl7aWYoYSlyZXR1cm4gYy5kZXN0cm95JiZjLmRlc3Ryb3koKSxiKGEpO2MuYnl0ZXNXcml0dGVuKz1kO2IoKTt9KTt2b2lkIDAhPT10aGlzLnBvcyYmKHRoaXMucG9zKz1mKTt9O1IucHJvdG90eXBlLl9kZXN0cm95PVQucHJvdG90eXBlLl9kZXN0cm95OwogIFIucHJvdG90eXBlLmNsb3NlPVQucHJvdG90eXBlLmNsb3NlO1IucHJvdG90eXBlLmRlc3Ryb3lTb29uPVIucHJvdG90eXBlLmVuZDt2YXIgSWQ9ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihiKXt2YXIgYz1hLmNhbGwodGhpcyl8fHRoaXM7Yy5fZmlsZW5hbWU9IiI7Yy5fZmlsZW5hbWVFbmNvZGVkPSIiO2MuX3JlY3Vyc2l2ZT0hMTtjLl9lbmNvZGluZz1LJDEuRU5DT0RJTkdfVVRGODtjLl9vbk5vZGVDaGFuZ2U9ZnVuY3Rpb24oKXtjLl9lbWl0KCJjaGFuZ2UiKTt9O2MuX29uUGFyZW50Q2hpbGQ9ZnVuY3Rpb24oYSl7YS5nZXROYW1lKCk9PT1jLl9nZXROYW1lKCkmJmMuX2VtaXQoInJlbmFtZSIpO307Yy5fZW1pdD1mdW5jdGlvbihhKXtjLmVtaXQoImNoYW5nZSIsYSxjLl9maWxlbmFtZUVuY29kZWQpO307Yy5fcGVyc2lzdD1mdW5jdGlvbigpe2MuX3RpbWVyPXNldFRpbWVvdXQoYy5fcGVyc2lzdCwxRTYpO307Yy5fdm9sPWI7cmV0dXJuIGN9SmEoYixhKTtiLnByb3RvdHlwZS5fZ2V0TmFtZT0KICBmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdGVwc1t0aGlzLl9zdGVwcy5sZW5ndGgtMV19O2IucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKGEsYixjLGQpe3ZvaWQgMD09PWImJihiPSEwKTt2b2lkIDA9PT1jJiYoYz0hMSk7dm9pZCAwPT09ZCYmKGQ9SyQxLkVOQ09ESU5HX1VURjgpO3RoaXMuX2ZpbGVuYW1lPW0oYSk7dGhpcy5fc3RlcHM9dih0aGlzLl9maWxlbmFtZSk7dGhpcy5fZmlsZW5hbWVFbmNvZGVkPUskMS5zdHJUb0VuY29kaW5nKHRoaXMuX2ZpbGVuYW1lKTt0aGlzLl9yZWN1cnNpdmU9Yzt0aGlzLl9lbmNvZGluZz1kO3RyeXt0aGlzLl9saW5rPXRoaXMuX3ZvbC5nZXRMaW5rT3JUaHJvdyh0aGlzLl9maWxlbmFtZSwiRlNXYXRjaGVyIik7fWNhdGNoKFdiKXt0aHJvdyBiPUVycm9yKCJ3YXRjaCAiK3RoaXMuX2ZpbGVuYW1lKyIgIitXYi5jb2RlKSxiLmNvZGU9V2IuY29kZSxiLmVycm5vPVdiLmNvZGUsYjt9dGhpcy5fbGluay5nZXROb2RlKCkub24oImNoYW5nZSIsdGhpcy5fb25Ob2RlQ2hhbmdlKTsKICB0aGlzLl9saW5rLm9uKCJjaGlsZDphZGQiLHRoaXMuX29uTm9kZUNoYW5nZSk7dGhpcy5fbGluay5vbigiY2hpbGQ6ZGVsZXRlIix0aGlzLl9vbk5vZGVDaGFuZ2UpO2lmKGE9dGhpcy5fbGluay5wYXJlbnQpYS5zZXRNYXhMaXN0ZW5lcnMoYS5nZXRNYXhMaXN0ZW5lcnMoKSsxKSxhLm9uKCJjaGlsZDpkZWxldGUiLHRoaXMuX29uUGFyZW50Q2hpbGQpO2ImJnRoaXMuX3BlcnNpc3QoKTt9O2IucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVyKTt0aGlzLl9saW5rLmdldE5vZGUoKS5yZW1vdmVMaXN0ZW5lcigiY2hhbmdlIix0aGlzLl9vbk5vZGVDaGFuZ2UpO3ZhciBhPXRoaXMuX2xpbmsucGFyZW50O2EmJmEucmVtb3ZlTGlzdGVuZXIoImNoaWxkOmRlbGV0ZSIsdGhpcy5fb25QYXJlbnRDaGlsZCk7fTtyZXR1cm4gYn0oTy5FdmVudEVtaXR0ZXIpO2IuRlNXYXRjaGVyPUlkO30pO3QoWGUpOwogIHZhciBZZT1YZS5wYXRoVG9GaWxlbmFtZSxaZT1YZS5maWxlbmFtZVRvU3RlcHMsJGU9WGUuVm9sdW1lLGFmPXUoZnVuY3Rpb24oYSxiKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoYiwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7Yi5mc1Byb3BzPSJjb25zdGFudHMgRl9PSyBSX09LIFdfT0sgWF9PSyBTdGF0cyIuc3BsaXQoIiAiKTtiLmZzU3luY01ldGhvZHM9InJlbmFtZVN5bmMgZnRydW5jYXRlU3luYyB0cnVuY2F0ZVN5bmMgY2hvd25TeW5jIGZjaG93blN5bmMgbGNob3duU3luYyBjaG1vZFN5bmMgZmNobW9kU3luYyBsY2htb2RTeW5jIHN0YXRTeW5jIGxzdGF0U3luYyBmc3RhdFN5bmMgbGlua1N5bmMgc3ltbGlua1N5bmMgcmVhZGxpbmtTeW5jIHJlYWxwYXRoU3luYyB1bmxpbmtTeW5jIHJtZGlyU3luYyBta2RpclN5bmMgbWtkaXJwU3luYyByZWFkZGlyU3luYyBjbG9zZVN5bmMgb3BlblN5bmMgdXRpbWVzU3luYyBmdXRpbWVzU3luYyBmc3luY1N5bmMgd3JpdGVTeW5jIHJlYWRTeW5jIHJlYWRGaWxlU3luYyB3cml0ZUZpbGVTeW5jIGFwcGVuZEZpbGVTeW5jIGV4aXN0c1N5bmMgYWNjZXNzU3luYyBmZGF0YXN5bmNTeW5jIG1rZHRlbXBTeW5jIGNvcHlGaWxlU3luYyBjcmVhdGVSZWFkU3RyZWFtIGNyZWF0ZVdyaXRlU3RyZWFtIi5zcGxpdCgiICIpOwogIGIuZnNBc3luY01ldGhvZHM9InJlbmFtZSBmdHJ1bmNhdGUgdHJ1bmNhdGUgY2hvd24gZmNob3duIGxjaG93biBjaG1vZCBmY2htb2QgbGNobW9kIHN0YXQgbHN0YXQgZnN0YXQgbGluayBzeW1saW5rIHJlYWRsaW5rIHJlYWxwYXRoIHVubGluayBybWRpciBta2RpciBta2RpcnAgcmVhZGRpciBjbG9zZSBvcGVuIHV0aW1lcyBmdXRpbWVzIGZzeW5jIHdyaXRlIHJlYWQgcmVhZEZpbGUgd3JpdGVGaWxlIGFwcGVuZEZpbGUgZXhpc3RzIGFjY2VzcyBmZGF0YXN5bmMgbWtkdGVtcCBjb3B5RmlsZSB3YXRjaEZpbGUgdW53YXRjaEZpbGUgd2F0Y2giLnNwbGl0KCIgIik7fSk7dChhZik7CiAgdmFyIGJmPXUoZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGEpe2Zvcih2YXIgYj17Rl9PSzpnLFJfT0s6aCxXX09LOmssWF9PSzpwLGNvbnN0YW50czp3LmNvbnN0YW50cyxTdGF0czprYS5kZWZhdWx0LERpcmVudDpRYy5kZWZhdWx0fSxjPTAsZD1lO2M8ZC5sZW5ndGg7YysrKXt2YXIgbj1kW2NdOyJmdW5jdGlvbiI9PT10eXBlb2YgYVtuXSYmKGJbbl09YVtuXS5iaW5kKGEpKTt9Yz0wO2ZvcihkPWY7YzxkLmxlbmd0aDtjKyspbj1kW2NdLCJmdW5jdGlvbiI9PT10eXBlb2YgYVtuXSYmKGJbbl09YVtuXS5iaW5kKGEpKTtiLlN0YXRXYXRjaGVyPWEuU3RhdFdhdGNoZXI7Yi5GU1dhdGNoZXI9YS5GU1dhdGNoZXI7Yi5Xcml0ZVN0cmVhbT1hLldyaXRlU3RyZWFtO2IuUmVhZFN0cmVhbT1hLlJlYWRTdHJlYW07Yi5wcm9taXNlcz1hLnByb21pc2VzO2IuX3RvVW5peFRpbWVzdGFtcD1YZS50b1VuaXhUaW1lc3RhbXA7cmV0dXJuIGJ9dmFyIGQ9bCYmbC5fX2Fzc2lnbnx8ZnVuY3Rpb24oKXtkPQogIE9iamVjdC5hc3NpZ258fGZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjPTEsZD1hcmd1bWVudHMubGVuZ3RoO2M8ZDtjKyspe2I9YXJndW1lbnRzW2NdO2Zvcih2YXIgZSBpbiBiKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLGUpJiYoYVtlXT1iW2VdKTt9cmV0dXJuIGF9O3JldHVybiBkLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KGIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBlPWFmLmZzU3luY01ldGhvZHMsZj1hZi5mc0FzeW5jTWV0aG9kcyxnPXcuY29uc3RhbnRzLkZfT0ssaD13LmNvbnN0YW50cy5SX09LLGs9dy5jb25zdGFudHMuV19PSyxwPXcuY29uc3RhbnRzLlhfT0s7Yi5Wb2x1bWU9WGUuVm9sdW1lO2Iudm9sPW5ldyBYZS5Wb2x1bWU7Yi5jcmVhdGVGc0Zyb21Wb2x1bWU9YztiLmZzPWMoYi52b2wpO2EuZXhwb3J0cz1kKGQoe30sYS5leHBvcnRzKSxiLmZzKTthLmV4cG9ydHMuc2VtYW50aWM9ITA7fSk7dChiZik7CiAgdmFyIHJmJDE9YmYuY3JlYXRlRnNGcm9tVm9sdW1lO2dkLnByb3RvdHlwZS5lbWl0PWZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjLGQ9W10sZT0xO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspZFtlLTFdPWFyZ3VtZW50c1tlXTtlPXRoaXMubGlzdGVuZXJzKGEpO3RyeXtmb3IodmFyIGY9ZGEoZSksZz1mLm5leHQoKTshZy5kb25lO2c9Zi5uZXh0KCkpe3ZhciBoPWcudmFsdWU7dHJ5e2guYXBwbHkodm9pZCAwLGlhKGQpKTt9Y2F0Y2goayl7Y29uc29sZS5lcnJvcihrKTt9fX1jYXRjaChrKXtiPXtlcnJvcjprfTt9ZmluYWxseXt0cnl7ZyYmIWcuZG9uZSYmKGM9Zi5yZXR1cm4pJiZjLmNhbGwoZik7fWZpbmFsbHl7aWYoYil0aHJvdyBiLmVycm9yO319cmV0dXJuIDA8ZS5sZW5ndGh9OwogIHZhciBzZj1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXt0aGlzLnZvbHVtZT1uZXcgJGU7dGhpcy5mcz1yZiQxKHRoaXMudm9sdW1lKTt0aGlzLmZyb21KU09OKHsiL2Rldi9zdGRpbiI6IiIsIi9kZXYvc3Rkb3V0IjoiIiwiL2Rldi9zdGRlcnIiOiIifSk7fWEucHJvdG90eXBlLl90b0pTT049ZnVuY3Rpb24oYSxjLGQpe3ZvaWQgMD09PWMmJihjPXt9KTt2YXIgYj0hMCxmO2ZvcihmIGluIGEuY2hpbGRyZW4pe2I9ITE7dmFyIGc9YS5nZXRDaGlsZChmKTtpZihnKXt2YXIgaD1nLmdldE5vZGUoKTtoJiZoLmlzRmlsZSgpPyhnPWcuZ2V0UGF0aCgpLGQmJihnPVljKGQsZykpLGNbZ109aC5nZXRCdWZmZXIoKSk6aCYmaC5pc0RpcmVjdG9yeSgpJiZ0aGlzLl90b0pTT04oZyxjLGQpO319YT1hLmdldFBhdGgoKTtkJiYoYT1ZYyhkLGEpKTthJiZiJiYoY1thXT1udWxsKTtyZXR1cm4gY307YS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKGEsYyxkKXt2YXIgYixmO3ZvaWQgMD09PWMmJihjPXt9KTsKICB2b2lkIDA9PT1kJiYoZD0hMSk7dmFyIGc9W107aWYoYSl7YSBpbnN0YW5jZW9mIEFycmF5fHwoYT1bYV0pO3RyeXtmb3IodmFyIGg9ZGEoYSksaz1oLm5leHQoKTshay5kb25lO2s9aC5uZXh0KCkpe3ZhciBwPVllKGsudmFsdWUpLG49dGhpcy52b2x1bWUuZ2V0UmVzb2x2ZWRMaW5rKHApO24mJmcucHVzaChuKTt9fWNhdGNoKHhhKXt2YXIgcT17ZXJyb3I6eGF9O31maW5hbGx5e3RyeXtrJiYhay5kb25lJiYoYj1oLnJldHVybikmJmIuY2FsbChoKTt9ZmluYWxseXtpZihxKXRocm93IHEuZXJyb3I7fX19ZWxzZSBnLnB1c2godGhpcy52b2x1bWUucm9vdCk7aWYoIWcubGVuZ3RoKXJldHVybiBjO3RyeXtmb3IodmFyIEI9ZGEoZyksbT1CLm5leHQoKTshbS5kb25lO209Qi5uZXh0KCkpbj1tLnZhbHVlLHRoaXMuX3RvSlNPTihuLGMsZD9uLmdldFBhdGgoKToiIik7fWNhdGNoKHhhKXt2YXIgdj17ZXJyb3I6eGF9O31maW5hbGx5e3RyeXttJiYhbS5kb25lJiYoZj1CLnJldHVybikmJmYuY2FsbChCKTt9ZmluYWxseXtpZih2KXRocm93IHYuZXJyb3I7CiAgfX1yZXR1cm4gY307YS5wcm90b3R5cGUuZnJvbUpTT05GaXhlZD1mdW5jdGlvbihhLGMpe2Zvcih2YXIgYiBpbiBjKXt2YXIgZT1jW2JdO2lmKGU/bnVsbCE9PU9iamVjdC5nZXRQcm90b3R5cGVPZihlKTpudWxsIT09ZSl7dmFyIGY9WmUoYik7MTxmLmxlbmd0aCYmKGY9Ii8iK2Yuc2xpY2UoMCxmLmxlbmd0aC0xKS5qb2luKCIvIiksYS5ta2RpcnBCYXNlKGYsNTExKSk7YS53cml0ZUZpbGVTeW5jKGIsZXx8IiIpO31lbHNlIGEubWtkaXJwQmFzZShiLDUxMSk7fX07YS5wcm90b3R5cGUuZnJvbUpTT049ZnVuY3Rpb24oYSl7dGhpcy52b2x1bWU9bmV3ICRlO3RoaXMuZnJvbUpTT05GaXhlZCh0aGlzLnZvbHVtZSxhKTt0aGlzLmZzPXJmJDEodGhpcy52b2x1bWUpO3RoaXMudm9sdW1lLnJlbGVhc2VkRmRzPVswLDEsMl07YT10aGlzLnZvbHVtZS5vcGVuU3luYygiL2Rldi9zdGRlcnIiLCJ3Iik7dmFyIGI9dGhpcy52b2x1bWUub3BlblN5bmMoIi9kZXYvc3Rkb3V0IiwidyIpLGQ9dGhpcy52b2x1bWUub3BlblN5bmMoIi9kZXYvc3RkaW4iLAogICJyIik7aWYoMiE9PWEpdGhyb3cgRXJyb3IoImludmFsaWQgaGFuZGxlIGZvciBzdGRlcnI6ICIrYSk7aWYoMSE9PWIpdGhyb3cgRXJyb3IoImludmFsaWQgaGFuZGxlIGZvciBzdGRvdXQ6ICIrYik7aWYoMCE9PWQpdGhyb3cgRXJyb3IoImludmFsaWQgaGFuZGxlIGZvciBzdGRpbjogIitkKTt9O2EucHJvdG90eXBlLmdldFN0ZE91dD1mdW5jdGlvbigpe3JldHVybiBiYSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgYSxjPXRoaXM7cmV0dXJuIGNhKHRoaXMsZnVuY3Rpb24oKXthPW5ldyBQcm9taXNlKGZ1bmN0aW9uKGEpe2EoYy5mcy5yZWFkRmlsZVN5bmMoIi9kZXYvc3Rkb3V0IiwidXRmOCIpKTt9KTtyZXR1cm4gWzIsYV19KX0pfTtyZXR1cm4gYX0oKTt2YXIgV2FzbUZzPXNmOwoKICAvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXIKICAvLyBiYXNlZCBvZmYgaHR0cHM6Ly9naXRodWIuY29tL2RlZnVuY3R6b21iaWUvbm9kZS1wcm9jZXNzL2Jsb2IvbWFzdGVyL2Jyb3dzZXIuanMKCiAgZnVuY3Rpb24gZGVmYXVsdFNldFRpbW91dCgpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7CiAgfQogIGZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQgKCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpOwogIH0KICB2YXIgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7CiAgdmFyIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7CiAgaWYgKHR5cGVvZiBnbG9iYWwkMS5zZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7CiAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0OwogIH0KICBpZiAodHlwZW9mIGdsb2JhbCQxLmNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7CiAgfQoKICBmdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikgewogICAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkgewogICAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zCiAgICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApOwogICAgICB9CiAgICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkCiAgICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkgewogICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7CiAgICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApOwogICAgICB9CiAgICAgIHRyeSB7CiAgICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzCiAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApOwogICAgICB9IGNhdGNoKGUpewogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHkKICAgICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7CiAgICAgICAgICB9IGNhdGNoKGUpewogICAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yCiAgICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApOwogICAgICAgICAgfQogICAgICB9CgoKICB9CiAgZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikgewogICAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHsKICAgICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9ucwogICAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpOwogICAgICB9CiAgICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWQKICAgICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7CiAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7CiAgICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7CiAgICAgIH0KICAgICAgdHJ5IHsKICAgICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3MKICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTsKICAgICAgfSBjYXRjaCAoZSl7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHkKICAgICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTsKICAgICAgICAgIH0gY2F0Y2ggKGUpewogICAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLgogICAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXQKICAgICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTsKICAgICAgICAgIH0KICAgICAgfQoKCgogIH0KICB2YXIgcXVldWUgPSBbXTsKICB2YXIgZHJhaW5pbmcgPSBmYWxzZTsKICB2YXIgY3VycmVudFF1ZXVlOwogIHZhciBxdWV1ZUluZGV4ID0gLTE7CgogIGZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHsKICAgICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgZHJhaW5pbmcgPSBmYWxzZTsKICAgICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHsKICAgICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgICBxdWV1ZUluZGV4ID0gLTE7CiAgICAgIH0KICAgICAgaWYgKHF1ZXVlLmxlbmd0aCkgewogICAgICAgICAgZHJhaW5RdWV1ZSgpOwogICAgICB9CiAgfQoKICBmdW5jdGlvbiBkcmFpblF1ZXVlKCkgewogICAgICBpZiAoZHJhaW5pbmcpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTsKICAgICAgZHJhaW5pbmcgPSB0cnVlOwoKICAgICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDsKICAgICAgd2hpbGUobGVuKSB7CiAgICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTsKICAgICAgICAgIHF1ZXVlID0gW107CiAgICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7CiAgICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkgewogICAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgcXVldWVJbmRleCA9IC0xOwogICAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoOwogICAgICB9CiAgICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7CiAgICAgIGRyYWluaW5nID0gZmFsc2U7CiAgICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTsKICB9CiAgZnVuY3Rpb24gbmV4dFRpY2skMShmdW4pIHsKICAgICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpOwogICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHsKICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07CiAgICAgICAgICB9CiAgICAgIH0KICAgICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTsKICAgICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHsKICAgICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7CiAgICAgIH0KICB9CiAgLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0cwogIGZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkgewogICAgICB0aGlzLmZ1biA9IGZ1bjsKICAgICAgdGhpcy5hcnJheSA9IGFycmF5OwogIH0KICBJdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7CiAgICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpOwogIH07CiAgdmFyIHRpdGxlID0gJ2Jyb3dzZXInOwogIHZhciBwbGF0Zm9ybSA9ICdicm93c2VyJzsKICB2YXIgYnJvd3NlciQ0ID0gdHJ1ZTsKICB2YXIgZW52ID0ge307CiAgdmFyIGFyZ3YgPSBbXTsKICB2YXIgdmVyc2lvbiQxID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzCiAgdmFyIHZlcnNpb25zID0ge307CiAgdmFyIHJlbGVhc2UgPSB7fTsKICB2YXIgY29uZmlnID0ge307CgogIGZ1bmN0aW9uIG5vb3AkMigpIHt9CgogIHZhciBvbiA9IG5vb3AkMjsKICB2YXIgYWRkTGlzdGVuZXIgPSBub29wJDI7CiAgdmFyIG9uY2UkMyA9IG5vb3AkMjsKICB2YXIgb2ZmID0gbm9vcCQyOwogIHZhciByZW1vdmVMaXN0ZW5lciA9IG5vb3AkMjsKICB2YXIgcmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcCQyOwogIHZhciBlbWl0ID0gbm9vcCQyOwoKICBmdW5jdGlvbiBiaW5kaW5nKG5hbWUpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpOwogIH0KCiAgZnVuY3Rpb24gY3dkICgpIHsgcmV0dXJuICcvJyB9CiAgZnVuY3Rpb24gY2hkaXIgKGRpcikgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpOwogIH1mdW5jdGlvbiB1bWFzaygpIHsgcmV0dXJuIDA7IH0KCiAgLy8gZnJvbSBodHRwczovL2dpdGh1Yi5jb20va3VtYXZpcy9icm93c2VyLXByb2Nlc3MtaHJ0aW1lL2Jsb2IvbWFzdGVyL2luZGV4LmpzCiAgdmFyIHBlcmZvcm1hbmNlJDEgPSBnbG9iYWwkMS5wZXJmb3JtYW5jZSB8fCB7fTsKICB2YXIgcGVyZm9ybWFuY2VOb3cgPQogICAgcGVyZm9ybWFuY2UkMS5ub3cgICAgICAgIHx8CiAgICBwZXJmb3JtYW5jZSQxLm1vek5vdyAgICAgfHwKICAgIHBlcmZvcm1hbmNlJDEubXNOb3cgICAgICB8fAogICAgcGVyZm9ybWFuY2UkMS5vTm93ICAgICAgIHx8CiAgICBwZXJmb3JtYW5jZSQxLndlYmtpdE5vdyAgfHwKICAgIGZ1bmN0aW9uKCl7IHJldHVybiAobmV3IERhdGUoKSkuZ2V0VGltZSgpIH07CgogIC8vIGdlbmVyYXRlIHRpbWVzdGFtcCBvciBkZWx0YQogIC8vIHNlZSBodHRwOi8vbm9kZWpzLm9yZy9hcGkvcHJvY2Vzcy5odG1sI3Byb2Nlc3NfcHJvY2Vzc19ocnRpbWUKICBmdW5jdGlvbiBocnRpbWUkMShwcmV2aW91c1RpbWVzdGFtcCl7CiAgICB2YXIgY2xvY2t0aW1lID0gcGVyZm9ybWFuY2VOb3cuY2FsbChwZXJmb3JtYW5jZSQxKSoxZS0zOwogICAgdmFyIHNlY29uZHMgPSBNYXRoLmZsb29yKGNsb2NrdGltZSk7CiAgICB2YXIgbmFub3NlY29uZHMgPSBNYXRoLmZsb29yKChjbG9ja3RpbWUlMSkqMWU5KTsKICAgIGlmIChwcmV2aW91c1RpbWVzdGFtcCkgewogICAgICBzZWNvbmRzID0gc2Vjb25kcyAtIHByZXZpb3VzVGltZXN0YW1wWzBdOwogICAgICBuYW5vc2Vjb25kcyA9IG5hbm9zZWNvbmRzIC0gcHJldmlvdXNUaW1lc3RhbXBbMV07CiAgICAgIGlmIChuYW5vc2Vjb25kczwwKSB7CiAgICAgICAgc2Vjb25kcy0tOwogICAgICAgIG5hbm9zZWNvbmRzICs9IDFlOTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIFtzZWNvbmRzLG5hbm9zZWNvbmRzXQogIH0KCiAgdmFyIHN0YXJ0VGltZSA9IG5ldyBEYXRlKCk7CiAgZnVuY3Rpb24gdXB0aW1lKCkgewogICAgdmFyIGN1cnJlbnRUaW1lID0gbmV3IERhdGUoKTsKICAgIHZhciBkaWYgPSBjdXJyZW50VGltZSAtIHN0YXJ0VGltZTsKICAgIHJldHVybiBkaWYgLyAxMDAwOwogIH0KCiAgdmFyIHByb2Nlc3MgPSB7CiAgICBuZXh0VGljazogbmV4dFRpY2skMSwKICAgIHRpdGxlOiB0aXRsZSwKICAgIGJyb3dzZXI6IGJyb3dzZXIkNCwKICAgIGVudjogZW52LAogICAgYXJndjogYXJndiwKICAgIHZlcnNpb246IHZlcnNpb24kMSwKICAgIHZlcnNpb25zOiB2ZXJzaW9ucywKICAgIG9uOiBvbiwKICAgIGFkZExpc3RlbmVyOiBhZGRMaXN0ZW5lciwKICAgIG9uY2U6IG9uY2UkMywKICAgIG9mZjogb2ZmLAogICAgcmVtb3ZlTGlzdGVuZXI6IHJlbW92ZUxpc3RlbmVyLAogICAgcmVtb3ZlQWxsTGlzdGVuZXJzOiByZW1vdmVBbGxMaXN0ZW5lcnMsCiAgICBlbWl0OiBlbWl0LAogICAgYmluZGluZzogYmluZGluZywKICAgIGN3ZDogY3dkLAogICAgY2hkaXI6IGNoZGlyLAogICAgdW1hc2s6IHVtYXNrLAogICAgaHJ0aW1lOiBocnRpbWUkMSwKICAgIHBsYXRmb3JtOiBwbGF0Zm9ybSwKICAgIHJlbGVhc2U6IHJlbGVhc2UsCiAgICBjb25maWc6IGNvbmZpZywKICAgIHVwdGltZTogdXB0aW1lCiAgfTsKCiAgdmFyIGxvb2t1cCQxID0gW107CiAgdmFyIHJldkxvb2t1cCQxID0gW107CiAgdmFyIEFyciQxID0gdHlwZW9mIFVpbnQ4QXJyYXkgIT09ICd1bmRlZmluZWQnID8gVWludDhBcnJheSA6IEFycmF5OwogIHZhciBpbml0ZWQgPSBmYWxzZTsKICBmdW5jdGlvbiBpbml0ICgpIHsKICAgIGluaXRlZCA9IHRydWU7CiAgICB2YXIgY29kZSA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvJzsKICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2RlLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7CiAgICAgIGxvb2t1cCQxW2ldID0gY29kZVtpXTsKICAgICAgcmV2TG9va3VwJDFbY29kZS5jaGFyQ29kZUF0KGkpXSA9IGk7CiAgICB9CgogICAgcmV2TG9va3VwJDFbJy0nLmNoYXJDb2RlQXQoMCldID0gNjI7CiAgICByZXZMb29rdXAkMVsnXycuY2hhckNvZGVBdCgwKV0gPSA2MzsKICB9CgogIGZ1bmN0aW9uIHRvQnl0ZUFycmF5JDEgKGI2NCkgewogICAgaWYgKCFpbml0ZWQpIHsKICAgICAgaW5pdCgpOwogICAgfQogICAgdmFyIGksIGosIGwsIHRtcCwgcGxhY2VIb2xkZXJzLCBhcnI7CiAgICB2YXIgbGVuID0gYjY0Lmxlbmd0aDsKCiAgICBpZiAobGVuICUgNCA+IDApIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHN0cmluZy4gTGVuZ3RoIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA0JykKICAgIH0KCiAgICAvLyB0aGUgbnVtYmVyIG9mIGVxdWFsIHNpZ25zIChwbGFjZSBob2xkZXJzKQogICAgLy8gaWYgdGhlcmUgYXJlIHR3byBwbGFjZWhvbGRlcnMsIHRoYW4gdGhlIHR3byBjaGFyYWN0ZXJzIGJlZm9yZSBpdAogICAgLy8gcmVwcmVzZW50IG9uZSBieXRlCiAgICAvLyBpZiB0aGVyZSBpcyBvbmx5IG9uZSwgdGhlbiB0aGUgdGhyZWUgY2hhcmFjdGVycyBiZWZvcmUgaXQgcmVwcmVzZW50IDIgYnl0ZXMKICAgIC8vIHRoaXMgaXMganVzdCBhIGNoZWFwIGhhY2sgdG8gbm90IGRvIGluZGV4T2YgdHdpY2UKICAgIHBsYWNlSG9sZGVycyA9IGI2NFtsZW4gLSAyXSA9PT0gJz0nID8gMiA6IGI2NFtsZW4gLSAxXSA9PT0gJz0nID8gMSA6IDA7CgogICAgLy8gYmFzZTY0IGlzIDQvMyArIHVwIHRvIHR3byBjaGFyYWN0ZXJzIG9mIHRoZSBvcmlnaW5hbCBkYXRhCiAgICBhcnIgPSBuZXcgQXJyJDEobGVuICogMyAvIDQgLSBwbGFjZUhvbGRlcnMpOwoKICAgIC8vIGlmIHRoZXJlIGFyZSBwbGFjZWhvbGRlcnMsIG9ubHkgZ2V0IHVwIHRvIHRoZSBsYXN0IGNvbXBsZXRlIDQgY2hhcnMKICAgIGwgPSBwbGFjZUhvbGRlcnMgPiAwID8gbGVuIC0gNCA6IGxlbjsKCiAgICB2YXIgTCA9IDA7CgogICAgZm9yIChpID0gMCwgaiA9IDA7IGkgPCBsOyBpICs9IDQsIGogKz0gMykgewogICAgICB0bXAgPSAocmV2TG9va3VwJDFbYjY0LmNoYXJDb2RlQXQoaSldIDw8IDE4KSB8IChyZXZMb29rdXAkMVtiNjQuY2hhckNvZGVBdChpICsgMSldIDw8IDEyKSB8IChyZXZMb29rdXAkMVtiNjQuY2hhckNvZGVBdChpICsgMildIDw8IDYpIHwgcmV2TG9va3VwJDFbYjY0LmNoYXJDb2RlQXQoaSArIDMpXTsKICAgICAgYXJyW0wrK10gPSAodG1wID4+IDE2KSAmIDB4RkY7CiAgICAgIGFycltMKytdID0gKHRtcCA+PiA4KSAmIDB4RkY7CiAgICAgIGFycltMKytdID0gdG1wICYgMHhGRjsKICAgIH0KCiAgICBpZiAocGxhY2VIb2xkZXJzID09PSAyKSB7CiAgICAgIHRtcCA9IChyZXZMb29rdXAkMVtiNjQuY2hhckNvZGVBdChpKV0gPDwgMikgfCAocmV2TG9va3VwJDFbYjY0LmNoYXJDb2RlQXQoaSArIDEpXSA+PiA0KTsKICAgICAgYXJyW0wrK10gPSB0bXAgJiAweEZGOwogICAgfSBlbHNlIGlmIChwbGFjZUhvbGRlcnMgPT09IDEpIHsKICAgICAgdG1wID0gKHJldkxvb2t1cCQxW2I2NC5jaGFyQ29kZUF0KGkpXSA8PCAxMCkgfCAocmV2TG9va3VwJDFbYjY0LmNoYXJDb2RlQXQoaSArIDEpXSA8PCA0KSB8IChyZXZMb29rdXAkMVtiNjQuY2hhckNvZGVBdChpICsgMildID4+IDIpOwogICAgICBhcnJbTCsrXSA9ICh0bXAgPj4gOCkgJiAweEZGOwogICAgICBhcnJbTCsrXSA9IHRtcCAmIDB4RkY7CiAgICB9CgogICAgcmV0dXJuIGFycgogIH0KCiAgZnVuY3Rpb24gdHJpcGxldFRvQmFzZTY0JDEgKG51bSkgewogICAgcmV0dXJuIGxvb2t1cCQxW251bSA+PiAxOCAmIDB4M0ZdICsgbG9va3VwJDFbbnVtID4+IDEyICYgMHgzRl0gKyBsb29rdXAkMVtudW0gPj4gNiAmIDB4M0ZdICsgbG9va3VwJDFbbnVtICYgMHgzRl0KICB9CgogIGZ1bmN0aW9uIGVuY29kZUNodW5rJDEgKHVpbnQ4LCBzdGFydCwgZW5kKSB7CiAgICB2YXIgdG1wOwogICAgdmFyIG91dHB1dCA9IFtdOwogICAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpICs9IDMpIHsKICAgICAgdG1wID0gKHVpbnQ4W2ldIDw8IDE2KSArICh1aW50OFtpICsgMV0gPDwgOCkgKyAodWludDhbaSArIDJdKTsKICAgICAgb3V0cHV0LnB1c2godHJpcGxldFRvQmFzZTY0JDEodG1wKSk7CiAgICB9CiAgICByZXR1cm4gb3V0cHV0LmpvaW4oJycpCiAgfQoKICBmdW5jdGlvbiBmcm9tQnl0ZUFycmF5JDEgKHVpbnQ4KSB7CiAgICBpZiAoIWluaXRlZCkgewogICAgICBpbml0KCk7CiAgICB9CiAgICB2YXIgdG1wOwogICAgdmFyIGxlbiA9IHVpbnQ4Lmxlbmd0aDsKICAgIHZhciBleHRyYUJ5dGVzID0gbGVuICUgMzsgLy8gaWYgd2UgaGF2ZSAxIGJ5dGUgbGVmdCwgcGFkIDIgYnl0ZXMKICAgIHZhciBvdXRwdXQgPSAnJzsKICAgIHZhciBwYXJ0cyA9IFtdOwogICAgdmFyIG1heENodW5rTGVuZ3RoID0gMTYzODM7IC8vIG11c3QgYmUgbXVsdGlwbGUgb2YgMwoKICAgIC8vIGdvIHRocm91Z2ggdGhlIGFycmF5IGV2ZXJ5IHRocmVlIGJ5dGVzLCB3ZSdsbCBkZWFsIHdpdGggdHJhaWxpbmcgc3R1ZmYgbGF0ZXIKICAgIGZvciAodmFyIGkgPSAwLCBsZW4yID0gbGVuIC0gZXh0cmFCeXRlczsgaSA8IGxlbjI7IGkgKz0gbWF4Q2h1bmtMZW5ndGgpIHsKICAgICAgcGFydHMucHVzaChlbmNvZGVDaHVuayQxKHVpbnQ4LCBpLCAoaSArIG1heENodW5rTGVuZ3RoKSA+IGxlbjIgPyBsZW4yIDogKGkgKyBtYXhDaHVua0xlbmd0aCkpKTsKICAgIH0KCiAgICAvLyBwYWQgdGhlIGVuZCB3aXRoIHplcm9zLCBidXQgbWFrZSBzdXJlIHRvIG5vdCBmb3JnZXQgdGhlIGV4dHJhIGJ5dGVzCiAgICBpZiAoZXh0cmFCeXRlcyA9PT0gMSkgewogICAgICB0bXAgPSB1aW50OFtsZW4gLSAxXTsKICAgICAgb3V0cHV0ICs9IGxvb2t1cCQxW3RtcCA+PiAyXTsKICAgICAgb3V0cHV0ICs9IGxvb2t1cCQxWyh0bXAgPDwgNCkgJiAweDNGXTsKICAgICAgb3V0cHV0ICs9ICc9PSc7CiAgICB9IGVsc2UgaWYgKGV4dHJhQnl0ZXMgPT09IDIpIHsKICAgICAgdG1wID0gKHVpbnQ4W2xlbiAtIDJdIDw8IDgpICsgKHVpbnQ4W2xlbiAtIDFdKTsKICAgICAgb3V0cHV0ICs9IGxvb2t1cCQxW3RtcCA+PiAxMF07CiAgICAgIG91dHB1dCArPSBsb29rdXAkMVsodG1wID4+IDQpICYgMHgzRl07CiAgICAgIG91dHB1dCArPSBsb29rdXAkMVsodG1wIDw8IDIpICYgMHgzRl07CiAgICAgIG91dHB1dCArPSAnPSc7CiAgICB9CgogICAgcGFydHMucHVzaChvdXRwdXQpOwoKICAgIHJldHVybiBwYXJ0cy5qb2luKCcnKQogIH0KCiAgZnVuY3Rpb24gcmVhZCAoYnVmZmVyLCBvZmZzZXQsIGlzTEUsIG1MZW4sIG5CeXRlcykgewogICAgdmFyIGUsIG07CiAgICB2YXIgZUxlbiA9IG5CeXRlcyAqIDggLSBtTGVuIC0gMTsKICAgIHZhciBlTWF4ID0gKDEgPDwgZUxlbikgLSAxOwogICAgdmFyIGVCaWFzID0gZU1heCA+PiAxOwogICAgdmFyIG5CaXRzID0gLTc7CiAgICB2YXIgaSA9IGlzTEUgPyAobkJ5dGVzIC0gMSkgOiAwOwogICAgdmFyIGQgPSBpc0xFID8gLTEgOiAxOwogICAgdmFyIHMgPSBidWZmZXJbb2Zmc2V0ICsgaV07CgogICAgaSArPSBkOwoKICAgIGUgPSBzICYgKCgxIDw8ICgtbkJpdHMpKSAtIDEpOwogICAgcyA+Pj0gKC1uQml0cyk7CiAgICBuQml0cyArPSBlTGVuOwogICAgZm9yICg7IG5CaXRzID4gMDsgZSA9IGUgKiAyNTYgKyBidWZmZXJbb2Zmc2V0ICsgaV0sIGkgKz0gZCwgbkJpdHMgLT0gOCkge30KCiAgICBtID0gZSAmICgoMSA8PCAoLW5CaXRzKSkgLSAxKTsKICAgIGUgPj49ICgtbkJpdHMpOwogICAgbkJpdHMgKz0gbUxlbjsKICAgIGZvciAoOyBuQml0cyA+IDA7IG0gPSBtICogMjU2ICsgYnVmZmVyW29mZnNldCArIGldLCBpICs9IGQsIG5CaXRzIC09IDgpIHt9CgogICAgaWYgKGUgPT09IDApIHsKICAgICAgZSA9IDEgLSBlQmlhczsKICAgIH0gZWxzZSBpZiAoZSA9PT0gZU1heCkgewogICAgICByZXR1cm4gbSA/IE5hTiA6ICgocyA/IC0xIDogMSkgKiBJbmZpbml0eSkKICAgIH0gZWxzZSB7CiAgICAgIG0gPSBtICsgTWF0aC5wb3coMiwgbUxlbik7CiAgICAgIGUgPSBlIC0gZUJpYXM7CiAgICB9CiAgICByZXR1cm4gKHMgPyAtMSA6IDEpICogbSAqIE1hdGgucG93KDIsIGUgLSBtTGVuKQogIH0KCiAgZnVuY3Rpb24gd3JpdGUgKGJ1ZmZlciwgdmFsdWUsIG9mZnNldCwgaXNMRSwgbUxlbiwgbkJ5dGVzKSB7CiAgICB2YXIgZSwgbSwgYzsKICAgIHZhciBlTGVuID0gbkJ5dGVzICogOCAtIG1MZW4gLSAxOwogICAgdmFyIGVNYXggPSAoMSA8PCBlTGVuKSAtIDE7CiAgICB2YXIgZUJpYXMgPSBlTWF4ID4+IDE7CiAgICB2YXIgcnQgPSAobUxlbiA9PT0gMjMgPyBNYXRoLnBvdygyLCAtMjQpIC0gTWF0aC5wb3coMiwgLTc3KSA6IDApOwogICAgdmFyIGkgPSBpc0xFID8gMCA6IChuQnl0ZXMgLSAxKTsKICAgIHZhciBkID0gaXNMRSA/IDEgOiAtMTsKICAgIHZhciBzID0gdmFsdWUgPCAwIHx8ICh2YWx1ZSA9PT0gMCAmJiAxIC8gdmFsdWUgPCAwKSA/IDEgOiAwOwoKICAgIHZhbHVlID0gTWF0aC5hYnModmFsdWUpOwoKICAgIGlmIChpc05hTih2YWx1ZSkgfHwgdmFsdWUgPT09IEluZmluaXR5KSB7CiAgICAgIG0gPSBpc05hTih2YWx1ZSkgPyAxIDogMDsKICAgICAgZSA9IGVNYXg7CiAgICB9IGVsc2UgewogICAgICBlID0gTWF0aC5mbG9vcihNYXRoLmxvZyh2YWx1ZSkgLyBNYXRoLkxOMik7CiAgICAgIGlmICh2YWx1ZSAqIChjID0gTWF0aC5wb3coMiwgLWUpKSA8IDEpIHsKICAgICAgICBlLS07CiAgICAgICAgYyAqPSAyOwogICAgICB9CiAgICAgIGlmIChlICsgZUJpYXMgPj0gMSkgewogICAgICAgIHZhbHVlICs9IHJ0IC8gYzsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YWx1ZSArPSBydCAqIE1hdGgucG93KDIsIDEgLSBlQmlhcyk7CiAgICAgIH0KICAgICAgaWYgKHZhbHVlICogYyA+PSAyKSB7CiAgICAgICAgZSsrOwogICAgICAgIGMgLz0gMjsKICAgICAgfQoKICAgICAgaWYgKGUgKyBlQmlhcyA+PSBlTWF4KSB7CiAgICAgICAgbSA9IDA7CiAgICAgICAgZSA9IGVNYXg7CiAgICAgIH0gZWxzZSBpZiAoZSArIGVCaWFzID49IDEpIHsKICAgICAgICBtID0gKHZhbHVlICogYyAtIDEpICogTWF0aC5wb3coMiwgbUxlbik7CiAgICAgICAgZSA9IGUgKyBlQmlhczsKICAgICAgfSBlbHNlIHsKICAgICAgICBtID0gdmFsdWUgKiBNYXRoLnBvdygyLCBlQmlhcyAtIDEpICogTWF0aC5wb3coMiwgbUxlbik7CiAgICAgICAgZSA9IDA7CiAgICAgIH0KICAgIH0KCiAgICBmb3IgKDsgbUxlbiA+PSA4OyBidWZmZXJbb2Zmc2V0ICsgaV0gPSBtICYgMHhmZiwgaSArPSBkLCBtIC89IDI1NiwgbUxlbiAtPSA4KSB7fQoKICAgIGUgPSAoZSA8PCBtTGVuKSB8IG07CiAgICBlTGVuICs9IG1MZW47CiAgICBmb3IgKDsgZUxlbiA+IDA7IGJ1ZmZlcltvZmZzZXQgKyBpXSA9IGUgJiAweGZmLCBpICs9IGQsIGUgLz0gMjU2LCBlTGVuIC09IDgpIHt9CgogICAgYnVmZmVyW29mZnNldCArIGkgLSBkXSB8PSBzICogMTI4OwogIH0KCiAgdmFyIHRvU3RyaW5nJDEgPSB7fS50b1N0cmluZzsKCiAgdmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uIChhcnIpIHsKICAgIHJldHVybiB0b1N0cmluZyQxLmNhbGwoYXJyKSA9PSAnW29iamVjdCBBcnJheV0nOwogIH07CgogIHZhciBJTlNQRUNUX01BWF9CWVRFUyA9IDUwOwoKICAvKioKICAgKiBJZiBgQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRgOgogICAqICAgPT09IHRydWUgICAgVXNlIFVpbnQ4QXJyYXkgaW1wbGVtZW50YXRpb24gKGZhc3Rlc3QpCiAgICogICA9PT0gZmFsc2UgICBVc2UgT2JqZWN0IGltcGxlbWVudGF0aW9uIChtb3N0IGNvbXBhdGlibGUsIGV2ZW4gSUU2KQogICAqCiAgICogQnJvd3NlcnMgdGhhdCBzdXBwb3J0IHR5cGVkIGFycmF5cyBhcmUgSUUgMTArLCBGaXJlZm94IDQrLCBDaHJvbWUgNyssIFNhZmFyaSA1LjErLAogICAqIE9wZXJhIDExLjYrLCBpT1MgNC4yKy4KICAgKgogICAqIER1ZSB0byB2YXJpb3VzIGJyb3dzZXIgYnVncywgc29tZXRpbWVzIHRoZSBPYmplY3QgaW1wbGVtZW50YXRpb24gd2lsbCBiZSB1c2VkIGV2ZW4KICAgKiB3aGVuIHRoZSBicm93c2VyIHN1cHBvcnRzIHR5cGVkIGFycmF5cy4KICAgKgogICAqIE5vdGU6CiAgICoKICAgKiAgIC0gRmlyZWZveCA0LTI5IGxhY2tzIHN1cHBvcnQgZm9yIGFkZGluZyBuZXcgcHJvcGVydGllcyB0byBgVWludDhBcnJheWAgaW5zdGFuY2VzLAogICAqICAgICBTZWU6IGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTY5NTQzOC4KICAgKgogICAqICAgLSBDaHJvbWUgOS0xMCBpcyBtaXNzaW5nIHRoZSBgVHlwZWRBcnJheS5wcm90b3R5cGUuc3ViYXJyYXlgIGZ1bmN0aW9uLgogICAqCiAgICogICAtIElFMTAgaGFzIGEgYnJva2VuIGBUeXBlZEFycmF5LnByb3RvdHlwZS5zdWJhcnJheWAgZnVuY3Rpb24gd2hpY2ggcmV0dXJucyBhcnJheXMgb2YKICAgKiAgICAgaW5jb3JyZWN0IGxlbmd0aCBpbiBzb21lIHNpdHVhdGlvbnMuCgogICAqIFdlIGRldGVjdCB0aGVzZSBidWdneSBicm93c2VycyBhbmQgc2V0IGBCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVGAgdG8gYGZhbHNlYCBzbyB0aGV5CiAgICogZ2V0IHRoZSBPYmplY3QgaW1wbGVtZW50YXRpb24sIHdoaWNoIGlzIHNsb3dlciBidXQgYmVoYXZlcyBjb3JyZWN0bHkuCiAgICovCiAgQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQgPSBnbG9iYWwkMS5UWVBFRF9BUlJBWV9TVVBQT1JUICE9PSB1bmRlZmluZWQKICAgID8gZ2xvYmFsJDEuVFlQRURfQVJSQVlfU1VQUE9SVAogICAgOiB0cnVlOwoKICBmdW5jdGlvbiBrTWF4TGVuZ3RoICgpIHsKICAgIHJldHVybiBCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVAogICAgICA/IDB4N2ZmZmZmZmYKICAgICAgOiAweDNmZmZmZmZmCiAgfQoKICBmdW5jdGlvbiBjcmVhdGVCdWZmZXIgKHRoYXQsIGxlbmd0aCkgewogICAgaWYgKGtNYXhMZW5ndGgoKSA8IGxlbmd0aCkgewogICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW52YWxpZCB0eXBlZCBhcnJheSBsZW5ndGgnKQogICAgfQogICAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7CiAgICAgIC8vIFJldHVybiBhbiBhdWdtZW50ZWQgYFVpbnQ4QXJyYXlgIGluc3RhbmNlLCBmb3IgYmVzdCBwZXJmb3JtYW5jZQogICAgICB0aGF0ID0gbmV3IFVpbnQ4QXJyYXkobGVuZ3RoKTsKICAgICAgdGhhdC5fX3Byb3RvX18gPSBCdWZmZXIucHJvdG90eXBlOwogICAgfSBlbHNlIHsKICAgICAgLy8gRmFsbGJhY2s6IFJldHVybiBhbiBvYmplY3QgaW5zdGFuY2Ugb2YgdGhlIEJ1ZmZlciBjbGFzcwogICAgICBpZiAodGhhdCA9PT0gbnVsbCkgewogICAgICAgIHRoYXQgPSBuZXcgQnVmZmVyKGxlbmd0aCk7CiAgICAgIH0KICAgICAgdGhhdC5sZW5ndGggPSBsZW5ndGg7CiAgICB9CgogICAgcmV0dXJuIHRoYXQKICB9CgogIC8qKgogICAqIFRoZSBCdWZmZXIgY29uc3RydWN0b3IgcmV0dXJucyBpbnN0YW5jZXMgb2YgYFVpbnQ4QXJyYXlgIHRoYXQgaGF2ZSB0aGVpcgogICAqIHByb3RvdHlwZSBjaGFuZ2VkIHRvIGBCdWZmZXIucHJvdG90eXBlYC4gRnVydGhlcm1vcmUsIGBCdWZmZXJgIGlzIGEgc3ViY2xhc3Mgb2YKICAgKiBgVWludDhBcnJheWAsIHNvIHRoZSByZXR1cm5lZCBpbnN0YW5jZXMgd2lsbCBoYXZlIGFsbCB0aGUgbm9kZSBgQnVmZmVyYCBtZXRob2RzCiAgICogYW5kIHRoZSBgVWludDhBcnJheWAgbWV0aG9kcy4gU3F1YXJlIGJyYWNrZXQgbm90YXRpb24gd29ya3MgYXMgZXhwZWN0ZWQgLS0gaXQKICAgKiByZXR1cm5zIGEgc2luZ2xlIG9jdGV0LgogICAqCiAgICogVGhlIGBVaW50OEFycmF5YCBwcm90b3R5cGUgcmVtYWlucyB1bm1vZGlmaWVkLgogICAqLwoKICBmdW5jdGlvbiBCdWZmZXIgKGFyZywgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKSB7CiAgICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUICYmICEodGhpcyBpbnN0YW5jZW9mIEJ1ZmZlcikpIHsKICAgICAgcmV0dXJuIG5ldyBCdWZmZXIoYXJnLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpCiAgICB9CgogICAgLy8gQ29tbW9uIGNhc2UuCiAgICBpZiAodHlwZW9mIGFyZyA9PT0gJ251bWJlcicpIHsKICAgICAgaWYgKHR5cGVvZiBlbmNvZGluZ09yT2Zmc2V0ID09PSAnc3RyaW5nJykgewogICAgICAgIHRocm93IG5ldyBFcnJvcigKICAgICAgICAgICdJZiBlbmNvZGluZyBpcyBzcGVjaWZpZWQgdGhlbiB0aGUgZmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIHN0cmluZycKICAgICAgICApCiAgICAgIH0KICAgICAgcmV0dXJuIGFsbG9jVW5zYWZlKHRoaXMsIGFyZykKICAgIH0KICAgIHJldHVybiBmcm9tJDIodGhpcywgYXJnLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpCiAgfQoKICBCdWZmZXIucG9vbFNpemUgPSA4MTkyOyAvLyBub3QgdXNlZCBieSB0aGlzIGltcGxlbWVudGF0aW9uCgogIC8vIFRPRE86IExlZ2FjeSwgbm90IG5lZWRlZCBhbnltb3JlLiBSZW1vdmUgaW4gbmV4dCBtYWpvciB2ZXJzaW9uLgogIEJ1ZmZlci5fYXVnbWVudCA9IGZ1bmN0aW9uIChhcnIpIHsKICAgIGFyci5fX3Byb3RvX18gPSBCdWZmZXIucHJvdG90eXBlOwogICAgcmV0dXJuIGFycgogIH07CgogIGZ1bmN0aW9uIGZyb20kMiAodGhhdCwgdmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkgewogICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHsKICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignInZhbHVlIiBhcmd1bWVudCBtdXN0IG5vdCBiZSBhIG51bWJlcicpCiAgICB9CgogICAgaWYgKHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgJiYgdmFsdWUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikgewogICAgICByZXR1cm4gZnJvbUFycmF5QnVmZmVyKHRoYXQsIHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpCiAgICB9CgogICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHsKICAgICAgcmV0dXJuIGZyb21TdHJpbmcodGhhdCwgdmFsdWUsIGVuY29kaW5nT3JPZmZzZXQpCiAgICB9CgogICAgcmV0dXJuIGZyb21PYmplY3QodGhhdCwgdmFsdWUpCiAgfQoKICAvKioKICAgKiBGdW5jdGlvbmFsbHkgZXF1aXZhbGVudCB0byBCdWZmZXIoYXJnLCBlbmNvZGluZykgYnV0IHRocm93cyBhIFR5cGVFcnJvcgogICAqIGlmIHZhbHVlIGlzIGEgbnVtYmVyLgogICAqIEJ1ZmZlci5mcm9tKHN0clssIGVuY29kaW5nXSkKICAgKiBCdWZmZXIuZnJvbShhcnJheSkKICAgKiBCdWZmZXIuZnJvbShidWZmZXIpCiAgICogQnVmZmVyLmZyb20oYXJyYXlCdWZmZXJbLCBieXRlT2Zmc2V0WywgbGVuZ3RoXV0pCiAgICoqLwogIEJ1ZmZlci5mcm9tID0gZnVuY3Rpb24gKHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHsKICAgIHJldHVybiBmcm9tJDIobnVsbCwgdmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkKICB9OwoKICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHsKICAgIEJ1ZmZlci5wcm90b3R5cGUuX19wcm90b19fID0gVWludDhBcnJheS5wcm90b3R5cGU7CiAgICBCdWZmZXIuX19wcm90b19fID0gVWludDhBcnJheTsKICB9CgogIGZ1bmN0aW9uIGFzc2VydFNpemUkMSAoc2l6ZSkgewogICAgaWYgKHR5cGVvZiBzaXplICE9PSAnbnVtYmVyJykgewogICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCcic2l6ZSIgYXJndW1lbnQgbXVzdCBiZSBhIG51bWJlcicpCiAgICB9IGVsc2UgaWYgKHNpemUgPCAwKSB7CiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCcic2l6ZSIgYXJndW1lbnQgbXVzdCBub3QgYmUgbmVnYXRpdmUnKQogICAgfQogIH0KCiAgZnVuY3Rpb24gYWxsb2MgKHRoYXQsIHNpemUsIGZpbGwsIGVuY29kaW5nKSB7CiAgICBhc3NlcnRTaXplJDEoc2l6ZSk7CiAgICBpZiAoc2l6ZSA8PSAwKSB7CiAgICAgIHJldHVybiBjcmVhdGVCdWZmZXIodGhhdCwgc2l6ZSkKICAgIH0KICAgIGlmIChmaWxsICE9PSB1bmRlZmluZWQpIHsKICAgICAgLy8gT25seSBwYXkgYXR0ZW50aW9uIHRvIGVuY29kaW5nIGlmIGl0J3MgYSBzdHJpbmcuIFRoaXMKICAgICAgLy8gcHJldmVudHMgYWNjaWRlbnRhbGx5IHNlbmRpbmcgaW4gYSBudW1iZXIgdGhhdCB3b3VsZAogICAgICAvLyBiZSBpbnRlcnByZXR0ZWQgYXMgYSBzdGFydCBvZmZzZXQuCiAgICAgIHJldHVybiB0eXBlb2YgZW5jb2RpbmcgPT09ICdzdHJpbmcnCiAgICAgICAgPyBjcmVhdGVCdWZmZXIodGhhdCwgc2l6ZSkuZmlsbChmaWxsLCBlbmNvZGluZykKICAgICAgICA6IGNyZWF0ZUJ1ZmZlcih0aGF0LCBzaXplKS5maWxsKGZpbGwpCiAgICB9CiAgICByZXR1cm4gY3JlYXRlQnVmZmVyKHRoYXQsIHNpemUpCiAgfQoKICAvKioKICAgKiBDcmVhdGVzIGEgbmV3IGZpbGxlZCBCdWZmZXIgaW5zdGFuY2UuCiAgICogYWxsb2Moc2l6ZVssIGZpbGxbLCBlbmNvZGluZ11dKQogICAqKi8KICBCdWZmZXIuYWxsb2MgPSBmdW5jdGlvbiAoc2l6ZSwgZmlsbCwgZW5jb2RpbmcpIHsKICAgIHJldHVybiBhbGxvYyhudWxsLCBzaXplLCBmaWxsLCBlbmNvZGluZykKICB9OwoKICBmdW5jdGlvbiBhbGxvY1Vuc2FmZSAodGhhdCwgc2l6ZSkgewogICAgYXNzZXJ0U2l6ZSQxKHNpemUpOwogICAgdGhhdCA9IGNyZWF0ZUJ1ZmZlcih0aGF0LCBzaXplIDwgMCA/IDAgOiBjaGVja2VkKHNpemUpIHwgMCk7CiAgICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2l6ZTsgKytpKSB7CiAgICAgICAgdGhhdFtpXSA9IDA7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiB0aGF0CiAgfQoKICAvKioKICAgKiBFcXVpdmFsZW50IHRvIEJ1ZmZlcihudW0pLCBieSBkZWZhdWx0IGNyZWF0ZXMgYSBub24temVyby1maWxsZWQgQnVmZmVyIGluc3RhbmNlLgogICAqICovCiAgQnVmZmVyLmFsbG9jVW5zYWZlID0gZnVuY3Rpb24gKHNpemUpIHsKICAgIHJldHVybiBhbGxvY1Vuc2FmZShudWxsLCBzaXplKQogIH07CiAgLyoqCiAgICogRXF1aXZhbGVudCB0byBTbG93QnVmZmVyKG51bSksIGJ5IGRlZmF1bHQgY3JlYXRlcyBhIG5vbi16ZXJvLWZpbGxlZCBCdWZmZXIgaW5zdGFuY2UuCiAgICovCiAgQnVmZmVyLmFsbG9jVW5zYWZlU2xvdyA9IGZ1bmN0aW9uIChzaXplKSB7CiAgICByZXR1cm4gYWxsb2NVbnNhZmUobnVsbCwgc2l6ZSkKICB9OwoKICBmdW5jdGlvbiBmcm9tU3RyaW5nICh0aGF0LCBzdHJpbmcsIGVuY29kaW5nKSB7CiAgICBpZiAodHlwZW9mIGVuY29kaW5nICE9PSAnc3RyaW5nJyB8fCBlbmNvZGluZyA9PT0gJycpIHsKICAgICAgZW5jb2RpbmcgPSAndXRmOCc7CiAgICB9CgogICAgaWYgKCFCdWZmZXIuaXNFbmNvZGluZyhlbmNvZGluZykpIHsKICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignImVuY29kaW5nIiBtdXN0IGJlIGEgdmFsaWQgc3RyaW5nIGVuY29kaW5nJykKICAgIH0KCiAgICB2YXIgbGVuZ3RoID0gYnl0ZUxlbmd0aCQxKHN0cmluZywgZW5jb2RpbmcpIHwgMDsKICAgIHRoYXQgPSBjcmVhdGVCdWZmZXIodGhhdCwgbGVuZ3RoKTsKCiAgICB2YXIgYWN0dWFsID0gdGhhdC53cml0ZShzdHJpbmcsIGVuY29kaW5nKTsKCiAgICBpZiAoYWN0dWFsICE9PSBsZW5ndGgpIHsKICAgICAgLy8gV3JpdGluZyBhIGhleCBzdHJpbmcsIGZvciBleGFtcGxlLCB0aGF0IGNvbnRhaW5zIGludmFsaWQgY2hhcmFjdGVycyB3aWxsCiAgICAgIC8vIGNhdXNlIGV2ZXJ5dGhpbmcgYWZ0ZXIgdGhlIGZpcnN0IGludmFsaWQgY2hhcmFjdGVyIHRvIGJlIGlnbm9yZWQuIChlLmcuCiAgICAgIC8vICdhYnh4Y2QnIHdpbGwgYmUgdHJlYXRlZCBhcyAnYWInKQogICAgICB0aGF0ID0gdGhhdC5zbGljZSgwLCBhY3R1YWwpOwogICAgfQoKICAgIHJldHVybiB0aGF0CiAgfQoKICBmdW5jdGlvbiBmcm9tQXJyYXlMaWtlICh0aGF0LCBhcnJheSkgewogICAgdmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aCA8IDAgPyAwIDogY2hlY2tlZChhcnJheS5sZW5ndGgpIHwgMDsKICAgIHRoYXQgPSBjcmVhdGVCdWZmZXIodGhhdCwgbGVuZ3RoKTsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHsKICAgICAgdGhhdFtpXSA9IGFycmF5W2ldICYgMjU1OwogICAgfQogICAgcmV0dXJuIHRoYXQKICB9CgogIGZ1bmN0aW9uIGZyb21BcnJheUJ1ZmZlciAodGhhdCwgYXJyYXksIGJ5dGVPZmZzZXQsIGxlbmd0aCkgewogICAgYXJyYXkuYnl0ZUxlbmd0aDsgLy8gdGhpcyB0aHJvd3MgaWYgYGFycmF5YCBpcyBub3QgYSB2YWxpZCBBcnJheUJ1ZmZlcgoKICAgIGlmIChieXRlT2Zmc2V0IDwgMCB8fCBhcnJheS5ieXRlTGVuZ3RoIDwgYnl0ZU9mZnNldCkgewogICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignXCdvZmZzZXRcJyBpcyBvdXQgb2YgYm91bmRzJykKICAgIH0KCiAgICBpZiAoYXJyYXkuYnl0ZUxlbmd0aCA8IGJ5dGVPZmZzZXQgKyAobGVuZ3RoIHx8IDApKSB7CiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdcJ2xlbmd0aFwnIGlzIG91dCBvZiBib3VuZHMnKQogICAgfQoKICAgIGlmIChieXRlT2Zmc2V0ID09PSB1bmRlZmluZWQgJiYgbGVuZ3RoID09PSB1bmRlZmluZWQpIHsKICAgICAgYXJyYXkgPSBuZXcgVWludDhBcnJheShhcnJheSk7CiAgICB9IGVsc2UgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIGFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXksIGJ5dGVPZmZzZXQpOwogICAgfSBlbHNlIHsKICAgICAgYXJyYXkgPSBuZXcgVWludDhBcnJheShhcnJheSwgYnl0ZU9mZnNldCwgbGVuZ3RoKTsKICAgIH0KCiAgICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHsKICAgICAgLy8gUmV0dXJuIGFuIGF1Z21lbnRlZCBgVWludDhBcnJheWAgaW5zdGFuY2UsIGZvciBiZXN0IHBlcmZvcm1hbmNlCiAgICAgIHRoYXQgPSBhcnJheTsKICAgICAgdGhhdC5fX3Byb3RvX18gPSBCdWZmZXIucHJvdG90eXBlOwogICAgfSBlbHNlIHsKICAgICAgLy8gRmFsbGJhY2s6IFJldHVybiBhbiBvYmplY3QgaW5zdGFuY2Ugb2YgdGhlIEJ1ZmZlciBjbGFzcwogICAgICB0aGF0ID0gZnJvbUFycmF5TGlrZSh0aGF0LCBhcnJheSk7CiAgICB9CiAgICByZXR1cm4gdGhhdAogIH0KCiAgZnVuY3Rpb24gZnJvbU9iamVjdCAodGhhdCwgb2JqKSB7CiAgICBpZiAoaW50ZXJuYWxJc0J1ZmZlcihvYmopKSB7CiAgICAgIHZhciBsZW4gPSBjaGVja2VkKG9iai5sZW5ndGgpIHwgMDsKICAgICAgdGhhdCA9IGNyZWF0ZUJ1ZmZlcih0aGF0LCBsZW4pOwoKICAgICAgaWYgKHRoYXQubGVuZ3RoID09PSAwKSB7CiAgICAgICAgcmV0dXJuIHRoYXQKICAgICAgfQoKICAgICAgb2JqLmNvcHkodGhhdCwgMCwgMCwgbGVuKTsKICAgICAgcmV0dXJuIHRoYXQKICAgIH0KCiAgICBpZiAob2JqKSB7CiAgICAgIGlmICgodHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJgogICAgICAgICAgb2JqLmJ1ZmZlciBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB8fCAnbGVuZ3RoJyBpbiBvYmopIHsKICAgICAgICBpZiAodHlwZW9mIG9iai5sZW5ndGggIT09ICdudW1iZXInIHx8IGlzbmFuKG9iai5sZW5ndGgpKSB7CiAgICAgICAgICByZXR1cm4gY3JlYXRlQnVmZmVyKHRoYXQsIDApCiAgICAgICAgfQogICAgICAgIHJldHVybiBmcm9tQXJyYXlMaWtlKHRoYXQsIG9iaikKICAgICAgfQoKICAgICAgaWYgKG9iai50eXBlID09PSAnQnVmZmVyJyAmJiBpc0FycmF5KG9iai5kYXRhKSkgewogICAgICAgIHJldHVybiBmcm9tQXJyYXlMaWtlKHRoYXQsIG9iai5kYXRhKQogICAgICB9CiAgICB9CgogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIHN0cmluZywgQnVmZmVyLCBBcnJheUJ1ZmZlciwgQXJyYXksIG9yIGFycmF5LWxpa2Ugb2JqZWN0LicpCiAgfQoKICBmdW5jdGlvbiBjaGVja2VkIChsZW5ndGgpIHsKICAgIC8vIE5vdGU6IGNhbm5vdCB1c2UgYGxlbmd0aCA8IGtNYXhMZW5ndGgoKWAgaGVyZSBiZWNhdXNlIHRoYXQgZmFpbHMgd2hlbgogICAgLy8gbGVuZ3RoIGlzIE5hTiAod2hpY2ggaXMgb3RoZXJ3aXNlIGNvZXJjZWQgdG8gemVyby4pCiAgICBpZiAobGVuZ3RoID49IGtNYXhMZW5ndGgoKSkgewogICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQXR0ZW1wdCB0byBhbGxvY2F0ZSBCdWZmZXIgbGFyZ2VyIHRoYW4gbWF4aW11bSAnICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3NpemU6IDB4JyArIGtNYXhMZW5ndGgoKS50b1N0cmluZygxNikgKyAnIGJ5dGVzJykKICAgIH0KICAgIHJldHVybiBsZW5ndGggfCAwCiAgfQogIEJ1ZmZlci5pc0J1ZmZlciA9IGlzQnVmZmVyJDE7CiAgZnVuY3Rpb24gaW50ZXJuYWxJc0J1ZmZlciAoYikgewogICAgcmV0dXJuICEhKGIgIT0gbnVsbCAmJiBiLl9pc0J1ZmZlcikKICB9CgogIEJ1ZmZlci5jb21wYXJlID0gZnVuY3Rpb24gY29tcGFyZSAoYSwgYikgewogICAgaWYgKCFpbnRlcm5hbElzQnVmZmVyKGEpIHx8ICFpbnRlcm5hbElzQnVmZmVyKGIpKSB7CiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50cyBtdXN0IGJlIEJ1ZmZlcnMnKQogICAgfQoKICAgIGlmIChhID09PSBiKSByZXR1cm4gMAoKICAgIHZhciB4ID0gYS5sZW5ndGg7CiAgICB2YXIgeSA9IGIubGVuZ3RoOwoKICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBNYXRoLm1pbih4LCB5KTsgaSA8IGxlbjsgKytpKSB7CiAgICAgIGlmIChhW2ldICE9PSBiW2ldKSB7CiAgICAgICAgeCA9IGFbaV07CiAgICAgICAgeSA9IGJbaV07CiAgICAgICAgYnJlYWsKICAgICAgfQogICAgfQoKICAgIGlmICh4IDwgeSkgcmV0dXJuIC0xCiAgICBpZiAoeSA8IHgpIHJldHVybiAxCiAgICByZXR1cm4gMAogIH07CgogIEJ1ZmZlci5pc0VuY29kaW5nID0gZnVuY3Rpb24gaXNFbmNvZGluZyAoZW5jb2RpbmcpIHsKICAgIHN3aXRjaCAoU3RyaW5nKGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpKSB7CiAgICAgIGNhc2UgJ2hleCc6CiAgICAgIGNhc2UgJ3V0ZjgnOgogICAgICBjYXNlICd1dGYtOCc6CiAgICAgIGNhc2UgJ2FzY2lpJzoKICAgICAgY2FzZSAnbGF0aW4xJzoKICAgICAgY2FzZSAnYmluYXJ5JzoKICAgICAgY2FzZSAnYmFzZTY0JzoKICAgICAgY2FzZSAndWNzMic6CiAgICAgIGNhc2UgJ3Vjcy0yJzoKICAgICAgY2FzZSAndXRmMTZsZSc6CiAgICAgIGNhc2UgJ3V0Zi0xNmxlJzoKICAgICAgICByZXR1cm4gdHJ1ZQogICAgICBkZWZhdWx0OgogICAgICAgIHJldHVybiBmYWxzZQogICAgfQogIH07CgogIEJ1ZmZlci5jb25jYXQgPSBmdW5jdGlvbiBjb25jYXQgKGxpc3QsIGxlbmd0aCkgewogICAgaWYgKCFpc0FycmF5KGxpc3QpKSB7CiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJyJsaXN0IiBhcmd1bWVudCBtdXN0IGJlIGFuIEFycmF5IG9mIEJ1ZmZlcnMnKQogICAgfQoKICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMCkgewogICAgICByZXR1cm4gQnVmZmVyLmFsbG9jKDApCiAgICB9CgogICAgdmFyIGk7CiAgICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQpIHsKICAgICAgbGVuZ3RoID0gMDsKICAgICAgZm9yIChpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyArK2kpIHsKICAgICAgICBsZW5ndGggKz0gbGlzdFtpXS5sZW5ndGg7CiAgICAgIH0KICAgIH0KCiAgICB2YXIgYnVmZmVyID0gQnVmZmVyLmFsbG9jVW5zYWZlKGxlbmd0aCk7CiAgICB2YXIgcG9zID0gMDsKICAgIGZvciAoaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgKytpKSB7CiAgICAgIHZhciBidWYgPSBsaXN0W2ldOwogICAgICBpZiAoIWludGVybmFsSXNCdWZmZXIoYnVmKSkgewogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJyJsaXN0IiBhcmd1bWVudCBtdXN0IGJlIGFuIEFycmF5IG9mIEJ1ZmZlcnMnKQogICAgICB9CiAgICAgIGJ1Zi5jb3B5KGJ1ZmZlciwgcG9zKTsKICAgICAgcG9zICs9IGJ1Zi5sZW5ndGg7CiAgICB9CiAgICByZXR1cm4gYnVmZmVyCiAgfTsKCiAgZnVuY3Rpb24gYnl0ZUxlbmd0aCQxIChzdHJpbmcsIGVuY29kaW5nKSB7CiAgICBpZiAoaW50ZXJuYWxJc0J1ZmZlcihzdHJpbmcpKSB7CiAgICAgIHJldHVybiBzdHJpbmcubGVuZ3RoCiAgICB9CiAgICBpZiAodHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgQXJyYXlCdWZmZXIuaXNWaWV3ID09PSAnZnVuY3Rpb24nICYmCiAgICAgICAgKEFycmF5QnVmZmVyLmlzVmlldyhzdHJpbmcpIHx8IHN0cmluZyBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSkgewogICAgICByZXR1cm4gc3RyaW5nLmJ5dGVMZW5ndGgKICAgIH0KICAgIGlmICh0eXBlb2Ygc3RyaW5nICE9PSAnc3RyaW5nJykgewogICAgICBzdHJpbmcgPSAnJyArIHN0cmluZzsKICAgIH0KCiAgICB2YXIgbGVuID0gc3RyaW5nLmxlbmd0aDsKICAgIGlmIChsZW4gPT09IDApIHJldHVybiAwCgogICAgLy8gVXNlIGEgZm9yIGxvb3AgdG8gYXZvaWQgcmVjdXJzaW9uCiAgICB2YXIgbG93ZXJlZENhc2UgPSBmYWxzZTsKICAgIGZvciAoOzspIHsKICAgICAgc3dpdGNoIChlbmNvZGluZykgewogICAgICAgIGNhc2UgJ2FzY2lpJzoKICAgICAgICBjYXNlICdsYXRpbjEnOgogICAgICAgIGNhc2UgJ2JpbmFyeSc6CiAgICAgICAgICByZXR1cm4gbGVuCiAgICAgICAgY2FzZSAndXRmOCc6CiAgICAgICAgY2FzZSAndXRmLTgnOgogICAgICAgIGNhc2UgdW5kZWZpbmVkOgogICAgICAgICAgcmV0dXJuIHV0ZjhUb0J5dGVzKHN0cmluZykubGVuZ3RoCiAgICAgICAgY2FzZSAndWNzMic6CiAgICAgICAgY2FzZSAndWNzLTInOgogICAgICAgIGNhc2UgJ3V0ZjE2bGUnOgogICAgICAgIGNhc2UgJ3V0Zi0xNmxlJzoKICAgICAgICAgIHJldHVybiBsZW4gKiAyCiAgICAgICAgY2FzZSAnaGV4JzoKICAgICAgICAgIHJldHVybiBsZW4gPj4+IDEKICAgICAgICBjYXNlICdiYXNlNjQnOgogICAgICAgICAgcmV0dXJuIGJhc2U2NFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGgKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgaWYgKGxvd2VyZWRDYXNlKSByZXR1cm4gdXRmOFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGggLy8gYXNzdW1lIHV0ZjgKICAgICAgICAgIGVuY29kaW5nID0gKCcnICsgZW5jb2RpbmcpLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWU7CiAgICAgIH0KICAgIH0KICB9CiAgQnVmZmVyLmJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoJDE7CgogIGZ1bmN0aW9uIHNsb3dUb1N0cmluZyAoZW5jb2RpbmcsIHN0YXJ0LCBlbmQpIHsKICAgIHZhciBsb3dlcmVkQ2FzZSA9IGZhbHNlOwoKICAgIC8vIE5vIG5lZWQgdG8gdmVyaWZ5IHRoYXQgInRoaXMubGVuZ3RoIDw9IE1BWF9VSU5UMzIiIHNpbmNlIGl0J3MgYSByZWFkLW9ubHkKICAgIC8vIHByb3BlcnR5IG9mIGEgdHlwZWQgYXJyYXkuCgogICAgLy8gVGhpcyBiZWhhdmVzIG5laXRoZXIgbGlrZSBTdHJpbmcgbm9yIFVpbnQ4QXJyYXkgaW4gdGhhdCB3ZSBzZXQgc3RhcnQvZW5kCiAgICAvLyB0byB0aGVpciB1cHBlci9sb3dlciBib3VuZHMgaWYgdGhlIHZhbHVlIHBhc3NlZCBpcyBvdXQgb2YgcmFuZ2UuCiAgICAvLyB1bmRlZmluZWQgaXMgaGFuZGxlZCBzcGVjaWFsbHkgYXMgcGVyIEVDTUEtMjYyIDZ0aCBFZGl0aW9uLAogICAgLy8gU2VjdGlvbiAxMy4zLjMuNyBSdW50aW1lIFNlbWFudGljczogS2V5ZWRCaW5kaW5nSW5pdGlhbGl6YXRpb24uCiAgICBpZiAoc3RhcnQgPT09IHVuZGVmaW5lZCB8fCBzdGFydCA8IDApIHsKICAgICAgc3RhcnQgPSAwOwogICAgfQogICAgLy8gUmV0dXJuIGVhcmx5IGlmIHN0YXJ0ID4gdGhpcy5sZW5ndGguIERvbmUgaGVyZSB0byBwcmV2ZW50IHBvdGVudGlhbCB1aW50MzIKICAgIC8vIGNvZXJjaW9uIGZhaWwgYmVsb3cuCiAgICBpZiAoc3RhcnQgPiB0aGlzLmxlbmd0aCkgewogICAgICByZXR1cm4gJycKICAgIH0KCiAgICBpZiAoZW5kID09PSB1bmRlZmluZWQgfHwgZW5kID4gdGhpcy5sZW5ndGgpIHsKICAgICAgZW5kID0gdGhpcy5sZW5ndGg7CiAgICB9CgogICAgaWYgKGVuZCA8PSAwKSB7CiAgICAgIHJldHVybiAnJwogICAgfQoKICAgIC8vIEZvcmNlIGNvZXJzaW9uIHRvIHVpbnQzMi4gVGhpcyB3aWxsIGFsc28gY29lcmNlIGZhbHNleS9OYU4gdmFsdWVzIHRvIDAuCiAgICBlbmQgPj4+PSAwOwogICAgc3RhcnQgPj4+PSAwOwoKICAgIGlmIChlbmQgPD0gc3RhcnQpIHsKICAgICAgcmV0dXJuICcnCiAgICB9CgogICAgaWYgKCFlbmNvZGluZykgZW5jb2RpbmcgPSAndXRmOCc7CgogICAgd2hpbGUgKHRydWUpIHsKICAgICAgc3dpdGNoIChlbmNvZGluZykgewogICAgICAgIGNhc2UgJ2hleCc6CiAgICAgICAgICByZXR1cm4gaGV4U2xpY2UodGhpcywgc3RhcnQsIGVuZCkKCiAgICAgICAgY2FzZSAndXRmOCc6CiAgICAgICAgY2FzZSAndXRmLTgnOgogICAgICAgICAgcmV0dXJuIHV0ZjhTbGljZSh0aGlzLCBzdGFydCwgZW5kKQoKICAgICAgICBjYXNlICdhc2NpaSc6CiAgICAgICAgICByZXR1cm4gYXNjaWlTbGljZSh0aGlzLCBzdGFydCwgZW5kKQoKICAgICAgICBjYXNlICdsYXRpbjEnOgogICAgICAgIGNhc2UgJ2JpbmFyeSc6CiAgICAgICAgICByZXR1cm4gbGF0aW4xU2xpY2UodGhpcywgc3RhcnQsIGVuZCkKCiAgICAgICAgY2FzZSAnYmFzZTY0JzoKICAgICAgICAgIHJldHVybiBiYXNlNjRTbGljZSh0aGlzLCBzdGFydCwgZW5kKQoKICAgICAgICBjYXNlICd1Y3MyJzoKICAgICAgICBjYXNlICd1Y3MtMic6CiAgICAgICAgY2FzZSAndXRmMTZsZSc6CiAgICAgICAgY2FzZSAndXRmLTE2bGUnOgogICAgICAgICAgcmV0dXJuIHV0ZjE2bGVTbGljZSh0aGlzLCBzdGFydCwgZW5kKQoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgaWYgKGxvd2VyZWRDYXNlKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpCiAgICAgICAgICBlbmNvZGluZyA9IChlbmNvZGluZyArICcnKS50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlOwogICAgICB9CiAgICB9CiAgfQoKICAvLyBUaGUgcHJvcGVydHkgaXMgdXNlZCBieSBgQnVmZmVyLmlzQnVmZmVyYCBhbmQgYGlzLWJ1ZmZlcmAgKGluIFNhZmFyaSA1LTcpIHRvIGRldGVjdAogIC8vIEJ1ZmZlciBpbnN0YW5jZXMuCiAgQnVmZmVyLnByb3RvdHlwZS5faXNCdWZmZXIgPSB0cnVlOwoKICBmdW5jdGlvbiBzd2FwIChiLCBuLCBtKSB7CiAgICB2YXIgaSA9IGJbbl07CiAgICBiW25dID0gYlttXTsKICAgIGJbbV0gPSBpOwogIH0KCiAgQnVmZmVyLnByb3RvdHlwZS5zd2FwMTYgPSBmdW5jdGlvbiBzd2FwMTYgKCkgewogICAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoOwogICAgaWYgKGxlbiAlIDIgIT09IDApIHsKICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0J1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiAxNi1iaXRzJykKICAgIH0KICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDIpIHsKICAgICAgc3dhcCh0aGlzLCBpLCBpICsgMSk7CiAgICB9CiAgICByZXR1cm4gdGhpcwogIH07CgogIEJ1ZmZlci5wcm90b3R5cGUuc3dhcDMyID0gZnVuY3Rpb24gc3dhcDMyICgpIHsKICAgIHZhciBsZW4gPSB0aGlzLmxlbmd0aDsKICAgIGlmIChsZW4gJSA0ICE9PSAwKSB7CiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgMzItYml0cycpCiAgICB9CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSA0KSB7CiAgICAgIHN3YXAodGhpcywgaSwgaSArIDMpOwogICAgICBzd2FwKHRoaXMsIGkgKyAxLCBpICsgMik7CiAgICB9CiAgICByZXR1cm4gdGhpcwogIH07CgogIEJ1ZmZlci5wcm90b3R5cGUuc3dhcDY0ID0gZnVuY3Rpb24gc3dhcDY0ICgpIHsKICAgIHZhciBsZW4gPSB0aGlzLmxlbmd0aDsKICAgIGlmIChsZW4gJSA4ICE9PSAwKSB7CiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgNjQtYml0cycpCiAgICB9CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSA4KSB7CiAgICAgIHN3YXAodGhpcywgaSwgaSArIDcpOwogICAgICBzd2FwKHRoaXMsIGkgKyAxLCBpICsgNik7CiAgICAgIHN3YXAodGhpcywgaSArIDIsIGkgKyA1KTsKICAgICAgc3dhcCh0aGlzLCBpICsgMywgaSArIDQpOwogICAgfQogICAgcmV0dXJuIHRoaXMKICB9OwoKICBCdWZmZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcgKCkgewogICAgdmFyIGxlbmd0aCA9IHRoaXMubGVuZ3RoIHwgMDsKICAgIGlmIChsZW5ndGggPT09IDApIHJldHVybiAnJwogICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHJldHVybiB1dGY4U2xpY2UodGhpcywgMCwgbGVuZ3RoKQogICAgcmV0dXJuIHNsb3dUb1N0cmluZy5hcHBseSh0aGlzLCBhcmd1bWVudHMpCiAgfTsKCiAgQnVmZmVyLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiBlcXVhbHMgKGIpIHsKICAgIGlmICghaW50ZXJuYWxJc0J1ZmZlcihiKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlcicpCiAgICBpZiAodGhpcyA9PT0gYikgcmV0dXJuIHRydWUKICAgIHJldHVybiBCdWZmZXIuY29tcGFyZSh0aGlzLCBiKSA9PT0gMAogIH07CgogIEJ1ZmZlci5wcm90b3R5cGUuaW5zcGVjdCA9IGZ1bmN0aW9uIGluc3BlY3QgKCkgewogICAgdmFyIHN0ciA9ICcnOwogICAgdmFyIG1heCA9IElOU1BFQ1RfTUFYX0JZVEVTOwogICAgaWYgKHRoaXMubGVuZ3RoID4gMCkgewogICAgICBzdHIgPSB0aGlzLnRvU3RyaW5nKCdoZXgnLCAwLCBtYXgpLm1hdGNoKC8uezJ9L2cpLmpvaW4oJyAnKTsKICAgICAgaWYgKHRoaXMubGVuZ3RoID4gbWF4KSBzdHIgKz0gJyAuLi4gJzsKICAgIH0KICAgIHJldHVybiAnPEJ1ZmZlciAnICsgc3RyICsgJz4nCiAgfTsKCiAgQnVmZmVyLnByb3RvdHlwZS5jb21wYXJlID0gZnVuY3Rpb24gY29tcGFyZSAodGFyZ2V0LCBzdGFydCwgZW5kLCB0aGlzU3RhcnQsIHRoaXNFbmQpIHsKICAgIGlmICghaW50ZXJuYWxJc0J1ZmZlcih0YXJnZXQpKSB7CiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXInKQogICAgfQoKICAgIGlmIChzdGFydCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIHN0YXJ0ID0gMDsKICAgIH0KICAgIGlmIChlbmQgPT09IHVuZGVmaW5lZCkgewogICAgICBlbmQgPSB0YXJnZXQgPyB0YXJnZXQubGVuZ3RoIDogMDsKICAgIH0KICAgIGlmICh0aGlzU3RhcnQgPT09IHVuZGVmaW5lZCkgewogICAgICB0aGlzU3RhcnQgPSAwOwogICAgfQogICAgaWYgKHRoaXNFbmQgPT09IHVuZGVmaW5lZCkgewogICAgICB0aGlzRW5kID0gdGhpcy5sZW5ndGg7CiAgICB9CgogICAgaWYgKHN0YXJ0IDwgMCB8fCBlbmQgPiB0YXJnZXQubGVuZ3RoIHx8IHRoaXNTdGFydCA8IDAgfHwgdGhpc0VuZCA+IHRoaXMubGVuZ3RoKSB7CiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdvdXQgb2YgcmFuZ2UgaW5kZXgnKQogICAgfQoKICAgIGlmICh0aGlzU3RhcnQgPj0gdGhpc0VuZCAmJiBzdGFydCA+PSBlbmQpIHsKICAgICAgcmV0dXJuIDAKICAgIH0KICAgIGlmICh0aGlzU3RhcnQgPj0gdGhpc0VuZCkgewogICAgICByZXR1cm4gLTEKICAgIH0KICAgIGlmIChzdGFydCA+PSBlbmQpIHsKICAgICAgcmV0dXJuIDEKICAgIH0KCiAgICBzdGFydCA+Pj49IDA7CiAgICBlbmQgPj4+PSAwOwogICAgdGhpc1N0YXJ0ID4+Pj0gMDsKICAgIHRoaXNFbmQgPj4+PSAwOwoKICAgIGlmICh0aGlzID09PSB0YXJnZXQpIHJldHVybiAwCgogICAgdmFyIHggPSB0aGlzRW5kIC0gdGhpc1N0YXJ0OwogICAgdmFyIHkgPSBlbmQgLSBzdGFydDsKICAgIHZhciBsZW4gPSBNYXRoLm1pbih4LCB5KTsKCiAgICB2YXIgdGhpc0NvcHkgPSB0aGlzLnNsaWNlKHRoaXNTdGFydCwgdGhpc0VuZCk7CiAgICB2YXIgdGFyZ2V0Q29weSA9IHRhcmdldC5zbGljZShzdGFydCwgZW5kKTsKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7CiAgICAgIGlmICh0aGlzQ29weVtpXSAhPT0gdGFyZ2V0Q29weVtpXSkgewogICAgICAgIHggPSB0aGlzQ29weVtpXTsKICAgICAgICB5ID0gdGFyZ2V0Q29weVtpXTsKICAgICAgICBicmVhawogICAgICB9CiAgICB9CgogICAgaWYgKHggPCB5KSByZXR1cm4gLTEKICAgIGlmICh5IDwgeCkgcmV0dXJuIDEKICAgIHJldHVybiAwCiAgfTsKCiAgLy8gRmluZHMgZWl0aGVyIHRoZSBmaXJzdCBpbmRleCBvZiBgdmFsYCBpbiBgYnVmZmVyYCBhdCBvZmZzZXQgPj0gYGJ5dGVPZmZzZXRgLAogIC8vIE9SIHRoZSBsYXN0IGluZGV4IG9mIGB2YWxgIGluIGBidWZmZXJgIGF0IG9mZnNldCA8PSBgYnl0ZU9mZnNldGAuCiAgLy8KICAvLyBBcmd1bWVudHM6CiAgLy8gLSBidWZmZXIgLSBhIEJ1ZmZlciB0byBzZWFyY2gKICAvLyAtIHZhbCAtIGEgc3RyaW5nLCBCdWZmZXIsIG9yIG51bWJlcgogIC8vIC0gYnl0ZU9mZnNldCAtIGFuIGluZGV4IGludG8gYGJ1ZmZlcmA7IHdpbGwgYmUgY2xhbXBlZCB0byBhbiBpbnQzMgogIC8vIC0gZW5jb2RpbmcgLSBhbiBvcHRpb25hbCBlbmNvZGluZywgcmVsZXZhbnQgaXMgdmFsIGlzIGEgc3RyaW5nCiAgLy8gLSBkaXIgLSB0cnVlIGZvciBpbmRleE9mLCBmYWxzZSBmb3IgbGFzdEluZGV4T2YKICBmdW5jdGlvbiBiaWRpcmVjdGlvbmFsSW5kZXhPZiAoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpIHsKICAgIC8vIEVtcHR5IGJ1ZmZlciBtZWFucyBubyBtYXRjaAogICAgaWYgKGJ1ZmZlci5sZW5ndGggPT09IDApIHJldHVybiAtMQoKICAgIC8vIE5vcm1hbGl6ZSBieXRlT2Zmc2V0CiAgICBpZiAodHlwZW9mIGJ5dGVPZmZzZXQgPT09ICdzdHJpbmcnKSB7CiAgICAgIGVuY29kaW5nID0gYnl0ZU9mZnNldDsKICAgICAgYnl0ZU9mZnNldCA9IDA7CiAgICB9IGVsc2UgaWYgKGJ5dGVPZmZzZXQgPiAweDdmZmZmZmZmKSB7CiAgICAgIGJ5dGVPZmZzZXQgPSAweDdmZmZmZmZmOwogICAgfSBlbHNlIGlmIChieXRlT2Zmc2V0IDwgLTB4ODAwMDAwMDApIHsKICAgICAgYnl0ZU9mZnNldCA9IC0weDgwMDAwMDAwOwogICAgfQogICAgYnl0ZU9mZnNldCA9ICtieXRlT2Zmc2V0OyAgLy8gQ29lcmNlIHRvIE51bWJlci4KICAgIGlmIChpc05hTihieXRlT2Zmc2V0KSkgewogICAgICAvLyBieXRlT2Zmc2V0OiBpdCBpdCdzIHVuZGVmaW5lZCwgbnVsbCwgTmFOLCAiZm9vIiwgZXRjLCBzZWFyY2ggd2hvbGUgYnVmZmVyCiAgICAgIGJ5dGVPZmZzZXQgPSBkaXIgPyAwIDogKGJ1ZmZlci5sZW5ndGggLSAxKTsKICAgIH0KCiAgICAvLyBOb3JtYWxpemUgYnl0ZU9mZnNldDogbmVnYXRpdmUgb2Zmc2V0cyBzdGFydCBmcm9tIHRoZSBlbmQgb2YgdGhlIGJ1ZmZlcgogICAgaWYgKGJ5dGVPZmZzZXQgPCAwKSBieXRlT2Zmc2V0ID0gYnVmZmVyLmxlbmd0aCArIGJ5dGVPZmZzZXQ7CiAgICBpZiAoYnl0ZU9mZnNldCA+PSBidWZmZXIubGVuZ3RoKSB7CiAgICAgIGlmIChkaXIpIHJldHVybiAtMQogICAgICBlbHNlIGJ5dGVPZmZzZXQgPSBidWZmZXIubGVuZ3RoIC0gMTsKICAgIH0gZWxzZSBpZiAoYnl0ZU9mZnNldCA8IDApIHsKICAgICAgaWYgKGRpcikgYnl0ZU9mZnNldCA9IDA7CiAgICAgIGVsc2UgcmV0dXJuIC0xCiAgICB9CgogICAgLy8gTm9ybWFsaXplIHZhbAogICAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7CiAgICAgIHZhbCA9IEJ1ZmZlci5mcm9tKHZhbCwgZW5jb2RpbmcpOwogICAgfQoKICAgIC8vIEZpbmFsbHksIHNlYXJjaCBlaXRoZXIgaW5kZXhPZiAoaWYgZGlyIGlzIHRydWUpIG9yIGxhc3RJbmRleE9mCiAgICBpZiAoaW50ZXJuYWxJc0J1ZmZlcih2YWwpKSB7CiAgICAgIC8vIFNwZWNpYWwgY2FzZTogbG9va2luZyBmb3IgZW1wdHkgc3RyaW5nL2J1ZmZlciBhbHdheXMgZmFpbHMKICAgICAgaWYgKHZhbC5sZW5ndGggPT09IDApIHsKICAgICAgICByZXR1cm4gLTEKICAgICAgfQogICAgICByZXR1cm4gYXJyYXlJbmRleE9mKGJ1ZmZlciwgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZGlyKQogICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJykgewogICAgICB2YWwgPSB2YWwgJiAweEZGOyAvLyBTZWFyY2ggZm9yIGEgYnl0ZSB2YWx1ZSBbMC0yNTVdCiAgICAgIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCAmJgogICAgICAgICAgdHlwZW9mIFVpbnQ4QXJyYXkucHJvdG90eXBlLmluZGV4T2YgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICBpZiAoZGlyKSB7CiAgICAgICAgICByZXR1cm4gVWludDhBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGJ1ZmZlciwgdmFsLCBieXRlT2Zmc2V0KQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gVWludDhBcnJheS5wcm90b3R5cGUubGFzdEluZGV4T2YuY2FsbChidWZmZXIsIHZhbCwgYnl0ZU9mZnNldCkKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIGFycmF5SW5kZXhPZihidWZmZXIsIFsgdmFsIF0sIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpCiAgICB9CgogICAgdGhyb3cgbmV3IFR5cGVFcnJvcigndmFsIG11c3QgYmUgc3RyaW5nLCBudW1iZXIgb3IgQnVmZmVyJykKICB9CgogIGZ1bmN0aW9uIGFycmF5SW5kZXhPZiAoYXJyLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpIHsKICAgIHZhciBpbmRleFNpemUgPSAxOwogICAgdmFyIGFyckxlbmd0aCA9IGFyci5sZW5ndGg7CiAgICB2YXIgdmFsTGVuZ3RoID0gdmFsLmxlbmd0aDsKCiAgICBpZiAoZW5jb2RpbmcgIT09IHVuZGVmaW5lZCkgewogICAgICBlbmNvZGluZyA9IFN0cmluZyhlbmNvZGluZykudG9Mb3dlckNhc2UoKTsKICAgICAgaWYgKGVuY29kaW5nID09PSAndWNzMicgfHwgZW5jb2RpbmcgPT09ICd1Y3MtMicgfHwKICAgICAgICAgIGVuY29kaW5nID09PSAndXRmMTZsZScgfHwgZW5jb2RpbmcgPT09ICd1dGYtMTZsZScpIHsKICAgICAgICBpZiAoYXJyLmxlbmd0aCA8IDIgfHwgdmFsLmxlbmd0aCA8IDIpIHsKICAgICAgICAgIHJldHVybiAtMQogICAgICAgIH0KICAgICAgICBpbmRleFNpemUgPSAyOwogICAgICAgIGFyckxlbmd0aCAvPSAyOwogICAgICAgIHZhbExlbmd0aCAvPSAyOwogICAgICAgIGJ5dGVPZmZzZXQgLz0gMjsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHJlYWQgKGJ1ZiwgaSkgewogICAgICBpZiAoaW5kZXhTaXplID09PSAxKSB7CiAgICAgICAgcmV0dXJuIGJ1ZltpXQogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBidWYucmVhZFVJbnQxNkJFKGkgKiBpbmRleFNpemUpCiAgICAgIH0KICAgIH0KCiAgICB2YXIgaTsKICAgIGlmIChkaXIpIHsKICAgICAgdmFyIGZvdW5kSW5kZXggPSAtMTsKICAgICAgZm9yIChpID0gYnl0ZU9mZnNldDsgaSA8IGFyckxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKHJlYWQoYXJyLCBpKSA9PT0gcmVhZCh2YWwsIGZvdW5kSW5kZXggPT09IC0xID8gMCA6IGkgLSBmb3VuZEluZGV4KSkgewogICAgICAgICAgaWYgKGZvdW5kSW5kZXggPT09IC0xKSBmb3VuZEluZGV4ID0gaTsKICAgICAgICAgIGlmIChpIC0gZm91bmRJbmRleCArIDEgPT09IHZhbExlbmd0aCkgcmV0dXJuIGZvdW5kSW5kZXggKiBpbmRleFNpemUKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKGZvdW5kSW5kZXggIT09IC0xKSBpIC09IGkgLSBmb3VuZEluZGV4OwogICAgICAgICAgZm91bmRJbmRleCA9IC0xOwogICAgICAgIH0KICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgaWYgKGJ5dGVPZmZzZXQgKyB2YWxMZW5ndGggPiBhcnJMZW5ndGgpIGJ5dGVPZmZzZXQgPSBhcnJMZW5ndGggLSB2YWxMZW5ndGg7CiAgICAgIGZvciAoaSA9IGJ5dGVPZmZzZXQ7IGkgPj0gMDsgaS0tKSB7CiAgICAgICAgdmFyIGZvdW5kID0gdHJ1ZTsKICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHZhbExlbmd0aDsgaisrKSB7CiAgICAgICAgICBpZiAocmVhZChhcnIsIGkgKyBqKSAhPT0gcmVhZCh2YWwsIGopKSB7CiAgICAgICAgICAgIGZvdW5kID0gZmFsc2U7CiAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChmb3VuZCkgcmV0dXJuIGkKICAgICAgfQogICAgfQoKICAgIHJldHVybiAtMQogIH0KCiAgQnVmZmVyLnByb3RvdHlwZS5pbmNsdWRlcyA9IGZ1bmN0aW9uIGluY2x1ZGVzICh2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nKSB7CiAgICByZXR1cm4gdGhpcy5pbmRleE9mKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpICE9PSAtMQogIH07CgogIEJ1ZmZlci5wcm90b3R5cGUuaW5kZXhPZiA9IGZ1bmN0aW9uIGluZGV4T2YgKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpIHsKICAgIHJldHVybiBiaWRpcmVjdGlvbmFsSW5kZXhPZih0aGlzLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCB0cnVlKQogIH07CgogIEJ1ZmZlci5wcm90b3R5cGUubGFzdEluZGV4T2YgPSBmdW5jdGlvbiBsYXN0SW5kZXhPZiAodmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZykgewogICAgcmV0dXJuIGJpZGlyZWN0aW9uYWxJbmRleE9mKHRoaXMsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGZhbHNlKQogIH07CgogIGZ1bmN0aW9uIGhleFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHsKICAgIG9mZnNldCA9IE51bWJlcihvZmZzZXQpIHx8IDA7CiAgICB2YXIgcmVtYWluaW5nID0gYnVmLmxlbmd0aCAtIG9mZnNldDsKICAgIGlmICghbGVuZ3RoKSB7CiAgICAgIGxlbmd0aCA9IHJlbWFpbmluZzsKICAgIH0gZWxzZSB7CiAgICAgIGxlbmd0aCA9IE51bWJlcihsZW5ndGgpOwogICAgICBpZiAobGVuZ3RoID4gcmVtYWluaW5nKSB7CiAgICAgICAgbGVuZ3RoID0gcmVtYWluaW5nOwogICAgICB9CiAgICB9CgogICAgLy8gbXVzdCBiZSBhbiBldmVuIG51bWJlciBvZiBkaWdpdHMKICAgIHZhciBzdHJMZW4gPSBzdHJpbmcubGVuZ3RoOwogICAgaWYgKHN0ckxlbiAlIDIgIT09IDApIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgaGV4IHN0cmluZycpCgogICAgaWYgKGxlbmd0aCA+IHN0ckxlbiAvIDIpIHsKICAgICAgbGVuZ3RoID0gc3RyTGVuIC8gMjsKICAgIH0KICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHsKICAgICAgdmFyIHBhcnNlZCA9IHBhcnNlSW50KHN0cmluZy5zdWJzdHIoaSAqIDIsIDIpLCAxNik7CiAgICAgIGlmIChpc05hTihwYXJzZWQpKSByZXR1cm4gaQogICAgICBidWZbb2Zmc2V0ICsgaV0gPSBwYXJzZWQ7CiAgICB9CiAgICByZXR1cm4gaQogIH0KCiAgZnVuY3Rpb24gdXRmOFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHsKICAgIHJldHVybiBibGl0QnVmZmVyKHV0ZjhUb0J5dGVzKHN0cmluZywgYnVmLmxlbmd0aCAtIG9mZnNldCksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpCiAgfQoKICBmdW5jdGlvbiBhc2NpaVdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHsKICAgIHJldHVybiBibGl0QnVmZmVyKGFzY2lpVG9CeXRlcyhzdHJpbmcpLCBidWYsIG9mZnNldCwgbGVuZ3RoKQogIH0KCiAgZnVuY3Rpb24gbGF0aW4xV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkgewogICAgcmV0dXJuIGFzY2lpV3JpdGUoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKQogIH0KCiAgZnVuY3Rpb24gYmFzZTY0V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkgewogICAgcmV0dXJuIGJsaXRCdWZmZXIoYmFzZTY0VG9CeXRlcyhzdHJpbmcpLCBidWYsIG9mZnNldCwgbGVuZ3RoKQogIH0KCiAgZnVuY3Rpb24gdWNzMldyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHsKICAgIHJldHVybiBibGl0QnVmZmVyKHV0ZjE2bGVUb0J5dGVzKHN0cmluZywgYnVmLmxlbmd0aCAtIG9mZnNldCksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpCiAgfQoKICBCdWZmZXIucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gd3JpdGUgKHN0cmluZywgb2Zmc2V0LCBsZW5ndGgsIGVuY29kaW5nKSB7CiAgICAvLyBCdWZmZXIjd3JpdGUoc3RyaW5nKQogICAgaWYgKG9mZnNldCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIGVuY29kaW5nID0gJ3V0ZjgnOwogICAgICBsZW5ndGggPSB0aGlzLmxlbmd0aDsKICAgICAgb2Zmc2V0ID0gMDsKICAgIC8vIEJ1ZmZlciN3cml0ZShzdHJpbmcsIGVuY29kaW5nKQogICAgfSBlbHNlIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygb2Zmc2V0ID09PSAnc3RyaW5nJykgewogICAgICBlbmNvZGluZyA9IG9mZnNldDsKICAgICAgbGVuZ3RoID0gdGhpcy5sZW5ndGg7CiAgICAgIG9mZnNldCA9IDA7CiAgICAvLyBCdWZmZXIjd3JpdGUoc3RyaW5nLCBvZmZzZXRbLCBsZW5ndGhdWywgZW5jb2RpbmddKQogICAgfSBlbHNlIGlmIChpc0Zpbml0ZShvZmZzZXQpKSB7CiAgICAgIG9mZnNldCA9IG9mZnNldCB8IDA7CiAgICAgIGlmIChpc0Zpbml0ZShsZW5ndGgpKSB7CiAgICAgICAgbGVuZ3RoID0gbGVuZ3RoIHwgMDsKICAgICAgICBpZiAoZW5jb2RpbmcgPT09IHVuZGVmaW5lZCkgZW5jb2RpbmcgPSAndXRmOCc7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZW5jb2RpbmcgPSBsZW5ndGg7CiAgICAgICAgbGVuZ3RoID0gdW5kZWZpbmVkOwogICAgICB9CiAgICAvLyBsZWdhY3kgd3JpdGUoc3RyaW5nLCBlbmNvZGluZywgb2Zmc2V0LCBsZW5ndGgpIC0gcmVtb3ZlIGluIHYwLjEzCiAgICB9IGVsc2UgewogICAgICB0aHJvdyBuZXcgRXJyb3IoCiAgICAgICAgJ0J1ZmZlci53cml0ZShzdHJpbmcsIGVuY29kaW5nLCBvZmZzZXRbLCBsZW5ndGhdKSBpcyBubyBsb25nZXIgc3VwcG9ydGVkJwogICAgICApCiAgICB9CgogICAgdmFyIHJlbWFpbmluZyA9IHRoaXMubGVuZ3RoIC0gb2Zmc2V0OwogICAgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkIHx8IGxlbmd0aCA+IHJlbWFpbmluZykgbGVuZ3RoID0gcmVtYWluaW5nOwoKICAgIGlmICgoc3RyaW5nLmxlbmd0aCA+IDAgJiYgKGxlbmd0aCA8IDAgfHwgb2Zmc2V0IDwgMCkpIHx8IG9mZnNldCA+IHRoaXMubGVuZ3RoKSB7CiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdBdHRlbXB0IHRvIHdyaXRlIG91dHNpZGUgYnVmZmVyIGJvdW5kcycpCiAgICB9CgogICAgaWYgKCFlbmNvZGluZykgZW5jb2RpbmcgPSAndXRmOCc7CgogICAgdmFyIGxvd2VyZWRDYXNlID0gZmFsc2U7CiAgICBmb3IgKDs7KSB7CiAgICAgIHN3aXRjaCAoZW5jb2RpbmcpIHsKICAgICAgICBjYXNlICdoZXgnOgogICAgICAgICAgcmV0dXJuIGhleFdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpCgogICAgICAgIGNhc2UgJ3V0ZjgnOgogICAgICAgIGNhc2UgJ3V0Zi04JzoKICAgICAgICAgIHJldHVybiB1dGY4V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkKCiAgICAgICAgY2FzZSAnYXNjaWknOgogICAgICAgICAgcmV0dXJuIGFzY2lpV3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkKCiAgICAgICAgY2FzZSAnbGF0aW4xJzoKICAgICAgICBjYXNlICdiaW5hcnknOgogICAgICAgICAgcmV0dXJuIGxhdGluMVdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpCgogICAgICAgIGNhc2UgJ2Jhc2U2NCc6CiAgICAgICAgICAvLyBXYXJuaW5nOiBtYXhMZW5ndGggbm90IHRha2VuIGludG8gYWNjb3VudCBpbiBiYXNlNjRXcml0ZQogICAgICAgICAgcmV0dXJuIGJhc2U2NFdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpCgogICAgICAgIGNhc2UgJ3VjczInOgogICAgICAgIGNhc2UgJ3Vjcy0yJzoKICAgICAgICBjYXNlICd1dGYxNmxlJzoKICAgICAgICBjYXNlICd1dGYtMTZsZSc6CiAgICAgICAgICByZXR1cm4gdWNzMldyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpCgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICBpZiAobG93ZXJlZENhc2UpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZykKICAgICAgICAgIGVuY29kaW5nID0gKCcnICsgZW5jb2RpbmcpLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWU7CiAgICAgIH0KICAgIH0KICB9OwoKICBCdWZmZXIucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTiAoKSB7CiAgICByZXR1cm4gewogICAgICB0eXBlOiAnQnVmZmVyJywKICAgICAgZGF0YTogQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGhpcy5fYXJyIHx8IHRoaXMsIDApCiAgICB9CiAgfTsKCiAgZnVuY3Rpb24gYmFzZTY0U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkgewogICAgaWYgKHN0YXJ0ID09PSAwICYmIGVuZCA9PT0gYnVmLmxlbmd0aCkgewogICAgICByZXR1cm4gZnJvbUJ5dGVBcnJheSQxKGJ1ZikKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBmcm9tQnl0ZUFycmF5JDEoYnVmLnNsaWNlKHN0YXJ0LCBlbmQpKQogICAgfQogIH0KCiAgZnVuY3Rpb24gdXRmOFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHsKICAgIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZCk7CiAgICB2YXIgcmVzID0gW107CgogICAgdmFyIGkgPSBzdGFydDsKICAgIHdoaWxlIChpIDwgZW5kKSB7CiAgICAgIHZhciBmaXJzdEJ5dGUgPSBidWZbaV07CiAgICAgIHZhciBjb2RlUG9pbnQgPSBudWxsOwogICAgICB2YXIgYnl0ZXNQZXJTZXF1ZW5jZSA9IChmaXJzdEJ5dGUgPiAweEVGKSA/IDQKICAgICAgICA6IChmaXJzdEJ5dGUgPiAweERGKSA/IDMKICAgICAgICA6IChmaXJzdEJ5dGUgPiAweEJGKSA/IDIKICAgICAgICA6IDE7CgogICAgICBpZiAoaSArIGJ5dGVzUGVyU2VxdWVuY2UgPD0gZW5kKSB7CiAgICAgICAgdmFyIHNlY29uZEJ5dGUsIHRoaXJkQnl0ZSwgZm91cnRoQnl0ZSwgdGVtcENvZGVQb2ludDsKCiAgICAgICAgc3dpdGNoIChieXRlc1BlclNlcXVlbmNlKSB7CiAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgIGlmIChmaXJzdEJ5dGUgPCAweDgwKSB7CiAgICAgICAgICAgICAgY29kZVBvaW50ID0gZmlyc3RCeXRlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdOwogICAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkgewogICAgICAgICAgICAgIHRlbXBDb2RlUG9pbnQgPSAoZmlyc3RCeXRlICYgMHgxRikgPDwgMHg2IHwgKHNlY29uZEJ5dGUgJiAweDNGKTsKICAgICAgICAgICAgICBpZiAodGVtcENvZGVQb2ludCA+IDB4N0YpIHsKICAgICAgICAgICAgICAgIGNvZGVQb2ludCA9IHRlbXBDb2RlUG9pbnQ7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdOwogICAgICAgICAgICB0aGlyZEJ5dGUgPSBidWZbaSArIDJdOwogICAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAodGhpcmRCeXRlICYgMHhDMCkgPT09IDB4ODApIHsKICAgICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4RikgPDwgMHhDIHwgKHNlY29uZEJ5dGUgJiAweDNGKSA8PCAweDYgfCAodGhpcmRCeXRlICYgMHgzRik7CiAgICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweDdGRiAmJiAodGVtcENvZGVQb2ludCA8IDB4RDgwMCB8fCB0ZW1wQ29kZVBvaW50ID4gMHhERkZGKSkgewogICAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnJlYWsKICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgc2Vjb25kQnl0ZSA9IGJ1ZltpICsgMV07CiAgICAgICAgICAgIHRoaXJkQnl0ZSA9IGJ1ZltpICsgMl07CiAgICAgICAgICAgIGZvdXJ0aEJ5dGUgPSBidWZbaSArIDNdOwogICAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAodGhpcmRCeXRlICYgMHhDMCkgPT09IDB4ODAgJiYgKGZvdXJ0aEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkgewogICAgICAgICAgICAgIHRlbXBDb2RlUG9pbnQgPSAoZmlyc3RCeXRlICYgMHhGKSA8PCAweDEyIHwgKHNlY29uZEJ5dGUgJiAweDNGKSA8PCAweEMgfCAodGhpcmRCeXRlICYgMHgzRikgPDwgMHg2IHwgKGZvdXJ0aEJ5dGUgJiAweDNGKTsKICAgICAgICAgICAgICBpZiAodGVtcENvZGVQb2ludCA+IDB4RkZGRiAmJiB0ZW1wQ29kZVBvaW50IDwgMHgxMTAwMDApIHsKICAgICAgICAgICAgICAgIGNvZGVQb2ludCA9IHRlbXBDb2RlUG9pbnQ7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoY29kZVBvaW50ID09PSBudWxsKSB7CiAgICAgICAgLy8gd2UgZGlkIG5vdCBnZW5lcmF0ZSBhIHZhbGlkIGNvZGVQb2ludCBzbyBpbnNlcnQgYQogICAgICAgIC8vIHJlcGxhY2VtZW50IGNoYXIgKFUrRkZGRCkgYW5kIGFkdmFuY2Ugb25seSAxIGJ5dGUKICAgICAgICBjb2RlUG9pbnQgPSAweEZGRkQ7CiAgICAgICAgYnl0ZXNQZXJTZXF1ZW5jZSA9IDE7CiAgICAgIH0gZWxzZSBpZiAoY29kZVBvaW50ID4gMHhGRkZGKSB7CiAgICAgICAgLy8gZW5jb2RlIHRvIHV0ZjE2IChzdXJyb2dhdGUgcGFpciBkYW5jZSkKICAgICAgICBjb2RlUG9pbnQgLT0gMHgxMDAwMDsKICAgICAgICByZXMucHVzaChjb2RlUG9pbnQgPj4+IDEwICYgMHgzRkYgfCAweEQ4MDApOwogICAgICAgIGNvZGVQb2ludCA9IDB4REMwMCB8IGNvZGVQb2ludCAmIDB4M0ZGOwogICAgICB9CgogICAgICByZXMucHVzaChjb2RlUG9pbnQpOwogICAgICBpICs9IGJ5dGVzUGVyU2VxdWVuY2U7CiAgICB9CgogICAgcmV0dXJuIGRlY29kZUNvZGVQb2ludHNBcnJheShyZXMpCiAgfQoKICAvLyBCYXNlZCBvbiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yMjc0NzI3Mi82ODA3NDIsIHRoZSBicm93c2VyIHdpdGgKICAvLyB0aGUgbG93ZXN0IGxpbWl0IGlzIENocm9tZSwgd2l0aCAweDEwMDAwIGFyZ3MuCiAgLy8gV2UgZ28gMSBtYWduaXR1ZGUgbGVzcywgZm9yIHNhZmV0eQogIHZhciBNQVhfQVJHVU1FTlRTX0xFTkdUSCA9IDB4MTAwMDsKCiAgZnVuY3Rpb24gZGVjb2RlQ29kZVBvaW50c0FycmF5IChjb2RlUG9pbnRzKSB7CiAgICB2YXIgbGVuID0gY29kZVBvaW50cy5sZW5ndGg7CiAgICBpZiAobGVuIDw9IE1BWF9BUkdVTUVOVFNfTEVOR1RIKSB7CiAgICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZywgY29kZVBvaW50cykgLy8gYXZvaWQgZXh0cmEgc2xpY2UoKQogICAgfQoKICAgIC8vIERlY29kZSBpbiBjaHVua3MgdG8gYXZvaWQgImNhbGwgc3RhY2sgc2l6ZSBleGNlZWRlZCIuCiAgICB2YXIgcmVzID0gJyc7CiAgICB2YXIgaSA9IDA7CiAgICB3aGlsZSAoaSA8IGxlbikgewogICAgICByZXMgKz0gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseSgKICAgICAgICBTdHJpbmcsCiAgICAgICAgY29kZVBvaW50cy5zbGljZShpLCBpICs9IE1BWF9BUkdVTUVOVFNfTEVOR1RIKQogICAgICApOwogICAgfQogICAgcmV0dXJuIHJlcwogIH0KCiAgZnVuY3Rpb24gYXNjaWlTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7CiAgICB2YXIgcmV0ID0gJyc7CiAgICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpOwoKICAgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgKytpKSB7CiAgICAgIHJldCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ1ZltpXSAmIDB4N0YpOwogICAgfQogICAgcmV0dXJuIHJldAogIH0KCiAgZnVuY3Rpb24gbGF0aW4xU2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkgewogICAgdmFyIHJldCA9ICcnOwogICAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKTsKCiAgICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkgewogICAgICByZXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShidWZbaV0pOwogICAgfQogICAgcmV0dXJuIHJldAogIH0KCiAgZnVuY3Rpb24gaGV4U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkgewogICAgdmFyIGxlbiA9IGJ1Zi5sZW5ndGg7CgogICAgaWYgKCFzdGFydCB8fCBzdGFydCA8IDApIHN0YXJ0ID0gMDsKICAgIGlmICghZW5kIHx8IGVuZCA8IDAgfHwgZW5kID4gbGVuKSBlbmQgPSBsZW47CgogICAgdmFyIG91dCA9ICcnOwogICAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHsKICAgICAgb3V0ICs9IHRvSGV4JDEoYnVmW2ldKTsKICAgIH0KICAgIHJldHVybiBvdXQKICB9CgogIGZ1bmN0aW9uIHV0ZjE2bGVTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7CiAgICB2YXIgYnl0ZXMgPSBidWYuc2xpY2Uoc3RhcnQsIGVuZCk7CiAgICB2YXIgcmVzID0gJyc7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJ5dGVzLmxlbmd0aDsgaSArPSAyKSB7CiAgICAgIHJlcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ5dGVzW2ldICsgYnl0ZXNbaSArIDFdICogMjU2KTsKICAgIH0KICAgIHJldHVybiByZXMKICB9CgogIEJ1ZmZlci5wcm90b3R5cGUuc2xpY2UgPSBmdW5jdGlvbiBzbGljZSAoc3RhcnQsIGVuZCkgewogICAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoOwogICAgc3RhcnQgPSB+fnN0YXJ0OwogICAgZW5kID0gZW5kID09PSB1bmRlZmluZWQgPyBsZW4gOiB+fmVuZDsKCiAgICBpZiAoc3RhcnQgPCAwKSB7CiAgICAgIHN0YXJ0ICs9IGxlbjsKICAgICAgaWYgKHN0YXJ0IDwgMCkgc3RhcnQgPSAwOwogICAgfSBlbHNlIGlmIChzdGFydCA+IGxlbikgewogICAgICBzdGFydCA9IGxlbjsKICAgIH0KCiAgICBpZiAoZW5kIDwgMCkgewogICAgICBlbmQgKz0gbGVuOwogICAgICBpZiAoZW5kIDwgMCkgZW5kID0gMDsKICAgIH0gZWxzZSBpZiAoZW5kID4gbGVuKSB7CiAgICAgIGVuZCA9IGxlbjsKICAgIH0KCiAgICBpZiAoZW5kIDwgc3RhcnQpIGVuZCA9IHN0YXJ0OwoKICAgIHZhciBuZXdCdWY7CiAgICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHsKICAgICAgbmV3QnVmID0gdGhpcy5zdWJhcnJheShzdGFydCwgZW5kKTsKICAgICAgbmV3QnVmLl9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGU7CiAgICB9IGVsc2UgewogICAgICB2YXIgc2xpY2VMZW4gPSBlbmQgLSBzdGFydDsKICAgICAgbmV3QnVmID0gbmV3IEJ1ZmZlcihzbGljZUxlbiwgdW5kZWZpbmVkKTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzbGljZUxlbjsgKytpKSB7CiAgICAgICAgbmV3QnVmW2ldID0gdGhpc1tpICsgc3RhcnRdOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG5ld0J1ZgogIH07CgogIC8qCiAgICogTmVlZCB0byBtYWtlIHN1cmUgdGhhdCBidWZmZXIgaXNuJ3QgdHJ5aW5nIHRvIHdyaXRlIG91dCBvZiBib3VuZHMuCiAgICovCiAgZnVuY3Rpb24gY2hlY2tPZmZzZXQgKG9mZnNldCwgZXh0LCBsZW5ndGgpIHsKICAgIGlmICgob2Zmc2V0ICUgMSkgIT09IDAgfHwgb2Zmc2V0IDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ29mZnNldCBpcyBub3QgdWludCcpCiAgICBpZiAob2Zmc2V0ICsgZXh0ID4gbGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignVHJ5aW5nIHRvIGFjY2VzcyBiZXlvbmQgYnVmZmVyIGxlbmd0aCcpCiAgfQoKICBCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50TEUgPSBmdW5jdGlvbiByZWFkVUludExFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7CiAgICBvZmZzZXQgPSBvZmZzZXQgfCAwOwogICAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwOwogICAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aCk7CgogICAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XTsKICAgIHZhciBtdWwgPSAxOwogICAgdmFyIGkgPSAwOwogICAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHsKICAgICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgaV0gKiBtdWw7CiAgICB9CgogICAgcmV0dXJuIHZhbAogIH07CgogIEJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnRCRSA9IGZ1bmN0aW9uIHJlYWRVSW50QkUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHsKICAgIG9mZnNldCA9IG9mZnNldCB8IDA7CiAgICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDA7CiAgICBpZiAoIW5vQXNzZXJ0KSB7CiAgICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpOwogICAgfQoKICAgIHZhciB2YWwgPSB0aGlzW29mZnNldCArIC0tYnl0ZUxlbmd0aF07CiAgICB2YXIgbXVsID0gMTsKICAgIHdoaWxlIChieXRlTGVuZ3RoID4gMCAmJiAobXVsICo9IDB4MTAwKSkgewogICAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyAtLWJ5dGVMZW5ndGhdICogbXVsOwogICAgfQoKICAgIHJldHVybiB2YWwKICB9OwoKICBCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50OCA9IGZ1bmN0aW9uIHJlYWRVSW50OCAob2Zmc2V0LCBub0Fzc2VydCkgewogICAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAxLCB0aGlzLmxlbmd0aCk7CiAgICByZXR1cm4gdGhpc1tvZmZzZXRdCiAgfTsKCiAgQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDE2TEUgPSBmdW5jdGlvbiByZWFkVUludDE2TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHsKICAgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpOwogICAgcmV0dXJuIHRoaXNbb2Zmc2V0XSB8ICh0aGlzW29mZnNldCArIDFdIDw8IDgpCiAgfTsKCiAgQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDE2QkUgPSBmdW5jdGlvbiByZWFkVUludDE2QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHsKICAgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpOwogICAgcmV0dXJuICh0aGlzW29mZnNldF0gPDwgOCkgfCB0aGlzW29mZnNldCArIDFdCiAgfTsKCiAgQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDMyTEUgPSBmdW5jdGlvbiByZWFkVUludDMyTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHsKICAgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpOwoKICAgIHJldHVybiAoKHRoaXNbb2Zmc2V0XSkgfAogICAgICAgICh0aGlzW29mZnNldCArIDFdIDw8IDgpIHwKICAgICAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCAxNikpICsKICAgICAgICAodGhpc1tvZmZzZXQgKyAzXSAqIDB4MTAwMDAwMCkKICB9OwoKICBCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MzJCRSA9IGZ1bmN0aW9uIHJlYWRVSW50MzJCRSAob2Zmc2V0LCBub0Fzc2VydCkgewogICAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aCk7CgogICAgcmV0dXJuICh0aGlzW29mZnNldF0gKiAweDEwMDAwMDApICsKICAgICAgKCh0aGlzW29mZnNldCArIDFdIDw8IDE2KSB8CiAgICAgICh0aGlzW29mZnNldCArIDJdIDw8IDgpIHwKICAgICAgdGhpc1tvZmZzZXQgKyAzXSkKICB9OwoKICBCdWZmZXIucHJvdG90eXBlLnJlYWRJbnRMRSA9IGZ1bmN0aW9uIHJlYWRJbnRMRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkgewogICAgb2Zmc2V0ID0gb2Zmc2V0IHwgMDsKICAgIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMDsKICAgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpOwoKICAgIHZhciB2YWwgPSB0aGlzW29mZnNldF07CiAgICB2YXIgbXVsID0gMTsKICAgIHZhciBpID0gMDsKICAgIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7CiAgICAgIHZhbCArPSB0aGlzW29mZnNldCArIGldICogbXVsOwogICAgfQogICAgbXVsICo9IDB4ODA7CgogICAgaWYgKHZhbCA+PSBtdWwpIHZhbCAtPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCk7CgogICAgcmV0dXJuIHZhbAogIH07CgogIEJ1ZmZlci5wcm90b3R5cGUucmVhZEludEJFID0gZnVuY3Rpb24gcmVhZEludEJFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7CiAgICBvZmZzZXQgPSBvZmZzZXQgfCAwOwogICAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwOwogICAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aCk7CgogICAgdmFyIGkgPSBieXRlTGVuZ3RoOwogICAgdmFyIG11bCA9IDE7CiAgICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAtLWldOwogICAgd2hpbGUgKGkgPiAwICYmIChtdWwgKj0gMHgxMDApKSB7CiAgICAgIHZhbCArPSB0aGlzW29mZnNldCArIC0taV0gKiBtdWw7CiAgICB9CiAgICBtdWwgKj0gMHg4MDsKCiAgICBpZiAodmFsID49IG11bCkgdmFsIC09IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKTsKCiAgICByZXR1cm4gdmFsCiAgfTsKCiAgQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50OCA9IGZ1bmN0aW9uIHJlYWRJbnQ4IChvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDEsIHRoaXMubGVuZ3RoKTsKICAgIGlmICghKHRoaXNbb2Zmc2V0XSAmIDB4ODApKSByZXR1cm4gKHRoaXNbb2Zmc2V0XSkKICAgIHJldHVybiAoKDB4ZmYgLSB0aGlzW29mZnNldF0gKyAxKSAqIC0xKQogIH07CgogIEJ1ZmZlci5wcm90b3R5cGUucmVhZEludDE2TEUgPSBmdW5jdGlvbiByZWFkSW50MTZMRSAob2Zmc2V0LCBub0Fzc2VydCkgewogICAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aCk7CiAgICB2YXIgdmFsID0gdGhpc1tvZmZzZXRdIHwgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOCk7CiAgICByZXR1cm4gKHZhbCAmIDB4ODAwMCkgPyB2YWwgfCAweEZGRkYwMDAwIDogdmFsCiAgfTsKCiAgQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MTZCRSA9IGZ1bmN0aW9uIHJlYWRJbnQxNkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKTsKICAgIHZhciB2YWwgPSB0aGlzW29mZnNldCArIDFdIHwgKHRoaXNbb2Zmc2V0XSA8PCA4KTsKICAgIHJldHVybiAodmFsICYgMHg4MDAwKSA/IHZhbCB8IDB4RkZGRjAwMDAgOiB2YWwKICB9OwoKICBCdWZmZXIucHJvdG90eXBlLnJlYWRJbnQzMkxFID0gZnVuY3Rpb24gcmVhZEludDMyTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHsKICAgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpOwoKICAgIHJldHVybiAodGhpc1tvZmZzZXRdKSB8CiAgICAgICh0aGlzW29mZnNldCArIDFdIDw8IDgpIHwKICAgICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgMTYpIHwKICAgICAgKHRoaXNbb2Zmc2V0ICsgM10gPDwgMjQpCiAgfTsKCiAgQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MzJCRSA9IGZ1bmN0aW9uIHJlYWRJbnQzMkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKTsKCiAgICByZXR1cm4gKHRoaXNbb2Zmc2V0XSA8PCAyNCkgfAogICAgICAodGhpc1tvZmZzZXQgKyAxXSA8PCAxNikgfAogICAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCA4KSB8CiAgICAgICh0aGlzW29mZnNldCArIDNdKQogIH07CgogIEJ1ZmZlci5wcm90b3R5cGUucmVhZEZsb2F0TEUgPSBmdW5jdGlvbiByZWFkRmxvYXRMRSAob2Zmc2V0LCBub0Fzc2VydCkgewogICAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aCk7CiAgICByZXR1cm4gcmVhZCh0aGlzLCBvZmZzZXQsIHRydWUsIDIzLCA0KQogIH07CgogIEJ1ZmZlci5wcm90b3R5cGUucmVhZEZsb2F0QkUgPSBmdW5jdGlvbiByZWFkRmxvYXRCRSAob2Zmc2V0LCBub0Fzc2VydCkgewogICAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aCk7CiAgICByZXR1cm4gcmVhZCh0aGlzLCBvZmZzZXQsIGZhbHNlLCAyMywgNCkKICB9OwoKICBCdWZmZXIucHJvdG90eXBlLnJlYWREb3VibGVMRSA9IGZ1bmN0aW9uIHJlYWREb3VibGVMRSAob2Zmc2V0LCBub0Fzc2VydCkgewogICAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA4LCB0aGlzLmxlbmd0aCk7CiAgICByZXR1cm4gcmVhZCh0aGlzLCBvZmZzZXQsIHRydWUsIDUyLCA4KQogIH07CgogIEJ1ZmZlci5wcm90b3R5cGUucmVhZERvdWJsZUJFID0gZnVuY3Rpb24gcmVhZERvdWJsZUJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDgsIHRoaXMubGVuZ3RoKTsKICAgIHJldHVybiByZWFkKHRoaXMsIG9mZnNldCwgZmFsc2UsIDUyLCA4KQogIH07CgogIGZ1bmN0aW9uIGNoZWNrSW50IChidWYsIHZhbHVlLCBvZmZzZXQsIGV4dCwgbWF4LCBtaW4pIHsKICAgIGlmICghaW50ZXJuYWxJc0J1ZmZlcihidWYpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCciYnVmZmVyIiBhcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyIGluc3RhbmNlJykKICAgIGlmICh2YWx1ZSA+IG1heCB8fCB2YWx1ZSA8IG1pbikgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJyJ2YWx1ZSIgYXJndW1lbnQgaXMgb3V0IG9mIGJvdW5kcycpCiAgICBpZiAob2Zmc2V0ICsgZXh0ID4gYnVmLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0luZGV4IG91dCBvZiByYW5nZScpCiAgfQoKICBCdWZmZXIucHJvdG90eXBlLndyaXRlVUludExFID0gZnVuY3Rpb24gd3JpdGVVSW50TEUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7CiAgICB2YWx1ZSA9ICt2YWx1ZTsKICAgIG9mZnNldCA9IG9mZnNldCB8IDA7CiAgICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDA7CiAgICBpZiAoIW5vQXNzZXJ0KSB7CiAgICAgIHZhciBtYXhCeXRlcyA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKSAtIDE7CiAgICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG1heEJ5dGVzLCAwKTsKICAgIH0KCiAgICB2YXIgbXVsID0gMTsKICAgIHZhciBpID0gMDsKICAgIHRoaXNbb2Zmc2V0XSA9IHZhbHVlICYgMHhGRjsKICAgIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7CiAgICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAodmFsdWUgLyBtdWwpICYgMHhGRjsKICAgIH0KCiAgICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aAogIH07CgogIEJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50QkUgPSBmdW5jdGlvbiB3cml0ZVVJbnRCRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHsKICAgIHZhbHVlID0gK3ZhbHVlOwogICAgb2Zmc2V0ID0gb2Zmc2V0IHwgMDsKICAgIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMDsKICAgIGlmICghbm9Bc3NlcnQpIHsKICAgICAgdmFyIG1heEJ5dGVzID0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpIC0gMTsKICAgICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbWF4Qnl0ZXMsIDApOwogICAgfQoKICAgIHZhciBpID0gYnl0ZUxlbmd0aCAtIDE7CiAgICB2YXIgbXVsID0gMTsKICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSB2YWx1ZSAmIDB4RkY7CiAgICB3aGlsZSAoLS1pID49IDAgJiYgKG11bCAqPSAweDEwMCkpIHsKICAgICAgdGhpc1tvZmZzZXQgKyBpXSA9ICh2YWx1ZSAvIG11bCkgJiAweEZGOwogICAgfQoKICAgIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoCiAgfTsKCiAgQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQ4ID0gZnVuY3Rpb24gd3JpdGVVSW50OCAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKICAgIHZhbHVlID0gK3ZhbHVlOwogICAgb2Zmc2V0ID0gb2Zmc2V0IHwgMDsKICAgIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDEsIDB4ZmYsIDApOwogICAgaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgdmFsdWUgPSBNYXRoLmZsb29yKHZhbHVlKTsKICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpOwogICAgcmV0dXJuIG9mZnNldCArIDEKICB9OwoKICBmdW5jdGlvbiBvYmplY3RXcml0ZVVJbnQxNiAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4pIHsKICAgIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZmZmICsgdmFsdWUgKyAxOwogICAgZm9yICh2YXIgaSA9IDAsIGogPSBNYXRoLm1pbihidWYubGVuZ3RoIC0gb2Zmc2V0LCAyKTsgaSA8IGo7ICsraSkgewogICAgICBidWZbb2Zmc2V0ICsgaV0gPSAodmFsdWUgJiAoMHhmZiA8PCAoOCAqIChsaXR0bGVFbmRpYW4gPyBpIDogMSAtIGkpKSkpID4+PgogICAgICAgIChsaXR0bGVFbmRpYW4gPyBpIDogMSAtIGkpICogODsKICAgIH0KICB9CgogIEJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MTZMRSA9IGZ1bmN0aW9uIHdyaXRlVUludDE2TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgICB2YWx1ZSA9ICt2YWx1ZTsKICAgIG9mZnNldCA9IG9mZnNldCB8IDA7CiAgICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweGZmZmYsIDApOwogICAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7CiAgICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpOwogICAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KTsKICAgIH0gZWxzZSB7CiAgICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpOwogICAgfQogICAgcmV0dXJuIG9mZnNldCArIDIKICB9OwoKICBCdWZmZXIucHJvdG90eXBlLndyaXRlVUludDE2QkUgPSBmdW5jdGlvbiB3cml0ZVVJbnQxNkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewogICAgdmFsdWUgPSArdmFsdWU7CiAgICBvZmZzZXQgPSBvZmZzZXQgfCAwOwogICAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHhmZmZmLCAwKTsKICAgIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgewogICAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDgpOwogICAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlICYgMHhmZik7CiAgICB9IGVsc2UgewogICAgICBvYmplY3RXcml0ZVVJbnQxNih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSk7CiAgICB9CiAgICByZXR1cm4gb2Zmc2V0ICsgMgogIH07CgogIGZ1bmN0aW9uIG9iamVjdFdyaXRlVUludDMyIChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbikgewogICAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmZmZmZmZmICsgdmFsdWUgKyAxOwogICAgZm9yICh2YXIgaSA9IDAsIGogPSBNYXRoLm1pbihidWYubGVuZ3RoIC0gb2Zmc2V0LCA0KTsgaSA8IGo7ICsraSkgewogICAgICBidWZbb2Zmc2V0ICsgaV0gPSAodmFsdWUgPj4+IChsaXR0bGVFbmRpYW4gPyBpIDogMyAtIGkpICogOCkgJiAweGZmOwogICAgfQogIH0KCiAgQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQzMkxFID0gZnVuY3Rpb24gd3JpdGVVSW50MzJMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKICAgIHZhbHVlID0gK3ZhbHVlOwogICAgb2Zmc2V0ID0gb2Zmc2V0IHwgMDsKICAgIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4ZmZmZmZmZmYsIDApOwogICAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7CiAgICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgPj4+IDI0KTsKICAgICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gMTYpOwogICAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KTsKICAgICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZik7CiAgICB9IGVsc2UgewogICAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKTsKICAgIH0KICAgIHJldHVybiBvZmZzZXQgKyA0CiAgfTsKCiAgQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQzMkJFID0gZnVuY3Rpb24gd3JpdGVVSW50MzJCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKICAgIHZhbHVlID0gK3ZhbHVlOwogICAgb2Zmc2V0ID0gb2Zmc2V0IHwgMDsKICAgIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4ZmZmZmZmZmYsIDApOwogICAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7CiAgICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gMjQpOwogICAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiAxNik7CiAgICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDgpOwogICAgICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlICYgMHhmZik7CiAgICB9IGVsc2UgewogICAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSk7CiAgICB9CiAgICByZXR1cm4gb2Zmc2V0ICsgNAogIH07CgogIEJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnRMRSA9IGZ1bmN0aW9uIHdyaXRlSW50TEUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7CiAgICB2YWx1ZSA9ICt2YWx1ZTsKICAgIG9mZnNldCA9IG9mZnNldCB8IDA7CiAgICBpZiAoIW5vQXNzZXJ0KSB7CiAgICAgIHZhciBsaW1pdCA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoIC0gMSk7CgogICAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBsaW1pdCAtIDEsIC1saW1pdCk7CiAgICB9CgogICAgdmFyIGkgPSAwOwogICAgdmFyIG11bCA9IDE7CiAgICB2YXIgc3ViID0gMDsKICAgIHRoaXNbb2Zmc2V0XSA9IHZhbHVlICYgMHhGRjsKICAgIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7CiAgICAgIGlmICh2YWx1ZSA8IDAgJiYgc3ViID09PSAwICYmIHRoaXNbb2Zmc2V0ICsgaSAtIDFdICE9PSAwKSB7CiAgICAgICAgc3ViID0gMTsKICAgICAgfQogICAgICB0aGlzW29mZnNldCArIGldID0gKCh2YWx1ZSAvIG11bCkgPj4gMCkgLSBzdWIgJiAweEZGOwogICAgfQoKICAgIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoCiAgfTsKCiAgQnVmZmVyLnByb3RvdHlwZS53cml0ZUludEJFID0gZnVuY3Rpb24gd3JpdGVJbnRCRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHsKICAgIHZhbHVlID0gK3ZhbHVlOwogICAgb2Zmc2V0ID0gb2Zmc2V0IHwgMDsKICAgIGlmICghbm9Bc3NlcnQpIHsKICAgICAgdmFyIGxpbWl0ID0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGggLSAxKTsKCiAgICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIGxpbWl0IC0gMSwgLWxpbWl0KTsKICAgIH0KCiAgICB2YXIgaSA9IGJ5dGVMZW5ndGggLSAxOwogICAgdmFyIG11bCA9IDE7CiAgICB2YXIgc3ViID0gMDsKICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSB2YWx1ZSAmIDB4RkY7CiAgICB3aGlsZSAoLS1pID49IDAgJiYgKG11bCAqPSAweDEwMCkpIHsKICAgICAgaWYgKHZhbHVlIDwgMCAmJiBzdWIgPT09IDAgJiYgdGhpc1tvZmZzZXQgKyBpICsgMV0gIT09IDApIHsKICAgICAgICBzdWIgPSAxOwogICAgICB9CiAgICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAoKHZhbHVlIC8gbXVsKSA+PiAwKSAtIHN1YiAmIDB4RkY7CiAgICB9CgogICAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGgKICB9OwoKICBCdWZmZXIucHJvdG90eXBlLndyaXRlSW50OCA9IGZ1bmN0aW9uIHdyaXRlSW50OCAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKICAgIHZhbHVlID0gK3ZhbHVlOwogICAgb2Zmc2V0ID0gb2Zmc2V0IHwgMDsKICAgIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDEsIDB4N2YsIC0weDgwKTsKICAgIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHZhbHVlID0gTWF0aC5mbG9vcih2YWx1ZSk7CiAgICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmYgKyB2YWx1ZSArIDE7CiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKTsKICAgIHJldHVybiBvZmZzZXQgKyAxCiAgfTsKCiAgQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDE2TEUgPSBmdW5jdGlvbiB3cml0ZUludDE2TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgICB2YWx1ZSA9ICt2YWx1ZTsKICAgIG9mZnNldCA9IG9mZnNldCB8IDA7CiAgICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweDdmZmYsIC0weDgwMDApOwogICAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7CiAgICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpOwogICAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KTsKICAgIH0gZWxzZSB7CiAgICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpOwogICAgfQogICAgcmV0dXJuIG9mZnNldCArIDIKICB9OwoKICBCdWZmZXIucHJvdG90eXBlLndyaXRlSW50MTZCRSA9IGZ1bmN0aW9uIHdyaXRlSW50MTZCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKICAgIHZhbHVlID0gK3ZhbHVlOwogICAgb2Zmc2V0ID0gb2Zmc2V0IHwgMDsKICAgIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4N2ZmZiwgLTB4ODAwMCk7CiAgICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHsKICAgICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiA4KTsKICAgICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSAmIDB4ZmYpOwogICAgfSBlbHNlIHsKICAgICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpOwogICAgfQogICAgcmV0dXJuIG9mZnNldCArIDIKICB9OwoKICBCdWZmZXIucHJvdG90eXBlLndyaXRlSW50MzJMRSA9IGZ1bmN0aW9uIHdyaXRlSW50MzJMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKICAgIHZhbHVlID0gK3ZhbHVlOwogICAgb2Zmc2V0ID0gb2Zmc2V0IHwgMDsKICAgIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4N2ZmZmZmZmYsIC0weDgwMDAwMDAwKTsKICAgIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgewogICAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKTsKICAgICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOCk7CiAgICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDE2KTsKICAgICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSA+Pj4gMjQpOwogICAgfSBlbHNlIHsKICAgICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSk7CiAgICB9CiAgICByZXR1cm4gb2Zmc2V0ICsgNAogIH07CgogIEJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQzMkJFID0gZnVuY3Rpb24gd3JpdGVJbnQzMkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewogICAgdmFsdWUgPSArdmFsdWU7CiAgICBvZmZzZXQgPSBvZmZzZXQgfCAwOwogICAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHg3ZmZmZmZmZiwgLTB4ODAwMDAwMDApOwogICAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmZmZmZmZmICsgdmFsdWUgKyAxOwogICAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7CiAgICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gMjQpOwogICAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiAxNik7CiAgICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDgpOwogICAgICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlICYgMHhmZik7CiAgICB9IGVsc2UgewogICAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSk7CiAgICB9CiAgICByZXR1cm4gb2Zmc2V0ICsgNAogIH07CgogIGZ1bmN0aW9uIGNoZWNrSUVFRTc1NCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBleHQsIG1heCwgbWluKSB7CiAgICBpZiAob2Zmc2V0ICsgZXh0ID4gYnVmLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0luZGV4IG91dCBvZiByYW5nZScpCiAgICBpZiAob2Zmc2V0IDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0luZGV4IG91dCBvZiByYW5nZScpCiAgfQoKICBmdW5jdGlvbiB3cml0ZUZsb2F0IChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgbm9Bc3NlcnQpIHsKICAgIGlmICghbm9Bc3NlcnQpIHsKICAgICAgY2hlY2tJRUVFNzU0KGJ1ZiwgdmFsdWUsIG9mZnNldCwgNCk7CiAgICB9CiAgICB3cml0ZShidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgMjMsIDQpOwogICAgcmV0dXJuIG9mZnNldCArIDQKICB9CgogIEJ1ZmZlci5wcm90b3R5cGUud3JpdGVGbG9hdExFID0gZnVuY3Rpb24gd3JpdGVGbG9hdExFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewogICAgcmV0dXJuIHdyaXRlRmxvYXQodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSwgbm9Bc3NlcnQpCiAgfTsKCiAgQnVmZmVyLnByb3RvdHlwZS53cml0ZUZsb2F0QkUgPSBmdW5jdGlvbiB3cml0ZUZsb2F0QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgICByZXR1cm4gd3JpdGVGbG9hdCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSwgbm9Bc3NlcnQpCiAgfTsKCiAgZnVuY3Rpb24gd3JpdGVEb3VibGUgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCBub0Fzc2VydCkgewogICAgaWYgKCFub0Fzc2VydCkgewogICAgICBjaGVja0lFRUU3NTQoYnVmLCB2YWx1ZSwgb2Zmc2V0LCA4KTsKICAgIH0KICAgIHdyaXRlKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCA1MiwgOCk7CiAgICByZXR1cm4gb2Zmc2V0ICsgOAogIH0KCiAgQnVmZmVyLnByb3RvdHlwZS53cml0ZURvdWJsZUxFID0gZnVuY3Rpb24gd3JpdGVEb3VibGVMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKICAgIHJldHVybiB3cml0ZURvdWJsZSh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlLCBub0Fzc2VydCkKICB9OwoKICBCdWZmZXIucHJvdG90eXBlLndyaXRlRG91YmxlQkUgPSBmdW5jdGlvbiB3cml0ZURvdWJsZUJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewogICAgcmV0dXJuIHdyaXRlRG91YmxlKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlLCBub0Fzc2VydCkKICB9OwoKICAvLyBjb3B5KHRhcmdldEJ1ZmZlciwgdGFyZ2V0U3RhcnQ9MCwgc291cmNlU3RhcnQ9MCwgc291cmNlRW5kPWJ1ZmZlci5sZW5ndGgpCiAgQnVmZmVyLnByb3RvdHlwZS5jb3B5ID0gZnVuY3Rpb24gY29weSAodGFyZ2V0LCB0YXJnZXRTdGFydCwgc3RhcnQsIGVuZCkgewogICAgaWYgKCFzdGFydCkgc3RhcnQgPSAwOwogICAgaWYgKCFlbmQgJiYgZW5kICE9PSAwKSBlbmQgPSB0aGlzLmxlbmd0aDsKICAgIGlmICh0YXJnZXRTdGFydCA+PSB0YXJnZXQubGVuZ3RoKSB0YXJnZXRTdGFydCA9IHRhcmdldC5sZW5ndGg7CiAgICBpZiAoIXRhcmdldFN0YXJ0KSB0YXJnZXRTdGFydCA9IDA7CiAgICBpZiAoZW5kID4gMCAmJiBlbmQgPCBzdGFydCkgZW5kID0gc3RhcnQ7CgogICAgLy8gQ29weSAwIGJ5dGVzOyB3ZSdyZSBkb25lCiAgICBpZiAoZW5kID09PSBzdGFydCkgcmV0dXJuIDAKICAgIGlmICh0YXJnZXQubGVuZ3RoID09PSAwIHx8IHRoaXMubGVuZ3RoID09PSAwKSByZXR1cm4gMAoKICAgIC8vIEZhdGFsIGVycm9yIGNvbmRpdGlvbnMKICAgIGlmICh0YXJnZXRTdGFydCA8IDApIHsKICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3RhcmdldFN0YXJ0IG91dCBvZiBib3VuZHMnKQogICAgfQogICAgaWYgKHN0YXJ0IDwgMCB8fCBzdGFydCA+PSB0aGlzLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3NvdXJjZVN0YXJ0IG91dCBvZiBib3VuZHMnKQogICAgaWYgKGVuZCA8IDApIHRocm93IG5ldyBSYW5nZUVycm9yKCdzb3VyY2VFbmQgb3V0IG9mIGJvdW5kcycpCgogICAgLy8gQXJlIHdlIG9vYj8KICAgIGlmIChlbmQgPiB0aGlzLmxlbmd0aCkgZW5kID0gdGhpcy5sZW5ndGg7CiAgICBpZiAodGFyZ2V0Lmxlbmd0aCAtIHRhcmdldFN0YXJ0IDwgZW5kIC0gc3RhcnQpIHsKICAgICAgZW5kID0gdGFyZ2V0Lmxlbmd0aCAtIHRhcmdldFN0YXJ0ICsgc3RhcnQ7CiAgICB9CgogICAgdmFyIGxlbiA9IGVuZCAtIHN0YXJ0OwogICAgdmFyIGk7CgogICAgaWYgKHRoaXMgPT09IHRhcmdldCAmJiBzdGFydCA8IHRhcmdldFN0YXJ0ICYmIHRhcmdldFN0YXJ0IDwgZW5kKSB7CiAgICAgIC8vIGRlc2NlbmRpbmcgY29weSBmcm9tIGVuZAogICAgICBmb3IgKGkgPSBsZW4gLSAxOyBpID49IDA7IC0taSkgewogICAgICAgIHRhcmdldFtpICsgdGFyZ2V0U3RhcnRdID0gdGhpc1tpICsgc3RhcnRdOwogICAgICB9CiAgICB9IGVsc2UgaWYgKGxlbiA8IDEwMDAgfHwgIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7CiAgICAgIC8vIGFzY2VuZGluZyBjb3B5IGZyb20gc3RhcnQKICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgKytpKSB7CiAgICAgICAgdGFyZ2V0W2kgKyB0YXJnZXRTdGFydF0gPSB0aGlzW2kgKyBzdGFydF07CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIFVpbnQ4QXJyYXkucHJvdG90eXBlLnNldC5jYWxsKAogICAgICAgIHRhcmdldCwKICAgICAgICB0aGlzLnN1YmFycmF5KHN0YXJ0LCBzdGFydCArIGxlbiksCiAgICAgICAgdGFyZ2V0U3RhcnQKICAgICAgKTsKICAgIH0KCiAgICByZXR1cm4gbGVuCiAgfTsKCiAgLy8gVXNhZ2U6CiAgLy8gICAgYnVmZmVyLmZpbGwobnVtYmVyWywgb2Zmc2V0WywgZW5kXV0pCiAgLy8gICAgYnVmZmVyLmZpbGwoYnVmZmVyWywgb2Zmc2V0WywgZW5kXV0pCiAgLy8gICAgYnVmZmVyLmZpbGwoc3RyaW5nWywgb2Zmc2V0WywgZW5kXV1bLCBlbmNvZGluZ10pCiAgQnVmZmVyLnByb3RvdHlwZS5maWxsID0gZnVuY3Rpb24gZmlsbCAodmFsLCBzdGFydCwgZW5kLCBlbmNvZGluZykgewogICAgLy8gSGFuZGxlIHN0cmluZyBjYXNlczoKICAgIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykgewogICAgICBpZiAodHlwZW9mIHN0YXJ0ID09PSAnc3RyaW5nJykgewogICAgICAgIGVuY29kaW5nID0gc3RhcnQ7CiAgICAgICAgc3RhcnQgPSAwOwogICAgICAgIGVuZCA9IHRoaXMubGVuZ3RoOwogICAgICB9IGVsc2UgaWYgKHR5cGVvZiBlbmQgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgZW5jb2RpbmcgPSBlbmQ7CiAgICAgICAgZW5kID0gdGhpcy5sZW5ndGg7CiAgICAgIH0KICAgICAgaWYgKHZhbC5sZW5ndGggPT09IDEpIHsKICAgICAgICB2YXIgY29kZSA9IHZhbC5jaGFyQ29kZUF0KDApOwogICAgICAgIGlmIChjb2RlIDwgMjU2KSB7CiAgICAgICAgICB2YWwgPSBjb2RlOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoZW5jb2RpbmcgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgZW5jb2RpbmcgIT09ICdzdHJpbmcnKSB7CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignZW5jb2RpbmcgbXVzdCBiZSBhIHN0cmluZycpCiAgICAgIH0KICAgICAgaWYgKHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycgJiYgIUJ1ZmZlci5pc0VuY29kaW5nKGVuY29kaW5nKSkgewogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZykKICAgICAgfQogICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJykgewogICAgICB2YWwgPSB2YWwgJiAyNTU7CiAgICB9CgogICAgLy8gSW52YWxpZCByYW5nZXMgYXJlIG5vdCBzZXQgdG8gYSBkZWZhdWx0LCBzbyBjYW4gcmFuZ2UgY2hlY2sgZWFybHkuCiAgICBpZiAoc3RhcnQgPCAwIHx8IHRoaXMubGVuZ3RoIDwgc3RhcnQgfHwgdGhpcy5sZW5ndGggPCBlbmQpIHsKICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ091dCBvZiByYW5nZSBpbmRleCcpCiAgICB9CgogICAgaWYgKGVuZCA8PSBzdGFydCkgewogICAgICByZXR1cm4gdGhpcwogICAgfQoKICAgIHN0YXJ0ID0gc3RhcnQgPj4+IDA7CiAgICBlbmQgPSBlbmQgPT09IHVuZGVmaW5lZCA/IHRoaXMubGVuZ3RoIDogZW5kID4+PiAwOwoKICAgIGlmICghdmFsKSB2YWwgPSAwOwoKICAgIHZhciBpOwogICAgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7CiAgICAgIGZvciAoaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHsKICAgICAgICB0aGlzW2ldID0gdmFsOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICB2YXIgYnl0ZXMgPSBpbnRlcm5hbElzQnVmZmVyKHZhbCkKICAgICAgICA/IHZhbAogICAgICAgIDogdXRmOFRvQnl0ZXMobmV3IEJ1ZmZlcih2YWwsIGVuY29kaW5nKS50b1N0cmluZygpKTsKICAgICAgdmFyIGxlbiA9IGJ5dGVzLmxlbmd0aDsKICAgICAgZm9yIChpID0gMDsgaSA8IGVuZCAtIHN0YXJ0OyArK2kpIHsKICAgICAgICB0aGlzW2kgKyBzdGFydF0gPSBieXRlc1tpICUgbGVuXTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiB0aGlzCiAgfTsKCiAgLy8gSEVMUEVSIEZVTkNUSU9OUwogIC8vID09PT09PT09PT09PT09PT0KCiAgdmFyIElOVkFMSURfQkFTRTY0X1JFID0gL1teK1wvMC05QS1aYS16LV9dL2c7CgogIGZ1bmN0aW9uIGJhc2U2NGNsZWFuIChzdHIpIHsKICAgIC8vIE5vZGUgc3RyaXBzIG91dCBpbnZhbGlkIGNoYXJhY3RlcnMgbGlrZSBcbiBhbmQgXHQgZnJvbSB0aGUgc3RyaW5nLCBiYXNlNjQtanMgZG9lcyBub3QKICAgIHN0ciA9IHN0cmluZ3RyaW0oc3RyKS5yZXBsYWNlKElOVkFMSURfQkFTRTY0X1JFLCAnJyk7CiAgICAvLyBOb2RlIGNvbnZlcnRzIHN0cmluZ3Mgd2l0aCBsZW5ndGggPCAyIHRvICcnCiAgICBpZiAoc3RyLmxlbmd0aCA8IDIpIHJldHVybiAnJwogICAgLy8gTm9kZSBhbGxvd3MgZm9yIG5vbi1wYWRkZWQgYmFzZTY0IHN0cmluZ3MgKG1pc3NpbmcgdHJhaWxpbmcgPT09KSwgYmFzZTY0LWpzIGRvZXMgbm90CiAgICB3aGlsZSAoc3RyLmxlbmd0aCAlIDQgIT09IDApIHsKICAgICAgc3RyID0gc3RyICsgJz0nOwogICAgfQogICAgcmV0dXJuIHN0cgogIH0KCiAgZnVuY3Rpb24gc3RyaW5ndHJpbSAoc3RyKSB7CiAgICBpZiAoc3RyLnRyaW0pIHJldHVybiBzdHIudHJpbSgpCiAgICByZXR1cm4gc3RyLnJlcGxhY2UoL15ccyt8XHMrJC9nLCAnJykKICB9CgogIGZ1bmN0aW9uIHRvSGV4JDEgKG4pIHsKICAgIGlmIChuIDwgMTYpIHJldHVybiAnMCcgKyBuLnRvU3RyaW5nKDE2KQogICAgcmV0dXJuIG4udG9TdHJpbmcoMTYpCiAgfQoKICBmdW5jdGlvbiB1dGY4VG9CeXRlcyAoc3RyaW5nLCB1bml0cykgewogICAgdW5pdHMgPSB1bml0cyB8fCBJbmZpbml0eTsKICAgIHZhciBjb2RlUG9pbnQ7CiAgICB2YXIgbGVuZ3RoID0gc3RyaW5nLmxlbmd0aDsKICAgIHZhciBsZWFkU3Vycm9nYXRlID0gbnVsbDsKICAgIHZhciBieXRlcyA9IFtdOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHsKICAgICAgY29kZVBvaW50ID0gc3RyaW5nLmNoYXJDb2RlQXQoaSk7CgogICAgICAvLyBpcyBzdXJyb2dhdGUgY29tcG9uZW50CiAgICAgIGlmIChjb2RlUG9pbnQgPiAweEQ3RkYgJiYgY29kZVBvaW50IDwgMHhFMDAwKSB7CiAgICAgICAgLy8gbGFzdCBjaGFyIHdhcyBhIGxlYWQKICAgICAgICBpZiAoIWxlYWRTdXJyb2dhdGUpIHsKICAgICAgICAgIC8vIG5vIGxlYWQgeWV0CiAgICAgICAgICBpZiAoY29kZVBvaW50ID4gMHhEQkZGKSB7CiAgICAgICAgICAgIC8vIHVuZXhwZWN0ZWQgdHJhaWwKICAgICAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpOwogICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgfSBlbHNlIGlmIChpICsgMSA9PT0gbGVuZ3RoKSB7CiAgICAgICAgICAgIC8vIHVucGFpcmVkIGxlYWQKICAgICAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpOwogICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgfQoKICAgICAgICAgIC8vIHZhbGlkIGxlYWQKICAgICAgICAgIGxlYWRTdXJyb2dhdGUgPSBjb2RlUG9pbnQ7CgogICAgICAgICAgY29udGludWUKICAgICAgICB9CgogICAgICAgIC8vIDIgbGVhZHMgaW4gYSByb3cKICAgICAgICBpZiAoY29kZVBvaW50IDwgMHhEQzAwKSB7CiAgICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRCk7CiAgICAgICAgICBsZWFkU3Vycm9nYXRlID0gY29kZVBvaW50OwogICAgICAgICAgY29udGludWUKICAgICAgICB9CgogICAgICAgIC8vIHZhbGlkIHN1cnJvZ2F0ZSBwYWlyCiAgICAgICAgY29kZVBvaW50ID0gKGxlYWRTdXJyb2dhdGUgLSAweEQ4MDAgPDwgMTAgfCBjb2RlUG9pbnQgLSAweERDMDApICsgMHgxMDAwMDsKICAgICAgfSBlbHNlIGlmIChsZWFkU3Vycm9nYXRlKSB7CiAgICAgICAgLy8gdmFsaWQgYm1wIGNoYXIsIGJ1dCBsYXN0IGNoYXIgd2FzIGEgbGVhZAogICAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKTsKICAgICAgfQoKICAgICAgbGVhZFN1cnJvZ2F0ZSA9IG51bGw7CgogICAgICAvLyBlbmNvZGUgdXRmOAogICAgICBpZiAoY29kZVBvaW50IDwgMHg4MCkgewogICAgICAgIGlmICgodW5pdHMgLT0gMSkgPCAwKSBicmVhawogICAgICAgIGJ5dGVzLnB1c2goY29kZVBvaW50KTsKICAgICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDgwMCkgewogICAgICAgIGlmICgodW5pdHMgLT0gMikgPCAwKSBicmVhawogICAgICAgIGJ5dGVzLnB1c2goCiAgICAgICAgICBjb2RlUG9pbnQgPj4gMHg2IHwgMHhDMCwKICAgICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwCiAgICAgICAgKTsKICAgICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDEwMDAwKSB7CiAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA8IDApIGJyZWFrCiAgICAgICAgYnl0ZXMucHVzaCgKICAgICAgICAgIGNvZGVQb2ludCA+PiAweEMgfCAweEUwLAogICAgICAgICAgY29kZVBvaW50ID4+IDB4NiAmIDB4M0YgfCAweDgwLAogICAgICAgICAgY29kZVBvaW50ICYgMHgzRiB8IDB4ODAKICAgICAgICApOwogICAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4MTEwMDAwKSB7CiAgICAgICAgaWYgKCh1bml0cyAtPSA0KSA8IDApIGJyZWFrCiAgICAgICAgYnl0ZXMucHVzaCgKICAgICAgICAgIGNvZGVQb2ludCA+PiAweDEyIHwgMHhGMCwKICAgICAgICAgIGNvZGVQb2ludCA+PiAweEMgJiAweDNGIHwgMHg4MCwKICAgICAgICAgIGNvZGVQb2ludCA+PiAweDYgJiAweDNGIHwgMHg4MCwKICAgICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwCiAgICAgICAgKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgY29kZSBwb2ludCcpCiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gYnl0ZXMKICB9CgogIGZ1bmN0aW9uIGFzY2lpVG9CeXRlcyAoc3RyKSB7CiAgICB2YXIgYnl0ZUFycmF5ID0gW107CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7ICsraSkgewogICAgICAvLyBOb2RlJ3MgY29kZSBzZWVtcyB0byBiZSBkb2luZyB0aGlzIGFuZCBub3QgJiAweDdGLi4KICAgICAgYnl0ZUFycmF5LnB1c2goc3RyLmNoYXJDb2RlQXQoaSkgJiAweEZGKTsKICAgIH0KICAgIHJldHVybiBieXRlQXJyYXkKICB9CgogIGZ1bmN0aW9uIHV0ZjE2bGVUb0J5dGVzIChzdHIsIHVuaXRzKSB7CiAgICB2YXIgYywgaGksIGxvOwogICAgdmFyIGJ5dGVBcnJheSA9IFtdOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyArK2kpIHsKICAgICAgaWYgKCh1bml0cyAtPSAyKSA8IDApIGJyZWFrCgogICAgICBjID0gc3RyLmNoYXJDb2RlQXQoaSk7CiAgICAgIGhpID0gYyA+PiA4OwogICAgICBsbyA9IGMgJSAyNTY7CiAgICAgIGJ5dGVBcnJheS5wdXNoKGxvKTsKICAgICAgYnl0ZUFycmF5LnB1c2goaGkpOwogICAgfQoKICAgIHJldHVybiBieXRlQXJyYXkKICB9CgoKICBmdW5jdGlvbiBiYXNlNjRUb0J5dGVzIChzdHIpIHsKICAgIHJldHVybiB0b0J5dGVBcnJheSQxKGJhc2U2NGNsZWFuKHN0cikpCiAgfQoKICBmdW5jdGlvbiBibGl0QnVmZmVyIChzcmMsIGRzdCwgb2Zmc2V0LCBsZW5ndGgpIHsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHsKICAgICAgaWYgKChpICsgb2Zmc2V0ID49IGRzdC5sZW5ndGgpIHx8IChpID49IHNyYy5sZW5ndGgpKSBicmVhawogICAgICBkc3RbaSArIG9mZnNldF0gPSBzcmNbaV07CiAgICB9CiAgICByZXR1cm4gaQogIH0KCiAgZnVuY3Rpb24gaXNuYW4gKHZhbCkgewogICAgcmV0dXJuIHZhbCAhPT0gdmFsIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tc2VsZi1jb21wYXJlCiAgfQoKCiAgLy8gdGhlIGZvbGxvd2luZyBpcyBmcm9tIGlzLWJ1ZmZlciwgYWxzbyBieSBGZXJvc3MgQWJvdWtoYWRpamVoIGFuZCB3aXRoIHNhbWUgbGlzZW5jZQogIC8vIFRoZSBfaXNCdWZmZXIgY2hlY2sgaXMgZm9yIFNhZmFyaSA1LTcgc3VwcG9ydCwgYmVjYXVzZSBpdCdzIG1pc3NpbmcKICAvLyBPYmplY3QucHJvdG90eXBlLmNvbnN0cnVjdG9yLiBSZW1vdmUgdGhpcyBldmVudHVhbGx5CiAgZnVuY3Rpb24gaXNCdWZmZXIkMShvYmopIHsKICAgIHJldHVybiBvYmogIT0gbnVsbCAmJiAoISFvYmouX2lzQnVmZmVyIHx8IGlzRmFzdEJ1ZmZlcihvYmopIHx8IGlzU2xvd0J1ZmZlcihvYmopKQogIH0KCiAgZnVuY3Rpb24gaXNGYXN0QnVmZmVyIChvYmopIHsKICAgIHJldHVybiAhIW9iai5jb25zdHJ1Y3RvciAmJiB0eXBlb2Ygb2JqLmNvbnN0cnVjdG9yLmlzQnVmZmVyID09PSAnZnVuY3Rpb24nICYmIG9iai5jb25zdHJ1Y3Rvci5pc0J1ZmZlcihvYmopCiAgfQoKICAvLyBGb3IgTm9kZSB2MC4xMCBzdXBwb3J0LiBSZW1vdmUgdGhpcyBldmVudHVhbGx5LgogIGZ1bmN0aW9uIGlzU2xvd0J1ZmZlciAob2JqKSB7CiAgICByZXR1cm4gdHlwZW9mIG9iai5yZWFkRmxvYXRMRSA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2Ygb2JqLnNsaWNlID09PSAnZnVuY3Rpb24nICYmIGlzRmFzdEJ1ZmZlcihvYmouc2xpY2UoMCwgMCkpCiAgfQoKICB2YXIgYnJvd3NlciQzID0gdHJ1ZTsKCiAgZnVuY3Rpb24gX21lcmdlTmFtZXNwYWNlcyQxKG4sIG0pIHsKICAgICAgbS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICBlICYmIHR5cGVvZiBlICE9PSAnc3RyaW5nJyAmJiAhQXJyYXkuaXNBcnJheShlKSAmJiBPYmplY3Qua2V5cyhlKS5mb3JFYWNoKGZ1bmN0aW9uIChrKSB7CiAgICAgICAgICAgICAgaWYgKGsgIT09ICdkZWZhdWx0JyAmJiAhKGsgaW4gbikpIHsKICAgICAgICAgICAgICAgICAgdmFyIGQgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsIGspOwogICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobiwgaywgZC5nZXQgPyBkIDogewogICAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZVtrXTsgfQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgfSk7CiAgICAgIHJldHVybiBPYmplY3QuZnJlZXplKG4pOwogIH0KCiAgLy8gQSB2ZXJ5IHNpbXBsZSB3b3JrYXJvdW5kIGZvciBCaWcgaW50LiBXb3JrcyBpbiBjb25qdW5jdGlvbiB3aXRoIG91ciBjdXN0b20KICAvLyBEYXRhdmlldyB3b3JrYXJvdW5kIGF0IC4vZGF0YXZpZXcudHMKICBjb25zdCBnbG9iYWxPYmogPSB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gInVuZGVmaW5lZCIKICAgICAgPyBnbG9iYWxUaGlzCiAgICAgIDogdHlwZW9mIGdsb2JhbCQxICE9PSAidW5kZWZpbmVkIgogICAgICAgICAgPyBnbG9iYWwkMQogICAgICAgICAgOiB7fTsKICBjb25zdCBCaWdJbnRQb2x5ZmlsbCA9IHR5cGVvZiBCaWdJbnQgIT09ICJ1bmRlZmluZWQiID8gQmlnSW50IDogZ2xvYmFsT2JqLkJpZ0ludCB8fCBOdW1iZXI7CgogIC8vIEEgdmVyeSBzaW1wbGUgd29ya2Fyb3VuZCBmb3IgQmlnIGludC4gV29ya3MgaW4gY29uanVuY3Rpb24gd2l0aCBvdXIgY3VzdG9tCiAgbGV0IGV4cG9ydGVkRGF0YVZpZXcgPSBEYXRhVmlldzsKICBpZiAoIWV4cG9ydGVkRGF0YVZpZXcucHJvdG90eXBlLnNldEJpZ1VpbnQ2NCkgewogICAgICAvLyBUYWtlbiBmcm9tIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL2dyYXVwLzgxNWM5YWM2NWMyYmFjOGE1NjM5MWYwY2EyMzYzNmZjCiAgICAgIGV4cG9ydGVkRGF0YVZpZXcucHJvdG90eXBlLnNldEJpZ1VpbnQ2NCA9IGZ1bmN0aW9uIChieXRlT2Zmc2V0LCB2YWx1ZSwgbGl0dGxlRW5kaWFuKSB7CiAgICAgICAgICBsZXQgbG93V29yZDsKICAgICAgICAgIGxldCBoaWdoV29yZDsKICAgICAgICAgIGlmICh2YWx1ZSA8IE1hdGgucG93KDIsIDMyKSkgewogICAgICAgICAgICAgIGxvd1dvcmQgPSBOdW1iZXIodmFsdWUpOwogICAgICAgICAgICAgIGhpZ2hXb3JkID0gMDsKICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgIHZhciBiaWdOdW1iZXJBc0JpbmFyeVN0ciA9IHZhbHVlLnRvU3RyaW5nKDIpOwogICAgICAgICAgICAgIC8vIENvbnZlcnQgdGhlIGFib3ZlIGJpbmFyeSBzdHIgdG8gNjQgYml0IChhY3R1YWxseSA1MiBiaXQgd2lsbCB3b3JrKSBieSBwYWRkaW5nIHplcm9zIGluIHRoZSBsZWZ0CiAgICAgICAgICAgICAgdmFyIGJpZ051bWJlckFzQmluYXJ5U3RyMiA9ICIiOwogICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNjQgLSBiaWdOdW1iZXJBc0JpbmFyeVN0ci5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICBiaWdOdW1iZXJBc0JpbmFyeVN0cjIgKz0gIjAiOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBiaWdOdW1iZXJBc0JpbmFyeVN0cjIgKz0gYmlnTnVtYmVyQXNCaW5hcnlTdHI7CiAgICAgICAgICAgICAgaGlnaFdvcmQgPSBwYXJzZUludChiaWdOdW1iZXJBc0JpbmFyeVN0cjIuc3Vic3RyaW5nKDAsIDMyKSwgMik7CiAgICAgICAgICAgICAgbG93V29yZCA9IHBhcnNlSW50KGJpZ051bWJlckFzQmluYXJ5U3RyMi5zdWJzdHJpbmcoMzIpLCAyKTsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuc2V0VWludDMyKGJ5dGVPZmZzZXQgKyAobGl0dGxlRW5kaWFuID8gMCA6IDQpLCBsb3dXb3JkLCBsaXR0bGVFbmRpYW4pOwogICAgICAgICAgdGhpcy5zZXRVaW50MzIoYnl0ZU9mZnNldCArIChsaXR0bGVFbmRpYW4gPyA0IDogMCksIGhpZ2hXb3JkLCBsaXR0bGVFbmRpYW4pOwogICAgICB9OwogICAgICBleHBvcnRlZERhdGFWaWV3LnByb3RvdHlwZS5nZXRCaWdVaW50NjQgPSBmdW5jdGlvbiAoYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuKSB7CiAgICAgICAgICBsZXQgbG93V29yZCA9IHRoaXMuZ2V0VWludDMyKGJ5dGVPZmZzZXQgKyAobGl0dGxlRW5kaWFuID8gMCA6IDQpLCBsaXR0bGVFbmRpYW4pOwogICAgICAgICAgbGV0IGhpZ2hXb3JkID0gdGhpcy5nZXRVaW50MzIoYnl0ZU9mZnNldCArIChsaXR0bGVFbmRpYW4gPyA0IDogMCksIGxpdHRsZUVuZGlhbik7CiAgICAgICAgICB2YXIgbG93V29yZEFzQmluYXJ5U3RyID0gbG93V29yZC50b1N0cmluZygyKTsKICAgICAgICAgIHZhciBoaWdoV29yZEFzQmluYXJ5U3RyID0gaGlnaFdvcmQudG9TdHJpbmcoMik7CiAgICAgICAgICAvLyBDb252ZXJ0IHRoZSBhYm92ZSBiaW5hcnkgc3RyIHRvIDY0IGJpdCAoYWN0dWFsbHkgNTIgYml0IHdpbGwgd29yaykgYnkgcGFkZGluZyB6ZXJvcyBpbiB0aGUgbGVmdAogICAgICAgICAgdmFyIGxvd1dvcmRBc0JpbmFyeVN0clBhZGRlZCA9ICIiOwogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzMiAtIGxvd1dvcmRBc0JpbmFyeVN0ci5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgIGxvd1dvcmRBc0JpbmFyeVN0clBhZGRlZCArPSAiMCI7CiAgICAgICAgICB9CiAgICAgICAgICBsb3dXb3JkQXNCaW5hcnlTdHJQYWRkZWQgKz0gbG93V29yZEFzQmluYXJ5U3RyOwogICAgICAgICAgcmV0dXJuIEJpZ0ludFBvbHlmaWxsKCIwYiIgKyBoaWdoV29yZEFzQmluYXJ5U3RyICsgbG93V29yZEFzQmluYXJ5U3RyUGFkZGVkKTsKICAgICAgfTsKICB9CiAgY29uc3QgRGF0YVZpZXdQb2x5ZmlsbCA9IGV4cG9ydGVkRGF0YVZpZXc7CgogIHZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwkMSAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWwkMSA6IHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyA/IHNlbGYgOiB7fTsKCiAgdmFyIGJ1ZmZlciQyID0ge307CgogIHZhciBiYXNlNjRKcyA9IHt9OwoKICBiYXNlNjRKcy5ieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aDsKICBiYXNlNjRKcy50b0J5dGVBcnJheSA9IHRvQnl0ZUFycmF5OwogIGJhc2U2NEpzLmZyb21CeXRlQXJyYXkgPSBmcm9tQnl0ZUFycmF5OwoKICB2YXIgbG9va3VwID0gW107CiAgdmFyIHJldkxvb2t1cCA9IFtdOwogIHZhciBBcnIgPSB0eXBlb2YgVWludDhBcnJheSAhPT0gJ3VuZGVmaW5lZCcgPyBVaW50OEFycmF5IDogQXJyYXk7CgogIHZhciBjb2RlID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8nOwogIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2RlLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7CiAgICBsb29rdXBbaV0gPSBjb2RlW2ldOwogICAgcmV2TG9va3VwW2NvZGUuY2hhckNvZGVBdChpKV0gPSBpOwogIH0KCiAgLy8gU3VwcG9ydCBkZWNvZGluZyBVUkwtc2FmZSBiYXNlNjQgc3RyaW5ncywgYXMgTm9kZS5qcyBkb2VzLgogIC8vIFNlZTogaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQmFzZTY0I1VSTF9hcHBsaWNhdGlvbnMKICByZXZMb29rdXBbJy0nLmNoYXJDb2RlQXQoMCldID0gNjI7CiAgcmV2TG9va3VwWydfJy5jaGFyQ29kZUF0KDApXSA9IDYzOwoKICBmdW5jdGlvbiBnZXRMZW5zIChiNjQpIHsKICAgIHZhciBsZW4gPSBiNjQubGVuZ3RoOwoKICAgIGlmIChsZW4gJSA0ID4gMCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgc3RyaW5nLiBMZW5ndGggbXVzdCBiZSBhIG11bHRpcGxlIG9mIDQnKQogICAgfQoKICAgIC8vIFRyaW0gb2ZmIGV4dHJhIGJ5dGVzIGFmdGVyIHBsYWNlaG9sZGVyIGJ5dGVzIGFyZSBmb3VuZAogICAgLy8gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vYmVhdGdhbW1pdC9iYXNlNjQtanMvaXNzdWVzLzQyCiAgICB2YXIgdmFsaWRMZW4gPSBiNjQuaW5kZXhPZignPScpOwogICAgaWYgKHZhbGlkTGVuID09PSAtMSkgdmFsaWRMZW4gPSBsZW47CgogICAgdmFyIHBsYWNlSG9sZGVyc0xlbiA9IHZhbGlkTGVuID09PSBsZW4KICAgICAgPyAwCiAgICAgIDogNCAtICh2YWxpZExlbiAlIDQpOwoKICAgIHJldHVybiBbdmFsaWRMZW4sIHBsYWNlSG9sZGVyc0xlbl0KICB9CgogIC8vIGJhc2U2NCBpcyA0LzMgKyB1cCB0byB0d28gY2hhcmFjdGVycyBvZiB0aGUgb3JpZ2luYWwgZGF0YQogIGZ1bmN0aW9uIGJ5dGVMZW5ndGggKGI2NCkgewogICAgdmFyIGxlbnMgPSBnZXRMZW5zKGI2NCk7CiAgICB2YXIgdmFsaWRMZW4gPSBsZW5zWzBdOwogICAgdmFyIHBsYWNlSG9sZGVyc0xlbiA9IGxlbnNbMV07CiAgICByZXR1cm4gKCh2YWxpZExlbiArIHBsYWNlSG9sZGVyc0xlbikgKiAzIC8gNCkgLSBwbGFjZUhvbGRlcnNMZW4KICB9CgogIGZ1bmN0aW9uIF9ieXRlTGVuZ3RoIChiNjQsIHZhbGlkTGVuLCBwbGFjZUhvbGRlcnNMZW4pIHsKICAgIHJldHVybiAoKHZhbGlkTGVuICsgcGxhY2VIb2xkZXJzTGVuKSAqIDMgLyA0KSAtIHBsYWNlSG9sZGVyc0xlbgogIH0KCiAgZnVuY3Rpb24gdG9CeXRlQXJyYXkgKGI2NCkgewogICAgdmFyIHRtcDsKICAgIHZhciBsZW5zID0gZ2V0TGVucyhiNjQpOwogICAgdmFyIHZhbGlkTGVuID0gbGVuc1swXTsKICAgIHZhciBwbGFjZUhvbGRlcnNMZW4gPSBsZW5zWzFdOwoKICAgIHZhciBhcnIgPSBuZXcgQXJyKF9ieXRlTGVuZ3RoKGI2NCwgdmFsaWRMZW4sIHBsYWNlSG9sZGVyc0xlbikpOwoKICAgIHZhciBjdXJCeXRlID0gMDsKCiAgICAvLyBpZiB0aGVyZSBhcmUgcGxhY2Vob2xkZXJzLCBvbmx5IGdldCB1cCB0byB0aGUgbGFzdCBjb21wbGV0ZSA0IGNoYXJzCiAgICB2YXIgbGVuID0gcGxhY2VIb2xkZXJzTGVuID4gMAogICAgICA/IHZhbGlkTGVuIC0gNAogICAgICA6IHZhbGlkTGVuOwoKICAgIHZhciBpOwogICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSArPSA0KSB7CiAgICAgIHRtcCA9CiAgICAgICAgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpKV0gPDwgMTgpIHwKICAgICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAxKV0gPDwgMTIpIHwKICAgICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAyKV0gPDwgNikgfAogICAgICAgIHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMyldOwogICAgICBhcnJbY3VyQnl0ZSsrXSA9ICh0bXAgPj4gMTYpICYgMHhGRjsKICAgICAgYXJyW2N1ckJ5dGUrK10gPSAodG1wID4+IDgpICYgMHhGRjsKICAgICAgYXJyW2N1ckJ5dGUrK10gPSB0bXAgJiAweEZGOwogICAgfQoKICAgIGlmIChwbGFjZUhvbGRlcnNMZW4gPT09IDIpIHsKICAgICAgdG1wID0KICAgICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkpXSA8PCAyKSB8CiAgICAgICAgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMSldID4+IDQpOwogICAgICBhcnJbY3VyQnl0ZSsrXSA9IHRtcCAmIDB4RkY7CiAgICB9CgogICAgaWYgKHBsYWNlSG9sZGVyc0xlbiA9PT0gMSkgewogICAgICB0bXAgPQogICAgICAgIChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSldIDw8IDEwKSB8CiAgICAgICAgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMSldIDw8IDQpIHwKICAgICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAyKV0gPj4gMik7CiAgICAgIGFycltjdXJCeXRlKytdID0gKHRtcCA+PiA4KSAmIDB4RkY7CiAgICAgIGFycltjdXJCeXRlKytdID0gdG1wICYgMHhGRjsKICAgIH0KCiAgICByZXR1cm4gYXJyCiAgfQoKICBmdW5jdGlvbiB0cmlwbGV0VG9CYXNlNjQgKG51bSkgewogICAgcmV0dXJuIGxvb2t1cFtudW0gPj4gMTggJiAweDNGXSArCiAgICAgIGxvb2t1cFtudW0gPj4gMTIgJiAweDNGXSArCiAgICAgIGxvb2t1cFtudW0gPj4gNiAmIDB4M0ZdICsKICAgICAgbG9va3VwW251bSAmIDB4M0ZdCiAgfQoKICBmdW5jdGlvbiBlbmNvZGVDaHVuayAodWludDgsIHN0YXJ0LCBlbmQpIHsKICAgIHZhciB0bXA7CiAgICB2YXIgb3V0cHV0ID0gW107CiAgICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7IGkgKz0gMykgewogICAgICB0bXAgPQogICAgICAgICgodWludDhbaV0gPDwgMTYpICYgMHhGRjAwMDApICsKICAgICAgICAoKHVpbnQ4W2kgKyAxXSA8PCA4KSAmIDB4RkYwMCkgKwogICAgICAgICh1aW50OFtpICsgMl0gJiAweEZGKTsKICAgICAgb3V0cHV0LnB1c2godHJpcGxldFRvQmFzZTY0KHRtcCkpOwogICAgfQogICAgcmV0dXJuIG91dHB1dC5qb2luKCcnKQogIH0KCiAgZnVuY3Rpb24gZnJvbUJ5dGVBcnJheSAodWludDgpIHsKICAgIHZhciB0bXA7CiAgICB2YXIgbGVuID0gdWludDgubGVuZ3RoOwogICAgdmFyIGV4dHJhQnl0ZXMgPSBsZW4gJSAzOyAvLyBpZiB3ZSBoYXZlIDEgYnl0ZSBsZWZ0LCBwYWQgMiBieXRlcwogICAgdmFyIHBhcnRzID0gW107CiAgICB2YXIgbWF4Q2h1bmtMZW5ndGggPSAxNjM4MzsgLy8gbXVzdCBiZSBtdWx0aXBsZSBvZiAzCgogICAgLy8gZ28gdGhyb3VnaCB0aGUgYXJyYXkgZXZlcnkgdGhyZWUgYnl0ZXMsIHdlJ2xsIGRlYWwgd2l0aCB0cmFpbGluZyBzdHVmZiBsYXRlcgogICAgZm9yICh2YXIgaSA9IDAsIGxlbjIgPSBsZW4gLSBleHRyYUJ5dGVzOyBpIDwgbGVuMjsgaSArPSBtYXhDaHVua0xlbmd0aCkgewogICAgICBwYXJ0cy5wdXNoKGVuY29kZUNodW5rKHVpbnQ4LCBpLCAoaSArIG1heENodW5rTGVuZ3RoKSA+IGxlbjIgPyBsZW4yIDogKGkgKyBtYXhDaHVua0xlbmd0aCkpKTsKICAgIH0KCiAgICAvLyBwYWQgdGhlIGVuZCB3aXRoIHplcm9zLCBidXQgbWFrZSBzdXJlIHRvIG5vdCBmb3JnZXQgdGhlIGV4dHJhIGJ5dGVzCiAgICBpZiAoZXh0cmFCeXRlcyA9PT0gMSkgewogICAgICB0bXAgPSB1aW50OFtsZW4gLSAxXTsKICAgICAgcGFydHMucHVzaCgKICAgICAgICBsb29rdXBbdG1wID4+IDJdICsKICAgICAgICBsb29rdXBbKHRtcCA8PCA0KSAmIDB4M0ZdICsKICAgICAgICAnPT0nCiAgICAgICk7CiAgICB9IGVsc2UgaWYgKGV4dHJhQnl0ZXMgPT09IDIpIHsKICAgICAgdG1wID0gKHVpbnQ4W2xlbiAtIDJdIDw8IDgpICsgdWludDhbbGVuIC0gMV07CiAgICAgIHBhcnRzLnB1c2goCiAgICAgICAgbG9va3VwW3RtcCA+PiAxMF0gKwogICAgICAgIGxvb2t1cFsodG1wID4+IDQpICYgMHgzRl0gKwogICAgICAgIGxvb2t1cFsodG1wIDw8IDIpICYgMHgzRl0gKwogICAgICAgICc9JwogICAgICApOwogICAgfQoKICAgIHJldHVybiBwYXJ0cy5qb2luKCcnKQogIH0KCiAgdmFyIGllZWU3NTQgPSB7fTsKCiAgLyohIGllZWU3NTQuIEJTRC0zLUNsYXVzZSBMaWNlbnNlLiBGZXJvc3MgQWJvdWtoYWRpamVoIDxodHRwczovL2Zlcm9zcy5vcmcvb3BlbnNvdXJjZT4gKi8KCiAgaWVlZTc1NC5yZWFkID0gZnVuY3Rpb24gKGJ1ZmZlciwgb2Zmc2V0LCBpc0xFLCBtTGVuLCBuQnl0ZXMpIHsKICAgIHZhciBlLCBtOwogICAgdmFyIGVMZW4gPSAobkJ5dGVzICogOCkgLSBtTGVuIC0gMTsKICAgIHZhciBlTWF4ID0gKDEgPDwgZUxlbikgLSAxOwogICAgdmFyIGVCaWFzID0gZU1heCA+PiAxOwogICAgdmFyIG5CaXRzID0gLTc7CiAgICB2YXIgaSA9IGlzTEUgPyAobkJ5dGVzIC0gMSkgOiAwOwogICAgdmFyIGQgPSBpc0xFID8gLTEgOiAxOwogICAgdmFyIHMgPSBidWZmZXJbb2Zmc2V0ICsgaV07CgogICAgaSArPSBkOwoKICAgIGUgPSBzICYgKCgxIDw8ICgtbkJpdHMpKSAtIDEpOwogICAgcyA+Pj0gKC1uQml0cyk7CiAgICBuQml0cyArPSBlTGVuOwogICAgZm9yICg7IG5CaXRzID4gMDsgZSA9IChlICogMjU2KSArIGJ1ZmZlcltvZmZzZXQgKyBpXSwgaSArPSBkLCBuQml0cyAtPSA4KSB7fQoKICAgIG0gPSBlICYgKCgxIDw8ICgtbkJpdHMpKSAtIDEpOwogICAgZSA+Pj0gKC1uQml0cyk7CiAgICBuQml0cyArPSBtTGVuOwogICAgZm9yICg7IG5CaXRzID4gMDsgbSA9IChtICogMjU2KSArIGJ1ZmZlcltvZmZzZXQgKyBpXSwgaSArPSBkLCBuQml0cyAtPSA4KSB7fQoKICAgIGlmIChlID09PSAwKSB7CiAgICAgIGUgPSAxIC0gZUJpYXM7CiAgICB9IGVsc2UgaWYgKGUgPT09IGVNYXgpIHsKICAgICAgcmV0dXJuIG0gPyBOYU4gOiAoKHMgPyAtMSA6IDEpICogSW5maW5pdHkpCiAgICB9IGVsc2UgewogICAgICBtID0gbSArIE1hdGgucG93KDIsIG1MZW4pOwogICAgICBlID0gZSAtIGVCaWFzOwogICAgfQogICAgcmV0dXJuIChzID8gLTEgOiAxKSAqIG0gKiBNYXRoLnBvdygyLCBlIC0gbUxlbikKICB9OwoKICBpZWVlNzU0LndyaXRlID0gZnVuY3Rpb24gKGJ1ZmZlciwgdmFsdWUsIG9mZnNldCwgaXNMRSwgbUxlbiwgbkJ5dGVzKSB7CiAgICB2YXIgZSwgbSwgYzsKICAgIHZhciBlTGVuID0gKG5CeXRlcyAqIDgpIC0gbUxlbiAtIDE7CiAgICB2YXIgZU1heCA9ICgxIDw8IGVMZW4pIC0gMTsKICAgIHZhciBlQmlhcyA9IGVNYXggPj4gMTsKICAgIHZhciBydCA9IChtTGVuID09PSAyMyA/IE1hdGgucG93KDIsIC0yNCkgLSBNYXRoLnBvdygyLCAtNzcpIDogMCk7CiAgICB2YXIgaSA9IGlzTEUgPyAwIDogKG5CeXRlcyAtIDEpOwogICAgdmFyIGQgPSBpc0xFID8gMSA6IC0xOwogICAgdmFyIHMgPSB2YWx1ZSA8IDAgfHwgKHZhbHVlID09PSAwICYmIDEgLyB2YWx1ZSA8IDApID8gMSA6IDA7CgogICAgdmFsdWUgPSBNYXRoLmFicyh2YWx1ZSk7CgogICAgaWYgKGlzTmFOKHZhbHVlKSB8fCB2YWx1ZSA9PT0gSW5maW5pdHkpIHsKICAgICAgbSA9IGlzTmFOKHZhbHVlKSA/IDEgOiAwOwogICAgICBlID0gZU1heDsKICAgIH0gZWxzZSB7CiAgICAgIGUgPSBNYXRoLmZsb29yKE1hdGgubG9nKHZhbHVlKSAvIE1hdGguTE4yKTsKICAgICAgaWYgKHZhbHVlICogKGMgPSBNYXRoLnBvdygyLCAtZSkpIDwgMSkgewogICAgICAgIGUtLTsKICAgICAgICBjICo9IDI7CiAgICAgIH0KICAgICAgaWYgKGUgKyBlQmlhcyA+PSAxKSB7CiAgICAgICAgdmFsdWUgKz0gcnQgLyBjOwogICAgICB9IGVsc2UgewogICAgICAgIHZhbHVlICs9IHJ0ICogTWF0aC5wb3coMiwgMSAtIGVCaWFzKTsKICAgICAgfQogICAgICBpZiAodmFsdWUgKiBjID49IDIpIHsKICAgICAgICBlKys7CiAgICAgICAgYyAvPSAyOwogICAgICB9CgogICAgICBpZiAoZSArIGVCaWFzID49IGVNYXgpIHsKICAgICAgICBtID0gMDsKICAgICAgICBlID0gZU1heDsKICAgICAgfSBlbHNlIGlmIChlICsgZUJpYXMgPj0gMSkgewogICAgICAgIG0gPSAoKHZhbHVlICogYykgLSAxKSAqIE1hdGgucG93KDIsIG1MZW4pOwogICAgICAgIGUgPSBlICsgZUJpYXM7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbSA9IHZhbHVlICogTWF0aC5wb3coMiwgZUJpYXMgLSAxKSAqIE1hdGgucG93KDIsIG1MZW4pOwogICAgICAgIGUgPSAwOwogICAgICB9CiAgICB9CgogICAgZm9yICg7IG1MZW4gPj0gODsgYnVmZmVyW29mZnNldCArIGldID0gbSAmIDB4ZmYsIGkgKz0gZCwgbSAvPSAyNTYsIG1MZW4gLT0gOCkge30KCiAgICBlID0gKGUgPDwgbUxlbikgfCBtOwogICAgZUxlbiArPSBtTGVuOwogICAgZm9yICg7IGVMZW4gPiAwOyBidWZmZXJbb2Zmc2V0ICsgaV0gPSBlICYgMHhmZiwgaSArPSBkLCBlIC89IDI1NiwgZUxlbiAtPSA4KSB7fQoKICAgIGJ1ZmZlcltvZmZzZXQgKyBpIC0gZF0gfD0gcyAqIDEyODsKICB9OwoKICAvKiEKICAgKiBUaGUgYnVmZmVyIG1vZHVsZSBmcm9tIG5vZGUuanMsIGZvciB0aGUgYnJvd3Nlci4KICAgKgogICAqIEBhdXRob3IgICBGZXJvc3MgQWJvdWtoYWRpamVoIDxodHRwczovL2Zlcm9zcy5vcmc+CiAgICogQGxpY2Vuc2UgIE1JVAogICAqLwoKICAoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCiAgY29uc3QgYmFzZTY0ID0gYmFzZTY0SnM7CiAgY29uc3QgaWVlZTc1NCQxID0gaWVlZTc1NDsKICBjb25zdCBjdXN0b21JbnNwZWN0U3ltYm9sID0KICAgICh0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBTeW1ib2xbJ2ZvciddID09PSAnZnVuY3Rpb24nKSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGRvdC1ub3RhdGlvbgogICAgICA/IFN5bWJvbFsnZm9yJ10oJ25vZGVqcy51dGlsLmluc3BlY3QuY3VzdG9tJykgLy8gZXNsaW50LWRpc2FibGUtbGluZSBkb3Qtbm90YXRpb24KICAgICAgOiBudWxsOwoKICBleHBvcnRzLkJ1ZmZlciA9IEJ1ZmZlcjsKICBleHBvcnRzLlNsb3dCdWZmZXIgPSBTbG93QnVmZmVyOwogIGV4cG9ydHMuSU5TUEVDVF9NQVhfQllURVMgPSA1MDsKCiAgY29uc3QgS19NQVhfTEVOR1RIID0gMHg3ZmZmZmZmZjsKICBleHBvcnRzLmtNYXhMZW5ndGggPSBLX01BWF9MRU5HVEg7CgogIC8qKgogICAqIElmIGBCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVGA6CiAgICogICA9PT0gdHJ1ZSAgICBVc2UgVWludDhBcnJheSBpbXBsZW1lbnRhdGlvbiAoZmFzdGVzdCkKICAgKiAgID09PSBmYWxzZSAgIFByaW50IHdhcm5pbmcgYW5kIHJlY29tbWVuZCB1c2luZyBgYnVmZmVyYCB2NC54IHdoaWNoIGhhcyBhbiBPYmplY3QKICAgKiAgICAgICAgICAgICAgIGltcGxlbWVudGF0aW9uIChtb3N0IGNvbXBhdGlibGUsIGV2ZW4gSUU2KQogICAqCiAgICogQnJvd3NlcnMgdGhhdCBzdXBwb3J0IHR5cGVkIGFycmF5cyBhcmUgSUUgMTArLCBGaXJlZm94IDQrLCBDaHJvbWUgNyssIFNhZmFyaSA1LjErLAogICAqIE9wZXJhIDExLjYrLCBpT1MgNC4yKy4KICAgKgogICAqIFdlIHJlcG9ydCB0aGF0IHRoZSBicm93c2VyIGRvZXMgbm90IHN1cHBvcnQgdHlwZWQgYXJyYXlzIGlmIHRoZSBhcmUgbm90IHN1YmNsYXNzYWJsZQogICAqIHVzaW5nIF9fcHJvdG9fXy4gRmlyZWZveCA0LTI5IGxhY2tzIHN1cHBvcnQgZm9yIGFkZGluZyBuZXcgcHJvcGVydGllcyB0byBgVWludDhBcnJheWAKICAgKiAoU2VlOiBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD02OTU0MzgpLiBJRSAxMCBsYWNrcyBzdXBwb3J0CiAgICogZm9yIF9fcHJvdG9fXyBhbmQgaGFzIGEgYnVnZ3kgdHlwZWQgYXJyYXkgaW1wbGVtZW50YXRpb24uCiAgICovCiAgQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQgPSB0eXBlZEFycmF5U3VwcG9ydCgpOwoKICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUICYmIHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJyAmJgogICAgICB0eXBlb2YgY29uc29sZS5lcnJvciA9PT0gJ2Z1bmN0aW9uJykgewogICAgY29uc29sZS5lcnJvcigKICAgICAgJ1RoaXMgYnJvd3NlciBsYWNrcyB0eXBlZCBhcnJheSAoVWludDhBcnJheSkgc3VwcG9ydCB3aGljaCBpcyByZXF1aXJlZCBieSAnICsKICAgICAgJ2BidWZmZXJgIHY1LnguIFVzZSBgYnVmZmVyYCB2NC54IGlmIHlvdSByZXF1aXJlIG9sZCBicm93c2VyIHN1cHBvcnQuJwogICAgKTsKICB9CgogIGZ1bmN0aW9uIHR5cGVkQXJyYXlTdXBwb3J0ICgpIHsKICAgIC8vIENhbiB0eXBlZCBhcnJheSBpbnN0YW5jZXMgY2FuIGJlIGF1Z21lbnRlZD8KICAgIHRyeSB7CiAgICAgIGNvbnN0IGFyciA9IG5ldyBVaW50OEFycmF5KDEpOwogICAgICBjb25zdCBwcm90byA9IHsgZm9vOiBmdW5jdGlvbiAoKSB7IHJldHVybiA0MiB9IH07CiAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihwcm90bywgVWludDhBcnJheS5wcm90b3R5cGUpOwogICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YoYXJyLCBwcm90byk7CiAgICAgIHJldHVybiBhcnIuZm9vKCkgPT09IDQyCiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHJldHVybiBmYWxzZQogICAgfQogIH0KCiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJ1ZmZlci5wcm90b3R5cGUsICdwYXJlbnQnLCB7CiAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICghQnVmZmVyLmlzQnVmZmVyKHRoaXMpKSByZXR1cm4gdW5kZWZpbmVkCiAgICAgIHJldHVybiB0aGlzLmJ1ZmZlcgogICAgfQogIH0pOwoKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQnVmZmVyLnByb3RvdHlwZSwgJ29mZnNldCcsIHsKICAgIGVudW1lcmFibGU6IHRydWUsCiAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKCFCdWZmZXIuaXNCdWZmZXIodGhpcykpIHJldHVybiB1bmRlZmluZWQKICAgICAgcmV0dXJuIHRoaXMuYnl0ZU9mZnNldAogICAgfQogIH0pOwoKICBmdW5jdGlvbiBjcmVhdGVCdWZmZXIgKGxlbmd0aCkgewogICAgaWYgKGxlbmd0aCA+IEtfTUFYX0xFTkdUSCkgewogICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignVGhlIHZhbHVlICInICsgbGVuZ3RoICsgJyIgaXMgaW52YWxpZCBmb3Igb3B0aW9uICJzaXplIicpCiAgICB9CiAgICAvLyBSZXR1cm4gYW4gYXVnbWVudGVkIGBVaW50OEFycmF5YCBpbnN0YW5jZQogICAgY29uc3QgYnVmID0gbmV3IFVpbnQ4QXJyYXkobGVuZ3RoKTsKICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihidWYsIEJ1ZmZlci5wcm90b3R5cGUpOwogICAgcmV0dXJuIGJ1ZgogIH0KCiAgLyoqCiAgICogVGhlIEJ1ZmZlciBjb25zdHJ1Y3RvciByZXR1cm5zIGluc3RhbmNlcyBvZiBgVWludDhBcnJheWAgdGhhdCBoYXZlIHRoZWlyCiAgICogcHJvdG90eXBlIGNoYW5nZWQgdG8gYEJ1ZmZlci5wcm90b3R5cGVgLiBGdXJ0aGVybW9yZSwgYEJ1ZmZlcmAgaXMgYSBzdWJjbGFzcyBvZgogICAqIGBVaW50OEFycmF5YCwgc28gdGhlIHJldHVybmVkIGluc3RhbmNlcyB3aWxsIGhhdmUgYWxsIHRoZSBub2RlIGBCdWZmZXJgIG1ldGhvZHMKICAgKiBhbmQgdGhlIGBVaW50OEFycmF5YCBtZXRob2RzLiBTcXVhcmUgYnJhY2tldCBub3RhdGlvbiB3b3JrcyBhcyBleHBlY3RlZCAtLSBpdAogICAqIHJldHVybnMgYSBzaW5nbGUgb2N0ZXQuCiAgICoKICAgKiBUaGUgYFVpbnQ4QXJyYXlgIHByb3RvdHlwZSByZW1haW5zIHVubW9kaWZpZWQuCiAgICovCgogIGZ1bmN0aW9uIEJ1ZmZlciAoYXJnLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHsKICAgIC8vIENvbW1vbiBjYXNlLgogICAgaWYgKHR5cGVvZiBhcmcgPT09ICdudW1iZXInKSB7CiAgICAgIGlmICh0eXBlb2YgZW5jb2RpbmdPck9mZnNldCA9PT0gJ3N0cmluZycpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKAogICAgICAgICAgJ1RoZSAic3RyaW5nIiBhcmd1bWVudCBtdXN0IGJlIG9mIHR5cGUgc3RyaW5nLiBSZWNlaXZlZCB0eXBlIG51bWJlcicKICAgICAgICApCiAgICAgIH0KICAgICAgcmV0dXJuIGFsbG9jVW5zYWZlKGFyZykKICAgIH0KICAgIHJldHVybiBmcm9tKGFyZywgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKQogIH0KCiAgQnVmZmVyLnBvb2xTaXplID0gODE5MjsgLy8gbm90IHVzZWQgYnkgdGhpcyBpbXBsZW1lbnRhdGlvbgoKICBmdW5jdGlvbiBmcm9tICh2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKSB7CiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykgewogICAgICByZXR1cm4gZnJvbVN0cmluZyh2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCkKICAgIH0KCiAgICBpZiAoQXJyYXlCdWZmZXIuaXNWaWV3KHZhbHVlKSkgewogICAgICByZXR1cm4gZnJvbUFycmF5Vmlldyh2YWx1ZSkKICAgIH0KCiAgICBpZiAodmFsdWUgPT0gbnVsbCkgewogICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKAogICAgICAgICdUaGUgZmlyc3QgYXJndW1lbnQgbXVzdCBiZSBvbmUgb2YgdHlwZSBzdHJpbmcsIEJ1ZmZlciwgQXJyYXlCdWZmZXIsIEFycmF5LCAnICsKICAgICAgICAnb3IgQXJyYXktbGlrZSBPYmplY3QuIFJlY2VpdmVkIHR5cGUgJyArICh0eXBlb2YgdmFsdWUpCiAgICAgICkKICAgIH0KCiAgICBpZiAoaXNJbnN0YW5jZSh2YWx1ZSwgQXJyYXlCdWZmZXIpIHx8CiAgICAgICAgKHZhbHVlICYmIGlzSW5zdGFuY2UodmFsdWUuYnVmZmVyLCBBcnJheUJ1ZmZlcikpKSB7CiAgICAgIHJldHVybiBmcm9tQXJyYXlCdWZmZXIodmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkKICAgIH0KCiAgICBpZiAodHlwZW9mIFNoYXJlZEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJgogICAgICAgIChpc0luc3RhbmNlKHZhbHVlLCBTaGFyZWRBcnJheUJ1ZmZlcikgfHwKICAgICAgICAodmFsdWUgJiYgaXNJbnN0YW5jZSh2YWx1ZS5idWZmZXIsIFNoYXJlZEFycmF5QnVmZmVyKSkpKSB7CiAgICAgIHJldHVybiBmcm9tQXJyYXlCdWZmZXIodmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkKICAgIH0KCiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykgewogICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKAogICAgICAgICdUaGUgInZhbHVlIiBhcmd1bWVudCBtdXN0IG5vdCBiZSBvZiB0eXBlIG51bWJlci4gUmVjZWl2ZWQgdHlwZSBudW1iZXInCiAgICAgICkKICAgIH0KCiAgICBjb25zdCB2YWx1ZU9mID0gdmFsdWUudmFsdWVPZiAmJiB2YWx1ZS52YWx1ZU9mKCk7CiAgICBpZiAodmFsdWVPZiAhPSBudWxsICYmIHZhbHVlT2YgIT09IHZhbHVlKSB7CiAgICAgIHJldHVybiBCdWZmZXIuZnJvbSh2YWx1ZU9mLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpCiAgICB9CgogICAgY29uc3QgYiA9IGZyb21PYmplY3QodmFsdWUpOwogICAgaWYgKGIpIHJldHVybiBiCgogICAgaWYgKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1ByaW1pdGl2ZSAhPSBudWxsICYmCiAgICAgICAgdHlwZW9mIHZhbHVlW1N5bWJvbC50b1ByaW1pdGl2ZV0gPT09ICdmdW5jdGlvbicpIHsKICAgICAgcmV0dXJuIEJ1ZmZlci5mcm9tKHZhbHVlW1N5bWJvbC50b1ByaW1pdGl2ZV0oJ3N0cmluZycpLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpCiAgICB9CgogICAgdGhyb3cgbmV3IFR5cGVFcnJvcigKICAgICAgJ1RoZSBmaXJzdCBhcmd1bWVudCBtdXN0IGJlIG9uZSBvZiB0eXBlIHN0cmluZywgQnVmZmVyLCBBcnJheUJ1ZmZlciwgQXJyYXksICcgKwogICAgICAnb3IgQXJyYXktbGlrZSBPYmplY3QuIFJlY2VpdmVkIHR5cGUgJyArICh0eXBlb2YgdmFsdWUpCiAgICApCiAgfQoKICAvKioKICAgKiBGdW5jdGlvbmFsbHkgZXF1aXZhbGVudCB0byBCdWZmZXIoYXJnLCBlbmNvZGluZykgYnV0IHRocm93cyBhIFR5cGVFcnJvcgogICAqIGlmIHZhbHVlIGlzIGEgbnVtYmVyLgogICAqIEJ1ZmZlci5mcm9tKHN0clssIGVuY29kaW5nXSkKICAgKiBCdWZmZXIuZnJvbShhcnJheSkKICAgKiBCdWZmZXIuZnJvbShidWZmZXIpCiAgICogQnVmZmVyLmZyb20oYXJyYXlCdWZmZXJbLCBieXRlT2Zmc2V0WywgbGVuZ3RoXV0pCiAgICoqLwogIEJ1ZmZlci5mcm9tID0gZnVuY3Rpb24gKHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHsKICAgIHJldHVybiBmcm9tKHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpCiAgfTsKCiAgLy8gTm90ZTogQ2hhbmdlIHByb3RvdHlwZSAqYWZ0ZXIqIEJ1ZmZlci5mcm9tIGlzIGRlZmluZWQgdG8gd29ya2Fyb3VuZCBDaHJvbWUgYnVnOgogIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyL3B1bGwvMTQ4CiAgT2JqZWN0LnNldFByb3RvdHlwZU9mKEJ1ZmZlci5wcm90b3R5cGUsIFVpbnQ4QXJyYXkucHJvdG90eXBlKTsKICBPYmplY3Quc2V0UHJvdG90eXBlT2YoQnVmZmVyLCBVaW50OEFycmF5KTsKCiAgZnVuY3Rpb24gYXNzZXJ0U2l6ZSAoc2l6ZSkgewogICAgaWYgKHR5cGVvZiBzaXplICE9PSAnbnVtYmVyJykgewogICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCcic2l6ZSIgYXJndW1lbnQgbXVzdCBiZSBvZiB0eXBlIG51bWJlcicpCiAgICB9IGVsc2UgaWYgKHNpemUgPCAwKSB7CiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdUaGUgdmFsdWUgIicgKyBzaXplICsgJyIgaXMgaW52YWxpZCBmb3Igb3B0aW9uICJzaXplIicpCiAgICB9CiAgfQoKICBmdW5jdGlvbiBhbGxvYyAoc2l6ZSwgZmlsbCwgZW5jb2RpbmcpIHsKICAgIGFzc2VydFNpemUoc2l6ZSk7CiAgICBpZiAoc2l6ZSA8PSAwKSB7CiAgICAgIHJldHVybiBjcmVhdGVCdWZmZXIoc2l6ZSkKICAgIH0KICAgIGlmIChmaWxsICE9PSB1bmRlZmluZWQpIHsKICAgICAgLy8gT25seSBwYXkgYXR0ZW50aW9uIHRvIGVuY29kaW5nIGlmIGl0J3MgYSBzdHJpbmcuIFRoaXMKICAgICAgLy8gcHJldmVudHMgYWNjaWRlbnRhbGx5IHNlbmRpbmcgaW4gYSBudW1iZXIgdGhhdCB3b3VsZAogICAgICAvLyBiZSBpbnRlcnByZXRlZCBhcyBhIHN0YXJ0IG9mZnNldC4KICAgICAgcmV0dXJuIHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycKICAgICAgICA/IGNyZWF0ZUJ1ZmZlcihzaXplKS5maWxsKGZpbGwsIGVuY29kaW5nKQogICAgICAgIDogY3JlYXRlQnVmZmVyKHNpemUpLmZpbGwoZmlsbCkKICAgIH0KICAgIHJldHVybiBjcmVhdGVCdWZmZXIoc2l6ZSkKICB9CgogIC8qKgogICAqIENyZWF0ZXMgYSBuZXcgZmlsbGVkIEJ1ZmZlciBpbnN0YW5jZS4KICAgKiBhbGxvYyhzaXplWywgZmlsbFssIGVuY29kaW5nXV0pCiAgICoqLwogIEJ1ZmZlci5hbGxvYyA9IGZ1bmN0aW9uIChzaXplLCBmaWxsLCBlbmNvZGluZykgewogICAgcmV0dXJuIGFsbG9jKHNpemUsIGZpbGwsIGVuY29kaW5nKQogIH07CgogIGZ1bmN0aW9uIGFsbG9jVW5zYWZlIChzaXplKSB7CiAgICBhc3NlcnRTaXplKHNpemUpOwogICAgcmV0dXJuIGNyZWF0ZUJ1ZmZlcihzaXplIDwgMCA/IDAgOiBjaGVja2VkKHNpemUpIHwgMCkKICB9CgogIC8qKgogICAqIEVxdWl2YWxlbnQgdG8gQnVmZmVyKG51bSksIGJ5IGRlZmF1bHQgY3JlYXRlcyBhIG5vbi16ZXJvLWZpbGxlZCBCdWZmZXIgaW5zdGFuY2UuCiAgICogKi8KICBCdWZmZXIuYWxsb2NVbnNhZmUgPSBmdW5jdGlvbiAoc2l6ZSkgewogICAgcmV0dXJuIGFsbG9jVW5zYWZlKHNpemUpCiAgfTsKICAvKioKICAgKiBFcXVpdmFsZW50IHRvIFNsb3dCdWZmZXIobnVtKSwgYnkgZGVmYXVsdCBjcmVhdGVzIGEgbm9uLXplcm8tZmlsbGVkIEJ1ZmZlciBpbnN0YW5jZS4KICAgKi8KICBCdWZmZXIuYWxsb2NVbnNhZmVTbG93ID0gZnVuY3Rpb24gKHNpemUpIHsKICAgIHJldHVybiBhbGxvY1Vuc2FmZShzaXplKQogIH07CgogIGZ1bmN0aW9uIGZyb21TdHJpbmcgKHN0cmluZywgZW5jb2RpbmcpIHsKICAgIGlmICh0eXBlb2YgZW5jb2RpbmcgIT09ICdzdHJpbmcnIHx8IGVuY29kaW5nID09PSAnJykgewogICAgICBlbmNvZGluZyA9ICd1dGY4JzsKICAgIH0KCiAgICBpZiAoIUJ1ZmZlci5pc0VuY29kaW5nKGVuY29kaW5nKSkgewogICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpCiAgICB9CgogICAgY29uc3QgbGVuZ3RoID0gYnl0ZUxlbmd0aChzdHJpbmcsIGVuY29kaW5nKSB8IDA7CiAgICBsZXQgYnVmID0gY3JlYXRlQnVmZmVyKGxlbmd0aCk7CgogICAgY29uc3QgYWN0dWFsID0gYnVmLndyaXRlKHN0cmluZywgZW5jb2RpbmcpOwoKICAgIGlmIChhY3R1YWwgIT09IGxlbmd0aCkgewogICAgICAvLyBXcml0aW5nIGEgaGV4IHN0cmluZywgZm9yIGV4YW1wbGUsIHRoYXQgY29udGFpbnMgaW52YWxpZCBjaGFyYWN0ZXJzIHdpbGwKICAgICAgLy8gY2F1c2UgZXZlcnl0aGluZyBhZnRlciB0aGUgZmlyc3QgaW52YWxpZCBjaGFyYWN0ZXIgdG8gYmUgaWdub3JlZC4gKGUuZy4KICAgICAgLy8gJ2FieHhjZCcgd2lsbCBiZSB0cmVhdGVkIGFzICdhYicpCiAgICAgIGJ1ZiA9IGJ1Zi5zbGljZSgwLCBhY3R1YWwpOwogICAgfQoKICAgIHJldHVybiBidWYKICB9CgogIGZ1bmN0aW9uIGZyb21BcnJheUxpa2UgKGFycmF5KSB7CiAgICBjb25zdCBsZW5ndGggPSBhcnJheS5sZW5ndGggPCAwID8gMCA6IGNoZWNrZWQoYXJyYXkubGVuZ3RoKSB8IDA7CiAgICBjb25zdCBidWYgPSBjcmVhdGVCdWZmZXIobGVuZ3RoKTsKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHsKICAgICAgYnVmW2ldID0gYXJyYXlbaV0gJiAyNTU7CiAgICB9CiAgICByZXR1cm4gYnVmCiAgfQoKICBmdW5jdGlvbiBmcm9tQXJyYXlWaWV3IChhcnJheVZpZXcpIHsKICAgIGlmIChpc0luc3RhbmNlKGFycmF5VmlldywgVWludDhBcnJheSkpIHsKICAgICAgY29uc3QgY29weSA9IG5ldyBVaW50OEFycmF5KGFycmF5Vmlldyk7CiAgICAgIHJldHVybiBmcm9tQXJyYXlCdWZmZXIoY29weS5idWZmZXIsIGNvcHkuYnl0ZU9mZnNldCwgY29weS5ieXRlTGVuZ3RoKQogICAgfQogICAgcmV0dXJuIGZyb21BcnJheUxpa2UoYXJyYXlWaWV3KQogIH0KCiAgZnVuY3Rpb24gZnJvbUFycmF5QnVmZmVyIChhcnJheSwgYnl0ZU9mZnNldCwgbGVuZ3RoKSB7CiAgICBpZiAoYnl0ZU9mZnNldCA8IDAgfHwgYXJyYXkuYnl0ZUxlbmd0aCA8IGJ5dGVPZmZzZXQpIHsKICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJyJvZmZzZXQiIGlzIG91dHNpZGUgb2YgYnVmZmVyIGJvdW5kcycpCiAgICB9CgogICAgaWYgKGFycmF5LmJ5dGVMZW5ndGggPCBieXRlT2Zmc2V0ICsgKGxlbmd0aCB8fCAwKSkgewogICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignImxlbmd0aCIgaXMgb3V0c2lkZSBvZiBidWZmZXIgYm91bmRzJykKICAgIH0KCiAgICBsZXQgYnVmOwogICAgaWYgKGJ5dGVPZmZzZXQgPT09IHVuZGVmaW5lZCAmJiBsZW5ndGggPT09IHVuZGVmaW5lZCkgewogICAgICBidWYgPSBuZXcgVWludDhBcnJheShhcnJheSk7CiAgICB9IGVsc2UgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIGJ1ZiA9IG5ldyBVaW50OEFycmF5KGFycmF5LCBieXRlT2Zmc2V0KTsKICAgIH0gZWxzZSB7CiAgICAgIGJ1ZiA9IG5ldyBVaW50OEFycmF5KGFycmF5LCBieXRlT2Zmc2V0LCBsZW5ndGgpOwogICAgfQoKICAgIC8vIFJldHVybiBhbiBhdWdtZW50ZWQgYFVpbnQ4QXJyYXlgIGluc3RhbmNlCiAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YoYnVmLCBCdWZmZXIucHJvdG90eXBlKTsKCiAgICByZXR1cm4gYnVmCiAgfQoKICBmdW5jdGlvbiBmcm9tT2JqZWN0IChvYmopIHsKICAgIGlmIChCdWZmZXIuaXNCdWZmZXIob2JqKSkgewogICAgICBjb25zdCBsZW4gPSBjaGVja2VkKG9iai5sZW5ndGgpIHwgMDsKICAgICAgY29uc3QgYnVmID0gY3JlYXRlQnVmZmVyKGxlbik7CgogICAgICBpZiAoYnVmLmxlbmd0aCA9PT0gMCkgewogICAgICAgIHJldHVybiBidWYKICAgICAgfQoKICAgICAgb2JqLmNvcHkoYnVmLCAwLCAwLCBsZW4pOwogICAgICByZXR1cm4gYnVmCiAgICB9CgogICAgaWYgKG9iai5sZW5ndGggIT09IHVuZGVmaW5lZCkgewogICAgICBpZiAodHlwZW9mIG9iai5sZW5ndGggIT09ICdudW1iZXInIHx8IG51bWJlcklzTmFOKG9iai5sZW5ndGgpKSB7CiAgICAgICAgcmV0dXJuIGNyZWF0ZUJ1ZmZlcigwKQogICAgICB9CiAgICAgIHJldHVybiBmcm9tQXJyYXlMaWtlKG9iaikKICAgIH0KCiAgICBpZiAob2JqLnR5cGUgPT09ICdCdWZmZXInICYmIEFycmF5LmlzQXJyYXkob2JqLmRhdGEpKSB7CiAgICAgIHJldHVybiBmcm9tQXJyYXlMaWtlKG9iai5kYXRhKQogICAgfQogIH0KCiAgZnVuY3Rpb24gY2hlY2tlZCAobGVuZ3RoKSB7CiAgICAvLyBOb3RlOiBjYW5ub3QgdXNlIGBsZW5ndGggPCBLX01BWF9MRU5HVEhgIGhlcmUgYmVjYXVzZSB0aGF0IGZhaWxzIHdoZW4KICAgIC8vIGxlbmd0aCBpcyBOYU4gKHdoaWNoIGlzIG90aGVyd2lzZSBjb2VyY2VkIHRvIHplcm8uKQogICAgaWYgKGxlbmd0aCA+PSBLX01BWF9MRU5HVEgpIHsKICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0F0dGVtcHQgdG8gYWxsb2NhdGUgQnVmZmVyIGxhcmdlciB0aGFuIG1heGltdW0gJyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICdzaXplOiAweCcgKyBLX01BWF9MRU5HVEgudG9TdHJpbmcoMTYpICsgJyBieXRlcycpCiAgICB9CiAgICByZXR1cm4gbGVuZ3RoIHwgMAogIH0KCiAgZnVuY3Rpb24gU2xvd0J1ZmZlciAobGVuZ3RoKSB7CiAgICBpZiAoK2xlbmd0aCAhPSBsZW5ndGgpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBlcWVxZXEKICAgICAgbGVuZ3RoID0gMDsKICAgIH0KICAgIHJldHVybiBCdWZmZXIuYWxsb2MoK2xlbmd0aCkKICB9CgogIEJ1ZmZlci5pc0J1ZmZlciA9IGZ1bmN0aW9uIGlzQnVmZmVyIChiKSB7CiAgICByZXR1cm4gYiAhPSBudWxsICYmIGIuX2lzQnVmZmVyID09PSB0cnVlICYmCiAgICAgIGIgIT09IEJ1ZmZlci5wcm90b3R5cGUgLy8gc28gQnVmZmVyLmlzQnVmZmVyKEJ1ZmZlci5wcm90b3R5cGUpIHdpbGwgYmUgZmFsc2UKICB9OwoKICBCdWZmZXIuY29tcGFyZSA9IGZ1bmN0aW9uIGNvbXBhcmUgKGEsIGIpIHsKICAgIGlmIChpc0luc3RhbmNlKGEsIFVpbnQ4QXJyYXkpKSBhID0gQnVmZmVyLmZyb20oYSwgYS5vZmZzZXQsIGEuYnl0ZUxlbmd0aCk7CiAgICBpZiAoaXNJbnN0YW5jZShiLCBVaW50OEFycmF5KSkgYiA9IEJ1ZmZlci5mcm9tKGIsIGIub2Zmc2V0LCBiLmJ5dGVMZW5ndGgpOwogICAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYSkgfHwgIUJ1ZmZlci5pc0J1ZmZlcihiKSkgewogICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKAogICAgICAgICdUaGUgImJ1ZjEiLCAiYnVmMiIgYXJndW1lbnRzIG11c3QgYmUgb25lIG9mIHR5cGUgQnVmZmVyIG9yIFVpbnQ4QXJyYXknCiAgICAgICkKICAgIH0KCiAgICBpZiAoYSA9PT0gYikgcmV0dXJuIDAKCiAgICBsZXQgeCA9IGEubGVuZ3RoOwogICAgbGV0IHkgPSBiLmxlbmd0aDsKCiAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gTWF0aC5taW4oeCwgeSk7IGkgPCBsZW47ICsraSkgewogICAgICBpZiAoYVtpXSAhPT0gYltpXSkgewogICAgICAgIHggPSBhW2ldOwogICAgICAgIHkgPSBiW2ldOwogICAgICAgIGJyZWFrCiAgICAgIH0KICAgIH0KCiAgICBpZiAoeCA8IHkpIHJldHVybiAtMQogICAgaWYgKHkgPCB4KSByZXR1cm4gMQogICAgcmV0dXJuIDAKICB9OwoKICBCdWZmZXIuaXNFbmNvZGluZyA9IGZ1bmN0aW9uIGlzRW5jb2RpbmcgKGVuY29kaW5nKSB7CiAgICBzd2l0Y2ggKFN0cmluZyhlbmNvZGluZykudG9Mb3dlckNhc2UoKSkgewogICAgICBjYXNlICdoZXgnOgogICAgICBjYXNlICd1dGY4JzoKICAgICAgY2FzZSAndXRmLTgnOgogICAgICBjYXNlICdhc2NpaSc6CiAgICAgIGNhc2UgJ2xhdGluMSc6CiAgICAgIGNhc2UgJ2JpbmFyeSc6CiAgICAgIGNhc2UgJ2Jhc2U2NCc6CiAgICAgIGNhc2UgJ3VjczInOgogICAgICBjYXNlICd1Y3MtMic6CiAgICAgIGNhc2UgJ3V0ZjE2bGUnOgogICAgICBjYXNlICd1dGYtMTZsZSc6CiAgICAgICAgcmV0dXJuIHRydWUKICAgICAgZGVmYXVsdDoKICAgICAgICByZXR1cm4gZmFsc2UKICAgIH0KICB9OwoKICBCdWZmZXIuY29uY2F0ID0gZnVuY3Rpb24gY29uY2F0IChsaXN0LCBsZW5ndGgpIHsKICAgIGlmICghQXJyYXkuaXNBcnJheShsaXN0KSkgewogICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCcibGlzdCIgYXJndW1lbnQgbXVzdCBiZSBhbiBBcnJheSBvZiBCdWZmZXJzJykKICAgIH0KCiAgICBpZiAobGlzdC5sZW5ndGggPT09IDApIHsKICAgICAgcmV0dXJuIEJ1ZmZlci5hbGxvYygwKQogICAgfQoKICAgIGxldCBpOwogICAgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIGxlbmd0aCA9IDA7CiAgICAgIGZvciAoaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgKytpKSB7CiAgICAgICAgbGVuZ3RoICs9IGxpc3RbaV0ubGVuZ3RoOwogICAgICB9CiAgICB9CgogICAgY29uc3QgYnVmZmVyID0gQnVmZmVyLmFsbG9jVW5zYWZlKGxlbmd0aCk7CiAgICBsZXQgcG9zID0gMDsKICAgIGZvciAoaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgKytpKSB7CiAgICAgIGxldCBidWYgPSBsaXN0W2ldOwogICAgICBpZiAoaXNJbnN0YW5jZShidWYsIFVpbnQ4QXJyYXkpKSB7CiAgICAgICAgaWYgKHBvcyArIGJ1Zi5sZW5ndGggPiBidWZmZXIubGVuZ3RoKSB7CiAgICAgICAgICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihidWYpKSBidWYgPSBCdWZmZXIuZnJvbShidWYpOwogICAgICAgICAgYnVmLmNvcHkoYnVmZmVyLCBwb3MpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBVaW50OEFycmF5LnByb3RvdHlwZS5zZXQuY2FsbCgKICAgICAgICAgICAgYnVmZmVyLAogICAgICAgICAgICBidWYsCiAgICAgICAgICAgIHBvcwogICAgICAgICAgKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihidWYpKSB7CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignImxpc3QiIGFyZ3VtZW50IG11c3QgYmUgYW4gQXJyYXkgb2YgQnVmZmVycycpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgYnVmLmNvcHkoYnVmZmVyLCBwb3MpOwogICAgICB9CiAgICAgIHBvcyArPSBidWYubGVuZ3RoOwogICAgfQogICAgcmV0dXJuIGJ1ZmZlcgogIH07CgogIGZ1bmN0aW9uIGJ5dGVMZW5ndGggKHN0cmluZywgZW5jb2RpbmcpIHsKICAgIGlmIChCdWZmZXIuaXNCdWZmZXIoc3RyaW5nKSkgewogICAgICByZXR1cm4gc3RyaW5nLmxlbmd0aAogICAgfQogICAgaWYgKEFycmF5QnVmZmVyLmlzVmlldyhzdHJpbmcpIHx8IGlzSW5zdGFuY2Uoc3RyaW5nLCBBcnJheUJ1ZmZlcikpIHsKICAgICAgcmV0dXJuIHN0cmluZy5ieXRlTGVuZ3RoCiAgICB9CiAgICBpZiAodHlwZW9mIHN0cmluZyAhPT0gJ3N0cmluZycpIHsKICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigKICAgICAgICAnVGhlICJzdHJpbmciIGFyZ3VtZW50IG11c3QgYmUgb25lIG9mIHR5cGUgc3RyaW5nLCBCdWZmZXIsIG9yIEFycmF5QnVmZmVyLiAnICsKICAgICAgICAnUmVjZWl2ZWQgdHlwZSAnICsgdHlwZW9mIHN0cmluZwogICAgICApCiAgICB9CgogICAgY29uc3QgbGVuID0gc3RyaW5nLmxlbmd0aDsKICAgIGNvbnN0IG11c3RNYXRjaCA9IChhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gPT09IHRydWUpOwogICAgaWYgKCFtdXN0TWF0Y2ggJiYgbGVuID09PSAwKSByZXR1cm4gMAoKICAgIC8vIFVzZSBhIGZvciBsb29wIHRvIGF2b2lkIHJlY3Vyc2lvbgogICAgbGV0IGxvd2VyZWRDYXNlID0gZmFsc2U7CiAgICBmb3IgKDs7KSB7CiAgICAgIHN3aXRjaCAoZW5jb2RpbmcpIHsKICAgICAgICBjYXNlICdhc2NpaSc6CiAgICAgICAgY2FzZSAnbGF0aW4xJzoKICAgICAgICBjYXNlICdiaW5hcnknOgogICAgICAgICAgcmV0dXJuIGxlbgogICAgICAgIGNhc2UgJ3V0ZjgnOgogICAgICAgIGNhc2UgJ3V0Zi04JzoKICAgICAgICAgIHJldHVybiB1dGY4VG9CeXRlcyhzdHJpbmcpLmxlbmd0aAogICAgICAgIGNhc2UgJ3VjczInOgogICAgICAgIGNhc2UgJ3Vjcy0yJzoKICAgICAgICBjYXNlICd1dGYxNmxlJzoKICAgICAgICBjYXNlICd1dGYtMTZsZSc6CiAgICAgICAgICByZXR1cm4gbGVuICogMgogICAgICAgIGNhc2UgJ2hleCc6CiAgICAgICAgICByZXR1cm4gbGVuID4+PiAxCiAgICAgICAgY2FzZSAnYmFzZTY0JzoKICAgICAgICAgIHJldHVybiBiYXNlNjRUb0J5dGVzKHN0cmluZykubGVuZ3RoCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgewogICAgICAgICAgICByZXR1cm4gbXVzdE1hdGNoID8gLTEgOiB1dGY4VG9CeXRlcyhzdHJpbmcpLmxlbmd0aCAvLyBhc3N1bWUgdXRmOAogICAgICAgICAgfQogICAgICAgICAgZW5jb2RpbmcgPSAoJycgKyBlbmNvZGluZykudG9Mb3dlckNhc2UoKTsKICAgICAgICAgIGxvd2VyZWRDYXNlID0gdHJ1ZTsKICAgICAgfQogICAgfQogIH0KICBCdWZmZXIuYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGg7CgogIGZ1bmN0aW9uIHNsb3dUb1N0cmluZyAoZW5jb2RpbmcsIHN0YXJ0LCBlbmQpIHsKICAgIGxldCBsb3dlcmVkQ2FzZSA9IGZhbHNlOwoKICAgIC8vIE5vIG5lZWQgdG8gdmVyaWZ5IHRoYXQgInRoaXMubGVuZ3RoIDw9IE1BWF9VSU5UMzIiIHNpbmNlIGl0J3MgYSByZWFkLW9ubHkKICAgIC8vIHByb3BlcnR5IG9mIGEgdHlwZWQgYXJyYXkuCgogICAgLy8gVGhpcyBiZWhhdmVzIG5laXRoZXIgbGlrZSBTdHJpbmcgbm9yIFVpbnQ4QXJyYXkgaW4gdGhhdCB3ZSBzZXQgc3RhcnQvZW5kCiAgICAvLyB0byB0aGVpciB1cHBlci9sb3dlciBib3VuZHMgaWYgdGhlIHZhbHVlIHBhc3NlZCBpcyBvdXQgb2YgcmFuZ2UuCiAgICAvLyB1bmRlZmluZWQgaXMgaGFuZGxlZCBzcGVjaWFsbHkgYXMgcGVyIEVDTUEtMjYyIDZ0aCBFZGl0aW9uLAogICAgLy8gU2VjdGlvbiAxMy4zLjMuNyBSdW50aW1lIFNlbWFudGljczogS2V5ZWRCaW5kaW5nSW5pdGlhbGl6YXRpb24uCiAgICBpZiAoc3RhcnQgPT09IHVuZGVmaW5lZCB8fCBzdGFydCA8IDApIHsKICAgICAgc3RhcnQgPSAwOwogICAgfQogICAgLy8gUmV0dXJuIGVhcmx5IGlmIHN0YXJ0ID4gdGhpcy5sZW5ndGguIERvbmUgaGVyZSB0byBwcmV2ZW50IHBvdGVudGlhbCB1aW50MzIKICAgIC8vIGNvZXJjaW9uIGZhaWwgYmVsb3cuCiAgICBpZiAoc3RhcnQgPiB0aGlzLmxlbmd0aCkgewogICAgICByZXR1cm4gJycKICAgIH0KCiAgICBpZiAoZW5kID09PSB1bmRlZmluZWQgfHwgZW5kID4gdGhpcy5sZW5ndGgpIHsKICAgICAgZW5kID0gdGhpcy5sZW5ndGg7CiAgICB9CgogICAgaWYgKGVuZCA8PSAwKSB7CiAgICAgIHJldHVybiAnJwogICAgfQoKICAgIC8vIEZvcmNlIGNvZXJjaW9uIHRvIHVpbnQzMi4gVGhpcyB3aWxsIGFsc28gY29lcmNlIGZhbHNleS9OYU4gdmFsdWVzIHRvIDAuCiAgICBlbmQgPj4+PSAwOwogICAgc3RhcnQgPj4+PSAwOwoKICAgIGlmIChlbmQgPD0gc3RhcnQpIHsKICAgICAgcmV0dXJuICcnCiAgICB9CgogICAgaWYgKCFlbmNvZGluZykgZW5jb2RpbmcgPSAndXRmOCc7CgogICAgd2hpbGUgKHRydWUpIHsKICAgICAgc3dpdGNoIChlbmNvZGluZykgewogICAgICAgIGNhc2UgJ2hleCc6CiAgICAgICAgICByZXR1cm4gaGV4U2xpY2UodGhpcywgc3RhcnQsIGVuZCkKCiAgICAgICAgY2FzZSAndXRmOCc6CiAgICAgICAgY2FzZSAndXRmLTgnOgogICAgICAgICAgcmV0dXJuIHV0ZjhTbGljZSh0aGlzLCBzdGFydCwgZW5kKQoKICAgICAgICBjYXNlICdhc2NpaSc6CiAgICAgICAgICByZXR1cm4gYXNjaWlTbGljZSh0aGlzLCBzdGFydCwgZW5kKQoKICAgICAgICBjYXNlICdsYXRpbjEnOgogICAgICAgIGNhc2UgJ2JpbmFyeSc6CiAgICAgICAgICByZXR1cm4gbGF0aW4xU2xpY2UodGhpcywgc3RhcnQsIGVuZCkKCiAgICAgICAgY2FzZSAnYmFzZTY0JzoKICAgICAgICAgIHJldHVybiBiYXNlNjRTbGljZSh0aGlzLCBzdGFydCwgZW5kKQoKICAgICAgICBjYXNlICd1Y3MyJzoKICAgICAgICBjYXNlICd1Y3MtMic6CiAgICAgICAgY2FzZSAndXRmMTZsZSc6CiAgICAgICAgY2FzZSAndXRmLTE2bGUnOgogICAgICAgICAgcmV0dXJuIHV0ZjE2bGVTbGljZSh0aGlzLCBzdGFydCwgZW5kKQoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgaWYgKGxvd2VyZWRDYXNlKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpCiAgICAgICAgICBlbmNvZGluZyA9IChlbmNvZGluZyArICcnKS50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlOwogICAgICB9CiAgICB9CiAgfQoKICAvLyBUaGlzIHByb3BlcnR5IGlzIHVzZWQgYnkgYEJ1ZmZlci5pc0J1ZmZlcmAgKGFuZCB0aGUgYGlzLWJ1ZmZlcmAgbnBtIHBhY2thZ2UpCiAgLy8gdG8gZGV0ZWN0IGEgQnVmZmVyIGluc3RhbmNlLiBJdCdzIG5vdCBwb3NzaWJsZSB0byB1c2UgYGluc3RhbmNlb2YgQnVmZmVyYAogIC8vIHJlbGlhYmx5IGluIGEgYnJvd3NlcmlmeSBjb250ZXh0IGJlY2F1c2UgdGhlcmUgY291bGQgYmUgbXVsdGlwbGUgZGlmZmVyZW50CiAgLy8gY29waWVzIG9mIHRoZSAnYnVmZmVyJyBwYWNrYWdlIGluIHVzZS4gVGhpcyBtZXRob2Qgd29ya3MgZXZlbiBmb3IgQnVmZmVyCiAgLy8gaW5zdGFuY2VzIHRoYXQgd2VyZSBjcmVhdGVkIGZyb20gYW5vdGhlciBjb3B5IG9mIHRoZSBgYnVmZmVyYCBwYWNrYWdlLgogIC8vIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXIvaXNzdWVzLzE1NAogIEJ1ZmZlci5wcm90b3R5cGUuX2lzQnVmZmVyID0gdHJ1ZTsKCiAgZnVuY3Rpb24gc3dhcCAoYiwgbiwgbSkgewogICAgY29uc3QgaSA9IGJbbl07CiAgICBiW25dID0gYlttXTsKICAgIGJbbV0gPSBpOwogIH0KCiAgQnVmZmVyLnByb3RvdHlwZS5zd2FwMTYgPSBmdW5jdGlvbiBzd2FwMTYgKCkgewogICAgY29uc3QgbGVuID0gdGhpcy5sZW5ndGg7CiAgICBpZiAobGVuICUgMiAhPT0gMCkgewogICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDE2LWJpdHMnKQogICAgfQogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkgKz0gMikgewogICAgICBzd2FwKHRoaXMsIGksIGkgKyAxKTsKICAgIH0KICAgIHJldHVybiB0aGlzCiAgfTsKCiAgQnVmZmVyLnByb3RvdHlwZS5zd2FwMzIgPSBmdW5jdGlvbiBzd2FwMzIgKCkgewogICAgY29uc3QgbGVuID0gdGhpcy5sZW5ndGg7CiAgICBpZiAobGVuICUgNCAhPT0gMCkgewogICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDMyLWJpdHMnKQogICAgfQogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkgKz0gNCkgewogICAgICBzd2FwKHRoaXMsIGksIGkgKyAzKTsKICAgICAgc3dhcCh0aGlzLCBpICsgMSwgaSArIDIpOwogICAgfQogICAgcmV0dXJuIHRoaXMKICB9OwoKICBCdWZmZXIucHJvdG90eXBlLnN3YXA2NCA9IGZ1bmN0aW9uIHN3YXA2NCAoKSB7CiAgICBjb25zdCBsZW4gPSB0aGlzLmxlbmd0aDsKICAgIGlmIChsZW4gJSA4ICE9PSAwKSB7CiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgNjQtYml0cycpCiAgICB9CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSArPSA4KSB7CiAgICAgIHN3YXAodGhpcywgaSwgaSArIDcpOwogICAgICBzd2FwKHRoaXMsIGkgKyAxLCBpICsgNik7CiAgICAgIHN3YXAodGhpcywgaSArIDIsIGkgKyA1KTsKICAgICAgc3dhcCh0aGlzLCBpICsgMywgaSArIDQpOwogICAgfQogICAgcmV0dXJuIHRoaXMKICB9OwoKICBCdWZmZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcgKCkgewogICAgY29uc3QgbGVuZ3RoID0gdGhpcy5sZW5ndGg7CiAgICBpZiAobGVuZ3RoID09PSAwKSByZXR1cm4gJycKICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSByZXR1cm4gdXRmOFNsaWNlKHRoaXMsIDAsIGxlbmd0aCkKICAgIHJldHVybiBzbG93VG9TdHJpbmcuYXBwbHkodGhpcywgYXJndW1lbnRzKQogIH07CgogIEJ1ZmZlci5wcm90b3R5cGUudG9Mb2NhbGVTdHJpbmcgPSBCdWZmZXIucHJvdG90eXBlLnRvU3RyaW5nOwoKICBCdWZmZXIucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIGVxdWFscyAoYikgewogICAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYikpIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXInKQogICAgaWYgKHRoaXMgPT09IGIpIHJldHVybiB0cnVlCiAgICByZXR1cm4gQnVmZmVyLmNvbXBhcmUodGhpcywgYikgPT09IDAKICB9OwoKICBCdWZmZXIucHJvdG90eXBlLmluc3BlY3QgPSBmdW5jdGlvbiBpbnNwZWN0ICgpIHsKICAgIGxldCBzdHIgPSAnJzsKICAgIGNvbnN0IG1heCA9IGV4cG9ydHMuSU5TUEVDVF9NQVhfQllURVM7CiAgICBzdHIgPSB0aGlzLnRvU3RyaW5nKCdoZXgnLCAwLCBtYXgpLnJlcGxhY2UoLyguezJ9KS9nLCAnJDEgJykudHJpbSgpOwogICAgaWYgKHRoaXMubGVuZ3RoID4gbWF4KSBzdHIgKz0gJyAuLi4gJzsKICAgIHJldHVybiAnPEJ1ZmZlciAnICsgc3RyICsgJz4nCiAgfTsKICBpZiAoY3VzdG9tSW5zcGVjdFN5bWJvbCkgewogICAgQnVmZmVyLnByb3RvdHlwZVtjdXN0b21JbnNwZWN0U3ltYm9sXSA9IEJ1ZmZlci5wcm90b3R5cGUuaW5zcGVjdDsKICB9CgogIEJ1ZmZlci5wcm90b3R5cGUuY29tcGFyZSA9IGZ1bmN0aW9uIGNvbXBhcmUgKHRhcmdldCwgc3RhcnQsIGVuZCwgdGhpc1N0YXJ0LCB0aGlzRW5kKSB7CiAgICBpZiAoaXNJbnN0YW5jZSh0YXJnZXQsIFVpbnQ4QXJyYXkpKSB7CiAgICAgIHRhcmdldCA9IEJ1ZmZlci5mcm9tKHRhcmdldCwgdGFyZ2V0Lm9mZnNldCwgdGFyZ2V0LmJ5dGVMZW5ndGgpOwogICAgfQogICAgaWYgKCFCdWZmZXIuaXNCdWZmZXIodGFyZ2V0KSkgewogICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKAogICAgICAgICdUaGUgInRhcmdldCIgYXJndW1lbnQgbXVzdCBiZSBvbmUgb2YgdHlwZSBCdWZmZXIgb3IgVWludDhBcnJheS4gJyArCiAgICAgICAgJ1JlY2VpdmVkIHR5cGUgJyArICh0eXBlb2YgdGFyZ2V0KQogICAgICApCiAgICB9CgogICAgaWYgKHN0YXJ0ID09PSB1bmRlZmluZWQpIHsKICAgICAgc3RhcnQgPSAwOwogICAgfQogICAgaWYgKGVuZCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIGVuZCA9IHRhcmdldCA/IHRhcmdldC5sZW5ndGggOiAwOwogICAgfQogICAgaWYgKHRoaXNTdGFydCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIHRoaXNTdGFydCA9IDA7CiAgICB9CiAgICBpZiAodGhpc0VuZCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIHRoaXNFbmQgPSB0aGlzLmxlbmd0aDsKICAgIH0KCiAgICBpZiAoc3RhcnQgPCAwIHx8IGVuZCA+IHRhcmdldC5sZW5ndGggfHwgdGhpc1N0YXJ0IDwgMCB8fCB0aGlzRW5kID4gdGhpcy5sZW5ndGgpIHsKICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ291dCBvZiByYW5nZSBpbmRleCcpCiAgICB9CgogICAgaWYgKHRoaXNTdGFydCA+PSB0aGlzRW5kICYmIHN0YXJ0ID49IGVuZCkgewogICAgICByZXR1cm4gMAogICAgfQogICAgaWYgKHRoaXNTdGFydCA+PSB0aGlzRW5kKSB7CiAgICAgIHJldHVybiAtMQogICAgfQogICAgaWYgKHN0YXJ0ID49IGVuZCkgewogICAgICByZXR1cm4gMQogICAgfQoKICAgIHN0YXJ0ID4+Pj0gMDsKICAgIGVuZCA+Pj49IDA7CiAgICB0aGlzU3RhcnQgPj4+PSAwOwogICAgdGhpc0VuZCA+Pj49IDA7CgogICAgaWYgKHRoaXMgPT09IHRhcmdldCkgcmV0dXJuIDAKCiAgICBsZXQgeCA9IHRoaXNFbmQgLSB0aGlzU3RhcnQ7CiAgICBsZXQgeSA9IGVuZCAtIHN0YXJ0OwogICAgY29uc3QgbGVuID0gTWF0aC5taW4oeCwgeSk7CgogICAgY29uc3QgdGhpc0NvcHkgPSB0aGlzLnNsaWNlKHRoaXNTdGFydCwgdGhpc0VuZCk7CiAgICBjb25zdCB0YXJnZXRDb3B5ID0gdGFyZ2V0LnNsaWNlKHN0YXJ0LCBlbmQpOwoKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyArK2kpIHsKICAgICAgaWYgKHRoaXNDb3B5W2ldICE9PSB0YXJnZXRDb3B5W2ldKSB7CiAgICAgICAgeCA9IHRoaXNDb3B5W2ldOwogICAgICAgIHkgPSB0YXJnZXRDb3B5W2ldOwogICAgICAgIGJyZWFrCiAgICAgIH0KICAgIH0KCiAgICBpZiAoeCA8IHkpIHJldHVybiAtMQogICAgaWYgKHkgPCB4KSByZXR1cm4gMQogICAgcmV0dXJuIDAKICB9OwoKICAvLyBGaW5kcyBlaXRoZXIgdGhlIGZpcnN0IGluZGV4IG9mIGB2YWxgIGluIGBidWZmZXJgIGF0IG9mZnNldCA+PSBgYnl0ZU9mZnNldGAsCiAgLy8gT1IgdGhlIGxhc3QgaW5kZXggb2YgYHZhbGAgaW4gYGJ1ZmZlcmAgYXQgb2Zmc2V0IDw9IGBieXRlT2Zmc2V0YC4KICAvLwogIC8vIEFyZ3VtZW50czoKICAvLyAtIGJ1ZmZlciAtIGEgQnVmZmVyIHRvIHNlYXJjaAogIC8vIC0gdmFsIC0gYSBzdHJpbmcsIEJ1ZmZlciwgb3IgbnVtYmVyCiAgLy8gLSBieXRlT2Zmc2V0IC0gYW4gaW5kZXggaW50byBgYnVmZmVyYDsgd2lsbCBiZSBjbGFtcGVkIHRvIGFuIGludDMyCiAgLy8gLSBlbmNvZGluZyAtIGFuIG9wdGlvbmFsIGVuY29kaW5nLCByZWxldmFudCBpcyB2YWwgaXMgYSBzdHJpbmcKICAvLyAtIGRpciAtIHRydWUgZm9yIGluZGV4T2YsIGZhbHNlIGZvciBsYXN0SW5kZXhPZgogIGZ1bmN0aW9uIGJpZGlyZWN0aW9uYWxJbmRleE9mIChidWZmZXIsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGRpcikgewogICAgLy8gRW1wdHkgYnVmZmVyIG1lYW5zIG5vIG1hdGNoCiAgICBpZiAoYnVmZmVyLmxlbmd0aCA9PT0gMCkgcmV0dXJuIC0xCgogICAgLy8gTm9ybWFsaXplIGJ5dGVPZmZzZXQKICAgIGlmICh0eXBlb2YgYnl0ZU9mZnNldCA9PT0gJ3N0cmluZycpIHsKICAgICAgZW5jb2RpbmcgPSBieXRlT2Zmc2V0OwogICAgICBieXRlT2Zmc2V0ID0gMDsKICAgIH0gZWxzZSBpZiAoYnl0ZU9mZnNldCA+IDB4N2ZmZmZmZmYpIHsKICAgICAgYnl0ZU9mZnNldCA9IDB4N2ZmZmZmZmY7CiAgICB9IGVsc2UgaWYgKGJ5dGVPZmZzZXQgPCAtMHg4MDAwMDAwMCkgewogICAgICBieXRlT2Zmc2V0ID0gLTB4ODAwMDAwMDA7CiAgICB9CiAgICBieXRlT2Zmc2V0ID0gK2J5dGVPZmZzZXQ7IC8vIENvZXJjZSB0byBOdW1iZXIuCiAgICBpZiAobnVtYmVySXNOYU4oYnl0ZU9mZnNldCkpIHsKICAgICAgLy8gYnl0ZU9mZnNldDogaXQgaXQncyB1bmRlZmluZWQsIG51bGwsIE5hTiwgImZvbyIsIGV0Yywgc2VhcmNoIHdob2xlIGJ1ZmZlcgogICAgICBieXRlT2Zmc2V0ID0gZGlyID8gMCA6IChidWZmZXIubGVuZ3RoIC0gMSk7CiAgICB9CgogICAgLy8gTm9ybWFsaXplIGJ5dGVPZmZzZXQ6IG5lZ2F0aXZlIG9mZnNldHMgc3RhcnQgZnJvbSB0aGUgZW5kIG9mIHRoZSBidWZmZXIKICAgIGlmIChieXRlT2Zmc2V0IDwgMCkgYnl0ZU9mZnNldCA9IGJ1ZmZlci5sZW5ndGggKyBieXRlT2Zmc2V0OwogICAgaWYgKGJ5dGVPZmZzZXQgPj0gYnVmZmVyLmxlbmd0aCkgewogICAgICBpZiAoZGlyKSByZXR1cm4gLTEKICAgICAgZWxzZSBieXRlT2Zmc2V0ID0gYnVmZmVyLmxlbmd0aCAtIDE7CiAgICB9IGVsc2UgaWYgKGJ5dGVPZmZzZXQgPCAwKSB7CiAgICAgIGlmIChkaXIpIGJ5dGVPZmZzZXQgPSAwOwogICAgICBlbHNlIHJldHVybiAtMQogICAgfQoKICAgIC8vIE5vcm1hbGl6ZSB2YWwKICAgIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykgewogICAgICB2YWwgPSBCdWZmZXIuZnJvbSh2YWwsIGVuY29kaW5nKTsKICAgIH0KCiAgICAvLyBGaW5hbGx5LCBzZWFyY2ggZWl0aGVyIGluZGV4T2YgKGlmIGRpciBpcyB0cnVlKSBvciBsYXN0SW5kZXhPZgogICAgaWYgKEJ1ZmZlci5pc0J1ZmZlcih2YWwpKSB7CiAgICAgIC8vIFNwZWNpYWwgY2FzZTogbG9va2luZyBmb3IgZW1wdHkgc3RyaW5nL2J1ZmZlciBhbHdheXMgZmFpbHMKICAgICAgaWYgKHZhbC5sZW5ndGggPT09IDApIHsKICAgICAgICByZXR1cm4gLTEKICAgICAgfQogICAgICByZXR1cm4gYXJyYXlJbmRleE9mKGJ1ZmZlciwgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZGlyKQogICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJykgewogICAgICB2YWwgPSB2YWwgJiAweEZGOyAvLyBTZWFyY2ggZm9yIGEgYnl0ZSB2YWx1ZSBbMC0yNTVdCiAgICAgIGlmICh0eXBlb2YgVWludDhBcnJheS5wcm90b3R5cGUuaW5kZXhPZiA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIGlmIChkaXIpIHsKICAgICAgICAgIHJldHVybiBVaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQpCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBVaW50OEFycmF5LnByb3RvdHlwZS5sYXN0SW5kZXhPZi5jYWxsKGJ1ZmZlciwgdmFsLCBieXRlT2Zmc2V0KQogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gYXJyYXlJbmRleE9mKGJ1ZmZlciwgW3ZhbF0sIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpCiAgICB9CgogICAgdGhyb3cgbmV3IFR5cGVFcnJvcigndmFsIG11c3QgYmUgc3RyaW5nLCBudW1iZXIgb3IgQnVmZmVyJykKICB9CgogIGZ1bmN0aW9uIGFycmF5SW5kZXhPZiAoYXJyLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpIHsKICAgIGxldCBpbmRleFNpemUgPSAxOwogICAgbGV0IGFyckxlbmd0aCA9IGFyci5sZW5ndGg7CiAgICBsZXQgdmFsTGVuZ3RoID0gdmFsLmxlbmd0aDsKCiAgICBpZiAoZW5jb2RpbmcgIT09IHVuZGVmaW5lZCkgewogICAgICBlbmNvZGluZyA9IFN0cmluZyhlbmNvZGluZykudG9Mb3dlckNhc2UoKTsKICAgICAgaWYgKGVuY29kaW5nID09PSAndWNzMicgfHwgZW5jb2RpbmcgPT09ICd1Y3MtMicgfHwKICAgICAgICAgIGVuY29kaW5nID09PSAndXRmMTZsZScgfHwgZW5jb2RpbmcgPT09ICd1dGYtMTZsZScpIHsKICAgICAgICBpZiAoYXJyLmxlbmd0aCA8IDIgfHwgdmFsLmxlbmd0aCA8IDIpIHsKICAgICAgICAgIHJldHVybiAtMQogICAgICAgIH0KICAgICAgICBpbmRleFNpemUgPSAyOwogICAgICAgIGFyckxlbmd0aCAvPSAyOwogICAgICAgIHZhbExlbmd0aCAvPSAyOwogICAgICAgIGJ5dGVPZmZzZXQgLz0gMjsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHJlYWQgKGJ1ZiwgaSkgewogICAgICBpZiAoaW5kZXhTaXplID09PSAxKSB7CiAgICAgICAgcmV0dXJuIGJ1ZltpXQogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBidWYucmVhZFVJbnQxNkJFKGkgKiBpbmRleFNpemUpCiAgICAgIH0KICAgIH0KCiAgICBsZXQgaTsKICAgIGlmIChkaXIpIHsKICAgICAgbGV0IGZvdW5kSW5kZXggPSAtMTsKICAgICAgZm9yIChpID0gYnl0ZU9mZnNldDsgaSA8IGFyckxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKHJlYWQoYXJyLCBpKSA9PT0gcmVhZCh2YWwsIGZvdW5kSW5kZXggPT09IC0xID8gMCA6IGkgLSBmb3VuZEluZGV4KSkgewogICAgICAgICAgaWYgKGZvdW5kSW5kZXggPT09IC0xKSBmb3VuZEluZGV4ID0gaTsKICAgICAgICAgIGlmIChpIC0gZm91bmRJbmRleCArIDEgPT09IHZhbExlbmd0aCkgcmV0dXJuIGZvdW5kSW5kZXggKiBpbmRleFNpemUKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKGZvdW5kSW5kZXggIT09IC0xKSBpIC09IGkgLSBmb3VuZEluZGV4OwogICAgICAgICAgZm91bmRJbmRleCA9IC0xOwogICAgICAgIH0KICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgaWYgKGJ5dGVPZmZzZXQgKyB2YWxMZW5ndGggPiBhcnJMZW5ndGgpIGJ5dGVPZmZzZXQgPSBhcnJMZW5ndGggLSB2YWxMZW5ndGg7CiAgICAgIGZvciAoaSA9IGJ5dGVPZmZzZXQ7IGkgPj0gMDsgaS0tKSB7CiAgICAgICAgbGV0IGZvdW5kID0gdHJ1ZTsKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHZhbExlbmd0aDsgaisrKSB7CiAgICAgICAgICBpZiAocmVhZChhcnIsIGkgKyBqKSAhPT0gcmVhZCh2YWwsIGopKSB7CiAgICAgICAgICAgIGZvdW5kID0gZmFsc2U7CiAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChmb3VuZCkgcmV0dXJuIGkKICAgICAgfQogICAgfQoKICAgIHJldHVybiAtMQogIH0KCiAgQnVmZmVyLnByb3RvdHlwZS5pbmNsdWRlcyA9IGZ1bmN0aW9uIGluY2x1ZGVzICh2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nKSB7CiAgICByZXR1cm4gdGhpcy5pbmRleE9mKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpICE9PSAtMQogIH07CgogIEJ1ZmZlci5wcm90b3R5cGUuaW5kZXhPZiA9IGZ1bmN0aW9uIGluZGV4T2YgKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpIHsKICAgIHJldHVybiBiaWRpcmVjdGlvbmFsSW5kZXhPZih0aGlzLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCB0cnVlKQogIH07CgogIEJ1ZmZlci5wcm90b3R5cGUubGFzdEluZGV4T2YgPSBmdW5jdGlvbiBsYXN0SW5kZXhPZiAodmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZykgewogICAgcmV0dXJuIGJpZGlyZWN0aW9uYWxJbmRleE9mKHRoaXMsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGZhbHNlKQogIH07CgogIGZ1bmN0aW9uIGhleFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHsKICAgIG9mZnNldCA9IE51bWJlcihvZmZzZXQpIHx8IDA7CiAgICBjb25zdCByZW1haW5pbmcgPSBidWYubGVuZ3RoIC0gb2Zmc2V0OwogICAgaWYgKCFsZW5ndGgpIHsKICAgICAgbGVuZ3RoID0gcmVtYWluaW5nOwogICAgfSBlbHNlIHsKICAgICAgbGVuZ3RoID0gTnVtYmVyKGxlbmd0aCk7CiAgICAgIGlmIChsZW5ndGggPiByZW1haW5pbmcpIHsKICAgICAgICBsZW5ndGggPSByZW1haW5pbmc7CiAgICAgIH0KICAgIH0KCiAgICBjb25zdCBzdHJMZW4gPSBzdHJpbmcubGVuZ3RoOwoKICAgIGlmIChsZW5ndGggPiBzdHJMZW4gLyAyKSB7CiAgICAgIGxlbmd0aCA9IHN0ckxlbiAvIDI7CiAgICB9CiAgICBsZXQgaTsKICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkgewogICAgICBjb25zdCBwYXJzZWQgPSBwYXJzZUludChzdHJpbmcuc3Vic3RyKGkgKiAyLCAyKSwgMTYpOwogICAgICBpZiAobnVtYmVySXNOYU4ocGFyc2VkKSkgcmV0dXJuIGkKICAgICAgYnVmW29mZnNldCArIGldID0gcGFyc2VkOwogICAgfQogICAgcmV0dXJuIGkKICB9CgogIGZ1bmN0aW9uIHV0ZjhXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7CiAgICByZXR1cm4gYmxpdEJ1ZmZlcih1dGY4VG9CeXRlcyhzdHJpbmcsIGJ1Zi5sZW5ndGggLSBvZmZzZXQpLCBidWYsIG9mZnNldCwgbGVuZ3RoKQogIH0KCiAgZnVuY3Rpb24gYXNjaWlXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7CiAgICByZXR1cm4gYmxpdEJ1ZmZlcihhc2NpaVRvQnl0ZXMoc3RyaW5nKSwgYnVmLCBvZmZzZXQsIGxlbmd0aCkKICB9CgogIGZ1bmN0aW9uIGJhc2U2NFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHsKICAgIHJldHVybiBibGl0QnVmZmVyKGJhc2U2NFRvQnl0ZXMoc3RyaW5nKSwgYnVmLCBvZmZzZXQsIGxlbmd0aCkKICB9CgogIGZ1bmN0aW9uIHVjczJXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7CiAgICByZXR1cm4gYmxpdEJ1ZmZlcih1dGYxNmxlVG9CeXRlcyhzdHJpbmcsIGJ1Zi5sZW5ndGggLSBvZmZzZXQpLCBidWYsIG9mZnNldCwgbGVuZ3RoKQogIH0KCiAgQnVmZmVyLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uIHdyaXRlIChzdHJpbmcsIG9mZnNldCwgbGVuZ3RoLCBlbmNvZGluZykgewogICAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZykKICAgIGlmIChvZmZzZXQgPT09IHVuZGVmaW5lZCkgewogICAgICBlbmNvZGluZyA9ICd1dGY4JzsKICAgICAgbGVuZ3RoID0gdGhpcy5sZW5ndGg7CiAgICAgIG9mZnNldCA9IDA7CiAgICAvLyBCdWZmZXIjd3JpdGUoc3RyaW5nLCBlbmNvZGluZykKICAgIH0gZWxzZSBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQgJiYgdHlwZW9mIG9mZnNldCA9PT0gJ3N0cmluZycpIHsKICAgICAgZW5jb2RpbmcgPSBvZmZzZXQ7CiAgICAgIGxlbmd0aCA9IHRoaXMubGVuZ3RoOwogICAgICBvZmZzZXQgPSAwOwogICAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZywgb2Zmc2V0WywgbGVuZ3RoXVssIGVuY29kaW5nXSkKICAgIH0gZWxzZSBpZiAoaXNGaW5pdGUob2Zmc2V0KSkgewogICAgICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CiAgICAgIGlmIChpc0Zpbml0ZShsZW5ndGgpKSB7CiAgICAgICAgbGVuZ3RoID0gbGVuZ3RoID4+PiAwOwogICAgICAgIGlmIChlbmNvZGluZyA9PT0gdW5kZWZpbmVkKSBlbmNvZGluZyA9ICd1dGY4JzsKICAgICAgfSBlbHNlIHsKICAgICAgICBlbmNvZGluZyA9IGxlbmd0aDsKICAgICAgICBsZW5ndGggPSB1bmRlZmluZWQ7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigKICAgICAgICAnQnVmZmVyLndyaXRlKHN0cmluZywgZW5jb2RpbmcsIG9mZnNldFssIGxlbmd0aF0pIGlzIG5vIGxvbmdlciBzdXBwb3J0ZWQnCiAgICAgICkKICAgIH0KCiAgICBjb25zdCByZW1haW5pbmcgPSB0aGlzLmxlbmd0aCAtIG9mZnNldDsKICAgIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCB8fCBsZW5ndGggPiByZW1haW5pbmcpIGxlbmd0aCA9IHJlbWFpbmluZzsKCiAgICBpZiAoKHN0cmluZy5sZW5ndGggPiAwICYmIChsZW5ndGggPCAwIHx8IG9mZnNldCA8IDApKSB8fCBvZmZzZXQgPiB0aGlzLmxlbmd0aCkgewogICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQXR0ZW1wdCB0byB3cml0ZSBvdXRzaWRlIGJ1ZmZlciBib3VuZHMnKQogICAgfQoKICAgIGlmICghZW5jb2RpbmcpIGVuY29kaW5nID0gJ3V0ZjgnOwoKICAgIGxldCBsb3dlcmVkQ2FzZSA9IGZhbHNlOwogICAgZm9yICg7OykgewogICAgICBzd2l0Y2ggKGVuY29kaW5nKSB7CiAgICAgICAgY2FzZSAnaGV4JzoKICAgICAgICAgIHJldHVybiBoZXhXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKQoKICAgICAgICBjYXNlICd1dGY4JzoKICAgICAgICBjYXNlICd1dGYtOCc6CiAgICAgICAgICByZXR1cm4gdXRmOFdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpCgogICAgICAgIGNhc2UgJ2FzY2lpJzoKICAgICAgICBjYXNlICdsYXRpbjEnOgogICAgICAgIGNhc2UgJ2JpbmFyeSc6CiAgICAgICAgICByZXR1cm4gYXNjaWlXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKQoKICAgICAgICBjYXNlICdiYXNlNjQnOgogICAgICAgICAgLy8gV2FybmluZzogbWF4TGVuZ3RoIG5vdCB0YWtlbiBpbnRvIGFjY291bnQgaW4gYmFzZTY0V3JpdGUKICAgICAgICAgIHJldHVybiBiYXNlNjRXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKQoKICAgICAgICBjYXNlICd1Y3MyJzoKICAgICAgICBjYXNlICd1Y3MtMic6CiAgICAgICAgY2FzZSAndXRmMTZsZSc6CiAgICAgICAgY2FzZSAndXRmLTE2bGUnOgogICAgICAgICAgcmV0dXJuIHVjczJXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKQoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgaWYgKGxvd2VyZWRDYXNlKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpCiAgICAgICAgICBlbmNvZGluZyA9ICgnJyArIGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlOwogICAgICB9CiAgICB9CiAgfTsKCiAgQnVmZmVyLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04gKCkgewogICAgcmV0dXJuIHsKICAgICAgdHlwZTogJ0J1ZmZlcicsCiAgICAgIGRhdGE6IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMuX2FyciB8fCB0aGlzLCAwKQogICAgfQogIH07CgogIGZ1bmN0aW9uIGJhc2U2NFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHsKICAgIGlmIChzdGFydCA9PT0gMCAmJiBlbmQgPT09IGJ1Zi5sZW5ndGgpIHsKICAgICAgcmV0dXJuIGJhc2U2NC5mcm9tQnl0ZUFycmF5KGJ1ZikKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBiYXNlNjQuZnJvbUJ5dGVBcnJheShidWYuc2xpY2Uoc3RhcnQsIGVuZCkpCiAgICB9CiAgfQoKICBmdW5jdGlvbiB1dGY4U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkgewogICAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKTsKICAgIGNvbnN0IHJlcyA9IFtdOwoKICAgIGxldCBpID0gc3RhcnQ7CiAgICB3aGlsZSAoaSA8IGVuZCkgewogICAgICBjb25zdCBmaXJzdEJ5dGUgPSBidWZbaV07CiAgICAgIGxldCBjb2RlUG9pbnQgPSBudWxsOwogICAgICBsZXQgYnl0ZXNQZXJTZXF1ZW5jZSA9IChmaXJzdEJ5dGUgPiAweEVGKQogICAgICAgID8gNAogICAgICAgIDogKGZpcnN0Qnl0ZSA+IDB4REYpCiAgICAgICAgICAgID8gMwogICAgICAgICAgICA6IChmaXJzdEJ5dGUgPiAweEJGKQogICAgICAgICAgICAgICAgPyAyCiAgICAgICAgICAgICAgICA6IDE7CgogICAgICBpZiAoaSArIGJ5dGVzUGVyU2VxdWVuY2UgPD0gZW5kKSB7CiAgICAgICAgbGV0IHNlY29uZEJ5dGUsIHRoaXJkQnl0ZSwgZm91cnRoQnl0ZSwgdGVtcENvZGVQb2ludDsKCiAgICAgICAgc3dpdGNoIChieXRlc1BlclNlcXVlbmNlKSB7CiAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgIGlmIChmaXJzdEJ5dGUgPCAweDgwKSB7CiAgICAgICAgICAgICAgY29kZVBvaW50ID0gZmlyc3RCeXRlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdOwogICAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkgewogICAgICAgICAgICAgIHRlbXBDb2RlUG9pbnQgPSAoZmlyc3RCeXRlICYgMHgxRikgPDwgMHg2IHwgKHNlY29uZEJ5dGUgJiAweDNGKTsKICAgICAgICAgICAgICBpZiAodGVtcENvZGVQb2ludCA+IDB4N0YpIHsKICAgICAgICAgICAgICAgIGNvZGVQb2ludCA9IHRlbXBDb2RlUG9pbnQ7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdOwogICAgICAgICAgICB0aGlyZEJ5dGUgPSBidWZbaSArIDJdOwogICAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAodGhpcmRCeXRlICYgMHhDMCkgPT09IDB4ODApIHsKICAgICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4RikgPDwgMHhDIHwgKHNlY29uZEJ5dGUgJiAweDNGKSA8PCAweDYgfCAodGhpcmRCeXRlICYgMHgzRik7CiAgICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweDdGRiAmJiAodGVtcENvZGVQb2ludCA8IDB4RDgwMCB8fCB0ZW1wQ29kZVBvaW50ID4gMHhERkZGKSkgewogICAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnJlYWsKICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgc2Vjb25kQnl0ZSA9IGJ1ZltpICsgMV07CiAgICAgICAgICAgIHRoaXJkQnl0ZSA9IGJ1ZltpICsgMl07CiAgICAgICAgICAgIGZvdXJ0aEJ5dGUgPSBidWZbaSArIDNdOwogICAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAodGhpcmRCeXRlICYgMHhDMCkgPT09IDB4ODAgJiYgKGZvdXJ0aEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkgewogICAgICAgICAgICAgIHRlbXBDb2RlUG9pbnQgPSAoZmlyc3RCeXRlICYgMHhGKSA8PCAweDEyIHwgKHNlY29uZEJ5dGUgJiAweDNGKSA8PCAweEMgfCAodGhpcmRCeXRlICYgMHgzRikgPDwgMHg2IHwgKGZvdXJ0aEJ5dGUgJiAweDNGKTsKICAgICAgICAgICAgICBpZiAodGVtcENvZGVQb2ludCA+IDB4RkZGRiAmJiB0ZW1wQ29kZVBvaW50IDwgMHgxMTAwMDApIHsKICAgICAgICAgICAgICAgIGNvZGVQb2ludCA9IHRlbXBDb2RlUG9pbnQ7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoY29kZVBvaW50ID09PSBudWxsKSB7CiAgICAgICAgLy8gd2UgZGlkIG5vdCBnZW5lcmF0ZSBhIHZhbGlkIGNvZGVQb2ludCBzbyBpbnNlcnQgYQogICAgICAgIC8vIHJlcGxhY2VtZW50IGNoYXIgKFUrRkZGRCkgYW5kIGFkdmFuY2Ugb25seSAxIGJ5dGUKICAgICAgICBjb2RlUG9pbnQgPSAweEZGRkQ7CiAgICAgICAgYnl0ZXNQZXJTZXF1ZW5jZSA9IDE7CiAgICAgIH0gZWxzZSBpZiAoY29kZVBvaW50ID4gMHhGRkZGKSB7CiAgICAgICAgLy8gZW5jb2RlIHRvIHV0ZjE2IChzdXJyb2dhdGUgcGFpciBkYW5jZSkKICAgICAgICBjb2RlUG9pbnQgLT0gMHgxMDAwMDsKICAgICAgICByZXMucHVzaChjb2RlUG9pbnQgPj4+IDEwICYgMHgzRkYgfCAweEQ4MDApOwogICAgICAgIGNvZGVQb2ludCA9IDB4REMwMCB8IGNvZGVQb2ludCAmIDB4M0ZGOwogICAgICB9CgogICAgICByZXMucHVzaChjb2RlUG9pbnQpOwogICAgICBpICs9IGJ5dGVzUGVyU2VxdWVuY2U7CiAgICB9CgogICAgcmV0dXJuIGRlY29kZUNvZGVQb2ludHNBcnJheShyZXMpCiAgfQoKICAvLyBCYXNlZCBvbiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yMjc0NzI3Mi82ODA3NDIsIHRoZSBicm93c2VyIHdpdGgKICAvLyB0aGUgbG93ZXN0IGxpbWl0IGlzIENocm9tZSwgd2l0aCAweDEwMDAwIGFyZ3MuCiAgLy8gV2UgZ28gMSBtYWduaXR1ZGUgbGVzcywgZm9yIHNhZmV0eQogIGNvbnN0IE1BWF9BUkdVTUVOVFNfTEVOR1RIID0gMHgxMDAwOwoKICBmdW5jdGlvbiBkZWNvZGVDb2RlUG9pbnRzQXJyYXkgKGNvZGVQb2ludHMpIHsKICAgIGNvbnN0IGxlbiA9IGNvZGVQb2ludHMubGVuZ3RoOwogICAgaWYgKGxlbiA8PSBNQVhfQVJHVU1FTlRTX0xFTkdUSCkgewogICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsIGNvZGVQb2ludHMpIC8vIGF2b2lkIGV4dHJhIHNsaWNlKCkKICAgIH0KCiAgICAvLyBEZWNvZGUgaW4gY2h1bmtzIHRvIGF2b2lkICJjYWxsIHN0YWNrIHNpemUgZXhjZWVkZWQiLgogICAgbGV0IHJlcyA9ICcnOwogICAgbGV0IGkgPSAwOwogICAgd2hpbGUgKGkgPCBsZW4pIHsKICAgICAgcmVzICs9IFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoCiAgICAgICAgU3RyaW5nLAogICAgICAgIGNvZGVQb2ludHMuc2xpY2UoaSwgaSArPSBNQVhfQVJHVU1FTlRTX0xFTkdUSCkKICAgICAgKTsKICAgIH0KICAgIHJldHVybiByZXMKICB9CgogIGZ1bmN0aW9uIGFzY2lpU2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkgewogICAgbGV0IHJldCA9ICcnOwogICAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKTsKCiAgICBmb3IgKGxldCBpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkgewogICAgICByZXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShidWZbaV0gJiAweDdGKTsKICAgIH0KICAgIHJldHVybiByZXQKICB9CgogIGZ1bmN0aW9uIGxhdGluMVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHsKICAgIGxldCByZXQgPSAnJzsKICAgIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZCk7CgogICAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHsKICAgICAgcmV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnVmW2ldKTsKICAgIH0KICAgIHJldHVybiByZXQKICB9CgogIGZ1bmN0aW9uIGhleFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHsKICAgIGNvbnN0IGxlbiA9IGJ1Zi5sZW5ndGg7CgogICAgaWYgKCFzdGFydCB8fCBzdGFydCA8IDApIHN0YXJ0ID0gMDsKICAgIGlmICghZW5kIHx8IGVuZCA8IDAgfHwgZW5kID4gbGVuKSBlbmQgPSBsZW47CgogICAgbGV0IG91dCA9ICcnOwogICAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHsKICAgICAgb3V0ICs9IGhleFNsaWNlTG9va3VwVGFibGVbYnVmW2ldXTsKICAgIH0KICAgIHJldHVybiBvdXQKICB9CgogIGZ1bmN0aW9uIHV0ZjE2bGVTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7CiAgICBjb25zdCBieXRlcyA9IGJ1Zi5zbGljZShzdGFydCwgZW5kKTsKICAgIGxldCByZXMgPSAnJzsKICAgIC8vIElmIGJ5dGVzLmxlbmd0aCBpcyBvZGQsIHRoZSBsYXN0IDggYml0cyBtdXN0IGJlIGlnbm9yZWQgKHNhbWUgYXMgbm9kZS5qcykKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYnl0ZXMubGVuZ3RoIC0gMTsgaSArPSAyKSB7CiAgICAgIHJlcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ5dGVzW2ldICsgKGJ5dGVzW2kgKyAxXSAqIDI1NikpOwogICAgfQogICAgcmV0dXJuIHJlcwogIH0KCiAgQnVmZmVyLnByb3RvdHlwZS5zbGljZSA9IGZ1bmN0aW9uIHNsaWNlIChzdGFydCwgZW5kKSB7CiAgICBjb25zdCBsZW4gPSB0aGlzLmxlbmd0aDsKICAgIHN0YXJ0ID0gfn5zdGFydDsKICAgIGVuZCA9IGVuZCA9PT0gdW5kZWZpbmVkID8gbGVuIDogfn5lbmQ7CgogICAgaWYgKHN0YXJ0IDwgMCkgewogICAgICBzdGFydCArPSBsZW47CiAgICAgIGlmIChzdGFydCA8IDApIHN0YXJ0ID0gMDsKICAgIH0gZWxzZSBpZiAoc3RhcnQgPiBsZW4pIHsKICAgICAgc3RhcnQgPSBsZW47CiAgICB9CgogICAgaWYgKGVuZCA8IDApIHsKICAgICAgZW5kICs9IGxlbjsKICAgICAgaWYgKGVuZCA8IDApIGVuZCA9IDA7CiAgICB9IGVsc2UgaWYgKGVuZCA+IGxlbikgewogICAgICBlbmQgPSBsZW47CiAgICB9CgogICAgaWYgKGVuZCA8IHN0YXJ0KSBlbmQgPSBzdGFydDsKCiAgICBjb25zdCBuZXdCdWYgPSB0aGlzLnN1YmFycmF5KHN0YXJ0LCBlbmQpOwogICAgLy8gUmV0dXJuIGFuIGF1Z21lbnRlZCBgVWludDhBcnJheWAgaW5zdGFuY2UKICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihuZXdCdWYsIEJ1ZmZlci5wcm90b3R5cGUpOwoKICAgIHJldHVybiBuZXdCdWYKICB9OwoKICAvKgogICAqIE5lZWQgdG8gbWFrZSBzdXJlIHRoYXQgYnVmZmVyIGlzbid0IHRyeWluZyB0byB3cml0ZSBvdXQgb2YgYm91bmRzLgogICAqLwogIGZ1bmN0aW9uIGNoZWNrT2Zmc2V0IChvZmZzZXQsIGV4dCwgbGVuZ3RoKSB7CiAgICBpZiAoKG9mZnNldCAlIDEpICE9PSAwIHx8IG9mZnNldCA8IDApIHRocm93IG5ldyBSYW5nZUVycm9yKCdvZmZzZXQgaXMgbm90IHVpbnQnKQogICAgaWYgKG9mZnNldCArIGV4dCA+IGxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RyeWluZyB0byBhY2Nlc3MgYmV5b25kIGJ1ZmZlciBsZW5ndGgnKQogIH0KCiAgQnVmZmVyLnByb3RvdHlwZS5yZWFkVWludExFID0KICBCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50TEUgPSBmdW5jdGlvbiByZWFkVUludExFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7CiAgICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CiAgICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCA+Pj4gMDsKICAgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpOwoKICAgIGxldCB2YWwgPSB0aGlzW29mZnNldF07CiAgICBsZXQgbXVsID0gMTsKICAgIGxldCBpID0gMDsKICAgIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7CiAgICAgIHZhbCArPSB0aGlzW29mZnNldCArIGldICogbXVsOwogICAgfQoKICAgIHJldHVybiB2YWwKICB9OwoKICBCdWZmZXIucHJvdG90eXBlLnJlYWRVaW50QkUgPQogIEJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnRCRSA9IGZ1bmN0aW9uIHJlYWRVSW50QkUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHsKICAgIG9mZnNldCA9IG9mZnNldCA+Pj4gMDsKICAgIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoID4+PiAwOwogICAgaWYgKCFub0Fzc2VydCkgewogICAgICBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKTsKICAgIH0KCiAgICBsZXQgdmFsID0gdGhpc1tvZmZzZXQgKyAtLWJ5dGVMZW5ndGhdOwogICAgbGV0IG11bCA9IDE7CiAgICB3aGlsZSAoYnl0ZUxlbmd0aCA+IDAgJiYgKG11bCAqPSAweDEwMCkpIHsKICAgICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgLS1ieXRlTGVuZ3RoXSAqIG11bDsKICAgIH0KCiAgICByZXR1cm4gdmFsCiAgfTsKCiAgQnVmZmVyLnByb3RvdHlwZS5yZWFkVWludDggPQogIEJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQ4ID0gZnVuY3Rpb24gcmVhZFVJbnQ4IChvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CiAgICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDEsIHRoaXMubGVuZ3RoKTsKICAgIHJldHVybiB0aGlzW29mZnNldF0KICB9OwoKICBCdWZmZXIucHJvdG90eXBlLnJlYWRVaW50MTZMRSA9CiAgQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDE2TEUgPSBmdW5jdGlvbiByZWFkVUludDE2TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHsKICAgIG9mZnNldCA9IG9mZnNldCA+Pj4gMDsKICAgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpOwogICAgcmV0dXJuIHRoaXNbb2Zmc2V0XSB8ICh0aGlzW29mZnNldCArIDFdIDw8IDgpCiAgfTsKCiAgQnVmZmVyLnByb3RvdHlwZS5yZWFkVWludDE2QkUgPQogIEJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQxNkJFID0gZnVuY3Rpb24gcmVhZFVJbnQxNkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CiAgICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKTsKICAgIHJldHVybiAodGhpc1tvZmZzZXRdIDw8IDgpIHwgdGhpc1tvZmZzZXQgKyAxXQogIH07CgogIEJ1ZmZlci5wcm90b3R5cGUucmVhZFVpbnQzMkxFID0KICBCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MzJMRSA9IGZ1bmN0aW9uIHJlYWRVSW50MzJMRSAob2Zmc2V0LCBub0Fzc2VydCkgewogICAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwogICAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aCk7CgogICAgcmV0dXJuICgodGhpc1tvZmZzZXRdKSB8CiAgICAgICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOCkgfAogICAgICAgICh0aGlzW29mZnNldCArIDJdIDw8IDE2KSkgKwogICAgICAgICh0aGlzW29mZnNldCArIDNdICogMHgxMDAwMDAwKQogIH07CgogIEJ1ZmZlci5wcm90b3R5cGUucmVhZFVpbnQzMkJFID0KICBCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MzJCRSA9IGZ1bmN0aW9uIHJlYWRVSW50MzJCRSAob2Zmc2V0LCBub0Fzc2VydCkgewogICAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwogICAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aCk7CgogICAgcmV0dXJuICh0aGlzW29mZnNldF0gKiAweDEwMDAwMDApICsKICAgICAgKCh0aGlzW29mZnNldCArIDFdIDw8IDE2KSB8CiAgICAgICh0aGlzW29mZnNldCArIDJdIDw8IDgpIHwKICAgICAgdGhpc1tvZmZzZXQgKyAzXSkKICB9OwoKICBCdWZmZXIucHJvdG90eXBlLnJlYWRCaWdVSW50NjRMRSA9IGRlZmluZUJpZ0ludE1ldGhvZChmdW5jdGlvbiByZWFkQmlnVUludDY0TEUgKG9mZnNldCkgewogICAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwogICAgdmFsaWRhdGVOdW1iZXIob2Zmc2V0LCAnb2Zmc2V0Jyk7CiAgICBjb25zdCBmaXJzdCA9IHRoaXNbb2Zmc2V0XTsKICAgIGNvbnN0IGxhc3QgPSB0aGlzW29mZnNldCArIDddOwogICAgaWYgKGZpcnN0ID09PSB1bmRlZmluZWQgfHwgbGFzdCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIGJvdW5kc0Vycm9yKG9mZnNldCwgdGhpcy5sZW5ndGggLSA4KTsKICAgIH0KCiAgICBjb25zdCBsbyA9IGZpcnN0ICsKICAgICAgdGhpc1srK29mZnNldF0gKiAyICoqIDggKwogICAgICB0aGlzWysrb2Zmc2V0XSAqIDIgKiogMTYgKwogICAgICB0aGlzWysrb2Zmc2V0XSAqIDIgKiogMjQ7CgogICAgY29uc3QgaGkgPSB0aGlzWysrb2Zmc2V0XSArCiAgICAgIHRoaXNbKytvZmZzZXRdICogMiAqKiA4ICsKICAgICAgdGhpc1srK29mZnNldF0gKiAyICoqIDE2ICsKICAgICAgbGFzdCAqIDIgKiogMjQ7CgogICAgcmV0dXJuIEJpZ0ludChsbykgKyAoQmlnSW50KGhpKSA8PCBCaWdJbnQoMzIpKQogIH0pOwoKICBCdWZmZXIucHJvdG90eXBlLnJlYWRCaWdVSW50NjRCRSA9IGRlZmluZUJpZ0ludE1ldGhvZChmdW5jdGlvbiByZWFkQmlnVUludDY0QkUgKG9mZnNldCkgewogICAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwogICAgdmFsaWRhdGVOdW1iZXIob2Zmc2V0LCAnb2Zmc2V0Jyk7CiAgICBjb25zdCBmaXJzdCA9IHRoaXNbb2Zmc2V0XTsKICAgIGNvbnN0IGxhc3QgPSB0aGlzW29mZnNldCArIDddOwogICAgaWYgKGZpcnN0ID09PSB1bmRlZmluZWQgfHwgbGFzdCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIGJvdW5kc0Vycm9yKG9mZnNldCwgdGhpcy5sZW5ndGggLSA4KTsKICAgIH0KCiAgICBjb25zdCBoaSA9IGZpcnN0ICogMiAqKiAyNCArCiAgICAgIHRoaXNbKytvZmZzZXRdICogMiAqKiAxNiArCiAgICAgIHRoaXNbKytvZmZzZXRdICogMiAqKiA4ICsKICAgICAgdGhpc1srK29mZnNldF07CgogICAgY29uc3QgbG8gPSB0aGlzWysrb2Zmc2V0XSAqIDIgKiogMjQgKwogICAgICB0aGlzWysrb2Zmc2V0XSAqIDIgKiogMTYgKwogICAgICB0aGlzWysrb2Zmc2V0XSAqIDIgKiogOCArCiAgICAgIGxhc3Q7CgogICAgcmV0dXJuIChCaWdJbnQoaGkpIDw8IEJpZ0ludCgzMikpICsgQmlnSW50KGxvKQogIH0pOwoKICBCdWZmZXIucHJvdG90eXBlLnJlYWRJbnRMRSA9IGZ1bmN0aW9uIHJlYWRJbnRMRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkgewogICAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwogICAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggPj4+IDA7CiAgICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKTsKCiAgICBsZXQgdmFsID0gdGhpc1tvZmZzZXRdOwogICAgbGV0IG11bCA9IDE7CiAgICBsZXQgaSA9IDA7CiAgICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkgewogICAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyBpXSAqIG11bDsKICAgIH0KICAgIG11bCAqPSAweDgwOwoKICAgIGlmICh2YWwgPj0gbXVsKSB2YWwgLT0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpOwoKICAgIHJldHVybiB2YWwKICB9OwoKICBCdWZmZXIucHJvdG90eXBlLnJlYWRJbnRCRSA9IGZ1bmN0aW9uIHJlYWRJbnRCRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkgewogICAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwogICAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggPj4+IDA7CiAgICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKTsKCiAgICBsZXQgaSA9IGJ5dGVMZW5ndGg7CiAgICBsZXQgbXVsID0gMTsKICAgIGxldCB2YWwgPSB0aGlzW29mZnNldCArIC0taV07CiAgICB3aGlsZSAoaSA+IDAgJiYgKG11bCAqPSAweDEwMCkpIHsKICAgICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgLS1pXSAqIG11bDsKICAgIH0KICAgIG11bCAqPSAweDgwOwoKICAgIGlmICh2YWwgPj0gbXVsKSB2YWwgLT0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpOwoKICAgIHJldHVybiB2YWwKICB9OwoKICBCdWZmZXIucHJvdG90eXBlLnJlYWRJbnQ4ID0gZnVuY3Rpb24gcmVhZEludDggKG9mZnNldCwgbm9Bc3NlcnQpIHsKICAgIG9mZnNldCA9IG9mZnNldCA+Pj4gMDsKICAgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMSwgdGhpcy5sZW5ndGgpOwogICAgaWYgKCEodGhpc1tvZmZzZXRdICYgMHg4MCkpIHJldHVybiAodGhpc1tvZmZzZXRdKQogICAgcmV0dXJuICgoMHhmZiAtIHRoaXNbb2Zmc2V0XSArIDEpICogLTEpCiAgfTsKCiAgQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MTZMRSA9IGZ1bmN0aW9uIHJlYWRJbnQxNkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CiAgICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKTsKICAgIGNvbnN0IHZhbCA9IHRoaXNbb2Zmc2V0XSB8ICh0aGlzW29mZnNldCArIDFdIDw8IDgpOwogICAgcmV0dXJuICh2YWwgJiAweDgwMDApID8gdmFsIHwgMHhGRkZGMDAwMCA6IHZhbAogIH07CgogIEJ1ZmZlci5wcm90b3R5cGUucmVhZEludDE2QkUgPSBmdW5jdGlvbiByZWFkSW50MTZCRSAob2Zmc2V0LCBub0Fzc2VydCkgewogICAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwogICAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aCk7CiAgICBjb25zdCB2YWwgPSB0aGlzW29mZnNldCArIDFdIHwgKHRoaXNbb2Zmc2V0XSA8PCA4KTsKICAgIHJldHVybiAodmFsICYgMHg4MDAwKSA/IHZhbCB8IDB4RkZGRjAwMDAgOiB2YWwKICB9OwoKICBCdWZmZXIucHJvdG90eXBlLnJlYWRJbnQzMkxFID0gZnVuY3Rpb24gcmVhZEludDMyTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHsKICAgIG9mZnNldCA9IG9mZnNldCA+Pj4gMDsKICAgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpOwoKICAgIHJldHVybiAodGhpc1tvZmZzZXRdKSB8CiAgICAgICh0aGlzW29mZnNldCArIDFdIDw8IDgpIHwKICAgICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgMTYpIHwKICAgICAgKHRoaXNbb2Zmc2V0ICsgM10gPDwgMjQpCiAgfTsKCiAgQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MzJCRSA9IGZ1bmN0aW9uIHJlYWRJbnQzMkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CiAgICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKTsKCiAgICByZXR1cm4gKHRoaXNbb2Zmc2V0XSA8PCAyNCkgfAogICAgICAodGhpc1tvZmZzZXQgKyAxXSA8PCAxNikgfAogICAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCA4KSB8CiAgICAgICh0aGlzW29mZnNldCArIDNdKQogIH07CgogIEJ1ZmZlci5wcm90b3R5cGUucmVhZEJpZ0ludDY0TEUgPSBkZWZpbmVCaWdJbnRNZXRob2QoZnVuY3Rpb24gcmVhZEJpZ0ludDY0TEUgKG9mZnNldCkgewogICAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwogICAgdmFsaWRhdGVOdW1iZXIob2Zmc2V0LCAnb2Zmc2V0Jyk7CiAgICBjb25zdCBmaXJzdCA9IHRoaXNbb2Zmc2V0XTsKICAgIGNvbnN0IGxhc3QgPSB0aGlzW29mZnNldCArIDddOwogICAgaWYgKGZpcnN0ID09PSB1bmRlZmluZWQgfHwgbGFzdCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIGJvdW5kc0Vycm9yKG9mZnNldCwgdGhpcy5sZW5ndGggLSA4KTsKICAgIH0KCiAgICBjb25zdCB2YWwgPSB0aGlzW29mZnNldCArIDRdICsKICAgICAgdGhpc1tvZmZzZXQgKyA1XSAqIDIgKiogOCArCiAgICAgIHRoaXNbb2Zmc2V0ICsgNl0gKiAyICoqIDE2ICsKICAgICAgKGxhc3QgPDwgMjQpOyAvLyBPdmVyZmxvdwoKICAgIHJldHVybiAoQmlnSW50KHZhbCkgPDwgQmlnSW50KDMyKSkgKwogICAgICBCaWdJbnQoZmlyc3QgKwogICAgICB0aGlzWysrb2Zmc2V0XSAqIDIgKiogOCArCiAgICAgIHRoaXNbKytvZmZzZXRdICogMiAqKiAxNiArCiAgICAgIHRoaXNbKytvZmZzZXRdICogMiAqKiAyNCkKICB9KTsKCiAgQnVmZmVyLnByb3RvdHlwZS5yZWFkQmlnSW50NjRCRSA9IGRlZmluZUJpZ0ludE1ldGhvZChmdW5jdGlvbiByZWFkQmlnSW50NjRCRSAob2Zmc2V0KSB7CiAgICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CiAgICB2YWxpZGF0ZU51bWJlcihvZmZzZXQsICdvZmZzZXQnKTsKICAgIGNvbnN0IGZpcnN0ID0gdGhpc1tvZmZzZXRdOwogICAgY29uc3QgbGFzdCA9IHRoaXNbb2Zmc2V0ICsgN107CiAgICBpZiAoZmlyc3QgPT09IHVuZGVmaW5lZCB8fCBsYXN0ID09PSB1bmRlZmluZWQpIHsKICAgICAgYm91bmRzRXJyb3Iob2Zmc2V0LCB0aGlzLmxlbmd0aCAtIDgpOwogICAgfQoKICAgIGNvbnN0IHZhbCA9IChmaXJzdCA8PCAyNCkgKyAvLyBPdmVyZmxvdwogICAgICB0aGlzWysrb2Zmc2V0XSAqIDIgKiogMTYgKwogICAgICB0aGlzWysrb2Zmc2V0XSAqIDIgKiogOCArCiAgICAgIHRoaXNbKytvZmZzZXRdOwoKICAgIHJldHVybiAoQmlnSW50KHZhbCkgPDwgQmlnSW50KDMyKSkgKwogICAgICBCaWdJbnQodGhpc1srK29mZnNldF0gKiAyICoqIDI0ICsKICAgICAgdGhpc1srK29mZnNldF0gKiAyICoqIDE2ICsKICAgICAgdGhpc1srK29mZnNldF0gKiAyICoqIDggKwogICAgICBsYXN0KQogIH0pOwoKICBCdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdExFID0gZnVuY3Rpb24gcmVhZEZsb2F0TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHsKICAgIG9mZnNldCA9IG9mZnNldCA+Pj4gMDsKICAgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpOwogICAgcmV0dXJuIGllZWU3NTQkMS5yZWFkKHRoaXMsIG9mZnNldCwgdHJ1ZSwgMjMsIDQpCiAgfTsKCiAgQnVmZmVyLnByb3RvdHlwZS5yZWFkRmxvYXRCRSA9IGZ1bmN0aW9uIHJlYWRGbG9hdEJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CiAgICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKTsKICAgIHJldHVybiBpZWVlNzU0JDEucmVhZCh0aGlzLCBvZmZzZXQsIGZhbHNlLCAyMywgNCkKICB9OwoKICBCdWZmZXIucHJvdG90eXBlLnJlYWREb3VibGVMRSA9IGZ1bmN0aW9uIHJlYWREb3VibGVMRSAob2Zmc2V0LCBub0Fzc2VydCkgewogICAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwogICAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA4LCB0aGlzLmxlbmd0aCk7CiAgICByZXR1cm4gaWVlZTc1NCQxLnJlYWQodGhpcywgb2Zmc2V0LCB0cnVlLCA1MiwgOCkKICB9OwoKICBCdWZmZXIucHJvdG90eXBlLnJlYWREb3VibGVCRSA9IGZ1bmN0aW9uIHJlYWREb3VibGVCRSAob2Zmc2V0LCBub0Fzc2VydCkgewogICAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwogICAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA4LCB0aGlzLmxlbmd0aCk7CiAgICByZXR1cm4gaWVlZTc1NCQxLnJlYWQodGhpcywgb2Zmc2V0LCBmYWxzZSwgNTIsIDgpCiAgfTsKCiAgZnVuY3Rpb24gY2hlY2tJbnQgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgZXh0LCBtYXgsIG1pbikgewogICAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYnVmKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignImJ1ZmZlciIgYXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlciBpbnN0YW5jZScpCiAgICBpZiAodmFsdWUgPiBtYXggfHwgdmFsdWUgPCBtaW4pIHRocm93IG5ldyBSYW5nZUVycm9yKCcidmFsdWUiIGFyZ3VtZW50IGlzIG91dCBvZiBib3VuZHMnKQogICAgaWYgKG9mZnNldCArIGV4dCA+IGJ1Zi5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbmRleCBvdXQgb2YgcmFuZ2UnKQogIH0KCiAgQnVmZmVyLnByb3RvdHlwZS53cml0ZVVpbnRMRSA9CiAgQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnRMRSA9IGZ1bmN0aW9uIHdyaXRlVUludExFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkgewogICAgdmFsdWUgPSArdmFsdWU7CiAgICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CiAgICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCA+Pj4gMDsKICAgIGlmICghbm9Bc3NlcnQpIHsKICAgICAgY29uc3QgbWF4Qnl0ZXMgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCkgLSAxOwogICAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBtYXhCeXRlcywgMCk7CiAgICB9CgogICAgbGV0IG11bCA9IDE7CiAgICBsZXQgaSA9IDA7CiAgICB0aGlzW29mZnNldF0gPSB2YWx1ZSAmIDB4RkY7CiAgICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkgewogICAgICB0aGlzW29mZnNldCArIGldID0gKHZhbHVlIC8gbXVsKSAmIDB4RkY7CiAgICB9CgogICAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGgKICB9OwoKICBCdWZmZXIucHJvdG90eXBlLndyaXRlVWludEJFID0KICBCdWZmZXIucHJvdG90eXBlLndyaXRlVUludEJFID0gZnVuY3Rpb24gd3JpdGVVSW50QkUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7CiAgICB2YWx1ZSA9ICt2YWx1ZTsKICAgIG9mZnNldCA9IG9mZnNldCA+Pj4gMDsKICAgIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoID4+PiAwOwogICAgaWYgKCFub0Fzc2VydCkgewogICAgICBjb25zdCBtYXhCeXRlcyA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKSAtIDE7CiAgICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG1heEJ5dGVzLCAwKTsKICAgIH0KCiAgICBsZXQgaSA9IGJ5dGVMZW5ndGggLSAxOwogICAgbGV0IG11bCA9IDE7CiAgICB0aGlzW29mZnNldCArIGldID0gdmFsdWUgJiAweEZGOwogICAgd2hpbGUgKC0taSA+PSAwICYmIChtdWwgKj0gMHgxMDApKSB7CiAgICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAodmFsdWUgLyBtdWwpICYgMHhGRjsKICAgIH0KCiAgICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aAogIH07CgogIEJ1ZmZlci5wcm90b3R5cGUud3JpdGVVaW50OCA9CiAgQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQ4ID0gZnVuY3Rpb24gd3JpdGVVSW50OCAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKICAgIHZhbHVlID0gK3ZhbHVlOwogICAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwogICAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMSwgMHhmZiwgMCk7CiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKTsKICAgIHJldHVybiBvZmZzZXQgKyAxCiAgfTsKCiAgQnVmZmVyLnByb3RvdHlwZS53cml0ZVVpbnQxNkxFID0KICBCdWZmZXIucHJvdG90eXBlLndyaXRlVUludDE2TEUgPSBmdW5jdGlvbiB3cml0ZVVJbnQxNkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewogICAgdmFsdWUgPSArdmFsdWU7CiAgICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CiAgICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweGZmZmYsIDApOwogICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZik7CiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KTsKICAgIHJldHVybiBvZmZzZXQgKyAyCiAgfTsKCiAgQnVmZmVyLnByb3RvdHlwZS53cml0ZVVpbnQxNkJFID0KICBCdWZmZXIucHJvdG90eXBlLndyaXRlVUludDE2QkUgPSBmdW5jdGlvbiB3cml0ZVVJbnQxNkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewogICAgdmFsdWUgPSArdmFsdWU7CiAgICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CiAgICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweGZmZmYsIDApOwogICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiA4KTsKICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgJiAweGZmKTsKICAgIHJldHVybiBvZmZzZXQgKyAyCiAgfTsKCiAgQnVmZmVyLnByb3RvdHlwZS53cml0ZVVpbnQzMkxFID0KICBCdWZmZXIucHJvdG90eXBlLndyaXRlVUludDMyTEUgPSBmdW5jdGlvbiB3cml0ZVVJbnQzMkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewogICAgdmFsdWUgPSArdmFsdWU7CiAgICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CiAgICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweGZmZmZmZmZmLCAwKTsKICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgPj4+IDI0KTsKICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDE2KTsKICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpOwogICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZik7CiAgICByZXR1cm4gb2Zmc2V0ICsgNAogIH07CgogIEJ1ZmZlci5wcm90b3R5cGUud3JpdGVVaW50MzJCRSA9CiAgQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQzMkJFID0gZnVuY3Rpb24gd3JpdGVVSW50MzJCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKICAgIHZhbHVlID0gK3ZhbHVlOwogICAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwogICAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHhmZmZmZmZmZiwgMCk7CiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDI0KTsKICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDE2KTsKICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDgpOwogICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSAmIDB4ZmYpOwogICAgcmV0dXJuIG9mZnNldCArIDQKICB9OwoKICBmdW5jdGlvbiB3cnRCaWdVSW50NjRMRSAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBtaW4sIG1heCkgewogICAgY2hlY2tJbnRCSSh2YWx1ZSwgbWluLCBtYXgsIGJ1Ziwgb2Zmc2V0LCA3KTsKCiAgICBsZXQgbG8gPSBOdW1iZXIodmFsdWUgJiBCaWdJbnQoMHhmZmZmZmZmZikpOwogICAgYnVmW29mZnNldCsrXSA9IGxvOwogICAgbG8gPSBsbyA+PiA4OwogICAgYnVmW29mZnNldCsrXSA9IGxvOwogICAgbG8gPSBsbyA+PiA4OwogICAgYnVmW29mZnNldCsrXSA9IGxvOwogICAgbG8gPSBsbyA+PiA4OwogICAgYnVmW29mZnNldCsrXSA9IGxvOwogICAgbGV0IGhpID0gTnVtYmVyKHZhbHVlID4+IEJpZ0ludCgzMikgJiBCaWdJbnQoMHhmZmZmZmZmZikpOwogICAgYnVmW29mZnNldCsrXSA9IGhpOwogICAgaGkgPSBoaSA+PiA4OwogICAgYnVmW29mZnNldCsrXSA9IGhpOwogICAgaGkgPSBoaSA+PiA4OwogICAgYnVmW29mZnNldCsrXSA9IGhpOwogICAgaGkgPSBoaSA+PiA4OwogICAgYnVmW29mZnNldCsrXSA9IGhpOwogICAgcmV0dXJuIG9mZnNldAogIH0KCiAgZnVuY3Rpb24gd3J0QmlnVUludDY0QkUgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbWluLCBtYXgpIHsKICAgIGNoZWNrSW50QkkodmFsdWUsIG1pbiwgbWF4LCBidWYsIG9mZnNldCwgNyk7CgogICAgbGV0IGxvID0gTnVtYmVyKHZhbHVlICYgQmlnSW50KDB4ZmZmZmZmZmYpKTsKICAgIGJ1ZltvZmZzZXQgKyA3XSA9IGxvOwogICAgbG8gPSBsbyA+PiA4OwogICAgYnVmW29mZnNldCArIDZdID0gbG87CiAgICBsbyA9IGxvID4+IDg7CiAgICBidWZbb2Zmc2V0ICsgNV0gPSBsbzsKICAgIGxvID0gbG8gPj4gODsKICAgIGJ1ZltvZmZzZXQgKyA0XSA9IGxvOwogICAgbGV0IGhpID0gTnVtYmVyKHZhbHVlID4+IEJpZ0ludCgzMikgJiBCaWdJbnQoMHhmZmZmZmZmZikpOwogICAgYnVmW29mZnNldCArIDNdID0gaGk7CiAgICBoaSA9IGhpID4+IDg7CiAgICBidWZbb2Zmc2V0ICsgMl0gPSBoaTsKICAgIGhpID0gaGkgPj4gODsKICAgIGJ1ZltvZmZzZXQgKyAxXSA9IGhpOwogICAgaGkgPSBoaSA+PiA4OwogICAgYnVmW29mZnNldF0gPSBoaTsKICAgIHJldHVybiBvZmZzZXQgKyA4CiAgfQoKICBCdWZmZXIucHJvdG90eXBlLndyaXRlQmlnVUludDY0TEUgPSBkZWZpbmVCaWdJbnRNZXRob2QoZnVuY3Rpb24gd3JpdGVCaWdVSW50NjRMRSAodmFsdWUsIG9mZnNldCA9IDApIHsKICAgIHJldHVybiB3cnRCaWdVSW50NjRMRSh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBCaWdJbnQoMCksIEJpZ0ludCgnMHhmZmZmZmZmZmZmZmZmZmZmJykpCiAgfSk7CgogIEJ1ZmZlci5wcm90b3R5cGUud3JpdGVCaWdVSW50NjRCRSA9IGRlZmluZUJpZ0ludE1ldGhvZChmdW5jdGlvbiB3cml0ZUJpZ1VJbnQ2NEJFICh2YWx1ZSwgb2Zmc2V0ID0gMCkgewogICAgcmV0dXJuIHdydEJpZ1VJbnQ2NEJFKHRoaXMsIHZhbHVlLCBvZmZzZXQsIEJpZ0ludCgwKSwgQmlnSW50KCcweGZmZmZmZmZmZmZmZmZmZmYnKSkKICB9KTsKCiAgQnVmZmVyLnByb3RvdHlwZS53cml0ZUludExFID0gZnVuY3Rpb24gd3JpdGVJbnRMRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHsKICAgIHZhbHVlID0gK3ZhbHVlOwogICAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwogICAgaWYgKCFub0Fzc2VydCkgewogICAgICBjb25zdCBsaW1pdCA9IE1hdGgucG93KDIsICg4ICogYnl0ZUxlbmd0aCkgLSAxKTsKCiAgICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIGxpbWl0IC0gMSwgLWxpbWl0KTsKICAgIH0KCiAgICBsZXQgaSA9IDA7CiAgICBsZXQgbXVsID0gMTsKICAgIGxldCBzdWIgPSAwOwogICAgdGhpc1tvZmZzZXRdID0gdmFsdWUgJiAweEZGOwogICAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHsKICAgICAgaWYgKHZhbHVlIDwgMCAmJiBzdWIgPT09IDAgJiYgdGhpc1tvZmZzZXQgKyBpIC0gMV0gIT09IDApIHsKICAgICAgICBzdWIgPSAxOwogICAgICB9CiAgICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAoKHZhbHVlIC8gbXVsKSA+PiAwKSAtIHN1YiAmIDB4RkY7CiAgICB9CgogICAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGgKICB9OwoKICBCdWZmZXIucHJvdG90eXBlLndyaXRlSW50QkUgPSBmdW5jdGlvbiB3cml0ZUludEJFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkgewogICAgdmFsdWUgPSArdmFsdWU7CiAgICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CiAgICBpZiAoIW5vQXNzZXJ0KSB7CiAgICAgIGNvbnN0IGxpbWl0ID0gTWF0aC5wb3coMiwgKDggKiBieXRlTGVuZ3RoKSAtIDEpOwoKICAgICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbGltaXQgLSAxLCAtbGltaXQpOwogICAgfQoKICAgIGxldCBpID0gYnl0ZUxlbmd0aCAtIDE7CiAgICBsZXQgbXVsID0gMTsKICAgIGxldCBzdWIgPSAwOwogICAgdGhpc1tvZmZzZXQgKyBpXSA9IHZhbHVlICYgMHhGRjsKICAgIHdoaWxlICgtLWkgPj0gMCAmJiAobXVsICo9IDB4MTAwKSkgewogICAgICBpZiAodmFsdWUgPCAwICYmIHN1YiA9PT0gMCAmJiB0aGlzW29mZnNldCArIGkgKyAxXSAhPT0gMCkgewogICAgICAgIHN1YiA9IDE7CiAgICAgIH0KICAgICAgdGhpc1tvZmZzZXQgKyBpXSA9ICgodmFsdWUgLyBtdWwpID4+IDApIC0gc3ViICYgMHhGRjsKICAgIH0KCiAgICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aAogIH07CgogIEJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQ4ID0gZnVuY3Rpb24gd3JpdGVJbnQ4ICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewogICAgdmFsdWUgPSArdmFsdWU7CiAgICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CiAgICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAxLCAweDdmLCAtMHg4MCk7CiAgICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmYgKyB2YWx1ZSArIDE7CiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKTsKICAgIHJldHVybiBvZmZzZXQgKyAxCiAgfTsKCiAgQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDE2TEUgPSBmdW5jdGlvbiB3cml0ZUludDE2TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgICB2YWx1ZSA9ICt2YWx1ZTsKICAgIG9mZnNldCA9IG9mZnNldCA+Pj4gMDsKICAgIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4N2ZmZiwgLTB4ODAwMCk7CiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKTsKICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpOwogICAgcmV0dXJuIG9mZnNldCArIDIKICB9OwoKICBCdWZmZXIucHJvdG90eXBlLndyaXRlSW50MTZCRSA9IGZ1bmN0aW9uIHdyaXRlSW50MTZCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKICAgIHZhbHVlID0gK3ZhbHVlOwogICAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwogICAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHg3ZmZmLCAtMHg4MDAwKTsKICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gOCk7CiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlICYgMHhmZik7CiAgICByZXR1cm4gb2Zmc2V0ICsgMgogIH07CgogIEJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQzMkxFID0gZnVuY3Rpb24gd3JpdGVJbnQzMkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewogICAgdmFsdWUgPSArdmFsdWU7CiAgICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CiAgICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweDdmZmZmZmZmLCAtMHg4MDAwMDAwMCk7CiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKTsKICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpOwogICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gMTYpOwogICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSA+Pj4gMjQpOwogICAgcmV0dXJuIG9mZnNldCArIDQKICB9OwoKICBCdWZmZXIucHJvdG90eXBlLndyaXRlSW50MzJCRSA9IGZ1bmN0aW9uIHdyaXRlSW50MzJCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKICAgIHZhbHVlID0gK3ZhbHVlOwogICAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwogICAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHg3ZmZmZmZmZiwgLTB4ODAwMDAwMDApOwogICAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmZmZmZmZmICsgdmFsdWUgKyAxOwogICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiAyNCk7CiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiAxNik7CiAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiA4KTsKICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgJiAweGZmKTsKICAgIHJldHVybiBvZmZzZXQgKyA0CiAgfTsKCiAgQnVmZmVyLnByb3RvdHlwZS53cml0ZUJpZ0ludDY0TEUgPSBkZWZpbmVCaWdJbnRNZXRob2QoZnVuY3Rpb24gd3JpdGVCaWdJbnQ2NExFICh2YWx1ZSwgb2Zmc2V0ID0gMCkgewogICAgcmV0dXJuIHdydEJpZ1VJbnQ2NExFKHRoaXMsIHZhbHVlLCBvZmZzZXQsIC1CaWdJbnQoJzB4ODAwMDAwMDAwMDAwMDAwMCcpLCBCaWdJbnQoJzB4N2ZmZmZmZmZmZmZmZmZmZicpKQogIH0pOwoKICBCdWZmZXIucHJvdG90eXBlLndyaXRlQmlnSW50NjRCRSA9IGRlZmluZUJpZ0ludE1ldGhvZChmdW5jdGlvbiB3cml0ZUJpZ0ludDY0QkUgKHZhbHVlLCBvZmZzZXQgPSAwKSB7CiAgICByZXR1cm4gd3J0QmlnVUludDY0QkUodGhpcywgdmFsdWUsIG9mZnNldCwgLUJpZ0ludCgnMHg4MDAwMDAwMDAwMDAwMDAwJyksIEJpZ0ludCgnMHg3ZmZmZmZmZmZmZmZmZmZmJykpCiAgfSk7CgogIGZ1bmN0aW9uIGNoZWNrSUVFRTc1NCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBleHQsIG1heCwgbWluKSB7CiAgICBpZiAob2Zmc2V0ICsgZXh0ID4gYnVmLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0luZGV4IG91dCBvZiByYW5nZScpCiAgICBpZiAob2Zmc2V0IDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0luZGV4IG91dCBvZiByYW5nZScpCiAgfQoKICBmdW5jdGlvbiB3cml0ZUZsb2F0IChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgbm9Bc3NlcnQpIHsKICAgIHZhbHVlID0gK3ZhbHVlOwogICAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwogICAgaWYgKCFub0Fzc2VydCkgewogICAgICBjaGVja0lFRUU3NTQoYnVmLCB2YWx1ZSwgb2Zmc2V0LCA0KTsKICAgIH0KICAgIGllZWU3NTQkMS53cml0ZShidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgMjMsIDQpOwogICAgcmV0dXJuIG9mZnNldCArIDQKICB9CgogIEJ1ZmZlci5wcm90b3R5cGUud3JpdGVGbG9hdExFID0gZnVuY3Rpb24gd3JpdGVGbG9hdExFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewogICAgcmV0dXJuIHdyaXRlRmxvYXQodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSwgbm9Bc3NlcnQpCiAgfTsKCiAgQnVmZmVyLnByb3RvdHlwZS53cml0ZUZsb2F0QkUgPSBmdW5jdGlvbiB3cml0ZUZsb2F0QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgICByZXR1cm4gd3JpdGVGbG9hdCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSwgbm9Bc3NlcnQpCiAgfTsKCiAgZnVuY3Rpb24gd3JpdGVEb3VibGUgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCBub0Fzc2VydCkgewogICAgdmFsdWUgPSArdmFsdWU7CiAgICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CiAgICBpZiAoIW5vQXNzZXJ0KSB7CiAgICAgIGNoZWNrSUVFRTc1NChidWYsIHZhbHVlLCBvZmZzZXQsIDgpOwogICAgfQogICAgaWVlZTc1NCQxLndyaXRlKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCA1MiwgOCk7CiAgICByZXR1cm4gb2Zmc2V0ICsgOAogIH0KCiAgQnVmZmVyLnByb3RvdHlwZS53cml0ZURvdWJsZUxFID0gZnVuY3Rpb24gd3JpdGVEb3VibGVMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKICAgIHJldHVybiB3cml0ZURvdWJsZSh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlLCBub0Fzc2VydCkKICB9OwoKICBCdWZmZXIucHJvdG90eXBlLndyaXRlRG91YmxlQkUgPSBmdW5jdGlvbiB3cml0ZURvdWJsZUJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewogICAgcmV0dXJuIHdyaXRlRG91YmxlKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlLCBub0Fzc2VydCkKICB9OwoKICAvLyBjb3B5KHRhcmdldEJ1ZmZlciwgdGFyZ2V0U3RhcnQ9MCwgc291cmNlU3RhcnQ9MCwgc291cmNlRW5kPWJ1ZmZlci5sZW5ndGgpCiAgQnVmZmVyLnByb3RvdHlwZS5jb3B5ID0gZnVuY3Rpb24gY29weSAodGFyZ2V0LCB0YXJnZXRTdGFydCwgc3RhcnQsIGVuZCkgewogICAgaWYgKCFCdWZmZXIuaXNCdWZmZXIodGFyZ2V0KSkgdGhyb3cgbmV3IFR5cGVFcnJvcignYXJndW1lbnQgc2hvdWxkIGJlIGEgQnVmZmVyJykKICAgIGlmICghc3RhcnQpIHN0YXJ0ID0gMDsKICAgIGlmICghZW5kICYmIGVuZCAhPT0gMCkgZW5kID0gdGhpcy5sZW5ndGg7CiAgICBpZiAodGFyZ2V0U3RhcnQgPj0gdGFyZ2V0Lmxlbmd0aCkgdGFyZ2V0U3RhcnQgPSB0YXJnZXQubGVuZ3RoOwogICAgaWYgKCF0YXJnZXRTdGFydCkgdGFyZ2V0U3RhcnQgPSAwOwogICAgaWYgKGVuZCA+IDAgJiYgZW5kIDwgc3RhcnQpIGVuZCA9IHN0YXJ0OwoKICAgIC8vIENvcHkgMCBieXRlczsgd2UncmUgZG9uZQogICAgaWYgKGVuZCA9PT0gc3RhcnQpIHJldHVybiAwCiAgICBpZiAodGFyZ2V0Lmxlbmd0aCA9PT0gMCB8fCB0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDAKCiAgICAvLyBGYXRhbCBlcnJvciBjb25kaXRpb25zCiAgICBpZiAodGFyZ2V0U3RhcnQgPCAwKSB7CiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCd0YXJnZXRTdGFydCBvdXQgb2YgYm91bmRzJykKICAgIH0KICAgIGlmIChzdGFydCA8IDAgfHwgc3RhcnQgPj0gdGhpcy5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbmRleCBvdXQgb2YgcmFuZ2UnKQogICAgaWYgKGVuZCA8IDApIHRocm93IG5ldyBSYW5nZUVycm9yKCdzb3VyY2VFbmQgb3V0IG9mIGJvdW5kcycpCgogICAgLy8gQXJlIHdlIG9vYj8KICAgIGlmIChlbmQgPiB0aGlzLmxlbmd0aCkgZW5kID0gdGhpcy5sZW5ndGg7CiAgICBpZiAodGFyZ2V0Lmxlbmd0aCAtIHRhcmdldFN0YXJ0IDwgZW5kIC0gc3RhcnQpIHsKICAgICAgZW5kID0gdGFyZ2V0Lmxlbmd0aCAtIHRhcmdldFN0YXJ0ICsgc3RhcnQ7CiAgICB9CgogICAgY29uc3QgbGVuID0gZW5kIC0gc3RhcnQ7CgogICAgaWYgKHRoaXMgPT09IHRhcmdldCAmJiB0eXBlb2YgVWludDhBcnJheS5wcm90b3R5cGUuY29weVdpdGhpbiA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAvLyBVc2UgYnVpbHQtaW4gd2hlbiBhdmFpbGFibGUsIG1pc3NpbmcgZnJvbSBJRTExCiAgICAgIHRoaXMuY29weVdpdGhpbih0YXJnZXRTdGFydCwgc3RhcnQsIGVuZCk7CiAgICB9IGVsc2UgewogICAgICBVaW50OEFycmF5LnByb3RvdHlwZS5zZXQuY2FsbCgKICAgICAgICB0YXJnZXQsCiAgICAgICAgdGhpcy5zdWJhcnJheShzdGFydCwgZW5kKSwKICAgICAgICB0YXJnZXRTdGFydAogICAgICApOwogICAgfQoKICAgIHJldHVybiBsZW4KICB9OwoKICAvLyBVc2FnZToKICAvLyAgICBidWZmZXIuZmlsbChudW1iZXJbLCBvZmZzZXRbLCBlbmRdXSkKICAvLyAgICBidWZmZXIuZmlsbChidWZmZXJbLCBvZmZzZXRbLCBlbmRdXSkKICAvLyAgICBidWZmZXIuZmlsbChzdHJpbmdbLCBvZmZzZXRbLCBlbmRdXVssIGVuY29kaW5nXSkKICBCdWZmZXIucHJvdG90eXBlLmZpbGwgPSBmdW5jdGlvbiBmaWxsICh2YWwsIHN0YXJ0LCBlbmQsIGVuY29kaW5nKSB7CiAgICAvLyBIYW5kbGUgc3RyaW5nIGNhc2VzOgogICAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7CiAgICAgIGlmICh0eXBlb2Ygc3RhcnQgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgZW5jb2RpbmcgPSBzdGFydDsKICAgICAgICBzdGFydCA9IDA7CiAgICAgICAgZW5kID0gdGhpcy5sZW5ndGg7CiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGVuZCA9PT0gJ3N0cmluZycpIHsKICAgICAgICBlbmNvZGluZyA9IGVuZDsKICAgICAgICBlbmQgPSB0aGlzLmxlbmd0aDsKICAgICAgfQogICAgICBpZiAoZW5jb2RpbmcgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgZW5jb2RpbmcgIT09ICdzdHJpbmcnKSB7CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignZW5jb2RpbmcgbXVzdCBiZSBhIHN0cmluZycpCiAgICAgIH0KICAgICAgaWYgKHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycgJiYgIUJ1ZmZlci5pc0VuY29kaW5nKGVuY29kaW5nKSkgewogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZykKICAgICAgfQogICAgICBpZiAodmFsLmxlbmd0aCA9PT0gMSkgewogICAgICAgIGNvbnN0IGNvZGUgPSB2YWwuY2hhckNvZGVBdCgwKTsKICAgICAgICBpZiAoKGVuY29kaW5nID09PSAndXRmOCcgJiYgY29kZSA8IDEyOCkgfHwKICAgICAgICAgICAgZW5jb2RpbmcgPT09ICdsYXRpbjEnKSB7CiAgICAgICAgICAvLyBGYXN0IHBhdGg6IElmIGB2YWxgIGZpdHMgaW50byBhIHNpbmdsZSBieXRlLCB1c2UgdGhhdCBudW1lcmljIHZhbHVlLgogICAgICAgICAgdmFsID0gY29kZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHsKICAgICAgdmFsID0gdmFsICYgMjU1OwogICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsID09PSAnYm9vbGVhbicpIHsKICAgICAgdmFsID0gTnVtYmVyKHZhbCk7CiAgICB9CgogICAgLy8gSW52YWxpZCByYW5nZXMgYXJlIG5vdCBzZXQgdG8gYSBkZWZhdWx0LCBzbyBjYW4gcmFuZ2UgY2hlY2sgZWFybHkuCiAgICBpZiAoc3RhcnQgPCAwIHx8IHRoaXMubGVuZ3RoIDwgc3RhcnQgfHwgdGhpcy5sZW5ndGggPCBlbmQpIHsKICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ091dCBvZiByYW5nZSBpbmRleCcpCiAgICB9CgogICAgaWYgKGVuZCA8PSBzdGFydCkgewogICAgICByZXR1cm4gdGhpcwogICAgfQoKICAgIHN0YXJ0ID0gc3RhcnQgPj4+IDA7CiAgICBlbmQgPSBlbmQgPT09IHVuZGVmaW5lZCA/IHRoaXMubGVuZ3RoIDogZW5kID4+PiAwOwoKICAgIGlmICghdmFsKSB2YWwgPSAwOwoKICAgIGxldCBpOwogICAgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7CiAgICAgIGZvciAoaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHsKICAgICAgICB0aGlzW2ldID0gdmFsOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICBjb25zdCBieXRlcyA9IEJ1ZmZlci5pc0J1ZmZlcih2YWwpCiAgICAgICAgPyB2YWwKICAgICAgICA6IEJ1ZmZlci5mcm9tKHZhbCwgZW5jb2RpbmcpOwogICAgICBjb25zdCBsZW4gPSBieXRlcy5sZW5ndGg7CiAgICAgIGlmIChsZW4gPT09IDApIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgdmFsdWUgIicgKyB2YWwgKwogICAgICAgICAgJyIgaXMgaW52YWxpZCBmb3IgYXJndW1lbnQgInZhbHVlIicpCiAgICAgIH0KICAgICAgZm9yIChpID0gMDsgaSA8IGVuZCAtIHN0YXJ0OyArK2kpIHsKICAgICAgICB0aGlzW2kgKyBzdGFydF0gPSBieXRlc1tpICUgbGVuXTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiB0aGlzCiAgfTsKCiAgLy8gQ1VTVE9NIEVSUk9SUwogIC8vID09PT09PT09PT09PT0KCiAgLy8gU2ltcGxpZmllZCB2ZXJzaW9ucyBmcm9tIE5vZGUsIGNoYW5nZWQgZm9yIEJ1ZmZlci1vbmx5IHVzYWdlCiAgY29uc3QgZXJyb3JzID0ge307CiAgZnVuY3Rpb24gRSAoc3ltLCBnZXRNZXNzYWdlLCBCYXNlKSB7CiAgICBlcnJvcnNbc3ltXSA9IGNsYXNzIE5vZGVFcnJvciBleHRlbmRzIEJhc2UgewogICAgICBjb25zdHJ1Y3RvciAoKSB7CiAgICAgICAgc3VwZXIoKTsKCiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdtZXNzYWdlJywgewogICAgICAgICAgdmFsdWU6IGdldE1lc3NhZ2UuYXBwbHkodGhpcywgYXJndW1lbnRzKSwKICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlCiAgICAgICAgfSk7CgogICAgICAgIC8vIEFkZCB0aGUgZXJyb3IgY29kZSB0byB0aGUgbmFtZSB0byBpbmNsdWRlIGl0IGluIHRoZSBzdGFjayB0cmFjZS4KICAgICAgICB0aGlzLm5hbWUgPSBgJHt0aGlzLm5hbWV9IFske3N5bX1dYDsKICAgICAgICAvLyBBY2Nlc3MgdGhlIHN0YWNrIHRvIGdlbmVyYXRlIHRoZSBlcnJvciBtZXNzYWdlIGluY2x1ZGluZyB0aGUgZXJyb3IgY29kZQogICAgICAgIC8vIGZyb20gdGhlIG5hbWUuCiAgICAgICAgdGhpcy5zdGFjazsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtZXhwcmVzc2lvbnMKICAgICAgICAvLyBSZXNldCB0aGUgbmFtZSB0byB0aGUgYWN0dWFsIG5hbWUuCiAgICAgICAgZGVsZXRlIHRoaXMubmFtZTsKICAgICAgfQoKICAgICAgZ2V0IGNvZGUgKCkgewogICAgICAgIHJldHVybiBzeW0KICAgICAgfQoKICAgICAgc2V0IGNvZGUgKHZhbHVlKSB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdjb2RlJywgewogICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgICAgIHZhbHVlLAogICAgICAgICAgd3JpdGFibGU6IHRydWUKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgdG9TdHJpbmcgKCkgewogICAgICAgIHJldHVybiBgJHt0aGlzLm5hbWV9IFske3N5bX1dOiAke3RoaXMubWVzc2FnZX1gCiAgICAgIH0KICAgIH07CiAgfQoKICBFKCdFUlJfQlVGRkVSX09VVF9PRl9CT1VORFMnLAogICAgZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgaWYgKG5hbWUpIHsKICAgICAgICByZXR1cm4gYCR7bmFtZX0gaXMgb3V0c2lkZSBvZiBidWZmZXIgYm91bmRzYAogICAgICB9CgogICAgICByZXR1cm4gJ0F0dGVtcHQgdG8gYWNjZXNzIG1lbW9yeSBvdXRzaWRlIGJ1ZmZlciBib3VuZHMnCiAgICB9LCBSYW5nZUVycm9yKTsKICBFKCdFUlJfSU5WQUxJRF9BUkdfVFlQRScsCiAgICBmdW5jdGlvbiAobmFtZSwgYWN0dWFsKSB7CiAgICAgIHJldHVybiBgVGhlICIke25hbWV9IiBhcmd1bWVudCBtdXN0IGJlIG9mIHR5cGUgbnVtYmVyLiBSZWNlaXZlZCB0eXBlICR7dHlwZW9mIGFjdHVhbH1gCiAgICB9LCBUeXBlRXJyb3IpOwogIEUoJ0VSUl9PVVRfT0ZfUkFOR0UnLAogICAgZnVuY3Rpb24gKHN0ciwgcmFuZ2UsIGlucHV0KSB7CiAgICAgIGxldCBtc2cgPSBgVGhlIHZhbHVlIG9mICIke3N0cn0iIGlzIG91dCBvZiByYW5nZS5gOwogICAgICBsZXQgcmVjZWl2ZWQgPSBpbnB1dDsKICAgICAgaWYgKE51bWJlci5pc0ludGVnZXIoaW5wdXQpICYmIE1hdGguYWJzKGlucHV0KSA+IDIgKiogMzIpIHsKICAgICAgICByZWNlaXZlZCA9IGFkZE51bWVyaWNhbFNlcGFyYXRvcihTdHJpbmcoaW5wdXQpKTsKICAgICAgfSBlbHNlIGlmICh0eXBlb2YgaW5wdXQgPT09ICdiaWdpbnQnKSB7CiAgICAgICAgcmVjZWl2ZWQgPSBTdHJpbmcoaW5wdXQpOwogICAgICAgIGlmIChpbnB1dCA+IEJpZ0ludCgyKSAqKiBCaWdJbnQoMzIpIHx8IGlucHV0IDwgLShCaWdJbnQoMikgKiogQmlnSW50KDMyKSkpIHsKICAgICAgICAgIHJlY2VpdmVkID0gYWRkTnVtZXJpY2FsU2VwYXJhdG9yKHJlY2VpdmVkKTsKICAgICAgICB9CiAgICAgICAgcmVjZWl2ZWQgKz0gJ24nOwogICAgICB9CiAgICAgIG1zZyArPSBgIEl0IG11c3QgYmUgJHtyYW5nZX0uIFJlY2VpdmVkICR7cmVjZWl2ZWR9YDsKICAgICAgcmV0dXJuIG1zZwogICAgfSwgUmFuZ2VFcnJvcik7CgogIGZ1bmN0aW9uIGFkZE51bWVyaWNhbFNlcGFyYXRvciAodmFsKSB7CiAgICBsZXQgcmVzID0gJyc7CiAgICBsZXQgaSA9IHZhbC5sZW5ndGg7CiAgICBjb25zdCBzdGFydCA9IHZhbFswXSA9PT0gJy0nID8gMSA6IDA7CiAgICBmb3IgKDsgaSA+PSBzdGFydCArIDQ7IGkgLT0gMykgewogICAgICByZXMgPSBgXyR7dmFsLnNsaWNlKGkgLSAzLCBpKX0ke3Jlc31gOwogICAgfQogICAgcmV0dXJuIGAke3ZhbC5zbGljZSgwLCBpKX0ke3Jlc31gCiAgfQoKICAvLyBDSEVDSyBGVU5DVElPTlMKICAvLyA9PT09PT09PT09PT09PT0KCiAgZnVuY3Rpb24gY2hlY2tCb3VuZHMgKGJ1Ziwgb2Zmc2V0LCBieXRlTGVuZ3RoKSB7CiAgICB2YWxpZGF0ZU51bWJlcihvZmZzZXQsICdvZmZzZXQnKTsKICAgIGlmIChidWZbb2Zmc2V0XSA9PT0gdW5kZWZpbmVkIHx8IGJ1ZltvZmZzZXQgKyBieXRlTGVuZ3RoXSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIGJvdW5kc0Vycm9yKG9mZnNldCwgYnVmLmxlbmd0aCAtIChieXRlTGVuZ3RoICsgMSkpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gY2hlY2tJbnRCSSAodmFsdWUsIG1pbiwgbWF4LCBidWYsIG9mZnNldCwgYnl0ZUxlbmd0aCkgewogICAgaWYgKHZhbHVlID4gbWF4IHx8IHZhbHVlIDwgbWluKSB7CiAgICAgIGNvbnN0IG4gPSB0eXBlb2YgbWluID09PSAnYmlnaW50JyA/ICduJyA6ICcnOwogICAgICBsZXQgcmFuZ2U7CiAgICAgIGlmIChieXRlTGVuZ3RoID4gMykgewogICAgICAgIGlmIChtaW4gPT09IDAgfHwgbWluID09PSBCaWdJbnQoMCkpIHsKICAgICAgICAgIHJhbmdlID0gYD49IDAke259IGFuZCA8IDIke259ICoqICR7KGJ5dGVMZW5ndGggKyAxKSAqIDh9JHtufWA7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJhbmdlID0gYD49IC0oMiR7bn0gKiogJHsoYnl0ZUxlbmd0aCArIDEpICogOCAtIDF9JHtufSkgYW5kIDwgMiAqKiBgICsKICAgICAgICAgICAgICAgICAgYCR7KGJ5dGVMZW5ndGggKyAxKSAqIDggLSAxfSR7bn1gOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICByYW5nZSA9IGA+PSAke21pbn0ke259IGFuZCA8PSAke21heH0ke259YDsKICAgICAgfQogICAgICB0aHJvdyBuZXcgZXJyb3JzLkVSUl9PVVRfT0ZfUkFOR0UoJ3ZhbHVlJywgcmFuZ2UsIHZhbHVlKQogICAgfQogICAgY2hlY2tCb3VuZHMoYnVmLCBvZmZzZXQsIGJ5dGVMZW5ndGgpOwogIH0KCiAgZnVuY3Rpb24gdmFsaWRhdGVOdW1iZXIgKHZhbHVlLCBuYW1lKSB7CiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnbnVtYmVyJykgewogICAgICB0aHJvdyBuZXcgZXJyb3JzLkVSUl9JTlZBTElEX0FSR19UWVBFKG5hbWUsICdudW1iZXInLCB2YWx1ZSkKICAgIH0KICB9CgogIGZ1bmN0aW9uIGJvdW5kc0Vycm9yICh2YWx1ZSwgbGVuZ3RoLCB0eXBlKSB7CiAgICBpZiAoTWF0aC5mbG9vcih2YWx1ZSkgIT09IHZhbHVlKSB7CiAgICAgIHZhbGlkYXRlTnVtYmVyKHZhbHVlLCB0eXBlKTsKICAgICAgdGhyb3cgbmV3IGVycm9ycy5FUlJfT1VUX09GX1JBTkdFKHR5cGUgfHwgJ29mZnNldCcsICdhbiBpbnRlZ2VyJywgdmFsdWUpCiAgICB9CgogICAgaWYgKGxlbmd0aCA8IDApIHsKICAgICAgdGhyb3cgbmV3IGVycm9ycy5FUlJfQlVGRkVSX09VVF9PRl9CT1VORFMoKQogICAgfQoKICAgIHRocm93IG5ldyBlcnJvcnMuRVJSX09VVF9PRl9SQU5HRSh0eXBlIHx8ICdvZmZzZXQnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGA+PSAke3R5cGUgPyAxIDogMH0gYW5kIDw9ICR7bGVuZ3RofWAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUpCiAgfQoKICAvLyBIRUxQRVIgRlVOQ1RJT05TCiAgLy8gPT09PT09PT09PT09PT09PQoKICBjb25zdCBJTlZBTElEX0JBU0U2NF9SRSA9IC9bXisvMC05QS1aYS16LV9dL2c7CgogIGZ1bmN0aW9uIGJhc2U2NGNsZWFuIChzdHIpIHsKICAgIC8vIE5vZGUgdGFrZXMgZXF1YWwgc2lnbnMgYXMgZW5kIG9mIHRoZSBCYXNlNjQgZW5jb2RpbmcKICAgIHN0ciA9IHN0ci5zcGxpdCgnPScpWzBdOwogICAgLy8gTm9kZSBzdHJpcHMgb3V0IGludmFsaWQgY2hhcmFjdGVycyBsaWtlIFxuIGFuZCBcdCBmcm9tIHRoZSBzdHJpbmcsIGJhc2U2NC1qcyBkb2VzIG5vdAogICAgc3RyID0gc3RyLnRyaW0oKS5yZXBsYWNlKElOVkFMSURfQkFTRTY0X1JFLCAnJyk7CiAgICAvLyBOb2RlIGNvbnZlcnRzIHN0cmluZ3Mgd2l0aCBsZW5ndGggPCAyIHRvICcnCiAgICBpZiAoc3RyLmxlbmd0aCA8IDIpIHJldHVybiAnJwogICAgLy8gTm9kZSBhbGxvd3MgZm9yIG5vbi1wYWRkZWQgYmFzZTY0IHN0cmluZ3MgKG1pc3NpbmcgdHJhaWxpbmcgPT09KSwgYmFzZTY0LWpzIGRvZXMgbm90CiAgICB3aGlsZSAoc3RyLmxlbmd0aCAlIDQgIT09IDApIHsKICAgICAgc3RyID0gc3RyICsgJz0nOwogICAgfQogICAgcmV0dXJuIHN0cgogIH0KCiAgZnVuY3Rpb24gdXRmOFRvQnl0ZXMgKHN0cmluZywgdW5pdHMpIHsKICAgIHVuaXRzID0gdW5pdHMgfHwgSW5maW5pdHk7CiAgICBsZXQgY29kZVBvaW50OwogICAgY29uc3QgbGVuZ3RoID0gc3RyaW5nLmxlbmd0aDsKICAgIGxldCBsZWFkU3Vycm9nYXRlID0gbnVsbDsKICAgIGNvbnN0IGJ5dGVzID0gW107CgogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkgewogICAgICBjb2RlUG9pbnQgPSBzdHJpbmcuY2hhckNvZGVBdChpKTsKCiAgICAgIC8vIGlzIHN1cnJvZ2F0ZSBjb21wb25lbnQKICAgICAgaWYgKGNvZGVQb2ludCA+IDB4RDdGRiAmJiBjb2RlUG9pbnQgPCAweEUwMDApIHsKICAgICAgICAvLyBsYXN0IGNoYXIgd2FzIGEgbGVhZAogICAgICAgIGlmICghbGVhZFN1cnJvZ2F0ZSkgewogICAgICAgICAgLy8gbm8gbGVhZCB5ZXQKICAgICAgICAgIGlmIChjb2RlUG9pbnQgPiAweERCRkYpIHsKICAgICAgICAgICAgLy8gdW5leHBlY3RlZCB0cmFpbAogICAgICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRCk7CiAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICB9IGVsc2UgaWYgKGkgKyAxID09PSBsZW5ndGgpIHsKICAgICAgICAgICAgLy8gdW5wYWlyZWQgbGVhZAogICAgICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRCk7CiAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICB9CgogICAgICAgICAgLy8gdmFsaWQgbGVhZAogICAgICAgICAgbGVhZFN1cnJvZ2F0ZSA9IGNvZGVQb2ludDsKCiAgICAgICAgICBjb250aW51ZQogICAgICAgIH0KCiAgICAgICAgLy8gMiBsZWFkcyBpbiBhIHJvdwogICAgICAgIGlmIChjb2RlUG9pbnQgPCAweERDMDApIHsKICAgICAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKTsKICAgICAgICAgIGxlYWRTdXJyb2dhdGUgPSBjb2RlUG9pbnQ7CiAgICAgICAgICBjb250aW51ZQogICAgICAgIH0KCiAgICAgICAgLy8gdmFsaWQgc3Vycm9nYXRlIHBhaXIKICAgICAgICBjb2RlUG9pbnQgPSAobGVhZFN1cnJvZ2F0ZSAtIDB4RDgwMCA8PCAxMCB8IGNvZGVQb2ludCAtIDB4REMwMCkgKyAweDEwMDAwOwogICAgICB9IGVsc2UgaWYgKGxlYWRTdXJyb2dhdGUpIHsKICAgICAgICAvLyB2YWxpZCBibXAgY2hhciwgYnV0IGxhc3QgY2hhciB3YXMgYSBsZWFkCiAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpOwogICAgICB9CgogICAgICBsZWFkU3Vycm9nYXRlID0gbnVsbDsKCiAgICAgIC8vIGVuY29kZSB1dGY4CiAgICAgIGlmIChjb2RlUG9pbnQgPCAweDgwKSB7CiAgICAgICAgaWYgKCh1bml0cyAtPSAxKSA8IDApIGJyZWFrCiAgICAgICAgYnl0ZXMucHVzaChjb2RlUG9pbnQpOwogICAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4ODAwKSB7CiAgICAgICAgaWYgKCh1bml0cyAtPSAyKSA8IDApIGJyZWFrCiAgICAgICAgYnl0ZXMucHVzaCgKICAgICAgICAgIGNvZGVQb2ludCA+PiAweDYgfCAweEMwLAogICAgICAgICAgY29kZVBvaW50ICYgMHgzRiB8IDB4ODAKICAgICAgICApOwogICAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4MTAwMDApIHsKICAgICAgICBpZiAoKHVuaXRzIC09IDMpIDwgMCkgYnJlYWsKICAgICAgICBieXRlcy5wdXNoKAogICAgICAgICAgY29kZVBvaW50ID4+IDB4QyB8IDB4RTAsCiAgICAgICAgICBjb2RlUG9pbnQgPj4gMHg2ICYgMHgzRiB8IDB4ODAsCiAgICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MAogICAgICAgICk7CiAgICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHgxMTAwMDApIHsKICAgICAgICBpZiAoKHVuaXRzIC09IDQpIDwgMCkgYnJlYWsKICAgICAgICBieXRlcy5wdXNoKAogICAgICAgICAgY29kZVBvaW50ID4+IDB4MTIgfCAweEYwLAogICAgICAgICAgY29kZVBvaW50ID4+IDB4QyAmIDB4M0YgfCAweDgwLAogICAgICAgICAgY29kZVBvaW50ID4+IDB4NiAmIDB4M0YgfCAweDgwLAogICAgICAgICAgY29kZVBvaW50ICYgMHgzRiB8IDB4ODAKICAgICAgICApOwogICAgICB9IGVsc2UgewogICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBjb2RlIHBvaW50JykKICAgICAgfQogICAgfQoKICAgIHJldHVybiBieXRlcwogIH0KCiAgZnVuY3Rpb24gYXNjaWlUb0J5dGVzIChzdHIpIHsKICAgIGNvbnN0IGJ5dGVBcnJheSA9IFtdOwogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyArK2kpIHsKICAgICAgLy8gTm9kZSdzIGNvZGUgc2VlbXMgdG8gYmUgZG9pbmcgdGhpcyBhbmQgbm90ICYgMHg3Ri4uCiAgICAgIGJ5dGVBcnJheS5wdXNoKHN0ci5jaGFyQ29kZUF0KGkpICYgMHhGRik7CiAgICB9CiAgICByZXR1cm4gYnl0ZUFycmF5CiAgfQoKICBmdW5jdGlvbiB1dGYxNmxlVG9CeXRlcyAoc3RyLCB1bml0cykgewogICAgbGV0IGMsIGhpLCBsbzsKICAgIGNvbnN0IGJ5dGVBcnJheSA9IFtdOwogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyArK2kpIHsKICAgICAgaWYgKCh1bml0cyAtPSAyKSA8IDApIGJyZWFrCgogICAgICBjID0gc3RyLmNoYXJDb2RlQXQoaSk7CiAgICAgIGhpID0gYyA+PiA4OwogICAgICBsbyA9IGMgJSAyNTY7CiAgICAgIGJ5dGVBcnJheS5wdXNoKGxvKTsKICAgICAgYnl0ZUFycmF5LnB1c2goaGkpOwogICAgfQoKICAgIHJldHVybiBieXRlQXJyYXkKICB9CgogIGZ1bmN0aW9uIGJhc2U2NFRvQnl0ZXMgKHN0cikgewogICAgcmV0dXJuIGJhc2U2NC50b0J5dGVBcnJheShiYXNlNjRjbGVhbihzdHIpKQogIH0KCiAgZnVuY3Rpb24gYmxpdEJ1ZmZlciAoc3JjLCBkc3QsIG9mZnNldCwgbGVuZ3RoKSB7CiAgICBsZXQgaTsKICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkgewogICAgICBpZiAoKGkgKyBvZmZzZXQgPj0gZHN0Lmxlbmd0aCkgfHwgKGkgPj0gc3JjLmxlbmd0aCkpIGJyZWFrCiAgICAgIGRzdFtpICsgb2Zmc2V0XSA9IHNyY1tpXTsKICAgIH0KICAgIHJldHVybiBpCiAgfQoKICAvLyBBcnJheUJ1ZmZlciBvciBVaW50OEFycmF5IG9iamVjdHMgZnJvbSBvdGhlciBjb250ZXh0cyAoaS5lLiBpZnJhbWVzKSBkbyBub3QgcGFzcwogIC8vIHRoZSBgaW5zdGFuY2VvZmAgY2hlY2sgYnV0IHRoZXkgc2hvdWxkIGJlIHRyZWF0ZWQgYXMgb2YgdGhhdCB0eXBlLgogIC8vIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXIvaXNzdWVzLzE2NgogIGZ1bmN0aW9uIGlzSW5zdGFuY2UgKG9iaiwgdHlwZSkgewogICAgcmV0dXJuIG9iaiBpbnN0YW5jZW9mIHR5cGUgfHwKICAgICAgKG9iaiAhPSBudWxsICYmIG9iai5jb25zdHJ1Y3RvciAhPSBudWxsICYmIG9iai5jb25zdHJ1Y3Rvci5uYW1lICE9IG51bGwgJiYKICAgICAgICBvYmouY29uc3RydWN0b3IubmFtZSA9PT0gdHlwZS5uYW1lKQogIH0KICBmdW5jdGlvbiBudW1iZXJJc05hTiAob2JqKSB7CiAgICAvLyBGb3IgSUUxMSBzdXBwb3J0CiAgICByZXR1cm4gb2JqICE9PSBvYmogLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1zZWxmLWNvbXBhcmUKICB9CgogIC8vIENyZWF0ZSBsb29rdXAgdGFibGUgZm9yIGB0b1N0cmluZygnaGV4JylgCiAgLy8gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlci9pc3N1ZXMvMjE5CiAgY29uc3QgaGV4U2xpY2VMb29rdXBUYWJsZSA9IChmdW5jdGlvbiAoKSB7CiAgICBjb25zdCBhbHBoYWJldCA9ICcwMTIzNDU2Nzg5YWJjZGVmJzsKICAgIGNvbnN0IHRhYmxlID0gbmV3IEFycmF5KDI1Nik7CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDE2OyArK2kpIHsKICAgICAgY29uc3QgaTE2ID0gaSAqIDE2OwogICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDE2OyArK2opIHsKICAgICAgICB0YWJsZVtpMTYgKyBqXSA9IGFscGhhYmV0W2ldICsgYWxwaGFiZXRbal07CiAgICAgIH0KICAgIH0KICAgIHJldHVybiB0YWJsZQogIH0pKCk7CgogIC8vIFJldHVybiBub3QgZnVuY3Rpb24gd2l0aCBFcnJvciBpZiBCaWdJbnQgbm90IHN1cHBvcnRlZAogIGZ1bmN0aW9uIGRlZmluZUJpZ0ludE1ldGhvZCAoZm4pIHsKICAgIHJldHVybiB0eXBlb2YgQmlnSW50ID09PSAndW5kZWZpbmVkJyA/IEJ1ZmZlckJpZ0ludE5vdERlZmluZWQgOiBmbgogIH0KCiAgZnVuY3Rpb24gQnVmZmVyQmlnSW50Tm90RGVmaW5lZCAoKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ0JpZ0ludCBub3Qgc3VwcG9ydGVkJykKICB9CiAgfShidWZmZXIkMikpOwoKICBmdW5jdGlvbiBhc3NlcnRQYXRoKHBhdGgpIHsKICAgIGlmICh0eXBlb2YgcGF0aCAhPT0gJ3N0cmluZycpIHsKICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignUGF0aCBtdXN0IGJlIGEgc3RyaW5nLiBSZWNlaXZlZCAnICsgSlNPTi5zdHJpbmdpZnkocGF0aCkpOwogICAgfQogIH0KCiAgLy8gUmVzb2x2ZXMgLiBhbmQgLi4gZWxlbWVudHMgaW4gYSBwYXRoIHdpdGggZGlyZWN0b3J5IG5hbWVzCiAgZnVuY3Rpb24gbm9ybWFsaXplU3RyaW5nUG9zaXgocGF0aCwgYWxsb3dBYm92ZVJvb3QpIHsKICAgIHZhciByZXMgPSAnJzsKICAgIHZhciBsYXN0U2VnbWVudExlbmd0aCA9IDA7CiAgICB2YXIgbGFzdFNsYXNoID0gLTE7CiAgICB2YXIgZG90cyA9IDA7CiAgICB2YXIgY29kZTsKICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IHBhdGgubGVuZ3RoOyArK2kpIHsKICAgICAgaWYgKGkgPCBwYXRoLmxlbmd0aCkKICAgICAgICBjb2RlID0gcGF0aC5jaGFyQ29kZUF0KGkpOwogICAgICBlbHNlIGlmIChjb2RlID09PSA0NyAvKi8qLykKICAgICAgICBicmVhazsKICAgICAgZWxzZQogICAgICAgIGNvZGUgPSA0NyAvKi8qLzsKICAgICAgaWYgKGNvZGUgPT09IDQ3IC8qLyovKSB7CiAgICAgICAgaWYgKGxhc3RTbGFzaCA9PT0gaSAtIDEgfHwgZG90cyA9PT0gMSkgOyBlbHNlIGlmIChsYXN0U2xhc2ggIT09IGkgLSAxICYmIGRvdHMgPT09IDIpIHsKICAgICAgICAgIGlmIChyZXMubGVuZ3RoIDwgMiB8fCBsYXN0U2VnbWVudExlbmd0aCAhPT0gMiB8fCByZXMuY2hhckNvZGVBdChyZXMubGVuZ3RoIC0gMSkgIT09IDQ2IC8qLiovIHx8IHJlcy5jaGFyQ29kZUF0KHJlcy5sZW5ndGggLSAyKSAhPT0gNDYgLyouKi8pIHsKICAgICAgICAgICAgaWYgKHJlcy5sZW5ndGggPiAyKSB7CiAgICAgICAgICAgICAgdmFyIGxhc3RTbGFzaEluZGV4ID0gcmVzLmxhc3RJbmRleE9mKCcvJyk7CiAgICAgICAgICAgICAgaWYgKGxhc3RTbGFzaEluZGV4ICE9PSByZXMubGVuZ3RoIC0gMSkgewogICAgICAgICAgICAgICAgaWYgKGxhc3RTbGFzaEluZGV4ID09PSAtMSkgewogICAgICAgICAgICAgICAgICByZXMgPSAnJzsKICAgICAgICAgICAgICAgICAgbGFzdFNlZ21lbnRMZW5ndGggPSAwOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgcmVzID0gcmVzLnNsaWNlKDAsIGxhc3RTbGFzaEluZGV4KTsKICAgICAgICAgICAgICAgICAgbGFzdFNlZ21lbnRMZW5ndGggPSByZXMubGVuZ3RoIC0gMSAtIHJlcy5sYXN0SW5kZXhPZignLycpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgbGFzdFNsYXNoID0gaTsKICAgICAgICAgICAgICAgIGRvdHMgPSAwOwogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgaWYgKHJlcy5sZW5ndGggPT09IDIgfHwgcmVzLmxlbmd0aCA9PT0gMSkgewogICAgICAgICAgICAgIHJlcyA9ICcnOwogICAgICAgICAgICAgIGxhc3RTZWdtZW50TGVuZ3RoID0gMDsKICAgICAgICAgICAgICBsYXN0U2xhc2ggPSBpOwogICAgICAgICAgICAgIGRvdHMgPSAwOwogICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoYWxsb3dBYm92ZVJvb3QpIHsKICAgICAgICAgICAgaWYgKHJlcy5sZW5ndGggPiAwKQogICAgICAgICAgICAgIHJlcyArPSAnLy4uJzsKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgIHJlcyA9ICcuLic7CiAgICAgICAgICAgIGxhc3RTZWdtZW50TGVuZ3RoID0gMjsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKHJlcy5sZW5ndGggPiAwKQogICAgICAgICAgICByZXMgKz0gJy8nICsgcGF0aC5zbGljZShsYXN0U2xhc2ggKyAxLCBpKTsKICAgICAgICAgIGVsc2UKICAgICAgICAgICAgcmVzID0gcGF0aC5zbGljZShsYXN0U2xhc2ggKyAxLCBpKTsKICAgICAgICAgIGxhc3RTZWdtZW50TGVuZ3RoID0gaSAtIGxhc3RTbGFzaCAtIDE7CiAgICAgICAgfQogICAgICAgIGxhc3RTbGFzaCA9IGk7CiAgICAgICAgZG90cyA9IDA7CiAgICAgIH0gZWxzZSBpZiAoY29kZSA9PT0gNDYgLyouKi8gJiYgZG90cyAhPT0gLTEpIHsKICAgICAgICArK2RvdHM7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZG90cyA9IC0xOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gcmVzOwogIH0KCiAgZnVuY3Rpb24gX2Zvcm1hdChzZXAsIHBhdGhPYmplY3QpIHsKICAgIHZhciBkaXIgPSBwYXRoT2JqZWN0LmRpciB8fCBwYXRoT2JqZWN0LnJvb3Q7CiAgICB2YXIgYmFzZSA9IHBhdGhPYmplY3QuYmFzZSB8fCAocGF0aE9iamVjdC5uYW1lIHx8ICcnKSArIChwYXRoT2JqZWN0LmV4dCB8fCAnJyk7CiAgICBpZiAoIWRpcikgewogICAgICByZXR1cm4gYmFzZTsKICAgIH0KICAgIGlmIChkaXIgPT09IHBhdGhPYmplY3Qucm9vdCkgewogICAgICByZXR1cm4gZGlyICsgYmFzZTsKICAgIH0KICAgIHJldHVybiBkaXIgKyBzZXAgKyBiYXNlOwogIH0KCiAgdmFyIHBvc2l4ID0gewogICAgLy8gcGF0aC5yZXNvbHZlKFtmcm9tIC4uLl0sIHRvKQogICAgcmVzb2x2ZTogZnVuY3Rpb24gcmVzb2x2ZSgpIHsKICAgICAgdmFyIHJlc29sdmVkUGF0aCA9ICcnOwogICAgICB2YXIgcmVzb2x2ZWRBYnNvbHV0ZSA9IGZhbHNlOwogICAgICB2YXIgY3dkOwoKICAgICAgZm9yICh2YXIgaSA9IGFyZ3VtZW50cy5sZW5ndGggLSAxOyBpID49IC0xICYmICFyZXNvbHZlZEFic29sdXRlOyBpLS0pIHsKICAgICAgICB2YXIgcGF0aDsKICAgICAgICBpZiAoaSA+PSAwKQogICAgICAgICAgcGF0aCA9IGFyZ3VtZW50c1tpXTsKICAgICAgICBlbHNlIHsKICAgICAgICAgIGlmIChjd2QgPT09IHVuZGVmaW5lZCkKICAgICAgICAgICAgY3dkID0gcHJvY2Vzcy5jd2QoKTsKICAgICAgICAgIHBhdGggPSBjd2Q7CiAgICAgICAgfQoKICAgICAgICBhc3NlcnRQYXRoKHBhdGgpOwoKICAgICAgICAvLyBTa2lwIGVtcHR5IGVudHJpZXMKICAgICAgICBpZiAocGF0aC5sZW5ndGggPT09IDApIHsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0KCiAgICAgICAgcmVzb2x2ZWRQYXRoID0gcGF0aCArICcvJyArIHJlc29sdmVkUGF0aDsKICAgICAgICByZXNvbHZlZEFic29sdXRlID0gcGF0aC5jaGFyQ29kZUF0KDApID09PSA0NyAvKi8qLzsKICAgICAgfQoKICAgICAgLy8gQXQgdGhpcyBwb2ludCB0aGUgcGF0aCBzaG91bGQgYmUgcmVzb2x2ZWQgdG8gYSBmdWxsIGFic29sdXRlIHBhdGgsIGJ1dAogICAgICAvLyBoYW5kbGUgcmVsYXRpdmUgcGF0aHMgdG8gYmUgc2FmZSAobWlnaHQgaGFwcGVuIHdoZW4gcHJvY2Vzcy5jd2QoKSBmYWlscykKCiAgICAgIC8vIE5vcm1hbGl6ZSB0aGUgcGF0aAogICAgICByZXNvbHZlZFBhdGggPSBub3JtYWxpemVTdHJpbmdQb3NpeChyZXNvbHZlZFBhdGgsICFyZXNvbHZlZEFic29sdXRlKTsKCiAgICAgIGlmIChyZXNvbHZlZEFic29sdXRlKSB7CiAgICAgICAgaWYgKHJlc29sdmVkUGF0aC5sZW5ndGggPiAwKQogICAgICAgICAgcmV0dXJuICcvJyArIHJlc29sdmVkUGF0aDsKICAgICAgICBlbHNlCiAgICAgICAgICByZXR1cm4gJy8nOwogICAgICB9IGVsc2UgaWYgKHJlc29sdmVkUGF0aC5sZW5ndGggPiAwKSB7CiAgICAgICAgcmV0dXJuIHJlc29sdmVkUGF0aDsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gJy4nOwogICAgICB9CiAgICB9LAoKICAgIG5vcm1hbGl6ZTogZnVuY3Rpb24gbm9ybWFsaXplKHBhdGgpIHsKICAgICAgYXNzZXJ0UGF0aChwYXRoKTsKCiAgICAgIGlmIChwYXRoLmxlbmd0aCA9PT0gMCkgcmV0dXJuICcuJzsKCiAgICAgIHZhciBpc0Fic29sdXRlID0gcGF0aC5jaGFyQ29kZUF0KDApID09PSA0NyAvKi8qLzsKICAgICAgdmFyIHRyYWlsaW5nU2VwYXJhdG9yID0gcGF0aC5jaGFyQ29kZUF0KHBhdGgubGVuZ3RoIC0gMSkgPT09IDQ3IC8qLyovOwoKICAgICAgLy8gTm9ybWFsaXplIHRoZSBwYXRoCiAgICAgIHBhdGggPSBub3JtYWxpemVTdHJpbmdQb3NpeChwYXRoLCAhaXNBYnNvbHV0ZSk7CgogICAgICBpZiAocGF0aC5sZW5ndGggPT09IDAgJiYgIWlzQWJzb2x1dGUpIHBhdGggPSAnLic7CiAgICAgIGlmIChwYXRoLmxlbmd0aCA+IDAgJiYgdHJhaWxpbmdTZXBhcmF0b3IpIHBhdGggKz0gJy8nOwoKICAgICAgaWYgKGlzQWJzb2x1dGUpIHJldHVybiAnLycgKyBwYXRoOwogICAgICByZXR1cm4gcGF0aDsKICAgIH0sCgogICAgaXNBYnNvbHV0ZTogZnVuY3Rpb24gaXNBYnNvbHV0ZShwYXRoKSB7CiAgICAgIGFzc2VydFBhdGgocGF0aCk7CiAgICAgIHJldHVybiBwYXRoLmxlbmd0aCA+IDAgJiYgcGF0aC5jaGFyQ29kZUF0KDApID09PSA0NyAvKi8qLzsKICAgIH0sCgogICAgam9pbjogZnVuY3Rpb24gam9pbigpIHsKICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApCiAgICAgICAgcmV0dXJuICcuJzsKICAgICAgdmFyIGpvaW5lZDsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyArK2kpIHsKICAgICAgICB2YXIgYXJnID0gYXJndW1lbnRzW2ldOwogICAgICAgIGFzc2VydFBhdGgoYXJnKTsKICAgICAgICBpZiAoYXJnLmxlbmd0aCA+IDApIHsKICAgICAgICAgIGlmIChqb2luZWQgPT09IHVuZGVmaW5lZCkKICAgICAgICAgICAgam9pbmVkID0gYXJnOwogICAgICAgICAgZWxzZQogICAgICAgICAgICBqb2luZWQgKz0gJy8nICsgYXJnOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoam9pbmVkID09PSB1bmRlZmluZWQpCiAgICAgICAgcmV0dXJuICcuJzsKICAgICAgcmV0dXJuIHBvc2l4Lm5vcm1hbGl6ZShqb2luZWQpOwogICAgfSwKCiAgICByZWxhdGl2ZTogZnVuY3Rpb24gcmVsYXRpdmUoZnJvbSwgdG8pIHsKICAgICAgYXNzZXJ0UGF0aChmcm9tKTsKICAgICAgYXNzZXJ0UGF0aCh0byk7CgogICAgICBpZiAoZnJvbSA9PT0gdG8pIHJldHVybiAnJzsKCiAgICAgIGZyb20gPSBwb3NpeC5yZXNvbHZlKGZyb20pOwogICAgICB0byA9IHBvc2l4LnJlc29sdmUodG8pOwoKICAgICAgaWYgKGZyb20gPT09IHRvKSByZXR1cm4gJyc7CgogICAgICAvLyBUcmltIGFueSBsZWFkaW5nIGJhY2tzbGFzaGVzCiAgICAgIHZhciBmcm9tU3RhcnQgPSAxOwogICAgICBmb3IgKDsgZnJvbVN0YXJ0IDwgZnJvbS5sZW5ndGg7ICsrZnJvbVN0YXJ0KSB7CiAgICAgICAgaWYgKGZyb20uY2hhckNvZGVBdChmcm9tU3RhcnQpICE9PSA0NyAvKi8qLykKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIHZhciBmcm9tRW5kID0gZnJvbS5sZW5ndGg7CiAgICAgIHZhciBmcm9tTGVuID0gZnJvbUVuZCAtIGZyb21TdGFydDsKCiAgICAgIC8vIFRyaW0gYW55IGxlYWRpbmcgYmFja3NsYXNoZXMKICAgICAgdmFyIHRvU3RhcnQgPSAxOwogICAgICBmb3IgKDsgdG9TdGFydCA8IHRvLmxlbmd0aDsgKyt0b1N0YXJ0KSB7CiAgICAgICAgaWYgKHRvLmNoYXJDb2RlQXQodG9TdGFydCkgIT09IDQ3IC8qLyovKQogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgdmFyIHRvRW5kID0gdG8ubGVuZ3RoOwogICAgICB2YXIgdG9MZW4gPSB0b0VuZCAtIHRvU3RhcnQ7CgogICAgICAvLyBDb21wYXJlIHBhdGhzIHRvIGZpbmQgdGhlIGxvbmdlc3QgY29tbW9uIHBhdGggZnJvbSByb290CiAgICAgIHZhciBsZW5ndGggPSBmcm9tTGVuIDwgdG9MZW4gPyBmcm9tTGVuIDogdG9MZW47CiAgICAgIHZhciBsYXN0Q29tbW9uU2VwID0gLTE7CiAgICAgIHZhciBpID0gMDsKICAgICAgZm9yICg7IGkgPD0gbGVuZ3RoOyArK2kpIHsKICAgICAgICBpZiAoaSA9PT0gbGVuZ3RoKSB7CiAgICAgICAgICBpZiAodG9MZW4gPiBsZW5ndGgpIHsKICAgICAgICAgICAgaWYgKHRvLmNoYXJDb2RlQXQodG9TdGFydCArIGkpID09PSA0NyAvKi8qLykgewogICAgICAgICAgICAgIC8vIFdlIGdldCBoZXJlIGlmIGBmcm9tYCBpcyB0aGUgZXhhY3QgYmFzZSBwYXRoIGZvciBgdG9gLgogICAgICAgICAgICAgIC8vIEZvciBleGFtcGxlOiBmcm9tPScvZm9vL2Jhcic7IHRvPScvZm9vL2Jhci9iYXonCiAgICAgICAgICAgICAgcmV0dXJuIHRvLnNsaWNlKHRvU3RhcnQgKyBpICsgMSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoaSA9PT0gMCkgewogICAgICAgICAgICAgIC8vIFdlIGdldCBoZXJlIGlmIGBmcm9tYCBpcyB0aGUgcm9vdAogICAgICAgICAgICAgIC8vIEZvciBleGFtcGxlOiBmcm9tPScvJzsgdG89Jy9mb28nCiAgICAgICAgICAgICAgcmV0dXJuIHRvLnNsaWNlKHRvU3RhcnQgKyBpKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIGlmIChmcm9tTGVuID4gbGVuZ3RoKSB7CiAgICAgICAgICAgIGlmIChmcm9tLmNoYXJDb2RlQXQoZnJvbVN0YXJ0ICsgaSkgPT09IDQ3IC8qLyovKSB7CiAgICAgICAgICAgICAgLy8gV2UgZ2V0IGhlcmUgaWYgYHRvYCBpcyB0aGUgZXhhY3QgYmFzZSBwYXRoIGZvciBgZnJvbWAuCiAgICAgICAgICAgICAgLy8gRm9yIGV4YW1wbGU6IGZyb209Jy9mb28vYmFyL2Jheic7IHRvPScvZm9vL2JhcicKICAgICAgICAgICAgICBsYXN0Q29tbW9uU2VwID0gaTsKICAgICAgICAgICAgfSBlbHNlIGlmIChpID09PSAwKSB7CiAgICAgICAgICAgICAgLy8gV2UgZ2V0IGhlcmUgaWYgYHRvYCBpcyB0aGUgcm9vdC4KICAgICAgICAgICAgICAvLyBGb3IgZXhhbXBsZTogZnJvbT0nL2Zvbyc7IHRvPScvJwogICAgICAgICAgICAgIGxhc3RDb21tb25TZXAgPSAwOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgICAgdmFyIGZyb21Db2RlID0gZnJvbS5jaGFyQ29kZUF0KGZyb21TdGFydCArIGkpOwogICAgICAgIHZhciB0b0NvZGUgPSB0by5jaGFyQ29kZUF0KHRvU3RhcnQgKyBpKTsKICAgICAgICBpZiAoZnJvbUNvZGUgIT09IHRvQ29kZSkKICAgICAgICAgIGJyZWFrOwogICAgICAgIGVsc2UgaWYgKGZyb21Db2RlID09PSA0NyAvKi8qLykKICAgICAgICAgIGxhc3RDb21tb25TZXAgPSBpOwogICAgICB9CgogICAgICB2YXIgb3V0ID0gJyc7CiAgICAgIC8vIEdlbmVyYXRlIHRoZSByZWxhdGl2ZSBwYXRoIGJhc2VkIG9uIHRoZSBwYXRoIGRpZmZlcmVuY2UgYmV0d2VlbiBgdG9gCiAgICAgIC8vIGFuZCBgZnJvbWAKICAgICAgZm9yIChpID0gZnJvbVN0YXJ0ICsgbGFzdENvbW1vblNlcCArIDE7IGkgPD0gZnJvbUVuZDsgKytpKSB7CiAgICAgICAgaWYgKGkgPT09IGZyb21FbmQgfHwgZnJvbS5jaGFyQ29kZUF0KGkpID09PSA0NyAvKi8qLykgewogICAgICAgICAgaWYgKG91dC5sZW5ndGggPT09IDApCiAgICAgICAgICAgIG91dCArPSAnLi4nOwogICAgICAgICAgZWxzZQogICAgICAgICAgICBvdXQgKz0gJy8uLic7CiAgICAgICAgfQogICAgICB9CgogICAgICAvLyBMYXN0bHksIGFwcGVuZCB0aGUgcmVzdCBvZiB0aGUgZGVzdGluYXRpb24gKGB0b2ApIHBhdGggdGhhdCBjb21lcyBhZnRlcgogICAgICAvLyB0aGUgY29tbW9uIHBhdGggcGFydHMKICAgICAgaWYgKG91dC5sZW5ndGggPiAwKQogICAgICAgIHJldHVybiBvdXQgKyB0by5zbGljZSh0b1N0YXJ0ICsgbGFzdENvbW1vblNlcCk7CiAgICAgIGVsc2UgewogICAgICAgIHRvU3RhcnQgKz0gbGFzdENvbW1vblNlcDsKICAgICAgICBpZiAodG8uY2hhckNvZGVBdCh0b1N0YXJ0KSA9PT0gNDcgLyovKi8pCiAgICAgICAgICArK3RvU3RhcnQ7CiAgICAgICAgcmV0dXJuIHRvLnNsaWNlKHRvU3RhcnQpOwogICAgICB9CiAgICB9LAoKICAgIF9tYWtlTG9uZzogZnVuY3Rpb24gX21ha2VMb25nKHBhdGgpIHsKICAgICAgcmV0dXJuIHBhdGg7CiAgICB9LAoKICAgIGRpcm5hbWU6IGZ1bmN0aW9uIGRpcm5hbWUocGF0aCkgewogICAgICBhc3NlcnRQYXRoKHBhdGgpOwogICAgICBpZiAocGF0aC5sZW5ndGggPT09IDApIHJldHVybiAnLic7CiAgICAgIHZhciBjb2RlID0gcGF0aC5jaGFyQ29kZUF0KDApOwogICAgICB2YXIgaGFzUm9vdCA9IGNvZGUgPT09IDQ3IC8qLyovOwogICAgICB2YXIgZW5kID0gLTE7CiAgICAgIHZhciBtYXRjaGVkU2xhc2ggPSB0cnVlOwogICAgICBmb3IgKHZhciBpID0gcGF0aC5sZW5ndGggLSAxOyBpID49IDE7IC0taSkgewogICAgICAgIGNvZGUgPSBwYXRoLmNoYXJDb2RlQXQoaSk7CiAgICAgICAgaWYgKGNvZGUgPT09IDQ3IC8qLyovKSB7CiAgICAgICAgICAgIGlmICghbWF0Y2hlZFNsYXNoKSB7CiAgICAgICAgICAgICAgZW5kID0gaTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIFdlIHNhdyB0aGUgZmlyc3Qgbm9uLXBhdGggc2VwYXJhdG9yCiAgICAgICAgICBtYXRjaGVkU2xhc2ggPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChlbmQgPT09IC0xKSByZXR1cm4gaGFzUm9vdCA/ICcvJyA6ICcuJzsKICAgICAgaWYgKGhhc1Jvb3QgJiYgZW5kID09PSAxKSByZXR1cm4gJy8vJzsKICAgICAgcmV0dXJuIHBhdGguc2xpY2UoMCwgZW5kKTsKICAgIH0sCgogICAgYmFzZW5hbWU6IGZ1bmN0aW9uIGJhc2VuYW1lKHBhdGgsIGV4dCkgewogICAgICBpZiAoZXh0ICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIGV4dCAhPT0gJ3N0cmluZycpIHRocm93IG5ldyBUeXBlRXJyb3IoJyJleHQiIGFyZ3VtZW50IG11c3QgYmUgYSBzdHJpbmcnKTsKICAgICAgYXNzZXJ0UGF0aChwYXRoKTsKCiAgICAgIHZhciBzdGFydCA9IDA7CiAgICAgIHZhciBlbmQgPSAtMTsKICAgICAgdmFyIG1hdGNoZWRTbGFzaCA9IHRydWU7CiAgICAgIHZhciBpOwoKICAgICAgaWYgKGV4dCAhPT0gdW5kZWZpbmVkICYmIGV4dC5sZW5ndGggPiAwICYmIGV4dC5sZW5ndGggPD0gcGF0aC5sZW5ndGgpIHsKICAgICAgICBpZiAoZXh0Lmxlbmd0aCA9PT0gcGF0aC5sZW5ndGggJiYgZXh0ID09PSBwYXRoKSByZXR1cm4gJyc7CiAgICAgICAgdmFyIGV4dElkeCA9IGV4dC5sZW5ndGggLSAxOwogICAgICAgIHZhciBmaXJzdE5vblNsYXNoRW5kID0gLTE7CiAgICAgICAgZm9yIChpID0gcGF0aC5sZW5ndGggLSAxOyBpID49IDA7IC0taSkgewogICAgICAgICAgdmFyIGNvZGUgPSBwYXRoLmNoYXJDb2RlQXQoaSk7CiAgICAgICAgICBpZiAoY29kZSA9PT0gNDcgLyovKi8pIHsKICAgICAgICAgICAgICAvLyBJZiB3ZSByZWFjaGVkIGEgcGF0aCBzZXBhcmF0b3IgdGhhdCB3YXMgbm90IHBhcnQgb2YgYSBzZXQgb2YgcGF0aAogICAgICAgICAgICAgIC8vIHNlcGFyYXRvcnMgYXQgdGhlIGVuZCBvZiB0aGUgc3RyaW5nLCBzdG9wIG5vdwogICAgICAgICAgICAgIGlmICghbWF0Y2hlZFNsYXNoKSB7CiAgICAgICAgICAgICAgICBzdGFydCA9IGkgKyAxOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAoZmlyc3ROb25TbGFzaEVuZCA9PT0gLTEpIHsKICAgICAgICAgICAgICAvLyBXZSBzYXcgdGhlIGZpcnN0IG5vbi1wYXRoIHNlcGFyYXRvciwgcmVtZW1iZXIgdGhpcyBpbmRleCBpbiBjYXNlCiAgICAgICAgICAgICAgLy8gd2UgbmVlZCBpdCBpZiB0aGUgZXh0ZW5zaW9uIGVuZHMgdXAgbm90IG1hdGNoaW5nCiAgICAgICAgICAgICAgbWF0Y2hlZFNsYXNoID0gZmFsc2U7CiAgICAgICAgICAgICAgZmlyc3ROb25TbGFzaEVuZCA9IGkgKyAxOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChleHRJZHggPj0gMCkgewogICAgICAgICAgICAgIC8vIFRyeSB0byBtYXRjaCB0aGUgZXhwbGljaXQgZXh0ZW5zaW9uCiAgICAgICAgICAgICAgaWYgKGNvZGUgPT09IGV4dC5jaGFyQ29kZUF0KGV4dElkeCkpIHsKICAgICAgICAgICAgICAgIGlmICgtLWV4dElkeCA9PT0gLTEpIHsKICAgICAgICAgICAgICAgICAgLy8gV2UgbWF0Y2hlZCB0aGUgZXh0ZW5zaW9uLCBzbyBtYXJrIHRoaXMgYXMgdGhlIGVuZCBvZiBvdXIgcGF0aAogICAgICAgICAgICAgICAgICAvLyBjb21wb25lbnQKICAgICAgICAgICAgICAgICAgZW5kID0gaTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgLy8gRXh0ZW5zaW9uIGRvZXMgbm90IG1hdGNoLCBzbyBvdXIgcmVzdWx0IGlzIHRoZSBlbnRpcmUgcGF0aAogICAgICAgICAgICAgICAgLy8gY29tcG9uZW50CiAgICAgICAgICAgICAgICBleHRJZHggPSAtMTsKICAgICAgICAgICAgICAgIGVuZCA9IGZpcnN0Tm9uU2xhc2hFbmQ7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoc3RhcnQgPT09IGVuZCkgZW5kID0gZmlyc3ROb25TbGFzaEVuZDtlbHNlIGlmIChlbmQgPT09IC0xKSBlbmQgPSBwYXRoLmxlbmd0aDsKICAgICAgICByZXR1cm4gcGF0aC5zbGljZShzdGFydCwgZW5kKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBmb3IgKGkgPSBwYXRoLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7CiAgICAgICAgICBpZiAocGF0aC5jaGFyQ29kZUF0KGkpID09PSA0NyAvKi8qLykgewogICAgICAgICAgICAgIC8vIElmIHdlIHJlYWNoZWQgYSBwYXRoIHNlcGFyYXRvciB0aGF0IHdhcyBub3QgcGFydCBvZiBhIHNldCBvZiBwYXRoCiAgICAgICAgICAgICAgLy8gc2VwYXJhdG9ycyBhdCB0aGUgZW5kIG9mIHRoZSBzdHJpbmcsIHN0b3Agbm93CiAgICAgICAgICAgICAgaWYgKCFtYXRjaGVkU2xhc2gpIHsKICAgICAgICAgICAgICAgIHN0YXJ0ID0gaSArIDE7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSBpZiAoZW5kID09PSAtMSkgewogICAgICAgICAgICAvLyBXZSBzYXcgdGhlIGZpcnN0IG5vbi1wYXRoIHNlcGFyYXRvciwgbWFyayB0aGlzIGFzIHRoZSBlbmQgb2Ygb3VyCiAgICAgICAgICAgIC8vIHBhdGggY29tcG9uZW50CiAgICAgICAgICAgIG1hdGNoZWRTbGFzaCA9IGZhbHNlOwogICAgICAgICAgICBlbmQgPSBpICsgMTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChlbmQgPT09IC0xKSByZXR1cm4gJyc7CiAgICAgICAgcmV0dXJuIHBhdGguc2xpY2Uoc3RhcnQsIGVuZCk7CiAgICAgIH0KICAgIH0sCgogICAgZXh0bmFtZTogZnVuY3Rpb24gZXh0bmFtZShwYXRoKSB7CiAgICAgIGFzc2VydFBhdGgocGF0aCk7CiAgICAgIHZhciBzdGFydERvdCA9IC0xOwogICAgICB2YXIgc3RhcnRQYXJ0ID0gMDsKICAgICAgdmFyIGVuZCA9IC0xOwogICAgICB2YXIgbWF0Y2hlZFNsYXNoID0gdHJ1ZTsKICAgICAgLy8gVHJhY2sgdGhlIHN0YXRlIG9mIGNoYXJhY3RlcnMgKGlmIGFueSkgd2Ugc2VlIGJlZm9yZSBvdXIgZmlyc3QgZG90IGFuZAogICAgICAvLyBhZnRlciBhbnkgcGF0aCBzZXBhcmF0b3Igd2UgZmluZAogICAgICB2YXIgcHJlRG90U3RhdGUgPSAwOwogICAgICBmb3IgKHZhciBpID0gcGF0aC5sZW5ndGggLSAxOyBpID49IDA7IC0taSkgewogICAgICAgIHZhciBjb2RlID0gcGF0aC5jaGFyQ29kZUF0KGkpOwogICAgICAgIGlmIChjb2RlID09PSA0NyAvKi8qLykgewogICAgICAgICAgICAvLyBJZiB3ZSByZWFjaGVkIGEgcGF0aCBzZXBhcmF0b3IgdGhhdCB3YXMgbm90IHBhcnQgb2YgYSBzZXQgb2YgcGF0aAogICAgICAgICAgICAvLyBzZXBhcmF0b3JzIGF0IHRoZSBlbmQgb2YgdGhlIHN0cmluZywgc3RvcCBub3cKICAgICAgICAgICAgaWYgKCFtYXRjaGVkU2xhc2gpIHsKICAgICAgICAgICAgICBzdGFydFBhcnQgPSBpICsgMTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0KICAgICAgICBpZiAoZW5kID09PSAtMSkgewogICAgICAgICAgLy8gV2Ugc2F3IHRoZSBmaXJzdCBub24tcGF0aCBzZXBhcmF0b3IsIG1hcmsgdGhpcyBhcyB0aGUgZW5kIG9mIG91cgogICAgICAgICAgLy8gZXh0ZW5zaW9uCiAgICAgICAgICBtYXRjaGVkU2xhc2ggPSBmYWxzZTsKICAgICAgICAgIGVuZCA9IGkgKyAxOwogICAgICAgIH0KICAgICAgICBpZiAoY29kZSA9PT0gNDYgLyouKi8pIHsKICAgICAgICAgICAgLy8gSWYgdGhpcyBpcyBvdXIgZmlyc3QgZG90LCBtYXJrIGl0IGFzIHRoZSBzdGFydCBvZiBvdXIgZXh0ZW5zaW9uCiAgICAgICAgICAgIGlmIChzdGFydERvdCA9PT0gLTEpCiAgICAgICAgICAgICAgc3RhcnREb3QgPSBpOwogICAgICAgICAgICBlbHNlIGlmIChwcmVEb3RTdGF0ZSAhPT0gMSkKICAgICAgICAgICAgICBwcmVEb3RTdGF0ZSA9IDE7CiAgICAgICAgfSBlbHNlIGlmIChzdGFydERvdCAhPT0gLTEpIHsKICAgICAgICAgIC8vIFdlIHNhdyBhIG5vbi1kb3QgYW5kIG5vbi1wYXRoIHNlcGFyYXRvciBiZWZvcmUgb3VyIGRvdCwgc28gd2Ugc2hvdWxkCiAgICAgICAgICAvLyBoYXZlIGEgZ29vZCBjaGFuY2UgYXQgaGF2aW5nIGEgbm9uLWVtcHR5IGV4dGVuc2lvbgogICAgICAgICAgcHJlRG90U3RhdGUgPSAtMTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChzdGFydERvdCA9PT0gLTEgfHwgZW5kID09PSAtMSB8fAogICAgICAgICAgLy8gV2Ugc2F3IGEgbm9uLWRvdCBjaGFyYWN0ZXIgaW1tZWRpYXRlbHkgYmVmb3JlIHRoZSBkb3QKICAgICAgICAgIHByZURvdFN0YXRlID09PSAwIHx8CiAgICAgICAgICAvLyBUaGUgKHJpZ2h0LW1vc3QpIHRyaW1tZWQgcGF0aCBjb21wb25lbnQgaXMgZXhhY3RseSAnLi4nCiAgICAgICAgICBwcmVEb3RTdGF0ZSA9PT0gMSAmJiBzdGFydERvdCA9PT0gZW5kIC0gMSAmJiBzdGFydERvdCA9PT0gc3RhcnRQYXJ0ICsgMSkgewogICAgICAgIHJldHVybiAnJzsKICAgICAgfQogICAgICByZXR1cm4gcGF0aC5zbGljZShzdGFydERvdCwgZW5kKTsKICAgIH0sCgogICAgZm9ybWF0OiBmdW5jdGlvbiBmb3JtYXQocGF0aE9iamVjdCkgewogICAgICBpZiAocGF0aE9iamVjdCA9PT0gbnVsbCB8fCB0eXBlb2YgcGF0aE9iamVjdCAhPT0gJ29iamVjdCcpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgInBhdGhPYmplY3QiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBPYmplY3QuIFJlY2VpdmVkIHR5cGUgJyArIHR5cGVvZiBwYXRoT2JqZWN0KTsKICAgICAgfQogICAgICByZXR1cm4gX2Zvcm1hdCgnLycsIHBhdGhPYmplY3QpOwogICAgfSwKCiAgICBwYXJzZTogZnVuY3Rpb24gcGFyc2UocGF0aCkgewogICAgICBhc3NlcnRQYXRoKHBhdGgpOwoKICAgICAgdmFyIHJldCA9IHsgcm9vdDogJycsIGRpcjogJycsIGJhc2U6ICcnLCBleHQ6ICcnLCBuYW1lOiAnJyB9OwogICAgICBpZiAocGF0aC5sZW5ndGggPT09IDApIHJldHVybiByZXQ7CiAgICAgIHZhciBjb2RlID0gcGF0aC5jaGFyQ29kZUF0KDApOwogICAgICB2YXIgaXNBYnNvbHV0ZSA9IGNvZGUgPT09IDQ3IC8qLyovOwogICAgICB2YXIgc3RhcnQ7CiAgICAgIGlmIChpc0Fic29sdXRlKSB7CiAgICAgICAgcmV0LnJvb3QgPSAnLyc7CiAgICAgICAgc3RhcnQgPSAxOwogICAgICB9IGVsc2UgewogICAgICAgIHN0YXJ0ID0gMDsKICAgICAgfQogICAgICB2YXIgc3RhcnREb3QgPSAtMTsKICAgICAgdmFyIHN0YXJ0UGFydCA9IDA7CiAgICAgIHZhciBlbmQgPSAtMTsKICAgICAgdmFyIG1hdGNoZWRTbGFzaCA9IHRydWU7CiAgICAgIHZhciBpID0gcGF0aC5sZW5ndGggLSAxOwoKICAgICAgLy8gVHJhY2sgdGhlIHN0YXRlIG9mIGNoYXJhY3RlcnMgKGlmIGFueSkgd2Ugc2VlIGJlZm9yZSBvdXIgZmlyc3QgZG90IGFuZAogICAgICAvLyBhZnRlciBhbnkgcGF0aCBzZXBhcmF0b3Igd2UgZmluZAogICAgICB2YXIgcHJlRG90U3RhdGUgPSAwOwoKICAgICAgLy8gR2V0IG5vbi1kaXIgaW5mbwogICAgICBmb3IgKDsgaSA+PSBzdGFydDsgLS1pKSB7CiAgICAgICAgY29kZSA9IHBhdGguY2hhckNvZGVBdChpKTsKICAgICAgICBpZiAoY29kZSA9PT0gNDcgLyovKi8pIHsKICAgICAgICAgICAgLy8gSWYgd2UgcmVhY2hlZCBhIHBhdGggc2VwYXJhdG9yIHRoYXQgd2FzIG5vdCBwYXJ0IG9mIGEgc2V0IG9mIHBhdGgKICAgICAgICAgICAgLy8gc2VwYXJhdG9ycyBhdCB0aGUgZW5kIG9mIHRoZSBzdHJpbmcsIHN0b3Agbm93CiAgICAgICAgICAgIGlmICghbWF0Y2hlZFNsYXNoKSB7CiAgICAgICAgICAgICAgc3RhcnRQYXJ0ID0gaSArIDE7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CiAgICAgICAgaWYgKGVuZCA9PT0gLTEpIHsKICAgICAgICAgIC8vIFdlIHNhdyB0aGUgZmlyc3Qgbm9uLXBhdGggc2VwYXJhdG9yLCBtYXJrIHRoaXMgYXMgdGhlIGVuZCBvZiBvdXIKICAgICAgICAgIC8vIGV4dGVuc2lvbgogICAgICAgICAgbWF0Y2hlZFNsYXNoID0gZmFsc2U7CiAgICAgICAgICBlbmQgPSBpICsgMTsKICAgICAgICB9CiAgICAgICAgaWYgKGNvZGUgPT09IDQ2IC8qLiovKSB7CiAgICAgICAgICAgIC8vIElmIHRoaXMgaXMgb3VyIGZpcnN0IGRvdCwgbWFyayBpdCBhcyB0aGUgc3RhcnQgb2Ygb3VyIGV4dGVuc2lvbgogICAgICAgICAgICBpZiAoc3RhcnREb3QgPT09IC0xKSBzdGFydERvdCA9IGk7ZWxzZSBpZiAocHJlRG90U3RhdGUgIT09IDEpIHByZURvdFN0YXRlID0gMTsKICAgICAgICAgIH0gZWxzZSBpZiAoc3RhcnREb3QgIT09IC0xKSB7CiAgICAgICAgICAvLyBXZSBzYXcgYSBub24tZG90IGFuZCBub24tcGF0aCBzZXBhcmF0b3IgYmVmb3JlIG91ciBkb3QsIHNvIHdlIHNob3VsZAogICAgICAgICAgLy8gaGF2ZSBhIGdvb2QgY2hhbmNlIGF0IGhhdmluZyBhIG5vbi1lbXB0eSBleHRlbnNpb24KICAgICAgICAgIHByZURvdFN0YXRlID0gLTE7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoc3RhcnREb3QgPT09IC0xIHx8IGVuZCA9PT0gLTEgfHwKICAgICAgLy8gV2Ugc2F3IGEgbm9uLWRvdCBjaGFyYWN0ZXIgaW1tZWRpYXRlbHkgYmVmb3JlIHRoZSBkb3QKICAgICAgcHJlRG90U3RhdGUgPT09IDAgfHwKICAgICAgLy8gVGhlIChyaWdodC1tb3N0KSB0cmltbWVkIHBhdGggY29tcG9uZW50IGlzIGV4YWN0bHkgJy4uJwogICAgICBwcmVEb3RTdGF0ZSA9PT0gMSAmJiBzdGFydERvdCA9PT0gZW5kIC0gMSAmJiBzdGFydERvdCA9PT0gc3RhcnRQYXJ0ICsgMSkgewogICAgICAgIGlmIChlbmQgIT09IC0xKSB7CiAgICAgICAgICBpZiAoc3RhcnRQYXJ0ID09PSAwICYmIGlzQWJzb2x1dGUpIHJldC5iYXNlID0gcmV0Lm5hbWUgPSBwYXRoLnNsaWNlKDEsIGVuZCk7ZWxzZSByZXQuYmFzZSA9IHJldC5uYW1lID0gcGF0aC5zbGljZShzdGFydFBhcnQsIGVuZCk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGlmIChzdGFydFBhcnQgPT09IDAgJiYgaXNBYnNvbHV0ZSkgewogICAgICAgICAgcmV0Lm5hbWUgPSBwYXRoLnNsaWNlKDEsIHN0YXJ0RG90KTsKICAgICAgICAgIHJldC5iYXNlID0gcGF0aC5zbGljZSgxLCBlbmQpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXQubmFtZSA9IHBhdGguc2xpY2Uoc3RhcnRQYXJ0LCBzdGFydERvdCk7CiAgICAgICAgICByZXQuYmFzZSA9IHBhdGguc2xpY2Uoc3RhcnRQYXJ0LCBlbmQpOwogICAgICAgIH0KICAgICAgICByZXQuZXh0ID0gcGF0aC5zbGljZShzdGFydERvdCwgZW5kKTsKICAgICAgfQoKICAgICAgaWYgKHN0YXJ0UGFydCA+IDApIHJldC5kaXIgPSBwYXRoLnNsaWNlKDAsIHN0YXJ0UGFydCAtIDEpO2Vsc2UgaWYgKGlzQWJzb2x1dGUpIHJldC5kaXIgPSAnLyc7CgogICAgICByZXR1cm4gcmV0OwogICAgfSwKCiAgICBzZXA6ICcvJywKICAgIGRlbGltaXRlcjogJzonLAogICAgd2luMzI6IG51bGwsCiAgICBwb3NpeDogbnVsbAogIH07CgogIHBvc2l4LnBvc2l4ID0gcG9zaXg7CgogIHZhciBwYXRoQnJvd3NlcmlmeSA9IHBvc2l4OwoKICB2YXIgcGF0aCA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKC8qI19fUFVSRV9fKi9fbWVyZ2VOYW1lc3BhY2VzJDEoewogICAgICBfX3Byb3RvX186IG51bGwsCiAgICAgICdkZWZhdWx0JzogcGF0aEJyb3dzZXJpZnkKICB9LCBbcGF0aEJyb3dzZXJpZnldKSk7CgogIHZhciByYW5kb21maWxsID0ge2V4cG9ydHM6IHt9fTsKCiAgdmFyIGNyeXB0byQ3ID0ge307CgogIHZhciByYW5kb21ieXRlcyQxID0gY3J5cHRvJDcucmFuZG9tQnl0ZXM7CgogIHZhciBjcmVhdGVIYXNoJDMgPSBjcnlwdG8kNy5jcmVhdGVIYXNoOwoKICB2YXIgY3JlYXRlSG1hYyQxID0gY3J5cHRvJDcuY3JlYXRlSG1hYzsKCiAgdmFyIHNoYTIyNFdpdGhSU0FFbmNyeXB0aW9uID0gewogIAlzaWduOiAicnNhIiwKICAJaGFzaDogInNoYTIyNCIsCiAgCWlkOiAiMzAyZDMwMGQwNjA5NjA4NjQ4MDE2NTAzMDQwMjA0MDUwMDA0MWMiCiAgfTsKICB2YXIgc2hhMjU2V2l0aFJTQUVuY3J5cHRpb24gPSB7CiAgCXNpZ246ICJyc2EiLAogIAloYXNoOiAic2hhMjU2IiwKICAJaWQ6ICIzMDMxMzAwZDA2MDk2MDg2NDgwMTY1MDMwNDAyMDEwNTAwMDQyMCIKICB9OwogIHZhciBzaGEzODRXaXRoUlNBRW5jcnlwdGlvbiA9IHsKICAJc2lnbjogInJzYSIsCiAgCWhhc2g6ICJzaGEzODQiLAogIAlpZDogIjMwNDEzMDBkMDYwOTYwODY0ODAxNjUwMzA0MDIwMjA1MDAwNDMwIgogIH07CiAgdmFyIHNoYTUxMldpdGhSU0FFbmNyeXB0aW9uID0gewogIAlzaWduOiAicnNhIiwKICAJaGFzaDogInNoYTUxMiIsCiAgCWlkOiAiMzA1MTMwMGQwNjA5NjA4NjQ4MDE2NTAzMDQwMjAzMDUwMDA0NDAiCiAgfTsKICB2YXIgc2hhMjU2ID0gewogIAlzaWduOiAiZWNkc2EiLAogIAloYXNoOiAic2hhMjU2IiwKICAJaWQ6ICIiCiAgfTsKICB2YXIgc2hhMjI0ID0gewogIAlzaWduOiAiZWNkc2EiLAogIAloYXNoOiAic2hhMjI0IiwKICAJaWQ6ICIiCiAgfTsKICB2YXIgc2hhMzg0ID0gewogIAlzaWduOiAiZWNkc2EiLAogIAloYXNoOiAic2hhMzg0IiwKICAJaWQ6ICIiCiAgfTsKICB2YXIgc2hhNTEyID0gewogIAlzaWduOiAiZWNkc2EiLAogIAloYXNoOiAic2hhNTEyIiwKICAJaWQ6ICIiCiAgfTsKICB2YXIgRFNBID0gewogIAlzaWduOiAiZHNhIiwKICAJaGFzaDogInNoYTEiLAogIAlpZDogIiIKICB9OwogIHZhciByaXBlbWQxNjBXaXRoUlNBID0gewogIAlzaWduOiAicnNhIiwKICAJaGFzaDogInJtZDE2MCIsCiAgCWlkOiAiMzAyMTMwMDkwNjA1MmIyNDAzMDIwMTA1MDAwNDE0IgogIH07CiAgdmFyIG1kNVdpdGhSU0FFbmNyeXB0aW9uID0gewogIAlzaWduOiAicnNhIiwKICAJaGFzaDogIm1kNSIsCiAgCWlkOiAiMzAyMDMwMGMwNjA4MmE4NjQ4ODZmNzBkMDIwNTA1MDAwNDEwIgogIH07CiAgdmFyIHJlcXVpcmUkJDAkMSA9IHsKICAJc2hhMjI0V2l0aFJTQUVuY3J5cHRpb246IHNoYTIyNFdpdGhSU0FFbmNyeXB0aW9uLAogIAkiUlNBLVNIQTIyNCI6IHsKICAJc2lnbjogImVjZHNhL3JzYSIsCiAgCWhhc2g6ICJzaGEyMjQiLAogIAlpZDogIjMwMmQzMDBkMDYwOTYwODY0ODAxNjUwMzA0MDIwNDA1MDAwNDFjIgogIH0sCiAgCXNoYTI1NldpdGhSU0FFbmNyeXB0aW9uOiBzaGEyNTZXaXRoUlNBRW5jcnlwdGlvbiwKICAJIlJTQS1TSEEyNTYiOiB7CiAgCXNpZ246ICJlY2RzYS9yc2EiLAogIAloYXNoOiAic2hhMjU2IiwKICAJaWQ6ICIzMDMxMzAwZDA2MDk2MDg2NDgwMTY1MDMwNDAyMDEwNTAwMDQyMCIKICB9LAogIAlzaGEzODRXaXRoUlNBRW5jcnlwdGlvbjogc2hhMzg0V2l0aFJTQUVuY3J5cHRpb24sCiAgCSJSU0EtU0hBMzg0IjogewogIAlzaWduOiAiZWNkc2EvcnNhIiwKICAJaGFzaDogInNoYTM4NCIsCiAgCWlkOiAiMzA0MTMwMGQwNjA5NjA4NjQ4MDE2NTAzMDQwMjAyMDUwMDA0MzAiCiAgfSwKICAJc2hhNTEyV2l0aFJTQUVuY3J5cHRpb246IHNoYTUxMldpdGhSU0FFbmNyeXB0aW9uLAogIAkiUlNBLVNIQTUxMiI6IHsKICAJc2lnbjogImVjZHNhL3JzYSIsCiAgCWhhc2g6ICJzaGE1MTIiLAogIAlpZDogIjMwNTEzMDBkMDYwOTYwODY0ODAxNjUwMzA0MDIwMzA1MDAwNDQwIgogIH0sCiAgCSJSU0EtU0hBMSI6IHsKICAJc2lnbjogInJzYSIsCiAgCWhhc2g6ICJzaGExIiwKICAJaWQ6ICIzMDIxMzAwOTA2MDUyYjBlMDMwMjFhMDUwMDA0MTQiCiAgfSwKICAJImVjZHNhLXdpdGgtU0hBMSI6IHsKICAJc2lnbjogImVjZHNhIiwKICAJaGFzaDogInNoYTEiLAogIAlpZDogIiIKICB9LAogIAlzaGEyNTY6IHNoYTI1NiwKICAJc2hhMjI0OiBzaGEyMjQsCiAgCXNoYTM4NDogc2hhMzg0LAogIAlzaGE1MTI6IHNoYTUxMiwKICAJIkRTQS1TSEEiOiB7CiAgCXNpZ246ICJkc2EiLAogIAloYXNoOiAic2hhMSIsCiAgCWlkOiAiIgogIH0sCiAgCSJEU0EtU0hBMSI6IHsKICAJc2lnbjogImRzYSIsCiAgCWhhc2g6ICJzaGExIiwKICAJaWQ6ICIiCiAgfSwKICAJRFNBOiBEU0EsCiAgCSJEU0EtV0lUSC1TSEEyMjQiOiB7CiAgCXNpZ246ICJkc2EiLAogIAloYXNoOiAic2hhMjI0IiwKICAJaWQ6ICIiCiAgfSwKICAJIkRTQS1TSEEyMjQiOiB7CiAgCXNpZ246ICJkc2EiLAogIAloYXNoOiAic2hhMjI0IiwKICAJaWQ6ICIiCiAgfSwKICAJIkRTQS1XSVRILVNIQTI1NiI6IHsKICAJc2lnbjogImRzYSIsCiAgCWhhc2g6ICJzaGEyNTYiLAogIAlpZDogIiIKICB9LAogIAkiRFNBLVNIQTI1NiI6IHsKICAJc2lnbjogImRzYSIsCiAgCWhhc2g6ICJzaGEyNTYiLAogIAlpZDogIiIKICB9LAogIAkiRFNBLVdJVEgtU0hBMzg0IjogewogIAlzaWduOiAiZHNhIiwKICAJaGFzaDogInNoYTM4NCIsCiAgCWlkOiAiIgogIH0sCiAgCSJEU0EtU0hBMzg0IjogewogIAlzaWduOiAiZHNhIiwKICAJaGFzaDogInNoYTM4NCIsCiAgCWlkOiAiIgogIH0sCiAgCSJEU0EtV0lUSC1TSEE1MTIiOiB7CiAgCXNpZ246ICJkc2EiLAogIAloYXNoOiAic2hhNTEyIiwKICAJaWQ6ICIiCiAgfSwKICAJIkRTQS1TSEE1MTIiOiB7CiAgCXNpZ246ICJkc2EiLAogIAloYXNoOiAic2hhNTEyIiwKICAJaWQ6ICIiCiAgfSwKICAJIkRTQS1SSVBFTUQxNjAiOiB7CiAgCXNpZ246ICJkc2EiLAogIAloYXNoOiAicm1kMTYwIiwKICAJaWQ6ICIiCiAgfSwKICAJcmlwZW1kMTYwV2l0aFJTQTogcmlwZW1kMTYwV2l0aFJTQSwKICAJIlJTQS1SSVBFTUQxNjAiOiB7CiAgCXNpZ246ICJyc2EiLAogIAloYXNoOiAicm1kMTYwIiwKICAJaWQ6ICIzMDIxMzAwOTA2MDUyYjI0MDMwMjAxMDUwMDA0MTQiCiAgfSwKICAJbWQ1V2l0aFJTQUVuY3J5cHRpb246IG1kNVdpdGhSU0FFbmNyeXB0aW9uLAogIAkiUlNBLU1ENSI6IHsKICAJc2lnbjogInJzYSIsCiAgCWhhc2g6ICJtZDUiLAogIAlpZDogIjMwMjAzMDBjMDYwODJhODY0ODg2ZjcwZDAyMDUwNTAwMDQxMCIKICB9CiAgfTsKCiAgdmFyIGFsZ29zJDEgPSByZXF1aXJlJCQwJDE7CgogIHZhciBwYmtkZjIkMSA9IHt9OwoKICB2YXIgTUFYX0FMTE9DID0gTWF0aC5wb3coMiwgMzApIC0gMTsgLy8gZGVmYXVsdCBpbiBpb2pzCgogIHZhciBwcmVjb25kaXRpb24gPSBmdW5jdGlvbiAoaXRlcmF0aW9ucywga2V5bGVuKSB7CiAgICBpZiAodHlwZW9mIGl0ZXJhdGlvbnMgIT09ICdudW1iZXInKSB7CiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0l0ZXJhdGlvbnMgbm90IGEgbnVtYmVyJykKICAgIH0KCiAgICBpZiAoaXRlcmF0aW9ucyA8IDApIHsKICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQmFkIGl0ZXJhdGlvbnMnKQogICAgfQoKICAgIGlmICh0eXBlb2Yga2V5bGVuICE9PSAnbnVtYmVyJykgewogICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdLZXkgbGVuZ3RoIG5vdCBhIG51bWJlcicpCiAgICB9CgogICAgaWYgKGtleWxlbiA8IDAgfHwga2V5bGVuID4gTUFYX0FMTE9DIHx8IGtleWxlbiAhPT0ga2V5bGVuKSB7IC8qIGVzbGludCBuby1zZWxmLWNvbXBhcmU6IDAgKi8KICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQmFkIGtleSBsZW5ndGgnKQogICAgfQogIH07CgogIHZhciBkZWZhdWx0RW5jb2RpbmckMzsKICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLwogIGlmIChjb21tb25qc0dsb2JhbC5wcm9jZXNzICYmIGNvbW1vbmpzR2xvYmFsLnByb2Nlc3MuYnJvd3NlcikgewogICAgZGVmYXVsdEVuY29kaW5nJDMgPSAndXRmLTgnOwogIH0gZWxzZSBpZiAoY29tbW9uanNHbG9iYWwucHJvY2VzcyAmJiBjb21tb25qc0dsb2JhbC5wcm9jZXNzLnZlcnNpb24pIHsKICAgIHZhciBwVmVyc2lvbk1ham9yID0gcGFyc2VJbnQocHJvY2Vzcy52ZXJzaW9uLnNwbGl0KCcuJylbMF0uc2xpY2UoMSksIDEwKTsKCiAgICBkZWZhdWx0RW5jb2RpbmckMyA9IHBWZXJzaW9uTWFqb3IgPj0gNiA/ICd1dGYtOCcgOiAnYmluYXJ5JzsKICB9IGVsc2UgewogICAgZGVmYXVsdEVuY29kaW5nJDMgPSAndXRmLTgnOwogIH0KICB2YXIgZGVmYXVsdEVuY29kaW5nXzEgPSBkZWZhdWx0RW5jb2RpbmckMzsKCiAgdmFyIHNhZmVCdWZmZXIkMSA9IHtleHBvcnRzOiB7fX07CgogIC8qIGVzbGludC1kaXNhYmxlIG5vZGUvbm8tZGVwcmVjYXRlZC1hcGkgKi8KCiAgKGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICB2YXIgYnVmZmVyID0gYnVmZmVyJDI7CiAgdmFyIEJ1ZmZlciA9IGJ1ZmZlci5CdWZmZXI7CgogIC8vIGFsdGVybmF0aXZlIHRvIHVzaW5nIE9iamVjdC5rZXlzIGZvciBvbGQgYnJvd3NlcnMKICBmdW5jdGlvbiBjb3B5UHJvcHMgKHNyYywgZHN0KSB7CiAgICBmb3IgKHZhciBrZXkgaW4gc3JjKSB7CiAgICAgIGRzdFtrZXldID0gc3JjW2tleV07CiAgICB9CiAgfQogIGlmIChCdWZmZXIuZnJvbSAmJiBCdWZmZXIuYWxsb2MgJiYgQnVmZmVyLmFsbG9jVW5zYWZlICYmIEJ1ZmZlci5hbGxvY1Vuc2FmZVNsb3cpIHsKICAgIG1vZHVsZS5leHBvcnRzID0gYnVmZmVyOwogIH0gZWxzZSB7CiAgICAvLyBDb3B5IHByb3BlcnRpZXMgZnJvbSByZXF1aXJlKCdidWZmZXInKQogICAgY29weVByb3BzKGJ1ZmZlciwgZXhwb3J0cyk7CiAgICBleHBvcnRzLkJ1ZmZlciA9IFNhZmVCdWZmZXI7CiAgfQoKICBmdW5jdGlvbiBTYWZlQnVmZmVyIChhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkgewogICAgcmV0dXJuIEJ1ZmZlcihhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkKICB9CgogIFNhZmVCdWZmZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShCdWZmZXIucHJvdG90eXBlKTsKCiAgLy8gQ29weSBzdGF0aWMgbWV0aG9kcyBmcm9tIEJ1ZmZlcgogIGNvcHlQcm9wcyhCdWZmZXIsIFNhZmVCdWZmZXIpOwoKICBTYWZlQnVmZmVyLmZyb20gPSBmdW5jdGlvbiAoYXJnLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHsKICAgIGlmICh0eXBlb2YgYXJnID09PSAnbnVtYmVyJykgewogICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudCBtdXN0IG5vdCBiZSBhIG51bWJlcicpCiAgICB9CiAgICByZXR1cm4gQnVmZmVyKGFyZywgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKQogIH07CgogIFNhZmVCdWZmZXIuYWxsb2MgPSBmdW5jdGlvbiAoc2l6ZSwgZmlsbCwgZW5jb2RpbmcpIHsKICAgIGlmICh0eXBlb2Ygc2l6ZSAhPT0gJ251bWJlcicpIHsKICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBiZSBhIG51bWJlcicpCiAgICB9CiAgICB2YXIgYnVmID0gQnVmZmVyKHNpemUpOwogICAgaWYgKGZpbGwgIT09IHVuZGVmaW5lZCkgewogICAgICBpZiAodHlwZW9mIGVuY29kaW5nID09PSAnc3RyaW5nJykgewogICAgICAgIGJ1Zi5maWxsKGZpbGwsIGVuY29kaW5nKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBidWYuZmlsbChmaWxsKTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgYnVmLmZpbGwoMCk7CiAgICB9CiAgICByZXR1cm4gYnVmCiAgfTsKCiAgU2FmZUJ1ZmZlci5hbGxvY1Vuc2FmZSA9IGZ1bmN0aW9uIChzaXplKSB7CiAgICBpZiAodHlwZW9mIHNpemUgIT09ICdudW1iZXInKSB7CiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBudW1iZXInKQogICAgfQogICAgcmV0dXJuIEJ1ZmZlcihzaXplKQogIH07CgogIFNhZmVCdWZmZXIuYWxsb2NVbnNhZmVTbG93ID0gZnVuY3Rpb24gKHNpemUpIHsKICAgIGlmICh0eXBlb2Ygc2l6ZSAhPT0gJ251bWJlcicpIHsKICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBiZSBhIG51bWJlcicpCiAgICB9CiAgICByZXR1cm4gYnVmZmVyLlNsb3dCdWZmZXIoc2l6ZSkKICB9OwogIH0oc2FmZUJ1ZmZlciQxLCBzYWZlQnVmZmVyJDEuZXhwb3J0cykpOwoKICB2YXIgQnVmZmVyJGwgPSBzYWZlQnVmZmVyJDEuZXhwb3J0cy5CdWZmZXI7CgogIHZhciB0b0J1ZmZlciQzID0gZnVuY3Rpb24gKHRoaW5nLCBlbmNvZGluZywgbmFtZSkgewogICAgaWYgKEJ1ZmZlciRsLmlzQnVmZmVyKHRoaW5nKSkgewogICAgICByZXR1cm4gdGhpbmcKICAgIH0gZWxzZSBpZiAodHlwZW9mIHRoaW5nID09PSAnc3RyaW5nJykgewogICAgICByZXR1cm4gQnVmZmVyJGwuZnJvbSh0aGluZywgZW5jb2RpbmcpCiAgICB9IGVsc2UgaWYgKEFycmF5QnVmZmVyLmlzVmlldyh0aGluZykpIHsKICAgICAgcmV0dXJuIEJ1ZmZlciRsLmZyb20odGhpbmcuYnVmZmVyKQogICAgfSBlbHNlIHsKICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihuYW1lICsgJyBtdXN0IGJlIGEgc3RyaW5nLCBhIEJ1ZmZlciwgYSB0eXBlZCBhcnJheSBvciBhIERhdGFWaWV3JykKICAgIH0KICB9OwoKICB2YXIgc2l6ZXMgPSB7CiAgICBtZDU6IDE2LAogICAgc2hhMTogMjAsCiAgICBzaGEyMjQ6IDI4LAogICAgc2hhMjU2OiAzMiwKICAgIHNoYTM4NDogNDgsCiAgICBzaGE1MTI6IDY0LAogICAgcm1kMTYwOiAyMCwKICAgIHJpcGVtZDE2MDogMjAKICB9OwoKICB2YXIgY3JlYXRlSG1hYyA9IGNyZWF0ZUhtYWMkMTsKICB2YXIgQnVmZmVyJGsgPSBzYWZlQnVmZmVyJDEuZXhwb3J0cy5CdWZmZXI7CgogIHZhciBjaGVja1BhcmFtZXRlcnMkMiA9IHByZWNvbmRpdGlvbjsKICB2YXIgZGVmYXVsdEVuY29kaW5nJDIgPSBkZWZhdWx0RW5jb2RpbmdfMTsKICB2YXIgdG9CdWZmZXIkMiA9IHRvQnVmZmVyJDM7CgogIGZ1bmN0aW9uIHBia2RmMiAocGFzc3dvcmQsIHNhbHQsIGl0ZXJhdGlvbnMsIGtleWxlbiwgZGlnZXN0KSB7CiAgICBjaGVja1BhcmFtZXRlcnMkMihpdGVyYXRpb25zLCBrZXlsZW4pOwogICAgcGFzc3dvcmQgPSB0b0J1ZmZlciQyKHBhc3N3b3JkLCBkZWZhdWx0RW5jb2RpbmckMiwgJ1Bhc3N3b3JkJyk7CiAgICBzYWx0ID0gdG9CdWZmZXIkMihzYWx0LCBkZWZhdWx0RW5jb2RpbmckMiwgJ1NhbHQnKTsKCiAgICBkaWdlc3QgPSBkaWdlc3QgfHwgJ3NoYTEnOwoKICAgIHZhciBESyA9IEJ1ZmZlciRrLmFsbG9jVW5zYWZlKGtleWxlbik7CiAgICB2YXIgYmxvY2sxID0gQnVmZmVyJGsuYWxsb2NVbnNhZmUoc2FsdC5sZW5ndGggKyA0KTsKICAgIHNhbHQuY29weShibG9jazEsIDAsIDAsIHNhbHQubGVuZ3RoKTsKCiAgICB2YXIgZGVzdFBvcyA9IDA7CiAgICB2YXIgaExlbiA9IHNpemVzW2RpZ2VzdF07CiAgICB2YXIgbCA9IE1hdGguY2VpbChrZXlsZW4gLyBoTGVuKTsKCiAgICBmb3IgKHZhciBpID0gMTsgaSA8PSBsOyBpKyspIHsKICAgICAgYmxvY2sxLndyaXRlVUludDMyQkUoaSwgc2FsdC5sZW5ndGgpOwoKICAgICAgdmFyIFQgPSBjcmVhdGVIbWFjKGRpZ2VzdCwgcGFzc3dvcmQpLnVwZGF0ZShibG9jazEpLmRpZ2VzdCgpOwogICAgICB2YXIgVSA9IFQ7CgogICAgICBmb3IgKHZhciBqID0gMTsgaiA8IGl0ZXJhdGlvbnM7IGorKykgewogICAgICAgIFUgPSBjcmVhdGVIbWFjKGRpZ2VzdCwgcGFzc3dvcmQpLnVwZGF0ZShVKS5kaWdlc3QoKTsKICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGhMZW47IGsrKykgVFtrXSBePSBVW2tdOwogICAgICB9CgogICAgICBULmNvcHkoREssIGRlc3RQb3MpOwogICAgICBkZXN0UG9zICs9IGhMZW47CiAgICB9CgogICAgcmV0dXJuIERLCiAgfQoKICB2YXIgc3luYyQxID0gcGJrZGYyOwoKICB2YXIgQnVmZmVyJGogPSBzYWZlQnVmZmVyJDEuZXhwb3J0cy5CdWZmZXI7CgogIHZhciBjaGVja1BhcmFtZXRlcnMkMSA9IHByZWNvbmRpdGlvbjsKICB2YXIgZGVmYXVsdEVuY29kaW5nJDEgPSBkZWZhdWx0RW5jb2RpbmdfMTsKICB2YXIgc3luYyA9IHN5bmMkMTsKICB2YXIgdG9CdWZmZXIkMSA9IHRvQnVmZmVyJDM7CgogIHZhciBaRVJPX0JVRjsKICB2YXIgc3VidGxlID0gY29tbW9uanNHbG9iYWwuY3J5cHRvICYmIGNvbW1vbmpzR2xvYmFsLmNyeXB0by5zdWJ0bGU7CiAgdmFyIHRvQnJvd3NlciA9IHsKICAgIHNoYTogJ1NIQS0xJywKICAgICdzaGEtMSc6ICdTSEEtMScsCiAgICBzaGExOiAnU0hBLTEnLAogICAgc2hhMjU2OiAnU0hBLTI1NicsCiAgICAnc2hhLTI1Nic6ICdTSEEtMjU2JywKICAgIHNoYTM4NDogJ1NIQS0zODQnLAogICAgJ3NoYS0zODQnOiAnU0hBLTM4NCcsCiAgICAnc2hhLTUxMic6ICdTSEEtNTEyJywKICAgIHNoYTUxMjogJ1NIQS01MTInCiAgfTsKICB2YXIgY2hlY2tzID0gW107CiAgZnVuY3Rpb24gY2hlY2tOYXRpdmUgKGFsZ28pIHsKICAgIGlmIChjb21tb25qc0dsb2JhbC5wcm9jZXNzICYmICFjb21tb25qc0dsb2JhbC5wcm9jZXNzLmJyb3dzZXIpIHsKICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmYWxzZSkKICAgIH0KICAgIGlmICghc3VidGxlIHx8ICFzdWJ0bGUuaW1wb3J0S2V5IHx8ICFzdWJ0bGUuZGVyaXZlQml0cykgewogICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGZhbHNlKQogICAgfQogICAgaWYgKGNoZWNrc1thbGdvXSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIHJldHVybiBjaGVja3NbYWxnb10KICAgIH0KICAgIFpFUk9fQlVGID0gWkVST19CVUYgfHwgQnVmZmVyJGouYWxsb2MoOCk7CiAgICB2YXIgcHJvbSA9IGJyb3dzZXJQYmtkZjIoWkVST19CVUYsIFpFUk9fQlVGLCAxMCwgMTI4LCBhbGdvKQogICAgICAudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRydWUKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBmYWxzZQogICAgICB9KTsKICAgIGNoZWNrc1thbGdvXSA9IHByb207CiAgICByZXR1cm4gcHJvbQogIH0KICB2YXIgbmV4dFRpY2s7CiAgZnVuY3Rpb24gZ2V0TmV4dFRpY2sgKCkgewogICAgaWYgKG5leHRUaWNrKSB7CiAgICAgIHJldHVybiBuZXh0VGljawogICAgfQogICAgaWYgKGNvbW1vbmpzR2xvYmFsLnByb2Nlc3MgJiYgY29tbW9uanNHbG9iYWwucHJvY2Vzcy5uZXh0VGljaykgewogICAgICBuZXh0VGljayA9IGNvbW1vbmpzR2xvYmFsLnByb2Nlc3MubmV4dFRpY2s7CiAgICB9IGVsc2UgaWYgKGNvbW1vbmpzR2xvYmFsLnF1ZXVlTWljcm90YXNrKSB7CiAgICAgIG5leHRUaWNrID0gY29tbW9uanNHbG9iYWwucXVldWVNaWNyb3Rhc2s7CiAgICB9IGVsc2UgaWYgKGNvbW1vbmpzR2xvYmFsLnNldEltbWVkaWF0ZSkgewogICAgICBuZXh0VGljayA9IGNvbW1vbmpzR2xvYmFsLnNldEltbWVkaWF0ZTsKICAgIH0gZWxzZSB7CiAgICAgIG5leHRUaWNrID0gY29tbW9uanNHbG9iYWwuc2V0VGltZW91dDsKICAgIH0KICAgIHJldHVybiBuZXh0VGljawogIH0KICBmdW5jdGlvbiBicm93c2VyUGJrZGYyIChwYXNzd29yZCwgc2FsdCwgaXRlcmF0aW9ucywgbGVuZ3RoLCBhbGdvKSB7CiAgICByZXR1cm4gc3VidGxlLmltcG9ydEtleSgKICAgICAgJ3JhdycsIHBhc3N3b3JkLCB7IG5hbWU6ICdQQktERjInIH0sIGZhbHNlLCBbJ2Rlcml2ZUJpdHMnXQogICAgKS50aGVuKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgcmV0dXJuIHN1YnRsZS5kZXJpdmVCaXRzKHsKICAgICAgICBuYW1lOiAnUEJLREYyJywKICAgICAgICBzYWx0OiBzYWx0LAogICAgICAgIGl0ZXJhdGlvbnM6IGl0ZXJhdGlvbnMsCiAgICAgICAgaGFzaDogewogICAgICAgICAgbmFtZTogYWxnbwogICAgICAgIH0KICAgICAgfSwga2V5LCBsZW5ndGggPDwgMykKICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICByZXR1cm4gQnVmZmVyJGouZnJvbShyZXMpCiAgICB9KQogIH0KCiAgZnVuY3Rpb24gcmVzb2x2ZVByb21pc2UgKHByb21pc2UsIGNhbGxiYWNrKSB7CiAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKG91dCkgewogICAgICBnZXROZXh0VGljaygpKGZ1bmN0aW9uICgpIHsKICAgICAgICBjYWxsYmFjayhudWxsLCBvdXQpOwogICAgICB9KTsKICAgIH0sIGZ1bmN0aW9uIChlKSB7CiAgICAgIGdldE5leHRUaWNrKCkoZnVuY3Rpb24gKCkgewogICAgICAgIGNhbGxiYWNrKGUpOwogICAgICB9KTsKICAgIH0pOwogIH0KICB2YXIgYXN5bmMgPSBmdW5jdGlvbiAocGFzc3dvcmQsIHNhbHQsIGl0ZXJhdGlvbnMsIGtleWxlbiwgZGlnZXN0LCBjYWxsYmFjaykgewogICAgaWYgKHR5cGVvZiBkaWdlc3QgPT09ICdmdW5jdGlvbicpIHsKICAgICAgY2FsbGJhY2sgPSBkaWdlc3Q7CiAgICAgIGRpZ2VzdCA9IHVuZGVmaW5lZDsKICAgIH0KCiAgICBkaWdlc3QgPSBkaWdlc3QgfHwgJ3NoYTEnOwogICAgdmFyIGFsZ28gPSB0b0Jyb3dzZXJbZGlnZXN0LnRvTG93ZXJDYXNlKCldOwoKICAgIGlmICghYWxnbyB8fCB0eXBlb2YgY29tbW9uanNHbG9iYWwuUHJvbWlzZSAhPT0gJ2Z1bmN0aW9uJykgewogICAgICBnZXROZXh0VGljaygpKGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgb3V0OwogICAgICAgIHRyeSB7CiAgICAgICAgICBvdXQgPSBzeW5jKHBhc3N3b3JkLCBzYWx0LCBpdGVyYXRpb25zLCBrZXlsZW4sIGRpZ2VzdCk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGUpCiAgICAgICAgfQogICAgICAgIGNhbGxiYWNrKG51bGwsIG91dCk7CiAgICAgIH0pOwogICAgICByZXR1cm4KICAgIH0KCiAgICBjaGVja1BhcmFtZXRlcnMkMShpdGVyYXRpb25zLCBrZXlsZW4pOwogICAgcGFzc3dvcmQgPSB0b0J1ZmZlciQxKHBhc3N3b3JkLCBkZWZhdWx0RW5jb2RpbmckMSwgJ1Bhc3N3b3JkJyk7CiAgICBzYWx0ID0gdG9CdWZmZXIkMShzYWx0LCBkZWZhdWx0RW5jb2RpbmckMSwgJ1NhbHQnKTsKICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09ICdmdW5jdGlvbicpIHRocm93IG5ldyBFcnJvcignTm8gY2FsbGJhY2sgcHJvdmlkZWQgdG8gcGJrZGYyJykKCiAgICByZXNvbHZlUHJvbWlzZShjaGVja05hdGl2ZShhbGdvKS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgIGlmIChyZXNwKSByZXR1cm4gYnJvd3NlclBia2RmMihwYXNzd29yZCwgc2FsdCwgaXRlcmF0aW9ucywga2V5bGVuLCBhbGdvKQoKICAgICAgcmV0dXJuIHN5bmMocGFzc3dvcmQsIHNhbHQsIGl0ZXJhdGlvbnMsIGtleWxlbiwgZGlnZXN0KQogICAgfSksIGNhbGxiYWNrKTsKICB9OwoKICB2YXIgbmF0aXZlID0gY3J5cHRvJDc7CgogIHZhciBjaGVja1BhcmFtZXRlcnMgPSBwcmVjb25kaXRpb247CiAgdmFyIGRlZmF1bHRFbmNvZGluZyA9IGRlZmF1bHRFbmNvZGluZ18xOwogIHZhciB0b0J1ZmZlciA9IHRvQnVmZmVyJDM7CgogIGZ1bmN0aW9uIG5hdGl2ZVBCS0RGMiAocGFzc3dvcmQsIHNhbHQsIGl0ZXJhdGlvbnMsIGtleWxlbiwgZGlnZXN0LCBjYWxsYmFjaykgewogICAgY2hlY2tQYXJhbWV0ZXJzKGl0ZXJhdGlvbnMsIGtleWxlbik7CiAgICBwYXNzd29yZCA9IHRvQnVmZmVyKHBhc3N3b3JkLCBkZWZhdWx0RW5jb2RpbmcsICdQYXNzd29yZCcpOwogICAgc2FsdCA9IHRvQnVmZmVyKHNhbHQsIGRlZmF1bHRFbmNvZGluZywgJ1NhbHQnKTsKCiAgICBpZiAodHlwZW9mIGRpZ2VzdCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICBjYWxsYmFjayA9IGRpZ2VzdDsKICAgICAgZGlnZXN0ID0gJ3NoYTEnOwogICAgfQogICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykgdGhyb3cgbmV3IEVycm9yKCdObyBjYWxsYmFjayBwcm92aWRlZCB0byBwYmtkZjInKQoKICAgIHJldHVybiBuYXRpdmUucGJrZGYyKHBhc3N3b3JkLCBzYWx0LCBpdGVyYXRpb25zLCBrZXlsZW4sIGRpZ2VzdCwgY2FsbGJhY2spCiAgfQoKICBmdW5jdGlvbiBuYXRpdmVQQktERjJTeW5jIChwYXNzd29yZCwgc2FsdCwgaXRlcmF0aW9ucywga2V5bGVuLCBkaWdlc3QpIHsKICAgIGNoZWNrUGFyYW1ldGVycyhpdGVyYXRpb25zLCBrZXlsZW4pOwogICAgcGFzc3dvcmQgPSB0b0J1ZmZlcihwYXNzd29yZCwgZGVmYXVsdEVuY29kaW5nLCAnUGFzc3dvcmQnKTsKICAgIHNhbHQgPSB0b0J1ZmZlcihzYWx0LCBkZWZhdWx0RW5jb2RpbmcsICdTYWx0Jyk7CiAgICBkaWdlc3QgPSBkaWdlc3QgfHwgJ3NoYTEnOwogICAgcmV0dXJuIG5hdGl2ZS5wYmtkZjJTeW5jKHBhc3N3b3JkLCBzYWx0LCBpdGVyYXRpb25zLCBrZXlsZW4sIGRpZ2VzdCkKICB9CgogIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCiAgaWYgKCFuYXRpdmUucGJrZGYyU3luYyB8fCBuYXRpdmUucGJrZGYyU3luYy50b1N0cmluZygpLmluZGV4T2YoJ2tleWxlbiwgZGlnZXN0JykgPT09IC0xKSB7CiAgICBwYmtkZjIkMS5wYmtkZjJTeW5jID0gc3luYyQxOwogICAgcGJrZGYyJDEucGJrZGYyID0gYXN5bmM7CgogIC8vIG5hdGl2ZQogIH0gZWxzZSB7CiAgICBwYmtkZjIkMS5wYmtkZjJTeW5jID0gbmF0aXZlUEJLREYyU3luYzsKICAgIHBia2RmMiQxLnBia2RmMiA9IG5hdGl2ZVBCS0RGMjsKICB9CgogIHZhciBicm93c2VyaWZ5Q2lwaGVyID0ge307CgogIHZhciBjcnlwdG8kNiA9IGNyeXB0byQ3OwoKICBicm93c2VyaWZ5Q2lwaGVyLmNyZWF0ZUNpcGhlciA9IGJyb3dzZXJpZnlDaXBoZXIuQ2lwaGVyID0gY3J5cHRvJDYuY3JlYXRlQ2lwaGVyOwogIGJyb3dzZXJpZnlDaXBoZXIuY3JlYXRlQ2lwaGVyaXYgPSBicm93c2VyaWZ5Q2lwaGVyLkNpcGhlcml2ID0gY3J5cHRvJDYuY3JlYXRlQ2lwaGVyaXY7CiAgYnJvd3NlcmlmeUNpcGhlci5jcmVhdGVEZWNpcGhlciA9IGJyb3dzZXJpZnlDaXBoZXIuRGVjaXBoZXIgPSBjcnlwdG8kNi5jcmVhdGVEZWNpcGhlcjsKICBicm93c2VyaWZ5Q2lwaGVyLmNyZWF0ZURlY2lwaGVyaXYgPSBicm93c2VyaWZ5Q2lwaGVyLkRlY2lwaGVyaXYgPSBjcnlwdG8kNi5jcmVhdGVEZWNpcGhlcml2OwogIGJyb3dzZXJpZnlDaXBoZXIubGlzdENpcGhlcnMgPSBicm93c2VyaWZ5Q2lwaGVyLmdldENpcGhlcnMgPSBjcnlwdG8kNi5nZXRDaXBoZXJzOwoKICB2YXIgZGlmZmllSGVsbG1hbiA9IHt9OwoKICB2YXIgY3J5cHRvJDUgPSBjcnlwdG8kNzsKCiAgLy8gZ2V0RGlmZmllSGVsbG1hbgogIGRpZmZpZUhlbGxtYW4uRGlmZmllSGVsbG1hbkdyb3VwID0gY3J5cHRvJDUuRGlmZmllSGVsbG1hbkdyb3VwOwogIGRpZmZpZUhlbGxtYW4uY3JlYXRlRGlmZmllSGVsbG1hbkdyb3VwID0gY3J5cHRvJDUuY3JlYXRlRGlmZmllSGVsbG1hbkdyb3VwOwogIGRpZmZpZUhlbGxtYW4uZ2V0RGlmZmllSGVsbG1hbiA9IGNyeXB0byQ1LmdldERpZmZpZUhlbGxtYW47CgogIC8vIGNyZWF0ZURpZmZpZUhlbGxtYW4KICBkaWZmaWVIZWxsbWFuLmNyZWF0ZURpZmZpZUhlbGxtYW4gPSBjcnlwdG8kNS5jcmVhdGVEaWZmaWVIZWxsbWFuOwogIGRpZmZpZUhlbGxtYW4uRGlmZmllSGVsbG1hbiA9IGNyeXB0byQ1LkRpZmZpZUhlbGxtYW47CgogIHZhciBicm93c2VyaWZ5U2lnbiA9IHt9OwoKICB2YXIgY3J5cHRvJDQgPSBjcnlwdG8kNzsKCiAgYnJvd3NlcmlmeVNpZ24uY3JlYXRlU2lnbiA9IGNyeXB0byQ0LmNyZWF0ZVNpZ247CiAgYnJvd3NlcmlmeVNpZ24uU2lnbiA9IGNyeXB0byQ0LlNpZ247CgogIGJyb3dzZXJpZnlTaWduLmNyZWF0ZVZlcmlmeSA9IGNyeXB0byQ0LmNyZWF0ZVZlcmlmeTsKICBicm93c2VyaWZ5U2lnbi5WZXJpZnkgPSBjcnlwdG8kNC5WZXJpZnk7CgogIHZhciBlbGxpcHRpYyQxID0ge307CgogIHZhciBuYW1lID0gImVsbGlwdGljIjsKICB2YXIgdmVyc2lvbiA9ICI2LjUuNCI7CiAgdmFyIGRlc2NyaXB0aW9uID0gIkVDIGNyeXB0b2dyYXBoeSI7CiAgdmFyIG1haW4gPSAibGliL2VsbGlwdGljLmpzIjsKICB2YXIgZmlsZXMgPSBbCiAgCSJsaWIiCiAgXTsKICB2YXIgc2NyaXB0cyA9IHsKICAJbGludDogImVzbGludCBsaWIgdGVzdCIsCiAgCSJsaW50OmZpeCI6ICJucG0gcnVuIGxpbnQgLS0gLS1maXgiLAogIAl1bml0OiAiaXN0YW5idWwgdGVzdCBfbW9jaGEgLS1yZXBvcnRlcj1zcGVjIHRlc3QvaW5kZXguanMiLAogIAl0ZXN0OiAibnBtIHJ1biBsaW50ICYmIG5wbSBydW4gdW5pdCIsCiAgCXZlcnNpb246ICJncnVudCBkaXN0ICYmIGdpdCBhZGQgZGlzdC8iCiAgfTsKICB2YXIgcmVwb3NpdG9yeSA9IHsKICAJdHlwZTogImdpdCIsCiAgCXVybDogImdpdEBnaXRodWIuY29tOmluZHV0bnkvZWxsaXB0aWMiCiAgfTsKICB2YXIga2V5d29yZHMgPSBbCiAgCSJFQyIsCiAgCSJFbGxpcHRpYyIsCiAgCSJjdXJ2ZSIsCiAgCSJDcnlwdG9ncmFwaHkiCiAgXTsKICB2YXIgYXV0aG9yID0gIkZlZG9yIEluZHV0bnkgPGZlZG9yQGluZHV0bnkuY29tPiI7CiAgdmFyIGxpY2Vuc2UgPSAiTUlUIjsKICB2YXIgYnVncyA9IHsKICAJdXJsOiAiaHR0cHM6Ly9naXRodWIuY29tL2luZHV0bnkvZWxsaXB0aWMvaXNzdWVzIgogIH07CiAgdmFyIGhvbWVwYWdlID0gImh0dHBzOi8vZ2l0aHViLmNvbS9pbmR1dG55L2VsbGlwdGljIjsKICB2YXIgZGV2RGVwZW5kZW5jaWVzID0gewogIAlicmZzOiAiXjIuMC4yIiwKICAJY292ZXJhbGxzOiAiXjMuMS4wIiwKICAJZXNsaW50OiAiXjcuNi4wIiwKICAJZ3J1bnQ6ICJeMS4yLjEiLAogIAkiZ3J1bnQtYnJvd3NlcmlmeSI6ICJeNS4zLjAiLAogIAkiZ3J1bnQtY2xpIjogIl4xLjMuMiIsCiAgCSJncnVudC1jb250cmliLWNvbm5lY3QiOiAiXjMuMC4wIiwKICAJImdydW50LWNvbnRyaWItY29weSI6ICJeMS4wLjAiLAogIAkiZ3J1bnQtY29udHJpYi11Z2xpZnkiOiAiXjUuMC4wIiwKICAJImdydW50LW1vY2hhLWlzdGFuYnVsIjogIl41LjAuMiIsCiAgCSJncnVudC1zYXVjZWxhYnMiOiAiXjkuMC4xIiwKICAJaXN0YW5idWw6ICJeMC40LjUiLAogIAltb2NoYTogIl44LjAuMSIKICB9OwogIHZhciBkZXBlbmRlbmNpZXMgPSB7CiAgCSJibi5qcyI6ICJeNC4xMS45IiwKICAJYnJvcmFuZDogIl4xLjEuMCIsCiAgCSJoYXNoLmpzIjogIl4xLjAuMCIsCiAgCSJobWFjLWRyYmciOiAiXjEuMC4xIiwKICAJaW5oZXJpdHM6ICJeMi4wLjQiLAogIAkibWluaW1hbGlzdGljLWFzc2VydCI6ICJeMS4wLjEiLAogIAkibWluaW1hbGlzdGljLWNyeXB0by11dGlscyI6ICJeMS4wLjEiCiAgfTsKICB2YXIgcmVxdWlyZSQkMCA9IHsKICAJbmFtZTogbmFtZSwKICAJdmVyc2lvbjogdmVyc2lvbiwKICAJZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLAogIAltYWluOiBtYWluLAogIAlmaWxlczogZmlsZXMsCiAgCXNjcmlwdHM6IHNjcmlwdHMsCiAgCXJlcG9zaXRvcnk6IHJlcG9zaXRvcnksCiAgCWtleXdvcmRzOiBrZXl3b3JkcywKICAJYXV0aG9yOiBhdXRob3IsCiAgCWxpY2Vuc2U6IGxpY2Vuc2UsCiAgCWJ1Z3M6IGJ1Z3MsCiAgCWhvbWVwYWdlOiBob21lcGFnZSwKICAJZGV2RGVwZW5kZW5jaWVzOiBkZXZEZXBlbmRlbmNpZXMsCiAgCWRlcGVuZGVuY2llczogZGVwZW5kZW5jaWVzCiAgfTsKCiAgdmFyIHV0aWxzJG0gPSB7fTsKCiAgdmFyIGJuJDQgPSB7ZXhwb3J0czoge319OwoKICAoZnVuY3Rpb24gKG1vZHVsZSkgewogIChmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CgogICAgLy8gVXRpbHMKICAgIGZ1bmN0aW9uIGFzc2VydCAodmFsLCBtc2cpIHsKICAgICAgaWYgKCF2YWwpIHRocm93IG5ldyBFcnJvcihtc2cgfHwgJ0Fzc2VydGlvbiBmYWlsZWQnKTsKICAgIH0KCiAgICAvLyBDb3VsZCB1c2UgYGluaGVyaXRzYCBtb2R1bGUsIGJ1dCBkb24ndCB3YW50IHRvIG1vdmUgZnJvbSBzaW5nbGUgZmlsZQogICAgLy8gYXJjaGl0ZWN0dXJlIHlldC4KICAgIGZ1bmN0aW9uIGluaGVyaXRzIChjdG9yLCBzdXBlckN0b3IpIHsKICAgICAgY3Rvci5zdXBlcl8gPSBzdXBlckN0b3I7CiAgICAgIHZhciBUZW1wQ3RvciA9IGZ1bmN0aW9uICgpIHt9OwogICAgICBUZW1wQ3Rvci5wcm90b3R5cGUgPSBzdXBlckN0b3IucHJvdG90eXBlOwogICAgICBjdG9yLnByb3RvdHlwZSA9IG5ldyBUZW1wQ3RvcigpOwogICAgICBjdG9yLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGN0b3I7CiAgICB9CgogICAgLy8gQk4KCiAgICBmdW5jdGlvbiBCTiAobnVtYmVyLCBiYXNlLCBlbmRpYW4pIHsKICAgICAgaWYgKEJOLmlzQk4obnVtYmVyKSkgewogICAgICAgIHJldHVybiBudW1iZXI7CiAgICAgIH0KCiAgICAgIHRoaXMubmVnYXRpdmUgPSAwOwogICAgICB0aGlzLndvcmRzID0gbnVsbDsKICAgICAgdGhpcy5sZW5ndGggPSAwOwoKICAgICAgLy8gUmVkdWN0aW9uIGNvbnRleHQKICAgICAgdGhpcy5yZWQgPSBudWxsOwoKICAgICAgaWYgKG51bWJlciAhPT0gbnVsbCkgewogICAgICAgIGlmIChiYXNlID09PSAnbGUnIHx8IGJhc2UgPT09ICdiZScpIHsKICAgICAgICAgIGVuZGlhbiA9IGJhc2U7CiAgICAgICAgICBiYXNlID0gMTA7CiAgICAgICAgfQoKICAgICAgICB0aGlzLl9pbml0KG51bWJlciB8fCAwLCBiYXNlIHx8IDEwLCBlbmRpYW4gfHwgJ2JlJyk7CiAgICAgIH0KICAgIH0KICAgIGlmICh0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0JykgewogICAgICBtb2R1bGUuZXhwb3J0cyA9IEJOOwogICAgfSBlbHNlIHsKICAgICAgZXhwb3J0cy5CTiA9IEJOOwogICAgfQoKICAgIEJOLkJOID0gQk47CiAgICBCTi53b3JkU2l6ZSA9IDI2OwoKICAgIHZhciBCdWZmZXI7CiAgICB0cnkgewogICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHdpbmRvdy5CdWZmZXIgIT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgQnVmZmVyID0gd2luZG93LkJ1ZmZlcjsKICAgICAgfSBlbHNlIHsKICAgICAgICBCdWZmZXIgPSByZXF1aXJlKCdidWZmZXInKS5CdWZmZXI7CiAgICAgIH0KICAgIH0gY2F0Y2ggKGUpIHsKICAgIH0KCiAgICBCTi5pc0JOID0gZnVuY3Rpb24gaXNCTiAobnVtKSB7CiAgICAgIGlmIChudW0gaW5zdGFuY2VvZiBCTikgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICByZXR1cm4gbnVtICE9PSBudWxsICYmIHR5cGVvZiBudW0gPT09ICdvYmplY3QnICYmCiAgICAgICAgbnVtLmNvbnN0cnVjdG9yLndvcmRTaXplID09PSBCTi53b3JkU2l6ZSAmJiBBcnJheS5pc0FycmF5KG51bS53b3Jkcyk7CiAgICB9OwoKICAgIEJOLm1heCA9IGZ1bmN0aW9uIG1heCAobGVmdCwgcmlnaHQpIHsKICAgICAgaWYgKGxlZnQuY21wKHJpZ2h0KSA+IDApIHJldHVybiBsZWZ0OwogICAgICByZXR1cm4gcmlnaHQ7CiAgICB9OwoKICAgIEJOLm1pbiA9IGZ1bmN0aW9uIG1pbiAobGVmdCwgcmlnaHQpIHsKICAgICAgaWYgKGxlZnQuY21wKHJpZ2h0KSA8IDApIHJldHVybiBsZWZ0OwogICAgICByZXR1cm4gcmlnaHQ7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5faW5pdCA9IGZ1bmN0aW9uIGluaXQgKG51bWJlciwgYmFzZSwgZW5kaWFuKSB7CiAgICAgIGlmICh0eXBlb2YgbnVtYmVyID09PSAnbnVtYmVyJykgewogICAgICAgIHJldHVybiB0aGlzLl9pbml0TnVtYmVyKG51bWJlciwgYmFzZSwgZW5kaWFuKTsKICAgICAgfQoKICAgICAgaWYgKHR5cGVvZiBudW1iZXIgPT09ICdvYmplY3QnKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuX2luaXRBcnJheShudW1iZXIsIGJhc2UsIGVuZGlhbik7CiAgICAgIH0KCiAgICAgIGlmIChiYXNlID09PSAnaGV4JykgewogICAgICAgIGJhc2UgPSAxNjsKICAgICAgfQogICAgICBhc3NlcnQoYmFzZSA9PT0gKGJhc2UgfCAwKSAmJiBiYXNlID49IDIgJiYgYmFzZSA8PSAzNik7CgogICAgICBudW1iZXIgPSBudW1iZXIudG9TdHJpbmcoKS5yZXBsYWNlKC9ccysvZywgJycpOwogICAgICB2YXIgc3RhcnQgPSAwOwogICAgICBpZiAobnVtYmVyWzBdID09PSAnLScpIHsKICAgICAgICBzdGFydCsrOwogICAgICAgIHRoaXMubmVnYXRpdmUgPSAxOwogICAgICB9CgogICAgICBpZiAoc3RhcnQgPCBudW1iZXIubGVuZ3RoKSB7CiAgICAgICAgaWYgKGJhc2UgPT09IDE2KSB7CiAgICAgICAgICB0aGlzLl9wYXJzZUhleChudW1iZXIsIHN0YXJ0LCBlbmRpYW4pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLl9wYXJzZUJhc2UobnVtYmVyLCBiYXNlLCBzdGFydCk7CiAgICAgICAgICBpZiAoZW5kaWFuID09PSAnbGUnKSB7CiAgICAgICAgICAgIHRoaXMuX2luaXRBcnJheSh0aGlzLnRvQXJyYXkoKSwgYmFzZSwgZW5kaWFuKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH07CgogICAgQk4ucHJvdG90eXBlLl9pbml0TnVtYmVyID0gZnVuY3Rpb24gX2luaXROdW1iZXIgKG51bWJlciwgYmFzZSwgZW5kaWFuKSB7CiAgICAgIGlmIChudW1iZXIgPCAwKSB7CiAgICAgICAgdGhpcy5uZWdhdGl2ZSA9IDE7CiAgICAgICAgbnVtYmVyID0gLW51bWJlcjsKICAgICAgfQogICAgICBpZiAobnVtYmVyIDwgMHg0MDAwMDAwKSB7CiAgICAgICAgdGhpcy53b3JkcyA9IFsgbnVtYmVyICYgMHgzZmZmZmZmIF07CiAgICAgICAgdGhpcy5sZW5ndGggPSAxOwogICAgICB9IGVsc2UgaWYgKG51bWJlciA8IDB4MTAwMDAwMDAwMDAwMDApIHsKICAgICAgICB0aGlzLndvcmRzID0gWwogICAgICAgICAgbnVtYmVyICYgMHgzZmZmZmZmLAogICAgICAgICAgKG51bWJlciAvIDB4NDAwMDAwMCkgJiAweDNmZmZmZmYKICAgICAgICBdOwogICAgICAgIHRoaXMubGVuZ3RoID0gMjsKICAgICAgfSBlbHNlIHsKICAgICAgICBhc3NlcnQobnVtYmVyIDwgMHgyMDAwMDAwMDAwMDAwMCk7IC8vIDIgXiA1MyAodW5zYWZlKQogICAgICAgIHRoaXMud29yZHMgPSBbCiAgICAgICAgICBudW1iZXIgJiAweDNmZmZmZmYsCiAgICAgICAgICAobnVtYmVyIC8gMHg0MDAwMDAwKSAmIDB4M2ZmZmZmZiwKICAgICAgICAgIDEKICAgICAgICBdOwogICAgICAgIHRoaXMubGVuZ3RoID0gMzsKICAgICAgfQoKICAgICAgaWYgKGVuZGlhbiAhPT0gJ2xlJykgcmV0dXJuOwoKICAgICAgLy8gUmV2ZXJzZSB0aGUgYnl0ZXMKICAgICAgdGhpcy5faW5pdEFycmF5KHRoaXMudG9BcnJheSgpLCBiYXNlLCBlbmRpYW4pOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuX2luaXRBcnJheSA9IGZ1bmN0aW9uIF9pbml0QXJyYXkgKG51bWJlciwgYmFzZSwgZW5kaWFuKSB7CiAgICAgIC8vIFBlcmhhcHMgYSBVaW50OEFycmF5CiAgICAgIGFzc2VydCh0eXBlb2YgbnVtYmVyLmxlbmd0aCA9PT0gJ251bWJlcicpOwogICAgICBpZiAobnVtYmVyLmxlbmd0aCA8PSAwKSB7CiAgICAgICAgdGhpcy53b3JkcyA9IFsgMCBdOwogICAgICAgIHRoaXMubGVuZ3RoID0gMTsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfQoKICAgICAgdGhpcy5sZW5ndGggPSBNYXRoLmNlaWwobnVtYmVyLmxlbmd0aCAvIDMpOwogICAgICB0aGlzLndvcmRzID0gbmV3IEFycmF5KHRoaXMubGVuZ3RoKTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy53b3Jkc1tpXSA9IDA7CiAgICAgIH0KCiAgICAgIHZhciBqLCB3OwogICAgICB2YXIgb2ZmID0gMDsKICAgICAgaWYgKGVuZGlhbiA9PT0gJ2JlJykgewogICAgICAgIGZvciAoaSA9IG51bWJlci5sZW5ndGggLSAxLCBqID0gMDsgaSA+PSAwOyBpIC09IDMpIHsKICAgICAgICAgIHcgPSBudW1iZXJbaV0gfCAobnVtYmVyW2kgLSAxXSA8PCA4KSB8IChudW1iZXJbaSAtIDJdIDw8IDE2KTsKICAgICAgICAgIHRoaXMud29yZHNbal0gfD0gKHcgPDwgb2ZmKSAmIDB4M2ZmZmZmZjsKICAgICAgICAgIHRoaXMud29yZHNbaiArIDFdID0gKHcgPj4+ICgyNiAtIG9mZikpICYgMHgzZmZmZmZmOwogICAgICAgICAgb2ZmICs9IDI0OwogICAgICAgICAgaWYgKG9mZiA+PSAyNikgewogICAgICAgICAgICBvZmYgLT0gMjY7CiAgICAgICAgICAgIGorKzsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoZW5kaWFuID09PSAnbGUnKSB7CiAgICAgICAgZm9yIChpID0gMCwgaiA9IDA7IGkgPCBudW1iZXIubGVuZ3RoOyBpICs9IDMpIHsKICAgICAgICAgIHcgPSBudW1iZXJbaV0gfCAobnVtYmVyW2kgKyAxXSA8PCA4KSB8IChudW1iZXJbaSArIDJdIDw8IDE2KTsKICAgICAgICAgIHRoaXMud29yZHNbal0gfD0gKHcgPDwgb2ZmKSAmIDB4M2ZmZmZmZjsKICAgICAgICAgIHRoaXMud29yZHNbaiArIDFdID0gKHcgPj4+ICgyNiAtIG9mZikpICYgMHgzZmZmZmZmOwogICAgICAgICAgb2ZmICs9IDI0OwogICAgICAgICAgaWYgKG9mZiA+PSAyNikgewogICAgICAgICAgICBvZmYgLT0gMjY7CiAgICAgICAgICAgIGorKzsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMuc3RyaXAoKTsKICAgIH07CgogICAgZnVuY3Rpb24gcGFyc2VIZXg0Qml0cyAoc3RyaW5nLCBpbmRleCkgewogICAgICB2YXIgYyA9IHN0cmluZy5jaGFyQ29kZUF0KGluZGV4KTsKICAgICAgLy8gJ0EnIC0gJ0YnCiAgICAgIGlmIChjID49IDY1ICYmIGMgPD0gNzApIHsKICAgICAgICByZXR1cm4gYyAtIDU1OwogICAgICAvLyAnYScgLSAnZicKICAgICAgfSBlbHNlIGlmIChjID49IDk3ICYmIGMgPD0gMTAyKSB7CiAgICAgICAgcmV0dXJuIGMgLSA4NzsKICAgICAgLy8gJzAnIC0gJzknCiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIChjIC0gNDgpICYgMHhmOwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gcGFyc2VIZXhCeXRlIChzdHJpbmcsIGxvd2VyQm91bmQsIGluZGV4KSB7CiAgICAgIHZhciByID0gcGFyc2VIZXg0Qml0cyhzdHJpbmcsIGluZGV4KTsKICAgICAgaWYgKGluZGV4IC0gMSA+PSBsb3dlckJvdW5kKSB7CiAgICAgICAgciB8PSBwYXJzZUhleDRCaXRzKHN0cmluZywgaW5kZXggLSAxKSA8PCA0OwogICAgICB9CiAgICAgIHJldHVybiByOwogICAgfQoKICAgIEJOLnByb3RvdHlwZS5fcGFyc2VIZXggPSBmdW5jdGlvbiBfcGFyc2VIZXggKG51bWJlciwgc3RhcnQsIGVuZGlhbikgewogICAgICAvLyBDcmVhdGUgcG9zc2libHkgYmlnZ2VyIGFycmF5IHRvIGVuc3VyZSB0aGF0IGl0IGZpdHMgdGhlIG51bWJlcgogICAgICB0aGlzLmxlbmd0aCA9IE1hdGguY2VpbCgobnVtYmVyLmxlbmd0aCAtIHN0YXJ0KSAvIDYpOwogICAgICB0aGlzLndvcmRzID0gbmV3IEFycmF5KHRoaXMubGVuZ3RoKTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy53b3Jkc1tpXSA9IDA7CiAgICAgIH0KCiAgICAgIC8vIDI0LWJpdHMgY2h1bmtzCiAgICAgIHZhciBvZmYgPSAwOwogICAgICB2YXIgaiA9IDA7CgogICAgICB2YXIgdzsKICAgICAgaWYgKGVuZGlhbiA9PT0gJ2JlJykgewogICAgICAgIGZvciAoaSA9IG51bWJlci5sZW5ndGggLSAxOyBpID49IHN0YXJ0OyBpIC09IDIpIHsKICAgICAgICAgIHcgPSBwYXJzZUhleEJ5dGUobnVtYmVyLCBzdGFydCwgaSkgPDwgb2ZmOwogICAgICAgICAgdGhpcy53b3Jkc1tqXSB8PSB3ICYgMHgzZmZmZmZmOwogICAgICAgICAgaWYgKG9mZiA+PSAxOCkgewogICAgICAgICAgICBvZmYgLT0gMTg7CiAgICAgICAgICAgIGogKz0gMTsKICAgICAgICAgICAgdGhpcy53b3Jkc1tqXSB8PSB3ID4+PiAyNjsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG9mZiArPSA4OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgcGFyc2VMZW5ndGggPSBudW1iZXIubGVuZ3RoIC0gc3RhcnQ7CiAgICAgICAgZm9yIChpID0gcGFyc2VMZW5ndGggJSAyID09PSAwID8gc3RhcnQgKyAxIDogc3RhcnQ7IGkgPCBudW1iZXIubGVuZ3RoOyBpICs9IDIpIHsKICAgICAgICAgIHcgPSBwYXJzZUhleEJ5dGUobnVtYmVyLCBzdGFydCwgaSkgPDwgb2ZmOwogICAgICAgICAgdGhpcy53b3Jkc1tqXSB8PSB3ICYgMHgzZmZmZmZmOwogICAgICAgICAgaWYgKG9mZiA+PSAxOCkgewogICAgICAgICAgICBvZmYgLT0gMTg7CiAgICAgICAgICAgIGogKz0gMTsKICAgICAgICAgICAgdGhpcy53b3Jkc1tqXSB8PSB3ID4+PiAyNjsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG9mZiArPSA4OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5zdHJpcCgpOwogICAgfTsKCiAgICBmdW5jdGlvbiBwYXJzZUJhc2UgKHN0ciwgc3RhcnQsIGVuZCwgbXVsKSB7CiAgICAgIHZhciByID0gMDsKICAgICAgdmFyIGxlbiA9IE1hdGgubWluKHN0ci5sZW5ndGgsIGVuZCk7CiAgICAgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgdmFyIGMgPSBzdHIuY2hhckNvZGVBdChpKSAtIDQ4OwoKICAgICAgICByICo9IG11bDsKCiAgICAgICAgLy8gJ2EnCiAgICAgICAgaWYgKGMgPj0gNDkpIHsKICAgICAgICAgIHIgKz0gYyAtIDQ5ICsgMHhhOwoKICAgICAgICAvLyAnQScKICAgICAgICB9IGVsc2UgaWYgKGMgPj0gMTcpIHsKICAgICAgICAgIHIgKz0gYyAtIDE3ICsgMHhhOwoKICAgICAgICAvLyAnMCcgLSAnOScKICAgICAgICB9IGVsc2UgewogICAgICAgICAgciArPSBjOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gcjsKICAgIH0KCiAgICBCTi5wcm90b3R5cGUuX3BhcnNlQmFzZSA9IGZ1bmN0aW9uIF9wYXJzZUJhc2UgKG51bWJlciwgYmFzZSwgc3RhcnQpIHsKICAgICAgLy8gSW5pdGlhbGl6ZSBhcyB6ZXJvCiAgICAgIHRoaXMud29yZHMgPSBbIDAgXTsKICAgICAgdGhpcy5sZW5ndGggPSAxOwoKICAgICAgLy8gRmluZCBsZW5ndGggb2YgbGltYiBpbiBiYXNlCiAgICAgIGZvciAodmFyIGxpbWJMZW4gPSAwLCBsaW1iUG93ID0gMTsgbGltYlBvdyA8PSAweDNmZmZmZmY7IGxpbWJQb3cgKj0gYmFzZSkgewogICAgICAgIGxpbWJMZW4rKzsKICAgICAgfQogICAgICBsaW1iTGVuLS07CiAgICAgIGxpbWJQb3cgPSAobGltYlBvdyAvIGJhc2UpIHwgMDsKCiAgICAgIHZhciB0b3RhbCA9IG51bWJlci5sZW5ndGggLSBzdGFydDsKICAgICAgdmFyIG1vZCA9IHRvdGFsICUgbGltYkxlbjsKICAgICAgdmFyIGVuZCA9IE1hdGgubWluKHRvdGFsLCB0b3RhbCAtIG1vZCkgKyBzdGFydDsKCiAgICAgIHZhciB3b3JkID0gMDsKICAgICAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpICs9IGxpbWJMZW4pIHsKICAgICAgICB3b3JkID0gcGFyc2VCYXNlKG51bWJlciwgaSwgaSArIGxpbWJMZW4sIGJhc2UpOwoKICAgICAgICB0aGlzLmltdWxuKGxpbWJQb3cpOwogICAgICAgIGlmICh0aGlzLndvcmRzWzBdICsgd29yZCA8IDB4NDAwMDAwMCkgewogICAgICAgICAgdGhpcy53b3Jkc1swXSArPSB3b3JkOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLl9pYWRkbih3b3JkKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChtb2QgIT09IDApIHsKICAgICAgICB2YXIgcG93ID0gMTsKICAgICAgICB3b3JkID0gcGFyc2VCYXNlKG51bWJlciwgaSwgbnVtYmVyLmxlbmd0aCwgYmFzZSk7CgogICAgICAgIGZvciAoaSA9IDA7IGkgPCBtb2Q7IGkrKykgewogICAgICAgICAgcG93ICo9IGJhc2U7CiAgICAgICAgfQoKICAgICAgICB0aGlzLmltdWxuKHBvdyk7CiAgICAgICAgaWYgKHRoaXMud29yZHNbMF0gKyB3b3JkIDwgMHg0MDAwMDAwKSB7CiAgICAgICAgICB0aGlzLndvcmRzWzBdICs9IHdvcmQ7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuX2lhZGRuKHdvcmQpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5zdHJpcCgpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuY29weSA9IGZ1bmN0aW9uIGNvcHkgKGRlc3QpIHsKICAgICAgZGVzdC53b3JkcyA9IG5ldyBBcnJheSh0aGlzLmxlbmd0aCk7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykgewogICAgICAgIGRlc3Qud29yZHNbaV0gPSB0aGlzLndvcmRzW2ldOwogICAgICB9CiAgICAgIGRlc3QubGVuZ3RoID0gdGhpcy5sZW5ndGg7CiAgICAgIGRlc3QubmVnYXRpdmUgPSB0aGlzLm5lZ2F0aXZlOwogICAgICBkZXN0LnJlZCA9IHRoaXMucmVkOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiBjbG9uZSAoKSB7CiAgICAgIHZhciByID0gbmV3IEJOKG51bGwpOwogICAgICB0aGlzLmNvcHkocik7CiAgICAgIHJldHVybiByOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuX2V4cGFuZCA9IGZ1bmN0aW9uIF9leHBhbmQgKHNpemUpIHsKICAgICAgd2hpbGUgKHRoaXMubGVuZ3RoIDwgc2l6ZSkgewogICAgICAgIHRoaXMud29yZHNbdGhpcy5sZW5ndGgrK10gPSAwOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzOwogICAgfTsKCiAgICAvLyBSZW1vdmUgbGVhZGluZyBgMGAgZnJvbSBgdGhpc2AKICAgIEJOLnByb3RvdHlwZS5zdHJpcCA9IGZ1bmN0aW9uIHN0cmlwICgpIHsKICAgICAgd2hpbGUgKHRoaXMubGVuZ3RoID4gMSAmJiB0aGlzLndvcmRzW3RoaXMubGVuZ3RoIC0gMV0gPT09IDApIHsKICAgICAgICB0aGlzLmxlbmd0aC0tOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLl9ub3JtU2lnbigpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuX25vcm1TaWduID0gZnVuY3Rpb24gX25vcm1TaWduICgpIHsKICAgICAgLy8gLTAgPSAwCiAgICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMSAmJiB0aGlzLndvcmRzWzBdID09PSAwKSB7CiAgICAgICAgdGhpcy5uZWdhdGl2ZSA9IDA7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXM7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5pbnNwZWN0ID0gZnVuY3Rpb24gaW5zcGVjdCAoKSB7CiAgICAgIHJldHVybiAodGhpcy5yZWQgPyAnPEJOLVI6ICcgOiAnPEJOOiAnKSArIHRoaXMudG9TdHJpbmcoMTYpICsgJz4nOwogICAgfTsKCiAgICAvKgoKICAgIHZhciB6ZXJvcyA9IFtdOwogICAgdmFyIGdyb3VwU2l6ZXMgPSBbXTsKICAgIHZhciBncm91cEJhc2VzID0gW107CgogICAgdmFyIHMgPSAnJzsKICAgIHZhciBpID0gLTE7CiAgICB3aGlsZSAoKytpIDwgQk4ud29yZFNpemUpIHsKICAgICAgemVyb3NbaV0gPSBzOwogICAgICBzICs9ICcwJzsKICAgIH0KICAgIGdyb3VwU2l6ZXNbMF0gPSAwOwogICAgZ3JvdXBTaXplc1sxXSA9IDA7CiAgICBncm91cEJhc2VzWzBdID0gMDsKICAgIGdyb3VwQmFzZXNbMV0gPSAwOwogICAgdmFyIGJhc2UgPSAyIC0gMTsKICAgIHdoaWxlICgrK2Jhc2UgPCAzNiArIDEpIHsKICAgICAgdmFyIGdyb3VwU2l6ZSA9IDA7CiAgICAgIHZhciBncm91cEJhc2UgPSAxOwogICAgICB3aGlsZSAoZ3JvdXBCYXNlIDwgKDEgPDwgQk4ud29yZFNpemUpIC8gYmFzZSkgewogICAgICAgIGdyb3VwQmFzZSAqPSBiYXNlOwogICAgICAgIGdyb3VwU2l6ZSArPSAxOwogICAgICB9CiAgICAgIGdyb3VwU2l6ZXNbYmFzZV0gPSBncm91cFNpemU7CiAgICAgIGdyb3VwQmFzZXNbYmFzZV0gPSBncm91cEJhc2U7CiAgICB9CgogICAgKi8KCiAgICB2YXIgemVyb3MgPSBbCiAgICAgICcnLAogICAgICAnMCcsCiAgICAgICcwMCcsCiAgICAgICcwMDAnLAogICAgICAnMDAwMCcsCiAgICAgICcwMDAwMCcsCiAgICAgICcwMDAwMDAnLAogICAgICAnMDAwMDAwMCcsCiAgICAgICcwMDAwMDAwMCcsCiAgICAgICcwMDAwMDAwMDAnLAogICAgICAnMDAwMDAwMDAwMCcsCiAgICAgICcwMDAwMDAwMDAwMCcsCiAgICAgICcwMDAwMDAwMDAwMDAnLAogICAgICAnMDAwMDAwMDAwMDAwMCcsCiAgICAgICcwMDAwMDAwMDAwMDAwMCcsCiAgICAgICcwMDAwMDAwMDAwMDAwMDAnLAogICAgICAnMDAwMDAwMDAwMDAwMDAwMCcsCiAgICAgICcwMDAwMDAwMDAwMDAwMDAwMCcsCiAgICAgICcwMDAwMDAwMDAwMDAwMDAwMDAnLAogICAgICAnMDAwMDAwMDAwMDAwMDAwMDAwMCcsCiAgICAgICcwMDAwMDAwMDAwMDAwMDAwMDAwMCcsCiAgICAgICcwMDAwMDAwMDAwMDAwMDAwMDAwMDAnLAogICAgICAnMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCcsCiAgICAgICcwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCcsCiAgICAgICcwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAnLAogICAgICAnMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCcKICAgIF07CgogICAgdmFyIGdyb3VwU2l6ZXMgPSBbCiAgICAgIDAsIDAsCiAgICAgIDI1LCAxNiwgMTIsIDExLCAxMCwgOSwgOCwKICAgICAgOCwgNywgNywgNywgNywgNiwgNiwKICAgICAgNiwgNiwgNiwgNiwgNiwgNSwgNSwKICAgICAgNSwgNSwgNSwgNSwgNSwgNSwgNSwKICAgICAgNSwgNSwgNSwgNSwgNSwgNSwgNQogICAgXTsKCiAgICB2YXIgZ3JvdXBCYXNlcyA9IFsKICAgICAgMCwgMCwKICAgICAgMzM1NTQ0MzIsIDQzMDQ2NzIxLCAxNjc3NzIxNiwgNDg4MjgxMjUsIDYwNDY2MTc2LCA0MDM1MzYwNywgMTY3NzcyMTYsCiAgICAgIDQzMDQ2NzIxLCAxMDAwMDAwMCwgMTk0ODcxNzEsIDM1ODMxODA4LCA2Mjc0ODUxNywgNzUyOTUzNiwgMTEzOTA2MjUsCiAgICAgIDE2Nzc3MjE2LCAyNDEzNzU2OSwgMzQwMTIyMjQsIDQ3MDQ1ODgxLCA2NDAwMDAwMCwgNDA4NDEwMSwgNTE1MzYzMiwKICAgICAgNjQzNjM0MywgNzk2MjYyNCwgOTc2NTYyNSwgMTE4ODEzNzYsIDE0MzQ4OTA3LCAxNzIxMDM2OCwgMjA1MTExNDksCiAgICAgIDI0MzAwMDAwLCAyODYyOTE1MSwgMzM1NTQ0MzIsIDM5MTM1MzkzLCA0NTQzNTQyNCwgNTI1MjE4NzUsIDYwNDY2MTc2CiAgICBdOwoKICAgIEJOLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nIChiYXNlLCBwYWRkaW5nKSB7CiAgICAgIGJhc2UgPSBiYXNlIHx8IDEwOwogICAgICBwYWRkaW5nID0gcGFkZGluZyB8IDAgfHwgMTsKCiAgICAgIHZhciBvdXQ7CiAgICAgIGlmIChiYXNlID09PSAxNiB8fCBiYXNlID09PSAnaGV4JykgewogICAgICAgIG91dCA9ICcnOwogICAgICAgIHZhciBvZmYgPSAwOwogICAgICAgIHZhciBjYXJyeSA9IDA7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB2YXIgdyA9IHRoaXMud29yZHNbaV07CiAgICAgICAgICB2YXIgd29yZCA9ICgoKHcgPDwgb2ZmKSB8IGNhcnJ5KSAmIDB4ZmZmZmZmKS50b1N0cmluZygxNik7CiAgICAgICAgICBjYXJyeSA9ICh3ID4+PiAoMjQgLSBvZmYpKSAmIDB4ZmZmZmZmOwogICAgICAgICAgaWYgKGNhcnJ5ICE9PSAwIHx8IGkgIT09IHRoaXMubGVuZ3RoIC0gMSkgewogICAgICAgICAgICBvdXQgPSB6ZXJvc1s2IC0gd29yZC5sZW5ndGhdICsgd29yZCArIG91dDsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG91dCA9IHdvcmQgKyBvdXQ7CiAgICAgICAgICB9CiAgICAgICAgICBvZmYgKz0gMjsKICAgICAgICAgIGlmIChvZmYgPj0gMjYpIHsKICAgICAgICAgICAgb2ZmIC09IDI2OwogICAgICAgICAgICBpLS07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChjYXJyeSAhPT0gMCkgewogICAgICAgICAgb3V0ID0gY2FycnkudG9TdHJpbmcoMTYpICsgb3V0OwogICAgICAgIH0KICAgICAgICB3aGlsZSAob3V0Lmxlbmd0aCAlIHBhZGRpbmcgIT09IDApIHsKICAgICAgICAgIG91dCA9ICcwJyArIG91dDsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMubmVnYXRpdmUgIT09IDApIHsKICAgICAgICAgIG91dCA9ICctJyArIG91dDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG91dDsKICAgICAgfQoKICAgICAgaWYgKGJhc2UgPT09IChiYXNlIHwgMCkgJiYgYmFzZSA+PSAyICYmIGJhc2UgPD0gMzYpIHsKICAgICAgICAvLyB2YXIgZ3JvdXBTaXplID0gTWF0aC5mbG9vcihCTi53b3JkU2l6ZSAqIE1hdGguTE4yIC8gTWF0aC5sb2coYmFzZSkpOwogICAgICAgIHZhciBncm91cFNpemUgPSBncm91cFNpemVzW2Jhc2VdOwogICAgICAgIC8vIHZhciBncm91cEJhc2UgPSBNYXRoLnBvdyhiYXNlLCBncm91cFNpemUpOwogICAgICAgIHZhciBncm91cEJhc2UgPSBncm91cEJhc2VzW2Jhc2VdOwogICAgICAgIG91dCA9ICcnOwogICAgICAgIHZhciBjID0gdGhpcy5jbG9uZSgpOwogICAgICAgIGMubmVnYXRpdmUgPSAwOwogICAgICAgIHdoaWxlICghYy5pc1plcm8oKSkgewogICAgICAgICAgdmFyIHIgPSBjLm1vZG4oZ3JvdXBCYXNlKS50b1N0cmluZyhiYXNlKTsKICAgICAgICAgIGMgPSBjLmlkaXZuKGdyb3VwQmFzZSk7CgogICAgICAgICAgaWYgKCFjLmlzWmVybygpKSB7CiAgICAgICAgICAgIG91dCA9IHplcm9zW2dyb3VwU2l6ZSAtIHIubGVuZ3RoXSArIHIgKyBvdXQ7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBvdXQgPSByICsgb3V0OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAodGhpcy5pc1plcm8oKSkgewogICAgICAgICAgb3V0ID0gJzAnICsgb3V0OwogICAgICAgIH0KICAgICAgICB3aGlsZSAob3V0Lmxlbmd0aCAlIHBhZGRpbmcgIT09IDApIHsKICAgICAgICAgIG91dCA9ICcwJyArIG91dDsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMubmVnYXRpdmUgIT09IDApIHsKICAgICAgICAgIG91dCA9ICctJyArIG91dDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG91dDsKICAgICAgfQoKICAgICAgYXNzZXJ0KGZhbHNlLCAnQmFzZSBzaG91bGQgYmUgYmV0d2VlbiAyIGFuZCAzNicpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUudG9OdW1iZXIgPSBmdW5jdGlvbiB0b051bWJlciAoKSB7CiAgICAgIHZhciByZXQgPSB0aGlzLndvcmRzWzBdOwogICAgICBpZiAodGhpcy5sZW5ndGggPT09IDIpIHsKICAgICAgICByZXQgKz0gdGhpcy53b3Jkc1sxXSAqIDB4NDAwMDAwMDsKICAgICAgfSBlbHNlIGlmICh0aGlzLmxlbmd0aCA9PT0gMyAmJiB0aGlzLndvcmRzWzJdID09PSAweDAxKSB7CiAgICAgICAgLy8gTk9URTogYXQgdGhpcyBzdGFnZSBpdCBpcyBrbm93biB0aGF0IHRoZSB0b3AgYml0IGlzIHNldAogICAgICAgIHJldCArPSAweDEwMDAwMDAwMDAwMDAwICsgKHRoaXMud29yZHNbMV0gKiAweDQwMDAwMDApOwogICAgICB9IGVsc2UgaWYgKHRoaXMubGVuZ3RoID4gMikgewogICAgICAgIGFzc2VydChmYWxzZSwgJ051bWJlciBjYW4gb25seSBzYWZlbHkgc3RvcmUgdXAgdG8gNTMgYml0cycpOwogICAgICB9CiAgICAgIHJldHVybiAodGhpcy5uZWdhdGl2ZSAhPT0gMCkgPyAtcmV0IDogcmV0OwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OICgpIHsKICAgICAgcmV0dXJuIHRoaXMudG9TdHJpbmcoMTYpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUudG9CdWZmZXIgPSBmdW5jdGlvbiB0b0J1ZmZlciAoZW5kaWFuLCBsZW5ndGgpIHsKICAgICAgYXNzZXJ0KHR5cGVvZiBCdWZmZXIgIT09ICd1bmRlZmluZWQnKTsKICAgICAgcmV0dXJuIHRoaXMudG9BcnJheUxpa2UoQnVmZmVyLCBlbmRpYW4sIGxlbmd0aCk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS50b0FycmF5ID0gZnVuY3Rpb24gdG9BcnJheSAoZW5kaWFuLCBsZW5ndGgpIHsKICAgICAgcmV0dXJuIHRoaXMudG9BcnJheUxpa2UoQXJyYXksIGVuZGlhbiwgbGVuZ3RoKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLnRvQXJyYXlMaWtlID0gZnVuY3Rpb24gdG9BcnJheUxpa2UgKEFycmF5VHlwZSwgZW5kaWFuLCBsZW5ndGgpIHsKICAgICAgdmFyIGJ5dGVMZW5ndGggPSB0aGlzLmJ5dGVMZW5ndGgoKTsKICAgICAgdmFyIHJlcUxlbmd0aCA9IGxlbmd0aCB8fCBNYXRoLm1heCgxLCBieXRlTGVuZ3RoKTsKICAgICAgYXNzZXJ0KGJ5dGVMZW5ndGggPD0gcmVxTGVuZ3RoLCAnYnl0ZSBhcnJheSBsb25nZXIgdGhhbiBkZXNpcmVkIGxlbmd0aCcpOwogICAgICBhc3NlcnQocmVxTGVuZ3RoID4gMCwgJ1JlcXVlc3RlZCBhcnJheSBsZW5ndGggPD0gMCcpOwoKICAgICAgdGhpcy5zdHJpcCgpOwogICAgICB2YXIgbGl0dGxlRW5kaWFuID0gZW5kaWFuID09PSAnbGUnOwogICAgICB2YXIgcmVzID0gbmV3IEFycmF5VHlwZShyZXFMZW5ndGgpOwoKICAgICAgdmFyIGIsIGk7CiAgICAgIHZhciBxID0gdGhpcy5jbG9uZSgpOwogICAgICBpZiAoIWxpdHRsZUVuZGlhbikgewogICAgICAgIC8vIEFzc3VtZSBiaWctZW5kaWFuCiAgICAgICAgZm9yIChpID0gMDsgaSA8IHJlcUxlbmd0aCAtIGJ5dGVMZW5ndGg7IGkrKykgewogICAgICAgICAgcmVzW2ldID0gMDsKICAgICAgICB9CgogICAgICAgIGZvciAoaSA9IDA7ICFxLmlzWmVybygpOyBpKyspIHsKICAgICAgICAgIGIgPSBxLmFuZGxuKDB4ZmYpOwogICAgICAgICAgcS5pdXNocm4oOCk7CgogICAgICAgICAgcmVzW3JlcUxlbmd0aCAtIGkgLSAxXSA9IGI7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGZvciAoaSA9IDA7ICFxLmlzWmVybygpOyBpKyspIHsKICAgICAgICAgIGIgPSBxLmFuZGxuKDB4ZmYpOwogICAgICAgICAgcS5pdXNocm4oOCk7CgogICAgICAgICAgcmVzW2ldID0gYjsKICAgICAgICB9CgogICAgICAgIGZvciAoOyBpIDwgcmVxTGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHJlc1tpXSA9IDA7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gcmVzOwogICAgfTsKCiAgICBpZiAoTWF0aC5jbHozMikgewogICAgICBCTi5wcm90b3R5cGUuX2NvdW50Qml0cyA9IGZ1bmN0aW9uIF9jb3VudEJpdHMgKHcpIHsKICAgICAgICByZXR1cm4gMzIgLSBNYXRoLmNsejMyKHcpOwogICAgICB9OwogICAgfSBlbHNlIHsKICAgICAgQk4ucHJvdG90eXBlLl9jb3VudEJpdHMgPSBmdW5jdGlvbiBfY291bnRCaXRzICh3KSB7CiAgICAgICAgdmFyIHQgPSB3OwogICAgICAgIHZhciByID0gMDsKICAgICAgICBpZiAodCA+PSAweDEwMDApIHsKICAgICAgICAgIHIgKz0gMTM7CiAgICAgICAgICB0ID4+Pj0gMTM7CiAgICAgICAgfQogICAgICAgIGlmICh0ID49IDB4NDApIHsKICAgICAgICAgIHIgKz0gNzsKICAgICAgICAgIHQgPj4+PSA3OwogICAgICAgIH0KICAgICAgICBpZiAodCA+PSAweDgpIHsKICAgICAgICAgIHIgKz0gNDsKICAgICAgICAgIHQgPj4+PSA0OwogICAgICAgIH0KICAgICAgICBpZiAodCA+PSAweDAyKSB7CiAgICAgICAgICByICs9IDI7CiAgICAgICAgICB0ID4+Pj0gMjsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHIgKyB0OwogICAgICB9OwogICAgfQoKICAgIEJOLnByb3RvdHlwZS5femVyb0JpdHMgPSBmdW5jdGlvbiBfemVyb0JpdHMgKHcpIHsKICAgICAgLy8gU2hvcnQtY3V0CiAgICAgIGlmICh3ID09PSAwKSByZXR1cm4gMjY7CgogICAgICB2YXIgdCA9IHc7CiAgICAgIHZhciByID0gMDsKICAgICAgaWYgKCh0ICYgMHgxZmZmKSA9PT0gMCkgewogICAgICAgIHIgKz0gMTM7CiAgICAgICAgdCA+Pj49IDEzOwogICAgICB9CiAgICAgIGlmICgodCAmIDB4N2YpID09PSAwKSB7CiAgICAgICAgciArPSA3OwogICAgICAgIHQgPj4+PSA3OwogICAgICB9CiAgICAgIGlmICgodCAmIDB4ZikgPT09IDApIHsKICAgICAgICByICs9IDQ7CiAgICAgICAgdCA+Pj49IDQ7CiAgICAgIH0KICAgICAgaWYgKCh0ICYgMHgzKSA9PT0gMCkgewogICAgICAgIHIgKz0gMjsKICAgICAgICB0ID4+Pj0gMjsKICAgICAgfQogICAgICBpZiAoKHQgJiAweDEpID09PSAwKSB7CiAgICAgICAgcisrOwogICAgICB9CiAgICAgIHJldHVybiByOwogICAgfTsKCiAgICAvLyBSZXR1cm4gbnVtYmVyIG9mIHVzZWQgYml0cyBpbiBhIEJOCiAgICBCTi5wcm90b3R5cGUuYml0TGVuZ3RoID0gZnVuY3Rpb24gYml0TGVuZ3RoICgpIHsKICAgICAgdmFyIHcgPSB0aGlzLndvcmRzW3RoaXMubGVuZ3RoIC0gMV07CiAgICAgIHZhciBoaSA9IHRoaXMuX2NvdW50Qml0cyh3KTsKICAgICAgcmV0dXJuICh0aGlzLmxlbmd0aCAtIDEpICogMjYgKyBoaTsKICAgIH07CgogICAgZnVuY3Rpb24gdG9CaXRBcnJheSAobnVtKSB7CiAgICAgIHZhciB3ID0gbmV3IEFycmF5KG51bS5iaXRMZW5ndGgoKSk7CgogICAgICBmb3IgKHZhciBiaXQgPSAwOyBiaXQgPCB3Lmxlbmd0aDsgYml0KyspIHsKICAgICAgICB2YXIgb2ZmID0gKGJpdCAvIDI2KSB8IDA7CiAgICAgICAgdmFyIHdiaXQgPSBiaXQgJSAyNjsKCiAgICAgICAgd1tiaXRdID0gKG51bS53b3Jkc1tvZmZdICYgKDEgPDwgd2JpdCkpID4+PiB3Yml0OwogICAgICB9CgogICAgICByZXR1cm4gdzsKICAgIH0KCiAgICAvLyBOdW1iZXIgb2YgdHJhaWxpbmcgemVybyBiaXRzCiAgICBCTi5wcm90b3R5cGUuemVyb0JpdHMgPSBmdW5jdGlvbiB6ZXJvQml0cyAoKSB7CiAgICAgIGlmICh0aGlzLmlzWmVybygpKSByZXR1cm4gMDsKCiAgICAgIHZhciByID0gMDsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIGIgPSB0aGlzLl96ZXJvQml0cyh0aGlzLndvcmRzW2ldKTsKICAgICAgICByICs9IGI7CiAgICAgICAgaWYgKGIgIT09IDI2KSBicmVhazsKICAgICAgfQogICAgICByZXR1cm4gcjsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmJ5dGVMZW5ndGggPSBmdW5jdGlvbiBieXRlTGVuZ3RoICgpIHsKICAgICAgcmV0dXJuIE1hdGguY2VpbCh0aGlzLmJpdExlbmd0aCgpIC8gOCk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS50b1R3b3MgPSBmdW5jdGlvbiB0b1R3b3MgKHdpZHRoKSB7CiAgICAgIGlmICh0aGlzLm5lZ2F0aXZlICE9PSAwKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuYWJzKCkuaW5vdG4od2lkdGgpLmlhZGRuKDEpOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLmNsb25lKCk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5mcm9tVHdvcyA9IGZ1bmN0aW9uIGZyb21Ud29zICh3aWR0aCkgewogICAgICBpZiAodGhpcy50ZXN0bih3aWR0aCAtIDEpKSB7CiAgICAgICAgcmV0dXJuIHRoaXMubm90bih3aWR0aCkuaWFkZG4oMSkuaW5lZygpOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLmNsb25lKCk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5pc05lZyA9IGZ1bmN0aW9uIGlzTmVnICgpIHsKICAgICAgcmV0dXJuIHRoaXMubmVnYXRpdmUgIT09IDA7CiAgICB9OwoKICAgIC8vIFJldHVybiBuZWdhdGl2ZSBjbG9uZSBvZiBgdGhpc2AKICAgIEJOLnByb3RvdHlwZS5uZWcgPSBmdW5jdGlvbiBuZWcgKCkgewogICAgICByZXR1cm4gdGhpcy5jbG9uZSgpLmluZWcoKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmluZWcgPSBmdW5jdGlvbiBpbmVnICgpIHsKICAgICAgaWYgKCF0aGlzLmlzWmVybygpKSB7CiAgICAgICAgdGhpcy5uZWdhdGl2ZSBePSAxOwogICAgICB9CgogICAgICByZXR1cm4gdGhpczsKICAgIH07CgogICAgLy8gT3IgYG51bWAgd2l0aCBgdGhpc2AgaW4tcGxhY2UKICAgIEJOLnByb3RvdHlwZS5pdW9yID0gZnVuY3Rpb24gaXVvciAobnVtKSB7CiAgICAgIHdoaWxlICh0aGlzLmxlbmd0aCA8IG51bS5sZW5ndGgpIHsKICAgICAgICB0aGlzLndvcmRzW3RoaXMubGVuZ3RoKytdID0gMDsKICAgICAgfQoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW0ubGVuZ3RoOyBpKyspIHsKICAgICAgICB0aGlzLndvcmRzW2ldID0gdGhpcy53b3Jkc1tpXSB8IG51bS53b3Jkc1tpXTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMuc3RyaXAoKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmlvciA9IGZ1bmN0aW9uIGlvciAobnVtKSB7CiAgICAgIGFzc2VydCgodGhpcy5uZWdhdGl2ZSB8IG51bS5uZWdhdGl2ZSkgPT09IDApOwogICAgICByZXR1cm4gdGhpcy5pdW9yKG51bSk7CiAgICB9OwoKICAgIC8vIE9yIGBudW1gIHdpdGggYHRoaXNgCiAgICBCTi5wcm90b3R5cGUub3IgPSBmdW5jdGlvbiBvciAobnVtKSB7CiAgICAgIGlmICh0aGlzLmxlbmd0aCA+IG51bS5sZW5ndGgpIHJldHVybiB0aGlzLmNsb25lKCkuaW9yKG51bSk7CiAgICAgIHJldHVybiBudW0uY2xvbmUoKS5pb3IodGhpcyk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS51b3IgPSBmdW5jdGlvbiB1b3IgKG51bSkgewogICAgICBpZiAodGhpcy5sZW5ndGggPiBudW0ubGVuZ3RoKSByZXR1cm4gdGhpcy5jbG9uZSgpLml1b3IobnVtKTsKICAgICAgcmV0dXJuIG51bS5jbG9uZSgpLml1b3IodGhpcyk7CiAgICB9OwoKICAgIC8vIEFuZCBgbnVtYCB3aXRoIGB0aGlzYCBpbi1wbGFjZQogICAgQk4ucHJvdG90eXBlLml1YW5kID0gZnVuY3Rpb24gaXVhbmQgKG51bSkgewogICAgICAvLyBiID0gbWluLWxlbmd0aChudW0sIHRoaXMpCiAgICAgIHZhciBiOwogICAgICBpZiAodGhpcy5sZW5ndGggPiBudW0ubGVuZ3RoKSB7CiAgICAgICAgYiA9IG51bTsKICAgICAgfSBlbHNlIHsKICAgICAgICBiID0gdGhpczsKICAgICAgfQoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy53b3Jkc1tpXSA9IHRoaXMud29yZHNbaV0gJiBudW0ud29yZHNbaV07CiAgICAgIH0KCiAgICAgIHRoaXMubGVuZ3RoID0gYi5sZW5ndGg7CgogICAgICByZXR1cm4gdGhpcy5zdHJpcCgpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuaWFuZCA9IGZ1bmN0aW9uIGlhbmQgKG51bSkgewogICAgICBhc3NlcnQoKHRoaXMubmVnYXRpdmUgfCBudW0ubmVnYXRpdmUpID09PSAwKTsKICAgICAgcmV0dXJuIHRoaXMuaXVhbmQobnVtKTsKICAgIH07CgogICAgLy8gQW5kIGBudW1gIHdpdGggYHRoaXNgCiAgICBCTi5wcm90b3R5cGUuYW5kID0gZnVuY3Rpb24gYW5kIChudW0pIHsKICAgICAgaWYgKHRoaXMubGVuZ3RoID4gbnVtLmxlbmd0aCkgcmV0dXJuIHRoaXMuY2xvbmUoKS5pYW5kKG51bSk7CiAgICAgIHJldHVybiBudW0uY2xvbmUoKS5pYW5kKHRoaXMpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUudWFuZCA9IGZ1bmN0aW9uIHVhbmQgKG51bSkgewogICAgICBpZiAodGhpcy5sZW5ndGggPiBudW0ubGVuZ3RoKSByZXR1cm4gdGhpcy5jbG9uZSgpLml1YW5kKG51bSk7CiAgICAgIHJldHVybiBudW0uY2xvbmUoKS5pdWFuZCh0aGlzKTsKICAgIH07CgogICAgLy8gWG9yIGBudW1gIHdpdGggYHRoaXNgIGluLXBsYWNlCiAgICBCTi5wcm90b3R5cGUuaXV4b3IgPSBmdW5jdGlvbiBpdXhvciAobnVtKSB7CiAgICAgIC8vIGEubGVuZ3RoID4gYi5sZW5ndGgKICAgICAgdmFyIGE7CiAgICAgIHZhciBiOwogICAgICBpZiAodGhpcy5sZW5ndGggPiBudW0ubGVuZ3RoKSB7CiAgICAgICAgYSA9IHRoaXM7CiAgICAgICAgYiA9IG51bTsKICAgICAgfSBlbHNlIHsKICAgICAgICBhID0gbnVtOwogICAgICAgIGIgPSB0aGlzOwogICAgICB9CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGIubGVuZ3RoOyBpKyspIHsKICAgICAgICB0aGlzLndvcmRzW2ldID0gYS53b3Jkc1tpXSBeIGIud29yZHNbaV07CiAgICAgIH0KCiAgICAgIGlmICh0aGlzICE9PSBhKSB7CiAgICAgICAgZm9yICg7IGkgPCBhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB0aGlzLndvcmRzW2ldID0gYS53b3Jkc1tpXTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMubGVuZ3RoID0gYS5sZW5ndGg7CgogICAgICByZXR1cm4gdGhpcy5zdHJpcCgpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuaXhvciA9IGZ1bmN0aW9uIGl4b3IgKG51bSkgewogICAgICBhc3NlcnQoKHRoaXMubmVnYXRpdmUgfCBudW0ubmVnYXRpdmUpID09PSAwKTsKICAgICAgcmV0dXJuIHRoaXMuaXV4b3IobnVtKTsKICAgIH07CgogICAgLy8gWG9yIGBudW1gIHdpdGggYHRoaXNgCiAgICBCTi5wcm90b3R5cGUueG9yID0gZnVuY3Rpb24geG9yIChudW0pIHsKICAgICAgaWYgKHRoaXMubGVuZ3RoID4gbnVtLmxlbmd0aCkgcmV0dXJuIHRoaXMuY2xvbmUoKS5peG9yKG51bSk7CiAgICAgIHJldHVybiBudW0uY2xvbmUoKS5peG9yKHRoaXMpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUudXhvciA9IGZ1bmN0aW9uIHV4b3IgKG51bSkgewogICAgICBpZiAodGhpcy5sZW5ndGggPiBudW0ubGVuZ3RoKSByZXR1cm4gdGhpcy5jbG9uZSgpLml1eG9yKG51bSk7CiAgICAgIHJldHVybiBudW0uY2xvbmUoKS5pdXhvcih0aGlzKTsKICAgIH07CgogICAgLy8gTm90IGBgdGhpc2BgIHdpdGggYGB3aWR0aGBgIGJpdHdpZHRoCiAgICBCTi5wcm90b3R5cGUuaW5vdG4gPSBmdW5jdGlvbiBpbm90biAod2lkdGgpIHsKICAgICAgYXNzZXJ0KHR5cGVvZiB3aWR0aCA9PT0gJ251bWJlcicgJiYgd2lkdGggPj0gMCk7CgogICAgICB2YXIgYnl0ZXNOZWVkZWQgPSBNYXRoLmNlaWwod2lkdGggLyAyNikgfCAwOwogICAgICB2YXIgYml0c0xlZnQgPSB3aWR0aCAlIDI2OwoKICAgICAgLy8gRXh0ZW5kIHRoZSBidWZmZXIgd2l0aCBsZWFkaW5nIHplcm9lcwogICAgICB0aGlzLl9leHBhbmQoYnl0ZXNOZWVkZWQpOwoKICAgICAgaWYgKGJpdHNMZWZ0ID4gMCkgewogICAgICAgIGJ5dGVzTmVlZGVkLS07CiAgICAgIH0KCiAgICAgIC8vIEhhbmRsZSBjb21wbGV0ZSB3b3JkcwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJ5dGVzTmVlZGVkOyBpKyspIHsKICAgICAgICB0aGlzLndvcmRzW2ldID0gfnRoaXMud29yZHNbaV0gJiAweDNmZmZmZmY7CiAgICAgIH0KCiAgICAgIC8vIEhhbmRsZSB0aGUgcmVzaWR1ZQogICAgICBpZiAoYml0c0xlZnQgPiAwKSB7CiAgICAgICAgdGhpcy53b3Jkc1tpXSA9IH50aGlzLndvcmRzW2ldICYgKDB4M2ZmZmZmZiA+PiAoMjYgLSBiaXRzTGVmdCkpOwogICAgICB9CgogICAgICAvLyBBbmQgcmVtb3ZlIGxlYWRpbmcgemVyb2VzCiAgICAgIHJldHVybiB0aGlzLnN0cmlwKCk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5ub3RuID0gZnVuY3Rpb24gbm90biAod2lkdGgpIHsKICAgICAgcmV0dXJuIHRoaXMuY2xvbmUoKS5pbm90bih3aWR0aCk7CiAgICB9OwoKICAgIC8vIFNldCBgYml0YCBvZiBgdGhpc2AKICAgIEJOLnByb3RvdHlwZS5zZXRuID0gZnVuY3Rpb24gc2V0biAoYml0LCB2YWwpIHsKICAgICAgYXNzZXJ0KHR5cGVvZiBiaXQgPT09ICdudW1iZXInICYmIGJpdCA+PSAwKTsKCiAgICAgIHZhciBvZmYgPSAoYml0IC8gMjYpIHwgMDsKICAgICAgdmFyIHdiaXQgPSBiaXQgJSAyNjsKCiAgICAgIHRoaXMuX2V4cGFuZChvZmYgKyAxKTsKCiAgICAgIGlmICh2YWwpIHsKICAgICAgICB0aGlzLndvcmRzW29mZl0gPSB0aGlzLndvcmRzW29mZl0gfCAoMSA8PCB3Yml0KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLndvcmRzW29mZl0gPSB0aGlzLndvcmRzW29mZl0gJiB+KDEgPDwgd2JpdCk7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLnN0cmlwKCk7CiAgICB9OwoKICAgIC8vIEFkZCBgbnVtYCB0byBgdGhpc2AgaW4tcGxhY2UKICAgIEJOLnByb3RvdHlwZS5pYWRkID0gZnVuY3Rpb24gaWFkZCAobnVtKSB7CiAgICAgIHZhciByOwoKICAgICAgLy8gbmVnYXRpdmUgKyBwb3NpdGl2ZQogICAgICBpZiAodGhpcy5uZWdhdGl2ZSAhPT0gMCAmJiBudW0ubmVnYXRpdmUgPT09IDApIHsKICAgICAgICB0aGlzLm5lZ2F0aXZlID0gMDsKICAgICAgICByID0gdGhpcy5pc3ViKG51bSk7CiAgICAgICAgdGhpcy5uZWdhdGl2ZSBePSAxOwogICAgICAgIHJldHVybiB0aGlzLl9ub3JtU2lnbigpOwoKICAgICAgLy8gcG9zaXRpdmUgKyBuZWdhdGl2ZQogICAgICB9IGVsc2UgaWYgKHRoaXMubmVnYXRpdmUgPT09IDAgJiYgbnVtLm5lZ2F0aXZlICE9PSAwKSB7CiAgICAgICAgbnVtLm5lZ2F0aXZlID0gMDsKICAgICAgICByID0gdGhpcy5pc3ViKG51bSk7CiAgICAgICAgbnVtLm5lZ2F0aXZlID0gMTsKICAgICAgICByZXR1cm4gci5fbm9ybVNpZ24oKTsKICAgICAgfQoKICAgICAgLy8gYS5sZW5ndGggPiBiLmxlbmd0aAogICAgICB2YXIgYSwgYjsKICAgICAgaWYgKHRoaXMubGVuZ3RoID4gbnVtLmxlbmd0aCkgewogICAgICAgIGEgPSB0aGlzOwogICAgICAgIGIgPSBudW07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYSA9IG51bTsKICAgICAgICBiID0gdGhpczsKICAgICAgfQoKICAgICAgdmFyIGNhcnJ5ID0gMDsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgciA9IChhLndvcmRzW2ldIHwgMCkgKyAoYi53b3Jkc1tpXSB8IDApICsgY2Fycnk7CiAgICAgICAgdGhpcy53b3Jkc1tpXSA9IHIgJiAweDNmZmZmZmY7CiAgICAgICAgY2FycnkgPSByID4+PiAyNjsKICAgICAgfQogICAgICBmb3IgKDsgY2FycnkgIT09IDAgJiYgaSA8IGEubGVuZ3RoOyBpKyspIHsKICAgICAgICByID0gKGEud29yZHNbaV0gfCAwKSArIGNhcnJ5OwogICAgICAgIHRoaXMud29yZHNbaV0gPSByICYgMHgzZmZmZmZmOwogICAgICAgIGNhcnJ5ID0gciA+Pj4gMjY7CiAgICAgIH0KCiAgICAgIHRoaXMubGVuZ3RoID0gYS5sZW5ndGg7CiAgICAgIGlmIChjYXJyeSAhPT0gMCkgewogICAgICAgIHRoaXMud29yZHNbdGhpcy5sZW5ndGhdID0gY2Fycnk7CiAgICAgICAgdGhpcy5sZW5ndGgrKzsKICAgICAgLy8gQ29weSB0aGUgcmVzdCBvZiB0aGUgd29yZHMKICAgICAgfSBlbHNlIGlmIChhICE9PSB0aGlzKSB7CiAgICAgICAgZm9yICg7IGkgPCBhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB0aGlzLndvcmRzW2ldID0gYS53b3Jkc1tpXTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzOwogICAgfTsKCiAgICAvLyBBZGQgYG51bWAgdG8gYHRoaXNgCiAgICBCTi5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gYWRkIChudW0pIHsKICAgICAgdmFyIHJlczsKICAgICAgaWYgKG51bS5uZWdhdGl2ZSAhPT0gMCAmJiB0aGlzLm5lZ2F0aXZlID09PSAwKSB7CiAgICAgICAgbnVtLm5lZ2F0aXZlID0gMDsKICAgICAgICByZXMgPSB0aGlzLnN1YihudW0pOwogICAgICAgIG51bS5uZWdhdGl2ZSBePSAxOwogICAgICAgIHJldHVybiByZXM7CiAgICAgIH0gZWxzZSBpZiAobnVtLm5lZ2F0aXZlID09PSAwICYmIHRoaXMubmVnYXRpdmUgIT09IDApIHsKICAgICAgICB0aGlzLm5lZ2F0aXZlID0gMDsKICAgICAgICByZXMgPSBudW0uc3ViKHRoaXMpOwogICAgICAgIHRoaXMubmVnYXRpdmUgPSAxOwogICAgICAgIHJldHVybiByZXM7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmxlbmd0aCA+IG51bS5sZW5ndGgpIHJldHVybiB0aGlzLmNsb25lKCkuaWFkZChudW0pOwoKICAgICAgcmV0dXJuIG51bS5jbG9uZSgpLmlhZGQodGhpcyk7CiAgICB9OwoKICAgIC8vIFN1YnRyYWN0IGBudW1gIGZyb20gYHRoaXNgIGluLXBsYWNlCiAgICBCTi5wcm90b3R5cGUuaXN1YiA9IGZ1bmN0aW9uIGlzdWIgKG51bSkgewogICAgICAvLyB0aGlzIC0gKC1udW0pID0gdGhpcyArIG51bQogICAgICBpZiAobnVtLm5lZ2F0aXZlICE9PSAwKSB7CiAgICAgICAgbnVtLm5lZ2F0aXZlID0gMDsKICAgICAgICB2YXIgciA9IHRoaXMuaWFkZChudW0pOwogICAgICAgIG51bS5uZWdhdGl2ZSA9IDE7CiAgICAgICAgcmV0dXJuIHIuX25vcm1TaWduKCk7CgogICAgICAvLyAtdGhpcyAtIG51bSA9IC0odGhpcyArIG51bSkKICAgICAgfSBlbHNlIGlmICh0aGlzLm5lZ2F0aXZlICE9PSAwKSB7CiAgICAgICAgdGhpcy5uZWdhdGl2ZSA9IDA7CiAgICAgICAgdGhpcy5pYWRkKG51bSk7CiAgICAgICAgdGhpcy5uZWdhdGl2ZSA9IDE7CiAgICAgICAgcmV0dXJuIHRoaXMuX25vcm1TaWduKCk7CiAgICAgIH0KCiAgICAgIC8vIEF0IHRoaXMgcG9pbnQgYm90aCBudW1iZXJzIGFyZSBwb3NpdGl2ZQogICAgICB2YXIgY21wID0gdGhpcy5jbXAobnVtKTsKCiAgICAgIC8vIE9wdGltaXphdGlvbiAtIHplcm9pZnkKICAgICAgaWYgKGNtcCA9PT0gMCkgewogICAgICAgIHRoaXMubmVnYXRpdmUgPSAwOwogICAgICAgIHRoaXMubGVuZ3RoID0gMTsKICAgICAgICB0aGlzLndvcmRzWzBdID0gMDsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfQoKICAgICAgLy8gYSA+IGIKICAgICAgdmFyIGEsIGI7CiAgICAgIGlmIChjbXAgPiAwKSB7CiAgICAgICAgYSA9IHRoaXM7CiAgICAgICAgYiA9IG51bTsKICAgICAgfSBlbHNlIHsKICAgICAgICBhID0gbnVtOwogICAgICAgIGIgPSB0aGlzOwogICAgICB9CgogICAgICB2YXIgY2FycnkgPSAwOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGIubGVuZ3RoOyBpKyspIHsKICAgICAgICByID0gKGEud29yZHNbaV0gfCAwKSAtIChiLndvcmRzW2ldIHwgMCkgKyBjYXJyeTsKICAgICAgICBjYXJyeSA9IHIgPj4gMjY7CiAgICAgICAgdGhpcy53b3Jkc1tpXSA9IHIgJiAweDNmZmZmZmY7CiAgICAgIH0KICAgICAgZm9yICg7IGNhcnJ5ICE9PSAwICYmIGkgPCBhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgciA9IChhLndvcmRzW2ldIHwgMCkgKyBjYXJyeTsKICAgICAgICBjYXJyeSA9IHIgPj4gMjY7CiAgICAgICAgdGhpcy53b3Jkc1tpXSA9IHIgJiAweDNmZmZmZmY7CiAgICAgIH0KCiAgICAgIC8vIENvcHkgcmVzdCBvZiB0aGUgd29yZHMKICAgICAgaWYgKGNhcnJ5ID09PSAwICYmIGkgPCBhLmxlbmd0aCAmJiBhICE9PSB0aGlzKSB7CiAgICAgICAgZm9yICg7IGkgPCBhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB0aGlzLndvcmRzW2ldID0gYS53b3Jkc1tpXTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMubGVuZ3RoID0gTWF0aC5tYXgodGhpcy5sZW5ndGgsIGkpOwoKICAgICAgaWYgKGEgIT09IHRoaXMpIHsKICAgICAgICB0aGlzLm5lZ2F0aXZlID0gMTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMuc3RyaXAoKTsKICAgIH07CgogICAgLy8gU3VidHJhY3QgYG51bWAgZnJvbSBgdGhpc2AKICAgIEJOLnByb3RvdHlwZS5zdWIgPSBmdW5jdGlvbiBzdWIgKG51bSkgewogICAgICByZXR1cm4gdGhpcy5jbG9uZSgpLmlzdWIobnVtKTsKICAgIH07CgogICAgZnVuY3Rpb24gc21hbGxNdWxUbyAoc2VsZiwgbnVtLCBvdXQpIHsKICAgICAgb3V0Lm5lZ2F0aXZlID0gbnVtLm5lZ2F0aXZlIF4gc2VsZi5uZWdhdGl2ZTsKICAgICAgdmFyIGxlbiA9IChzZWxmLmxlbmd0aCArIG51bS5sZW5ndGgpIHwgMDsKICAgICAgb3V0Lmxlbmd0aCA9IGxlbjsKICAgICAgbGVuID0gKGxlbiAtIDEpIHwgMDsKCiAgICAgIC8vIFBlZWwgb25lIGl0ZXJhdGlvbiAoY29tcGlsZXIgY2FuJ3QgZG8gaXQsIGJlY2F1c2Ugb2YgY29kZSBjb21wbGV4aXR5KQogICAgICB2YXIgYSA9IHNlbGYud29yZHNbMF0gfCAwOwogICAgICB2YXIgYiA9IG51bS53b3Jkc1swXSB8IDA7CiAgICAgIHZhciByID0gYSAqIGI7CgogICAgICB2YXIgbG8gPSByICYgMHgzZmZmZmZmOwogICAgICB2YXIgY2FycnkgPSAociAvIDB4NDAwMDAwMCkgfCAwOwogICAgICBvdXQud29yZHNbMF0gPSBsbzsKCiAgICAgIGZvciAodmFyIGsgPSAxOyBrIDwgbGVuOyBrKyspIHsKICAgICAgICAvLyBTdW0gYWxsIHdvcmRzIHdpdGggdGhlIHNhbWUgYGkgKyBqID0ga2AgYW5kIGFjY3VtdWxhdGUgYG5jYXJyeWAsCiAgICAgICAgLy8gbm90ZSB0aGF0IG5jYXJyeSBjb3VsZCBiZSA+PSAweDNmZmZmZmYKICAgICAgICB2YXIgbmNhcnJ5ID0gY2FycnkgPj4+IDI2OwogICAgICAgIHZhciByd29yZCA9IGNhcnJ5ICYgMHgzZmZmZmZmOwogICAgICAgIHZhciBtYXhKID0gTWF0aC5taW4oaywgbnVtLmxlbmd0aCAtIDEpOwogICAgICAgIGZvciAodmFyIGogPSBNYXRoLm1heCgwLCBrIC0gc2VsZi5sZW5ndGggKyAxKTsgaiA8PSBtYXhKOyBqKyspIHsKICAgICAgICAgIHZhciBpID0gKGsgLSBqKSB8IDA7CiAgICAgICAgICBhID0gc2VsZi53b3Jkc1tpXSB8IDA7CiAgICAgICAgICBiID0gbnVtLndvcmRzW2pdIHwgMDsKICAgICAgICAgIHIgPSBhICogYiArIHJ3b3JkOwogICAgICAgICAgbmNhcnJ5ICs9IChyIC8gMHg0MDAwMDAwKSB8IDA7CiAgICAgICAgICByd29yZCA9IHIgJiAweDNmZmZmZmY7CiAgICAgICAgfQogICAgICAgIG91dC53b3Jkc1trXSA9IHJ3b3JkIHwgMDsKICAgICAgICBjYXJyeSA9IG5jYXJyeSB8IDA7CiAgICAgIH0KICAgICAgaWYgKGNhcnJ5ICE9PSAwKSB7CiAgICAgICAgb3V0LndvcmRzW2tdID0gY2FycnkgfCAwOwogICAgICB9IGVsc2UgewogICAgICAgIG91dC5sZW5ndGgtLTsKICAgICAgfQoKICAgICAgcmV0dXJuIG91dC5zdHJpcCgpOwogICAgfQoKICAgIC8vIFRPRE8oaW5kdXRueSk6IGl0IG1heSBiZSByZWFzb25hYmxlIHRvIG9taXQgaXQgZm9yIHVzZXJzIHdobyBkb24ndCBuZWVkCiAgICAvLyB0byB3b3JrIHdpdGggMjU2LWJpdCBudW1iZXJzLCBvdGhlcndpc2UgaXQgZ2l2ZXMgMjAlIGltcHJvdmVtZW50IGZvciAyNTYtYml0CiAgICAvLyBtdWx0aXBsaWNhdGlvbiAobGlrZSBlbGxpcHRpYyBzZWNwMjU2azEpLgogICAgdmFyIGNvbWIxME11bFRvID0gZnVuY3Rpb24gY29tYjEwTXVsVG8gKHNlbGYsIG51bSwgb3V0KSB7CiAgICAgIHZhciBhID0gc2VsZi53b3JkczsKICAgICAgdmFyIGIgPSBudW0ud29yZHM7CiAgICAgIHZhciBvID0gb3V0LndvcmRzOwogICAgICB2YXIgYyA9IDA7CiAgICAgIHZhciBsbzsKICAgICAgdmFyIG1pZDsKICAgICAgdmFyIGhpOwogICAgICB2YXIgYTAgPSBhWzBdIHwgMDsKICAgICAgdmFyIGFsMCA9IGEwICYgMHgxZmZmOwogICAgICB2YXIgYWgwID0gYTAgPj4+IDEzOwogICAgICB2YXIgYTEgPSBhWzFdIHwgMDsKICAgICAgdmFyIGFsMSA9IGExICYgMHgxZmZmOwogICAgICB2YXIgYWgxID0gYTEgPj4+IDEzOwogICAgICB2YXIgYTIgPSBhWzJdIHwgMDsKICAgICAgdmFyIGFsMiA9IGEyICYgMHgxZmZmOwogICAgICB2YXIgYWgyID0gYTIgPj4+IDEzOwogICAgICB2YXIgYTMgPSBhWzNdIHwgMDsKICAgICAgdmFyIGFsMyA9IGEzICYgMHgxZmZmOwogICAgICB2YXIgYWgzID0gYTMgPj4+IDEzOwogICAgICB2YXIgYTQgPSBhWzRdIHwgMDsKICAgICAgdmFyIGFsNCA9IGE0ICYgMHgxZmZmOwogICAgICB2YXIgYWg0ID0gYTQgPj4+IDEzOwogICAgICB2YXIgYTUgPSBhWzVdIHwgMDsKICAgICAgdmFyIGFsNSA9IGE1ICYgMHgxZmZmOwogICAgICB2YXIgYWg1ID0gYTUgPj4+IDEzOwogICAgICB2YXIgYTYgPSBhWzZdIHwgMDsKICAgICAgdmFyIGFsNiA9IGE2ICYgMHgxZmZmOwogICAgICB2YXIgYWg2ID0gYTYgPj4+IDEzOwogICAgICB2YXIgYTcgPSBhWzddIHwgMDsKICAgICAgdmFyIGFsNyA9IGE3ICYgMHgxZmZmOwogICAgICB2YXIgYWg3ID0gYTcgPj4+IDEzOwogICAgICB2YXIgYTggPSBhWzhdIHwgMDsKICAgICAgdmFyIGFsOCA9IGE4ICYgMHgxZmZmOwogICAgICB2YXIgYWg4ID0gYTggPj4+IDEzOwogICAgICB2YXIgYTkgPSBhWzldIHwgMDsKICAgICAgdmFyIGFsOSA9IGE5ICYgMHgxZmZmOwogICAgICB2YXIgYWg5ID0gYTkgPj4+IDEzOwogICAgICB2YXIgYjAgPSBiWzBdIHwgMDsKICAgICAgdmFyIGJsMCA9IGIwICYgMHgxZmZmOwogICAgICB2YXIgYmgwID0gYjAgPj4+IDEzOwogICAgICB2YXIgYjEgPSBiWzFdIHwgMDsKICAgICAgdmFyIGJsMSA9IGIxICYgMHgxZmZmOwogICAgICB2YXIgYmgxID0gYjEgPj4+IDEzOwogICAgICB2YXIgYjIgPSBiWzJdIHwgMDsKICAgICAgdmFyIGJsMiA9IGIyICYgMHgxZmZmOwogICAgICB2YXIgYmgyID0gYjIgPj4+IDEzOwogICAgICB2YXIgYjMgPSBiWzNdIHwgMDsKICAgICAgdmFyIGJsMyA9IGIzICYgMHgxZmZmOwogICAgICB2YXIgYmgzID0gYjMgPj4+IDEzOwogICAgICB2YXIgYjQgPSBiWzRdIHwgMDsKICAgICAgdmFyIGJsNCA9IGI0ICYgMHgxZmZmOwogICAgICB2YXIgYmg0ID0gYjQgPj4+IDEzOwogICAgICB2YXIgYjUgPSBiWzVdIHwgMDsKICAgICAgdmFyIGJsNSA9IGI1ICYgMHgxZmZmOwogICAgICB2YXIgYmg1ID0gYjUgPj4+IDEzOwogICAgICB2YXIgYjYgPSBiWzZdIHwgMDsKICAgICAgdmFyIGJsNiA9IGI2ICYgMHgxZmZmOwogICAgICB2YXIgYmg2ID0gYjYgPj4+IDEzOwogICAgICB2YXIgYjcgPSBiWzddIHwgMDsKICAgICAgdmFyIGJsNyA9IGI3ICYgMHgxZmZmOwogICAgICB2YXIgYmg3ID0gYjcgPj4+IDEzOwogICAgICB2YXIgYjggPSBiWzhdIHwgMDsKICAgICAgdmFyIGJsOCA9IGI4ICYgMHgxZmZmOwogICAgICB2YXIgYmg4ID0gYjggPj4+IDEzOwogICAgICB2YXIgYjkgPSBiWzldIHwgMDsKICAgICAgdmFyIGJsOSA9IGI5ICYgMHgxZmZmOwogICAgICB2YXIgYmg5ID0gYjkgPj4+IDEzOwoKICAgICAgb3V0Lm5lZ2F0aXZlID0gc2VsZi5uZWdhdGl2ZSBeIG51bS5uZWdhdGl2ZTsKICAgICAgb3V0Lmxlbmd0aCA9IDE5OwogICAgICAvKiBrID0gMCAqLwogICAgICBsbyA9IE1hdGguaW11bChhbDAsIGJsMCk7CiAgICAgIG1pZCA9IE1hdGguaW11bChhbDAsIGJoMCk7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgwLCBibDApKSB8IDA7CiAgICAgIGhpID0gTWF0aC5pbXVsKGFoMCwgYmgwKTsKICAgICAgdmFyIHcwID0gKCgoYyArIGxvKSB8IDApICsgKChtaWQgJiAweDFmZmYpIDw8IDEzKSkgfCAwOwogICAgICBjID0gKCgoaGkgKyAobWlkID4+PiAxMykpIHwgMCkgKyAodzAgPj4+IDI2KSkgfCAwOwogICAgICB3MCAmPSAweDNmZmZmZmY7CiAgICAgIC8qIGsgPSAxICovCiAgICAgIGxvID0gTWF0aC5pbXVsKGFsMSwgYmwwKTsKICAgICAgbWlkID0gTWF0aC5pbXVsKGFsMSwgYmgwKTsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDEsIGJsMCkpIHwgMDsKICAgICAgaGkgPSBNYXRoLmltdWwoYWgxLCBiaDApOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDAsIGJsMSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDAsIGJoMSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDAsIGJsMSkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgwLCBiaDEpKSB8IDA7CiAgICAgIHZhciB3MSA9ICgoKGMgKyBsbykgfCAwKSArICgobWlkICYgMHgxZmZmKSA8PCAxMykpIHwgMDsKICAgICAgYyA9ICgoKGhpICsgKG1pZCA+Pj4gMTMpKSB8IDApICsgKHcxID4+PiAyNikpIHwgMDsKICAgICAgdzEgJj0gMHgzZmZmZmZmOwogICAgICAvKiBrID0gMiAqLwogICAgICBsbyA9IE1hdGguaW11bChhbDIsIGJsMCk7CiAgICAgIG1pZCA9IE1hdGguaW11bChhbDIsIGJoMCk7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgyLCBibDApKSB8IDA7CiAgICAgIGhpID0gTWF0aC5pbXVsKGFoMiwgYmgwKTsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwxLCBibDEpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwxLCBiaDEpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgxLCBibDEpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMSwgYmgxKSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDAsIGJsMikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDAsIGJoMikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDAsIGJsMikpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgwLCBiaDIpKSB8IDA7CiAgICAgIHZhciB3MiA9ICgoKGMgKyBsbykgfCAwKSArICgobWlkICYgMHgxZmZmKSA8PCAxMykpIHwgMDsKICAgICAgYyA9ICgoKGhpICsgKG1pZCA+Pj4gMTMpKSB8IDApICsgKHcyID4+PiAyNikpIHwgMDsKICAgICAgdzIgJj0gMHgzZmZmZmZmOwogICAgICAvKiBrID0gMyAqLwogICAgICBsbyA9IE1hdGguaW11bChhbDMsIGJsMCk7CiAgICAgIG1pZCA9IE1hdGguaW11bChhbDMsIGJoMCk7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgzLCBibDApKSB8IDA7CiAgICAgIGhpID0gTWF0aC5pbXVsKGFoMywgYmgwKTsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwyLCBibDEpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwyLCBiaDEpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgyLCBibDEpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMiwgYmgxKSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDEsIGJsMikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDEsIGJoMikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDEsIGJsMikpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgxLCBiaDIpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMCwgYmwzKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMCwgYmgzKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMCwgYmwzKSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDAsIGJoMykpIHwgMDsKICAgICAgdmFyIHczID0gKCgoYyArIGxvKSB8IDApICsgKChtaWQgJiAweDFmZmYpIDw8IDEzKSkgfCAwOwogICAgICBjID0gKCgoaGkgKyAobWlkID4+PiAxMykpIHwgMCkgKyAodzMgPj4+IDI2KSkgfCAwOwogICAgICB3MyAmPSAweDNmZmZmZmY7CiAgICAgIC8qIGsgPSA0ICovCiAgICAgIGxvID0gTWF0aC5pbXVsKGFsNCwgYmwwKTsKICAgICAgbWlkID0gTWF0aC5pbXVsKGFsNCwgYmgwKTsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDQsIGJsMCkpIHwgMDsKICAgICAgaGkgPSBNYXRoLmltdWwoYWg0LCBiaDApOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDMsIGJsMSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDMsIGJoMSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDMsIGJsMSkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgzLCBiaDEpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMiwgYmwyKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMiwgYmgyKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMiwgYmwyKSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDIsIGJoMikpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwxLCBibDMpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwxLCBiaDMpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgxLCBibDMpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMSwgYmgzKSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDAsIGJsNCkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDAsIGJoNCkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDAsIGJsNCkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgwLCBiaDQpKSB8IDA7CiAgICAgIHZhciB3NCA9ICgoKGMgKyBsbykgfCAwKSArICgobWlkICYgMHgxZmZmKSA8PCAxMykpIHwgMDsKICAgICAgYyA9ICgoKGhpICsgKG1pZCA+Pj4gMTMpKSB8IDApICsgKHc0ID4+PiAyNikpIHwgMDsKICAgICAgdzQgJj0gMHgzZmZmZmZmOwogICAgICAvKiBrID0gNSAqLwogICAgICBsbyA9IE1hdGguaW11bChhbDUsIGJsMCk7CiAgICAgIG1pZCA9IE1hdGguaW11bChhbDUsIGJoMCk7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg1LCBibDApKSB8IDA7CiAgICAgIGhpID0gTWF0aC5pbXVsKGFoNSwgYmgwKTsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw0LCBibDEpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw0LCBiaDEpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg0LCBibDEpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNCwgYmgxKSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDMsIGJsMikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDMsIGJoMikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDMsIGJsMikpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgzLCBiaDIpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMiwgYmwzKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMiwgYmgzKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMiwgYmwzKSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDIsIGJoMykpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwxLCBibDQpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwxLCBiaDQpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgxLCBibDQpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMSwgYmg0KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDAsIGJsNSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDAsIGJoNSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDAsIGJsNSkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgwLCBiaDUpKSB8IDA7CiAgICAgIHZhciB3NSA9ICgoKGMgKyBsbykgfCAwKSArICgobWlkICYgMHgxZmZmKSA8PCAxMykpIHwgMDsKICAgICAgYyA9ICgoKGhpICsgKG1pZCA+Pj4gMTMpKSB8IDApICsgKHc1ID4+PiAyNikpIHwgMDsKICAgICAgdzUgJj0gMHgzZmZmZmZmOwogICAgICAvKiBrID0gNiAqLwogICAgICBsbyA9IE1hdGguaW11bChhbDYsIGJsMCk7CiAgICAgIG1pZCA9IE1hdGguaW11bChhbDYsIGJoMCk7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg2LCBibDApKSB8IDA7CiAgICAgIGhpID0gTWF0aC5pbXVsKGFoNiwgYmgwKTsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw1LCBibDEpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw1LCBiaDEpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg1LCBibDEpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNSwgYmgxKSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDQsIGJsMikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDQsIGJoMikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDQsIGJsMikpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg0LCBiaDIpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMywgYmwzKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMywgYmgzKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMywgYmwzKSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDMsIGJoMykpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwyLCBibDQpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwyLCBiaDQpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgyLCBibDQpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMiwgYmg0KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDEsIGJsNSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDEsIGJoNSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDEsIGJsNSkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgxLCBiaDUpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMCwgYmw2KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMCwgYmg2KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMCwgYmw2KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDAsIGJoNikpIHwgMDsKICAgICAgdmFyIHc2ID0gKCgoYyArIGxvKSB8IDApICsgKChtaWQgJiAweDFmZmYpIDw8IDEzKSkgfCAwOwogICAgICBjID0gKCgoaGkgKyAobWlkID4+PiAxMykpIHwgMCkgKyAodzYgPj4+IDI2KSkgfCAwOwogICAgICB3NiAmPSAweDNmZmZmZmY7CiAgICAgIC8qIGsgPSA3ICovCiAgICAgIGxvID0gTWF0aC5pbXVsKGFsNywgYmwwKTsKICAgICAgbWlkID0gTWF0aC5pbXVsKGFsNywgYmgwKTsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDcsIGJsMCkpIHwgMDsKICAgICAgaGkgPSBNYXRoLmltdWwoYWg3LCBiaDApOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDYsIGJsMSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDYsIGJoMSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDYsIGJsMSkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg2LCBiaDEpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNSwgYmwyKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNSwgYmgyKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNSwgYmwyKSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDUsIGJoMikpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw0LCBibDMpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw0LCBiaDMpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg0LCBibDMpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNCwgYmgzKSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDMsIGJsNCkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDMsIGJoNCkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDMsIGJsNCkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgzLCBiaDQpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMiwgYmw1KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMiwgYmg1KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMiwgYmw1KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDIsIGJoNSkpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwxLCBibDYpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwxLCBiaDYpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgxLCBibDYpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMSwgYmg2KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDAsIGJsNykpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDAsIGJoNykpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDAsIGJsNykpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgwLCBiaDcpKSB8IDA7CiAgICAgIHZhciB3NyA9ICgoKGMgKyBsbykgfCAwKSArICgobWlkICYgMHgxZmZmKSA8PCAxMykpIHwgMDsKICAgICAgYyA9ICgoKGhpICsgKG1pZCA+Pj4gMTMpKSB8IDApICsgKHc3ID4+PiAyNikpIHwgMDsKICAgICAgdzcgJj0gMHgzZmZmZmZmOwogICAgICAvKiBrID0gOCAqLwogICAgICBsbyA9IE1hdGguaW11bChhbDgsIGJsMCk7CiAgICAgIG1pZCA9IE1hdGguaW11bChhbDgsIGJoMCk7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg4LCBibDApKSB8IDA7CiAgICAgIGhpID0gTWF0aC5pbXVsKGFoOCwgYmgwKTsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw3LCBibDEpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw3LCBiaDEpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg3LCBibDEpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNywgYmgxKSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDYsIGJsMikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDYsIGJoMikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDYsIGJsMikpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg2LCBiaDIpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNSwgYmwzKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNSwgYmgzKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNSwgYmwzKSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDUsIGJoMykpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw0LCBibDQpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw0LCBiaDQpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg0LCBibDQpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNCwgYmg0KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDMsIGJsNSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDMsIGJoNSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDMsIGJsNSkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgzLCBiaDUpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMiwgYmw2KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMiwgYmg2KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMiwgYmw2KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDIsIGJoNikpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwxLCBibDcpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwxLCBiaDcpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgxLCBibDcpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMSwgYmg3KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDAsIGJsOCkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDAsIGJoOCkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDAsIGJsOCkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgwLCBiaDgpKSB8IDA7CiAgICAgIHZhciB3OCA9ICgoKGMgKyBsbykgfCAwKSArICgobWlkICYgMHgxZmZmKSA8PCAxMykpIHwgMDsKICAgICAgYyA9ICgoKGhpICsgKG1pZCA+Pj4gMTMpKSB8IDApICsgKHc4ID4+PiAyNikpIHwgMDsKICAgICAgdzggJj0gMHgzZmZmZmZmOwogICAgICAvKiBrID0gOSAqLwogICAgICBsbyA9IE1hdGguaW11bChhbDksIGJsMCk7CiAgICAgIG1pZCA9IE1hdGguaW11bChhbDksIGJoMCk7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg5LCBibDApKSB8IDA7CiAgICAgIGhpID0gTWF0aC5pbXVsKGFoOSwgYmgwKTsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw4LCBibDEpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw4LCBiaDEpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg4LCBibDEpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoOCwgYmgxKSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDcsIGJsMikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDcsIGJoMikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDcsIGJsMikpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg3LCBiaDIpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNiwgYmwzKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNiwgYmgzKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNiwgYmwzKSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDYsIGJoMykpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw1LCBibDQpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw1LCBiaDQpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg1LCBibDQpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNSwgYmg0KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDQsIGJsNSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDQsIGJoNSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDQsIGJsNSkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg0LCBiaDUpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMywgYmw2KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMywgYmg2KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMywgYmw2KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDMsIGJoNikpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwyLCBibDcpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwyLCBiaDcpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgyLCBibDcpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMiwgYmg3KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDEsIGJsOCkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDEsIGJoOCkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDEsIGJsOCkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgxLCBiaDgpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMCwgYmw5KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMCwgYmg5KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMCwgYmw5KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDAsIGJoOSkpIHwgMDsKICAgICAgdmFyIHc5ID0gKCgoYyArIGxvKSB8IDApICsgKChtaWQgJiAweDFmZmYpIDw8IDEzKSkgfCAwOwogICAgICBjID0gKCgoaGkgKyAobWlkID4+PiAxMykpIHwgMCkgKyAodzkgPj4+IDI2KSkgfCAwOwogICAgICB3OSAmPSAweDNmZmZmZmY7CiAgICAgIC8qIGsgPSAxMCAqLwogICAgICBsbyA9IE1hdGguaW11bChhbDksIGJsMSk7CiAgICAgIG1pZCA9IE1hdGguaW11bChhbDksIGJoMSk7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg5LCBibDEpKSB8IDA7CiAgICAgIGhpID0gTWF0aC5pbXVsKGFoOSwgYmgxKTsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw4LCBibDIpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw4LCBiaDIpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg4LCBibDIpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoOCwgYmgyKSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDcsIGJsMykpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDcsIGJoMykpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDcsIGJsMykpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg3LCBiaDMpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNiwgYmw0KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNiwgYmg0KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNiwgYmw0KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDYsIGJoNCkpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw1LCBibDUpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw1LCBiaDUpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg1LCBibDUpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNSwgYmg1KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDQsIGJsNikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDQsIGJoNikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDQsIGJsNikpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg0LCBiaDYpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMywgYmw3KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMywgYmg3KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMywgYmw3KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDMsIGJoNykpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwyLCBibDgpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwyLCBiaDgpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgyLCBibDgpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMiwgYmg4KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDEsIGJsOSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDEsIGJoOSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDEsIGJsOSkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgxLCBiaDkpKSB8IDA7CiAgICAgIHZhciB3MTAgPSAoKChjICsgbG8pIHwgMCkgKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpKSB8IDA7CiAgICAgIGMgPSAoKChoaSArIChtaWQgPj4+IDEzKSkgfCAwKSArICh3MTAgPj4+IDI2KSkgfCAwOwogICAgICB3MTAgJj0gMHgzZmZmZmZmOwogICAgICAvKiBrID0gMTEgKi8KICAgICAgbG8gPSBNYXRoLmltdWwoYWw5LCBibDIpOwogICAgICBtaWQgPSBNYXRoLmltdWwoYWw5LCBiaDIpOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoOSwgYmwyKSkgfCAwOwogICAgICBoaSA9IE1hdGguaW11bChhaDksIGJoMik7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsOCwgYmwzKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsOCwgYmgzKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoOCwgYmwzKSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDgsIGJoMykpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw3LCBibDQpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw3LCBiaDQpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg3LCBibDQpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNywgYmg0KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDYsIGJsNSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDYsIGJoNSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDYsIGJsNSkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg2LCBiaDUpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNSwgYmw2KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNSwgYmg2KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNSwgYmw2KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDUsIGJoNikpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw0LCBibDcpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw0LCBiaDcpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg0LCBibDcpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNCwgYmg3KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDMsIGJsOCkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDMsIGJoOCkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDMsIGJsOCkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgzLCBiaDgpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMiwgYmw5KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMiwgYmg5KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMiwgYmw5KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDIsIGJoOSkpIHwgMDsKICAgICAgdmFyIHcxMSA9ICgoKGMgKyBsbykgfCAwKSArICgobWlkICYgMHgxZmZmKSA8PCAxMykpIHwgMDsKICAgICAgYyA9ICgoKGhpICsgKG1pZCA+Pj4gMTMpKSB8IDApICsgKHcxMSA+Pj4gMjYpKSB8IDA7CiAgICAgIHcxMSAmPSAweDNmZmZmZmY7CiAgICAgIC8qIGsgPSAxMiAqLwogICAgICBsbyA9IE1hdGguaW11bChhbDksIGJsMyk7CiAgICAgIG1pZCA9IE1hdGguaW11bChhbDksIGJoMyk7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg5LCBibDMpKSB8IDA7CiAgICAgIGhpID0gTWF0aC5pbXVsKGFoOSwgYmgzKTsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw4LCBibDQpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw4LCBiaDQpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg4LCBibDQpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoOCwgYmg0KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDcsIGJsNSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDcsIGJoNSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDcsIGJsNSkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg3LCBiaDUpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNiwgYmw2KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNiwgYmg2KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNiwgYmw2KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDYsIGJoNikpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw1LCBibDcpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw1LCBiaDcpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg1LCBibDcpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNSwgYmg3KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDQsIGJsOCkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDQsIGJoOCkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDQsIGJsOCkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg0LCBiaDgpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMywgYmw5KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMywgYmg5KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMywgYmw5KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDMsIGJoOSkpIHwgMDsKICAgICAgdmFyIHcxMiA9ICgoKGMgKyBsbykgfCAwKSArICgobWlkICYgMHgxZmZmKSA8PCAxMykpIHwgMDsKICAgICAgYyA9ICgoKGhpICsgKG1pZCA+Pj4gMTMpKSB8IDApICsgKHcxMiA+Pj4gMjYpKSB8IDA7CiAgICAgIHcxMiAmPSAweDNmZmZmZmY7CiAgICAgIC8qIGsgPSAxMyAqLwogICAgICBsbyA9IE1hdGguaW11bChhbDksIGJsNCk7CiAgICAgIG1pZCA9IE1hdGguaW11bChhbDksIGJoNCk7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg5LCBibDQpKSB8IDA7CiAgICAgIGhpID0gTWF0aC5pbXVsKGFoOSwgYmg0KTsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw4LCBibDUpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw4LCBiaDUpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg4LCBibDUpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoOCwgYmg1KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDcsIGJsNikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDcsIGJoNikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDcsIGJsNikpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg3LCBiaDYpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNiwgYmw3KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNiwgYmg3KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNiwgYmw3KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDYsIGJoNykpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw1LCBibDgpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw1LCBiaDgpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg1LCBibDgpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNSwgYmg4KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDQsIGJsOSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDQsIGJoOSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDQsIGJsOSkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg0LCBiaDkpKSB8IDA7CiAgICAgIHZhciB3MTMgPSAoKChjICsgbG8pIHwgMCkgKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpKSB8IDA7CiAgICAgIGMgPSAoKChoaSArIChtaWQgPj4+IDEzKSkgfCAwKSArICh3MTMgPj4+IDI2KSkgfCAwOwogICAgICB3MTMgJj0gMHgzZmZmZmZmOwogICAgICAvKiBrID0gMTQgKi8KICAgICAgbG8gPSBNYXRoLmltdWwoYWw5LCBibDUpOwogICAgICBtaWQgPSBNYXRoLmltdWwoYWw5LCBiaDUpOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoOSwgYmw1KSkgfCAwOwogICAgICBoaSA9IE1hdGguaW11bChhaDksIGJoNSk7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsOCwgYmw2KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsOCwgYmg2KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoOCwgYmw2KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDgsIGJoNikpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw3LCBibDcpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw3LCBiaDcpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg3LCBibDcpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNywgYmg3KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDYsIGJsOCkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDYsIGJoOCkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDYsIGJsOCkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg2LCBiaDgpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNSwgYmw5KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNSwgYmg5KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNSwgYmw5KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDUsIGJoOSkpIHwgMDsKICAgICAgdmFyIHcxNCA9ICgoKGMgKyBsbykgfCAwKSArICgobWlkICYgMHgxZmZmKSA8PCAxMykpIHwgMDsKICAgICAgYyA9ICgoKGhpICsgKG1pZCA+Pj4gMTMpKSB8IDApICsgKHcxNCA+Pj4gMjYpKSB8IDA7CiAgICAgIHcxNCAmPSAweDNmZmZmZmY7CiAgICAgIC8qIGsgPSAxNSAqLwogICAgICBsbyA9IE1hdGguaW11bChhbDksIGJsNik7CiAgICAgIG1pZCA9IE1hdGguaW11bChhbDksIGJoNik7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg5LCBibDYpKSB8IDA7CiAgICAgIGhpID0gTWF0aC5pbXVsKGFoOSwgYmg2KTsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw4LCBibDcpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw4LCBiaDcpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg4LCBibDcpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoOCwgYmg3KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDcsIGJsOCkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDcsIGJoOCkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDcsIGJsOCkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg3LCBiaDgpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNiwgYmw5KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNiwgYmg5KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNiwgYmw5KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDYsIGJoOSkpIHwgMDsKICAgICAgdmFyIHcxNSA9ICgoKGMgKyBsbykgfCAwKSArICgobWlkICYgMHgxZmZmKSA8PCAxMykpIHwgMDsKICAgICAgYyA9ICgoKGhpICsgKG1pZCA+Pj4gMTMpKSB8IDApICsgKHcxNSA+Pj4gMjYpKSB8IDA7CiAgICAgIHcxNSAmPSAweDNmZmZmZmY7CiAgICAgIC8qIGsgPSAxNiAqLwogICAgICBsbyA9IE1hdGguaW11bChhbDksIGJsNyk7CiAgICAgIG1pZCA9IE1hdGguaW11bChhbDksIGJoNyk7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg5LCBibDcpKSB8IDA7CiAgICAgIGhpID0gTWF0aC5pbXVsKGFoOSwgYmg3KTsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw4LCBibDgpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw4LCBiaDgpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg4LCBibDgpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoOCwgYmg4KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDcsIGJsOSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDcsIGJoOSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDcsIGJsOSkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg3LCBiaDkpKSB8IDA7CiAgICAgIHZhciB3MTYgPSAoKChjICsgbG8pIHwgMCkgKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpKSB8IDA7CiAgICAgIGMgPSAoKChoaSArIChtaWQgPj4+IDEzKSkgfCAwKSArICh3MTYgPj4+IDI2KSkgfCAwOwogICAgICB3MTYgJj0gMHgzZmZmZmZmOwogICAgICAvKiBrID0gMTcgKi8KICAgICAgbG8gPSBNYXRoLmltdWwoYWw5LCBibDgpOwogICAgICBtaWQgPSBNYXRoLmltdWwoYWw5LCBiaDgpOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoOSwgYmw4KSkgfCAwOwogICAgICBoaSA9IE1hdGguaW11bChhaDksIGJoOCk7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsOCwgYmw5KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsOCwgYmg5KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoOCwgYmw5KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDgsIGJoOSkpIHwgMDsKICAgICAgdmFyIHcxNyA9ICgoKGMgKyBsbykgfCAwKSArICgobWlkICYgMHgxZmZmKSA8PCAxMykpIHwgMDsKICAgICAgYyA9ICgoKGhpICsgKG1pZCA+Pj4gMTMpKSB8IDApICsgKHcxNyA+Pj4gMjYpKSB8IDA7CiAgICAgIHcxNyAmPSAweDNmZmZmZmY7CiAgICAgIC8qIGsgPSAxOCAqLwogICAgICBsbyA9IE1hdGguaW11bChhbDksIGJsOSk7CiAgICAgIG1pZCA9IE1hdGguaW11bChhbDksIGJoOSk7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg5LCBibDkpKSB8IDA7CiAgICAgIGhpID0gTWF0aC5pbXVsKGFoOSwgYmg5KTsKICAgICAgdmFyIHcxOCA9ICgoKGMgKyBsbykgfCAwKSArICgobWlkICYgMHgxZmZmKSA8PCAxMykpIHwgMDsKICAgICAgYyA9ICgoKGhpICsgKG1pZCA+Pj4gMTMpKSB8IDApICsgKHcxOCA+Pj4gMjYpKSB8IDA7CiAgICAgIHcxOCAmPSAweDNmZmZmZmY7CiAgICAgIG9bMF0gPSB3MDsKICAgICAgb1sxXSA9IHcxOwogICAgICBvWzJdID0gdzI7CiAgICAgIG9bM10gPSB3MzsKICAgICAgb1s0XSA9IHc0OwogICAgICBvWzVdID0gdzU7CiAgICAgIG9bNl0gPSB3NjsKICAgICAgb1s3XSA9IHc3OwogICAgICBvWzhdID0gdzg7CiAgICAgIG9bOV0gPSB3OTsKICAgICAgb1sxMF0gPSB3MTA7CiAgICAgIG9bMTFdID0gdzExOwogICAgICBvWzEyXSA9IHcxMjsKICAgICAgb1sxM10gPSB3MTM7CiAgICAgIG9bMTRdID0gdzE0OwogICAgICBvWzE1XSA9IHcxNTsKICAgICAgb1sxNl0gPSB3MTY7CiAgICAgIG9bMTddID0gdzE3OwogICAgICBvWzE4XSA9IHcxODsKICAgICAgaWYgKGMgIT09IDApIHsKICAgICAgICBvWzE5XSA9IGM7CiAgICAgICAgb3V0Lmxlbmd0aCsrOwogICAgICB9CiAgICAgIHJldHVybiBvdXQ7CiAgICB9OwoKICAgIC8vIFBvbHlmaWxsIGNvbWIKICAgIGlmICghTWF0aC5pbXVsKSB7CiAgICAgIGNvbWIxME11bFRvID0gc21hbGxNdWxUbzsKICAgIH0KCiAgICBmdW5jdGlvbiBiaWdNdWxUbyAoc2VsZiwgbnVtLCBvdXQpIHsKICAgICAgb3V0Lm5lZ2F0aXZlID0gbnVtLm5lZ2F0aXZlIF4gc2VsZi5uZWdhdGl2ZTsKICAgICAgb3V0Lmxlbmd0aCA9IHNlbGYubGVuZ3RoICsgbnVtLmxlbmd0aDsKCiAgICAgIHZhciBjYXJyeSA9IDA7CiAgICAgIHZhciBobmNhcnJ5ID0gMDsKICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBvdXQubGVuZ3RoIC0gMTsgaysrKSB7CiAgICAgICAgLy8gU3VtIGFsbCB3b3JkcyB3aXRoIHRoZSBzYW1lIGBpICsgaiA9IGtgIGFuZCBhY2N1bXVsYXRlIGBuY2FycnlgLAogICAgICAgIC8vIG5vdGUgdGhhdCBuY2FycnkgY291bGQgYmUgPj0gMHgzZmZmZmZmCiAgICAgICAgdmFyIG5jYXJyeSA9IGhuY2Fycnk7CiAgICAgICAgaG5jYXJyeSA9IDA7CiAgICAgICAgdmFyIHJ3b3JkID0gY2FycnkgJiAweDNmZmZmZmY7CiAgICAgICAgdmFyIG1heEogPSBNYXRoLm1pbihrLCBudW0ubGVuZ3RoIC0gMSk7CiAgICAgICAgZm9yICh2YXIgaiA9IE1hdGgubWF4KDAsIGsgLSBzZWxmLmxlbmd0aCArIDEpOyBqIDw9IG1heEo7IGorKykgewogICAgICAgICAgdmFyIGkgPSBrIC0gajsKICAgICAgICAgIHZhciBhID0gc2VsZi53b3Jkc1tpXSB8IDA7CiAgICAgICAgICB2YXIgYiA9IG51bS53b3Jkc1tqXSB8IDA7CiAgICAgICAgICB2YXIgciA9IGEgKiBiOwoKICAgICAgICAgIHZhciBsbyA9IHIgJiAweDNmZmZmZmY7CiAgICAgICAgICBuY2FycnkgPSAobmNhcnJ5ICsgKChyIC8gMHg0MDAwMDAwKSB8IDApKSB8IDA7CiAgICAgICAgICBsbyA9IChsbyArIHJ3b3JkKSB8IDA7CiAgICAgICAgICByd29yZCA9IGxvICYgMHgzZmZmZmZmOwogICAgICAgICAgbmNhcnJ5ID0gKG5jYXJyeSArIChsbyA+Pj4gMjYpKSB8IDA7CgogICAgICAgICAgaG5jYXJyeSArPSBuY2FycnkgPj4+IDI2OwogICAgICAgICAgbmNhcnJ5ICY9IDB4M2ZmZmZmZjsKICAgICAgICB9CiAgICAgICAgb3V0LndvcmRzW2tdID0gcndvcmQ7CiAgICAgICAgY2FycnkgPSBuY2Fycnk7CiAgICAgICAgbmNhcnJ5ID0gaG5jYXJyeTsKICAgICAgfQogICAgICBpZiAoY2FycnkgIT09IDApIHsKICAgICAgICBvdXQud29yZHNba10gPSBjYXJyeTsKICAgICAgfSBlbHNlIHsKICAgICAgICBvdXQubGVuZ3RoLS07CiAgICAgIH0KCiAgICAgIHJldHVybiBvdXQuc3RyaXAoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBqdW1ib011bFRvIChzZWxmLCBudW0sIG91dCkgewogICAgICB2YXIgZmZ0bSA9IG5ldyBGRlRNKCk7CiAgICAgIHJldHVybiBmZnRtLm11bHAoc2VsZiwgbnVtLCBvdXQpOwogICAgfQoKICAgIEJOLnByb3RvdHlwZS5tdWxUbyA9IGZ1bmN0aW9uIG11bFRvIChudW0sIG91dCkgewogICAgICB2YXIgcmVzOwogICAgICB2YXIgbGVuID0gdGhpcy5sZW5ndGggKyBudW0ubGVuZ3RoOwogICAgICBpZiAodGhpcy5sZW5ndGggPT09IDEwICYmIG51bS5sZW5ndGggPT09IDEwKSB7CiAgICAgICAgcmVzID0gY29tYjEwTXVsVG8odGhpcywgbnVtLCBvdXQpOwogICAgICB9IGVsc2UgaWYgKGxlbiA8IDYzKSB7CiAgICAgICAgcmVzID0gc21hbGxNdWxUbyh0aGlzLCBudW0sIG91dCk7CiAgICAgIH0gZWxzZSBpZiAobGVuIDwgMTAyNCkgewogICAgICAgIHJlcyA9IGJpZ011bFRvKHRoaXMsIG51bSwgb3V0KTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXMgPSBqdW1ib011bFRvKHRoaXMsIG51bSwgb3V0KTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlczsKICAgIH07CgogICAgLy8gQ29vbGV5LVR1a2V5IGFsZ29yaXRobSBmb3IgRkZUCiAgICAvLyBzbGlnaHRseSByZXZpc2l0ZWQgdG8gcmVseSBvbiBsb29waW5nIGluc3RlYWQgb2YgcmVjdXJzaW9uCgogICAgZnVuY3Rpb24gRkZUTSAoeCwgeSkgewogICAgICB0aGlzLnggPSB4OwogICAgICB0aGlzLnkgPSB5OwogICAgfQoKICAgIEZGVE0ucHJvdG90eXBlLm1ha2VSQlQgPSBmdW5jdGlvbiBtYWtlUkJUIChOKSB7CiAgICAgIHZhciB0ID0gbmV3IEFycmF5KE4pOwogICAgICB2YXIgbCA9IEJOLnByb3RvdHlwZS5fY291bnRCaXRzKE4pIC0gMTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBOOyBpKyspIHsKICAgICAgICB0W2ldID0gdGhpcy5yZXZCaW4oaSwgbCwgTik7CiAgICAgIH0KCiAgICAgIHJldHVybiB0OwogICAgfTsKCiAgICAvLyBSZXR1cm5zIGJpbmFyeS1yZXZlcnNlZCByZXByZXNlbnRhdGlvbiBvZiBgeGAKICAgIEZGVE0ucHJvdG90eXBlLnJldkJpbiA9IGZ1bmN0aW9uIHJldkJpbiAoeCwgbCwgTikgewogICAgICBpZiAoeCA9PT0gMCB8fCB4ID09PSBOIC0gMSkgcmV0dXJuIHg7CgogICAgICB2YXIgcmIgPSAwOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGw7IGkrKykgewogICAgICAgIHJiIHw9ICh4ICYgMSkgPDwgKGwgLSBpIC0gMSk7CiAgICAgICAgeCA+Pj0gMTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJiOwogICAgfTsKCiAgICAvLyBQZXJmb3JtcyAidHdlZWRsaW5nIiBwaGFzZSwgdGhlcmVmb3JlICdlbXVsYXRpbmcnCiAgICAvLyBiZWhhdmlvdXIgb2YgdGhlIHJlY3Vyc2l2ZSBhbGdvcml0aG0KICAgIEZGVE0ucHJvdG90eXBlLnBlcm11dGUgPSBmdW5jdGlvbiBwZXJtdXRlIChyYnQsIHJ3cywgaXdzLCBydHdzLCBpdHdzLCBOKSB7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgTjsgaSsrKSB7CiAgICAgICAgcnR3c1tpXSA9IHJ3c1tyYnRbaV1dOwogICAgICAgIGl0d3NbaV0gPSBpd3NbcmJ0W2ldXTsKICAgICAgfQogICAgfTsKCiAgICBGRlRNLnByb3RvdHlwZS50cmFuc2Zvcm0gPSBmdW5jdGlvbiB0cmFuc2Zvcm0gKHJ3cywgaXdzLCBydHdzLCBpdHdzLCBOLCByYnQpIHsKICAgICAgdGhpcy5wZXJtdXRlKHJidCwgcndzLCBpd3MsIHJ0d3MsIGl0d3MsIE4pOwoKICAgICAgZm9yICh2YXIgcyA9IDE7IHMgPCBOOyBzIDw8PSAxKSB7CiAgICAgICAgdmFyIGwgPSBzIDw8IDE7CgogICAgICAgIHZhciBydHdkZiA9IE1hdGguY29zKDIgKiBNYXRoLlBJIC8gbCk7CiAgICAgICAgdmFyIGl0d2RmID0gTWF0aC5zaW4oMiAqIE1hdGguUEkgLyBsKTsKCiAgICAgICAgZm9yICh2YXIgcCA9IDA7IHAgPCBOOyBwICs9IGwpIHsKICAgICAgICAgIHZhciBydHdkZl8gPSBydHdkZjsKICAgICAgICAgIHZhciBpdHdkZl8gPSBpdHdkZjsKCiAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHM7IGorKykgewogICAgICAgICAgICB2YXIgcmUgPSBydHdzW3AgKyBqXTsKICAgICAgICAgICAgdmFyIGllID0gaXR3c1twICsgal07CgogICAgICAgICAgICB2YXIgcm8gPSBydHdzW3AgKyBqICsgc107CiAgICAgICAgICAgIHZhciBpbyA9IGl0d3NbcCArIGogKyBzXTsKCiAgICAgICAgICAgIHZhciByeCA9IHJ0d2RmXyAqIHJvIC0gaXR3ZGZfICogaW87CgogICAgICAgICAgICBpbyA9IHJ0d2RmXyAqIGlvICsgaXR3ZGZfICogcm87CiAgICAgICAgICAgIHJvID0gcng7CgogICAgICAgICAgICBydHdzW3AgKyBqXSA9IHJlICsgcm87CiAgICAgICAgICAgIGl0d3NbcCArIGpdID0gaWUgKyBpbzsKCiAgICAgICAgICAgIHJ0d3NbcCArIGogKyBzXSA9IHJlIC0gcm87CiAgICAgICAgICAgIGl0d3NbcCArIGogKyBzXSA9IGllIC0gaW87CgogICAgICAgICAgICAvKiBqc2hpbnQgbWF4ZGVwdGggOiBmYWxzZSAqLwogICAgICAgICAgICBpZiAoaiAhPT0gbCkgewogICAgICAgICAgICAgIHJ4ID0gcnR3ZGYgKiBydHdkZl8gLSBpdHdkZiAqIGl0d2RmXzsKCiAgICAgICAgICAgICAgaXR3ZGZfID0gcnR3ZGYgKiBpdHdkZl8gKyBpdHdkZiAqIHJ0d2RmXzsKICAgICAgICAgICAgICBydHdkZl8gPSByeDsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfTsKCiAgICBGRlRNLnByb3RvdHlwZS5ndWVzc0xlbjEzYiA9IGZ1bmN0aW9uIGd1ZXNzTGVuMTNiIChuLCBtKSB7CiAgICAgIHZhciBOID0gTWF0aC5tYXgobSwgbikgfCAxOwogICAgICB2YXIgb2RkID0gTiAmIDE7CiAgICAgIHZhciBpID0gMDsKICAgICAgZm9yIChOID0gTiAvIDIgfCAwOyBOOyBOID0gTiA+Pj4gMSkgewogICAgICAgIGkrKzsKICAgICAgfQoKICAgICAgcmV0dXJuIDEgPDwgaSArIDEgKyBvZGQ7CiAgICB9OwoKICAgIEZGVE0ucHJvdG90eXBlLmNvbmp1Z2F0ZSA9IGZ1bmN0aW9uIGNvbmp1Z2F0ZSAocndzLCBpd3MsIE4pIHsKICAgICAgaWYgKE4gPD0gMSkgcmV0dXJuOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBOIC8gMjsgaSsrKSB7CiAgICAgICAgdmFyIHQgPSByd3NbaV07CgogICAgICAgIHJ3c1tpXSA9IHJ3c1tOIC0gaSAtIDFdOwogICAgICAgIHJ3c1tOIC0gaSAtIDFdID0gdDsKCiAgICAgICAgdCA9IGl3c1tpXTsKCiAgICAgICAgaXdzW2ldID0gLWl3c1tOIC0gaSAtIDFdOwogICAgICAgIGl3c1tOIC0gaSAtIDFdID0gLXQ7CiAgICAgIH0KICAgIH07CgogICAgRkZUTS5wcm90b3R5cGUubm9ybWFsaXplMTNiID0gZnVuY3Rpb24gbm9ybWFsaXplMTNiICh3cywgTikgewogICAgICB2YXIgY2FycnkgPSAwOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IE4gLyAyOyBpKyspIHsKICAgICAgICB2YXIgdyA9IE1hdGgucm91bmQod3NbMiAqIGkgKyAxXSAvIE4pICogMHgyMDAwICsKICAgICAgICAgIE1hdGgucm91bmQod3NbMiAqIGldIC8gTikgKwogICAgICAgICAgY2Fycnk7CgogICAgICAgIHdzW2ldID0gdyAmIDB4M2ZmZmZmZjsKCiAgICAgICAgaWYgKHcgPCAweDQwMDAwMDApIHsKICAgICAgICAgIGNhcnJ5ID0gMDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY2FycnkgPSB3IC8gMHg0MDAwMDAwIHwgMDsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiB3czsKICAgIH07CgogICAgRkZUTS5wcm90b3R5cGUuY29udmVydDEzYiA9IGZ1bmN0aW9uIGNvbnZlcnQxM2IgKHdzLCBsZW4sIHJ3cywgTikgewogICAgICB2YXIgY2FycnkgPSAwOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgY2FycnkgPSBjYXJyeSArICh3c1tpXSB8IDApOwoKICAgICAgICByd3NbMiAqIGldID0gY2FycnkgJiAweDFmZmY7IGNhcnJ5ID0gY2FycnkgPj4+IDEzOwogICAgICAgIHJ3c1syICogaSArIDFdID0gY2FycnkgJiAweDFmZmY7IGNhcnJ5ID0gY2FycnkgPj4+IDEzOwogICAgICB9CgogICAgICAvLyBQYWQgd2l0aCB6ZXJvZXMKICAgICAgZm9yIChpID0gMiAqIGxlbjsgaSA8IE47ICsraSkgewogICAgICAgIHJ3c1tpXSA9IDA7CiAgICAgIH0KCiAgICAgIGFzc2VydChjYXJyeSA9PT0gMCk7CiAgICAgIGFzc2VydCgoY2FycnkgJiB+MHgxZmZmKSA9PT0gMCk7CiAgICB9OwoKICAgIEZGVE0ucHJvdG90eXBlLnN0dWIgPSBmdW5jdGlvbiBzdHViIChOKSB7CiAgICAgIHZhciBwaCA9IG5ldyBBcnJheShOKTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBOOyBpKyspIHsKICAgICAgICBwaFtpXSA9IDA7CiAgICAgIH0KCiAgICAgIHJldHVybiBwaDsKICAgIH07CgogICAgRkZUTS5wcm90b3R5cGUubXVscCA9IGZ1bmN0aW9uIG11bHAgKHgsIHksIG91dCkgewogICAgICB2YXIgTiA9IDIgKiB0aGlzLmd1ZXNzTGVuMTNiKHgubGVuZ3RoLCB5Lmxlbmd0aCk7CgogICAgICB2YXIgcmJ0ID0gdGhpcy5tYWtlUkJUKE4pOwoKICAgICAgdmFyIF8gPSB0aGlzLnN0dWIoTik7CgogICAgICB2YXIgcndzID0gbmV3IEFycmF5KE4pOwogICAgICB2YXIgcndzdCA9IG5ldyBBcnJheShOKTsKICAgICAgdmFyIGl3c3QgPSBuZXcgQXJyYXkoTik7CgogICAgICB2YXIgbnJ3cyA9IG5ldyBBcnJheShOKTsKICAgICAgdmFyIG5yd3N0ID0gbmV3IEFycmF5KE4pOwogICAgICB2YXIgbml3c3QgPSBuZXcgQXJyYXkoTik7CgogICAgICB2YXIgcm13cyA9IG91dC53b3JkczsKICAgICAgcm13cy5sZW5ndGggPSBOOwoKICAgICAgdGhpcy5jb252ZXJ0MTNiKHgud29yZHMsIHgubGVuZ3RoLCByd3MsIE4pOwogICAgICB0aGlzLmNvbnZlcnQxM2IoeS53b3JkcywgeS5sZW5ndGgsIG5yd3MsIE4pOwoKICAgICAgdGhpcy50cmFuc2Zvcm0ocndzLCBfLCByd3N0LCBpd3N0LCBOLCByYnQpOwogICAgICB0aGlzLnRyYW5zZm9ybShucndzLCBfLCBucndzdCwgbml3c3QsIE4sIHJidCk7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IE47IGkrKykgewogICAgICAgIHZhciByeCA9IHJ3c3RbaV0gKiBucndzdFtpXSAtIGl3c3RbaV0gKiBuaXdzdFtpXTsKICAgICAgICBpd3N0W2ldID0gcndzdFtpXSAqIG5pd3N0W2ldICsgaXdzdFtpXSAqIG5yd3N0W2ldOwogICAgICAgIHJ3c3RbaV0gPSByeDsKICAgICAgfQoKICAgICAgdGhpcy5jb25qdWdhdGUocndzdCwgaXdzdCwgTik7CiAgICAgIHRoaXMudHJhbnNmb3JtKHJ3c3QsIGl3c3QsIHJtd3MsIF8sIE4sIHJidCk7CiAgICAgIHRoaXMuY29uanVnYXRlKHJtd3MsIF8sIE4pOwogICAgICB0aGlzLm5vcm1hbGl6ZTEzYihybXdzLCBOKTsKCiAgICAgIG91dC5uZWdhdGl2ZSA9IHgubmVnYXRpdmUgXiB5Lm5lZ2F0aXZlOwogICAgICBvdXQubGVuZ3RoID0geC5sZW5ndGggKyB5Lmxlbmd0aDsKICAgICAgcmV0dXJuIG91dC5zdHJpcCgpOwogICAgfTsKCiAgICAvLyBNdWx0aXBseSBgdGhpc2AgYnkgYG51bWAKICAgIEJOLnByb3RvdHlwZS5tdWwgPSBmdW5jdGlvbiBtdWwgKG51bSkgewogICAgICB2YXIgb3V0ID0gbmV3IEJOKG51bGwpOwogICAgICBvdXQud29yZHMgPSBuZXcgQXJyYXkodGhpcy5sZW5ndGggKyBudW0ubGVuZ3RoKTsKICAgICAgcmV0dXJuIHRoaXMubXVsVG8obnVtLCBvdXQpOwogICAgfTsKCiAgICAvLyBNdWx0aXBseSBlbXBsb3lpbmcgRkZUCiAgICBCTi5wcm90b3R5cGUubXVsZiA9IGZ1bmN0aW9uIG11bGYgKG51bSkgewogICAgICB2YXIgb3V0ID0gbmV3IEJOKG51bGwpOwogICAgICBvdXQud29yZHMgPSBuZXcgQXJyYXkodGhpcy5sZW5ndGggKyBudW0ubGVuZ3RoKTsKICAgICAgcmV0dXJuIGp1bWJvTXVsVG8odGhpcywgbnVtLCBvdXQpOwogICAgfTsKCiAgICAvLyBJbi1wbGFjZSBNdWx0aXBsaWNhdGlvbgogICAgQk4ucHJvdG90eXBlLmltdWwgPSBmdW5jdGlvbiBpbXVsIChudW0pIHsKICAgICAgcmV0dXJuIHRoaXMuY2xvbmUoKS5tdWxUbyhudW0sIHRoaXMpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuaW11bG4gPSBmdW5jdGlvbiBpbXVsbiAobnVtKSB7CiAgICAgIGFzc2VydCh0eXBlb2YgbnVtID09PSAnbnVtYmVyJyk7CiAgICAgIGFzc2VydChudW0gPCAweDQwMDAwMDApOwoKICAgICAgLy8gQ2FycnkKICAgICAgdmFyIGNhcnJ5ID0gMDsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIHcgPSAodGhpcy53b3Jkc1tpXSB8IDApICogbnVtOwogICAgICAgIHZhciBsbyA9ICh3ICYgMHgzZmZmZmZmKSArIChjYXJyeSAmIDB4M2ZmZmZmZik7CiAgICAgICAgY2FycnkgPj49IDI2OwogICAgICAgIGNhcnJ5ICs9ICh3IC8gMHg0MDAwMDAwKSB8IDA7CiAgICAgICAgLy8gTk9URTogbG8gaXMgMjdiaXQgbWF4aW11bQogICAgICAgIGNhcnJ5ICs9IGxvID4+PiAyNjsKICAgICAgICB0aGlzLndvcmRzW2ldID0gbG8gJiAweDNmZmZmZmY7CiAgICAgIH0KCiAgICAgIGlmIChjYXJyeSAhPT0gMCkgewogICAgICAgIHRoaXMud29yZHNbaV0gPSBjYXJyeTsKICAgICAgICB0aGlzLmxlbmd0aCsrOwogICAgICB9CgogICAgICByZXR1cm4gdGhpczsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLm11bG4gPSBmdW5jdGlvbiBtdWxuIChudW0pIHsKICAgICAgcmV0dXJuIHRoaXMuY2xvbmUoKS5pbXVsbihudW0pOwogICAgfTsKCiAgICAvLyBgdGhpc2AgKiBgdGhpc2AKICAgIEJOLnByb3RvdHlwZS5zcXIgPSBmdW5jdGlvbiBzcXIgKCkgewogICAgICByZXR1cm4gdGhpcy5tdWwodGhpcyk7CiAgICB9OwoKICAgIC8vIGB0aGlzYCAqIGB0aGlzYCBpbi1wbGFjZQogICAgQk4ucHJvdG90eXBlLmlzcXIgPSBmdW5jdGlvbiBpc3FyICgpIHsKICAgICAgcmV0dXJuIHRoaXMuaW11bCh0aGlzLmNsb25lKCkpOwogICAgfTsKCiAgICAvLyBNYXRoLnBvdyhgdGhpc2AsIGBudW1gKQogICAgQk4ucHJvdG90eXBlLnBvdyA9IGZ1bmN0aW9uIHBvdyAobnVtKSB7CiAgICAgIHZhciB3ID0gdG9CaXRBcnJheShudW0pOwogICAgICBpZiAody5sZW5ndGggPT09IDApIHJldHVybiBuZXcgQk4oMSk7CgogICAgICAvLyBTa2lwIGxlYWRpbmcgemVyb2VzCiAgICAgIHZhciByZXMgPSB0aGlzOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHcubGVuZ3RoOyBpKyssIHJlcyA9IHJlcy5zcXIoKSkgewogICAgICAgIGlmICh3W2ldICE9PSAwKSBicmVhazsKICAgICAgfQoKICAgICAgaWYgKCsraSA8IHcubGVuZ3RoKSB7CiAgICAgICAgZm9yICh2YXIgcSA9IHJlcy5zcXIoKTsgaSA8IHcubGVuZ3RoOyBpKyssIHEgPSBxLnNxcigpKSB7CiAgICAgICAgICBpZiAod1tpXSA9PT0gMCkgY29udGludWU7CgogICAgICAgICAgcmVzID0gcmVzLm11bChxKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiByZXM7CiAgICB9OwoKICAgIC8vIFNoaWZ0LWxlZnQgaW4tcGxhY2UKICAgIEJOLnByb3RvdHlwZS5pdXNobG4gPSBmdW5jdGlvbiBpdXNobG4gKGJpdHMpIHsKICAgICAgYXNzZXJ0KHR5cGVvZiBiaXRzID09PSAnbnVtYmVyJyAmJiBiaXRzID49IDApOwogICAgICB2YXIgciA9IGJpdHMgJSAyNjsKICAgICAgdmFyIHMgPSAoYml0cyAtIHIpIC8gMjY7CiAgICAgIHZhciBjYXJyeU1hc2sgPSAoMHgzZmZmZmZmID4+PiAoMjYgLSByKSkgPDwgKDI2IC0gcik7CiAgICAgIHZhciBpOwoKICAgICAgaWYgKHIgIT09IDApIHsKICAgICAgICB2YXIgY2FycnkgPSAwOwoKICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgdmFyIG5ld0NhcnJ5ID0gdGhpcy53b3Jkc1tpXSAmIGNhcnJ5TWFzazsKICAgICAgICAgIHZhciBjID0gKCh0aGlzLndvcmRzW2ldIHwgMCkgLSBuZXdDYXJyeSkgPDwgcjsKICAgICAgICAgIHRoaXMud29yZHNbaV0gPSBjIHwgY2Fycnk7CiAgICAgICAgICBjYXJyeSA9IG5ld0NhcnJ5ID4+PiAoMjYgLSByKTsKICAgICAgICB9CgogICAgICAgIGlmIChjYXJyeSkgewogICAgICAgICAgdGhpcy53b3Jkc1tpXSA9IGNhcnJ5OwogICAgICAgICAgdGhpcy5sZW5ndGgrKzsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChzICE9PSAwKSB7CiAgICAgICAgZm9yIChpID0gdGhpcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgICAgICAgdGhpcy53b3Jkc1tpICsgc10gPSB0aGlzLndvcmRzW2ldOwogICAgICAgIH0KCiAgICAgICAgZm9yIChpID0gMDsgaSA8IHM7IGkrKykgewogICAgICAgICAgdGhpcy53b3Jkc1tpXSA9IDA7CiAgICAgICAgfQoKICAgICAgICB0aGlzLmxlbmd0aCArPSBzOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5zdHJpcCgpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuaXNobG4gPSBmdW5jdGlvbiBpc2hsbiAoYml0cykgewogICAgICAvLyBUT0RPKGluZHV0bnkpOiBpbXBsZW1lbnQgbWUKICAgICAgYXNzZXJ0KHRoaXMubmVnYXRpdmUgPT09IDApOwogICAgICByZXR1cm4gdGhpcy5pdXNobG4oYml0cyk7CiAgICB9OwoKICAgIC8vIFNoaWZ0LXJpZ2h0IGluLXBsYWNlCiAgICAvLyBOT1RFOiBgaGludGAgaXMgYSBsb3dlc3QgYml0IGJlZm9yZSB0cmFpbGluZyB6ZXJvZXMKICAgIC8vIE5PVEU6IGlmIGBleHRlbmRlZGAgaXMgcHJlc2VudCAtIGl0IHdpbGwgYmUgZmlsbGVkIHdpdGggZGVzdHJveWVkIGJpdHMKICAgIEJOLnByb3RvdHlwZS5pdXNocm4gPSBmdW5jdGlvbiBpdXNocm4gKGJpdHMsIGhpbnQsIGV4dGVuZGVkKSB7CiAgICAgIGFzc2VydCh0eXBlb2YgYml0cyA9PT0gJ251bWJlcicgJiYgYml0cyA+PSAwKTsKICAgICAgdmFyIGg7CiAgICAgIGlmIChoaW50KSB7CiAgICAgICAgaCA9IChoaW50IC0gKGhpbnQgJSAyNikpIC8gMjY7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaCA9IDA7CiAgICAgIH0KCiAgICAgIHZhciByID0gYml0cyAlIDI2OwogICAgICB2YXIgcyA9IE1hdGgubWluKChiaXRzIC0gcikgLyAyNiwgdGhpcy5sZW5ndGgpOwogICAgICB2YXIgbWFzayA9IDB4M2ZmZmZmZiBeICgoMHgzZmZmZmZmID4+PiByKSA8PCByKTsKICAgICAgdmFyIG1hc2tlZFdvcmRzID0gZXh0ZW5kZWQ7CgogICAgICBoIC09IHM7CiAgICAgIGggPSBNYXRoLm1heCgwLCBoKTsKCiAgICAgIC8vIEV4dGVuZGVkIG1vZGUsIGNvcHkgbWFza2VkIHBhcnQKICAgICAgaWYgKG1hc2tlZFdvcmRzKSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzOyBpKyspIHsKICAgICAgICAgIG1hc2tlZFdvcmRzLndvcmRzW2ldID0gdGhpcy53b3Jkc1tpXTsKICAgICAgICB9CiAgICAgICAgbWFza2VkV29yZHMubGVuZ3RoID0gczsKICAgICAgfQoKICAgICAgaWYgKHMgPT09IDApIDsgZWxzZSBpZiAodGhpcy5sZW5ndGggPiBzKSB7CiAgICAgICAgdGhpcy5sZW5ndGggLT0gczsKICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgdGhpcy53b3Jkc1tpXSA9IHRoaXMud29yZHNbaSArIHNdOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLndvcmRzWzBdID0gMDsKICAgICAgICB0aGlzLmxlbmd0aCA9IDE7CiAgICAgIH0KCiAgICAgIHZhciBjYXJyeSA9IDA7CiAgICAgIGZvciAoaSA9IHRoaXMubGVuZ3RoIC0gMTsgaSA+PSAwICYmIChjYXJyeSAhPT0gMCB8fCBpID49IGgpOyBpLS0pIHsKICAgICAgICB2YXIgd29yZCA9IHRoaXMud29yZHNbaV0gfCAwOwogICAgICAgIHRoaXMud29yZHNbaV0gPSAoY2FycnkgPDwgKDI2IC0gcikpIHwgKHdvcmQgPj4+IHIpOwogICAgICAgIGNhcnJ5ID0gd29yZCAmIG1hc2s7CiAgICAgIH0KCiAgICAgIC8vIFB1c2ggY2FycmllZCBiaXRzIGFzIGEgbWFzawogICAgICBpZiAobWFza2VkV29yZHMgJiYgY2FycnkgIT09IDApIHsKICAgICAgICBtYXNrZWRXb3Jkcy53b3Jkc1ttYXNrZWRXb3Jkcy5sZW5ndGgrK10gPSBjYXJyeTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgdGhpcy53b3Jkc1swXSA9IDA7CiAgICAgICAgdGhpcy5sZW5ndGggPSAxOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5zdHJpcCgpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuaXNocm4gPSBmdW5jdGlvbiBpc2hybiAoYml0cywgaGludCwgZXh0ZW5kZWQpIHsKICAgICAgLy8gVE9ETyhpbmR1dG55KTogaW1wbGVtZW50IG1lCiAgICAgIGFzc2VydCh0aGlzLm5lZ2F0aXZlID09PSAwKTsKICAgICAgcmV0dXJuIHRoaXMuaXVzaHJuKGJpdHMsIGhpbnQsIGV4dGVuZGVkKTsKICAgIH07CgogICAgLy8gU2hpZnQtbGVmdAogICAgQk4ucHJvdG90eXBlLnNobG4gPSBmdW5jdGlvbiBzaGxuIChiaXRzKSB7CiAgICAgIHJldHVybiB0aGlzLmNsb25lKCkuaXNobG4oYml0cyk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS51c2hsbiA9IGZ1bmN0aW9uIHVzaGxuIChiaXRzKSB7CiAgICAgIHJldHVybiB0aGlzLmNsb25lKCkuaXVzaGxuKGJpdHMpOwogICAgfTsKCiAgICAvLyBTaGlmdC1yaWdodAogICAgQk4ucHJvdG90eXBlLnNocm4gPSBmdW5jdGlvbiBzaHJuIChiaXRzKSB7CiAgICAgIHJldHVybiB0aGlzLmNsb25lKCkuaXNocm4oYml0cyk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS51c2hybiA9IGZ1bmN0aW9uIHVzaHJuIChiaXRzKSB7CiAgICAgIHJldHVybiB0aGlzLmNsb25lKCkuaXVzaHJuKGJpdHMpOwogICAgfTsKCiAgICAvLyBUZXN0IGlmIG4gYml0IGlzIHNldAogICAgQk4ucHJvdG90eXBlLnRlc3RuID0gZnVuY3Rpb24gdGVzdG4gKGJpdCkgewogICAgICBhc3NlcnQodHlwZW9mIGJpdCA9PT0gJ251bWJlcicgJiYgYml0ID49IDApOwogICAgICB2YXIgciA9IGJpdCAlIDI2OwogICAgICB2YXIgcyA9IChiaXQgLSByKSAvIDI2OwogICAgICB2YXIgcSA9IDEgPDwgcjsKCiAgICAgIC8vIEZhc3QgY2FzZTogYml0IGlzIG11Y2ggaGlnaGVyIHRoYW4gYWxsIGV4aXN0aW5nIHdvcmRzCiAgICAgIGlmICh0aGlzLmxlbmd0aCA8PSBzKSByZXR1cm4gZmFsc2U7CgogICAgICAvLyBDaGVjayBiaXQgYW5kIHJldHVybgogICAgICB2YXIgdyA9IHRoaXMud29yZHNbc107CgogICAgICByZXR1cm4gISEodyAmIHEpOwogICAgfTsKCiAgICAvLyBSZXR1cm4gb25seSBsb3dlcnMgYml0cyBvZiBudW1iZXIgKGluLXBsYWNlKQogICAgQk4ucHJvdG90eXBlLmltYXNrbiA9IGZ1bmN0aW9uIGltYXNrbiAoYml0cykgewogICAgICBhc3NlcnQodHlwZW9mIGJpdHMgPT09ICdudW1iZXInICYmIGJpdHMgPj0gMCk7CiAgICAgIHZhciByID0gYml0cyAlIDI2OwogICAgICB2YXIgcyA9IChiaXRzIC0gcikgLyAyNjsKCiAgICAgIGFzc2VydCh0aGlzLm5lZ2F0aXZlID09PSAwLCAnaW1hc2tuIHdvcmtzIG9ubHkgd2l0aCBwb3NpdGl2ZSBudW1iZXJzJyk7CgogICAgICBpZiAodGhpcy5sZW5ndGggPD0gcykgewogICAgICAgIHJldHVybiB0aGlzOwogICAgICB9CgogICAgICBpZiAociAhPT0gMCkgewogICAgICAgIHMrKzsKICAgICAgfQogICAgICB0aGlzLmxlbmd0aCA9IE1hdGgubWluKHMsIHRoaXMubGVuZ3RoKTsKCiAgICAgIGlmIChyICE9PSAwKSB7CiAgICAgICAgdmFyIG1hc2sgPSAweDNmZmZmZmYgXiAoKDB4M2ZmZmZmZiA+Pj4gcikgPDwgcik7CiAgICAgICAgdGhpcy53b3Jkc1t0aGlzLmxlbmd0aCAtIDFdICY9IG1hc2s7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLnN0cmlwKCk7CiAgICB9OwoKICAgIC8vIFJldHVybiBvbmx5IGxvd2VycyBiaXRzIG9mIG51bWJlcgogICAgQk4ucHJvdG90eXBlLm1hc2tuID0gZnVuY3Rpb24gbWFza24gKGJpdHMpIHsKICAgICAgcmV0dXJuIHRoaXMuY2xvbmUoKS5pbWFza24oYml0cyk7CiAgICB9OwoKICAgIC8vIEFkZCBwbGFpbiBudW1iZXIgYG51bWAgdG8gYHRoaXNgCiAgICBCTi5wcm90b3R5cGUuaWFkZG4gPSBmdW5jdGlvbiBpYWRkbiAobnVtKSB7CiAgICAgIGFzc2VydCh0eXBlb2YgbnVtID09PSAnbnVtYmVyJyk7CiAgICAgIGFzc2VydChudW0gPCAweDQwMDAwMDApOwogICAgICBpZiAobnVtIDwgMCkgcmV0dXJuIHRoaXMuaXN1Ym4oLW51bSk7CgogICAgICAvLyBQb3NzaWJsZSBzaWduIGNoYW5nZQogICAgICBpZiAodGhpcy5uZWdhdGl2ZSAhPT0gMCkgewogICAgICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMSAmJiAodGhpcy53b3Jkc1swXSB8IDApIDwgbnVtKSB7CiAgICAgICAgICB0aGlzLndvcmRzWzBdID0gbnVtIC0gKHRoaXMud29yZHNbMF0gfCAwKTsKICAgICAgICAgIHRoaXMubmVnYXRpdmUgPSAwOwogICAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgICAgfQoKICAgICAgICB0aGlzLm5lZ2F0aXZlID0gMDsKICAgICAgICB0aGlzLmlzdWJuKG51bSk7CiAgICAgICAgdGhpcy5uZWdhdGl2ZSA9IDE7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0KCiAgICAgIC8vIEFkZCB3aXRob3V0IGNoZWNrcwogICAgICByZXR1cm4gdGhpcy5faWFkZG4obnVtKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLl9pYWRkbiA9IGZ1bmN0aW9uIF9pYWRkbiAobnVtKSB7CiAgICAgIHRoaXMud29yZHNbMF0gKz0gbnVtOwoKICAgICAgLy8gQ2FycnkKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aCAmJiB0aGlzLndvcmRzW2ldID49IDB4NDAwMDAwMDsgaSsrKSB7CiAgICAgICAgdGhpcy53b3Jkc1tpXSAtPSAweDQwMDAwMDA7CiAgICAgICAgaWYgKGkgPT09IHRoaXMubGVuZ3RoIC0gMSkgewogICAgICAgICAgdGhpcy53b3Jkc1tpICsgMV0gPSAxOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLndvcmRzW2kgKyAxXSsrOwogICAgICAgIH0KICAgICAgfQogICAgICB0aGlzLmxlbmd0aCA9IE1hdGgubWF4KHRoaXMubGVuZ3RoLCBpICsgMSk7CgogICAgICByZXR1cm4gdGhpczsKICAgIH07CgogICAgLy8gU3VidHJhY3QgcGxhaW4gbnVtYmVyIGBudW1gIGZyb20gYHRoaXNgCiAgICBCTi5wcm90b3R5cGUuaXN1Ym4gPSBmdW5jdGlvbiBpc3VibiAobnVtKSB7CiAgICAgIGFzc2VydCh0eXBlb2YgbnVtID09PSAnbnVtYmVyJyk7CiAgICAgIGFzc2VydChudW0gPCAweDQwMDAwMDApOwogICAgICBpZiAobnVtIDwgMCkgcmV0dXJuIHRoaXMuaWFkZG4oLW51bSk7CgogICAgICBpZiAodGhpcy5uZWdhdGl2ZSAhPT0gMCkgewogICAgICAgIHRoaXMubmVnYXRpdmUgPSAwOwogICAgICAgIHRoaXMuaWFkZG4obnVtKTsKICAgICAgICB0aGlzLm5lZ2F0aXZlID0gMTsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfQoKICAgICAgdGhpcy53b3Jkc1swXSAtPSBudW07CgogICAgICBpZiAodGhpcy5sZW5ndGggPT09IDEgJiYgdGhpcy53b3Jkc1swXSA8IDApIHsKICAgICAgICB0aGlzLndvcmRzWzBdID0gLXRoaXMud29yZHNbMF07CiAgICAgICAgdGhpcy5uZWdhdGl2ZSA9IDE7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gQ2FycnkKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoICYmIHRoaXMud29yZHNbaV0gPCAwOyBpKyspIHsKICAgICAgICAgIHRoaXMud29yZHNbaV0gKz0gMHg0MDAwMDAwOwogICAgICAgICAgdGhpcy53b3Jkc1tpICsgMV0gLT0gMTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLnN0cmlwKCk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5hZGRuID0gZnVuY3Rpb24gYWRkbiAobnVtKSB7CiAgICAgIHJldHVybiB0aGlzLmNsb25lKCkuaWFkZG4obnVtKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLnN1Ym4gPSBmdW5jdGlvbiBzdWJuIChudW0pIHsKICAgICAgcmV0dXJuIHRoaXMuY2xvbmUoKS5pc3VibihudW0pOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuaWFicyA9IGZ1bmN0aW9uIGlhYnMgKCkgewogICAgICB0aGlzLm5lZ2F0aXZlID0gMDsKCiAgICAgIHJldHVybiB0aGlzOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuYWJzID0gZnVuY3Rpb24gYWJzICgpIHsKICAgICAgcmV0dXJuIHRoaXMuY2xvbmUoKS5pYWJzKCk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5faXNobG5zdWJtdWwgPSBmdW5jdGlvbiBfaXNobG5zdWJtdWwgKG51bSwgbXVsLCBzaGlmdCkgewogICAgICB2YXIgbGVuID0gbnVtLmxlbmd0aCArIHNoaWZ0OwogICAgICB2YXIgaTsKCiAgICAgIHRoaXMuX2V4cGFuZChsZW4pOwoKICAgICAgdmFyIHc7CiAgICAgIHZhciBjYXJyeSA9IDA7CiAgICAgIGZvciAoaSA9IDA7IGkgPCBudW0ubGVuZ3RoOyBpKyspIHsKICAgICAgICB3ID0gKHRoaXMud29yZHNbaSArIHNoaWZ0XSB8IDApICsgY2Fycnk7CiAgICAgICAgdmFyIHJpZ2h0ID0gKG51bS53b3Jkc1tpXSB8IDApICogbXVsOwogICAgICAgIHcgLT0gcmlnaHQgJiAweDNmZmZmZmY7CiAgICAgICAgY2FycnkgPSAodyA+PiAyNikgLSAoKHJpZ2h0IC8gMHg0MDAwMDAwKSB8IDApOwogICAgICAgIHRoaXMud29yZHNbaSArIHNoaWZ0XSA9IHcgJiAweDNmZmZmZmY7CiAgICAgIH0KICAgICAgZm9yICg7IGkgPCB0aGlzLmxlbmd0aCAtIHNoaWZ0OyBpKyspIHsKICAgICAgICB3ID0gKHRoaXMud29yZHNbaSArIHNoaWZ0XSB8IDApICsgY2Fycnk7CiAgICAgICAgY2FycnkgPSB3ID4+IDI2OwogICAgICAgIHRoaXMud29yZHNbaSArIHNoaWZ0XSA9IHcgJiAweDNmZmZmZmY7CiAgICAgIH0KCiAgICAgIGlmIChjYXJyeSA9PT0gMCkgcmV0dXJuIHRoaXMuc3RyaXAoKTsKCiAgICAgIC8vIFN1YnRyYWN0aW9uIG92ZXJmbG93CiAgICAgIGFzc2VydChjYXJyeSA9PT0gLTEpOwogICAgICBjYXJyeSA9IDA7CiAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdyA9IC0odGhpcy53b3Jkc1tpXSB8IDApICsgY2Fycnk7CiAgICAgICAgY2FycnkgPSB3ID4+IDI2OwogICAgICAgIHRoaXMud29yZHNbaV0gPSB3ICYgMHgzZmZmZmZmOwogICAgICB9CiAgICAgIHRoaXMubmVnYXRpdmUgPSAxOwoKICAgICAgcmV0dXJuIHRoaXMuc3RyaXAoKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLl93b3JkRGl2ID0gZnVuY3Rpb24gX3dvcmREaXYgKG51bSwgbW9kZSkgewogICAgICB2YXIgc2hpZnQgPSB0aGlzLmxlbmd0aCAtIG51bS5sZW5ndGg7CgogICAgICB2YXIgYSA9IHRoaXMuY2xvbmUoKTsKICAgICAgdmFyIGIgPSBudW07CgogICAgICAvLyBOb3JtYWxpemUKICAgICAgdmFyIGJoaSA9IGIud29yZHNbYi5sZW5ndGggLSAxXSB8IDA7CiAgICAgIHZhciBiaGlCaXRzID0gdGhpcy5fY291bnRCaXRzKGJoaSk7CiAgICAgIHNoaWZ0ID0gMjYgLSBiaGlCaXRzOwogICAgICBpZiAoc2hpZnQgIT09IDApIHsKICAgICAgICBiID0gYi51c2hsbihzaGlmdCk7CiAgICAgICAgYS5pdXNobG4oc2hpZnQpOwogICAgICAgIGJoaSA9IGIud29yZHNbYi5sZW5ndGggLSAxXSB8IDA7CiAgICAgIH0KCiAgICAgIC8vIEluaXRpYWxpemUgcXVvdGllbnQKICAgICAgdmFyIG0gPSBhLmxlbmd0aCAtIGIubGVuZ3RoOwogICAgICB2YXIgcTsKCiAgICAgIGlmIChtb2RlICE9PSAnbW9kJykgewogICAgICAgIHEgPSBuZXcgQk4obnVsbCk7CiAgICAgICAgcS5sZW5ndGggPSBtICsgMTsKICAgICAgICBxLndvcmRzID0gbmV3IEFycmF5KHEubGVuZ3RoKTsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHEubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHEud29yZHNbaV0gPSAwOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdmFyIGRpZmYgPSBhLmNsb25lKCkuX2lzaGxuc3VibXVsKGIsIDEsIG0pOwogICAgICBpZiAoZGlmZi5uZWdhdGl2ZSA9PT0gMCkgewogICAgICAgIGEgPSBkaWZmOwogICAgICAgIGlmIChxKSB7CiAgICAgICAgICBxLndvcmRzW21dID0gMTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGZvciAodmFyIGogPSBtIC0gMTsgaiA+PSAwOyBqLS0pIHsKICAgICAgICB2YXIgcWogPSAoYS53b3Jkc1tiLmxlbmd0aCArIGpdIHwgMCkgKiAweDQwMDAwMDAgKwogICAgICAgICAgKGEud29yZHNbYi5sZW5ndGggKyBqIC0gMV0gfCAwKTsKCiAgICAgICAgLy8gTk9URTogKHFqIC8gYmhpKSBpcyAoMHgzZmZmZmZmICogMHg0MDAwMDAwICsgMHgzZmZmZmZmKSAvIDB4MjAwMDAwMCBtYXgKICAgICAgICAvLyAoMHg3ZmZmZmZmKQogICAgICAgIHFqID0gTWF0aC5taW4oKHFqIC8gYmhpKSB8IDAsIDB4M2ZmZmZmZik7CgogICAgICAgIGEuX2lzaGxuc3VibXVsKGIsIHFqLCBqKTsKICAgICAgICB3aGlsZSAoYS5uZWdhdGl2ZSAhPT0gMCkgewogICAgICAgICAgcWotLTsKICAgICAgICAgIGEubmVnYXRpdmUgPSAwOwogICAgICAgICAgYS5faXNobG5zdWJtdWwoYiwgMSwgaik7CiAgICAgICAgICBpZiAoIWEuaXNaZXJvKCkpIHsKICAgICAgICAgICAgYS5uZWdhdGl2ZSBePSAxOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAocSkgewogICAgICAgICAgcS53b3Jkc1tqXSA9IHFqOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAocSkgewogICAgICAgIHEuc3RyaXAoKTsKICAgICAgfQogICAgICBhLnN0cmlwKCk7CgogICAgICAvLyBEZW5vcm1hbGl6ZQogICAgICBpZiAobW9kZSAhPT0gJ2RpdicgJiYgc2hpZnQgIT09IDApIHsKICAgICAgICBhLml1c2hybihzaGlmdCk7CiAgICAgIH0KCiAgICAgIHJldHVybiB7CiAgICAgICAgZGl2OiBxIHx8IG51bGwsCiAgICAgICAgbW9kOiBhCiAgICAgIH07CiAgICB9OwoKICAgIC8vIE5PVEU6IDEpIGBtb2RlYCBjYW4gYmUgc2V0IHRvIGBtb2RgIHRvIHJlcXVlc3QgbW9kIG9ubHksCiAgICAvLyAgICAgICB0byBgZGl2YCB0byByZXF1ZXN0IGRpdiBvbmx5LCBvciBiZSBhYnNlbnQgdG8KICAgIC8vICAgICAgIHJlcXVlc3QgYm90aCBkaXYgJiBtb2QKICAgIC8vICAgICAgIDIpIGBwb3NpdGl2ZWAgaXMgdHJ1ZSBpZiB1bnNpZ25lZCBtb2QgaXMgcmVxdWVzdGVkCiAgICBCTi5wcm90b3R5cGUuZGl2bW9kID0gZnVuY3Rpb24gZGl2bW9kIChudW0sIG1vZGUsIHBvc2l0aXZlKSB7CiAgICAgIGFzc2VydCghbnVtLmlzWmVybygpKTsKCiAgICAgIGlmICh0aGlzLmlzWmVybygpKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGRpdjogbmV3IEJOKDApLAogICAgICAgICAgbW9kOiBuZXcgQk4oMCkKICAgICAgICB9OwogICAgICB9CgogICAgICB2YXIgZGl2LCBtb2QsIHJlczsKICAgICAgaWYgKHRoaXMubmVnYXRpdmUgIT09IDAgJiYgbnVtLm5lZ2F0aXZlID09PSAwKSB7CiAgICAgICAgcmVzID0gdGhpcy5uZWcoKS5kaXZtb2QobnVtLCBtb2RlKTsKCiAgICAgICAgaWYgKG1vZGUgIT09ICdtb2QnKSB7CiAgICAgICAgICBkaXYgPSByZXMuZGl2Lm5lZygpOwogICAgICAgIH0KCiAgICAgICAgaWYgKG1vZGUgIT09ICdkaXYnKSB7CiAgICAgICAgICBtb2QgPSByZXMubW9kLm5lZygpOwogICAgICAgICAgaWYgKHBvc2l0aXZlICYmIG1vZC5uZWdhdGl2ZSAhPT0gMCkgewogICAgICAgICAgICBtb2QuaWFkZChudW0pOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGRpdjogZGl2LAogICAgICAgICAgbW9kOiBtb2QKICAgICAgICB9OwogICAgICB9CgogICAgICBpZiAodGhpcy5uZWdhdGl2ZSA9PT0gMCAmJiBudW0ubmVnYXRpdmUgIT09IDApIHsKICAgICAgICByZXMgPSB0aGlzLmRpdm1vZChudW0ubmVnKCksIG1vZGUpOwoKICAgICAgICBpZiAobW9kZSAhPT0gJ21vZCcpIHsKICAgICAgICAgIGRpdiA9IHJlcy5kaXYubmVnKCk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gewogICAgICAgICAgZGl2OiBkaXYsCiAgICAgICAgICBtb2Q6IHJlcy5tb2QKICAgICAgICB9OwogICAgICB9CgogICAgICBpZiAoKHRoaXMubmVnYXRpdmUgJiBudW0ubmVnYXRpdmUpICE9PSAwKSB7CiAgICAgICAgcmVzID0gdGhpcy5uZWcoKS5kaXZtb2QobnVtLm5lZygpLCBtb2RlKTsKCiAgICAgICAgaWYgKG1vZGUgIT09ICdkaXYnKSB7CiAgICAgICAgICBtb2QgPSByZXMubW9kLm5lZygpOwogICAgICAgICAgaWYgKHBvc2l0aXZlICYmIG1vZC5uZWdhdGl2ZSAhPT0gMCkgewogICAgICAgICAgICBtb2QuaXN1YihudW0pOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGRpdjogcmVzLmRpdiwKICAgICAgICAgIG1vZDogbW9kCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgLy8gQm90aCBudW1iZXJzIGFyZSBwb3NpdGl2ZSBhdCB0aGlzIHBvaW50CgogICAgICAvLyBTdHJpcCBib3RoIG51bWJlcnMgdG8gYXBwcm94aW1hdGUgc2hpZnQgdmFsdWUKICAgICAgaWYgKG51bS5sZW5ndGggPiB0aGlzLmxlbmd0aCB8fCB0aGlzLmNtcChudW0pIDwgMCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBkaXY6IG5ldyBCTigwKSwKICAgICAgICAgIG1vZDogdGhpcwogICAgICAgIH07CiAgICAgIH0KCiAgICAgIC8vIFZlcnkgc2hvcnQgcmVkdWN0aW9uCiAgICAgIGlmIChudW0ubGVuZ3RoID09PSAxKSB7CiAgICAgICAgaWYgKG1vZGUgPT09ICdkaXYnKSB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBkaXY6IHRoaXMuZGl2bihudW0ud29yZHNbMF0pLAogICAgICAgICAgICBtb2Q6IG51bGwKICAgICAgICAgIH07CiAgICAgICAgfQoKICAgICAgICBpZiAobW9kZSA9PT0gJ21vZCcpIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGRpdjogbnVsbCwKICAgICAgICAgICAgbW9kOiBuZXcgQk4odGhpcy5tb2RuKG51bS53b3Jkc1swXSkpCiAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGRpdjogdGhpcy5kaXZuKG51bS53b3Jkc1swXSksCiAgICAgICAgICBtb2Q6IG5ldyBCTih0aGlzLm1vZG4obnVtLndvcmRzWzBdKSkKICAgICAgICB9OwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5fd29yZERpdihudW0sIG1vZGUpOwogICAgfTsKCiAgICAvLyBGaW5kIGB0aGlzYCAvIGBudW1gCiAgICBCTi5wcm90b3R5cGUuZGl2ID0gZnVuY3Rpb24gZGl2IChudW0pIHsKICAgICAgcmV0dXJuIHRoaXMuZGl2bW9kKG51bSwgJ2RpdicsIGZhbHNlKS5kaXY7CiAgICB9OwoKICAgIC8vIEZpbmQgYHRoaXNgICUgYG51bWAKICAgIEJOLnByb3RvdHlwZS5tb2QgPSBmdW5jdGlvbiBtb2QgKG51bSkgewogICAgICByZXR1cm4gdGhpcy5kaXZtb2QobnVtLCAnbW9kJywgZmFsc2UpLm1vZDsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLnVtb2QgPSBmdW5jdGlvbiB1bW9kIChudW0pIHsKICAgICAgcmV0dXJuIHRoaXMuZGl2bW9kKG51bSwgJ21vZCcsIHRydWUpLm1vZDsKICAgIH07CgogICAgLy8gRmluZCBSb3VuZChgdGhpc2AgLyBgbnVtYCkKICAgIEJOLnByb3RvdHlwZS5kaXZSb3VuZCA9IGZ1bmN0aW9uIGRpdlJvdW5kIChudW0pIHsKICAgICAgdmFyIGRtID0gdGhpcy5kaXZtb2QobnVtKTsKCiAgICAgIC8vIEZhc3QgY2FzZSAtIGV4YWN0IGRpdmlzaW9uCiAgICAgIGlmIChkbS5tb2QuaXNaZXJvKCkpIHJldHVybiBkbS5kaXY7CgogICAgICB2YXIgbW9kID0gZG0uZGl2Lm5lZ2F0aXZlICE9PSAwID8gZG0ubW9kLmlzdWIobnVtKSA6IGRtLm1vZDsKCiAgICAgIHZhciBoYWxmID0gbnVtLnVzaHJuKDEpOwogICAgICB2YXIgcjIgPSBudW0uYW5kbG4oMSk7CiAgICAgIHZhciBjbXAgPSBtb2QuY21wKGhhbGYpOwoKICAgICAgLy8gUm91bmQgZG93bgogICAgICBpZiAoY21wIDwgMCB8fCByMiA9PT0gMSAmJiBjbXAgPT09IDApIHJldHVybiBkbS5kaXY7CgogICAgICAvLyBSb3VuZCB1cAogICAgICByZXR1cm4gZG0uZGl2Lm5lZ2F0aXZlICE9PSAwID8gZG0uZGl2LmlzdWJuKDEpIDogZG0uZGl2LmlhZGRuKDEpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUubW9kbiA9IGZ1bmN0aW9uIG1vZG4gKG51bSkgewogICAgICBhc3NlcnQobnVtIDw9IDB4M2ZmZmZmZik7CiAgICAgIHZhciBwID0gKDEgPDwgMjYpICUgbnVtOwoKICAgICAgdmFyIGFjYyA9IDA7CiAgICAgIGZvciAodmFyIGkgPSB0aGlzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICAgICAgYWNjID0gKHAgKiBhY2MgKyAodGhpcy53b3Jkc1tpXSB8IDApKSAlIG51bTsKICAgICAgfQoKICAgICAgcmV0dXJuIGFjYzsKICAgIH07CgogICAgLy8gSW4tcGxhY2UgZGl2aXNpb24gYnkgbnVtYmVyCiAgICBCTi5wcm90b3R5cGUuaWRpdm4gPSBmdW5jdGlvbiBpZGl2biAobnVtKSB7CiAgICAgIGFzc2VydChudW0gPD0gMHgzZmZmZmZmKTsKCiAgICAgIHZhciBjYXJyeSA9IDA7CiAgICAgIGZvciAodmFyIGkgPSB0aGlzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICAgICAgdmFyIHcgPSAodGhpcy53b3Jkc1tpXSB8IDApICsgY2FycnkgKiAweDQwMDAwMDA7CiAgICAgICAgdGhpcy53b3Jkc1tpXSA9ICh3IC8gbnVtKSB8IDA7CiAgICAgICAgY2FycnkgPSB3ICUgbnVtOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5zdHJpcCgpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuZGl2biA9IGZ1bmN0aW9uIGRpdm4gKG51bSkgewogICAgICByZXR1cm4gdGhpcy5jbG9uZSgpLmlkaXZuKG51bSk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5lZ2NkID0gZnVuY3Rpb24gZWdjZCAocCkgewogICAgICBhc3NlcnQocC5uZWdhdGl2ZSA9PT0gMCk7CiAgICAgIGFzc2VydCghcC5pc1plcm8oKSk7CgogICAgICB2YXIgeCA9IHRoaXM7CiAgICAgIHZhciB5ID0gcC5jbG9uZSgpOwoKICAgICAgaWYgKHgubmVnYXRpdmUgIT09IDApIHsKICAgICAgICB4ID0geC51bW9kKHApOwogICAgICB9IGVsc2UgewogICAgICAgIHggPSB4LmNsb25lKCk7CiAgICAgIH0KCiAgICAgIC8vIEEgKiB4ICsgQiAqIHkgPSB4CiAgICAgIHZhciBBID0gbmV3IEJOKDEpOwogICAgICB2YXIgQiA9IG5ldyBCTigwKTsKCiAgICAgIC8vIEMgKiB4ICsgRCAqIHkgPSB5CiAgICAgIHZhciBDID0gbmV3IEJOKDApOwogICAgICB2YXIgRCA9IG5ldyBCTigxKTsKCiAgICAgIHZhciBnID0gMDsKCiAgICAgIHdoaWxlICh4LmlzRXZlbigpICYmIHkuaXNFdmVuKCkpIHsKICAgICAgICB4Lml1c2hybigxKTsKICAgICAgICB5Lml1c2hybigxKTsKICAgICAgICArK2c7CiAgICAgIH0KCiAgICAgIHZhciB5cCA9IHkuY2xvbmUoKTsKICAgICAgdmFyIHhwID0geC5jbG9uZSgpOwoKICAgICAgd2hpbGUgKCF4LmlzWmVybygpKSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGltID0gMTsgKHgud29yZHNbMF0gJiBpbSkgPT09IDAgJiYgaSA8IDI2OyArK2ksIGltIDw8PSAxKTsKICAgICAgICBpZiAoaSA+IDApIHsKICAgICAgICAgIHguaXVzaHJuKGkpOwogICAgICAgICAgd2hpbGUgKGktLSA+IDApIHsKICAgICAgICAgICAgaWYgKEEuaXNPZGQoKSB8fCBCLmlzT2RkKCkpIHsKICAgICAgICAgICAgICBBLmlhZGQoeXApOwogICAgICAgICAgICAgIEIuaXN1Yih4cCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIEEuaXVzaHJuKDEpOwogICAgICAgICAgICBCLml1c2hybigxKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZvciAodmFyIGogPSAwLCBqbSA9IDE7ICh5LndvcmRzWzBdICYgam0pID09PSAwICYmIGogPCAyNjsgKytqLCBqbSA8PD0gMSk7CiAgICAgICAgaWYgKGogPiAwKSB7CiAgICAgICAgICB5Lml1c2hybihqKTsKICAgICAgICAgIHdoaWxlIChqLS0gPiAwKSB7CiAgICAgICAgICAgIGlmIChDLmlzT2RkKCkgfHwgRC5pc09kZCgpKSB7CiAgICAgICAgICAgICAgQy5pYWRkKHlwKTsKICAgICAgICAgICAgICBELmlzdWIoeHApOwogICAgICAgICAgICB9CgogICAgICAgICAgICBDLml1c2hybigxKTsKICAgICAgICAgICAgRC5pdXNocm4oMSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoeC5jbXAoeSkgPj0gMCkgewogICAgICAgICAgeC5pc3ViKHkpOwogICAgICAgICAgQS5pc3ViKEMpOwogICAgICAgICAgQi5pc3ViKEQpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB5LmlzdWIoeCk7CiAgICAgICAgICBDLmlzdWIoQSk7CiAgICAgICAgICBELmlzdWIoQik7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gewogICAgICAgIGE6IEMsCiAgICAgICAgYjogRCwKICAgICAgICBnY2Q6IHkuaXVzaGxuKGcpCiAgICAgIH07CiAgICB9OwoKICAgIC8vIFRoaXMgaXMgcmVkdWNlZCBpbmNhcm5hdGlvbiBvZiB0aGUgYmluYXJ5IEVFQQogICAgLy8gYWJvdmUsIGRlc2lnbmF0ZWQgdG8gaW52ZXJ0IG1lbWJlcnMgb2YgdGhlCiAgICAvLyBfcHJpbWVfIGZpZWxkcyBGKHApIGF0IGEgbWF4aW1hbCBzcGVlZAogICAgQk4ucHJvdG90eXBlLl9pbnZtcCA9IGZ1bmN0aW9uIF9pbnZtcCAocCkgewogICAgICBhc3NlcnQocC5uZWdhdGl2ZSA9PT0gMCk7CiAgICAgIGFzc2VydCghcC5pc1plcm8oKSk7CgogICAgICB2YXIgYSA9IHRoaXM7CiAgICAgIHZhciBiID0gcC5jbG9uZSgpOwoKICAgICAgaWYgKGEubmVnYXRpdmUgIT09IDApIHsKICAgICAgICBhID0gYS51bW9kKHApOwogICAgICB9IGVsc2UgewogICAgICAgIGEgPSBhLmNsb25lKCk7CiAgICAgIH0KCiAgICAgIHZhciB4MSA9IG5ldyBCTigxKTsKICAgICAgdmFyIHgyID0gbmV3IEJOKDApOwoKICAgICAgdmFyIGRlbHRhID0gYi5jbG9uZSgpOwoKICAgICAgd2hpbGUgKGEuY21wbigxKSA+IDAgJiYgYi5jbXBuKDEpID4gMCkgewogICAgICAgIGZvciAodmFyIGkgPSAwLCBpbSA9IDE7IChhLndvcmRzWzBdICYgaW0pID09PSAwICYmIGkgPCAyNjsgKytpLCBpbSA8PD0gMSk7CiAgICAgICAgaWYgKGkgPiAwKSB7CiAgICAgICAgICBhLml1c2hybihpKTsKICAgICAgICAgIHdoaWxlIChpLS0gPiAwKSB7CiAgICAgICAgICAgIGlmICh4MS5pc09kZCgpKSB7CiAgICAgICAgICAgICAgeDEuaWFkZChkZWx0YSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHgxLml1c2hybigxKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZvciAodmFyIGogPSAwLCBqbSA9IDE7IChiLndvcmRzWzBdICYgam0pID09PSAwICYmIGogPCAyNjsgKytqLCBqbSA8PD0gMSk7CiAgICAgICAgaWYgKGogPiAwKSB7CiAgICAgICAgICBiLml1c2hybihqKTsKICAgICAgICAgIHdoaWxlIChqLS0gPiAwKSB7CiAgICAgICAgICAgIGlmICh4Mi5pc09kZCgpKSB7CiAgICAgICAgICAgICAgeDIuaWFkZChkZWx0YSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHgyLml1c2hybigxKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChhLmNtcChiKSA+PSAwKSB7CiAgICAgICAgICBhLmlzdWIoYik7CiAgICAgICAgICB4MS5pc3ViKHgyKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYi5pc3ViKGEpOwogICAgICAgICAgeDIuaXN1Yih4MSk7CiAgICAgICAgfQogICAgICB9CgogICAgICB2YXIgcmVzOwogICAgICBpZiAoYS5jbXBuKDEpID09PSAwKSB7CiAgICAgICAgcmVzID0geDE7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmVzID0geDI7CiAgICAgIH0KCiAgICAgIGlmIChyZXMuY21wbigwKSA8IDApIHsKICAgICAgICByZXMuaWFkZChwKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlczsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmdjZCA9IGZ1bmN0aW9uIGdjZCAobnVtKSB7CiAgICAgIGlmICh0aGlzLmlzWmVybygpKSByZXR1cm4gbnVtLmFicygpOwogICAgICBpZiAobnVtLmlzWmVybygpKSByZXR1cm4gdGhpcy5hYnMoKTsKCiAgICAgIHZhciBhID0gdGhpcy5jbG9uZSgpOwogICAgICB2YXIgYiA9IG51bS5jbG9uZSgpOwogICAgICBhLm5lZ2F0aXZlID0gMDsKICAgICAgYi5uZWdhdGl2ZSA9IDA7CgogICAgICAvLyBSZW1vdmUgY29tbW9uIGZhY3RvciBvZiB0d28KICAgICAgZm9yICh2YXIgc2hpZnQgPSAwOyBhLmlzRXZlbigpICYmIGIuaXNFdmVuKCk7IHNoaWZ0KyspIHsKICAgICAgICBhLml1c2hybigxKTsKICAgICAgICBiLml1c2hybigxKTsKICAgICAgfQoKICAgICAgZG8gewogICAgICAgIHdoaWxlIChhLmlzRXZlbigpKSB7CiAgICAgICAgICBhLml1c2hybigxKTsKICAgICAgICB9CiAgICAgICAgd2hpbGUgKGIuaXNFdmVuKCkpIHsKICAgICAgICAgIGIuaXVzaHJuKDEpOwogICAgICAgIH0KCiAgICAgICAgdmFyIHIgPSBhLmNtcChiKTsKICAgICAgICBpZiAociA8IDApIHsKICAgICAgICAgIC8vIFN3YXAgYGFgIGFuZCBgYmAgdG8gbWFrZSBgYWAgYWx3YXlzIGJpZ2dlciB0aGFuIGBiYAogICAgICAgICAgdmFyIHQgPSBhOwogICAgICAgICAgYSA9IGI7CiAgICAgICAgICBiID0gdDsKICAgICAgICB9IGVsc2UgaWYgKHIgPT09IDAgfHwgYi5jbXBuKDEpID09PSAwKSB7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICAgIGEuaXN1YihiKTsKICAgICAgfSB3aGlsZSAodHJ1ZSk7CgogICAgICByZXR1cm4gYi5pdXNobG4oc2hpZnQpOwogICAgfTsKCiAgICAvLyBJbnZlcnQgbnVtYmVyIGluIHRoZSBmaWVsZCBGKG51bSkKICAgIEJOLnByb3RvdHlwZS5pbnZtID0gZnVuY3Rpb24gaW52bSAobnVtKSB7CiAgICAgIHJldHVybiB0aGlzLmVnY2QobnVtKS5hLnVtb2QobnVtKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmlzRXZlbiA9IGZ1bmN0aW9uIGlzRXZlbiAoKSB7CiAgICAgIHJldHVybiAodGhpcy53b3Jkc1swXSAmIDEpID09PSAwOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuaXNPZGQgPSBmdW5jdGlvbiBpc09kZCAoKSB7CiAgICAgIHJldHVybiAodGhpcy53b3Jkc1swXSAmIDEpID09PSAxOwogICAgfTsKCiAgICAvLyBBbmQgZmlyc3Qgd29yZCBhbmQgbnVtCiAgICBCTi5wcm90b3R5cGUuYW5kbG4gPSBmdW5jdGlvbiBhbmRsbiAobnVtKSB7CiAgICAgIHJldHVybiB0aGlzLndvcmRzWzBdICYgbnVtOwogICAgfTsKCiAgICAvLyBJbmNyZW1lbnQgYXQgdGhlIGJpdCBwb3NpdGlvbiBpbi1saW5lCiAgICBCTi5wcm90b3R5cGUuYmluY24gPSBmdW5jdGlvbiBiaW5jbiAoYml0KSB7CiAgICAgIGFzc2VydCh0eXBlb2YgYml0ID09PSAnbnVtYmVyJyk7CiAgICAgIHZhciByID0gYml0ICUgMjY7CiAgICAgIHZhciBzID0gKGJpdCAtIHIpIC8gMjY7CiAgICAgIHZhciBxID0gMSA8PCByOwoKICAgICAgLy8gRmFzdCBjYXNlOiBiaXQgaXMgbXVjaCBoaWdoZXIgdGhhbiBhbGwgZXhpc3Rpbmcgd29yZHMKICAgICAgaWYgKHRoaXMubGVuZ3RoIDw9IHMpIHsKICAgICAgICB0aGlzLl9leHBhbmQocyArIDEpOwogICAgICAgIHRoaXMud29yZHNbc10gfD0gcTsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfQoKICAgICAgLy8gQWRkIGJpdCBhbmQgcHJvcGFnYXRlLCBpZiBuZWVkZWQKICAgICAgdmFyIGNhcnJ5ID0gcTsKICAgICAgZm9yICh2YXIgaSA9IHM7IGNhcnJ5ICE9PSAwICYmIGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIHcgPSB0aGlzLndvcmRzW2ldIHwgMDsKICAgICAgICB3ICs9IGNhcnJ5OwogICAgICAgIGNhcnJ5ID0gdyA+Pj4gMjY7CiAgICAgICAgdyAmPSAweDNmZmZmZmY7CiAgICAgICAgdGhpcy53b3Jkc1tpXSA9IHc7CiAgICAgIH0KICAgICAgaWYgKGNhcnJ5ICE9PSAwKSB7CiAgICAgICAgdGhpcy53b3Jkc1tpXSA9IGNhcnJ5OwogICAgICAgIHRoaXMubGVuZ3RoKys7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXM7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5pc1plcm8gPSBmdW5jdGlvbiBpc1plcm8gKCkgewogICAgICByZXR1cm4gdGhpcy5sZW5ndGggPT09IDEgJiYgdGhpcy53b3Jkc1swXSA9PT0gMDsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmNtcG4gPSBmdW5jdGlvbiBjbXBuIChudW0pIHsKICAgICAgdmFyIG5lZ2F0aXZlID0gbnVtIDwgMDsKCiAgICAgIGlmICh0aGlzLm5lZ2F0aXZlICE9PSAwICYmICFuZWdhdGl2ZSkgcmV0dXJuIC0xOwogICAgICBpZiAodGhpcy5uZWdhdGl2ZSA9PT0gMCAmJiBuZWdhdGl2ZSkgcmV0dXJuIDE7CgogICAgICB0aGlzLnN0cmlwKCk7CgogICAgICB2YXIgcmVzOwogICAgICBpZiAodGhpcy5sZW5ndGggPiAxKSB7CiAgICAgICAgcmVzID0gMTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAobmVnYXRpdmUpIHsKICAgICAgICAgIG51bSA9IC1udW07CiAgICAgICAgfQoKICAgICAgICBhc3NlcnQobnVtIDw9IDB4M2ZmZmZmZiwgJ051bWJlciBpcyB0b28gYmlnJyk7CgogICAgICAgIHZhciB3ID0gdGhpcy53b3Jkc1swXSB8IDA7CiAgICAgICAgcmVzID0gdyA9PT0gbnVtID8gMCA6IHcgPCBudW0gPyAtMSA6IDE7CiAgICAgIH0KICAgICAgaWYgKHRoaXMubmVnYXRpdmUgIT09IDApIHJldHVybiAtcmVzIHwgMDsKICAgICAgcmV0dXJuIHJlczsKICAgIH07CgogICAgLy8gQ29tcGFyZSB0d28gbnVtYmVycyBhbmQgcmV0dXJuOgogICAgLy8gMSAtIGlmIGB0aGlzYCA+IGBudW1gCiAgICAvLyAwIC0gaWYgYHRoaXNgID09IGBudW1gCiAgICAvLyAtMSAtIGlmIGB0aGlzYCA8IGBudW1gCiAgICBCTi5wcm90b3R5cGUuY21wID0gZnVuY3Rpb24gY21wIChudW0pIHsKICAgICAgaWYgKHRoaXMubmVnYXRpdmUgIT09IDAgJiYgbnVtLm5lZ2F0aXZlID09PSAwKSByZXR1cm4gLTE7CiAgICAgIGlmICh0aGlzLm5lZ2F0aXZlID09PSAwICYmIG51bS5uZWdhdGl2ZSAhPT0gMCkgcmV0dXJuIDE7CgogICAgICB2YXIgcmVzID0gdGhpcy51Y21wKG51bSk7CiAgICAgIGlmICh0aGlzLm5lZ2F0aXZlICE9PSAwKSByZXR1cm4gLXJlcyB8IDA7CiAgICAgIHJldHVybiByZXM7CiAgICB9OwoKICAgIC8vIFVuc2lnbmVkIGNvbXBhcmlzb24KICAgIEJOLnByb3RvdHlwZS51Y21wID0gZnVuY3Rpb24gdWNtcCAobnVtKSB7CiAgICAgIC8vIEF0IHRoaXMgcG9pbnQgYm90aCBudW1iZXJzIGhhdmUgdGhlIHNhbWUgc2lnbgogICAgICBpZiAodGhpcy5sZW5ndGggPiBudW0ubGVuZ3RoKSByZXR1cm4gMTsKICAgICAgaWYgKHRoaXMubGVuZ3RoIDwgbnVtLmxlbmd0aCkgcmV0dXJuIC0xOwoKICAgICAgdmFyIHJlcyA9IDA7CiAgICAgIGZvciAodmFyIGkgPSB0aGlzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICAgICAgdmFyIGEgPSB0aGlzLndvcmRzW2ldIHwgMDsKICAgICAgICB2YXIgYiA9IG51bS53b3Jkc1tpXSB8IDA7CgogICAgICAgIGlmIChhID09PSBiKSBjb250aW51ZTsKICAgICAgICBpZiAoYSA8IGIpIHsKICAgICAgICAgIHJlcyA9IC0xOwogICAgICAgIH0gZWxzZSBpZiAoYSA+IGIpIHsKICAgICAgICAgIHJlcyA9IDE7CiAgICAgICAgfQogICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIHJldHVybiByZXM7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5ndG4gPSBmdW5jdGlvbiBndG4gKG51bSkgewogICAgICByZXR1cm4gdGhpcy5jbXBuKG51bSkgPT09IDE7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5ndCA9IGZ1bmN0aW9uIGd0IChudW0pIHsKICAgICAgcmV0dXJuIHRoaXMuY21wKG51bSkgPT09IDE7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5ndGVuID0gZnVuY3Rpb24gZ3RlbiAobnVtKSB7CiAgICAgIHJldHVybiB0aGlzLmNtcG4obnVtKSA+PSAwOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuZ3RlID0gZnVuY3Rpb24gZ3RlIChudW0pIHsKICAgICAgcmV0dXJuIHRoaXMuY21wKG51bSkgPj0gMDsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmx0biA9IGZ1bmN0aW9uIGx0biAobnVtKSB7CiAgICAgIHJldHVybiB0aGlzLmNtcG4obnVtKSA9PT0gLTE7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5sdCA9IGZ1bmN0aW9uIGx0IChudW0pIHsKICAgICAgcmV0dXJuIHRoaXMuY21wKG51bSkgPT09IC0xOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUubHRlbiA9IGZ1bmN0aW9uIGx0ZW4gKG51bSkgewogICAgICByZXR1cm4gdGhpcy5jbXBuKG51bSkgPD0gMDsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmx0ZSA9IGZ1bmN0aW9uIGx0ZSAobnVtKSB7CiAgICAgIHJldHVybiB0aGlzLmNtcChudW0pIDw9IDA7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5lcW4gPSBmdW5jdGlvbiBlcW4gKG51bSkgewogICAgICByZXR1cm4gdGhpcy5jbXBuKG51bSkgPT09IDA7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5lcSA9IGZ1bmN0aW9uIGVxIChudW0pIHsKICAgICAgcmV0dXJuIHRoaXMuY21wKG51bSkgPT09IDA7CiAgICB9OwoKICAgIC8vCiAgICAvLyBBIHJlZHVjZSBjb250ZXh0LCBjb3VsZCBiZSB1c2luZyBtb250Z29tZXJ5IG9yIHNvbWV0aGluZyBiZXR0ZXIsIGRlcGVuZGluZwogICAgLy8gb24gdGhlIGBtYCBpdHNlbGYuCiAgICAvLwogICAgQk4ucmVkID0gZnVuY3Rpb24gcmVkIChudW0pIHsKICAgICAgcmV0dXJuIG5ldyBSZWQobnVtKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLnRvUmVkID0gZnVuY3Rpb24gdG9SZWQgKGN0eCkgewogICAgICBhc3NlcnQoIXRoaXMucmVkLCAnQWxyZWFkeSBhIG51bWJlciBpbiByZWR1Y3Rpb24gY29udGV4dCcpOwogICAgICBhc3NlcnQodGhpcy5uZWdhdGl2ZSA9PT0gMCwgJ3JlZCB3b3JrcyBvbmx5IHdpdGggcG9zaXRpdmVzJyk7CiAgICAgIHJldHVybiBjdHguY29udmVydFRvKHRoaXMpLl9mb3JjZVJlZChjdHgpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuZnJvbVJlZCA9IGZ1bmN0aW9uIGZyb21SZWQgKCkgewogICAgICBhc3NlcnQodGhpcy5yZWQsICdmcm9tUmVkIHdvcmtzIG9ubHkgd2l0aCBudW1iZXJzIGluIHJlZHVjdGlvbiBjb250ZXh0Jyk7CiAgICAgIHJldHVybiB0aGlzLnJlZC5jb252ZXJ0RnJvbSh0aGlzKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLl9mb3JjZVJlZCA9IGZ1bmN0aW9uIF9mb3JjZVJlZCAoY3R4KSB7CiAgICAgIHRoaXMucmVkID0gY3R4OwogICAgICByZXR1cm4gdGhpczsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmZvcmNlUmVkID0gZnVuY3Rpb24gZm9yY2VSZWQgKGN0eCkgewogICAgICBhc3NlcnQoIXRoaXMucmVkLCAnQWxyZWFkeSBhIG51bWJlciBpbiByZWR1Y3Rpb24gY29udGV4dCcpOwogICAgICByZXR1cm4gdGhpcy5fZm9yY2VSZWQoY3R4KTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLnJlZEFkZCA9IGZ1bmN0aW9uIHJlZEFkZCAobnVtKSB7CiAgICAgIGFzc2VydCh0aGlzLnJlZCwgJ3JlZEFkZCB3b3JrcyBvbmx5IHdpdGggcmVkIG51bWJlcnMnKTsKICAgICAgcmV0dXJuIHRoaXMucmVkLmFkZCh0aGlzLCBudW0pOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUucmVkSUFkZCA9IGZ1bmN0aW9uIHJlZElBZGQgKG51bSkgewogICAgICBhc3NlcnQodGhpcy5yZWQsICdyZWRJQWRkIHdvcmtzIG9ubHkgd2l0aCByZWQgbnVtYmVycycpOwogICAgICByZXR1cm4gdGhpcy5yZWQuaWFkZCh0aGlzLCBudW0pOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUucmVkU3ViID0gZnVuY3Rpb24gcmVkU3ViIChudW0pIHsKICAgICAgYXNzZXJ0KHRoaXMucmVkLCAncmVkU3ViIHdvcmtzIG9ubHkgd2l0aCByZWQgbnVtYmVycycpOwogICAgICByZXR1cm4gdGhpcy5yZWQuc3ViKHRoaXMsIG51bSk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5yZWRJU3ViID0gZnVuY3Rpb24gcmVkSVN1YiAobnVtKSB7CiAgICAgIGFzc2VydCh0aGlzLnJlZCwgJ3JlZElTdWIgd29ya3Mgb25seSB3aXRoIHJlZCBudW1iZXJzJyk7CiAgICAgIHJldHVybiB0aGlzLnJlZC5pc3ViKHRoaXMsIG51bSk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5yZWRTaGwgPSBmdW5jdGlvbiByZWRTaGwgKG51bSkgewogICAgICBhc3NlcnQodGhpcy5yZWQsICdyZWRTaGwgd29ya3Mgb25seSB3aXRoIHJlZCBudW1iZXJzJyk7CiAgICAgIHJldHVybiB0aGlzLnJlZC5zaGwodGhpcywgbnVtKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLnJlZE11bCA9IGZ1bmN0aW9uIHJlZE11bCAobnVtKSB7CiAgICAgIGFzc2VydCh0aGlzLnJlZCwgJ3JlZE11bCB3b3JrcyBvbmx5IHdpdGggcmVkIG51bWJlcnMnKTsKICAgICAgdGhpcy5yZWQuX3ZlcmlmeTIodGhpcywgbnVtKTsKICAgICAgcmV0dXJuIHRoaXMucmVkLm11bCh0aGlzLCBudW0pOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUucmVkSU11bCA9IGZ1bmN0aW9uIHJlZElNdWwgKG51bSkgewogICAgICBhc3NlcnQodGhpcy5yZWQsICdyZWRNdWwgd29ya3Mgb25seSB3aXRoIHJlZCBudW1iZXJzJyk7CiAgICAgIHRoaXMucmVkLl92ZXJpZnkyKHRoaXMsIG51bSk7CiAgICAgIHJldHVybiB0aGlzLnJlZC5pbXVsKHRoaXMsIG51bSk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5yZWRTcXIgPSBmdW5jdGlvbiByZWRTcXIgKCkgewogICAgICBhc3NlcnQodGhpcy5yZWQsICdyZWRTcXIgd29ya3Mgb25seSB3aXRoIHJlZCBudW1iZXJzJyk7CiAgICAgIHRoaXMucmVkLl92ZXJpZnkxKHRoaXMpOwogICAgICByZXR1cm4gdGhpcy5yZWQuc3FyKHRoaXMpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUucmVkSVNxciA9IGZ1bmN0aW9uIHJlZElTcXIgKCkgewogICAgICBhc3NlcnQodGhpcy5yZWQsICdyZWRJU3FyIHdvcmtzIG9ubHkgd2l0aCByZWQgbnVtYmVycycpOwogICAgICB0aGlzLnJlZC5fdmVyaWZ5MSh0aGlzKTsKICAgICAgcmV0dXJuIHRoaXMucmVkLmlzcXIodGhpcyk7CiAgICB9OwoKICAgIC8vIFNxdWFyZSByb290IG92ZXIgcAogICAgQk4ucHJvdG90eXBlLnJlZFNxcnQgPSBmdW5jdGlvbiByZWRTcXJ0ICgpIHsKICAgICAgYXNzZXJ0KHRoaXMucmVkLCAncmVkU3FydCB3b3JrcyBvbmx5IHdpdGggcmVkIG51bWJlcnMnKTsKICAgICAgdGhpcy5yZWQuX3ZlcmlmeTEodGhpcyk7CiAgICAgIHJldHVybiB0aGlzLnJlZC5zcXJ0KHRoaXMpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUucmVkSW52bSA9IGZ1bmN0aW9uIHJlZEludm0gKCkgewogICAgICBhc3NlcnQodGhpcy5yZWQsICdyZWRJbnZtIHdvcmtzIG9ubHkgd2l0aCByZWQgbnVtYmVycycpOwogICAgICB0aGlzLnJlZC5fdmVyaWZ5MSh0aGlzKTsKICAgICAgcmV0dXJuIHRoaXMucmVkLmludm0odGhpcyk7CiAgICB9OwoKICAgIC8vIFJldHVybiBuZWdhdGl2ZSBjbG9uZSBvZiBgdGhpc2AgJSBgcmVkIG1vZHVsb2AKICAgIEJOLnByb3RvdHlwZS5yZWROZWcgPSBmdW5jdGlvbiByZWROZWcgKCkgewogICAgICBhc3NlcnQodGhpcy5yZWQsICdyZWROZWcgd29ya3Mgb25seSB3aXRoIHJlZCBudW1iZXJzJyk7CiAgICAgIHRoaXMucmVkLl92ZXJpZnkxKHRoaXMpOwogICAgICByZXR1cm4gdGhpcy5yZWQubmVnKHRoaXMpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUucmVkUG93ID0gZnVuY3Rpb24gcmVkUG93IChudW0pIHsKICAgICAgYXNzZXJ0KHRoaXMucmVkICYmICFudW0ucmVkLCAncmVkUG93KG5vcm1hbE51bSknKTsKICAgICAgdGhpcy5yZWQuX3ZlcmlmeTEodGhpcyk7CiAgICAgIHJldHVybiB0aGlzLnJlZC5wb3codGhpcywgbnVtKTsKICAgIH07CgogICAgLy8gUHJpbWUgbnVtYmVycyB3aXRoIGVmZmljaWVudCByZWR1Y3Rpb24KICAgIHZhciBwcmltZXMgPSB7CiAgICAgIGsyNTY6IG51bGwsCiAgICAgIHAyMjQ6IG51bGwsCiAgICAgIHAxOTI6IG51bGwsCiAgICAgIHAyNTUxOTogbnVsbAogICAgfTsKCiAgICAvLyBQc2V1ZG8tTWVyc2VubmUgcHJpbWUKICAgIGZ1bmN0aW9uIE1QcmltZSAobmFtZSwgcCkgewogICAgICAvLyBQID0gMiBeIE4gLSBLCiAgICAgIHRoaXMubmFtZSA9IG5hbWU7CiAgICAgIHRoaXMucCA9IG5ldyBCTihwLCAxNik7CiAgICAgIHRoaXMubiA9IHRoaXMucC5iaXRMZW5ndGgoKTsKICAgICAgdGhpcy5rID0gbmV3IEJOKDEpLml1c2hsbih0aGlzLm4pLmlzdWIodGhpcy5wKTsKCiAgICAgIHRoaXMudG1wID0gdGhpcy5fdG1wKCk7CiAgICB9CgogICAgTVByaW1lLnByb3RvdHlwZS5fdG1wID0gZnVuY3Rpb24gX3RtcCAoKSB7CiAgICAgIHZhciB0bXAgPSBuZXcgQk4obnVsbCk7CiAgICAgIHRtcC53b3JkcyA9IG5ldyBBcnJheShNYXRoLmNlaWwodGhpcy5uIC8gMTMpKTsKICAgICAgcmV0dXJuIHRtcDsKICAgIH07CgogICAgTVByaW1lLnByb3RvdHlwZS5pcmVkdWNlID0gZnVuY3Rpb24gaXJlZHVjZSAobnVtKSB7CiAgICAgIC8vIEFzc3VtZXMgdGhhdCBgbnVtYCBpcyBsZXNzIHRoYW4gYFBeMmAKICAgICAgLy8gbnVtID0gSEkgKiAoMiBeIE4gLSBLKSArIEhJICogSyArIExPID0gSEkgKiBLICsgTE8gKG1vZCBQKQogICAgICB2YXIgciA9IG51bTsKICAgICAgdmFyIHJsZW47CgogICAgICBkbyB7CiAgICAgICAgdGhpcy5zcGxpdChyLCB0aGlzLnRtcCk7CiAgICAgICAgciA9IHRoaXMuaW11bEsocik7CiAgICAgICAgciA9IHIuaWFkZCh0aGlzLnRtcCk7CiAgICAgICAgcmxlbiA9IHIuYml0TGVuZ3RoKCk7CiAgICAgIH0gd2hpbGUgKHJsZW4gPiB0aGlzLm4pOwoKICAgICAgdmFyIGNtcCA9IHJsZW4gPCB0aGlzLm4gPyAtMSA6IHIudWNtcCh0aGlzLnApOwogICAgICBpZiAoY21wID09PSAwKSB7CiAgICAgICAgci53b3Jkc1swXSA9IDA7CiAgICAgICAgci5sZW5ndGggPSAxOwogICAgICB9IGVsc2UgaWYgKGNtcCA+IDApIHsKICAgICAgICByLmlzdWIodGhpcy5wKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoci5zdHJpcCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAvLyByIGlzIEJOIHY0IGluc3RhbmNlCiAgICAgICAgICByLnN0cmlwKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIHIgaXMgQk4gdjUgaW5zdGFuY2UKICAgICAgICAgIHIuX3N0cmlwKCk7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gcjsKICAgIH07CgogICAgTVByaW1lLnByb3RvdHlwZS5zcGxpdCA9IGZ1bmN0aW9uIHNwbGl0IChpbnB1dCwgb3V0KSB7CiAgICAgIGlucHV0Lml1c2hybih0aGlzLm4sIDAsIG91dCk7CiAgICB9OwoKICAgIE1QcmltZS5wcm90b3R5cGUuaW11bEsgPSBmdW5jdGlvbiBpbXVsSyAobnVtKSB7CiAgICAgIHJldHVybiBudW0uaW11bCh0aGlzLmspOwogICAgfTsKCiAgICBmdW5jdGlvbiBLMjU2ICgpIHsKICAgICAgTVByaW1lLmNhbGwoCiAgICAgICAgdGhpcywKICAgICAgICAnazI1NicsCiAgICAgICAgJ2ZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZlIGZmZmZmYzJmJyk7CiAgICB9CiAgICBpbmhlcml0cyhLMjU2LCBNUHJpbWUpOwoKICAgIEsyNTYucHJvdG90eXBlLnNwbGl0ID0gZnVuY3Rpb24gc3BsaXQgKGlucHV0LCBvdXRwdXQpIHsKICAgICAgLy8gMjU2ID0gOSAqIDI2ICsgMjIKICAgICAgdmFyIG1hc2sgPSAweDNmZmZmZjsKCiAgICAgIHZhciBvdXRMZW4gPSBNYXRoLm1pbihpbnB1dC5sZW5ndGgsIDkpOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG91dExlbjsgaSsrKSB7CiAgICAgICAgb3V0cHV0LndvcmRzW2ldID0gaW5wdXQud29yZHNbaV07CiAgICAgIH0KICAgICAgb3V0cHV0Lmxlbmd0aCA9IG91dExlbjsKCiAgICAgIGlmIChpbnB1dC5sZW5ndGggPD0gOSkgewogICAgICAgIGlucHV0LndvcmRzWzBdID0gMDsKICAgICAgICBpbnB1dC5sZW5ndGggPSAxOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgLy8gU2hpZnQgYnkgOSBsaW1icwogICAgICB2YXIgcHJldiA9IGlucHV0LndvcmRzWzldOwogICAgICBvdXRwdXQud29yZHNbb3V0cHV0Lmxlbmd0aCsrXSA9IHByZXYgJiBtYXNrOwoKICAgICAgZm9yIChpID0gMTA7IGkgPCBpbnB1dC5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBuZXh0ID0gaW5wdXQud29yZHNbaV0gfCAwOwogICAgICAgIGlucHV0LndvcmRzW2kgLSAxMF0gPSAoKG5leHQgJiBtYXNrKSA8PCA0KSB8IChwcmV2ID4+PiAyMik7CiAgICAgICAgcHJldiA9IG5leHQ7CiAgICAgIH0KICAgICAgcHJldiA+Pj49IDIyOwogICAgICBpbnB1dC53b3Jkc1tpIC0gMTBdID0gcHJldjsKICAgICAgaWYgKHByZXYgPT09IDAgJiYgaW5wdXQubGVuZ3RoID4gMTApIHsKICAgICAgICBpbnB1dC5sZW5ndGggLT0gMTA7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaW5wdXQubGVuZ3RoIC09IDk7CiAgICAgIH0KICAgIH07CgogICAgSzI1Ni5wcm90b3R5cGUuaW11bEsgPSBmdW5jdGlvbiBpbXVsSyAobnVtKSB7CiAgICAgIC8vIEsgPSAweDEwMDAwMDNkMSA9IFsgMHg0MCwgMHgzZDEgXQogICAgICBudW0ud29yZHNbbnVtLmxlbmd0aF0gPSAwOwogICAgICBudW0ud29yZHNbbnVtLmxlbmd0aCArIDFdID0gMDsKICAgICAgbnVtLmxlbmd0aCArPSAyOwoKICAgICAgLy8gYm91bmRlZCBhdDogMHg0MCAqIDB4M2ZmZmZmZiArIDB4M2QwID0gMHgxMDAwMDAzOTAKICAgICAgdmFyIGxvID0gMDsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW0ubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgdyA9IG51bS53b3Jkc1tpXSB8IDA7CiAgICAgICAgbG8gKz0gdyAqIDB4M2QxOwogICAgICAgIG51bS53b3Jkc1tpXSA9IGxvICYgMHgzZmZmZmZmOwogICAgICAgIGxvID0gdyAqIDB4NDAgKyAoKGxvIC8gMHg0MDAwMDAwKSB8IDApOwogICAgICB9CgogICAgICAvLyBGYXN0IGxlbmd0aCByZWR1Y3Rpb24KICAgICAgaWYgKG51bS53b3Jkc1tudW0ubGVuZ3RoIC0gMV0gPT09IDApIHsKICAgICAgICBudW0ubGVuZ3RoLS07CiAgICAgICAgaWYgKG51bS53b3Jkc1tudW0ubGVuZ3RoIC0gMV0gPT09IDApIHsKICAgICAgICAgIG51bS5sZW5ndGgtLTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIG51bTsKICAgIH07CgogICAgZnVuY3Rpb24gUDIyNCAoKSB7CiAgICAgIE1QcmltZS5jYWxsKAogICAgICAgIHRoaXMsCiAgICAgICAgJ3AyMjQnLAogICAgICAgICdmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiAwMDAwMDAwMCAwMDAwMDAwMCAwMDAwMDAwMScpOwogICAgfQogICAgaW5oZXJpdHMoUDIyNCwgTVByaW1lKTsKCiAgICBmdW5jdGlvbiBQMTkyICgpIHsKICAgICAgTVByaW1lLmNhbGwoCiAgICAgICAgdGhpcywKICAgICAgICAncDE5MicsCiAgICAgICAgJ2ZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZlIGZmZmZmZmZmIGZmZmZmZmZmJyk7CiAgICB9CiAgICBpbmhlcml0cyhQMTkyLCBNUHJpbWUpOwoKICAgIGZ1bmN0aW9uIFAyNTUxOSAoKSB7CiAgICAgIC8vIDIgXiAyNTUgLSAxOQogICAgICBNUHJpbWUuY2FsbCgKICAgICAgICB0aGlzLAogICAgICAgICcyNTUxOScsCiAgICAgICAgJzdmZmZmZmZmZmZmZmZmZmYgZmZmZmZmZmZmZmZmZmZmZiBmZmZmZmZmZmZmZmZmZmZmIGZmZmZmZmZmZmZmZmZmZWQnKTsKICAgIH0KICAgIGluaGVyaXRzKFAyNTUxOSwgTVByaW1lKTsKCiAgICBQMjU1MTkucHJvdG90eXBlLmltdWxLID0gZnVuY3Rpb24gaW11bEsgKG51bSkgewogICAgICAvLyBLID0gMHgxMwogICAgICB2YXIgY2FycnkgPSAwOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bS5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBoaSA9IChudW0ud29yZHNbaV0gfCAwKSAqIDB4MTMgKyBjYXJyeTsKICAgICAgICB2YXIgbG8gPSBoaSAmIDB4M2ZmZmZmZjsKICAgICAgICBoaSA+Pj49IDI2OwoKICAgICAgICBudW0ud29yZHNbaV0gPSBsbzsKICAgICAgICBjYXJyeSA9IGhpOwogICAgICB9CiAgICAgIGlmIChjYXJyeSAhPT0gMCkgewogICAgICAgIG51bS53b3Jkc1tudW0ubGVuZ3RoKytdID0gY2Fycnk7CiAgICAgIH0KICAgICAgcmV0dXJuIG51bTsKICAgIH07CgogICAgLy8gRXhwb3J0ZWQgbW9zdGx5IGZvciB0ZXN0aW5nIHB1cnBvc2VzLCB1c2UgcGxhaW4gbmFtZSBpbnN0ZWFkCiAgICBCTi5fcHJpbWUgPSBmdW5jdGlvbiBwcmltZSAobmFtZSkgewogICAgICAvLyBDYWNoZWQgdmVyc2lvbiBvZiBwcmltZQogICAgICBpZiAocHJpbWVzW25hbWVdKSByZXR1cm4gcHJpbWVzW25hbWVdOwoKICAgICAgdmFyIHByaW1lOwogICAgICBpZiAobmFtZSA9PT0gJ2syNTYnKSB7CiAgICAgICAgcHJpbWUgPSBuZXcgSzI1NigpOwogICAgICB9IGVsc2UgaWYgKG5hbWUgPT09ICdwMjI0JykgewogICAgICAgIHByaW1lID0gbmV3IFAyMjQoKTsKICAgICAgfSBlbHNlIGlmIChuYW1lID09PSAncDE5MicpIHsKICAgICAgICBwcmltZSA9IG5ldyBQMTkyKCk7CiAgICAgIH0gZWxzZSBpZiAobmFtZSA9PT0gJ3AyNTUxOScpIHsKICAgICAgICBwcmltZSA9IG5ldyBQMjU1MTkoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gcHJpbWUgJyArIG5hbWUpOwogICAgICB9CiAgICAgIHByaW1lc1tuYW1lXSA9IHByaW1lOwoKICAgICAgcmV0dXJuIHByaW1lOwogICAgfTsKCiAgICAvLwogICAgLy8gQmFzZSByZWR1Y3Rpb24gZW5naW5lCiAgICAvLwogICAgZnVuY3Rpb24gUmVkIChtKSB7CiAgICAgIGlmICh0eXBlb2YgbSA9PT0gJ3N0cmluZycpIHsKICAgICAgICB2YXIgcHJpbWUgPSBCTi5fcHJpbWUobSk7CiAgICAgICAgdGhpcy5tID0gcHJpbWUucDsKICAgICAgICB0aGlzLnByaW1lID0gcHJpbWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYXNzZXJ0KG0uZ3RuKDEpLCAnbW9kdWx1cyBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAxJyk7CiAgICAgICAgdGhpcy5tID0gbTsKICAgICAgICB0aGlzLnByaW1lID0gbnVsbDsKICAgICAgfQogICAgfQoKICAgIFJlZC5wcm90b3R5cGUuX3ZlcmlmeTEgPSBmdW5jdGlvbiBfdmVyaWZ5MSAoYSkgewogICAgICBhc3NlcnQoYS5uZWdhdGl2ZSA9PT0gMCwgJ3JlZCB3b3JrcyBvbmx5IHdpdGggcG9zaXRpdmVzJyk7CiAgICAgIGFzc2VydChhLnJlZCwgJ3JlZCB3b3JrcyBvbmx5IHdpdGggcmVkIG51bWJlcnMnKTsKICAgIH07CgogICAgUmVkLnByb3RvdHlwZS5fdmVyaWZ5MiA9IGZ1bmN0aW9uIF92ZXJpZnkyIChhLCBiKSB7CiAgICAgIGFzc2VydCgoYS5uZWdhdGl2ZSB8IGIubmVnYXRpdmUpID09PSAwLCAncmVkIHdvcmtzIG9ubHkgd2l0aCBwb3NpdGl2ZXMnKTsKICAgICAgYXNzZXJ0KGEucmVkICYmIGEucmVkID09PSBiLnJlZCwKICAgICAgICAncmVkIHdvcmtzIG9ubHkgd2l0aCByZWQgbnVtYmVycycpOwogICAgfTsKCiAgICBSZWQucHJvdG90eXBlLmltb2QgPSBmdW5jdGlvbiBpbW9kIChhKSB7CiAgICAgIGlmICh0aGlzLnByaW1lKSByZXR1cm4gdGhpcy5wcmltZS5pcmVkdWNlKGEpLl9mb3JjZVJlZCh0aGlzKTsKICAgICAgcmV0dXJuIGEudW1vZCh0aGlzLm0pLl9mb3JjZVJlZCh0aGlzKTsKICAgIH07CgogICAgUmVkLnByb3RvdHlwZS5uZWcgPSBmdW5jdGlvbiBuZWcgKGEpIHsKICAgICAgaWYgKGEuaXNaZXJvKCkpIHsKICAgICAgICByZXR1cm4gYS5jbG9uZSgpOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5tLnN1YihhKS5fZm9yY2VSZWQodGhpcyk7CiAgICB9OwoKICAgIFJlZC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gYWRkIChhLCBiKSB7CiAgICAgIHRoaXMuX3ZlcmlmeTIoYSwgYik7CgogICAgICB2YXIgcmVzID0gYS5hZGQoYik7CiAgICAgIGlmIChyZXMuY21wKHRoaXMubSkgPj0gMCkgewogICAgICAgIHJlcy5pc3ViKHRoaXMubSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlcy5fZm9yY2VSZWQodGhpcyk7CiAgICB9OwoKICAgIFJlZC5wcm90b3R5cGUuaWFkZCA9IGZ1bmN0aW9uIGlhZGQgKGEsIGIpIHsKICAgICAgdGhpcy5fdmVyaWZ5MihhLCBiKTsKCiAgICAgIHZhciByZXMgPSBhLmlhZGQoYik7CiAgICAgIGlmIChyZXMuY21wKHRoaXMubSkgPj0gMCkgewogICAgICAgIHJlcy5pc3ViKHRoaXMubSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlczsKICAgIH07CgogICAgUmVkLnByb3RvdHlwZS5zdWIgPSBmdW5jdGlvbiBzdWIgKGEsIGIpIHsKICAgICAgdGhpcy5fdmVyaWZ5MihhLCBiKTsKCiAgICAgIHZhciByZXMgPSBhLnN1YihiKTsKICAgICAgaWYgKHJlcy5jbXBuKDApIDwgMCkgewogICAgICAgIHJlcy5pYWRkKHRoaXMubSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlcy5fZm9yY2VSZWQodGhpcyk7CiAgICB9OwoKICAgIFJlZC5wcm90b3R5cGUuaXN1YiA9IGZ1bmN0aW9uIGlzdWIgKGEsIGIpIHsKICAgICAgdGhpcy5fdmVyaWZ5MihhLCBiKTsKCiAgICAgIHZhciByZXMgPSBhLmlzdWIoYik7CiAgICAgIGlmIChyZXMuY21wbigwKSA8IDApIHsKICAgICAgICByZXMuaWFkZCh0aGlzLm0pOwogICAgICB9CiAgICAgIHJldHVybiByZXM7CiAgICB9OwoKICAgIFJlZC5wcm90b3R5cGUuc2hsID0gZnVuY3Rpb24gc2hsIChhLCBudW0pIHsKICAgICAgdGhpcy5fdmVyaWZ5MShhKTsKICAgICAgcmV0dXJuIHRoaXMuaW1vZChhLnVzaGxuKG51bSkpOwogICAgfTsKCiAgICBSZWQucHJvdG90eXBlLmltdWwgPSBmdW5jdGlvbiBpbXVsIChhLCBiKSB7CiAgICAgIHRoaXMuX3ZlcmlmeTIoYSwgYik7CiAgICAgIHJldHVybiB0aGlzLmltb2QoYS5pbXVsKGIpKTsKICAgIH07CgogICAgUmVkLnByb3RvdHlwZS5tdWwgPSBmdW5jdGlvbiBtdWwgKGEsIGIpIHsKICAgICAgdGhpcy5fdmVyaWZ5MihhLCBiKTsKICAgICAgcmV0dXJuIHRoaXMuaW1vZChhLm11bChiKSk7CiAgICB9OwoKICAgIFJlZC5wcm90b3R5cGUuaXNxciA9IGZ1bmN0aW9uIGlzcXIgKGEpIHsKICAgICAgcmV0dXJuIHRoaXMuaW11bChhLCBhLmNsb25lKCkpOwogICAgfTsKCiAgICBSZWQucHJvdG90eXBlLnNxciA9IGZ1bmN0aW9uIHNxciAoYSkgewogICAgICByZXR1cm4gdGhpcy5tdWwoYSwgYSk7CiAgICB9OwoKICAgIFJlZC5wcm90b3R5cGUuc3FydCA9IGZ1bmN0aW9uIHNxcnQgKGEpIHsKICAgICAgaWYgKGEuaXNaZXJvKCkpIHJldHVybiBhLmNsb25lKCk7CgogICAgICB2YXIgbW9kMyA9IHRoaXMubS5hbmRsbigzKTsKICAgICAgYXNzZXJ0KG1vZDMgJSAyID09PSAxKTsKCiAgICAgIC8vIEZhc3QgY2FzZQogICAgICBpZiAobW9kMyA9PT0gMykgewogICAgICAgIHZhciBwb3cgPSB0aGlzLm0uYWRkKG5ldyBCTigxKSkuaXVzaHJuKDIpOwogICAgICAgIHJldHVybiB0aGlzLnBvdyhhLCBwb3cpOwogICAgICB9CgogICAgICAvLyBUb25lbGxpLVNoYW5rcyBhbGdvcml0aG0gKFRvdGFsbHkgdW5vcHRpbWl6ZWQgYW5kIHNsb3cpCiAgICAgIC8vCiAgICAgIC8vIEZpbmQgUSBhbmQgUywgdGhhdCBRICogMiBeIFMgPSAoUCAtIDEpCiAgICAgIHZhciBxID0gdGhpcy5tLnN1Ym4oMSk7CiAgICAgIHZhciBzID0gMDsKICAgICAgd2hpbGUgKCFxLmlzWmVybygpICYmIHEuYW5kbG4oMSkgPT09IDApIHsKICAgICAgICBzKys7CiAgICAgICAgcS5pdXNocm4oMSk7CiAgICAgIH0KICAgICAgYXNzZXJ0KCFxLmlzWmVybygpKTsKCiAgICAgIHZhciBvbmUgPSBuZXcgQk4oMSkudG9SZWQodGhpcyk7CiAgICAgIHZhciBuT25lID0gb25lLnJlZE5lZygpOwoKICAgICAgLy8gRmluZCBxdWFkcmF0aWMgbm9uLXJlc2lkdWUKICAgICAgLy8gTk9URTogTWF4IGlzIHN1Y2ggYmVjYXVzZSBvZiBnZW5lcmFsaXplZCBSaWVtYW5uIGh5cG90aGVzaXMuCiAgICAgIHZhciBscG93ID0gdGhpcy5tLnN1Ym4oMSkuaXVzaHJuKDEpOwogICAgICB2YXIgeiA9IHRoaXMubS5iaXRMZW5ndGgoKTsKICAgICAgeiA9IG5ldyBCTigyICogeiAqIHopLnRvUmVkKHRoaXMpOwoKICAgICAgd2hpbGUgKHRoaXMucG93KHosIGxwb3cpLmNtcChuT25lKSAhPT0gMCkgewogICAgICAgIHoucmVkSUFkZChuT25lKTsKICAgICAgfQoKICAgICAgdmFyIGMgPSB0aGlzLnBvdyh6LCBxKTsKICAgICAgdmFyIHIgPSB0aGlzLnBvdyhhLCBxLmFkZG4oMSkuaXVzaHJuKDEpKTsKICAgICAgdmFyIHQgPSB0aGlzLnBvdyhhLCBxKTsKICAgICAgdmFyIG0gPSBzOwogICAgICB3aGlsZSAodC5jbXAob25lKSAhPT0gMCkgewogICAgICAgIHZhciB0bXAgPSB0OwogICAgICAgIGZvciAodmFyIGkgPSAwOyB0bXAuY21wKG9uZSkgIT09IDA7IGkrKykgewogICAgICAgICAgdG1wID0gdG1wLnJlZFNxcigpOwogICAgICAgIH0KICAgICAgICBhc3NlcnQoaSA8IG0pOwogICAgICAgIHZhciBiID0gdGhpcy5wb3coYywgbmV3IEJOKDEpLml1c2hsbihtIC0gaSAtIDEpKTsKCiAgICAgICAgciA9IHIucmVkTXVsKGIpOwogICAgICAgIGMgPSBiLnJlZFNxcigpOwogICAgICAgIHQgPSB0LnJlZE11bChjKTsKICAgICAgICBtID0gaTsKICAgICAgfQoKICAgICAgcmV0dXJuIHI7CiAgICB9OwoKICAgIFJlZC5wcm90b3R5cGUuaW52bSA9IGZ1bmN0aW9uIGludm0gKGEpIHsKICAgICAgdmFyIGludiA9IGEuX2ludm1wKHRoaXMubSk7CiAgICAgIGlmIChpbnYubmVnYXRpdmUgIT09IDApIHsKICAgICAgICBpbnYubmVnYXRpdmUgPSAwOwogICAgICAgIHJldHVybiB0aGlzLmltb2QoaW52KS5yZWROZWcoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gdGhpcy5pbW9kKGludik7CiAgICAgIH0KICAgIH07CgogICAgUmVkLnByb3RvdHlwZS5wb3cgPSBmdW5jdGlvbiBwb3cgKGEsIG51bSkgewogICAgICBpZiAobnVtLmlzWmVybygpKSByZXR1cm4gbmV3IEJOKDEpLnRvUmVkKHRoaXMpOwogICAgICBpZiAobnVtLmNtcG4oMSkgPT09IDApIHJldHVybiBhLmNsb25lKCk7CgogICAgICB2YXIgd2luZG93U2l6ZSA9IDQ7CiAgICAgIHZhciB3bmQgPSBuZXcgQXJyYXkoMSA8PCB3aW5kb3dTaXplKTsKICAgICAgd25kWzBdID0gbmV3IEJOKDEpLnRvUmVkKHRoaXMpOwogICAgICB3bmRbMV0gPSBhOwogICAgICBmb3IgKHZhciBpID0gMjsgaSA8IHduZC5sZW5ndGg7IGkrKykgewogICAgICAgIHduZFtpXSA9IHRoaXMubXVsKHduZFtpIC0gMV0sIGEpOwogICAgICB9CgogICAgICB2YXIgcmVzID0gd25kWzBdOwogICAgICB2YXIgY3VycmVudCA9IDA7CiAgICAgIHZhciBjdXJyZW50TGVuID0gMDsKICAgICAgdmFyIHN0YXJ0ID0gbnVtLmJpdExlbmd0aCgpICUgMjY7CiAgICAgIGlmIChzdGFydCA9PT0gMCkgewogICAgICAgIHN0YXJ0ID0gMjY7CiAgICAgIH0KCiAgICAgIGZvciAoaSA9IG51bS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgICAgIHZhciB3b3JkID0gbnVtLndvcmRzW2ldOwogICAgICAgIGZvciAodmFyIGogPSBzdGFydCAtIDE7IGogPj0gMDsgai0tKSB7CiAgICAgICAgICB2YXIgYml0ID0gKHdvcmQgPj4gaikgJiAxOwogICAgICAgICAgaWYgKHJlcyAhPT0gd25kWzBdKSB7CiAgICAgICAgICAgIHJlcyA9IHRoaXMuc3FyKHJlcyk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGJpdCA9PT0gMCAmJiBjdXJyZW50ID09PSAwKSB7CiAgICAgICAgICAgIGN1cnJlbnRMZW4gPSAwOwogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0KCiAgICAgICAgICBjdXJyZW50IDw8PSAxOwogICAgICAgICAgY3VycmVudCB8PSBiaXQ7CiAgICAgICAgICBjdXJyZW50TGVuKys7CiAgICAgICAgICBpZiAoY3VycmVudExlbiAhPT0gd2luZG93U2l6ZSAmJiAoaSAhPT0gMCB8fCBqICE9PSAwKSkgY29udGludWU7CgogICAgICAgICAgcmVzID0gdGhpcy5tdWwocmVzLCB3bmRbY3VycmVudF0pOwogICAgICAgICAgY3VycmVudExlbiA9IDA7CiAgICAgICAgICBjdXJyZW50ID0gMDsKICAgICAgICB9CiAgICAgICAgc3RhcnQgPSAyNjsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlczsKICAgIH07CgogICAgUmVkLnByb3RvdHlwZS5jb252ZXJ0VG8gPSBmdW5jdGlvbiBjb252ZXJ0VG8gKG51bSkgewogICAgICB2YXIgciA9IG51bS51bW9kKHRoaXMubSk7CgogICAgICByZXR1cm4gciA9PT0gbnVtID8gci5jbG9uZSgpIDogcjsKICAgIH07CgogICAgUmVkLnByb3RvdHlwZS5jb252ZXJ0RnJvbSA9IGZ1bmN0aW9uIGNvbnZlcnRGcm9tIChudW0pIHsKICAgICAgdmFyIHJlcyA9IG51bS5jbG9uZSgpOwogICAgICByZXMucmVkID0gbnVsbDsKICAgICAgcmV0dXJuIHJlczsKICAgIH07CgogICAgLy8KICAgIC8vIE1vbnRnb21lcnkgbWV0aG9kIGVuZ2luZQogICAgLy8KCiAgICBCTi5tb250ID0gZnVuY3Rpb24gbW9udCAobnVtKSB7CiAgICAgIHJldHVybiBuZXcgTW9udChudW0pOwogICAgfTsKCiAgICBmdW5jdGlvbiBNb250IChtKSB7CiAgICAgIFJlZC5jYWxsKHRoaXMsIG0pOwoKICAgICAgdGhpcy5zaGlmdCA9IHRoaXMubS5iaXRMZW5ndGgoKTsKICAgICAgaWYgKHRoaXMuc2hpZnQgJSAyNiAhPT0gMCkgewogICAgICAgIHRoaXMuc2hpZnQgKz0gMjYgLSAodGhpcy5zaGlmdCAlIDI2KTsKICAgICAgfQoKICAgICAgdGhpcy5yID0gbmV3IEJOKDEpLml1c2hsbih0aGlzLnNoaWZ0KTsKICAgICAgdGhpcy5yMiA9IHRoaXMuaW1vZCh0aGlzLnIuc3FyKCkpOwogICAgICB0aGlzLnJpbnYgPSB0aGlzLnIuX2ludm1wKHRoaXMubSk7CgogICAgICB0aGlzLm1pbnYgPSB0aGlzLnJpbnYubXVsKHRoaXMucikuaXN1Ym4oMSkuZGl2KHRoaXMubSk7CiAgICAgIHRoaXMubWludiA9IHRoaXMubWludi51bW9kKHRoaXMucik7CiAgICAgIHRoaXMubWludiA9IHRoaXMuci5zdWIodGhpcy5taW52KTsKICAgIH0KICAgIGluaGVyaXRzKE1vbnQsIFJlZCk7CgogICAgTW9udC5wcm90b3R5cGUuY29udmVydFRvID0gZnVuY3Rpb24gY29udmVydFRvIChudW0pIHsKICAgICAgcmV0dXJuIHRoaXMuaW1vZChudW0udXNobG4odGhpcy5zaGlmdCkpOwogICAgfTsKCiAgICBNb250LnByb3RvdHlwZS5jb252ZXJ0RnJvbSA9IGZ1bmN0aW9uIGNvbnZlcnRGcm9tIChudW0pIHsKICAgICAgdmFyIHIgPSB0aGlzLmltb2QobnVtLm11bCh0aGlzLnJpbnYpKTsKICAgICAgci5yZWQgPSBudWxsOwogICAgICByZXR1cm4gcjsKICAgIH07CgogICAgTW9udC5wcm90b3R5cGUuaW11bCA9IGZ1bmN0aW9uIGltdWwgKGEsIGIpIHsKICAgICAgaWYgKGEuaXNaZXJvKCkgfHwgYi5pc1plcm8oKSkgewogICAgICAgIGEud29yZHNbMF0gPSAwOwogICAgICAgIGEubGVuZ3RoID0gMTsKICAgICAgICByZXR1cm4gYTsKICAgICAgfQoKICAgICAgdmFyIHQgPSBhLmltdWwoYik7CiAgICAgIHZhciBjID0gdC5tYXNrbih0aGlzLnNoaWZ0KS5tdWwodGhpcy5taW52KS5pbWFza24odGhpcy5zaGlmdCkubXVsKHRoaXMubSk7CiAgICAgIHZhciB1ID0gdC5pc3ViKGMpLml1c2hybih0aGlzLnNoaWZ0KTsKICAgICAgdmFyIHJlcyA9IHU7CgogICAgICBpZiAodS5jbXAodGhpcy5tKSA+PSAwKSB7CiAgICAgICAgcmVzID0gdS5pc3ViKHRoaXMubSk7CiAgICAgIH0gZWxzZSBpZiAodS5jbXBuKDApIDwgMCkgewogICAgICAgIHJlcyA9IHUuaWFkZCh0aGlzLm0pOwogICAgICB9CgogICAgICByZXR1cm4gcmVzLl9mb3JjZVJlZCh0aGlzKTsKICAgIH07CgogICAgTW9udC5wcm90b3R5cGUubXVsID0gZnVuY3Rpb24gbXVsIChhLCBiKSB7CiAgICAgIGlmIChhLmlzWmVybygpIHx8IGIuaXNaZXJvKCkpIHJldHVybiBuZXcgQk4oMCkuX2ZvcmNlUmVkKHRoaXMpOwoKICAgICAgdmFyIHQgPSBhLm11bChiKTsKICAgICAgdmFyIGMgPSB0Lm1hc2tuKHRoaXMuc2hpZnQpLm11bCh0aGlzLm1pbnYpLmltYXNrbih0aGlzLnNoaWZ0KS5tdWwodGhpcy5tKTsKICAgICAgdmFyIHUgPSB0LmlzdWIoYykuaXVzaHJuKHRoaXMuc2hpZnQpOwogICAgICB2YXIgcmVzID0gdTsKICAgICAgaWYgKHUuY21wKHRoaXMubSkgPj0gMCkgewogICAgICAgIHJlcyA9IHUuaXN1Yih0aGlzLm0pOwogICAgICB9IGVsc2UgaWYgKHUuY21wbigwKSA8IDApIHsKICAgICAgICByZXMgPSB1LmlhZGQodGhpcy5tKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlcy5fZm9yY2VSZWQodGhpcyk7CiAgICB9OwoKICAgIE1vbnQucHJvdG90eXBlLmludm0gPSBmdW5jdGlvbiBpbnZtIChhKSB7CiAgICAgIC8vIChBUileLTEgKiBSXjIgPSAoQV4tMSAqIFJeLTEpICogUl4yID0gQV4tMSAqIFIKICAgICAgdmFyIHJlcyA9IHRoaXMuaW1vZChhLl9pbnZtcCh0aGlzLm0pLm11bCh0aGlzLnIyKSk7CiAgICAgIHJldHVybiByZXMuX2ZvcmNlUmVkKHRoaXMpOwogICAgfTsKICB9KShtb2R1bGUsIGNvbW1vbmpzR2xvYmFsKTsKICB9KGJuJDQpKTsKCiAgdmFyIG1pbmltYWxpc3RpY0Fzc2VydCA9IGFzc2VydCRnOwoKICBmdW5jdGlvbiBhc3NlcnQkZyh2YWwsIG1zZykgewogICAgaWYgKCF2YWwpCiAgICAgIHRocm93IG5ldyBFcnJvcihtc2cgfHwgJ0Fzc2VydGlvbiBmYWlsZWQnKTsKICB9CgogIGFzc2VydCRnLmVxdWFsID0gZnVuY3Rpb24gYXNzZXJ0RXF1YWwobCwgciwgbXNnKSB7CiAgICBpZiAobCAhPSByKQogICAgICB0aHJvdyBuZXcgRXJyb3IobXNnIHx8ICgnQXNzZXJ0aW9uIGZhaWxlZDogJyArIGwgKyAnICE9ICcgKyByKSk7CiAgfTsKCiAgdmFyIHV0aWxzJGwgPSB7fTsKCiAgKGZ1bmN0aW9uIChleHBvcnRzKSB7CgogIHZhciB1dGlscyA9IGV4cG9ydHM7CgogIGZ1bmN0aW9uIHRvQXJyYXkobXNnLCBlbmMpIHsKICAgIGlmIChBcnJheS5pc0FycmF5KG1zZykpCiAgICAgIHJldHVybiBtc2cuc2xpY2UoKTsKICAgIGlmICghbXNnKQogICAgICByZXR1cm4gW107CiAgICB2YXIgcmVzID0gW107CiAgICBpZiAodHlwZW9mIG1zZyAhPT0gJ3N0cmluZycpIHsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtc2cubGVuZ3RoOyBpKyspCiAgICAgICAgcmVzW2ldID0gbXNnW2ldIHwgMDsKICAgICAgcmV0dXJuIHJlczsKICAgIH0KICAgIGlmIChlbmMgPT09ICdoZXgnKSB7CiAgICAgIG1zZyA9IG1zZy5yZXBsYWNlKC9bXmEtejAtOV0rL2lnLCAnJyk7CiAgICAgIGlmIChtc2cubGVuZ3RoICUgMiAhPT0gMCkKICAgICAgICBtc2cgPSAnMCcgKyBtc2c7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbXNnLmxlbmd0aDsgaSArPSAyKQogICAgICAgIHJlcy5wdXNoKHBhcnNlSW50KG1zZ1tpXSArIG1zZ1tpICsgMV0sIDE2KSk7CiAgICB9IGVsc2UgewogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1zZy5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBjID0gbXNnLmNoYXJDb2RlQXQoaSk7CiAgICAgICAgdmFyIGhpID0gYyA+PiA4OwogICAgICAgIHZhciBsbyA9IGMgJiAweGZmOwogICAgICAgIGlmIChoaSkKICAgICAgICAgIHJlcy5wdXNoKGhpLCBsbyk7CiAgICAgICAgZWxzZQogICAgICAgICAgcmVzLnB1c2gobG8pOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gcmVzOwogIH0KICB1dGlscy50b0FycmF5ID0gdG9BcnJheTsKCiAgZnVuY3Rpb24gemVybzIod29yZCkgewogICAgaWYgKHdvcmQubGVuZ3RoID09PSAxKQogICAgICByZXR1cm4gJzAnICsgd29yZDsKICAgIGVsc2UKICAgICAgcmV0dXJuIHdvcmQ7CiAgfQogIHV0aWxzLnplcm8yID0gemVybzI7CgogIGZ1bmN0aW9uIHRvSGV4KG1zZykgewogICAgdmFyIHJlcyA9ICcnOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtc2cubGVuZ3RoOyBpKyspCiAgICAgIHJlcyArPSB6ZXJvMihtc2dbaV0udG9TdHJpbmcoMTYpKTsKICAgIHJldHVybiByZXM7CiAgfQogIHV0aWxzLnRvSGV4ID0gdG9IZXg7CgogIHV0aWxzLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShhcnIsIGVuYykgewogICAgaWYgKGVuYyA9PT0gJ2hleCcpCiAgICAgIHJldHVybiB0b0hleChhcnIpOwogICAgZWxzZQogICAgICByZXR1cm4gYXJyOwogIH07CiAgfSh1dGlscyRsKSk7CgogIChmdW5jdGlvbiAoZXhwb3J0cykgewoKICB2YXIgdXRpbHMgPSBleHBvcnRzOwogIHZhciBCTiA9IGJuJDQuZXhwb3J0czsKICB2YXIgbWluQXNzZXJ0ID0gbWluaW1hbGlzdGljQXNzZXJ0OwogIHZhciBtaW5VdGlscyA9IHV0aWxzJGw7CgogIHV0aWxzLmFzc2VydCA9IG1pbkFzc2VydDsKICB1dGlscy50b0FycmF5ID0gbWluVXRpbHMudG9BcnJheTsKICB1dGlscy56ZXJvMiA9IG1pblV0aWxzLnplcm8yOwogIHV0aWxzLnRvSGV4ID0gbWluVXRpbHMudG9IZXg7CiAgdXRpbHMuZW5jb2RlID0gbWluVXRpbHMuZW5jb2RlOwoKICAvLyBSZXByZXNlbnQgbnVtIGluIGEgdy1OQUYgZm9ybQogIGZ1bmN0aW9uIGdldE5BRihudW0sIHcsIGJpdHMpIHsKICAgIHZhciBuYWYgPSBuZXcgQXJyYXkoTWF0aC5tYXgobnVtLmJpdExlbmd0aCgpLCBiaXRzKSArIDEpOwogICAgbmFmLmZpbGwoMCk7CgogICAgdmFyIHdzID0gMSA8PCAodyArIDEpOwogICAgdmFyIGsgPSBudW0uY2xvbmUoKTsKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5hZi5sZW5ndGg7IGkrKykgewogICAgICB2YXIgejsKICAgICAgdmFyIG1vZCA9IGsuYW5kbG4od3MgLSAxKTsKICAgICAgaWYgKGsuaXNPZGQoKSkgewogICAgICAgIGlmIChtb2QgPiAod3MgPj4gMSkgLSAxKQogICAgICAgICAgeiA9ICh3cyA+PiAxKSAtIG1vZDsKICAgICAgICBlbHNlCiAgICAgICAgICB6ID0gbW9kOwogICAgICAgIGsuaXN1Ym4oeik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgeiA9IDA7CiAgICAgIH0KCiAgICAgIG5hZltpXSA9IHo7CiAgICAgIGsuaXVzaHJuKDEpOwogICAgfQoKICAgIHJldHVybiBuYWY7CiAgfQogIHV0aWxzLmdldE5BRiA9IGdldE5BRjsKCiAgLy8gUmVwcmVzZW50IGsxLCBrMiBpbiBhIEpvaW50IFNwYXJzZSBGb3JtCiAgZnVuY3Rpb24gZ2V0SlNGKGsxLCBrMikgewogICAgdmFyIGpzZiA9IFsKICAgICAgW10sCiAgICAgIFtdLAogICAgXTsKCiAgICBrMSA9IGsxLmNsb25lKCk7CiAgICBrMiA9IGsyLmNsb25lKCk7CiAgICB2YXIgZDEgPSAwOwogICAgdmFyIGQyID0gMDsKICAgIHZhciBtODsKICAgIHdoaWxlIChrMS5jbXBuKC1kMSkgPiAwIHx8IGsyLmNtcG4oLWQyKSA+IDApIHsKICAgICAgLy8gRmlyc3QgcGhhc2UKICAgICAgdmFyIG0xNCA9IChrMS5hbmRsbigzKSArIGQxKSAmIDM7CiAgICAgIHZhciBtMjQgPSAoazIuYW5kbG4oMykgKyBkMikgJiAzOwogICAgICBpZiAobTE0ID09PSAzKQogICAgICAgIG0xNCA9IC0xOwogICAgICBpZiAobTI0ID09PSAzKQogICAgICAgIG0yNCA9IC0xOwogICAgICB2YXIgdTE7CiAgICAgIGlmICgobTE0ICYgMSkgPT09IDApIHsKICAgICAgICB1MSA9IDA7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbTggPSAoazEuYW5kbG4oNykgKyBkMSkgJiA3OwogICAgICAgIGlmICgobTggPT09IDMgfHwgbTggPT09IDUpICYmIG0yNCA9PT0gMikKICAgICAgICAgIHUxID0gLW0xNDsKICAgICAgICBlbHNlCiAgICAgICAgICB1MSA9IG0xNDsKICAgICAgfQogICAgICBqc2ZbMF0ucHVzaCh1MSk7CgogICAgICB2YXIgdTI7CiAgICAgIGlmICgobTI0ICYgMSkgPT09IDApIHsKICAgICAgICB1MiA9IDA7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbTggPSAoazIuYW5kbG4oNykgKyBkMikgJiA3OwogICAgICAgIGlmICgobTggPT09IDMgfHwgbTggPT09IDUpICYmIG0xNCA9PT0gMikKICAgICAgICAgIHUyID0gLW0yNDsKICAgICAgICBlbHNlCiAgICAgICAgICB1MiA9IG0yNDsKICAgICAgfQogICAgICBqc2ZbMV0ucHVzaCh1Mik7CgogICAgICAvLyBTZWNvbmQgcGhhc2UKICAgICAgaWYgKDIgKiBkMSA9PT0gdTEgKyAxKQogICAgICAgIGQxID0gMSAtIGQxOwogICAgICBpZiAoMiAqIGQyID09PSB1MiArIDEpCiAgICAgICAgZDIgPSAxIC0gZDI7CiAgICAgIGsxLml1c2hybigxKTsKICAgICAgazIuaXVzaHJuKDEpOwogICAgfQoKICAgIHJldHVybiBqc2Y7CiAgfQogIHV0aWxzLmdldEpTRiA9IGdldEpTRjsKCiAgZnVuY3Rpb24gY2FjaGVkUHJvcGVydHkob2JqLCBuYW1lLCBjb21wdXRlcikgewogICAgdmFyIGtleSA9ICdfJyArIG5hbWU7CiAgICBvYmoucHJvdG90eXBlW25hbWVdID0gZnVuY3Rpb24gY2FjaGVkUHJvcGVydHkoKSB7CiAgICAgIHJldHVybiB0aGlzW2tleV0gIT09IHVuZGVmaW5lZCA/IHRoaXNba2V5XSA6CiAgICAgICAgdGhpc1trZXldID0gY29tcHV0ZXIuY2FsbCh0aGlzKTsKICAgIH07CiAgfQogIHV0aWxzLmNhY2hlZFByb3BlcnR5ID0gY2FjaGVkUHJvcGVydHk7CgogIGZ1bmN0aW9uIHBhcnNlQnl0ZXMoYnl0ZXMpIHsKICAgIHJldHVybiB0eXBlb2YgYnl0ZXMgPT09ICdzdHJpbmcnID8gdXRpbHMudG9BcnJheShieXRlcywgJ2hleCcpIDoKICAgICAgYnl0ZXM7CiAgfQogIHV0aWxzLnBhcnNlQnl0ZXMgPSBwYXJzZUJ5dGVzOwoKICBmdW5jdGlvbiBpbnRGcm9tTEUoYnl0ZXMpIHsKICAgIHJldHVybiBuZXcgQk4oYnl0ZXMsICdoZXgnLCAnbGUnKTsKICB9CiAgdXRpbHMuaW50RnJvbUxFID0gaW50RnJvbUxFOwogIH0odXRpbHMkbSkpOwoKICB2YXIgYnJvcmFuZCA9IHtleHBvcnRzOiB7fX07CgogIHZhciByJDE7CgogIGJyb3JhbmQuZXhwb3J0cyA9IGZ1bmN0aW9uIHJhbmQobGVuKSB7CiAgICBpZiAoIXIkMSkKICAgICAgciQxID0gbmV3IFJhbmQobnVsbCk7CgogICAgcmV0dXJuIHIkMS5nZW5lcmF0ZShsZW4pOwogIH07CgogIGZ1bmN0aW9uIFJhbmQocmFuZCkgewogICAgdGhpcy5yYW5kID0gcmFuZDsKICB9CiAgYnJvcmFuZC5leHBvcnRzLlJhbmQgPSBSYW5kOwoKICBSYW5kLnByb3RvdHlwZS5nZW5lcmF0ZSA9IGZ1bmN0aW9uIGdlbmVyYXRlKGxlbikgewogICAgcmV0dXJuIHRoaXMuX3JhbmQobGVuKTsKICB9OwoKICAvLyBFbXVsYXRlIGNyeXB0byBBUEkgdXNpbmcgcmFuZHkKICBSYW5kLnByb3RvdHlwZS5fcmFuZCA9IGZ1bmN0aW9uIF9yYW5kKG4pIHsKICAgIGlmICh0aGlzLnJhbmQuZ2V0Qnl0ZXMpCiAgICAgIHJldHVybiB0aGlzLnJhbmQuZ2V0Qnl0ZXMobik7CgogICAgdmFyIHJlcyA9IG5ldyBVaW50OEFycmF5KG4pOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXMubGVuZ3RoOyBpKyspCiAgICAgIHJlc1tpXSA9IHRoaXMucmFuZC5nZXRCeXRlKCk7CiAgICByZXR1cm4gcmVzOwogIH07CgogIGlmICh0eXBlb2Ygc2VsZiA9PT0gJ29iamVjdCcpIHsKICAgIGlmIChzZWxmLmNyeXB0byAmJiBzZWxmLmNyeXB0by5nZXRSYW5kb21WYWx1ZXMpIHsKICAgICAgLy8gTW9kZXJuIGJyb3dzZXJzCiAgICAgIFJhbmQucHJvdG90eXBlLl9yYW5kID0gZnVuY3Rpb24gX3JhbmQobikgewogICAgICAgIHZhciBhcnIgPSBuZXcgVWludDhBcnJheShuKTsKICAgICAgICBzZWxmLmNyeXB0by5nZXRSYW5kb21WYWx1ZXMoYXJyKTsKICAgICAgICByZXR1cm4gYXJyOwogICAgICB9OwogICAgfSBlbHNlIGlmIChzZWxmLm1zQ3J5cHRvICYmIHNlbGYubXNDcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKSB7CiAgICAgIC8vIElFCiAgICAgIFJhbmQucHJvdG90eXBlLl9yYW5kID0gZnVuY3Rpb24gX3JhbmQobikgewogICAgICAgIHZhciBhcnIgPSBuZXcgVWludDhBcnJheShuKTsKICAgICAgICBzZWxmLm1zQ3J5cHRvLmdldFJhbmRvbVZhbHVlcyhhcnIpOwogICAgICAgIHJldHVybiBhcnI7CiAgICAgIH07CgogICAgLy8gU2FmYXJpJ3MgV2ViV29ya2VycyBkbyBub3QgaGF2ZSBgY3J5cHRvYAogICAgfSBlbHNlIGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgewogICAgICAvLyBPbGQganVuawogICAgICBSYW5kLnByb3RvdHlwZS5fcmFuZCA9IGZ1bmN0aW9uKCkgewogICAgICAgIHRocm93IG5ldyBFcnJvcignTm90IGltcGxlbWVudGVkIHlldCcpOwogICAgICB9OwogICAgfQogIH0gZWxzZSB7CiAgICAvLyBOb2RlLmpzIG9yIFdlYiB3b3JrZXIgd2l0aCBubyBjcnlwdG8gc3VwcG9ydAogICAgdHJ5IHsKICAgICAgdmFyIGNyeXB0byQzID0gcmVxdWlyZSgnY3J5cHRvJyk7CiAgICAgIGlmICh0eXBlb2YgY3J5cHRvJDMucmFuZG9tQnl0ZXMgIT09ICdmdW5jdGlvbicpCiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdOb3Qgc3VwcG9ydGVkJyk7CgogICAgICBSYW5kLnByb3RvdHlwZS5fcmFuZCA9IGZ1bmN0aW9uIF9yYW5kKG4pIHsKICAgICAgICByZXR1cm4gY3J5cHRvJDMucmFuZG9tQnl0ZXMobik7CiAgICAgIH07CiAgICB9IGNhdGNoIChlKSB7CiAgICB9CiAgfQoKICB2YXIgY3VydmUgPSB7fTsKCiAgdmFyIEJOJGMgPSBibiQ0LmV4cG9ydHM7CiAgdmFyIHV0aWxzJGsgPSB1dGlscyRtOwogIHZhciBnZXROQUYgPSB1dGlscyRrLmdldE5BRjsKICB2YXIgZ2V0SlNGID0gdXRpbHMkay5nZXRKU0Y7CiAgdmFyIGFzc2VydCRmID0gdXRpbHMkay5hc3NlcnQ7CgogIGZ1bmN0aW9uIEJhc2VDdXJ2ZSh0eXBlLCBjb25mKSB7CiAgICB0aGlzLnR5cGUgPSB0eXBlOwogICAgdGhpcy5wID0gbmV3IEJOJGMoY29uZi5wLCAxNik7CgogICAgLy8gVXNlIE1vbnRnb21lcnksIHdoZW4gdGhlcmUgaXMgbm8gZmFzdCByZWR1Y3Rpb24gZm9yIHRoZSBwcmltZQogICAgdGhpcy5yZWQgPSBjb25mLnByaW1lID8gQk4kYy5yZWQoY29uZi5wcmltZSkgOiBCTiRjLm1vbnQodGhpcy5wKTsKCiAgICAvLyBVc2VmdWwgZm9yIG1hbnkgY3VydmVzCiAgICB0aGlzLnplcm8gPSBuZXcgQk4kYygwKS50b1JlZCh0aGlzLnJlZCk7CiAgICB0aGlzLm9uZSA9IG5ldyBCTiRjKDEpLnRvUmVkKHRoaXMucmVkKTsKICAgIHRoaXMudHdvID0gbmV3IEJOJGMoMikudG9SZWQodGhpcy5yZWQpOwoKICAgIC8vIEN1cnZlIGNvbmZpZ3VyYXRpb24sIG9wdGlvbmFsCiAgICB0aGlzLm4gPSBjb25mLm4gJiYgbmV3IEJOJGMoY29uZi5uLCAxNik7CiAgICB0aGlzLmcgPSBjb25mLmcgJiYgdGhpcy5wb2ludEZyb21KU09OKGNvbmYuZywgY29uZi5nUmVkKTsKCiAgICAvLyBUZW1wb3JhcnkgYXJyYXlzCiAgICB0aGlzLl93bmFmVDEgPSBuZXcgQXJyYXkoNCk7CiAgICB0aGlzLl93bmFmVDIgPSBuZXcgQXJyYXkoNCk7CiAgICB0aGlzLl93bmFmVDMgPSBuZXcgQXJyYXkoNCk7CiAgICB0aGlzLl93bmFmVDQgPSBuZXcgQXJyYXkoNCk7CgogICAgdGhpcy5fYml0TGVuZ3RoID0gdGhpcy5uID8gdGhpcy5uLmJpdExlbmd0aCgpIDogMDsKCiAgICAvLyBHZW5lcmFsaXplZCBHcmVnIE1heHdlbGwncyB0cmljawogICAgdmFyIGFkanVzdENvdW50ID0gdGhpcy5uICYmIHRoaXMucC5kaXYodGhpcy5uKTsKICAgIGlmICghYWRqdXN0Q291bnQgfHwgYWRqdXN0Q291bnQuY21wbigxMDApID4gMCkgewogICAgICB0aGlzLnJlZE4gPSBudWxsOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy5fbWF4d2VsbFRyaWNrID0gdHJ1ZTsKICAgICAgdGhpcy5yZWROID0gdGhpcy5uLnRvUmVkKHRoaXMucmVkKTsKICAgIH0KICB9CiAgdmFyIGJhc2UkMSA9IEJhc2VDdXJ2ZTsKCiAgQmFzZUN1cnZlLnByb3RvdHlwZS5wb2ludCA9IGZ1bmN0aW9uIHBvaW50KCkgewogICAgdGhyb3cgbmV3IEVycm9yKCdOb3QgaW1wbGVtZW50ZWQnKTsKICB9OwoKICBCYXNlQ3VydmUucHJvdG90eXBlLnZhbGlkYXRlID0gZnVuY3Rpb24gdmFsaWRhdGUoKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ05vdCBpbXBsZW1lbnRlZCcpOwogIH07CgogIEJhc2VDdXJ2ZS5wcm90b3R5cGUuX2ZpeGVkTmFmTXVsID0gZnVuY3Rpb24gX2ZpeGVkTmFmTXVsKHAsIGspIHsKICAgIGFzc2VydCRmKHAucHJlY29tcHV0ZWQpOwogICAgdmFyIGRvdWJsZXMgPSBwLl9nZXREb3VibGVzKCk7CgogICAgdmFyIG5hZiA9IGdldE5BRihrLCAxLCB0aGlzLl9iaXRMZW5ndGgpOwogICAgdmFyIEkgPSAoMSA8PCAoZG91Ymxlcy5zdGVwICsgMSkpIC0gKGRvdWJsZXMuc3RlcCAlIDIgPT09IDAgPyAyIDogMSk7CiAgICBJIC89IDM7CgogICAgLy8gVHJhbnNsYXRlIGludG8gbW9yZSB3aW5kb3dlZCBmb3JtCiAgICB2YXIgcmVwciA9IFtdOwogICAgdmFyIGo7CiAgICB2YXIgbmFmVzsKICAgIGZvciAoaiA9IDA7IGogPCBuYWYubGVuZ3RoOyBqICs9IGRvdWJsZXMuc3RlcCkgewogICAgICBuYWZXID0gMDsKICAgICAgZm9yICh2YXIgbCA9IGogKyBkb3VibGVzLnN0ZXAgLSAxOyBsID49IGo7IGwtLSkKICAgICAgICBuYWZXID0gKG5hZlcgPDwgMSkgKyBuYWZbbF07CiAgICAgIHJlcHIucHVzaChuYWZXKTsKICAgIH0KCiAgICB2YXIgYSA9IHRoaXMuanBvaW50KG51bGwsIG51bGwsIG51bGwpOwogICAgdmFyIGIgPSB0aGlzLmpwb2ludChudWxsLCBudWxsLCBudWxsKTsKICAgIGZvciAodmFyIGkgPSBJOyBpID4gMDsgaS0tKSB7CiAgICAgIGZvciAoaiA9IDA7IGogPCByZXByLmxlbmd0aDsgaisrKSB7CiAgICAgICAgbmFmVyA9IHJlcHJbal07CiAgICAgICAgaWYgKG5hZlcgPT09IGkpCiAgICAgICAgICBiID0gYi5taXhlZEFkZChkb3VibGVzLnBvaW50c1tqXSk7CiAgICAgICAgZWxzZSBpZiAobmFmVyA9PT0gLWkpCiAgICAgICAgICBiID0gYi5taXhlZEFkZChkb3VibGVzLnBvaW50c1tqXS5uZWcoKSk7CiAgICAgIH0KICAgICAgYSA9IGEuYWRkKGIpOwogICAgfQogICAgcmV0dXJuIGEudG9QKCk7CiAgfTsKCiAgQmFzZUN1cnZlLnByb3RvdHlwZS5fd25hZk11bCA9IGZ1bmN0aW9uIF93bmFmTXVsKHAsIGspIHsKICAgIHZhciB3ID0gNDsKCiAgICAvLyBQcmVjb21wdXRlIHdpbmRvdwogICAgdmFyIG5hZlBvaW50cyA9IHAuX2dldE5BRlBvaW50cyh3KTsKICAgIHcgPSBuYWZQb2ludHMud25kOwogICAgdmFyIHduZCA9IG5hZlBvaW50cy5wb2ludHM7CgogICAgLy8gR2V0IE5BRiBmb3JtCiAgICB2YXIgbmFmID0gZ2V0TkFGKGssIHcsIHRoaXMuX2JpdExlbmd0aCk7CgogICAgLy8gQWRkIGB0aGlzYCooTisxKSBmb3IgZXZlcnkgdy1OQUYgaW5kZXgKICAgIHZhciBhY2MgPSB0aGlzLmpwb2ludChudWxsLCBudWxsLCBudWxsKTsKICAgIGZvciAodmFyIGkgPSBuYWYubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgICAgLy8gQ291bnQgemVyb2VzCiAgICAgIGZvciAodmFyIGwgPSAwOyBpID49IDAgJiYgbmFmW2ldID09PSAwOyBpLS0pCiAgICAgICAgbCsrOwogICAgICBpZiAoaSA+PSAwKQogICAgICAgIGwrKzsKICAgICAgYWNjID0gYWNjLmRibHAobCk7CgogICAgICBpZiAoaSA8IDApCiAgICAgICAgYnJlYWs7CiAgICAgIHZhciB6ID0gbmFmW2ldOwogICAgICBhc3NlcnQkZih6ICE9PSAwKTsKICAgICAgaWYgKHAudHlwZSA9PT0gJ2FmZmluZScpIHsKICAgICAgICAvLyBKICstIFAKICAgICAgICBpZiAoeiA+IDApCiAgICAgICAgICBhY2MgPSBhY2MubWl4ZWRBZGQod25kWyh6IC0gMSkgPj4gMV0pOwogICAgICAgIGVsc2UKICAgICAgICAgIGFjYyA9IGFjYy5taXhlZEFkZCh3bmRbKC16IC0gMSkgPj4gMV0ubmVnKCkpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIEogKy0gSgogICAgICAgIGlmICh6ID4gMCkKICAgICAgICAgIGFjYyA9IGFjYy5hZGQod25kWyh6IC0gMSkgPj4gMV0pOwogICAgICAgIGVsc2UKICAgICAgICAgIGFjYyA9IGFjYy5hZGQod25kWygteiAtIDEpID4+IDFdLm5lZygpKTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHAudHlwZSA9PT0gJ2FmZmluZScgPyBhY2MudG9QKCkgOiBhY2M7CiAgfTsKCiAgQmFzZUN1cnZlLnByb3RvdHlwZS5fd25hZk11bEFkZCA9IGZ1bmN0aW9uIF93bmFmTXVsQWRkKGRlZlcsCiAgICBwb2ludHMsCiAgICBjb2VmZnMsCiAgICBsZW4sCiAgICBqYWNvYmlhblJlc3VsdCkgewogICAgdmFyIHduZFdpZHRoID0gdGhpcy5fd25hZlQxOwogICAgdmFyIHduZCA9IHRoaXMuX3duYWZUMjsKICAgIHZhciBuYWYgPSB0aGlzLl93bmFmVDM7CgogICAgLy8gRmlsbCBhbGwgYXJyYXlzCiAgICB2YXIgbWF4ID0gMDsKICAgIHZhciBpOwogICAgdmFyIGo7CiAgICB2YXIgcDsKICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykgewogICAgICBwID0gcG9pbnRzW2ldOwogICAgICB2YXIgbmFmUG9pbnRzID0gcC5fZ2V0TkFGUG9pbnRzKGRlZlcpOwogICAgICB3bmRXaWR0aFtpXSA9IG5hZlBvaW50cy53bmQ7CiAgICAgIHduZFtpXSA9IG5hZlBvaW50cy5wb2ludHM7CiAgICB9CgogICAgLy8gQ29tYiBzbWFsbCB3aW5kb3cgTkFGcwogICAgZm9yIChpID0gbGVuIC0gMTsgaSA+PSAxOyBpIC09IDIpIHsKICAgICAgdmFyIGEgPSBpIC0gMTsKICAgICAgdmFyIGIgPSBpOwogICAgICBpZiAod25kV2lkdGhbYV0gIT09IDEgfHwgd25kV2lkdGhbYl0gIT09IDEpIHsKICAgICAgICBuYWZbYV0gPSBnZXROQUYoY29lZmZzW2FdLCB3bmRXaWR0aFthXSwgdGhpcy5fYml0TGVuZ3RoKTsKICAgICAgICBuYWZbYl0gPSBnZXROQUYoY29lZmZzW2JdLCB3bmRXaWR0aFtiXSwgdGhpcy5fYml0TGVuZ3RoKTsKICAgICAgICBtYXggPSBNYXRoLm1heChuYWZbYV0ubGVuZ3RoLCBtYXgpOwogICAgICAgIG1heCA9IE1hdGgubWF4KG5hZltiXS5sZW5ndGgsIG1heCk7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KCiAgICAgIHZhciBjb21iID0gWwogICAgICAgIHBvaW50c1thXSwgLyogMSAqLwogICAgICAgIG51bGwsIC8qIDMgKi8KICAgICAgICBudWxsLCAvKiA1ICovCiAgICAgICAgcG9pbnRzW2JdLCAvKiA3ICovCiAgICAgIF07CgogICAgICAvLyBUcnkgdG8gYXZvaWQgUHJvamVjdGl2ZSBwb2ludHMsIGlmIHBvc3NpYmxlCiAgICAgIGlmIChwb2ludHNbYV0ueS5jbXAocG9pbnRzW2JdLnkpID09PSAwKSB7CiAgICAgICAgY29tYlsxXSA9IHBvaW50c1thXS5hZGQocG9pbnRzW2JdKTsKICAgICAgICBjb21iWzJdID0gcG9pbnRzW2FdLnRvSigpLm1peGVkQWRkKHBvaW50c1tiXS5uZWcoKSk7CiAgICAgIH0gZWxzZSBpZiAocG9pbnRzW2FdLnkuY21wKHBvaW50c1tiXS55LnJlZE5lZygpKSA9PT0gMCkgewogICAgICAgIGNvbWJbMV0gPSBwb2ludHNbYV0udG9KKCkubWl4ZWRBZGQocG9pbnRzW2JdKTsKICAgICAgICBjb21iWzJdID0gcG9pbnRzW2FdLmFkZChwb2ludHNbYl0ubmVnKCkpOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbWJbMV0gPSBwb2ludHNbYV0udG9KKCkubWl4ZWRBZGQocG9pbnRzW2JdKTsKICAgICAgICBjb21iWzJdID0gcG9pbnRzW2FdLnRvSigpLm1peGVkQWRkKHBvaW50c1tiXS5uZWcoKSk7CiAgICAgIH0KCiAgICAgIHZhciBpbmRleCA9IFsKICAgICAgICAtMywgLyogLTEgLTEgKi8KICAgICAgICAtMSwgLyogLTEgMCAqLwogICAgICAgIC01LCAvKiAtMSAxICovCiAgICAgICAgLTcsIC8qIDAgLTEgKi8KICAgICAgICAwLCAvKiAwIDAgKi8KICAgICAgICA3LCAvKiAwIDEgKi8KICAgICAgICA1LCAvKiAxIC0xICovCiAgICAgICAgMSwgLyogMSAwICovCiAgICAgICAgMywgIC8qIDEgMSAqLwogICAgICBdOwoKICAgICAgdmFyIGpzZiA9IGdldEpTRihjb2VmZnNbYV0sIGNvZWZmc1tiXSk7CiAgICAgIG1heCA9IE1hdGgubWF4KGpzZlswXS5sZW5ndGgsIG1heCk7CiAgICAgIG5hZlthXSA9IG5ldyBBcnJheShtYXgpOwogICAgICBuYWZbYl0gPSBuZXcgQXJyYXkobWF4KTsKICAgICAgZm9yIChqID0gMDsgaiA8IG1heDsgaisrKSB7CiAgICAgICAgdmFyIGphID0ganNmWzBdW2pdIHwgMDsKICAgICAgICB2YXIgamIgPSBqc2ZbMV1bal0gfCAwOwoKICAgICAgICBuYWZbYV1bal0gPSBpbmRleFsoamEgKyAxKSAqIDMgKyAoamIgKyAxKV07CiAgICAgICAgbmFmW2JdW2pdID0gMDsKICAgICAgICB3bmRbYV0gPSBjb21iOwogICAgICB9CiAgICB9CgogICAgdmFyIGFjYyA9IHRoaXMuanBvaW50KG51bGwsIG51bGwsIG51bGwpOwogICAgdmFyIHRtcCA9IHRoaXMuX3duYWZUNDsKICAgIGZvciAoaSA9IG1heDsgaSA+PSAwOyBpLS0pIHsKICAgICAgdmFyIGsgPSAwOwoKICAgICAgd2hpbGUgKGkgPj0gMCkgewogICAgICAgIHZhciB6ZXJvID0gdHJ1ZTsKICAgICAgICBmb3IgKGogPSAwOyBqIDwgbGVuOyBqKyspIHsKICAgICAgICAgIHRtcFtqXSA9IG5hZltqXVtpXSB8IDA7CiAgICAgICAgICBpZiAodG1wW2pdICE9PSAwKQogICAgICAgICAgICB6ZXJvID0gZmFsc2U7CiAgICAgICAgfQogICAgICAgIGlmICghemVybykKICAgICAgICAgIGJyZWFrOwogICAgICAgIGsrKzsKICAgICAgICBpLS07CiAgICAgIH0KICAgICAgaWYgKGkgPj0gMCkKICAgICAgICBrKys7CiAgICAgIGFjYyA9IGFjYy5kYmxwKGspOwogICAgICBpZiAoaSA8IDApCiAgICAgICAgYnJlYWs7CgogICAgICBmb3IgKGogPSAwOyBqIDwgbGVuOyBqKyspIHsKICAgICAgICB2YXIgeiA9IHRtcFtqXTsKICAgICAgICBpZiAoeiA9PT0gMCkKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIGVsc2UgaWYgKHogPiAwKQogICAgICAgICAgcCA9IHduZFtqXVsoeiAtIDEpID4+IDFdOwogICAgICAgIGVsc2UgaWYgKHogPCAwKQogICAgICAgICAgcCA9IHduZFtqXVsoLXogLSAxKSA+PiAxXS5uZWcoKTsKCiAgICAgICAgaWYgKHAudHlwZSA9PT0gJ2FmZmluZScpCiAgICAgICAgICBhY2MgPSBhY2MubWl4ZWRBZGQocCk7CiAgICAgICAgZWxzZQogICAgICAgICAgYWNjID0gYWNjLmFkZChwKTsKICAgICAgfQogICAgfQogICAgLy8gWmVyb2lmeSByZWZlcmVuY2VzCiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspCiAgICAgIHduZFtpXSA9IG51bGw7CgogICAgaWYgKGphY29iaWFuUmVzdWx0KQogICAgICByZXR1cm4gYWNjOwogICAgZWxzZQogICAgICByZXR1cm4gYWNjLnRvUCgpOwogIH07CgogIGZ1bmN0aW9uIEJhc2VQb2ludChjdXJ2ZSwgdHlwZSkgewogICAgdGhpcy5jdXJ2ZSA9IGN1cnZlOwogICAgdGhpcy50eXBlID0gdHlwZTsKICAgIHRoaXMucHJlY29tcHV0ZWQgPSBudWxsOwogIH0KICBCYXNlQ3VydmUuQmFzZVBvaW50ID0gQmFzZVBvaW50OwoKICBCYXNlUG9pbnQucHJvdG90eXBlLmVxID0gZnVuY3Rpb24gZXEoLypvdGhlciovKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ05vdCBpbXBsZW1lbnRlZCcpOwogIH07CgogIEJhc2VQb2ludC5wcm90b3R5cGUudmFsaWRhdGUgPSBmdW5jdGlvbiB2YWxpZGF0ZSgpIHsKICAgIHJldHVybiB0aGlzLmN1cnZlLnZhbGlkYXRlKHRoaXMpOwogIH07CgogIEJhc2VDdXJ2ZS5wcm90b3R5cGUuZGVjb2RlUG9pbnQgPSBmdW5jdGlvbiBkZWNvZGVQb2ludChieXRlcywgZW5jKSB7CiAgICBieXRlcyA9IHV0aWxzJGsudG9BcnJheShieXRlcywgZW5jKTsKCiAgICB2YXIgbGVuID0gdGhpcy5wLmJ5dGVMZW5ndGgoKTsKCiAgICAvLyB1bmNvbXByZXNzZWQsIGh5YnJpZC1vZGQsIGh5YnJpZC1ldmVuCiAgICBpZiAoKGJ5dGVzWzBdID09PSAweDA0IHx8IGJ5dGVzWzBdID09PSAweDA2IHx8IGJ5dGVzWzBdID09PSAweDA3KSAmJgogICAgICAgIGJ5dGVzLmxlbmd0aCAtIDEgPT09IDIgKiBsZW4pIHsKICAgICAgaWYgKGJ5dGVzWzBdID09PSAweDA2KQogICAgICAgIGFzc2VydCRmKGJ5dGVzW2J5dGVzLmxlbmd0aCAtIDFdICUgMiA9PT0gMCk7CiAgICAgIGVsc2UgaWYgKGJ5dGVzWzBdID09PSAweDA3KQogICAgICAgIGFzc2VydCRmKGJ5dGVzW2J5dGVzLmxlbmd0aCAtIDFdICUgMiA9PT0gMSk7CgogICAgICB2YXIgcmVzID0gIHRoaXMucG9pbnQoYnl0ZXMuc2xpY2UoMSwgMSArIGxlbiksCiAgICAgICAgYnl0ZXMuc2xpY2UoMSArIGxlbiwgMSArIDIgKiBsZW4pKTsKCiAgICAgIHJldHVybiByZXM7CiAgICB9IGVsc2UgaWYgKChieXRlc1swXSA9PT0gMHgwMiB8fCBieXRlc1swXSA9PT0gMHgwMykgJiYKICAgICAgICAgICAgICAgIGJ5dGVzLmxlbmd0aCAtIDEgPT09IGxlbikgewogICAgICByZXR1cm4gdGhpcy5wb2ludEZyb21YKGJ5dGVzLnNsaWNlKDEsIDEgKyBsZW4pLCBieXRlc1swXSA9PT0gMHgwMyk7CiAgICB9CiAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gcG9pbnQgZm9ybWF0Jyk7CiAgfTsKCiAgQmFzZVBvaW50LnByb3RvdHlwZS5lbmNvZGVDb21wcmVzc2VkID0gZnVuY3Rpb24gZW5jb2RlQ29tcHJlc3NlZChlbmMpIHsKICAgIHJldHVybiB0aGlzLmVuY29kZShlbmMsIHRydWUpOwogIH07CgogIEJhc2VQb2ludC5wcm90b3R5cGUuX2VuY29kZSA9IGZ1bmN0aW9uIF9lbmNvZGUoY29tcGFjdCkgewogICAgdmFyIGxlbiA9IHRoaXMuY3VydmUucC5ieXRlTGVuZ3RoKCk7CiAgICB2YXIgeCA9IHRoaXMuZ2V0WCgpLnRvQXJyYXkoJ2JlJywgbGVuKTsKCiAgICBpZiAoY29tcGFjdCkKICAgICAgcmV0dXJuIFsgdGhpcy5nZXRZKCkuaXNFdmVuKCkgPyAweDAyIDogMHgwMyBdLmNvbmNhdCh4KTsKCiAgICByZXR1cm4gWyAweDA0IF0uY29uY2F0KHgsIHRoaXMuZ2V0WSgpLnRvQXJyYXkoJ2JlJywgbGVuKSk7CiAgfTsKCiAgQmFzZVBvaW50LnByb3RvdHlwZS5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUoZW5jLCBjb21wYWN0KSB7CiAgICByZXR1cm4gdXRpbHMkay5lbmNvZGUodGhpcy5fZW5jb2RlKGNvbXBhY3QpLCBlbmMpOwogIH07CgogIEJhc2VQb2ludC5wcm90b3R5cGUucHJlY29tcHV0ZSA9IGZ1bmN0aW9uIHByZWNvbXB1dGUocG93ZXIpIHsKICAgIGlmICh0aGlzLnByZWNvbXB1dGVkKQogICAgICByZXR1cm4gdGhpczsKCiAgICB2YXIgcHJlY29tcHV0ZWQgPSB7CiAgICAgIGRvdWJsZXM6IG51bGwsCiAgICAgIG5hZjogbnVsbCwKICAgICAgYmV0YTogbnVsbCwKICAgIH07CiAgICBwcmVjb21wdXRlZC5uYWYgPSB0aGlzLl9nZXROQUZQb2ludHMoOCk7CiAgICBwcmVjb21wdXRlZC5kb3VibGVzID0gdGhpcy5fZ2V0RG91Ymxlcyg0LCBwb3dlcik7CiAgICBwcmVjb21wdXRlZC5iZXRhID0gdGhpcy5fZ2V0QmV0YSgpOwogICAgdGhpcy5wcmVjb21wdXRlZCA9IHByZWNvbXB1dGVkOwoKICAgIHJldHVybiB0aGlzOwogIH07CgogIEJhc2VQb2ludC5wcm90b3R5cGUuX2hhc0RvdWJsZXMgPSBmdW5jdGlvbiBfaGFzRG91YmxlcyhrKSB7CiAgICBpZiAoIXRoaXMucHJlY29tcHV0ZWQpCiAgICAgIHJldHVybiBmYWxzZTsKCiAgICB2YXIgZG91YmxlcyA9IHRoaXMucHJlY29tcHV0ZWQuZG91YmxlczsKICAgIGlmICghZG91YmxlcykKICAgICAgcmV0dXJuIGZhbHNlOwoKICAgIHJldHVybiBkb3VibGVzLnBvaW50cy5sZW5ndGggPj0gTWF0aC5jZWlsKChrLmJpdExlbmd0aCgpICsgMSkgLyBkb3VibGVzLnN0ZXApOwogIH07CgogIEJhc2VQb2ludC5wcm90b3R5cGUuX2dldERvdWJsZXMgPSBmdW5jdGlvbiBfZ2V0RG91YmxlcyhzdGVwLCBwb3dlcikgewogICAgaWYgKHRoaXMucHJlY29tcHV0ZWQgJiYgdGhpcy5wcmVjb21wdXRlZC5kb3VibGVzKQogICAgICByZXR1cm4gdGhpcy5wcmVjb21wdXRlZC5kb3VibGVzOwoKICAgIHZhciBkb3VibGVzID0gWyB0aGlzIF07CiAgICB2YXIgYWNjID0gdGhpczsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG93ZXI7IGkgKz0gc3RlcCkgewogICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHN0ZXA7IGorKykKICAgICAgICBhY2MgPSBhY2MuZGJsKCk7CiAgICAgIGRvdWJsZXMucHVzaChhY2MpOwogICAgfQogICAgcmV0dXJuIHsKICAgICAgc3RlcDogc3RlcCwKICAgICAgcG9pbnRzOiBkb3VibGVzLAogICAgfTsKICB9OwoKICBCYXNlUG9pbnQucHJvdG90eXBlLl9nZXROQUZQb2ludHMgPSBmdW5jdGlvbiBfZ2V0TkFGUG9pbnRzKHduZCkgewogICAgaWYgKHRoaXMucHJlY29tcHV0ZWQgJiYgdGhpcy5wcmVjb21wdXRlZC5uYWYpCiAgICAgIHJldHVybiB0aGlzLnByZWNvbXB1dGVkLm5hZjsKCiAgICB2YXIgcmVzID0gWyB0aGlzIF07CiAgICB2YXIgbWF4ID0gKDEgPDwgd25kKSAtIDE7CiAgICB2YXIgZGJsID0gbWF4ID09PSAxID8gbnVsbCA6IHRoaXMuZGJsKCk7CiAgICBmb3IgKHZhciBpID0gMTsgaSA8IG1heDsgaSsrKQogICAgICByZXNbaV0gPSByZXNbaSAtIDFdLmFkZChkYmwpOwogICAgcmV0dXJuIHsKICAgICAgd25kOiB3bmQsCiAgICAgIHBvaW50czogcmVzLAogICAgfTsKICB9OwoKICBCYXNlUG9pbnQucHJvdG90eXBlLl9nZXRCZXRhID0gZnVuY3Rpb24gX2dldEJldGEoKSB7CiAgICByZXR1cm4gbnVsbDsKICB9OwoKICBCYXNlUG9pbnQucHJvdG90eXBlLmRibHAgPSBmdW5jdGlvbiBkYmxwKGspIHsKICAgIHZhciByID0gdGhpczsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgazsgaSsrKQogICAgICByID0gci5kYmwoKTsKICAgIHJldHVybiByOwogIH07CgogIHZhciBpbmhlcml0cyRkID0ge2V4cG9ydHM6IHt9fTsKCiAgdmFyIGluaGVyaXRzX2Jyb3dzZXIgPSB7ZXhwb3J0czoge319OwoKICBpZiAodHlwZW9mIE9iamVjdC5jcmVhdGUgPT09ICdmdW5jdGlvbicpIHsKICAgIC8vIGltcGxlbWVudGF0aW9uIGZyb20gc3RhbmRhcmQgbm9kZS5qcyAndXRpbCcgbW9kdWxlCiAgICBpbmhlcml0c19icm93c2VyLmV4cG9ydHMgPSBmdW5jdGlvbiBpbmhlcml0cyhjdG9yLCBzdXBlckN0b3IpIHsKICAgICAgaWYgKHN1cGVyQ3RvcikgewogICAgICAgIGN0b3Iuc3VwZXJfID0gc3VwZXJDdG9yOwogICAgICAgIGN0b3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckN0b3IucHJvdG90eXBlLCB7CiAgICAgICAgICBjb25zdHJ1Y3RvcjogewogICAgICAgICAgICB2YWx1ZTogY3RvciwKICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsCiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfTsKICB9IGVsc2UgewogICAgLy8gb2xkIHNjaG9vbCBzaGltIGZvciBvbGQgYnJvd3NlcnMKICAgIGluaGVyaXRzX2Jyb3dzZXIuZXhwb3J0cyA9IGZ1bmN0aW9uIGluaGVyaXRzKGN0b3IsIHN1cGVyQ3RvcikgewogICAgICBpZiAoc3VwZXJDdG9yKSB7CiAgICAgICAgY3Rvci5zdXBlcl8gPSBzdXBlckN0b3I7CiAgICAgICAgdmFyIFRlbXBDdG9yID0gZnVuY3Rpb24gKCkge307CiAgICAgICAgVGVtcEN0b3IucHJvdG90eXBlID0gc3VwZXJDdG9yLnByb3RvdHlwZTsKICAgICAgICBjdG9yLnByb3RvdHlwZSA9IG5ldyBUZW1wQ3RvcigpOwogICAgICAgIGN0b3IucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gY3RvcjsKICAgICAgfQogICAgfTsKICB9CgogIHRyeSB7CiAgICB2YXIgdXRpbCQxID0gcmVxdWlyZSgndXRpbCcpOwogICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KICAgIGlmICh0eXBlb2YgdXRpbCQxLmluaGVyaXRzICE9PSAnZnVuY3Rpb24nKSB0aHJvdyAnJzsKICAgIGluaGVyaXRzJGQuZXhwb3J0cyA9IHV0aWwkMS5pbmhlcml0czsKICB9IGNhdGNoIChlKSB7CiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLwogICAgaW5oZXJpdHMkZC5leHBvcnRzID0gaW5oZXJpdHNfYnJvd3Nlci5leHBvcnRzOwogIH0KCiAgdmFyIHV0aWxzJGogPSB1dGlscyRtOwogIHZhciBCTiRiID0gYm4kNC5leHBvcnRzOwogIHZhciBpbmhlcml0cyRjID0gaW5oZXJpdHMkZC5leHBvcnRzOwogIHZhciBCYXNlJDIgPSBiYXNlJDE7CgogIHZhciBhc3NlcnQkZSA9IHV0aWxzJGouYXNzZXJ0OwoKICBmdW5jdGlvbiBTaG9ydEN1cnZlKGNvbmYpIHsKICAgIEJhc2UkMi5jYWxsKHRoaXMsICdzaG9ydCcsIGNvbmYpOwoKICAgIHRoaXMuYSA9IG5ldyBCTiRiKGNvbmYuYSwgMTYpLnRvUmVkKHRoaXMucmVkKTsKICAgIHRoaXMuYiA9IG5ldyBCTiRiKGNvbmYuYiwgMTYpLnRvUmVkKHRoaXMucmVkKTsKICAgIHRoaXMudGludiA9IHRoaXMudHdvLnJlZEludm0oKTsKCiAgICB0aGlzLnplcm9BID0gdGhpcy5hLmZyb21SZWQoKS5jbXBuKDApID09PSAwOwogICAgdGhpcy50aHJlZUEgPSB0aGlzLmEuZnJvbVJlZCgpLnN1Yih0aGlzLnApLmNtcG4oLTMpID09PSAwOwoKICAgIC8vIElmIHRoZSBjdXJ2ZSBpcyBlbmRvbW9ycGhpYywgcHJlY2FsY3VsYXRlIGJldGEgYW5kIGxhbWJkYQogICAgdGhpcy5lbmRvID0gdGhpcy5fZ2V0RW5kb21vcnBoaXNtKGNvbmYpOwogICAgdGhpcy5fZW5kb1duYWZUMSA9IG5ldyBBcnJheSg0KTsKICAgIHRoaXMuX2VuZG9XbmFmVDIgPSBuZXcgQXJyYXkoNCk7CiAgfQogIGluaGVyaXRzJGMoU2hvcnRDdXJ2ZSwgQmFzZSQyKTsKICB2YXIgc2hvcnQgPSBTaG9ydEN1cnZlOwoKICBTaG9ydEN1cnZlLnByb3RvdHlwZS5fZ2V0RW5kb21vcnBoaXNtID0gZnVuY3Rpb24gX2dldEVuZG9tb3JwaGlzbShjb25mKSB7CiAgICAvLyBObyBlZmZpY2llbnQgZW5kb21vcnBoaXNtCiAgICBpZiAoIXRoaXMuemVyb0EgfHwgIXRoaXMuZyB8fCAhdGhpcy5uIHx8IHRoaXMucC5tb2RuKDMpICE9PSAxKQogICAgICByZXR1cm47CgogICAgLy8gQ29tcHV0ZSBiZXRhIGFuZCBsYW1iZGEsIHRoYXQgbGFtYmRhICogUCA9IChiZXRhICogUHg7IFB5KQogICAgdmFyIGJldGE7CiAgICB2YXIgbGFtYmRhOwogICAgaWYgKGNvbmYuYmV0YSkgewogICAgICBiZXRhID0gbmV3IEJOJGIoY29uZi5iZXRhLCAxNikudG9SZWQodGhpcy5yZWQpOwogICAgfSBlbHNlIHsKICAgICAgdmFyIGJldGFzID0gdGhpcy5fZ2V0RW5kb1Jvb3RzKHRoaXMucCk7CiAgICAgIC8vIENob29zZSB0aGUgc21hbGxlc3QgYmV0YQogICAgICBiZXRhID0gYmV0YXNbMF0uY21wKGJldGFzWzFdKSA8IDAgPyBiZXRhc1swXSA6IGJldGFzWzFdOwogICAgICBiZXRhID0gYmV0YS50b1JlZCh0aGlzLnJlZCk7CiAgICB9CiAgICBpZiAoY29uZi5sYW1iZGEpIHsKICAgICAgbGFtYmRhID0gbmV3IEJOJGIoY29uZi5sYW1iZGEsIDE2KTsKICAgIH0gZWxzZSB7CiAgICAgIC8vIENob29zZSB0aGUgbGFtYmRhIHRoYXQgaXMgbWF0Y2hpbmcgc2VsZWN0ZWQgYmV0YQogICAgICB2YXIgbGFtYmRhcyA9IHRoaXMuX2dldEVuZG9Sb290cyh0aGlzLm4pOwogICAgICBpZiAodGhpcy5nLm11bChsYW1iZGFzWzBdKS54LmNtcCh0aGlzLmcueC5yZWRNdWwoYmV0YSkpID09PSAwKSB7CiAgICAgICAgbGFtYmRhID0gbGFtYmRhc1swXTsKICAgICAgfSBlbHNlIHsKICAgICAgICBsYW1iZGEgPSBsYW1iZGFzWzFdOwogICAgICAgIGFzc2VydCRlKHRoaXMuZy5tdWwobGFtYmRhKS54LmNtcCh0aGlzLmcueC5yZWRNdWwoYmV0YSkpID09PSAwKTsKICAgICAgfQogICAgfQoKICAgIC8vIEdldCBiYXNpcyB2ZWN0b3JzLCB1c2VkIGZvciBiYWxhbmNlZCBsZW5ndGgtdHdvIHJlcHJlc2VudGF0aW9uCiAgICB2YXIgYmFzaXM7CiAgICBpZiAoY29uZi5iYXNpcykgewogICAgICBiYXNpcyA9IGNvbmYuYmFzaXMubWFwKGZ1bmN0aW9uKHZlYykgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBhOiBuZXcgQk4kYih2ZWMuYSwgMTYpLAogICAgICAgICAgYjogbmV3IEJOJGIodmVjLmIsIDE2KSwKICAgICAgICB9OwogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIGJhc2lzID0gdGhpcy5fZ2V0RW5kb0Jhc2lzKGxhbWJkYSk7CiAgICB9CgogICAgcmV0dXJuIHsKICAgICAgYmV0YTogYmV0YSwKICAgICAgbGFtYmRhOiBsYW1iZGEsCiAgICAgIGJhc2lzOiBiYXNpcywKICAgIH07CiAgfTsKCiAgU2hvcnRDdXJ2ZS5wcm90b3R5cGUuX2dldEVuZG9Sb290cyA9IGZ1bmN0aW9uIF9nZXRFbmRvUm9vdHMobnVtKSB7CiAgICAvLyBGaW5kIHJvb3RzIG9mIGZvciB4XjIgKyB4ICsgMSBpbiBGCiAgICAvLyBSb290ID0gKC0xICstIFNxcnQoLTMpKSAvIDIKICAgIC8vCiAgICB2YXIgcmVkID0gbnVtID09PSB0aGlzLnAgPyB0aGlzLnJlZCA6IEJOJGIubW9udChudW0pOwogICAgdmFyIHRpbnYgPSBuZXcgQk4kYigyKS50b1JlZChyZWQpLnJlZEludm0oKTsKICAgIHZhciBudGludiA9IHRpbnYucmVkTmVnKCk7CgogICAgdmFyIHMgPSBuZXcgQk4kYigzKS50b1JlZChyZWQpLnJlZE5lZygpLnJlZFNxcnQoKS5yZWRNdWwodGludik7CgogICAgdmFyIGwxID0gbnRpbnYucmVkQWRkKHMpLmZyb21SZWQoKTsKICAgIHZhciBsMiA9IG50aW52LnJlZFN1YihzKS5mcm9tUmVkKCk7CiAgICByZXR1cm4gWyBsMSwgbDIgXTsKICB9OwoKICBTaG9ydEN1cnZlLnByb3RvdHlwZS5fZ2V0RW5kb0Jhc2lzID0gZnVuY3Rpb24gX2dldEVuZG9CYXNpcyhsYW1iZGEpIHsKICAgIC8vIGFwcnhTcXJ0ID49IHNxcnQodGhpcy5uKQogICAgdmFyIGFwcnhTcXJ0ID0gdGhpcy5uLnVzaHJuKE1hdGguZmxvb3IodGhpcy5uLmJpdExlbmd0aCgpIC8gMikpOwoKICAgIC8vIDMuNzQKICAgIC8vIFJ1biBFR0NELCB1bnRpbCByKEwgKyAxKSA8IGFwcnhTcXJ0CiAgICB2YXIgdSA9IGxhbWJkYTsKICAgIHZhciB2ID0gdGhpcy5uLmNsb25lKCk7CiAgICB2YXIgeDEgPSBuZXcgQk4kYigxKTsKICAgIHZhciB5MSA9IG5ldyBCTiRiKDApOwogICAgdmFyIHgyID0gbmV3IEJOJGIoMCk7CiAgICB2YXIgeTIgPSBuZXcgQk4kYigxKTsKCiAgICAvLyBOT1RFOiBhbGwgdmVjdG9ycyBhcmUgcm9vdHMgb2Y6IGEgKyBiICogbGFtYmRhID0gMCAobW9kIG4pCiAgICB2YXIgYTA7CiAgICB2YXIgYjA7CiAgICAvLyBGaXJzdCB2ZWN0b3IKICAgIHZhciBhMTsKICAgIHZhciBiMTsKICAgIC8vIFNlY29uZCB2ZWN0b3IKICAgIHZhciBhMjsKICAgIHZhciBiMjsKCiAgICB2YXIgcHJldlI7CiAgICB2YXIgaSA9IDA7CiAgICB2YXIgcjsKICAgIHZhciB4OwogICAgd2hpbGUgKHUuY21wbigwKSAhPT0gMCkgewogICAgICB2YXIgcSA9IHYuZGl2KHUpOwogICAgICByID0gdi5zdWIocS5tdWwodSkpOwogICAgICB4ID0geDIuc3ViKHEubXVsKHgxKSk7CiAgICAgIHZhciB5ID0geTIuc3ViKHEubXVsKHkxKSk7CgogICAgICBpZiAoIWExICYmIHIuY21wKGFwcnhTcXJ0KSA8IDApIHsKICAgICAgICBhMCA9IHByZXZSLm5lZygpOwogICAgICAgIGIwID0geDE7CiAgICAgICAgYTEgPSByLm5lZygpOwogICAgICAgIGIxID0geDsKICAgICAgfSBlbHNlIGlmIChhMSAmJiArK2kgPT09IDIpIHsKICAgICAgICBicmVhazsKICAgICAgfQogICAgICBwcmV2UiA9IHI7CgogICAgICB2ID0gdTsKICAgICAgdSA9IHI7CiAgICAgIHgyID0geDE7CiAgICAgIHgxID0geDsKICAgICAgeTIgPSB5MTsKICAgICAgeTEgPSB5OwogICAgfQogICAgYTIgPSByLm5lZygpOwogICAgYjIgPSB4OwoKICAgIHZhciBsZW4xID0gYTEuc3FyKCkuYWRkKGIxLnNxcigpKTsKICAgIHZhciBsZW4yID0gYTIuc3FyKCkuYWRkKGIyLnNxcigpKTsKICAgIGlmIChsZW4yLmNtcChsZW4xKSA+PSAwKSB7CiAgICAgIGEyID0gYTA7CiAgICAgIGIyID0gYjA7CiAgICB9CgogICAgLy8gTm9ybWFsaXplIHNpZ25zCiAgICBpZiAoYTEubmVnYXRpdmUpIHsKICAgICAgYTEgPSBhMS5uZWcoKTsKICAgICAgYjEgPSBiMS5uZWcoKTsKICAgIH0KICAgIGlmIChhMi5uZWdhdGl2ZSkgewogICAgICBhMiA9IGEyLm5lZygpOwogICAgICBiMiA9IGIyLm5lZygpOwogICAgfQoKICAgIHJldHVybiBbCiAgICAgIHsgYTogYTEsIGI6IGIxIH0sCiAgICAgIHsgYTogYTIsIGI6IGIyIH0sCiAgICBdOwogIH07CgogIFNob3J0Q3VydmUucHJvdG90eXBlLl9lbmRvU3BsaXQgPSBmdW5jdGlvbiBfZW5kb1NwbGl0KGspIHsKICAgIHZhciBiYXNpcyA9IHRoaXMuZW5kby5iYXNpczsKICAgIHZhciB2MSA9IGJhc2lzWzBdOwogICAgdmFyIHYyID0gYmFzaXNbMV07CgogICAgdmFyIGMxID0gdjIuYi5tdWwoaykuZGl2Um91bmQodGhpcy5uKTsKICAgIHZhciBjMiA9IHYxLmIubmVnKCkubXVsKGspLmRpdlJvdW5kKHRoaXMubik7CgogICAgdmFyIHAxID0gYzEubXVsKHYxLmEpOwogICAgdmFyIHAyID0gYzIubXVsKHYyLmEpOwogICAgdmFyIHExID0gYzEubXVsKHYxLmIpOwogICAgdmFyIHEyID0gYzIubXVsKHYyLmIpOwoKICAgIC8vIENhbGN1bGF0ZSBhbnN3ZXIKICAgIHZhciBrMSA9IGsuc3ViKHAxKS5zdWIocDIpOwogICAgdmFyIGsyID0gcTEuYWRkKHEyKS5uZWcoKTsKICAgIHJldHVybiB7IGsxOiBrMSwgazI6IGsyIH07CiAgfTsKCiAgU2hvcnRDdXJ2ZS5wcm90b3R5cGUucG9pbnRGcm9tWCA9IGZ1bmN0aW9uIHBvaW50RnJvbVgoeCwgb2RkKSB7CiAgICB4ID0gbmV3IEJOJGIoeCwgMTYpOwogICAgaWYgKCF4LnJlZCkKICAgICAgeCA9IHgudG9SZWQodGhpcy5yZWQpOwoKICAgIHZhciB5MiA9IHgucmVkU3FyKCkucmVkTXVsKHgpLnJlZElBZGQoeC5yZWRNdWwodGhpcy5hKSkucmVkSUFkZCh0aGlzLmIpOwogICAgdmFyIHkgPSB5Mi5yZWRTcXJ0KCk7CiAgICBpZiAoeS5yZWRTcXIoKS5yZWRTdWIoeTIpLmNtcCh0aGlzLnplcm8pICE9PSAwKQogICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgcG9pbnQnKTsKCiAgICAvLyBYWFggSXMgdGhlcmUgYW55IHdheSB0byB0ZWxsIGlmIHRoZSBudW1iZXIgaXMgb2RkIHdpdGhvdXQgY29udmVydGluZyBpdAogICAgLy8gdG8gbm9uLXJlZCBmb3JtPwogICAgdmFyIGlzT2RkID0geS5mcm9tUmVkKCkuaXNPZGQoKTsKICAgIGlmIChvZGQgJiYgIWlzT2RkIHx8ICFvZGQgJiYgaXNPZGQpCiAgICAgIHkgPSB5LnJlZE5lZygpOwoKICAgIHJldHVybiB0aGlzLnBvaW50KHgsIHkpOwogIH07CgogIFNob3J0Q3VydmUucHJvdG90eXBlLnZhbGlkYXRlID0gZnVuY3Rpb24gdmFsaWRhdGUocG9pbnQpIHsKICAgIGlmIChwb2ludC5pbmYpCiAgICAgIHJldHVybiB0cnVlOwoKICAgIHZhciB4ID0gcG9pbnQueDsKICAgIHZhciB5ID0gcG9pbnQueTsKCiAgICB2YXIgYXggPSB0aGlzLmEucmVkTXVsKHgpOwogICAgdmFyIHJocyA9IHgucmVkU3FyKCkucmVkTXVsKHgpLnJlZElBZGQoYXgpLnJlZElBZGQodGhpcy5iKTsKICAgIHJldHVybiB5LnJlZFNxcigpLnJlZElTdWIocmhzKS5jbXBuKDApID09PSAwOwogIH07CgogIFNob3J0Q3VydmUucHJvdG90eXBlLl9lbmRvV25hZk11bEFkZCA9CiAgICAgIGZ1bmN0aW9uIF9lbmRvV25hZk11bEFkZChwb2ludHMsIGNvZWZmcywgamFjb2JpYW5SZXN1bHQpIHsKICAgICAgICB2YXIgbnBvaW50cyA9IHRoaXMuX2VuZG9XbmFmVDE7CiAgICAgICAgdmFyIG5jb2VmZnMgPSB0aGlzLl9lbmRvV25hZlQyOwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9pbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB2YXIgc3BsaXQgPSB0aGlzLl9lbmRvU3BsaXQoY29lZmZzW2ldKTsKICAgICAgICAgIHZhciBwID0gcG9pbnRzW2ldOwogICAgICAgICAgdmFyIGJldGEgPSBwLl9nZXRCZXRhKCk7CgogICAgICAgICAgaWYgKHNwbGl0LmsxLm5lZ2F0aXZlKSB7CiAgICAgICAgICAgIHNwbGl0LmsxLmluZWcoKTsKICAgICAgICAgICAgcCA9IHAubmVnKHRydWUpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHNwbGl0LmsyLm5lZ2F0aXZlKSB7CiAgICAgICAgICAgIHNwbGl0LmsyLmluZWcoKTsKICAgICAgICAgICAgYmV0YSA9IGJldGEubmVnKHRydWUpOwogICAgICAgICAgfQoKICAgICAgICAgIG5wb2ludHNbaSAqIDJdID0gcDsKICAgICAgICAgIG5wb2ludHNbaSAqIDIgKyAxXSA9IGJldGE7CiAgICAgICAgICBuY29lZmZzW2kgKiAyXSA9IHNwbGl0LmsxOwogICAgICAgICAgbmNvZWZmc1tpICogMiArIDFdID0gc3BsaXQuazI7CiAgICAgICAgfQogICAgICAgIHZhciByZXMgPSB0aGlzLl93bmFmTXVsQWRkKDEsIG5wb2ludHMsIG5jb2VmZnMsIGkgKiAyLCBqYWNvYmlhblJlc3VsdCk7CgogICAgICAgIC8vIENsZWFuLXVwIHJlZmVyZW5jZXMgdG8gcG9pbnRzIGFuZCBjb2VmZmljaWVudHMKICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGkgKiAyOyBqKyspIHsKICAgICAgICAgIG5wb2ludHNbal0gPSBudWxsOwogICAgICAgICAgbmNvZWZmc1tqXSA9IG51bGw7CiAgICAgICAgfQogICAgICAgIHJldHVybiByZXM7CiAgICAgIH07CgogIGZ1bmN0aW9uIFBvaW50JDIoY3VydmUsIHgsIHksIGlzUmVkKSB7CiAgICBCYXNlJDIuQmFzZVBvaW50LmNhbGwodGhpcywgY3VydmUsICdhZmZpbmUnKTsKICAgIGlmICh4ID09PSBudWxsICYmIHkgPT09IG51bGwpIHsKICAgICAgdGhpcy54ID0gbnVsbDsKICAgICAgdGhpcy55ID0gbnVsbDsKICAgICAgdGhpcy5pbmYgPSB0cnVlOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy54ID0gbmV3IEJOJGIoeCwgMTYpOwogICAgICB0aGlzLnkgPSBuZXcgQk4kYih5LCAxNik7CiAgICAgIC8vIEZvcmNlIHJlZGdvbWVyeSByZXByZXNlbnRhdGlvbiB3aGVuIGxvYWRpbmcgZnJvbSBKU09OCiAgICAgIGlmIChpc1JlZCkgewogICAgICAgIHRoaXMueC5mb3JjZVJlZCh0aGlzLmN1cnZlLnJlZCk7CiAgICAgICAgdGhpcy55LmZvcmNlUmVkKHRoaXMuY3VydmUucmVkKTsKICAgICAgfQogICAgICBpZiAoIXRoaXMueC5yZWQpCiAgICAgICAgdGhpcy54ID0gdGhpcy54LnRvUmVkKHRoaXMuY3VydmUucmVkKTsKICAgICAgaWYgKCF0aGlzLnkucmVkKQogICAgICAgIHRoaXMueSA9IHRoaXMueS50b1JlZCh0aGlzLmN1cnZlLnJlZCk7CiAgICAgIHRoaXMuaW5mID0gZmFsc2U7CiAgICB9CiAgfQogIGluaGVyaXRzJGMoUG9pbnQkMiwgQmFzZSQyLkJhc2VQb2ludCk7CgogIFNob3J0Q3VydmUucHJvdG90eXBlLnBvaW50ID0gZnVuY3Rpb24gcG9pbnQoeCwgeSwgaXNSZWQpIHsKICAgIHJldHVybiBuZXcgUG9pbnQkMih0aGlzLCB4LCB5LCBpc1JlZCk7CiAgfTsKCiAgU2hvcnRDdXJ2ZS5wcm90b3R5cGUucG9pbnRGcm9tSlNPTiA9IGZ1bmN0aW9uIHBvaW50RnJvbUpTT04ob2JqLCByZWQpIHsKICAgIHJldHVybiBQb2ludCQyLmZyb21KU09OKHRoaXMsIG9iaiwgcmVkKTsKICB9OwoKICBQb2ludCQyLnByb3RvdHlwZS5fZ2V0QmV0YSA9IGZ1bmN0aW9uIF9nZXRCZXRhKCkgewogICAgaWYgKCF0aGlzLmN1cnZlLmVuZG8pCiAgICAgIHJldHVybjsKCiAgICB2YXIgcHJlID0gdGhpcy5wcmVjb21wdXRlZDsKICAgIGlmIChwcmUgJiYgcHJlLmJldGEpCiAgICAgIHJldHVybiBwcmUuYmV0YTsKCiAgICB2YXIgYmV0YSA9IHRoaXMuY3VydmUucG9pbnQodGhpcy54LnJlZE11bCh0aGlzLmN1cnZlLmVuZG8uYmV0YSksIHRoaXMueSk7CiAgICBpZiAocHJlKSB7CiAgICAgIHZhciBjdXJ2ZSA9IHRoaXMuY3VydmU7CiAgICAgIHZhciBlbmRvTXVsID0gZnVuY3Rpb24ocCkgewogICAgICAgIHJldHVybiBjdXJ2ZS5wb2ludChwLngucmVkTXVsKGN1cnZlLmVuZG8uYmV0YSksIHAueSk7CiAgICAgIH07CiAgICAgIHByZS5iZXRhID0gYmV0YTsKICAgICAgYmV0YS5wcmVjb21wdXRlZCA9IHsKICAgICAgICBiZXRhOiBudWxsLAogICAgICAgIG5hZjogcHJlLm5hZiAmJiB7CiAgICAgICAgICB3bmQ6IHByZS5uYWYud25kLAogICAgICAgICAgcG9pbnRzOiBwcmUubmFmLnBvaW50cy5tYXAoZW5kb011bCksCiAgICAgICAgfSwKICAgICAgICBkb3VibGVzOiBwcmUuZG91YmxlcyAmJiB7CiAgICAgICAgICBzdGVwOiBwcmUuZG91Ymxlcy5zdGVwLAogICAgICAgICAgcG9pbnRzOiBwcmUuZG91Ymxlcy5wb2ludHMubWFwKGVuZG9NdWwpLAogICAgICAgIH0sCiAgICAgIH07CiAgICB9CiAgICByZXR1cm4gYmV0YTsKICB9OwoKICBQb2ludCQyLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7CiAgICBpZiAoIXRoaXMucHJlY29tcHV0ZWQpCiAgICAgIHJldHVybiBbIHRoaXMueCwgdGhpcy55IF07CgogICAgcmV0dXJuIFsgdGhpcy54LCB0aGlzLnksIHRoaXMucHJlY29tcHV0ZWQgJiYgewogICAgICBkb3VibGVzOiB0aGlzLnByZWNvbXB1dGVkLmRvdWJsZXMgJiYgewogICAgICAgIHN0ZXA6IHRoaXMucHJlY29tcHV0ZWQuZG91Ymxlcy5zdGVwLAogICAgICAgIHBvaW50czogdGhpcy5wcmVjb21wdXRlZC5kb3VibGVzLnBvaW50cy5zbGljZSgxKSwKICAgICAgfSwKICAgICAgbmFmOiB0aGlzLnByZWNvbXB1dGVkLm5hZiAmJiB7CiAgICAgICAgd25kOiB0aGlzLnByZWNvbXB1dGVkLm5hZi53bmQsCiAgICAgICAgcG9pbnRzOiB0aGlzLnByZWNvbXB1dGVkLm5hZi5wb2ludHMuc2xpY2UoMSksCiAgICAgIH0sCiAgICB9IF07CiAgfTsKCiAgUG9pbnQkMi5mcm9tSlNPTiA9IGZ1bmN0aW9uIGZyb21KU09OKGN1cnZlLCBvYmosIHJlZCkgewogICAgaWYgKHR5cGVvZiBvYmogPT09ICdzdHJpbmcnKQogICAgICBvYmogPSBKU09OLnBhcnNlKG9iaik7CiAgICB2YXIgcmVzID0gY3VydmUucG9pbnQob2JqWzBdLCBvYmpbMV0sIHJlZCk7CiAgICBpZiAoIW9ialsyXSkKICAgICAgcmV0dXJuIHJlczsKCiAgICBmdW5jdGlvbiBvYmoycG9pbnQob2JqKSB7CiAgICAgIHJldHVybiBjdXJ2ZS5wb2ludChvYmpbMF0sIG9ialsxXSwgcmVkKTsKICAgIH0KCiAgICB2YXIgcHJlID0gb2JqWzJdOwogICAgcmVzLnByZWNvbXB1dGVkID0gewogICAgICBiZXRhOiBudWxsLAogICAgICBkb3VibGVzOiBwcmUuZG91YmxlcyAmJiB7CiAgICAgICAgc3RlcDogcHJlLmRvdWJsZXMuc3RlcCwKICAgICAgICBwb2ludHM6IFsgcmVzIF0uY29uY2F0KHByZS5kb3VibGVzLnBvaW50cy5tYXAob2JqMnBvaW50KSksCiAgICAgIH0sCiAgICAgIG5hZjogcHJlLm5hZiAmJiB7CiAgICAgICAgd25kOiBwcmUubmFmLnduZCwKICAgICAgICBwb2ludHM6IFsgcmVzIF0uY29uY2F0KHByZS5uYWYucG9pbnRzLm1hcChvYmoycG9pbnQpKSwKICAgICAgfSwKICAgIH07CiAgICByZXR1cm4gcmVzOwogIH07CgogIFBvaW50JDIucHJvdG90eXBlLmluc3BlY3QgPSBmdW5jdGlvbiBpbnNwZWN0KCkgewogICAgaWYgKHRoaXMuaXNJbmZpbml0eSgpKQogICAgICByZXR1cm4gJzxFQyBQb2ludCBJbmZpbml0eT4nOwogICAgcmV0dXJuICc8RUMgUG9pbnQgeDogJyArIHRoaXMueC5mcm9tUmVkKCkudG9TdHJpbmcoMTYsIDIpICsKICAgICAgICAnIHk6ICcgKyB0aGlzLnkuZnJvbVJlZCgpLnRvU3RyaW5nKDE2LCAyKSArICc+JzsKICB9OwoKICBQb2ludCQyLnByb3RvdHlwZS5pc0luZmluaXR5ID0gZnVuY3Rpb24gaXNJbmZpbml0eSgpIHsKICAgIHJldHVybiB0aGlzLmluZjsKICB9OwoKICBQb2ludCQyLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiBhZGQocCkgewogICAgLy8gTyArIFAgPSBQCiAgICBpZiAodGhpcy5pbmYpCiAgICAgIHJldHVybiBwOwoKICAgIC8vIFAgKyBPID0gUAogICAgaWYgKHAuaW5mKQogICAgICByZXR1cm4gdGhpczsKCiAgICAvLyBQICsgUCA9IDJQCiAgICBpZiAodGhpcy5lcShwKSkKICAgICAgcmV0dXJuIHRoaXMuZGJsKCk7CgogICAgLy8gUCArICgtUCkgPSBPCiAgICBpZiAodGhpcy5uZWcoKS5lcShwKSkKICAgICAgcmV0dXJuIHRoaXMuY3VydmUucG9pbnQobnVsbCwgbnVsbCk7CgogICAgLy8gUCArIFEgPSBPCiAgICBpZiAodGhpcy54LmNtcChwLngpID09PSAwKQogICAgICByZXR1cm4gdGhpcy5jdXJ2ZS5wb2ludChudWxsLCBudWxsKTsKCiAgICB2YXIgYyA9IHRoaXMueS5yZWRTdWIocC55KTsKICAgIGlmIChjLmNtcG4oMCkgIT09IDApCiAgICAgIGMgPSBjLnJlZE11bCh0aGlzLngucmVkU3ViKHAueCkucmVkSW52bSgpKTsKICAgIHZhciBueCA9IGMucmVkU3FyKCkucmVkSVN1Yih0aGlzLngpLnJlZElTdWIocC54KTsKICAgIHZhciBueSA9IGMucmVkTXVsKHRoaXMueC5yZWRTdWIobngpKS5yZWRJU3ViKHRoaXMueSk7CiAgICByZXR1cm4gdGhpcy5jdXJ2ZS5wb2ludChueCwgbnkpOwogIH07CgogIFBvaW50JDIucHJvdG90eXBlLmRibCA9IGZ1bmN0aW9uIGRibCgpIHsKICAgIGlmICh0aGlzLmluZikKICAgICAgcmV0dXJuIHRoaXM7CgogICAgLy8gMlAgPSBPCiAgICB2YXIgeXMxID0gdGhpcy55LnJlZEFkZCh0aGlzLnkpOwogICAgaWYgKHlzMS5jbXBuKDApID09PSAwKQogICAgICByZXR1cm4gdGhpcy5jdXJ2ZS5wb2ludChudWxsLCBudWxsKTsKCiAgICB2YXIgYSA9IHRoaXMuY3VydmUuYTsKCiAgICB2YXIgeDIgPSB0aGlzLngucmVkU3FyKCk7CiAgICB2YXIgZHlpbnYgPSB5czEucmVkSW52bSgpOwogICAgdmFyIGMgPSB4Mi5yZWRBZGQoeDIpLnJlZElBZGQoeDIpLnJlZElBZGQoYSkucmVkTXVsKGR5aW52KTsKCiAgICB2YXIgbnggPSBjLnJlZFNxcigpLnJlZElTdWIodGhpcy54LnJlZEFkZCh0aGlzLngpKTsKICAgIHZhciBueSA9IGMucmVkTXVsKHRoaXMueC5yZWRTdWIobngpKS5yZWRJU3ViKHRoaXMueSk7CiAgICByZXR1cm4gdGhpcy5jdXJ2ZS5wb2ludChueCwgbnkpOwogIH07CgogIFBvaW50JDIucHJvdG90eXBlLmdldFggPSBmdW5jdGlvbiBnZXRYKCkgewogICAgcmV0dXJuIHRoaXMueC5mcm9tUmVkKCk7CiAgfTsKCiAgUG9pbnQkMi5wcm90b3R5cGUuZ2V0WSA9IGZ1bmN0aW9uIGdldFkoKSB7CiAgICByZXR1cm4gdGhpcy55LmZyb21SZWQoKTsKICB9OwoKICBQb2ludCQyLnByb3RvdHlwZS5tdWwgPSBmdW5jdGlvbiBtdWwoaykgewogICAgayA9IG5ldyBCTiRiKGssIDE2KTsKICAgIGlmICh0aGlzLmlzSW5maW5pdHkoKSkKICAgICAgcmV0dXJuIHRoaXM7CiAgICBlbHNlIGlmICh0aGlzLl9oYXNEb3VibGVzKGspKQogICAgICByZXR1cm4gdGhpcy5jdXJ2ZS5fZml4ZWROYWZNdWwodGhpcywgayk7CiAgICBlbHNlIGlmICh0aGlzLmN1cnZlLmVuZG8pCiAgICAgIHJldHVybiB0aGlzLmN1cnZlLl9lbmRvV25hZk11bEFkZChbIHRoaXMgXSwgWyBrIF0pOwogICAgZWxzZQogICAgICByZXR1cm4gdGhpcy5jdXJ2ZS5fd25hZk11bCh0aGlzLCBrKTsKICB9OwoKICBQb2ludCQyLnByb3RvdHlwZS5tdWxBZGQgPSBmdW5jdGlvbiBtdWxBZGQoazEsIHAyLCBrMikgewogICAgdmFyIHBvaW50cyA9IFsgdGhpcywgcDIgXTsKICAgIHZhciBjb2VmZnMgPSBbIGsxLCBrMiBdOwogICAgaWYgKHRoaXMuY3VydmUuZW5kbykKICAgICAgcmV0dXJuIHRoaXMuY3VydmUuX2VuZG9XbmFmTXVsQWRkKHBvaW50cywgY29lZmZzKTsKICAgIGVsc2UKICAgICAgcmV0dXJuIHRoaXMuY3VydmUuX3duYWZNdWxBZGQoMSwgcG9pbnRzLCBjb2VmZnMsIDIpOwogIH07CgogIFBvaW50JDIucHJvdG90eXBlLmptdWxBZGQgPSBmdW5jdGlvbiBqbXVsQWRkKGsxLCBwMiwgazIpIHsKICAgIHZhciBwb2ludHMgPSBbIHRoaXMsIHAyIF07CiAgICB2YXIgY29lZmZzID0gWyBrMSwgazIgXTsKICAgIGlmICh0aGlzLmN1cnZlLmVuZG8pCiAgICAgIHJldHVybiB0aGlzLmN1cnZlLl9lbmRvV25hZk11bEFkZChwb2ludHMsIGNvZWZmcywgdHJ1ZSk7CiAgICBlbHNlCiAgICAgIHJldHVybiB0aGlzLmN1cnZlLl93bmFmTXVsQWRkKDEsIHBvaW50cywgY29lZmZzLCAyLCB0cnVlKTsKICB9OwoKICBQb2ludCQyLnByb3RvdHlwZS5lcSA9IGZ1bmN0aW9uIGVxKHApIHsKICAgIHJldHVybiB0aGlzID09PSBwIHx8CiAgICAgICAgICAgdGhpcy5pbmYgPT09IHAuaW5mICYmCiAgICAgICAgICAgICAgICh0aGlzLmluZiB8fCB0aGlzLnguY21wKHAueCkgPT09IDAgJiYgdGhpcy55LmNtcChwLnkpID09PSAwKTsKICB9OwoKICBQb2ludCQyLnByb3RvdHlwZS5uZWcgPSBmdW5jdGlvbiBuZWcoX3ByZWNvbXB1dGUpIHsKICAgIGlmICh0aGlzLmluZikKICAgICAgcmV0dXJuIHRoaXM7CgogICAgdmFyIHJlcyA9IHRoaXMuY3VydmUucG9pbnQodGhpcy54LCB0aGlzLnkucmVkTmVnKCkpOwogICAgaWYgKF9wcmVjb21wdXRlICYmIHRoaXMucHJlY29tcHV0ZWQpIHsKICAgICAgdmFyIHByZSA9IHRoaXMucHJlY29tcHV0ZWQ7CiAgICAgIHZhciBuZWdhdGUgPSBmdW5jdGlvbihwKSB7CiAgICAgICAgcmV0dXJuIHAubmVnKCk7CiAgICAgIH07CiAgICAgIHJlcy5wcmVjb21wdXRlZCA9IHsKICAgICAgICBuYWY6IHByZS5uYWYgJiYgewogICAgICAgICAgd25kOiBwcmUubmFmLnduZCwKICAgICAgICAgIHBvaW50czogcHJlLm5hZi5wb2ludHMubWFwKG5lZ2F0ZSksCiAgICAgICAgfSwKICAgICAgICBkb3VibGVzOiBwcmUuZG91YmxlcyAmJiB7CiAgICAgICAgICBzdGVwOiBwcmUuZG91Ymxlcy5zdGVwLAogICAgICAgICAgcG9pbnRzOiBwcmUuZG91Ymxlcy5wb2ludHMubWFwKG5lZ2F0ZSksCiAgICAgICAgfSwKICAgICAgfTsKICAgIH0KICAgIHJldHVybiByZXM7CiAgfTsKCiAgUG9pbnQkMi5wcm90b3R5cGUudG9KID0gZnVuY3Rpb24gdG9KKCkgewogICAgaWYgKHRoaXMuaW5mKQogICAgICByZXR1cm4gdGhpcy5jdXJ2ZS5qcG9pbnQobnVsbCwgbnVsbCwgbnVsbCk7CgogICAgdmFyIHJlcyA9IHRoaXMuY3VydmUuanBvaW50KHRoaXMueCwgdGhpcy55LCB0aGlzLmN1cnZlLm9uZSk7CiAgICByZXR1cm4gcmVzOwogIH07CgogIGZ1bmN0aW9uIEpQb2ludChjdXJ2ZSwgeCwgeSwgeikgewogICAgQmFzZSQyLkJhc2VQb2ludC5jYWxsKHRoaXMsIGN1cnZlLCAnamFjb2JpYW4nKTsKICAgIGlmICh4ID09PSBudWxsICYmIHkgPT09IG51bGwgJiYgeiA9PT0gbnVsbCkgewogICAgICB0aGlzLnggPSB0aGlzLmN1cnZlLm9uZTsKICAgICAgdGhpcy55ID0gdGhpcy5jdXJ2ZS5vbmU7CiAgICAgIHRoaXMueiA9IG5ldyBCTiRiKDApOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy54ID0gbmV3IEJOJGIoeCwgMTYpOwogICAgICB0aGlzLnkgPSBuZXcgQk4kYih5LCAxNik7CiAgICAgIHRoaXMueiA9IG5ldyBCTiRiKHosIDE2KTsKICAgIH0KICAgIGlmICghdGhpcy54LnJlZCkKICAgICAgdGhpcy54ID0gdGhpcy54LnRvUmVkKHRoaXMuY3VydmUucmVkKTsKICAgIGlmICghdGhpcy55LnJlZCkKICAgICAgdGhpcy55ID0gdGhpcy55LnRvUmVkKHRoaXMuY3VydmUucmVkKTsKICAgIGlmICghdGhpcy56LnJlZCkKICAgICAgdGhpcy56ID0gdGhpcy56LnRvUmVkKHRoaXMuY3VydmUucmVkKTsKCiAgICB0aGlzLnpPbmUgPSB0aGlzLnogPT09IHRoaXMuY3VydmUub25lOwogIH0KICBpbmhlcml0cyRjKEpQb2ludCwgQmFzZSQyLkJhc2VQb2ludCk7CgogIFNob3J0Q3VydmUucHJvdG90eXBlLmpwb2ludCA9IGZ1bmN0aW9uIGpwb2ludCh4LCB5LCB6KSB7CiAgICByZXR1cm4gbmV3IEpQb2ludCh0aGlzLCB4LCB5LCB6KTsKICB9OwoKICBKUG9pbnQucHJvdG90eXBlLnRvUCA9IGZ1bmN0aW9uIHRvUCgpIHsKICAgIGlmICh0aGlzLmlzSW5maW5pdHkoKSkKICAgICAgcmV0dXJuIHRoaXMuY3VydmUucG9pbnQobnVsbCwgbnVsbCk7CgogICAgdmFyIHppbnYgPSB0aGlzLnoucmVkSW52bSgpOwogICAgdmFyIHppbnYyID0gemludi5yZWRTcXIoKTsKICAgIHZhciBheCA9IHRoaXMueC5yZWRNdWwoemludjIpOwogICAgdmFyIGF5ID0gdGhpcy55LnJlZE11bCh6aW52MikucmVkTXVsKHppbnYpOwoKICAgIHJldHVybiB0aGlzLmN1cnZlLnBvaW50KGF4LCBheSk7CiAgfTsKCiAgSlBvaW50LnByb3RvdHlwZS5uZWcgPSBmdW5jdGlvbiBuZWcoKSB7CiAgICByZXR1cm4gdGhpcy5jdXJ2ZS5qcG9pbnQodGhpcy54LCB0aGlzLnkucmVkTmVnKCksIHRoaXMueik7CiAgfTsKCiAgSlBvaW50LnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiBhZGQocCkgewogICAgLy8gTyArIFAgPSBQCiAgICBpZiAodGhpcy5pc0luZmluaXR5KCkpCiAgICAgIHJldHVybiBwOwoKICAgIC8vIFAgKyBPID0gUAogICAgaWYgKHAuaXNJbmZpbml0eSgpKQogICAgICByZXR1cm4gdGhpczsKCiAgICAvLyAxMk0gKyA0UyArIDdBCiAgICB2YXIgcHoyID0gcC56LnJlZFNxcigpOwogICAgdmFyIHoyID0gdGhpcy56LnJlZFNxcigpOwogICAgdmFyIHUxID0gdGhpcy54LnJlZE11bChwejIpOwogICAgdmFyIHUyID0gcC54LnJlZE11bCh6Mik7CiAgICB2YXIgczEgPSB0aGlzLnkucmVkTXVsKHB6Mi5yZWRNdWwocC56KSk7CiAgICB2YXIgczIgPSBwLnkucmVkTXVsKHoyLnJlZE11bCh0aGlzLnopKTsKCiAgICB2YXIgaCA9IHUxLnJlZFN1Yih1Mik7CiAgICB2YXIgciA9IHMxLnJlZFN1YihzMik7CiAgICBpZiAoaC5jbXBuKDApID09PSAwKSB7CiAgICAgIGlmIChyLmNtcG4oMCkgIT09IDApCiAgICAgICAgcmV0dXJuIHRoaXMuY3VydmUuanBvaW50KG51bGwsIG51bGwsIG51bGwpOwogICAgICBlbHNlCiAgICAgICAgcmV0dXJuIHRoaXMuZGJsKCk7CiAgICB9CgogICAgdmFyIGgyID0gaC5yZWRTcXIoKTsKICAgIHZhciBoMyA9IGgyLnJlZE11bChoKTsKICAgIHZhciB2ID0gdTEucmVkTXVsKGgyKTsKCiAgICB2YXIgbnggPSByLnJlZFNxcigpLnJlZElBZGQoaDMpLnJlZElTdWIodikucmVkSVN1Yih2KTsKICAgIHZhciBueSA9IHIucmVkTXVsKHYucmVkSVN1YihueCkpLnJlZElTdWIoczEucmVkTXVsKGgzKSk7CiAgICB2YXIgbnogPSB0aGlzLnoucmVkTXVsKHAueikucmVkTXVsKGgpOwoKICAgIHJldHVybiB0aGlzLmN1cnZlLmpwb2ludChueCwgbnksIG56KTsKICB9OwoKICBKUG9pbnQucHJvdG90eXBlLm1peGVkQWRkID0gZnVuY3Rpb24gbWl4ZWRBZGQocCkgewogICAgLy8gTyArIFAgPSBQCiAgICBpZiAodGhpcy5pc0luZmluaXR5KCkpCiAgICAgIHJldHVybiBwLnRvSigpOwoKICAgIC8vIFAgKyBPID0gUAogICAgaWYgKHAuaXNJbmZpbml0eSgpKQogICAgICByZXR1cm4gdGhpczsKCiAgICAvLyA4TSArIDNTICsgN0EKICAgIHZhciB6MiA9IHRoaXMuei5yZWRTcXIoKTsKICAgIHZhciB1MSA9IHRoaXMueDsKICAgIHZhciB1MiA9IHAueC5yZWRNdWwoejIpOwogICAgdmFyIHMxID0gdGhpcy55OwogICAgdmFyIHMyID0gcC55LnJlZE11bCh6MikucmVkTXVsKHRoaXMueik7CgogICAgdmFyIGggPSB1MS5yZWRTdWIodTIpOwogICAgdmFyIHIgPSBzMS5yZWRTdWIoczIpOwogICAgaWYgKGguY21wbigwKSA9PT0gMCkgewogICAgICBpZiAoci5jbXBuKDApICE9PSAwKQogICAgICAgIHJldHVybiB0aGlzLmN1cnZlLmpwb2ludChudWxsLCBudWxsLCBudWxsKTsKICAgICAgZWxzZQogICAgICAgIHJldHVybiB0aGlzLmRibCgpOwogICAgfQoKICAgIHZhciBoMiA9IGgucmVkU3FyKCk7CiAgICB2YXIgaDMgPSBoMi5yZWRNdWwoaCk7CiAgICB2YXIgdiA9IHUxLnJlZE11bChoMik7CgogICAgdmFyIG54ID0gci5yZWRTcXIoKS5yZWRJQWRkKGgzKS5yZWRJU3ViKHYpLnJlZElTdWIodik7CiAgICB2YXIgbnkgPSByLnJlZE11bCh2LnJlZElTdWIobngpKS5yZWRJU3ViKHMxLnJlZE11bChoMykpOwogICAgdmFyIG56ID0gdGhpcy56LnJlZE11bChoKTsKCiAgICByZXR1cm4gdGhpcy5jdXJ2ZS5qcG9pbnQobngsIG55LCBueik7CiAgfTsKCiAgSlBvaW50LnByb3RvdHlwZS5kYmxwID0gZnVuY3Rpb24gZGJscChwb3cpIHsKICAgIGlmIChwb3cgPT09IDApCiAgICAgIHJldHVybiB0aGlzOwogICAgaWYgKHRoaXMuaXNJbmZpbml0eSgpKQogICAgICByZXR1cm4gdGhpczsKICAgIGlmICghcG93KQogICAgICByZXR1cm4gdGhpcy5kYmwoKTsKCiAgICB2YXIgaTsKICAgIGlmICh0aGlzLmN1cnZlLnplcm9BIHx8IHRoaXMuY3VydmUudGhyZWVBKSB7CiAgICAgIHZhciByID0gdGhpczsKICAgICAgZm9yIChpID0gMDsgaSA8IHBvdzsgaSsrKQogICAgICAgIHIgPSByLmRibCgpOwogICAgICByZXR1cm4gcjsKICAgIH0KCiAgICAvLyAxTSArIDJTICsgMUEgKyBOICogKDRTICsgNU0gKyA4QSkKICAgIC8vIE4gPSAxID0+IDZNICsgNlMgKyA5QQogICAgdmFyIGEgPSB0aGlzLmN1cnZlLmE7CiAgICB2YXIgdGludiA9IHRoaXMuY3VydmUudGludjsKCiAgICB2YXIganggPSB0aGlzLng7CiAgICB2YXIgankgPSB0aGlzLnk7CiAgICB2YXIganogPSB0aGlzLno7CiAgICB2YXIgano0ID0ganoucmVkU3FyKCkucmVkU3FyKCk7CgogICAgLy8gUmV1c2UgcmVzdWx0cwogICAgdmFyIGp5ZCA9IGp5LnJlZEFkZChqeSk7CiAgICBmb3IgKGkgPSAwOyBpIDwgcG93OyBpKyspIHsKICAgICAgdmFyIGp4MiA9IGp4LnJlZFNxcigpOwogICAgICB2YXIganlkMiA9IGp5ZC5yZWRTcXIoKTsKICAgICAgdmFyIGp5ZDQgPSBqeWQyLnJlZFNxcigpOwogICAgICB2YXIgYyA9IGp4Mi5yZWRBZGQoangyKS5yZWRJQWRkKGp4MikucmVkSUFkZChhLnJlZE11bChqejQpKTsKCiAgICAgIHZhciB0MSA9IGp4LnJlZE11bChqeWQyKTsKICAgICAgdmFyIG54ID0gYy5yZWRTcXIoKS5yZWRJU3ViKHQxLnJlZEFkZCh0MSkpOwogICAgICB2YXIgdDIgPSB0MS5yZWRJU3ViKG54KTsKICAgICAgdmFyIGRueSA9IGMucmVkTXVsKHQyKTsKICAgICAgZG55ID0gZG55LnJlZElBZGQoZG55KS5yZWRJU3ViKGp5ZDQpOwogICAgICB2YXIgbnogPSBqeWQucmVkTXVsKGp6KTsKICAgICAgaWYgKGkgKyAxIDwgcG93KQogICAgICAgIGp6NCA9IGp6NC5yZWRNdWwoanlkNCk7CgogICAgICBqeCA9IG54OwogICAgICBqeiA9IG56OwogICAgICBqeWQgPSBkbnk7CiAgICB9CgogICAgcmV0dXJuIHRoaXMuY3VydmUuanBvaW50KGp4LCBqeWQucmVkTXVsKHRpbnYpLCBqeik7CiAgfTsKCiAgSlBvaW50LnByb3RvdHlwZS5kYmwgPSBmdW5jdGlvbiBkYmwoKSB7CiAgICBpZiAodGhpcy5pc0luZmluaXR5KCkpCiAgICAgIHJldHVybiB0aGlzOwoKICAgIGlmICh0aGlzLmN1cnZlLnplcm9BKQogICAgICByZXR1cm4gdGhpcy5femVyb0RibCgpOwogICAgZWxzZSBpZiAodGhpcy5jdXJ2ZS50aHJlZUEpCiAgICAgIHJldHVybiB0aGlzLl90aHJlZURibCgpOwogICAgZWxzZQogICAgICByZXR1cm4gdGhpcy5fZGJsKCk7CiAgfTsKCiAgSlBvaW50LnByb3RvdHlwZS5femVyb0RibCA9IGZ1bmN0aW9uIF96ZXJvRGJsKCkgewogICAgdmFyIG54OwogICAgdmFyIG55OwogICAgdmFyIG56OwogICAgLy8gWiA9IDEKICAgIGlmICh0aGlzLnpPbmUpIHsKICAgICAgLy8gaHlwZXJlbGxpcHRpYy5vcmcvRUZEL2cxcC9hdXRvLXNob3J0dy1qYWNvYmlhbi0wLmh0bWwKICAgICAgLy8gICAgICNkb3VibGluZy1tZGJsLTIwMDctYmwKICAgICAgLy8gMU0gKyA1UyArIDE0QQoKICAgICAgLy8gWFggPSBYMV4yCiAgICAgIHZhciB4eCA9IHRoaXMueC5yZWRTcXIoKTsKICAgICAgLy8gWVkgPSBZMV4yCiAgICAgIHZhciB5eSA9IHRoaXMueS5yZWRTcXIoKTsKICAgICAgLy8gWVlZWSA9IFlZXjIKICAgICAgdmFyIHl5eXkgPSB5eS5yZWRTcXIoKTsKICAgICAgLy8gUyA9IDIgKiAoKFgxICsgWVkpXjIgLSBYWCAtIFlZWVkpCiAgICAgIHZhciBzID0gdGhpcy54LnJlZEFkZCh5eSkucmVkU3FyKCkucmVkSVN1Yih4eCkucmVkSVN1Yih5eXl5KTsKICAgICAgcyA9IHMucmVkSUFkZChzKTsKICAgICAgLy8gTSA9IDMgKiBYWCArIGE7IGEgPSAwCiAgICAgIHZhciBtID0geHgucmVkQWRkKHh4KS5yZWRJQWRkKHh4KTsKICAgICAgLy8gVCA9IE0gXiAyIC0gMipTCiAgICAgIHZhciB0ID0gbS5yZWRTcXIoKS5yZWRJU3ViKHMpLnJlZElTdWIocyk7CgogICAgICAvLyA4ICogWVlZWQogICAgICB2YXIgeXl5eTggPSB5eXl5LnJlZElBZGQoeXl5eSk7CiAgICAgIHl5eXk4ID0geXl5eTgucmVkSUFkZCh5eXl5OCk7CiAgICAgIHl5eXk4ID0geXl5eTgucmVkSUFkZCh5eXl5OCk7CgogICAgICAvLyBYMyA9IFQKICAgICAgbnggPSB0OwogICAgICAvLyBZMyA9IE0gKiAoUyAtIFQpIC0gOCAqIFlZWVkKICAgICAgbnkgPSBtLnJlZE11bChzLnJlZElTdWIodCkpLnJlZElTdWIoeXl5eTgpOwogICAgICAvLyBaMyA9IDIqWTEKICAgICAgbnogPSB0aGlzLnkucmVkQWRkKHRoaXMueSk7CiAgICB9IGVsc2UgewogICAgICAvLyBoeXBlcmVsbGlwdGljLm9yZy9FRkQvZzFwL2F1dG8tc2hvcnR3LWphY29iaWFuLTAuaHRtbAogICAgICAvLyAgICAgI2RvdWJsaW5nLWRibC0yMDA5LWwKICAgICAgLy8gMk0gKyA1UyArIDEzQQoKICAgICAgLy8gQSA9IFgxXjIKICAgICAgdmFyIGEgPSB0aGlzLngucmVkU3FyKCk7CiAgICAgIC8vIEIgPSBZMV4yCiAgICAgIHZhciBiID0gdGhpcy55LnJlZFNxcigpOwogICAgICAvLyBDID0gQl4yCiAgICAgIHZhciBjID0gYi5yZWRTcXIoKTsKICAgICAgLy8gRCA9IDIgKiAoKFgxICsgQileMiAtIEEgLSBDKQogICAgICB2YXIgZCA9IHRoaXMueC5yZWRBZGQoYikucmVkU3FyKCkucmVkSVN1YihhKS5yZWRJU3ViKGMpOwogICAgICBkID0gZC5yZWRJQWRkKGQpOwogICAgICAvLyBFID0gMyAqIEEKICAgICAgdmFyIGUgPSBhLnJlZEFkZChhKS5yZWRJQWRkKGEpOwogICAgICAvLyBGID0gRV4yCiAgICAgIHZhciBmID0gZS5yZWRTcXIoKTsKCiAgICAgIC8vIDggKiBDCiAgICAgIHZhciBjOCA9IGMucmVkSUFkZChjKTsKICAgICAgYzggPSBjOC5yZWRJQWRkKGM4KTsKICAgICAgYzggPSBjOC5yZWRJQWRkKGM4KTsKCiAgICAgIC8vIFgzID0gRiAtIDIgKiBECiAgICAgIG54ID0gZi5yZWRJU3ViKGQpLnJlZElTdWIoZCk7CiAgICAgIC8vIFkzID0gRSAqIChEIC0gWDMpIC0gOCAqIEMKICAgICAgbnkgPSBlLnJlZE11bChkLnJlZElTdWIobngpKS5yZWRJU3ViKGM4KTsKICAgICAgLy8gWjMgPSAyICogWTEgKiBaMQogICAgICBueiA9IHRoaXMueS5yZWRNdWwodGhpcy56KTsKICAgICAgbnogPSBuei5yZWRJQWRkKG56KTsKICAgIH0KCiAgICByZXR1cm4gdGhpcy5jdXJ2ZS5qcG9pbnQobngsIG55LCBueik7CiAgfTsKCiAgSlBvaW50LnByb3RvdHlwZS5fdGhyZWVEYmwgPSBmdW5jdGlvbiBfdGhyZWVEYmwoKSB7CiAgICB2YXIgbng7CiAgICB2YXIgbnk7CiAgICB2YXIgbno7CiAgICAvLyBaID0gMQogICAgaWYgKHRoaXMuek9uZSkgewogICAgICAvLyBoeXBlcmVsbGlwdGljLm9yZy9FRkQvZzFwL2F1dG8tc2hvcnR3LWphY29iaWFuLTMuaHRtbAogICAgICAvLyAgICAgI2RvdWJsaW5nLW1kYmwtMjAwNy1ibAogICAgICAvLyAxTSArIDVTICsgMTVBCgogICAgICAvLyBYWCA9IFgxXjIKICAgICAgdmFyIHh4ID0gdGhpcy54LnJlZFNxcigpOwogICAgICAvLyBZWSA9IFkxXjIKICAgICAgdmFyIHl5ID0gdGhpcy55LnJlZFNxcigpOwogICAgICAvLyBZWVlZID0gWVleMgogICAgICB2YXIgeXl5eSA9IHl5LnJlZFNxcigpOwogICAgICAvLyBTID0gMiAqICgoWDEgKyBZWSleMiAtIFhYIC0gWVlZWSkKICAgICAgdmFyIHMgPSB0aGlzLngucmVkQWRkKHl5KS5yZWRTcXIoKS5yZWRJU3ViKHh4KS5yZWRJU3ViKHl5eXkpOwogICAgICBzID0gcy5yZWRJQWRkKHMpOwogICAgICAvLyBNID0gMyAqIFhYICsgYQogICAgICB2YXIgbSA9IHh4LnJlZEFkZCh4eCkucmVkSUFkZCh4eCkucmVkSUFkZCh0aGlzLmN1cnZlLmEpOwogICAgICAvLyBUID0gTV4yIC0gMiAqIFMKICAgICAgdmFyIHQgPSBtLnJlZFNxcigpLnJlZElTdWIocykucmVkSVN1YihzKTsKICAgICAgLy8gWDMgPSBUCiAgICAgIG54ID0gdDsKICAgICAgLy8gWTMgPSBNICogKFMgLSBUKSAtIDggKiBZWVlZCiAgICAgIHZhciB5eXl5OCA9IHl5eXkucmVkSUFkZCh5eXl5KTsKICAgICAgeXl5eTggPSB5eXl5OC5yZWRJQWRkKHl5eXk4KTsKICAgICAgeXl5eTggPSB5eXl5OC5yZWRJQWRkKHl5eXk4KTsKICAgICAgbnkgPSBtLnJlZE11bChzLnJlZElTdWIodCkpLnJlZElTdWIoeXl5eTgpOwogICAgICAvLyBaMyA9IDIgKiBZMQogICAgICBueiA9IHRoaXMueS5yZWRBZGQodGhpcy55KTsKICAgIH0gZWxzZSB7CiAgICAgIC8vIGh5cGVyZWxsaXB0aWMub3JnL0VGRC9nMXAvYXV0by1zaG9ydHctamFjb2JpYW4tMy5odG1sI2RvdWJsaW5nLWRibC0yMDAxLWIKICAgICAgLy8gM00gKyA1UwoKICAgICAgLy8gZGVsdGEgPSBaMV4yCiAgICAgIHZhciBkZWx0YSA9IHRoaXMuei5yZWRTcXIoKTsKICAgICAgLy8gZ2FtbWEgPSBZMV4yCiAgICAgIHZhciBnYW1tYSA9IHRoaXMueS5yZWRTcXIoKTsKICAgICAgLy8gYmV0YSA9IFgxICogZ2FtbWEKICAgICAgdmFyIGJldGEgPSB0aGlzLngucmVkTXVsKGdhbW1hKTsKICAgICAgLy8gYWxwaGEgPSAzICogKFgxIC0gZGVsdGEpICogKFgxICsgZGVsdGEpCiAgICAgIHZhciBhbHBoYSA9IHRoaXMueC5yZWRTdWIoZGVsdGEpLnJlZE11bCh0aGlzLngucmVkQWRkKGRlbHRhKSk7CiAgICAgIGFscGhhID0gYWxwaGEucmVkQWRkKGFscGhhKS5yZWRJQWRkKGFscGhhKTsKICAgICAgLy8gWDMgPSBhbHBoYV4yIC0gOCAqIGJldGEKICAgICAgdmFyIGJldGE0ID0gYmV0YS5yZWRJQWRkKGJldGEpOwogICAgICBiZXRhNCA9IGJldGE0LnJlZElBZGQoYmV0YTQpOwogICAgICB2YXIgYmV0YTggPSBiZXRhNC5yZWRBZGQoYmV0YTQpOwogICAgICBueCA9IGFscGhhLnJlZFNxcigpLnJlZElTdWIoYmV0YTgpOwogICAgICAvLyBaMyA9IChZMSArIFoxKV4yIC0gZ2FtbWEgLSBkZWx0YQogICAgICBueiA9IHRoaXMueS5yZWRBZGQodGhpcy56KS5yZWRTcXIoKS5yZWRJU3ViKGdhbW1hKS5yZWRJU3ViKGRlbHRhKTsKICAgICAgLy8gWTMgPSBhbHBoYSAqICg0ICogYmV0YSAtIFgzKSAtIDggKiBnYW1tYV4yCiAgICAgIHZhciBnZ2FtbWE4ID0gZ2FtbWEucmVkU3FyKCk7CiAgICAgIGdnYW1tYTggPSBnZ2FtbWE4LnJlZElBZGQoZ2dhbW1hOCk7CiAgICAgIGdnYW1tYTggPSBnZ2FtbWE4LnJlZElBZGQoZ2dhbW1hOCk7CiAgICAgIGdnYW1tYTggPSBnZ2FtbWE4LnJlZElBZGQoZ2dhbW1hOCk7CiAgICAgIG55ID0gYWxwaGEucmVkTXVsKGJldGE0LnJlZElTdWIobngpKS5yZWRJU3ViKGdnYW1tYTgpOwogICAgfQoKICAgIHJldHVybiB0aGlzLmN1cnZlLmpwb2ludChueCwgbnksIG56KTsKICB9OwoKICBKUG9pbnQucHJvdG90eXBlLl9kYmwgPSBmdW5jdGlvbiBfZGJsKCkgewogICAgdmFyIGEgPSB0aGlzLmN1cnZlLmE7CgogICAgLy8gNE0gKyA2UyArIDEwQQogICAgdmFyIGp4ID0gdGhpcy54OwogICAgdmFyIGp5ID0gdGhpcy55OwogICAgdmFyIGp6ID0gdGhpcy56OwogICAgdmFyIGp6NCA9IGp6LnJlZFNxcigpLnJlZFNxcigpOwoKICAgIHZhciBqeDIgPSBqeC5yZWRTcXIoKTsKICAgIHZhciBqeTIgPSBqeS5yZWRTcXIoKTsKCiAgICB2YXIgYyA9IGp4Mi5yZWRBZGQoangyKS5yZWRJQWRkKGp4MikucmVkSUFkZChhLnJlZE11bChqejQpKTsKCiAgICB2YXIganhkNCA9IGp4LnJlZEFkZChqeCk7CiAgICBqeGQ0ID0ganhkNC5yZWRJQWRkKGp4ZDQpOwogICAgdmFyIHQxID0ganhkNC5yZWRNdWwoankyKTsKICAgIHZhciBueCA9IGMucmVkU3FyKCkucmVkSVN1Yih0MS5yZWRBZGQodDEpKTsKICAgIHZhciB0MiA9IHQxLnJlZElTdWIobngpOwoKICAgIHZhciBqeWQ4ID0gankyLnJlZFNxcigpOwogICAganlkOCA9IGp5ZDgucmVkSUFkZChqeWQ4KTsKICAgIGp5ZDggPSBqeWQ4LnJlZElBZGQoanlkOCk7CiAgICBqeWQ4ID0ganlkOC5yZWRJQWRkKGp5ZDgpOwogICAgdmFyIG55ID0gYy5yZWRNdWwodDIpLnJlZElTdWIoanlkOCk7CiAgICB2YXIgbnogPSBqeS5yZWRBZGQoankpLnJlZE11bChqeik7CgogICAgcmV0dXJuIHRoaXMuY3VydmUuanBvaW50KG54LCBueSwgbnopOwogIH07CgogIEpQb2ludC5wcm90b3R5cGUudHJwbCA9IGZ1bmN0aW9uIHRycGwoKSB7CiAgICBpZiAoIXRoaXMuY3VydmUuemVyb0EpCiAgICAgIHJldHVybiB0aGlzLmRibCgpLmFkZCh0aGlzKTsKCiAgICAvLyBoeXBlcmVsbGlwdGljLm9yZy9FRkQvZzFwL2F1dG8tc2hvcnR3LWphY29iaWFuLTAuaHRtbCN0cmlwbGluZy10cGwtMjAwNy1ibAogICAgLy8gNU0gKyAxMFMgKyAuLi4KCiAgICAvLyBYWCA9IFgxXjIKICAgIHZhciB4eCA9IHRoaXMueC5yZWRTcXIoKTsKICAgIC8vIFlZID0gWTFeMgogICAgdmFyIHl5ID0gdGhpcy55LnJlZFNxcigpOwogICAgLy8gWlogPSBaMV4yCiAgICB2YXIgenogPSB0aGlzLnoucmVkU3FyKCk7CiAgICAvLyBZWVlZID0gWVleMgogICAgdmFyIHl5eXkgPSB5eS5yZWRTcXIoKTsKICAgIC8vIE0gPSAzICogWFggKyBhICogWloyOyBhID0gMAogICAgdmFyIG0gPSB4eC5yZWRBZGQoeHgpLnJlZElBZGQoeHgpOwogICAgLy8gTU0gPSBNXjIKICAgIHZhciBtbSA9IG0ucmVkU3FyKCk7CiAgICAvLyBFID0gNiAqICgoWDEgKyBZWSleMiAtIFhYIC0gWVlZWSkgLSBNTQogICAgdmFyIGUgPSB0aGlzLngucmVkQWRkKHl5KS5yZWRTcXIoKS5yZWRJU3ViKHh4KS5yZWRJU3ViKHl5eXkpOwogICAgZSA9IGUucmVkSUFkZChlKTsKICAgIGUgPSBlLnJlZEFkZChlKS5yZWRJQWRkKGUpOwogICAgZSA9IGUucmVkSVN1YihtbSk7CiAgICAvLyBFRSA9IEVeMgogICAgdmFyIGVlID0gZS5yZWRTcXIoKTsKICAgIC8vIFQgPSAxNipZWVlZCiAgICB2YXIgdCA9IHl5eXkucmVkSUFkZCh5eXl5KTsKICAgIHQgPSB0LnJlZElBZGQodCk7CiAgICB0ID0gdC5yZWRJQWRkKHQpOwogICAgdCA9IHQucmVkSUFkZCh0KTsKICAgIC8vIFUgPSAoTSArIEUpXjIgLSBNTSAtIEVFIC0gVAogICAgdmFyIHUgPSBtLnJlZElBZGQoZSkucmVkU3FyKCkucmVkSVN1YihtbSkucmVkSVN1YihlZSkucmVkSVN1Yih0KTsKICAgIC8vIFgzID0gNCAqIChYMSAqIEVFIC0gNCAqIFlZICogVSkKICAgIHZhciB5eXU0ID0geXkucmVkTXVsKHUpOwogICAgeXl1NCA9IHl5dTQucmVkSUFkZCh5eXU0KTsKICAgIHl5dTQgPSB5eXU0LnJlZElBZGQoeXl1NCk7CiAgICB2YXIgbnggPSB0aGlzLngucmVkTXVsKGVlKS5yZWRJU3ViKHl5dTQpOwogICAgbnggPSBueC5yZWRJQWRkKG54KTsKICAgIG54ID0gbngucmVkSUFkZChueCk7CiAgICAvLyBZMyA9IDggKiBZMSAqIChVICogKFQgLSBVKSAtIEUgKiBFRSkKICAgIHZhciBueSA9IHRoaXMueS5yZWRNdWwodS5yZWRNdWwodC5yZWRJU3ViKHUpKS5yZWRJU3ViKGUucmVkTXVsKGVlKSkpOwogICAgbnkgPSBueS5yZWRJQWRkKG55KTsKICAgIG55ID0gbnkucmVkSUFkZChueSk7CiAgICBueSA9IG55LnJlZElBZGQobnkpOwogICAgLy8gWjMgPSAoWjEgKyBFKV4yIC0gWlogLSBFRQogICAgdmFyIG56ID0gdGhpcy56LnJlZEFkZChlKS5yZWRTcXIoKS5yZWRJU3ViKHp6KS5yZWRJU3ViKGVlKTsKCiAgICByZXR1cm4gdGhpcy5jdXJ2ZS5qcG9pbnQobngsIG55LCBueik7CiAgfTsKCiAgSlBvaW50LnByb3RvdHlwZS5tdWwgPSBmdW5jdGlvbiBtdWwoaywga2Jhc2UpIHsKICAgIGsgPSBuZXcgQk4kYihrLCBrYmFzZSk7CgogICAgcmV0dXJuIHRoaXMuY3VydmUuX3duYWZNdWwodGhpcywgayk7CiAgfTsKCiAgSlBvaW50LnByb3RvdHlwZS5lcSA9IGZ1bmN0aW9uIGVxKHApIHsKICAgIGlmIChwLnR5cGUgPT09ICdhZmZpbmUnKQogICAgICByZXR1cm4gdGhpcy5lcShwLnRvSigpKTsKCiAgICBpZiAodGhpcyA9PT0gcCkKICAgICAgcmV0dXJuIHRydWU7CgogICAgLy8geDEgKiB6Ml4yID09IHgyICogejFeMgogICAgdmFyIHoyID0gdGhpcy56LnJlZFNxcigpOwogICAgdmFyIHB6MiA9IHAuei5yZWRTcXIoKTsKICAgIGlmICh0aGlzLngucmVkTXVsKHB6MikucmVkSVN1YihwLngucmVkTXVsKHoyKSkuY21wbigwKSAhPT0gMCkKICAgICAgcmV0dXJuIGZhbHNlOwoKICAgIC8vIHkxICogejJeMyA9PSB5MiAqIHoxXjMKICAgIHZhciB6MyA9IHoyLnJlZE11bCh0aGlzLnopOwogICAgdmFyIHB6MyA9IHB6Mi5yZWRNdWwocC56KTsKICAgIHJldHVybiB0aGlzLnkucmVkTXVsKHB6MykucmVkSVN1YihwLnkucmVkTXVsKHozKSkuY21wbigwKSA9PT0gMDsKICB9OwoKICBKUG9pbnQucHJvdG90eXBlLmVxWFRvUCA9IGZ1bmN0aW9uIGVxWFRvUCh4KSB7CiAgICB2YXIgenMgPSB0aGlzLnoucmVkU3FyKCk7CiAgICB2YXIgcnggPSB4LnRvUmVkKHRoaXMuY3VydmUucmVkKS5yZWRNdWwoenMpOwogICAgaWYgKHRoaXMueC5jbXAocngpID09PSAwKQogICAgICByZXR1cm4gdHJ1ZTsKCiAgICB2YXIgeGMgPSB4LmNsb25lKCk7CiAgICB2YXIgdCA9IHRoaXMuY3VydmUucmVkTi5yZWRNdWwoenMpOwogICAgZm9yICg7OykgewogICAgICB4Yy5pYWRkKHRoaXMuY3VydmUubik7CiAgICAgIGlmICh4Yy5jbXAodGhpcy5jdXJ2ZS5wKSA+PSAwKQogICAgICAgIHJldHVybiBmYWxzZTsKCiAgICAgIHJ4LnJlZElBZGQodCk7CiAgICAgIGlmICh0aGlzLnguY21wKHJ4KSA9PT0gMCkKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICB9OwoKICBKUG9pbnQucHJvdG90eXBlLmluc3BlY3QgPSBmdW5jdGlvbiBpbnNwZWN0KCkgewogICAgaWYgKHRoaXMuaXNJbmZpbml0eSgpKQogICAgICByZXR1cm4gJzxFQyBKUG9pbnQgSW5maW5pdHk+JzsKICAgIHJldHVybiAnPEVDIEpQb2ludCB4OiAnICsgdGhpcy54LnRvU3RyaW5nKDE2LCAyKSArCiAgICAgICAgJyB5OiAnICsgdGhpcy55LnRvU3RyaW5nKDE2LCAyKSArCiAgICAgICAgJyB6OiAnICsgdGhpcy56LnRvU3RyaW5nKDE2LCAyKSArICc+JzsKICB9OwoKICBKUG9pbnQucHJvdG90eXBlLmlzSW5maW5pdHkgPSBmdW5jdGlvbiBpc0luZmluaXR5KCkgewogICAgLy8gWFhYIFRoaXMgY29kZSBhc3N1bWVzIHRoYXQgemVybyBpcyBhbHdheXMgemVybyBpbiByZWQKICAgIHJldHVybiB0aGlzLnouY21wbigwKSA9PT0gMDsKICB9OwoKICB2YXIgQk4kYSA9IGJuJDQuZXhwb3J0czsKICB2YXIgaW5oZXJpdHMkYiA9IGluaGVyaXRzJGQuZXhwb3J0czsKICB2YXIgQmFzZSQxID0gYmFzZSQxOwoKICB2YXIgdXRpbHMkaSA9IHV0aWxzJG07CgogIGZ1bmN0aW9uIE1vbnRDdXJ2ZShjb25mKSB7CiAgICBCYXNlJDEuY2FsbCh0aGlzLCAnbW9udCcsIGNvbmYpOwoKICAgIHRoaXMuYSA9IG5ldyBCTiRhKGNvbmYuYSwgMTYpLnRvUmVkKHRoaXMucmVkKTsKICAgIHRoaXMuYiA9IG5ldyBCTiRhKGNvbmYuYiwgMTYpLnRvUmVkKHRoaXMucmVkKTsKICAgIHRoaXMuaTQgPSBuZXcgQk4kYSg0KS50b1JlZCh0aGlzLnJlZCkucmVkSW52bSgpOwogICAgdGhpcy50d28gPSBuZXcgQk4kYSgyKS50b1JlZCh0aGlzLnJlZCk7CiAgICB0aGlzLmEyNCA9IHRoaXMuaTQucmVkTXVsKHRoaXMuYS5yZWRBZGQodGhpcy50d28pKTsKICB9CiAgaW5oZXJpdHMkYihNb250Q3VydmUsIEJhc2UkMSk7CiAgdmFyIG1vbnQgPSBNb250Q3VydmU7CgogIE1vbnRDdXJ2ZS5wcm90b3R5cGUudmFsaWRhdGUgPSBmdW5jdGlvbiB2YWxpZGF0ZShwb2ludCkgewogICAgdmFyIHggPSBwb2ludC5ub3JtYWxpemUoKS54OwogICAgdmFyIHgyID0geC5yZWRTcXIoKTsKICAgIHZhciByaHMgPSB4Mi5yZWRNdWwoeCkucmVkQWRkKHgyLnJlZE11bCh0aGlzLmEpKS5yZWRBZGQoeCk7CiAgICB2YXIgeSA9IHJocy5yZWRTcXJ0KCk7CgogICAgcmV0dXJuIHkucmVkU3FyKCkuY21wKHJocykgPT09IDA7CiAgfTsKCiAgZnVuY3Rpb24gUG9pbnQkMShjdXJ2ZSwgeCwgeikgewogICAgQmFzZSQxLkJhc2VQb2ludC5jYWxsKHRoaXMsIGN1cnZlLCAncHJvamVjdGl2ZScpOwogICAgaWYgKHggPT09IG51bGwgJiYgeiA9PT0gbnVsbCkgewogICAgICB0aGlzLnggPSB0aGlzLmN1cnZlLm9uZTsKICAgICAgdGhpcy56ID0gdGhpcy5jdXJ2ZS56ZXJvOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy54ID0gbmV3IEJOJGEoeCwgMTYpOwogICAgICB0aGlzLnogPSBuZXcgQk4kYSh6LCAxNik7CiAgICAgIGlmICghdGhpcy54LnJlZCkKICAgICAgICB0aGlzLnggPSB0aGlzLngudG9SZWQodGhpcy5jdXJ2ZS5yZWQpOwogICAgICBpZiAoIXRoaXMuei5yZWQpCiAgICAgICAgdGhpcy56ID0gdGhpcy56LnRvUmVkKHRoaXMuY3VydmUucmVkKTsKICAgIH0KICB9CiAgaW5oZXJpdHMkYihQb2ludCQxLCBCYXNlJDEuQmFzZVBvaW50KTsKCiAgTW9udEN1cnZlLnByb3RvdHlwZS5kZWNvZGVQb2ludCA9IGZ1bmN0aW9uIGRlY29kZVBvaW50KGJ5dGVzLCBlbmMpIHsKICAgIHJldHVybiB0aGlzLnBvaW50KHV0aWxzJGkudG9BcnJheShieXRlcywgZW5jKSwgMSk7CiAgfTsKCiAgTW9udEN1cnZlLnByb3RvdHlwZS5wb2ludCA9IGZ1bmN0aW9uIHBvaW50KHgsIHopIHsKICAgIHJldHVybiBuZXcgUG9pbnQkMSh0aGlzLCB4LCB6KTsKICB9OwoKICBNb250Q3VydmUucHJvdG90eXBlLnBvaW50RnJvbUpTT04gPSBmdW5jdGlvbiBwb2ludEZyb21KU09OKG9iaikgewogICAgcmV0dXJuIFBvaW50JDEuZnJvbUpTT04odGhpcywgb2JqKTsKICB9OwoKICBQb2ludCQxLnByb3RvdHlwZS5wcmVjb21wdXRlID0gZnVuY3Rpb24gcHJlY29tcHV0ZSgpIHsKICAgIC8vIE5vLW9wCiAgfTsKCiAgUG9pbnQkMS5wcm90b3R5cGUuX2VuY29kZSA9IGZ1bmN0aW9uIF9lbmNvZGUoKSB7CiAgICByZXR1cm4gdGhpcy5nZXRYKCkudG9BcnJheSgnYmUnLCB0aGlzLmN1cnZlLnAuYnl0ZUxlbmd0aCgpKTsKICB9OwoKICBQb2ludCQxLmZyb21KU09OID0gZnVuY3Rpb24gZnJvbUpTT04oY3VydmUsIG9iaikgewogICAgcmV0dXJuIG5ldyBQb2ludCQxKGN1cnZlLCBvYmpbMF0sIG9ialsxXSB8fCBjdXJ2ZS5vbmUpOwogIH07CgogIFBvaW50JDEucHJvdG90eXBlLmluc3BlY3QgPSBmdW5jdGlvbiBpbnNwZWN0KCkgewogICAgaWYgKHRoaXMuaXNJbmZpbml0eSgpKQogICAgICByZXR1cm4gJzxFQyBQb2ludCBJbmZpbml0eT4nOwogICAgcmV0dXJuICc8RUMgUG9pbnQgeDogJyArIHRoaXMueC5mcm9tUmVkKCkudG9TdHJpbmcoMTYsIDIpICsKICAgICAgICAnIHo6ICcgKyB0aGlzLnouZnJvbVJlZCgpLnRvU3RyaW5nKDE2LCAyKSArICc+JzsKICB9OwoKICBQb2ludCQxLnByb3RvdHlwZS5pc0luZmluaXR5ID0gZnVuY3Rpb24gaXNJbmZpbml0eSgpIHsKICAgIC8vIFhYWCBUaGlzIGNvZGUgYXNzdW1lcyB0aGF0IHplcm8gaXMgYWx3YXlzIHplcm8gaW4gcmVkCiAgICByZXR1cm4gdGhpcy56LmNtcG4oMCkgPT09IDA7CiAgfTsKCiAgUG9pbnQkMS5wcm90b3R5cGUuZGJsID0gZnVuY3Rpb24gZGJsKCkgewogICAgLy8gaHR0cDovL2h5cGVyZWxsaXB0aWMub3JnL0VGRC9nMXAvYXV0by1tb250Z29tLXh6Lmh0bWwjZG91YmxpbmctZGJsLTE5ODctbS0zCiAgICAvLyAyTSArIDJTICsgNEEKCiAgICAvLyBBID0gWDEgKyBaMQogICAgdmFyIGEgPSB0aGlzLngucmVkQWRkKHRoaXMueik7CiAgICAvLyBBQSA9IEFeMgogICAgdmFyIGFhID0gYS5yZWRTcXIoKTsKICAgIC8vIEIgPSBYMSAtIFoxCiAgICB2YXIgYiA9IHRoaXMueC5yZWRTdWIodGhpcy56KTsKICAgIC8vIEJCID0gQl4yCiAgICB2YXIgYmIgPSBiLnJlZFNxcigpOwogICAgLy8gQyA9IEFBIC0gQkIKICAgIHZhciBjID0gYWEucmVkU3ViKGJiKTsKICAgIC8vIFgzID0gQUEgKiBCQgogICAgdmFyIG54ID0gYWEucmVkTXVsKGJiKTsKICAgIC8vIFozID0gQyAqIChCQiArIEEyNCAqIEMpCiAgICB2YXIgbnogPSBjLnJlZE11bChiYi5yZWRBZGQodGhpcy5jdXJ2ZS5hMjQucmVkTXVsKGMpKSk7CiAgICByZXR1cm4gdGhpcy5jdXJ2ZS5wb2ludChueCwgbnopOwogIH07CgogIFBvaW50JDEucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIGFkZCgpIHsKICAgIHRocm93IG5ldyBFcnJvcignTm90IHN1cHBvcnRlZCBvbiBNb250Z29tZXJ5IGN1cnZlJyk7CiAgfTsKCiAgUG9pbnQkMS5wcm90b3R5cGUuZGlmZkFkZCA9IGZ1bmN0aW9uIGRpZmZBZGQocCwgZGlmZikgewogICAgLy8gaHR0cDovL2h5cGVyZWxsaXB0aWMub3JnL0VGRC9nMXAvYXV0by1tb250Z29tLXh6Lmh0bWwjZGlmZmFkZC1kYWRkLTE5ODctbS0zCiAgICAvLyA0TSArIDJTICsgNkEKCiAgICAvLyBBID0gWDIgKyBaMgogICAgdmFyIGEgPSB0aGlzLngucmVkQWRkKHRoaXMueik7CiAgICAvLyBCID0gWDIgLSBaMgogICAgdmFyIGIgPSB0aGlzLngucmVkU3ViKHRoaXMueik7CiAgICAvLyBDID0gWDMgKyBaMwogICAgdmFyIGMgPSBwLngucmVkQWRkKHAueik7CiAgICAvLyBEID0gWDMgLSBaMwogICAgdmFyIGQgPSBwLngucmVkU3ViKHAueik7CiAgICAvLyBEQSA9IEQgKiBBCiAgICB2YXIgZGEgPSBkLnJlZE11bChhKTsKICAgIC8vIENCID0gQyAqIEIKICAgIHZhciBjYiA9IGMucmVkTXVsKGIpOwogICAgLy8gWDUgPSBaMSAqIChEQSArIENCKV4yCiAgICB2YXIgbnggPSBkaWZmLnoucmVkTXVsKGRhLnJlZEFkZChjYikucmVkU3FyKCkpOwogICAgLy8gWjUgPSBYMSAqIChEQSAtIENCKV4yCiAgICB2YXIgbnogPSBkaWZmLngucmVkTXVsKGRhLnJlZElTdWIoY2IpLnJlZFNxcigpKTsKICAgIHJldHVybiB0aGlzLmN1cnZlLnBvaW50KG54LCBueik7CiAgfTsKCiAgUG9pbnQkMS5wcm90b3R5cGUubXVsID0gZnVuY3Rpb24gbXVsKGspIHsKICAgIHZhciB0ID0gay5jbG9uZSgpOwogICAgdmFyIGEgPSB0aGlzOyAvLyAoTiAvIDIpICogUSArIFEKICAgIHZhciBiID0gdGhpcy5jdXJ2ZS5wb2ludChudWxsLCBudWxsKTsgLy8gKE4gLyAyKSAqIFEKICAgIHZhciBjID0gdGhpczsgLy8gUQoKICAgIGZvciAodmFyIGJpdHMgPSBbXTsgdC5jbXBuKDApICE9PSAwOyB0Lml1c2hybigxKSkKICAgICAgYml0cy5wdXNoKHQuYW5kbG4oMSkpOwoKICAgIGZvciAodmFyIGkgPSBiaXRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICAgIGlmIChiaXRzW2ldID09PSAwKSB7CiAgICAgICAgLy8gTiAqIFEgKyBRID0gKChOIC8gMikgKiBRICsgUSkpICsgKE4gLyAyKSAqIFEKICAgICAgICBhID0gYS5kaWZmQWRkKGIsIGMpOwogICAgICAgIC8vIE4gKiBRID0gMiAqICgoTiAvIDIpICogUSArIFEpKQogICAgICAgIGIgPSBiLmRibCgpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIE4gKiBRID0gKChOIC8gMikgKiBRICsgUSkgKyAoKE4gLyAyKSAqIFEpCiAgICAgICAgYiA9IGEuZGlmZkFkZChiLCBjKTsKICAgICAgICAvLyBOICogUSArIFEgPSAyICogKChOIC8gMikgKiBRICsgUSkKICAgICAgICBhID0gYS5kYmwoKTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIGI7CiAgfTsKCiAgUG9pbnQkMS5wcm90b3R5cGUubXVsQWRkID0gZnVuY3Rpb24gbXVsQWRkKCkgewogICAgdGhyb3cgbmV3IEVycm9yKCdOb3Qgc3VwcG9ydGVkIG9uIE1vbnRnb21lcnkgY3VydmUnKTsKICB9OwoKICBQb2ludCQxLnByb3RvdHlwZS5qdW1sQWRkID0gZnVuY3Rpb24ganVtbEFkZCgpIHsKICAgIHRocm93IG5ldyBFcnJvcignTm90IHN1cHBvcnRlZCBvbiBNb250Z29tZXJ5IGN1cnZlJyk7CiAgfTsKCiAgUG9pbnQkMS5wcm90b3R5cGUuZXEgPSBmdW5jdGlvbiBlcShvdGhlcikgewogICAgcmV0dXJuIHRoaXMuZ2V0WCgpLmNtcChvdGhlci5nZXRYKCkpID09PSAwOwogIH07CgogIFBvaW50JDEucHJvdG90eXBlLm5vcm1hbGl6ZSA9IGZ1bmN0aW9uIG5vcm1hbGl6ZSgpIHsKICAgIHRoaXMueCA9IHRoaXMueC5yZWRNdWwodGhpcy56LnJlZEludm0oKSk7CiAgICB0aGlzLnogPSB0aGlzLmN1cnZlLm9uZTsKICAgIHJldHVybiB0aGlzOwogIH07CgogIFBvaW50JDEucHJvdG90eXBlLmdldFggPSBmdW5jdGlvbiBnZXRYKCkgewogICAgLy8gTm9ybWFsaXplIGNvb3JkaW5hdGVzCiAgICB0aGlzLm5vcm1hbGl6ZSgpOwoKICAgIHJldHVybiB0aGlzLnguZnJvbVJlZCgpOwogIH07CgogIHZhciB1dGlscyRoID0gdXRpbHMkbTsKICB2YXIgQk4kOSA9IGJuJDQuZXhwb3J0czsKICB2YXIgaW5oZXJpdHMkYSA9IGluaGVyaXRzJGQuZXhwb3J0czsKICB2YXIgQmFzZSA9IGJhc2UkMTsKCiAgdmFyIGFzc2VydCRkID0gdXRpbHMkaC5hc3NlcnQ7CgogIGZ1bmN0aW9uIEVkd2FyZHNDdXJ2ZShjb25mKSB7CiAgICAvLyBOT1RFOiBJbXBvcnRhbnQgYXMgd2UgYXJlIGNyZWF0aW5nIHBvaW50IGluIEJhc2UuY2FsbCgpCiAgICB0aGlzLnR3aXN0ZWQgPSAoY29uZi5hIHwgMCkgIT09IDE7CiAgICB0aGlzLm1PbmVBID0gdGhpcy50d2lzdGVkICYmIChjb25mLmEgfCAwKSA9PT0gLTE7CiAgICB0aGlzLmV4dGVuZGVkID0gdGhpcy5tT25lQTsKCiAgICBCYXNlLmNhbGwodGhpcywgJ2Vkd2FyZHMnLCBjb25mKTsKCiAgICB0aGlzLmEgPSBuZXcgQk4kOShjb25mLmEsIDE2KS51bW9kKHRoaXMucmVkLm0pOwogICAgdGhpcy5hID0gdGhpcy5hLnRvUmVkKHRoaXMucmVkKTsKICAgIHRoaXMuYyA9IG5ldyBCTiQ5KGNvbmYuYywgMTYpLnRvUmVkKHRoaXMucmVkKTsKICAgIHRoaXMuYzIgPSB0aGlzLmMucmVkU3FyKCk7CiAgICB0aGlzLmQgPSBuZXcgQk4kOShjb25mLmQsIDE2KS50b1JlZCh0aGlzLnJlZCk7CiAgICB0aGlzLmRkID0gdGhpcy5kLnJlZEFkZCh0aGlzLmQpOwoKICAgIGFzc2VydCRkKCF0aGlzLnR3aXN0ZWQgfHwgdGhpcy5jLmZyb21SZWQoKS5jbXBuKDEpID09PSAwKTsKICAgIHRoaXMub25lQyA9IChjb25mLmMgfCAwKSA9PT0gMTsKICB9CiAgaW5oZXJpdHMkYShFZHdhcmRzQ3VydmUsIEJhc2UpOwogIHZhciBlZHdhcmRzID0gRWR3YXJkc0N1cnZlOwoKICBFZHdhcmRzQ3VydmUucHJvdG90eXBlLl9tdWxBID0gZnVuY3Rpb24gX211bEEobnVtKSB7CiAgICBpZiAodGhpcy5tT25lQSkKICAgICAgcmV0dXJuIG51bS5yZWROZWcoKTsKICAgIGVsc2UKICAgICAgcmV0dXJuIHRoaXMuYS5yZWRNdWwobnVtKTsKICB9OwoKICBFZHdhcmRzQ3VydmUucHJvdG90eXBlLl9tdWxDID0gZnVuY3Rpb24gX211bEMobnVtKSB7CiAgICBpZiAodGhpcy5vbmVDKQogICAgICByZXR1cm4gbnVtOwogICAgZWxzZQogICAgICByZXR1cm4gdGhpcy5jLnJlZE11bChudW0pOwogIH07CgogIC8vIEp1c3QgZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBTaG9ydCBjdXJ2ZQogIEVkd2FyZHNDdXJ2ZS5wcm90b3R5cGUuanBvaW50ID0gZnVuY3Rpb24ganBvaW50KHgsIHksIHosIHQpIHsKICAgIHJldHVybiB0aGlzLnBvaW50KHgsIHksIHosIHQpOwogIH07CgogIEVkd2FyZHNDdXJ2ZS5wcm90b3R5cGUucG9pbnRGcm9tWCA9IGZ1bmN0aW9uIHBvaW50RnJvbVgoeCwgb2RkKSB7CiAgICB4ID0gbmV3IEJOJDkoeCwgMTYpOwogICAgaWYgKCF4LnJlZCkKICAgICAgeCA9IHgudG9SZWQodGhpcy5yZWQpOwoKICAgIHZhciB4MiA9IHgucmVkU3FyKCk7CiAgICB2YXIgcmhzID0gdGhpcy5jMi5yZWRTdWIodGhpcy5hLnJlZE11bCh4MikpOwogICAgdmFyIGxocyA9IHRoaXMub25lLnJlZFN1Yih0aGlzLmMyLnJlZE11bCh0aGlzLmQpLnJlZE11bCh4MikpOwoKICAgIHZhciB5MiA9IHJocy5yZWRNdWwobGhzLnJlZEludm0oKSk7CiAgICB2YXIgeSA9IHkyLnJlZFNxcnQoKTsKICAgIGlmICh5LnJlZFNxcigpLnJlZFN1Yih5MikuY21wKHRoaXMuemVybykgIT09IDApCiAgICAgIHRocm93IG5ldyBFcnJvcignaW52YWxpZCBwb2ludCcpOwoKICAgIHZhciBpc09kZCA9IHkuZnJvbVJlZCgpLmlzT2RkKCk7CiAgICBpZiAob2RkICYmICFpc09kZCB8fCAhb2RkICYmIGlzT2RkKQogICAgICB5ID0geS5yZWROZWcoKTsKCiAgICByZXR1cm4gdGhpcy5wb2ludCh4LCB5KTsKICB9OwoKICBFZHdhcmRzQ3VydmUucHJvdG90eXBlLnBvaW50RnJvbVkgPSBmdW5jdGlvbiBwb2ludEZyb21ZKHksIG9kZCkgewogICAgeSA9IG5ldyBCTiQ5KHksIDE2KTsKICAgIGlmICgheS5yZWQpCiAgICAgIHkgPSB5LnRvUmVkKHRoaXMucmVkKTsKCiAgICAvLyB4XjIgPSAoeV4yIC0gY14yKSAvIChjXjIgZCB5XjIgLSBhKQogICAgdmFyIHkyID0geS5yZWRTcXIoKTsKICAgIHZhciBsaHMgPSB5Mi5yZWRTdWIodGhpcy5jMik7CiAgICB2YXIgcmhzID0geTIucmVkTXVsKHRoaXMuZCkucmVkTXVsKHRoaXMuYzIpLnJlZFN1Yih0aGlzLmEpOwogICAgdmFyIHgyID0gbGhzLnJlZE11bChyaHMucmVkSW52bSgpKTsKCiAgICBpZiAoeDIuY21wKHRoaXMuemVybykgPT09IDApIHsKICAgICAgaWYgKG9kZCkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgcG9pbnQnKTsKICAgICAgZWxzZQogICAgICAgIHJldHVybiB0aGlzLnBvaW50KHRoaXMuemVybywgeSk7CiAgICB9CgogICAgdmFyIHggPSB4Mi5yZWRTcXJ0KCk7CiAgICBpZiAoeC5yZWRTcXIoKS5yZWRTdWIoeDIpLmNtcCh0aGlzLnplcm8pICE9PSAwKQogICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgcG9pbnQnKTsKCiAgICBpZiAoeC5mcm9tUmVkKCkuaXNPZGQoKSAhPT0gb2RkKQogICAgICB4ID0geC5yZWROZWcoKTsKCiAgICByZXR1cm4gdGhpcy5wb2ludCh4LCB5KTsKICB9OwoKICBFZHdhcmRzQ3VydmUucHJvdG90eXBlLnZhbGlkYXRlID0gZnVuY3Rpb24gdmFsaWRhdGUocG9pbnQpIHsKICAgIGlmIChwb2ludC5pc0luZmluaXR5KCkpCiAgICAgIHJldHVybiB0cnVlOwoKICAgIC8vIEN1cnZlOiBBICogWF4yICsgWV4yID0gQ14yICogKDEgKyBEICogWF4yICogWV4yKQogICAgcG9pbnQubm9ybWFsaXplKCk7CgogICAgdmFyIHgyID0gcG9pbnQueC5yZWRTcXIoKTsKICAgIHZhciB5MiA9IHBvaW50LnkucmVkU3FyKCk7CiAgICB2YXIgbGhzID0geDIucmVkTXVsKHRoaXMuYSkucmVkQWRkKHkyKTsKICAgIHZhciByaHMgPSB0aGlzLmMyLnJlZE11bCh0aGlzLm9uZS5yZWRBZGQodGhpcy5kLnJlZE11bCh4MikucmVkTXVsKHkyKSkpOwoKICAgIHJldHVybiBsaHMuY21wKHJocykgPT09IDA7CiAgfTsKCiAgZnVuY3Rpb24gUG9pbnQoY3VydmUsIHgsIHksIHosIHQpIHsKICAgIEJhc2UuQmFzZVBvaW50LmNhbGwodGhpcywgY3VydmUsICdwcm9qZWN0aXZlJyk7CiAgICBpZiAoeCA9PT0gbnVsbCAmJiB5ID09PSBudWxsICYmIHogPT09IG51bGwpIHsKICAgICAgdGhpcy54ID0gdGhpcy5jdXJ2ZS56ZXJvOwogICAgICB0aGlzLnkgPSB0aGlzLmN1cnZlLm9uZTsKICAgICAgdGhpcy56ID0gdGhpcy5jdXJ2ZS5vbmU7CiAgICAgIHRoaXMudCA9IHRoaXMuY3VydmUuemVybzsKICAgICAgdGhpcy56T25lID0gdHJ1ZTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMueCA9IG5ldyBCTiQ5KHgsIDE2KTsKICAgICAgdGhpcy55ID0gbmV3IEJOJDkoeSwgMTYpOwogICAgICB0aGlzLnogPSB6ID8gbmV3IEJOJDkoeiwgMTYpIDogdGhpcy5jdXJ2ZS5vbmU7CiAgICAgIHRoaXMudCA9IHQgJiYgbmV3IEJOJDkodCwgMTYpOwogICAgICBpZiAoIXRoaXMueC5yZWQpCiAgICAgICAgdGhpcy54ID0gdGhpcy54LnRvUmVkKHRoaXMuY3VydmUucmVkKTsKICAgICAgaWYgKCF0aGlzLnkucmVkKQogICAgICAgIHRoaXMueSA9IHRoaXMueS50b1JlZCh0aGlzLmN1cnZlLnJlZCk7CiAgICAgIGlmICghdGhpcy56LnJlZCkKICAgICAgICB0aGlzLnogPSB0aGlzLnoudG9SZWQodGhpcy5jdXJ2ZS5yZWQpOwogICAgICBpZiAodGhpcy50ICYmICF0aGlzLnQucmVkKQogICAgICAgIHRoaXMudCA9IHRoaXMudC50b1JlZCh0aGlzLmN1cnZlLnJlZCk7CiAgICAgIHRoaXMuek9uZSA9IHRoaXMueiA9PT0gdGhpcy5jdXJ2ZS5vbmU7CgogICAgICAvLyBVc2UgZXh0ZW5kZWQgY29vcmRpbmF0ZXMKICAgICAgaWYgKHRoaXMuY3VydmUuZXh0ZW5kZWQgJiYgIXRoaXMudCkgewogICAgICAgIHRoaXMudCA9IHRoaXMueC5yZWRNdWwodGhpcy55KTsKICAgICAgICBpZiAoIXRoaXMuek9uZSkKICAgICAgICAgIHRoaXMudCA9IHRoaXMudC5yZWRNdWwodGhpcy56LnJlZEludm0oKSk7CiAgICAgIH0KICAgIH0KICB9CiAgaW5oZXJpdHMkYShQb2ludCwgQmFzZS5CYXNlUG9pbnQpOwoKICBFZHdhcmRzQ3VydmUucHJvdG90eXBlLnBvaW50RnJvbUpTT04gPSBmdW5jdGlvbiBwb2ludEZyb21KU09OKG9iaikgewogICAgcmV0dXJuIFBvaW50LmZyb21KU09OKHRoaXMsIG9iaik7CiAgfTsKCiAgRWR3YXJkc0N1cnZlLnByb3RvdHlwZS5wb2ludCA9IGZ1bmN0aW9uIHBvaW50KHgsIHksIHosIHQpIHsKICAgIHJldHVybiBuZXcgUG9pbnQodGhpcywgeCwgeSwgeiwgdCk7CiAgfTsKCiAgUG9pbnQuZnJvbUpTT04gPSBmdW5jdGlvbiBmcm9tSlNPTihjdXJ2ZSwgb2JqKSB7CiAgICByZXR1cm4gbmV3IFBvaW50KGN1cnZlLCBvYmpbMF0sIG9ialsxXSwgb2JqWzJdKTsKICB9OwoKICBQb2ludC5wcm90b3R5cGUuaW5zcGVjdCA9IGZ1bmN0aW9uIGluc3BlY3QoKSB7CiAgICBpZiAodGhpcy5pc0luZmluaXR5KCkpCiAgICAgIHJldHVybiAnPEVDIFBvaW50IEluZmluaXR5Pic7CiAgICByZXR1cm4gJzxFQyBQb2ludCB4OiAnICsgdGhpcy54LmZyb21SZWQoKS50b1N0cmluZygxNiwgMikgKwogICAgICAgICcgeTogJyArIHRoaXMueS5mcm9tUmVkKCkudG9TdHJpbmcoMTYsIDIpICsKICAgICAgICAnIHo6ICcgKyB0aGlzLnouZnJvbVJlZCgpLnRvU3RyaW5nKDE2LCAyKSArICc+JzsKICB9OwoKICBQb2ludC5wcm90b3R5cGUuaXNJbmZpbml0eSA9IGZ1bmN0aW9uIGlzSW5maW5pdHkoKSB7CiAgICAvLyBYWFggVGhpcyBjb2RlIGFzc3VtZXMgdGhhdCB6ZXJvIGlzIGFsd2F5cyB6ZXJvIGluIHJlZAogICAgcmV0dXJuIHRoaXMueC5jbXBuKDApID09PSAwICYmCiAgICAgICh0aGlzLnkuY21wKHRoaXMueikgPT09IDAgfHwKICAgICAgKHRoaXMuek9uZSAmJiB0aGlzLnkuY21wKHRoaXMuY3VydmUuYykgPT09IDApKTsKICB9OwoKICBQb2ludC5wcm90b3R5cGUuX2V4dERibCA9IGZ1bmN0aW9uIF9leHREYmwoKSB7CiAgICAvLyBoeXBlcmVsbGlwdGljLm9yZy9FRkQvZzFwL2F1dG8tdHdpc3RlZC1leHRlbmRlZC0xLmh0bWwKICAgIC8vICAgICAjZG91YmxpbmctZGJsLTIwMDgtaHdjZAogICAgLy8gNE0gKyA0UwoKICAgIC8vIEEgPSBYMV4yCiAgICB2YXIgYSA9IHRoaXMueC5yZWRTcXIoKTsKICAgIC8vIEIgPSBZMV4yCiAgICB2YXIgYiA9IHRoaXMueS5yZWRTcXIoKTsKICAgIC8vIEMgPSAyICogWjFeMgogICAgdmFyIGMgPSB0aGlzLnoucmVkU3FyKCk7CiAgICBjID0gYy5yZWRJQWRkKGMpOwogICAgLy8gRCA9IGEgKiBBCiAgICB2YXIgZCA9IHRoaXMuY3VydmUuX211bEEoYSk7CiAgICAvLyBFID0gKFgxICsgWTEpXjIgLSBBIC0gQgogICAgdmFyIGUgPSB0aGlzLngucmVkQWRkKHRoaXMueSkucmVkU3FyKCkucmVkSVN1YihhKS5yZWRJU3ViKGIpOwogICAgLy8gRyA9IEQgKyBCCiAgICB2YXIgZyA9IGQucmVkQWRkKGIpOwogICAgLy8gRiA9IEcgLSBDCiAgICB2YXIgZiA9IGcucmVkU3ViKGMpOwogICAgLy8gSCA9IEQgLSBCCiAgICB2YXIgaCA9IGQucmVkU3ViKGIpOwogICAgLy8gWDMgPSBFICogRgogICAgdmFyIG54ID0gZS5yZWRNdWwoZik7CiAgICAvLyBZMyA9IEcgKiBICiAgICB2YXIgbnkgPSBnLnJlZE11bChoKTsKICAgIC8vIFQzID0gRSAqIEgKICAgIHZhciBudCA9IGUucmVkTXVsKGgpOwogICAgLy8gWjMgPSBGICogRwogICAgdmFyIG56ID0gZi5yZWRNdWwoZyk7CiAgICByZXR1cm4gdGhpcy5jdXJ2ZS5wb2ludChueCwgbnksIG56LCBudCk7CiAgfTsKCiAgUG9pbnQucHJvdG90eXBlLl9wcm9qRGJsID0gZnVuY3Rpb24gX3Byb2pEYmwoKSB7CiAgICAvLyBoeXBlcmVsbGlwdGljLm9yZy9FRkQvZzFwL2F1dG8tdHdpc3RlZC1wcm9qZWN0aXZlLmh0bWwKICAgIC8vICAgICAjZG91YmxpbmctZGJsLTIwMDgtYmJqbHAKICAgIC8vICAgICAjZG91YmxpbmctZGJsLTIwMDctYmwKICAgIC8vIGFuZCBvdGhlcnMKICAgIC8vIEdlbmVyYWxseSAzTSArIDRTIG9yIDJNICsgNFMKCiAgICAvLyBCID0gKFgxICsgWTEpXjIKICAgIHZhciBiID0gdGhpcy54LnJlZEFkZCh0aGlzLnkpLnJlZFNxcigpOwogICAgLy8gQyA9IFgxXjIKICAgIHZhciBjID0gdGhpcy54LnJlZFNxcigpOwogICAgLy8gRCA9IFkxXjIKICAgIHZhciBkID0gdGhpcy55LnJlZFNxcigpOwoKICAgIHZhciBueDsKICAgIHZhciBueTsKICAgIHZhciBuejsKICAgIHZhciBlOwogICAgdmFyIGg7CiAgICB2YXIgajsKICAgIGlmICh0aGlzLmN1cnZlLnR3aXN0ZWQpIHsKICAgICAgLy8gRSA9IGEgKiBDCiAgICAgIGUgPSB0aGlzLmN1cnZlLl9tdWxBKGMpOwogICAgICAvLyBGID0gRSArIEQKICAgICAgdmFyIGYgPSBlLnJlZEFkZChkKTsKICAgICAgaWYgKHRoaXMuek9uZSkgewogICAgICAgIC8vIFgzID0gKEIgLSBDIC0gRCkgKiAoRiAtIDIpCiAgICAgICAgbnggPSBiLnJlZFN1YihjKS5yZWRTdWIoZCkucmVkTXVsKGYucmVkU3ViKHRoaXMuY3VydmUudHdvKSk7CiAgICAgICAgLy8gWTMgPSBGICogKEUgLSBEKQogICAgICAgIG55ID0gZi5yZWRNdWwoZS5yZWRTdWIoZCkpOwogICAgICAgIC8vIFozID0gRl4yIC0gMiAqIEYKICAgICAgICBueiA9IGYucmVkU3FyKCkucmVkU3ViKGYpLnJlZFN1YihmKTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBIID0gWjFeMgogICAgICAgIGggPSB0aGlzLnoucmVkU3FyKCk7CiAgICAgICAgLy8gSiA9IEYgLSAyICogSAogICAgICAgIGogPSBmLnJlZFN1YihoKS5yZWRJU3ViKGgpOwogICAgICAgIC8vIFgzID0gKEItQy1EKSpKCiAgICAgICAgbnggPSBiLnJlZFN1YihjKS5yZWRJU3ViKGQpLnJlZE11bChqKTsKICAgICAgICAvLyBZMyA9IEYgKiAoRSAtIEQpCiAgICAgICAgbnkgPSBmLnJlZE11bChlLnJlZFN1YihkKSk7CiAgICAgICAgLy8gWjMgPSBGICogSgogICAgICAgIG56ID0gZi5yZWRNdWwoaik7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIC8vIEUgPSBDICsgRAogICAgICBlID0gYy5yZWRBZGQoZCk7CiAgICAgIC8vIEggPSAoYyAqIFoxKV4yCiAgICAgIGggPSB0aGlzLmN1cnZlLl9tdWxDKHRoaXMueikucmVkU3FyKCk7CiAgICAgIC8vIEogPSBFIC0gMiAqIEgKICAgICAgaiA9IGUucmVkU3ViKGgpLnJlZFN1YihoKTsKICAgICAgLy8gWDMgPSBjICogKEIgLSBFKSAqIEoKICAgICAgbnggPSB0aGlzLmN1cnZlLl9tdWxDKGIucmVkSVN1YihlKSkucmVkTXVsKGopOwogICAgICAvLyBZMyA9IGMgKiBFICogKEMgLSBEKQogICAgICBueSA9IHRoaXMuY3VydmUuX211bEMoZSkucmVkTXVsKGMucmVkSVN1YihkKSk7CiAgICAgIC8vIFozID0gRSAqIEoKICAgICAgbnogPSBlLnJlZE11bChqKTsKICAgIH0KICAgIHJldHVybiB0aGlzLmN1cnZlLnBvaW50KG54LCBueSwgbnopOwogIH07CgogIFBvaW50LnByb3RvdHlwZS5kYmwgPSBmdW5jdGlvbiBkYmwoKSB7CiAgICBpZiAodGhpcy5pc0luZmluaXR5KCkpCiAgICAgIHJldHVybiB0aGlzOwoKICAgIC8vIERvdWJsZSBpbiBleHRlbmRlZCBjb29yZGluYXRlcwogICAgaWYgKHRoaXMuY3VydmUuZXh0ZW5kZWQpCiAgICAgIHJldHVybiB0aGlzLl9leHREYmwoKTsKICAgIGVsc2UKICAgICAgcmV0dXJuIHRoaXMuX3Byb2pEYmwoKTsKICB9OwoKICBQb2ludC5wcm90b3R5cGUuX2V4dEFkZCA9IGZ1bmN0aW9uIF9leHRBZGQocCkgewogICAgLy8gaHlwZXJlbGxpcHRpYy5vcmcvRUZEL2cxcC9hdXRvLXR3aXN0ZWQtZXh0ZW5kZWQtMS5odG1sCiAgICAvLyAgICAgI2FkZGl0aW9uLWFkZC0yMDA4LWh3Y2QtMwogICAgLy8gOE0KCiAgICAvLyBBID0gKFkxIC0gWDEpICogKFkyIC0gWDIpCiAgICB2YXIgYSA9IHRoaXMueS5yZWRTdWIodGhpcy54KS5yZWRNdWwocC55LnJlZFN1YihwLngpKTsKICAgIC8vIEIgPSAoWTEgKyBYMSkgKiAoWTIgKyBYMikKICAgIHZhciBiID0gdGhpcy55LnJlZEFkZCh0aGlzLngpLnJlZE11bChwLnkucmVkQWRkKHAueCkpOwogICAgLy8gQyA9IFQxICogayAqIFQyCiAgICB2YXIgYyA9IHRoaXMudC5yZWRNdWwodGhpcy5jdXJ2ZS5kZCkucmVkTXVsKHAudCk7CiAgICAvLyBEID0gWjEgKiAyICogWjIKICAgIHZhciBkID0gdGhpcy56LnJlZE11bChwLnoucmVkQWRkKHAueikpOwogICAgLy8gRSA9IEIgLSBBCiAgICB2YXIgZSA9IGIucmVkU3ViKGEpOwogICAgLy8gRiA9IEQgLSBDCiAgICB2YXIgZiA9IGQucmVkU3ViKGMpOwogICAgLy8gRyA9IEQgKyBDCiAgICB2YXIgZyA9IGQucmVkQWRkKGMpOwogICAgLy8gSCA9IEIgKyBBCiAgICB2YXIgaCA9IGIucmVkQWRkKGEpOwogICAgLy8gWDMgPSBFICogRgogICAgdmFyIG54ID0gZS5yZWRNdWwoZik7CiAgICAvLyBZMyA9IEcgKiBICiAgICB2YXIgbnkgPSBnLnJlZE11bChoKTsKICAgIC8vIFQzID0gRSAqIEgKICAgIHZhciBudCA9IGUucmVkTXVsKGgpOwogICAgLy8gWjMgPSBGICogRwogICAgdmFyIG56ID0gZi5yZWRNdWwoZyk7CiAgICByZXR1cm4gdGhpcy5jdXJ2ZS5wb2ludChueCwgbnksIG56LCBudCk7CiAgfTsKCiAgUG9pbnQucHJvdG90eXBlLl9wcm9qQWRkID0gZnVuY3Rpb24gX3Byb2pBZGQocCkgewogICAgLy8gaHlwZXJlbGxpcHRpYy5vcmcvRUZEL2cxcC9hdXRvLXR3aXN0ZWQtcHJvamVjdGl2ZS5odG1sCiAgICAvLyAgICAgI2FkZGl0aW9uLWFkZC0yMDA4LWJiamxwCiAgICAvLyAgICAgI2FkZGl0aW9uLWFkZC0yMDA3LWJsCiAgICAvLyAxME0gKyAxUwoKICAgIC8vIEEgPSBaMSAqIFoyCiAgICB2YXIgYSA9IHRoaXMuei5yZWRNdWwocC56KTsKICAgIC8vIEIgPSBBXjIKICAgIHZhciBiID0gYS5yZWRTcXIoKTsKICAgIC8vIEMgPSBYMSAqIFgyCiAgICB2YXIgYyA9IHRoaXMueC5yZWRNdWwocC54KTsKICAgIC8vIEQgPSBZMSAqIFkyCiAgICB2YXIgZCA9IHRoaXMueS5yZWRNdWwocC55KTsKICAgIC8vIEUgPSBkICogQyAqIEQKICAgIHZhciBlID0gdGhpcy5jdXJ2ZS5kLnJlZE11bChjKS5yZWRNdWwoZCk7CiAgICAvLyBGID0gQiAtIEUKICAgIHZhciBmID0gYi5yZWRTdWIoZSk7CiAgICAvLyBHID0gQiArIEUKICAgIHZhciBnID0gYi5yZWRBZGQoZSk7CiAgICAvLyBYMyA9IEEgKiBGICogKChYMSArIFkxKSAqIChYMiArIFkyKSAtIEMgLSBEKQogICAgdmFyIHRtcCA9IHRoaXMueC5yZWRBZGQodGhpcy55KS5yZWRNdWwocC54LnJlZEFkZChwLnkpKS5yZWRJU3ViKGMpLnJlZElTdWIoZCk7CiAgICB2YXIgbnggPSBhLnJlZE11bChmKS5yZWRNdWwodG1wKTsKICAgIHZhciBueTsKICAgIHZhciBuejsKICAgIGlmICh0aGlzLmN1cnZlLnR3aXN0ZWQpIHsKICAgICAgLy8gWTMgPSBBICogRyAqIChEIC0gYSAqIEMpCiAgICAgIG55ID0gYS5yZWRNdWwoZykucmVkTXVsKGQucmVkU3ViKHRoaXMuY3VydmUuX211bEEoYykpKTsKICAgICAgLy8gWjMgPSBGICogRwogICAgICBueiA9IGYucmVkTXVsKGcpOwogICAgfSBlbHNlIHsKICAgICAgLy8gWTMgPSBBICogRyAqIChEIC0gQykKICAgICAgbnkgPSBhLnJlZE11bChnKS5yZWRNdWwoZC5yZWRTdWIoYykpOwogICAgICAvLyBaMyA9IGMgKiBGICogRwogICAgICBueiA9IHRoaXMuY3VydmUuX211bEMoZikucmVkTXVsKGcpOwogICAgfQogICAgcmV0dXJuIHRoaXMuY3VydmUucG9pbnQobngsIG55LCBueik7CiAgfTsKCiAgUG9pbnQucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIGFkZChwKSB7CiAgICBpZiAodGhpcy5pc0luZmluaXR5KCkpCiAgICAgIHJldHVybiBwOwogICAgaWYgKHAuaXNJbmZpbml0eSgpKQogICAgICByZXR1cm4gdGhpczsKCiAgICBpZiAodGhpcy5jdXJ2ZS5leHRlbmRlZCkKICAgICAgcmV0dXJuIHRoaXMuX2V4dEFkZChwKTsKICAgIGVsc2UKICAgICAgcmV0dXJuIHRoaXMuX3Byb2pBZGQocCk7CiAgfTsKCiAgUG9pbnQucHJvdG90eXBlLm11bCA9IGZ1bmN0aW9uIG11bChrKSB7CiAgICBpZiAodGhpcy5faGFzRG91YmxlcyhrKSkKICAgICAgcmV0dXJuIHRoaXMuY3VydmUuX2ZpeGVkTmFmTXVsKHRoaXMsIGspOwogICAgZWxzZQogICAgICByZXR1cm4gdGhpcy5jdXJ2ZS5fd25hZk11bCh0aGlzLCBrKTsKICB9OwoKICBQb2ludC5wcm90b3R5cGUubXVsQWRkID0gZnVuY3Rpb24gbXVsQWRkKGsxLCBwLCBrMikgewogICAgcmV0dXJuIHRoaXMuY3VydmUuX3duYWZNdWxBZGQoMSwgWyB0aGlzLCBwIF0sIFsgazEsIGsyIF0sIDIsIGZhbHNlKTsKICB9OwoKICBQb2ludC5wcm90b3R5cGUuam11bEFkZCA9IGZ1bmN0aW9uIGptdWxBZGQoazEsIHAsIGsyKSB7CiAgICByZXR1cm4gdGhpcy5jdXJ2ZS5fd25hZk11bEFkZCgxLCBbIHRoaXMsIHAgXSwgWyBrMSwgazIgXSwgMiwgdHJ1ZSk7CiAgfTsKCiAgUG9pbnQucHJvdG90eXBlLm5vcm1hbGl6ZSA9IGZ1bmN0aW9uIG5vcm1hbGl6ZSgpIHsKICAgIGlmICh0aGlzLnpPbmUpCiAgICAgIHJldHVybiB0aGlzOwoKICAgIC8vIE5vcm1hbGl6ZSBjb29yZGluYXRlcwogICAgdmFyIHppID0gdGhpcy56LnJlZEludm0oKTsKICAgIHRoaXMueCA9IHRoaXMueC5yZWRNdWwoemkpOwogICAgdGhpcy55ID0gdGhpcy55LnJlZE11bCh6aSk7CiAgICBpZiAodGhpcy50KQogICAgICB0aGlzLnQgPSB0aGlzLnQucmVkTXVsKHppKTsKICAgIHRoaXMueiA9IHRoaXMuY3VydmUub25lOwogICAgdGhpcy56T25lID0gdHJ1ZTsKICAgIHJldHVybiB0aGlzOwogIH07CgogIFBvaW50LnByb3RvdHlwZS5uZWcgPSBmdW5jdGlvbiBuZWcoKSB7CiAgICByZXR1cm4gdGhpcy5jdXJ2ZS5wb2ludCh0aGlzLngucmVkTmVnKCksCiAgICAgIHRoaXMueSwKICAgICAgdGhpcy56LAogICAgICB0aGlzLnQgJiYgdGhpcy50LnJlZE5lZygpKTsKICB9OwoKICBQb2ludC5wcm90b3R5cGUuZ2V0WCA9IGZ1bmN0aW9uIGdldFgoKSB7CiAgICB0aGlzLm5vcm1hbGl6ZSgpOwogICAgcmV0dXJuIHRoaXMueC5mcm9tUmVkKCk7CiAgfTsKCiAgUG9pbnQucHJvdG90eXBlLmdldFkgPSBmdW5jdGlvbiBnZXRZKCkgewogICAgdGhpcy5ub3JtYWxpemUoKTsKICAgIHJldHVybiB0aGlzLnkuZnJvbVJlZCgpOwogIH07CgogIFBvaW50LnByb3RvdHlwZS5lcSA9IGZ1bmN0aW9uIGVxKG90aGVyKSB7CiAgICByZXR1cm4gdGhpcyA9PT0gb3RoZXIgfHwKICAgICAgICAgICB0aGlzLmdldFgoKS5jbXAob3RoZXIuZ2V0WCgpKSA9PT0gMCAmJgogICAgICAgICAgIHRoaXMuZ2V0WSgpLmNtcChvdGhlci5nZXRZKCkpID09PSAwOwogIH07CgogIFBvaW50LnByb3RvdHlwZS5lcVhUb1AgPSBmdW5jdGlvbiBlcVhUb1AoeCkgewogICAgdmFyIHJ4ID0geC50b1JlZCh0aGlzLmN1cnZlLnJlZCkucmVkTXVsKHRoaXMueik7CiAgICBpZiAodGhpcy54LmNtcChyeCkgPT09IDApCiAgICAgIHJldHVybiB0cnVlOwoKICAgIHZhciB4YyA9IHguY2xvbmUoKTsKICAgIHZhciB0ID0gdGhpcy5jdXJ2ZS5yZWROLnJlZE11bCh0aGlzLnopOwogICAgZm9yICg7OykgewogICAgICB4Yy5pYWRkKHRoaXMuY3VydmUubik7CiAgICAgIGlmICh4Yy5jbXAodGhpcy5jdXJ2ZS5wKSA+PSAwKQogICAgICAgIHJldHVybiBmYWxzZTsKCiAgICAgIHJ4LnJlZElBZGQodCk7CiAgICAgIGlmICh0aGlzLnguY21wKHJ4KSA9PT0gMCkKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICB9OwoKICAvLyBDb21wYXRpYmlsaXR5IHdpdGggQmFzZUN1cnZlCiAgUG9pbnQucHJvdG90eXBlLnRvUCA9IFBvaW50LnByb3RvdHlwZS5ub3JtYWxpemU7CiAgUG9pbnQucHJvdG90eXBlLm1peGVkQWRkID0gUG9pbnQucHJvdG90eXBlLmFkZDsKCiAgKGZ1bmN0aW9uIChleHBvcnRzKSB7CgogIHZhciBjdXJ2ZSA9IGV4cG9ydHM7CgogIGN1cnZlLmJhc2UgPSBiYXNlJDE7CiAgY3VydmUuc2hvcnQgPSBzaG9ydDsKICBjdXJ2ZS5tb250ID0gbW9udDsKICBjdXJ2ZS5lZHdhcmRzID0gZWR3YXJkczsKICB9KGN1cnZlKSk7CgogIHZhciBjdXJ2ZXMkMiA9IHt9OwoKICB2YXIgaGFzaCQyID0ge307CgogIHZhciB1dGlscyRnID0ge307CgogIHZhciBhc3NlcnQkYyA9IG1pbmltYWxpc3RpY0Fzc2VydDsKICB2YXIgaW5oZXJpdHMkOSA9IGluaGVyaXRzJGQuZXhwb3J0czsKCiAgdXRpbHMkZy5pbmhlcml0cyA9IGluaGVyaXRzJDk7CgogIGZ1bmN0aW9uIGlzU3Vycm9nYXRlUGFpcihtc2csIGkpIHsKICAgIGlmICgobXNnLmNoYXJDb2RlQXQoaSkgJiAweEZDMDApICE9PSAweEQ4MDApIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgaWYgKGkgPCAwIHx8IGkgKyAxID49IG1zZy5sZW5ndGgpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgcmV0dXJuIChtc2cuY2hhckNvZGVBdChpICsgMSkgJiAweEZDMDApID09PSAweERDMDA7CiAgfQoKICBmdW5jdGlvbiB0b0FycmF5KG1zZywgZW5jKSB7CiAgICBpZiAoQXJyYXkuaXNBcnJheShtc2cpKQogICAgICByZXR1cm4gbXNnLnNsaWNlKCk7CiAgICBpZiAoIW1zZykKICAgICAgcmV0dXJuIFtdOwogICAgdmFyIHJlcyA9IFtdOwogICAgaWYgKHR5cGVvZiBtc2cgPT09ICdzdHJpbmcnKSB7CiAgICAgIGlmICghZW5jKSB7CiAgICAgICAgLy8gSW5zcGlyZWQgYnkgc3RyaW5nVG9VdGY4Qnl0ZUFycmF5KCkgaW4gY2xvc3VyZS1saWJyYXJ5IGJ5IEdvb2dsZQogICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGUvY2xvc3VyZS1saWJyYXJ5L2Jsb2IvODU5OGQ4NzI0MmFmNTlhYWMyMzMyNzA3NDJjODk4NGUyYjJiZGJlMC9jbG9zdXJlL2dvb2cvY3J5cHQvY3J5cHQuanMjTDExNy1MMTQzCiAgICAgICAgLy8gQXBhY2hlIExpY2Vuc2UgMi4wCiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZS9jbG9zdXJlLWxpYnJhcnkvYmxvYi9tYXN0ZXIvTElDRU5TRQogICAgICAgIHZhciBwID0gMDsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1zZy5sZW5ndGg7IGkrKykgewogICAgICAgICAgdmFyIGMgPSBtc2cuY2hhckNvZGVBdChpKTsKICAgICAgICAgIGlmIChjIDwgMTI4KSB7CiAgICAgICAgICAgIHJlc1twKytdID0gYzsKICAgICAgICAgIH0gZWxzZSBpZiAoYyA8IDIwNDgpIHsKICAgICAgICAgICAgcmVzW3ArK10gPSAoYyA+PiA2KSB8IDE5MjsKICAgICAgICAgICAgcmVzW3ArK10gPSAoYyAmIDYzKSB8IDEyODsKICAgICAgICAgIH0gZWxzZSBpZiAoaXNTdXJyb2dhdGVQYWlyKG1zZywgaSkpIHsKICAgICAgICAgICAgYyA9IDB4MTAwMDAgKyAoKGMgJiAweDAzRkYpIDw8IDEwKSArIChtc2cuY2hhckNvZGVBdCgrK2kpICYgMHgwM0ZGKTsKICAgICAgICAgICAgcmVzW3ArK10gPSAoYyA+PiAxOCkgfCAyNDA7CiAgICAgICAgICAgIHJlc1twKytdID0gKChjID4+IDEyKSAmIDYzKSB8IDEyODsKICAgICAgICAgICAgcmVzW3ArK10gPSAoKGMgPj4gNikgJiA2MykgfCAxMjg7CiAgICAgICAgICAgIHJlc1twKytdID0gKGMgJiA2MykgfCAxMjg7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXNbcCsrXSA9IChjID4+IDEyKSB8IDIyNDsKICAgICAgICAgICAgcmVzW3ArK10gPSAoKGMgPj4gNikgJiA2MykgfCAxMjg7CiAgICAgICAgICAgIHJlc1twKytdID0gKGMgJiA2MykgfCAxMjg7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKGVuYyA9PT0gJ2hleCcpIHsKICAgICAgICBtc2cgPSBtc2cucmVwbGFjZSgvW15hLXowLTldKy9pZywgJycpOwogICAgICAgIGlmIChtc2cubGVuZ3RoICUgMiAhPT0gMCkKICAgICAgICAgIG1zZyA9ICcwJyArIG1zZzsKICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbXNnLmxlbmd0aDsgaSArPSAyKQogICAgICAgICAgcmVzLnB1c2gocGFyc2VJbnQobXNnW2ldICsgbXNnW2kgKyAxXSwgMTYpKTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgZm9yIChpID0gMDsgaSA8IG1zZy5sZW5ndGg7IGkrKykKICAgICAgICByZXNbaV0gPSBtc2dbaV0gfCAwOwogICAgfQogICAgcmV0dXJuIHJlczsKICB9CiAgdXRpbHMkZy50b0FycmF5ID0gdG9BcnJheTsKCiAgZnVuY3Rpb24gdG9IZXgobXNnKSB7CiAgICB2YXIgcmVzID0gJyc7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1zZy5sZW5ndGg7IGkrKykKICAgICAgcmVzICs9IHplcm8yKG1zZ1tpXS50b1N0cmluZygxNikpOwogICAgcmV0dXJuIHJlczsKICB9CiAgdXRpbHMkZy50b0hleCA9IHRvSGV4OwoKICBmdW5jdGlvbiBodG9ubCh3KSB7CiAgICB2YXIgcmVzID0gKHcgPj4+IDI0KSB8CiAgICAgICAgICAgICAgKCh3ID4+PiA4KSAmIDB4ZmYwMCkgfAogICAgICAgICAgICAgICgodyA8PCA4KSAmIDB4ZmYwMDAwKSB8CiAgICAgICAgICAgICAgKCh3ICYgMHhmZikgPDwgMjQpOwogICAgcmV0dXJuIHJlcyA+Pj4gMDsKICB9CiAgdXRpbHMkZy5odG9ubCA9IGh0b25sOwoKICBmdW5jdGlvbiB0b0hleDMyKG1zZywgZW5kaWFuKSB7CiAgICB2YXIgcmVzID0gJyc7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1zZy5sZW5ndGg7IGkrKykgewogICAgICB2YXIgdyA9IG1zZ1tpXTsKICAgICAgaWYgKGVuZGlhbiA9PT0gJ2xpdHRsZScpCiAgICAgICAgdyA9IGh0b25sKHcpOwogICAgICByZXMgKz0gemVybzgody50b1N0cmluZygxNikpOwogICAgfQogICAgcmV0dXJuIHJlczsKICB9CiAgdXRpbHMkZy50b0hleDMyID0gdG9IZXgzMjsKCiAgZnVuY3Rpb24gemVybzIod29yZCkgewogICAgaWYgKHdvcmQubGVuZ3RoID09PSAxKQogICAgICByZXR1cm4gJzAnICsgd29yZDsKICAgIGVsc2UKICAgICAgcmV0dXJuIHdvcmQ7CiAgfQogIHV0aWxzJGcuemVybzIgPSB6ZXJvMjsKCiAgZnVuY3Rpb24gemVybzgod29yZCkgewogICAgaWYgKHdvcmQubGVuZ3RoID09PSA3KQogICAgICByZXR1cm4gJzAnICsgd29yZDsKICAgIGVsc2UgaWYgKHdvcmQubGVuZ3RoID09PSA2KQogICAgICByZXR1cm4gJzAwJyArIHdvcmQ7CiAgICBlbHNlIGlmICh3b3JkLmxlbmd0aCA9PT0gNSkKICAgICAgcmV0dXJuICcwMDAnICsgd29yZDsKICAgIGVsc2UgaWYgKHdvcmQubGVuZ3RoID09PSA0KQogICAgICByZXR1cm4gJzAwMDAnICsgd29yZDsKICAgIGVsc2UgaWYgKHdvcmQubGVuZ3RoID09PSAzKQogICAgICByZXR1cm4gJzAwMDAwJyArIHdvcmQ7CiAgICBlbHNlIGlmICh3b3JkLmxlbmd0aCA9PT0gMikKICAgICAgcmV0dXJuICcwMDAwMDAnICsgd29yZDsKICAgIGVsc2UgaWYgKHdvcmQubGVuZ3RoID09PSAxKQogICAgICByZXR1cm4gJzAwMDAwMDAnICsgd29yZDsKICAgIGVsc2UKICAgICAgcmV0dXJuIHdvcmQ7CiAgfQogIHV0aWxzJGcuemVybzggPSB6ZXJvODsKCiAgZnVuY3Rpb24gam9pbjMyKG1zZywgc3RhcnQsIGVuZCwgZW5kaWFuKSB7CiAgICB2YXIgbGVuID0gZW5kIC0gc3RhcnQ7CiAgICBhc3NlcnQkYyhsZW4gJSA0ID09PSAwKTsKICAgIHZhciByZXMgPSBuZXcgQXJyYXkobGVuIC8gNCk7CiAgICBmb3IgKHZhciBpID0gMCwgayA9IHN0YXJ0OyBpIDwgcmVzLmxlbmd0aDsgaSsrLCBrICs9IDQpIHsKICAgICAgdmFyIHc7CiAgICAgIGlmIChlbmRpYW4gPT09ICdiaWcnKQogICAgICAgIHcgPSAobXNnW2tdIDw8IDI0KSB8IChtc2dbayArIDFdIDw8IDE2KSB8IChtc2dbayArIDJdIDw8IDgpIHwgbXNnW2sgKyAzXTsKICAgICAgZWxzZQogICAgICAgIHcgPSAobXNnW2sgKyAzXSA8PCAyNCkgfCAobXNnW2sgKyAyXSA8PCAxNikgfCAobXNnW2sgKyAxXSA8PCA4KSB8IG1zZ1trXTsKICAgICAgcmVzW2ldID0gdyA+Pj4gMDsKICAgIH0KICAgIHJldHVybiByZXM7CiAgfQogIHV0aWxzJGcuam9pbjMyID0gam9pbjMyOwoKICBmdW5jdGlvbiBzcGxpdDMyKG1zZywgZW5kaWFuKSB7CiAgICB2YXIgcmVzID0gbmV3IEFycmF5KG1zZy5sZW5ndGggKiA0KTsKICAgIGZvciAodmFyIGkgPSAwLCBrID0gMDsgaSA8IG1zZy5sZW5ndGg7IGkrKywgayArPSA0KSB7CiAgICAgIHZhciBtID0gbXNnW2ldOwogICAgICBpZiAoZW5kaWFuID09PSAnYmlnJykgewogICAgICAgIHJlc1trXSA9IG0gPj4+IDI0OwogICAgICAgIHJlc1trICsgMV0gPSAobSA+Pj4gMTYpICYgMHhmZjsKICAgICAgICByZXNbayArIDJdID0gKG0gPj4+IDgpICYgMHhmZjsKICAgICAgICByZXNbayArIDNdID0gbSAmIDB4ZmY7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmVzW2sgKyAzXSA9IG0gPj4+IDI0OwogICAgICAgIHJlc1trICsgMl0gPSAobSA+Pj4gMTYpICYgMHhmZjsKICAgICAgICByZXNbayArIDFdID0gKG0gPj4+IDgpICYgMHhmZjsKICAgICAgICByZXNba10gPSBtICYgMHhmZjsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHJlczsKICB9CiAgdXRpbHMkZy5zcGxpdDMyID0gc3BsaXQzMjsKCiAgZnVuY3Rpb24gcm90cjMyJDEodywgYikgewogICAgcmV0dXJuICh3ID4+PiBiKSB8ICh3IDw8ICgzMiAtIGIpKTsKICB9CiAgdXRpbHMkZy5yb3RyMzIgPSByb3RyMzIkMTsKCiAgZnVuY3Rpb24gcm90bDMyJDIodywgYikgewogICAgcmV0dXJuICh3IDw8IGIpIHwgKHcgPj4+ICgzMiAtIGIpKTsKICB9CiAgdXRpbHMkZy5yb3RsMzIgPSByb3RsMzIkMjsKCiAgZnVuY3Rpb24gc3VtMzIkMyhhLCBiKSB7CiAgICByZXR1cm4gKGEgKyBiKSA+Pj4gMDsKICB9CiAgdXRpbHMkZy5zdW0zMiA9IHN1bTMyJDM7CgogIGZ1bmN0aW9uIHN1bTMyXzMkMShhLCBiLCBjKSB7CiAgICByZXR1cm4gKGEgKyBiICsgYykgPj4+IDA7CiAgfQogIHV0aWxzJGcuc3VtMzJfMyA9IHN1bTMyXzMkMTsKCiAgZnVuY3Rpb24gc3VtMzJfNCQyKGEsIGIsIGMsIGQpIHsKICAgIHJldHVybiAoYSArIGIgKyBjICsgZCkgPj4+IDA7CiAgfQogIHV0aWxzJGcuc3VtMzJfNCA9IHN1bTMyXzQkMjsKCiAgZnVuY3Rpb24gc3VtMzJfNSQyKGEsIGIsIGMsIGQsIGUpIHsKICAgIHJldHVybiAoYSArIGIgKyBjICsgZCArIGUpID4+PiAwOwogIH0KICB1dGlscyRnLnN1bTMyXzUgPSBzdW0zMl81JDI7CgogIGZ1bmN0aW9uIHN1bTY0JDEoYnVmLCBwb3MsIGFoLCBhbCkgewogICAgdmFyIGJoID0gYnVmW3Bvc107CiAgICB2YXIgYmwgPSBidWZbcG9zICsgMV07CgogICAgdmFyIGxvID0gKGFsICsgYmwpID4+PiAwOwogICAgdmFyIGhpID0gKGxvIDwgYWwgPyAxIDogMCkgKyBhaCArIGJoOwogICAgYnVmW3Bvc10gPSBoaSA+Pj4gMDsKICAgIGJ1Zltwb3MgKyAxXSA9IGxvOwogIH0KICB1dGlscyRnLnN1bTY0ID0gc3VtNjQkMTsKCiAgZnVuY3Rpb24gc3VtNjRfaGkkMShhaCwgYWwsIGJoLCBibCkgewogICAgdmFyIGxvID0gKGFsICsgYmwpID4+PiAwOwogICAgdmFyIGhpID0gKGxvIDwgYWwgPyAxIDogMCkgKyBhaCArIGJoOwogICAgcmV0dXJuIGhpID4+PiAwOwogIH0KICB1dGlscyRnLnN1bTY0X2hpID0gc3VtNjRfaGkkMTsKCiAgZnVuY3Rpb24gc3VtNjRfbG8kMShhaCwgYWwsIGJoLCBibCkgewogICAgdmFyIGxvID0gYWwgKyBibDsKICAgIHJldHVybiBsbyA+Pj4gMDsKICB9CiAgdXRpbHMkZy5zdW02NF9sbyA9IHN1bTY0X2xvJDE7CgogIGZ1bmN0aW9uIHN1bTY0XzRfaGkkMShhaCwgYWwsIGJoLCBibCwgY2gsIGNsLCBkaCwgZGwpIHsKICAgIHZhciBjYXJyeSA9IDA7CiAgICB2YXIgbG8gPSBhbDsKICAgIGxvID0gKGxvICsgYmwpID4+PiAwOwogICAgY2FycnkgKz0gbG8gPCBhbCA/IDEgOiAwOwogICAgbG8gPSAobG8gKyBjbCkgPj4+IDA7CiAgICBjYXJyeSArPSBsbyA8IGNsID8gMSA6IDA7CiAgICBsbyA9IChsbyArIGRsKSA+Pj4gMDsKICAgIGNhcnJ5ICs9IGxvIDwgZGwgPyAxIDogMDsKCiAgICB2YXIgaGkgPSBhaCArIGJoICsgY2ggKyBkaCArIGNhcnJ5OwogICAgcmV0dXJuIGhpID4+PiAwOwogIH0KICB1dGlscyRnLnN1bTY0XzRfaGkgPSBzdW02NF80X2hpJDE7CgogIGZ1bmN0aW9uIHN1bTY0XzRfbG8kMShhaCwgYWwsIGJoLCBibCwgY2gsIGNsLCBkaCwgZGwpIHsKICAgIHZhciBsbyA9IGFsICsgYmwgKyBjbCArIGRsOwogICAgcmV0dXJuIGxvID4+PiAwOwogIH0KICB1dGlscyRnLnN1bTY0XzRfbG8gPSBzdW02NF80X2xvJDE7CgogIGZ1bmN0aW9uIHN1bTY0XzVfaGkkMShhaCwgYWwsIGJoLCBibCwgY2gsIGNsLCBkaCwgZGwsIGVoLCBlbCkgewogICAgdmFyIGNhcnJ5ID0gMDsKICAgIHZhciBsbyA9IGFsOwogICAgbG8gPSAobG8gKyBibCkgPj4+IDA7CiAgICBjYXJyeSArPSBsbyA8IGFsID8gMSA6IDA7CiAgICBsbyA9IChsbyArIGNsKSA+Pj4gMDsKICAgIGNhcnJ5ICs9IGxvIDwgY2wgPyAxIDogMDsKICAgIGxvID0gKGxvICsgZGwpID4+PiAwOwogICAgY2FycnkgKz0gbG8gPCBkbCA/IDEgOiAwOwogICAgbG8gPSAobG8gKyBlbCkgPj4+IDA7CiAgICBjYXJyeSArPSBsbyA8IGVsID8gMSA6IDA7CgogICAgdmFyIGhpID0gYWggKyBiaCArIGNoICsgZGggKyBlaCArIGNhcnJ5OwogICAgcmV0dXJuIGhpID4+PiAwOwogIH0KICB1dGlscyRnLnN1bTY0XzVfaGkgPSBzdW02NF81X2hpJDE7CgogIGZ1bmN0aW9uIHN1bTY0XzVfbG8kMShhaCwgYWwsIGJoLCBibCwgY2gsIGNsLCBkaCwgZGwsIGVoLCBlbCkgewogICAgdmFyIGxvID0gYWwgKyBibCArIGNsICsgZGwgKyBlbDsKCiAgICByZXR1cm4gbG8gPj4+IDA7CiAgfQogIHV0aWxzJGcuc3VtNjRfNV9sbyA9IHN1bTY0XzVfbG8kMTsKCiAgZnVuY3Rpb24gcm90cjY0X2hpJDEoYWgsIGFsLCBudW0pIHsKICAgIHZhciByID0gKGFsIDw8ICgzMiAtIG51bSkpIHwgKGFoID4+PiBudW0pOwogICAgcmV0dXJuIHIgPj4+IDA7CiAgfQogIHV0aWxzJGcucm90cjY0X2hpID0gcm90cjY0X2hpJDE7CgogIGZ1bmN0aW9uIHJvdHI2NF9sbyQxKGFoLCBhbCwgbnVtKSB7CiAgICB2YXIgciA9IChhaCA8PCAoMzIgLSBudW0pKSB8IChhbCA+Pj4gbnVtKTsKICAgIHJldHVybiByID4+PiAwOwogIH0KICB1dGlscyRnLnJvdHI2NF9sbyA9IHJvdHI2NF9sbyQxOwoKICBmdW5jdGlvbiBzaHI2NF9oaSQxKGFoLCBhbCwgbnVtKSB7CiAgICByZXR1cm4gYWggPj4+IG51bTsKICB9CiAgdXRpbHMkZy5zaHI2NF9oaSA9IHNocjY0X2hpJDE7CgogIGZ1bmN0aW9uIHNocjY0X2xvJDEoYWgsIGFsLCBudW0pIHsKICAgIHZhciByID0gKGFoIDw8ICgzMiAtIG51bSkpIHwgKGFsID4+PiBudW0pOwogICAgcmV0dXJuIHIgPj4+IDA7CiAgfQogIHV0aWxzJGcuc2hyNjRfbG8gPSBzaHI2NF9sbyQxOwoKICB2YXIgY29tbW9uJDUgPSB7fTsKCiAgdmFyIHV0aWxzJGYgPSB1dGlscyRnOwogIHZhciBhc3NlcnQkYiA9IG1pbmltYWxpc3RpY0Fzc2VydDsKCiAgZnVuY3Rpb24gQmxvY2tIYXNoJDQoKSB7CiAgICB0aGlzLnBlbmRpbmcgPSBudWxsOwogICAgdGhpcy5wZW5kaW5nVG90YWwgPSAwOwogICAgdGhpcy5ibG9ja1NpemUgPSB0aGlzLmNvbnN0cnVjdG9yLmJsb2NrU2l6ZTsKICAgIHRoaXMub3V0U2l6ZSA9IHRoaXMuY29uc3RydWN0b3Iub3V0U2l6ZTsKICAgIHRoaXMuaG1hY1N0cmVuZ3RoID0gdGhpcy5jb25zdHJ1Y3Rvci5obWFjU3RyZW5ndGg7CiAgICB0aGlzLnBhZExlbmd0aCA9IHRoaXMuY29uc3RydWN0b3IucGFkTGVuZ3RoIC8gODsKICAgIHRoaXMuZW5kaWFuID0gJ2JpZyc7CgogICAgdGhpcy5fZGVsdGE4ID0gdGhpcy5ibG9ja1NpemUgLyA4OwogICAgdGhpcy5fZGVsdGEzMiA9IHRoaXMuYmxvY2tTaXplIC8gMzI7CiAgfQogIGNvbW1vbiQ1LkJsb2NrSGFzaCA9IEJsb2NrSGFzaCQ0OwoKICBCbG9ja0hhc2gkNC5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gdXBkYXRlKG1zZywgZW5jKSB7CiAgICAvLyBDb252ZXJ0IG1lc3NhZ2UgdG8gYXJyYXksIHBhZCBpdCwgYW5kIGpvaW4gaW50byAzMmJpdCBibG9ja3MKICAgIG1zZyA9IHV0aWxzJGYudG9BcnJheShtc2csIGVuYyk7CiAgICBpZiAoIXRoaXMucGVuZGluZykKICAgICAgdGhpcy5wZW5kaW5nID0gbXNnOwogICAgZWxzZQogICAgICB0aGlzLnBlbmRpbmcgPSB0aGlzLnBlbmRpbmcuY29uY2F0KG1zZyk7CiAgICB0aGlzLnBlbmRpbmdUb3RhbCArPSBtc2cubGVuZ3RoOwoKICAgIC8vIEVub3VnaCBkYXRhLCB0cnkgdXBkYXRpbmcKICAgIGlmICh0aGlzLnBlbmRpbmcubGVuZ3RoID49IHRoaXMuX2RlbHRhOCkgewogICAgICBtc2cgPSB0aGlzLnBlbmRpbmc7CgogICAgICAvLyBQcm9jZXNzIHBlbmRpbmcgZGF0YSBpbiBibG9ja3MKICAgICAgdmFyIHIgPSBtc2cubGVuZ3RoICUgdGhpcy5fZGVsdGE4OwogICAgICB0aGlzLnBlbmRpbmcgPSBtc2cuc2xpY2UobXNnLmxlbmd0aCAtIHIsIG1zZy5sZW5ndGgpOwogICAgICBpZiAodGhpcy5wZW5kaW5nLmxlbmd0aCA9PT0gMCkKICAgICAgICB0aGlzLnBlbmRpbmcgPSBudWxsOwoKICAgICAgbXNnID0gdXRpbHMkZi5qb2luMzIobXNnLCAwLCBtc2cubGVuZ3RoIC0gciwgdGhpcy5lbmRpYW4pOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1zZy5sZW5ndGg7IGkgKz0gdGhpcy5fZGVsdGEzMikKICAgICAgICB0aGlzLl91cGRhdGUobXNnLCBpLCBpICsgdGhpcy5fZGVsdGEzMik7CiAgICB9CgogICAgcmV0dXJuIHRoaXM7CiAgfTsKCiAgQmxvY2tIYXNoJDQucHJvdG90eXBlLmRpZ2VzdCA9IGZ1bmN0aW9uIGRpZ2VzdChlbmMpIHsKICAgIHRoaXMudXBkYXRlKHRoaXMuX3BhZCgpKTsKICAgIGFzc2VydCRiKHRoaXMucGVuZGluZyA9PT0gbnVsbCk7CgogICAgcmV0dXJuIHRoaXMuX2RpZ2VzdChlbmMpOwogIH07CgogIEJsb2NrSGFzaCQ0LnByb3RvdHlwZS5fcGFkID0gZnVuY3Rpb24gcGFkKCkgewogICAgdmFyIGxlbiA9IHRoaXMucGVuZGluZ1RvdGFsOwogICAgdmFyIGJ5dGVzID0gdGhpcy5fZGVsdGE4OwogICAgdmFyIGsgPSBieXRlcyAtICgobGVuICsgdGhpcy5wYWRMZW5ndGgpICUgYnl0ZXMpOwogICAgdmFyIHJlcyA9IG5ldyBBcnJheShrICsgdGhpcy5wYWRMZW5ndGgpOwogICAgcmVzWzBdID0gMHg4MDsKICAgIGZvciAodmFyIGkgPSAxOyBpIDwgazsgaSsrKQogICAgICByZXNbaV0gPSAwOwoKICAgIC8vIEFwcGVuZCBsZW5ndGgKICAgIGxlbiA8PD0gMzsKICAgIGlmICh0aGlzLmVuZGlhbiA9PT0gJ2JpZycpIHsKICAgICAgZm9yICh2YXIgdCA9IDg7IHQgPCB0aGlzLnBhZExlbmd0aDsgdCsrKQogICAgICAgIHJlc1tpKytdID0gMDsKCiAgICAgIHJlc1tpKytdID0gMDsKICAgICAgcmVzW2krK10gPSAwOwogICAgICByZXNbaSsrXSA9IDA7CiAgICAgIHJlc1tpKytdID0gMDsKICAgICAgcmVzW2krK10gPSAobGVuID4+PiAyNCkgJiAweGZmOwogICAgICByZXNbaSsrXSA9IChsZW4gPj4+IDE2KSAmIDB4ZmY7CiAgICAgIHJlc1tpKytdID0gKGxlbiA+Pj4gOCkgJiAweGZmOwogICAgICByZXNbaSsrXSA9IGxlbiAmIDB4ZmY7CiAgICB9IGVsc2UgewogICAgICByZXNbaSsrXSA9IGxlbiAmIDB4ZmY7CiAgICAgIHJlc1tpKytdID0gKGxlbiA+Pj4gOCkgJiAweGZmOwogICAgICByZXNbaSsrXSA9IChsZW4gPj4+IDE2KSAmIDB4ZmY7CiAgICAgIHJlc1tpKytdID0gKGxlbiA+Pj4gMjQpICYgMHhmZjsKICAgICAgcmVzW2krK10gPSAwOwogICAgICByZXNbaSsrXSA9IDA7CiAgICAgIHJlc1tpKytdID0gMDsKICAgICAgcmVzW2krK10gPSAwOwoKICAgICAgZm9yICh0ID0gODsgdCA8IHRoaXMucGFkTGVuZ3RoOyB0KyspCiAgICAgICAgcmVzW2krK10gPSAwOwogICAgfQoKICAgIHJldHVybiByZXM7CiAgfTsKCiAgdmFyIHNoYSA9IHt9OwoKICB2YXIgY29tbW9uJDQgPSB7fTsKCiAgdmFyIHV0aWxzJGUgPSB1dGlscyRnOwogIHZhciByb3RyMzIgPSB1dGlscyRlLnJvdHIzMjsKCiAgZnVuY3Rpb24gZnRfMSQxKHMsIHgsIHksIHopIHsKICAgIGlmIChzID09PSAwKQogICAgICByZXR1cm4gY2gzMiQxKHgsIHksIHopOwogICAgaWYgKHMgPT09IDEgfHwgcyA9PT0gMykKICAgICAgcmV0dXJuIHAzMih4LCB5LCB6KTsKICAgIGlmIChzID09PSAyKQogICAgICByZXR1cm4gbWFqMzIkMSh4LCB5LCB6KTsKICB9CiAgY29tbW9uJDQuZnRfMSA9IGZ0XzEkMTsKCiAgZnVuY3Rpb24gY2gzMiQxKHgsIHksIHopIHsKICAgIHJldHVybiAoeCAmIHkpIF4gKCh+eCkgJiB6KTsKICB9CiAgY29tbW9uJDQuY2gzMiA9IGNoMzIkMTsKCiAgZnVuY3Rpb24gbWFqMzIkMSh4LCB5LCB6KSB7CiAgICByZXR1cm4gKHggJiB5KSBeICh4ICYgeikgXiAoeSAmIHopOwogIH0KICBjb21tb24kNC5tYWozMiA9IG1hajMyJDE7CgogIGZ1bmN0aW9uIHAzMih4LCB5LCB6KSB7CiAgICByZXR1cm4geCBeIHkgXiB6OwogIH0KICBjb21tb24kNC5wMzIgPSBwMzI7CgogIGZ1bmN0aW9uIHMwXzI1NiQxKHgpIHsKICAgIHJldHVybiByb3RyMzIoeCwgMikgXiByb3RyMzIoeCwgMTMpIF4gcm90cjMyKHgsIDIyKTsKICB9CiAgY29tbW9uJDQuczBfMjU2ID0gczBfMjU2JDE7CgogIGZ1bmN0aW9uIHMxXzI1NiQxKHgpIHsKICAgIHJldHVybiByb3RyMzIoeCwgNikgXiByb3RyMzIoeCwgMTEpIF4gcm90cjMyKHgsIDI1KTsKICB9CiAgY29tbW9uJDQuczFfMjU2ID0gczFfMjU2JDE7CgogIGZ1bmN0aW9uIGcwXzI1NiQxKHgpIHsKICAgIHJldHVybiByb3RyMzIoeCwgNykgXiByb3RyMzIoeCwgMTgpIF4gKHggPj4+IDMpOwogIH0KICBjb21tb24kNC5nMF8yNTYgPSBnMF8yNTYkMTsKCiAgZnVuY3Rpb24gZzFfMjU2JDEoeCkgewogICAgcmV0dXJuIHJvdHIzMih4LCAxNykgXiByb3RyMzIoeCwgMTkpIF4gKHggPj4+IDEwKTsKICB9CiAgY29tbW9uJDQuZzFfMjU2ID0gZzFfMjU2JDE7CgogIHZhciB1dGlscyRkID0gdXRpbHMkZzsKICB2YXIgY29tbW9uJDMgPSBjb21tb24kNTsKICB2YXIgc2hhQ29tbW9uJDEgPSBjb21tb24kNDsKCiAgdmFyIHJvdGwzMiQxID0gdXRpbHMkZC5yb3RsMzI7CiAgdmFyIHN1bTMyJDIgPSB1dGlscyRkLnN1bTMyOwogIHZhciBzdW0zMl81JDEgPSB1dGlscyRkLnN1bTMyXzU7CiAgdmFyIGZ0XzEgPSBzaGFDb21tb24kMS5mdF8xOwogIHZhciBCbG9ja0hhc2gkMyA9IGNvbW1vbiQzLkJsb2NrSGFzaDsKCiAgdmFyIHNoYTFfSyA9IFsKICAgIDB4NUE4Mjc5OTksIDB4NkVEOUVCQTEsCiAgICAweDhGMUJCQ0RDLCAweENBNjJDMUQ2CiAgXTsKCiAgZnVuY3Rpb24gU0hBMSgpIHsKICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBTSEExKSkKICAgICAgcmV0dXJuIG5ldyBTSEExKCk7CgogICAgQmxvY2tIYXNoJDMuY2FsbCh0aGlzKTsKICAgIHRoaXMuaCA9IFsKICAgICAgMHg2NzQ1MjMwMSwgMHhlZmNkYWI4OSwgMHg5OGJhZGNmZSwKICAgICAgMHgxMDMyNTQ3NiwgMHhjM2QyZTFmMCBdOwogICAgdGhpcy5XID0gbmV3IEFycmF5KDgwKTsKICB9CgogIHV0aWxzJGQuaW5oZXJpdHMoU0hBMSwgQmxvY2tIYXNoJDMpOwogIHZhciBfMSA9IFNIQTE7CgogIFNIQTEuYmxvY2tTaXplID0gNTEyOwogIFNIQTEub3V0U2l6ZSA9IDE2MDsKICBTSEExLmhtYWNTdHJlbmd0aCA9IDgwOwogIFNIQTEucGFkTGVuZ3RoID0gNjQ7CgogIFNIQTEucHJvdG90eXBlLl91cGRhdGUgPSBmdW5jdGlvbiBfdXBkYXRlKG1zZywgc3RhcnQpIHsKICAgIHZhciBXID0gdGhpcy5XOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMTY7IGkrKykKICAgICAgV1tpXSA9IG1zZ1tzdGFydCArIGldOwoKICAgIGZvcig7IGkgPCBXLmxlbmd0aDsgaSsrKQogICAgICBXW2ldID0gcm90bDMyJDEoV1tpIC0gM10gXiBXW2kgLSA4XSBeIFdbaSAtIDE0XSBeIFdbaSAtIDE2XSwgMSk7CgogICAgdmFyIGEgPSB0aGlzLmhbMF07CiAgICB2YXIgYiA9IHRoaXMuaFsxXTsKICAgIHZhciBjID0gdGhpcy5oWzJdOwogICAgdmFyIGQgPSB0aGlzLmhbM107CiAgICB2YXIgZSA9IHRoaXMuaFs0XTsKCiAgICBmb3IgKGkgPSAwOyBpIDwgVy5sZW5ndGg7IGkrKykgewogICAgICB2YXIgcyA9IH5+KGkgLyAyMCk7CiAgICAgIHZhciB0ID0gc3VtMzJfNSQxKHJvdGwzMiQxKGEsIDUpLCBmdF8xKHMsIGIsIGMsIGQpLCBlLCBXW2ldLCBzaGExX0tbc10pOwogICAgICBlID0gZDsKICAgICAgZCA9IGM7CiAgICAgIGMgPSByb3RsMzIkMShiLCAzMCk7CiAgICAgIGIgPSBhOwogICAgICBhID0gdDsKICAgIH0KCiAgICB0aGlzLmhbMF0gPSBzdW0zMiQyKHRoaXMuaFswXSwgYSk7CiAgICB0aGlzLmhbMV0gPSBzdW0zMiQyKHRoaXMuaFsxXSwgYik7CiAgICB0aGlzLmhbMl0gPSBzdW0zMiQyKHRoaXMuaFsyXSwgYyk7CiAgICB0aGlzLmhbM10gPSBzdW0zMiQyKHRoaXMuaFszXSwgZCk7CiAgICB0aGlzLmhbNF0gPSBzdW0zMiQyKHRoaXMuaFs0XSwgZSk7CiAgfTsKCiAgU0hBMS5wcm90b3R5cGUuX2RpZ2VzdCA9IGZ1bmN0aW9uIGRpZ2VzdChlbmMpIHsKICAgIGlmIChlbmMgPT09ICdoZXgnKQogICAgICByZXR1cm4gdXRpbHMkZC50b0hleDMyKHRoaXMuaCwgJ2JpZycpOwogICAgZWxzZQogICAgICByZXR1cm4gdXRpbHMkZC5zcGxpdDMyKHRoaXMuaCwgJ2JpZycpOwogIH07CgogIHZhciB1dGlscyRjID0gdXRpbHMkZzsKICB2YXIgY29tbW9uJDIgPSBjb21tb24kNTsKICB2YXIgc2hhQ29tbW9uID0gY29tbW9uJDQ7CiAgdmFyIGFzc2VydCRhID0gbWluaW1hbGlzdGljQXNzZXJ0OwoKICB2YXIgc3VtMzIkMSA9IHV0aWxzJGMuc3VtMzI7CiAgdmFyIHN1bTMyXzQkMSA9IHV0aWxzJGMuc3VtMzJfNDsKICB2YXIgc3VtMzJfNSA9IHV0aWxzJGMuc3VtMzJfNTsKICB2YXIgY2gzMiA9IHNoYUNvbW1vbi5jaDMyOwogIHZhciBtYWozMiA9IHNoYUNvbW1vbi5tYWozMjsKICB2YXIgczBfMjU2ID0gc2hhQ29tbW9uLnMwXzI1NjsKICB2YXIgczFfMjU2ID0gc2hhQ29tbW9uLnMxXzI1NjsKICB2YXIgZzBfMjU2ID0gc2hhQ29tbW9uLmcwXzI1NjsKICB2YXIgZzFfMjU2ID0gc2hhQ29tbW9uLmcxXzI1NjsKCiAgdmFyIEJsb2NrSGFzaCQyID0gY29tbW9uJDIuQmxvY2tIYXNoOwoKICB2YXIgc2hhMjU2X0sgPSBbCiAgICAweDQyOGEyZjk4LCAweDcxMzc0NDkxLCAweGI1YzBmYmNmLCAweGU5YjVkYmE1LAogICAgMHgzOTU2YzI1YiwgMHg1OWYxMTFmMSwgMHg5MjNmODJhNCwgMHhhYjFjNWVkNSwKICAgIDB4ZDgwN2FhOTgsIDB4MTI4MzViMDEsIDB4MjQzMTg1YmUsIDB4NTUwYzdkYzMsCiAgICAweDcyYmU1ZDc0LCAweDgwZGViMWZlLCAweDliZGMwNmE3LCAweGMxOWJmMTc0LAogICAgMHhlNDliNjljMSwgMHhlZmJlNDc4NiwgMHgwZmMxOWRjNiwgMHgyNDBjYTFjYywKICAgIDB4MmRlOTJjNmYsIDB4NGE3NDg0YWEsIDB4NWNiMGE5ZGMsIDB4NzZmOTg4ZGEsCiAgICAweDk4M2U1MTUyLCAweGE4MzFjNjZkLCAweGIwMDMyN2M4LCAweGJmNTk3ZmM3LAogICAgMHhjNmUwMGJmMywgMHhkNWE3OTE0NywgMHgwNmNhNjM1MSwgMHgxNDI5Mjk2NywKICAgIDB4MjdiNzBhODUsIDB4MmUxYjIxMzgsIDB4NGQyYzZkZmMsIDB4NTMzODBkMTMsCiAgICAweDY1MGE3MzU0LCAweDc2NmEwYWJiLCAweDgxYzJjOTJlLCAweDkyNzIyYzg1LAogICAgMHhhMmJmZThhMSwgMHhhODFhNjY0YiwgMHhjMjRiOGI3MCwgMHhjNzZjNTFhMywKICAgIDB4ZDE5MmU4MTksIDB4ZDY5OTA2MjQsIDB4ZjQwZTM1ODUsIDB4MTA2YWEwNzAsCiAgICAweDE5YTRjMTE2LCAweDFlMzc2YzA4LCAweDI3NDg3NzRjLCAweDM0YjBiY2I1LAogICAgMHgzOTFjMGNiMywgMHg0ZWQ4YWE0YSwgMHg1YjljY2E0ZiwgMHg2ODJlNmZmMywKICAgIDB4NzQ4ZjgyZWUsIDB4NzhhNTYzNmYsIDB4ODRjODc4MTQsIDB4OGNjNzAyMDgsCiAgICAweDkwYmVmZmZhLCAweGE0NTA2Y2ViLCAweGJlZjlhM2Y3LCAweGM2NzE3OGYyCiAgXTsKCiAgZnVuY3Rpb24gU0hBMjU2JDEoKSB7CiAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgU0hBMjU2JDEpKQogICAgICByZXR1cm4gbmV3IFNIQTI1NiQxKCk7CgogICAgQmxvY2tIYXNoJDIuY2FsbCh0aGlzKTsKICAgIHRoaXMuaCA9IFsKICAgICAgMHg2YTA5ZTY2NywgMHhiYjY3YWU4NSwgMHgzYzZlZjM3MiwgMHhhNTRmZjUzYSwKICAgICAgMHg1MTBlNTI3ZiwgMHg5YjA1Njg4YywgMHgxZjgzZDlhYiwgMHg1YmUwY2QxOQogICAgXTsKICAgIHRoaXMuayA9IHNoYTI1Nl9LOwogICAgdGhpcy5XID0gbmV3IEFycmF5KDY0KTsKICB9CiAgdXRpbHMkYy5pbmhlcml0cyhTSEEyNTYkMSwgQmxvY2tIYXNoJDIpOwogIHZhciBfMjU2ID0gU0hBMjU2JDE7CgogIFNIQTI1NiQxLmJsb2NrU2l6ZSA9IDUxMjsKICBTSEEyNTYkMS5vdXRTaXplID0gMjU2OwogIFNIQTI1NiQxLmhtYWNTdHJlbmd0aCA9IDE5MjsKICBTSEEyNTYkMS5wYWRMZW5ndGggPSA2NDsKCiAgU0hBMjU2JDEucHJvdG90eXBlLl91cGRhdGUgPSBmdW5jdGlvbiBfdXBkYXRlKG1zZywgc3RhcnQpIHsKICAgIHZhciBXID0gdGhpcy5XOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMTY7IGkrKykKICAgICAgV1tpXSA9IG1zZ1tzdGFydCArIGldOwogICAgZm9yICg7IGkgPCBXLmxlbmd0aDsgaSsrKQogICAgICBXW2ldID0gc3VtMzJfNCQxKGcxXzI1NihXW2kgLSAyXSksIFdbaSAtIDddLCBnMF8yNTYoV1tpIC0gMTVdKSwgV1tpIC0gMTZdKTsKCiAgICB2YXIgYSA9IHRoaXMuaFswXTsKICAgIHZhciBiID0gdGhpcy5oWzFdOwogICAgdmFyIGMgPSB0aGlzLmhbMl07CiAgICB2YXIgZCA9IHRoaXMuaFszXTsKICAgIHZhciBlID0gdGhpcy5oWzRdOwogICAgdmFyIGYgPSB0aGlzLmhbNV07CiAgICB2YXIgZyA9IHRoaXMuaFs2XTsKICAgIHZhciBoID0gdGhpcy5oWzddOwoKICAgIGFzc2VydCRhKHRoaXMuay5sZW5ndGggPT09IFcubGVuZ3RoKTsKICAgIGZvciAoaSA9IDA7IGkgPCBXLmxlbmd0aDsgaSsrKSB7CiAgICAgIHZhciBUMSA9IHN1bTMyXzUoaCwgczFfMjU2KGUpLCBjaDMyKGUsIGYsIGcpLCB0aGlzLmtbaV0sIFdbaV0pOwogICAgICB2YXIgVDIgPSBzdW0zMiQxKHMwXzI1NihhKSwgbWFqMzIoYSwgYiwgYykpOwogICAgICBoID0gZzsKICAgICAgZyA9IGY7CiAgICAgIGYgPSBlOwogICAgICBlID0gc3VtMzIkMShkLCBUMSk7CiAgICAgIGQgPSBjOwogICAgICBjID0gYjsKICAgICAgYiA9IGE7CiAgICAgIGEgPSBzdW0zMiQxKFQxLCBUMik7CiAgICB9CgogICAgdGhpcy5oWzBdID0gc3VtMzIkMSh0aGlzLmhbMF0sIGEpOwogICAgdGhpcy5oWzFdID0gc3VtMzIkMSh0aGlzLmhbMV0sIGIpOwogICAgdGhpcy5oWzJdID0gc3VtMzIkMSh0aGlzLmhbMl0sIGMpOwogICAgdGhpcy5oWzNdID0gc3VtMzIkMSh0aGlzLmhbM10sIGQpOwogICAgdGhpcy5oWzRdID0gc3VtMzIkMSh0aGlzLmhbNF0sIGUpOwogICAgdGhpcy5oWzVdID0gc3VtMzIkMSh0aGlzLmhbNV0sIGYpOwogICAgdGhpcy5oWzZdID0gc3VtMzIkMSh0aGlzLmhbNl0sIGcpOwogICAgdGhpcy5oWzddID0gc3VtMzIkMSh0aGlzLmhbN10sIGgpOwogIH07CgogIFNIQTI1NiQxLnByb3RvdHlwZS5fZGlnZXN0ID0gZnVuY3Rpb24gZGlnZXN0KGVuYykgewogICAgaWYgKGVuYyA9PT0gJ2hleCcpCiAgICAgIHJldHVybiB1dGlscyRjLnRvSGV4MzIodGhpcy5oLCAnYmlnJyk7CiAgICBlbHNlCiAgICAgIHJldHVybiB1dGlscyRjLnNwbGl0MzIodGhpcy5oLCAnYmlnJyk7CiAgfTsKCiAgdmFyIHV0aWxzJGIgPSB1dGlscyRnOwogIHZhciBTSEEyNTYgPSBfMjU2OwoKICBmdW5jdGlvbiBTSEEyMjQoKSB7CiAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgU0hBMjI0KSkKICAgICAgcmV0dXJuIG5ldyBTSEEyMjQoKTsKCiAgICBTSEEyNTYuY2FsbCh0aGlzKTsKICAgIHRoaXMuaCA9IFsKICAgICAgMHhjMTA1OWVkOCwgMHgzNjdjZDUwNywgMHgzMDcwZGQxNywgMHhmNzBlNTkzOSwKICAgICAgMHhmZmMwMGIzMSwgMHg2ODU4MTUxMSwgMHg2NGY5OGZhNywgMHhiZWZhNGZhNCBdOwogIH0KICB1dGlscyRiLmluaGVyaXRzKFNIQTIyNCwgU0hBMjU2KTsKICB2YXIgXzIyNCA9IFNIQTIyNDsKCiAgU0hBMjI0LmJsb2NrU2l6ZSA9IDUxMjsKICBTSEEyMjQub3V0U2l6ZSA9IDIyNDsKICBTSEEyMjQuaG1hY1N0cmVuZ3RoID0gMTkyOwogIFNIQTIyNC5wYWRMZW5ndGggPSA2NDsKCiAgU0hBMjI0LnByb3RvdHlwZS5fZGlnZXN0ID0gZnVuY3Rpb24gZGlnZXN0KGVuYykgewogICAgLy8gSnVzdCB0cnVuY2F0ZSBvdXRwdXQKICAgIGlmIChlbmMgPT09ICdoZXgnKQogICAgICByZXR1cm4gdXRpbHMkYi50b0hleDMyKHRoaXMuaC5zbGljZSgwLCA3KSwgJ2JpZycpOwogICAgZWxzZQogICAgICByZXR1cm4gdXRpbHMkYi5zcGxpdDMyKHRoaXMuaC5zbGljZSgwLCA3KSwgJ2JpZycpOwogIH07CgogIHZhciB1dGlscyRhID0gdXRpbHMkZzsKICB2YXIgY29tbW9uJDEgPSBjb21tb24kNTsKICB2YXIgYXNzZXJ0JDkgPSBtaW5pbWFsaXN0aWNBc3NlcnQ7CgogIHZhciByb3RyNjRfaGkgPSB1dGlscyRhLnJvdHI2NF9oaTsKICB2YXIgcm90cjY0X2xvID0gdXRpbHMkYS5yb3RyNjRfbG87CiAgdmFyIHNocjY0X2hpID0gdXRpbHMkYS5zaHI2NF9oaTsKICB2YXIgc2hyNjRfbG8gPSB1dGlscyRhLnNocjY0X2xvOwogIHZhciBzdW02NCA9IHV0aWxzJGEuc3VtNjQ7CiAgdmFyIHN1bTY0X2hpID0gdXRpbHMkYS5zdW02NF9oaTsKICB2YXIgc3VtNjRfbG8gPSB1dGlscyRhLnN1bTY0X2xvOwogIHZhciBzdW02NF80X2hpID0gdXRpbHMkYS5zdW02NF80X2hpOwogIHZhciBzdW02NF80X2xvID0gdXRpbHMkYS5zdW02NF80X2xvOwogIHZhciBzdW02NF81X2hpID0gdXRpbHMkYS5zdW02NF81X2hpOwogIHZhciBzdW02NF81X2xvID0gdXRpbHMkYS5zdW02NF81X2xvOwoKICB2YXIgQmxvY2tIYXNoJDEgPSBjb21tb24kMS5CbG9ja0hhc2g7CgogIHZhciBzaGE1MTJfSyA9IFsKICAgIDB4NDI4YTJmOTgsIDB4ZDcyOGFlMjIsIDB4NzEzNzQ0OTEsIDB4MjNlZjY1Y2QsCiAgICAweGI1YzBmYmNmLCAweGVjNGQzYjJmLCAweGU5YjVkYmE1LCAweDgxODlkYmJjLAogICAgMHgzOTU2YzI1YiwgMHhmMzQ4YjUzOCwgMHg1OWYxMTFmMSwgMHhiNjA1ZDAxOSwKICAgIDB4OTIzZjgyYTQsIDB4YWYxOTRmOWIsIDB4YWIxYzVlZDUsIDB4ZGE2ZDgxMTgsCiAgICAweGQ4MDdhYTk4LCAweGEzMDMwMjQyLCAweDEyODM1YjAxLCAweDQ1NzA2ZmJlLAogICAgMHgyNDMxODViZSwgMHg0ZWU0YjI4YywgMHg1NTBjN2RjMywgMHhkNWZmYjRlMiwKICAgIDB4NzJiZTVkNzQsIDB4ZjI3Yjg5NmYsIDB4ODBkZWIxZmUsIDB4M2IxNjk2YjEsCiAgICAweDliZGMwNmE3LCAweDI1YzcxMjM1LCAweGMxOWJmMTc0LCAweGNmNjkyNjk0LAogICAgMHhlNDliNjljMSwgMHg5ZWYxNGFkMiwgMHhlZmJlNDc4NiwgMHgzODRmMjVlMywKICAgIDB4MGZjMTlkYzYsIDB4OGI4Y2Q1YjUsIDB4MjQwY2ExY2MsIDB4NzdhYzljNjUsCiAgICAweDJkZTkyYzZmLCAweDU5MmIwMjc1LCAweDRhNzQ4NGFhLCAweDZlYTZlNDgzLAogICAgMHg1Y2IwYTlkYywgMHhiZDQxZmJkNCwgMHg3NmY5ODhkYSwgMHg4MzExNTNiNSwKICAgIDB4OTgzZTUxNTIsIDB4ZWU2NmRmYWIsIDB4YTgzMWM2NmQsIDB4MmRiNDMyMTAsCiAgICAweGIwMDMyN2M4LCAweDk4ZmIyMTNmLCAweGJmNTk3ZmM3LCAweGJlZWYwZWU0LAogICAgMHhjNmUwMGJmMywgMHgzZGE4OGZjMiwgMHhkNWE3OTE0NywgMHg5MzBhYTcyNSwKICAgIDB4MDZjYTYzNTEsIDB4ZTAwMzgyNmYsIDB4MTQyOTI5NjcsIDB4MGEwZTZlNzAsCiAgICAweDI3YjcwYTg1LCAweDQ2ZDIyZmZjLCAweDJlMWIyMTM4LCAweDVjMjZjOTI2LAogICAgMHg0ZDJjNmRmYywgMHg1YWM0MmFlZCwgMHg1MzM4MGQxMywgMHg5ZDk1YjNkZiwKICAgIDB4NjUwYTczNTQsIDB4OGJhZjYzZGUsIDB4NzY2YTBhYmIsIDB4M2M3N2IyYTgsCiAgICAweDgxYzJjOTJlLCAweDQ3ZWRhZWU2LCAweDkyNzIyYzg1LCAweDE0ODIzNTNiLAogICAgMHhhMmJmZThhMSwgMHg0Y2YxMDM2NCwgMHhhODFhNjY0YiwgMHhiYzQyMzAwMSwKICAgIDB4YzI0YjhiNzAsIDB4ZDBmODk3OTEsIDB4Yzc2YzUxYTMsIDB4MDY1NGJlMzAsCiAgICAweGQxOTJlODE5LCAweGQ2ZWY1MjE4LCAweGQ2OTkwNjI0LCAweDU1NjVhOTEwLAogICAgMHhmNDBlMzU4NSwgMHg1NzcxMjAyYSwgMHgxMDZhYTA3MCwgMHgzMmJiZDFiOCwKICAgIDB4MTlhNGMxMTYsIDB4YjhkMmQwYzgsIDB4MWUzNzZjMDgsIDB4NTE0MWFiNTMsCiAgICAweDI3NDg3NzRjLCAweGRmOGVlYjk5LCAweDM0YjBiY2I1LCAweGUxOWI0OGE4LAogICAgMHgzOTFjMGNiMywgMHhjNWM5NWE2MywgMHg0ZWQ4YWE0YSwgMHhlMzQxOGFjYiwKICAgIDB4NWI5Y2NhNGYsIDB4Nzc2M2UzNzMsIDB4NjgyZTZmZjMsIDB4ZDZiMmI4YTMsCiAgICAweDc0OGY4MmVlLCAweDVkZWZiMmZjLCAweDc4YTU2MzZmLCAweDQzMTcyZjYwLAogICAgMHg4NGM4NzgxNCwgMHhhMWYwYWI3MiwgMHg4Y2M3MDIwOCwgMHgxYTY0MzllYywKICAgIDB4OTBiZWZmZmEsIDB4MjM2MzFlMjgsIDB4YTQ1MDZjZWIsIDB4ZGU4MmJkZTksCiAgICAweGJlZjlhM2Y3LCAweGIyYzY3OTE1LCAweGM2NzE3OGYyLCAweGUzNzI1MzJiLAogICAgMHhjYTI3M2VjZSwgMHhlYTI2NjE5YywgMHhkMTg2YjhjNywgMHgyMWMwYzIwNywKICAgIDB4ZWFkYTdkZDYsIDB4Y2RlMGViMWUsIDB4ZjU3ZDRmN2YsIDB4ZWU2ZWQxNzgsCiAgICAweDA2ZjA2N2FhLCAweDcyMTc2ZmJhLCAweDBhNjM3ZGM1LCAweGEyYzg5OGE2LAogICAgMHgxMTNmOTgwNCwgMHhiZWY5MGRhZSwgMHgxYjcxMGIzNSwgMHgxMzFjNDcxYiwKICAgIDB4MjhkYjc3ZjUsIDB4MjMwNDdkODQsIDB4MzJjYWFiN2IsIDB4NDBjNzI0OTMsCiAgICAweDNjOWViZTBhLCAweDE1YzliZWJjLCAweDQzMWQ2N2M0LCAweDljMTAwZDRjLAogICAgMHg0Y2M1ZDRiZSwgMHhjYjNlNDJiNiwgMHg1OTdmMjk5YywgMHhmYzY1N2UyYSwKICAgIDB4NWZjYjZmYWIsIDB4M2FkNmZhZWMsIDB4NmM0NDE5OGMsIDB4NGE0NzU4MTcKICBdOwoKICBmdW5jdGlvbiBTSEE1MTIkMSgpIHsKICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBTSEE1MTIkMSkpCiAgICAgIHJldHVybiBuZXcgU0hBNTEyJDEoKTsKCiAgICBCbG9ja0hhc2gkMS5jYWxsKHRoaXMpOwogICAgdGhpcy5oID0gWwogICAgICAweDZhMDllNjY3LCAweGYzYmNjOTA4LAogICAgICAweGJiNjdhZTg1LCAweDg0Y2FhNzNiLAogICAgICAweDNjNmVmMzcyLCAweGZlOTRmODJiLAogICAgICAweGE1NGZmNTNhLCAweDVmMWQzNmYxLAogICAgICAweDUxMGU1MjdmLCAweGFkZTY4MmQxLAogICAgICAweDliMDU2ODhjLCAweDJiM2U2YzFmLAogICAgICAweDFmODNkOWFiLCAweGZiNDFiZDZiLAogICAgICAweDViZTBjZDE5LCAweDEzN2UyMTc5IF07CiAgICB0aGlzLmsgPSBzaGE1MTJfSzsKICAgIHRoaXMuVyA9IG5ldyBBcnJheSgxNjApOwogIH0KICB1dGlscyRhLmluaGVyaXRzKFNIQTUxMiQxLCBCbG9ja0hhc2gkMSk7CiAgdmFyIF81MTIgPSBTSEE1MTIkMTsKCiAgU0hBNTEyJDEuYmxvY2tTaXplID0gMTAyNDsKICBTSEE1MTIkMS5vdXRTaXplID0gNTEyOwogIFNIQTUxMiQxLmhtYWNTdHJlbmd0aCA9IDE5MjsKICBTSEE1MTIkMS5wYWRMZW5ndGggPSAxMjg7CgogIFNIQTUxMiQxLnByb3RvdHlwZS5fcHJlcGFyZUJsb2NrID0gZnVuY3Rpb24gX3ByZXBhcmVCbG9jayhtc2csIHN0YXJ0KSB7CiAgICB2YXIgVyA9IHRoaXMuVzsKCiAgICAvLyAzMiB4IDMyYml0IHdvcmRzCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDMyOyBpKyspCiAgICAgIFdbaV0gPSBtc2dbc3RhcnQgKyBpXTsKICAgIGZvciAoOyBpIDwgVy5sZW5ndGg7IGkgKz0gMikgewogICAgICB2YXIgYzBfaGkgPSBnMV81MTJfaGkoV1tpIC0gNF0sIFdbaSAtIDNdKTsgIC8vIGkgLSAyCiAgICAgIHZhciBjMF9sbyA9IGcxXzUxMl9sbyhXW2kgLSA0XSwgV1tpIC0gM10pOwogICAgICB2YXIgYzFfaGkgPSBXW2kgLSAxNF07ICAvLyBpIC0gNwogICAgICB2YXIgYzFfbG8gPSBXW2kgLSAxM107CiAgICAgIHZhciBjMl9oaSA9IGcwXzUxMl9oaShXW2kgLSAzMF0sIFdbaSAtIDI5XSk7ICAvLyBpIC0gMTUKICAgICAgdmFyIGMyX2xvID0gZzBfNTEyX2xvKFdbaSAtIDMwXSwgV1tpIC0gMjldKTsKICAgICAgdmFyIGMzX2hpID0gV1tpIC0gMzJdOyAgLy8gaSAtIDE2CiAgICAgIHZhciBjM19sbyA9IFdbaSAtIDMxXTsKCiAgICAgIFdbaV0gPSBzdW02NF80X2hpKAogICAgICAgIGMwX2hpLCBjMF9sbywKICAgICAgICBjMV9oaSwgYzFfbG8sCiAgICAgICAgYzJfaGksIGMyX2xvLAogICAgICAgIGMzX2hpLCBjM19sbyk7CiAgICAgIFdbaSArIDFdID0gc3VtNjRfNF9sbygKICAgICAgICBjMF9oaSwgYzBfbG8sCiAgICAgICAgYzFfaGksIGMxX2xvLAogICAgICAgIGMyX2hpLCBjMl9sbywKICAgICAgICBjM19oaSwgYzNfbG8pOwogICAgfQogIH07CgogIFNIQTUxMiQxLnByb3RvdHlwZS5fdXBkYXRlID0gZnVuY3Rpb24gX3VwZGF0ZShtc2csIHN0YXJ0KSB7CiAgICB0aGlzLl9wcmVwYXJlQmxvY2sobXNnLCBzdGFydCk7CgogICAgdmFyIFcgPSB0aGlzLlc7CgogICAgdmFyIGFoID0gdGhpcy5oWzBdOwogICAgdmFyIGFsID0gdGhpcy5oWzFdOwogICAgdmFyIGJoID0gdGhpcy5oWzJdOwogICAgdmFyIGJsID0gdGhpcy5oWzNdOwogICAgdmFyIGNoID0gdGhpcy5oWzRdOwogICAgdmFyIGNsID0gdGhpcy5oWzVdOwogICAgdmFyIGRoID0gdGhpcy5oWzZdOwogICAgdmFyIGRsID0gdGhpcy5oWzddOwogICAgdmFyIGVoID0gdGhpcy5oWzhdOwogICAgdmFyIGVsID0gdGhpcy5oWzldOwogICAgdmFyIGZoID0gdGhpcy5oWzEwXTsKICAgIHZhciBmbCA9IHRoaXMuaFsxMV07CiAgICB2YXIgZ2ggPSB0aGlzLmhbMTJdOwogICAgdmFyIGdsID0gdGhpcy5oWzEzXTsKICAgIHZhciBoaCA9IHRoaXMuaFsxNF07CiAgICB2YXIgaGwgPSB0aGlzLmhbMTVdOwoKICAgIGFzc2VydCQ5KHRoaXMuay5sZW5ndGggPT09IFcubGVuZ3RoKTsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgVy5sZW5ndGg7IGkgKz0gMikgewogICAgICB2YXIgYzBfaGkgPSBoaDsKICAgICAgdmFyIGMwX2xvID0gaGw7CiAgICAgIHZhciBjMV9oaSA9IHMxXzUxMl9oaShlaCwgZWwpOwogICAgICB2YXIgYzFfbG8gPSBzMV81MTJfbG8oZWgsIGVsKTsKICAgICAgdmFyIGMyX2hpID0gY2g2NF9oaShlaCwgZWwsIGZoLCBmbCwgZ2gpOwogICAgICB2YXIgYzJfbG8gPSBjaDY0X2xvKGVoLCBlbCwgZmgsIGZsLCBnaCwgZ2wpOwogICAgICB2YXIgYzNfaGkgPSB0aGlzLmtbaV07CiAgICAgIHZhciBjM19sbyA9IHRoaXMua1tpICsgMV07CiAgICAgIHZhciBjNF9oaSA9IFdbaV07CiAgICAgIHZhciBjNF9sbyA9IFdbaSArIDFdOwoKICAgICAgdmFyIFQxX2hpID0gc3VtNjRfNV9oaSgKICAgICAgICBjMF9oaSwgYzBfbG8sCiAgICAgICAgYzFfaGksIGMxX2xvLAogICAgICAgIGMyX2hpLCBjMl9sbywKICAgICAgICBjM19oaSwgYzNfbG8sCiAgICAgICAgYzRfaGksIGM0X2xvKTsKICAgICAgdmFyIFQxX2xvID0gc3VtNjRfNV9sbygKICAgICAgICBjMF9oaSwgYzBfbG8sCiAgICAgICAgYzFfaGksIGMxX2xvLAogICAgICAgIGMyX2hpLCBjMl9sbywKICAgICAgICBjM19oaSwgYzNfbG8sCiAgICAgICAgYzRfaGksIGM0X2xvKTsKCiAgICAgIGMwX2hpID0gczBfNTEyX2hpKGFoLCBhbCk7CiAgICAgIGMwX2xvID0gczBfNTEyX2xvKGFoLCBhbCk7CiAgICAgIGMxX2hpID0gbWFqNjRfaGkoYWgsIGFsLCBiaCwgYmwsIGNoKTsKICAgICAgYzFfbG8gPSBtYWo2NF9sbyhhaCwgYWwsIGJoLCBibCwgY2gsIGNsKTsKCiAgICAgIHZhciBUMl9oaSA9IHN1bTY0X2hpKGMwX2hpLCBjMF9sbywgYzFfaGksIGMxX2xvKTsKICAgICAgdmFyIFQyX2xvID0gc3VtNjRfbG8oYzBfaGksIGMwX2xvLCBjMV9oaSwgYzFfbG8pOwoKICAgICAgaGggPSBnaDsKICAgICAgaGwgPSBnbDsKCiAgICAgIGdoID0gZmg7CiAgICAgIGdsID0gZmw7CgogICAgICBmaCA9IGVoOwogICAgICBmbCA9IGVsOwoKICAgICAgZWggPSBzdW02NF9oaShkaCwgZGwsIFQxX2hpLCBUMV9sbyk7CiAgICAgIGVsID0gc3VtNjRfbG8oZGwsIGRsLCBUMV9oaSwgVDFfbG8pOwoKICAgICAgZGggPSBjaDsKICAgICAgZGwgPSBjbDsKCiAgICAgIGNoID0gYmg7CiAgICAgIGNsID0gYmw7CgogICAgICBiaCA9IGFoOwogICAgICBibCA9IGFsOwoKICAgICAgYWggPSBzdW02NF9oaShUMV9oaSwgVDFfbG8sIFQyX2hpLCBUMl9sbyk7CiAgICAgIGFsID0gc3VtNjRfbG8oVDFfaGksIFQxX2xvLCBUMl9oaSwgVDJfbG8pOwogICAgfQoKICAgIHN1bTY0KHRoaXMuaCwgMCwgYWgsIGFsKTsKICAgIHN1bTY0KHRoaXMuaCwgMiwgYmgsIGJsKTsKICAgIHN1bTY0KHRoaXMuaCwgNCwgY2gsIGNsKTsKICAgIHN1bTY0KHRoaXMuaCwgNiwgZGgsIGRsKTsKICAgIHN1bTY0KHRoaXMuaCwgOCwgZWgsIGVsKTsKICAgIHN1bTY0KHRoaXMuaCwgMTAsIGZoLCBmbCk7CiAgICBzdW02NCh0aGlzLmgsIDEyLCBnaCwgZ2wpOwogICAgc3VtNjQodGhpcy5oLCAxNCwgaGgsIGhsKTsKICB9OwoKICBTSEE1MTIkMS5wcm90b3R5cGUuX2RpZ2VzdCA9IGZ1bmN0aW9uIGRpZ2VzdChlbmMpIHsKICAgIGlmIChlbmMgPT09ICdoZXgnKQogICAgICByZXR1cm4gdXRpbHMkYS50b0hleDMyKHRoaXMuaCwgJ2JpZycpOwogICAgZWxzZQogICAgICByZXR1cm4gdXRpbHMkYS5zcGxpdDMyKHRoaXMuaCwgJ2JpZycpOwogIH07CgogIGZ1bmN0aW9uIGNoNjRfaGkoeGgsIHhsLCB5aCwgeWwsIHpoKSB7CiAgICB2YXIgciA9ICh4aCAmIHloKSBeICgofnhoKSAmIHpoKTsKICAgIGlmIChyIDwgMCkKICAgICAgciArPSAweDEwMDAwMDAwMDsKICAgIHJldHVybiByOwogIH0KCiAgZnVuY3Rpb24gY2g2NF9sbyh4aCwgeGwsIHloLCB5bCwgemgsIHpsKSB7CiAgICB2YXIgciA9ICh4bCAmIHlsKSBeICgofnhsKSAmIHpsKTsKICAgIGlmIChyIDwgMCkKICAgICAgciArPSAweDEwMDAwMDAwMDsKICAgIHJldHVybiByOwogIH0KCiAgZnVuY3Rpb24gbWFqNjRfaGkoeGgsIHhsLCB5aCwgeWwsIHpoKSB7CiAgICB2YXIgciA9ICh4aCAmIHloKSBeICh4aCAmIHpoKSBeICh5aCAmIHpoKTsKICAgIGlmIChyIDwgMCkKICAgICAgciArPSAweDEwMDAwMDAwMDsKICAgIHJldHVybiByOwogIH0KCiAgZnVuY3Rpb24gbWFqNjRfbG8oeGgsIHhsLCB5aCwgeWwsIHpoLCB6bCkgewogICAgdmFyIHIgPSAoeGwgJiB5bCkgXiAoeGwgJiB6bCkgXiAoeWwgJiB6bCk7CiAgICBpZiAociA8IDApCiAgICAgIHIgKz0gMHgxMDAwMDAwMDA7CiAgICByZXR1cm4gcjsKICB9CgogIGZ1bmN0aW9uIHMwXzUxMl9oaSh4aCwgeGwpIHsKICAgIHZhciBjMF9oaSA9IHJvdHI2NF9oaSh4aCwgeGwsIDI4KTsKICAgIHZhciBjMV9oaSA9IHJvdHI2NF9oaSh4bCwgeGgsIDIpOyAgLy8gMzQKICAgIHZhciBjMl9oaSA9IHJvdHI2NF9oaSh4bCwgeGgsIDcpOyAgLy8gMzkKCiAgICB2YXIgciA9IGMwX2hpIF4gYzFfaGkgXiBjMl9oaTsKICAgIGlmIChyIDwgMCkKICAgICAgciArPSAweDEwMDAwMDAwMDsKICAgIHJldHVybiByOwogIH0KCiAgZnVuY3Rpb24gczBfNTEyX2xvKHhoLCB4bCkgewogICAgdmFyIGMwX2xvID0gcm90cjY0X2xvKHhoLCB4bCwgMjgpOwogICAgdmFyIGMxX2xvID0gcm90cjY0X2xvKHhsLCB4aCwgMik7ICAvLyAzNAogICAgdmFyIGMyX2xvID0gcm90cjY0X2xvKHhsLCB4aCwgNyk7ICAvLyAzOQoKICAgIHZhciByID0gYzBfbG8gXiBjMV9sbyBeIGMyX2xvOwogICAgaWYgKHIgPCAwKQogICAgICByICs9IDB4MTAwMDAwMDAwOwogICAgcmV0dXJuIHI7CiAgfQoKICBmdW5jdGlvbiBzMV81MTJfaGkoeGgsIHhsKSB7CiAgICB2YXIgYzBfaGkgPSByb3RyNjRfaGkoeGgsIHhsLCAxNCk7CiAgICB2YXIgYzFfaGkgPSByb3RyNjRfaGkoeGgsIHhsLCAxOCk7CiAgICB2YXIgYzJfaGkgPSByb3RyNjRfaGkoeGwsIHhoLCA5KTsgIC8vIDQxCgogICAgdmFyIHIgPSBjMF9oaSBeIGMxX2hpIF4gYzJfaGk7CiAgICBpZiAociA8IDApCiAgICAgIHIgKz0gMHgxMDAwMDAwMDA7CiAgICByZXR1cm4gcjsKICB9CgogIGZ1bmN0aW9uIHMxXzUxMl9sbyh4aCwgeGwpIHsKICAgIHZhciBjMF9sbyA9IHJvdHI2NF9sbyh4aCwgeGwsIDE0KTsKICAgIHZhciBjMV9sbyA9IHJvdHI2NF9sbyh4aCwgeGwsIDE4KTsKICAgIHZhciBjMl9sbyA9IHJvdHI2NF9sbyh4bCwgeGgsIDkpOyAgLy8gNDEKCiAgICB2YXIgciA9IGMwX2xvIF4gYzFfbG8gXiBjMl9sbzsKICAgIGlmIChyIDwgMCkKICAgICAgciArPSAweDEwMDAwMDAwMDsKICAgIHJldHVybiByOwogIH0KCiAgZnVuY3Rpb24gZzBfNTEyX2hpKHhoLCB4bCkgewogICAgdmFyIGMwX2hpID0gcm90cjY0X2hpKHhoLCB4bCwgMSk7CiAgICB2YXIgYzFfaGkgPSByb3RyNjRfaGkoeGgsIHhsLCA4KTsKICAgIHZhciBjMl9oaSA9IHNocjY0X2hpKHhoLCB4bCwgNyk7CgogICAgdmFyIHIgPSBjMF9oaSBeIGMxX2hpIF4gYzJfaGk7CiAgICBpZiAociA8IDApCiAgICAgIHIgKz0gMHgxMDAwMDAwMDA7CiAgICByZXR1cm4gcjsKICB9CgogIGZ1bmN0aW9uIGcwXzUxMl9sbyh4aCwgeGwpIHsKICAgIHZhciBjMF9sbyA9IHJvdHI2NF9sbyh4aCwgeGwsIDEpOwogICAgdmFyIGMxX2xvID0gcm90cjY0X2xvKHhoLCB4bCwgOCk7CiAgICB2YXIgYzJfbG8gPSBzaHI2NF9sbyh4aCwgeGwsIDcpOwoKICAgIHZhciByID0gYzBfbG8gXiBjMV9sbyBeIGMyX2xvOwogICAgaWYgKHIgPCAwKQogICAgICByICs9IDB4MTAwMDAwMDAwOwogICAgcmV0dXJuIHI7CiAgfQoKICBmdW5jdGlvbiBnMV81MTJfaGkoeGgsIHhsKSB7CiAgICB2YXIgYzBfaGkgPSByb3RyNjRfaGkoeGgsIHhsLCAxOSk7CiAgICB2YXIgYzFfaGkgPSByb3RyNjRfaGkoeGwsIHhoLCAyOSk7ICAvLyA2MQogICAgdmFyIGMyX2hpID0gc2hyNjRfaGkoeGgsIHhsLCA2KTsKCiAgICB2YXIgciA9IGMwX2hpIF4gYzFfaGkgXiBjMl9oaTsKICAgIGlmIChyIDwgMCkKICAgICAgciArPSAweDEwMDAwMDAwMDsKICAgIHJldHVybiByOwogIH0KCiAgZnVuY3Rpb24gZzFfNTEyX2xvKHhoLCB4bCkgewogICAgdmFyIGMwX2xvID0gcm90cjY0X2xvKHhoLCB4bCwgMTkpOwogICAgdmFyIGMxX2xvID0gcm90cjY0X2xvKHhsLCB4aCwgMjkpOyAgLy8gNjEKICAgIHZhciBjMl9sbyA9IHNocjY0X2xvKHhoLCB4bCwgNik7CgogICAgdmFyIHIgPSBjMF9sbyBeIGMxX2xvIF4gYzJfbG87CiAgICBpZiAociA8IDApCiAgICAgIHIgKz0gMHgxMDAwMDAwMDA7CiAgICByZXR1cm4gcjsKICB9CgogIHZhciB1dGlscyQ5ID0gdXRpbHMkZzsKCiAgdmFyIFNIQTUxMiA9IF81MTI7CgogIGZ1bmN0aW9uIFNIQTM4NCgpIHsKICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBTSEEzODQpKQogICAgICByZXR1cm4gbmV3IFNIQTM4NCgpOwoKICAgIFNIQTUxMi5jYWxsKHRoaXMpOwogICAgdGhpcy5oID0gWwogICAgICAweGNiYmI5ZDVkLCAweGMxMDU5ZWQ4LAogICAgICAweDYyOWEyOTJhLCAweDM2N2NkNTA3LAogICAgICAweDkxNTkwMTVhLCAweDMwNzBkZDE3LAogICAgICAweDE1MmZlY2Q4LCAweGY3MGU1OTM5LAogICAgICAweDY3MzMyNjY3LCAweGZmYzAwYjMxLAogICAgICAweDhlYjQ0YTg3LCAweDY4NTgxNTExLAogICAgICAweGRiMGMyZTBkLCAweDY0Zjk4ZmE3LAogICAgICAweDQ3YjU0ODFkLCAweGJlZmE0ZmE0IF07CiAgfQogIHV0aWxzJDkuaW5oZXJpdHMoU0hBMzg0LCBTSEE1MTIpOwogIHZhciBfMzg0ID0gU0hBMzg0OwoKICBTSEEzODQuYmxvY2tTaXplID0gMTAyNDsKICBTSEEzODQub3V0U2l6ZSA9IDM4NDsKICBTSEEzODQuaG1hY1N0cmVuZ3RoID0gMTkyOwogIFNIQTM4NC5wYWRMZW5ndGggPSAxMjg7CgogIFNIQTM4NC5wcm90b3R5cGUuX2RpZ2VzdCA9IGZ1bmN0aW9uIGRpZ2VzdChlbmMpIHsKICAgIGlmIChlbmMgPT09ICdoZXgnKQogICAgICByZXR1cm4gdXRpbHMkOS50b0hleDMyKHRoaXMuaC5zbGljZSgwLCAxMiksICdiaWcnKTsKICAgIGVsc2UKICAgICAgcmV0dXJuIHV0aWxzJDkuc3BsaXQzMih0aGlzLmguc2xpY2UoMCwgMTIpLCAnYmlnJyk7CiAgfTsKCiAgc2hhLnNoYTEgPSBfMTsKICBzaGEuc2hhMjI0ID0gXzIyNDsKICBzaGEuc2hhMjU2ID0gXzI1NjsKICBzaGEuc2hhMzg0ID0gXzM4NDsKICBzaGEuc2hhNTEyID0gXzUxMjsKCiAgdmFyIHJpcGVtZCA9IHt9OwoKICB2YXIgdXRpbHMkOCA9IHV0aWxzJGc7CiAgdmFyIGNvbW1vbiA9IGNvbW1vbiQ1OwoKICB2YXIgcm90bDMyID0gdXRpbHMkOC5yb3RsMzI7CiAgdmFyIHN1bTMyID0gdXRpbHMkOC5zdW0zMjsKICB2YXIgc3VtMzJfMyA9IHV0aWxzJDguc3VtMzJfMzsKICB2YXIgc3VtMzJfNCA9IHV0aWxzJDguc3VtMzJfNDsKICB2YXIgQmxvY2tIYXNoID0gY29tbW9uLkJsb2NrSGFzaDsKCiAgZnVuY3Rpb24gUklQRU1EMTYwKCkgewogICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFJJUEVNRDE2MCkpCiAgICAgIHJldHVybiBuZXcgUklQRU1EMTYwKCk7CgogICAgQmxvY2tIYXNoLmNhbGwodGhpcyk7CgogICAgdGhpcy5oID0gWyAweDY3NDUyMzAxLCAweGVmY2RhYjg5LCAweDk4YmFkY2ZlLCAweDEwMzI1NDc2LCAweGMzZDJlMWYwIF07CiAgICB0aGlzLmVuZGlhbiA9ICdsaXR0bGUnOwogIH0KICB1dGlscyQ4LmluaGVyaXRzKFJJUEVNRDE2MCwgQmxvY2tIYXNoKTsKICByaXBlbWQucmlwZW1kMTYwID0gUklQRU1EMTYwOwoKICBSSVBFTUQxNjAuYmxvY2tTaXplID0gNTEyOwogIFJJUEVNRDE2MC5vdXRTaXplID0gMTYwOwogIFJJUEVNRDE2MC5obWFjU3RyZW5ndGggPSAxOTI7CiAgUklQRU1EMTYwLnBhZExlbmd0aCA9IDY0OwoKICBSSVBFTUQxNjAucHJvdG90eXBlLl91cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUobXNnLCBzdGFydCkgewogICAgdmFyIEEgPSB0aGlzLmhbMF07CiAgICB2YXIgQiA9IHRoaXMuaFsxXTsKICAgIHZhciBDID0gdGhpcy5oWzJdOwogICAgdmFyIEQgPSB0aGlzLmhbM107CiAgICB2YXIgRSA9IHRoaXMuaFs0XTsKICAgIHZhciBBaCA9IEE7CiAgICB2YXIgQmggPSBCOwogICAgdmFyIENoID0gQzsKICAgIHZhciBEaCA9IEQ7CiAgICB2YXIgRWggPSBFOwogICAgZm9yICh2YXIgaiA9IDA7IGogPCA4MDsgaisrKSB7CiAgICAgIHZhciBUID0gc3VtMzIoCiAgICAgICAgcm90bDMyKAogICAgICAgICAgc3VtMzJfNChBLCBmKGosIEIsIEMsIEQpLCBtc2dbcltqXSArIHN0YXJ0XSwgSyhqKSksCiAgICAgICAgICBzW2pdKSwKICAgICAgICBFKTsKICAgICAgQSA9IEU7CiAgICAgIEUgPSBEOwogICAgICBEID0gcm90bDMyKEMsIDEwKTsKICAgICAgQyA9IEI7CiAgICAgIEIgPSBUOwogICAgICBUID0gc3VtMzIoCiAgICAgICAgcm90bDMyKAogICAgICAgICAgc3VtMzJfNChBaCwgZig3OSAtIGosIEJoLCBDaCwgRGgpLCBtc2dbcmhbal0gKyBzdGFydF0sIEtoKGopKSwKICAgICAgICAgIHNoW2pdKSwKICAgICAgICBFaCk7CiAgICAgIEFoID0gRWg7CiAgICAgIEVoID0gRGg7CiAgICAgIERoID0gcm90bDMyKENoLCAxMCk7CiAgICAgIENoID0gQmg7CiAgICAgIEJoID0gVDsKICAgIH0KICAgIFQgPSBzdW0zMl8zKHRoaXMuaFsxXSwgQywgRGgpOwogICAgdGhpcy5oWzFdID0gc3VtMzJfMyh0aGlzLmhbMl0sIEQsIEVoKTsKICAgIHRoaXMuaFsyXSA9IHN1bTMyXzModGhpcy5oWzNdLCBFLCBBaCk7CiAgICB0aGlzLmhbM10gPSBzdW0zMl8zKHRoaXMuaFs0XSwgQSwgQmgpOwogICAgdGhpcy5oWzRdID0gc3VtMzJfMyh0aGlzLmhbMF0sIEIsIENoKTsKICAgIHRoaXMuaFswXSA9IFQ7CiAgfTsKCiAgUklQRU1EMTYwLnByb3RvdHlwZS5fZGlnZXN0ID0gZnVuY3Rpb24gZGlnZXN0KGVuYykgewogICAgaWYgKGVuYyA9PT0gJ2hleCcpCiAgICAgIHJldHVybiB1dGlscyQ4LnRvSGV4MzIodGhpcy5oLCAnbGl0dGxlJyk7CiAgICBlbHNlCiAgICAgIHJldHVybiB1dGlscyQ4LnNwbGl0MzIodGhpcy5oLCAnbGl0dGxlJyk7CiAgfTsKCiAgZnVuY3Rpb24gZihqLCB4LCB5LCB6KSB7CiAgICBpZiAoaiA8PSAxNSkKICAgICAgcmV0dXJuIHggXiB5IF4gejsKICAgIGVsc2UgaWYgKGogPD0gMzEpCiAgICAgIHJldHVybiAoeCAmIHkpIHwgKCh+eCkgJiB6KTsKICAgIGVsc2UgaWYgKGogPD0gNDcpCiAgICAgIHJldHVybiAoeCB8ICh+eSkpIF4gejsKICAgIGVsc2UgaWYgKGogPD0gNjMpCiAgICAgIHJldHVybiAoeCAmIHopIHwgKHkgJiAofnopKTsKICAgIGVsc2UKICAgICAgcmV0dXJuIHggXiAoeSB8ICh+eikpOwogIH0KCiAgZnVuY3Rpb24gSyhqKSB7CiAgICBpZiAoaiA8PSAxNSkKICAgICAgcmV0dXJuIDB4MDAwMDAwMDA7CiAgICBlbHNlIGlmIChqIDw9IDMxKQogICAgICByZXR1cm4gMHg1YTgyNzk5OTsKICAgIGVsc2UgaWYgKGogPD0gNDcpCiAgICAgIHJldHVybiAweDZlZDllYmExOwogICAgZWxzZSBpZiAoaiA8PSA2MykKICAgICAgcmV0dXJuIDB4OGYxYmJjZGM7CiAgICBlbHNlCiAgICAgIHJldHVybiAweGE5NTNmZDRlOwogIH0KCiAgZnVuY3Rpb24gS2goaikgewogICAgaWYgKGogPD0gMTUpCiAgICAgIHJldHVybiAweDUwYTI4YmU2OwogICAgZWxzZSBpZiAoaiA8PSAzMSkKICAgICAgcmV0dXJuIDB4NWM0ZGQxMjQ7CiAgICBlbHNlIGlmIChqIDw9IDQ3KQogICAgICByZXR1cm4gMHg2ZDcwM2VmMzsKICAgIGVsc2UgaWYgKGogPD0gNjMpCiAgICAgIHJldHVybiAweDdhNmQ3NmU5OwogICAgZWxzZQogICAgICByZXR1cm4gMHgwMDAwMDAwMDsKICB9CgogIHZhciByID0gWwogICAgMCwgMSwgMiwgMywgNCwgNSwgNiwgNywgOCwgOSwgMTAsIDExLCAxMiwgMTMsIDE0LCAxNSwKICAgIDcsIDQsIDEzLCAxLCAxMCwgNiwgMTUsIDMsIDEyLCAwLCA5LCA1LCAyLCAxNCwgMTEsIDgsCiAgICAzLCAxMCwgMTQsIDQsIDksIDE1LCA4LCAxLCAyLCA3LCAwLCA2LCAxMywgMTEsIDUsIDEyLAogICAgMSwgOSwgMTEsIDEwLCAwLCA4LCAxMiwgNCwgMTMsIDMsIDcsIDE1LCAxNCwgNSwgNiwgMiwKICAgIDQsIDAsIDUsIDksIDcsIDEyLCAyLCAxMCwgMTQsIDEsIDMsIDgsIDExLCA2LCAxNSwgMTMKICBdOwoKICB2YXIgcmggPSBbCiAgICA1LCAxNCwgNywgMCwgOSwgMiwgMTEsIDQsIDEzLCA2LCAxNSwgOCwgMSwgMTAsIDMsIDEyLAogICAgNiwgMTEsIDMsIDcsIDAsIDEzLCA1LCAxMCwgMTQsIDE1LCA4LCAxMiwgNCwgOSwgMSwgMiwKICAgIDE1LCA1LCAxLCAzLCA3LCAxNCwgNiwgOSwgMTEsIDgsIDEyLCAyLCAxMCwgMCwgNCwgMTMsCiAgICA4LCA2LCA0LCAxLCAzLCAxMSwgMTUsIDAsIDUsIDEyLCAyLCAxMywgOSwgNywgMTAsIDE0LAogICAgMTIsIDE1LCAxMCwgNCwgMSwgNSwgOCwgNywgNiwgMiwgMTMsIDE0LCAwLCAzLCA5LCAxMQogIF07CgogIHZhciBzID0gWwogICAgMTEsIDE0LCAxNSwgMTIsIDUsIDgsIDcsIDksIDExLCAxMywgMTQsIDE1LCA2LCA3LCA5LCA4LAogICAgNywgNiwgOCwgMTMsIDExLCA5LCA3LCAxNSwgNywgMTIsIDE1LCA5LCAxMSwgNywgMTMsIDEyLAogICAgMTEsIDEzLCA2LCA3LCAxNCwgOSwgMTMsIDE1LCAxNCwgOCwgMTMsIDYsIDUsIDEyLCA3LCA1LAogICAgMTEsIDEyLCAxNCwgMTUsIDE0LCAxNSwgOSwgOCwgOSwgMTQsIDUsIDYsIDgsIDYsIDUsIDEyLAogICAgOSwgMTUsIDUsIDExLCA2LCA4LCAxMywgMTIsIDUsIDEyLCAxMywgMTQsIDExLCA4LCA1LCA2CiAgXTsKCiAgdmFyIHNoID0gWwogICAgOCwgOSwgOSwgMTEsIDEzLCAxNSwgMTUsIDUsIDcsIDcsIDgsIDExLCAxNCwgMTQsIDEyLCA2LAogICAgOSwgMTMsIDE1LCA3LCAxMiwgOCwgOSwgMTEsIDcsIDcsIDEyLCA3LCA2LCAxNSwgMTMsIDExLAogICAgOSwgNywgMTUsIDExLCA4LCA2LCA2LCAxNCwgMTIsIDEzLCA1LCAxNCwgMTMsIDEzLCA3LCA1LAogICAgMTUsIDUsIDgsIDExLCAxNCwgMTQsIDYsIDE0LCA2LCA5LCAxMiwgOSwgMTIsIDUsIDE1LCA4LAogICAgOCwgNSwgMTIsIDksIDEyLCA1LCAxNCwgNiwgOCwgMTMsIDYsIDUsIDE1LCAxMywgMTEsIDExCiAgXTsKCiAgdmFyIHV0aWxzJDcgPSB1dGlscyRnOwogIHZhciBhc3NlcnQkOCA9IG1pbmltYWxpc3RpY0Fzc2VydDsKCiAgZnVuY3Rpb24gSG1hYyhoYXNoLCBrZXksIGVuYykgewogICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEhtYWMpKQogICAgICByZXR1cm4gbmV3IEhtYWMoaGFzaCwga2V5LCBlbmMpOwogICAgdGhpcy5IYXNoID0gaGFzaDsKICAgIHRoaXMuYmxvY2tTaXplID0gaGFzaC5ibG9ja1NpemUgLyA4OwogICAgdGhpcy5vdXRTaXplID0gaGFzaC5vdXRTaXplIC8gODsKICAgIHRoaXMuaW5uZXIgPSBudWxsOwogICAgdGhpcy5vdXRlciA9IG51bGw7CgogICAgdGhpcy5faW5pdCh1dGlscyQ3LnRvQXJyYXkoa2V5LCBlbmMpKTsKICB9CiAgdmFyIGhtYWMgPSBIbWFjOwoKICBIbWFjLnByb3RvdHlwZS5faW5pdCA9IGZ1bmN0aW9uIGluaXQoa2V5KSB7CiAgICAvLyBTaG9ydGVuIGtleSwgaWYgbmVlZGVkCiAgICBpZiAoa2V5Lmxlbmd0aCA+IHRoaXMuYmxvY2tTaXplKQogICAgICBrZXkgPSBuZXcgdGhpcy5IYXNoKCkudXBkYXRlKGtleSkuZGlnZXN0KCk7CiAgICBhc3NlcnQkOChrZXkubGVuZ3RoIDw9IHRoaXMuYmxvY2tTaXplKTsKCiAgICAvLyBBZGQgcGFkZGluZyB0byBrZXkKICAgIGZvciAodmFyIGkgPSBrZXkubGVuZ3RoOyBpIDwgdGhpcy5ibG9ja1NpemU7IGkrKykKICAgICAga2V5LnB1c2goMCk7CgogICAgZm9yIChpID0gMDsgaSA8IGtleS5sZW5ndGg7IGkrKykKICAgICAga2V5W2ldIF49IDB4MzY7CiAgICB0aGlzLmlubmVyID0gbmV3IHRoaXMuSGFzaCgpLnVwZGF0ZShrZXkpOwoKICAgIC8vIDB4MzYgXiAweDVjID0gMHg2YQogICAgZm9yIChpID0gMDsgaSA8IGtleS5sZW5ndGg7IGkrKykKICAgICAga2V5W2ldIF49IDB4NmE7CiAgICB0aGlzLm91dGVyID0gbmV3IHRoaXMuSGFzaCgpLnVwZGF0ZShrZXkpOwogIH07CgogIEhtYWMucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIHVwZGF0ZShtc2csIGVuYykgewogICAgdGhpcy5pbm5lci51cGRhdGUobXNnLCBlbmMpOwogICAgcmV0dXJuIHRoaXM7CiAgfTsKCiAgSG1hYy5wcm90b3R5cGUuZGlnZXN0ID0gZnVuY3Rpb24gZGlnZXN0KGVuYykgewogICAgdGhpcy5vdXRlci51cGRhdGUodGhpcy5pbm5lci5kaWdlc3QoKSk7CiAgICByZXR1cm4gdGhpcy5vdXRlci5kaWdlc3QoZW5jKTsKICB9OwoKICAoZnVuY3Rpb24gKGV4cG9ydHMpIHsKICB2YXIgaGFzaCA9IGV4cG9ydHM7CgogIGhhc2gudXRpbHMgPSB1dGlscyRnOwogIGhhc2guY29tbW9uID0gY29tbW9uJDU7CiAgaGFzaC5zaGEgPSBzaGE7CiAgaGFzaC5yaXBlbWQgPSByaXBlbWQ7CiAgaGFzaC5obWFjID0gaG1hYzsKCiAgLy8gUHJveHkgaGFzaCBmdW5jdGlvbnMgdG8gdGhlIG1haW4gb2JqZWN0CiAgaGFzaC5zaGExID0gaGFzaC5zaGEuc2hhMTsKICBoYXNoLnNoYTI1NiA9IGhhc2guc2hhLnNoYTI1NjsKICBoYXNoLnNoYTIyNCA9IGhhc2guc2hhLnNoYTIyNDsKICBoYXNoLnNoYTM4NCA9IGhhc2guc2hhLnNoYTM4NDsKICBoYXNoLnNoYTUxMiA9IGhhc2guc2hhLnNoYTUxMjsKICBoYXNoLnJpcGVtZDE2MCA9IGhhc2gucmlwZW1kLnJpcGVtZDE2MDsKICB9KGhhc2gkMikpOwoKICAoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCiAgdmFyIGN1cnZlcyA9IGV4cG9ydHM7CgogIHZhciBoYXNoID0gaGFzaCQyOwogIHZhciBjdXJ2ZSQxID0gY3VydmU7CiAgdmFyIHV0aWxzID0gdXRpbHMkbTsKCiAgdmFyIGFzc2VydCA9IHV0aWxzLmFzc2VydDsKCiAgZnVuY3Rpb24gUHJlc2V0Q3VydmUob3B0aW9ucykgewogICAgaWYgKG9wdGlvbnMudHlwZSA9PT0gJ3Nob3J0JykKICAgICAgdGhpcy5jdXJ2ZSA9IG5ldyBjdXJ2ZSQxLnNob3J0KG9wdGlvbnMpOwogICAgZWxzZSBpZiAob3B0aW9ucy50eXBlID09PSAnZWR3YXJkcycpCiAgICAgIHRoaXMuY3VydmUgPSBuZXcgY3VydmUkMS5lZHdhcmRzKG9wdGlvbnMpOwogICAgZWxzZQogICAgICB0aGlzLmN1cnZlID0gbmV3IGN1cnZlJDEubW9udChvcHRpb25zKTsKICAgIHRoaXMuZyA9IHRoaXMuY3VydmUuZzsKICAgIHRoaXMubiA9IHRoaXMuY3VydmUubjsKICAgIHRoaXMuaGFzaCA9IG9wdGlvbnMuaGFzaDsKCiAgICBhc3NlcnQodGhpcy5nLnZhbGlkYXRlKCksICdJbnZhbGlkIGN1cnZlJyk7CiAgICBhc3NlcnQodGhpcy5nLm11bCh0aGlzLm4pLmlzSW5maW5pdHkoKSwgJ0ludmFsaWQgY3VydmUsIEcqTiAhPSBPJyk7CiAgfQogIGN1cnZlcy5QcmVzZXRDdXJ2ZSA9IFByZXNldEN1cnZlOwoKICBmdW5jdGlvbiBkZWZpbmVDdXJ2ZShuYW1lLCBvcHRpb25zKSB7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3VydmVzLCBuYW1lLCB7CiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgZ2V0OiBmdW5jdGlvbigpIHsKICAgICAgICB2YXIgY3VydmUgPSBuZXcgUHJlc2V0Q3VydmUob3B0aW9ucyk7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGN1cnZlcywgbmFtZSwgewogICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgICAgIHZhbHVlOiBjdXJ2ZSwKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gY3VydmU7CiAgICAgIH0sCiAgICB9KTsKICB9CgogIGRlZmluZUN1cnZlKCdwMTkyJywgewogICAgdHlwZTogJ3Nob3J0JywKICAgIHByaW1lOiAncDE5MicsCiAgICBwOiAnZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmUgZmZmZmZmZmYgZmZmZmZmZmYnLAogICAgYTogJ2ZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZlIGZmZmZmZmZmIGZmZmZmZmZjJywKICAgIGI6ICc2NDIxMDUxOSBlNTljODBlNyAwZmE3ZTlhYiA3MjI0MzA0OSBmZWI4ZGVlYyBjMTQ2YjliMScsCiAgICBuOiAnZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgOTlkZWY4MzYgMTQ2YmM5YjEgYjRkMjI4MzEnLAogICAgaGFzaDogaGFzaC5zaGEyNTYsCiAgICBnUmVkOiBmYWxzZSwKICAgIGc6IFsKICAgICAgJzE4OGRhODBlIGIwMzA5MGY2IDdjYmYyMGViIDQzYTE4ODAwIGY0ZmYwYWZkIDgyZmYxMDEyJywKICAgICAgJzA3MTkyYjk1IGZmYzhkYTc4IDYzMTAxMWVkIDZiMjRjZGQ1IDczZjk3N2ExIDFlNzk0ODExJywKICAgIF0sCiAgfSk7CgogIGRlZmluZUN1cnZlKCdwMjI0JywgewogICAgdHlwZTogJ3Nob3J0JywKICAgIHByaW1lOiAncDIyNCcsCiAgICBwOiAnZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgMDAwMDAwMDAgMDAwMDAwMDAgMDAwMDAwMDEnLAogICAgYTogJ2ZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZlIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZlJywKICAgIGI6ICdiNDA1MGE4NSAwYzA0YjNhYiBmNTQxMzI1NiA1MDQ0YjBiNyBkN2JmZDhiYSAyNzBiMzk0MyAyMzU1ZmZiNCcsCiAgICBuOiAnZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZjE2YTIgZTBiOGYwM2UgMTNkZDI5NDUgNWM1YzJhM2QnLAogICAgaGFzaDogaGFzaC5zaGEyNTYsCiAgICBnUmVkOiBmYWxzZSwKICAgIGc6IFsKICAgICAgJ2I3MGUwY2JkIDZiYjRiZjdmIDMyMTM5MGI5IDRhMDNjMWQzIDU2YzIxMTIyIDM0MzI4MGQ2IDExNWMxZDIxJywKICAgICAgJ2JkMzc2Mzg4IGI1ZjcyM2ZiIDRjMjJkZmU2IGNkNDM3NWEwIDVhMDc0NzY0IDQ0ZDU4MTk5IDg1MDA3ZTM0JywKICAgIF0sCiAgfSk7CgogIGRlZmluZUN1cnZlKCdwMjU2JywgewogICAgdHlwZTogJ3Nob3J0JywKICAgIHByaW1lOiBudWxsLAogICAgcDogJ2ZmZmZmZmZmIDAwMDAwMDAxIDAwMDAwMDAwIDAwMDAwMDAwIDAwMDAwMDAwIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmJywKICAgIGE6ICdmZmZmZmZmZiAwMDAwMDAwMSAwMDAwMDAwMCAwMDAwMDAwMCAwMDAwMDAwMCBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmYycsCiAgICBiOiAnNWFjNjM1ZDggYWEzYTkzZTcgYjNlYmJkNTUgNzY5ODg2YmMgNjUxZDA2YjAgY2M1M2IwZjYgM2JjZTNjM2UgMjdkMjYwNGInLAogICAgbjogJ2ZmZmZmZmZmIDAwMDAwMDAwIGZmZmZmZmZmIGZmZmZmZmZmIGJjZTZmYWFkIGE3MTc5ZTg0IGYzYjljYWMyIGZjNjMyNTUxJywKICAgIGhhc2g6IGhhc2guc2hhMjU2LAogICAgZ1JlZDogZmFsc2UsCiAgICBnOiBbCiAgICAgICc2YjE3ZDFmMiBlMTJjNDI0NyBmOGJjZTZlNSA2M2E0NDBmMiA3NzAzN2Q4MSAyZGViMzNhMCBmNGExMzk0NSBkODk4YzI5NicsCiAgICAgICc0ZmUzNDJlMiBmZTFhN2Y5YiA4ZWU3ZWI0YSA3YzBmOWUxNiAyYmNlMzM1NyA2YjMxNWVjZSBjYmI2NDA2OCAzN2JmNTFmNScsCiAgICBdLAogIH0pOwoKICBkZWZpbmVDdXJ2ZSgncDM4NCcsIHsKICAgIHR5cGU6ICdzaG9ydCcsCiAgICBwcmltZTogbnVsbCwKICAgIHA6ICdmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiAnICsKICAgICAgICdmZmZmZmZmZSBmZmZmZmZmZiAwMDAwMDAwMCAwMDAwMDAwMCBmZmZmZmZmZicsCiAgICBhOiAnZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgJyArCiAgICAgICAnZmZmZmZmZmUgZmZmZmZmZmYgMDAwMDAwMDAgMDAwMDAwMDAgZmZmZmZmZmMnLAogICAgYjogJ2IzMzEyZmE3IGUyM2VlN2U0IDk4OGUwNTZiIGUzZjgyZDE5IDE4MWQ5YzZlIGZlODE0MTEyIDAzMTQwODhmICcgKwogICAgICAgJzUwMTM4NzVhIGM2NTYzOThkIDhhMmVkMTlkIDJhODVjOGVkIGQzZWMyYWVmJywKICAgIG46ICdmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBjNzYzNGQ4MSAnICsKICAgICAgICdmNDM3MmRkZiA1ODFhMGRiMiA0OGIwYTc3YSBlY2VjMTk2YSBjY2M1Mjk3MycsCiAgICBoYXNoOiBoYXNoLnNoYTM4NCwKICAgIGdSZWQ6IGZhbHNlLAogICAgZzogWwogICAgICAnYWE4N2NhMjIgYmU4YjA1MzcgOGViMWM3MWUgZjMyMGFkNzQgNmUxZDNiNjIgOGJhNzliOTggNTlmNzQxZTAgODI1NDJhMzggJyArCiAgICAgICc1NTAyZjI1ZCBiZjU1Mjk2YyAzYTU0NWUzOCA3Mjc2MGFiNycsCiAgICAgICczNjE3ZGU0YSA5NjI2MmM2ZiA1ZDllOThiZiA5MjkyZGMyOSBmOGY0MWRiZCAyODlhMTQ3YyBlOWRhMzExMyBiNWYwYjhjMCAnICsKICAgICAgJzBhNjBiMWNlIDFkN2U4MTlkIDdhNDMxZDdjIDkwZWEwZTVmJywKICAgIF0sCiAgfSk7CgogIGRlZmluZUN1cnZlKCdwNTIxJywgewogICAgdHlwZTogJ3Nob3J0JywKICAgIHByaW1lOiBudWxsLAogICAgcDogJzAwMDAwMWZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmICcgKwogICAgICAgJ2ZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmICcgKwogICAgICAgJ2ZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmJywKICAgIGE6ICcwMDAwMDFmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiAnICsKICAgICAgICdmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiAnICsKICAgICAgICdmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmYycsCiAgICBiOiAnMDAwMDAwNTEgOTUzZWI5NjEgOGUxYzlhMWYgOTI5YTIxYTAgYjY4NTQwZWUgYTJkYTcyNWIgJyArCiAgICAgICAnOTliMzE1ZjMgYjhiNDg5OTEgOGVmMTA5ZTEgNTYxOTM5NTEgZWM3ZTkzN2IgMTY1MmMwYmQgJyArCiAgICAgICAnM2JiMWJmMDcgMzU3M2RmODggM2QyYzM0ZjEgZWY0NTFmZDQgNmI1MDNmMDAnLAogICAgbjogJzAwMDAwMWZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmICcgKwogICAgICAgJ2ZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZhIDUxODY4NzgzIGJmMmY5NjZiIDdmY2MwMTQ4ICcgKwogICAgICAgJ2Y3MDlhNWQwIDNiYjVjOWI4IDg5OWM0N2FlIGJiNmZiNzFlIDkxMzg2NDA5JywKICAgIGhhc2g6IGhhc2guc2hhNTEyLAogICAgZ1JlZDogZmFsc2UsCiAgICBnOiBbCiAgICAgICcwMDAwMDBjNiA4NThlMDZiNyAwNDA0ZTljZCA5ZTNlY2I2NiAyMzk1YjQ0MiA5YzY0ODEzOSAnICsKICAgICAgJzA1M2ZiNTIxIGY4MjhhZjYwIDZiNGQzZGJhIGExNGI1ZTc3IGVmZTc1OTI4IGZlMWRjMTI3ICcgKwogICAgICAnYTJmZmE4ZGUgMzM0OGIzYzEgODU2YTQyOWIgZjk3ZTdlMzEgYzJlNWJkNjYnLAogICAgICAnMDAwMDAxMTggMzkyOTZhNzggOWEzYmMwMDQgNWM4YTVmYjQgMmM3ZDFiZDkgOThmNTQ0NDkgJyArCiAgICAgICc1NzliNDQ2OCAxN2FmYmQxNyAyNzNlNjYyYyA5N2VlNzI5OSA1ZWY0MjY0MCBjNTUwYjkwMSAnICsKICAgICAgJzNmYWQwNzYxIDM1M2M3MDg2IGEyNzJjMjQwIDg4YmU5NDc2IDlmZDE2NjUwJywKICAgIF0sCiAgfSk7CgogIGRlZmluZUN1cnZlKCdjdXJ2ZTI1NTE5JywgewogICAgdHlwZTogJ21vbnQnLAogICAgcHJpbWU6ICdwMjU1MTknLAogICAgcDogJzdmZmZmZmZmZmZmZmZmZmYgZmZmZmZmZmZmZmZmZmZmZiBmZmZmZmZmZmZmZmZmZmZmIGZmZmZmZmZmZmZmZmZmZWQnLAogICAgYTogJzc2ZDA2JywKICAgIGI6ICcxJywKICAgIG46ICcxMDAwMDAwMDAwMDAwMDAwIDAwMDAwMDAwMDAwMDAwMDAgMTRkZWY5ZGVhMmY3OWNkNiA1ODEyNjMxYTVjZjVkM2VkJywKICAgIGhhc2g6IGhhc2guc2hhMjU2LAogICAgZ1JlZDogZmFsc2UsCiAgICBnOiBbCiAgICAgICc5JywKICAgIF0sCiAgfSk7CgogIGRlZmluZUN1cnZlKCdlZDI1NTE5JywgewogICAgdHlwZTogJ2Vkd2FyZHMnLAogICAgcHJpbWU6ICdwMjU1MTknLAogICAgcDogJzdmZmZmZmZmZmZmZmZmZmYgZmZmZmZmZmZmZmZmZmZmZiBmZmZmZmZmZmZmZmZmZmZmIGZmZmZmZmZmZmZmZmZmZWQnLAogICAgYTogJy0xJywKICAgIGM6ICcxJywKICAgIC8vIC0xMjE2NjUgKiAoMTIxNjY2XigtMSkpIChtb2QgUCkKICAgIGQ6ICc1MjAzNmNlZTJiNmZmZTczIDhjYzc0MDc5Nzc3OWU4OTggMDA3MDBhNGQ0MTQxZDhhYiA3NWViNGRjYTEzNTk3OGEzJywKICAgIG46ICcxMDAwMDAwMDAwMDAwMDAwIDAwMDAwMDAwMDAwMDAwMDAgMTRkZWY5ZGVhMmY3OWNkNiA1ODEyNjMxYTVjZjVkM2VkJywKICAgIGhhc2g6IGhhc2guc2hhMjU2LAogICAgZ1JlZDogZmFsc2UsCiAgICBnOiBbCiAgICAgICcyMTY5MzZkM2NkNmU1M2ZlYzBhNGUyMzFmZGQ2ZGM1YzY5MmNjNzYwOTUyNWE3YjJjOTU2MmQ2MDhmMjVkNTFhJywKCiAgICAgIC8vIDQvNQogICAgICAnNjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY1OCcsCiAgICBdLAogIH0pOwoKICB2YXIgcHJlOwogIHRyeSB7CiAgICBwcmUgPSByZXF1aXJlKCcuL3ByZWNvbXB1dGVkL3NlY3AyNTZrMScpOwogIH0gY2F0Y2ggKGUpIHsKICAgIHByZSA9IHVuZGVmaW5lZDsKICB9CgogIGRlZmluZUN1cnZlKCdzZWNwMjU2azEnLCB7CiAgICB0eXBlOiAnc2hvcnQnLAogICAgcHJpbWU6ICdrMjU2JywKICAgIHA6ICdmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZSBmZmZmZmMyZicsCiAgICBhOiAnMCcsCiAgICBiOiAnNycsCiAgICBuOiAnZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmUgYmFhZWRjZTYgYWY0OGEwM2IgYmZkMjVlOGMgZDAzNjQxNDEnLAogICAgaDogJzEnLAogICAgaGFzaDogaGFzaC5zaGEyNTYsCgogICAgLy8gUHJlY29tcHV0ZWQgZW5kb21vcnBoaXNtCiAgICBiZXRhOiAnN2FlOTZhMmI2NTdjMDcxMDZlNjQ0NzllYWMzNDM0ZTk5Y2YwNDk3NTEyZjU4OTk1YzEzOTZjMjg3MTk1MDFlZScsCiAgICBsYW1iZGE6ICc1MzYzYWQ0Y2MwNWMzMGUwYTUyNjFjMDI4ODEyNjQ1YTEyMmUyMmVhMjA4MTY2NzhkZjAyOTY3YzFiMjNiZDcyJywKICAgIGJhc2lzOiBbCiAgICAgIHsKICAgICAgICBhOiAnMzA4NmQyMjFhN2Q0NmJjZGU4NmM5MGU0OTI4NGViMTUnLAogICAgICAgIGI6ICctZTQ0MzdlZDYwMTBlODgyODZmNTQ3ZmE5MGFiZmU0YzMnLAogICAgICB9LAogICAgICB7CiAgICAgICAgYTogJzExNGNhNTBmN2E4ZTJmM2Y2NTdjMTEwOGQ5ZDQ0Y2ZkOCcsCiAgICAgICAgYjogJzMwODZkMjIxYTdkNDZiY2RlODZjOTBlNDkyODRlYjE1JywKICAgICAgfSwKICAgIF0sCgogICAgZ1JlZDogZmFsc2UsCiAgICBnOiBbCiAgICAgICc3OWJlNjY3ZWY5ZGNiYmFjNTVhMDYyOTVjZTg3MGIwNzAyOWJmY2RiMmRjZTI4ZDk1OWYyODE1YjE2ZjgxNzk4JywKICAgICAgJzQ4M2FkYTc3MjZhM2M0NjU1ZGE0ZmJmYzBlMTEwOGE4ZmQxN2I0NDhhNjg1NTQxOTljNDdkMDhmZmIxMGQ0YjgnLAogICAgICBwcmUsCiAgICBdLAogIH0pOwogIH0oY3VydmVzJDIpKTsKCiAgdmFyIGhhc2gkMSA9IGhhc2gkMjsKICB2YXIgdXRpbHMkNiA9IHV0aWxzJGw7CiAgdmFyIGFzc2VydCQ3ID0gbWluaW1hbGlzdGljQXNzZXJ0OwoKICBmdW5jdGlvbiBIbWFjRFJCRyQxKG9wdGlvbnMpIHsKICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBIbWFjRFJCRyQxKSkKICAgICAgcmV0dXJuIG5ldyBIbWFjRFJCRyQxKG9wdGlvbnMpOwogICAgdGhpcy5oYXNoID0gb3B0aW9ucy5oYXNoOwogICAgdGhpcy5wcmVkUmVzaXN0ID0gISFvcHRpb25zLnByZWRSZXNpc3Q7CgogICAgdGhpcy5vdXRMZW4gPSB0aGlzLmhhc2gub3V0U2l6ZTsKICAgIHRoaXMubWluRW50cm9weSA9IG9wdGlvbnMubWluRW50cm9weSB8fCB0aGlzLmhhc2guaG1hY1N0cmVuZ3RoOwoKICAgIHRoaXMuX3Jlc2VlZCA9IG51bGw7CiAgICB0aGlzLnJlc2VlZEludGVydmFsID0gbnVsbDsKICAgIHRoaXMuSyA9IG51bGw7CiAgICB0aGlzLlYgPSBudWxsOwoKICAgIHZhciBlbnRyb3B5ID0gdXRpbHMkNi50b0FycmF5KG9wdGlvbnMuZW50cm9weSwgb3B0aW9ucy5lbnRyb3B5RW5jIHx8ICdoZXgnKTsKICAgIHZhciBub25jZSA9IHV0aWxzJDYudG9BcnJheShvcHRpb25zLm5vbmNlLCBvcHRpb25zLm5vbmNlRW5jIHx8ICdoZXgnKTsKICAgIHZhciBwZXJzID0gdXRpbHMkNi50b0FycmF5KG9wdGlvbnMucGVycywgb3B0aW9ucy5wZXJzRW5jIHx8ICdoZXgnKTsKICAgIGFzc2VydCQ3KGVudHJvcHkubGVuZ3RoID49ICh0aGlzLm1pbkVudHJvcHkgLyA4KSwKICAgICAgICAgICAnTm90IGVub3VnaCBlbnRyb3B5LiBNaW5pbXVtIGlzOiAnICsgdGhpcy5taW5FbnRyb3B5ICsgJyBiaXRzJyk7CiAgICB0aGlzLl9pbml0KGVudHJvcHksIG5vbmNlLCBwZXJzKTsKICB9CiAgdmFyIGhtYWNEcmJnID0gSG1hY0RSQkckMTsKCiAgSG1hY0RSQkckMS5wcm90b3R5cGUuX2luaXQgPSBmdW5jdGlvbiBpbml0KGVudHJvcHksIG5vbmNlLCBwZXJzKSB7CiAgICB2YXIgc2VlZCA9IGVudHJvcHkuY29uY2F0KG5vbmNlKS5jb25jYXQocGVycyk7CgogICAgdGhpcy5LID0gbmV3IEFycmF5KHRoaXMub3V0TGVuIC8gOCk7CiAgICB0aGlzLlYgPSBuZXcgQXJyYXkodGhpcy5vdXRMZW4gLyA4KTsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5WLmxlbmd0aDsgaSsrKSB7CiAgICAgIHRoaXMuS1tpXSA9IDB4MDA7CiAgICAgIHRoaXMuVltpXSA9IDB4MDE7CiAgICB9CgogICAgdGhpcy5fdXBkYXRlKHNlZWQpOwogICAgdGhpcy5fcmVzZWVkID0gMTsKICAgIHRoaXMucmVzZWVkSW50ZXJ2YWwgPSAweDEwMDAwMDAwMDAwMDA7ICAvLyAyXjQ4CiAgfTsKCiAgSG1hY0RSQkckMS5wcm90b3R5cGUuX2htYWMgPSBmdW5jdGlvbiBobWFjKCkgewogICAgcmV0dXJuIG5ldyBoYXNoJDEuaG1hYyh0aGlzLmhhc2gsIHRoaXMuSyk7CiAgfTsKCiAgSG1hY0RSQkckMS5wcm90b3R5cGUuX3VwZGF0ZSA9IGZ1bmN0aW9uIHVwZGF0ZShzZWVkKSB7CiAgICB2YXIga21hYyA9IHRoaXMuX2htYWMoKQogICAgICAgICAgICAgICAgICAgLnVwZGF0ZSh0aGlzLlYpCiAgICAgICAgICAgICAgICAgICAudXBkYXRlKFsgMHgwMCBdKTsKICAgIGlmIChzZWVkKQogICAgICBrbWFjID0ga21hYy51cGRhdGUoc2VlZCk7CiAgICB0aGlzLksgPSBrbWFjLmRpZ2VzdCgpOwogICAgdGhpcy5WID0gdGhpcy5faG1hYygpLnVwZGF0ZSh0aGlzLlYpLmRpZ2VzdCgpOwogICAgaWYgKCFzZWVkKQogICAgICByZXR1cm47CgogICAgdGhpcy5LID0gdGhpcy5faG1hYygpCiAgICAgICAgICAgICAgICAgLnVwZGF0ZSh0aGlzLlYpCiAgICAgICAgICAgICAgICAgLnVwZGF0ZShbIDB4MDEgXSkKICAgICAgICAgICAgICAgICAudXBkYXRlKHNlZWQpCiAgICAgICAgICAgICAgICAgLmRpZ2VzdCgpOwogICAgdGhpcy5WID0gdGhpcy5faG1hYygpLnVwZGF0ZSh0aGlzLlYpLmRpZ2VzdCgpOwogIH07CgogIEhtYWNEUkJHJDEucHJvdG90eXBlLnJlc2VlZCA9IGZ1bmN0aW9uIHJlc2VlZChlbnRyb3B5LCBlbnRyb3B5RW5jLCBhZGQsIGFkZEVuYykgewogICAgLy8gT3B0aW9uYWwgZW50cm9weSBlbmMKICAgIGlmICh0eXBlb2YgZW50cm9weUVuYyAhPT0gJ3N0cmluZycpIHsKICAgICAgYWRkRW5jID0gYWRkOwogICAgICBhZGQgPSBlbnRyb3B5RW5jOwogICAgICBlbnRyb3B5RW5jID0gbnVsbDsKICAgIH0KCiAgICBlbnRyb3B5ID0gdXRpbHMkNi50b0FycmF5KGVudHJvcHksIGVudHJvcHlFbmMpOwogICAgYWRkID0gdXRpbHMkNi50b0FycmF5KGFkZCwgYWRkRW5jKTsKCiAgICBhc3NlcnQkNyhlbnRyb3B5Lmxlbmd0aCA+PSAodGhpcy5taW5FbnRyb3B5IC8gOCksCiAgICAgICAgICAgJ05vdCBlbm91Z2ggZW50cm9weS4gTWluaW11bSBpczogJyArIHRoaXMubWluRW50cm9weSArICcgYml0cycpOwoKICAgIHRoaXMuX3VwZGF0ZShlbnRyb3B5LmNvbmNhdChhZGQgfHwgW10pKTsKICAgIHRoaXMuX3Jlc2VlZCA9IDE7CiAgfTsKCiAgSG1hY0RSQkckMS5wcm90b3R5cGUuZ2VuZXJhdGUgPSBmdW5jdGlvbiBnZW5lcmF0ZShsZW4sIGVuYywgYWRkLCBhZGRFbmMpIHsKICAgIGlmICh0aGlzLl9yZXNlZWQgPiB0aGlzLnJlc2VlZEludGVydmFsKQogICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Jlc2VlZCBpcyByZXF1aXJlZCcpOwoKICAgIC8vIE9wdGlvbmFsIGVuY29kaW5nCiAgICBpZiAodHlwZW9mIGVuYyAhPT0gJ3N0cmluZycpIHsKICAgICAgYWRkRW5jID0gYWRkOwogICAgICBhZGQgPSBlbmM7CiAgICAgIGVuYyA9IG51bGw7CiAgICB9CgogICAgLy8gT3B0aW9uYWwgYWRkaXRpb25hbCBkYXRhCiAgICBpZiAoYWRkKSB7CiAgICAgIGFkZCA9IHV0aWxzJDYudG9BcnJheShhZGQsIGFkZEVuYyB8fCAnaGV4Jyk7CiAgICAgIHRoaXMuX3VwZGF0ZShhZGQpOwogICAgfQoKICAgIHZhciB0ZW1wID0gW107CiAgICB3aGlsZSAodGVtcC5sZW5ndGggPCBsZW4pIHsKICAgICAgdGhpcy5WID0gdGhpcy5faG1hYygpLnVwZGF0ZSh0aGlzLlYpLmRpZ2VzdCgpOwogICAgICB0ZW1wID0gdGVtcC5jb25jYXQodGhpcy5WKTsKICAgIH0KCiAgICB2YXIgcmVzID0gdGVtcC5zbGljZSgwLCBsZW4pOwogICAgdGhpcy5fdXBkYXRlKGFkZCk7CiAgICB0aGlzLl9yZXNlZWQrKzsKICAgIHJldHVybiB1dGlscyQ2LmVuY29kZShyZXMsIGVuYyk7CiAgfTsKCiAgdmFyIEJOJDggPSBibiQ0LmV4cG9ydHM7CiAgdmFyIHV0aWxzJDUgPSB1dGlscyRtOwogIHZhciBhc3NlcnQkNiA9IHV0aWxzJDUuYXNzZXJ0OwoKICBmdW5jdGlvbiBLZXlQYWlyJDMoZWMsIG9wdGlvbnMpIHsKICAgIHRoaXMuZWMgPSBlYzsKICAgIHRoaXMucHJpdiA9IG51bGw7CiAgICB0aGlzLnB1YiA9IG51bGw7CgogICAgLy8gS2V5UGFpcihlYywgeyBwcml2OiAuLi4sIHB1YjogLi4uIH0pCiAgICBpZiAob3B0aW9ucy5wcml2KQogICAgICB0aGlzLl9pbXBvcnRQcml2YXRlKG9wdGlvbnMucHJpdiwgb3B0aW9ucy5wcml2RW5jKTsKICAgIGlmIChvcHRpb25zLnB1YikKICAgICAgdGhpcy5faW1wb3J0UHVibGljKG9wdGlvbnMucHViLCBvcHRpb25zLnB1YkVuYyk7CiAgfQogIHZhciBrZXkkMiA9IEtleVBhaXIkMzsKCiAgS2V5UGFpciQzLmZyb21QdWJsaWMgPSBmdW5jdGlvbiBmcm9tUHVibGljKGVjLCBwdWIsIGVuYykgewogICAgaWYgKHB1YiBpbnN0YW5jZW9mIEtleVBhaXIkMykKICAgICAgcmV0dXJuIHB1YjsKCiAgICByZXR1cm4gbmV3IEtleVBhaXIkMyhlYywgewogICAgICBwdWI6IHB1YiwKICAgICAgcHViRW5jOiBlbmMsCiAgICB9KTsKICB9OwoKICBLZXlQYWlyJDMuZnJvbVByaXZhdGUgPSBmdW5jdGlvbiBmcm9tUHJpdmF0ZShlYywgcHJpdiwgZW5jKSB7CiAgICBpZiAocHJpdiBpbnN0YW5jZW9mIEtleVBhaXIkMykKICAgICAgcmV0dXJuIHByaXY7CgogICAgcmV0dXJuIG5ldyBLZXlQYWlyJDMoZWMsIHsKICAgICAgcHJpdjogcHJpdiwKICAgICAgcHJpdkVuYzogZW5jLAogICAgfSk7CiAgfTsKCiAgS2V5UGFpciQzLnByb3RvdHlwZS52YWxpZGF0ZSA9IGZ1bmN0aW9uIHZhbGlkYXRlKCkgewogICAgdmFyIHB1YiA9IHRoaXMuZ2V0UHVibGljKCk7CgogICAgaWYgKHB1Yi5pc0luZmluaXR5KCkpCiAgICAgIHJldHVybiB7IHJlc3VsdDogZmFsc2UsIHJlYXNvbjogJ0ludmFsaWQgcHVibGljIGtleScgfTsKICAgIGlmICghcHViLnZhbGlkYXRlKCkpCiAgICAgIHJldHVybiB7IHJlc3VsdDogZmFsc2UsIHJlYXNvbjogJ1B1YmxpYyBrZXkgaXMgbm90IGEgcG9pbnQnIH07CiAgICBpZiAoIXB1Yi5tdWwodGhpcy5lYy5jdXJ2ZS5uKS5pc0luZmluaXR5KCkpCiAgICAgIHJldHVybiB7IHJlc3VsdDogZmFsc2UsIHJlYXNvbjogJ1B1YmxpYyBrZXkgKiBOICE9IE8nIH07CgogICAgcmV0dXJuIHsgcmVzdWx0OiB0cnVlLCByZWFzb246IG51bGwgfTsKICB9OwoKICBLZXlQYWlyJDMucHJvdG90eXBlLmdldFB1YmxpYyA9IGZ1bmN0aW9uIGdldFB1YmxpYyhjb21wYWN0LCBlbmMpIHsKICAgIC8vIGNvbXBhY3QgaXMgb3B0aW9uYWwgYXJndW1lbnQKICAgIGlmICh0eXBlb2YgY29tcGFjdCA9PT0gJ3N0cmluZycpIHsKICAgICAgZW5jID0gY29tcGFjdDsKICAgICAgY29tcGFjdCA9IG51bGw7CiAgICB9CgogICAgaWYgKCF0aGlzLnB1YikKICAgICAgdGhpcy5wdWIgPSB0aGlzLmVjLmcubXVsKHRoaXMucHJpdik7CgogICAgaWYgKCFlbmMpCiAgICAgIHJldHVybiB0aGlzLnB1YjsKCiAgICByZXR1cm4gdGhpcy5wdWIuZW5jb2RlKGVuYywgY29tcGFjdCk7CiAgfTsKCiAgS2V5UGFpciQzLnByb3RvdHlwZS5nZXRQcml2YXRlID0gZnVuY3Rpb24gZ2V0UHJpdmF0ZShlbmMpIHsKICAgIGlmIChlbmMgPT09ICdoZXgnKQogICAgICByZXR1cm4gdGhpcy5wcml2LnRvU3RyaW5nKDE2LCAyKTsKICAgIGVsc2UKICAgICAgcmV0dXJuIHRoaXMucHJpdjsKICB9OwoKICBLZXlQYWlyJDMucHJvdG90eXBlLl9pbXBvcnRQcml2YXRlID0gZnVuY3Rpb24gX2ltcG9ydFByaXZhdGUoa2V5LCBlbmMpIHsKICAgIHRoaXMucHJpdiA9IG5ldyBCTiQ4KGtleSwgZW5jIHx8IDE2KTsKCiAgICAvLyBFbnN1cmUgdGhhdCB0aGUgcHJpdiB3b24ndCBiZSBiaWdnZXIgdGhhbiBuLCBvdGhlcndpc2Ugd2UgbWF5IGZhaWwKICAgIC8vIGluIGZpeGVkIG11bHRpcGxpY2F0aW9uIG1ldGhvZAogICAgdGhpcy5wcml2ID0gdGhpcy5wcml2LnVtb2QodGhpcy5lYy5jdXJ2ZS5uKTsKICB9OwoKICBLZXlQYWlyJDMucHJvdG90eXBlLl9pbXBvcnRQdWJsaWMgPSBmdW5jdGlvbiBfaW1wb3J0UHVibGljKGtleSwgZW5jKSB7CiAgICBpZiAoa2V5LnggfHwga2V5LnkpIHsKICAgICAgLy8gTW9udGdvbWVyeSBwb2ludHMgb25seSBoYXZlIGFuIGB4YCBjb29yZGluYXRlLgogICAgICAvLyBXZWllcnN0cmFzcy9FZHdhcmRzIHBvaW50cyBvbiB0aGUgb3RoZXIgaGFuZCBoYXZlIGJvdGggYHhgIGFuZAogICAgICAvLyBgeWAgY29vcmRpbmF0ZXMuCiAgICAgIGlmICh0aGlzLmVjLmN1cnZlLnR5cGUgPT09ICdtb250JykgewogICAgICAgIGFzc2VydCQ2KGtleS54LCAnTmVlZCB4IGNvb3JkaW5hdGUnKTsKICAgICAgfSBlbHNlIGlmICh0aGlzLmVjLmN1cnZlLnR5cGUgPT09ICdzaG9ydCcgfHwKICAgICAgICAgICAgICAgICB0aGlzLmVjLmN1cnZlLnR5cGUgPT09ICdlZHdhcmRzJykgewogICAgICAgIGFzc2VydCQ2KGtleS54ICYmIGtleS55LCAnTmVlZCBib3RoIHggYW5kIHkgY29vcmRpbmF0ZScpOwogICAgICB9CiAgICAgIHRoaXMucHViID0gdGhpcy5lYy5jdXJ2ZS5wb2ludChrZXkueCwga2V5LnkpOwogICAgICByZXR1cm47CiAgICB9CiAgICB0aGlzLnB1YiA9IHRoaXMuZWMuY3VydmUuZGVjb2RlUG9pbnQoa2V5LCBlbmMpOwogIH07CgogIC8vIEVDREgKICBLZXlQYWlyJDMucHJvdG90eXBlLmRlcml2ZSA9IGZ1bmN0aW9uIGRlcml2ZShwdWIpIHsKICAgIGlmKCFwdWIudmFsaWRhdGUoKSkgewogICAgICBhc3NlcnQkNihwdWIudmFsaWRhdGUoKSwgJ3B1YmxpYyBwb2ludCBub3QgdmFsaWRhdGVkJyk7CiAgICB9CiAgICByZXR1cm4gcHViLm11bCh0aGlzLnByaXYpLmdldFgoKTsKICB9OwoKICAvLyBFQ0RTQQogIEtleVBhaXIkMy5wcm90b3R5cGUuc2lnbiA9IGZ1bmN0aW9uIHNpZ24obXNnLCBlbmMsIG9wdGlvbnMpIHsKICAgIHJldHVybiB0aGlzLmVjLnNpZ24obXNnLCB0aGlzLCBlbmMsIG9wdGlvbnMpOwogIH07CgogIEtleVBhaXIkMy5wcm90b3R5cGUudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1zZywgc2lnbmF0dXJlKSB7CiAgICByZXR1cm4gdGhpcy5lYy52ZXJpZnkobXNnLCBzaWduYXR1cmUsIHRoaXMpOwogIH07CgogIEtleVBhaXIkMy5wcm90b3R5cGUuaW5zcGVjdCA9IGZ1bmN0aW9uIGluc3BlY3QoKSB7CiAgICByZXR1cm4gJzxLZXkgcHJpdjogJyArICh0aGlzLnByaXYgJiYgdGhpcy5wcml2LnRvU3RyaW5nKDE2LCAyKSkgKwogICAgICAgICAgICcgcHViOiAnICsgKHRoaXMucHViICYmIHRoaXMucHViLmluc3BlY3QoKSkgKyAnID4nOwogIH07CgogIHZhciBCTiQ3ID0gYm4kNC5leHBvcnRzOwoKICB2YXIgdXRpbHMkNCA9IHV0aWxzJG07CiAgdmFyIGFzc2VydCQ1ID0gdXRpbHMkNC5hc3NlcnQ7CgogIGZ1bmN0aW9uIFNpZ25hdHVyZSQzKG9wdGlvbnMsIGVuYykgewogICAgaWYgKG9wdGlvbnMgaW5zdGFuY2VvZiBTaWduYXR1cmUkMykKICAgICAgcmV0dXJuIG9wdGlvbnM7CgogICAgaWYgKHRoaXMuX2ltcG9ydERFUihvcHRpb25zLCBlbmMpKQogICAgICByZXR1cm47CgogICAgYXNzZXJ0JDUob3B0aW9ucy5yICYmIG9wdGlvbnMucywgJ1NpZ25hdHVyZSB3aXRob3V0IHIgb3IgcycpOwogICAgdGhpcy5yID0gbmV3IEJOJDcob3B0aW9ucy5yLCAxNik7CiAgICB0aGlzLnMgPSBuZXcgQk4kNyhvcHRpb25zLnMsIDE2KTsKICAgIGlmIChvcHRpb25zLnJlY292ZXJ5UGFyYW0gPT09IHVuZGVmaW5lZCkKICAgICAgdGhpcy5yZWNvdmVyeVBhcmFtID0gbnVsbDsKICAgIGVsc2UKICAgICAgdGhpcy5yZWNvdmVyeVBhcmFtID0gb3B0aW9ucy5yZWNvdmVyeVBhcmFtOwogIH0KICB2YXIgc2lnbmF0dXJlJDEgPSBTaWduYXR1cmUkMzsKCiAgZnVuY3Rpb24gUG9zaXRpb24oKSB7CiAgICB0aGlzLnBsYWNlID0gMDsKICB9CgogIGZ1bmN0aW9uIGdldExlbmd0aChidWYsIHApIHsKICAgIHZhciBpbml0aWFsID0gYnVmW3AucGxhY2UrK107CiAgICBpZiAoIShpbml0aWFsICYgMHg4MCkpIHsKICAgICAgcmV0dXJuIGluaXRpYWw7CiAgICB9CiAgICB2YXIgb2N0ZXRMZW4gPSBpbml0aWFsICYgMHhmOwoKICAgIC8vIEluZGVmaW5pdGUgbGVuZ3RoIG9yIG92ZXJmbG93CiAgICBpZiAob2N0ZXRMZW4gPT09IDAgfHwgb2N0ZXRMZW4gPiA0KSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICB2YXIgdmFsID0gMDsKICAgIGZvciAodmFyIGkgPSAwLCBvZmYgPSBwLnBsYWNlOyBpIDwgb2N0ZXRMZW47IGkrKywgb2ZmKyspIHsKICAgICAgdmFsIDw8PSA4OwogICAgICB2YWwgfD0gYnVmW29mZl07CiAgICAgIHZhbCA+Pj49IDA7CiAgICB9CgogICAgLy8gTGVhZGluZyB6ZXJvZXMKICAgIGlmICh2YWwgPD0gMHg3ZikgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgcC5wbGFjZSA9IG9mZjsKICAgIHJldHVybiB2YWw7CiAgfQoKICBmdW5jdGlvbiBybVBhZGRpbmcoYnVmKSB7CiAgICB2YXIgaSA9IDA7CiAgICB2YXIgbGVuID0gYnVmLmxlbmd0aCAtIDE7CiAgICB3aGlsZSAoIWJ1ZltpXSAmJiAhKGJ1ZltpICsgMV0gJiAweDgwKSAmJiBpIDwgbGVuKSB7CiAgICAgIGkrKzsKICAgIH0KICAgIGlmIChpID09PSAwKSB7CiAgICAgIHJldHVybiBidWY7CiAgICB9CiAgICByZXR1cm4gYnVmLnNsaWNlKGkpOwogIH0KCiAgU2lnbmF0dXJlJDMucHJvdG90eXBlLl9pbXBvcnRERVIgPSBmdW5jdGlvbiBfaW1wb3J0REVSKGRhdGEsIGVuYykgewogICAgZGF0YSA9IHV0aWxzJDQudG9BcnJheShkYXRhLCBlbmMpOwogICAgdmFyIHAgPSBuZXcgUG9zaXRpb24oKTsKICAgIGlmIChkYXRhW3AucGxhY2UrK10gIT09IDB4MzApIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgdmFyIGxlbiA9IGdldExlbmd0aChkYXRhLCBwKTsKICAgIGlmIChsZW4gPT09IGZhbHNlKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIGlmICgobGVuICsgcC5wbGFjZSkgIT09IGRhdGEubGVuZ3RoKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIGlmIChkYXRhW3AucGxhY2UrK10gIT09IDB4MDIpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgdmFyIHJsZW4gPSBnZXRMZW5ndGgoZGF0YSwgcCk7CiAgICBpZiAocmxlbiA9PT0gZmFsc2UpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgdmFyIHIgPSBkYXRhLnNsaWNlKHAucGxhY2UsIHJsZW4gKyBwLnBsYWNlKTsKICAgIHAucGxhY2UgKz0gcmxlbjsKICAgIGlmIChkYXRhW3AucGxhY2UrK10gIT09IDB4MDIpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgdmFyIHNsZW4gPSBnZXRMZW5ndGgoZGF0YSwgcCk7CiAgICBpZiAoc2xlbiA9PT0gZmFsc2UpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgaWYgKGRhdGEubGVuZ3RoICE9PSBzbGVuICsgcC5wbGFjZSkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICB2YXIgcyA9IGRhdGEuc2xpY2UocC5wbGFjZSwgc2xlbiArIHAucGxhY2UpOwogICAgaWYgKHJbMF0gPT09IDApIHsKICAgICAgaWYgKHJbMV0gJiAweDgwKSB7CiAgICAgICAgciA9IHIuc2xpY2UoMSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gTGVhZGluZyB6ZXJvZXMKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH0KICAgIGlmIChzWzBdID09PSAwKSB7CiAgICAgIGlmIChzWzFdICYgMHg4MCkgewogICAgICAgIHMgPSBzLnNsaWNlKDEpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIExlYWRpbmcgemVyb2VzCiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9CgogICAgdGhpcy5yID0gbmV3IEJOJDcocik7CiAgICB0aGlzLnMgPSBuZXcgQk4kNyhzKTsKICAgIHRoaXMucmVjb3ZlcnlQYXJhbSA9IG51bGw7CgogICAgcmV0dXJuIHRydWU7CiAgfTsKCiAgZnVuY3Rpb24gY29uc3RydWN0TGVuZ3RoKGFyciwgbGVuKSB7CiAgICBpZiAobGVuIDwgMHg4MCkgewogICAgICBhcnIucHVzaChsZW4pOwogICAgICByZXR1cm47CiAgICB9CiAgICB2YXIgb2N0ZXRzID0gMSArIChNYXRoLmxvZyhsZW4pIC8gTWF0aC5MTjIgPj4+IDMpOwogICAgYXJyLnB1c2gob2N0ZXRzIHwgMHg4MCk7CiAgICB3aGlsZSAoLS1vY3RldHMpIHsKICAgICAgYXJyLnB1c2goKGxlbiA+Pj4gKG9jdGV0cyA8PCAzKSkgJiAweGZmKTsKICAgIH0KICAgIGFyci5wdXNoKGxlbik7CiAgfQoKICBTaWduYXR1cmUkMy5wcm90b3R5cGUudG9ERVIgPSBmdW5jdGlvbiB0b0RFUihlbmMpIHsKICAgIHZhciByID0gdGhpcy5yLnRvQXJyYXkoKTsKICAgIHZhciBzID0gdGhpcy5zLnRvQXJyYXkoKTsKCiAgICAvLyBQYWQgdmFsdWVzCiAgICBpZiAoclswXSAmIDB4ODApCiAgICAgIHIgPSBbIDAgXS5jb25jYXQocik7CiAgICAvLyBQYWQgdmFsdWVzCiAgICBpZiAoc1swXSAmIDB4ODApCiAgICAgIHMgPSBbIDAgXS5jb25jYXQocyk7CgogICAgciA9IHJtUGFkZGluZyhyKTsKICAgIHMgPSBybVBhZGRpbmcocyk7CgogICAgd2hpbGUgKCFzWzBdICYmICEoc1sxXSAmIDB4ODApKSB7CiAgICAgIHMgPSBzLnNsaWNlKDEpOwogICAgfQogICAgdmFyIGFyciA9IFsgMHgwMiBdOwogICAgY29uc3RydWN0TGVuZ3RoKGFyciwgci5sZW5ndGgpOwogICAgYXJyID0gYXJyLmNvbmNhdChyKTsKICAgIGFyci5wdXNoKDB4MDIpOwogICAgY29uc3RydWN0TGVuZ3RoKGFyciwgcy5sZW5ndGgpOwogICAgdmFyIGJhY2tIYWxmID0gYXJyLmNvbmNhdChzKTsKICAgIHZhciByZXMgPSBbIDB4MzAgXTsKICAgIGNvbnN0cnVjdExlbmd0aChyZXMsIGJhY2tIYWxmLmxlbmd0aCk7CiAgICByZXMgPSByZXMuY29uY2F0KGJhY2tIYWxmKTsKICAgIHJldHVybiB1dGlscyQ0LmVuY29kZShyZXMsIGVuYyk7CiAgfTsKCiAgdmFyIEJOJDYgPSBibiQ0LmV4cG9ydHM7CiAgdmFyIEhtYWNEUkJHID0gaG1hY0RyYmc7CiAgdmFyIHV0aWxzJDMgPSB1dGlscyRtOwogIHZhciBjdXJ2ZXMkMSA9IGN1cnZlcyQyOwogIHZhciByYW5kID0gYnJvcmFuZC5leHBvcnRzOwogIHZhciBhc3NlcnQkNCA9IHV0aWxzJDMuYXNzZXJ0OwoKICB2YXIgS2V5UGFpciQyID0ga2V5JDI7CiAgdmFyIFNpZ25hdHVyZSQyID0gc2lnbmF0dXJlJDE7CgogIGZ1bmN0aW9uIEVDKG9wdGlvbnMpIHsKICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBFQykpCiAgICAgIHJldHVybiBuZXcgRUMob3B0aW9ucyk7CgogICAgLy8gU2hvcnRjdXQgYGVsbGlwdGljLmVjKGN1cnZlLW5hbWUpYAogICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnc3RyaW5nJykgewogICAgICBhc3NlcnQkNChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoY3VydmVzJDEsIG9wdGlvbnMpLAogICAgICAgICdVbmtub3duIGN1cnZlICcgKyBvcHRpb25zKTsKCiAgICAgIG9wdGlvbnMgPSBjdXJ2ZXMkMVtvcHRpb25zXTsKICAgIH0KCiAgICAvLyBTaG9ydGN1dCBmb3IgYGVsbGlwdGljLmVjKGVsbGlwdGljLmN1cnZlcy5jdXJ2ZU5hbWUpYAogICAgaWYgKG9wdGlvbnMgaW5zdGFuY2VvZiBjdXJ2ZXMkMS5QcmVzZXRDdXJ2ZSkKICAgICAgb3B0aW9ucyA9IHsgY3VydmU6IG9wdGlvbnMgfTsKCiAgICB0aGlzLmN1cnZlID0gb3B0aW9ucy5jdXJ2ZS5jdXJ2ZTsKICAgIHRoaXMubiA9IHRoaXMuY3VydmUubjsKICAgIHRoaXMubmggPSB0aGlzLm4udXNocm4oMSk7CiAgICB0aGlzLmcgPSB0aGlzLmN1cnZlLmc7CgogICAgLy8gUG9pbnQgb24gY3VydmUKICAgIHRoaXMuZyA9IG9wdGlvbnMuY3VydmUuZzsKICAgIHRoaXMuZy5wcmVjb21wdXRlKG9wdGlvbnMuY3VydmUubi5iaXRMZW5ndGgoKSArIDEpOwoKICAgIC8vIEhhc2ggZm9yIGZ1bmN0aW9uIGZvciBEUkJHCiAgICB0aGlzLmhhc2ggPSBvcHRpb25zLmhhc2ggfHwgb3B0aW9ucy5jdXJ2ZS5oYXNoOwogIH0KICB2YXIgZWMgPSBFQzsKCiAgRUMucHJvdG90eXBlLmtleVBhaXIgPSBmdW5jdGlvbiBrZXlQYWlyKG9wdGlvbnMpIHsKICAgIHJldHVybiBuZXcgS2V5UGFpciQyKHRoaXMsIG9wdGlvbnMpOwogIH07CgogIEVDLnByb3RvdHlwZS5rZXlGcm9tUHJpdmF0ZSA9IGZ1bmN0aW9uIGtleUZyb21Qcml2YXRlKHByaXYsIGVuYykgewogICAgcmV0dXJuIEtleVBhaXIkMi5mcm9tUHJpdmF0ZSh0aGlzLCBwcml2LCBlbmMpOwogIH07CgogIEVDLnByb3RvdHlwZS5rZXlGcm9tUHVibGljID0gZnVuY3Rpb24ga2V5RnJvbVB1YmxpYyhwdWIsIGVuYykgewogICAgcmV0dXJuIEtleVBhaXIkMi5mcm9tUHVibGljKHRoaXMsIHB1YiwgZW5jKTsKICB9OwoKICBFQy5wcm90b3R5cGUuZ2VuS2V5UGFpciA9IGZ1bmN0aW9uIGdlbktleVBhaXIob3B0aW9ucykgewogICAgaWYgKCFvcHRpb25zKQogICAgICBvcHRpb25zID0ge307CgogICAgLy8gSW5zdGFudGlhdGUgSG1hY19EUkJHCiAgICB2YXIgZHJiZyA9IG5ldyBIbWFjRFJCRyh7CiAgICAgIGhhc2g6IHRoaXMuaGFzaCwKICAgICAgcGVyczogb3B0aW9ucy5wZXJzLAogICAgICBwZXJzRW5jOiBvcHRpb25zLnBlcnNFbmMgfHwgJ3V0ZjgnLAogICAgICBlbnRyb3B5OiBvcHRpb25zLmVudHJvcHkgfHwgcmFuZCh0aGlzLmhhc2guaG1hY1N0cmVuZ3RoKSwKICAgICAgZW50cm9weUVuYzogb3B0aW9ucy5lbnRyb3B5ICYmIG9wdGlvbnMuZW50cm9weUVuYyB8fCAndXRmOCcsCiAgICAgIG5vbmNlOiB0aGlzLm4udG9BcnJheSgpLAogICAgfSk7CgogICAgdmFyIGJ5dGVzID0gdGhpcy5uLmJ5dGVMZW5ndGgoKTsKICAgIHZhciBuczIgPSB0aGlzLm4uc3ViKG5ldyBCTiQ2KDIpKTsKICAgIGZvciAoOzspIHsKICAgICAgdmFyIHByaXYgPSBuZXcgQk4kNihkcmJnLmdlbmVyYXRlKGJ5dGVzKSk7CiAgICAgIGlmIChwcml2LmNtcChuczIpID4gMCkKICAgICAgICBjb250aW51ZTsKCiAgICAgIHByaXYuaWFkZG4oMSk7CiAgICAgIHJldHVybiB0aGlzLmtleUZyb21Qcml2YXRlKHByaXYpOwogICAgfQogIH07CgogIEVDLnByb3RvdHlwZS5fdHJ1bmNhdGVUb04gPSBmdW5jdGlvbiBfdHJ1bmNhdGVUb04obXNnLCB0cnVuY09ubHkpIHsKICAgIHZhciBkZWx0YSA9IG1zZy5ieXRlTGVuZ3RoKCkgKiA4IC0gdGhpcy5uLmJpdExlbmd0aCgpOwogICAgaWYgKGRlbHRhID4gMCkKICAgICAgbXNnID0gbXNnLnVzaHJuKGRlbHRhKTsKICAgIGlmICghdHJ1bmNPbmx5ICYmIG1zZy5jbXAodGhpcy5uKSA+PSAwKQogICAgICByZXR1cm4gbXNnLnN1Yih0aGlzLm4pOwogICAgZWxzZQogICAgICByZXR1cm4gbXNnOwogIH07CgogIEVDLnByb3RvdHlwZS5zaWduID0gZnVuY3Rpb24gc2lnbihtc2csIGtleSwgZW5jLCBvcHRpb25zKSB7CiAgICBpZiAodHlwZW9mIGVuYyA9PT0gJ29iamVjdCcpIHsKICAgICAgb3B0aW9ucyA9IGVuYzsKICAgICAgZW5jID0gbnVsbDsKICAgIH0KICAgIGlmICghb3B0aW9ucykKICAgICAgb3B0aW9ucyA9IHt9OwoKICAgIGtleSA9IHRoaXMua2V5RnJvbVByaXZhdGUoa2V5LCBlbmMpOwogICAgbXNnID0gdGhpcy5fdHJ1bmNhdGVUb04obmV3IEJOJDYobXNnLCAxNikpOwoKICAgIC8vIFplcm8tZXh0ZW5kIGtleSB0byBwcm92aWRlIGVub3VnaCBlbnRyb3B5CiAgICB2YXIgYnl0ZXMgPSB0aGlzLm4uYnl0ZUxlbmd0aCgpOwogICAgdmFyIGJrZXkgPSBrZXkuZ2V0UHJpdmF0ZSgpLnRvQXJyYXkoJ2JlJywgYnl0ZXMpOwoKICAgIC8vIFplcm8tZXh0ZW5kIG5vbmNlIHRvIGhhdmUgdGhlIHNhbWUgYnl0ZSBzaXplIGFzIE4KICAgIHZhciBub25jZSA9IG1zZy50b0FycmF5KCdiZScsIGJ5dGVzKTsKCiAgICAvLyBJbnN0YW50aWF0ZSBIbWFjX0RSQkcKICAgIHZhciBkcmJnID0gbmV3IEhtYWNEUkJHKHsKICAgICAgaGFzaDogdGhpcy5oYXNoLAogICAgICBlbnRyb3B5OiBia2V5LAogICAgICBub25jZTogbm9uY2UsCiAgICAgIHBlcnM6IG9wdGlvbnMucGVycywKICAgICAgcGVyc0VuYzogb3B0aW9ucy5wZXJzRW5jIHx8ICd1dGY4JywKICAgIH0pOwoKICAgIC8vIE51bWJlciBvZiBieXRlcyB0byBnZW5lcmF0ZQogICAgdmFyIG5zMSA9IHRoaXMubi5zdWIobmV3IEJOJDYoMSkpOwoKICAgIGZvciAodmFyIGl0ZXIgPSAwOyA7IGl0ZXIrKykgewogICAgICB2YXIgayA9IG9wdGlvbnMuayA/CiAgICAgICAgb3B0aW9ucy5rKGl0ZXIpIDoKICAgICAgICBuZXcgQk4kNihkcmJnLmdlbmVyYXRlKHRoaXMubi5ieXRlTGVuZ3RoKCkpKTsKICAgICAgayA9IHRoaXMuX3RydW5jYXRlVG9OKGssIHRydWUpOwogICAgICBpZiAoay5jbXBuKDEpIDw9IDAgfHwgay5jbXAobnMxKSA+PSAwKQogICAgICAgIGNvbnRpbnVlOwoKICAgICAgdmFyIGtwID0gdGhpcy5nLm11bChrKTsKICAgICAgaWYgKGtwLmlzSW5maW5pdHkoKSkKICAgICAgICBjb250aW51ZTsKCiAgICAgIHZhciBrcFggPSBrcC5nZXRYKCk7CiAgICAgIHZhciByID0ga3BYLnVtb2QodGhpcy5uKTsKICAgICAgaWYgKHIuY21wbigwKSA9PT0gMCkKICAgICAgICBjb250aW51ZTsKCiAgICAgIHZhciBzID0gay5pbnZtKHRoaXMubikubXVsKHIubXVsKGtleS5nZXRQcml2YXRlKCkpLmlhZGQobXNnKSk7CiAgICAgIHMgPSBzLnVtb2QodGhpcy5uKTsKICAgICAgaWYgKHMuY21wbigwKSA9PT0gMCkKICAgICAgICBjb250aW51ZTsKCiAgICAgIHZhciByZWNvdmVyeVBhcmFtID0gKGtwLmdldFkoKS5pc09kZCgpID8gMSA6IDApIHwKICAgICAgICAgICAgICAgICAgICAgICAgICAoa3BYLmNtcChyKSAhPT0gMCA/IDIgOiAwKTsKCiAgICAgIC8vIFVzZSBjb21wbGVtZW50IG9mIGBzYCwgaWYgaXQgaXMgPiBgbiAvIDJgCiAgICAgIGlmIChvcHRpb25zLmNhbm9uaWNhbCAmJiBzLmNtcCh0aGlzLm5oKSA+IDApIHsKICAgICAgICBzID0gdGhpcy5uLnN1YihzKTsKICAgICAgICByZWNvdmVyeVBhcmFtIF49IDE7CiAgICAgIH0KCiAgICAgIHJldHVybiBuZXcgU2lnbmF0dXJlJDIoeyByOiByLCBzOiBzLCByZWNvdmVyeVBhcmFtOiByZWNvdmVyeVBhcmFtIH0pOwogICAgfQogIH07CgogIEVDLnByb3RvdHlwZS52ZXJpZnkgPSBmdW5jdGlvbiB2ZXJpZnkobXNnLCBzaWduYXR1cmUsIGtleSwgZW5jKSB7CiAgICBtc2cgPSB0aGlzLl90cnVuY2F0ZVRvTihuZXcgQk4kNihtc2csIDE2KSk7CiAgICBrZXkgPSB0aGlzLmtleUZyb21QdWJsaWMoa2V5LCBlbmMpOwogICAgc2lnbmF0dXJlID0gbmV3IFNpZ25hdHVyZSQyKHNpZ25hdHVyZSwgJ2hleCcpOwoKICAgIC8vIFBlcmZvcm0gcHJpbWl0aXZlIHZhbHVlcyB2YWxpZGF0aW9uCiAgICB2YXIgciA9IHNpZ25hdHVyZS5yOwogICAgdmFyIHMgPSBzaWduYXR1cmUuczsKICAgIGlmIChyLmNtcG4oMSkgPCAwIHx8IHIuY21wKHRoaXMubikgPj0gMCkKICAgICAgcmV0dXJuIGZhbHNlOwogICAgaWYgKHMuY21wbigxKSA8IDAgfHwgcy5jbXAodGhpcy5uKSA+PSAwKQogICAgICByZXR1cm4gZmFsc2U7CgogICAgLy8gVmFsaWRhdGUgc2lnbmF0dXJlCiAgICB2YXIgc2ludiA9IHMuaW52bSh0aGlzLm4pOwogICAgdmFyIHUxID0gc2ludi5tdWwobXNnKS51bW9kKHRoaXMubik7CiAgICB2YXIgdTIgPSBzaW52Lm11bChyKS51bW9kKHRoaXMubik7CiAgICB2YXIgcDsKCiAgICBpZiAoIXRoaXMuY3VydmUuX21heHdlbGxUcmljaykgewogICAgICBwID0gdGhpcy5nLm11bEFkZCh1MSwga2V5LmdldFB1YmxpYygpLCB1Mik7CiAgICAgIGlmIChwLmlzSW5maW5pdHkoKSkKICAgICAgICByZXR1cm4gZmFsc2U7CgogICAgICByZXR1cm4gcC5nZXRYKCkudW1vZCh0aGlzLm4pLmNtcChyKSA9PT0gMDsKICAgIH0KCiAgICAvLyBOT1RFOiBHcmVnIE1heHdlbGwncyB0cmljaywgaW5zcGlyZWQgYnk6CiAgICAvLyBodHRwczovL2dpdC5pby92YWQzSwoKICAgIHAgPSB0aGlzLmcuam11bEFkZCh1MSwga2V5LmdldFB1YmxpYygpLCB1Mik7CiAgICBpZiAocC5pc0luZmluaXR5KCkpCiAgICAgIHJldHVybiBmYWxzZTsKCiAgICAvLyBDb21wYXJlIGBwLnhgIG9mIEphY29iaWFuIHBvaW50IHdpdGggYHJgLAogICAgLy8gdGhpcyB3aWxsIGRvIGBwLnggPT0gciAqIHAuel4yYCBpbnN0ZWFkIG9mIG11bHRpcGx5aW5nIGBwLnhgIGJ5IHRoZQogICAgLy8gaW52ZXJzZSBvZiBgcC56XjJgCiAgICByZXR1cm4gcC5lcVhUb1Aocik7CiAgfTsKCiAgRUMucHJvdG90eXBlLnJlY292ZXJQdWJLZXkgPSBmdW5jdGlvbihtc2csIHNpZ25hdHVyZSwgaiwgZW5jKSB7CiAgICBhc3NlcnQkNCgoMyAmIGopID09PSBqLCAnVGhlIHJlY292ZXJ5IHBhcmFtIGlzIG1vcmUgdGhhbiB0d28gYml0cycpOwogICAgc2lnbmF0dXJlID0gbmV3IFNpZ25hdHVyZSQyKHNpZ25hdHVyZSwgZW5jKTsKCiAgICB2YXIgbiA9IHRoaXMubjsKICAgIHZhciBlID0gbmV3IEJOJDYobXNnKTsKICAgIHZhciByID0gc2lnbmF0dXJlLnI7CiAgICB2YXIgcyA9IHNpZ25hdHVyZS5zOwoKICAgIC8vIEEgc2V0IExTQiBzaWduaWZpZXMgdGhhdCB0aGUgeS1jb29yZGluYXRlIGlzIG9kZAogICAgdmFyIGlzWU9kZCA9IGogJiAxOwogICAgdmFyIGlzU2Vjb25kS2V5ID0gaiA+PiAxOwogICAgaWYgKHIuY21wKHRoaXMuY3VydmUucC51bW9kKHRoaXMuY3VydmUubikpID49IDAgJiYgaXNTZWNvbmRLZXkpCiAgICAgIHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIGZpbmQgc2VuY29uZCBrZXkgY2FuZGluYXRlJyk7CgogICAgLy8gMS4xLiBMZXQgeCA9IHIgKyBqbi4KICAgIGlmIChpc1NlY29uZEtleSkKICAgICAgciA9IHRoaXMuY3VydmUucG9pbnRGcm9tWChyLmFkZCh0aGlzLmN1cnZlLm4pLCBpc1lPZGQpOwogICAgZWxzZQogICAgICByID0gdGhpcy5jdXJ2ZS5wb2ludEZyb21YKHIsIGlzWU9kZCk7CgogICAgdmFyIHJJbnYgPSBzaWduYXR1cmUuci5pbnZtKG4pOwogICAgdmFyIHMxID0gbi5zdWIoZSkubXVsKHJJbnYpLnVtb2Qobik7CiAgICB2YXIgczIgPSBzLm11bChySW52KS51bW9kKG4pOwoKICAgIC8vIDEuNi4xIENvbXB1dGUgUSA9IHJeLTEgKHNSIC0gIGVHKQogICAgLy8gICAgICAgICAgICAgICBRID0gcl4tMSAoc1IgKyAtZUcpCiAgICByZXR1cm4gdGhpcy5nLm11bEFkZChzMSwgciwgczIpOwogIH07CgogIEVDLnByb3RvdHlwZS5nZXRLZXlSZWNvdmVyeVBhcmFtID0gZnVuY3Rpb24oZSwgc2lnbmF0dXJlLCBRLCBlbmMpIHsKICAgIHNpZ25hdHVyZSA9IG5ldyBTaWduYXR1cmUkMihzaWduYXR1cmUsIGVuYyk7CiAgICBpZiAoc2lnbmF0dXJlLnJlY292ZXJ5UGFyYW0gIT09IG51bGwpCiAgICAgIHJldHVybiBzaWduYXR1cmUucmVjb3ZlcnlQYXJhbTsKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDQ7IGkrKykgewogICAgICB2YXIgUXByaW1lOwogICAgICB0cnkgewogICAgICAgIFFwcmltZSA9IHRoaXMucmVjb3ZlclB1YktleShlLCBzaWduYXR1cmUsIGkpOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KCiAgICAgIGlmIChRcHJpbWUuZXEoUSkpCiAgICAgICAgcmV0dXJuIGk7CiAgICB9CiAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuYWJsZSB0byBmaW5kIHZhbGlkIHJlY292ZXJ5IGZhY3RvcicpOwogIH07CgogIHZhciB1dGlscyQyID0gdXRpbHMkbTsKICB2YXIgYXNzZXJ0JDMgPSB1dGlscyQyLmFzc2VydDsKICB2YXIgcGFyc2VCeXRlcyQyID0gdXRpbHMkMi5wYXJzZUJ5dGVzOwogIHZhciBjYWNoZWRQcm9wZXJ0eSQxID0gdXRpbHMkMi5jYWNoZWRQcm9wZXJ0eTsKCiAgLyoqCiAgKiBAcGFyYW0ge0VERFNBfSBlZGRzYSAtIGluc3RhbmNlCiAgKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zIC0gcHVibGljL3ByaXZhdGUga2V5IHBhcmFtZXRlcnMKICAqCiAgKiBAcGFyYW0ge0FycmF5PEJ5dGU+fSBbcGFyYW1zLnNlY3JldF0gLSBzZWNyZXQgc2VlZCBieXRlcwogICogQHBhcmFtIHtQb2ludH0gW3BhcmFtcy5wdWJdIC0gcHVibGljIGtleSBwb2ludCAoYWthIGBBYCBpbiBlZGRzYSB0ZXJtcykKICAqIEBwYXJhbSB7QXJyYXk8Qnl0ZT59IFtwYXJhbXMucHViXSAtIHB1YmxpYyBrZXkgcG9pbnQgZW5jb2RlZCBhcyBieXRlcwogICoKICAqLwogIGZ1bmN0aW9uIEtleVBhaXIkMShlZGRzYSwgcGFyYW1zKSB7CiAgICB0aGlzLmVkZHNhID0gZWRkc2E7CiAgICB0aGlzLl9zZWNyZXQgPSBwYXJzZUJ5dGVzJDIocGFyYW1zLnNlY3JldCk7CiAgICBpZiAoZWRkc2EuaXNQb2ludChwYXJhbXMucHViKSkKICAgICAgdGhpcy5fcHViID0gcGFyYW1zLnB1YjsKICAgIGVsc2UKICAgICAgdGhpcy5fcHViQnl0ZXMgPSBwYXJzZUJ5dGVzJDIocGFyYW1zLnB1Yik7CiAgfQoKICBLZXlQYWlyJDEuZnJvbVB1YmxpYyA9IGZ1bmN0aW9uIGZyb21QdWJsaWMoZWRkc2EsIHB1YikgewogICAgaWYgKHB1YiBpbnN0YW5jZW9mIEtleVBhaXIkMSkKICAgICAgcmV0dXJuIHB1YjsKICAgIHJldHVybiBuZXcgS2V5UGFpciQxKGVkZHNhLCB7IHB1YjogcHViIH0pOwogIH07CgogIEtleVBhaXIkMS5mcm9tU2VjcmV0ID0gZnVuY3Rpb24gZnJvbVNlY3JldChlZGRzYSwgc2VjcmV0KSB7CiAgICBpZiAoc2VjcmV0IGluc3RhbmNlb2YgS2V5UGFpciQxKQogICAgICByZXR1cm4gc2VjcmV0OwogICAgcmV0dXJuIG5ldyBLZXlQYWlyJDEoZWRkc2EsIHsgc2VjcmV0OiBzZWNyZXQgfSk7CiAgfTsKCiAgS2V5UGFpciQxLnByb3RvdHlwZS5zZWNyZXQgPSBmdW5jdGlvbiBzZWNyZXQoKSB7CiAgICByZXR1cm4gdGhpcy5fc2VjcmV0OwogIH07CgogIGNhY2hlZFByb3BlcnR5JDEoS2V5UGFpciQxLCAncHViQnl0ZXMnLCBmdW5jdGlvbiBwdWJCeXRlcygpIHsKICAgIHJldHVybiB0aGlzLmVkZHNhLmVuY29kZVBvaW50KHRoaXMucHViKCkpOwogIH0pOwoKICBjYWNoZWRQcm9wZXJ0eSQxKEtleVBhaXIkMSwgJ3B1YicsIGZ1bmN0aW9uIHB1YigpIHsKICAgIGlmICh0aGlzLl9wdWJCeXRlcykKICAgICAgcmV0dXJuIHRoaXMuZWRkc2EuZGVjb2RlUG9pbnQodGhpcy5fcHViQnl0ZXMpOwogICAgcmV0dXJuIHRoaXMuZWRkc2EuZy5tdWwodGhpcy5wcml2KCkpOwogIH0pOwoKICBjYWNoZWRQcm9wZXJ0eSQxKEtleVBhaXIkMSwgJ3ByaXZCeXRlcycsIGZ1bmN0aW9uIHByaXZCeXRlcygpIHsKICAgIHZhciBlZGRzYSA9IHRoaXMuZWRkc2E7CiAgICB2YXIgaGFzaCA9IHRoaXMuaGFzaCgpOwogICAgdmFyIGxhc3RJeCA9IGVkZHNhLmVuY29kaW5nTGVuZ3RoIC0gMTsKCiAgICB2YXIgYSA9IGhhc2guc2xpY2UoMCwgZWRkc2EuZW5jb2RpbmdMZW5ndGgpOwogICAgYVswXSAmPSAyNDg7CiAgICBhW2xhc3RJeF0gJj0gMTI3OwogICAgYVtsYXN0SXhdIHw9IDY0OwoKICAgIHJldHVybiBhOwogIH0pOwoKICBjYWNoZWRQcm9wZXJ0eSQxKEtleVBhaXIkMSwgJ3ByaXYnLCBmdW5jdGlvbiBwcml2KCkgewogICAgcmV0dXJuIHRoaXMuZWRkc2EuZGVjb2RlSW50KHRoaXMucHJpdkJ5dGVzKCkpOwogIH0pOwoKICBjYWNoZWRQcm9wZXJ0eSQxKEtleVBhaXIkMSwgJ2hhc2gnLCBmdW5jdGlvbiBoYXNoKCkgewogICAgcmV0dXJuIHRoaXMuZWRkc2EuaGFzaCgpLnVwZGF0ZSh0aGlzLnNlY3JldCgpKS5kaWdlc3QoKTsKICB9KTsKCiAgY2FjaGVkUHJvcGVydHkkMShLZXlQYWlyJDEsICdtZXNzYWdlUHJlZml4JywgZnVuY3Rpb24gbWVzc2FnZVByZWZpeCgpIHsKICAgIHJldHVybiB0aGlzLmhhc2goKS5zbGljZSh0aGlzLmVkZHNhLmVuY29kaW5nTGVuZ3RoKTsKICB9KTsKCiAgS2V5UGFpciQxLnByb3RvdHlwZS5zaWduID0gZnVuY3Rpb24gc2lnbihtZXNzYWdlKSB7CiAgICBhc3NlcnQkMyh0aGlzLl9zZWNyZXQsICdLZXlQYWlyIGNhbiBvbmx5IHZlcmlmeScpOwogICAgcmV0dXJuIHRoaXMuZWRkc2Euc2lnbihtZXNzYWdlLCB0aGlzKTsKICB9OwoKICBLZXlQYWlyJDEucHJvdG90eXBlLnZlcmlmeSA9IGZ1bmN0aW9uIHZlcmlmeShtZXNzYWdlLCBzaWcpIHsKICAgIHJldHVybiB0aGlzLmVkZHNhLnZlcmlmeShtZXNzYWdlLCBzaWcsIHRoaXMpOwogIH07CgogIEtleVBhaXIkMS5wcm90b3R5cGUuZ2V0U2VjcmV0ID0gZnVuY3Rpb24gZ2V0U2VjcmV0KGVuYykgewogICAgYXNzZXJ0JDModGhpcy5fc2VjcmV0LCAnS2V5UGFpciBpcyBwdWJsaWMgb25seScpOwogICAgcmV0dXJuIHV0aWxzJDIuZW5jb2RlKHRoaXMuc2VjcmV0KCksIGVuYyk7CiAgfTsKCiAgS2V5UGFpciQxLnByb3RvdHlwZS5nZXRQdWJsaWMgPSBmdW5jdGlvbiBnZXRQdWJsaWMoZW5jKSB7CiAgICByZXR1cm4gdXRpbHMkMi5lbmNvZGUodGhpcy5wdWJCeXRlcygpLCBlbmMpOwogIH07CgogIHZhciBrZXkkMSA9IEtleVBhaXIkMTsKCiAgdmFyIEJOJDUgPSBibiQ0LmV4cG9ydHM7CiAgdmFyIHV0aWxzJDEgPSB1dGlscyRtOwogIHZhciBhc3NlcnQkMiA9IHV0aWxzJDEuYXNzZXJ0OwogIHZhciBjYWNoZWRQcm9wZXJ0eSA9IHV0aWxzJDEuY2FjaGVkUHJvcGVydHk7CiAgdmFyIHBhcnNlQnl0ZXMkMSA9IHV0aWxzJDEucGFyc2VCeXRlczsKCiAgLyoqCiAgKiBAcGFyYW0ge0VERFNBfSBlZGRzYSAtIGVkZHNhIGluc3RhbmNlCiAgKiBAcGFyYW0ge0FycmF5PEJ5dGVzPnxPYmplY3R9IHNpZyAtCiAgKiBAcGFyYW0ge0FycmF5PEJ5dGVzPnxQb2ludH0gW3NpZy5SXSAtIFIgcG9pbnQgYXMgUG9pbnQgb3IgYnl0ZXMKICAqIEBwYXJhbSB7QXJyYXk8Qnl0ZXM+fGJufSBbc2lnLlNdIC0gUyBzY2FsYXIgYXMgYm4gb3IgYnl0ZXMKICAqIEBwYXJhbSB7QXJyYXk8Qnl0ZXM+fSBbc2lnLlJlbmNvZGVkXSAtIFIgcG9pbnQgZW5jb2RlZAogICogQHBhcmFtIHtBcnJheTxCeXRlcz59IFtzaWcuU2VuY29kZWRdIC0gUyBzY2FsYXIgZW5jb2RlZAogICovCiAgZnVuY3Rpb24gU2lnbmF0dXJlJDEoZWRkc2EsIHNpZykgewogICAgdGhpcy5lZGRzYSA9IGVkZHNhOwoKICAgIGlmICh0eXBlb2Ygc2lnICE9PSAnb2JqZWN0JykKICAgICAgc2lnID0gcGFyc2VCeXRlcyQxKHNpZyk7CgogICAgaWYgKEFycmF5LmlzQXJyYXkoc2lnKSkgewogICAgICBzaWcgPSB7CiAgICAgICAgUjogc2lnLnNsaWNlKDAsIGVkZHNhLmVuY29kaW5nTGVuZ3RoKSwKICAgICAgICBTOiBzaWcuc2xpY2UoZWRkc2EuZW5jb2RpbmdMZW5ndGgpLAogICAgICB9OwogICAgfQoKICAgIGFzc2VydCQyKHNpZy5SICYmIHNpZy5TLCAnU2lnbmF0dXJlIHdpdGhvdXQgUiBvciBTJyk7CgogICAgaWYgKGVkZHNhLmlzUG9pbnQoc2lnLlIpKQogICAgICB0aGlzLl9SID0gc2lnLlI7CiAgICBpZiAoc2lnLlMgaW5zdGFuY2VvZiBCTiQ1KQogICAgICB0aGlzLl9TID0gc2lnLlM7CgogICAgdGhpcy5fUmVuY29kZWQgPSBBcnJheS5pc0FycmF5KHNpZy5SKSA/IHNpZy5SIDogc2lnLlJlbmNvZGVkOwogICAgdGhpcy5fU2VuY29kZWQgPSBBcnJheS5pc0FycmF5KHNpZy5TKSA/IHNpZy5TIDogc2lnLlNlbmNvZGVkOwogIH0KCiAgY2FjaGVkUHJvcGVydHkoU2lnbmF0dXJlJDEsICdTJywgZnVuY3Rpb24gUygpIHsKICAgIHJldHVybiB0aGlzLmVkZHNhLmRlY29kZUludCh0aGlzLlNlbmNvZGVkKCkpOwogIH0pOwoKICBjYWNoZWRQcm9wZXJ0eShTaWduYXR1cmUkMSwgJ1InLCBmdW5jdGlvbiBSKCkgewogICAgcmV0dXJuIHRoaXMuZWRkc2EuZGVjb2RlUG9pbnQodGhpcy5SZW5jb2RlZCgpKTsKICB9KTsKCiAgY2FjaGVkUHJvcGVydHkoU2lnbmF0dXJlJDEsICdSZW5jb2RlZCcsIGZ1bmN0aW9uIFJlbmNvZGVkKCkgewogICAgcmV0dXJuIHRoaXMuZWRkc2EuZW5jb2RlUG9pbnQodGhpcy5SKCkpOwogIH0pOwoKICBjYWNoZWRQcm9wZXJ0eShTaWduYXR1cmUkMSwgJ1NlbmNvZGVkJywgZnVuY3Rpb24gU2VuY29kZWQoKSB7CiAgICByZXR1cm4gdGhpcy5lZGRzYS5lbmNvZGVJbnQodGhpcy5TKCkpOwogIH0pOwoKICBTaWduYXR1cmUkMS5wcm90b3R5cGUudG9CeXRlcyA9IGZ1bmN0aW9uIHRvQnl0ZXMoKSB7CiAgICByZXR1cm4gdGhpcy5SZW5jb2RlZCgpLmNvbmNhdCh0aGlzLlNlbmNvZGVkKCkpOwogIH07CgogIFNpZ25hdHVyZSQxLnByb3RvdHlwZS50b0hleCA9IGZ1bmN0aW9uIHRvSGV4KCkgewogICAgcmV0dXJuIHV0aWxzJDEuZW5jb2RlKHRoaXMudG9CeXRlcygpLCAnaGV4JykudG9VcHBlckNhc2UoKTsKICB9OwoKICB2YXIgc2lnbmF0dXJlID0gU2lnbmF0dXJlJDE7CgogIHZhciBoYXNoID0gaGFzaCQyOwogIHZhciBjdXJ2ZXMgPSBjdXJ2ZXMkMjsKICB2YXIgdXRpbHMgPSB1dGlscyRtOwogIHZhciBhc3NlcnQkMSA9IHV0aWxzLmFzc2VydDsKICB2YXIgcGFyc2VCeXRlcyA9IHV0aWxzLnBhcnNlQnl0ZXM7CiAgdmFyIEtleVBhaXIgPSBrZXkkMTsKICB2YXIgU2lnbmF0dXJlID0gc2lnbmF0dXJlOwoKICBmdW5jdGlvbiBFRERTQShjdXJ2ZSkgewogICAgYXNzZXJ0JDEoY3VydmUgPT09ICdlZDI1NTE5JywgJ29ubHkgdGVzdGVkIHdpdGggZWQyNTUxOSBzbyBmYXInKTsKCiAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgRUREU0EpKQogICAgICByZXR1cm4gbmV3IEVERFNBKGN1cnZlKTsKCiAgICBjdXJ2ZSA9IGN1cnZlc1tjdXJ2ZV0uY3VydmU7CiAgICB0aGlzLmN1cnZlID0gY3VydmU7CiAgICB0aGlzLmcgPSBjdXJ2ZS5nOwogICAgdGhpcy5nLnByZWNvbXB1dGUoY3VydmUubi5iaXRMZW5ndGgoKSArIDEpOwoKICAgIHRoaXMucG9pbnRDbGFzcyA9IGN1cnZlLnBvaW50KCkuY29uc3RydWN0b3I7CiAgICB0aGlzLmVuY29kaW5nTGVuZ3RoID0gTWF0aC5jZWlsKGN1cnZlLm4uYml0TGVuZ3RoKCkgLyA4KTsKICAgIHRoaXMuaGFzaCA9IGhhc2guc2hhNTEyOwogIH0KCiAgdmFyIGVkZHNhID0gRUREU0E7CgogIC8qKgogICogQHBhcmFtIHtBcnJheXxTdHJpbmd9IG1lc3NhZ2UgLSBtZXNzYWdlIGJ5dGVzCiAgKiBAcGFyYW0ge0FycmF5fFN0cmluZ3xLZXlQYWlyfSBzZWNyZXQgLSBzZWNyZXQgYnl0ZXMgb3IgYSBrZXlwYWlyCiAgKiBAcmV0dXJucyB7U2lnbmF0dXJlfSAtIHNpZ25hdHVyZQogICovCiAgRUREU0EucHJvdG90eXBlLnNpZ24gPSBmdW5jdGlvbiBzaWduKG1lc3NhZ2UsIHNlY3JldCkgewogICAgbWVzc2FnZSA9IHBhcnNlQnl0ZXMobWVzc2FnZSk7CiAgICB2YXIga2V5ID0gdGhpcy5rZXlGcm9tU2VjcmV0KHNlY3JldCk7CiAgICB2YXIgciA9IHRoaXMuaGFzaEludChrZXkubWVzc2FnZVByZWZpeCgpLCBtZXNzYWdlKTsKICAgIHZhciBSID0gdGhpcy5nLm11bChyKTsKICAgIHZhciBSZW5jb2RlZCA9IHRoaXMuZW5jb2RlUG9pbnQoUik7CiAgICB2YXIgc18gPSB0aGlzLmhhc2hJbnQoUmVuY29kZWQsIGtleS5wdWJCeXRlcygpLCBtZXNzYWdlKQogICAgICAubXVsKGtleS5wcml2KCkpOwogICAgdmFyIFMgPSByLmFkZChzXykudW1vZCh0aGlzLmN1cnZlLm4pOwogICAgcmV0dXJuIHRoaXMubWFrZVNpZ25hdHVyZSh7IFI6IFIsIFM6IFMsIFJlbmNvZGVkOiBSZW5jb2RlZCB9KTsKICB9OwoKICAvKioKICAqIEBwYXJhbSB7QXJyYXl9IG1lc3NhZ2UgLSBtZXNzYWdlIGJ5dGVzCiAgKiBAcGFyYW0ge0FycmF5fFN0cmluZ3xTaWduYXR1cmV9IHNpZyAtIHNpZyBieXRlcwogICogQHBhcmFtIHtBcnJheXxTdHJpbmd8UG9pbnR8S2V5UGFpcn0gcHViIC0gcHVibGljIGtleQogICogQHJldHVybnMge0Jvb2xlYW59IC0gdHJ1ZSBpZiBwdWJsaWMga2V5IG1hdGNoZXMgc2lnIG9mIG1lc3NhZ2UKICAqLwogIEVERFNBLnByb3RvdHlwZS52ZXJpZnkgPSBmdW5jdGlvbiB2ZXJpZnkobWVzc2FnZSwgc2lnLCBwdWIpIHsKICAgIG1lc3NhZ2UgPSBwYXJzZUJ5dGVzKG1lc3NhZ2UpOwogICAgc2lnID0gdGhpcy5tYWtlU2lnbmF0dXJlKHNpZyk7CiAgICB2YXIga2V5ID0gdGhpcy5rZXlGcm9tUHVibGljKHB1Yik7CiAgICB2YXIgaCA9IHRoaXMuaGFzaEludChzaWcuUmVuY29kZWQoKSwga2V5LnB1YkJ5dGVzKCksIG1lc3NhZ2UpOwogICAgdmFyIFNHID0gdGhpcy5nLm11bChzaWcuUygpKTsKICAgIHZhciBScGx1c0FoID0gc2lnLlIoKS5hZGQoa2V5LnB1YigpLm11bChoKSk7CiAgICByZXR1cm4gUnBsdXNBaC5lcShTRyk7CiAgfTsKCiAgRUREU0EucHJvdG90eXBlLmhhc2hJbnQgPSBmdW5jdGlvbiBoYXNoSW50KCkgewogICAgdmFyIGhhc2ggPSB0aGlzLmhhc2goKTsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKQogICAgICBoYXNoLnVwZGF0ZShhcmd1bWVudHNbaV0pOwogICAgcmV0dXJuIHV0aWxzLmludEZyb21MRShoYXNoLmRpZ2VzdCgpKS51bW9kKHRoaXMuY3VydmUubik7CiAgfTsKCiAgRUREU0EucHJvdG90eXBlLmtleUZyb21QdWJsaWMgPSBmdW5jdGlvbiBrZXlGcm9tUHVibGljKHB1YikgewogICAgcmV0dXJuIEtleVBhaXIuZnJvbVB1YmxpYyh0aGlzLCBwdWIpOwogIH07CgogIEVERFNBLnByb3RvdHlwZS5rZXlGcm9tU2VjcmV0ID0gZnVuY3Rpb24ga2V5RnJvbVNlY3JldChzZWNyZXQpIHsKICAgIHJldHVybiBLZXlQYWlyLmZyb21TZWNyZXQodGhpcywgc2VjcmV0KTsKICB9OwoKICBFRERTQS5wcm90b3R5cGUubWFrZVNpZ25hdHVyZSA9IGZ1bmN0aW9uIG1ha2VTaWduYXR1cmUoc2lnKSB7CiAgICBpZiAoc2lnIGluc3RhbmNlb2YgU2lnbmF0dXJlKQogICAgICByZXR1cm4gc2lnOwogICAgcmV0dXJuIG5ldyBTaWduYXR1cmUodGhpcywgc2lnKTsKICB9OwoKICAvKioKICAqICogaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL2RyYWZ0LWpvc2Vmc3Nvbi1lZGRzYS1lZDI1NTE5LTAzI3NlY3Rpb24tNS4yCiAgKgogICogRUREU0EgZGVmaW5lcyBtZXRob2RzIGZvciBlbmNvZGluZyBhbmQgZGVjb2RpbmcgcG9pbnRzIGFuZCBpbnRlZ2Vycy4gVGhlc2UgYXJlCiAgKiBoZWxwZXIgY29udmVuaWVuY2UgbWV0aG9kcywgdGhhdCBwYXNzIGFsb25nIHRvIHV0aWxpdHkgZnVuY3Rpb25zIGltcGxpZWQKICAqIHBhcmFtZXRlcnMuCiAgKgogICovCiAgRUREU0EucHJvdG90eXBlLmVuY29kZVBvaW50ID0gZnVuY3Rpb24gZW5jb2RlUG9pbnQocG9pbnQpIHsKICAgIHZhciBlbmMgPSBwb2ludC5nZXRZKCkudG9BcnJheSgnbGUnLCB0aGlzLmVuY29kaW5nTGVuZ3RoKTsKICAgIGVuY1t0aGlzLmVuY29kaW5nTGVuZ3RoIC0gMV0gfD0gcG9pbnQuZ2V0WCgpLmlzT2RkKCkgPyAweDgwIDogMDsKICAgIHJldHVybiBlbmM7CiAgfTsKCiAgRUREU0EucHJvdG90eXBlLmRlY29kZVBvaW50ID0gZnVuY3Rpb24gZGVjb2RlUG9pbnQoYnl0ZXMpIHsKICAgIGJ5dGVzID0gdXRpbHMucGFyc2VCeXRlcyhieXRlcyk7CgogICAgdmFyIGxhc3RJeCA9IGJ5dGVzLmxlbmd0aCAtIDE7CiAgICB2YXIgbm9ybWVkID0gYnl0ZXMuc2xpY2UoMCwgbGFzdEl4KS5jb25jYXQoYnl0ZXNbbGFzdEl4XSAmIH4weDgwKTsKICAgIHZhciB4SXNPZGQgPSAoYnl0ZXNbbGFzdEl4XSAmIDB4ODApICE9PSAwOwoKICAgIHZhciB5ID0gdXRpbHMuaW50RnJvbUxFKG5vcm1lZCk7CiAgICByZXR1cm4gdGhpcy5jdXJ2ZS5wb2ludEZyb21ZKHksIHhJc09kZCk7CiAgfTsKCiAgRUREU0EucHJvdG90eXBlLmVuY29kZUludCA9IGZ1bmN0aW9uIGVuY29kZUludChudW0pIHsKICAgIHJldHVybiBudW0udG9BcnJheSgnbGUnLCB0aGlzLmVuY29kaW5nTGVuZ3RoKTsKICB9OwoKICBFRERTQS5wcm90b3R5cGUuZGVjb2RlSW50ID0gZnVuY3Rpb24gZGVjb2RlSW50KGJ5dGVzKSB7CiAgICByZXR1cm4gdXRpbHMuaW50RnJvbUxFKGJ5dGVzKTsKICB9OwoKICBFRERTQS5wcm90b3R5cGUuaXNQb2ludCA9IGZ1bmN0aW9uIGlzUG9pbnQodmFsKSB7CiAgICByZXR1cm4gdmFsIGluc3RhbmNlb2YgdGhpcy5wb2ludENsYXNzOwogIH07CgogIChmdW5jdGlvbiAoZXhwb3J0cykgewoKICB2YXIgZWxsaXB0aWMgPSBleHBvcnRzOwoKICBlbGxpcHRpYy52ZXJzaW9uID0gcmVxdWlyZSQkMC52ZXJzaW9uOwogIGVsbGlwdGljLnV0aWxzID0gdXRpbHMkbTsKICBlbGxpcHRpYy5yYW5kID0gYnJvcmFuZC5leHBvcnRzOwogIGVsbGlwdGljLmN1cnZlID0gY3VydmU7CiAgZWxsaXB0aWMuY3VydmVzID0gY3VydmVzJDI7CgogIC8vIFByb3RvY29scwogIGVsbGlwdGljLmVjID0gZWM7CiAgZWxsaXB0aWMuZWRkc2EgPSBlZGRzYTsKICB9KGVsbGlwdGljJDEpKTsKCiAgdmFyIGJuJDMgPSB7ZXhwb3J0czoge319OwoKICAoZnVuY3Rpb24gKG1vZHVsZSkgewogIChmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CgogICAgLy8gVXRpbHMKICAgIGZ1bmN0aW9uIGFzc2VydCAodmFsLCBtc2cpIHsKICAgICAgaWYgKCF2YWwpIHRocm93IG5ldyBFcnJvcihtc2cgfHwgJ0Fzc2VydGlvbiBmYWlsZWQnKTsKICAgIH0KCiAgICAvLyBDb3VsZCB1c2UgYGluaGVyaXRzYCBtb2R1bGUsIGJ1dCBkb24ndCB3YW50IHRvIG1vdmUgZnJvbSBzaW5nbGUgZmlsZQogICAgLy8gYXJjaGl0ZWN0dXJlIHlldC4KICAgIGZ1bmN0aW9uIGluaGVyaXRzIChjdG9yLCBzdXBlckN0b3IpIHsKICAgICAgY3Rvci5zdXBlcl8gPSBzdXBlckN0b3I7CiAgICAgIHZhciBUZW1wQ3RvciA9IGZ1bmN0aW9uICgpIHt9OwogICAgICBUZW1wQ3Rvci5wcm90b3R5cGUgPSBzdXBlckN0b3IucHJvdG90eXBlOwogICAgICBjdG9yLnByb3RvdHlwZSA9IG5ldyBUZW1wQ3RvcigpOwogICAgICBjdG9yLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGN0b3I7CiAgICB9CgogICAgLy8gQk4KCiAgICBmdW5jdGlvbiBCTiAobnVtYmVyLCBiYXNlLCBlbmRpYW4pIHsKICAgICAgaWYgKEJOLmlzQk4obnVtYmVyKSkgewogICAgICAgIHJldHVybiBudW1iZXI7CiAgICAgIH0KCiAgICAgIHRoaXMubmVnYXRpdmUgPSAwOwogICAgICB0aGlzLndvcmRzID0gbnVsbDsKICAgICAgdGhpcy5sZW5ndGggPSAwOwoKICAgICAgLy8gUmVkdWN0aW9uIGNvbnRleHQKICAgICAgdGhpcy5yZWQgPSBudWxsOwoKICAgICAgaWYgKG51bWJlciAhPT0gbnVsbCkgewogICAgICAgIGlmIChiYXNlID09PSAnbGUnIHx8IGJhc2UgPT09ICdiZScpIHsKICAgICAgICAgIGVuZGlhbiA9IGJhc2U7CiAgICAgICAgICBiYXNlID0gMTA7CiAgICAgICAgfQoKICAgICAgICB0aGlzLl9pbml0KG51bWJlciB8fCAwLCBiYXNlIHx8IDEwLCBlbmRpYW4gfHwgJ2JlJyk7CiAgICAgIH0KICAgIH0KICAgIGlmICh0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0JykgewogICAgICBtb2R1bGUuZXhwb3J0cyA9IEJOOwogICAgfSBlbHNlIHsKICAgICAgZXhwb3J0cy5CTiA9IEJOOwogICAgfQoKICAgIEJOLkJOID0gQk47CiAgICBCTi53b3JkU2l6ZSA9IDI2OwoKICAgIHZhciBCdWZmZXI7CiAgICB0cnkgewogICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHdpbmRvdy5CdWZmZXIgIT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgQnVmZmVyID0gd2luZG93LkJ1ZmZlcjsKICAgICAgfSBlbHNlIHsKICAgICAgICBCdWZmZXIgPSByZXF1aXJlKCdidWZmZXInKS5CdWZmZXI7CiAgICAgIH0KICAgIH0gY2F0Y2ggKGUpIHsKICAgIH0KCiAgICBCTi5pc0JOID0gZnVuY3Rpb24gaXNCTiAobnVtKSB7CiAgICAgIGlmIChudW0gaW5zdGFuY2VvZiBCTikgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICByZXR1cm4gbnVtICE9PSBudWxsICYmIHR5cGVvZiBudW0gPT09ICdvYmplY3QnICYmCiAgICAgICAgbnVtLmNvbnN0cnVjdG9yLndvcmRTaXplID09PSBCTi53b3JkU2l6ZSAmJiBBcnJheS5pc0FycmF5KG51bS53b3Jkcyk7CiAgICB9OwoKICAgIEJOLm1heCA9IGZ1bmN0aW9uIG1heCAobGVmdCwgcmlnaHQpIHsKICAgICAgaWYgKGxlZnQuY21wKHJpZ2h0KSA+IDApIHJldHVybiBsZWZ0OwogICAgICByZXR1cm4gcmlnaHQ7CiAgICB9OwoKICAgIEJOLm1pbiA9IGZ1bmN0aW9uIG1pbiAobGVmdCwgcmlnaHQpIHsKICAgICAgaWYgKGxlZnQuY21wKHJpZ2h0KSA8IDApIHJldHVybiBsZWZ0OwogICAgICByZXR1cm4gcmlnaHQ7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5faW5pdCA9IGZ1bmN0aW9uIGluaXQgKG51bWJlciwgYmFzZSwgZW5kaWFuKSB7CiAgICAgIGlmICh0eXBlb2YgbnVtYmVyID09PSAnbnVtYmVyJykgewogICAgICAgIHJldHVybiB0aGlzLl9pbml0TnVtYmVyKG51bWJlciwgYmFzZSwgZW5kaWFuKTsKICAgICAgfQoKICAgICAgaWYgKHR5cGVvZiBudW1iZXIgPT09ICdvYmplY3QnKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuX2luaXRBcnJheShudW1iZXIsIGJhc2UsIGVuZGlhbik7CiAgICAgIH0KCiAgICAgIGlmIChiYXNlID09PSAnaGV4JykgewogICAgICAgIGJhc2UgPSAxNjsKICAgICAgfQogICAgICBhc3NlcnQoYmFzZSA9PT0gKGJhc2UgfCAwKSAmJiBiYXNlID49IDIgJiYgYmFzZSA8PSAzNik7CgogICAgICBudW1iZXIgPSBudW1iZXIudG9TdHJpbmcoKS5yZXBsYWNlKC9ccysvZywgJycpOwogICAgICB2YXIgc3RhcnQgPSAwOwogICAgICBpZiAobnVtYmVyWzBdID09PSAnLScpIHsKICAgICAgICBzdGFydCsrOwogICAgICAgIHRoaXMubmVnYXRpdmUgPSAxOwogICAgICB9CgogICAgICBpZiAoc3RhcnQgPCBudW1iZXIubGVuZ3RoKSB7CiAgICAgICAgaWYgKGJhc2UgPT09IDE2KSB7CiAgICAgICAgICB0aGlzLl9wYXJzZUhleChudW1iZXIsIHN0YXJ0LCBlbmRpYW4pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLl9wYXJzZUJhc2UobnVtYmVyLCBiYXNlLCBzdGFydCk7CiAgICAgICAgICBpZiAoZW5kaWFuID09PSAnbGUnKSB7CiAgICAgICAgICAgIHRoaXMuX2luaXRBcnJheSh0aGlzLnRvQXJyYXkoKSwgYmFzZSwgZW5kaWFuKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH07CgogICAgQk4ucHJvdG90eXBlLl9pbml0TnVtYmVyID0gZnVuY3Rpb24gX2luaXROdW1iZXIgKG51bWJlciwgYmFzZSwgZW5kaWFuKSB7CiAgICAgIGlmIChudW1iZXIgPCAwKSB7CiAgICAgICAgdGhpcy5uZWdhdGl2ZSA9IDE7CiAgICAgICAgbnVtYmVyID0gLW51bWJlcjsKICAgICAgfQogICAgICBpZiAobnVtYmVyIDwgMHg0MDAwMDAwKSB7CiAgICAgICAgdGhpcy53b3JkcyA9IFsgbnVtYmVyICYgMHgzZmZmZmZmIF07CiAgICAgICAgdGhpcy5sZW5ndGggPSAxOwogICAgICB9IGVsc2UgaWYgKG51bWJlciA8IDB4MTAwMDAwMDAwMDAwMDApIHsKICAgICAgICB0aGlzLndvcmRzID0gWwogICAgICAgICAgbnVtYmVyICYgMHgzZmZmZmZmLAogICAgICAgICAgKG51bWJlciAvIDB4NDAwMDAwMCkgJiAweDNmZmZmZmYKICAgICAgICBdOwogICAgICAgIHRoaXMubGVuZ3RoID0gMjsKICAgICAgfSBlbHNlIHsKICAgICAgICBhc3NlcnQobnVtYmVyIDwgMHgyMDAwMDAwMDAwMDAwMCk7IC8vIDIgXiA1MyAodW5zYWZlKQogICAgICAgIHRoaXMud29yZHMgPSBbCiAgICAgICAgICBudW1iZXIgJiAweDNmZmZmZmYsCiAgICAgICAgICAobnVtYmVyIC8gMHg0MDAwMDAwKSAmIDB4M2ZmZmZmZiwKICAgICAgICAgIDEKICAgICAgICBdOwogICAgICAgIHRoaXMubGVuZ3RoID0gMzsKICAgICAgfQoKICAgICAgaWYgKGVuZGlhbiAhPT0gJ2xlJykgcmV0dXJuOwoKICAgICAgLy8gUmV2ZXJzZSB0aGUgYnl0ZXMKICAgICAgdGhpcy5faW5pdEFycmF5KHRoaXMudG9BcnJheSgpLCBiYXNlLCBlbmRpYW4pOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuX2luaXRBcnJheSA9IGZ1bmN0aW9uIF9pbml0QXJyYXkgKG51bWJlciwgYmFzZSwgZW5kaWFuKSB7CiAgICAgIC8vIFBlcmhhcHMgYSBVaW50OEFycmF5CiAgICAgIGFzc2VydCh0eXBlb2YgbnVtYmVyLmxlbmd0aCA9PT0gJ251bWJlcicpOwogICAgICBpZiAobnVtYmVyLmxlbmd0aCA8PSAwKSB7CiAgICAgICAgdGhpcy53b3JkcyA9IFsgMCBdOwogICAgICAgIHRoaXMubGVuZ3RoID0gMTsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfQoKICAgICAgdGhpcy5sZW5ndGggPSBNYXRoLmNlaWwobnVtYmVyLmxlbmd0aCAvIDMpOwogICAgICB0aGlzLndvcmRzID0gbmV3IEFycmF5KHRoaXMubGVuZ3RoKTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy53b3Jkc1tpXSA9IDA7CiAgICAgIH0KCiAgICAgIHZhciBqLCB3OwogICAgICB2YXIgb2ZmID0gMDsKICAgICAgaWYgKGVuZGlhbiA9PT0gJ2JlJykgewogICAgICAgIGZvciAoaSA9IG51bWJlci5sZW5ndGggLSAxLCBqID0gMDsgaSA+PSAwOyBpIC09IDMpIHsKICAgICAgICAgIHcgPSBudW1iZXJbaV0gfCAobnVtYmVyW2kgLSAxXSA8PCA4KSB8IChudW1iZXJbaSAtIDJdIDw8IDE2KTsKICAgICAgICAgIHRoaXMud29yZHNbal0gfD0gKHcgPDwgb2ZmKSAmIDB4M2ZmZmZmZjsKICAgICAgICAgIHRoaXMud29yZHNbaiArIDFdID0gKHcgPj4+ICgyNiAtIG9mZikpICYgMHgzZmZmZmZmOwogICAgICAgICAgb2ZmICs9IDI0OwogICAgICAgICAgaWYgKG9mZiA+PSAyNikgewogICAgICAgICAgICBvZmYgLT0gMjY7CiAgICAgICAgICAgIGorKzsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoZW5kaWFuID09PSAnbGUnKSB7CiAgICAgICAgZm9yIChpID0gMCwgaiA9IDA7IGkgPCBudW1iZXIubGVuZ3RoOyBpICs9IDMpIHsKICAgICAgICAgIHcgPSBudW1iZXJbaV0gfCAobnVtYmVyW2kgKyAxXSA8PCA4KSB8IChudW1iZXJbaSArIDJdIDw8IDE2KTsKICAgICAgICAgIHRoaXMud29yZHNbal0gfD0gKHcgPDwgb2ZmKSAmIDB4M2ZmZmZmZjsKICAgICAgICAgIHRoaXMud29yZHNbaiArIDFdID0gKHcgPj4+ICgyNiAtIG9mZikpICYgMHgzZmZmZmZmOwogICAgICAgICAgb2ZmICs9IDI0OwogICAgICAgICAgaWYgKG9mZiA+PSAyNikgewogICAgICAgICAgICBvZmYgLT0gMjY7CiAgICAgICAgICAgIGorKzsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMuc3RyaXAoKTsKICAgIH07CgogICAgZnVuY3Rpb24gcGFyc2VIZXg0Qml0cyAoc3RyaW5nLCBpbmRleCkgewogICAgICB2YXIgYyA9IHN0cmluZy5jaGFyQ29kZUF0KGluZGV4KTsKICAgICAgLy8gJ0EnIC0gJ0YnCiAgICAgIGlmIChjID49IDY1ICYmIGMgPD0gNzApIHsKICAgICAgICByZXR1cm4gYyAtIDU1OwogICAgICAvLyAnYScgLSAnZicKICAgICAgfSBlbHNlIGlmIChjID49IDk3ICYmIGMgPD0gMTAyKSB7CiAgICAgICAgcmV0dXJuIGMgLSA4NzsKICAgICAgLy8gJzAnIC0gJzknCiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIChjIC0gNDgpICYgMHhmOwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gcGFyc2VIZXhCeXRlIChzdHJpbmcsIGxvd2VyQm91bmQsIGluZGV4KSB7CiAgICAgIHZhciByID0gcGFyc2VIZXg0Qml0cyhzdHJpbmcsIGluZGV4KTsKICAgICAgaWYgKGluZGV4IC0gMSA+PSBsb3dlckJvdW5kKSB7CiAgICAgICAgciB8PSBwYXJzZUhleDRCaXRzKHN0cmluZywgaW5kZXggLSAxKSA8PCA0OwogICAgICB9CiAgICAgIHJldHVybiByOwogICAgfQoKICAgIEJOLnByb3RvdHlwZS5fcGFyc2VIZXggPSBmdW5jdGlvbiBfcGFyc2VIZXggKG51bWJlciwgc3RhcnQsIGVuZGlhbikgewogICAgICAvLyBDcmVhdGUgcG9zc2libHkgYmlnZ2VyIGFycmF5IHRvIGVuc3VyZSB0aGF0IGl0IGZpdHMgdGhlIG51bWJlcgogICAgICB0aGlzLmxlbmd0aCA9IE1hdGguY2VpbCgobnVtYmVyLmxlbmd0aCAtIHN0YXJ0KSAvIDYpOwogICAgICB0aGlzLndvcmRzID0gbmV3IEFycmF5KHRoaXMubGVuZ3RoKTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy53b3Jkc1tpXSA9IDA7CiAgICAgIH0KCiAgICAgIC8vIDI0LWJpdHMgY2h1bmtzCiAgICAgIHZhciBvZmYgPSAwOwogICAgICB2YXIgaiA9IDA7CgogICAgICB2YXIgdzsKICAgICAgaWYgKGVuZGlhbiA9PT0gJ2JlJykgewogICAgICAgIGZvciAoaSA9IG51bWJlci5sZW5ndGggLSAxOyBpID49IHN0YXJ0OyBpIC09IDIpIHsKICAgICAgICAgIHcgPSBwYXJzZUhleEJ5dGUobnVtYmVyLCBzdGFydCwgaSkgPDwgb2ZmOwogICAgICAgICAgdGhpcy53b3Jkc1tqXSB8PSB3ICYgMHgzZmZmZmZmOwogICAgICAgICAgaWYgKG9mZiA+PSAxOCkgewogICAgICAgICAgICBvZmYgLT0gMTg7CiAgICAgICAgICAgIGogKz0gMTsKICAgICAgICAgICAgdGhpcy53b3Jkc1tqXSB8PSB3ID4+PiAyNjsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG9mZiArPSA4OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgcGFyc2VMZW5ndGggPSBudW1iZXIubGVuZ3RoIC0gc3RhcnQ7CiAgICAgICAgZm9yIChpID0gcGFyc2VMZW5ndGggJSAyID09PSAwID8gc3RhcnQgKyAxIDogc3RhcnQ7IGkgPCBudW1iZXIubGVuZ3RoOyBpICs9IDIpIHsKICAgICAgICAgIHcgPSBwYXJzZUhleEJ5dGUobnVtYmVyLCBzdGFydCwgaSkgPDwgb2ZmOwogICAgICAgICAgdGhpcy53b3Jkc1tqXSB8PSB3ICYgMHgzZmZmZmZmOwogICAgICAgICAgaWYgKG9mZiA+PSAxOCkgewogICAgICAgICAgICBvZmYgLT0gMTg7CiAgICAgICAgICAgIGogKz0gMTsKICAgICAgICAgICAgdGhpcy53b3Jkc1tqXSB8PSB3ID4+PiAyNjsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG9mZiArPSA4OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5zdHJpcCgpOwogICAgfTsKCiAgICBmdW5jdGlvbiBwYXJzZUJhc2UgKHN0ciwgc3RhcnQsIGVuZCwgbXVsKSB7CiAgICAgIHZhciByID0gMDsKICAgICAgdmFyIGxlbiA9IE1hdGgubWluKHN0ci5sZW5ndGgsIGVuZCk7CiAgICAgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgdmFyIGMgPSBzdHIuY2hhckNvZGVBdChpKSAtIDQ4OwoKICAgICAgICByICo9IG11bDsKCiAgICAgICAgLy8gJ2EnCiAgICAgICAgaWYgKGMgPj0gNDkpIHsKICAgICAgICAgIHIgKz0gYyAtIDQ5ICsgMHhhOwoKICAgICAgICAvLyAnQScKICAgICAgICB9IGVsc2UgaWYgKGMgPj0gMTcpIHsKICAgICAgICAgIHIgKz0gYyAtIDE3ICsgMHhhOwoKICAgICAgICAvLyAnMCcgLSAnOScKICAgICAgICB9IGVsc2UgewogICAgICAgICAgciArPSBjOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gcjsKICAgIH0KCiAgICBCTi5wcm90b3R5cGUuX3BhcnNlQmFzZSA9IGZ1bmN0aW9uIF9wYXJzZUJhc2UgKG51bWJlciwgYmFzZSwgc3RhcnQpIHsKICAgICAgLy8gSW5pdGlhbGl6ZSBhcyB6ZXJvCiAgICAgIHRoaXMud29yZHMgPSBbIDAgXTsKICAgICAgdGhpcy5sZW5ndGggPSAxOwoKICAgICAgLy8gRmluZCBsZW5ndGggb2YgbGltYiBpbiBiYXNlCiAgICAgIGZvciAodmFyIGxpbWJMZW4gPSAwLCBsaW1iUG93ID0gMTsgbGltYlBvdyA8PSAweDNmZmZmZmY7IGxpbWJQb3cgKj0gYmFzZSkgewogICAgICAgIGxpbWJMZW4rKzsKICAgICAgfQogICAgICBsaW1iTGVuLS07CiAgICAgIGxpbWJQb3cgPSAobGltYlBvdyAvIGJhc2UpIHwgMDsKCiAgICAgIHZhciB0b3RhbCA9IG51bWJlci5sZW5ndGggLSBzdGFydDsKICAgICAgdmFyIG1vZCA9IHRvdGFsICUgbGltYkxlbjsKICAgICAgdmFyIGVuZCA9IE1hdGgubWluKHRvdGFsLCB0b3RhbCAtIG1vZCkgKyBzdGFydDsKCiAgICAgIHZhciB3b3JkID0gMDsKICAgICAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpICs9IGxpbWJMZW4pIHsKICAgICAgICB3b3JkID0gcGFyc2VCYXNlKG51bWJlciwgaSwgaSArIGxpbWJMZW4sIGJhc2UpOwoKICAgICAgICB0aGlzLmltdWxuKGxpbWJQb3cpOwogICAgICAgIGlmICh0aGlzLndvcmRzWzBdICsgd29yZCA8IDB4NDAwMDAwMCkgewogICAgICAgICAgdGhpcy53b3Jkc1swXSArPSB3b3JkOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLl9pYWRkbih3b3JkKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChtb2QgIT09IDApIHsKICAgICAgICB2YXIgcG93ID0gMTsKICAgICAgICB3b3JkID0gcGFyc2VCYXNlKG51bWJlciwgaSwgbnVtYmVyLmxlbmd0aCwgYmFzZSk7CgogICAgICAgIGZvciAoaSA9IDA7IGkgPCBtb2Q7IGkrKykgewogICAgICAgICAgcG93ICo9IGJhc2U7CiAgICAgICAgfQoKICAgICAgICB0aGlzLmltdWxuKHBvdyk7CiAgICAgICAgaWYgKHRoaXMud29yZHNbMF0gKyB3b3JkIDwgMHg0MDAwMDAwKSB7CiAgICAgICAgICB0aGlzLndvcmRzWzBdICs9IHdvcmQ7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuX2lhZGRuKHdvcmQpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5zdHJpcCgpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuY29weSA9IGZ1bmN0aW9uIGNvcHkgKGRlc3QpIHsKICAgICAgZGVzdC53b3JkcyA9IG5ldyBBcnJheSh0aGlzLmxlbmd0aCk7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykgewogICAgICAgIGRlc3Qud29yZHNbaV0gPSB0aGlzLndvcmRzW2ldOwogICAgICB9CiAgICAgIGRlc3QubGVuZ3RoID0gdGhpcy5sZW5ndGg7CiAgICAgIGRlc3QubmVnYXRpdmUgPSB0aGlzLm5lZ2F0aXZlOwogICAgICBkZXN0LnJlZCA9IHRoaXMucmVkOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiBjbG9uZSAoKSB7CiAgICAgIHZhciByID0gbmV3IEJOKG51bGwpOwogICAgICB0aGlzLmNvcHkocik7CiAgICAgIHJldHVybiByOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuX2V4cGFuZCA9IGZ1bmN0aW9uIF9leHBhbmQgKHNpemUpIHsKICAgICAgd2hpbGUgKHRoaXMubGVuZ3RoIDwgc2l6ZSkgewogICAgICAgIHRoaXMud29yZHNbdGhpcy5sZW5ndGgrK10gPSAwOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzOwogICAgfTsKCiAgICAvLyBSZW1vdmUgbGVhZGluZyBgMGAgZnJvbSBgdGhpc2AKICAgIEJOLnByb3RvdHlwZS5zdHJpcCA9IGZ1bmN0aW9uIHN0cmlwICgpIHsKICAgICAgd2hpbGUgKHRoaXMubGVuZ3RoID4gMSAmJiB0aGlzLndvcmRzW3RoaXMubGVuZ3RoIC0gMV0gPT09IDApIHsKICAgICAgICB0aGlzLmxlbmd0aC0tOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLl9ub3JtU2lnbigpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuX25vcm1TaWduID0gZnVuY3Rpb24gX25vcm1TaWduICgpIHsKICAgICAgLy8gLTAgPSAwCiAgICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMSAmJiB0aGlzLndvcmRzWzBdID09PSAwKSB7CiAgICAgICAgdGhpcy5uZWdhdGl2ZSA9IDA7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXM7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5pbnNwZWN0ID0gZnVuY3Rpb24gaW5zcGVjdCAoKSB7CiAgICAgIHJldHVybiAodGhpcy5yZWQgPyAnPEJOLVI6ICcgOiAnPEJOOiAnKSArIHRoaXMudG9TdHJpbmcoMTYpICsgJz4nOwogICAgfTsKCiAgICAvKgoKICAgIHZhciB6ZXJvcyA9IFtdOwogICAgdmFyIGdyb3VwU2l6ZXMgPSBbXTsKICAgIHZhciBncm91cEJhc2VzID0gW107CgogICAgdmFyIHMgPSAnJzsKICAgIHZhciBpID0gLTE7CiAgICB3aGlsZSAoKytpIDwgQk4ud29yZFNpemUpIHsKICAgICAgemVyb3NbaV0gPSBzOwogICAgICBzICs9ICcwJzsKICAgIH0KICAgIGdyb3VwU2l6ZXNbMF0gPSAwOwogICAgZ3JvdXBTaXplc1sxXSA9IDA7CiAgICBncm91cEJhc2VzWzBdID0gMDsKICAgIGdyb3VwQmFzZXNbMV0gPSAwOwogICAgdmFyIGJhc2UgPSAyIC0gMTsKICAgIHdoaWxlICgrK2Jhc2UgPCAzNiArIDEpIHsKICAgICAgdmFyIGdyb3VwU2l6ZSA9IDA7CiAgICAgIHZhciBncm91cEJhc2UgPSAxOwogICAgICB3aGlsZSAoZ3JvdXBCYXNlIDwgKDEgPDwgQk4ud29yZFNpemUpIC8gYmFzZSkgewogICAgICAgIGdyb3VwQmFzZSAqPSBiYXNlOwogICAgICAgIGdyb3VwU2l6ZSArPSAxOwogICAgICB9CiAgICAgIGdyb3VwU2l6ZXNbYmFzZV0gPSBncm91cFNpemU7CiAgICAgIGdyb3VwQmFzZXNbYmFzZV0gPSBncm91cEJhc2U7CiAgICB9CgogICAgKi8KCiAgICB2YXIgemVyb3MgPSBbCiAgICAgICcnLAogICAgICAnMCcsCiAgICAgICcwMCcsCiAgICAgICcwMDAnLAogICAgICAnMDAwMCcsCiAgICAgICcwMDAwMCcsCiAgICAgICcwMDAwMDAnLAogICAgICAnMDAwMDAwMCcsCiAgICAgICcwMDAwMDAwMCcsCiAgICAgICcwMDAwMDAwMDAnLAogICAgICAnMDAwMDAwMDAwMCcsCiAgICAgICcwMDAwMDAwMDAwMCcsCiAgICAgICcwMDAwMDAwMDAwMDAnLAogICAgICAnMDAwMDAwMDAwMDAwMCcsCiAgICAgICcwMDAwMDAwMDAwMDAwMCcsCiAgICAgICcwMDAwMDAwMDAwMDAwMDAnLAogICAgICAnMDAwMDAwMDAwMDAwMDAwMCcsCiAgICAgICcwMDAwMDAwMDAwMDAwMDAwMCcsCiAgICAgICcwMDAwMDAwMDAwMDAwMDAwMDAnLAogICAgICAnMDAwMDAwMDAwMDAwMDAwMDAwMCcsCiAgICAgICcwMDAwMDAwMDAwMDAwMDAwMDAwMCcsCiAgICAgICcwMDAwMDAwMDAwMDAwMDAwMDAwMDAnLAogICAgICAnMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCcsCiAgICAgICcwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCcsCiAgICAgICcwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAnLAogICAgICAnMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCcKICAgIF07CgogICAgdmFyIGdyb3VwU2l6ZXMgPSBbCiAgICAgIDAsIDAsCiAgICAgIDI1LCAxNiwgMTIsIDExLCAxMCwgOSwgOCwKICAgICAgOCwgNywgNywgNywgNywgNiwgNiwKICAgICAgNiwgNiwgNiwgNiwgNiwgNSwgNSwKICAgICAgNSwgNSwgNSwgNSwgNSwgNSwgNSwKICAgICAgNSwgNSwgNSwgNSwgNSwgNSwgNQogICAgXTsKCiAgICB2YXIgZ3JvdXBCYXNlcyA9IFsKICAgICAgMCwgMCwKICAgICAgMzM1NTQ0MzIsIDQzMDQ2NzIxLCAxNjc3NzIxNiwgNDg4MjgxMjUsIDYwNDY2MTc2LCA0MDM1MzYwNywgMTY3NzcyMTYsCiAgICAgIDQzMDQ2NzIxLCAxMDAwMDAwMCwgMTk0ODcxNzEsIDM1ODMxODA4LCA2Mjc0ODUxNywgNzUyOTUzNiwgMTEzOTA2MjUsCiAgICAgIDE2Nzc3MjE2LCAyNDEzNzU2OSwgMzQwMTIyMjQsIDQ3MDQ1ODgxLCA2NDAwMDAwMCwgNDA4NDEwMSwgNTE1MzYzMiwKICAgICAgNjQzNjM0MywgNzk2MjYyNCwgOTc2NTYyNSwgMTE4ODEzNzYsIDE0MzQ4OTA3LCAxNzIxMDM2OCwgMjA1MTExNDksCiAgICAgIDI0MzAwMDAwLCAyODYyOTE1MSwgMzM1NTQ0MzIsIDM5MTM1MzkzLCA0NTQzNTQyNCwgNTI1MjE4NzUsIDYwNDY2MTc2CiAgICBdOwoKICAgIEJOLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nIChiYXNlLCBwYWRkaW5nKSB7CiAgICAgIGJhc2UgPSBiYXNlIHx8IDEwOwogICAgICBwYWRkaW5nID0gcGFkZGluZyB8IDAgfHwgMTsKCiAgICAgIHZhciBvdXQ7CiAgICAgIGlmIChiYXNlID09PSAxNiB8fCBiYXNlID09PSAnaGV4JykgewogICAgICAgIG91dCA9ICcnOwogICAgICAgIHZhciBvZmYgPSAwOwogICAgICAgIHZhciBjYXJyeSA9IDA7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB2YXIgdyA9IHRoaXMud29yZHNbaV07CiAgICAgICAgICB2YXIgd29yZCA9ICgoKHcgPDwgb2ZmKSB8IGNhcnJ5KSAmIDB4ZmZmZmZmKS50b1N0cmluZygxNik7CiAgICAgICAgICBjYXJyeSA9ICh3ID4+PiAoMjQgLSBvZmYpKSAmIDB4ZmZmZmZmOwogICAgICAgICAgaWYgKGNhcnJ5ICE9PSAwIHx8IGkgIT09IHRoaXMubGVuZ3RoIC0gMSkgewogICAgICAgICAgICBvdXQgPSB6ZXJvc1s2IC0gd29yZC5sZW5ndGhdICsgd29yZCArIG91dDsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG91dCA9IHdvcmQgKyBvdXQ7CiAgICAgICAgICB9CiAgICAgICAgICBvZmYgKz0gMjsKICAgICAgICAgIGlmIChvZmYgPj0gMjYpIHsKICAgICAgICAgICAgb2ZmIC09IDI2OwogICAgICAgICAgICBpLS07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChjYXJyeSAhPT0gMCkgewogICAgICAgICAgb3V0ID0gY2FycnkudG9TdHJpbmcoMTYpICsgb3V0OwogICAgICAgIH0KICAgICAgICB3aGlsZSAob3V0Lmxlbmd0aCAlIHBhZGRpbmcgIT09IDApIHsKICAgICAgICAgIG91dCA9ICcwJyArIG91dDsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMubmVnYXRpdmUgIT09IDApIHsKICAgICAgICAgIG91dCA9ICctJyArIG91dDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG91dDsKICAgICAgfQoKICAgICAgaWYgKGJhc2UgPT09IChiYXNlIHwgMCkgJiYgYmFzZSA+PSAyICYmIGJhc2UgPD0gMzYpIHsKICAgICAgICAvLyB2YXIgZ3JvdXBTaXplID0gTWF0aC5mbG9vcihCTi53b3JkU2l6ZSAqIE1hdGguTE4yIC8gTWF0aC5sb2coYmFzZSkpOwogICAgICAgIHZhciBncm91cFNpemUgPSBncm91cFNpemVzW2Jhc2VdOwogICAgICAgIC8vIHZhciBncm91cEJhc2UgPSBNYXRoLnBvdyhiYXNlLCBncm91cFNpemUpOwogICAgICAgIHZhciBncm91cEJhc2UgPSBncm91cEJhc2VzW2Jhc2VdOwogICAgICAgIG91dCA9ICcnOwogICAgICAgIHZhciBjID0gdGhpcy5jbG9uZSgpOwogICAgICAgIGMubmVnYXRpdmUgPSAwOwogICAgICAgIHdoaWxlICghYy5pc1plcm8oKSkgewogICAgICAgICAgdmFyIHIgPSBjLm1vZG4oZ3JvdXBCYXNlKS50b1N0cmluZyhiYXNlKTsKICAgICAgICAgIGMgPSBjLmlkaXZuKGdyb3VwQmFzZSk7CgogICAgICAgICAgaWYgKCFjLmlzWmVybygpKSB7CiAgICAgICAgICAgIG91dCA9IHplcm9zW2dyb3VwU2l6ZSAtIHIubGVuZ3RoXSArIHIgKyBvdXQ7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBvdXQgPSByICsgb3V0OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAodGhpcy5pc1plcm8oKSkgewogICAgICAgICAgb3V0ID0gJzAnICsgb3V0OwogICAgICAgIH0KICAgICAgICB3aGlsZSAob3V0Lmxlbmd0aCAlIHBhZGRpbmcgIT09IDApIHsKICAgICAgICAgIG91dCA9ICcwJyArIG91dDsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMubmVnYXRpdmUgIT09IDApIHsKICAgICAgICAgIG91dCA9ICctJyArIG91dDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG91dDsKICAgICAgfQoKICAgICAgYXNzZXJ0KGZhbHNlLCAnQmFzZSBzaG91bGQgYmUgYmV0d2VlbiAyIGFuZCAzNicpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUudG9OdW1iZXIgPSBmdW5jdGlvbiB0b051bWJlciAoKSB7CiAgICAgIHZhciByZXQgPSB0aGlzLndvcmRzWzBdOwogICAgICBpZiAodGhpcy5sZW5ndGggPT09IDIpIHsKICAgICAgICByZXQgKz0gdGhpcy53b3Jkc1sxXSAqIDB4NDAwMDAwMDsKICAgICAgfSBlbHNlIGlmICh0aGlzLmxlbmd0aCA9PT0gMyAmJiB0aGlzLndvcmRzWzJdID09PSAweDAxKSB7CiAgICAgICAgLy8gTk9URTogYXQgdGhpcyBzdGFnZSBpdCBpcyBrbm93biB0aGF0IHRoZSB0b3AgYml0IGlzIHNldAogICAgICAgIHJldCArPSAweDEwMDAwMDAwMDAwMDAwICsgKHRoaXMud29yZHNbMV0gKiAweDQwMDAwMDApOwogICAgICB9IGVsc2UgaWYgKHRoaXMubGVuZ3RoID4gMikgewogICAgICAgIGFzc2VydChmYWxzZSwgJ051bWJlciBjYW4gb25seSBzYWZlbHkgc3RvcmUgdXAgdG8gNTMgYml0cycpOwogICAgICB9CiAgICAgIHJldHVybiAodGhpcy5uZWdhdGl2ZSAhPT0gMCkgPyAtcmV0IDogcmV0OwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OICgpIHsKICAgICAgcmV0dXJuIHRoaXMudG9TdHJpbmcoMTYpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUudG9CdWZmZXIgPSBmdW5jdGlvbiB0b0J1ZmZlciAoZW5kaWFuLCBsZW5ndGgpIHsKICAgICAgYXNzZXJ0KHR5cGVvZiBCdWZmZXIgIT09ICd1bmRlZmluZWQnKTsKICAgICAgcmV0dXJuIHRoaXMudG9BcnJheUxpa2UoQnVmZmVyLCBlbmRpYW4sIGxlbmd0aCk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS50b0FycmF5ID0gZnVuY3Rpb24gdG9BcnJheSAoZW5kaWFuLCBsZW5ndGgpIHsKICAgICAgcmV0dXJuIHRoaXMudG9BcnJheUxpa2UoQXJyYXksIGVuZGlhbiwgbGVuZ3RoKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLnRvQXJyYXlMaWtlID0gZnVuY3Rpb24gdG9BcnJheUxpa2UgKEFycmF5VHlwZSwgZW5kaWFuLCBsZW5ndGgpIHsKICAgICAgdmFyIGJ5dGVMZW5ndGggPSB0aGlzLmJ5dGVMZW5ndGgoKTsKICAgICAgdmFyIHJlcUxlbmd0aCA9IGxlbmd0aCB8fCBNYXRoLm1heCgxLCBieXRlTGVuZ3RoKTsKICAgICAgYXNzZXJ0KGJ5dGVMZW5ndGggPD0gcmVxTGVuZ3RoLCAnYnl0ZSBhcnJheSBsb25nZXIgdGhhbiBkZXNpcmVkIGxlbmd0aCcpOwogICAgICBhc3NlcnQocmVxTGVuZ3RoID4gMCwgJ1JlcXVlc3RlZCBhcnJheSBsZW5ndGggPD0gMCcpOwoKICAgICAgdGhpcy5zdHJpcCgpOwogICAgICB2YXIgbGl0dGxlRW5kaWFuID0gZW5kaWFuID09PSAnbGUnOwogICAgICB2YXIgcmVzID0gbmV3IEFycmF5VHlwZShyZXFMZW5ndGgpOwoKICAgICAgdmFyIGIsIGk7CiAgICAgIHZhciBxID0gdGhpcy5jbG9uZSgpOwogICAgICBpZiAoIWxpdHRsZUVuZGlhbikgewogICAgICAgIC8vIEFzc3VtZSBiaWctZW5kaWFuCiAgICAgICAgZm9yIChpID0gMDsgaSA8IHJlcUxlbmd0aCAtIGJ5dGVMZW5ndGg7IGkrKykgewogICAgICAgICAgcmVzW2ldID0gMDsKICAgICAgICB9CgogICAgICAgIGZvciAoaSA9IDA7ICFxLmlzWmVybygpOyBpKyspIHsKICAgICAgICAgIGIgPSBxLmFuZGxuKDB4ZmYpOwogICAgICAgICAgcS5pdXNocm4oOCk7CgogICAgICAgICAgcmVzW3JlcUxlbmd0aCAtIGkgLSAxXSA9IGI7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGZvciAoaSA9IDA7ICFxLmlzWmVybygpOyBpKyspIHsKICAgICAgICAgIGIgPSBxLmFuZGxuKDB4ZmYpOwogICAgICAgICAgcS5pdXNocm4oOCk7CgogICAgICAgICAgcmVzW2ldID0gYjsKICAgICAgICB9CgogICAgICAgIGZvciAoOyBpIDwgcmVxTGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHJlc1tpXSA9IDA7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gcmVzOwogICAgfTsKCiAgICBpZiAoTWF0aC5jbHozMikgewogICAgICBCTi5wcm90b3R5cGUuX2NvdW50Qml0cyA9IGZ1bmN0aW9uIF9jb3VudEJpdHMgKHcpIHsKICAgICAgICByZXR1cm4gMzIgLSBNYXRoLmNsejMyKHcpOwogICAgICB9OwogICAgfSBlbHNlIHsKICAgICAgQk4ucHJvdG90eXBlLl9jb3VudEJpdHMgPSBmdW5jdGlvbiBfY291bnRCaXRzICh3KSB7CiAgICAgICAgdmFyIHQgPSB3OwogICAgICAgIHZhciByID0gMDsKICAgICAgICBpZiAodCA+PSAweDEwMDApIHsKICAgICAgICAgIHIgKz0gMTM7CiAgICAgICAgICB0ID4+Pj0gMTM7CiAgICAgICAgfQogICAgICAgIGlmICh0ID49IDB4NDApIHsKICAgICAgICAgIHIgKz0gNzsKICAgICAgICAgIHQgPj4+PSA3OwogICAgICAgIH0KICAgICAgICBpZiAodCA+PSAweDgpIHsKICAgICAgICAgIHIgKz0gNDsKICAgICAgICAgIHQgPj4+PSA0OwogICAgICAgIH0KICAgICAgICBpZiAodCA+PSAweDAyKSB7CiAgICAgICAgICByICs9IDI7CiAgICAgICAgICB0ID4+Pj0gMjsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHIgKyB0OwogICAgICB9OwogICAgfQoKICAgIEJOLnByb3RvdHlwZS5femVyb0JpdHMgPSBmdW5jdGlvbiBfemVyb0JpdHMgKHcpIHsKICAgICAgLy8gU2hvcnQtY3V0CiAgICAgIGlmICh3ID09PSAwKSByZXR1cm4gMjY7CgogICAgICB2YXIgdCA9IHc7CiAgICAgIHZhciByID0gMDsKICAgICAgaWYgKCh0ICYgMHgxZmZmKSA9PT0gMCkgewogICAgICAgIHIgKz0gMTM7CiAgICAgICAgdCA+Pj49IDEzOwogICAgICB9CiAgICAgIGlmICgodCAmIDB4N2YpID09PSAwKSB7CiAgICAgICAgciArPSA3OwogICAgICAgIHQgPj4+PSA3OwogICAgICB9CiAgICAgIGlmICgodCAmIDB4ZikgPT09IDApIHsKICAgICAgICByICs9IDQ7CiAgICAgICAgdCA+Pj49IDQ7CiAgICAgIH0KICAgICAgaWYgKCh0ICYgMHgzKSA9PT0gMCkgewogICAgICAgIHIgKz0gMjsKICAgICAgICB0ID4+Pj0gMjsKICAgICAgfQogICAgICBpZiAoKHQgJiAweDEpID09PSAwKSB7CiAgICAgICAgcisrOwogICAgICB9CiAgICAgIHJldHVybiByOwogICAgfTsKCiAgICAvLyBSZXR1cm4gbnVtYmVyIG9mIHVzZWQgYml0cyBpbiBhIEJOCiAgICBCTi5wcm90b3R5cGUuYml0TGVuZ3RoID0gZnVuY3Rpb24gYml0TGVuZ3RoICgpIHsKICAgICAgdmFyIHcgPSB0aGlzLndvcmRzW3RoaXMubGVuZ3RoIC0gMV07CiAgICAgIHZhciBoaSA9IHRoaXMuX2NvdW50Qml0cyh3KTsKICAgICAgcmV0dXJuICh0aGlzLmxlbmd0aCAtIDEpICogMjYgKyBoaTsKICAgIH07CgogICAgZnVuY3Rpb24gdG9CaXRBcnJheSAobnVtKSB7CiAgICAgIHZhciB3ID0gbmV3IEFycmF5KG51bS5iaXRMZW5ndGgoKSk7CgogICAgICBmb3IgKHZhciBiaXQgPSAwOyBiaXQgPCB3Lmxlbmd0aDsgYml0KyspIHsKICAgICAgICB2YXIgb2ZmID0gKGJpdCAvIDI2KSB8IDA7CiAgICAgICAgdmFyIHdiaXQgPSBiaXQgJSAyNjsKCiAgICAgICAgd1tiaXRdID0gKG51bS53b3Jkc1tvZmZdICYgKDEgPDwgd2JpdCkpID4+PiB3Yml0OwogICAgICB9CgogICAgICByZXR1cm4gdzsKICAgIH0KCiAgICAvLyBOdW1iZXIgb2YgdHJhaWxpbmcgemVybyBiaXRzCiAgICBCTi5wcm90b3R5cGUuemVyb0JpdHMgPSBmdW5jdGlvbiB6ZXJvQml0cyAoKSB7CiAgICAgIGlmICh0aGlzLmlzWmVybygpKSByZXR1cm4gMDsKCiAgICAgIHZhciByID0gMDsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIGIgPSB0aGlzLl96ZXJvQml0cyh0aGlzLndvcmRzW2ldKTsKICAgICAgICByICs9IGI7CiAgICAgICAgaWYgKGIgIT09IDI2KSBicmVhazsKICAgICAgfQogICAgICByZXR1cm4gcjsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmJ5dGVMZW5ndGggPSBmdW5jdGlvbiBieXRlTGVuZ3RoICgpIHsKICAgICAgcmV0dXJuIE1hdGguY2VpbCh0aGlzLmJpdExlbmd0aCgpIC8gOCk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS50b1R3b3MgPSBmdW5jdGlvbiB0b1R3b3MgKHdpZHRoKSB7CiAgICAgIGlmICh0aGlzLm5lZ2F0aXZlICE9PSAwKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuYWJzKCkuaW5vdG4od2lkdGgpLmlhZGRuKDEpOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLmNsb25lKCk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5mcm9tVHdvcyA9IGZ1bmN0aW9uIGZyb21Ud29zICh3aWR0aCkgewogICAgICBpZiAodGhpcy50ZXN0bih3aWR0aCAtIDEpKSB7CiAgICAgICAgcmV0dXJuIHRoaXMubm90bih3aWR0aCkuaWFkZG4oMSkuaW5lZygpOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLmNsb25lKCk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5pc05lZyA9IGZ1bmN0aW9uIGlzTmVnICgpIHsKICAgICAgcmV0dXJuIHRoaXMubmVnYXRpdmUgIT09IDA7CiAgICB9OwoKICAgIC8vIFJldHVybiBuZWdhdGl2ZSBjbG9uZSBvZiBgdGhpc2AKICAgIEJOLnByb3RvdHlwZS5uZWcgPSBmdW5jdGlvbiBuZWcgKCkgewogICAgICByZXR1cm4gdGhpcy5jbG9uZSgpLmluZWcoKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmluZWcgPSBmdW5jdGlvbiBpbmVnICgpIHsKICAgICAgaWYgKCF0aGlzLmlzWmVybygpKSB7CiAgICAgICAgdGhpcy5uZWdhdGl2ZSBePSAxOwogICAgICB9CgogICAgICByZXR1cm4gdGhpczsKICAgIH07CgogICAgLy8gT3IgYG51bWAgd2l0aCBgdGhpc2AgaW4tcGxhY2UKICAgIEJOLnByb3RvdHlwZS5pdW9yID0gZnVuY3Rpb24gaXVvciAobnVtKSB7CiAgICAgIHdoaWxlICh0aGlzLmxlbmd0aCA8IG51bS5sZW5ndGgpIHsKICAgICAgICB0aGlzLndvcmRzW3RoaXMubGVuZ3RoKytdID0gMDsKICAgICAgfQoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW0ubGVuZ3RoOyBpKyspIHsKICAgICAgICB0aGlzLndvcmRzW2ldID0gdGhpcy53b3Jkc1tpXSB8IG51bS53b3Jkc1tpXTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMuc3RyaXAoKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmlvciA9IGZ1bmN0aW9uIGlvciAobnVtKSB7CiAgICAgIGFzc2VydCgodGhpcy5uZWdhdGl2ZSB8IG51bS5uZWdhdGl2ZSkgPT09IDApOwogICAgICByZXR1cm4gdGhpcy5pdW9yKG51bSk7CiAgICB9OwoKICAgIC8vIE9yIGBudW1gIHdpdGggYHRoaXNgCiAgICBCTi5wcm90b3R5cGUub3IgPSBmdW5jdGlvbiBvciAobnVtKSB7CiAgICAgIGlmICh0aGlzLmxlbmd0aCA+IG51bS5sZW5ndGgpIHJldHVybiB0aGlzLmNsb25lKCkuaW9yKG51bSk7CiAgICAgIHJldHVybiBudW0uY2xvbmUoKS5pb3IodGhpcyk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS51b3IgPSBmdW5jdGlvbiB1b3IgKG51bSkgewogICAgICBpZiAodGhpcy5sZW5ndGggPiBudW0ubGVuZ3RoKSByZXR1cm4gdGhpcy5jbG9uZSgpLml1b3IobnVtKTsKICAgICAgcmV0dXJuIG51bS5jbG9uZSgpLml1b3IodGhpcyk7CiAgICB9OwoKICAgIC8vIEFuZCBgbnVtYCB3aXRoIGB0aGlzYCBpbi1wbGFjZQogICAgQk4ucHJvdG90eXBlLml1YW5kID0gZnVuY3Rpb24gaXVhbmQgKG51bSkgewogICAgICAvLyBiID0gbWluLWxlbmd0aChudW0sIHRoaXMpCiAgICAgIHZhciBiOwogICAgICBpZiAodGhpcy5sZW5ndGggPiBudW0ubGVuZ3RoKSB7CiAgICAgICAgYiA9IG51bTsKICAgICAgfSBlbHNlIHsKICAgICAgICBiID0gdGhpczsKICAgICAgfQoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy53b3Jkc1tpXSA9IHRoaXMud29yZHNbaV0gJiBudW0ud29yZHNbaV07CiAgICAgIH0KCiAgICAgIHRoaXMubGVuZ3RoID0gYi5sZW5ndGg7CgogICAgICByZXR1cm4gdGhpcy5zdHJpcCgpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuaWFuZCA9IGZ1bmN0aW9uIGlhbmQgKG51bSkgewogICAgICBhc3NlcnQoKHRoaXMubmVnYXRpdmUgfCBudW0ubmVnYXRpdmUpID09PSAwKTsKICAgICAgcmV0dXJuIHRoaXMuaXVhbmQobnVtKTsKICAgIH07CgogICAgLy8gQW5kIGBudW1gIHdpdGggYHRoaXNgCiAgICBCTi5wcm90b3R5cGUuYW5kID0gZnVuY3Rpb24gYW5kIChudW0pIHsKICAgICAgaWYgKHRoaXMubGVuZ3RoID4gbnVtLmxlbmd0aCkgcmV0dXJuIHRoaXMuY2xvbmUoKS5pYW5kKG51bSk7CiAgICAgIHJldHVybiBudW0uY2xvbmUoKS5pYW5kKHRoaXMpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUudWFuZCA9IGZ1bmN0aW9uIHVhbmQgKG51bSkgewogICAgICBpZiAodGhpcy5sZW5ndGggPiBudW0ubGVuZ3RoKSByZXR1cm4gdGhpcy5jbG9uZSgpLml1YW5kKG51bSk7CiAgICAgIHJldHVybiBudW0uY2xvbmUoKS5pdWFuZCh0aGlzKTsKICAgIH07CgogICAgLy8gWG9yIGBudW1gIHdpdGggYHRoaXNgIGluLXBsYWNlCiAgICBCTi5wcm90b3R5cGUuaXV4b3IgPSBmdW5jdGlvbiBpdXhvciAobnVtKSB7CiAgICAgIC8vIGEubGVuZ3RoID4gYi5sZW5ndGgKICAgICAgdmFyIGE7CiAgICAgIHZhciBiOwogICAgICBpZiAodGhpcy5sZW5ndGggPiBudW0ubGVuZ3RoKSB7CiAgICAgICAgYSA9IHRoaXM7CiAgICAgICAgYiA9IG51bTsKICAgICAgfSBlbHNlIHsKICAgICAgICBhID0gbnVtOwogICAgICAgIGIgPSB0aGlzOwogICAgICB9CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGIubGVuZ3RoOyBpKyspIHsKICAgICAgICB0aGlzLndvcmRzW2ldID0gYS53b3Jkc1tpXSBeIGIud29yZHNbaV07CiAgICAgIH0KCiAgICAgIGlmICh0aGlzICE9PSBhKSB7CiAgICAgICAgZm9yICg7IGkgPCBhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB0aGlzLndvcmRzW2ldID0gYS53b3Jkc1tpXTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMubGVuZ3RoID0gYS5sZW5ndGg7CgogICAgICByZXR1cm4gdGhpcy5zdHJpcCgpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuaXhvciA9IGZ1bmN0aW9uIGl4b3IgKG51bSkgewogICAgICBhc3NlcnQoKHRoaXMubmVnYXRpdmUgfCBudW0ubmVnYXRpdmUpID09PSAwKTsKICAgICAgcmV0dXJuIHRoaXMuaXV4b3IobnVtKTsKICAgIH07CgogICAgLy8gWG9yIGBudW1gIHdpdGggYHRoaXNgCiAgICBCTi5wcm90b3R5cGUueG9yID0gZnVuY3Rpb24geG9yIChudW0pIHsKICAgICAgaWYgKHRoaXMubGVuZ3RoID4gbnVtLmxlbmd0aCkgcmV0dXJuIHRoaXMuY2xvbmUoKS5peG9yKG51bSk7CiAgICAgIHJldHVybiBudW0uY2xvbmUoKS5peG9yKHRoaXMpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUudXhvciA9IGZ1bmN0aW9uIHV4b3IgKG51bSkgewogICAgICBpZiAodGhpcy5sZW5ndGggPiBudW0ubGVuZ3RoKSByZXR1cm4gdGhpcy5jbG9uZSgpLml1eG9yKG51bSk7CiAgICAgIHJldHVybiBudW0uY2xvbmUoKS5pdXhvcih0aGlzKTsKICAgIH07CgogICAgLy8gTm90IGBgdGhpc2BgIHdpdGggYGB3aWR0aGBgIGJpdHdpZHRoCiAgICBCTi5wcm90b3R5cGUuaW5vdG4gPSBmdW5jdGlvbiBpbm90biAod2lkdGgpIHsKICAgICAgYXNzZXJ0KHR5cGVvZiB3aWR0aCA9PT0gJ251bWJlcicgJiYgd2lkdGggPj0gMCk7CgogICAgICB2YXIgYnl0ZXNOZWVkZWQgPSBNYXRoLmNlaWwod2lkdGggLyAyNikgfCAwOwogICAgICB2YXIgYml0c0xlZnQgPSB3aWR0aCAlIDI2OwoKICAgICAgLy8gRXh0ZW5kIHRoZSBidWZmZXIgd2l0aCBsZWFkaW5nIHplcm9lcwogICAgICB0aGlzLl9leHBhbmQoYnl0ZXNOZWVkZWQpOwoKICAgICAgaWYgKGJpdHNMZWZ0ID4gMCkgewogICAgICAgIGJ5dGVzTmVlZGVkLS07CiAgICAgIH0KCiAgICAgIC8vIEhhbmRsZSBjb21wbGV0ZSB3b3JkcwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJ5dGVzTmVlZGVkOyBpKyspIHsKICAgICAgICB0aGlzLndvcmRzW2ldID0gfnRoaXMud29yZHNbaV0gJiAweDNmZmZmZmY7CiAgICAgIH0KCiAgICAgIC8vIEhhbmRsZSB0aGUgcmVzaWR1ZQogICAgICBpZiAoYml0c0xlZnQgPiAwKSB7CiAgICAgICAgdGhpcy53b3Jkc1tpXSA9IH50aGlzLndvcmRzW2ldICYgKDB4M2ZmZmZmZiA+PiAoMjYgLSBiaXRzTGVmdCkpOwogICAgICB9CgogICAgICAvLyBBbmQgcmVtb3ZlIGxlYWRpbmcgemVyb2VzCiAgICAgIHJldHVybiB0aGlzLnN0cmlwKCk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5ub3RuID0gZnVuY3Rpb24gbm90biAod2lkdGgpIHsKICAgICAgcmV0dXJuIHRoaXMuY2xvbmUoKS5pbm90bih3aWR0aCk7CiAgICB9OwoKICAgIC8vIFNldCBgYml0YCBvZiBgdGhpc2AKICAgIEJOLnByb3RvdHlwZS5zZXRuID0gZnVuY3Rpb24gc2V0biAoYml0LCB2YWwpIHsKICAgICAgYXNzZXJ0KHR5cGVvZiBiaXQgPT09ICdudW1iZXInICYmIGJpdCA+PSAwKTsKCiAgICAgIHZhciBvZmYgPSAoYml0IC8gMjYpIHwgMDsKICAgICAgdmFyIHdiaXQgPSBiaXQgJSAyNjsKCiAgICAgIHRoaXMuX2V4cGFuZChvZmYgKyAxKTsKCiAgICAgIGlmICh2YWwpIHsKICAgICAgICB0aGlzLndvcmRzW29mZl0gPSB0aGlzLndvcmRzW29mZl0gfCAoMSA8PCB3Yml0KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLndvcmRzW29mZl0gPSB0aGlzLndvcmRzW29mZl0gJiB+KDEgPDwgd2JpdCk7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLnN0cmlwKCk7CiAgICB9OwoKICAgIC8vIEFkZCBgbnVtYCB0byBgdGhpc2AgaW4tcGxhY2UKICAgIEJOLnByb3RvdHlwZS5pYWRkID0gZnVuY3Rpb24gaWFkZCAobnVtKSB7CiAgICAgIHZhciByOwoKICAgICAgLy8gbmVnYXRpdmUgKyBwb3NpdGl2ZQogICAgICBpZiAodGhpcy5uZWdhdGl2ZSAhPT0gMCAmJiBudW0ubmVnYXRpdmUgPT09IDApIHsKICAgICAgICB0aGlzLm5lZ2F0aXZlID0gMDsKICAgICAgICByID0gdGhpcy5pc3ViKG51bSk7CiAgICAgICAgdGhpcy5uZWdhdGl2ZSBePSAxOwogICAgICAgIHJldHVybiB0aGlzLl9ub3JtU2lnbigpOwoKICAgICAgLy8gcG9zaXRpdmUgKyBuZWdhdGl2ZQogICAgICB9IGVsc2UgaWYgKHRoaXMubmVnYXRpdmUgPT09IDAgJiYgbnVtLm5lZ2F0aXZlICE9PSAwKSB7CiAgICAgICAgbnVtLm5lZ2F0aXZlID0gMDsKICAgICAgICByID0gdGhpcy5pc3ViKG51bSk7CiAgICAgICAgbnVtLm5lZ2F0aXZlID0gMTsKICAgICAgICByZXR1cm4gci5fbm9ybVNpZ24oKTsKICAgICAgfQoKICAgICAgLy8gYS5sZW5ndGggPiBiLmxlbmd0aAogICAgICB2YXIgYSwgYjsKICAgICAgaWYgKHRoaXMubGVuZ3RoID4gbnVtLmxlbmd0aCkgewogICAgICAgIGEgPSB0aGlzOwogICAgICAgIGIgPSBudW07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYSA9IG51bTsKICAgICAgICBiID0gdGhpczsKICAgICAgfQoKICAgICAgdmFyIGNhcnJ5ID0gMDsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgciA9IChhLndvcmRzW2ldIHwgMCkgKyAoYi53b3Jkc1tpXSB8IDApICsgY2Fycnk7CiAgICAgICAgdGhpcy53b3Jkc1tpXSA9IHIgJiAweDNmZmZmZmY7CiAgICAgICAgY2FycnkgPSByID4+PiAyNjsKICAgICAgfQogICAgICBmb3IgKDsgY2FycnkgIT09IDAgJiYgaSA8IGEubGVuZ3RoOyBpKyspIHsKICAgICAgICByID0gKGEud29yZHNbaV0gfCAwKSArIGNhcnJ5OwogICAgICAgIHRoaXMud29yZHNbaV0gPSByICYgMHgzZmZmZmZmOwogICAgICAgIGNhcnJ5ID0gciA+Pj4gMjY7CiAgICAgIH0KCiAgICAgIHRoaXMubGVuZ3RoID0gYS5sZW5ndGg7CiAgICAgIGlmIChjYXJyeSAhPT0gMCkgewogICAgICAgIHRoaXMud29yZHNbdGhpcy5sZW5ndGhdID0gY2Fycnk7CiAgICAgICAgdGhpcy5sZW5ndGgrKzsKICAgICAgLy8gQ29weSB0aGUgcmVzdCBvZiB0aGUgd29yZHMKICAgICAgfSBlbHNlIGlmIChhICE9PSB0aGlzKSB7CiAgICAgICAgZm9yICg7IGkgPCBhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB0aGlzLndvcmRzW2ldID0gYS53b3Jkc1tpXTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzOwogICAgfTsKCiAgICAvLyBBZGQgYG51bWAgdG8gYHRoaXNgCiAgICBCTi5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gYWRkIChudW0pIHsKICAgICAgdmFyIHJlczsKICAgICAgaWYgKG51bS5uZWdhdGl2ZSAhPT0gMCAmJiB0aGlzLm5lZ2F0aXZlID09PSAwKSB7CiAgICAgICAgbnVtLm5lZ2F0aXZlID0gMDsKICAgICAgICByZXMgPSB0aGlzLnN1YihudW0pOwogICAgICAgIG51bS5uZWdhdGl2ZSBePSAxOwogICAgICAgIHJldHVybiByZXM7CiAgICAgIH0gZWxzZSBpZiAobnVtLm5lZ2F0aXZlID09PSAwICYmIHRoaXMubmVnYXRpdmUgIT09IDApIHsKICAgICAgICB0aGlzLm5lZ2F0aXZlID0gMDsKICAgICAgICByZXMgPSBudW0uc3ViKHRoaXMpOwogICAgICAgIHRoaXMubmVnYXRpdmUgPSAxOwogICAgICAgIHJldHVybiByZXM7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmxlbmd0aCA+IG51bS5sZW5ndGgpIHJldHVybiB0aGlzLmNsb25lKCkuaWFkZChudW0pOwoKICAgICAgcmV0dXJuIG51bS5jbG9uZSgpLmlhZGQodGhpcyk7CiAgICB9OwoKICAgIC8vIFN1YnRyYWN0IGBudW1gIGZyb20gYHRoaXNgIGluLXBsYWNlCiAgICBCTi5wcm90b3R5cGUuaXN1YiA9IGZ1bmN0aW9uIGlzdWIgKG51bSkgewogICAgICAvLyB0aGlzIC0gKC1udW0pID0gdGhpcyArIG51bQogICAgICBpZiAobnVtLm5lZ2F0aXZlICE9PSAwKSB7CiAgICAgICAgbnVtLm5lZ2F0aXZlID0gMDsKICAgICAgICB2YXIgciA9IHRoaXMuaWFkZChudW0pOwogICAgICAgIG51bS5uZWdhdGl2ZSA9IDE7CiAgICAgICAgcmV0dXJuIHIuX25vcm1TaWduKCk7CgogICAgICAvLyAtdGhpcyAtIG51bSA9IC0odGhpcyArIG51bSkKICAgICAgfSBlbHNlIGlmICh0aGlzLm5lZ2F0aXZlICE9PSAwKSB7CiAgICAgICAgdGhpcy5uZWdhdGl2ZSA9IDA7CiAgICAgICAgdGhpcy5pYWRkKG51bSk7CiAgICAgICAgdGhpcy5uZWdhdGl2ZSA9IDE7CiAgICAgICAgcmV0dXJuIHRoaXMuX25vcm1TaWduKCk7CiAgICAgIH0KCiAgICAgIC8vIEF0IHRoaXMgcG9pbnQgYm90aCBudW1iZXJzIGFyZSBwb3NpdGl2ZQogICAgICB2YXIgY21wID0gdGhpcy5jbXAobnVtKTsKCiAgICAgIC8vIE9wdGltaXphdGlvbiAtIHplcm9pZnkKICAgICAgaWYgKGNtcCA9PT0gMCkgewogICAgICAgIHRoaXMubmVnYXRpdmUgPSAwOwogICAgICAgIHRoaXMubGVuZ3RoID0gMTsKICAgICAgICB0aGlzLndvcmRzWzBdID0gMDsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfQoKICAgICAgLy8gYSA+IGIKICAgICAgdmFyIGEsIGI7CiAgICAgIGlmIChjbXAgPiAwKSB7CiAgICAgICAgYSA9IHRoaXM7CiAgICAgICAgYiA9IG51bTsKICAgICAgfSBlbHNlIHsKICAgICAgICBhID0gbnVtOwogICAgICAgIGIgPSB0aGlzOwogICAgICB9CgogICAgICB2YXIgY2FycnkgPSAwOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGIubGVuZ3RoOyBpKyspIHsKICAgICAgICByID0gKGEud29yZHNbaV0gfCAwKSAtIChiLndvcmRzW2ldIHwgMCkgKyBjYXJyeTsKICAgICAgICBjYXJyeSA9IHIgPj4gMjY7CiAgICAgICAgdGhpcy53b3Jkc1tpXSA9IHIgJiAweDNmZmZmZmY7CiAgICAgIH0KICAgICAgZm9yICg7IGNhcnJ5ICE9PSAwICYmIGkgPCBhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgciA9IChhLndvcmRzW2ldIHwgMCkgKyBjYXJyeTsKICAgICAgICBjYXJyeSA9IHIgPj4gMjY7CiAgICAgICAgdGhpcy53b3Jkc1tpXSA9IHIgJiAweDNmZmZmZmY7CiAgICAgIH0KCiAgICAgIC8vIENvcHkgcmVzdCBvZiB0aGUgd29yZHMKICAgICAgaWYgKGNhcnJ5ID09PSAwICYmIGkgPCBhLmxlbmd0aCAmJiBhICE9PSB0aGlzKSB7CiAgICAgICAgZm9yICg7IGkgPCBhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB0aGlzLndvcmRzW2ldID0gYS53b3Jkc1tpXTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMubGVuZ3RoID0gTWF0aC5tYXgodGhpcy5sZW5ndGgsIGkpOwoKICAgICAgaWYgKGEgIT09IHRoaXMpIHsKICAgICAgICB0aGlzLm5lZ2F0aXZlID0gMTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMuc3RyaXAoKTsKICAgIH07CgogICAgLy8gU3VidHJhY3QgYG51bWAgZnJvbSBgdGhpc2AKICAgIEJOLnByb3RvdHlwZS5zdWIgPSBmdW5jdGlvbiBzdWIgKG51bSkgewogICAgICByZXR1cm4gdGhpcy5jbG9uZSgpLmlzdWIobnVtKTsKICAgIH07CgogICAgZnVuY3Rpb24gc21hbGxNdWxUbyAoc2VsZiwgbnVtLCBvdXQpIHsKICAgICAgb3V0Lm5lZ2F0aXZlID0gbnVtLm5lZ2F0aXZlIF4gc2VsZi5uZWdhdGl2ZTsKICAgICAgdmFyIGxlbiA9IChzZWxmLmxlbmd0aCArIG51bS5sZW5ndGgpIHwgMDsKICAgICAgb3V0Lmxlbmd0aCA9IGxlbjsKICAgICAgbGVuID0gKGxlbiAtIDEpIHwgMDsKCiAgICAgIC8vIFBlZWwgb25lIGl0ZXJhdGlvbiAoY29tcGlsZXIgY2FuJ3QgZG8gaXQsIGJlY2F1c2Ugb2YgY29kZSBjb21wbGV4aXR5KQogICAgICB2YXIgYSA9IHNlbGYud29yZHNbMF0gfCAwOwogICAgICB2YXIgYiA9IG51bS53b3Jkc1swXSB8IDA7CiAgICAgIHZhciByID0gYSAqIGI7CgogICAgICB2YXIgbG8gPSByICYgMHgzZmZmZmZmOwogICAgICB2YXIgY2FycnkgPSAociAvIDB4NDAwMDAwMCkgfCAwOwogICAgICBvdXQud29yZHNbMF0gPSBsbzsKCiAgICAgIGZvciAodmFyIGsgPSAxOyBrIDwgbGVuOyBrKyspIHsKICAgICAgICAvLyBTdW0gYWxsIHdvcmRzIHdpdGggdGhlIHNhbWUgYGkgKyBqID0ga2AgYW5kIGFjY3VtdWxhdGUgYG5jYXJyeWAsCiAgICAgICAgLy8gbm90ZSB0aGF0IG5jYXJyeSBjb3VsZCBiZSA+PSAweDNmZmZmZmYKICAgICAgICB2YXIgbmNhcnJ5ID0gY2FycnkgPj4+IDI2OwogICAgICAgIHZhciByd29yZCA9IGNhcnJ5ICYgMHgzZmZmZmZmOwogICAgICAgIHZhciBtYXhKID0gTWF0aC5taW4oaywgbnVtLmxlbmd0aCAtIDEpOwogICAgICAgIGZvciAodmFyIGogPSBNYXRoLm1heCgwLCBrIC0gc2VsZi5sZW5ndGggKyAxKTsgaiA8PSBtYXhKOyBqKyspIHsKICAgICAgICAgIHZhciBpID0gKGsgLSBqKSB8IDA7CiAgICAgICAgICBhID0gc2VsZi53b3Jkc1tpXSB8IDA7CiAgICAgICAgICBiID0gbnVtLndvcmRzW2pdIHwgMDsKICAgICAgICAgIHIgPSBhICogYiArIHJ3b3JkOwogICAgICAgICAgbmNhcnJ5ICs9IChyIC8gMHg0MDAwMDAwKSB8IDA7CiAgICAgICAgICByd29yZCA9IHIgJiAweDNmZmZmZmY7CiAgICAgICAgfQogICAgICAgIG91dC53b3Jkc1trXSA9IHJ3b3JkIHwgMDsKICAgICAgICBjYXJyeSA9IG5jYXJyeSB8IDA7CiAgICAgIH0KICAgICAgaWYgKGNhcnJ5ICE9PSAwKSB7CiAgICAgICAgb3V0LndvcmRzW2tdID0gY2FycnkgfCAwOwogICAgICB9IGVsc2UgewogICAgICAgIG91dC5sZW5ndGgtLTsKICAgICAgfQoKICAgICAgcmV0dXJuIG91dC5zdHJpcCgpOwogICAgfQoKICAgIC8vIFRPRE8oaW5kdXRueSk6IGl0IG1heSBiZSByZWFzb25hYmxlIHRvIG9taXQgaXQgZm9yIHVzZXJzIHdobyBkb24ndCBuZWVkCiAgICAvLyB0byB3b3JrIHdpdGggMjU2LWJpdCBudW1iZXJzLCBvdGhlcndpc2UgaXQgZ2l2ZXMgMjAlIGltcHJvdmVtZW50IGZvciAyNTYtYml0CiAgICAvLyBtdWx0aXBsaWNhdGlvbiAobGlrZSBlbGxpcHRpYyBzZWNwMjU2azEpLgogICAgdmFyIGNvbWIxME11bFRvID0gZnVuY3Rpb24gY29tYjEwTXVsVG8gKHNlbGYsIG51bSwgb3V0KSB7CiAgICAgIHZhciBhID0gc2VsZi53b3JkczsKICAgICAgdmFyIGIgPSBudW0ud29yZHM7CiAgICAgIHZhciBvID0gb3V0LndvcmRzOwogICAgICB2YXIgYyA9IDA7CiAgICAgIHZhciBsbzsKICAgICAgdmFyIG1pZDsKICAgICAgdmFyIGhpOwogICAgICB2YXIgYTAgPSBhWzBdIHwgMDsKICAgICAgdmFyIGFsMCA9IGEwICYgMHgxZmZmOwogICAgICB2YXIgYWgwID0gYTAgPj4+IDEzOwogICAgICB2YXIgYTEgPSBhWzFdIHwgMDsKICAgICAgdmFyIGFsMSA9IGExICYgMHgxZmZmOwogICAgICB2YXIgYWgxID0gYTEgPj4+IDEzOwogICAgICB2YXIgYTIgPSBhWzJdIHwgMDsKICAgICAgdmFyIGFsMiA9IGEyICYgMHgxZmZmOwogICAgICB2YXIgYWgyID0gYTIgPj4+IDEzOwogICAgICB2YXIgYTMgPSBhWzNdIHwgMDsKICAgICAgdmFyIGFsMyA9IGEzICYgMHgxZmZmOwogICAgICB2YXIgYWgzID0gYTMgPj4+IDEzOwogICAgICB2YXIgYTQgPSBhWzRdIHwgMDsKICAgICAgdmFyIGFsNCA9IGE0ICYgMHgxZmZmOwogICAgICB2YXIgYWg0ID0gYTQgPj4+IDEzOwogICAgICB2YXIgYTUgPSBhWzVdIHwgMDsKICAgICAgdmFyIGFsNSA9IGE1ICYgMHgxZmZmOwogICAgICB2YXIgYWg1ID0gYTUgPj4+IDEzOwogICAgICB2YXIgYTYgPSBhWzZdIHwgMDsKICAgICAgdmFyIGFsNiA9IGE2ICYgMHgxZmZmOwogICAgICB2YXIgYWg2ID0gYTYgPj4+IDEzOwogICAgICB2YXIgYTcgPSBhWzddIHwgMDsKICAgICAgdmFyIGFsNyA9IGE3ICYgMHgxZmZmOwogICAgICB2YXIgYWg3ID0gYTcgPj4+IDEzOwogICAgICB2YXIgYTggPSBhWzhdIHwgMDsKICAgICAgdmFyIGFsOCA9IGE4ICYgMHgxZmZmOwogICAgICB2YXIgYWg4ID0gYTggPj4+IDEzOwogICAgICB2YXIgYTkgPSBhWzldIHwgMDsKICAgICAgdmFyIGFsOSA9IGE5ICYgMHgxZmZmOwogICAgICB2YXIgYWg5ID0gYTkgPj4+IDEzOwogICAgICB2YXIgYjAgPSBiWzBdIHwgMDsKICAgICAgdmFyIGJsMCA9IGIwICYgMHgxZmZmOwogICAgICB2YXIgYmgwID0gYjAgPj4+IDEzOwogICAgICB2YXIgYjEgPSBiWzFdIHwgMDsKICAgICAgdmFyIGJsMSA9IGIxICYgMHgxZmZmOwogICAgICB2YXIgYmgxID0gYjEgPj4+IDEzOwogICAgICB2YXIgYjIgPSBiWzJdIHwgMDsKICAgICAgdmFyIGJsMiA9IGIyICYgMHgxZmZmOwogICAgICB2YXIgYmgyID0gYjIgPj4+IDEzOwogICAgICB2YXIgYjMgPSBiWzNdIHwgMDsKICAgICAgdmFyIGJsMyA9IGIzICYgMHgxZmZmOwogICAgICB2YXIgYmgzID0gYjMgPj4+IDEzOwogICAgICB2YXIgYjQgPSBiWzRdIHwgMDsKICAgICAgdmFyIGJsNCA9IGI0ICYgMHgxZmZmOwogICAgICB2YXIgYmg0ID0gYjQgPj4+IDEzOwogICAgICB2YXIgYjUgPSBiWzVdIHwgMDsKICAgICAgdmFyIGJsNSA9IGI1ICYgMHgxZmZmOwogICAgICB2YXIgYmg1ID0gYjUgPj4+IDEzOwogICAgICB2YXIgYjYgPSBiWzZdIHwgMDsKICAgICAgdmFyIGJsNiA9IGI2ICYgMHgxZmZmOwogICAgICB2YXIgYmg2ID0gYjYgPj4+IDEzOwogICAgICB2YXIgYjcgPSBiWzddIHwgMDsKICAgICAgdmFyIGJsNyA9IGI3ICYgMHgxZmZmOwogICAgICB2YXIgYmg3ID0gYjcgPj4+IDEzOwogICAgICB2YXIgYjggPSBiWzhdIHwgMDsKICAgICAgdmFyIGJsOCA9IGI4ICYgMHgxZmZmOwogICAgICB2YXIgYmg4ID0gYjggPj4+IDEzOwogICAgICB2YXIgYjkgPSBiWzldIHwgMDsKICAgICAgdmFyIGJsOSA9IGI5ICYgMHgxZmZmOwogICAgICB2YXIgYmg5ID0gYjkgPj4+IDEzOwoKICAgICAgb3V0Lm5lZ2F0aXZlID0gc2VsZi5uZWdhdGl2ZSBeIG51bS5uZWdhdGl2ZTsKICAgICAgb3V0Lmxlbmd0aCA9IDE5OwogICAgICAvKiBrID0gMCAqLwogICAgICBsbyA9IE1hdGguaW11bChhbDAsIGJsMCk7CiAgICAgIG1pZCA9IE1hdGguaW11bChhbDAsIGJoMCk7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgwLCBibDApKSB8IDA7CiAgICAgIGhpID0gTWF0aC5pbXVsKGFoMCwgYmgwKTsKICAgICAgdmFyIHcwID0gKCgoYyArIGxvKSB8IDApICsgKChtaWQgJiAweDFmZmYpIDw8IDEzKSkgfCAwOwogICAgICBjID0gKCgoaGkgKyAobWlkID4+PiAxMykpIHwgMCkgKyAodzAgPj4+IDI2KSkgfCAwOwogICAgICB3MCAmPSAweDNmZmZmZmY7CiAgICAgIC8qIGsgPSAxICovCiAgICAgIGxvID0gTWF0aC5pbXVsKGFsMSwgYmwwKTsKICAgICAgbWlkID0gTWF0aC5pbXVsKGFsMSwgYmgwKTsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDEsIGJsMCkpIHwgMDsKICAgICAgaGkgPSBNYXRoLmltdWwoYWgxLCBiaDApOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDAsIGJsMSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDAsIGJoMSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDAsIGJsMSkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgwLCBiaDEpKSB8IDA7CiAgICAgIHZhciB3MSA9ICgoKGMgKyBsbykgfCAwKSArICgobWlkICYgMHgxZmZmKSA8PCAxMykpIHwgMDsKICAgICAgYyA9ICgoKGhpICsgKG1pZCA+Pj4gMTMpKSB8IDApICsgKHcxID4+PiAyNikpIHwgMDsKICAgICAgdzEgJj0gMHgzZmZmZmZmOwogICAgICAvKiBrID0gMiAqLwogICAgICBsbyA9IE1hdGguaW11bChhbDIsIGJsMCk7CiAgICAgIG1pZCA9IE1hdGguaW11bChhbDIsIGJoMCk7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgyLCBibDApKSB8IDA7CiAgICAgIGhpID0gTWF0aC5pbXVsKGFoMiwgYmgwKTsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwxLCBibDEpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwxLCBiaDEpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgxLCBibDEpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMSwgYmgxKSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDAsIGJsMikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDAsIGJoMikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDAsIGJsMikpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgwLCBiaDIpKSB8IDA7CiAgICAgIHZhciB3MiA9ICgoKGMgKyBsbykgfCAwKSArICgobWlkICYgMHgxZmZmKSA8PCAxMykpIHwgMDsKICAgICAgYyA9ICgoKGhpICsgKG1pZCA+Pj4gMTMpKSB8IDApICsgKHcyID4+PiAyNikpIHwgMDsKICAgICAgdzIgJj0gMHgzZmZmZmZmOwogICAgICAvKiBrID0gMyAqLwogICAgICBsbyA9IE1hdGguaW11bChhbDMsIGJsMCk7CiAgICAgIG1pZCA9IE1hdGguaW11bChhbDMsIGJoMCk7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgzLCBibDApKSB8IDA7CiAgICAgIGhpID0gTWF0aC5pbXVsKGFoMywgYmgwKTsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwyLCBibDEpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwyLCBiaDEpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgyLCBibDEpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMiwgYmgxKSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDEsIGJsMikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDEsIGJoMikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDEsIGJsMikpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgxLCBiaDIpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMCwgYmwzKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMCwgYmgzKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMCwgYmwzKSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDAsIGJoMykpIHwgMDsKICAgICAgdmFyIHczID0gKCgoYyArIGxvKSB8IDApICsgKChtaWQgJiAweDFmZmYpIDw8IDEzKSkgfCAwOwogICAgICBjID0gKCgoaGkgKyAobWlkID4+PiAxMykpIHwgMCkgKyAodzMgPj4+IDI2KSkgfCAwOwogICAgICB3MyAmPSAweDNmZmZmZmY7CiAgICAgIC8qIGsgPSA0ICovCiAgICAgIGxvID0gTWF0aC5pbXVsKGFsNCwgYmwwKTsKICAgICAgbWlkID0gTWF0aC5pbXVsKGFsNCwgYmgwKTsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDQsIGJsMCkpIHwgMDsKICAgICAgaGkgPSBNYXRoLmltdWwoYWg0LCBiaDApOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDMsIGJsMSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDMsIGJoMSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDMsIGJsMSkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgzLCBiaDEpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMiwgYmwyKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMiwgYmgyKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMiwgYmwyKSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDIsIGJoMikpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwxLCBibDMpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwxLCBiaDMpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgxLCBibDMpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMSwgYmgzKSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDAsIGJsNCkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDAsIGJoNCkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDAsIGJsNCkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgwLCBiaDQpKSB8IDA7CiAgICAgIHZhciB3NCA9ICgoKGMgKyBsbykgfCAwKSArICgobWlkICYgMHgxZmZmKSA8PCAxMykpIHwgMDsKICAgICAgYyA9ICgoKGhpICsgKG1pZCA+Pj4gMTMpKSB8IDApICsgKHc0ID4+PiAyNikpIHwgMDsKICAgICAgdzQgJj0gMHgzZmZmZmZmOwogICAgICAvKiBrID0gNSAqLwogICAgICBsbyA9IE1hdGguaW11bChhbDUsIGJsMCk7CiAgICAgIG1pZCA9IE1hdGguaW11bChhbDUsIGJoMCk7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg1LCBibDApKSB8IDA7CiAgICAgIGhpID0gTWF0aC5pbXVsKGFoNSwgYmgwKTsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw0LCBibDEpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw0LCBiaDEpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg0LCBibDEpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNCwgYmgxKSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDMsIGJsMikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDMsIGJoMikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDMsIGJsMikpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgzLCBiaDIpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMiwgYmwzKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMiwgYmgzKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMiwgYmwzKSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDIsIGJoMykpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwxLCBibDQpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwxLCBiaDQpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgxLCBibDQpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMSwgYmg0KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDAsIGJsNSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDAsIGJoNSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDAsIGJsNSkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgwLCBiaDUpKSB8IDA7CiAgICAgIHZhciB3NSA9ICgoKGMgKyBsbykgfCAwKSArICgobWlkICYgMHgxZmZmKSA8PCAxMykpIHwgMDsKICAgICAgYyA9ICgoKGhpICsgKG1pZCA+Pj4gMTMpKSB8IDApICsgKHc1ID4+PiAyNikpIHwgMDsKICAgICAgdzUgJj0gMHgzZmZmZmZmOwogICAgICAvKiBrID0gNiAqLwogICAgICBsbyA9IE1hdGguaW11bChhbDYsIGJsMCk7CiAgICAgIG1pZCA9IE1hdGguaW11bChhbDYsIGJoMCk7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg2LCBibDApKSB8IDA7CiAgICAgIGhpID0gTWF0aC5pbXVsKGFoNiwgYmgwKTsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw1LCBibDEpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw1LCBiaDEpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg1LCBibDEpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNSwgYmgxKSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDQsIGJsMikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDQsIGJoMikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDQsIGJsMikpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg0LCBiaDIpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMywgYmwzKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMywgYmgzKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMywgYmwzKSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDMsIGJoMykpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwyLCBibDQpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwyLCBiaDQpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgyLCBibDQpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMiwgYmg0KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDEsIGJsNSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDEsIGJoNSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDEsIGJsNSkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgxLCBiaDUpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMCwgYmw2KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMCwgYmg2KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMCwgYmw2KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDAsIGJoNikpIHwgMDsKICAgICAgdmFyIHc2ID0gKCgoYyArIGxvKSB8IDApICsgKChtaWQgJiAweDFmZmYpIDw8IDEzKSkgfCAwOwogICAgICBjID0gKCgoaGkgKyAobWlkID4+PiAxMykpIHwgMCkgKyAodzYgPj4+IDI2KSkgfCAwOwogICAgICB3NiAmPSAweDNmZmZmZmY7CiAgICAgIC8qIGsgPSA3ICovCiAgICAgIGxvID0gTWF0aC5pbXVsKGFsNywgYmwwKTsKICAgICAgbWlkID0gTWF0aC5pbXVsKGFsNywgYmgwKTsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDcsIGJsMCkpIHwgMDsKICAgICAgaGkgPSBNYXRoLmltdWwoYWg3LCBiaDApOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDYsIGJsMSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDYsIGJoMSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDYsIGJsMSkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg2LCBiaDEpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNSwgYmwyKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNSwgYmgyKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNSwgYmwyKSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDUsIGJoMikpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw0LCBibDMpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw0LCBiaDMpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg0LCBibDMpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNCwgYmgzKSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDMsIGJsNCkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDMsIGJoNCkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDMsIGJsNCkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgzLCBiaDQpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMiwgYmw1KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMiwgYmg1KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMiwgYmw1KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDIsIGJoNSkpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwxLCBibDYpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwxLCBiaDYpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgxLCBibDYpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMSwgYmg2KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDAsIGJsNykpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDAsIGJoNykpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDAsIGJsNykpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgwLCBiaDcpKSB8IDA7CiAgICAgIHZhciB3NyA9ICgoKGMgKyBsbykgfCAwKSArICgobWlkICYgMHgxZmZmKSA8PCAxMykpIHwgMDsKICAgICAgYyA9ICgoKGhpICsgKG1pZCA+Pj4gMTMpKSB8IDApICsgKHc3ID4+PiAyNikpIHwgMDsKICAgICAgdzcgJj0gMHgzZmZmZmZmOwogICAgICAvKiBrID0gOCAqLwogICAgICBsbyA9IE1hdGguaW11bChhbDgsIGJsMCk7CiAgICAgIG1pZCA9IE1hdGguaW11bChhbDgsIGJoMCk7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg4LCBibDApKSB8IDA7CiAgICAgIGhpID0gTWF0aC5pbXVsKGFoOCwgYmgwKTsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw3LCBibDEpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw3LCBiaDEpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg3LCBibDEpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNywgYmgxKSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDYsIGJsMikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDYsIGJoMikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDYsIGJsMikpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg2LCBiaDIpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNSwgYmwzKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNSwgYmgzKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNSwgYmwzKSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDUsIGJoMykpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw0LCBibDQpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw0LCBiaDQpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg0LCBibDQpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNCwgYmg0KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDMsIGJsNSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDMsIGJoNSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDMsIGJsNSkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgzLCBiaDUpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMiwgYmw2KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMiwgYmg2KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMiwgYmw2KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDIsIGJoNikpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwxLCBibDcpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwxLCBiaDcpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgxLCBibDcpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMSwgYmg3KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDAsIGJsOCkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDAsIGJoOCkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDAsIGJsOCkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgwLCBiaDgpKSB8IDA7CiAgICAgIHZhciB3OCA9ICgoKGMgKyBsbykgfCAwKSArICgobWlkICYgMHgxZmZmKSA8PCAxMykpIHwgMDsKICAgICAgYyA9ICgoKGhpICsgKG1pZCA+Pj4gMTMpKSB8IDApICsgKHc4ID4+PiAyNikpIHwgMDsKICAgICAgdzggJj0gMHgzZmZmZmZmOwogICAgICAvKiBrID0gOSAqLwogICAgICBsbyA9IE1hdGguaW11bChhbDksIGJsMCk7CiAgICAgIG1pZCA9IE1hdGguaW11bChhbDksIGJoMCk7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg5LCBibDApKSB8IDA7CiAgICAgIGhpID0gTWF0aC5pbXVsKGFoOSwgYmgwKTsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw4LCBibDEpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw4LCBiaDEpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg4LCBibDEpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoOCwgYmgxKSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDcsIGJsMikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDcsIGJoMikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDcsIGJsMikpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg3LCBiaDIpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNiwgYmwzKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNiwgYmgzKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNiwgYmwzKSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDYsIGJoMykpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw1LCBibDQpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw1LCBiaDQpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg1LCBibDQpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNSwgYmg0KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDQsIGJsNSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDQsIGJoNSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDQsIGJsNSkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg0LCBiaDUpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMywgYmw2KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMywgYmg2KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMywgYmw2KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDMsIGJoNikpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwyLCBibDcpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwyLCBiaDcpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgyLCBibDcpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMiwgYmg3KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDEsIGJsOCkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDEsIGJoOCkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDEsIGJsOCkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgxLCBiaDgpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMCwgYmw5KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMCwgYmg5KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMCwgYmw5KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDAsIGJoOSkpIHwgMDsKICAgICAgdmFyIHc5ID0gKCgoYyArIGxvKSB8IDApICsgKChtaWQgJiAweDFmZmYpIDw8IDEzKSkgfCAwOwogICAgICBjID0gKCgoaGkgKyAobWlkID4+PiAxMykpIHwgMCkgKyAodzkgPj4+IDI2KSkgfCAwOwogICAgICB3OSAmPSAweDNmZmZmZmY7CiAgICAgIC8qIGsgPSAxMCAqLwogICAgICBsbyA9IE1hdGguaW11bChhbDksIGJsMSk7CiAgICAgIG1pZCA9IE1hdGguaW11bChhbDksIGJoMSk7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg5LCBibDEpKSB8IDA7CiAgICAgIGhpID0gTWF0aC5pbXVsKGFoOSwgYmgxKTsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw4LCBibDIpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw4LCBiaDIpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg4LCBibDIpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoOCwgYmgyKSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDcsIGJsMykpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDcsIGJoMykpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDcsIGJsMykpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg3LCBiaDMpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNiwgYmw0KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNiwgYmg0KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNiwgYmw0KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDYsIGJoNCkpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw1LCBibDUpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw1LCBiaDUpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg1LCBibDUpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNSwgYmg1KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDQsIGJsNikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDQsIGJoNikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDQsIGJsNikpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg0LCBiaDYpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMywgYmw3KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMywgYmg3KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMywgYmw3KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDMsIGJoNykpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwyLCBibDgpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwyLCBiaDgpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgyLCBibDgpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMiwgYmg4KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDEsIGJsOSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDEsIGJoOSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDEsIGJsOSkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgxLCBiaDkpKSB8IDA7CiAgICAgIHZhciB3MTAgPSAoKChjICsgbG8pIHwgMCkgKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpKSB8IDA7CiAgICAgIGMgPSAoKChoaSArIChtaWQgPj4+IDEzKSkgfCAwKSArICh3MTAgPj4+IDI2KSkgfCAwOwogICAgICB3MTAgJj0gMHgzZmZmZmZmOwogICAgICAvKiBrID0gMTEgKi8KICAgICAgbG8gPSBNYXRoLmltdWwoYWw5LCBibDIpOwogICAgICBtaWQgPSBNYXRoLmltdWwoYWw5LCBiaDIpOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoOSwgYmwyKSkgfCAwOwogICAgICBoaSA9IE1hdGguaW11bChhaDksIGJoMik7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsOCwgYmwzKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsOCwgYmgzKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoOCwgYmwzKSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDgsIGJoMykpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw3LCBibDQpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw3LCBiaDQpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg3LCBibDQpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNywgYmg0KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDYsIGJsNSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDYsIGJoNSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDYsIGJsNSkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg2LCBiaDUpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNSwgYmw2KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNSwgYmg2KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNSwgYmw2KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDUsIGJoNikpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw0LCBibDcpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw0LCBiaDcpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg0LCBibDcpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNCwgYmg3KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDMsIGJsOCkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDMsIGJoOCkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDMsIGJsOCkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgzLCBiaDgpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMiwgYmw5KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMiwgYmg5KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMiwgYmw5KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDIsIGJoOSkpIHwgMDsKICAgICAgdmFyIHcxMSA9ICgoKGMgKyBsbykgfCAwKSArICgobWlkICYgMHgxZmZmKSA8PCAxMykpIHwgMDsKICAgICAgYyA9ICgoKGhpICsgKG1pZCA+Pj4gMTMpKSB8IDApICsgKHcxMSA+Pj4gMjYpKSB8IDA7CiAgICAgIHcxMSAmPSAweDNmZmZmZmY7CiAgICAgIC8qIGsgPSAxMiAqLwogICAgICBsbyA9IE1hdGguaW11bChhbDksIGJsMyk7CiAgICAgIG1pZCA9IE1hdGguaW11bChhbDksIGJoMyk7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg5LCBibDMpKSB8IDA7CiAgICAgIGhpID0gTWF0aC5pbXVsKGFoOSwgYmgzKTsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw4LCBibDQpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw4LCBiaDQpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg4LCBibDQpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoOCwgYmg0KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDcsIGJsNSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDcsIGJoNSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDcsIGJsNSkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg3LCBiaDUpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNiwgYmw2KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNiwgYmg2KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNiwgYmw2KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDYsIGJoNikpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw1LCBibDcpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw1LCBiaDcpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg1LCBibDcpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNSwgYmg3KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDQsIGJsOCkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDQsIGJoOCkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDQsIGJsOCkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg0LCBiaDgpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMywgYmw5KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMywgYmg5KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMywgYmw5KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDMsIGJoOSkpIHwgMDsKICAgICAgdmFyIHcxMiA9ICgoKGMgKyBsbykgfCAwKSArICgobWlkICYgMHgxZmZmKSA8PCAxMykpIHwgMDsKICAgICAgYyA9ICgoKGhpICsgKG1pZCA+Pj4gMTMpKSB8IDApICsgKHcxMiA+Pj4gMjYpKSB8IDA7CiAgICAgIHcxMiAmPSAweDNmZmZmZmY7CiAgICAgIC8qIGsgPSAxMyAqLwogICAgICBsbyA9IE1hdGguaW11bChhbDksIGJsNCk7CiAgICAgIG1pZCA9IE1hdGguaW11bChhbDksIGJoNCk7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg5LCBibDQpKSB8IDA7CiAgICAgIGhpID0gTWF0aC5pbXVsKGFoOSwgYmg0KTsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw4LCBibDUpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw4LCBiaDUpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg4LCBibDUpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoOCwgYmg1KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDcsIGJsNikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDcsIGJoNikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDcsIGJsNikpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg3LCBiaDYpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNiwgYmw3KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNiwgYmg3KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNiwgYmw3KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDYsIGJoNykpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw1LCBibDgpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw1LCBiaDgpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg1LCBibDgpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNSwgYmg4KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDQsIGJsOSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDQsIGJoOSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDQsIGJsOSkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg0LCBiaDkpKSB8IDA7CiAgICAgIHZhciB3MTMgPSAoKChjICsgbG8pIHwgMCkgKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpKSB8IDA7CiAgICAgIGMgPSAoKChoaSArIChtaWQgPj4+IDEzKSkgfCAwKSArICh3MTMgPj4+IDI2KSkgfCAwOwogICAgICB3MTMgJj0gMHgzZmZmZmZmOwogICAgICAvKiBrID0gMTQgKi8KICAgICAgbG8gPSBNYXRoLmltdWwoYWw5LCBibDUpOwogICAgICBtaWQgPSBNYXRoLmltdWwoYWw5LCBiaDUpOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoOSwgYmw1KSkgfCAwOwogICAgICBoaSA9IE1hdGguaW11bChhaDksIGJoNSk7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsOCwgYmw2KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsOCwgYmg2KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoOCwgYmw2KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDgsIGJoNikpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw3LCBibDcpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw3LCBiaDcpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg3LCBibDcpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNywgYmg3KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDYsIGJsOCkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDYsIGJoOCkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDYsIGJsOCkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg2LCBiaDgpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNSwgYmw5KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNSwgYmg5KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNSwgYmw5KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDUsIGJoOSkpIHwgMDsKICAgICAgdmFyIHcxNCA9ICgoKGMgKyBsbykgfCAwKSArICgobWlkICYgMHgxZmZmKSA8PCAxMykpIHwgMDsKICAgICAgYyA9ICgoKGhpICsgKG1pZCA+Pj4gMTMpKSB8IDApICsgKHcxNCA+Pj4gMjYpKSB8IDA7CiAgICAgIHcxNCAmPSAweDNmZmZmZmY7CiAgICAgIC8qIGsgPSAxNSAqLwogICAgICBsbyA9IE1hdGguaW11bChhbDksIGJsNik7CiAgICAgIG1pZCA9IE1hdGguaW11bChhbDksIGJoNik7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg5LCBibDYpKSB8IDA7CiAgICAgIGhpID0gTWF0aC5pbXVsKGFoOSwgYmg2KTsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw4LCBibDcpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw4LCBiaDcpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg4LCBibDcpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoOCwgYmg3KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDcsIGJsOCkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDcsIGJoOCkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDcsIGJsOCkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg3LCBiaDgpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNiwgYmw5KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNiwgYmg5KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNiwgYmw5KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDYsIGJoOSkpIHwgMDsKICAgICAgdmFyIHcxNSA9ICgoKGMgKyBsbykgfCAwKSArICgobWlkICYgMHgxZmZmKSA8PCAxMykpIHwgMDsKICAgICAgYyA9ICgoKGhpICsgKG1pZCA+Pj4gMTMpKSB8IDApICsgKHcxNSA+Pj4gMjYpKSB8IDA7CiAgICAgIHcxNSAmPSAweDNmZmZmZmY7CiAgICAgIC8qIGsgPSAxNiAqLwogICAgICBsbyA9IE1hdGguaW11bChhbDksIGJsNyk7CiAgICAgIG1pZCA9IE1hdGguaW11bChhbDksIGJoNyk7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg5LCBibDcpKSB8IDA7CiAgICAgIGhpID0gTWF0aC5pbXVsKGFoOSwgYmg3KTsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw4LCBibDgpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw4LCBiaDgpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg4LCBibDgpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoOCwgYmg4KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDcsIGJsOSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDcsIGJoOSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDcsIGJsOSkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg3LCBiaDkpKSB8IDA7CiAgICAgIHZhciB3MTYgPSAoKChjICsgbG8pIHwgMCkgKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpKSB8IDA7CiAgICAgIGMgPSAoKChoaSArIChtaWQgPj4+IDEzKSkgfCAwKSArICh3MTYgPj4+IDI2KSkgfCAwOwogICAgICB3MTYgJj0gMHgzZmZmZmZmOwogICAgICAvKiBrID0gMTcgKi8KICAgICAgbG8gPSBNYXRoLmltdWwoYWw5LCBibDgpOwogICAgICBtaWQgPSBNYXRoLmltdWwoYWw5LCBiaDgpOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoOSwgYmw4KSkgfCAwOwogICAgICBoaSA9IE1hdGguaW11bChhaDksIGJoOCk7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsOCwgYmw5KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsOCwgYmg5KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoOCwgYmw5KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDgsIGJoOSkpIHwgMDsKICAgICAgdmFyIHcxNyA9ICgoKGMgKyBsbykgfCAwKSArICgobWlkICYgMHgxZmZmKSA8PCAxMykpIHwgMDsKICAgICAgYyA9ICgoKGhpICsgKG1pZCA+Pj4gMTMpKSB8IDApICsgKHcxNyA+Pj4gMjYpKSB8IDA7CiAgICAgIHcxNyAmPSAweDNmZmZmZmY7CiAgICAgIC8qIGsgPSAxOCAqLwogICAgICBsbyA9IE1hdGguaW11bChhbDksIGJsOSk7CiAgICAgIG1pZCA9IE1hdGguaW11bChhbDksIGJoOSk7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg5LCBibDkpKSB8IDA7CiAgICAgIGhpID0gTWF0aC5pbXVsKGFoOSwgYmg5KTsKICAgICAgdmFyIHcxOCA9ICgoKGMgKyBsbykgfCAwKSArICgobWlkICYgMHgxZmZmKSA8PCAxMykpIHwgMDsKICAgICAgYyA9ICgoKGhpICsgKG1pZCA+Pj4gMTMpKSB8IDApICsgKHcxOCA+Pj4gMjYpKSB8IDA7CiAgICAgIHcxOCAmPSAweDNmZmZmZmY7CiAgICAgIG9bMF0gPSB3MDsKICAgICAgb1sxXSA9IHcxOwogICAgICBvWzJdID0gdzI7CiAgICAgIG9bM10gPSB3MzsKICAgICAgb1s0XSA9IHc0OwogICAgICBvWzVdID0gdzU7CiAgICAgIG9bNl0gPSB3NjsKICAgICAgb1s3XSA9IHc3OwogICAgICBvWzhdID0gdzg7CiAgICAgIG9bOV0gPSB3OTsKICAgICAgb1sxMF0gPSB3MTA7CiAgICAgIG9bMTFdID0gdzExOwogICAgICBvWzEyXSA9IHcxMjsKICAgICAgb1sxM10gPSB3MTM7CiAgICAgIG9bMTRdID0gdzE0OwogICAgICBvWzE1XSA9IHcxNTsKICAgICAgb1sxNl0gPSB3MTY7CiAgICAgIG9bMTddID0gdzE3OwogICAgICBvWzE4XSA9IHcxODsKICAgICAgaWYgKGMgIT09IDApIHsKICAgICAgICBvWzE5XSA9IGM7CiAgICAgICAgb3V0Lmxlbmd0aCsrOwogICAgICB9CiAgICAgIHJldHVybiBvdXQ7CiAgICB9OwoKICAgIC8vIFBvbHlmaWxsIGNvbWIKICAgIGlmICghTWF0aC5pbXVsKSB7CiAgICAgIGNvbWIxME11bFRvID0gc21hbGxNdWxUbzsKICAgIH0KCiAgICBmdW5jdGlvbiBiaWdNdWxUbyAoc2VsZiwgbnVtLCBvdXQpIHsKICAgICAgb3V0Lm5lZ2F0aXZlID0gbnVtLm5lZ2F0aXZlIF4gc2VsZi5uZWdhdGl2ZTsKICAgICAgb3V0Lmxlbmd0aCA9IHNlbGYubGVuZ3RoICsgbnVtLmxlbmd0aDsKCiAgICAgIHZhciBjYXJyeSA9IDA7CiAgICAgIHZhciBobmNhcnJ5ID0gMDsKICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBvdXQubGVuZ3RoIC0gMTsgaysrKSB7CiAgICAgICAgLy8gU3VtIGFsbCB3b3JkcyB3aXRoIHRoZSBzYW1lIGBpICsgaiA9IGtgIGFuZCBhY2N1bXVsYXRlIGBuY2FycnlgLAogICAgICAgIC8vIG5vdGUgdGhhdCBuY2FycnkgY291bGQgYmUgPj0gMHgzZmZmZmZmCiAgICAgICAgdmFyIG5jYXJyeSA9IGhuY2Fycnk7CiAgICAgICAgaG5jYXJyeSA9IDA7CiAgICAgICAgdmFyIHJ3b3JkID0gY2FycnkgJiAweDNmZmZmZmY7CiAgICAgICAgdmFyIG1heEogPSBNYXRoLm1pbihrLCBudW0ubGVuZ3RoIC0gMSk7CiAgICAgICAgZm9yICh2YXIgaiA9IE1hdGgubWF4KDAsIGsgLSBzZWxmLmxlbmd0aCArIDEpOyBqIDw9IG1heEo7IGorKykgewogICAgICAgICAgdmFyIGkgPSBrIC0gajsKICAgICAgICAgIHZhciBhID0gc2VsZi53b3Jkc1tpXSB8IDA7CiAgICAgICAgICB2YXIgYiA9IG51bS53b3Jkc1tqXSB8IDA7CiAgICAgICAgICB2YXIgciA9IGEgKiBiOwoKICAgICAgICAgIHZhciBsbyA9IHIgJiAweDNmZmZmZmY7CiAgICAgICAgICBuY2FycnkgPSAobmNhcnJ5ICsgKChyIC8gMHg0MDAwMDAwKSB8IDApKSB8IDA7CiAgICAgICAgICBsbyA9IChsbyArIHJ3b3JkKSB8IDA7CiAgICAgICAgICByd29yZCA9IGxvICYgMHgzZmZmZmZmOwogICAgICAgICAgbmNhcnJ5ID0gKG5jYXJyeSArIChsbyA+Pj4gMjYpKSB8IDA7CgogICAgICAgICAgaG5jYXJyeSArPSBuY2FycnkgPj4+IDI2OwogICAgICAgICAgbmNhcnJ5ICY9IDB4M2ZmZmZmZjsKICAgICAgICB9CiAgICAgICAgb3V0LndvcmRzW2tdID0gcndvcmQ7CiAgICAgICAgY2FycnkgPSBuY2Fycnk7CiAgICAgICAgbmNhcnJ5ID0gaG5jYXJyeTsKICAgICAgfQogICAgICBpZiAoY2FycnkgIT09IDApIHsKICAgICAgICBvdXQud29yZHNba10gPSBjYXJyeTsKICAgICAgfSBlbHNlIHsKICAgICAgICBvdXQubGVuZ3RoLS07CiAgICAgIH0KCiAgICAgIHJldHVybiBvdXQuc3RyaXAoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBqdW1ib011bFRvIChzZWxmLCBudW0sIG91dCkgewogICAgICB2YXIgZmZ0bSA9IG5ldyBGRlRNKCk7CiAgICAgIHJldHVybiBmZnRtLm11bHAoc2VsZiwgbnVtLCBvdXQpOwogICAgfQoKICAgIEJOLnByb3RvdHlwZS5tdWxUbyA9IGZ1bmN0aW9uIG11bFRvIChudW0sIG91dCkgewogICAgICB2YXIgcmVzOwogICAgICB2YXIgbGVuID0gdGhpcy5sZW5ndGggKyBudW0ubGVuZ3RoOwogICAgICBpZiAodGhpcy5sZW5ndGggPT09IDEwICYmIG51bS5sZW5ndGggPT09IDEwKSB7CiAgICAgICAgcmVzID0gY29tYjEwTXVsVG8odGhpcywgbnVtLCBvdXQpOwogICAgICB9IGVsc2UgaWYgKGxlbiA8IDYzKSB7CiAgICAgICAgcmVzID0gc21hbGxNdWxUbyh0aGlzLCBudW0sIG91dCk7CiAgICAgIH0gZWxzZSBpZiAobGVuIDwgMTAyNCkgewogICAgICAgIHJlcyA9IGJpZ011bFRvKHRoaXMsIG51bSwgb3V0KTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXMgPSBqdW1ib011bFRvKHRoaXMsIG51bSwgb3V0KTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlczsKICAgIH07CgogICAgLy8gQ29vbGV5LVR1a2V5IGFsZ29yaXRobSBmb3IgRkZUCiAgICAvLyBzbGlnaHRseSByZXZpc2l0ZWQgdG8gcmVseSBvbiBsb29waW5nIGluc3RlYWQgb2YgcmVjdXJzaW9uCgogICAgZnVuY3Rpb24gRkZUTSAoeCwgeSkgewogICAgICB0aGlzLnggPSB4OwogICAgICB0aGlzLnkgPSB5OwogICAgfQoKICAgIEZGVE0ucHJvdG90eXBlLm1ha2VSQlQgPSBmdW5jdGlvbiBtYWtlUkJUIChOKSB7CiAgICAgIHZhciB0ID0gbmV3IEFycmF5KE4pOwogICAgICB2YXIgbCA9IEJOLnByb3RvdHlwZS5fY291bnRCaXRzKE4pIC0gMTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBOOyBpKyspIHsKICAgICAgICB0W2ldID0gdGhpcy5yZXZCaW4oaSwgbCwgTik7CiAgICAgIH0KCiAgICAgIHJldHVybiB0OwogICAgfTsKCiAgICAvLyBSZXR1cm5zIGJpbmFyeS1yZXZlcnNlZCByZXByZXNlbnRhdGlvbiBvZiBgeGAKICAgIEZGVE0ucHJvdG90eXBlLnJldkJpbiA9IGZ1bmN0aW9uIHJldkJpbiAoeCwgbCwgTikgewogICAgICBpZiAoeCA9PT0gMCB8fCB4ID09PSBOIC0gMSkgcmV0dXJuIHg7CgogICAgICB2YXIgcmIgPSAwOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGw7IGkrKykgewogICAgICAgIHJiIHw9ICh4ICYgMSkgPDwgKGwgLSBpIC0gMSk7CiAgICAgICAgeCA+Pj0gMTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJiOwogICAgfTsKCiAgICAvLyBQZXJmb3JtcyAidHdlZWRsaW5nIiBwaGFzZSwgdGhlcmVmb3JlICdlbXVsYXRpbmcnCiAgICAvLyBiZWhhdmlvdXIgb2YgdGhlIHJlY3Vyc2l2ZSBhbGdvcml0aG0KICAgIEZGVE0ucHJvdG90eXBlLnBlcm11dGUgPSBmdW5jdGlvbiBwZXJtdXRlIChyYnQsIHJ3cywgaXdzLCBydHdzLCBpdHdzLCBOKSB7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgTjsgaSsrKSB7CiAgICAgICAgcnR3c1tpXSA9IHJ3c1tyYnRbaV1dOwogICAgICAgIGl0d3NbaV0gPSBpd3NbcmJ0W2ldXTsKICAgICAgfQogICAgfTsKCiAgICBGRlRNLnByb3RvdHlwZS50cmFuc2Zvcm0gPSBmdW5jdGlvbiB0cmFuc2Zvcm0gKHJ3cywgaXdzLCBydHdzLCBpdHdzLCBOLCByYnQpIHsKICAgICAgdGhpcy5wZXJtdXRlKHJidCwgcndzLCBpd3MsIHJ0d3MsIGl0d3MsIE4pOwoKICAgICAgZm9yICh2YXIgcyA9IDE7IHMgPCBOOyBzIDw8PSAxKSB7CiAgICAgICAgdmFyIGwgPSBzIDw8IDE7CgogICAgICAgIHZhciBydHdkZiA9IE1hdGguY29zKDIgKiBNYXRoLlBJIC8gbCk7CiAgICAgICAgdmFyIGl0d2RmID0gTWF0aC5zaW4oMiAqIE1hdGguUEkgLyBsKTsKCiAgICAgICAgZm9yICh2YXIgcCA9IDA7IHAgPCBOOyBwICs9IGwpIHsKICAgICAgICAgIHZhciBydHdkZl8gPSBydHdkZjsKICAgICAgICAgIHZhciBpdHdkZl8gPSBpdHdkZjsKCiAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHM7IGorKykgewogICAgICAgICAgICB2YXIgcmUgPSBydHdzW3AgKyBqXTsKICAgICAgICAgICAgdmFyIGllID0gaXR3c1twICsgal07CgogICAgICAgICAgICB2YXIgcm8gPSBydHdzW3AgKyBqICsgc107CiAgICAgICAgICAgIHZhciBpbyA9IGl0d3NbcCArIGogKyBzXTsKCiAgICAgICAgICAgIHZhciByeCA9IHJ0d2RmXyAqIHJvIC0gaXR3ZGZfICogaW87CgogICAgICAgICAgICBpbyA9IHJ0d2RmXyAqIGlvICsgaXR3ZGZfICogcm87CiAgICAgICAgICAgIHJvID0gcng7CgogICAgICAgICAgICBydHdzW3AgKyBqXSA9IHJlICsgcm87CiAgICAgICAgICAgIGl0d3NbcCArIGpdID0gaWUgKyBpbzsKCiAgICAgICAgICAgIHJ0d3NbcCArIGogKyBzXSA9IHJlIC0gcm87CiAgICAgICAgICAgIGl0d3NbcCArIGogKyBzXSA9IGllIC0gaW87CgogICAgICAgICAgICAvKiBqc2hpbnQgbWF4ZGVwdGggOiBmYWxzZSAqLwogICAgICAgICAgICBpZiAoaiAhPT0gbCkgewogICAgICAgICAgICAgIHJ4ID0gcnR3ZGYgKiBydHdkZl8gLSBpdHdkZiAqIGl0d2RmXzsKCiAgICAgICAgICAgICAgaXR3ZGZfID0gcnR3ZGYgKiBpdHdkZl8gKyBpdHdkZiAqIHJ0d2RmXzsKICAgICAgICAgICAgICBydHdkZl8gPSByeDsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfTsKCiAgICBGRlRNLnByb3RvdHlwZS5ndWVzc0xlbjEzYiA9IGZ1bmN0aW9uIGd1ZXNzTGVuMTNiIChuLCBtKSB7CiAgICAgIHZhciBOID0gTWF0aC5tYXgobSwgbikgfCAxOwogICAgICB2YXIgb2RkID0gTiAmIDE7CiAgICAgIHZhciBpID0gMDsKICAgICAgZm9yIChOID0gTiAvIDIgfCAwOyBOOyBOID0gTiA+Pj4gMSkgewogICAgICAgIGkrKzsKICAgICAgfQoKICAgICAgcmV0dXJuIDEgPDwgaSArIDEgKyBvZGQ7CiAgICB9OwoKICAgIEZGVE0ucHJvdG90eXBlLmNvbmp1Z2F0ZSA9IGZ1bmN0aW9uIGNvbmp1Z2F0ZSAocndzLCBpd3MsIE4pIHsKICAgICAgaWYgKE4gPD0gMSkgcmV0dXJuOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBOIC8gMjsgaSsrKSB7CiAgICAgICAgdmFyIHQgPSByd3NbaV07CgogICAgICAgIHJ3c1tpXSA9IHJ3c1tOIC0gaSAtIDFdOwogICAgICAgIHJ3c1tOIC0gaSAtIDFdID0gdDsKCiAgICAgICAgdCA9IGl3c1tpXTsKCiAgICAgICAgaXdzW2ldID0gLWl3c1tOIC0gaSAtIDFdOwogICAgICAgIGl3c1tOIC0gaSAtIDFdID0gLXQ7CiAgICAgIH0KICAgIH07CgogICAgRkZUTS5wcm90b3R5cGUubm9ybWFsaXplMTNiID0gZnVuY3Rpb24gbm9ybWFsaXplMTNiICh3cywgTikgewogICAgICB2YXIgY2FycnkgPSAwOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IE4gLyAyOyBpKyspIHsKICAgICAgICB2YXIgdyA9IE1hdGgucm91bmQod3NbMiAqIGkgKyAxXSAvIE4pICogMHgyMDAwICsKICAgICAgICAgIE1hdGgucm91bmQod3NbMiAqIGldIC8gTikgKwogICAgICAgICAgY2Fycnk7CgogICAgICAgIHdzW2ldID0gdyAmIDB4M2ZmZmZmZjsKCiAgICAgICAgaWYgKHcgPCAweDQwMDAwMDApIHsKICAgICAgICAgIGNhcnJ5ID0gMDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY2FycnkgPSB3IC8gMHg0MDAwMDAwIHwgMDsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiB3czsKICAgIH07CgogICAgRkZUTS5wcm90b3R5cGUuY29udmVydDEzYiA9IGZ1bmN0aW9uIGNvbnZlcnQxM2IgKHdzLCBsZW4sIHJ3cywgTikgewogICAgICB2YXIgY2FycnkgPSAwOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgY2FycnkgPSBjYXJyeSArICh3c1tpXSB8IDApOwoKICAgICAgICByd3NbMiAqIGldID0gY2FycnkgJiAweDFmZmY7IGNhcnJ5ID0gY2FycnkgPj4+IDEzOwogICAgICAgIHJ3c1syICogaSArIDFdID0gY2FycnkgJiAweDFmZmY7IGNhcnJ5ID0gY2FycnkgPj4+IDEzOwogICAgICB9CgogICAgICAvLyBQYWQgd2l0aCB6ZXJvZXMKICAgICAgZm9yIChpID0gMiAqIGxlbjsgaSA8IE47ICsraSkgewogICAgICAgIHJ3c1tpXSA9IDA7CiAgICAgIH0KCiAgICAgIGFzc2VydChjYXJyeSA9PT0gMCk7CiAgICAgIGFzc2VydCgoY2FycnkgJiB+MHgxZmZmKSA9PT0gMCk7CiAgICB9OwoKICAgIEZGVE0ucHJvdG90eXBlLnN0dWIgPSBmdW5jdGlvbiBzdHViIChOKSB7CiAgICAgIHZhciBwaCA9IG5ldyBBcnJheShOKTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBOOyBpKyspIHsKICAgICAgICBwaFtpXSA9IDA7CiAgICAgIH0KCiAgICAgIHJldHVybiBwaDsKICAgIH07CgogICAgRkZUTS5wcm90b3R5cGUubXVscCA9IGZ1bmN0aW9uIG11bHAgKHgsIHksIG91dCkgewogICAgICB2YXIgTiA9IDIgKiB0aGlzLmd1ZXNzTGVuMTNiKHgubGVuZ3RoLCB5Lmxlbmd0aCk7CgogICAgICB2YXIgcmJ0ID0gdGhpcy5tYWtlUkJUKE4pOwoKICAgICAgdmFyIF8gPSB0aGlzLnN0dWIoTik7CgogICAgICB2YXIgcndzID0gbmV3IEFycmF5KE4pOwogICAgICB2YXIgcndzdCA9IG5ldyBBcnJheShOKTsKICAgICAgdmFyIGl3c3QgPSBuZXcgQXJyYXkoTik7CgogICAgICB2YXIgbnJ3cyA9IG5ldyBBcnJheShOKTsKICAgICAgdmFyIG5yd3N0ID0gbmV3IEFycmF5KE4pOwogICAgICB2YXIgbml3c3QgPSBuZXcgQXJyYXkoTik7CgogICAgICB2YXIgcm13cyA9IG91dC53b3JkczsKICAgICAgcm13cy5sZW5ndGggPSBOOwoKICAgICAgdGhpcy5jb252ZXJ0MTNiKHgud29yZHMsIHgubGVuZ3RoLCByd3MsIE4pOwogICAgICB0aGlzLmNvbnZlcnQxM2IoeS53b3JkcywgeS5sZW5ndGgsIG5yd3MsIE4pOwoKICAgICAgdGhpcy50cmFuc2Zvcm0ocndzLCBfLCByd3N0LCBpd3N0LCBOLCByYnQpOwogICAgICB0aGlzLnRyYW5zZm9ybShucndzLCBfLCBucndzdCwgbml3c3QsIE4sIHJidCk7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IE47IGkrKykgewogICAgICAgIHZhciByeCA9IHJ3c3RbaV0gKiBucndzdFtpXSAtIGl3c3RbaV0gKiBuaXdzdFtpXTsKICAgICAgICBpd3N0W2ldID0gcndzdFtpXSAqIG5pd3N0W2ldICsgaXdzdFtpXSAqIG5yd3N0W2ldOwogICAgICAgIHJ3c3RbaV0gPSByeDsKICAgICAgfQoKICAgICAgdGhpcy5jb25qdWdhdGUocndzdCwgaXdzdCwgTik7CiAgICAgIHRoaXMudHJhbnNmb3JtKHJ3c3QsIGl3c3QsIHJtd3MsIF8sIE4sIHJidCk7CiAgICAgIHRoaXMuY29uanVnYXRlKHJtd3MsIF8sIE4pOwogICAgICB0aGlzLm5vcm1hbGl6ZTEzYihybXdzLCBOKTsKCiAgICAgIG91dC5uZWdhdGl2ZSA9IHgubmVnYXRpdmUgXiB5Lm5lZ2F0aXZlOwogICAgICBvdXQubGVuZ3RoID0geC5sZW5ndGggKyB5Lmxlbmd0aDsKICAgICAgcmV0dXJuIG91dC5zdHJpcCgpOwogICAgfTsKCiAgICAvLyBNdWx0aXBseSBgdGhpc2AgYnkgYG51bWAKICAgIEJOLnByb3RvdHlwZS5tdWwgPSBmdW5jdGlvbiBtdWwgKG51bSkgewogICAgICB2YXIgb3V0ID0gbmV3IEJOKG51bGwpOwogICAgICBvdXQud29yZHMgPSBuZXcgQXJyYXkodGhpcy5sZW5ndGggKyBudW0ubGVuZ3RoKTsKICAgICAgcmV0dXJuIHRoaXMubXVsVG8obnVtLCBvdXQpOwogICAgfTsKCiAgICAvLyBNdWx0aXBseSBlbXBsb3lpbmcgRkZUCiAgICBCTi5wcm90b3R5cGUubXVsZiA9IGZ1bmN0aW9uIG11bGYgKG51bSkgewogICAgICB2YXIgb3V0ID0gbmV3IEJOKG51bGwpOwogICAgICBvdXQud29yZHMgPSBuZXcgQXJyYXkodGhpcy5sZW5ndGggKyBudW0ubGVuZ3RoKTsKICAgICAgcmV0dXJuIGp1bWJvTXVsVG8odGhpcywgbnVtLCBvdXQpOwogICAgfTsKCiAgICAvLyBJbi1wbGFjZSBNdWx0aXBsaWNhdGlvbgogICAgQk4ucHJvdG90eXBlLmltdWwgPSBmdW5jdGlvbiBpbXVsIChudW0pIHsKICAgICAgcmV0dXJuIHRoaXMuY2xvbmUoKS5tdWxUbyhudW0sIHRoaXMpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuaW11bG4gPSBmdW5jdGlvbiBpbXVsbiAobnVtKSB7CiAgICAgIGFzc2VydCh0eXBlb2YgbnVtID09PSAnbnVtYmVyJyk7CiAgICAgIGFzc2VydChudW0gPCAweDQwMDAwMDApOwoKICAgICAgLy8gQ2FycnkKICAgICAgdmFyIGNhcnJ5ID0gMDsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIHcgPSAodGhpcy53b3Jkc1tpXSB8IDApICogbnVtOwogICAgICAgIHZhciBsbyA9ICh3ICYgMHgzZmZmZmZmKSArIChjYXJyeSAmIDB4M2ZmZmZmZik7CiAgICAgICAgY2FycnkgPj49IDI2OwogICAgICAgIGNhcnJ5ICs9ICh3IC8gMHg0MDAwMDAwKSB8IDA7CiAgICAgICAgLy8gTk9URTogbG8gaXMgMjdiaXQgbWF4aW11bQogICAgICAgIGNhcnJ5ICs9IGxvID4+PiAyNjsKICAgICAgICB0aGlzLndvcmRzW2ldID0gbG8gJiAweDNmZmZmZmY7CiAgICAgIH0KCiAgICAgIGlmIChjYXJyeSAhPT0gMCkgewogICAgICAgIHRoaXMud29yZHNbaV0gPSBjYXJyeTsKICAgICAgICB0aGlzLmxlbmd0aCsrOwogICAgICB9CgogICAgICByZXR1cm4gdGhpczsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLm11bG4gPSBmdW5jdGlvbiBtdWxuIChudW0pIHsKICAgICAgcmV0dXJuIHRoaXMuY2xvbmUoKS5pbXVsbihudW0pOwogICAgfTsKCiAgICAvLyBgdGhpc2AgKiBgdGhpc2AKICAgIEJOLnByb3RvdHlwZS5zcXIgPSBmdW5jdGlvbiBzcXIgKCkgewogICAgICByZXR1cm4gdGhpcy5tdWwodGhpcyk7CiAgICB9OwoKICAgIC8vIGB0aGlzYCAqIGB0aGlzYCBpbi1wbGFjZQogICAgQk4ucHJvdG90eXBlLmlzcXIgPSBmdW5jdGlvbiBpc3FyICgpIHsKICAgICAgcmV0dXJuIHRoaXMuaW11bCh0aGlzLmNsb25lKCkpOwogICAgfTsKCiAgICAvLyBNYXRoLnBvdyhgdGhpc2AsIGBudW1gKQogICAgQk4ucHJvdG90eXBlLnBvdyA9IGZ1bmN0aW9uIHBvdyAobnVtKSB7CiAgICAgIHZhciB3ID0gdG9CaXRBcnJheShudW0pOwogICAgICBpZiAody5sZW5ndGggPT09IDApIHJldHVybiBuZXcgQk4oMSk7CgogICAgICAvLyBTa2lwIGxlYWRpbmcgemVyb2VzCiAgICAgIHZhciByZXMgPSB0aGlzOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHcubGVuZ3RoOyBpKyssIHJlcyA9IHJlcy5zcXIoKSkgewogICAgICAgIGlmICh3W2ldICE9PSAwKSBicmVhazsKICAgICAgfQoKICAgICAgaWYgKCsraSA8IHcubGVuZ3RoKSB7CiAgICAgICAgZm9yICh2YXIgcSA9IHJlcy5zcXIoKTsgaSA8IHcubGVuZ3RoOyBpKyssIHEgPSBxLnNxcigpKSB7CiAgICAgICAgICBpZiAod1tpXSA9PT0gMCkgY29udGludWU7CgogICAgICAgICAgcmVzID0gcmVzLm11bChxKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiByZXM7CiAgICB9OwoKICAgIC8vIFNoaWZ0LWxlZnQgaW4tcGxhY2UKICAgIEJOLnByb3RvdHlwZS5pdXNobG4gPSBmdW5jdGlvbiBpdXNobG4gKGJpdHMpIHsKICAgICAgYXNzZXJ0KHR5cGVvZiBiaXRzID09PSAnbnVtYmVyJyAmJiBiaXRzID49IDApOwogICAgICB2YXIgciA9IGJpdHMgJSAyNjsKICAgICAgdmFyIHMgPSAoYml0cyAtIHIpIC8gMjY7CiAgICAgIHZhciBjYXJyeU1hc2sgPSAoMHgzZmZmZmZmID4+PiAoMjYgLSByKSkgPDwgKDI2IC0gcik7CiAgICAgIHZhciBpOwoKICAgICAgaWYgKHIgIT09IDApIHsKICAgICAgICB2YXIgY2FycnkgPSAwOwoKICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgdmFyIG5ld0NhcnJ5ID0gdGhpcy53b3Jkc1tpXSAmIGNhcnJ5TWFzazsKICAgICAgICAgIHZhciBjID0gKCh0aGlzLndvcmRzW2ldIHwgMCkgLSBuZXdDYXJyeSkgPDwgcjsKICAgICAgICAgIHRoaXMud29yZHNbaV0gPSBjIHwgY2Fycnk7CiAgICAgICAgICBjYXJyeSA9IG5ld0NhcnJ5ID4+PiAoMjYgLSByKTsKICAgICAgICB9CgogICAgICAgIGlmIChjYXJyeSkgewogICAgICAgICAgdGhpcy53b3Jkc1tpXSA9IGNhcnJ5OwogICAgICAgICAgdGhpcy5sZW5ndGgrKzsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChzICE9PSAwKSB7CiAgICAgICAgZm9yIChpID0gdGhpcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgICAgICAgdGhpcy53b3Jkc1tpICsgc10gPSB0aGlzLndvcmRzW2ldOwogICAgICAgIH0KCiAgICAgICAgZm9yIChpID0gMDsgaSA8IHM7IGkrKykgewogICAgICAgICAgdGhpcy53b3Jkc1tpXSA9IDA7CiAgICAgICAgfQoKICAgICAgICB0aGlzLmxlbmd0aCArPSBzOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5zdHJpcCgpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuaXNobG4gPSBmdW5jdGlvbiBpc2hsbiAoYml0cykgewogICAgICAvLyBUT0RPKGluZHV0bnkpOiBpbXBsZW1lbnQgbWUKICAgICAgYXNzZXJ0KHRoaXMubmVnYXRpdmUgPT09IDApOwogICAgICByZXR1cm4gdGhpcy5pdXNobG4oYml0cyk7CiAgICB9OwoKICAgIC8vIFNoaWZ0LXJpZ2h0IGluLXBsYWNlCiAgICAvLyBOT1RFOiBgaGludGAgaXMgYSBsb3dlc3QgYml0IGJlZm9yZSB0cmFpbGluZyB6ZXJvZXMKICAgIC8vIE5PVEU6IGlmIGBleHRlbmRlZGAgaXMgcHJlc2VudCAtIGl0IHdpbGwgYmUgZmlsbGVkIHdpdGggZGVzdHJveWVkIGJpdHMKICAgIEJOLnByb3RvdHlwZS5pdXNocm4gPSBmdW5jdGlvbiBpdXNocm4gKGJpdHMsIGhpbnQsIGV4dGVuZGVkKSB7CiAgICAgIGFzc2VydCh0eXBlb2YgYml0cyA9PT0gJ251bWJlcicgJiYgYml0cyA+PSAwKTsKICAgICAgdmFyIGg7CiAgICAgIGlmIChoaW50KSB7CiAgICAgICAgaCA9IChoaW50IC0gKGhpbnQgJSAyNikpIC8gMjY7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaCA9IDA7CiAgICAgIH0KCiAgICAgIHZhciByID0gYml0cyAlIDI2OwogICAgICB2YXIgcyA9IE1hdGgubWluKChiaXRzIC0gcikgLyAyNiwgdGhpcy5sZW5ndGgpOwogICAgICB2YXIgbWFzayA9IDB4M2ZmZmZmZiBeICgoMHgzZmZmZmZmID4+PiByKSA8PCByKTsKICAgICAgdmFyIG1hc2tlZFdvcmRzID0gZXh0ZW5kZWQ7CgogICAgICBoIC09IHM7CiAgICAgIGggPSBNYXRoLm1heCgwLCBoKTsKCiAgICAgIC8vIEV4dGVuZGVkIG1vZGUsIGNvcHkgbWFza2VkIHBhcnQKICAgICAgaWYgKG1hc2tlZFdvcmRzKSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzOyBpKyspIHsKICAgICAgICAgIG1hc2tlZFdvcmRzLndvcmRzW2ldID0gdGhpcy53b3Jkc1tpXTsKICAgICAgICB9CiAgICAgICAgbWFza2VkV29yZHMubGVuZ3RoID0gczsKICAgICAgfQoKICAgICAgaWYgKHMgPT09IDApIDsgZWxzZSBpZiAodGhpcy5sZW5ndGggPiBzKSB7CiAgICAgICAgdGhpcy5sZW5ndGggLT0gczsKICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgdGhpcy53b3Jkc1tpXSA9IHRoaXMud29yZHNbaSArIHNdOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLndvcmRzWzBdID0gMDsKICAgICAgICB0aGlzLmxlbmd0aCA9IDE7CiAgICAgIH0KCiAgICAgIHZhciBjYXJyeSA9IDA7CiAgICAgIGZvciAoaSA9IHRoaXMubGVuZ3RoIC0gMTsgaSA+PSAwICYmIChjYXJyeSAhPT0gMCB8fCBpID49IGgpOyBpLS0pIHsKICAgICAgICB2YXIgd29yZCA9IHRoaXMud29yZHNbaV0gfCAwOwogICAgICAgIHRoaXMud29yZHNbaV0gPSAoY2FycnkgPDwgKDI2IC0gcikpIHwgKHdvcmQgPj4+IHIpOwogICAgICAgIGNhcnJ5ID0gd29yZCAmIG1hc2s7CiAgICAgIH0KCiAgICAgIC8vIFB1c2ggY2FycmllZCBiaXRzIGFzIGEgbWFzawogICAgICBpZiAobWFza2VkV29yZHMgJiYgY2FycnkgIT09IDApIHsKICAgICAgICBtYXNrZWRXb3Jkcy53b3Jkc1ttYXNrZWRXb3Jkcy5sZW5ndGgrK10gPSBjYXJyeTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgdGhpcy53b3Jkc1swXSA9IDA7CiAgICAgICAgdGhpcy5sZW5ndGggPSAxOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5zdHJpcCgpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuaXNocm4gPSBmdW5jdGlvbiBpc2hybiAoYml0cywgaGludCwgZXh0ZW5kZWQpIHsKICAgICAgLy8gVE9ETyhpbmR1dG55KTogaW1wbGVtZW50IG1lCiAgICAgIGFzc2VydCh0aGlzLm5lZ2F0aXZlID09PSAwKTsKICAgICAgcmV0dXJuIHRoaXMuaXVzaHJuKGJpdHMsIGhpbnQsIGV4dGVuZGVkKTsKICAgIH07CgogICAgLy8gU2hpZnQtbGVmdAogICAgQk4ucHJvdG90eXBlLnNobG4gPSBmdW5jdGlvbiBzaGxuIChiaXRzKSB7CiAgICAgIHJldHVybiB0aGlzLmNsb25lKCkuaXNobG4oYml0cyk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS51c2hsbiA9IGZ1bmN0aW9uIHVzaGxuIChiaXRzKSB7CiAgICAgIHJldHVybiB0aGlzLmNsb25lKCkuaXVzaGxuKGJpdHMpOwogICAgfTsKCiAgICAvLyBTaGlmdC1yaWdodAogICAgQk4ucHJvdG90eXBlLnNocm4gPSBmdW5jdGlvbiBzaHJuIChiaXRzKSB7CiAgICAgIHJldHVybiB0aGlzLmNsb25lKCkuaXNocm4oYml0cyk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS51c2hybiA9IGZ1bmN0aW9uIHVzaHJuIChiaXRzKSB7CiAgICAgIHJldHVybiB0aGlzLmNsb25lKCkuaXVzaHJuKGJpdHMpOwogICAgfTsKCiAgICAvLyBUZXN0IGlmIG4gYml0IGlzIHNldAogICAgQk4ucHJvdG90eXBlLnRlc3RuID0gZnVuY3Rpb24gdGVzdG4gKGJpdCkgewogICAgICBhc3NlcnQodHlwZW9mIGJpdCA9PT0gJ251bWJlcicgJiYgYml0ID49IDApOwogICAgICB2YXIgciA9IGJpdCAlIDI2OwogICAgICB2YXIgcyA9IChiaXQgLSByKSAvIDI2OwogICAgICB2YXIgcSA9IDEgPDwgcjsKCiAgICAgIC8vIEZhc3QgY2FzZTogYml0IGlzIG11Y2ggaGlnaGVyIHRoYW4gYWxsIGV4aXN0aW5nIHdvcmRzCiAgICAgIGlmICh0aGlzLmxlbmd0aCA8PSBzKSByZXR1cm4gZmFsc2U7CgogICAgICAvLyBDaGVjayBiaXQgYW5kIHJldHVybgogICAgICB2YXIgdyA9IHRoaXMud29yZHNbc107CgogICAgICByZXR1cm4gISEodyAmIHEpOwogICAgfTsKCiAgICAvLyBSZXR1cm4gb25seSBsb3dlcnMgYml0cyBvZiBudW1iZXIgKGluLXBsYWNlKQogICAgQk4ucHJvdG90eXBlLmltYXNrbiA9IGZ1bmN0aW9uIGltYXNrbiAoYml0cykgewogICAgICBhc3NlcnQodHlwZW9mIGJpdHMgPT09ICdudW1iZXInICYmIGJpdHMgPj0gMCk7CiAgICAgIHZhciByID0gYml0cyAlIDI2OwogICAgICB2YXIgcyA9IChiaXRzIC0gcikgLyAyNjsKCiAgICAgIGFzc2VydCh0aGlzLm5lZ2F0aXZlID09PSAwLCAnaW1hc2tuIHdvcmtzIG9ubHkgd2l0aCBwb3NpdGl2ZSBudW1iZXJzJyk7CgogICAgICBpZiAodGhpcy5sZW5ndGggPD0gcykgewogICAgICAgIHJldHVybiB0aGlzOwogICAgICB9CgogICAgICBpZiAociAhPT0gMCkgewogICAgICAgIHMrKzsKICAgICAgfQogICAgICB0aGlzLmxlbmd0aCA9IE1hdGgubWluKHMsIHRoaXMubGVuZ3RoKTsKCiAgICAgIGlmIChyICE9PSAwKSB7CiAgICAgICAgdmFyIG1hc2sgPSAweDNmZmZmZmYgXiAoKDB4M2ZmZmZmZiA+Pj4gcikgPDwgcik7CiAgICAgICAgdGhpcy53b3Jkc1t0aGlzLmxlbmd0aCAtIDFdICY9IG1hc2s7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLnN0cmlwKCk7CiAgICB9OwoKICAgIC8vIFJldHVybiBvbmx5IGxvd2VycyBiaXRzIG9mIG51bWJlcgogICAgQk4ucHJvdG90eXBlLm1hc2tuID0gZnVuY3Rpb24gbWFza24gKGJpdHMpIHsKICAgICAgcmV0dXJuIHRoaXMuY2xvbmUoKS5pbWFza24oYml0cyk7CiAgICB9OwoKICAgIC8vIEFkZCBwbGFpbiBudW1iZXIgYG51bWAgdG8gYHRoaXNgCiAgICBCTi5wcm90b3R5cGUuaWFkZG4gPSBmdW5jdGlvbiBpYWRkbiAobnVtKSB7CiAgICAgIGFzc2VydCh0eXBlb2YgbnVtID09PSAnbnVtYmVyJyk7CiAgICAgIGFzc2VydChudW0gPCAweDQwMDAwMDApOwogICAgICBpZiAobnVtIDwgMCkgcmV0dXJuIHRoaXMuaXN1Ym4oLW51bSk7CgogICAgICAvLyBQb3NzaWJsZSBzaWduIGNoYW5nZQogICAgICBpZiAodGhpcy5uZWdhdGl2ZSAhPT0gMCkgewogICAgICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMSAmJiAodGhpcy53b3Jkc1swXSB8IDApIDwgbnVtKSB7CiAgICAgICAgICB0aGlzLndvcmRzWzBdID0gbnVtIC0gKHRoaXMud29yZHNbMF0gfCAwKTsKICAgICAgICAgIHRoaXMubmVnYXRpdmUgPSAwOwogICAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgICAgfQoKICAgICAgICB0aGlzLm5lZ2F0aXZlID0gMDsKICAgICAgICB0aGlzLmlzdWJuKG51bSk7CiAgICAgICAgdGhpcy5uZWdhdGl2ZSA9IDE7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0KCiAgICAgIC8vIEFkZCB3aXRob3V0IGNoZWNrcwogICAgICByZXR1cm4gdGhpcy5faWFkZG4obnVtKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLl9pYWRkbiA9IGZ1bmN0aW9uIF9pYWRkbiAobnVtKSB7CiAgICAgIHRoaXMud29yZHNbMF0gKz0gbnVtOwoKICAgICAgLy8gQ2FycnkKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aCAmJiB0aGlzLndvcmRzW2ldID49IDB4NDAwMDAwMDsgaSsrKSB7CiAgICAgICAgdGhpcy53b3Jkc1tpXSAtPSAweDQwMDAwMDA7CiAgICAgICAgaWYgKGkgPT09IHRoaXMubGVuZ3RoIC0gMSkgewogICAgICAgICAgdGhpcy53b3Jkc1tpICsgMV0gPSAxOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLndvcmRzW2kgKyAxXSsrOwogICAgICAgIH0KICAgICAgfQogICAgICB0aGlzLmxlbmd0aCA9IE1hdGgubWF4KHRoaXMubGVuZ3RoLCBpICsgMSk7CgogICAgICByZXR1cm4gdGhpczsKICAgIH07CgogICAgLy8gU3VidHJhY3QgcGxhaW4gbnVtYmVyIGBudW1gIGZyb20gYHRoaXNgCiAgICBCTi5wcm90b3R5cGUuaXN1Ym4gPSBmdW5jdGlvbiBpc3VibiAobnVtKSB7CiAgICAgIGFzc2VydCh0eXBlb2YgbnVtID09PSAnbnVtYmVyJyk7CiAgICAgIGFzc2VydChudW0gPCAweDQwMDAwMDApOwogICAgICBpZiAobnVtIDwgMCkgcmV0dXJuIHRoaXMuaWFkZG4oLW51bSk7CgogICAgICBpZiAodGhpcy5uZWdhdGl2ZSAhPT0gMCkgewogICAgICAgIHRoaXMubmVnYXRpdmUgPSAwOwogICAgICAgIHRoaXMuaWFkZG4obnVtKTsKICAgICAgICB0aGlzLm5lZ2F0aXZlID0gMTsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfQoKICAgICAgdGhpcy53b3Jkc1swXSAtPSBudW07CgogICAgICBpZiAodGhpcy5sZW5ndGggPT09IDEgJiYgdGhpcy53b3Jkc1swXSA8IDApIHsKICAgICAgICB0aGlzLndvcmRzWzBdID0gLXRoaXMud29yZHNbMF07CiAgICAgICAgdGhpcy5uZWdhdGl2ZSA9IDE7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gQ2FycnkKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoICYmIHRoaXMud29yZHNbaV0gPCAwOyBpKyspIHsKICAgICAgICAgIHRoaXMud29yZHNbaV0gKz0gMHg0MDAwMDAwOwogICAgICAgICAgdGhpcy53b3Jkc1tpICsgMV0gLT0gMTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLnN0cmlwKCk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5hZGRuID0gZnVuY3Rpb24gYWRkbiAobnVtKSB7CiAgICAgIHJldHVybiB0aGlzLmNsb25lKCkuaWFkZG4obnVtKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLnN1Ym4gPSBmdW5jdGlvbiBzdWJuIChudW0pIHsKICAgICAgcmV0dXJuIHRoaXMuY2xvbmUoKS5pc3VibihudW0pOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuaWFicyA9IGZ1bmN0aW9uIGlhYnMgKCkgewogICAgICB0aGlzLm5lZ2F0aXZlID0gMDsKCiAgICAgIHJldHVybiB0aGlzOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuYWJzID0gZnVuY3Rpb24gYWJzICgpIHsKICAgICAgcmV0dXJuIHRoaXMuY2xvbmUoKS5pYWJzKCk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5faXNobG5zdWJtdWwgPSBmdW5jdGlvbiBfaXNobG5zdWJtdWwgKG51bSwgbXVsLCBzaGlmdCkgewogICAgICB2YXIgbGVuID0gbnVtLmxlbmd0aCArIHNoaWZ0OwogICAgICB2YXIgaTsKCiAgICAgIHRoaXMuX2V4cGFuZChsZW4pOwoKICAgICAgdmFyIHc7CiAgICAgIHZhciBjYXJyeSA9IDA7CiAgICAgIGZvciAoaSA9IDA7IGkgPCBudW0ubGVuZ3RoOyBpKyspIHsKICAgICAgICB3ID0gKHRoaXMud29yZHNbaSArIHNoaWZ0XSB8IDApICsgY2Fycnk7CiAgICAgICAgdmFyIHJpZ2h0ID0gKG51bS53b3Jkc1tpXSB8IDApICogbXVsOwogICAgICAgIHcgLT0gcmlnaHQgJiAweDNmZmZmZmY7CiAgICAgICAgY2FycnkgPSAodyA+PiAyNikgLSAoKHJpZ2h0IC8gMHg0MDAwMDAwKSB8IDApOwogICAgICAgIHRoaXMud29yZHNbaSArIHNoaWZ0XSA9IHcgJiAweDNmZmZmZmY7CiAgICAgIH0KICAgICAgZm9yICg7IGkgPCB0aGlzLmxlbmd0aCAtIHNoaWZ0OyBpKyspIHsKICAgICAgICB3ID0gKHRoaXMud29yZHNbaSArIHNoaWZ0XSB8IDApICsgY2Fycnk7CiAgICAgICAgY2FycnkgPSB3ID4+IDI2OwogICAgICAgIHRoaXMud29yZHNbaSArIHNoaWZ0XSA9IHcgJiAweDNmZmZmZmY7CiAgICAgIH0KCiAgICAgIGlmIChjYXJyeSA9PT0gMCkgcmV0dXJuIHRoaXMuc3RyaXAoKTsKCiAgICAgIC8vIFN1YnRyYWN0aW9uIG92ZXJmbG93CiAgICAgIGFzc2VydChjYXJyeSA9PT0gLTEpOwogICAgICBjYXJyeSA9IDA7CiAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdyA9IC0odGhpcy53b3Jkc1tpXSB8IDApICsgY2Fycnk7CiAgICAgICAgY2FycnkgPSB3ID4+IDI2OwogICAgICAgIHRoaXMud29yZHNbaV0gPSB3ICYgMHgzZmZmZmZmOwogICAgICB9CiAgICAgIHRoaXMubmVnYXRpdmUgPSAxOwoKICAgICAgcmV0dXJuIHRoaXMuc3RyaXAoKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLl93b3JkRGl2ID0gZnVuY3Rpb24gX3dvcmREaXYgKG51bSwgbW9kZSkgewogICAgICB2YXIgc2hpZnQgPSB0aGlzLmxlbmd0aCAtIG51bS5sZW5ndGg7CgogICAgICB2YXIgYSA9IHRoaXMuY2xvbmUoKTsKICAgICAgdmFyIGIgPSBudW07CgogICAgICAvLyBOb3JtYWxpemUKICAgICAgdmFyIGJoaSA9IGIud29yZHNbYi5sZW5ndGggLSAxXSB8IDA7CiAgICAgIHZhciBiaGlCaXRzID0gdGhpcy5fY291bnRCaXRzKGJoaSk7CiAgICAgIHNoaWZ0ID0gMjYgLSBiaGlCaXRzOwogICAgICBpZiAoc2hpZnQgIT09IDApIHsKICAgICAgICBiID0gYi51c2hsbihzaGlmdCk7CiAgICAgICAgYS5pdXNobG4oc2hpZnQpOwogICAgICAgIGJoaSA9IGIud29yZHNbYi5sZW5ndGggLSAxXSB8IDA7CiAgICAgIH0KCiAgICAgIC8vIEluaXRpYWxpemUgcXVvdGllbnQKICAgICAgdmFyIG0gPSBhLmxlbmd0aCAtIGIubGVuZ3RoOwogICAgICB2YXIgcTsKCiAgICAgIGlmIChtb2RlICE9PSAnbW9kJykgewogICAgICAgIHEgPSBuZXcgQk4obnVsbCk7CiAgICAgICAgcS5sZW5ndGggPSBtICsgMTsKICAgICAgICBxLndvcmRzID0gbmV3IEFycmF5KHEubGVuZ3RoKTsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHEubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHEud29yZHNbaV0gPSAwOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdmFyIGRpZmYgPSBhLmNsb25lKCkuX2lzaGxuc3VibXVsKGIsIDEsIG0pOwogICAgICBpZiAoZGlmZi5uZWdhdGl2ZSA9PT0gMCkgewogICAgICAgIGEgPSBkaWZmOwogICAgICAgIGlmIChxKSB7CiAgICAgICAgICBxLndvcmRzW21dID0gMTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGZvciAodmFyIGogPSBtIC0gMTsgaiA+PSAwOyBqLS0pIHsKICAgICAgICB2YXIgcWogPSAoYS53b3Jkc1tiLmxlbmd0aCArIGpdIHwgMCkgKiAweDQwMDAwMDAgKwogICAgICAgICAgKGEud29yZHNbYi5sZW5ndGggKyBqIC0gMV0gfCAwKTsKCiAgICAgICAgLy8gTk9URTogKHFqIC8gYmhpKSBpcyAoMHgzZmZmZmZmICogMHg0MDAwMDAwICsgMHgzZmZmZmZmKSAvIDB4MjAwMDAwMCBtYXgKICAgICAgICAvLyAoMHg3ZmZmZmZmKQogICAgICAgIHFqID0gTWF0aC5taW4oKHFqIC8gYmhpKSB8IDAsIDB4M2ZmZmZmZik7CgogICAgICAgIGEuX2lzaGxuc3VibXVsKGIsIHFqLCBqKTsKICAgICAgICB3aGlsZSAoYS5uZWdhdGl2ZSAhPT0gMCkgewogICAgICAgICAgcWotLTsKICAgICAgICAgIGEubmVnYXRpdmUgPSAwOwogICAgICAgICAgYS5faXNobG5zdWJtdWwoYiwgMSwgaik7CiAgICAgICAgICBpZiAoIWEuaXNaZXJvKCkpIHsKICAgICAgICAgICAgYS5uZWdhdGl2ZSBePSAxOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAocSkgewogICAgICAgICAgcS53b3Jkc1tqXSA9IHFqOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAocSkgewogICAgICAgIHEuc3RyaXAoKTsKICAgICAgfQogICAgICBhLnN0cmlwKCk7CgogICAgICAvLyBEZW5vcm1hbGl6ZQogICAgICBpZiAobW9kZSAhPT0gJ2RpdicgJiYgc2hpZnQgIT09IDApIHsKICAgICAgICBhLml1c2hybihzaGlmdCk7CiAgICAgIH0KCiAgICAgIHJldHVybiB7CiAgICAgICAgZGl2OiBxIHx8IG51bGwsCiAgICAgICAgbW9kOiBhCiAgICAgIH07CiAgICB9OwoKICAgIC8vIE5PVEU6IDEpIGBtb2RlYCBjYW4gYmUgc2V0IHRvIGBtb2RgIHRvIHJlcXVlc3QgbW9kIG9ubHksCiAgICAvLyAgICAgICB0byBgZGl2YCB0byByZXF1ZXN0IGRpdiBvbmx5LCBvciBiZSBhYnNlbnQgdG8KICAgIC8vICAgICAgIHJlcXVlc3QgYm90aCBkaXYgJiBtb2QKICAgIC8vICAgICAgIDIpIGBwb3NpdGl2ZWAgaXMgdHJ1ZSBpZiB1bnNpZ25lZCBtb2QgaXMgcmVxdWVzdGVkCiAgICBCTi5wcm90b3R5cGUuZGl2bW9kID0gZnVuY3Rpb24gZGl2bW9kIChudW0sIG1vZGUsIHBvc2l0aXZlKSB7CiAgICAgIGFzc2VydCghbnVtLmlzWmVybygpKTsKCiAgICAgIGlmICh0aGlzLmlzWmVybygpKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGRpdjogbmV3IEJOKDApLAogICAgICAgICAgbW9kOiBuZXcgQk4oMCkKICAgICAgICB9OwogICAgICB9CgogICAgICB2YXIgZGl2LCBtb2QsIHJlczsKICAgICAgaWYgKHRoaXMubmVnYXRpdmUgIT09IDAgJiYgbnVtLm5lZ2F0aXZlID09PSAwKSB7CiAgICAgICAgcmVzID0gdGhpcy5uZWcoKS5kaXZtb2QobnVtLCBtb2RlKTsKCiAgICAgICAgaWYgKG1vZGUgIT09ICdtb2QnKSB7CiAgICAgICAgICBkaXYgPSByZXMuZGl2Lm5lZygpOwogICAgICAgIH0KCiAgICAgICAgaWYgKG1vZGUgIT09ICdkaXYnKSB7CiAgICAgICAgICBtb2QgPSByZXMubW9kLm5lZygpOwogICAgICAgICAgaWYgKHBvc2l0aXZlICYmIG1vZC5uZWdhdGl2ZSAhPT0gMCkgewogICAgICAgICAgICBtb2QuaWFkZChudW0pOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGRpdjogZGl2LAogICAgICAgICAgbW9kOiBtb2QKICAgICAgICB9OwogICAgICB9CgogICAgICBpZiAodGhpcy5uZWdhdGl2ZSA9PT0gMCAmJiBudW0ubmVnYXRpdmUgIT09IDApIHsKICAgICAgICByZXMgPSB0aGlzLmRpdm1vZChudW0ubmVnKCksIG1vZGUpOwoKICAgICAgICBpZiAobW9kZSAhPT0gJ21vZCcpIHsKICAgICAgICAgIGRpdiA9IHJlcy5kaXYubmVnKCk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gewogICAgICAgICAgZGl2OiBkaXYsCiAgICAgICAgICBtb2Q6IHJlcy5tb2QKICAgICAgICB9OwogICAgICB9CgogICAgICBpZiAoKHRoaXMubmVnYXRpdmUgJiBudW0ubmVnYXRpdmUpICE9PSAwKSB7CiAgICAgICAgcmVzID0gdGhpcy5uZWcoKS5kaXZtb2QobnVtLm5lZygpLCBtb2RlKTsKCiAgICAgICAgaWYgKG1vZGUgIT09ICdkaXYnKSB7CiAgICAgICAgICBtb2QgPSByZXMubW9kLm5lZygpOwogICAgICAgICAgaWYgKHBvc2l0aXZlICYmIG1vZC5uZWdhdGl2ZSAhPT0gMCkgewogICAgICAgICAgICBtb2QuaXN1YihudW0pOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGRpdjogcmVzLmRpdiwKICAgICAgICAgIG1vZDogbW9kCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgLy8gQm90aCBudW1iZXJzIGFyZSBwb3NpdGl2ZSBhdCB0aGlzIHBvaW50CgogICAgICAvLyBTdHJpcCBib3RoIG51bWJlcnMgdG8gYXBwcm94aW1hdGUgc2hpZnQgdmFsdWUKICAgICAgaWYgKG51bS5sZW5ndGggPiB0aGlzLmxlbmd0aCB8fCB0aGlzLmNtcChudW0pIDwgMCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBkaXY6IG5ldyBCTigwKSwKICAgICAgICAgIG1vZDogdGhpcwogICAgICAgIH07CiAgICAgIH0KCiAgICAgIC8vIFZlcnkgc2hvcnQgcmVkdWN0aW9uCiAgICAgIGlmIChudW0ubGVuZ3RoID09PSAxKSB7CiAgICAgICAgaWYgKG1vZGUgPT09ICdkaXYnKSB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBkaXY6IHRoaXMuZGl2bihudW0ud29yZHNbMF0pLAogICAgICAgICAgICBtb2Q6IG51bGwKICAgICAgICAgIH07CiAgICAgICAgfQoKICAgICAgICBpZiAobW9kZSA9PT0gJ21vZCcpIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGRpdjogbnVsbCwKICAgICAgICAgICAgbW9kOiBuZXcgQk4odGhpcy5tb2RuKG51bS53b3Jkc1swXSkpCiAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGRpdjogdGhpcy5kaXZuKG51bS53b3Jkc1swXSksCiAgICAgICAgICBtb2Q6IG5ldyBCTih0aGlzLm1vZG4obnVtLndvcmRzWzBdKSkKICAgICAgICB9OwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5fd29yZERpdihudW0sIG1vZGUpOwogICAgfTsKCiAgICAvLyBGaW5kIGB0aGlzYCAvIGBudW1gCiAgICBCTi5wcm90b3R5cGUuZGl2ID0gZnVuY3Rpb24gZGl2IChudW0pIHsKICAgICAgcmV0dXJuIHRoaXMuZGl2bW9kKG51bSwgJ2RpdicsIGZhbHNlKS5kaXY7CiAgICB9OwoKICAgIC8vIEZpbmQgYHRoaXNgICUgYG51bWAKICAgIEJOLnByb3RvdHlwZS5tb2QgPSBmdW5jdGlvbiBtb2QgKG51bSkgewogICAgICByZXR1cm4gdGhpcy5kaXZtb2QobnVtLCAnbW9kJywgZmFsc2UpLm1vZDsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLnVtb2QgPSBmdW5jdGlvbiB1bW9kIChudW0pIHsKICAgICAgcmV0dXJuIHRoaXMuZGl2bW9kKG51bSwgJ21vZCcsIHRydWUpLm1vZDsKICAgIH07CgogICAgLy8gRmluZCBSb3VuZChgdGhpc2AgLyBgbnVtYCkKICAgIEJOLnByb3RvdHlwZS5kaXZSb3VuZCA9IGZ1bmN0aW9uIGRpdlJvdW5kIChudW0pIHsKICAgICAgdmFyIGRtID0gdGhpcy5kaXZtb2QobnVtKTsKCiAgICAgIC8vIEZhc3QgY2FzZSAtIGV4YWN0IGRpdmlzaW9uCiAgICAgIGlmIChkbS5tb2QuaXNaZXJvKCkpIHJldHVybiBkbS5kaXY7CgogICAgICB2YXIgbW9kID0gZG0uZGl2Lm5lZ2F0aXZlICE9PSAwID8gZG0ubW9kLmlzdWIobnVtKSA6IGRtLm1vZDsKCiAgICAgIHZhciBoYWxmID0gbnVtLnVzaHJuKDEpOwogICAgICB2YXIgcjIgPSBudW0uYW5kbG4oMSk7CiAgICAgIHZhciBjbXAgPSBtb2QuY21wKGhhbGYpOwoKICAgICAgLy8gUm91bmQgZG93bgogICAgICBpZiAoY21wIDwgMCB8fCByMiA9PT0gMSAmJiBjbXAgPT09IDApIHJldHVybiBkbS5kaXY7CgogICAgICAvLyBSb3VuZCB1cAogICAgICByZXR1cm4gZG0uZGl2Lm5lZ2F0aXZlICE9PSAwID8gZG0uZGl2LmlzdWJuKDEpIDogZG0uZGl2LmlhZGRuKDEpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUubW9kbiA9IGZ1bmN0aW9uIG1vZG4gKG51bSkgewogICAgICBhc3NlcnQobnVtIDw9IDB4M2ZmZmZmZik7CiAgICAgIHZhciBwID0gKDEgPDwgMjYpICUgbnVtOwoKICAgICAgdmFyIGFjYyA9IDA7CiAgICAgIGZvciAodmFyIGkgPSB0aGlzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICAgICAgYWNjID0gKHAgKiBhY2MgKyAodGhpcy53b3Jkc1tpXSB8IDApKSAlIG51bTsKICAgICAgfQoKICAgICAgcmV0dXJuIGFjYzsKICAgIH07CgogICAgLy8gSW4tcGxhY2UgZGl2aXNpb24gYnkgbnVtYmVyCiAgICBCTi5wcm90b3R5cGUuaWRpdm4gPSBmdW5jdGlvbiBpZGl2biAobnVtKSB7CiAgICAgIGFzc2VydChudW0gPD0gMHgzZmZmZmZmKTsKCiAgICAgIHZhciBjYXJyeSA9IDA7CiAgICAgIGZvciAodmFyIGkgPSB0aGlzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICAgICAgdmFyIHcgPSAodGhpcy53b3Jkc1tpXSB8IDApICsgY2FycnkgKiAweDQwMDAwMDA7CiAgICAgICAgdGhpcy53b3Jkc1tpXSA9ICh3IC8gbnVtKSB8IDA7CiAgICAgICAgY2FycnkgPSB3ICUgbnVtOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5zdHJpcCgpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuZGl2biA9IGZ1bmN0aW9uIGRpdm4gKG51bSkgewogICAgICByZXR1cm4gdGhpcy5jbG9uZSgpLmlkaXZuKG51bSk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5lZ2NkID0gZnVuY3Rpb24gZWdjZCAocCkgewogICAgICBhc3NlcnQocC5uZWdhdGl2ZSA9PT0gMCk7CiAgICAgIGFzc2VydCghcC5pc1plcm8oKSk7CgogICAgICB2YXIgeCA9IHRoaXM7CiAgICAgIHZhciB5ID0gcC5jbG9uZSgpOwoKICAgICAgaWYgKHgubmVnYXRpdmUgIT09IDApIHsKICAgICAgICB4ID0geC51bW9kKHApOwogICAgICB9IGVsc2UgewogICAgICAgIHggPSB4LmNsb25lKCk7CiAgICAgIH0KCiAgICAgIC8vIEEgKiB4ICsgQiAqIHkgPSB4CiAgICAgIHZhciBBID0gbmV3IEJOKDEpOwogICAgICB2YXIgQiA9IG5ldyBCTigwKTsKCiAgICAgIC8vIEMgKiB4ICsgRCAqIHkgPSB5CiAgICAgIHZhciBDID0gbmV3IEJOKDApOwogICAgICB2YXIgRCA9IG5ldyBCTigxKTsKCiAgICAgIHZhciBnID0gMDsKCiAgICAgIHdoaWxlICh4LmlzRXZlbigpICYmIHkuaXNFdmVuKCkpIHsKICAgICAgICB4Lml1c2hybigxKTsKICAgICAgICB5Lml1c2hybigxKTsKICAgICAgICArK2c7CiAgICAgIH0KCiAgICAgIHZhciB5cCA9IHkuY2xvbmUoKTsKICAgICAgdmFyIHhwID0geC5jbG9uZSgpOwoKICAgICAgd2hpbGUgKCF4LmlzWmVybygpKSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGltID0gMTsgKHgud29yZHNbMF0gJiBpbSkgPT09IDAgJiYgaSA8IDI2OyArK2ksIGltIDw8PSAxKTsKICAgICAgICBpZiAoaSA+IDApIHsKICAgICAgICAgIHguaXVzaHJuKGkpOwogICAgICAgICAgd2hpbGUgKGktLSA+IDApIHsKICAgICAgICAgICAgaWYgKEEuaXNPZGQoKSB8fCBCLmlzT2RkKCkpIHsKICAgICAgICAgICAgICBBLmlhZGQoeXApOwogICAgICAgICAgICAgIEIuaXN1Yih4cCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIEEuaXVzaHJuKDEpOwogICAgICAgICAgICBCLml1c2hybigxKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZvciAodmFyIGogPSAwLCBqbSA9IDE7ICh5LndvcmRzWzBdICYgam0pID09PSAwICYmIGogPCAyNjsgKytqLCBqbSA8PD0gMSk7CiAgICAgICAgaWYgKGogPiAwKSB7CiAgICAgICAgICB5Lml1c2hybihqKTsKICAgICAgICAgIHdoaWxlIChqLS0gPiAwKSB7CiAgICAgICAgICAgIGlmIChDLmlzT2RkKCkgfHwgRC5pc09kZCgpKSB7CiAgICAgICAgICAgICAgQy5pYWRkKHlwKTsKICAgICAgICAgICAgICBELmlzdWIoeHApOwogICAgICAgICAgICB9CgogICAgICAgICAgICBDLml1c2hybigxKTsKICAgICAgICAgICAgRC5pdXNocm4oMSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoeC5jbXAoeSkgPj0gMCkgewogICAgICAgICAgeC5pc3ViKHkpOwogICAgICAgICAgQS5pc3ViKEMpOwogICAgICAgICAgQi5pc3ViKEQpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB5LmlzdWIoeCk7CiAgICAgICAgICBDLmlzdWIoQSk7CiAgICAgICAgICBELmlzdWIoQik7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gewogICAgICAgIGE6IEMsCiAgICAgICAgYjogRCwKICAgICAgICBnY2Q6IHkuaXVzaGxuKGcpCiAgICAgIH07CiAgICB9OwoKICAgIC8vIFRoaXMgaXMgcmVkdWNlZCBpbmNhcm5hdGlvbiBvZiB0aGUgYmluYXJ5IEVFQQogICAgLy8gYWJvdmUsIGRlc2lnbmF0ZWQgdG8gaW52ZXJ0IG1lbWJlcnMgb2YgdGhlCiAgICAvLyBfcHJpbWVfIGZpZWxkcyBGKHApIGF0IGEgbWF4aW1hbCBzcGVlZAogICAgQk4ucHJvdG90eXBlLl9pbnZtcCA9IGZ1bmN0aW9uIF9pbnZtcCAocCkgewogICAgICBhc3NlcnQocC5uZWdhdGl2ZSA9PT0gMCk7CiAgICAgIGFzc2VydCghcC5pc1plcm8oKSk7CgogICAgICB2YXIgYSA9IHRoaXM7CiAgICAgIHZhciBiID0gcC5jbG9uZSgpOwoKICAgICAgaWYgKGEubmVnYXRpdmUgIT09IDApIHsKICAgICAgICBhID0gYS51bW9kKHApOwogICAgICB9IGVsc2UgewogICAgICAgIGEgPSBhLmNsb25lKCk7CiAgICAgIH0KCiAgICAgIHZhciB4MSA9IG5ldyBCTigxKTsKICAgICAgdmFyIHgyID0gbmV3IEJOKDApOwoKICAgICAgdmFyIGRlbHRhID0gYi5jbG9uZSgpOwoKICAgICAgd2hpbGUgKGEuY21wbigxKSA+IDAgJiYgYi5jbXBuKDEpID4gMCkgewogICAgICAgIGZvciAodmFyIGkgPSAwLCBpbSA9IDE7IChhLndvcmRzWzBdICYgaW0pID09PSAwICYmIGkgPCAyNjsgKytpLCBpbSA8PD0gMSk7CiAgICAgICAgaWYgKGkgPiAwKSB7CiAgICAgICAgICBhLml1c2hybihpKTsKICAgICAgICAgIHdoaWxlIChpLS0gPiAwKSB7CiAgICAgICAgICAgIGlmICh4MS5pc09kZCgpKSB7CiAgICAgICAgICAgICAgeDEuaWFkZChkZWx0YSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHgxLml1c2hybigxKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZvciAodmFyIGogPSAwLCBqbSA9IDE7IChiLndvcmRzWzBdICYgam0pID09PSAwICYmIGogPCAyNjsgKytqLCBqbSA8PD0gMSk7CiAgICAgICAgaWYgKGogPiAwKSB7CiAgICAgICAgICBiLml1c2hybihqKTsKICAgICAgICAgIHdoaWxlIChqLS0gPiAwKSB7CiAgICAgICAgICAgIGlmICh4Mi5pc09kZCgpKSB7CiAgICAgICAgICAgICAgeDIuaWFkZChkZWx0YSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHgyLml1c2hybigxKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChhLmNtcChiKSA+PSAwKSB7CiAgICAgICAgICBhLmlzdWIoYik7CiAgICAgICAgICB4MS5pc3ViKHgyKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYi5pc3ViKGEpOwogICAgICAgICAgeDIuaXN1Yih4MSk7CiAgICAgICAgfQogICAgICB9CgogICAgICB2YXIgcmVzOwogICAgICBpZiAoYS5jbXBuKDEpID09PSAwKSB7CiAgICAgICAgcmVzID0geDE7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmVzID0geDI7CiAgICAgIH0KCiAgICAgIGlmIChyZXMuY21wbigwKSA8IDApIHsKICAgICAgICByZXMuaWFkZChwKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlczsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmdjZCA9IGZ1bmN0aW9uIGdjZCAobnVtKSB7CiAgICAgIGlmICh0aGlzLmlzWmVybygpKSByZXR1cm4gbnVtLmFicygpOwogICAgICBpZiAobnVtLmlzWmVybygpKSByZXR1cm4gdGhpcy5hYnMoKTsKCiAgICAgIHZhciBhID0gdGhpcy5jbG9uZSgpOwogICAgICB2YXIgYiA9IG51bS5jbG9uZSgpOwogICAgICBhLm5lZ2F0aXZlID0gMDsKICAgICAgYi5uZWdhdGl2ZSA9IDA7CgogICAgICAvLyBSZW1vdmUgY29tbW9uIGZhY3RvciBvZiB0d28KICAgICAgZm9yICh2YXIgc2hpZnQgPSAwOyBhLmlzRXZlbigpICYmIGIuaXNFdmVuKCk7IHNoaWZ0KyspIHsKICAgICAgICBhLml1c2hybigxKTsKICAgICAgICBiLml1c2hybigxKTsKICAgICAgfQoKICAgICAgZG8gewogICAgICAgIHdoaWxlIChhLmlzRXZlbigpKSB7CiAgICAgICAgICBhLml1c2hybigxKTsKICAgICAgICB9CiAgICAgICAgd2hpbGUgKGIuaXNFdmVuKCkpIHsKICAgICAgICAgIGIuaXVzaHJuKDEpOwogICAgICAgIH0KCiAgICAgICAgdmFyIHIgPSBhLmNtcChiKTsKICAgICAgICBpZiAociA8IDApIHsKICAgICAgICAgIC8vIFN3YXAgYGFgIGFuZCBgYmAgdG8gbWFrZSBgYWAgYWx3YXlzIGJpZ2dlciB0aGFuIGBiYAogICAgICAgICAgdmFyIHQgPSBhOwogICAgICAgICAgYSA9IGI7CiAgICAgICAgICBiID0gdDsKICAgICAgICB9IGVsc2UgaWYgKHIgPT09IDAgfHwgYi5jbXBuKDEpID09PSAwKSB7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICAgIGEuaXN1YihiKTsKICAgICAgfSB3aGlsZSAodHJ1ZSk7CgogICAgICByZXR1cm4gYi5pdXNobG4oc2hpZnQpOwogICAgfTsKCiAgICAvLyBJbnZlcnQgbnVtYmVyIGluIHRoZSBmaWVsZCBGKG51bSkKICAgIEJOLnByb3RvdHlwZS5pbnZtID0gZnVuY3Rpb24gaW52bSAobnVtKSB7CiAgICAgIHJldHVybiB0aGlzLmVnY2QobnVtKS5hLnVtb2QobnVtKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmlzRXZlbiA9IGZ1bmN0aW9uIGlzRXZlbiAoKSB7CiAgICAgIHJldHVybiAodGhpcy53b3Jkc1swXSAmIDEpID09PSAwOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuaXNPZGQgPSBmdW5jdGlvbiBpc09kZCAoKSB7CiAgICAgIHJldHVybiAodGhpcy53b3Jkc1swXSAmIDEpID09PSAxOwogICAgfTsKCiAgICAvLyBBbmQgZmlyc3Qgd29yZCBhbmQgbnVtCiAgICBCTi5wcm90b3R5cGUuYW5kbG4gPSBmdW5jdGlvbiBhbmRsbiAobnVtKSB7CiAgICAgIHJldHVybiB0aGlzLndvcmRzWzBdICYgbnVtOwogICAgfTsKCiAgICAvLyBJbmNyZW1lbnQgYXQgdGhlIGJpdCBwb3NpdGlvbiBpbi1saW5lCiAgICBCTi5wcm90b3R5cGUuYmluY24gPSBmdW5jdGlvbiBiaW5jbiAoYml0KSB7CiAgICAgIGFzc2VydCh0eXBlb2YgYml0ID09PSAnbnVtYmVyJyk7CiAgICAgIHZhciByID0gYml0ICUgMjY7CiAgICAgIHZhciBzID0gKGJpdCAtIHIpIC8gMjY7CiAgICAgIHZhciBxID0gMSA8PCByOwoKICAgICAgLy8gRmFzdCBjYXNlOiBiaXQgaXMgbXVjaCBoaWdoZXIgdGhhbiBhbGwgZXhpc3Rpbmcgd29yZHMKICAgICAgaWYgKHRoaXMubGVuZ3RoIDw9IHMpIHsKICAgICAgICB0aGlzLl9leHBhbmQocyArIDEpOwogICAgICAgIHRoaXMud29yZHNbc10gfD0gcTsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfQoKICAgICAgLy8gQWRkIGJpdCBhbmQgcHJvcGFnYXRlLCBpZiBuZWVkZWQKICAgICAgdmFyIGNhcnJ5ID0gcTsKICAgICAgZm9yICh2YXIgaSA9IHM7IGNhcnJ5ICE9PSAwICYmIGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIHcgPSB0aGlzLndvcmRzW2ldIHwgMDsKICAgICAgICB3ICs9IGNhcnJ5OwogICAgICAgIGNhcnJ5ID0gdyA+Pj4gMjY7CiAgICAgICAgdyAmPSAweDNmZmZmZmY7CiAgICAgICAgdGhpcy53b3Jkc1tpXSA9IHc7CiAgICAgIH0KICAgICAgaWYgKGNhcnJ5ICE9PSAwKSB7CiAgICAgICAgdGhpcy53b3Jkc1tpXSA9IGNhcnJ5OwogICAgICAgIHRoaXMubGVuZ3RoKys7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXM7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5pc1plcm8gPSBmdW5jdGlvbiBpc1plcm8gKCkgewogICAgICByZXR1cm4gdGhpcy5sZW5ndGggPT09IDEgJiYgdGhpcy53b3Jkc1swXSA9PT0gMDsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmNtcG4gPSBmdW5jdGlvbiBjbXBuIChudW0pIHsKICAgICAgdmFyIG5lZ2F0aXZlID0gbnVtIDwgMDsKCiAgICAgIGlmICh0aGlzLm5lZ2F0aXZlICE9PSAwICYmICFuZWdhdGl2ZSkgcmV0dXJuIC0xOwogICAgICBpZiAodGhpcy5uZWdhdGl2ZSA9PT0gMCAmJiBuZWdhdGl2ZSkgcmV0dXJuIDE7CgogICAgICB0aGlzLnN0cmlwKCk7CgogICAgICB2YXIgcmVzOwogICAgICBpZiAodGhpcy5sZW5ndGggPiAxKSB7CiAgICAgICAgcmVzID0gMTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAobmVnYXRpdmUpIHsKICAgICAgICAgIG51bSA9IC1udW07CiAgICAgICAgfQoKICAgICAgICBhc3NlcnQobnVtIDw9IDB4M2ZmZmZmZiwgJ051bWJlciBpcyB0b28gYmlnJyk7CgogICAgICAgIHZhciB3ID0gdGhpcy53b3Jkc1swXSB8IDA7CiAgICAgICAgcmVzID0gdyA9PT0gbnVtID8gMCA6IHcgPCBudW0gPyAtMSA6IDE7CiAgICAgIH0KICAgICAgaWYgKHRoaXMubmVnYXRpdmUgIT09IDApIHJldHVybiAtcmVzIHwgMDsKICAgICAgcmV0dXJuIHJlczsKICAgIH07CgogICAgLy8gQ29tcGFyZSB0d28gbnVtYmVycyBhbmQgcmV0dXJuOgogICAgLy8gMSAtIGlmIGB0aGlzYCA+IGBudW1gCiAgICAvLyAwIC0gaWYgYHRoaXNgID09IGBudW1gCiAgICAvLyAtMSAtIGlmIGB0aGlzYCA8IGBudW1gCiAgICBCTi5wcm90b3R5cGUuY21wID0gZnVuY3Rpb24gY21wIChudW0pIHsKICAgICAgaWYgKHRoaXMubmVnYXRpdmUgIT09IDAgJiYgbnVtLm5lZ2F0aXZlID09PSAwKSByZXR1cm4gLTE7CiAgICAgIGlmICh0aGlzLm5lZ2F0aXZlID09PSAwICYmIG51bS5uZWdhdGl2ZSAhPT0gMCkgcmV0dXJuIDE7CgogICAgICB2YXIgcmVzID0gdGhpcy51Y21wKG51bSk7CiAgICAgIGlmICh0aGlzLm5lZ2F0aXZlICE9PSAwKSByZXR1cm4gLXJlcyB8IDA7CiAgICAgIHJldHVybiByZXM7CiAgICB9OwoKICAgIC8vIFVuc2lnbmVkIGNvbXBhcmlzb24KICAgIEJOLnByb3RvdHlwZS51Y21wID0gZnVuY3Rpb24gdWNtcCAobnVtKSB7CiAgICAgIC8vIEF0IHRoaXMgcG9pbnQgYm90aCBudW1iZXJzIGhhdmUgdGhlIHNhbWUgc2lnbgogICAgICBpZiAodGhpcy5sZW5ndGggPiBudW0ubGVuZ3RoKSByZXR1cm4gMTsKICAgICAgaWYgKHRoaXMubGVuZ3RoIDwgbnVtLmxlbmd0aCkgcmV0dXJuIC0xOwoKICAgICAgdmFyIHJlcyA9IDA7CiAgICAgIGZvciAodmFyIGkgPSB0aGlzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICAgICAgdmFyIGEgPSB0aGlzLndvcmRzW2ldIHwgMDsKICAgICAgICB2YXIgYiA9IG51bS53b3Jkc1tpXSB8IDA7CgogICAgICAgIGlmIChhID09PSBiKSBjb250aW51ZTsKICAgICAgICBpZiAoYSA8IGIpIHsKICAgICAgICAgIHJlcyA9IC0xOwogICAgICAgIH0gZWxzZSBpZiAoYSA+IGIpIHsKICAgICAgICAgIHJlcyA9IDE7CiAgICAgICAgfQogICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIHJldHVybiByZXM7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5ndG4gPSBmdW5jdGlvbiBndG4gKG51bSkgewogICAgICByZXR1cm4gdGhpcy5jbXBuKG51bSkgPT09IDE7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5ndCA9IGZ1bmN0aW9uIGd0IChudW0pIHsKICAgICAgcmV0dXJuIHRoaXMuY21wKG51bSkgPT09IDE7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5ndGVuID0gZnVuY3Rpb24gZ3RlbiAobnVtKSB7CiAgICAgIHJldHVybiB0aGlzLmNtcG4obnVtKSA+PSAwOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuZ3RlID0gZnVuY3Rpb24gZ3RlIChudW0pIHsKICAgICAgcmV0dXJuIHRoaXMuY21wKG51bSkgPj0gMDsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmx0biA9IGZ1bmN0aW9uIGx0biAobnVtKSB7CiAgICAgIHJldHVybiB0aGlzLmNtcG4obnVtKSA9PT0gLTE7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5sdCA9IGZ1bmN0aW9uIGx0IChudW0pIHsKICAgICAgcmV0dXJuIHRoaXMuY21wKG51bSkgPT09IC0xOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUubHRlbiA9IGZ1bmN0aW9uIGx0ZW4gKG51bSkgewogICAgICByZXR1cm4gdGhpcy5jbXBuKG51bSkgPD0gMDsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmx0ZSA9IGZ1bmN0aW9uIGx0ZSAobnVtKSB7CiAgICAgIHJldHVybiB0aGlzLmNtcChudW0pIDw9IDA7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5lcW4gPSBmdW5jdGlvbiBlcW4gKG51bSkgewogICAgICByZXR1cm4gdGhpcy5jbXBuKG51bSkgPT09IDA7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5lcSA9IGZ1bmN0aW9uIGVxIChudW0pIHsKICAgICAgcmV0dXJuIHRoaXMuY21wKG51bSkgPT09IDA7CiAgICB9OwoKICAgIC8vCiAgICAvLyBBIHJlZHVjZSBjb250ZXh0LCBjb3VsZCBiZSB1c2luZyBtb250Z29tZXJ5IG9yIHNvbWV0aGluZyBiZXR0ZXIsIGRlcGVuZGluZwogICAgLy8gb24gdGhlIGBtYCBpdHNlbGYuCiAgICAvLwogICAgQk4ucmVkID0gZnVuY3Rpb24gcmVkIChudW0pIHsKICAgICAgcmV0dXJuIG5ldyBSZWQobnVtKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLnRvUmVkID0gZnVuY3Rpb24gdG9SZWQgKGN0eCkgewogICAgICBhc3NlcnQoIXRoaXMucmVkLCAnQWxyZWFkeSBhIG51bWJlciBpbiByZWR1Y3Rpb24gY29udGV4dCcpOwogICAgICBhc3NlcnQodGhpcy5uZWdhdGl2ZSA9PT0gMCwgJ3JlZCB3b3JrcyBvbmx5IHdpdGggcG9zaXRpdmVzJyk7CiAgICAgIHJldHVybiBjdHguY29udmVydFRvKHRoaXMpLl9mb3JjZVJlZChjdHgpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuZnJvbVJlZCA9IGZ1bmN0aW9uIGZyb21SZWQgKCkgewogICAgICBhc3NlcnQodGhpcy5yZWQsICdmcm9tUmVkIHdvcmtzIG9ubHkgd2l0aCBudW1iZXJzIGluIHJlZHVjdGlvbiBjb250ZXh0Jyk7CiAgICAgIHJldHVybiB0aGlzLnJlZC5jb252ZXJ0RnJvbSh0aGlzKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLl9mb3JjZVJlZCA9IGZ1bmN0aW9uIF9mb3JjZVJlZCAoY3R4KSB7CiAgICAgIHRoaXMucmVkID0gY3R4OwogICAgICByZXR1cm4gdGhpczsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmZvcmNlUmVkID0gZnVuY3Rpb24gZm9yY2VSZWQgKGN0eCkgewogICAgICBhc3NlcnQoIXRoaXMucmVkLCAnQWxyZWFkeSBhIG51bWJlciBpbiByZWR1Y3Rpb24gY29udGV4dCcpOwogICAgICByZXR1cm4gdGhpcy5fZm9yY2VSZWQoY3R4KTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLnJlZEFkZCA9IGZ1bmN0aW9uIHJlZEFkZCAobnVtKSB7CiAgICAgIGFzc2VydCh0aGlzLnJlZCwgJ3JlZEFkZCB3b3JrcyBvbmx5IHdpdGggcmVkIG51bWJlcnMnKTsKICAgICAgcmV0dXJuIHRoaXMucmVkLmFkZCh0aGlzLCBudW0pOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUucmVkSUFkZCA9IGZ1bmN0aW9uIHJlZElBZGQgKG51bSkgewogICAgICBhc3NlcnQodGhpcy5yZWQsICdyZWRJQWRkIHdvcmtzIG9ubHkgd2l0aCByZWQgbnVtYmVycycpOwogICAgICByZXR1cm4gdGhpcy5yZWQuaWFkZCh0aGlzLCBudW0pOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUucmVkU3ViID0gZnVuY3Rpb24gcmVkU3ViIChudW0pIHsKICAgICAgYXNzZXJ0KHRoaXMucmVkLCAncmVkU3ViIHdvcmtzIG9ubHkgd2l0aCByZWQgbnVtYmVycycpOwogICAgICByZXR1cm4gdGhpcy5yZWQuc3ViKHRoaXMsIG51bSk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5yZWRJU3ViID0gZnVuY3Rpb24gcmVkSVN1YiAobnVtKSB7CiAgICAgIGFzc2VydCh0aGlzLnJlZCwgJ3JlZElTdWIgd29ya3Mgb25seSB3aXRoIHJlZCBudW1iZXJzJyk7CiAgICAgIHJldHVybiB0aGlzLnJlZC5pc3ViKHRoaXMsIG51bSk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5yZWRTaGwgPSBmdW5jdGlvbiByZWRTaGwgKG51bSkgewogICAgICBhc3NlcnQodGhpcy5yZWQsICdyZWRTaGwgd29ya3Mgb25seSB3aXRoIHJlZCBudW1iZXJzJyk7CiAgICAgIHJldHVybiB0aGlzLnJlZC5zaGwodGhpcywgbnVtKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLnJlZE11bCA9IGZ1bmN0aW9uIHJlZE11bCAobnVtKSB7CiAgICAgIGFzc2VydCh0aGlzLnJlZCwgJ3JlZE11bCB3b3JrcyBvbmx5IHdpdGggcmVkIG51bWJlcnMnKTsKICAgICAgdGhpcy5yZWQuX3ZlcmlmeTIodGhpcywgbnVtKTsKICAgICAgcmV0dXJuIHRoaXMucmVkLm11bCh0aGlzLCBudW0pOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUucmVkSU11bCA9IGZ1bmN0aW9uIHJlZElNdWwgKG51bSkgewogICAgICBhc3NlcnQodGhpcy5yZWQsICdyZWRNdWwgd29ya3Mgb25seSB3aXRoIHJlZCBudW1iZXJzJyk7CiAgICAgIHRoaXMucmVkLl92ZXJpZnkyKHRoaXMsIG51bSk7CiAgICAgIHJldHVybiB0aGlzLnJlZC5pbXVsKHRoaXMsIG51bSk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5yZWRTcXIgPSBmdW5jdGlvbiByZWRTcXIgKCkgewogICAgICBhc3NlcnQodGhpcy5yZWQsICdyZWRTcXIgd29ya3Mgb25seSB3aXRoIHJlZCBudW1iZXJzJyk7CiAgICAgIHRoaXMucmVkLl92ZXJpZnkxKHRoaXMpOwogICAgICByZXR1cm4gdGhpcy5yZWQuc3FyKHRoaXMpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUucmVkSVNxciA9IGZ1bmN0aW9uIHJlZElTcXIgKCkgewogICAgICBhc3NlcnQodGhpcy5yZWQsICdyZWRJU3FyIHdvcmtzIG9ubHkgd2l0aCByZWQgbnVtYmVycycpOwogICAgICB0aGlzLnJlZC5fdmVyaWZ5MSh0aGlzKTsKICAgICAgcmV0dXJuIHRoaXMucmVkLmlzcXIodGhpcyk7CiAgICB9OwoKICAgIC8vIFNxdWFyZSByb290IG92ZXIgcAogICAgQk4ucHJvdG90eXBlLnJlZFNxcnQgPSBmdW5jdGlvbiByZWRTcXJ0ICgpIHsKICAgICAgYXNzZXJ0KHRoaXMucmVkLCAncmVkU3FydCB3b3JrcyBvbmx5IHdpdGggcmVkIG51bWJlcnMnKTsKICAgICAgdGhpcy5yZWQuX3ZlcmlmeTEodGhpcyk7CiAgICAgIHJldHVybiB0aGlzLnJlZC5zcXJ0KHRoaXMpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUucmVkSW52bSA9IGZ1bmN0aW9uIHJlZEludm0gKCkgewogICAgICBhc3NlcnQodGhpcy5yZWQsICdyZWRJbnZtIHdvcmtzIG9ubHkgd2l0aCByZWQgbnVtYmVycycpOwogICAgICB0aGlzLnJlZC5fdmVyaWZ5MSh0aGlzKTsKICAgICAgcmV0dXJuIHRoaXMucmVkLmludm0odGhpcyk7CiAgICB9OwoKICAgIC8vIFJldHVybiBuZWdhdGl2ZSBjbG9uZSBvZiBgdGhpc2AgJSBgcmVkIG1vZHVsb2AKICAgIEJOLnByb3RvdHlwZS5yZWROZWcgPSBmdW5jdGlvbiByZWROZWcgKCkgewogICAgICBhc3NlcnQodGhpcy5yZWQsICdyZWROZWcgd29ya3Mgb25seSB3aXRoIHJlZCBudW1iZXJzJyk7CiAgICAgIHRoaXMucmVkLl92ZXJpZnkxKHRoaXMpOwogICAgICByZXR1cm4gdGhpcy5yZWQubmVnKHRoaXMpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUucmVkUG93ID0gZnVuY3Rpb24gcmVkUG93IChudW0pIHsKICAgICAgYXNzZXJ0KHRoaXMucmVkICYmICFudW0ucmVkLCAncmVkUG93KG5vcm1hbE51bSknKTsKICAgICAgdGhpcy5yZWQuX3ZlcmlmeTEodGhpcyk7CiAgICAgIHJldHVybiB0aGlzLnJlZC5wb3codGhpcywgbnVtKTsKICAgIH07CgogICAgLy8gUHJpbWUgbnVtYmVycyB3aXRoIGVmZmljaWVudCByZWR1Y3Rpb24KICAgIHZhciBwcmltZXMgPSB7CiAgICAgIGsyNTY6IG51bGwsCiAgICAgIHAyMjQ6IG51bGwsCiAgICAgIHAxOTI6IG51bGwsCiAgICAgIHAyNTUxOTogbnVsbAogICAgfTsKCiAgICAvLyBQc2V1ZG8tTWVyc2VubmUgcHJpbWUKICAgIGZ1bmN0aW9uIE1QcmltZSAobmFtZSwgcCkgewogICAgICAvLyBQID0gMiBeIE4gLSBLCiAgICAgIHRoaXMubmFtZSA9IG5hbWU7CiAgICAgIHRoaXMucCA9IG5ldyBCTihwLCAxNik7CiAgICAgIHRoaXMubiA9IHRoaXMucC5iaXRMZW5ndGgoKTsKICAgICAgdGhpcy5rID0gbmV3IEJOKDEpLml1c2hsbih0aGlzLm4pLmlzdWIodGhpcy5wKTsKCiAgICAgIHRoaXMudG1wID0gdGhpcy5fdG1wKCk7CiAgICB9CgogICAgTVByaW1lLnByb3RvdHlwZS5fdG1wID0gZnVuY3Rpb24gX3RtcCAoKSB7CiAgICAgIHZhciB0bXAgPSBuZXcgQk4obnVsbCk7CiAgICAgIHRtcC53b3JkcyA9IG5ldyBBcnJheShNYXRoLmNlaWwodGhpcy5uIC8gMTMpKTsKICAgICAgcmV0dXJuIHRtcDsKICAgIH07CgogICAgTVByaW1lLnByb3RvdHlwZS5pcmVkdWNlID0gZnVuY3Rpb24gaXJlZHVjZSAobnVtKSB7CiAgICAgIC8vIEFzc3VtZXMgdGhhdCBgbnVtYCBpcyBsZXNzIHRoYW4gYFBeMmAKICAgICAgLy8gbnVtID0gSEkgKiAoMiBeIE4gLSBLKSArIEhJICogSyArIExPID0gSEkgKiBLICsgTE8gKG1vZCBQKQogICAgICB2YXIgciA9IG51bTsKICAgICAgdmFyIHJsZW47CgogICAgICBkbyB7CiAgICAgICAgdGhpcy5zcGxpdChyLCB0aGlzLnRtcCk7CiAgICAgICAgciA9IHRoaXMuaW11bEsocik7CiAgICAgICAgciA9IHIuaWFkZCh0aGlzLnRtcCk7CiAgICAgICAgcmxlbiA9IHIuYml0TGVuZ3RoKCk7CiAgICAgIH0gd2hpbGUgKHJsZW4gPiB0aGlzLm4pOwoKICAgICAgdmFyIGNtcCA9IHJsZW4gPCB0aGlzLm4gPyAtMSA6IHIudWNtcCh0aGlzLnApOwogICAgICBpZiAoY21wID09PSAwKSB7CiAgICAgICAgci53b3Jkc1swXSA9IDA7CiAgICAgICAgci5sZW5ndGggPSAxOwogICAgICB9IGVsc2UgaWYgKGNtcCA+IDApIHsKICAgICAgICByLmlzdWIodGhpcy5wKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoci5zdHJpcCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAvLyByIGlzIEJOIHY0IGluc3RhbmNlCiAgICAgICAgICByLnN0cmlwKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIHIgaXMgQk4gdjUgaW5zdGFuY2UKICAgICAgICAgIHIuX3N0cmlwKCk7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gcjsKICAgIH07CgogICAgTVByaW1lLnByb3RvdHlwZS5zcGxpdCA9IGZ1bmN0aW9uIHNwbGl0IChpbnB1dCwgb3V0KSB7CiAgICAgIGlucHV0Lml1c2hybih0aGlzLm4sIDAsIG91dCk7CiAgICB9OwoKICAgIE1QcmltZS5wcm90b3R5cGUuaW11bEsgPSBmdW5jdGlvbiBpbXVsSyAobnVtKSB7CiAgICAgIHJldHVybiBudW0uaW11bCh0aGlzLmspOwogICAgfTsKCiAgICBmdW5jdGlvbiBLMjU2ICgpIHsKICAgICAgTVByaW1lLmNhbGwoCiAgICAgICAgdGhpcywKICAgICAgICAnazI1NicsCiAgICAgICAgJ2ZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZlIGZmZmZmYzJmJyk7CiAgICB9CiAgICBpbmhlcml0cyhLMjU2LCBNUHJpbWUpOwoKICAgIEsyNTYucHJvdG90eXBlLnNwbGl0ID0gZnVuY3Rpb24gc3BsaXQgKGlucHV0LCBvdXRwdXQpIHsKICAgICAgLy8gMjU2ID0gOSAqIDI2ICsgMjIKICAgICAgdmFyIG1hc2sgPSAweDNmZmZmZjsKCiAgICAgIHZhciBvdXRMZW4gPSBNYXRoLm1pbihpbnB1dC5sZW5ndGgsIDkpOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG91dExlbjsgaSsrKSB7CiAgICAgICAgb3V0cHV0LndvcmRzW2ldID0gaW5wdXQud29yZHNbaV07CiAgICAgIH0KICAgICAgb3V0cHV0Lmxlbmd0aCA9IG91dExlbjsKCiAgICAgIGlmIChpbnB1dC5sZW5ndGggPD0gOSkgewogICAgICAgIGlucHV0LndvcmRzWzBdID0gMDsKICAgICAgICBpbnB1dC5sZW5ndGggPSAxOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgLy8gU2hpZnQgYnkgOSBsaW1icwogICAgICB2YXIgcHJldiA9IGlucHV0LndvcmRzWzldOwogICAgICBvdXRwdXQud29yZHNbb3V0cHV0Lmxlbmd0aCsrXSA9IHByZXYgJiBtYXNrOwoKICAgICAgZm9yIChpID0gMTA7IGkgPCBpbnB1dC5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBuZXh0ID0gaW5wdXQud29yZHNbaV0gfCAwOwogICAgICAgIGlucHV0LndvcmRzW2kgLSAxMF0gPSAoKG5leHQgJiBtYXNrKSA8PCA0KSB8IChwcmV2ID4+PiAyMik7CiAgICAgICAgcHJldiA9IG5leHQ7CiAgICAgIH0KICAgICAgcHJldiA+Pj49IDIyOwogICAgICBpbnB1dC53b3Jkc1tpIC0gMTBdID0gcHJldjsKICAgICAgaWYgKHByZXYgPT09IDAgJiYgaW5wdXQubGVuZ3RoID4gMTApIHsKICAgICAgICBpbnB1dC5sZW5ndGggLT0gMTA7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaW5wdXQubGVuZ3RoIC09IDk7CiAgICAgIH0KICAgIH07CgogICAgSzI1Ni5wcm90b3R5cGUuaW11bEsgPSBmdW5jdGlvbiBpbXVsSyAobnVtKSB7CiAgICAgIC8vIEsgPSAweDEwMDAwMDNkMSA9IFsgMHg0MCwgMHgzZDEgXQogICAgICBudW0ud29yZHNbbnVtLmxlbmd0aF0gPSAwOwogICAgICBudW0ud29yZHNbbnVtLmxlbmd0aCArIDFdID0gMDsKICAgICAgbnVtLmxlbmd0aCArPSAyOwoKICAgICAgLy8gYm91bmRlZCBhdDogMHg0MCAqIDB4M2ZmZmZmZiArIDB4M2QwID0gMHgxMDAwMDAzOTAKICAgICAgdmFyIGxvID0gMDsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW0ubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgdyA9IG51bS53b3Jkc1tpXSB8IDA7CiAgICAgICAgbG8gKz0gdyAqIDB4M2QxOwogICAgICAgIG51bS53b3Jkc1tpXSA9IGxvICYgMHgzZmZmZmZmOwogICAgICAgIGxvID0gdyAqIDB4NDAgKyAoKGxvIC8gMHg0MDAwMDAwKSB8IDApOwogICAgICB9CgogICAgICAvLyBGYXN0IGxlbmd0aCByZWR1Y3Rpb24KICAgICAgaWYgKG51bS53b3Jkc1tudW0ubGVuZ3RoIC0gMV0gPT09IDApIHsKICAgICAgICBudW0ubGVuZ3RoLS07CiAgICAgICAgaWYgKG51bS53b3Jkc1tudW0ubGVuZ3RoIC0gMV0gPT09IDApIHsKICAgICAgICAgIG51bS5sZW5ndGgtLTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIG51bTsKICAgIH07CgogICAgZnVuY3Rpb24gUDIyNCAoKSB7CiAgICAgIE1QcmltZS5jYWxsKAogICAgICAgIHRoaXMsCiAgICAgICAgJ3AyMjQnLAogICAgICAgICdmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiAwMDAwMDAwMCAwMDAwMDAwMCAwMDAwMDAwMScpOwogICAgfQogICAgaW5oZXJpdHMoUDIyNCwgTVByaW1lKTsKCiAgICBmdW5jdGlvbiBQMTkyICgpIHsKICAgICAgTVByaW1lLmNhbGwoCiAgICAgICAgdGhpcywKICAgICAgICAncDE5MicsCiAgICAgICAgJ2ZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZlIGZmZmZmZmZmIGZmZmZmZmZmJyk7CiAgICB9CiAgICBpbmhlcml0cyhQMTkyLCBNUHJpbWUpOwoKICAgIGZ1bmN0aW9uIFAyNTUxOSAoKSB7CiAgICAgIC8vIDIgXiAyNTUgLSAxOQogICAgICBNUHJpbWUuY2FsbCgKICAgICAgICB0aGlzLAogICAgICAgICcyNTUxOScsCiAgICAgICAgJzdmZmZmZmZmZmZmZmZmZmYgZmZmZmZmZmZmZmZmZmZmZiBmZmZmZmZmZmZmZmZmZmZmIGZmZmZmZmZmZmZmZmZmZWQnKTsKICAgIH0KICAgIGluaGVyaXRzKFAyNTUxOSwgTVByaW1lKTsKCiAgICBQMjU1MTkucHJvdG90eXBlLmltdWxLID0gZnVuY3Rpb24gaW11bEsgKG51bSkgewogICAgICAvLyBLID0gMHgxMwogICAgICB2YXIgY2FycnkgPSAwOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bS5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBoaSA9IChudW0ud29yZHNbaV0gfCAwKSAqIDB4MTMgKyBjYXJyeTsKICAgICAgICB2YXIgbG8gPSBoaSAmIDB4M2ZmZmZmZjsKICAgICAgICBoaSA+Pj49IDI2OwoKICAgICAgICBudW0ud29yZHNbaV0gPSBsbzsKICAgICAgICBjYXJyeSA9IGhpOwogICAgICB9CiAgICAgIGlmIChjYXJyeSAhPT0gMCkgewogICAgICAgIG51bS53b3Jkc1tudW0ubGVuZ3RoKytdID0gY2Fycnk7CiAgICAgIH0KICAgICAgcmV0dXJuIG51bTsKICAgIH07CgogICAgLy8gRXhwb3J0ZWQgbW9zdGx5IGZvciB0ZXN0aW5nIHB1cnBvc2VzLCB1c2UgcGxhaW4gbmFtZSBpbnN0ZWFkCiAgICBCTi5fcHJpbWUgPSBmdW5jdGlvbiBwcmltZSAobmFtZSkgewogICAgICAvLyBDYWNoZWQgdmVyc2lvbiBvZiBwcmltZQogICAgICBpZiAocHJpbWVzW25hbWVdKSByZXR1cm4gcHJpbWVzW25hbWVdOwoKICAgICAgdmFyIHByaW1lOwogICAgICBpZiAobmFtZSA9PT0gJ2syNTYnKSB7CiAgICAgICAgcHJpbWUgPSBuZXcgSzI1NigpOwogICAgICB9IGVsc2UgaWYgKG5hbWUgPT09ICdwMjI0JykgewogICAgICAgIHByaW1lID0gbmV3IFAyMjQoKTsKICAgICAgfSBlbHNlIGlmIChuYW1lID09PSAncDE5MicpIHsKICAgICAgICBwcmltZSA9IG5ldyBQMTkyKCk7CiAgICAgIH0gZWxzZSBpZiAobmFtZSA9PT0gJ3AyNTUxOScpIHsKICAgICAgICBwcmltZSA9IG5ldyBQMjU1MTkoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gcHJpbWUgJyArIG5hbWUpOwogICAgICB9CiAgICAgIHByaW1lc1tuYW1lXSA9IHByaW1lOwoKICAgICAgcmV0dXJuIHByaW1lOwogICAgfTsKCiAgICAvLwogICAgLy8gQmFzZSByZWR1Y3Rpb24gZW5naW5lCiAgICAvLwogICAgZnVuY3Rpb24gUmVkIChtKSB7CiAgICAgIGlmICh0eXBlb2YgbSA9PT0gJ3N0cmluZycpIHsKICAgICAgICB2YXIgcHJpbWUgPSBCTi5fcHJpbWUobSk7CiAgICAgICAgdGhpcy5tID0gcHJpbWUucDsKICAgICAgICB0aGlzLnByaW1lID0gcHJpbWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYXNzZXJ0KG0uZ3RuKDEpLCAnbW9kdWx1cyBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAxJyk7CiAgICAgICAgdGhpcy5tID0gbTsKICAgICAgICB0aGlzLnByaW1lID0gbnVsbDsKICAgICAgfQogICAgfQoKICAgIFJlZC5wcm90b3R5cGUuX3ZlcmlmeTEgPSBmdW5jdGlvbiBfdmVyaWZ5MSAoYSkgewogICAgICBhc3NlcnQoYS5uZWdhdGl2ZSA9PT0gMCwgJ3JlZCB3b3JrcyBvbmx5IHdpdGggcG9zaXRpdmVzJyk7CiAgICAgIGFzc2VydChhLnJlZCwgJ3JlZCB3b3JrcyBvbmx5IHdpdGggcmVkIG51bWJlcnMnKTsKICAgIH07CgogICAgUmVkLnByb3RvdHlwZS5fdmVyaWZ5MiA9IGZ1bmN0aW9uIF92ZXJpZnkyIChhLCBiKSB7CiAgICAgIGFzc2VydCgoYS5uZWdhdGl2ZSB8IGIubmVnYXRpdmUpID09PSAwLCAncmVkIHdvcmtzIG9ubHkgd2l0aCBwb3NpdGl2ZXMnKTsKICAgICAgYXNzZXJ0KGEucmVkICYmIGEucmVkID09PSBiLnJlZCwKICAgICAgICAncmVkIHdvcmtzIG9ubHkgd2l0aCByZWQgbnVtYmVycycpOwogICAgfTsKCiAgICBSZWQucHJvdG90eXBlLmltb2QgPSBmdW5jdGlvbiBpbW9kIChhKSB7CiAgICAgIGlmICh0aGlzLnByaW1lKSByZXR1cm4gdGhpcy5wcmltZS5pcmVkdWNlKGEpLl9mb3JjZVJlZCh0aGlzKTsKICAgICAgcmV0dXJuIGEudW1vZCh0aGlzLm0pLl9mb3JjZVJlZCh0aGlzKTsKICAgIH07CgogICAgUmVkLnByb3RvdHlwZS5uZWcgPSBmdW5jdGlvbiBuZWcgKGEpIHsKICAgICAgaWYgKGEuaXNaZXJvKCkpIHsKICAgICAgICByZXR1cm4gYS5jbG9uZSgpOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5tLnN1YihhKS5fZm9yY2VSZWQodGhpcyk7CiAgICB9OwoKICAgIFJlZC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gYWRkIChhLCBiKSB7CiAgICAgIHRoaXMuX3ZlcmlmeTIoYSwgYik7CgogICAgICB2YXIgcmVzID0gYS5hZGQoYik7CiAgICAgIGlmIChyZXMuY21wKHRoaXMubSkgPj0gMCkgewogICAgICAgIHJlcy5pc3ViKHRoaXMubSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlcy5fZm9yY2VSZWQodGhpcyk7CiAgICB9OwoKICAgIFJlZC5wcm90b3R5cGUuaWFkZCA9IGZ1bmN0aW9uIGlhZGQgKGEsIGIpIHsKICAgICAgdGhpcy5fdmVyaWZ5MihhLCBiKTsKCiAgICAgIHZhciByZXMgPSBhLmlhZGQoYik7CiAgICAgIGlmIChyZXMuY21wKHRoaXMubSkgPj0gMCkgewogICAgICAgIHJlcy5pc3ViKHRoaXMubSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlczsKICAgIH07CgogICAgUmVkLnByb3RvdHlwZS5zdWIgPSBmdW5jdGlvbiBzdWIgKGEsIGIpIHsKICAgICAgdGhpcy5fdmVyaWZ5MihhLCBiKTsKCiAgICAgIHZhciByZXMgPSBhLnN1YihiKTsKICAgICAgaWYgKHJlcy5jbXBuKDApIDwgMCkgewogICAgICAgIHJlcy5pYWRkKHRoaXMubSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlcy5fZm9yY2VSZWQodGhpcyk7CiAgICB9OwoKICAgIFJlZC5wcm90b3R5cGUuaXN1YiA9IGZ1bmN0aW9uIGlzdWIgKGEsIGIpIHsKICAgICAgdGhpcy5fdmVyaWZ5MihhLCBiKTsKCiAgICAgIHZhciByZXMgPSBhLmlzdWIoYik7CiAgICAgIGlmIChyZXMuY21wbigwKSA8IDApIHsKICAgICAgICByZXMuaWFkZCh0aGlzLm0pOwogICAgICB9CiAgICAgIHJldHVybiByZXM7CiAgICB9OwoKICAgIFJlZC5wcm90b3R5cGUuc2hsID0gZnVuY3Rpb24gc2hsIChhLCBudW0pIHsKICAgICAgdGhpcy5fdmVyaWZ5MShhKTsKICAgICAgcmV0dXJuIHRoaXMuaW1vZChhLnVzaGxuKG51bSkpOwogICAgfTsKCiAgICBSZWQucHJvdG90eXBlLmltdWwgPSBmdW5jdGlvbiBpbXVsIChhLCBiKSB7CiAgICAgIHRoaXMuX3ZlcmlmeTIoYSwgYik7CiAgICAgIHJldHVybiB0aGlzLmltb2QoYS5pbXVsKGIpKTsKICAgIH07CgogICAgUmVkLnByb3RvdHlwZS5tdWwgPSBmdW5jdGlvbiBtdWwgKGEsIGIpIHsKICAgICAgdGhpcy5fdmVyaWZ5MihhLCBiKTsKICAgICAgcmV0dXJuIHRoaXMuaW1vZChhLm11bChiKSk7CiAgICB9OwoKICAgIFJlZC5wcm90b3R5cGUuaXNxciA9IGZ1bmN0aW9uIGlzcXIgKGEpIHsKICAgICAgcmV0dXJuIHRoaXMuaW11bChhLCBhLmNsb25lKCkpOwogICAgfTsKCiAgICBSZWQucHJvdG90eXBlLnNxciA9IGZ1bmN0aW9uIHNxciAoYSkgewogICAgICByZXR1cm4gdGhpcy5tdWwoYSwgYSk7CiAgICB9OwoKICAgIFJlZC5wcm90b3R5cGUuc3FydCA9IGZ1bmN0aW9uIHNxcnQgKGEpIHsKICAgICAgaWYgKGEuaXNaZXJvKCkpIHJldHVybiBhLmNsb25lKCk7CgogICAgICB2YXIgbW9kMyA9IHRoaXMubS5hbmRsbigzKTsKICAgICAgYXNzZXJ0KG1vZDMgJSAyID09PSAxKTsKCiAgICAgIC8vIEZhc3QgY2FzZQogICAgICBpZiAobW9kMyA9PT0gMykgewogICAgICAgIHZhciBwb3cgPSB0aGlzLm0uYWRkKG5ldyBCTigxKSkuaXVzaHJuKDIpOwogICAgICAgIHJldHVybiB0aGlzLnBvdyhhLCBwb3cpOwogICAgICB9CgogICAgICAvLyBUb25lbGxpLVNoYW5rcyBhbGdvcml0aG0gKFRvdGFsbHkgdW5vcHRpbWl6ZWQgYW5kIHNsb3cpCiAgICAgIC8vCiAgICAgIC8vIEZpbmQgUSBhbmQgUywgdGhhdCBRICogMiBeIFMgPSAoUCAtIDEpCiAgICAgIHZhciBxID0gdGhpcy5tLnN1Ym4oMSk7CiAgICAgIHZhciBzID0gMDsKICAgICAgd2hpbGUgKCFxLmlzWmVybygpICYmIHEuYW5kbG4oMSkgPT09IDApIHsKICAgICAgICBzKys7CiAgICAgICAgcS5pdXNocm4oMSk7CiAgICAgIH0KICAgICAgYXNzZXJ0KCFxLmlzWmVybygpKTsKCiAgICAgIHZhciBvbmUgPSBuZXcgQk4oMSkudG9SZWQodGhpcyk7CiAgICAgIHZhciBuT25lID0gb25lLnJlZE5lZygpOwoKICAgICAgLy8gRmluZCBxdWFkcmF0aWMgbm9uLXJlc2lkdWUKICAgICAgLy8gTk9URTogTWF4IGlzIHN1Y2ggYmVjYXVzZSBvZiBnZW5lcmFsaXplZCBSaWVtYW5uIGh5cG90aGVzaXMuCiAgICAgIHZhciBscG93ID0gdGhpcy5tLnN1Ym4oMSkuaXVzaHJuKDEpOwogICAgICB2YXIgeiA9IHRoaXMubS5iaXRMZW5ndGgoKTsKICAgICAgeiA9IG5ldyBCTigyICogeiAqIHopLnRvUmVkKHRoaXMpOwoKICAgICAgd2hpbGUgKHRoaXMucG93KHosIGxwb3cpLmNtcChuT25lKSAhPT0gMCkgewogICAgICAgIHoucmVkSUFkZChuT25lKTsKICAgICAgfQoKICAgICAgdmFyIGMgPSB0aGlzLnBvdyh6LCBxKTsKICAgICAgdmFyIHIgPSB0aGlzLnBvdyhhLCBxLmFkZG4oMSkuaXVzaHJuKDEpKTsKICAgICAgdmFyIHQgPSB0aGlzLnBvdyhhLCBxKTsKICAgICAgdmFyIG0gPSBzOwogICAgICB3aGlsZSAodC5jbXAob25lKSAhPT0gMCkgewogICAgICAgIHZhciB0bXAgPSB0OwogICAgICAgIGZvciAodmFyIGkgPSAwOyB0bXAuY21wKG9uZSkgIT09IDA7IGkrKykgewogICAgICAgICAgdG1wID0gdG1wLnJlZFNxcigpOwogICAgICAgIH0KICAgICAgICBhc3NlcnQoaSA8IG0pOwogICAgICAgIHZhciBiID0gdGhpcy5wb3coYywgbmV3IEJOKDEpLml1c2hsbihtIC0gaSAtIDEpKTsKCiAgICAgICAgciA9IHIucmVkTXVsKGIpOwogICAgICAgIGMgPSBiLnJlZFNxcigpOwogICAgICAgIHQgPSB0LnJlZE11bChjKTsKICAgICAgICBtID0gaTsKICAgICAgfQoKICAgICAgcmV0dXJuIHI7CiAgICB9OwoKICAgIFJlZC5wcm90b3R5cGUuaW52bSA9IGZ1bmN0aW9uIGludm0gKGEpIHsKICAgICAgdmFyIGludiA9IGEuX2ludm1wKHRoaXMubSk7CiAgICAgIGlmIChpbnYubmVnYXRpdmUgIT09IDApIHsKICAgICAgICBpbnYubmVnYXRpdmUgPSAwOwogICAgICAgIHJldHVybiB0aGlzLmltb2QoaW52KS5yZWROZWcoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gdGhpcy5pbW9kKGludik7CiAgICAgIH0KICAgIH07CgogICAgUmVkLnByb3RvdHlwZS5wb3cgPSBmdW5jdGlvbiBwb3cgKGEsIG51bSkgewogICAgICBpZiAobnVtLmlzWmVybygpKSByZXR1cm4gbmV3IEJOKDEpLnRvUmVkKHRoaXMpOwogICAgICBpZiAobnVtLmNtcG4oMSkgPT09IDApIHJldHVybiBhLmNsb25lKCk7CgogICAgICB2YXIgd2luZG93U2l6ZSA9IDQ7CiAgICAgIHZhciB3bmQgPSBuZXcgQXJyYXkoMSA8PCB3aW5kb3dTaXplKTsKICAgICAgd25kWzBdID0gbmV3IEJOKDEpLnRvUmVkKHRoaXMpOwogICAgICB3bmRbMV0gPSBhOwogICAgICBmb3IgKHZhciBpID0gMjsgaSA8IHduZC5sZW5ndGg7IGkrKykgewogICAgICAgIHduZFtpXSA9IHRoaXMubXVsKHduZFtpIC0gMV0sIGEpOwogICAgICB9CgogICAgICB2YXIgcmVzID0gd25kWzBdOwogICAgICB2YXIgY3VycmVudCA9IDA7CiAgICAgIHZhciBjdXJyZW50TGVuID0gMDsKICAgICAgdmFyIHN0YXJ0ID0gbnVtLmJpdExlbmd0aCgpICUgMjY7CiAgICAgIGlmIChzdGFydCA9PT0gMCkgewogICAgICAgIHN0YXJ0ID0gMjY7CiAgICAgIH0KCiAgICAgIGZvciAoaSA9IG51bS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgICAgIHZhciB3b3JkID0gbnVtLndvcmRzW2ldOwogICAgICAgIGZvciAodmFyIGogPSBzdGFydCAtIDE7IGogPj0gMDsgai0tKSB7CiAgICAgICAgICB2YXIgYml0ID0gKHdvcmQgPj4gaikgJiAxOwogICAgICAgICAgaWYgKHJlcyAhPT0gd25kWzBdKSB7CiAgICAgICAgICAgIHJlcyA9IHRoaXMuc3FyKHJlcyk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGJpdCA9PT0gMCAmJiBjdXJyZW50ID09PSAwKSB7CiAgICAgICAgICAgIGN1cnJlbnRMZW4gPSAwOwogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0KCiAgICAgICAgICBjdXJyZW50IDw8PSAxOwogICAgICAgICAgY3VycmVudCB8PSBiaXQ7CiAgICAgICAgICBjdXJyZW50TGVuKys7CiAgICAgICAgICBpZiAoY3VycmVudExlbiAhPT0gd2luZG93U2l6ZSAmJiAoaSAhPT0gMCB8fCBqICE9PSAwKSkgY29udGludWU7CgogICAgICAgICAgcmVzID0gdGhpcy5tdWwocmVzLCB3bmRbY3VycmVudF0pOwogICAgICAgICAgY3VycmVudExlbiA9IDA7CiAgICAgICAgICBjdXJyZW50ID0gMDsKICAgICAgICB9CiAgICAgICAgc3RhcnQgPSAyNjsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlczsKICAgIH07CgogICAgUmVkLnByb3RvdHlwZS5jb252ZXJ0VG8gPSBmdW5jdGlvbiBjb252ZXJ0VG8gKG51bSkgewogICAgICB2YXIgciA9IG51bS51bW9kKHRoaXMubSk7CgogICAgICByZXR1cm4gciA9PT0gbnVtID8gci5jbG9uZSgpIDogcjsKICAgIH07CgogICAgUmVkLnByb3RvdHlwZS5jb252ZXJ0RnJvbSA9IGZ1bmN0aW9uIGNvbnZlcnRGcm9tIChudW0pIHsKICAgICAgdmFyIHJlcyA9IG51bS5jbG9uZSgpOwogICAgICByZXMucmVkID0gbnVsbDsKICAgICAgcmV0dXJuIHJlczsKICAgIH07CgogICAgLy8KICAgIC8vIE1vbnRnb21lcnkgbWV0aG9kIGVuZ2luZQogICAgLy8KCiAgICBCTi5tb250ID0gZnVuY3Rpb24gbW9udCAobnVtKSB7CiAgICAgIHJldHVybiBuZXcgTW9udChudW0pOwogICAgfTsKCiAgICBmdW5jdGlvbiBNb250IChtKSB7CiAgICAgIFJlZC5jYWxsKHRoaXMsIG0pOwoKICAgICAgdGhpcy5zaGlmdCA9IHRoaXMubS5iaXRMZW5ndGgoKTsKICAgICAgaWYgKHRoaXMuc2hpZnQgJSAyNiAhPT0gMCkgewogICAgICAgIHRoaXMuc2hpZnQgKz0gMjYgLSAodGhpcy5zaGlmdCAlIDI2KTsKICAgICAgfQoKICAgICAgdGhpcy5yID0gbmV3IEJOKDEpLml1c2hsbih0aGlzLnNoaWZ0KTsKICAgICAgdGhpcy5yMiA9IHRoaXMuaW1vZCh0aGlzLnIuc3FyKCkpOwogICAgICB0aGlzLnJpbnYgPSB0aGlzLnIuX2ludm1wKHRoaXMubSk7CgogICAgICB0aGlzLm1pbnYgPSB0aGlzLnJpbnYubXVsKHRoaXMucikuaXN1Ym4oMSkuZGl2KHRoaXMubSk7CiAgICAgIHRoaXMubWludiA9IHRoaXMubWludi51bW9kKHRoaXMucik7CiAgICAgIHRoaXMubWludiA9IHRoaXMuci5zdWIodGhpcy5taW52KTsKICAgIH0KICAgIGluaGVyaXRzKE1vbnQsIFJlZCk7CgogICAgTW9udC5wcm90b3R5cGUuY29udmVydFRvID0gZnVuY3Rpb24gY29udmVydFRvIChudW0pIHsKICAgICAgcmV0dXJuIHRoaXMuaW1vZChudW0udXNobG4odGhpcy5zaGlmdCkpOwogICAgfTsKCiAgICBNb250LnByb3RvdHlwZS5jb252ZXJ0RnJvbSA9IGZ1bmN0aW9uIGNvbnZlcnRGcm9tIChudW0pIHsKICAgICAgdmFyIHIgPSB0aGlzLmltb2QobnVtLm11bCh0aGlzLnJpbnYpKTsKICAgICAgci5yZWQgPSBudWxsOwogICAgICByZXR1cm4gcjsKICAgIH07CgogICAgTW9udC5wcm90b3R5cGUuaW11bCA9IGZ1bmN0aW9uIGltdWwgKGEsIGIpIHsKICAgICAgaWYgKGEuaXNaZXJvKCkgfHwgYi5pc1plcm8oKSkgewogICAgICAgIGEud29yZHNbMF0gPSAwOwogICAgICAgIGEubGVuZ3RoID0gMTsKICAgICAgICByZXR1cm4gYTsKICAgICAgfQoKICAgICAgdmFyIHQgPSBhLmltdWwoYik7CiAgICAgIHZhciBjID0gdC5tYXNrbih0aGlzLnNoaWZ0KS5tdWwodGhpcy5taW52KS5pbWFza24odGhpcy5zaGlmdCkubXVsKHRoaXMubSk7CiAgICAgIHZhciB1ID0gdC5pc3ViKGMpLml1c2hybih0aGlzLnNoaWZ0KTsKICAgICAgdmFyIHJlcyA9IHU7CgogICAgICBpZiAodS5jbXAodGhpcy5tKSA+PSAwKSB7CiAgICAgICAgcmVzID0gdS5pc3ViKHRoaXMubSk7CiAgICAgIH0gZWxzZSBpZiAodS5jbXBuKDApIDwgMCkgewogICAgICAgIHJlcyA9IHUuaWFkZCh0aGlzLm0pOwogICAgICB9CgogICAgICByZXR1cm4gcmVzLl9mb3JjZVJlZCh0aGlzKTsKICAgIH07CgogICAgTW9udC5wcm90b3R5cGUubXVsID0gZnVuY3Rpb24gbXVsIChhLCBiKSB7CiAgICAgIGlmIChhLmlzWmVybygpIHx8IGIuaXNaZXJvKCkpIHJldHVybiBuZXcgQk4oMCkuX2ZvcmNlUmVkKHRoaXMpOwoKICAgICAgdmFyIHQgPSBhLm11bChiKTsKICAgICAgdmFyIGMgPSB0Lm1hc2tuKHRoaXMuc2hpZnQpLm11bCh0aGlzLm1pbnYpLmltYXNrbih0aGlzLnNoaWZ0KS5tdWwodGhpcy5tKTsKICAgICAgdmFyIHUgPSB0LmlzdWIoYykuaXVzaHJuKHRoaXMuc2hpZnQpOwogICAgICB2YXIgcmVzID0gdTsKICAgICAgaWYgKHUuY21wKHRoaXMubSkgPj0gMCkgewogICAgICAgIHJlcyA9IHUuaXN1Yih0aGlzLm0pOwogICAgICB9IGVsc2UgaWYgKHUuY21wbigwKSA8IDApIHsKICAgICAgICByZXMgPSB1LmlhZGQodGhpcy5tKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlcy5fZm9yY2VSZWQodGhpcyk7CiAgICB9OwoKICAgIE1vbnQucHJvdG90eXBlLmludm0gPSBmdW5jdGlvbiBpbnZtIChhKSB7CiAgICAgIC8vIChBUileLTEgKiBSXjIgPSAoQV4tMSAqIFJeLTEpICogUl4yID0gQV4tMSAqIFIKICAgICAgdmFyIHJlcyA9IHRoaXMuaW1vZChhLl9pbnZtcCh0aGlzLm0pLm11bCh0aGlzLnIyKSk7CiAgICAgIHJldHVybiByZXMuX2ZvcmNlUmVkKHRoaXMpOwogICAgfTsKICB9KShtb2R1bGUsIGNvbW1vbmpzR2xvYmFsKTsKICB9KGJuJDMpKTsKCiAgdmFyIGVsbGlwdGljID0gZWxsaXB0aWMkMTsKICB2YXIgQk4kNCA9IGJuJDMuZXhwb3J0czsKCiAgdmFyIGJyb3dzZXIkMiA9IGZ1bmN0aW9uIGNyZWF0ZUVDREggKGN1cnZlKSB7CiAgICByZXR1cm4gbmV3IEVDREgoY3VydmUpCiAgfTsKCiAgdmFyIGFsaWFzZXMgPSB7CiAgICBzZWNwMjU2azE6IHsKICAgICAgbmFtZTogJ3NlY3AyNTZrMScsCiAgICAgIGJ5dGVMZW5ndGg6IDMyCiAgICB9LAogICAgc2VjcDIyNHIxOiB7CiAgICAgIG5hbWU6ICdwMjI0JywKICAgICAgYnl0ZUxlbmd0aDogMjgKICAgIH0sCiAgICBwcmltZTI1NnYxOiB7CiAgICAgIG5hbWU6ICdwMjU2JywKICAgICAgYnl0ZUxlbmd0aDogMzIKICAgIH0sCiAgICBwcmltZTE5MnYxOiB7CiAgICAgIG5hbWU6ICdwMTkyJywKICAgICAgYnl0ZUxlbmd0aDogMjQKICAgIH0sCiAgICBlZDI1NTE5OiB7CiAgICAgIG5hbWU6ICdlZDI1NTE5JywKICAgICAgYnl0ZUxlbmd0aDogMzIKICAgIH0sCiAgICBzZWNwMzg0cjE6IHsKICAgICAgbmFtZTogJ3AzODQnLAogICAgICBieXRlTGVuZ3RoOiA0OAogICAgfSwKICAgIHNlY3A1MjFyMTogewogICAgICBuYW1lOiAncDUyMScsCiAgICAgIGJ5dGVMZW5ndGg6IDY2CiAgICB9CiAgfTsKCiAgYWxpYXNlcy5wMjI0ID0gYWxpYXNlcy5zZWNwMjI0cjE7CiAgYWxpYXNlcy5wMjU2ID0gYWxpYXNlcy5zZWNwMjU2cjEgPSBhbGlhc2VzLnByaW1lMjU2djE7CiAgYWxpYXNlcy5wMTkyID0gYWxpYXNlcy5zZWNwMTkycjEgPSBhbGlhc2VzLnByaW1lMTkydjE7CiAgYWxpYXNlcy5wMzg0ID0gYWxpYXNlcy5zZWNwMzg0cjE7CiAgYWxpYXNlcy5wNTIxID0gYWxpYXNlcy5zZWNwNTIxcjE7CgogIGZ1bmN0aW9uIEVDREggKGN1cnZlKSB7CiAgICB0aGlzLmN1cnZlVHlwZSA9IGFsaWFzZXNbY3VydmVdOwogICAgaWYgKCF0aGlzLmN1cnZlVHlwZSkgewogICAgICB0aGlzLmN1cnZlVHlwZSA9IHsKICAgICAgICBuYW1lOiBjdXJ2ZQogICAgICB9OwogICAgfQogICAgdGhpcy5jdXJ2ZSA9IG5ldyBlbGxpcHRpYy5lYyh0aGlzLmN1cnZlVHlwZS5uYW1lKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuZXctY2FwCiAgICB0aGlzLmtleXMgPSB2b2lkIDA7CiAgfQoKICBFQ0RILnByb3RvdHlwZS5nZW5lcmF0ZUtleXMgPSBmdW5jdGlvbiAoZW5jLCBmb3JtYXQpIHsKICAgIHRoaXMua2V5cyA9IHRoaXMuY3VydmUuZ2VuS2V5UGFpcigpOwogICAgcmV0dXJuIHRoaXMuZ2V0UHVibGljS2V5KGVuYywgZm9ybWF0KQogIH07CgogIEVDREgucHJvdG90eXBlLmNvbXB1dGVTZWNyZXQgPSBmdW5jdGlvbiAob3RoZXIsIGluZW5jLCBlbmMpIHsKICAgIGluZW5jID0gaW5lbmMgfHwgJ3V0ZjgnOwogICAgaWYgKCFpc0J1ZmZlciQxKG90aGVyKSkgewogICAgICBvdGhlciA9IG5ldyBCdWZmZXIob3RoZXIsIGluZW5jKTsKICAgIH0KICAgIHZhciBvdGhlclB1YiA9IHRoaXMuY3VydmUua2V5RnJvbVB1YmxpYyhvdGhlcikuZ2V0UHVibGljKCk7CiAgICB2YXIgb3V0ID0gb3RoZXJQdWIubXVsKHRoaXMua2V5cy5nZXRQcml2YXRlKCkpLmdldFgoKTsKICAgIHJldHVybiBmb3JtYXRSZXR1cm5WYWx1ZShvdXQsIGVuYywgdGhpcy5jdXJ2ZVR5cGUuYnl0ZUxlbmd0aCkKICB9OwoKICBFQ0RILnByb3RvdHlwZS5nZXRQdWJsaWNLZXkgPSBmdW5jdGlvbiAoZW5jLCBmb3JtYXQpIHsKICAgIHZhciBrZXkgPSB0aGlzLmtleXMuZ2V0UHVibGljKGZvcm1hdCA9PT0gJ2NvbXByZXNzZWQnLCB0cnVlKTsKICAgIGlmIChmb3JtYXQgPT09ICdoeWJyaWQnKSB7CiAgICAgIGlmIChrZXlba2V5Lmxlbmd0aCAtIDFdICUgMikgewogICAgICAgIGtleVswXSA9IDc7CiAgICAgIH0gZWxzZSB7CiAgICAgICAga2V5WzBdID0gNjsKICAgICAgfQogICAgfQogICAgcmV0dXJuIGZvcm1hdFJldHVyblZhbHVlKGtleSwgZW5jKQogIH07CgogIEVDREgucHJvdG90eXBlLmdldFByaXZhdGVLZXkgPSBmdW5jdGlvbiAoZW5jKSB7CiAgICByZXR1cm4gZm9ybWF0UmV0dXJuVmFsdWUodGhpcy5rZXlzLmdldFByaXZhdGUoKSwgZW5jKQogIH07CgogIEVDREgucHJvdG90eXBlLnNldFB1YmxpY0tleSA9IGZ1bmN0aW9uIChwdWIsIGVuYykgewogICAgZW5jID0gZW5jIHx8ICd1dGY4JzsKICAgIGlmICghaXNCdWZmZXIkMShwdWIpKSB7CiAgICAgIHB1YiA9IG5ldyBCdWZmZXIocHViLCBlbmMpOwogICAgfQogICAgdGhpcy5rZXlzLl9pbXBvcnRQdWJsaWMocHViKTsKICAgIHJldHVybiB0aGlzCiAgfTsKCiAgRUNESC5wcm90b3R5cGUuc2V0UHJpdmF0ZUtleSA9IGZ1bmN0aW9uIChwcml2LCBlbmMpIHsKICAgIGVuYyA9IGVuYyB8fCAndXRmOCc7CiAgICBpZiAoIWlzQnVmZmVyJDEocHJpdikpIHsKICAgICAgcHJpdiA9IG5ldyBCdWZmZXIocHJpdiwgZW5jKTsKICAgIH0KCiAgICB2YXIgX3ByaXYgPSBuZXcgQk4kNChwcml2KTsKICAgIF9wcml2ID0gX3ByaXYudG9TdHJpbmcoMTYpOwogICAgdGhpcy5rZXlzID0gdGhpcy5jdXJ2ZS5nZW5LZXlQYWlyKCk7CiAgICB0aGlzLmtleXMuX2ltcG9ydFByaXZhdGUoX3ByaXYpOwogICAgcmV0dXJuIHRoaXMKICB9OwoKICBmdW5jdGlvbiBmb3JtYXRSZXR1cm5WYWx1ZSAoYm4sIGVuYywgbGVuKSB7CiAgICBpZiAoIUFycmF5LmlzQXJyYXkoYm4pKSB7CiAgICAgIGJuID0gYm4udG9BcnJheSgpOwogICAgfQogICAgdmFyIGJ1ZiA9IG5ldyBCdWZmZXIoYm4pOwogICAgaWYgKGxlbiAmJiBidWYubGVuZ3RoIDwgbGVuKSB7CiAgICAgIHZhciB6ZXJvcyA9IG5ldyBCdWZmZXIobGVuIC0gYnVmLmxlbmd0aCk7CiAgICAgIHplcm9zLmZpbGwoMCk7CiAgICAgIGJ1ZiA9IEJ1ZmZlci5jb25jYXQoW3plcm9zLCBidWZdKTsKICAgIH0KICAgIGlmICghZW5jKSB7CiAgICAgIHJldHVybiBidWYKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBidWYudG9TdHJpbmcoZW5jKQogICAgfQogIH0KCiAgdmFyIGNyZWF0ZUVDREggPSBjcnlwdG8kNy5jcmVhdGVFQ0RIOwoKICB2YXIgY3JlYXRlRWNkaCA9IGNyZWF0ZUVDREggfHwgYnJvd3NlciQyOwoKICB2YXIgcHVibGljRW5jcnlwdCQyID0ge307CgogIHZhciBicm93c2VyJDEgPSB7fTsKCiAgdmFyIGFzbjEkMyA9IHt9OwoKICB2YXIgYXNuMSQyID0ge307CgogIHZhciBibiQyID0ge2V4cG9ydHM6IHt9fTsKCiAgKGZ1bmN0aW9uIChtb2R1bGUpIHsKICAoZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewoKICAgIC8vIFV0aWxzCiAgICBmdW5jdGlvbiBhc3NlcnQgKHZhbCwgbXNnKSB7CiAgICAgIGlmICghdmFsKSB0aHJvdyBuZXcgRXJyb3IobXNnIHx8ICdBc3NlcnRpb24gZmFpbGVkJyk7CiAgICB9CgogICAgLy8gQ291bGQgdXNlIGBpbmhlcml0c2AgbW9kdWxlLCBidXQgZG9uJ3Qgd2FudCB0byBtb3ZlIGZyb20gc2luZ2xlIGZpbGUKICAgIC8vIGFyY2hpdGVjdHVyZSB5ZXQuCiAgICBmdW5jdGlvbiBpbmhlcml0cyAoY3Rvciwgc3VwZXJDdG9yKSB7CiAgICAgIGN0b3Iuc3VwZXJfID0gc3VwZXJDdG9yOwogICAgICB2YXIgVGVtcEN0b3IgPSBmdW5jdGlvbiAoKSB7fTsKICAgICAgVGVtcEN0b3IucHJvdG90eXBlID0gc3VwZXJDdG9yLnByb3RvdHlwZTsKICAgICAgY3Rvci5wcm90b3R5cGUgPSBuZXcgVGVtcEN0b3IoKTsKICAgICAgY3Rvci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBjdG9yOwogICAgfQoKICAgIC8vIEJOCgogICAgZnVuY3Rpb24gQk4gKG51bWJlciwgYmFzZSwgZW5kaWFuKSB7CiAgICAgIGlmIChCTi5pc0JOKG51bWJlcikpIHsKICAgICAgICByZXR1cm4gbnVtYmVyOwogICAgICB9CgogICAgICB0aGlzLm5lZ2F0aXZlID0gMDsKICAgICAgdGhpcy53b3JkcyA9IG51bGw7CiAgICAgIHRoaXMubGVuZ3RoID0gMDsKCiAgICAgIC8vIFJlZHVjdGlvbiBjb250ZXh0CiAgICAgIHRoaXMucmVkID0gbnVsbDsKCiAgICAgIGlmIChudW1iZXIgIT09IG51bGwpIHsKICAgICAgICBpZiAoYmFzZSA9PT0gJ2xlJyB8fCBiYXNlID09PSAnYmUnKSB7CiAgICAgICAgICBlbmRpYW4gPSBiYXNlOwogICAgICAgICAgYmFzZSA9IDEwOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5faW5pdChudW1iZXIgfHwgMCwgYmFzZSB8fCAxMCwgZW5kaWFuIHx8ICdiZScpOwogICAgICB9CiAgICB9CiAgICBpZiAodHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpIHsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBCTjsKICAgIH0gZWxzZSB7CiAgICAgIGV4cG9ydHMuQk4gPSBCTjsKICAgIH0KCiAgICBCTi5CTiA9IEJOOwogICAgQk4ud29yZFNpemUgPSAyNjsKCiAgICB2YXIgQnVmZmVyOwogICAgdHJ5IHsKICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiB3aW5kb3cuQnVmZmVyICE9PSAndW5kZWZpbmVkJykgewogICAgICAgIEJ1ZmZlciA9IHdpbmRvdy5CdWZmZXI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgQnVmZmVyID0gcmVxdWlyZSgnYnVmZmVyJykuQnVmZmVyOwogICAgICB9CiAgICB9IGNhdGNoIChlKSB7CiAgICB9CgogICAgQk4uaXNCTiA9IGZ1bmN0aW9uIGlzQk4gKG51bSkgewogICAgICBpZiAobnVtIGluc3RhbmNlb2YgQk4pIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQoKICAgICAgcmV0dXJuIG51bSAhPT0gbnVsbCAmJiB0eXBlb2YgbnVtID09PSAnb2JqZWN0JyAmJgogICAgICAgIG51bS5jb25zdHJ1Y3Rvci53b3JkU2l6ZSA9PT0gQk4ud29yZFNpemUgJiYgQXJyYXkuaXNBcnJheShudW0ud29yZHMpOwogICAgfTsKCiAgICBCTi5tYXggPSBmdW5jdGlvbiBtYXggKGxlZnQsIHJpZ2h0KSB7CiAgICAgIGlmIChsZWZ0LmNtcChyaWdodCkgPiAwKSByZXR1cm4gbGVmdDsKICAgICAgcmV0dXJuIHJpZ2h0OwogICAgfTsKCiAgICBCTi5taW4gPSBmdW5jdGlvbiBtaW4gKGxlZnQsIHJpZ2h0KSB7CiAgICAgIGlmIChsZWZ0LmNtcChyaWdodCkgPCAwKSByZXR1cm4gbGVmdDsKICAgICAgcmV0dXJuIHJpZ2h0OwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuX2luaXQgPSBmdW5jdGlvbiBpbml0IChudW1iZXIsIGJhc2UsIGVuZGlhbikgewogICAgICBpZiAodHlwZW9mIG51bWJlciA9PT0gJ251bWJlcicpIHsKICAgICAgICByZXR1cm4gdGhpcy5faW5pdE51bWJlcihudW1iZXIsIGJhc2UsIGVuZGlhbik7CiAgICAgIH0KCiAgICAgIGlmICh0eXBlb2YgbnVtYmVyID09PSAnb2JqZWN0JykgewogICAgICAgIHJldHVybiB0aGlzLl9pbml0QXJyYXkobnVtYmVyLCBiYXNlLCBlbmRpYW4pOwogICAgICB9CgogICAgICBpZiAoYmFzZSA9PT0gJ2hleCcpIHsKICAgICAgICBiYXNlID0gMTY7CiAgICAgIH0KICAgICAgYXNzZXJ0KGJhc2UgPT09IChiYXNlIHwgMCkgJiYgYmFzZSA+PSAyICYmIGJhc2UgPD0gMzYpOwoKICAgICAgbnVtYmVyID0gbnVtYmVyLnRvU3RyaW5nKCkucmVwbGFjZSgvXHMrL2csICcnKTsKICAgICAgdmFyIHN0YXJ0ID0gMDsKICAgICAgaWYgKG51bWJlclswXSA9PT0gJy0nKSB7CiAgICAgICAgc3RhcnQrKzsKICAgICAgICB0aGlzLm5lZ2F0aXZlID0gMTsKICAgICAgfQoKICAgICAgaWYgKHN0YXJ0IDwgbnVtYmVyLmxlbmd0aCkgewogICAgICAgIGlmIChiYXNlID09PSAxNikgewogICAgICAgICAgdGhpcy5fcGFyc2VIZXgobnVtYmVyLCBzdGFydCwgZW5kaWFuKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5fcGFyc2VCYXNlKG51bWJlciwgYmFzZSwgc3RhcnQpOwogICAgICAgICAgaWYgKGVuZGlhbiA9PT0gJ2xlJykgewogICAgICAgICAgICB0aGlzLl9pbml0QXJyYXkodGhpcy50b0FycmF5KCksIGJhc2UsIGVuZGlhbik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5faW5pdE51bWJlciA9IGZ1bmN0aW9uIF9pbml0TnVtYmVyIChudW1iZXIsIGJhc2UsIGVuZGlhbikgewogICAgICBpZiAobnVtYmVyIDwgMCkgewogICAgICAgIHRoaXMubmVnYXRpdmUgPSAxOwogICAgICAgIG51bWJlciA9IC1udW1iZXI7CiAgICAgIH0KICAgICAgaWYgKG51bWJlciA8IDB4NDAwMDAwMCkgewogICAgICAgIHRoaXMud29yZHMgPSBbIG51bWJlciAmIDB4M2ZmZmZmZiBdOwogICAgICAgIHRoaXMubGVuZ3RoID0gMTsKICAgICAgfSBlbHNlIGlmIChudW1iZXIgPCAweDEwMDAwMDAwMDAwMDAwKSB7CiAgICAgICAgdGhpcy53b3JkcyA9IFsKICAgICAgICAgIG51bWJlciAmIDB4M2ZmZmZmZiwKICAgICAgICAgIChudW1iZXIgLyAweDQwMDAwMDApICYgMHgzZmZmZmZmCiAgICAgICAgXTsKICAgICAgICB0aGlzLmxlbmd0aCA9IDI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYXNzZXJ0KG51bWJlciA8IDB4MjAwMDAwMDAwMDAwMDApOyAvLyAyIF4gNTMgKHVuc2FmZSkKICAgICAgICB0aGlzLndvcmRzID0gWwogICAgICAgICAgbnVtYmVyICYgMHgzZmZmZmZmLAogICAgICAgICAgKG51bWJlciAvIDB4NDAwMDAwMCkgJiAweDNmZmZmZmYsCiAgICAgICAgICAxCiAgICAgICAgXTsKICAgICAgICB0aGlzLmxlbmd0aCA9IDM7CiAgICAgIH0KCiAgICAgIGlmIChlbmRpYW4gIT09ICdsZScpIHJldHVybjsKCiAgICAgIC8vIFJldmVyc2UgdGhlIGJ5dGVzCiAgICAgIHRoaXMuX2luaXRBcnJheSh0aGlzLnRvQXJyYXkoKSwgYmFzZSwgZW5kaWFuKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLl9pbml0QXJyYXkgPSBmdW5jdGlvbiBfaW5pdEFycmF5IChudW1iZXIsIGJhc2UsIGVuZGlhbikgewogICAgICAvLyBQZXJoYXBzIGEgVWludDhBcnJheQogICAgICBhc3NlcnQodHlwZW9mIG51bWJlci5sZW5ndGggPT09ICdudW1iZXInKTsKICAgICAgaWYgKG51bWJlci5sZW5ndGggPD0gMCkgewogICAgICAgIHRoaXMud29yZHMgPSBbIDAgXTsKICAgICAgICB0aGlzLmxlbmd0aCA9IDE7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0KCiAgICAgIHRoaXMubGVuZ3RoID0gTWF0aC5jZWlsKG51bWJlci5sZW5ndGggLyAzKTsKICAgICAgdGhpcy53b3JkcyA9IG5ldyBBcnJheSh0aGlzLmxlbmd0aCk7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykgewogICAgICAgIHRoaXMud29yZHNbaV0gPSAwOwogICAgICB9CgogICAgICB2YXIgaiwgdzsKICAgICAgdmFyIG9mZiA9IDA7CiAgICAgIGlmIChlbmRpYW4gPT09ICdiZScpIHsKICAgICAgICBmb3IgKGkgPSBudW1iZXIubGVuZ3RoIC0gMSwgaiA9IDA7IGkgPj0gMDsgaSAtPSAzKSB7CiAgICAgICAgICB3ID0gbnVtYmVyW2ldIHwgKG51bWJlcltpIC0gMV0gPDwgOCkgfCAobnVtYmVyW2kgLSAyXSA8PCAxNik7CiAgICAgICAgICB0aGlzLndvcmRzW2pdIHw9ICh3IDw8IG9mZikgJiAweDNmZmZmZmY7CiAgICAgICAgICB0aGlzLndvcmRzW2ogKyAxXSA9ICh3ID4+PiAoMjYgLSBvZmYpKSAmIDB4M2ZmZmZmZjsKICAgICAgICAgIG9mZiArPSAyNDsKICAgICAgICAgIGlmIChvZmYgPj0gMjYpIHsKICAgICAgICAgICAgb2ZmIC09IDI2OwogICAgICAgICAgICBqKys7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKGVuZGlhbiA9PT0gJ2xlJykgewogICAgICAgIGZvciAoaSA9IDAsIGogPSAwOyBpIDwgbnVtYmVyLmxlbmd0aDsgaSArPSAzKSB7CiAgICAgICAgICB3ID0gbnVtYmVyW2ldIHwgKG51bWJlcltpICsgMV0gPDwgOCkgfCAobnVtYmVyW2kgKyAyXSA8PCAxNik7CiAgICAgICAgICB0aGlzLndvcmRzW2pdIHw9ICh3IDw8IG9mZikgJiAweDNmZmZmZmY7CiAgICAgICAgICB0aGlzLndvcmRzW2ogKyAxXSA9ICh3ID4+PiAoMjYgLSBvZmYpKSAmIDB4M2ZmZmZmZjsKICAgICAgICAgIG9mZiArPSAyNDsKICAgICAgICAgIGlmIChvZmYgPj0gMjYpIHsKICAgICAgICAgICAgb2ZmIC09IDI2OwogICAgICAgICAgICBqKys7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiB0aGlzLnN0cmlwKCk7CiAgICB9OwoKICAgIGZ1bmN0aW9uIHBhcnNlSGV4NEJpdHMgKHN0cmluZywgaW5kZXgpIHsKICAgICAgdmFyIGMgPSBzdHJpbmcuY2hhckNvZGVBdChpbmRleCk7CiAgICAgIC8vICdBJyAtICdGJwogICAgICBpZiAoYyA+PSA2NSAmJiBjIDw9IDcwKSB7CiAgICAgICAgcmV0dXJuIGMgLSA1NTsKICAgICAgLy8gJ2EnIC0gJ2YnCiAgICAgIH0gZWxzZSBpZiAoYyA+PSA5NyAmJiBjIDw9IDEwMikgewogICAgICAgIHJldHVybiBjIC0gODc7CiAgICAgIC8vICcwJyAtICc5JwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAoYyAtIDQ4KSAmIDB4ZjsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHBhcnNlSGV4Qnl0ZSAoc3RyaW5nLCBsb3dlckJvdW5kLCBpbmRleCkgewogICAgICB2YXIgciA9IHBhcnNlSGV4NEJpdHMoc3RyaW5nLCBpbmRleCk7CiAgICAgIGlmIChpbmRleCAtIDEgPj0gbG93ZXJCb3VuZCkgewogICAgICAgIHIgfD0gcGFyc2VIZXg0Qml0cyhzdHJpbmcsIGluZGV4IC0gMSkgPDwgNDsKICAgICAgfQogICAgICByZXR1cm4gcjsKICAgIH0KCiAgICBCTi5wcm90b3R5cGUuX3BhcnNlSGV4ID0gZnVuY3Rpb24gX3BhcnNlSGV4IChudW1iZXIsIHN0YXJ0LCBlbmRpYW4pIHsKICAgICAgLy8gQ3JlYXRlIHBvc3NpYmx5IGJpZ2dlciBhcnJheSB0byBlbnN1cmUgdGhhdCBpdCBmaXRzIHRoZSBudW1iZXIKICAgICAgdGhpcy5sZW5ndGggPSBNYXRoLmNlaWwoKG51bWJlci5sZW5ndGggLSBzdGFydCkgLyA2KTsKICAgICAgdGhpcy53b3JkcyA9IG5ldyBBcnJheSh0aGlzLmxlbmd0aCk7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykgewogICAgICAgIHRoaXMud29yZHNbaV0gPSAwOwogICAgICB9CgogICAgICAvLyAyNC1iaXRzIGNodW5rcwogICAgICB2YXIgb2ZmID0gMDsKICAgICAgdmFyIGogPSAwOwoKICAgICAgdmFyIHc7CiAgICAgIGlmIChlbmRpYW4gPT09ICdiZScpIHsKICAgICAgICBmb3IgKGkgPSBudW1iZXIubGVuZ3RoIC0gMTsgaSA+PSBzdGFydDsgaSAtPSAyKSB7CiAgICAgICAgICB3ID0gcGFyc2VIZXhCeXRlKG51bWJlciwgc3RhcnQsIGkpIDw8IG9mZjsKICAgICAgICAgIHRoaXMud29yZHNbal0gfD0gdyAmIDB4M2ZmZmZmZjsKICAgICAgICAgIGlmIChvZmYgPj0gMTgpIHsKICAgICAgICAgICAgb2ZmIC09IDE4OwogICAgICAgICAgICBqICs9IDE7CiAgICAgICAgICAgIHRoaXMud29yZHNbal0gfD0gdyA+Pj4gMjY7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBvZmYgKz0gODsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIHBhcnNlTGVuZ3RoID0gbnVtYmVyLmxlbmd0aCAtIHN0YXJ0OwogICAgICAgIGZvciAoaSA9IHBhcnNlTGVuZ3RoICUgMiA9PT0gMCA/IHN0YXJ0ICsgMSA6IHN0YXJ0OyBpIDwgbnVtYmVyLmxlbmd0aDsgaSArPSAyKSB7CiAgICAgICAgICB3ID0gcGFyc2VIZXhCeXRlKG51bWJlciwgc3RhcnQsIGkpIDw8IG9mZjsKICAgICAgICAgIHRoaXMud29yZHNbal0gfD0gdyAmIDB4M2ZmZmZmZjsKICAgICAgICAgIGlmIChvZmYgPj0gMTgpIHsKICAgICAgICAgICAgb2ZmIC09IDE4OwogICAgICAgICAgICBqICs9IDE7CiAgICAgICAgICAgIHRoaXMud29yZHNbal0gfD0gdyA+Pj4gMjY7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBvZmYgKz0gODsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuc3RyaXAoKTsKICAgIH07CgogICAgZnVuY3Rpb24gcGFyc2VCYXNlIChzdHIsIHN0YXJ0LCBlbmQsIG11bCkgewogICAgICB2YXIgciA9IDA7CiAgICAgIHZhciBsZW4gPSBNYXRoLm1pbihzdHIubGVuZ3RoLCBlbmQpOwogICAgICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBsZW47IGkrKykgewogICAgICAgIHZhciBjID0gc3RyLmNoYXJDb2RlQXQoaSkgLSA0ODsKCiAgICAgICAgciAqPSBtdWw7CgogICAgICAgIC8vICdhJwogICAgICAgIGlmIChjID49IDQ5KSB7CiAgICAgICAgICByICs9IGMgLSA0OSArIDB4YTsKCiAgICAgICAgLy8gJ0EnCiAgICAgICAgfSBlbHNlIGlmIChjID49IDE3KSB7CiAgICAgICAgICByICs9IGMgLSAxNyArIDB4YTsKCiAgICAgICAgLy8gJzAnIC0gJzknCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHIgKz0gYzsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHI7CiAgICB9CgogICAgQk4ucHJvdG90eXBlLl9wYXJzZUJhc2UgPSBmdW5jdGlvbiBfcGFyc2VCYXNlIChudW1iZXIsIGJhc2UsIHN0YXJ0KSB7CiAgICAgIC8vIEluaXRpYWxpemUgYXMgemVybwogICAgICB0aGlzLndvcmRzID0gWyAwIF07CiAgICAgIHRoaXMubGVuZ3RoID0gMTsKCiAgICAgIC8vIEZpbmQgbGVuZ3RoIG9mIGxpbWIgaW4gYmFzZQogICAgICBmb3IgKHZhciBsaW1iTGVuID0gMCwgbGltYlBvdyA9IDE7IGxpbWJQb3cgPD0gMHgzZmZmZmZmOyBsaW1iUG93ICo9IGJhc2UpIHsKICAgICAgICBsaW1iTGVuKys7CiAgICAgIH0KICAgICAgbGltYkxlbi0tOwogICAgICBsaW1iUG93ID0gKGxpbWJQb3cgLyBiYXNlKSB8IDA7CgogICAgICB2YXIgdG90YWwgPSBudW1iZXIubGVuZ3RoIC0gc3RhcnQ7CiAgICAgIHZhciBtb2QgPSB0b3RhbCAlIGxpbWJMZW47CiAgICAgIHZhciBlbmQgPSBNYXRoLm1pbih0b3RhbCwgdG90YWwgLSBtb2QpICsgc3RhcnQ7CgogICAgICB2YXIgd29yZCA9IDA7CiAgICAgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgaSArPSBsaW1iTGVuKSB7CiAgICAgICAgd29yZCA9IHBhcnNlQmFzZShudW1iZXIsIGksIGkgKyBsaW1iTGVuLCBiYXNlKTsKCiAgICAgICAgdGhpcy5pbXVsbihsaW1iUG93KTsKICAgICAgICBpZiAodGhpcy53b3Jkc1swXSArIHdvcmQgPCAweDQwMDAwMDApIHsKICAgICAgICAgIHRoaXMud29yZHNbMF0gKz0gd29yZDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5faWFkZG4od29yZCk7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAobW9kICE9PSAwKSB7CiAgICAgICAgdmFyIHBvdyA9IDE7CiAgICAgICAgd29yZCA9IHBhcnNlQmFzZShudW1iZXIsIGksIG51bWJlci5sZW5ndGgsIGJhc2UpOwoKICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbW9kOyBpKyspIHsKICAgICAgICAgIHBvdyAqPSBiYXNlOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5pbXVsbihwb3cpOwogICAgICAgIGlmICh0aGlzLndvcmRzWzBdICsgd29yZCA8IDB4NDAwMDAwMCkgewogICAgICAgICAgdGhpcy53b3Jkc1swXSArPSB3b3JkOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLl9pYWRkbih3b3JkKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuc3RyaXAoKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmNvcHkgPSBmdW5jdGlvbiBjb3B5IChkZXN0KSB7CiAgICAgIGRlc3Qud29yZHMgPSBuZXcgQXJyYXkodGhpcy5sZW5ndGgpOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBkZXN0LndvcmRzW2ldID0gdGhpcy53b3Jkc1tpXTsKICAgICAgfQogICAgICBkZXN0Lmxlbmd0aCA9IHRoaXMubGVuZ3RoOwogICAgICBkZXN0Lm5lZ2F0aXZlID0gdGhpcy5uZWdhdGl2ZTsKICAgICAgZGVzdC5yZWQgPSB0aGlzLnJlZDsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24gY2xvbmUgKCkgewogICAgICB2YXIgciA9IG5ldyBCTihudWxsKTsKICAgICAgdGhpcy5jb3B5KHIpOwogICAgICByZXR1cm4gcjsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLl9leHBhbmQgPSBmdW5jdGlvbiBfZXhwYW5kIChzaXplKSB7CiAgICAgIHdoaWxlICh0aGlzLmxlbmd0aCA8IHNpemUpIHsKICAgICAgICB0aGlzLndvcmRzW3RoaXMubGVuZ3RoKytdID0gMDsKICAgICAgfQogICAgICByZXR1cm4gdGhpczsKICAgIH07CgogICAgLy8gUmVtb3ZlIGxlYWRpbmcgYDBgIGZyb20gYHRoaXNgCiAgICBCTi5wcm90b3R5cGUuc3RyaXAgPSBmdW5jdGlvbiBzdHJpcCAoKSB7CiAgICAgIHdoaWxlICh0aGlzLmxlbmd0aCA+IDEgJiYgdGhpcy53b3Jkc1t0aGlzLmxlbmd0aCAtIDFdID09PSAwKSB7CiAgICAgICAgdGhpcy5sZW5ndGgtLTsKICAgICAgfQogICAgICByZXR1cm4gdGhpcy5fbm9ybVNpZ24oKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLl9ub3JtU2lnbiA9IGZ1bmN0aW9uIF9ub3JtU2lnbiAoKSB7CiAgICAgIC8vIC0wID0gMAogICAgICBpZiAodGhpcy5sZW5ndGggPT09IDEgJiYgdGhpcy53b3Jkc1swXSA9PT0gMCkgewogICAgICAgIHRoaXMubmVnYXRpdmUgPSAwOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuaW5zcGVjdCA9IGZ1bmN0aW9uIGluc3BlY3QgKCkgewogICAgICByZXR1cm4gKHRoaXMucmVkID8gJzxCTi1SOiAnIDogJzxCTjogJykgKyB0aGlzLnRvU3RyaW5nKDE2KSArICc+JzsKICAgIH07CgogICAgLyoKCiAgICB2YXIgemVyb3MgPSBbXTsKICAgIHZhciBncm91cFNpemVzID0gW107CiAgICB2YXIgZ3JvdXBCYXNlcyA9IFtdOwoKICAgIHZhciBzID0gJyc7CiAgICB2YXIgaSA9IC0xOwogICAgd2hpbGUgKCsraSA8IEJOLndvcmRTaXplKSB7CiAgICAgIHplcm9zW2ldID0gczsKICAgICAgcyArPSAnMCc7CiAgICB9CiAgICBncm91cFNpemVzWzBdID0gMDsKICAgIGdyb3VwU2l6ZXNbMV0gPSAwOwogICAgZ3JvdXBCYXNlc1swXSA9IDA7CiAgICBncm91cEJhc2VzWzFdID0gMDsKICAgIHZhciBiYXNlID0gMiAtIDE7CiAgICB3aGlsZSAoKytiYXNlIDwgMzYgKyAxKSB7CiAgICAgIHZhciBncm91cFNpemUgPSAwOwogICAgICB2YXIgZ3JvdXBCYXNlID0gMTsKICAgICAgd2hpbGUgKGdyb3VwQmFzZSA8ICgxIDw8IEJOLndvcmRTaXplKSAvIGJhc2UpIHsKICAgICAgICBncm91cEJhc2UgKj0gYmFzZTsKICAgICAgICBncm91cFNpemUgKz0gMTsKICAgICAgfQogICAgICBncm91cFNpemVzW2Jhc2VdID0gZ3JvdXBTaXplOwogICAgICBncm91cEJhc2VzW2Jhc2VdID0gZ3JvdXBCYXNlOwogICAgfQoKICAgICovCgogICAgdmFyIHplcm9zID0gWwogICAgICAnJywKICAgICAgJzAnLAogICAgICAnMDAnLAogICAgICAnMDAwJywKICAgICAgJzAwMDAnLAogICAgICAnMDAwMDAnLAogICAgICAnMDAwMDAwJywKICAgICAgJzAwMDAwMDAnLAogICAgICAnMDAwMDAwMDAnLAogICAgICAnMDAwMDAwMDAwJywKICAgICAgJzAwMDAwMDAwMDAnLAogICAgICAnMDAwMDAwMDAwMDAnLAogICAgICAnMDAwMDAwMDAwMDAwJywKICAgICAgJzAwMDAwMDAwMDAwMDAnLAogICAgICAnMDAwMDAwMDAwMDAwMDAnLAogICAgICAnMDAwMDAwMDAwMDAwMDAwJywKICAgICAgJzAwMDAwMDAwMDAwMDAwMDAnLAogICAgICAnMDAwMDAwMDAwMDAwMDAwMDAnLAogICAgICAnMDAwMDAwMDAwMDAwMDAwMDAwJywKICAgICAgJzAwMDAwMDAwMDAwMDAwMDAwMDAnLAogICAgICAnMDAwMDAwMDAwMDAwMDAwMDAwMDAnLAogICAgICAnMDAwMDAwMDAwMDAwMDAwMDAwMDAwJywKICAgICAgJzAwMDAwMDAwMDAwMDAwMDAwMDAwMDAnLAogICAgICAnMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAnLAogICAgICAnMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwJywKICAgICAgJzAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAnCiAgICBdOwoKICAgIHZhciBncm91cFNpemVzID0gWwogICAgICAwLCAwLAogICAgICAyNSwgMTYsIDEyLCAxMSwgMTAsIDksIDgsCiAgICAgIDgsIDcsIDcsIDcsIDcsIDYsIDYsCiAgICAgIDYsIDYsIDYsIDYsIDYsIDUsIDUsCiAgICAgIDUsIDUsIDUsIDUsIDUsIDUsIDUsCiAgICAgIDUsIDUsIDUsIDUsIDUsIDUsIDUKICAgIF07CgogICAgdmFyIGdyb3VwQmFzZXMgPSBbCiAgICAgIDAsIDAsCiAgICAgIDMzNTU0NDMyLCA0MzA0NjcyMSwgMTY3NzcyMTYsIDQ4ODI4MTI1LCA2MDQ2NjE3NiwgNDAzNTM2MDcsIDE2Nzc3MjE2LAogICAgICA0MzA0NjcyMSwgMTAwMDAwMDAsIDE5NDg3MTcxLCAzNTgzMTgwOCwgNjI3NDg1MTcsIDc1Mjk1MzYsIDExMzkwNjI1LAogICAgICAxNjc3NzIxNiwgMjQxMzc1NjksIDM0MDEyMjI0LCA0NzA0NTg4MSwgNjQwMDAwMDAsIDQwODQxMDEsIDUxNTM2MzIsCiAgICAgIDY0MzYzNDMsIDc5NjI2MjQsIDk3NjU2MjUsIDExODgxMzc2LCAxNDM0ODkwNywgMTcyMTAzNjgsIDIwNTExMTQ5LAogICAgICAyNDMwMDAwMCwgMjg2MjkxNTEsIDMzNTU0NDMyLCAzOTEzNTM5MywgNDU0MzU0MjQsIDUyNTIxODc1LCA2MDQ2NjE3NgogICAgXTsKCiAgICBCTi5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZyAoYmFzZSwgcGFkZGluZykgewogICAgICBiYXNlID0gYmFzZSB8fCAxMDsKICAgICAgcGFkZGluZyA9IHBhZGRpbmcgfCAwIHx8IDE7CgogICAgICB2YXIgb3V0OwogICAgICBpZiAoYmFzZSA9PT0gMTYgfHwgYmFzZSA9PT0gJ2hleCcpIHsKICAgICAgICBvdXQgPSAnJzsKICAgICAgICB2YXIgb2ZmID0gMDsKICAgICAgICB2YXIgY2FycnkgPSAwOwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgdmFyIHcgPSB0aGlzLndvcmRzW2ldOwogICAgICAgICAgdmFyIHdvcmQgPSAoKCh3IDw8IG9mZikgfCBjYXJyeSkgJiAweGZmZmZmZikudG9TdHJpbmcoMTYpOwogICAgICAgICAgY2FycnkgPSAodyA+Pj4gKDI0IC0gb2ZmKSkgJiAweGZmZmZmZjsKICAgICAgICAgIGlmIChjYXJyeSAhPT0gMCB8fCBpICE9PSB0aGlzLmxlbmd0aCAtIDEpIHsKICAgICAgICAgICAgb3V0ID0gemVyb3NbNiAtIHdvcmQubGVuZ3RoXSArIHdvcmQgKyBvdXQ7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBvdXQgPSB3b3JkICsgb3V0OwogICAgICAgICAgfQogICAgICAgICAgb2ZmICs9IDI7CiAgICAgICAgICBpZiAob2ZmID49IDI2KSB7CiAgICAgICAgICAgIG9mZiAtPSAyNjsKICAgICAgICAgICAgaS0tOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoY2FycnkgIT09IDApIHsKICAgICAgICAgIG91dCA9IGNhcnJ5LnRvU3RyaW5nKDE2KSArIG91dDsKICAgICAgICB9CiAgICAgICAgd2hpbGUgKG91dC5sZW5ndGggJSBwYWRkaW5nICE9PSAwKSB7CiAgICAgICAgICBvdXQgPSAnMCcgKyBvdXQ7CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLm5lZ2F0aXZlICE9PSAwKSB7CiAgICAgICAgICBvdXQgPSAnLScgKyBvdXQ7CiAgICAgICAgfQogICAgICAgIHJldHVybiBvdXQ7CiAgICAgIH0KCiAgICAgIGlmIChiYXNlID09PSAoYmFzZSB8IDApICYmIGJhc2UgPj0gMiAmJiBiYXNlIDw9IDM2KSB7CiAgICAgICAgLy8gdmFyIGdyb3VwU2l6ZSA9IE1hdGguZmxvb3IoQk4ud29yZFNpemUgKiBNYXRoLkxOMiAvIE1hdGgubG9nKGJhc2UpKTsKICAgICAgICB2YXIgZ3JvdXBTaXplID0gZ3JvdXBTaXplc1tiYXNlXTsKICAgICAgICAvLyB2YXIgZ3JvdXBCYXNlID0gTWF0aC5wb3coYmFzZSwgZ3JvdXBTaXplKTsKICAgICAgICB2YXIgZ3JvdXBCYXNlID0gZ3JvdXBCYXNlc1tiYXNlXTsKICAgICAgICBvdXQgPSAnJzsKICAgICAgICB2YXIgYyA9IHRoaXMuY2xvbmUoKTsKICAgICAgICBjLm5lZ2F0aXZlID0gMDsKICAgICAgICB3aGlsZSAoIWMuaXNaZXJvKCkpIHsKICAgICAgICAgIHZhciByID0gYy5tb2RuKGdyb3VwQmFzZSkudG9TdHJpbmcoYmFzZSk7CiAgICAgICAgICBjID0gYy5pZGl2bihncm91cEJhc2UpOwoKICAgICAgICAgIGlmICghYy5pc1plcm8oKSkgewogICAgICAgICAgICBvdXQgPSB6ZXJvc1tncm91cFNpemUgLSByLmxlbmd0aF0gKyByICsgb3V0OwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgb3V0ID0gciArIG91dDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMuaXNaZXJvKCkpIHsKICAgICAgICAgIG91dCA9ICcwJyArIG91dDsKICAgICAgICB9CiAgICAgICAgd2hpbGUgKG91dC5sZW5ndGggJSBwYWRkaW5nICE9PSAwKSB7CiAgICAgICAgICBvdXQgPSAnMCcgKyBvdXQ7CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLm5lZ2F0aXZlICE9PSAwKSB7CiAgICAgICAgICBvdXQgPSAnLScgKyBvdXQ7CiAgICAgICAgfQogICAgICAgIHJldHVybiBvdXQ7CiAgICAgIH0KCiAgICAgIGFzc2VydChmYWxzZSwgJ0Jhc2Ugc2hvdWxkIGJlIGJldHdlZW4gMiBhbmQgMzYnKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLnRvTnVtYmVyID0gZnVuY3Rpb24gdG9OdW1iZXIgKCkgewogICAgICB2YXIgcmV0ID0gdGhpcy53b3Jkc1swXTsKICAgICAgaWYgKHRoaXMubGVuZ3RoID09PSAyKSB7CiAgICAgICAgcmV0ICs9IHRoaXMud29yZHNbMV0gKiAweDQwMDAwMDA7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5sZW5ndGggPT09IDMgJiYgdGhpcy53b3Jkc1syXSA9PT0gMHgwMSkgewogICAgICAgIC8vIE5PVEU6IGF0IHRoaXMgc3RhZ2UgaXQgaXMga25vd24gdGhhdCB0aGUgdG9wIGJpdCBpcyBzZXQKICAgICAgICByZXQgKz0gMHgxMDAwMDAwMDAwMDAwMCArICh0aGlzLndvcmRzWzFdICogMHg0MDAwMDAwKTsKICAgICAgfSBlbHNlIGlmICh0aGlzLmxlbmd0aCA+IDIpIHsKICAgICAgICBhc3NlcnQoZmFsc2UsICdOdW1iZXIgY2FuIG9ubHkgc2FmZWx5IHN0b3JlIHVwIHRvIDUzIGJpdHMnKTsKICAgICAgfQogICAgICByZXR1cm4gKHRoaXMubmVnYXRpdmUgIT09IDApID8gLXJldCA6IHJldDsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTiAoKSB7CiAgICAgIHJldHVybiB0aGlzLnRvU3RyaW5nKDE2KTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLnRvQnVmZmVyID0gZnVuY3Rpb24gdG9CdWZmZXIgKGVuZGlhbiwgbGVuZ3RoKSB7CiAgICAgIGFzc2VydCh0eXBlb2YgQnVmZmVyICE9PSAndW5kZWZpbmVkJyk7CiAgICAgIHJldHVybiB0aGlzLnRvQXJyYXlMaWtlKEJ1ZmZlciwgZW5kaWFuLCBsZW5ndGgpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUudG9BcnJheSA9IGZ1bmN0aW9uIHRvQXJyYXkgKGVuZGlhbiwgbGVuZ3RoKSB7CiAgICAgIHJldHVybiB0aGlzLnRvQXJyYXlMaWtlKEFycmF5LCBlbmRpYW4sIGxlbmd0aCk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS50b0FycmF5TGlrZSA9IGZ1bmN0aW9uIHRvQXJyYXlMaWtlIChBcnJheVR5cGUsIGVuZGlhbiwgbGVuZ3RoKSB7CiAgICAgIHZhciBieXRlTGVuZ3RoID0gdGhpcy5ieXRlTGVuZ3RoKCk7CiAgICAgIHZhciByZXFMZW5ndGggPSBsZW5ndGggfHwgTWF0aC5tYXgoMSwgYnl0ZUxlbmd0aCk7CiAgICAgIGFzc2VydChieXRlTGVuZ3RoIDw9IHJlcUxlbmd0aCwgJ2J5dGUgYXJyYXkgbG9uZ2VyIHRoYW4gZGVzaXJlZCBsZW5ndGgnKTsKICAgICAgYXNzZXJ0KHJlcUxlbmd0aCA+IDAsICdSZXF1ZXN0ZWQgYXJyYXkgbGVuZ3RoIDw9IDAnKTsKCiAgICAgIHRoaXMuc3RyaXAoKTsKICAgICAgdmFyIGxpdHRsZUVuZGlhbiA9IGVuZGlhbiA9PT0gJ2xlJzsKICAgICAgdmFyIHJlcyA9IG5ldyBBcnJheVR5cGUocmVxTGVuZ3RoKTsKCiAgICAgIHZhciBiLCBpOwogICAgICB2YXIgcSA9IHRoaXMuY2xvbmUoKTsKICAgICAgaWYgKCFsaXR0bGVFbmRpYW4pIHsKICAgICAgICAvLyBBc3N1bWUgYmlnLWVuZGlhbgogICAgICAgIGZvciAoaSA9IDA7IGkgPCByZXFMZW5ndGggLSBieXRlTGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHJlc1tpXSA9IDA7CiAgICAgICAgfQoKICAgICAgICBmb3IgKGkgPSAwOyAhcS5pc1plcm8oKTsgaSsrKSB7CiAgICAgICAgICBiID0gcS5hbmRsbigweGZmKTsKICAgICAgICAgIHEuaXVzaHJuKDgpOwoKICAgICAgICAgIHJlc1tyZXFMZW5ndGggLSBpIC0gMV0gPSBiOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBmb3IgKGkgPSAwOyAhcS5pc1plcm8oKTsgaSsrKSB7CiAgICAgICAgICBiID0gcS5hbmRsbigweGZmKTsKICAgICAgICAgIHEuaXVzaHJuKDgpOwoKICAgICAgICAgIHJlc1tpXSA9IGI7CiAgICAgICAgfQoKICAgICAgICBmb3IgKDsgaSA8IHJlcUxlbmd0aDsgaSsrKSB7CiAgICAgICAgICByZXNbaV0gPSAwOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHJlczsKICAgIH07CgogICAgaWYgKE1hdGguY2x6MzIpIHsKICAgICAgQk4ucHJvdG90eXBlLl9jb3VudEJpdHMgPSBmdW5jdGlvbiBfY291bnRCaXRzICh3KSB7CiAgICAgICAgcmV0dXJuIDMyIC0gTWF0aC5jbHozMih3KTsKICAgICAgfTsKICAgIH0gZWxzZSB7CiAgICAgIEJOLnByb3RvdHlwZS5fY291bnRCaXRzID0gZnVuY3Rpb24gX2NvdW50Qml0cyAodykgewogICAgICAgIHZhciB0ID0gdzsKICAgICAgICB2YXIgciA9IDA7CiAgICAgICAgaWYgKHQgPj0gMHgxMDAwKSB7CiAgICAgICAgICByICs9IDEzOwogICAgICAgICAgdCA+Pj49IDEzOwogICAgICAgIH0KICAgICAgICBpZiAodCA+PSAweDQwKSB7CiAgICAgICAgICByICs9IDc7CiAgICAgICAgICB0ID4+Pj0gNzsKICAgICAgICB9CiAgICAgICAgaWYgKHQgPj0gMHg4KSB7CiAgICAgICAgICByICs9IDQ7CiAgICAgICAgICB0ID4+Pj0gNDsKICAgICAgICB9CiAgICAgICAgaWYgKHQgPj0gMHgwMikgewogICAgICAgICAgciArPSAyOwogICAgICAgICAgdCA+Pj49IDI7CiAgICAgICAgfQogICAgICAgIHJldHVybiByICsgdDsKICAgICAgfTsKICAgIH0KCiAgICBCTi5wcm90b3R5cGUuX3plcm9CaXRzID0gZnVuY3Rpb24gX3plcm9CaXRzICh3KSB7CiAgICAgIC8vIFNob3J0LWN1dAogICAgICBpZiAodyA9PT0gMCkgcmV0dXJuIDI2OwoKICAgICAgdmFyIHQgPSB3OwogICAgICB2YXIgciA9IDA7CiAgICAgIGlmICgodCAmIDB4MWZmZikgPT09IDApIHsKICAgICAgICByICs9IDEzOwogICAgICAgIHQgPj4+PSAxMzsKICAgICAgfQogICAgICBpZiAoKHQgJiAweDdmKSA9PT0gMCkgewogICAgICAgIHIgKz0gNzsKICAgICAgICB0ID4+Pj0gNzsKICAgICAgfQogICAgICBpZiAoKHQgJiAweGYpID09PSAwKSB7CiAgICAgICAgciArPSA0OwogICAgICAgIHQgPj4+PSA0OwogICAgICB9CiAgICAgIGlmICgodCAmIDB4MykgPT09IDApIHsKICAgICAgICByICs9IDI7CiAgICAgICAgdCA+Pj49IDI7CiAgICAgIH0KICAgICAgaWYgKCh0ICYgMHgxKSA9PT0gMCkgewogICAgICAgIHIrKzsKICAgICAgfQogICAgICByZXR1cm4gcjsKICAgIH07CgogICAgLy8gUmV0dXJuIG51bWJlciBvZiB1c2VkIGJpdHMgaW4gYSBCTgogICAgQk4ucHJvdG90eXBlLmJpdExlbmd0aCA9IGZ1bmN0aW9uIGJpdExlbmd0aCAoKSB7CiAgICAgIHZhciB3ID0gdGhpcy53b3Jkc1t0aGlzLmxlbmd0aCAtIDFdOwogICAgICB2YXIgaGkgPSB0aGlzLl9jb3VudEJpdHModyk7CiAgICAgIHJldHVybiAodGhpcy5sZW5ndGggLSAxKSAqIDI2ICsgaGk7CiAgICB9OwoKICAgIGZ1bmN0aW9uIHRvQml0QXJyYXkgKG51bSkgewogICAgICB2YXIgdyA9IG5ldyBBcnJheShudW0uYml0TGVuZ3RoKCkpOwoKICAgICAgZm9yICh2YXIgYml0ID0gMDsgYml0IDwgdy5sZW5ndGg7IGJpdCsrKSB7CiAgICAgICAgdmFyIG9mZiA9IChiaXQgLyAyNikgfCAwOwogICAgICAgIHZhciB3Yml0ID0gYml0ICUgMjY7CgogICAgICAgIHdbYml0XSA9IChudW0ud29yZHNbb2ZmXSAmICgxIDw8IHdiaXQpKSA+Pj4gd2JpdDsKICAgICAgfQoKICAgICAgcmV0dXJuIHc7CiAgICB9CgogICAgLy8gTnVtYmVyIG9mIHRyYWlsaW5nIHplcm8gYml0cwogICAgQk4ucHJvdG90eXBlLnplcm9CaXRzID0gZnVuY3Rpb24gemVyb0JpdHMgKCkgewogICAgICBpZiAodGhpcy5pc1plcm8oKSkgcmV0dXJuIDA7CgogICAgICB2YXIgciA9IDA7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBiID0gdGhpcy5femVyb0JpdHModGhpcy53b3Jkc1tpXSk7CiAgICAgICAgciArPSBiOwogICAgICAgIGlmIChiICE9PSAyNikgYnJlYWs7CiAgICAgIH0KICAgICAgcmV0dXJuIHI7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5ieXRlTGVuZ3RoID0gZnVuY3Rpb24gYnl0ZUxlbmd0aCAoKSB7CiAgICAgIHJldHVybiBNYXRoLmNlaWwodGhpcy5iaXRMZW5ndGgoKSAvIDgpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUudG9Ud29zID0gZnVuY3Rpb24gdG9Ud29zICh3aWR0aCkgewogICAgICBpZiAodGhpcy5uZWdhdGl2ZSAhPT0gMCkgewogICAgICAgIHJldHVybiB0aGlzLmFicygpLmlub3RuKHdpZHRoKS5pYWRkbigxKTsKICAgICAgfQogICAgICByZXR1cm4gdGhpcy5jbG9uZSgpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuZnJvbVR3b3MgPSBmdW5jdGlvbiBmcm9tVHdvcyAod2lkdGgpIHsKICAgICAgaWYgKHRoaXMudGVzdG4od2lkdGggLSAxKSkgewogICAgICAgIHJldHVybiB0aGlzLm5vdG4od2lkdGgpLmlhZGRuKDEpLmluZWcoKTsKICAgICAgfQogICAgICByZXR1cm4gdGhpcy5jbG9uZSgpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuaXNOZWcgPSBmdW5jdGlvbiBpc05lZyAoKSB7CiAgICAgIHJldHVybiB0aGlzLm5lZ2F0aXZlICE9PSAwOwogICAgfTsKCiAgICAvLyBSZXR1cm4gbmVnYXRpdmUgY2xvbmUgb2YgYHRoaXNgCiAgICBCTi5wcm90b3R5cGUubmVnID0gZnVuY3Rpb24gbmVnICgpIHsKICAgICAgcmV0dXJuIHRoaXMuY2xvbmUoKS5pbmVnKCk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5pbmVnID0gZnVuY3Rpb24gaW5lZyAoKSB7CiAgICAgIGlmICghdGhpcy5pc1plcm8oKSkgewogICAgICAgIHRoaXMubmVnYXRpdmUgXj0gMTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9OwoKICAgIC8vIE9yIGBudW1gIHdpdGggYHRoaXNgIGluLXBsYWNlCiAgICBCTi5wcm90b3R5cGUuaXVvciA9IGZ1bmN0aW9uIGl1b3IgKG51bSkgewogICAgICB3aGlsZSAodGhpcy5sZW5ndGggPCBudW0ubGVuZ3RoKSB7CiAgICAgICAgdGhpcy53b3Jkc1t0aGlzLmxlbmd0aCsrXSA9IDA7CiAgICAgIH0KCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy53b3Jkc1tpXSA9IHRoaXMud29yZHNbaV0gfCBudW0ud29yZHNbaV07CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLnN0cmlwKCk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5pb3IgPSBmdW5jdGlvbiBpb3IgKG51bSkgewogICAgICBhc3NlcnQoKHRoaXMubmVnYXRpdmUgfCBudW0ubmVnYXRpdmUpID09PSAwKTsKICAgICAgcmV0dXJuIHRoaXMuaXVvcihudW0pOwogICAgfTsKCiAgICAvLyBPciBgbnVtYCB3aXRoIGB0aGlzYAogICAgQk4ucHJvdG90eXBlLm9yID0gZnVuY3Rpb24gb3IgKG51bSkgewogICAgICBpZiAodGhpcy5sZW5ndGggPiBudW0ubGVuZ3RoKSByZXR1cm4gdGhpcy5jbG9uZSgpLmlvcihudW0pOwogICAgICByZXR1cm4gbnVtLmNsb25lKCkuaW9yKHRoaXMpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUudW9yID0gZnVuY3Rpb24gdW9yIChudW0pIHsKICAgICAgaWYgKHRoaXMubGVuZ3RoID4gbnVtLmxlbmd0aCkgcmV0dXJuIHRoaXMuY2xvbmUoKS5pdW9yKG51bSk7CiAgICAgIHJldHVybiBudW0uY2xvbmUoKS5pdW9yKHRoaXMpOwogICAgfTsKCiAgICAvLyBBbmQgYG51bWAgd2l0aCBgdGhpc2AgaW4tcGxhY2UKICAgIEJOLnByb3RvdHlwZS5pdWFuZCA9IGZ1bmN0aW9uIGl1YW5kIChudW0pIHsKICAgICAgLy8gYiA9IG1pbi1sZW5ndGgobnVtLCB0aGlzKQogICAgICB2YXIgYjsKICAgICAgaWYgKHRoaXMubGVuZ3RoID4gbnVtLmxlbmd0aCkgewogICAgICAgIGIgPSBudW07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYiA9IHRoaXM7CiAgICAgIH0KCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYi5sZW5ndGg7IGkrKykgewogICAgICAgIHRoaXMud29yZHNbaV0gPSB0aGlzLndvcmRzW2ldICYgbnVtLndvcmRzW2ldOwogICAgICB9CgogICAgICB0aGlzLmxlbmd0aCA9IGIubGVuZ3RoOwoKICAgICAgcmV0dXJuIHRoaXMuc3RyaXAoKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmlhbmQgPSBmdW5jdGlvbiBpYW5kIChudW0pIHsKICAgICAgYXNzZXJ0KCh0aGlzLm5lZ2F0aXZlIHwgbnVtLm5lZ2F0aXZlKSA9PT0gMCk7CiAgICAgIHJldHVybiB0aGlzLml1YW5kKG51bSk7CiAgICB9OwoKICAgIC8vIEFuZCBgbnVtYCB3aXRoIGB0aGlzYAogICAgQk4ucHJvdG90eXBlLmFuZCA9IGZ1bmN0aW9uIGFuZCAobnVtKSB7CiAgICAgIGlmICh0aGlzLmxlbmd0aCA+IG51bS5sZW5ndGgpIHJldHVybiB0aGlzLmNsb25lKCkuaWFuZChudW0pOwogICAgICByZXR1cm4gbnVtLmNsb25lKCkuaWFuZCh0aGlzKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLnVhbmQgPSBmdW5jdGlvbiB1YW5kIChudW0pIHsKICAgICAgaWYgKHRoaXMubGVuZ3RoID4gbnVtLmxlbmd0aCkgcmV0dXJuIHRoaXMuY2xvbmUoKS5pdWFuZChudW0pOwogICAgICByZXR1cm4gbnVtLmNsb25lKCkuaXVhbmQodGhpcyk7CiAgICB9OwoKICAgIC8vIFhvciBgbnVtYCB3aXRoIGB0aGlzYCBpbi1wbGFjZQogICAgQk4ucHJvdG90eXBlLml1eG9yID0gZnVuY3Rpb24gaXV4b3IgKG51bSkgewogICAgICAvLyBhLmxlbmd0aCA+IGIubGVuZ3RoCiAgICAgIHZhciBhOwogICAgICB2YXIgYjsKICAgICAgaWYgKHRoaXMubGVuZ3RoID4gbnVtLmxlbmd0aCkgewogICAgICAgIGEgPSB0aGlzOwogICAgICAgIGIgPSBudW07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYSA9IG51bTsKICAgICAgICBiID0gdGhpczsKICAgICAgfQoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy53b3Jkc1tpXSA9IGEud29yZHNbaV0gXiBiLndvcmRzW2ldOwogICAgICB9CgogICAgICBpZiAodGhpcyAhPT0gYSkgewogICAgICAgIGZvciAoOyBpIDwgYS5sZW5ndGg7IGkrKykgewogICAgICAgICAgdGhpcy53b3Jkc1tpXSA9IGEud29yZHNbaV07CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLmxlbmd0aCA9IGEubGVuZ3RoOwoKICAgICAgcmV0dXJuIHRoaXMuc3RyaXAoKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLml4b3IgPSBmdW5jdGlvbiBpeG9yIChudW0pIHsKICAgICAgYXNzZXJ0KCh0aGlzLm5lZ2F0aXZlIHwgbnVtLm5lZ2F0aXZlKSA9PT0gMCk7CiAgICAgIHJldHVybiB0aGlzLml1eG9yKG51bSk7CiAgICB9OwoKICAgIC8vIFhvciBgbnVtYCB3aXRoIGB0aGlzYAogICAgQk4ucHJvdG90eXBlLnhvciA9IGZ1bmN0aW9uIHhvciAobnVtKSB7CiAgICAgIGlmICh0aGlzLmxlbmd0aCA+IG51bS5sZW5ndGgpIHJldHVybiB0aGlzLmNsb25lKCkuaXhvcihudW0pOwogICAgICByZXR1cm4gbnVtLmNsb25lKCkuaXhvcih0aGlzKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLnV4b3IgPSBmdW5jdGlvbiB1eG9yIChudW0pIHsKICAgICAgaWYgKHRoaXMubGVuZ3RoID4gbnVtLmxlbmd0aCkgcmV0dXJuIHRoaXMuY2xvbmUoKS5pdXhvcihudW0pOwogICAgICByZXR1cm4gbnVtLmNsb25lKCkuaXV4b3IodGhpcyk7CiAgICB9OwoKICAgIC8vIE5vdCBgYHRoaXNgYCB3aXRoIGBgd2lkdGhgYCBiaXR3aWR0aAogICAgQk4ucHJvdG90eXBlLmlub3RuID0gZnVuY3Rpb24gaW5vdG4gKHdpZHRoKSB7CiAgICAgIGFzc2VydCh0eXBlb2Ygd2lkdGggPT09ICdudW1iZXInICYmIHdpZHRoID49IDApOwoKICAgICAgdmFyIGJ5dGVzTmVlZGVkID0gTWF0aC5jZWlsKHdpZHRoIC8gMjYpIHwgMDsKICAgICAgdmFyIGJpdHNMZWZ0ID0gd2lkdGggJSAyNjsKCiAgICAgIC8vIEV4dGVuZCB0aGUgYnVmZmVyIHdpdGggbGVhZGluZyB6ZXJvZXMKICAgICAgdGhpcy5fZXhwYW5kKGJ5dGVzTmVlZGVkKTsKCiAgICAgIGlmIChiaXRzTGVmdCA+IDApIHsKICAgICAgICBieXRlc05lZWRlZC0tOwogICAgICB9CgogICAgICAvLyBIYW5kbGUgY29tcGxldGUgd29yZHMKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBieXRlc05lZWRlZDsgaSsrKSB7CiAgICAgICAgdGhpcy53b3Jkc1tpXSA9IH50aGlzLndvcmRzW2ldICYgMHgzZmZmZmZmOwogICAgICB9CgogICAgICAvLyBIYW5kbGUgdGhlIHJlc2lkdWUKICAgICAgaWYgKGJpdHNMZWZ0ID4gMCkgewogICAgICAgIHRoaXMud29yZHNbaV0gPSB+dGhpcy53b3Jkc1tpXSAmICgweDNmZmZmZmYgPj4gKDI2IC0gYml0c0xlZnQpKTsKICAgICAgfQoKICAgICAgLy8gQW5kIHJlbW92ZSBsZWFkaW5nIHplcm9lcwogICAgICByZXR1cm4gdGhpcy5zdHJpcCgpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUubm90biA9IGZ1bmN0aW9uIG5vdG4gKHdpZHRoKSB7CiAgICAgIHJldHVybiB0aGlzLmNsb25lKCkuaW5vdG4od2lkdGgpOwogICAgfTsKCiAgICAvLyBTZXQgYGJpdGAgb2YgYHRoaXNgCiAgICBCTi5wcm90b3R5cGUuc2V0biA9IGZ1bmN0aW9uIHNldG4gKGJpdCwgdmFsKSB7CiAgICAgIGFzc2VydCh0eXBlb2YgYml0ID09PSAnbnVtYmVyJyAmJiBiaXQgPj0gMCk7CgogICAgICB2YXIgb2ZmID0gKGJpdCAvIDI2KSB8IDA7CiAgICAgIHZhciB3Yml0ID0gYml0ICUgMjY7CgogICAgICB0aGlzLl9leHBhbmQob2ZmICsgMSk7CgogICAgICBpZiAodmFsKSB7CiAgICAgICAgdGhpcy53b3Jkc1tvZmZdID0gdGhpcy53b3Jkc1tvZmZdIHwgKDEgPDwgd2JpdCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy53b3Jkc1tvZmZdID0gdGhpcy53b3Jkc1tvZmZdICYgfigxIDw8IHdiaXQpOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5zdHJpcCgpOwogICAgfTsKCiAgICAvLyBBZGQgYG51bWAgdG8gYHRoaXNgIGluLXBsYWNlCiAgICBCTi5wcm90b3R5cGUuaWFkZCA9IGZ1bmN0aW9uIGlhZGQgKG51bSkgewogICAgICB2YXIgcjsKCiAgICAgIC8vIG5lZ2F0aXZlICsgcG9zaXRpdmUKICAgICAgaWYgKHRoaXMubmVnYXRpdmUgIT09IDAgJiYgbnVtLm5lZ2F0aXZlID09PSAwKSB7CiAgICAgICAgdGhpcy5uZWdhdGl2ZSA9IDA7CiAgICAgICAgciA9IHRoaXMuaXN1YihudW0pOwogICAgICAgIHRoaXMubmVnYXRpdmUgXj0gMTsKICAgICAgICByZXR1cm4gdGhpcy5fbm9ybVNpZ24oKTsKCiAgICAgIC8vIHBvc2l0aXZlICsgbmVnYXRpdmUKICAgICAgfSBlbHNlIGlmICh0aGlzLm5lZ2F0aXZlID09PSAwICYmIG51bS5uZWdhdGl2ZSAhPT0gMCkgewogICAgICAgIG51bS5uZWdhdGl2ZSA9IDA7CiAgICAgICAgciA9IHRoaXMuaXN1YihudW0pOwogICAgICAgIG51bS5uZWdhdGl2ZSA9IDE7CiAgICAgICAgcmV0dXJuIHIuX25vcm1TaWduKCk7CiAgICAgIH0KCiAgICAgIC8vIGEubGVuZ3RoID4gYi5sZW5ndGgKICAgICAgdmFyIGEsIGI7CiAgICAgIGlmICh0aGlzLmxlbmd0aCA+IG51bS5sZW5ndGgpIHsKICAgICAgICBhID0gdGhpczsKICAgICAgICBiID0gbnVtOwogICAgICB9IGVsc2UgewogICAgICAgIGEgPSBudW07CiAgICAgICAgYiA9IHRoaXM7CiAgICAgIH0KCiAgICAgIHZhciBjYXJyeSA9IDA7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYi5sZW5ndGg7IGkrKykgewogICAgICAgIHIgPSAoYS53b3Jkc1tpXSB8IDApICsgKGIud29yZHNbaV0gfCAwKSArIGNhcnJ5OwogICAgICAgIHRoaXMud29yZHNbaV0gPSByICYgMHgzZmZmZmZmOwogICAgICAgIGNhcnJ5ID0gciA+Pj4gMjY7CiAgICAgIH0KICAgICAgZm9yICg7IGNhcnJ5ICE9PSAwICYmIGkgPCBhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgciA9IChhLndvcmRzW2ldIHwgMCkgKyBjYXJyeTsKICAgICAgICB0aGlzLndvcmRzW2ldID0gciAmIDB4M2ZmZmZmZjsKICAgICAgICBjYXJyeSA9IHIgPj4+IDI2OwogICAgICB9CgogICAgICB0aGlzLmxlbmd0aCA9IGEubGVuZ3RoOwogICAgICBpZiAoY2FycnkgIT09IDApIHsKICAgICAgICB0aGlzLndvcmRzW3RoaXMubGVuZ3RoXSA9IGNhcnJ5OwogICAgICAgIHRoaXMubGVuZ3RoKys7CiAgICAgIC8vIENvcHkgdGhlIHJlc3Qgb2YgdGhlIHdvcmRzCiAgICAgIH0gZWxzZSBpZiAoYSAhPT0gdGhpcykgewogICAgICAgIGZvciAoOyBpIDwgYS5sZW5ndGg7IGkrKykgewogICAgICAgICAgdGhpcy53b3Jkc1tpXSA9IGEud29yZHNbaV07CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gdGhpczsKICAgIH07CgogICAgLy8gQWRkIGBudW1gIHRvIGB0aGlzYAogICAgQk4ucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIGFkZCAobnVtKSB7CiAgICAgIHZhciByZXM7CiAgICAgIGlmIChudW0ubmVnYXRpdmUgIT09IDAgJiYgdGhpcy5uZWdhdGl2ZSA9PT0gMCkgewogICAgICAgIG51bS5uZWdhdGl2ZSA9IDA7CiAgICAgICAgcmVzID0gdGhpcy5zdWIobnVtKTsKICAgICAgICBudW0ubmVnYXRpdmUgXj0gMTsKICAgICAgICByZXR1cm4gcmVzOwogICAgICB9IGVsc2UgaWYgKG51bS5uZWdhdGl2ZSA9PT0gMCAmJiB0aGlzLm5lZ2F0aXZlICE9PSAwKSB7CiAgICAgICAgdGhpcy5uZWdhdGl2ZSA9IDA7CiAgICAgICAgcmVzID0gbnVtLnN1Yih0aGlzKTsKICAgICAgICB0aGlzLm5lZ2F0aXZlID0gMTsKICAgICAgICByZXR1cm4gcmVzOwogICAgICB9CgogICAgICBpZiAodGhpcy5sZW5ndGggPiBudW0ubGVuZ3RoKSByZXR1cm4gdGhpcy5jbG9uZSgpLmlhZGQobnVtKTsKCiAgICAgIHJldHVybiBudW0uY2xvbmUoKS5pYWRkKHRoaXMpOwogICAgfTsKCiAgICAvLyBTdWJ0cmFjdCBgbnVtYCBmcm9tIGB0aGlzYCBpbi1wbGFjZQogICAgQk4ucHJvdG90eXBlLmlzdWIgPSBmdW5jdGlvbiBpc3ViIChudW0pIHsKICAgICAgLy8gdGhpcyAtICgtbnVtKSA9IHRoaXMgKyBudW0KICAgICAgaWYgKG51bS5uZWdhdGl2ZSAhPT0gMCkgewogICAgICAgIG51bS5uZWdhdGl2ZSA9IDA7CiAgICAgICAgdmFyIHIgPSB0aGlzLmlhZGQobnVtKTsKICAgICAgICBudW0ubmVnYXRpdmUgPSAxOwogICAgICAgIHJldHVybiByLl9ub3JtU2lnbigpOwoKICAgICAgLy8gLXRoaXMgLSBudW0gPSAtKHRoaXMgKyBudW0pCiAgICAgIH0gZWxzZSBpZiAodGhpcy5uZWdhdGl2ZSAhPT0gMCkgewogICAgICAgIHRoaXMubmVnYXRpdmUgPSAwOwogICAgICAgIHRoaXMuaWFkZChudW0pOwogICAgICAgIHRoaXMubmVnYXRpdmUgPSAxOwogICAgICAgIHJldHVybiB0aGlzLl9ub3JtU2lnbigpOwogICAgICB9CgogICAgICAvLyBBdCB0aGlzIHBvaW50IGJvdGggbnVtYmVycyBhcmUgcG9zaXRpdmUKICAgICAgdmFyIGNtcCA9IHRoaXMuY21wKG51bSk7CgogICAgICAvLyBPcHRpbWl6YXRpb24gLSB6ZXJvaWZ5CiAgICAgIGlmIChjbXAgPT09IDApIHsKICAgICAgICB0aGlzLm5lZ2F0aXZlID0gMDsKICAgICAgICB0aGlzLmxlbmd0aCA9IDE7CiAgICAgICAgdGhpcy53b3Jkc1swXSA9IDA7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0KCiAgICAgIC8vIGEgPiBiCiAgICAgIHZhciBhLCBiOwogICAgICBpZiAoY21wID4gMCkgewogICAgICAgIGEgPSB0aGlzOwogICAgICAgIGIgPSBudW07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYSA9IG51bTsKICAgICAgICBiID0gdGhpczsKICAgICAgfQoKICAgICAgdmFyIGNhcnJ5ID0gMDsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgciA9IChhLndvcmRzW2ldIHwgMCkgLSAoYi53b3Jkc1tpXSB8IDApICsgY2Fycnk7CiAgICAgICAgY2FycnkgPSByID4+IDI2OwogICAgICAgIHRoaXMud29yZHNbaV0gPSByICYgMHgzZmZmZmZmOwogICAgICB9CiAgICAgIGZvciAoOyBjYXJyeSAhPT0gMCAmJiBpIDwgYS5sZW5ndGg7IGkrKykgewogICAgICAgIHIgPSAoYS53b3Jkc1tpXSB8IDApICsgY2Fycnk7CiAgICAgICAgY2FycnkgPSByID4+IDI2OwogICAgICAgIHRoaXMud29yZHNbaV0gPSByICYgMHgzZmZmZmZmOwogICAgICB9CgogICAgICAvLyBDb3B5IHJlc3Qgb2YgdGhlIHdvcmRzCiAgICAgIGlmIChjYXJyeSA9PT0gMCAmJiBpIDwgYS5sZW5ndGggJiYgYSAhPT0gdGhpcykgewogICAgICAgIGZvciAoOyBpIDwgYS5sZW5ndGg7IGkrKykgewogICAgICAgICAgdGhpcy53b3Jkc1tpXSA9IGEud29yZHNbaV07CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLmxlbmd0aCA9IE1hdGgubWF4KHRoaXMubGVuZ3RoLCBpKTsKCiAgICAgIGlmIChhICE9PSB0aGlzKSB7CiAgICAgICAgdGhpcy5uZWdhdGl2ZSA9IDE7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLnN0cmlwKCk7CiAgICB9OwoKICAgIC8vIFN1YnRyYWN0IGBudW1gIGZyb20gYHRoaXNgCiAgICBCTi5wcm90b3R5cGUuc3ViID0gZnVuY3Rpb24gc3ViIChudW0pIHsKICAgICAgcmV0dXJuIHRoaXMuY2xvbmUoKS5pc3ViKG51bSk7CiAgICB9OwoKICAgIGZ1bmN0aW9uIHNtYWxsTXVsVG8gKHNlbGYsIG51bSwgb3V0KSB7CiAgICAgIG91dC5uZWdhdGl2ZSA9IG51bS5uZWdhdGl2ZSBeIHNlbGYubmVnYXRpdmU7CiAgICAgIHZhciBsZW4gPSAoc2VsZi5sZW5ndGggKyBudW0ubGVuZ3RoKSB8IDA7CiAgICAgIG91dC5sZW5ndGggPSBsZW47CiAgICAgIGxlbiA9IChsZW4gLSAxKSB8IDA7CgogICAgICAvLyBQZWVsIG9uZSBpdGVyYXRpb24gKGNvbXBpbGVyIGNhbid0IGRvIGl0LCBiZWNhdXNlIG9mIGNvZGUgY29tcGxleGl0eSkKICAgICAgdmFyIGEgPSBzZWxmLndvcmRzWzBdIHwgMDsKICAgICAgdmFyIGIgPSBudW0ud29yZHNbMF0gfCAwOwogICAgICB2YXIgciA9IGEgKiBiOwoKICAgICAgdmFyIGxvID0gciAmIDB4M2ZmZmZmZjsKICAgICAgdmFyIGNhcnJ5ID0gKHIgLyAweDQwMDAwMDApIHwgMDsKICAgICAgb3V0LndvcmRzWzBdID0gbG87CgogICAgICBmb3IgKHZhciBrID0gMTsgayA8IGxlbjsgaysrKSB7CiAgICAgICAgLy8gU3VtIGFsbCB3b3JkcyB3aXRoIHRoZSBzYW1lIGBpICsgaiA9IGtgIGFuZCBhY2N1bXVsYXRlIGBuY2FycnlgLAogICAgICAgIC8vIG5vdGUgdGhhdCBuY2FycnkgY291bGQgYmUgPj0gMHgzZmZmZmZmCiAgICAgICAgdmFyIG5jYXJyeSA9IGNhcnJ5ID4+PiAyNjsKICAgICAgICB2YXIgcndvcmQgPSBjYXJyeSAmIDB4M2ZmZmZmZjsKICAgICAgICB2YXIgbWF4SiA9IE1hdGgubWluKGssIG51bS5sZW5ndGggLSAxKTsKICAgICAgICBmb3IgKHZhciBqID0gTWF0aC5tYXgoMCwgayAtIHNlbGYubGVuZ3RoICsgMSk7IGogPD0gbWF4SjsgaisrKSB7CiAgICAgICAgICB2YXIgaSA9IChrIC0gaikgfCAwOwogICAgICAgICAgYSA9IHNlbGYud29yZHNbaV0gfCAwOwogICAgICAgICAgYiA9IG51bS53b3Jkc1tqXSB8IDA7CiAgICAgICAgICByID0gYSAqIGIgKyByd29yZDsKICAgICAgICAgIG5jYXJyeSArPSAociAvIDB4NDAwMDAwMCkgfCAwOwogICAgICAgICAgcndvcmQgPSByICYgMHgzZmZmZmZmOwogICAgICAgIH0KICAgICAgICBvdXQud29yZHNba10gPSByd29yZCB8IDA7CiAgICAgICAgY2FycnkgPSBuY2FycnkgfCAwOwogICAgICB9CiAgICAgIGlmIChjYXJyeSAhPT0gMCkgewogICAgICAgIG91dC53b3Jkc1trXSA9IGNhcnJ5IHwgMDsKICAgICAgfSBlbHNlIHsKICAgICAgICBvdXQubGVuZ3RoLS07CiAgICAgIH0KCiAgICAgIHJldHVybiBvdXQuc3RyaXAoKTsKICAgIH0KCiAgICAvLyBUT0RPKGluZHV0bnkpOiBpdCBtYXkgYmUgcmVhc29uYWJsZSB0byBvbWl0IGl0IGZvciB1c2VycyB3aG8gZG9uJ3QgbmVlZAogICAgLy8gdG8gd29yayB3aXRoIDI1Ni1iaXQgbnVtYmVycywgb3RoZXJ3aXNlIGl0IGdpdmVzIDIwJSBpbXByb3ZlbWVudCBmb3IgMjU2LWJpdAogICAgLy8gbXVsdGlwbGljYXRpb24gKGxpa2UgZWxsaXB0aWMgc2VjcDI1NmsxKS4KICAgIHZhciBjb21iMTBNdWxUbyA9IGZ1bmN0aW9uIGNvbWIxME11bFRvIChzZWxmLCBudW0sIG91dCkgewogICAgICB2YXIgYSA9IHNlbGYud29yZHM7CiAgICAgIHZhciBiID0gbnVtLndvcmRzOwogICAgICB2YXIgbyA9IG91dC53b3JkczsKICAgICAgdmFyIGMgPSAwOwogICAgICB2YXIgbG87CiAgICAgIHZhciBtaWQ7CiAgICAgIHZhciBoaTsKICAgICAgdmFyIGEwID0gYVswXSB8IDA7CiAgICAgIHZhciBhbDAgPSBhMCAmIDB4MWZmZjsKICAgICAgdmFyIGFoMCA9IGEwID4+PiAxMzsKICAgICAgdmFyIGExID0gYVsxXSB8IDA7CiAgICAgIHZhciBhbDEgPSBhMSAmIDB4MWZmZjsKICAgICAgdmFyIGFoMSA9IGExID4+PiAxMzsKICAgICAgdmFyIGEyID0gYVsyXSB8IDA7CiAgICAgIHZhciBhbDIgPSBhMiAmIDB4MWZmZjsKICAgICAgdmFyIGFoMiA9IGEyID4+PiAxMzsKICAgICAgdmFyIGEzID0gYVszXSB8IDA7CiAgICAgIHZhciBhbDMgPSBhMyAmIDB4MWZmZjsKICAgICAgdmFyIGFoMyA9IGEzID4+PiAxMzsKICAgICAgdmFyIGE0ID0gYVs0XSB8IDA7CiAgICAgIHZhciBhbDQgPSBhNCAmIDB4MWZmZjsKICAgICAgdmFyIGFoNCA9IGE0ID4+PiAxMzsKICAgICAgdmFyIGE1ID0gYVs1XSB8IDA7CiAgICAgIHZhciBhbDUgPSBhNSAmIDB4MWZmZjsKICAgICAgdmFyIGFoNSA9IGE1ID4+PiAxMzsKICAgICAgdmFyIGE2ID0gYVs2XSB8IDA7CiAgICAgIHZhciBhbDYgPSBhNiAmIDB4MWZmZjsKICAgICAgdmFyIGFoNiA9IGE2ID4+PiAxMzsKICAgICAgdmFyIGE3ID0gYVs3XSB8IDA7CiAgICAgIHZhciBhbDcgPSBhNyAmIDB4MWZmZjsKICAgICAgdmFyIGFoNyA9IGE3ID4+PiAxMzsKICAgICAgdmFyIGE4ID0gYVs4XSB8IDA7CiAgICAgIHZhciBhbDggPSBhOCAmIDB4MWZmZjsKICAgICAgdmFyIGFoOCA9IGE4ID4+PiAxMzsKICAgICAgdmFyIGE5ID0gYVs5XSB8IDA7CiAgICAgIHZhciBhbDkgPSBhOSAmIDB4MWZmZjsKICAgICAgdmFyIGFoOSA9IGE5ID4+PiAxMzsKICAgICAgdmFyIGIwID0gYlswXSB8IDA7CiAgICAgIHZhciBibDAgPSBiMCAmIDB4MWZmZjsKICAgICAgdmFyIGJoMCA9IGIwID4+PiAxMzsKICAgICAgdmFyIGIxID0gYlsxXSB8IDA7CiAgICAgIHZhciBibDEgPSBiMSAmIDB4MWZmZjsKICAgICAgdmFyIGJoMSA9IGIxID4+PiAxMzsKICAgICAgdmFyIGIyID0gYlsyXSB8IDA7CiAgICAgIHZhciBibDIgPSBiMiAmIDB4MWZmZjsKICAgICAgdmFyIGJoMiA9IGIyID4+PiAxMzsKICAgICAgdmFyIGIzID0gYlszXSB8IDA7CiAgICAgIHZhciBibDMgPSBiMyAmIDB4MWZmZjsKICAgICAgdmFyIGJoMyA9IGIzID4+PiAxMzsKICAgICAgdmFyIGI0ID0gYls0XSB8IDA7CiAgICAgIHZhciBibDQgPSBiNCAmIDB4MWZmZjsKICAgICAgdmFyIGJoNCA9IGI0ID4+PiAxMzsKICAgICAgdmFyIGI1ID0gYls1XSB8IDA7CiAgICAgIHZhciBibDUgPSBiNSAmIDB4MWZmZjsKICAgICAgdmFyIGJoNSA9IGI1ID4+PiAxMzsKICAgICAgdmFyIGI2ID0gYls2XSB8IDA7CiAgICAgIHZhciBibDYgPSBiNiAmIDB4MWZmZjsKICAgICAgdmFyIGJoNiA9IGI2ID4+PiAxMzsKICAgICAgdmFyIGI3ID0gYls3XSB8IDA7CiAgICAgIHZhciBibDcgPSBiNyAmIDB4MWZmZjsKICAgICAgdmFyIGJoNyA9IGI3ID4+PiAxMzsKICAgICAgdmFyIGI4ID0gYls4XSB8IDA7CiAgICAgIHZhciBibDggPSBiOCAmIDB4MWZmZjsKICAgICAgdmFyIGJoOCA9IGI4ID4+PiAxMzsKICAgICAgdmFyIGI5ID0gYls5XSB8IDA7CiAgICAgIHZhciBibDkgPSBiOSAmIDB4MWZmZjsKICAgICAgdmFyIGJoOSA9IGI5ID4+PiAxMzsKCiAgICAgIG91dC5uZWdhdGl2ZSA9IHNlbGYubmVnYXRpdmUgXiBudW0ubmVnYXRpdmU7CiAgICAgIG91dC5sZW5ndGggPSAxOTsKICAgICAgLyogayA9IDAgKi8KICAgICAgbG8gPSBNYXRoLmltdWwoYWwwLCBibDApOwogICAgICBtaWQgPSBNYXRoLmltdWwoYWwwLCBiaDApOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMCwgYmwwKSkgfCAwOwogICAgICBoaSA9IE1hdGguaW11bChhaDAsIGJoMCk7CiAgICAgIHZhciB3MCA9ICgoKGMgKyBsbykgfCAwKSArICgobWlkICYgMHgxZmZmKSA8PCAxMykpIHwgMDsKICAgICAgYyA9ICgoKGhpICsgKG1pZCA+Pj4gMTMpKSB8IDApICsgKHcwID4+PiAyNikpIHwgMDsKICAgICAgdzAgJj0gMHgzZmZmZmZmOwogICAgICAvKiBrID0gMSAqLwogICAgICBsbyA9IE1hdGguaW11bChhbDEsIGJsMCk7CiAgICAgIG1pZCA9IE1hdGguaW11bChhbDEsIGJoMCk7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgxLCBibDApKSB8IDA7CiAgICAgIGhpID0gTWF0aC5pbXVsKGFoMSwgYmgwKTsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwwLCBibDEpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwwLCBiaDEpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgwLCBibDEpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMCwgYmgxKSkgfCAwOwogICAgICB2YXIgdzEgPSAoKChjICsgbG8pIHwgMCkgKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpKSB8IDA7CiAgICAgIGMgPSAoKChoaSArIChtaWQgPj4+IDEzKSkgfCAwKSArICh3MSA+Pj4gMjYpKSB8IDA7CiAgICAgIHcxICY9IDB4M2ZmZmZmZjsKICAgICAgLyogayA9IDIgKi8KICAgICAgbG8gPSBNYXRoLmltdWwoYWwyLCBibDApOwogICAgICBtaWQgPSBNYXRoLmltdWwoYWwyLCBiaDApOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMiwgYmwwKSkgfCAwOwogICAgICBoaSA9IE1hdGguaW11bChhaDIsIGJoMCk7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMSwgYmwxKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMSwgYmgxKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMSwgYmwxKSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDEsIGJoMSkpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwwLCBibDIpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwwLCBiaDIpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgwLCBibDIpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMCwgYmgyKSkgfCAwOwogICAgICB2YXIgdzIgPSAoKChjICsgbG8pIHwgMCkgKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpKSB8IDA7CiAgICAgIGMgPSAoKChoaSArIChtaWQgPj4+IDEzKSkgfCAwKSArICh3MiA+Pj4gMjYpKSB8IDA7CiAgICAgIHcyICY9IDB4M2ZmZmZmZjsKICAgICAgLyogayA9IDMgKi8KICAgICAgbG8gPSBNYXRoLmltdWwoYWwzLCBibDApOwogICAgICBtaWQgPSBNYXRoLmltdWwoYWwzLCBiaDApOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMywgYmwwKSkgfCAwOwogICAgICBoaSA9IE1hdGguaW11bChhaDMsIGJoMCk7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMiwgYmwxKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMiwgYmgxKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMiwgYmwxKSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDIsIGJoMSkpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwxLCBibDIpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwxLCBiaDIpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgxLCBibDIpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMSwgYmgyKSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDAsIGJsMykpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDAsIGJoMykpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDAsIGJsMykpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgwLCBiaDMpKSB8IDA7CiAgICAgIHZhciB3MyA9ICgoKGMgKyBsbykgfCAwKSArICgobWlkICYgMHgxZmZmKSA8PCAxMykpIHwgMDsKICAgICAgYyA9ICgoKGhpICsgKG1pZCA+Pj4gMTMpKSB8IDApICsgKHczID4+PiAyNikpIHwgMDsKICAgICAgdzMgJj0gMHgzZmZmZmZmOwogICAgICAvKiBrID0gNCAqLwogICAgICBsbyA9IE1hdGguaW11bChhbDQsIGJsMCk7CiAgICAgIG1pZCA9IE1hdGguaW11bChhbDQsIGJoMCk7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg0LCBibDApKSB8IDA7CiAgICAgIGhpID0gTWF0aC5pbXVsKGFoNCwgYmgwKTsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwzLCBibDEpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwzLCBiaDEpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgzLCBibDEpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMywgYmgxKSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDIsIGJsMikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDIsIGJoMikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDIsIGJsMikpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgyLCBiaDIpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMSwgYmwzKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMSwgYmgzKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMSwgYmwzKSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDEsIGJoMykpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwwLCBibDQpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwwLCBiaDQpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgwLCBibDQpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMCwgYmg0KSkgfCAwOwogICAgICB2YXIgdzQgPSAoKChjICsgbG8pIHwgMCkgKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpKSB8IDA7CiAgICAgIGMgPSAoKChoaSArIChtaWQgPj4+IDEzKSkgfCAwKSArICh3NCA+Pj4gMjYpKSB8IDA7CiAgICAgIHc0ICY9IDB4M2ZmZmZmZjsKICAgICAgLyogayA9IDUgKi8KICAgICAgbG8gPSBNYXRoLmltdWwoYWw1LCBibDApOwogICAgICBtaWQgPSBNYXRoLmltdWwoYWw1LCBiaDApOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNSwgYmwwKSkgfCAwOwogICAgICBoaSA9IE1hdGguaW11bChhaDUsIGJoMCk7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNCwgYmwxKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNCwgYmgxKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNCwgYmwxKSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDQsIGJoMSkpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwzLCBibDIpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwzLCBiaDIpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgzLCBibDIpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMywgYmgyKSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDIsIGJsMykpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDIsIGJoMykpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDIsIGJsMykpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgyLCBiaDMpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMSwgYmw0KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMSwgYmg0KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMSwgYmw0KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDEsIGJoNCkpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwwLCBibDUpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwwLCBiaDUpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgwLCBibDUpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMCwgYmg1KSkgfCAwOwogICAgICB2YXIgdzUgPSAoKChjICsgbG8pIHwgMCkgKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpKSB8IDA7CiAgICAgIGMgPSAoKChoaSArIChtaWQgPj4+IDEzKSkgfCAwKSArICh3NSA+Pj4gMjYpKSB8IDA7CiAgICAgIHc1ICY9IDB4M2ZmZmZmZjsKICAgICAgLyogayA9IDYgKi8KICAgICAgbG8gPSBNYXRoLmltdWwoYWw2LCBibDApOwogICAgICBtaWQgPSBNYXRoLmltdWwoYWw2LCBiaDApOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNiwgYmwwKSkgfCAwOwogICAgICBoaSA9IE1hdGguaW11bChhaDYsIGJoMCk7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNSwgYmwxKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNSwgYmgxKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNSwgYmwxKSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDUsIGJoMSkpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw0LCBibDIpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw0LCBiaDIpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg0LCBibDIpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNCwgYmgyKSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDMsIGJsMykpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDMsIGJoMykpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDMsIGJsMykpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgzLCBiaDMpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMiwgYmw0KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMiwgYmg0KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMiwgYmw0KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDIsIGJoNCkpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwxLCBibDUpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwxLCBiaDUpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgxLCBibDUpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMSwgYmg1KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDAsIGJsNikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDAsIGJoNikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDAsIGJsNikpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgwLCBiaDYpKSB8IDA7CiAgICAgIHZhciB3NiA9ICgoKGMgKyBsbykgfCAwKSArICgobWlkICYgMHgxZmZmKSA8PCAxMykpIHwgMDsKICAgICAgYyA9ICgoKGhpICsgKG1pZCA+Pj4gMTMpKSB8IDApICsgKHc2ID4+PiAyNikpIHwgMDsKICAgICAgdzYgJj0gMHgzZmZmZmZmOwogICAgICAvKiBrID0gNyAqLwogICAgICBsbyA9IE1hdGguaW11bChhbDcsIGJsMCk7CiAgICAgIG1pZCA9IE1hdGguaW11bChhbDcsIGJoMCk7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg3LCBibDApKSB8IDA7CiAgICAgIGhpID0gTWF0aC5pbXVsKGFoNywgYmgwKTsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw2LCBibDEpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw2LCBiaDEpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg2LCBibDEpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNiwgYmgxKSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDUsIGJsMikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDUsIGJoMikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDUsIGJsMikpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg1LCBiaDIpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNCwgYmwzKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNCwgYmgzKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNCwgYmwzKSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDQsIGJoMykpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwzLCBibDQpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwzLCBiaDQpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgzLCBibDQpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMywgYmg0KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDIsIGJsNSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDIsIGJoNSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDIsIGJsNSkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgyLCBiaDUpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMSwgYmw2KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMSwgYmg2KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMSwgYmw2KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDEsIGJoNikpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwwLCBibDcpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwwLCBiaDcpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgwLCBibDcpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMCwgYmg3KSkgfCAwOwogICAgICB2YXIgdzcgPSAoKChjICsgbG8pIHwgMCkgKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpKSB8IDA7CiAgICAgIGMgPSAoKChoaSArIChtaWQgPj4+IDEzKSkgfCAwKSArICh3NyA+Pj4gMjYpKSB8IDA7CiAgICAgIHc3ICY9IDB4M2ZmZmZmZjsKICAgICAgLyogayA9IDggKi8KICAgICAgbG8gPSBNYXRoLmltdWwoYWw4LCBibDApOwogICAgICBtaWQgPSBNYXRoLmltdWwoYWw4LCBiaDApOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoOCwgYmwwKSkgfCAwOwogICAgICBoaSA9IE1hdGguaW11bChhaDgsIGJoMCk7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNywgYmwxKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNywgYmgxKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNywgYmwxKSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDcsIGJoMSkpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw2LCBibDIpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw2LCBiaDIpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg2LCBibDIpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNiwgYmgyKSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDUsIGJsMykpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDUsIGJoMykpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDUsIGJsMykpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg1LCBiaDMpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNCwgYmw0KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNCwgYmg0KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNCwgYmw0KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDQsIGJoNCkpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwzLCBibDUpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwzLCBiaDUpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgzLCBibDUpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMywgYmg1KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDIsIGJsNikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDIsIGJoNikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDIsIGJsNikpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgyLCBiaDYpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMSwgYmw3KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMSwgYmg3KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMSwgYmw3KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDEsIGJoNykpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwwLCBibDgpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwwLCBiaDgpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgwLCBibDgpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMCwgYmg4KSkgfCAwOwogICAgICB2YXIgdzggPSAoKChjICsgbG8pIHwgMCkgKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpKSB8IDA7CiAgICAgIGMgPSAoKChoaSArIChtaWQgPj4+IDEzKSkgfCAwKSArICh3OCA+Pj4gMjYpKSB8IDA7CiAgICAgIHc4ICY9IDB4M2ZmZmZmZjsKICAgICAgLyogayA9IDkgKi8KICAgICAgbG8gPSBNYXRoLmltdWwoYWw5LCBibDApOwogICAgICBtaWQgPSBNYXRoLmltdWwoYWw5LCBiaDApOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoOSwgYmwwKSkgfCAwOwogICAgICBoaSA9IE1hdGguaW11bChhaDksIGJoMCk7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsOCwgYmwxKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsOCwgYmgxKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoOCwgYmwxKSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDgsIGJoMSkpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw3LCBibDIpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw3LCBiaDIpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg3LCBibDIpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNywgYmgyKSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDYsIGJsMykpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDYsIGJoMykpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDYsIGJsMykpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg2LCBiaDMpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNSwgYmw0KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNSwgYmg0KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNSwgYmw0KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDUsIGJoNCkpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw0LCBibDUpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw0LCBiaDUpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg0LCBibDUpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNCwgYmg1KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDMsIGJsNikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDMsIGJoNikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDMsIGJsNikpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgzLCBiaDYpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMiwgYmw3KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMiwgYmg3KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMiwgYmw3KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDIsIGJoNykpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwxLCBibDgpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwxLCBiaDgpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgxLCBibDgpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMSwgYmg4KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDAsIGJsOSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDAsIGJoOSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDAsIGJsOSkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgwLCBiaDkpKSB8IDA7CiAgICAgIHZhciB3OSA9ICgoKGMgKyBsbykgfCAwKSArICgobWlkICYgMHgxZmZmKSA8PCAxMykpIHwgMDsKICAgICAgYyA9ICgoKGhpICsgKG1pZCA+Pj4gMTMpKSB8IDApICsgKHc5ID4+PiAyNikpIHwgMDsKICAgICAgdzkgJj0gMHgzZmZmZmZmOwogICAgICAvKiBrID0gMTAgKi8KICAgICAgbG8gPSBNYXRoLmltdWwoYWw5LCBibDEpOwogICAgICBtaWQgPSBNYXRoLmltdWwoYWw5LCBiaDEpOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoOSwgYmwxKSkgfCAwOwogICAgICBoaSA9IE1hdGguaW11bChhaDksIGJoMSk7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsOCwgYmwyKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsOCwgYmgyKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoOCwgYmwyKSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDgsIGJoMikpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw3LCBibDMpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw3LCBiaDMpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg3LCBibDMpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNywgYmgzKSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDYsIGJsNCkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDYsIGJoNCkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDYsIGJsNCkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg2LCBiaDQpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNSwgYmw1KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNSwgYmg1KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNSwgYmw1KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDUsIGJoNSkpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw0LCBibDYpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw0LCBiaDYpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg0LCBibDYpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNCwgYmg2KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDMsIGJsNykpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDMsIGJoNykpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDMsIGJsNykpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgzLCBiaDcpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMiwgYmw4KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMiwgYmg4KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMiwgYmw4KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDIsIGJoOCkpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwxLCBibDkpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwxLCBiaDkpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgxLCBibDkpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMSwgYmg5KSkgfCAwOwogICAgICB2YXIgdzEwID0gKCgoYyArIGxvKSB8IDApICsgKChtaWQgJiAweDFmZmYpIDw8IDEzKSkgfCAwOwogICAgICBjID0gKCgoaGkgKyAobWlkID4+PiAxMykpIHwgMCkgKyAodzEwID4+PiAyNikpIHwgMDsKICAgICAgdzEwICY9IDB4M2ZmZmZmZjsKICAgICAgLyogayA9IDExICovCiAgICAgIGxvID0gTWF0aC5pbXVsKGFsOSwgYmwyKTsKICAgICAgbWlkID0gTWF0aC5pbXVsKGFsOSwgYmgyKTsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDksIGJsMikpIHwgMDsKICAgICAgaGkgPSBNYXRoLmltdWwoYWg5LCBiaDIpOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDgsIGJsMykpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDgsIGJoMykpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDgsIGJsMykpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg4LCBiaDMpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNywgYmw0KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNywgYmg0KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNywgYmw0KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDcsIGJoNCkpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw2LCBibDUpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw2LCBiaDUpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg2LCBibDUpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNiwgYmg1KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDUsIGJsNikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDUsIGJoNikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDUsIGJsNikpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg1LCBiaDYpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNCwgYmw3KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNCwgYmg3KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNCwgYmw3KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDQsIGJoNykpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwzLCBibDgpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwzLCBiaDgpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgzLCBibDgpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMywgYmg4KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDIsIGJsOSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDIsIGJoOSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDIsIGJsOSkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgyLCBiaDkpKSB8IDA7CiAgICAgIHZhciB3MTEgPSAoKChjICsgbG8pIHwgMCkgKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpKSB8IDA7CiAgICAgIGMgPSAoKChoaSArIChtaWQgPj4+IDEzKSkgfCAwKSArICh3MTEgPj4+IDI2KSkgfCAwOwogICAgICB3MTEgJj0gMHgzZmZmZmZmOwogICAgICAvKiBrID0gMTIgKi8KICAgICAgbG8gPSBNYXRoLmltdWwoYWw5LCBibDMpOwogICAgICBtaWQgPSBNYXRoLmltdWwoYWw5LCBiaDMpOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoOSwgYmwzKSkgfCAwOwogICAgICBoaSA9IE1hdGguaW11bChhaDksIGJoMyk7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsOCwgYmw0KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsOCwgYmg0KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoOCwgYmw0KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDgsIGJoNCkpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw3LCBibDUpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw3LCBiaDUpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg3LCBibDUpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNywgYmg1KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDYsIGJsNikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDYsIGJoNikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDYsIGJsNikpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg2LCBiaDYpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNSwgYmw3KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNSwgYmg3KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNSwgYmw3KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDUsIGJoNykpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw0LCBibDgpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw0LCBiaDgpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg0LCBibDgpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNCwgYmg4KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDMsIGJsOSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDMsIGJoOSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDMsIGJsOSkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgzLCBiaDkpKSB8IDA7CiAgICAgIHZhciB3MTIgPSAoKChjICsgbG8pIHwgMCkgKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpKSB8IDA7CiAgICAgIGMgPSAoKChoaSArIChtaWQgPj4+IDEzKSkgfCAwKSArICh3MTIgPj4+IDI2KSkgfCAwOwogICAgICB3MTIgJj0gMHgzZmZmZmZmOwogICAgICAvKiBrID0gMTMgKi8KICAgICAgbG8gPSBNYXRoLmltdWwoYWw5LCBibDQpOwogICAgICBtaWQgPSBNYXRoLmltdWwoYWw5LCBiaDQpOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoOSwgYmw0KSkgfCAwOwogICAgICBoaSA9IE1hdGguaW11bChhaDksIGJoNCk7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsOCwgYmw1KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsOCwgYmg1KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoOCwgYmw1KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDgsIGJoNSkpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw3LCBibDYpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw3LCBiaDYpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg3LCBibDYpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNywgYmg2KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDYsIGJsNykpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDYsIGJoNykpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDYsIGJsNykpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg2LCBiaDcpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNSwgYmw4KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNSwgYmg4KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNSwgYmw4KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDUsIGJoOCkpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw0LCBibDkpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw0LCBiaDkpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg0LCBibDkpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNCwgYmg5KSkgfCAwOwogICAgICB2YXIgdzEzID0gKCgoYyArIGxvKSB8IDApICsgKChtaWQgJiAweDFmZmYpIDw8IDEzKSkgfCAwOwogICAgICBjID0gKCgoaGkgKyAobWlkID4+PiAxMykpIHwgMCkgKyAodzEzID4+PiAyNikpIHwgMDsKICAgICAgdzEzICY9IDB4M2ZmZmZmZjsKICAgICAgLyogayA9IDE0ICovCiAgICAgIGxvID0gTWF0aC5pbXVsKGFsOSwgYmw1KTsKICAgICAgbWlkID0gTWF0aC5pbXVsKGFsOSwgYmg1KTsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDksIGJsNSkpIHwgMDsKICAgICAgaGkgPSBNYXRoLmltdWwoYWg5LCBiaDUpOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDgsIGJsNikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDgsIGJoNikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDgsIGJsNikpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg4LCBiaDYpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNywgYmw3KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNywgYmg3KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNywgYmw3KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDcsIGJoNykpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw2LCBibDgpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw2LCBiaDgpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg2LCBibDgpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNiwgYmg4KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDUsIGJsOSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDUsIGJoOSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDUsIGJsOSkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg1LCBiaDkpKSB8IDA7CiAgICAgIHZhciB3MTQgPSAoKChjICsgbG8pIHwgMCkgKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpKSB8IDA7CiAgICAgIGMgPSAoKChoaSArIChtaWQgPj4+IDEzKSkgfCAwKSArICh3MTQgPj4+IDI2KSkgfCAwOwogICAgICB3MTQgJj0gMHgzZmZmZmZmOwogICAgICAvKiBrID0gMTUgKi8KICAgICAgbG8gPSBNYXRoLmltdWwoYWw5LCBibDYpOwogICAgICBtaWQgPSBNYXRoLmltdWwoYWw5LCBiaDYpOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoOSwgYmw2KSkgfCAwOwogICAgICBoaSA9IE1hdGguaW11bChhaDksIGJoNik7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsOCwgYmw3KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsOCwgYmg3KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoOCwgYmw3KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDgsIGJoNykpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw3LCBibDgpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw3LCBiaDgpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg3LCBibDgpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNywgYmg4KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDYsIGJsOSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDYsIGJoOSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDYsIGJsOSkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg2LCBiaDkpKSB8IDA7CiAgICAgIHZhciB3MTUgPSAoKChjICsgbG8pIHwgMCkgKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpKSB8IDA7CiAgICAgIGMgPSAoKChoaSArIChtaWQgPj4+IDEzKSkgfCAwKSArICh3MTUgPj4+IDI2KSkgfCAwOwogICAgICB3MTUgJj0gMHgzZmZmZmZmOwogICAgICAvKiBrID0gMTYgKi8KICAgICAgbG8gPSBNYXRoLmltdWwoYWw5LCBibDcpOwogICAgICBtaWQgPSBNYXRoLmltdWwoYWw5LCBiaDcpOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoOSwgYmw3KSkgfCAwOwogICAgICBoaSA9IE1hdGguaW11bChhaDksIGJoNyk7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsOCwgYmw4KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsOCwgYmg4KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoOCwgYmw4KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDgsIGJoOCkpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw3LCBibDkpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw3LCBiaDkpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg3LCBibDkpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNywgYmg5KSkgfCAwOwogICAgICB2YXIgdzE2ID0gKCgoYyArIGxvKSB8IDApICsgKChtaWQgJiAweDFmZmYpIDw8IDEzKSkgfCAwOwogICAgICBjID0gKCgoaGkgKyAobWlkID4+PiAxMykpIHwgMCkgKyAodzE2ID4+PiAyNikpIHwgMDsKICAgICAgdzE2ICY9IDB4M2ZmZmZmZjsKICAgICAgLyogayA9IDE3ICovCiAgICAgIGxvID0gTWF0aC5pbXVsKGFsOSwgYmw4KTsKICAgICAgbWlkID0gTWF0aC5pbXVsKGFsOSwgYmg4KTsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDksIGJsOCkpIHwgMDsKICAgICAgaGkgPSBNYXRoLmltdWwoYWg5LCBiaDgpOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDgsIGJsOSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDgsIGJoOSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDgsIGJsOSkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg4LCBiaDkpKSB8IDA7CiAgICAgIHZhciB3MTcgPSAoKChjICsgbG8pIHwgMCkgKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpKSB8IDA7CiAgICAgIGMgPSAoKChoaSArIChtaWQgPj4+IDEzKSkgfCAwKSArICh3MTcgPj4+IDI2KSkgfCAwOwogICAgICB3MTcgJj0gMHgzZmZmZmZmOwogICAgICAvKiBrID0gMTggKi8KICAgICAgbG8gPSBNYXRoLmltdWwoYWw5LCBibDkpOwogICAgICBtaWQgPSBNYXRoLmltdWwoYWw5LCBiaDkpOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoOSwgYmw5KSkgfCAwOwogICAgICBoaSA9IE1hdGguaW11bChhaDksIGJoOSk7CiAgICAgIHZhciB3MTggPSAoKChjICsgbG8pIHwgMCkgKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpKSB8IDA7CiAgICAgIGMgPSAoKChoaSArIChtaWQgPj4+IDEzKSkgfCAwKSArICh3MTggPj4+IDI2KSkgfCAwOwogICAgICB3MTggJj0gMHgzZmZmZmZmOwogICAgICBvWzBdID0gdzA7CiAgICAgIG9bMV0gPSB3MTsKICAgICAgb1syXSA9IHcyOwogICAgICBvWzNdID0gdzM7CiAgICAgIG9bNF0gPSB3NDsKICAgICAgb1s1XSA9IHc1OwogICAgICBvWzZdID0gdzY7CiAgICAgIG9bN10gPSB3NzsKICAgICAgb1s4XSA9IHc4OwogICAgICBvWzldID0gdzk7CiAgICAgIG9bMTBdID0gdzEwOwogICAgICBvWzExXSA9IHcxMTsKICAgICAgb1sxMl0gPSB3MTI7CiAgICAgIG9bMTNdID0gdzEzOwogICAgICBvWzE0XSA9IHcxNDsKICAgICAgb1sxNV0gPSB3MTU7CiAgICAgIG9bMTZdID0gdzE2OwogICAgICBvWzE3XSA9IHcxNzsKICAgICAgb1sxOF0gPSB3MTg7CiAgICAgIGlmIChjICE9PSAwKSB7CiAgICAgICAgb1sxOV0gPSBjOwogICAgICAgIG91dC5sZW5ndGgrKzsKICAgICAgfQogICAgICByZXR1cm4gb3V0OwogICAgfTsKCiAgICAvLyBQb2x5ZmlsbCBjb21iCiAgICBpZiAoIU1hdGguaW11bCkgewogICAgICBjb21iMTBNdWxUbyA9IHNtYWxsTXVsVG87CiAgICB9CgogICAgZnVuY3Rpb24gYmlnTXVsVG8gKHNlbGYsIG51bSwgb3V0KSB7CiAgICAgIG91dC5uZWdhdGl2ZSA9IG51bS5uZWdhdGl2ZSBeIHNlbGYubmVnYXRpdmU7CiAgICAgIG91dC5sZW5ndGggPSBzZWxmLmxlbmd0aCArIG51bS5sZW5ndGg7CgogICAgICB2YXIgY2FycnkgPSAwOwogICAgICB2YXIgaG5jYXJyeSA9IDA7CiAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgb3V0Lmxlbmd0aCAtIDE7IGsrKykgewogICAgICAgIC8vIFN1bSBhbGwgd29yZHMgd2l0aCB0aGUgc2FtZSBgaSArIGogPSBrYCBhbmQgYWNjdW11bGF0ZSBgbmNhcnJ5YCwKICAgICAgICAvLyBub3RlIHRoYXQgbmNhcnJ5IGNvdWxkIGJlID49IDB4M2ZmZmZmZgogICAgICAgIHZhciBuY2FycnkgPSBobmNhcnJ5OwogICAgICAgIGhuY2FycnkgPSAwOwogICAgICAgIHZhciByd29yZCA9IGNhcnJ5ICYgMHgzZmZmZmZmOwogICAgICAgIHZhciBtYXhKID0gTWF0aC5taW4oaywgbnVtLmxlbmd0aCAtIDEpOwogICAgICAgIGZvciAodmFyIGogPSBNYXRoLm1heCgwLCBrIC0gc2VsZi5sZW5ndGggKyAxKTsgaiA8PSBtYXhKOyBqKyspIHsKICAgICAgICAgIHZhciBpID0gayAtIGo7CiAgICAgICAgICB2YXIgYSA9IHNlbGYud29yZHNbaV0gfCAwOwogICAgICAgICAgdmFyIGIgPSBudW0ud29yZHNbal0gfCAwOwogICAgICAgICAgdmFyIHIgPSBhICogYjsKCiAgICAgICAgICB2YXIgbG8gPSByICYgMHgzZmZmZmZmOwogICAgICAgICAgbmNhcnJ5ID0gKG5jYXJyeSArICgociAvIDB4NDAwMDAwMCkgfCAwKSkgfCAwOwogICAgICAgICAgbG8gPSAobG8gKyByd29yZCkgfCAwOwogICAgICAgICAgcndvcmQgPSBsbyAmIDB4M2ZmZmZmZjsKICAgICAgICAgIG5jYXJyeSA9IChuY2FycnkgKyAobG8gPj4+IDI2KSkgfCAwOwoKICAgICAgICAgIGhuY2FycnkgKz0gbmNhcnJ5ID4+PiAyNjsKICAgICAgICAgIG5jYXJyeSAmPSAweDNmZmZmZmY7CiAgICAgICAgfQogICAgICAgIG91dC53b3Jkc1trXSA9IHJ3b3JkOwogICAgICAgIGNhcnJ5ID0gbmNhcnJ5OwogICAgICAgIG5jYXJyeSA9IGhuY2Fycnk7CiAgICAgIH0KICAgICAgaWYgKGNhcnJ5ICE9PSAwKSB7CiAgICAgICAgb3V0LndvcmRzW2tdID0gY2Fycnk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgb3V0Lmxlbmd0aC0tOwogICAgICB9CgogICAgICByZXR1cm4gb3V0LnN0cmlwKCk7CiAgICB9CgogICAgZnVuY3Rpb24ganVtYm9NdWxUbyAoc2VsZiwgbnVtLCBvdXQpIHsKICAgICAgdmFyIGZmdG0gPSBuZXcgRkZUTSgpOwogICAgICByZXR1cm4gZmZ0bS5tdWxwKHNlbGYsIG51bSwgb3V0KTsKICAgIH0KCiAgICBCTi5wcm90b3R5cGUubXVsVG8gPSBmdW5jdGlvbiBtdWxUbyAobnVtLCBvdXQpIHsKICAgICAgdmFyIHJlczsKICAgICAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoICsgbnVtLmxlbmd0aDsKICAgICAgaWYgKHRoaXMubGVuZ3RoID09PSAxMCAmJiBudW0ubGVuZ3RoID09PSAxMCkgewogICAgICAgIHJlcyA9IGNvbWIxME11bFRvKHRoaXMsIG51bSwgb3V0KTsKICAgICAgfSBlbHNlIGlmIChsZW4gPCA2MykgewogICAgICAgIHJlcyA9IHNtYWxsTXVsVG8odGhpcywgbnVtLCBvdXQpOwogICAgICB9IGVsc2UgaWYgKGxlbiA8IDEwMjQpIHsKICAgICAgICByZXMgPSBiaWdNdWxUbyh0aGlzLCBudW0sIG91dCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmVzID0ganVtYm9NdWxUbyh0aGlzLCBudW0sIG91dCk7CiAgICAgIH0KCiAgICAgIHJldHVybiByZXM7CiAgICB9OwoKICAgIC8vIENvb2xleS1UdWtleSBhbGdvcml0aG0gZm9yIEZGVAogICAgLy8gc2xpZ2h0bHkgcmV2aXNpdGVkIHRvIHJlbHkgb24gbG9vcGluZyBpbnN0ZWFkIG9mIHJlY3Vyc2lvbgoKICAgIGZ1bmN0aW9uIEZGVE0gKHgsIHkpIHsKICAgICAgdGhpcy54ID0geDsKICAgICAgdGhpcy55ID0geTsKICAgIH0KCiAgICBGRlRNLnByb3RvdHlwZS5tYWtlUkJUID0gZnVuY3Rpb24gbWFrZVJCVCAoTikgewogICAgICB2YXIgdCA9IG5ldyBBcnJheShOKTsKICAgICAgdmFyIGwgPSBCTi5wcm90b3R5cGUuX2NvdW50Qml0cyhOKSAtIDE7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgTjsgaSsrKSB7CiAgICAgICAgdFtpXSA9IHRoaXMucmV2QmluKGksIGwsIE4pOwogICAgICB9CgogICAgICByZXR1cm4gdDsKICAgIH07CgogICAgLy8gUmV0dXJucyBiaW5hcnktcmV2ZXJzZWQgcmVwcmVzZW50YXRpb24gb2YgYHhgCiAgICBGRlRNLnByb3RvdHlwZS5yZXZCaW4gPSBmdW5jdGlvbiByZXZCaW4gKHgsIGwsIE4pIHsKICAgICAgaWYgKHggPT09IDAgfHwgeCA9PT0gTiAtIDEpIHJldHVybiB4OwoKICAgICAgdmFyIHJiID0gMDsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsOyBpKyspIHsKICAgICAgICByYiB8PSAoeCAmIDEpIDw8IChsIC0gaSAtIDEpOwogICAgICAgIHggPj49IDE7CiAgICAgIH0KCiAgICAgIHJldHVybiByYjsKICAgIH07CgogICAgLy8gUGVyZm9ybXMgInR3ZWVkbGluZyIgcGhhc2UsIHRoZXJlZm9yZSAnZW11bGF0aW5nJwogICAgLy8gYmVoYXZpb3VyIG9mIHRoZSByZWN1cnNpdmUgYWxnb3JpdGhtCiAgICBGRlRNLnByb3RvdHlwZS5wZXJtdXRlID0gZnVuY3Rpb24gcGVybXV0ZSAocmJ0LCByd3MsIGl3cywgcnR3cywgaXR3cywgTikgewogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IE47IGkrKykgewogICAgICAgIHJ0d3NbaV0gPSByd3NbcmJ0W2ldXTsKICAgICAgICBpdHdzW2ldID0gaXdzW3JidFtpXV07CiAgICAgIH0KICAgIH07CgogICAgRkZUTS5wcm90b3R5cGUudHJhbnNmb3JtID0gZnVuY3Rpb24gdHJhbnNmb3JtIChyd3MsIGl3cywgcnR3cywgaXR3cywgTiwgcmJ0KSB7CiAgICAgIHRoaXMucGVybXV0ZShyYnQsIHJ3cywgaXdzLCBydHdzLCBpdHdzLCBOKTsKCiAgICAgIGZvciAodmFyIHMgPSAxOyBzIDwgTjsgcyA8PD0gMSkgewogICAgICAgIHZhciBsID0gcyA8PCAxOwoKICAgICAgICB2YXIgcnR3ZGYgPSBNYXRoLmNvcygyICogTWF0aC5QSSAvIGwpOwogICAgICAgIHZhciBpdHdkZiA9IE1hdGguc2luKDIgKiBNYXRoLlBJIC8gbCk7CgogICAgICAgIGZvciAodmFyIHAgPSAwOyBwIDwgTjsgcCArPSBsKSB7CiAgICAgICAgICB2YXIgcnR3ZGZfID0gcnR3ZGY7CiAgICAgICAgICB2YXIgaXR3ZGZfID0gaXR3ZGY7CgogICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzOyBqKyspIHsKICAgICAgICAgICAgdmFyIHJlID0gcnR3c1twICsgal07CiAgICAgICAgICAgIHZhciBpZSA9IGl0d3NbcCArIGpdOwoKICAgICAgICAgICAgdmFyIHJvID0gcnR3c1twICsgaiArIHNdOwogICAgICAgICAgICB2YXIgaW8gPSBpdHdzW3AgKyBqICsgc107CgogICAgICAgICAgICB2YXIgcnggPSBydHdkZl8gKiBybyAtIGl0d2RmXyAqIGlvOwoKICAgICAgICAgICAgaW8gPSBydHdkZl8gKiBpbyArIGl0d2RmXyAqIHJvOwogICAgICAgICAgICBybyA9IHJ4OwoKICAgICAgICAgICAgcnR3c1twICsgal0gPSByZSArIHJvOwogICAgICAgICAgICBpdHdzW3AgKyBqXSA9IGllICsgaW87CgogICAgICAgICAgICBydHdzW3AgKyBqICsgc10gPSByZSAtIHJvOwogICAgICAgICAgICBpdHdzW3AgKyBqICsgc10gPSBpZSAtIGlvOwoKICAgICAgICAgICAgLyoganNoaW50IG1heGRlcHRoIDogZmFsc2UgKi8KICAgICAgICAgICAgaWYgKGogIT09IGwpIHsKICAgICAgICAgICAgICByeCA9IHJ0d2RmICogcnR3ZGZfIC0gaXR3ZGYgKiBpdHdkZl87CgogICAgICAgICAgICAgIGl0d2RmXyA9IHJ0d2RmICogaXR3ZGZfICsgaXR3ZGYgKiBydHdkZl87CiAgICAgICAgICAgICAgcnR3ZGZfID0gcng7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH07CgogICAgRkZUTS5wcm90b3R5cGUuZ3Vlc3NMZW4xM2IgPSBmdW5jdGlvbiBndWVzc0xlbjEzYiAobiwgbSkgewogICAgICB2YXIgTiA9IE1hdGgubWF4KG0sIG4pIHwgMTsKICAgICAgdmFyIG9kZCA9IE4gJiAxOwogICAgICB2YXIgaSA9IDA7CiAgICAgIGZvciAoTiA9IE4gLyAyIHwgMDsgTjsgTiA9IE4gPj4+IDEpIHsKICAgICAgICBpKys7CiAgICAgIH0KCiAgICAgIHJldHVybiAxIDw8IGkgKyAxICsgb2RkOwogICAgfTsKCiAgICBGRlRNLnByb3RvdHlwZS5jb25qdWdhdGUgPSBmdW5jdGlvbiBjb25qdWdhdGUgKHJ3cywgaXdzLCBOKSB7CiAgICAgIGlmIChOIDw9IDEpIHJldHVybjsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgTiAvIDI7IGkrKykgewogICAgICAgIHZhciB0ID0gcndzW2ldOwoKICAgICAgICByd3NbaV0gPSByd3NbTiAtIGkgLSAxXTsKICAgICAgICByd3NbTiAtIGkgLSAxXSA9IHQ7CgogICAgICAgIHQgPSBpd3NbaV07CgogICAgICAgIGl3c1tpXSA9IC1pd3NbTiAtIGkgLSAxXTsKICAgICAgICBpd3NbTiAtIGkgLSAxXSA9IC10OwogICAgICB9CiAgICB9OwoKICAgIEZGVE0ucHJvdG90eXBlLm5vcm1hbGl6ZTEzYiA9IGZ1bmN0aW9uIG5vcm1hbGl6ZTEzYiAod3MsIE4pIHsKICAgICAgdmFyIGNhcnJ5ID0gMDsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBOIC8gMjsgaSsrKSB7CiAgICAgICAgdmFyIHcgPSBNYXRoLnJvdW5kKHdzWzIgKiBpICsgMV0gLyBOKSAqIDB4MjAwMCArCiAgICAgICAgICBNYXRoLnJvdW5kKHdzWzIgKiBpXSAvIE4pICsKICAgICAgICAgIGNhcnJ5OwoKICAgICAgICB3c1tpXSA9IHcgJiAweDNmZmZmZmY7CgogICAgICAgIGlmICh3IDwgMHg0MDAwMDAwKSB7CiAgICAgICAgICBjYXJyeSA9IDA7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNhcnJ5ID0gdyAvIDB4NDAwMDAwMCB8IDA7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gd3M7CiAgICB9OwoKICAgIEZGVE0ucHJvdG90eXBlLmNvbnZlcnQxM2IgPSBmdW5jdGlvbiBjb252ZXJ0MTNiICh3cywgbGVuLCByd3MsIE4pIHsKICAgICAgdmFyIGNhcnJ5ID0gMDsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgewogICAgICAgIGNhcnJ5ID0gY2FycnkgKyAod3NbaV0gfCAwKTsKCiAgICAgICAgcndzWzIgKiBpXSA9IGNhcnJ5ICYgMHgxZmZmOyBjYXJyeSA9IGNhcnJ5ID4+PiAxMzsKICAgICAgICByd3NbMiAqIGkgKyAxXSA9IGNhcnJ5ICYgMHgxZmZmOyBjYXJyeSA9IGNhcnJ5ID4+PiAxMzsKICAgICAgfQoKICAgICAgLy8gUGFkIHdpdGggemVyb2VzCiAgICAgIGZvciAoaSA9IDIgKiBsZW47IGkgPCBOOyArK2kpIHsKICAgICAgICByd3NbaV0gPSAwOwogICAgICB9CgogICAgICBhc3NlcnQoY2FycnkgPT09IDApOwogICAgICBhc3NlcnQoKGNhcnJ5ICYgfjB4MWZmZikgPT09IDApOwogICAgfTsKCiAgICBGRlRNLnByb3RvdHlwZS5zdHViID0gZnVuY3Rpb24gc3R1YiAoTikgewogICAgICB2YXIgcGggPSBuZXcgQXJyYXkoTik7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgTjsgaSsrKSB7CiAgICAgICAgcGhbaV0gPSAwOwogICAgICB9CgogICAgICByZXR1cm4gcGg7CiAgICB9OwoKICAgIEZGVE0ucHJvdG90eXBlLm11bHAgPSBmdW5jdGlvbiBtdWxwICh4LCB5LCBvdXQpIHsKICAgICAgdmFyIE4gPSAyICogdGhpcy5ndWVzc0xlbjEzYih4Lmxlbmd0aCwgeS5sZW5ndGgpOwoKICAgICAgdmFyIHJidCA9IHRoaXMubWFrZVJCVChOKTsKCiAgICAgIHZhciBfID0gdGhpcy5zdHViKE4pOwoKICAgICAgdmFyIHJ3cyA9IG5ldyBBcnJheShOKTsKICAgICAgdmFyIHJ3c3QgPSBuZXcgQXJyYXkoTik7CiAgICAgIHZhciBpd3N0ID0gbmV3IEFycmF5KE4pOwoKICAgICAgdmFyIG5yd3MgPSBuZXcgQXJyYXkoTik7CiAgICAgIHZhciBucndzdCA9IG5ldyBBcnJheShOKTsKICAgICAgdmFyIG5pd3N0ID0gbmV3IEFycmF5KE4pOwoKICAgICAgdmFyIHJtd3MgPSBvdXQud29yZHM7CiAgICAgIHJtd3MubGVuZ3RoID0gTjsKCiAgICAgIHRoaXMuY29udmVydDEzYih4LndvcmRzLCB4Lmxlbmd0aCwgcndzLCBOKTsKICAgICAgdGhpcy5jb252ZXJ0MTNiKHkud29yZHMsIHkubGVuZ3RoLCBucndzLCBOKTsKCiAgICAgIHRoaXMudHJhbnNmb3JtKHJ3cywgXywgcndzdCwgaXdzdCwgTiwgcmJ0KTsKICAgICAgdGhpcy50cmFuc2Zvcm0obnJ3cywgXywgbnJ3c3QsIG5pd3N0LCBOLCByYnQpOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBOOyBpKyspIHsKICAgICAgICB2YXIgcnggPSByd3N0W2ldICogbnJ3c3RbaV0gLSBpd3N0W2ldICogbml3c3RbaV07CiAgICAgICAgaXdzdFtpXSA9IHJ3c3RbaV0gKiBuaXdzdFtpXSArIGl3c3RbaV0gKiBucndzdFtpXTsKICAgICAgICByd3N0W2ldID0gcng7CiAgICAgIH0KCiAgICAgIHRoaXMuY29uanVnYXRlKHJ3c3QsIGl3c3QsIE4pOwogICAgICB0aGlzLnRyYW5zZm9ybShyd3N0LCBpd3N0LCBybXdzLCBfLCBOLCByYnQpOwogICAgICB0aGlzLmNvbmp1Z2F0ZShybXdzLCBfLCBOKTsKICAgICAgdGhpcy5ub3JtYWxpemUxM2Iocm13cywgTik7CgogICAgICBvdXQubmVnYXRpdmUgPSB4Lm5lZ2F0aXZlIF4geS5uZWdhdGl2ZTsKICAgICAgb3V0Lmxlbmd0aCA9IHgubGVuZ3RoICsgeS5sZW5ndGg7CiAgICAgIHJldHVybiBvdXQuc3RyaXAoKTsKICAgIH07CgogICAgLy8gTXVsdGlwbHkgYHRoaXNgIGJ5IGBudW1gCiAgICBCTi5wcm90b3R5cGUubXVsID0gZnVuY3Rpb24gbXVsIChudW0pIHsKICAgICAgdmFyIG91dCA9IG5ldyBCTihudWxsKTsKICAgICAgb3V0LndvcmRzID0gbmV3IEFycmF5KHRoaXMubGVuZ3RoICsgbnVtLmxlbmd0aCk7CiAgICAgIHJldHVybiB0aGlzLm11bFRvKG51bSwgb3V0KTsKICAgIH07CgogICAgLy8gTXVsdGlwbHkgZW1wbG95aW5nIEZGVAogICAgQk4ucHJvdG90eXBlLm11bGYgPSBmdW5jdGlvbiBtdWxmIChudW0pIHsKICAgICAgdmFyIG91dCA9IG5ldyBCTihudWxsKTsKICAgICAgb3V0LndvcmRzID0gbmV3IEFycmF5KHRoaXMubGVuZ3RoICsgbnVtLmxlbmd0aCk7CiAgICAgIHJldHVybiBqdW1ib011bFRvKHRoaXMsIG51bSwgb3V0KTsKICAgIH07CgogICAgLy8gSW4tcGxhY2UgTXVsdGlwbGljYXRpb24KICAgIEJOLnByb3RvdHlwZS5pbXVsID0gZnVuY3Rpb24gaW11bCAobnVtKSB7CiAgICAgIHJldHVybiB0aGlzLmNsb25lKCkubXVsVG8obnVtLCB0aGlzKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmltdWxuID0gZnVuY3Rpb24gaW11bG4gKG51bSkgewogICAgICBhc3NlcnQodHlwZW9mIG51bSA9PT0gJ251bWJlcicpOwogICAgICBhc3NlcnQobnVtIDwgMHg0MDAwMDAwKTsKCiAgICAgIC8vIENhcnJ5CiAgICAgIHZhciBjYXJyeSA9IDA7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciB3ID0gKHRoaXMud29yZHNbaV0gfCAwKSAqIG51bTsKICAgICAgICB2YXIgbG8gPSAodyAmIDB4M2ZmZmZmZikgKyAoY2FycnkgJiAweDNmZmZmZmYpOwogICAgICAgIGNhcnJ5ID4+PSAyNjsKICAgICAgICBjYXJyeSArPSAodyAvIDB4NDAwMDAwMCkgfCAwOwogICAgICAgIC8vIE5PVEU6IGxvIGlzIDI3Yml0IG1heGltdW0KICAgICAgICBjYXJyeSArPSBsbyA+Pj4gMjY7CiAgICAgICAgdGhpcy53b3Jkc1tpXSA9IGxvICYgMHgzZmZmZmZmOwogICAgICB9CgogICAgICBpZiAoY2FycnkgIT09IDApIHsKICAgICAgICB0aGlzLndvcmRzW2ldID0gY2Fycnk7CiAgICAgICAgdGhpcy5sZW5ndGgrKzsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5tdWxuID0gZnVuY3Rpb24gbXVsbiAobnVtKSB7CiAgICAgIHJldHVybiB0aGlzLmNsb25lKCkuaW11bG4obnVtKTsKICAgIH07CgogICAgLy8gYHRoaXNgICogYHRoaXNgCiAgICBCTi5wcm90b3R5cGUuc3FyID0gZnVuY3Rpb24gc3FyICgpIHsKICAgICAgcmV0dXJuIHRoaXMubXVsKHRoaXMpOwogICAgfTsKCiAgICAvLyBgdGhpc2AgKiBgdGhpc2AgaW4tcGxhY2UKICAgIEJOLnByb3RvdHlwZS5pc3FyID0gZnVuY3Rpb24gaXNxciAoKSB7CiAgICAgIHJldHVybiB0aGlzLmltdWwodGhpcy5jbG9uZSgpKTsKICAgIH07CgogICAgLy8gTWF0aC5wb3coYHRoaXNgLCBgbnVtYCkKICAgIEJOLnByb3RvdHlwZS5wb3cgPSBmdW5jdGlvbiBwb3cgKG51bSkgewogICAgICB2YXIgdyA9IHRvQml0QXJyYXkobnVtKTsKICAgICAgaWYgKHcubGVuZ3RoID09PSAwKSByZXR1cm4gbmV3IEJOKDEpOwoKICAgICAgLy8gU2tpcCBsZWFkaW5nIHplcm9lcwogICAgICB2YXIgcmVzID0gdGhpczsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3Lmxlbmd0aDsgaSsrLCByZXMgPSByZXMuc3FyKCkpIHsKICAgICAgICBpZiAod1tpXSAhPT0gMCkgYnJlYWs7CiAgICAgIH0KCiAgICAgIGlmICgrK2kgPCB3Lmxlbmd0aCkgewogICAgICAgIGZvciAodmFyIHEgPSByZXMuc3FyKCk7IGkgPCB3Lmxlbmd0aDsgaSsrLCBxID0gcS5zcXIoKSkgewogICAgICAgICAgaWYgKHdbaV0gPT09IDApIGNvbnRpbnVlOwoKICAgICAgICAgIHJlcyA9IHJlcy5tdWwocSk7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gcmVzOwogICAgfTsKCiAgICAvLyBTaGlmdC1sZWZ0IGluLXBsYWNlCiAgICBCTi5wcm90b3R5cGUuaXVzaGxuID0gZnVuY3Rpb24gaXVzaGxuIChiaXRzKSB7CiAgICAgIGFzc2VydCh0eXBlb2YgYml0cyA9PT0gJ251bWJlcicgJiYgYml0cyA+PSAwKTsKICAgICAgdmFyIHIgPSBiaXRzICUgMjY7CiAgICAgIHZhciBzID0gKGJpdHMgLSByKSAvIDI2OwogICAgICB2YXIgY2FycnlNYXNrID0gKDB4M2ZmZmZmZiA+Pj4gKDI2IC0gcikpIDw8ICgyNiAtIHIpOwogICAgICB2YXIgaTsKCiAgICAgIGlmIChyICE9PSAwKSB7CiAgICAgICAgdmFyIGNhcnJ5ID0gMDsKCiAgICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHZhciBuZXdDYXJyeSA9IHRoaXMud29yZHNbaV0gJiBjYXJyeU1hc2s7CiAgICAgICAgICB2YXIgYyA9ICgodGhpcy53b3Jkc1tpXSB8IDApIC0gbmV3Q2FycnkpIDw8IHI7CiAgICAgICAgICB0aGlzLndvcmRzW2ldID0gYyB8IGNhcnJ5OwogICAgICAgICAgY2FycnkgPSBuZXdDYXJyeSA+Pj4gKDI2IC0gcik7CiAgICAgICAgfQoKICAgICAgICBpZiAoY2FycnkpIHsKICAgICAgICAgIHRoaXMud29yZHNbaV0gPSBjYXJyeTsKICAgICAgICAgIHRoaXMubGVuZ3RoKys7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAocyAhPT0gMCkgewogICAgICAgIGZvciAoaSA9IHRoaXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgICAgICAgIHRoaXMud29yZHNbaSArIHNdID0gdGhpcy53b3Jkc1tpXTsKICAgICAgICB9CgogICAgICAgIGZvciAoaSA9IDA7IGkgPCBzOyBpKyspIHsKICAgICAgICAgIHRoaXMud29yZHNbaV0gPSAwOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5sZW5ndGggKz0gczsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMuc3RyaXAoKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmlzaGxuID0gZnVuY3Rpb24gaXNobG4gKGJpdHMpIHsKICAgICAgLy8gVE9ETyhpbmR1dG55KTogaW1wbGVtZW50IG1lCiAgICAgIGFzc2VydCh0aGlzLm5lZ2F0aXZlID09PSAwKTsKICAgICAgcmV0dXJuIHRoaXMuaXVzaGxuKGJpdHMpOwogICAgfTsKCiAgICAvLyBTaGlmdC1yaWdodCBpbi1wbGFjZQogICAgLy8gTk9URTogYGhpbnRgIGlzIGEgbG93ZXN0IGJpdCBiZWZvcmUgdHJhaWxpbmcgemVyb2VzCiAgICAvLyBOT1RFOiBpZiBgZXh0ZW5kZWRgIGlzIHByZXNlbnQgLSBpdCB3aWxsIGJlIGZpbGxlZCB3aXRoIGRlc3Ryb3llZCBiaXRzCiAgICBCTi5wcm90b3R5cGUuaXVzaHJuID0gZnVuY3Rpb24gaXVzaHJuIChiaXRzLCBoaW50LCBleHRlbmRlZCkgewogICAgICBhc3NlcnQodHlwZW9mIGJpdHMgPT09ICdudW1iZXInICYmIGJpdHMgPj0gMCk7CiAgICAgIHZhciBoOwogICAgICBpZiAoaGludCkgewogICAgICAgIGggPSAoaGludCAtIChoaW50ICUgMjYpKSAvIDI2OwogICAgICB9IGVsc2UgewogICAgICAgIGggPSAwOwogICAgICB9CgogICAgICB2YXIgciA9IGJpdHMgJSAyNjsKICAgICAgdmFyIHMgPSBNYXRoLm1pbigoYml0cyAtIHIpIC8gMjYsIHRoaXMubGVuZ3RoKTsKICAgICAgdmFyIG1hc2sgPSAweDNmZmZmZmYgXiAoKDB4M2ZmZmZmZiA+Pj4gcikgPDwgcik7CiAgICAgIHZhciBtYXNrZWRXb3JkcyA9IGV4dGVuZGVkOwoKICAgICAgaCAtPSBzOwogICAgICBoID0gTWF0aC5tYXgoMCwgaCk7CgogICAgICAvLyBFeHRlbmRlZCBtb2RlLCBjb3B5IG1hc2tlZCBwYXJ0CiAgICAgIGlmIChtYXNrZWRXb3JkcykgewogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgczsgaSsrKSB7CiAgICAgICAgICBtYXNrZWRXb3Jkcy53b3Jkc1tpXSA9IHRoaXMud29yZHNbaV07CiAgICAgICAgfQogICAgICAgIG1hc2tlZFdvcmRzLmxlbmd0aCA9IHM7CiAgICAgIH0KCiAgICAgIGlmIChzID09PSAwKSA7IGVsc2UgaWYgKHRoaXMubGVuZ3RoID4gcykgewogICAgICAgIHRoaXMubGVuZ3RoIC09IHM7CiAgICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHRoaXMud29yZHNbaV0gPSB0aGlzLndvcmRzW2kgKyBzXTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy53b3Jkc1swXSA9IDA7CiAgICAgICAgdGhpcy5sZW5ndGggPSAxOwogICAgICB9CgogICAgICB2YXIgY2FycnkgPSAwOwogICAgICBmb3IgKGkgPSB0aGlzLmxlbmd0aCAtIDE7IGkgPj0gMCAmJiAoY2FycnkgIT09IDAgfHwgaSA+PSBoKTsgaS0tKSB7CiAgICAgICAgdmFyIHdvcmQgPSB0aGlzLndvcmRzW2ldIHwgMDsKICAgICAgICB0aGlzLndvcmRzW2ldID0gKGNhcnJ5IDw8ICgyNiAtIHIpKSB8ICh3b3JkID4+PiByKTsKICAgICAgICBjYXJyeSA9IHdvcmQgJiBtYXNrOwogICAgICB9CgogICAgICAvLyBQdXNoIGNhcnJpZWQgYml0cyBhcyBhIG1hc2sKICAgICAgaWYgKG1hc2tlZFdvcmRzICYmIGNhcnJ5ICE9PSAwKSB7CiAgICAgICAgbWFza2VkV29yZHMud29yZHNbbWFza2VkV29yZHMubGVuZ3RoKytdID0gY2Fycnk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkgewogICAgICAgIHRoaXMud29yZHNbMF0gPSAwOwogICAgICAgIHRoaXMubGVuZ3RoID0gMTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMuc3RyaXAoKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmlzaHJuID0gZnVuY3Rpb24gaXNocm4gKGJpdHMsIGhpbnQsIGV4dGVuZGVkKSB7CiAgICAgIC8vIFRPRE8oaW5kdXRueSk6IGltcGxlbWVudCBtZQogICAgICBhc3NlcnQodGhpcy5uZWdhdGl2ZSA9PT0gMCk7CiAgICAgIHJldHVybiB0aGlzLml1c2hybihiaXRzLCBoaW50LCBleHRlbmRlZCk7CiAgICB9OwoKICAgIC8vIFNoaWZ0LWxlZnQKICAgIEJOLnByb3RvdHlwZS5zaGxuID0gZnVuY3Rpb24gc2hsbiAoYml0cykgewogICAgICByZXR1cm4gdGhpcy5jbG9uZSgpLmlzaGxuKGJpdHMpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUudXNobG4gPSBmdW5jdGlvbiB1c2hsbiAoYml0cykgewogICAgICByZXR1cm4gdGhpcy5jbG9uZSgpLml1c2hsbihiaXRzKTsKICAgIH07CgogICAgLy8gU2hpZnQtcmlnaHQKICAgIEJOLnByb3RvdHlwZS5zaHJuID0gZnVuY3Rpb24gc2hybiAoYml0cykgewogICAgICByZXR1cm4gdGhpcy5jbG9uZSgpLmlzaHJuKGJpdHMpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUudXNocm4gPSBmdW5jdGlvbiB1c2hybiAoYml0cykgewogICAgICByZXR1cm4gdGhpcy5jbG9uZSgpLml1c2hybihiaXRzKTsKICAgIH07CgogICAgLy8gVGVzdCBpZiBuIGJpdCBpcyBzZXQKICAgIEJOLnByb3RvdHlwZS50ZXN0biA9IGZ1bmN0aW9uIHRlc3RuIChiaXQpIHsKICAgICAgYXNzZXJ0KHR5cGVvZiBiaXQgPT09ICdudW1iZXInICYmIGJpdCA+PSAwKTsKICAgICAgdmFyIHIgPSBiaXQgJSAyNjsKICAgICAgdmFyIHMgPSAoYml0IC0gcikgLyAyNjsKICAgICAgdmFyIHEgPSAxIDw8IHI7CgogICAgICAvLyBGYXN0IGNhc2U6IGJpdCBpcyBtdWNoIGhpZ2hlciB0aGFuIGFsbCBleGlzdGluZyB3b3JkcwogICAgICBpZiAodGhpcy5sZW5ndGggPD0gcykgcmV0dXJuIGZhbHNlOwoKICAgICAgLy8gQ2hlY2sgYml0IGFuZCByZXR1cm4KICAgICAgdmFyIHcgPSB0aGlzLndvcmRzW3NdOwoKICAgICAgcmV0dXJuICEhKHcgJiBxKTsKICAgIH07CgogICAgLy8gUmV0dXJuIG9ubHkgbG93ZXJzIGJpdHMgb2YgbnVtYmVyIChpbi1wbGFjZSkKICAgIEJOLnByb3RvdHlwZS5pbWFza24gPSBmdW5jdGlvbiBpbWFza24gKGJpdHMpIHsKICAgICAgYXNzZXJ0KHR5cGVvZiBiaXRzID09PSAnbnVtYmVyJyAmJiBiaXRzID49IDApOwogICAgICB2YXIgciA9IGJpdHMgJSAyNjsKICAgICAgdmFyIHMgPSAoYml0cyAtIHIpIC8gMjY7CgogICAgICBhc3NlcnQodGhpcy5uZWdhdGl2ZSA9PT0gMCwgJ2ltYXNrbiB3b3JrcyBvbmx5IHdpdGggcG9zaXRpdmUgbnVtYmVycycpOwoKICAgICAgaWYgKHRoaXMubGVuZ3RoIDw9IHMpIHsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfQoKICAgICAgaWYgKHIgIT09IDApIHsKICAgICAgICBzKys7CiAgICAgIH0KICAgICAgdGhpcy5sZW5ndGggPSBNYXRoLm1pbihzLCB0aGlzLmxlbmd0aCk7CgogICAgICBpZiAociAhPT0gMCkgewogICAgICAgIHZhciBtYXNrID0gMHgzZmZmZmZmIF4gKCgweDNmZmZmZmYgPj4+IHIpIDw8IHIpOwogICAgICAgIHRoaXMud29yZHNbdGhpcy5sZW5ndGggLSAxXSAmPSBtYXNrOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5zdHJpcCgpOwogICAgfTsKCiAgICAvLyBSZXR1cm4gb25seSBsb3dlcnMgYml0cyBvZiBudW1iZXIKICAgIEJOLnByb3RvdHlwZS5tYXNrbiA9IGZ1bmN0aW9uIG1hc2tuIChiaXRzKSB7CiAgICAgIHJldHVybiB0aGlzLmNsb25lKCkuaW1hc2tuKGJpdHMpOwogICAgfTsKCiAgICAvLyBBZGQgcGxhaW4gbnVtYmVyIGBudW1gIHRvIGB0aGlzYAogICAgQk4ucHJvdG90eXBlLmlhZGRuID0gZnVuY3Rpb24gaWFkZG4gKG51bSkgewogICAgICBhc3NlcnQodHlwZW9mIG51bSA9PT0gJ251bWJlcicpOwogICAgICBhc3NlcnQobnVtIDwgMHg0MDAwMDAwKTsKICAgICAgaWYgKG51bSA8IDApIHJldHVybiB0aGlzLmlzdWJuKC1udW0pOwoKICAgICAgLy8gUG9zc2libGUgc2lnbiBjaGFuZ2UKICAgICAgaWYgKHRoaXMubmVnYXRpdmUgIT09IDApIHsKICAgICAgICBpZiAodGhpcy5sZW5ndGggPT09IDEgJiYgKHRoaXMud29yZHNbMF0gfCAwKSA8IG51bSkgewogICAgICAgICAgdGhpcy53b3Jkc1swXSA9IG51bSAtICh0aGlzLndvcmRzWzBdIHwgMCk7CiAgICAgICAgICB0aGlzLm5lZ2F0aXZlID0gMDsKICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5uZWdhdGl2ZSA9IDA7CiAgICAgICAgdGhpcy5pc3VibihudW0pOwogICAgICAgIHRoaXMubmVnYXRpdmUgPSAxOwogICAgICAgIHJldHVybiB0aGlzOwogICAgICB9CgogICAgICAvLyBBZGQgd2l0aG91dCBjaGVja3MKICAgICAgcmV0dXJuIHRoaXMuX2lhZGRuKG51bSk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5faWFkZG4gPSBmdW5jdGlvbiBfaWFkZG4gKG51bSkgewogICAgICB0aGlzLndvcmRzWzBdICs9IG51bTsKCiAgICAgIC8vIENhcnJ5CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGggJiYgdGhpcy53b3Jkc1tpXSA+PSAweDQwMDAwMDA7IGkrKykgewogICAgICAgIHRoaXMud29yZHNbaV0gLT0gMHg0MDAwMDAwOwogICAgICAgIGlmIChpID09PSB0aGlzLmxlbmd0aCAtIDEpIHsKICAgICAgICAgIHRoaXMud29yZHNbaSArIDFdID0gMTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy53b3Jkc1tpICsgMV0rKzsKICAgICAgICB9CiAgICAgIH0KICAgICAgdGhpcy5sZW5ndGggPSBNYXRoLm1heCh0aGlzLmxlbmd0aCwgaSArIDEpOwoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9OwoKICAgIC8vIFN1YnRyYWN0IHBsYWluIG51bWJlciBgbnVtYCBmcm9tIGB0aGlzYAogICAgQk4ucHJvdG90eXBlLmlzdWJuID0gZnVuY3Rpb24gaXN1Ym4gKG51bSkgewogICAgICBhc3NlcnQodHlwZW9mIG51bSA9PT0gJ251bWJlcicpOwogICAgICBhc3NlcnQobnVtIDwgMHg0MDAwMDAwKTsKICAgICAgaWYgKG51bSA8IDApIHJldHVybiB0aGlzLmlhZGRuKC1udW0pOwoKICAgICAgaWYgKHRoaXMubmVnYXRpdmUgIT09IDApIHsKICAgICAgICB0aGlzLm5lZ2F0aXZlID0gMDsKICAgICAgICB0aGlzLmlhZGRuKG51bSk7CiAgICAgICAgdGhpcy5uZWdhdGl2ZSA9IDE7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0KCiAgICAgIHRoaXMud29yZHNbMF0gLT0gbnVtOwoKICAgICAgaWYgKHRoaXMubGVuZ3RoID09PSAxICYmIHRoaXMud29yZHNbMF0gPCAwKSB7CiAgICAgICAgdGhpcy53b3Jkc1swXSA9IC10aGlzLndvcmRzWzBdOwogICAgICAgIHRoaXMubmVnYXRpdmUgPSAxOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIENhcnJ5CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aCAmJiB0aGlzLndvcmRzW2ldIDwgMDsgaSsrKSB7CiAgICAgICAgICB0aGlzLndvcmRzW2ldICs9IDB4NDAwMDAwMDsKICAgICAgICAgIHRoaXMud29yZHNbaSArIDFdIC09IDE7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5zdHJpcCgpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuYWRkbiA9IGZ1bmN0aW9uIGFkZG4gKG51bSkgewogICAgICByZXR1cm4gdGhpcy5jbG9uZSgpLmlhZGRuKG51bSk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5zdWJuID0gZnVuY3Rpb24gc3VibiAobnVtKSB7CiAgICAgIHJldHVybiB0aGlzLmNsb25lKCkuaXN1Ym4obnVtKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmlhYnMgPSBmdW5jdGlvbiBpYWJzICgpIHsKICAgICAgdGhpcy5uZWdhdGl2ZSA9IDA7CgogICAgICByZXR1cm4gdGhpczsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmFicyA9IGZ1bmN0aW9uIGFicyAoKSB7CiAgICAgIHJldHVybiB0aGlzLmNsb25lKCkuaWFicygpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuX2lzaGxuc3VibXVsID0gZnVuY3Rpb24gX2lzaGxuc3VibXVsIChudW0sIG11bCwgc2hpZnQpIHsKICAgICAgdmFyIGxlbiA9IG51bS5sZW5ndGggKyBzaGlmdDsKICAgICAgdmFyIGk7CgogICAgICB0aGlzLl9leHBhbmQobGVuKTsKCiAgICAgIHZhciB3OwogICAgICB2YXIgY2FycnkgPSAwOwogICAgICBmb3IgKGkgPSAwOyBpIDwgbnVtLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdyA9ICh0aGlzLndvcmRzW2kgKyBzaGlmdF0gfCAwKSArIGNhcnJ5OwogICAgICAgIHZhciByaWdodCA9IChudW0ud29yZHNbaV0gfCAwKSAqIG11bDsKICAgICAgICB3IC09IHJpZ2h0ICYgMHgzZmZmZmZmOwogICAgICAgIGNhcnJ5ID0gKHcgPj4gMjYpIC0gKChyaWdodCAvIDB4NDAwMDAwMCkgfCAwKTsKICAgICAgICB0aGlzLndvcmRzW2kgKyBzaGlmdF0gPSB3ICYgMHgzZmZmZmZmOwogICAgICB9CiAgICAgIGZvciAoOyBpIDwgdGhpcy5sZW5ndGggLSBzaGlmdDsgaSsrKSB7CiAgICAgICAgdyA9ICh0aGlzLndvcmRzW2kgKyBzaGlmdF0gfCAwKSArIGNhcnJ5OwogICAgICAgIGNhcnJ5ID0gdyA+PiAyNjsKICAgICAgICB0aGlzLndvcmRzW2kgKyBzaGlmdF0gPSB3ICYgMHgzZmZmZmZmOwogICAgICB9CgogICAgICBpZiAoY2FycnkgPT09IDApIHJldHVybiB0aGlzLnN0cmlwKCk7CgogICAgICAvLyBTdWJ0cmFjdGlvbiBvdmVyZmxvdwogICAgICBhc3NlcnQoY2FycnkgPT09IC0xKTsKICAgICAgY2FycnkgPSAwOwogICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykgewogICAgICAgIHcgPSAtKHRoaXMud29yZHNbaV0gfCAwKSArIGNhcnJ5OwogICAgICAgIGNhcnJ5ID0gdyA+PiAyNjsKICAgICAgICB0aGlzLndvcmRzW2ldID0gdyAmIDB4M2ZmZmZmZjsKICAgICAgfQogICAgICB0aGlzLm5lZ2F0aXZlID0gMTsKCiAgICAgIHJldHVybiB0aGlzLnN0cmlwKCk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5fd29yZERpdiA9IGZ1bmN0aW9uIF93b3JkRGl2IChudW0sIG1vZGUpIHsKICAgICAgdmFyIHNoaWZ0ID0gdGhpcy5sZW5ndGggLSBudW0ubGVuZ3RoOwoKICAgICAgdmFyIGEgPSB0aGlzLmNsb25lKCk7CiAgICAgIHZhciBiID0gbnVtOwoKICAgICAgLy8gTm9ybWFsaXplCiAgICAgIHZhciBiaGkgPSBiLndvcmRzW2IubGVuZ3RoIC0gMV0gfCAwOwogICAgICB2YXIgYmhpQml0cyA9IHRoaXMuX2NvdW50Qml0cyhiaGkpOwogICAgICBzaGlmdCA9IDI2IC0gYmhpQml0czsKICAgICAgaWYgKHNoaWZ0ICE9PSAwKSB7CiAgICAgICAgYiA9IGIudXNobG4oc2hpZnQpOwogICAgICAgIGEuaXVzaGxuKHNoaWZ0KTsKICAgICAgICBiaGkgPSBiLndvcmRzW2IubGVuZ3RoIC0gMV0gfCAwOwogICAgICB9CgogICAgICAvLyBJbml0aWFsaXplIHF1b3RpZW50CiAgICAgIHZhciBtID0gYS5sZW5ndGggLSBiLmxlbmd0aDsKICAgICAgdmFyIHE7CgogICAgICBpZiAobW9kZSAhPT0gJ21vZCcpIHsKICAgICAgICBxID0gbmV3IEJOKG51bGwpOwogICAgICAgIHEubGVuZ3RoID0gbSArIDE7CiAgICAgICAgcS53b3JkcyA9IG5ldyBBcnJheShxLmxlbmd0aCk7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBxLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBxLndvcmRzW2ldID0gMDsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHZhciBkaWZmID0gYS5jbG9uZSgpLl9pc2hsbnN1Ym11bChiLCAxLCBtKTsKICAgICAgaWYgKGRpZmYubmVnYXRpdmUgPT09IDApIHsKICAgICAgICBhID0gZGlmZjsKICAgICAgICBpZiAocSkgewogICAgICAgICAgcS53b3Jkc1ttXSA9IDE7CiAgICAgICAgfQogICAgICB9CgogICAgICBmb3IgKHZhciBqID0gbSAtIDE7IGogPj0gMDsgai0tKSB7CiAgICAgICAgdmFyIHFqID0gKGEud29yZHNbYi5sZW5ndGggKyBqXSB8IDApICogMHg0MDAwMDAwICsKICAgICAgICAgIChhLndvcmRzW2IubGVuZ3RoICsgaiAtIDFdIHwgMCk7CgogICAgICAgIC8vIE5PVEU6IChxaiAvIGJoaSkgaXMgKDB4M2ZmZmZmZiAqIDB4NDAwMDAwMCArIDB4M2ZmZmZmZikgLyAweDIwMDAwMDAgbWF4CiAgICAgICAgLy8gKDB4N2ZmZmZmZikKICAgICAgICBxaiA9IE1hdGgubWluKChxaiAvIGJoaSkgfCAwLCAweDNmZmZmZmYpOwoKICAgICAgICBhLl9pc2hsbnN1Ym11bChiLCBxaiwgaik7CiAgICAgICAgd2hpbGUgKGEubmVnYXRpdmUgIT09IDApIHsKICAgICAgICAgIHFqLS07CiAgICAgICAgICBhLm5lZ2F0aXZlID0gMDsKICAgICAgICAgIGEuX2lzaGxuc3VibXVsKGIsIDEsIGopOwogICAgICAgICAgaWYgKCFhLmlzWmVybygpKSB7CiAgICAgICAgICAgIGEubmVnYXRpdmUgXj0gMTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKHEpIHsKICAgICAgICAgIHEud29yZHNbal0gPSBxajsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKHEpIHsKICAgICAgICBxLnN0cmlwKCk7CiAgICAgIH0KICAgICAgYS5zdHJpcCgpOwoKICAgICAgLy8gRGVub3JtYWxpemUKICAgICAgaWYgKG1vZGUgIT09ICdkaXYnICYmIHNoaWZ0ICE9PSAwKSB7CiAgICAgICAgYS5pdXNocm4oc2hpZnQpOwogICAgICB9CgogICAgICByZXR1cm4gewogICAgICAgIGRpdjogcSB8fCBudWxsLAogICAgICAgIG1vZDogYQogICAgICB9OwogICAgfTsKCiAgICAvLyBOT1RFOiAxKSBgbW9kZWAgY2FuIGJlIHNldCB0byBgbW9kYCB0byByZXF1ZXN0IG1vZCBvbmx5LAogICAgLy8gICAgICAgdG8gYGRpdmAgdG8gcmVxdWVzdCBkaXYgb25seSwgb3IgYmUgYWJzZW50IHRvCiAgICAvLyAgICAgICByZXF1ZXN0IGJvdGggZGl2ICYgbW9kCiAgICAvLyAgICAgICAyKSBgcG9zaXRpdmVgIGlzIHRydWUgaWYgdW5zaWduZWQgbW9kIGlzIHJlcXVlc3RlZAogICAgQk4ucHJvdG90eXBlLmRpdm1vZCA9IGZ1bmN0aW9uIGRpdm1vZCAobnVtLCBtb2RlLCBwb3NpdGl2ZSkgewogICAgICBhc3NlcnQoIW51bS5pc1plcm8oKSk7CgogICAgICBpZiAodGhpcy5pc1plcm8oKSkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBkaXY6IG5ldyBCTigwKSwKICAgICAgICAgIG1vZDogbmV3IEJOKDApCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgdmFyIGRpdiwgbW9kLCByZXM7CiAgICAgIGlmICh0aGlzLm5lZ2F0aXZlICE9PSAwICYmIG51bS5uZWdhdGl2ZSA9PT0gMCkgewogICAgICAgIHJlcyA9IHRoaXMubmVnKCkuZGl2bW9kKG51bSwgbW9kZSk7CgogICAgICAgIGlmIChtb2RlICE9PSAnbW9kJykgewogICAgICAgICAgZGl2ID0gcmVzLmRpdi5uZWcoKTsKICAgICAgICB9CgogICAgICAgIGlmIChtb2RlICE9PSAnZGl2JykgewogICAgICAgICAgbW9kID0gcmVzLm1vZC5uZWcoKTsKICAgICAgICAgIGlmIChwb3NpdGl2ZSAmJiBtb2QubmVnYXRpdmUgIT09IDApIHsKICAgICAgICAgICAgbW9kLmlhZGQobnVtKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiB7CiAgICAgICAgICBkaXY6IGRpdiwKICAgICAgICAgIG1vZDogbW9kCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMubmVnYXRpdmUgPT09IDAgJiYgbnVtLm5lZ2F0aXZlICE9PSAwKSB7CiAgICAgICAgcmVzID0gdGhpcy5kaXZtb2QobnVtLm5lZygpLCBtb2RlKTsKCiAgICAgICAgaWYgKG1vZGUgIT09ICdtb2QnKSB7CiAgICAgICAgICBkaXYgPSByZXMuZGl2Lm5lZygpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGRpdjogZGl2LAogICAgICAgICAgbW9kOiByZXMubW9kCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgaWYgKCh0aGlzLm5lZ2F0aXZlICYgbnVtLm5lZ2F0aXZlKSAhPT0gMCkgewogICAgICAgIHJlcyA9IHRoaXMubmVnKCkuZGl2bW9kKG51bS5uZWcoKSwgbW9kZSk7CgogICAgICAgIGlmIChtb2RlICE9PSAnZGl2JykgewogICAgICAgICAgbW9kID0gcmVzLm1vZC5uZWcoKTsKICAgICAgICAgIGlmIChwb3NpdGl2ZSAmJiBtb2QubmVnYXRpdmUgIT09IDApIHsKICAgICAgICAgICAgbW9kLmlzdWIobnVtKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiB7CiAgICAgICAgICBkaXY6IHJlcy5kaXYsCiAgICAgICAgICBtb2Q6IG1vZAogICAgICAgIH07CiAgICAgIH0KCiAgICAgIC8vIEJvdGggbnVtYmVycyBhcmUgcG9zaXRpdmUgYXQgdGhpcyBwb2ludAoKICAgICAgLy8gU3RyaXAgYm90aCBudW1iZXJzIHRvIGFwcHJveGltYXRlIHNoaWZ0IHZhbHVlCiAgICAgIGlmIChudW0ubGVuZ3RoID4gdGhpcy5sZW5ndGggfHwgdGhpcy5jbXAobnVtKSA8IDApIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgZGl2OiBuZXcgQk4oMCksCiAgICAgICAgICBtb2Q6IHRoaXMKICAgICAgICB9OwogICAgICB9CgogICAgICAvLyBWZXJ5IHNob3J0IHJlZHVjdGlvbgogICAgICBpZiAobnVtLmxlbmd0aCA9PT0gMSkgewogICAgICAgIGlmIChtb2RlID09PSAnZGl2JykgewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgZGl2OiB0aGlzLmRpdm4obnVtLndvcmRzWzBdKSwKICAgICAgICAgICAgbW9kOiBudWxsCiAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgaWYgKG1vZGUgPT09ICdtb2QnKSB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBkaXY6IG51bGwsCiAgICAgICAgICAgIG1vZDogbmV3IEJOKHRoaXMubW9kbihudW0ud29yZHNbMF0pKQogICAgICAgICAgfTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB7CiAgICAgICAgICBkaXY6IHRoaXMuZGl2bihudW0ud29yZHNbMF0pLAogICAgICAgICAgbW9kOiBuZXcgQk4odGhpcy5tb2RuKG51bS53b3Jkc1swXSkpCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMuX3dvcmREaXYobnVtLCBtb2RlKTsKICAgIH07CgogICAgLy8gRmluZCBgdGhpc2AgLyBgbnVtYAogICAgQk4ucHJvdG90eXBlLmRpdiA9IGZ1bmN0aW9uIGRpdiAobnVtKSB7CiAgICAgIHJldHVybiB0aGlzLmRpdm1vZChudW0sICdkaXYnLCBmYWxzZSkuZGl2OwogICAgfTsKCiAgICAvLyBGaW5kIGB0aGlzYCAlIGBudW1gCiAgICBCTi5wcm90b3R5cGUubW9kID0gZnVuY3Rpb24gbW9kIChudW0pIHsKICAgICAgcmV0dXJuIHRoaXMuZGl2bW9kKG51bSwgJ21vZCcsIGZhbHNlKS5tb2Q7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS51bW9kID0gZnVuY3Rpb24gdW1vZCAobnVtKSB7CiAgICAgIHJldHVybiB0aGlzLmRpdm1vZChudW0sICdtb2QnLCB0cnVlKS5tb2Q7CiAgICB9OwoKICAgIC8vIEZpbmQgUm91bmQoYHRoaXNgIC8gYG51bWApCiAgICBCTi5wcm90b3R5cGUuZGl2Um91bmQgPSBmdW5jdGlvbiBkaXZSb3VuZCAobnVtKSB7CiAgICAgIHZhciBkbSA9IHRoaXMuZGl2bW9kKG51bSk7CgogICAgICAvLyBGYXN0IGNhc2UgLSBleGFjdCBkaXZpc2lvbgogICAgICBpZiAoZG0ubW9kLmlzWmVybygpKSByZXR1cm4gZG0uZGl2OwoKICAgICAgdmFyIG1vZCA9IGRtLmRpdi5uZWdhdGl2ZSAhPT0gMCA/IGRtLm1vZC5pc3ViKG51bSkgOiBkbS5tb2Q7CgogICAgICB2YXIgaGFsZiA9IG51bS51c2hybigxKTsKICAgICAgdmFyIHIyID0gbnVtLmFuZGxuKDEpOwogICAgICB2YXIgY21wID0gbW9kLmNtcChoYWxmKTsKCiAgICAgIC8vIFJvdW5kIGRvd24KICAgICAgaWYgKGNtcCA8IDAgfHwgcjIgPT09IDEgJiYgY21wID09PSAwKSByZXR1cm4gZG0uZGl2OwoKICAgICAgLy8gUm91bmQgdXAKICAgICAgcmV0dXJuIGRtLmRpdi5uZWdhdGl2ZSAhPT0gMCA/IGRtLmRpdi5pc3VibigxKSA6IGRtLmRpdi5pYWRkbigxKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLm1vZG4gPSBmdW5jdGlvbiBtb2RuIChudW0pIHsKICAgICAgYXNzZXJ0KG51bSA8PSAweDNmZmZmZmYpOwogICAgICB2YXIgcCA9ICgxIDw8IDI2KSAlIG51bTsKCiAgICAgIHZhciBhY2MgPSAwOwogICAgICBmb3IgKHZhciBpID0gdGhpcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgICAgIGFjYyA9IChwICogYWNjICsgKHRoaXMud29yZHNbaV0gfCAwKSkgJSBudW07CiAgICAgIH0KCiAgICAgIHJldHVybiBhY2M7CiAgICB9OwoKICAgIC8vIEluLXBsYWNlIGRpdmlzaW9uIGJ5IG51bWJlcgogICAgQk4ucHJvdG90eXBlLmlkaXZuID0gZnVuY3Rpb24gaWRpdm4gKG51bSkgewogICAgICBhc3NlcnQobnVtIDw9IDB4M2ZmZmZmZik7CgogICAgICB2YXIgY2FycnkgPSAwOwogICAgICBmb3IgKHZhciBpID0gdGhpcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgICAgIHZhciB3ID0gKHRoaXMud29yZHNbaV0gfCAwKSArIGNhcnJ5ICogMHg0MDAwMDAwOwogICAgICAgIHRoaXMud29yZHNbaV0gPSAodyAvIG51bSkgfCAwOwogICAgICAgIGNhcnJ5ID0gdyAlIG51bTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMuc3RyaXAoKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmRpdm4gPSBmdW5jdGlvbiBkaXZuIChudW0pIHsKICAgICAgcmV0dXJuIHRoaXMuY2xvbmUoKS5pZGl2bihudW0pOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuZWdjZCA9IGZ1bmN0aW9uIGVnY2QgKHApIHsKICAgICAgYXNzZXJ0KHAubmVnYXRpdmUgPT09IDApOwogICAgICBhc3NlcnQoIXAuaXNaZXJvKCkpOwoKICAgICAgdmFyIHggPSB0aGlzOwogICAgICB2YXIgeSA9IHAuY2xvbmUoKTsKCiAgICAgIGlmICh4Lm5lZ2F0aXZlICE9PSAwKSB7CiAgICAgICAgeCA9IHgudW1vZChwKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB4ID0geC5jbG9uZSgpOwogICAgICB9CgogICAgICAvLyBBICogeCArIEIgKiB5ID0geAogICAgICB2YXIgQSA9IG5ldyBCTigxKTsKICAgICAgdmFyIEIgPSBuZXcgQk4oMCk7CgogICAgICAvLyBDICogeCArIEQgKiB5ID0geQogICAgICB2YXIgQyA9IG5ldyBCTigwKTsKICAgICAgdmFyIEQgPSBuZXcgQk4oMSk7CgogICAgICB2YXIgZyA9IDA7CgogICAgICB3aGlsZSAoeC5pc0V2ZW4oKSAmJiB5LmlzRXZlbigpKSB7CiAgICAgICAgeC5pdXNocm4oMSk7CiAgICAgICAgeS5pdXNocm4oMSk7CiAgICAgICAgKytnOwogICAgICB9CgogICAgICB2YXIgeXAgPSB5LmNsb25lKCk7CiAgICAgIHZhciB4cCA9IHguY2xvbmUoKTsKCiAgICAgIHdoaWxlICgheC5pc1plcm8oKSkgewogICAgICAgIGZvciAodmFyIGkgPSAwLCBpbSA9IDE7ICh4LndvcmRzWzBdICYgaW0pID09PSAwICYmIGkgPCAyNjsgKytpLCBpbSA8PD0gMSk7CiAgICAgICAgaWYgKGkgPiAwKSB7CiAgICAgICAgICB4Lml1c2hybihpKTsKICAgICAgICAgIHdoaWxlIChpLS0gPiAwKSB7CiAgICAgICAgICAgIGlmIChBLmlzT2RkKCkgfHwgQi5pc09kZCgpKSB7CiAgICAgICAgICAgICAgQS5pYWRkKHlwKTsKICAgICAgICAgICAgICBCLmlzdWIoeHApOwogICAgICAgICAgICB9CgogICAgICAgICAgICBBLml1c2hybigxKTsKICAgICAgICAgICAgQi5pdXNocm4oMSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmb3IgKHZhciBqID0gMCwgam0gPSAxOyAoeS53b3Jkc1swXSAmIGptKSA9PT0gMCAmJiBqIDwgMjY7ICsraiwgam0gPDw9IDEpOwogICAgICAgIGlmIChqID4gMCkgewogICAgICAgICAgeS5pdXNocm4oaik7CiAgICAgICAgICB3aGlsZSAoai0tID4gMCkgewogICAgICAgICAgICBpZiAoQy5pc09kZCgpIHx8IEQuaXNPZGQoKSkgewogICAgICAgICAgICAgIEMuaWFkZCh5cCk7CiAgICAgICAgICAgICAgRC5pc3ViKHhwKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgQy5pdXNocm4oMSk7CiAgICAgICAgICAgIEQuaXVzaHJuKDEpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKHguY21wKHkpID49IDApIHsKICAgICAgICAgIHguaXN1Yih5KTsKICAgICAgICAgIEEuaXN1YihDKTsKICAgICAgICAgIEIuaXN1YihEKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgeS5pc3ViKHgpOwogICAgICAgICAgQy5pc3ViKEEpOwogICAgICAgICAgRC5pc3ViKEIpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHsKICAgICAgICBhOiBDLAogICAgICAgIGI6IEQsCiAgICAgICAgZ2NkOiB5Lml1c2hsbihnKQogICAgICB9OwogICAgfTsKCiAgICAvLyBUaGlzIGlzIHJlZHVjZWQgaW5jYXJuYXRpb24gb2YgdGhlIGJpbmFyeSBFRUEKICAgIC8vIGFib3ZlLCBkZXNpZ25hdGVkIHRvIGludmVydCBtZW1iZXJzIG9mIHRoZQogICAgLy8gX3ByaW1lXyBmaWVsZHMgRihwKSBhdCBhIG1heGltYWwgc3BlZWQKICAgIEJOLnByb3RvdHlwZS5faW52bXAgPSBmdW5jdGlvbiBfaW52bXAgKHApIHsKICAgICAgYXNzZXJ0KHAubmVnYXRpdmUgPT09IDApOwogICAgICBhc3NlcnQoIXAuaXNaZXJvKCkpOwoKICAgICAgdmFyIGEgPSB0aGlzOwogICAgICB2YXIgYiA9IHAuY2xvbmUoKTsKCiAgICAgIGlmIChhLm5lZ2F0aXZlICE9PSAwKSB7CiAgICAgICAgYSA9IGEudW1vZChwKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBhID0gYS5jbG9uZSgpOwogICAgICB9CgogICAgICB2YXIgeDEgPSBuZXcgQk4oMSk7CiAgICAgIHZhciB4MiA9IG5ldyBCTigwKTsKCiAgICAgIHZhciBkZWx0YSA9IGIuY2xvbmUoKTsKCiAgICAgIHdoaWxlIChhLmNtcG4oMSkgPiAwICYmIGIuY21wbigxKSA+IDApIHsKICAgICAgICBmb3IgKHZhciBpID0gMCwgaW0gPSAxOyAoYS53b3Jkc1swXSAmIGltKSA9PT0gMCAmJiBpIDwgMjY7ICsraSwgaW0gPDw9IDEpOwogICAgICAgIGlmIChpID4gMCkgewogICAgICAgICAgYS5pdXNocm4oaSk7CiAgICAgICAgICB3aGlsZSAoaS0tID4gMCkgewogICAgICAgICAgICBpZiAoeDEuaXNPZGQoKSkgewogICAgICAgICAgICAgIHgxLmlhZGQoZGVsdGEpOwogICAgICAgICAgICB9CgogICAgICAgICAgICB4MS5pdXNocm4oMSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmb3IgKHZhciBqID0gMCwgam0gPSAxOyAoYi53b3Jkc1swXSAmIGptKSA9PT0gMCAmJiBqIDwgMjY7ICsraiwgam0gPDw9IDEpOwogICAgICAgIGlmIChqID4gMCkgewogICAgICAgICAgYi5pdXNocm4oaik7CiAgICAgICAgICB3aGlsZSAoai0tID4gMCkgewogICAgICAgICAgICBpZiAoeDIuaXNPZGQoKSkgewogICAgICAgICAgICAgIHgyLmlhZGQoZGVsdGEpOwogICAgICAgICAgICB9CgogICAgICAgICAgICB4Mi5pdXNocm4oMSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoYS5jbXAoYikgPj0gMCkgewogICAgICAgICAgYS5pc3ViKGIpOwogICAgICAgICAgeDEuaXN1Yih4Mik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGIuaXN1YihhKTsKICAgICAgICAgIHgyLmlzdWIoeDEpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdmFyIHJlczsKICAgICAgaWYgKGEuY21wbigxKSA9PT0gMCkgewogICAgICAgIHJlcyA9IHgxOwogICAgICB9IGVsc2UgewogICAgICAgIHJlcyA9IHgyOwogICAgICB9CgogICAgICBpZiAocmVzLmNtcG4oMCkgPCAwKSB7CiAgICAgICAgcmVzLmlhZGQocCk7CiAgICAgIH0KCiAgICAgIHJldHVybiByZXM7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5nY2QgPSBmdW5jdGlvbiBnY2QgKG51bSkgewogICAgICBpZiAodGhpcy5pc1plcm8oKSkgcmV0dXJuIG51bS5hYnMoKTsKICAgICAgaWYgKG51bS5pc1plcm8oKSkgcmV0dXJuIHRoaXMuYWJzKCk7CgogICAgICB2YXIgYSA9IHRoaXMuY2xvbmUoKTsKICAgICAgdmFyIGIgPSBudW0uY2xvbmUoKTsKICAgICAgYS5uZWdhdGl2ZSA9IDA7CiAgICAgIGIubmVnYXRpdmUgPSAwOwoKICAgICAgLy8gUmVtb3ZlIGNvbW1vbiBmYWN0b3Igb2YgdHdvCiAgICAgIGZvciAodmFyIHNoaWZ0ID0gMDsgYS5pc0V2ZW4oKSAmJiBiLmlzRXZlbigpOyBzaGlmdCsrKSB7CiAgICAgICAgYS5pdXNocm4oMSk7CiAgICAgICAgYi5pdXNocm4oMSk7CiAgICAgIH0KCiAgICAgIGRvIHsKICAgICAgICB3aGlsZSAoYS5pc0V2ZW4oKSkgewogICAgICAgICAgYS5pdXNocm4oMSk7CiAgICAgICAgfQogICAgICAgIHdoaWxlIChiLmlzRXZlbigpKSB7CiAgICAgICAgICBiLml1c2hybigxKTsKICAgICAgICB9CgogICAgICAgIHZhciByID0gYS5jbXAoYik7CiAgICAgICAgaWYgKHIgPCAwKSB7CiAgICAgICAgICAvLyBTd2FwIGBhYCBhbmQgYGJgIHRvIG1ha2UgYGFgIGFsd2F5cyBiaWdnZXIgdGhhbiBgYmAKICAgICAgICAgIHZhciB0ID0gYTsKICAgICAgICAgIGEgPSBiOwogICAgICAgICAgYiA9IHQ7CiAgICAgICAgfSBlbHNlIGlmIChyID09PSAwIHx8IGIuY21wbigxKSA9PT0gMCkgewogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgICBhLmlzdWIoYik7CiAgICAgIH0gd2hpbGUgKHRydWUpOwoKICAgICAgcmV0dXJuIGIuaXVzaGxuKHNoaWZ0KTsKICAgIH07CgogICAgLy8gSW52ZXJ0IG51bWJlciBpbiB0aGUgZmllbGQgRihudW0pCiAgICBCTi5wcm90b3R5cGUuaW52bSA9IGZ1bmN0aW9uIGludm0gKG51bSkgewogICAgICByZXR1cm4gdGhpcy5lZ2NkKG51bSkuYS51bW9kKG51bSk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5pc0V2ZW4gPSBmdW5jdGlvbiBpc0V2ZW4gKCkgewogICAgICByZXR1cm4gKHRoaXMud29yZHNbMF0gJiAxKSA9PT0gMDsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmlzT2RkID0gZnVuY3Rpb24gaXNPZGQgKCkgewogICAgICByZXR1cm4gKHRoaXMud29yZHNbMF0gJiAxKSA9PT0gMTsKICAgIH07CgogICAgLy8gQW5kIGZpcnN0IHdvcmQgYW5kIG51bQogICAgQk4ucHJvdG90eXBlLmFuZGxuID0gZnVuY3Rpb24gYW5kbG4gKG51bSkgewogICAgICByZXR1cm4gdGhpcy53b3Jkc1swXSAmIG51bTsKICAgIH07CgogICAgLy8gSW5jcmVtZW50IGF0IHRoZSBiaXQgcG9zaXRpb24gaW4tbGluZQogICAgQk4ucHJvdG90eXBlLmJpbmNuID0gZnVuY3Rpb24gYmluY24gKGJpdCkgewogICAgICBhc3NlcnQodHlwZW9mIGJpdCA9PT0gJ251bWJlcicpOwogICAgICB2YXIgciA9IGJpdCAlIDI2OwogICAgICB2YXIgcyA9IChiaXQgLSByKSAvIDI2OwogICAgICB2YXIgcSA9IDEgPDwgcjsKCiAgICAgIC8vIEZhc3QgY2FzZTogYml0IGlzIG11Y2ggaGlnaGVyIHRoYW4gYWxsIGV4aXN0aW5nIHdvcmRzCiAgICAgIGlmICh0aGlzLmxlbmd0aCA8PSBzKSB7CiAgICAgICAgdGhpcy5fZXhwYW5kKHMgKyAxKTsKICAgICAgICB0aGlzLndvcmRzW3NdIHw9IHE7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0KCiAgICAgIC8vIEFkZCBiaXQgYW5kIHByb3BhZ2F0ZSwgaWYgbmVlZGVkCiAgICAgIHZhciBjYXJyeSA9IHE7CiAgICAgIGZvciAodmFyIGkgPSBzOyBjYXJyeSAhPT0gMCAmJiBpIDwgdGhpcy5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciB3ID0gdGhpcy53b3Jkc1tpXSB8IDA7CiAgICAgICAgdyArPSBjYXJyeTsKICAgICAgICBjYXJyeSA9IHcgPj4+IDI2OwogICAgICAgIHcgJj0gMHgzZmZmZmZmOwogICAgICAgIHRoaXMud29yZHNbaV0gPSB3OwogICAgICB9CiAgICAgIGlmIChjYXJyeSAhPT0gMCkgewogICAgICAgIHRoaXMud29yZHNbaV0gPSBjYXJyeTsKICAgICAgICB0aGlzLmxlbmd0aCsrOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuaXNaZXJvID0gZnVuY3Rpb24gaXNaZXJvICgpIHsKICAgICAgcmV0dXJuIHRoaXMubGVuZ3RoID09PSAxICYmIHRoaXMud29yZHNbMF0gPT09IDA7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5jbXBuID0gZnVuY3Rpb24gY21wbiAobnVtKSB7CiAgICAgIHZhciBuZWdhdGl2ZSA9IG51bSA8IDA7CgogICAgICBpZiAodGhpcy5uZWdhdGl2ZSAhPT0gMCAmJiAhbmVnYXRpdmUpIHJldHVybiAtMTsKICAgICAgaWYgKHRoaXMubmVnYXRpdmUgPT09IDAgJiYgbmVnYXRpdmUpIHJldHVybiAxOwoKICAgICAgdGhpcy5zdHJpcCgpOwoKICAgICAgdmFyIHJlczsKICAgICAgaWYgKHRoaXMubGVuZ3RoID4gMSkgewogICAgICAgIHJlcyA9IDE7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKG5lZ2F0aXZlKSB7CiAgICAgICAgICBudW0gPSAtbnVtOwogICAgICAgIH0KCiAgICAgICAgYXNzZXJ0KG51bSA8PSAweDNmZmZmZmYsICdOdW1iZXIgaXMgdG9vIGJpZycpOwoKICAgICAgICB2YXIgdyA9IHRoaXMud29yZHNbMF0gfCAwOwogICAgICAgIHJlcyA9IHcgPT09IG51bSA/IDAgOiB3IDwgbnVtID8gLTEgOiAxOwogICAgICB9CiAgICAgIGlmICh0aGlzLm5lZ2F0aXZlICE9PSAwKSByZXR1cm4gLXJlcyB8IDA7CiAgICAgIHJldHVybiByZXM7CiAgICB9OwoKICAgIC8vIENvbXBhcmUgdHdvIG51bWJlcnMgYW5kIHJldHVybjoKICAgIC8vIDEgLSBpZiBgdGhpc2AgPiBgbnVtYAogICAgLy8gMCAtIGlmIGB0aGlzYCA9PSBgbnVtYAogICAgLy8gLTEgLSBpZiBgdGhpc2AgPCBgbnVtYAogICAgQk4ucHJvdG90eXBlLmNtcCA9IGZ1bmN0aW9uIGNtcCAobnVtKSB7CiAgICAgIGlmICh0aGlzLm5lZ2F0aXZlICE9PSAwICYmIG51bS5uZWdhdGl2ZSA9PT0gMCkgcmV0dXJuIC0xOwogICAgICBpZiAodGhpcy5uZWdhdGl2ZSA9PT0gMCAmJiBudW0ubmVnYXRpdmUgIT09IDApIHJldHVybiAxOwoKICAgICAgdmFyIHJlcyA9IHRoaXMudWNtcChudW0pOwogICAgICBpZiAodGhpcy5uZWdhdGl2ZSAhPT0gMCkgcmV0dXJuIC1yZXMgfCAwOwogICAgICByZXR1cm4gcmVzOwogICAgfTsKCiAgICAvLyBVbnNpZ25lZCBjb21wYXJpc29uCiAgICBCTi5wcm90b3R5cGUudWNtcCA9IGZ1bmN0aW9uIHVjbXAgKG51bSkgewogICAgICAvLyBBdCB0aGlzIHBvaW50IGJvdGggbnVtYmVycyBoYXZlIHRoZSBzYW1lIHNpZ24KICAgICAgaWYgKHRoaXMubGVuZ3RoID4gbnVtLmxlbmd0aCkgcmV0dXJuIDE7CiAgICAgIGlmICh0aGlzLmxlbmd0aCA8IG51bS5sZW5ndGgpIHJldHVybiAtMTsKCiAgICAgIHZhciByZXMgPSAwOwogICAgICBmb3IgKHZhciBpID0gdGhpcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgICAgIHZhciBhID0gdGhpcy53b3Jkc1tpXSB8IDA7CiAgICAgICAgdmFyIGIgPSBudW0ud29yZHNbaV0gfCAwOwoKICAgICAgICBpZiAoYSA9PT0gYikgY29udGludWU7CiAgICAgICAgaWYgKGEgPCBiKSB7CiAgICAgICAgICByZXMgPSAtMTsKICAgICAgICB9IGVsc2UgaWYgKGEgPiBiKSB7CiAgICAgICAgICByZXMgPSAxOwogICAgICAgIH0KICAgICAgICBicmVhazsKICAgICAgfQogICAgICByZXR1cm4gcmVzOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuZ3RuID0gZnVuY3Rpb24gZ3RuIChudW0pIHsKICAgICAgcmV0dXJuIHRoaXMuY21wbihudW0pID09PSAxOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuZ3QgPSBmdW5jdGlvbiBndCAobnVtKSB7CiAgICAgIHJldHVybiB0aGlzLmNtcChudW0pID09PSAxOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuZ3RlbiA9IGZ1bmN0aW9uIGd0ZW4gKG51bSkgewogICAgICByZXR1cm4gdGhpcy5jbXBuKG51bSkgPj0gMDsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmd0ZSA9IGZ1bmN0aW9uIGd0ZSAobnVtKSB7CiAgICAgIHJldHVybiB0aGlzLmNtcChudW0pID49IDA7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5sdG4gPSBmdW5jdGlvbiBsdG4gKG51bSkgewogICAgICByZXR1cm4gdGhpcy5jbXBuKG51bSkgPT09IC0xOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUubHQgPSBmdW5jdGlvbiBsdCAobnVtKSB7CiAgICAgIHJldHVybiB0aGlzLmNtcChudW0pID09PSAtMTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmx0ZW4gPSBmdW5jdGlvbiBsdGVuIChudW0pIHsKICAgICAgcmV0dXJuIHRoaXMuY21wbihudW0pIDw9IDA7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5sdGUgPSBmdW5jdGlvbiBsdGUgKG51bSkgewogICAgICByZXR1cm4gdGhpcy5jbXAobnVtKSA8PSAwOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuZXFuID0gZnVuY3Rpb24gZXFuIChudW0pIHsKICAgICAgcmV0dXJuIHRoaXMuY21wbihudW0pID09PSAwOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuZXEgPSBmdW5jdGlvbiBlcSAobnVtKSB7CiAgICAgIHJldHVybiB0aGlzLmNtcChudW0pID09PSAwOwogICAgfTsKCiAgICAvLwogICAgLy8gQSByZWR1Y2UgY29udGV4dCwgY291bGQgYmUgdXNpbmcgbW9udGdvbWVyeSBvciBzb21ldGhpbmcgYmV0dGVyLCBkZXBlbmRpbmcKICAgIC8vIG9uIHRoZSBgbWAgaXRzZWxmLgogICAgLy8KICAgIEJOLnJlZCA9IGZ1bmN0aW9uIHJlZCAobnVtKSB7CiAgICAgIHJldHVybiBuZXcgUmVkKG51bSk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS50b1JlZCA9IGZ1bmN0aW9uIHRvUmVkIChjdHgpIHsKICAgICAgYXNzZXJ0KCF0aGlzLnJlZCwgJ0FscmVhZHkgYSBudW1iZXIgaW4gcmVkdWN0aW9uIGNvbnRleHQnKTsKICAgICAgYXNzZXJ0KHRoaXMubmVnYXRpdmUgPT09IDAsICdyZWQgd29ya3Mgb25seSB3aXRoIHBvc2l0aXZlcycpOwogICAgICByZXR1cm4gY3R4LmNvbnZlcnRUbyh0aGlzKS5fZm9yY2VSZWQoY3R4KTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmZyb21SZWQgPSBmdW5jdGlvbiBmcm9tUmVkICgpIHsKICAgICAgYXNzZXJ0KHRoaXMucmVkLCAnZnJvbVJlZCB3b3JrcyBvbmx5IHdpdGggbnVtYmVycyBpbiByZWR1Y3Rpb24gY29udGV4dCcpOwogICAgICByZXR1cm4gdGhpcy5yZWQuY29udmVydEZyb20odGhpcyk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5fZm9yY2VSZWQgPSBmdW5jdGlvbiBfZm9yY2VSZWQgKGN0eCkgewogICAgICB0aGlzLnJlZCA9IGN0eDsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5mb3JjZVJlZCA9IGZ1bmN0aW9uIGZvcmNlUmVkIChjdHgpIHsKICAgICAgYXNzZXJ0KCF0aGlzLnJlZCwgJ0FscmVhZHkgYSBudW1iZXIgaW4gcmVkdWN0aW9uIGNvbnRleHQnKTsKICAgICAgcmV0dXJuIHRoaXMuX2ZvcmNlUmVkKGN0eCk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5yZWRBZGQgPSBmdW5jdGlvbiByZWRBZGQgKG51bSkgewogICAgICBhc3NlcnQodGhpcy5yZWQsICdyZWRBZGQgd29ya3Mgb25seSB3aXRoIHJlZCBudW1iZXJzJyk7CiAgICAgIHJldHVybiB0aGlzLnJlZC5hZGQodGhpcywgbnVtKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLnJlZElBZGQgPSBmdW5jdGlvbiByZWRJQWRkIChudW0pIHsKICAgICAgYXNzZXJ0KHRoaXMucmVkLCAncmVkSUFkZCB3b3JrcyBvbmx5IHdpdGggcmVkIG51bWJlcnMnKTsKICAgICAgcmV0dXJuIHRoaXMucmVkLmlhZGQodGhpcywgbnVtKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLnJlZFN1YiA9IGZ1bmN0aW9uIHJlZFN1YiAobnVtKSB7CiAgICAgIGFzc2VydCh0aGlzLnJlZCwgJ3JlZFN1YiB3b3JrcyBvbmx5IHdpdGggcmVkIG51bWJlcnMnKTsKICAgICAgcmV0dXJuIHRoaXMucmVkLnN1Yih0aGlzLCBudW0pOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUucmVkSVN1YiA9IGZ1bmN0aW9uIHJlZElTdWIgKG51bSkgewogICAgICBhc3NlcnQodGhpcy5yZWQsICdyZWRJU3ViIHdvcmtzIG9ubHkgd2l0aCByZWQgbnVtYmVycycpOwogICAgICByZXR1cm4gdGhpcy5yZWQuaXN1Yih0aGlzLCBudW0pOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUucmVkU2hsID0gZnVuY3Rpb24gcmVkU2hsIChudW0pIHsKICAgICAgYXNzZXJ0KHRoaXMucmVkLCAncmVkU2hsIHdvcmtzIG9ubHkgd2l0aCByZWQgbnVtYmVycycpOwogICAgICByZXR1cm4gdGhpcy5yZWQuc2hsKHRoaXMsIG51bSk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5yZWRNdWwgPSBmdW5jdGlvbiByZWRNdWwgKG51bSkgewogICAgICBhc3NlcnQodGhpcy5yZWQsICdyZWRNdWwgd29ya3Mgb25seSB3aXRoIHJlZCBudW1iZXJzJyk7CiAgICAgIHRoaXMucmVkLl92ZXJpZnkyKHRoaXMsIG51bSk7CiAgICAgIHJldHVybiB0aGlzLnJlZC5tdWwodGhpcywgbnVtKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLnJlZElNdWwgPSBmdW5jdGlvbiByZWRJTXVsIChudW0pIHsKICAgICAgYXNzZXJ0KHRoaXMucmVkLCAncmVkTXVsIHdvcmtzIG9ubHkgd2l0aCByZWQgbnVtYmVycycpOwogICAgICB0aGlzLnJlZC5fdmVyaWZ5Mih0aGlzLCBudW0pOwogICAgICByZXR1cm4gdGhpcy5yZWQuaW11bCh0aGlzLCBudW0pOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUucmVkU3FyID0gZnVuY3Rpb24gcmVkU3FyICgpIHsKICAgICAgYXNzZXJ0KHRoaXMucmVkLCAncmVkU3FyIHdvcmtzIG9ubHkgd2l0aCByZWQgbnVtYmVycycpOwogICAgICB0aGlzLnJlZC5fdmVyaWZ5MSh0aGlzKTsKICAgICAgcmV0dXJuIHRoaXMucmVkLnNxcih0aGlzKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLnJlZElTcXIgPSBmdW5jdGlvbiByZWRJU3FyICgpIHsKICAgICAgYXNzZXJ0KHRoaXMucmVkLCAncmVkSVNxciB3b3JrcyBvbmx5IHdpdGggcmVkIG51bWJlcnMnKTsKICAgICAgdGhpcy5yZWQuX3ZlcmlmeTEodGhpcyk7CiAgICAgIHJldHVybiB0aGlzLnJlZC5pc3FyKHRoaXMpOwogICAgfTsKCiAgICAvLyBTcXVhcmUgcm9vdCBvdmVyIHAKICAgIEJOLnByb3RvdHlwZS5yZWRTcXJ0ID0gZnVuY3Rpb24gcmVkU3FydCAoKSB7CiAgICAgIGFzc2VydCh0aGlzLnJlZCwgJ3JlZFNxcnQgd29ya3Mgb25seSB3aXRoIHJlZCBudW1iZXJzJyk7CiAgICAgIHRoaXMucmVkLl92ZXJpZnkxKHRoaXMpOwogICAgICByZXR1cm4gdGhpcy5yZWQuc3FydCh0aGlzKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLnJlZEludm0gPSBmdW5jdGlvbiByZWRJbnZtICgpIHsKICAgICAgYXNzZXJ0KHRoaXMucmVkLCAncmVkSW52bSB3b3JrcyBvbmx5IHdpdGggcmVkIG51bWJlcnMnKTsKICAgICAgdGhpcy5yZWQuX3ZlcmlmeTEodGhpcyk7CiAgICAgIHJldHVybiB0aGlzLnJlZC5pbnZtKHRoaXMpOwogICAgfTsKCiAgICAvLyBSZXR1cm4gbmVnYXRpdmUgY2xvbmUgb2YgYHRoaXNgICUgYHJlZCBtb2R1bG9gCiAgICBCTi5wcm90b3R5cGUucmVkTmVnID0gZnVuY3Rpb24gcmVkTmVnICgpIHsKICAgICAgYXNzZXJ0KHRoaXMucmVkLCAncmVkTmVnIHdvcmtzIG9ubHkgd2l0aCByZWQgbnVtYmVycycpOwogICAgICB0aGlzLnJlZC5fdmVyaWZ5MSh0aGlzKTsKICAgICAgcmV0dXJuIHRoaXMucmVkLm5lZyh0aGlzKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLnJlZFBvdyA9IGZ1bmN0aW9uIHJlZFBvdyAobnVtKSB7CiAgICAgIGFzc2VydCh0aGlzLnJlZCAmJiAhbnVtLnJlZCwgJ3JlZFBvdyhub3JtYWxOdW0pJyk7CiAgICAgIHRoaXMucmVkLl92ZXJpZnkxKHRoaXMpOwogICAgICByZXR1cm4gdGhpcy5yZWQucG93KHRoaXMsIG51bSk7CiAgICB9OwoKICAgIC8vIFByaW1lIG51bWJlcnMgd2l0aCBlZmZpY2llbnQgcmVkdWN0aW9uCiAgICB2YXIgcHJpbWVzID0gewogICAgICBrMjU2OiBudWxsLAogICAgICBwMjI0OiBudWxsLAogICAgICBwMTkyOiBudWxsLAogICAgICBwMjU1MTk6IG51bGwKICAgIH07CgogICAgLy8gUHNldWRvLU1lcnNlbm5lIHByaW1lCiAgICBmdW5jdGlvbiBNUHJpbWUgKG5hbWUsIHApIHsKICAgICAgLy8gUCA9IDIgXiBOIC0gSwogICAgICB0aGlzLm5hbWUgPSBuYW1lOwogICAgICB0aGlzLnAgPSBuZXcgQk4ocCwgMTYpOwogICAgICB0aGlzLm4gPSB0aGlzLnAuYml0TGVuZ3RoKCk7CiAgICAgIHRoaXMuayA9IG5ldyBCTigxKS5pdXNobG4odGhpcy5uKS5pc3ViKHRoaXMucCk7CgogICAgICB0aGlzLnRtcCA9IHRoaXMuX3RtcCgpOwogICAgfQoKICAgIE1QcmltZS5wcm90b3R5cGUuX3RtcCA9IGZ1bmN0aW9uIF90bXAgKCkgewogICAgICB2YXIgdG1wID0gbmV3IEJOKG51bGwpOwogICAgICB0bXAud29yZHMgPSBuZXcgQXJyYXkoTWF0aC5jZWlsKHRoaXMubiAvIDEzKSk7CiAgICAgIHJldHVybiB0bXA7CiAgICB9OwoKICAgIE1QcmltZS5wcm90b3R5cGUuaXJlZHVjZSA9IGZ1bmN0aW9uIGlyZWR1Y2UgKG51bSkgewogICAgICAvLyBBc3N1bWVzIHRoYXQgYG51bWAgaXMgbGVzcyB0aGFuIGBQXjJgCiAgICAgIC8vIG51bSA9IEhJICogKDIgXiBOIC0gSykgKyBISSAqIEsgKyBMTyA9IEhJICogSyArIExPIChtb2QgUCkKICAgICAgdmFyIHIgPSBudW07CiAgICAgIHZhciBybGVuOwoKICAgICAgZG8gewogICAgICAgIHRoaXMuc3BsaXQociwgdGhpcy50bXApOwogICAgICAgIHIgPSB0aGlzLmltdWxLKHIpOwogICAgICAgIHIgPSByLmlhZGQodGhpcy50bXApOwogICAgICAgIHJsZW4gPSByLmJpdExlbmd0aCgpOwogICAgICB9IHdoaWxlIChybGVuID4gdGhpcy5uKTsKCiAgICAgIHZhciBjbXAgPSBybGVuIDwgdGhpcy5uID8gLTEgOiByLnVjbXAodGhpcy5wKTsKICAgICAgaWYgKGNtcCA9PT0gMCkgewogICAgICAgIHIud29yZHNbMF0gPSAwOwogICAgICAgIHIubGVuZ3RoID0gMTsKICAgICAgfSBlbHNlIGlmIChjbXAgPiAwKSB7CiAgICAgICAgci5pc3ViKHRoaXMucCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKHIuc3RyaXAgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgLy8gciBpcyBCTiB2NCBpbnN0YW5jZQogICAgICAgICAgci5zdHJpcCgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyByIGlzIEJOIHY1IGluc3RhbmNlCiAgICAgICAgICByLl9zdHJpcCgpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHI7CiAgICB9OwoKICAgIE1QcmltZS5wcm90b3R5cGUuc3BsaXQgPSBmdW5jdGlvbiBzcGxpdCAoaW5wdXQsIG91dCkgewogICAgICBpbnB1dC5pdXNocm4odGhpcy5uLCAwLCBvdXQpOwogICAgfTsKCiAgICBNUHJpbWUucHJvdG90eXBlLmltdWxLID0gZnVuY3Rpb24gaW11bEsgKG51bSkgewogICAgICByZXR1cm4gbnVtLmltdWwodGhpcy5rKTsKICAgIH07CgogICAgZnVuY3Rpb24gSzI1NiAoKSB7CiAgICAgIE1QcmltZS5jYWxsKAogICAgICAgIHRoaXMsCiAgICAgICAgJ2syNTYnLAogICAgICAgICdmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZSBmZmZmZmMyZicpOwogICAgfQogICAgaW5oZXJpdHMoSzI1NiwgTVByaW1lKTsKCiAgICBLMjU2LnByb3RvdHlwZS5zcGxpdCA9IGZ1bmN0aW9uIHNwbGl0IChpbnB1dCwgb3V0cHV0KSB7CiAgICAgIC8vIDI1NiA9IDkgKiAyNiArIDIyCiAgICAgIHZhciBtYXNrID0gMHgzZmZmZmY7CgogICAgICB2YXIgb3V0TGVuID0gTWF0aC5taW4oaW5wdXQubGVuZ3RoLCA5KTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvdXRMZW47IGkrKykgewogICAgICAgIG91dHB1dC53b3Jkc1tpXSA9IGlucHV0LndvcmRzW2ldOwogICAgICB9CiAgICAgIG91dHB1dC5sZW5ndGggPSBvdXRMZW47CgogICAgICBpZiAoaW5wdXQubGVuZ3RoIDw9IDkpIHsKICAgICAgICBpbnB1dC53b3Jkc1swXSA9IDA7CiAgICAgICAgaW5wdXQubGVuZ3RoID0gMTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIC8vIFNoaWZ0IGJ5IDkgbGltYnMKICAgICAgdmFyIHByZXYgPSBpbnB1dC53b3Jkc1s5XTsKICAgICAgb3V0cHV0LndvcmRzW291dHB1dC5sZW5ndGgrK10gPSBwcmV2ICYgbWFzazsKCiAgICAgIGZvciAoaSA9IDEwOyBpIDwgaW5wdXQubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgbmV4dCA9IGlucHV0LndvcmRzW2ldIHwgMDsKICAgICAgICBpbnB1dC53b3Jkc1tpIC0gMTBdID0gKChuZXh0ICYgbWFzaykgPDwgNCkgfCAocHJldiA+Pj4gMjIpOwogICAgICAgIHByZXYgPSBuZXh0OwogICAgICB9CiAgICAgIHByZXYgPj4+PSAyMjsKICAgICAgaW5wdXQud29yZHNbaSAtIDEwXSA9IHByZXY7CiAgICAgIGlmIChwcmV2ID09PSAwICYmIGlucHV0Lmxlbmd0aCA+IDEwKSB7CiAgICAgICAgaW5wdXQubGVuZ3RoIC09IDEwOwogICAgICB9IGVsc2UgewogICAgICAgIGlucHV0Lmxlbmd0aCAtPSA5OwogICAgICB9CiAgICB9OwoKICAgIEsyNTYucHJvdG90eXBlLmltdWxLID0gZnVuY3Rpb24gaW11bEsgKG51bSkgewogICAgICAvLyBLID0gMHgxMDAwMDAzZDEgPSBbIDB4NDAsIDB4M2QxIF0KICAgICAgbnVtLndvcmRzW251bS5sZW5ndGhdID0gMDsKICAgICAgbnVtLndvcmRzW251bS5sZW5ndGggKyAxXSA9IDA7CiAgICAgIG51bS5sZW5ndGggKz0gMjsKCiAgICAgIC8vIGJvdW5kZWQgYXQ6IDB4NDAgKiAweDNmZmZmZmYgKyAweDNkMCA9IDB4MTAwMDAwMzkwCiAgICAgIHZhciBsbyA9IDA7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIHcgPSBudW0ud29yZHNbaV0gfCAwOwogICAgICAgIGxvICs9IHcgKiAweDNkMTsKICAgICAgICBudW0ud29yZHNbaV0gPSBsbyAmIDB4M2ZmZmZmZjsKICAgICAgICBsbyA9IHcgKiAweDQwICsgKChsbyAvIDB4NDAwMDAwMCkgfCAwKTsKICAgICAgfQoKICAgICAgLy8gRmFzdCBsZW5ndGggcmVkdWN0aW9uCiAgICAgIGlmIChudW0ud29yZHNbbnVtLmxlbmd0aCAtIDFdID09PSAwKSB7CiAgICAgICAgbnVtLmxlbmd0aC0tOwogICAgICAgIGlmIChudW0ud29yZHNbbnVtLmxlbmd0aCAtIDFdID09PSAwKSB7CiAgICAgICAgICBudW0ubGVuZ3RoLS07CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBudW07CiAgICB9OwoKICAgIGZ1bmN0aW9uIFAyMjQgKCkgewogICAgICBNUHJpbWUuY2FsbCgKICAgICAgICB0aGlzLAogICAgICAgICdwMjI0JywKICAgICAgICAnZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgMDAwMDAwMDAgMDAwMDAwMDAgMDAwMDAwMDEnKTsKICAgIH0KICAgIGluaGVyaXRzKFAyMjQsIE1QcmltZSk7CgogICAgZnVuY3Rpb24gUDE5MiAoKSB7CiAgICAgIE1QcmltZS5jYWxsKAogICAgICAgIHRoaXMsCiAgICAgICAgJ3AxOTInLAogICAgICAgICdmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZSBmZmZmZmZmZiBmZmZmZmZmZicpOwogICAgfQogICAgaW5oZXJpdHMoUDE5MiwgTVByaW1lKTsKCiAgICBmdW5jdGlvbiBQMjU1MTkgKCkgewogICAgICAvLyAyIF4gMjU1IC0gMTkKICAgICAgTVByaW1lLmNhbGwoCiAgICAgICAgdGhpcywKICAgICAgICAnMjU1MTknLAogICAgICAgICc3ZmZmZmZmZmZmZmZmZmZmIGZmZmZmZmZmZmZmZmZmZmYgZmZmZmZmZmZmZmZmZmZmZiBmZmZmZmZmZmZmZmZmZmVkJyk7CiAgICB9CiAgICBpbmhlcml0cyhQMjU1MTksIE1QcmltZSk7CgogICAgUDI1NTE5LnByb3RvdHlwZS5pbXVsSyA9IGZ1bmN0aW9uIGltdWxLIChudW0pIHsKICAgICAgLy8gSyA9IDB4MTMKICAgICAgdmFyIGNhcnJ5ID0gMDsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW0ubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgaGkgPSAobnVtLndvcmRzW2ldIHwgMCkgKiAweDEzICsgY2Fycnk7CiAgICAgICAgdmFyIGxvID0gaGkgJiAweDNmZmZmZmY7CiAgICAgICAgaGkgPj4+PSAyNjsKCiAgICAgICAgbnVtLndvcmRzW2ldID0gbG87CiAgICAgICAgY2FycnkgPSBoaTsKICAgICAgfQogICAgICBpZiAoY2FycnkgIT09IDApIHsKICAgICAgICBudW0ud29yZHNbbnVtLmxlbmd0aCsrXSA9IGNhcnJ5OwogICAgICB9CiAgICAgIHJldHVybiBudW07CiAgICB9OwoKICAgIC8vIEV4cG9ydGVkIG1vc3RseSBmb3IgdGVzdGluZyBwdXJwb3NlcywgdXNlIHBsYWluIG5hbWUgaW5zdGVhZAogICAgQk4uX3ByaW1lID0gZnVuY3Rpb24gcHJpbWUgKG5hbWUpIHsKICAgICAgLy8gQ2FjaGVkIHZlcnNpb24gb2YgcHJpbWUKICAgICAgaWYgKHByaW1lc1tuYW1lXSkgcmV0dXJuIHByaW1lc1tuYW1lXTsKCiAgICAgIHZhciBwcmltZTsKICAgICAgaWYgKG5hbWUgPT09ICdrMjU2JykgewogICAgICAgIHByaW1lID0gbmV3IEsyNTYoKTsKICAgICAgfSBlbHNlIGlmIChuYW1lID09PSAncDIyNCcpIHsKICAgICAgICBwcmltZSA9IG5ldyBQMjI0KCk7CiAgICAgIH0gZWxzZSBpZiAobmFtZSA9PT0gJ3AxOTInKSB7CiAgICAgICAgcHJpbWUgPSBuZXcgUDE5MigpOwogICAgICB9IGVsc2UgaWYgKG5hbWUgPT09ICdwMjU1MTknKSB7CiAgICAgICAgcHJpbWUgPSBuZXcgUDI1NTE5KCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmtub3duIHByaW1lICcgKyBuYW1lKTsKICAgICAgfQogICAgICBwcmltZXNbbmFtZV0gPSBwcmltZTsKCiAgICAgIHJldHVybiBwcmltZTsKICAgIH07CgogICAgLy8KICAgIC8vIEJhc2UgcmVkdWN0aW9uIGVuZ2luZQogICAgLy8KICAgIGZ1bmN0aW9uIFJlZCAobSkgewogICAgICBpZiAodHlwZW9mIG0gPT09ICdzdHJpbmcnKSB7CiAgICAgICAgdmFyIHByaW1lID0gQk4uX3ByaW1lKG0pOwogICAgICAgIHRoaXMubSA9IHByaW1lLnA7CiAgICAgICAgdGhpcy5wcmltZSA9IHByaW1lOwogICAgICB9IGVsc2UgewogICAgICAgIGFzc2VydChtLmd0bigxKSwgJ21vZHVsdXMgbXVzdCBiZSBncmVhdGVyIHRoYW4gMScpOwogICAgICAgIHRoaXMubSA9IG07CiAgICAgICAgdGhpcy5wcmltZSA9IG51bGw7CiAgICAgIH0KICAgIH0KCiAgICBSZWQucHJvdG90eXBlLl92ZXJpZnkxID0gZnVuY3Rpb24gX3ZlcmlmeTEgKGEpIHsKICAgICAgYXNzZXJ0KGEubmVnYXRpdmUgPT09IDAsICdyZWQgd29ya3Mgb25seSB3aXRoIHBvc2l0aXZlcycpOwogICAgICBhc3NlcnQoYS5yZWQsICdyZWQgd29ya3Mgb25seSB3aXRoIHJlZCBudW1iZXJzJyk7CiAgICB9OwoKICAgIFJlZC5wcm90b3R5cGUuX3ZlcmlmeTIgPSBmdW5jdGlvbiBfdmVyaWZ5MiAoYSwgYikgewogICAgICBhc3NlcnQoKGEubmVnYXRpdmUgfCBiLm5lZ2F0aXZlKSA9PT0gMCwgJ3JlZCB3b3JrcyBvbmx5IHdpdGggcG9zaXRpdmVzJyk7CiAgICAgIGFzc2VydChhLnJlZCAmJiBhLnJlZCA9PT0gYi5yZWQsCiAgICAgICAgJ3JlZCB3b3JrcyBvbmx5IHdpdGggcmVkIG51bWJlcnMnKTsKICAgIH07CgogICAgUmVkLnByb3RvdHlwZS5pbW9kID0gZnVuY3Rpb24gaW1vZCAoYSkgewogICAgICBpZiAodGhpcy5wcmltZSkgcmV0dXJuIHRoaXMucHJpbWUuaXJlZHVjZShhKS5fZm9yY2VSZWQodGhpcyk7CiAgICAgIHJldHVybiBhLnVtb2QodGhpcy5tKS5fZm9yY2VSZWQodGhpcyk7CiAgICB9OwoKICAgIFJlZC5wcm90b3R5cGUubmVnID0gZnVuY3Rpb24gbmVnIChhKSB7CiAgICAgIGlmIChhLmlzWmVybygpKSB7CiAgICAgICAgcmV0dXJuIGEuY2xvbmUoKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMubS5zdWIoYSkuX2ZvcmNlUmVkKHRoaXMpOwogICAgfTsKCiAgICBSZWQucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIGFkZCAoYSwgYikgewogICAgICB0aGlzLl92ZXJpZnkyKGEsIGIpOwoKICAgICAgdmFyIHJlcyA9IGEuYWRkKGIpOwogICAgICBpZiAocmVzLmNtcCh0aGlzLm0pID49IDApIHsKICAgICAgICByZXMuaXN1Yih0aGlzLm0pOwogICAgICB9CiAgICAgIHJldHVybiByZXMuX2ZvcmNlUmVkKHRoaXMpOwogICAgfTsKCiAgICBSZWQucHJvdG90eXBlLmlhZGQgPSBmdW5jdGlvbiBpYWRkIChhLCBiKSB7CiAgICAgIHRoaXMuX3ZlcmlmeTIoYSwgYik7CgogICAgICB2YXIgcmVzID0gYS5pYWRkKGIpOwogICAgICBpZiAocmVzLmNtcCh0aGlzLm0pID49IDApIHsKICAgICAgICByZXMuaXN1Yih0aGlzLm0pOwogICAgICB9CiAgICAgIHJldHVybiByZXM7CiAgICB9OwoKICAgIFJlZC5wcm90b3R5cGUuc3ViID0gZnVuY3Rpb24gc3ViIChhLCBiKSB7CiAgICAgIHRoaXMuX3ZlcmlmeTIoYSwgYik7CgogICAgICB2YXIgcmVzID0gYS5zdWIoYik7CiAgICAgIGlmIChyZXMuY21wbigwKSA8IDApIHsKICAgICAgICByZXMuaWFkZCh0aGlzLm0pOwogICAgICB9CiAgICAgIHJldHVybiByZXMuX2ZvcmNlUmVkKHRoaXMpOwogICAgfTsKCiAgICBSZWQucHJvdG90eXBlLmlzdWIgPSBmdW5jdGlvbiBpc3ViIChhLCBiKSB7CiAgICAgIHRoaXMuX3ZlcmlmeTIoYSwgYik7CgogICAgICB2YXIgcmVzID0gYS5pc3ViKGIpOwogICAgICBpZiAocmVzLmNtcG4oMCkgPCAwKSB7CiAgICAgICAgcmVzLmlhZGQodGhpcy5tKTsKICAgICAgfQogICAgICByZXR1cm4gcmVzOwogICAgfTsKCiAgICBSZWQucHJvdG90eXBlLnNobCA9IGZ1bmN0aW9uIHNobCAoYSwgbnVtKSB7CiAgICAgIHRoaXMuX3ZlcmlmeTEoYSk7CiAgICAgIHJldHVybiB0aGlzLmltb2QoYS51c2hsbihudW0pKTsKICAgIH07CgogICAgUmVkLnByb3RvdHlwZS5pbXVsID0gZnVuY3Rpb24gaW11bCAoYSwgYikgewogICAgICB0aGlzLl92ZXJpZnkyKGEsIGIpOwogICAgICByZXR1cm4gdGhpcy5pbW9kKGEuaW11bChiKSk7CiAgICB9OwoKICAgIFJlZC5wcm90b3R5cGUubXVsID0gZnVuY3Rpb24gbXVsIChhLCBiKSB7CiAgICAgIHRoaXMuX3ZlcmlmeTIoYSwgYik7CiAgICAgIHJldHVybiB0aGlzLmltb2QoYS5tdWwoYikpOwogICAgfTsKCiAgICBSZWQucHJvdG90eXBlLmlzcXIgPSBmdW5jdGlvbiBpc3FyIChhKSB7CiAgICAgIHJldHVybiB0aGlzLmltdWwoYSwgYS5jbG9uZSgpKTsKICAgIH07CgogICAgUmVkLnByb3RvdHlwZS5zcXIgPSBmdW5jdGlvbiBzcXIgKGEpIHsKICAgICAgcmV0dXJuIHRoaXMubXVsKGEsIGEpOwogICAgfTsKCiAgICBSZWQucHJvdG90eXBlLnNxcnQgPSBmdW5jdGlvbiBzcXJ0IChhKSB7CiAgICAgIGlmIChhLmlzWmVybygpKSByZXR1cm4gYS5jbG9uZSgpOwoKICAgICAgdmFyIG1vZDMgPSB0aGlzLm0uYW5kbG4oMyk7CiAgICAgIGFzc2VydChtb2QzICUgMiA9PT0gMSk7CgogICAgICAvLyBGYXN0IGNhc2UKICAgICAgaWYgKG1vZDMgPT09IDMpIHsKICAgICAgICB2YXIgcG93ID0gdGhpcy5tLmFkZChuZXcgQk4oMSkpLml1c2hybigyKTsKICAgICAgICByZXR1cm4gdGhpcy5wb3coYSwgcG93KTsKICAgICAgfQoKICAgICAgLy8gVG9uZWxsaS1TaGFua3MgYWxnb3JpdGhtIChUb3RhbGx5IHVub3B0aW1pemVkIGFuZCBzbG93KQogICAgICAvLwogICAgICAvLyBGaW5kIFEgYW5kIFMsIHRoYXQgUSAqIDIgXiBTID0gKFAgLSAxKQogICAgICB2YXIgcSA9IHRoaXMubS5zdWJuKDEpOwogICAgICB2YXIgcyA9IDA7CiAgICAgIHdoaWxlICghcS5pc1plcm8oKSAmJiBxLmFuZGxuKDEpID09PSAwKSB7CiAgICAgICAgcysrOwogICAgICAgIHEuaXVzaHJuKDEpOwogICAgICB9CiAgICAgIGFzc2VydCghcS5pc1plcm8oKSk7CgogICAgICB2YXIgb25lID0gbmV3IEJOKDEpLnRvUmVkKHRoaXMpOwogICAgICB2YXIgbk9uZSA9IG9uZS5yZWROZWcoKTsKCiAgICAgIC8vIEZpbmQgcXVhZHJhdGljIG5vbi1yZXNpZHVlCiAgICAgIC8vIE5PVEU6IE1heCBpcyBzdWNoIGJlY2F1c2Ugb2YgZ2VuZXJhbGl6ZWQgUmllbWFubiBoeXBvdGhlc2lzLgogICAgICB2YXIgbHBvdyA9IHRoaXMubS5zdWJuKDEpLml1c2hybigxKTsKICAgICAgdmFyIHogPSB0aGlzLm0uYml0TGVuZ3RoKCk7CiAgICAgIHogPSBuZXcgQk4oMiAqIHogKiB6KS50b1JlZCh0aGlzKTsKCiAgICAgIHdoaWxlICh0aGlzLnBvdyh6LCBscG93KS5jbXAobk9uZSkgIT09IDApIHsKICAgICAgICB6LnJlZElBZGQobk9uZSk7CiAgICAgIH0KCiAgICAgIHZhciBjID0gdGhpcy5wb3coeiwgcSk7CiAgICAgIHZhciByID0gdGhpcy5wb3coYSwgcS5hZGRuKDEpLml1c2hybigxKSk7CiAgICAgIHZhciB0ID0gdGhpcy5wb3coYSwgcSk7CiAgICAgIHZhciBtID0gczsKICAgICAgd2hpbGUgKHQuY21wKG9uZSkgIT09IDApIHsKICAgICAgICB2YXIgdG1wID0gdDsKICAgICAgICBmb3IgKHZhciBpID0gMDsgdG1wLmNtcChvbmUpICE9PSAwOyBpKyspIHsKICAgICAgICAgIHRtcCA9IHRtcC5yZWRTcXIoKTsKICAgICAgICB9CiAgICAgICAgYXNzZXJ0KGkgPCBtKTsKICAgICAgICB2YXIgYiA9IHRoaXMucG93KGMsIG5ldyBCTigxKS5pdXNobG4obSAtIGkgLSAxKSk7CgogICAgICAgIHIgPSByLnJlZE11bChiKTsKICAgICAgICBjID0gYi5yZWRTcXIoKTsKICAgICAgICB0ID0gdC5yZWRNdWwoYyk7CiAgICAgICAgbSA9IGk7CiAgICAgIH0KCiAgICAgIHJldHVybiByOwogICAgfTsKCiAgICBSZWQucHJvdG90eXBlLmludm0gPSBmdW5jdGlvbiBpbnZtIChhKSB7CiAgICAgIHZhciBpbnYgPSBhLl9pbnZtcCh0aGlzLm0pOwogICAgICBpZiAoaW52Lm5lZ2F0aXZlICE9PSAwKSB7CiAgICAgICAgaW52Lm5lZ2F0aXZlID0gMDsKICAgICAgICByZXR1cm4gdGhpcy5pbW9kKGludikucmVkTmVnKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHRoaXMuaW1vZChpbnYpOwogICAgICB9CiAgICB9OwoKICAgIFJlZC5wcm90b3R5cGUucG93ID0gZnVuY3Rpb24gcG93IChhLCBudW0pIHsKICAgICAgaWYgKG51bS5pc1plcm8oKSkgcmV0dXJuIG5ldyBCTigxKS50b1JlZCh0aGlzKTsKICAgICAgaWYgKG51bS5jbXBuKDEpID09PSAwKSByZXR1cm4gYS5jbG9uZSgpOwoKICAgICAgdmFyIHdpbmRvd1NpemUgPSA0OwogICAgICB2YXIgd25kID0gbmV3IEFycmF5KDEgPDwgd2luZG93U2l6ZSk7CiAgICAgIHduZFswXSA9IG5ldyBCTigxKS50b1JlZCh0aGlzKTsKICAgICAgd25kWzFdID0gYTsKICAgICAgZm9yICh2YXIgaSA9IDI7IGkgPCB3bmQubGVuZ3RoOyBpKyspIHsKICAgICAgICB3bmRbaV0gPSB0aGlzLm11bCh3bmRbaSAtIDFdLCBhKTsKICAgICAgfQoKICAgICAgdmFyIHJlcyA9IHduZFswXTsKICAgICAgdmFyIGN1cnJlbnQgPSAwOwogICAgICB2YXIgY3VycmVudExlbiA9IDA7CiAgICAgIHZhciBzdGFydCA9IG51bS5iaXRMZW5ndGgoKSAlIDI2OwogICAgICBpZiAoc3RhcnQgPT09IDApIHsKICAgICAgICBzdGFydCA9IDI2OwogICAgICB9CgogICAgICBmb3IgKGkgPSBudW0ubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgICAgICB2YXIgd29yZCA9IG51bS53b3Jkc1tpXTsKICAgICAgICBmb3IgKHZhciBqID0gc3RhcnQgLSAxOyBqID49IDA7IGotLSkgewogICAgICAgICAgdmFyIGJpdCA9ICh3b3JkID4+IGopICYgMTsKICAgICAgICAgIGlmIChyZXMgIT09IHduZFswXSkgewogICAgICAgICAgICByZXMgPSB0aGlzLnNxcihyZXMpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChiaXQgPT09IDAgJiYgY3VycmVudCA9PT0gMCkgewogICAgICAgICAgICBjdXJyZW50TGVuID0gMDsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CgogICAgICAgICAgY3VycmVudCA8PD0gMTsKICAgICAgICAgIGN1cnJlbnQgfD0gYml0OwogICAgICAgICAgY3VycmVudExlbisrOwogICAgICAgICAgaWYgKGN1cnJlbnRMZW4gIT09IHdpbmRvd1NpemUgJiYgKGkgIT09IDAgfHwgaiAhPT0gMCkpIGNvbnRpbnVlOwoKICAgICAgICAgIHJlcyA9IHRoaXMubXVsKHJlcywgd25kW2N1cnJlbnRdKTsKICAgICAgICAgIGN1cnJlbnRMZW4gPSAwOwogICAgICAgICAgY3VycmVudCA9IDA7CiAgICAgICAgfQogICAgICAgIHN0YXJ0ID0gMjY7CiAgICAgIH0KCiAgICAgIHJldHVybiByZXM7CiAgICB9OwoKICAgIFJlZC5wcm90b3R5cGUuY29udmVydFRvID0gZnVuY3Rpb24gY29udmVydFRvIChudW0pIHsKICAgICAgdmFyIHIgPSBudW0udW1vZCh0aGlzLm0pOwoKICAgICAgcmV0dXJuIHIgPT09IG51bSA/IHIuY2xvbmUoKSA6IHI7CiAgICB9OwoKICAgIFJlZC5wcm90b3R5cGUuY29udmVydEZyb20gPSBmdW5jdGlvbiBjb252ZXJ0RnJvbSAobnVtKSB7CiAgICAgIHZhciByZXMgPSBudW0uY2xvbmUoKTsKICAgICAgcmVzLnJlZCA9IG51bGw7CiAgICAgIHJldHVybiByZXM7CiAgICB9OwoKICAgIC8vCiAgICAvLyBNb250Z29tZXJ5IG1ldGhvZCBlbmdpbmUKICAgIC8vCgogICAgQk4ubW9udCA9IGZ1bmN0aW9uIG1vbnQgKG51bSkgewogICAgICByZXR1cm4gbmV3IE1vbnQobnVtKTsKICAgIH07CgogICAgZnVuY3Rpb24gTW9udCAobSkgewogICAgICBSZWQuY2FsbCh0aGlzLCBtKTsKCiAgICAgIHRoaXMuc2hpZnQgPSB0aGlzLm0uYml0TGVuZ3RoKCk7CiAgICAgIGlmICh0aGlzLnNoaWZ0ICUgMjYgIT09IDApIHsKICAgICAgICB0aGlzLnNoaWZ0ICs9IDI2IC0gKHRoaXMuc2hpZnQgJSAyNik7CiAgICAgIH0KCiAgICAgIHRoaXMuciA9IG5ldyBCTigxKS5pdXNobG4odGhpcy5zaGlmdCk7CiAgICAgIHRoaXMucjIgPSB0aGlzLmltb2QodGhpcy5yLnNxcigpKTsKICAgICAgdGhpcy5yaW52ID0gdGhpcy5yLl9pbnZtcCh0aGlzLm0pOwoKICAgICAgdGhpcy5taW52ID0gdGhpcy5yaW52Lm11bCh0aGlzLnIpLmlzdWJuKDEpLmRpdih0aGlzLm0pOwogICAgICB0aGlzLm1pbnYgPSB0aGlzLm1pbnYudW1vZCh0aGlzLnIpOwogICAgICB0aGlzLm1pbnYgPSB0aGlzLnIuc3ViKHRoaXMubWludik7CiAgICB9CiAgICBpbmhlcml0cyhNb250LCBSZWQpOwoKICAgIE1vbnQucHJvdG90eXBlLmNvbnZlcnRUbyA9IGZ1bmN0aW9uIGNvbnZlcnRUbyAobnVtKSB7CiAgICAgIHJldHVybiB0aGlzLmltb2QobnVtLnVzaGxuKHRoaXMuc2hpZnQpKTsKICAgIH07CgogICAgTW9udC5wcm90b3R5cGUuY29udmVydEZyb20gPSBmdW5jdGlvbiBjb252ZXJ0RnJvbSAobnVtKSB7CiAgICAgIHZhciByID0gdGhpcy5pbW9kKG51bS5tdWwodGhpcy5yaW52KSk7CiAgICAgIHIucmVkID0gbnVsbDsKICAgICAgcmV0dXJuIHI7CiAgICB9OwoKICAgIE1vbnQucHJvdG90eXBlLmltdWwgPSBmdW5jdGlvbiBpbXVsIChhLCBiKSB7CiAgICAgIGlmIChhLmlzWmVybygpIHx8IGIuaXNaZXJvKCkpIHsKICAgICAgICBhLndvcmRzWzBdID0gMDsKICAgICAgICBhLmxlbmd0aCA9IDE7CiAgICAgICAgcmV0dXJuIGE7CiAgICAgIH0KCiAgICAgIHZhciB0ID0gYS5pbXVsKGIpOwogICAgICB2YXIgYyA9IHQubWFza24odGhpcy5zaGlmdCkubXVsKHRoaXMubWludikuaW1hc2tuKHRoaXMuc2hpZnQpLm11bCh0aGlzLm0pOwogICAgICB2YXIgdSA9IHQuaXN1YihjKS5pdXNocm4odGhpcy5zaGlmdCk7CiAgICAgIHZhciByZXMgPSB1OwoKICAgICAgaWYgKHUuY21wKHRoaXMubSkgPj0gMCkgewogICAgICAgIHJlcyA9IHUuaXN1Yih0aGlzLm0pOwogICAgICB9IGVsc2UgaWYgKHUuY21wbigwKSA8IDApIHsKICAgICAgICByZXMgPSB1LmlhZGQodGhpcy5tKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlcy5fZm9yY2VSZWQodGhpcyk7CiAgICB9OwoKICAgIE1vbnQucHJvdG90eXBlLm11bCA9IGZ1bmN0aW9uIG11bCAoYSwgYikgewogICAgICBpZiAoYS5pc1plcm8oKSB8fCBiLmlzWmVybygpKSByZXR1cm4gbmV3IEJOKDApLl9mb3JjZVJlZCh0aGlzKTsKCiAgICAgIHZhciB0ID0gYS5tdWwoYik7CiAgICAgIHZhciBjID0gdC5tYXNrbih0aGlzLnNoaWZ0KS5tdWwodGhpcy5taW52KS5pbWFza24odGhpcy5zaGlmdCkubXVsKHRoaXMubSk7CiAgICAgIHZhciB1ID0gdC5pc3ViKGMpLml1c2hybih0aGlzLnNoaWZ0KTsKICAgICAgdmFyIHJlcyA9IHU7CiAgICAgIGlmICh1LmNtcCh0aGlzLm0pID49IDApIHsKICAgICAgICByZXMgPSB1LmlzdWIodGhpcy5tKTsKICAgICAgfSBlbHNlIGlmICh1LmNtcG4oMCkgPCAwKSB7CiAgICAgICAgcmVzID0gdS5pYWRkKHRoaXMubSk7CiAgICAgIH0KCiAgICAgIHJldHVybiByZXMuX2ZvcmNlUmVkKHRoaXMpOwogICAgfTsKCiAgICBNb250LnByb3RvdHlwZS5pbnZtID0gZnVuY3Rpb24gaW52bSAoYSkgewogICAgICAvLyAoQVIpXi0xICogUl4yID0gKEFeLTEgKiBSXi0xKSAqIFJeMiA9IEFeLTEgKiBSCiAgICAgIHZhciByZXMgPSB0aGlzLmltb2QoYS5faW52bXAodGhpcy5tKS5tdWwodGhpcy5yMikpOwogICAgICByZXR1cm4gcmVzLl9mb3JjZVJlZCh0aGlzKTsKICAgIH07CiAgfSkobW9kdWxlLCBjb21tb25qc0dsb2JhbCk7CiAgfShibiQyKSk7CgogIHZhciBhcGkgPSB7fTsKCiAgdmFyIGVuY29kZXJzID0ge307CgogIC8qIGVzbGludC1kaXNhYmxlIG5vZGUvbm8tZGVwcmVjYXRlZC1hcGkgKi8KCiAgdmFyIGJ1ZmZlciQxID0gYnVmZmVyJDI7CiAgdmFyIEJ1ZmZlciRpID0gYnVmZmVyJDEuQnVmZmVyOwoKICB2YXIgc2FmZXIgPSB7fTsKCiAgdmFyIGtleTsKCiAgZm9yIChrZXkgaW4gYnVmZmVyJDEpIHsKICAgIGlmICghYnVmZmVyJDEuaGFzT3duUHJvcGVydHkoa2V5KSkgY29udGludWUKICAgIGlmIChrZXkgPT09ICdTbG93QnVmZmVyJyB8fCBrZXkgPT09ICdCdWZmZXInKSBjb250aW51ZQogICAgc2FmZXJba2V5XSA9IGJ1ZmZlciQxW2tleV07CiAgfQoKICB2YXIgU2FmZXIgPSBzYWZlci5CdWZmZXIgPSB7fTsKICBmb3IgKGtleSBpbiBCdWZmZXIkaSkgewogICAgaWYgKCFCdWZmZXIkaS5oYXNPd25Qcm9wZXJ0eShrZXkpKSBjb250aW51ZQogICAgaWYgKGtleSA9PT0gJ2FsbG9jVW5zYWZlJyB8fCBrZXkgPT09ICdhbGxvY1Vuc2FmZVNsb3cnKSBjb250aW51ZQogICAgU2FmZXJba2V5XSA9IEJ1ZmZlciRpW2tleV07CiAgfQoKICBzYWZlci5CdWZmZXIucHJvdG90eXBlID0gQnVmZmVyJGkucHJvdG90eXBlOwoKICBpZiAoIVNhZmVyLmZyb20gfHwgU2FmZXIuZnJvbSA9PT0gVWludDhBcnJheS5mcm9tKSB7CiAgICBTYWZlci5mcm9tID0gZnVuY3Rpb24gKHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHsKICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgInZhbHVlIiBhcmd1bWVudCBtdXN0IG5vdCBiZSBvZiB0eXBlIG51bWJlci4gUmVjZWl2ZWQgdHlwZSAnICsgdHlwZW9mIHZhbHVlKQogICAgICB9CiAgICAgIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUubGVuZ3RoID09PSAndW5kZWZpbmVkJykgewogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSBmaXJzdCBhcmd1bWVudCBtdXN0IGJlIG9uZSBvZiB0eXBlIHN0cmluZywgQnVmZmVyLCBBcnJheUJ1ZmZlciwgQXJyYXksIG9yIEFycmF5LWxpa2UgT2JqZWN0LiBSZWNlaXZlZCB0eXBlICcgKyB0eXBlb2YgdmFsdWUpCiAgICAgIH0KICAgICAgcmV0dXJuIEJ1ZmZlciRpKHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpCiAgICB9OwogIH0KCiAgaWYgKCFTYWZlci5hbGxvYykgewogICAgU2FmZXIuYWxsb2MgPSBmdW5jdGlvbiAoc2l6ZSwgZmlsbCwgZW5jb2RpbmcpIHsKICAgICAgaWYgKHR5cGVvZiBzaXplICE9PSAnbnVtYmVyJykgewogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSAic2l6ZSIgYXJndW1lbnQgbXVzdCBiZSBvZiB0eXBlIG51bWJlci4gUmVjZWl2ZWQgdHlwZSAnICsgdHlwZW9mIHNpemUpCiAgICAgIH0KICAgICAgaWYgKHNpemUgPCAwIHx8IHNpemUgPj0gMiAqICgxIDw8IDMwKSkgewogICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdUaGUgdmFsdWUgIicgKyBzaXplICsgJyIgaXMgaW52YWxpZCBmb3Igb3B0aW9uICJzaXplIicpCiAgICAgIH0KICAgICAgdmFyIGJ1ZiA9IEJ1ZmZlciRpKHNpemUpOwogICAgICBpZiAoIWZpbGwgfHwgZmlsbC5sZW5ndGggPT09IDApIHsKICAgICAgICBidWYuZmlsbCgwKTsKICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZW5jb2RpbmcgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgYnVmLmZpbGwoZmlsbCwgZW5jb2RpbmcpOwogICAgICB9IGVsc2UgewogICAgICAgIGJ1Zi5maWxsKGZpbGwpOwogICAgICB9CiAgICAgIHJldHVybiBidWYKICAgIH07CiAgfQoKICBpZiAoIXNhZmVyLmtTdHJpbmdNYXhMZW5ndGgpIHsKICAgIHRyeSB7CiAgICAgIHNhZmVyLmtTdHJpbmdNYXhMZW5ndGggPSBwcm9jZXNzLmJpbmRpbmcoJ2J1ZmZlcicpLmtTdHJpbmdNYXhMZW5ndGg7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIC8vIHdlIGNhbid0IGRldGVybWluZSBrU3RyaW5nTWF4TGVuZ3RoIGluIGVudmlyb25tZW50cyB3aGVyZSBwcm9jZXNzLmJpbmRpbmcKICAgICAgLy8gaXMgdW5zdXBwb3J0ZWQsIHNvIGxldCdzIG5vdCBzZXQgaXQKICAgIH0KICB9CgogIGlmICghc2FmZXIuY29uc3RhbnRzKSB7CiAgICBzYWZlci5jb25zdGFudHMgPSB7CiAgICAgIE1BWF9MRU5HVEg6IHNhZmVyLmtNYXhMZW5ndGgKICAgIH07CiAgICBpZiAoc2FmZXIua1N0cmluZ01heExlbmd0aCkgewogICAgICBzYWZlci5jb25zdGFudHMuTUFYX1NUUklOR19MRU5HVEggPSBzYWZlci5rU3RyaW5nTWF4TGVuZ3RoOwogICAgfQogIH0KCiAgdmFyIHNhZmVyXzEgPSBzYWZlcjsKCiAgdmFyIHJlcG9ydGVyID0ge307CgogIGNvbnN0IGluaGVyaXRzJDggPSBpbmhlcml0cyRkLmV4cG9ydHM7CgogIGZ1bmN0aW9uIFJlcG9ydGVyJDIob3B0aW9ucykgewogICAgdGhpcy5fcmVwb3J0ZXJTdGF0ZSA9IHsKICAgICAgb2JqOiBudWxsLAogICAgICBwYXRoOiBbXSwKICAgICAgb3B0aW9uczogb3B0aW9ucyB8fCB7fSwKICAgICAgZXJyb3JzOiBbXQogICAgfTsKICB9CiAgcmVwb3J0ZXIuUmVwb3J0ZXIgPSBSZXBvcnRlciQyOwoKICBSZXBvcnRlciQyLnByb3RvdHlwZS5pc0Vycm9yID0gZnVuY3Rpb24gaXNFcnJvcihvYmopIHsKICAgIHJldHVybiBvYmogaW5zdGFuY2VvZiBSZXBvcnRlckVycm9yOwogIH07CgogIFJlcG9ydGVyJDIucHJvdG90eXBlLnNhdmUgPSBmdW5jdGlvbiBzYXZlKCkgewogICAgY29uc3Qgc3RhdGUgPSB0aGlzLl9yZXBvcnRlclN0YXRlOwoKICAgIHJldHVybiB7IG9iajogc3RhdGUub2JqLCBwYXRoTGVuOiBzdGF0ZS5wYXRoLmxlbmd0aCB9OwogIH07CgogIFJlcG9ydGVyJDIucHJvdG90eXBlLnJlc3RvcmUgPSBmdW5jdGlvbiByZXN0b3JlKGRhdGEpIHsKICAgIGNvbnN0IHN0YXRlID0gdGhpcy5fcmVwb3J0ZXJTdGF0ZTsKCiAgICBzdGF0ZS5vYmogPSBkYXRhLm9iajsKICAgIHN0YXRlLnBhdGggPSBzdGF0ZS5wYXRoLnNsaWNlKDAsIGRhdGEucGF0aExlbik7CiAgfTsKCiAgUmVwb3J0ZXIkMi5wcm90b3R5cGUuZW50ZXJLZXkgPSBmdW5jdGlvbiBlbnRlcktleShrZXkpIHsKICAgIHJldHVybiB0aGlzLl9yZXBvcnRlclN0YXRlLnBhdGgucHVzaChrZXkpOwogIH07CgogIFJlcG9ydGVyJDIucHJvdG90eXBlLmV4aXRLZXkgPSBmdW5jdGlvbiBleGl0S2V5KGluZGV4KSB7CiAgICBjb25zdCBzdGF0ZSA9IHRoaXMuX3JlcG9ydGVyU3RhdGU7CgogICAgc3RhdGUucGF0aCA9IHN0YXRlLnBhdGguc2xpY2UoMCwgaW5kZXggLSAxKTsKICB9OwoKICBSZXBvcnRlciQyLnByb3RvdHlwZS5sZWF2ZUtleSA9IGZ1bmN0aW9uIGxlYXZlS2V5KGluZGV4LCBrZXksIHZhbHVlKSB7CiAgICBjb25zdCBzdGF0ZSA9IHRoaXMuX3JlcG9ydGVyU3RhdGU7CgogICAgdGhpcy5leGl0S2V5KGluZGV4KTsKICAgIGlmIChzdGF0ZS5vYmogIT09IG51bGwpCiAgICAgIHN0YXRlLm9ialtrZXldID0gdmFsdWU7CiAgfTsKCiAgUmVwb3J0ZXIkMi5wcm90b3R5cGUucGF0aCA9IGZ1bmN0aW9uIHBhdGgoKSB7CiAgICByZXR1cm4gdGhpcy5fcmVwb3J0ZXJTdGF0ZS5wYXRoLmpvaW4oJy8nKTsKICB9OwoKICBSZXBvcnRlciQyLnByb3RvdHlwZS5lbnRlck9iamVjdCA9IGZ1bmN0aW9uIGVudGVyT2JqZWN0KCkgewogICAgY29uc3Qgc3RhdGUgPSB0aGlzLl9yZXBvcnRlclN0YXRlOwoKICAgIGNvbnN0IHByZXYgPSBzdGF0ZS5vYmo7CiAgICBzdGF0ZS5vYmogPSB7fTsKICAgIHJldHVybiBwcmV2OwogIH07CgogIFJlcG9ydGVyJDIucHJvdG90eXBlLmxlYXZlT2JqZWN0ID0gZnVuY3Rpb24gbGVhdmVPYmplY3QocHJldikgewogICAgY29uc3Qgc3RhdGUgPSB0aGlzLl9yZXBvcnRlclN0YXRlOwoKICAgIGNvbnN0IG5vdyA9IHN0YXRlLm9iajsKICAgIHN0YXRlLm9iaiA9IHByZXY7CiAgICByZXR1cm4gbm93OwogIH07CgogIFJlcG9ydGVyJDIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gZXJyb3IobXNnKSB7CiAgICBsZXQgZXJyOwogICAgY29uc3Qgc3RhdGUgPSB0aGlzLl9yZXBvcnRlclN0YXRlOwoKICAgIGNvbnN0IGluaGVyaXRlZCA9IG1zZyBpbnN0YW5jZW9mIFJlcG9ydGVyRXJyb3I7CiAgICBpZiAoaW5oZXJpdGVkKSB7CiAgICAgIGVyciA9IG1zZzsKICAgIH0gZWxzZSB7CiAgICAgIGVyciA9IG5ldyBSZXBvcnRlckVycm9yKHN0YXRlLnBhdGgubWFwKGZ1bmN0aW9uKGVsZW0pIHsKICAgICAgICByZXR1cm4gJ1snICsgSlNPTi5zdHJpbmdpZnkoZWxlbSkgKyAnXSc7CiAgICAgIH0pLmpvaW4oJycpLCBtc2cubWVzc2FnZSB8fCBtc2csIG1zZy5zdGFjayk7CiAgICB9CgogICAgaWYgKCFzdGF0ZS5vcHRpb25zLnBhcnRpYWwpCiAgICAgIHRocm93IGVycjsKCiAgICBpZiAoIWluaGVyaXRlZCkKICAgICAgc3RhdGUuZXJyb3JzLnB1c2goZXJyKTsKCiAgICByZXR1cm4gZXJyOwogIH07CgogIFJlcG9ydGVyJDIucHJvdG90eXBlLndyYXBSZXN1bHQgPSBmdW5jdGlvbiB3cmFwUmVzdWx0KHJlc3VsdCkgewogICAgY29uc3Qgc3RhdGUgPSB0aGlzLl9yZXBvcnRlclN0YXRlOwogICAgaWYgKCFzdGF0ZS5vcHRpb25zLnBhcnRpYWwpCiAgICAgIHJldHVybiByZXN1bHQ7CgogICAgcmV0dXJuIHsKICAgICAgcmVzdWx0OiB0aGlzLmlzRXJyb3IocmVzdWx0KSA/IG51bGwgOiByZXN1bHQsCiAgICAgIGVycm9yczogc3RhdGUuZXJyb3JzCiAgICB9OwogIH07CgogIGZ1bmN0aW9uIFJlcG9ydGVyRXJyb3IocGF0aCwgbXNnKSB7CiAgICB0aGlzLnBhdGggPSBwYXRoOwogICAgdGhpcy5yZXRocm93KG1zZyk7CiAgfQogIGluaGVyaXRzJDgoUmVwb3J0ZXJFcnJvciwgRXJyb3IpOwoKICBSZXBvcnRlckVycm9yLnByb3RvdHlwZS5yZXRocm93ID0gZnVuY3Rpb24gcmV0aHJvdyhtc2cpIHsKICAgIHRoaXMubWVzc2FnZSA9IG1zZyArICcgYXQ6ICcgKyAodGhpcy5wYXRoIHx8ICcoc2hhbGxvdyknKTsKICAgIGlmIChFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSkKICAgICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgUmVwb3J0ZXJFcnJvcik7CgogICAgaWYgKCF0aGlzLnN0YWNrKSB7CiAgICAgIHRyeSB7CiAgICAgICAgLy8gSUUgb25seSBhZGRzIHN0YWNrIHdoZW4gdGhyb3duCiAgICAgICAgdGhyb3cgbmV3IEVycm9yKHRoaXMubWVzc2FnZSk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICB0aGlzLnN0YWNrID0gZS5zdGFjazsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHRoaXM7CiAgfTsKCiAgdmFyIGJ1ZmZlciA9IHt9OwoKICBjb25zdCBpbmhlcml0cyQ3ID0gaW5oZXJpdHMkZC5leHBvcnRzOwogIGNvbnN0IFJlcG9ydGVyJDEgPSByZXBvcnRlci5SZXBvcnRlcjsKICBjb25zdCBCdWZmZXIkaCA9IHNhZmVyXzEuQnVmZmVyOwoKICBmdW5jdGlvbiBEZWNvZGVyQnVmZmVyJDIoYmFzZSwgb3B0aW9ucykgewogICAgUmVwb3J0ZXIkMS5jYWxsKHRoaXMsIG9wdGlvbnMpOwogICAgaWYgKCFCdWZmZXIkaC5pc0J1ZmZlcihiYXNlKSkgewogICAgICB0aGlzLmVycm9yKCdJbnB1dCBub3QgQnVmZmVyJyk7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB0aGlzLmJhc2UgPSBiYXNlOwogICAgdGhpcy5vZmZzZXQgPSAwOwogICAgdGhpcy5sZW5ndGggPSBiYXNlLmxlbmd0aDsKICB9CiAgaW5oZXJpdHMkNyhEZWNvZGVyQnVmZmVyJDIsIFJlcG9ydGVyJDEpOwogIGJ1ZmZlci5EZWNvZGVyQnVmZmVyID0gRGVjb2RlckJ1ZmZlciQyOwoKICBEZWNvZGVyQnVmZmVyJDIuaXNEZWNvZGVyQnVmZmVyID0gZnVuY3Rpb24gaXNEZWNvZGVyQnVmZmVyKGRhdGEpIHsKICAgIGlmIChkYXRhIGluc3RhbmNlb2YgRGVjb2RlckJ1ZmZlciQyKSB7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8vIE9yIGFjY2VwdCBjb21wYXRpYmxlIEFQSQogICAgY29uc3QgaXNDb21wYXRpYmxlID0gdHlwZW9mIGRhdGEgPT09ICdvYmplY3QnICYmCiAgICAgIEJ1ZmZlciRoLmlzQnVmZmVyKGRhdGEuYmFzZSkgJiYKICAgICAgZGF0YS5jb25zdHJ1Y3Rvci5uYW1lID09PSAnRGVjb2RlckJ1ZmZlcicgJiYKICAgICAgdHlwZW9mIGRhdGEub2Zmc2V0ID09PSAnbnVtYmVyJyAmJgogICAgICB0eXBlb2YgZGF0YS5sZW5ndGggPT09ICdudW1iZXInICYmCiAgICAgIHR5cGVvZiBkYXRhLnNhdmUgPT09ICdmdW5jdGlvbicgJiYKICAgICAgdHlwZW9mIGRhdGEucmVzdG9yZSA9PT0gJ2Z1bmN0aW9uJyAmJgogICAgICB0eXBlb2YgZGF0YS5pc0VtcHR5ID09PSAnZnVuY3Rpb24nICYmCiAgICAgIHR5cGVvZiBkYXRhLnJlYWRVSW50OCA9PT0gJ2Z1bmN0aW9uJyAmJgogICAgICB0eXBlb2YgZGF0YS5za2lwID09PSAnZnVuY3Rpb24nICYmCiAgICAgIHR5cGVvZiBkYXRhLnJhdyA9PT0gJ2Z1bmN0aW9uJzsKCiAgICByZXR1cm4gaXNDb21wYXRpYmxlOwogIH07CgogIERlY29kZXJCdWZmZXIkMi5wcm90b3R5cGUuc2F2ZSA9IGZ1bmN0aW9uIHNhdmUoKSB7CiAgICByZXR1cm4geyBvZmZzZXQ6IHRoaXMub2Zmc2V0LCByZXBvcnRlcjogUmVwb3J0ZXIkMS5wcm90b3R5cGUuc2F2ZS5jYWxsKHRoaXMpIH07CiAgfTsKCiAgRGVjb2RlckJ1ZmZlciQyLnByb3RvdHlwZS5yZXN0b3JlID0gZnVuY3Rpb24gcmVzdG9yZShzYXZlKSB7CiAgICAvLyBSZXR1cm4gc2tpcHBlZCBkYXRhCiAgICBjb25zdCByZXMgPSBuZXcgRGVjb2RlckJ1ZmZlciQyKHRoaXMuYmFzZSk7CiAgICByZXMub2Zmc2V0ID0gc2F2ZS5vZmZzZXQ7CiAgICByZXMubGVuZ3RoID0gdGhpcy5vZmZzZXQ7CgogICAgdGhpcy5vZmZzZXQgPSBzYXZlLm9mZnNldDsKICAgIFJlcG9ydGVyJDEucHJvdG90eXBlLnJlc3RvcmUuY2FsbCh0aGlzLCBzYXZlLnJlcG9ydGVyKTsKCiAgICByZXR1cm4gcmVzOwogIH07CgogIERlY29kZXJCdWZmZXIkMi5wcm90b3R5cGUuaXNFbXB0eSA9IGZ1bmN0aW9uIGlzRW1wdHkoKSB7CiAgICByZXR1cm4gdGhpcy5vZmZzZXQgPT09IHRoaXMubGVuZ3RoOwogIH07CgogIERlY29kZXJCdWZmZXIkMi5wcm90b3R5cGUucmVhZFVJbnQ4ID0gZnVuY3Rpb24gcmVhZFVJbnQ4KGZhaWwpIHsKICAgIGlmICh0aGlzLm9mZnNldCArIDEgPD0gdGhpcy5sZW5ndGgpCiAgICAgIHJldHVybiB0aGlzLmJhc2UucmVhZFVJbnQ4KHRoaXMub2Zmc2V0KyssIHRydWUpOwogICAgZWxzZQogICAgICByZXR1cm4gdGhpcy5lcnJvcihmYWlsIHx8ICdEZWNvZGVyQnVmZmVyIG92ZXJydW4nKTsKICB9OwoKICBEZWNvZGVyQnVmZmVyJDIucHJvdG90eXBlLnNraXAgPSBmdW5jdGlvbiBza2lwKGJ5dGVzLCBmYWlsKSB7CiAgICBpZiAoISh0aGlzLm9mZnNldCArIGJ5dGVzIDw9IHRoaXMubGVuZ3RoKSkKICAgICAgcmV0dXJuIHRoaXMuZXJyb3IoZmFpbCB8fCAnRGVjb2RlckJ1ZmZlciBvdmVycnVuJyk7CgogICAgY29uc3QgcmVzID0gbmV3IERlY29kZXJCdWZmZXIkMih0aGlzLmJhc2UpOwoKICAgIC8vIFNoYXJlIHJlcG9ydGVyIHN0YXRlCiAgICByZXMuX3JlcG9ydGVyU3RhdGUgPSB0aGlzLl9yZXBvcnRlclN0YXRlOwoKICAgIHJlcy5vZmZzZXQgPSB0aGlzLm9mZnNldDsKICAgIHJlcy5sZW5ndGggPSB0aGlzLm9mZnNldCArIGJ5dGVzOwogICAgdGhpcy5vZmZzZXQgKz0gYnl0ZXM7CiAgICByZXR1cm4gcmVzOwogIH07CgogIERlY29kZXJCdWZmZXIkMi5wcm90b3R5cGUucmF3ID0gZnVuY3Rpb24gcmF3KHNhdmUpIHsKICAgIHJldHVybiB0aGlzLmJhc2Uuc2xpY2Uoc2F2ZSA/IHNhdmUub2Zmc2V0IDogdGhpcy5vZmZzZXQsIHRoaXMubGVuZ3RoKTsKICB9OwoKICBmdW5jdGlvbiBFbmNvZGVyQnVmZmVyJDEodmFsdWUsIHJlcG9ydGVyKSB7CiAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHsKICAgICAgdGhpcy5sZW5ndGggPSAwOwogICAgICB0aGlzLnZhbHVlID0gdmFsdWUubWFwKGZ1bmN0aW9uKGl0ZW0pIHsKICAgICAgICBpZiAoIUVuY29kZXJCdWZmZXIkMS5pc0VuY29kZXJCdWZmZXIoaXRlbSkpCiAgICAgICAgICBpdGVtID0gbmV3IEVuY29kZXJCdWZmZXIkMShpdGVtLCByZXBvcnRlcik7CiAgICAgICAgdGhpcy5sZW5ndGggKz0gaXRlbS5sZW5ndGg7CiAgICAgICAgcmV0dXJuIGl0ZW07CiAgICAgIH0sIHRoaXMpOwogICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7CiAgICAgIGlmICghKDAgPD0gdmFsdWUgJiYgdmFsdWUgPD0gMHhmZikpCiAgICAgICAgcmV0dXJuIHJlcG9ydGVyLmVycm9yKCdub24tYnl0ZSBFbmNvZGVyQnVmZmVyIHZhbHVlJyk7CiAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsKICAgICAgdGhpcy5sZW5ndGggPSAxOwogICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7CiAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsKICAgICAgdGhpcy5sZW5ndGggPSBCdWZmZXIkaC5ieXRlTGVuZ3RoKHZhbHVlKTsKICAgIH0gZWxzZSBpZiAoQnVmZmVyJGguaXNCdWZmZXIodmFsdWUpKSB7CiAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsKICAgICAgdGhpcy5sZW5ndGggPSB2YWx1ZS5sZW5ndGg7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gcmVwb3J0ZXIuZXJyb3IoJ1Vuc3VwcG9ydGVkIHR5cGU6ICcgKyB0eXBlb2YgdmFsdWUpOwogICAgfQogIH0KICBidWZmZXIuRW5jb2RlckJ1ZmZlciA9IEVuY29kZXJCdWZmZXIkMTsKCiAgRW5jb2RlckJ1ZmZlciQxLmlzRW5jb2RlckJ1ZmZlciA9IGZ1bmN0aW9uIGlzRW5jb2RlckJ1ZmZlcihkYXRhKSB7CiAgICBpZiAoZGF0YSBpbnN0YW5jZW9mIEVuY29kZXJCdWZmZXIkMSkgewogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLyBPciBhY2NlcHQgY29tcGF0aWJsZSBBUEkKICAgIGNvbnN0IGlzQ29tcGF0aWJsZSA9IHR5cGVvZiBkYXRhID09PSAnb2JqZWN0JyAmJgogICAgICBkYXRhLmNvbnN0cnVjdG9yLm5hbWUgPT09ICdFbmNvZGVyQnVmZmVyJyAmJgogICAgICB0eXBlb2YgZGF0YS5sZW5ndGggPT09ICdudW1iZXInICYmCiAgICAgIHR5cGVvZiBkYXRhLmpvaW4gPT09ICdmdW5jdGlvbic7CgogICAgcmV0dXJuIGlzQ29tcGF0aWJsZTsKICB9OwoKICBFbmNvZGVyQnVmZmVyJDEucHJvdG90eXBlLmpvaW4gPSBmdW5jdGlvbiBqb2luKG91dCwgb2Zmc2V0KSB7CiAgICBpZiAoIW91dCkKICAgICAgb3V0ID0gQnVmZmVyJGguYWxsb2ModGhpcy5sZW5ndGgpOwogICAgaWYgKCFvZmZzZXQpCiAgICAgIG9mZnNldCA9IDA7CgogICAgaWYgKHRoaXMubGVuZ3RoID09PSAwKQogICAgICByZXR1cm4gb3V0OwoKICAgIGlmIChBcnJheS5pc0FycmF5KHRoaXMudmFsdWUpKSB7CiAgICAgIHRoaXMudmFsdWUuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7CiAgICAgICAgaXRlbS5qb2luKG91dCwgb2Zmc2V0KTsKICAgICAgICBvZmZzZXQgKz0gaXRlbS5sZW5ndGg7CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgaWYgKHR5cGVvZiB0aGlzLnZhbHVlID09PSAnbnVtYmVyJykKICAgICAgICBvdXRbb2Zmc2V0XSA9IHRoaXMudmFsdWU7CiAgICAgIGVsc2UgaWYgKHR5cGVvZiB0aGlzLnZhbHVlID09PSAnc3RyaW5nJykKICAgICAgICBvdXQud3JpdGUodGhpcy52YWx1ZSwgb2Zmc2V0KTsKICAgICAgZWxzZSBpZiAoQnVmZmVyJGguaXNCdWZmZXIodGhpcy52YWx1ZSkpCiAgICAgICAgdGhpcy52YWx1ZS5jb3B5KG91dCwgb2Zmc2V0KTsKICAgICAgb2Zmc2V0ICs9IHRoaXMubGVuZ3RoOwogICAgfQoKICAgIHJldHVybiBvdXQ7CiAgfTsKCiAgY29uc3QgUmVwb3J0ZXIgPSByZXBvcnRlci5SZXBvcnRlcjsKICBjb25zdCBFbmNvZGVyQnVmZmVyID0gYnVmZmVyLkVuY29kZXJCdWZmZXI7CiAgY29uc3QgRGVjb2RlckJ1ZmZlciQxID0gYnVmZmVyLkRlY29kZXJCdWZmZXI7CiAgY29uc3QgYXNzZXJ0ID0gbWluaW1hbGlzdGljQXNzZXJ0OwoKICAvLyBTdXBwb3J0ZWQgdGFncwogIGNvbnN0IHRhZ3MgPSBbCiAgICAnc2VxJywgJ3NlcW9mJywgJ3NldCcsICdzZXRvZicsICdvYmppZCcsICdib29sJywKICAgICdnZW50aW1lJywgJ3V0Y3RpbWUnLCAnbnVsbF8nLCAnZW51bScsICdpbnQnLCAnb2JqRGVzYycsCiAgICAnYml0c3RyJywgJ2JtcHN0cicsICdjaGFyc3RyJywgJ2dlbnN0cicsICdncmFwaHN0cicsICdpYTVzdHInLCAnaXNvNjQ2c3RyJywKICAgICdudW1zdHInLCAnb2N0c3RyJywgJ3ByaW50c3RyJywgJ3Q2MXN0cicsICd1bmlzdHInLCAndXRmOHN0cicsICd2aWRlb3N0cicKICBdOwoKICAvLyBQdWJsaWMgbWV0aG9kcyBsaXN0CiAgY29uc3QgbWV0aG9kcyA9IFsKICAgICdrZXknLCAnb2JqJywgJ3VzZScsICdvcHRpb25hbCcsICdleHBsaWNpdCcsICdpbXBsaWNpdCcsICdkZWYnLCAnY2hvaWNlJywKICAgICdhbnknLCAnY29udGFpbnMnCiAgXS5jb25jYXQodGFncyk7CgogIC8vIE92ZXJyaWRlZCBtZXRob2RzIGxpc3QKICBjb25zdCBvdmVycmlkZWQgPSBbCiAgICAnX3BlZWtUYWcnLCAnX2RlY29kZVRhZycsICdfdXNlJywKICAgICdfZGVjb2RlU3RyJywgJ19kZWNvZGVPYmppZCcsICdfZGVjb2RlVGltZScsCiAgICAnX2RlY29kZU51bGwnLCAnX2RlY29kZUludCcsICdfZGVjb2RlQm9vbCcsICdfZGVjb2RlTGlzdCcsCgogICAgJ19lbmNvZGVDb21wb3NpdGUnLCAnX2VuY29kZVN0cicsICdfZW5jb2RlT2JqaWQnLCAnX2VuY29kZVRpbWUnLAogICAgJ19lbmNvZGVOdWxsJywgJ19lbmNvZGVJbnQnLCAnX2VuY29kZUJvb2wnCiAgXTsKCiAgZnVuY3Rpb24gTm9kZSQyKGVuYywgcGFyZW50LCBuYW1lKSB7CiAgICBjb25zdCBzdGF0ZSA9IHt9OwogICAgdGhpcy5fYmFzZVN0YXRlID0gc3RhdGU7CgogICAgc3RhdGUubmFtZSA9IG5hbWU7CiAgICBzdGF0ZS5lbmMgPSBlbmM7CgogICAgc3RhdGUucGFyZW50ID0gcGFyZW50IHx8IG51bGw7CiAgICBzdGF0ZS5jaGlsZHJlbiA9IG51bGw7CgogICAgLy8gU3RhdGUKICAgIHN0YXRlLnRhZyA9IG51bGw7CiAgICBzdGF0ZS5hcmdzID0gbnVsbDsKICAgIHN0YXRlLnJldmVyc2VBcmdzID0gbnVsbDsKICAgIHN0YXRlLmNob2ljZSA9IG51bGw7CiAgICBzdGF0ZS5vcHRpb25hbCA9IGZhbHNlOwogICAgc3RhdGUuYW55ID0gZmFsc2U7CiAgICBzdGF0ZS5vYmogPSBmYWxzZTsKICAgIHN0YXRlLnVzZSA9IG51bGw7CiAgICBzdGF0ZS51c2VEZWNvZGVyID0gbnVsbDsKICAgIHN0YXRlLmtleSA9IG51bGw7CiAgICBzdGF0ZVsnZGVmYXVsdCddID0gbnVsbDsKICAgIHN0YXRlLmV4cGxpY2l0ID0gbnVsbDsKICAgIHN0YXRlLmltcGxpY2l0ID0gbnVsbDsKICAgIHN0YXRlLmNvbnRhaW5zID0gbnVsbDsKCiAgICAvLyBTaG91bGQgY3JlYXRlIG5ldyBpbnN0YW5jZSBvbiBlYWNoIG1ldGhvZAogICAgaWYgKCFzdGF0ZS5wYXJlbnQpIHsKICAgICAgc3RhdGUuY2hpbGRyZW4gPSBbXTsKICAgICAgdGhpcy5fd3JhcCgpOwogICAgfQogIH0KICB2YXIgbm9kZSQxID0gTm9kZSQyOwoKICBjb25zdCBzdGF0ZVByb3BzID0gWwogICAgJ2VuYycsICdwYXJlbnQnLCAnY2hpbGRyZW4nLCAndGFnJywgJ2FyZ3MnLCAncmV2ZXJzZUFyZ3MnLCAnY2hvaWNlJywKICAgICdvcHRpb25hbCcsICdhbnknLCAnb2JqJywgJ3VzZScsICdhbHRlcmVkVXNlJywgJ2tleScsICdkZWZhdWx0JywgJ2V4cGxpY2l0JywKICAgICdpbXBsaWNpdCcsICdjb250YWlucycKICBdOwoKICBOb2RlJDIucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24gY2xvbmUoKSB7CiAgICBjb25zdCBzdGF0ZSA9IHRoaXMuX2Jhc2VTdGF0ZTsKICAgIGNvbnN0IGNzdGF0ZSA9IHt9OwogICAgc3RhdGVQcm9wcy5mb3JFYWNoKGZ1bmN0aW9uKHByb3ApIHsKICAgICAgY3N0YXRlW3Byb3BdID0gc3RhdGVbcHJvcF07CiAgICB9KTsKICAgIGNvbnN0IHJlcyA9IG5ldyB0aGlzLmNvbnN0cnVjdG9yKGNzdGF0ZS5wYXJlbnQpOwogICAgcmVzLl9iYXNlU3RhdGUgPSBjc3RhdGU7CiAgICByZXR1cm4gcmVzOwogIH07CgogIE5vZGUkMi5wcm90b3R5cGUuX3dyYXAgPSBmdW5jdGlvbiB3cmFwKCkgewogICAgY29uc3Qgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CiAgICBtZXRob2RzLmZvckVhY2goZnVuY3Rpb24obWV0aG9kKSB7CiAgICAgIHRoaXNbbWV0aG9kXSA9IGZ1bmN0aW9uIF93cmFwcGVkTWV0aG9kKCkgewogICAgICAgIGNvbnN0IGNsb25lID0gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcyk7CiAgICAgICAgc3RhdGUuY2hpbGRyZW4ucHVzaChjbG9uZSk7CiAgICAgICAgcmV0dXJuIGNsb25lW21ldGhvZF0uYXBwbHkoY2xvbmUsIGFyZ3VtZW50cyk7CiAgICAgIH07CiAgICB9LCB0aGlzKTsKICB9OwoKICBOb2RlJDIucHJvdG90eXBlLl9pbml0ID0gZnVuY3Rpb24gaW5pdChib2R5KSB7CiAgICBjb25zdCBzdGF0ZSA9IHRoaXMuX2Jhc2VTdGF0ZTsKCiAgICBhc3NlcnQoc3RhdGUucGFyZW50ID09PSBudWxsKTsKICAgIGJvZHkuY2FsbCh0aGlzKTsKCiAgICAvLyBGaWx0ZXIgY2hpbGRyZW4KICAgIHN0YXRlLmNoaWxkcmVuID0gc3RhdGUuY2hpbGRyZW4uZmlsdGVyKGZ1bmN0aW9uKGNoaWxkKSB7CiAgICAgIHJldHVybiBjaGlsZC5fYmFzZVN0YXRlLnBhcmVudCA9PT0gdGhpczsKICAgIH0sIHRoaXMpOwogICAgYXNzZXJ0LmVxdWFsKHN0YXRlLmNoaWxkcmVuLmxlbmd0aCwgMSwgJ1Jvb3Qgbm9kZSBjYW4gaGF2ZSBvbmx5IG9uZSBjaGlsZCcpOwogIH07CgogIE5vZGUkMi5wcm90b3R5cGUuX3VzZUFyZ3MgPSBmdW5jdGlvbiB1c2VBcmdzKGFyZ3MpIHsKICAgIGNvbnN0IHN0YXRlID0gdGhpcy5fYmFzZVN0YXRlOwoKICAgIC8vIEZpbHRlciBjaGlsZHJlbiBhbmQgYXJncwogICAgY29uc3QgY2hpbGRyZW4gPSBhcmdzLmZpbHRlcihmdW5jdGlvbihhcmcpIHsKICAgICAgcmV0dXJuIGFyZyBpbnN0YW5jZW9mIHRoaXMuY29uc3RydWN0b3I7CiAgICB9LCB0aGlzKTsKICAgIGFyZ3MgPSBhcmdzLmZpbHRlcihmdW5jdGlvbihhcmcpIHsKICAgICAgcmV0dXJuICEoYXJnIGluc3RhbmNlb2YgdGhpcy5jb25zdHJ1Y3Rvcik7CiAgICB9LCB0aGlzKTsKCiAgICBpZiAoY2hpbGRyZW4ubGVuZ3RoICE9PSAwKSB7CiAgICAgIGFzc2VydChzdGF0ZS5jaGlsZHJlbiA9PT0gbnVsbCk7CiAgICAgIHN0YXRlLmNoaWxkcmVuID0gY2hpbGRyZW47CgogICAgICAvLyBSZXBsYWNlIHBhcmVudCB0byBtYWludGFpbiBiYWNrd2FyZCBsaW5rCiAgICAgIGNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24oY2hpbGQpIHsKICAgICAgICBjaGlsZC5fYmFzZVN0YXRlLnBhcmVudCA9IHRoaXM7CiAgICAgIH0sIHRoaXMpOwogICAgfQogICAgaWYgKGFyZ3MubGVuZ3RoICE9PSAwKSB7CiAgICAgIGFzc2VydChzdGF0ZS5hcmdzID09PSBudWxsKTsKICAgICAgc3RhdGUuYXJncyA9IGFyZ3M7CiAgICAgIHN0YXRlLnJldmVyc2VBcmdzID0gYXJncy5tYXAoZnVuY3Rpb24oYXJnKSB7CiAgICAgICAgaWYgKHR5cGVvZiBhcmcgIT09ICdvYmplY3QnIHx8IGFyZy5jb25zdHJ1Y3RvciAhPT0gT2JqZWN0KQogICAgICAgICAgcmV0dXJuIGFyZzsKCiAgICAgICAgY29uc3QgcmVzID0ge307CiAgICAgICAgT2JqZWN0LmtleXMoYXJnKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkgewogICAgICAgICAgaWYgKGtleSA9PSAoa2V5IHwgMCkpCiAgICAgICAgICAgIGtleSB8PSAwOwogICAgICAgICAgY29uc3QgdmFsdWUgPSBhcmdba2V5XTsKICAgICAgICAgIHJlc1t2YWx1ZV0gPSBrZXk7CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIHJlczsKICAgICAgfSk7CiAgICB9CiAgfTsKCiAgLy8KICAvLyBPdmVycmlkZWQgbWV0aG9kcwogIC8vCgogIG92ZXJyaWRlZC5mb3JFYWNoKGZ1bmN0aW9uKG1ldGhvZCkgewogICAgTm9kZSQyLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24gX292ZXJyaWRlZCgpIHsKICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CiAgICAgIHRocm93IG5ldyBFcnJvcihtZXRob2QgKyAnIG5vdCBpbXBsZW1lbnRlZCBmb3IgZW5jb2Rpbmc6ICcgKyBzdGF0ZS5lbmMpOwogICAgfTsKICB9KTsKCiAgLy8KICAvLyBQdWJsaWMgbWV0aG9kcwogIC8vCgogIHRhZ3MuZm9yRWFjaChmdW5jdGlvbih0YWcpIHsKICAgIE5vZGUkMi5wcm90b3R5cGVbdGFnXSA9IGZ1bmN0aW9uIF90YWdNZXRob2QoKSB7CiAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5fYmFzZVN0YXRlOwogICAgICBjb25zdCBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTsKCiAgICAgIGFzc2VydChzdGF0ZS50YWcgPT09IG51bGwpOwogICAgICBzdGF0ZS50YWcgPSB0YWc7CgogICAgICB0aGlzLl91c2VBcmdzKGFyZ3MpOwoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9OwogIH0pOwoKICBOb2RlJDIucHJvdG90eXBlLnVzZSA9IGZ1bmN0aW9uIHVzZShpdGVtKSB7CiAgICBhc3NlcnQoaXRlbSk7CiAgICBjb25zdCBzdGF0ZSA9IHRoaXMuX2Jhc2VTdGF0ZTsKCiAgICBhc3NlcnQoc3RhdGUudXNlID09PSBudWxsKTsKICAgIHN0YXRlLnVzZSA9IGl0ZW07CgogICAgcmV0dXJuIHRoaXM7CiAgfTsKCiAgTm9kZSQyLnByb3RvdHlwZS5vcHRpb25hbCA9IGZ1bmN0aW9uIG9wdGlvbmFsKCkgewogICAgY29uc3Qgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CgogICAgc3RhdGUub3B0aW9uYWwgPSB0cnVlOwoKICAgIHJldHVybiB0aGlzOwogIH07CgogIE5vZGUkMi5wcm90b3R5cGUuZGVmID0gZnVuY3Rpb24gZGVmKHZhbCkgewogICAgY29uc3Qgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CgogICAgYXNzZXJ0KHN0YXRlWydkZWZhdWx0J10gPT09IG51bGwpOwogICAgc3RhdGVbJ2RlZmF1bHQnXSA9IHZhbDsKICAgIHN0YXRlLm9wdGlvbmFsID0gdHJ1ZTsKCiAgICByZXR1cm4gdGhpczsKICB9OwoKICBOb2RlJDIucHJvdG90eXBlLmV4cGxpY2l0ID0gZnVuY3Rpb24gZXhwbGljaXQobnVtKSB7CiAgICBjb25zdCBzdGF0ZSA9IHRoaXMuX2Jhc2VTdGF0ZTsKCiAgICBhc3NlcnQoc3RhdGUuZXhwbGljaXQgPT09IG51bGwgJiYgc3RhdGUuaW1wbGljaXQgPT09IG51bGwpOwogICAgc3RhdGUuZXhwbGljaXQgPSBudW07CgogICAgcmV0dXJuIHRoaXM7CiAgfTsKCiAgTm9kZSQyLnByb3RvdHlwZS5pbXBsaWNpdCA9IGZ1bmN0aW9uIGltcGxpY2l0KG51bSkgewogICAgY29uc3Qgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CgogICAgYXNzZXJ0KHN0YXRlLmV4cGxpY2l0ID09PSBudWxsICYmIHN0YXRlLmltcGxpY2l0ID09PSBudWxsKTsKICAgIHN0YXRlLmltcGxpY2l0ID0gbnVtOwoKICAgIHJldHVybiB0aGlzOwogIH07CgogIE5vZGUkMi5wcm90b3R5cGUub2JqID0gZnVuY3Rpb24gb2JqKCkgewogICAgY29uc3Qgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CiAgICBjb25zdCBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTsKCiAgICBzdGF0ZS5vYmogPSB0cnVlOwoKICAgIGlmIChhcmdzLmxlbmd0aCAhPT0gMCkKICAgICAgdGhpcy5fdXNlQXJncyhhcmdzKTsKCiAgICByZXR1cm4gdGhpczsKICB9OwoKICBOb2RlJDIucHJvdG90eXBlLmtleSA9IGZ1bmN0aW9uIGtleShuZXdLZXkpIHsKICAgIGNvbnN0IHN0YXRlID0gdGhpcy5fYmFzZVN0YXRlOwoKICAgIGFzc2VydChzdGF0ZS5rZXkgPT09IG51bGwpOwogICAgc3RhdGUua2V5ID0gbmV3S2V5OwoKICAgIHJldHVybiB0aGlzOwogIH07CgogIE5vZGUkMi5wcm90b3R5cGUuYW55ID0gZnVuY3Rpb24gYW55KCkgewogICAgY29uc3Qgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CgogICAgc3RhdGUuYW55ID0gdHJ1ZTsKCiAgICByZXR1cm4gdGhpczsKICB9OwoKICBOb2RlJDIucHJvdG90eXBlLmNob2ljZSA9IGZ1bmN0aW9uIGNob2ljZShvYmopIHsKICAgIGNvbnN0IHN0YXRlID0gdGhpcy5fYmFzZVN0YXRlOwoKICAgIGFzc2VydChzdGF0ZS5jaG9pY2UgPT09IG51bGwpOwogICAgc3RhdGUuY2hvaWNlID0gb2JqOwogICAgdGhpcy5fdXNlQXJncyhPYmplY3Qua2V5cyhvYmopLm1hcChmdW5jdGlvbihrZXkpIHsKICAgICAgcmV0dXJuIG9ialtrZXldOwogICAgfSkpOwoKICAgIHJldHVybiB0aGlzOwogIH07CgogIE5vZGUkMi5wcm90b3R5cGUuY29udGFpbnMgPSBmdW5jdGlvbiBjb250YWlucyhpdGVtKSB7CiAgICBjb25zdCBzdGF0ZSA9IHRoaXMuX2Jhc2VTdGF0ZTsKCiAgICBhc3NlcnQoc3RhdGUudXNlID09PSBudWxsKTsKICAgIHN0YXRlLmNvbnRhaW5zID0gaXRlbTsKCiAgICByZXR1cm4gdGhpczsKICB9OwoKICAvLwogIC8vIERlY29kaW5nCiAgLy8KCiAgTm9kZSQyLnByb3RvdHlwZS5fZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKGlucHV0LCBvcHRpb25zKSB7CiAgICBjb25zdCBzdGF0ZSA9IHRoaXMuX2Jhc2VTdGF0ZTsKCiAgICAvLyBEZWNvZGUgcm9vdCBub2RlCiAgICBpZiAoc3RhdGUucGFyZW50ID09PSBudWxsKQogICAgICByZXR1cm4gaW5wdXQud3JhcFJlc3VsdChzdGF0ZS5jaGlsZHJlblswXS5fZGVjb2RlKGlucHV0LCBvcHRpb25zKSk7CgogICAgbGV0IHJlc3VsdCA9IHN0YXRlWydkZWZhdWx0J107CiAgICBsZXQgcHJlc2VudCA9IHRydWU7CgogICAgbGV0IHByZXZLZXkgPSBudWxsOwogICAgaWYgKHN0YXRlLmtleSAhPT0gbnVsbCkKICAgICAgcHJldktleSA9IGlucHV0LmVudGVyS2V5KHN0YXRlLmtleSk7CgogICAgLy8gQ2hlY2sgaWYgdGFnIGlzIHRoZXJlCiAgICBpZiAoc3RhdGUub3B0aW9uYWwpIHsKICAgICAgbGV0IHRhZyA9IG51bGw7CiAgICAgIGlmIChzdGF0ZS5leHBsaWNpdCAhPT0gbnVsbCkKICAgICAgICB0YWcgPSBzdGF0ZS5leHBsaWNpdDsKICAgICAgZWxzZSBpZiAoc3RhdGUuaW1wbGljaXQgIT09IG51bGwpCiAgICAgICAgdGFnID0gc3RhdGUuaW1wbGljaXQ7CiAgICAgIGVsc2UgaWYgKHN0YXRlLnRhZyAhPT0gbnVsbCkKICAgICAgICB0YWcgPSBzdGF0ZS50YWc7CgogICAgICBpZiAodGFnID09PSBudWxsICYmICFzdGF0ZS5hbnkpIHsKICAgICAgICAvLyBUcmlhbCBhbmQgRXJyb3IKICAgICAgICBjb25zdCBzYXZlID0gaW5wdXQuc2F2ZSgpOwogICAgICAgIHRyeSB7CiAgICAgICAgICBpZiAoc3RhdGUuY2hvaWNlID09PSBudWxsKQogICAgICAgICAgICB0aGlzLl9kZWNvZGVHZW5lcmljKHN0YXRlLnRhZywgaW5wdXQsIG9wdGlvbnMpOwogICAgICAgICAgZWxzZQogICAgICAgICAgICB0aGlzLl9kZWNvZGVDaG9pY2UoaW5wdXQsIG9wdGlvbnMpOwogICAgICAgICAgcHJlc2VudCA9IHRydWU7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgcHJlc2VudCA9IGZhbHNlOwogICAgICAgIH0KICAgICAgICBpbnB1dC5yZXN0b3JlKHNhdmUpOwogICAgICB9IGVsc2UgewogICAgICAgIHByZXNlbnQgPSB0aGlzLl9wZWVrVGFnKGlucHV0LCB0YWcsIHN0YXRlLmFueSk7CgogICAgICAgIGlmIChpbnB1dC5pc0Vycm9yKHByZXNlbnQpKQogICAgICAgICAgcmV0dXJuIHByZXNlbnQ7CiAgICAgIH0KICAgIH0KCiAgICAvLyBQdXNoIG9iamVjdCBvbiBzdGFjawogICAgbGV0IHByZXZPYmo7CiAgICBpZiAoc3RhdGUub2JqICYmIHByZXNlbnQpCiAgICAgIHByZXZPYmogPSBpbnB1dC5lbnRlck9iamVjdCgpOwoKICAgIGlmIChwcmVzZW50KSB7CiAgICAgIC8vIFVud3JhcCBleHBsaWNpdCB2YWx1ZXMKICAgICAgaWYgKHN0YXRlLmV4cGxpY2l0ICE9PSBudWxsKSB7CiAgICAgICAgY29uc3QgZXhwbGljaXQgPSB0aGlzLl9kZWNvZGVUYWcoaW5wdXQsIHN0YXRlLmV4cGxpY2l0KTsKICAgICAgICBpZiAoaW5wdXQuaXNFcnJvcihleHBsaWNpdCkpCiAgICAgICAgICByZXR1cm4gZXhwbGljaXQ7CiAgICAgICAgaW5wdXQgPSBleHBsaWNpdDsKICAgICAgfQoKICAgICAgY29uc3Qgc3RhcnQgPSBpbnB1dC5vZmZzZXQ7CgogICAgICAvLyBVbndyYXAgaW1wbGljaXQgYW5kIG5vcm1hbCB2YWx1ZXMKICAgICAgaWYgKHN0YXRlLnVzZSA9PT0gbnVsbCAmJiBzdGF0ZS5jaG9pY2UgPT09IG51bGwpIHsKICAgICAgICBsZXQgc2F2ZTsKICAgICAgICBpZiAoc3RhdGUuYW55KQogICAgICAgICAgc2F2ZSA9IGlucHV0LnNhdmUoKTsKICAgICAgICBjb25zdCBib2R5ID0gdGhpcy5fZGVjb2RlVGFnKAogICAgICAgICAgaW5wdXQsCiAgICAgICAgICBzdGF0ZS5pbXBsaWNpdCAhPT0gbnVsbCA/IHN0YXRlLmltcGxpY2l0IDogc3RhdGUudGFnLAogICAgICAgICAgc3RhdGUuYW55CiAgICAgICAgKTsKICAgICAgICBpZiAoaW5wdXQuaXNFcnJvcihib2R5KSkKICAgICAgICAgIHJldHVybiBib2R5OwoKICAgICAgICBpZiAoc3RhdGUuYW55KQogICAgICAgICAgcmVzdWx0ID0gaW5wdXQucmF3KHNhdmUpOwogICAgICAgIGVsc2UKICAgICAgICAgIGlucHV0ID0gYm9keTsKICAgICAgfQoKICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy50cmFjayAmJiBzdGF0ZS50YWcgIT09IG51bGwpCiAgICAgICAgb3B0aW9ucy50cmFjayhpbnB1dC5wYXRoKCksIHN0YXJ0LCBpbnB1dC5sZW5ndGgsICd0YWdnZWQnKTsKCiAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMudHJhY2sgJiYgc3RhdGUudGFnICE9PSBudWxsKQogICAgICAgIG9wdGlvbnMudHJhY2soaW5wdXQucGF0aCgpLCBpbnB1dC5vZmZzZXQsIGlucHV0Lmxlbmd0aCwgJ2NvbnRlbnQnKTsKCiAgICAgIC8vIFNlbGVjdCBwcm9wZXIgbWV0aG9kIGZvciB0YWcKICAgICAgaWYgKHN0YXRlLmFueSkgOyBlbHNlIGlmIChzdGF0ZS5jaG9pY2UgPT09IG51bGwpIHsKICAgICAgICByZXN1bHQgPSB0aGlzLl9kZWNvZGVHZW5lcmljKHN0YXRlLnRhZywgaW5wdXQsIG9wdGlvbnMpOwogICAgICB9IGVsc2UgewogICAgICAgIHJlc3VsdCA9IHRoaXMuX2RlY29kZUNob2ljZShpbnB1dCwgb3B0aW9ucyk7CiAgICAgIH0KCiAgICAgIGlmIChpbnB1dC5pc0Vycm9yKHJlc3VsdCkpCiAgICAgICAgcmV0dXJuIHJlc3VsdDsKCiAgICAgIC8vIERlY29kZSBjaGlsZHJlbgogICAgICBpZiAoIXN0YXRlLmFueSAmJiBzdGF0ZS5jaG9pY2UgPT09IG51bGwgJiYgc3RhdGUuY2hpbGRyZW4gIT09IG51bGwpIHsKICAgICAgICBzdGF0ZS5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIGRlY29kZUNoaWxkcmVuKGNoaWxkKSB7CiAgICAgICAgICAvLyBOT1RFOiBXZSBhcmUgaWdub3JpbmcgZXJyb3JzIGhlcmUsIHRvIGxldCBwYXJzZXIgY29udGludWUgd2l0aCBvdGhlcgogICAgICAgICAgLy8gcGFydHMgb2YgZW5jb2RlZCBkYXRhCiAgICAgICAgICBjaGlsZC5fZGVjb2RlKGlucHV0LCBvcHRpb25zKTsKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgLy8gRGVjb2RlIGNvbnRhaW5lZC9lbmNvZGVkIGJ5IHNjaGVtYSwgb25seSBpbiBiaXQgb3Igb2N0ZXQgc3RyaW5ncwogICAgICBpZiAoc3RhdGUuY29udGFpbnMgJiYgKHN0YXRlLnRhZyA9PT0gJ29jdHN0cicgfHwgc3RhdGUudGFnID09PSAnYml0c3RyJykpIHsKICAgICAgICBjb25zdCBkYXRhID0gbmV3IERlY29kZXJCdWZmZXIkMShyZXN1bHQpOwogICAgICAgIHJlc3VsdCA9IHRoaXMuX2dldFVzZShzdGF0ZS5jb250YWlucywgaW5wdXQuX3JlcG9ydGVyU3RhdGUub2JqKQogICAgICAgICAgLl9kZWNvZGUoZGF0YSwgb3B0aW9ucyk7CiAgICAgIH0KICAgIH0KCiAgICAvLyBQb3Agb2JqZWN0CiAgICBpZiAoc3RhdGUub2JqICYmIHByZXNlbnQpCiAgICAgIHJlc3VsdCA9IGlucHV0LmxlYXZlT2JqZWN0KHByZXZPYmopOwoKICAgIC8vIFNldCBrZXkKICAgIGlmIChzdGF0ZS5rZXkgIT09IG51bGwgJiYgKHJlc3VsdCAhPT0gbnVsbCB8fCBwcmVzZW50ID09PSB0cnVlKSkKICAgICAgaW5wdXQubGVhdmVLZXkocHJldktleSwgc3RhdGUua2V5LCByZXN1bHQpOwogICAgZWxzZSBpZiAocHJldktleSAhPT0gbnVsbCkKICAgICAgaW5wdXQuZXhpdEtleShwcmV2S2V5KTsKCiAgICByZXR1cm4gcmVzdWx0OwogIH07CgogIE5vZGUkMi5wcm90b3R5cGUuX2RlY29kZUdlbmVyaWMgPSBmdW5jdGlvbiBkZWNvZGVHZW5lcmljKHRhZywgaW5wdXQsIG9wdGlvbnMpIHsKICAgIGNvbnN0IHN0YXRlID0gdGhpcy5fYmFzZVN0YXRlOwoKICAgIGlmICh0YWcgPT09ICdzZXEnIHx8IHRhZyA9PT0gJ3NldCcpCiAgICAgIHJldHVybiBudWxsOwogICAgaWYgKHRhZyA9PT0gJ3NlcW9mJyB8fCB0YWcgPT09ICdzZXRvZicpCiAgICAgIHJldHVybiB0aGlzLl9kZWNvZGVMaXN0KGlucHV0LCB0YWcsIHN0YXRlLmFyZ3NbMF0sIG9wdGlvbnMpOwogICAgZWxzZSBpZiAoL3N0ciQvLnRlc3QodGFnKSkKICAgICAgcmV0dXJuIHRoaXMuX2RlY29kZVN0cihpbnB1dCwgdGFnLCBvcHRpb25zKTsKICAgIGVsc2UgaWYgKHRhZyA9PT0gJ29iamlkJyAmJiBzdGF0ZS5hcmdzKQogICAgICByZXR1cm4gdGhpcy5fZGVjb2RlT2JqaWQoaW5wdXQsIHN0YXRlLmFyZ3NbMF0sIHN0YXRlLmFyZ3NbMV0sIG9wdGlvbnMpOwogICAgZWxzZSBpZiAodGFnID09PSAnb2JqaWQnKQogICAgICByZXR1cm4gdGhpcy5fZGVjb2RlT2JqaWQoaW5wdXQsIG51bGwsIG51bGwsIG9wdGlvbnMpOwogICAgZWxzZSBpZiAodGFnID09PSAnZ2VudGltZScgfHwgdGFnID09PSAndXRjdGltZScpCiAgICAgIHJldHVybiB0aGlzLl9kZWNvZGVUaW1lKGlucHV0LCB0YWcsIG9wdGlvbnMpOwogICAgZWxzZSBpZiAodGFnID09PSAnbnVsbF8nKQogICAgICByZXR1cm4gdGhpcy5fZGVjb2RlTnVsbChpbnB1dCwgb3B0aW9ucyk7CiAgICBlbHNlIGlmICh0YWcgPT09ICdib29sJykKICAgICAgcmV0dXJuIHRoaXMuX2RlY29kZUJvb2woaW5wdXQsIG9wdGlvbnMpOwogICAgZWxzZSBpZiAodGFnID09PSAnb2JqRGVzYycpCiAgICAgIHJldHVybiB0aGlzLl9kZWNvZGVTdHIoaW5wdXQsIHRhZywgb3B0aW9ucyk7CiAgICBlbHNlIGlmICh0YWcgPT09ICdpbnQnIHx8IHRhZyA9PT0gJ2VudW0nKQogICAgICByZXR1cm4gdGhpcy5fZGVjb2RlSW50KGlucHV0LCBzdGF0ZS5hcmdzICYmIHN0YXRlLmFyZ3NbMF0sIG9wdGlvbnMpOwoKICAgIGlmIChzdGF0ZS51c2UgIT09IG51bGwpIHsKICAgICAgcmV0dXJuIHRoaXMuX2dldFVzZShzdGF0ZS51c2UsIGlucHV0Ll9yZXBvcnRlclN0YXRlLm9iaikKICAgICAgICAuX2RlY29kZShpbnB1dCwgb3B0aW9ucyk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gaW5wdXQuZXJyb3IoJ3Vua25vd24gdGFnOiAnICsgdGFnKTsKICAgIH0KICB9OwoKICBOb2RlJDIucHJvdG90eXBlLl9nZXRVc2UgPSBmdW5jdGlvbiBfZ2V0VXNlKGVudGl0eSwgb2JqKSB7CgogICAgY29uc3Qgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CiAgICAvLyBDcmVhdGUgYWx0ZXJlZCB1c2UgZGVjb2RlciBpZiBpbXBsaWNpdCBpcyBzZXQKICAgIHN0YXRlLnVzZURlY29kZXIgPSB0aGlzLl91c2UoZW50aXR5LCBvYmopOwogICAgYXNzZXJ0KHN0YXRlLnVzZURlY29kZXIuX2Jhc2VTdGF0ZS5wYXJlbnQgPT09IG51bGwpOwogICAgc3RhdGUudXNlRGVjb2RlciA9IHN0YXRlLnVzZURlY29kZXIuX2Jhc2VTdGF0ZS5jaGlsZHJlblswXTsKICAgIGlmIChzdGF0ZS5pbXBsaWNpdCAhPT0gc3RhdGUudXNlRGVjb2Rlci5fYmFzZVN0YXRlLmltcGxpY2l0KSB7CiAgICAgIHN0YXRlLnVzZURlY29kZXIgPSBzdGF0ZS51c2VEZWNvZGVyLmNsb25lKCk7CiAgICAgIHN0YXRlLnVzZURlY29kZXIuX2Jhc2VTdGF0ZS5pbXBsaWNpdCA9IHN0YXRlLmltcGxpY2l0OwogICAgfQogICAgcmV0dXJuIHN0YXRlLnVzZURlY29kZXI7CiAgfTsKCiAgTm9kZSQyLnByb3RvdHlwZS5fZGVjb2RlQ2hvaWNlID0gZnVuY3Rpb24gZGVjb2RlQ2hvaWNlKGlucHV0LCBvcHRpb25zKSB7CiAgICBjb25zdCBzdGF0ZSA9IHRoaXMuX2Jhc2VTdGF0ZTsKICAgIGxldCByZXN1bHQgPSBudWxsOwogICAgbGV0IG1hdGNoID0gZmFsc2U7CgogICAgT2JqZWN0LmtleXMoc3RhdGUuY2hvaWNlKS5zb21lKGZ1bmN0aW9uKGtleSkgewogICAgICBjb25zdCBzYXZlID0gaW5wdXQuc2F2ZSgpOwogICAgICBjb25zdCBub2RlID0gc3RhdGUuY2hvaWNlW2tleV07CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgdmFsdWUgPSBub2RlLl9kZWNvZGUoaW5wdXQsIG9wdGlvbnMpOwogICAgICAgIGlmIChpbnB1dC5pc0Vycm9yKHZhbHVlKSkKICAgICAgICAgIHJldHVybiBmYWxzZTsKCiAgICAgICAgcmVzdWx0ID0geyB0eXBlOiBrZXksIHZhbHVlOiB2YWx1ZSB9OwogICAgICAgIG1hdGNoID0gdHJ1ZTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIGlucHV0LnJlc3RvcmUoc2F2ZSk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIHJldHVybiB0cnVlOwogICAgfSwgdGhpcyk7CgogICAgaWYgKCFtYXRjaCkKICAgICAgcmV0dXJuIGlucHV0LmVycm9yKCdDaG9pY2Ugbm90IG1hdGNoZWQnKTsKCiAgICByZXR1cm4gcmVzdWx0OwogIH07CgogIC8vCiAgLy8gRW5jb2RpbmcKICAvLwoKICBOb2RlJDIucHJvdG90eXBlLl9jcmVhdGVFbmNvZGVyQnVmZmVyID0gZnVuY3Rpb24gY3JlYXRlRW5jb2RlckJ1ZmZlcihkYXRhKSB7CiAgICByZXR1cm4gbmV3IEVuY29kZXJCdWZmZXIoZGF0YSwgdGhpcy5yZXBvcnRlcik7CiAgfTsKCiAgTm9kZSQyLnByb3RvdHlwZS5fZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKGRhdGEsIHJlcG9ydGVyLCBwYXJlbnQpIHsKICAgIGNvbnN0IHN0YXRlID0gdGhpcy5fYmFzZVN0YXRlOwogICAgaWYgKHN0YXRlWydkZWZhdWx0J10gIT09IG51bGwgJiYgc3RhdGVbJ2RlZmF1bHQnXSA9PT0gZGF0YSkKICAgICAgcmV0dXJuOwoKICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX2VuY29kZVZhbHVlKGRhdGEsIHJlcG9ydGVyLCBwYXJlbnQpOwogICAgaWYgKHJlc3VsdCA9PT0gdW5kZWZpbmVkKQogICAgICByZXR1cm47CgogICAgaWYgKHRoaXMuX3NraXBEZWZhdWx0KHJlc3VsdCwgcmVwb3J0ZXIsIHBhcmVudCkpCiAgICAgIHJldHVybjsKCiAgICByZXR1cm4gcmVzdWx0OwogIH07CgogIE5vZGUkMi5wcm90b3R5cGUuX2VuY29kZVZhbHVlID0gZnVuY3Rpb24gZW5jb2RlKGRhdGEsIHJlcG9ydGVyLCBwYXJlbnQpIHsKICAgIGNvbnN0IHN0YXRlID0gdGhpcy5fYmFzZVN0YXRlOwoKICAgIC8vIERlY29kZSByb290IG5vZGUKICAgIGlmIChzdGF0ZS5wYXJlbnQgPT09IG51bGwpCiAgICAgIHJldHVybiBzdGF0ZS5jaGlsZHJlblswXS5fZW5jb2RlKGRhdGEsIHJlcG9ydGVyIHx8IG5ldyBSZXBvcnRlcigpKTsKCiAgICBsZXQgcmVzdWx0ID0gbnVsbDsKCiAgICAvLyBTZXQgcmVwb3J0ZXIgdG8gc2hhcmUgaXQgd2l0aCBhIGNoaWxkIGNsYXNzCiAgICB0aGlzLnJlcG9ydGVyID0gcmVwb3J0ZXI7CgogICAgLy8gQ2hlY2sgaWYgZGF0YSBpcyB0aGVyZQogICAgaWYgKHN0YXRlLm9wdGlvbmFsICYmIGRhdGEgPT09IHVuZGVmaW5lZCkgewogICAgICBpZiAoc3RhdGVbJ2RlZmF1bHQnXSAhPT0gbnVsbCkKICAgICAgICBkYXRhID0gc3RhdGVbJ2RlZmF1bHQnXTsKICAgICAgZWxzZQogICAgICAgIHJldHVybjsKICAgIH0KCiAgICAvLyBFbmNvZGUgY2hpbGRyZW4gZmlyc3QKICAgIGxldCBjb250ZW50ID0gbnVsbDsKICAgIGxldCBwcmltaXRpdmUgPSBmYWxzZTsKICAgIGlmIChzdGF0ZS5hbnkpIHsKICAgICAgLy8gQW55dGhpbmcgdGhhdCB3YXMgZ2l2ZW4gaXMgdHJhbnNsYXRlZCB0byBidWZmZXIKICAgICAgcmVzdWx0ID0gdGhpcy5fY3JlYXRlRW5jb2RlckJ1ZmZlcihkYXRhKTsKICAgIH0gZWxzZSBpZiAoc3RhdGUuY2hvaWNlKSB7CiAgICAgIHJlc3VsdCA9IHRoaXMuX2VuY29kZUNob2ljZShkYXRhLCByZXBvcnRlcik7CiAgICB9IGVsc2UgaWYgKHN0YXRlLmNvbnRhaW5zKSB7CiAgICAgIGNvbnRlbnQgPSB0aGlzLl9nZXRVc2Uoc3RhdGUuY29udGFpbnMsIHBhcmVudCkuX2VuY29kZShkYXRhLCByZXBvcnRlcik7CiAgICAgIHByaW1pdGl2ZSA9IHRydWU7CiAgICB9IGVsc2UgaWYgKHN0YXRlLmNoaWxkcmVuKSB7CiAgICAgIGNvbnRlbnQgPSBzdGF0ZS5jaGlsZHJlbi5tYXAoZnVuY3Rpb24oY2hpbGQpIHsKICAgICAgICBpZiAoY2hpbGQuX2Jhc2VTdGF0ZS50YWcgPT09ICdudWxsXycpCiAgICAgICAgICByZXR1cm4gY2hpbGQuX2VuY29kZShudWxsLCByZXBvcnRlciwgZGF0YSk7CgogICAgICAgIGlmIChjaGlsZC5fYmFzZVN0YXRlLmtleSA9PT0gbnVsbCkKICAgICAgICAgIHJldHVybiByZXBvcnRlci5lcnJvcignQ2hpbGQgc2hvdWxkIGhhdmUgYSBrZXknKTsKICAgICAgICBjb25zdCBwcmV2S2V5ID0gcmVwb3J0ZXIuZW50ZXJLZXkoY2hpbGQuX2Jhc2VTdGF0ZS5rZXkpOwoKICAgICAgICBpZiAodHlwZW9mIGRhdGEgIT09ICdvYmplY3QnKQogICAgICAgICAgcmV0dXJuIHJlcG9ydGVyLmVycm9yKCdDaGlsZCBleHBlY3RlZCwgYnV0IGlucHV0IGlzIG5vdCBvYmplY3QnKTsKCiAgICAgICAgY29uc3QgcmVzID0gY2hpbGQuX2VuY29kZShkYXRhW2NoaWxkLl9iYXNlU3RhdGUua2V5XSwgcmVwb3J0ZXIsIGRhdGEpOwogICAgICAgIHJlcG9ydGVyLmxlYXZlS2V5KHByZXZLZXkpOwoKICAgICAgICByZXR1cm4gcmVzOwogICAgICB9LCB0aGlzKS5maWx0ZXIoZnVuY3Rpb24oY2hpbGQpIHsKICAgICAgICByZXR1cm4gY2hpbGQ7CiAgICAgIH0pOwogICAgICBjb250ZW50ID0gdGhpcy5fY3JlYXRlRW5jb2RlckJ1ZmZlcihjb250ZW50KTsKICAgIH0gZWxzZSB7CiAgICAgIGlmIChzdGF0ZS50YWcgPT09ICdzZXFvZicgfHwgc3RhdGUudGFnID09PSAnc2V0b2YnKSB7CiAgICAgICAgLy8gVE9ETyhpbmR1dG55KTogdGhpcyBzaG91bGQgYmUgdGhyb3duIG9uIERTTCBsZXZlbAogICAgICAgIGlmICghKHN0YXRlLmFyZ3MgJiYgc3RhdGUuYXJncy5sZW5ndGggPT09IDEpKQogICAgICAgICAgcmV0dXJuIHJlcG9ydGVyLmVycm9yKCdUb28gbWFueSBhcmdzIGZvciA6ICcgKyBzdGF0ZS50YWcpOwoKICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoZGF0YSkpCiAgICAgICAgICByZXR1cm4gcmVwb3J0ZXIuZXJyb3IoJ3NlcW9mL3NldG9mLCBidXQgZGF0YSBpcyBub3QgQXJyYXknKTsKCiAgICAgICAgY29uc3QgY2hpbGQgPSB0aGlzLmNsb25lKCk7CiAgICAgICAgY2hpbGQuX2Jhc2VTdGF0ZS5pbXBsaWNpdCA9IG51bGw7CiAgICAgICAgY29udGVudCA9IHRoaXMuX2NyZWF0ZUVuY29kZXJCdWZmZXIoZGF0YS5tYXAoZnVuY3Rpb24oaXRlbSkgewogICAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CgogICAgICAgICAgcmV0dXJuIHRoaXMuX2dldFVzZShzdGF0ZS5hcmdzWzBdLCBkYXRhKS5fZW5jb2RlKGl0ZW0sIHJlcG9ydGVyKTsKICAgICAgICB9LCBjaGlsZCkpOwogICAgICB9IGVsc2UgaWYgKHN0YXRlLnVzZSAhPT0gbnVsbCkgewogICAgICAgIHJlc3VsdCA9IHRoaXMuX2dldFVzZShzdGF0ZS51c2UsIHBhcmVudCkuX2VuY29kZShkYXRhLCByZXBvcnRlcik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29udGVudCA9IHRoaXMuX2VuY29kZVByaW1pdGl2ZShzdGF0ZS50YWcsIGRhdGEpOwogICAgICAgIHByaW1pdGl2ZSA9IHRydWU7CiAgICAgIH0KICAgIH0KCiAgICAvLyBFbmNvZGUgZGF0YSBpdHNlbGYKICAgIGlmICghc3RhdGUuYW55ICYmIHN0YXRlLmNob2ljZSA9PT0gbnVsbCkgewogICAgICBjb25zdCB0YWcgPSBzdGF0ZS5pbXBsaWNpdCAhPT0gbnVsbCA/IHN0YXRlLmltcGxpY2l0IDogc3RhdGUudGFnOwogICAgICBjb25zdCBjbHMgPSBzdGF0ZS5pbXBsaWNpdCA9PT0gbnVsbCA/ICd1bml2ZXJzYWwnIDogJ2NvbnRleHQnOwoKICAgICAgaWYgKHRhZyA9PT0gbnVsbCkgewogICAgICAgIGlmIChzdGF0ZS51c2UgPT09IG51bGwpCiAgICAgICAgICByZXBvcnRlci5lcnJvcignVGFnIGNvdWxkIGJlIG9taXR0ZWQgb25seSBmb3IgLnVzZSgpJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKHN0YXRlLnVzZSA9PT0gbnVsbCkKICAgICAgICAgIHJlc3VsdCA9IHRoaXMuX2VuY29kZUNvbXBvc2l0ZSh0YWcsIHByaW1pdGl2ZSwgY2xzLCBjb250ZW50KTsKICAgICAgfQogICAgfQoKICAgIC8vIFdyYXAgaW4gZXhwbGljaXQKICAgIGlmIChzdGF0ZS5leHBsaWNpdCAhPT0gbnVsbCkKICAgICAgcmVzdWx0ID0gdGhpcy5fZW5jb2RlQ29tcG9zaXRlKHN0YXRlLmV4cGxpY2l0LCBmYWxzZSwgJ2NvbnRleHQnLCByZXN1bHQpOwoKICAgIHJldHVybiByZXN1bHQ7CiAgfTsKCiAgTm9kZSQyLnByb3RvdHlwZS5fZW5jb2RlQ2hvaWNlID0gZnVuY3Rpb24gZW5jb2RlQ2hvaWNlKGRhdGEsIHJlcG9ydGVyKSB7CiAgICBjb25zdCBzdGF0ZSA9IHRoaXMuX2Jhc2VTdGF0ZTsKCiAgICBjb25zdCBub2RlID0gc3RhdGUuY2hvaWNlW2RhdGEudHlwZV07CiAgICBpZiAoIW5vZGUpIHsKICAgICAgYXNzZXJ0KAogICAgICAgIGZhbHNlLAogICAgICAgIGRhdGEudHlwZSArICcgbm90IGZvdW5kIGluICcgKwogICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KE9iamVjdC5rZXlzKHN0YXRlLmNob2ljZSkpKTsKICAgIH0KICAgIHJldHVybiBub2RlLl9lbmNvZGUoZGF0YS52YWx1ZSwgcmVwb3J0ZXIpOwogIH07CgogIE5vZGUkMi5wcm90b3R5cGUuX2VuY29kZVByaW1pdGl2ZSA9IGZ1bmN0aW9uIGVuY29kZVByaW1pdGl2ZSh0YWcsIGRhdGEpIHsKICAgIGNvbnN0IHN0YXRlID0gdGhpcy5fYmFzZVN0YXRlOwoKICAgIGlmICgvc3RyJC8udGVzdCh0YWcpKQogICAgICByZXR1cm4gdGhpcy5fZW5jb2RlU3RyKGRhdGEsIHRhZyk7CiAgICBlbHNlIGlmICh0YWcgPT09ICdvYmppZCcgJiYgc3RhdGUuYXJncykKICAgICAgcmV0dXJuIHRoaXMuX2VuY29kZU9iamlkKGRhdGEsIHN0YXRlLnJldmVyc2VBcmdzWzBdLCBzdGF0ZS5hcmdzWzFdKTsKICAgIGVsc2UgaWYgKHRhZyA9PT0gJ29iamlkJykKICAgICAgcmV0dXJuIHRoaXMuX2VuY29kZU9iamlkKGRhdGEsIG51bGwsIG51bGwpOwogICAgZWxzZSBpZiAodGFnID09PSAnZ2VudGltZScgfHwgdGFnID09PSAndXRjdGltZScpCiAgICAgIHJldHVybiB0aGlzLl9lbmNvZGVUaW1lKGRhdGEsIHRhZyk7CiAgICBlbHNlIGlmICh0YWcgPT09ICdudWxsXycpCiAgICAgIHJldHVybiB0aGlzLl9lbmNvZGVOdWxsKCk7CiAgICBlbHNlIGlmICh0YWcgPT09ICdpbnQnIHx8IHRhZyA9PT0gJ2VudW0nKQogICAgICByZXR1cm4gdGhpcy5fZW5jb2RlSW50KGRhdGEsIHN0YXRlLmFyZ3MgJiYgc3RhdGUucmV2ZXJzZUFyZ3NbMF0pOwogICAgZWxzZSBpZiAodGFnID09PSAnYm9vbCcpCiAgICAgIHJldHVybiB0aGlzLl9lbmNvZGVCb29sKGRhdGEpOwogICAgZWxzZSBpZiAodGFnID09PSAnb2JqRGVzYycpCiAgICAgIHJldHVybiB0aGlzLl9lbmNvZGVTdHIoZGF0YSwgdGFnKTsKICAgIGVsc2UKICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbnN1cHBvcnRlZCB0YWc6ICcgKyB0YWcpOwogIH07CgogIE5vZGUkMi5wcm90b3R5cGUuX2lzTnVtc3RyID0gZnVuY3Rpb24gaXNOdW1zdHIoc3RyKSB7CiAgICByZXR1cm4gL15bMC05IF0qJC8udGVzdChzdHIpOwogIH07CgogIE5vZGUkMi5wcm90b3R5cGUuX2lzUHJpbnRzdHIgPSBmdW5jdGlvbiBpc1ByaW50c3RyKHN0cikgewogICAgcmV0dXJuIC9eW0EtWmEtejAtOSAnKCkrLC0uLzo9P10qJC8udGVzdChzdHIpOwogIH07CgogIHZhciBkZXIkMiA9IHt9OwoKICAoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCiAgLy8gSGVscGVyCiAgZnVuY3Rpb24gcmV2ZXJzZShtYXApIHsKICAgIGNvbnN0IHJlcyA9IHt9OwoKICAgIE9iamVjdC5rZXlzKG1hcCkuZm9yRWFjaChmdW5jdGlvbihrZXkpIHsKICAgICAgLy8gQ29udmVydCBrZXkgdG8gaW50ZWdlciBpZiBpdCBpcyBzdHJpbmdpZmllZAogICAgICBpZiAoKGtleSB8IDApID09IGtleSkKICAgICAgICBrZXkgPSBrZXkgfCAwOwoKICAgICAgY29uc3QgdmFsdWUgPSBtYXBba2V5XTsKICAgICAgcmVzW3ZhbHVlXSA9IGtleTsKICAgIH0pOwoKICAgIHJldHVybiByZXM7CiAgfQoKICBleHBvcnRzLnRhZ0NsYXNzID0gewogICAgMDogJ3VuaXZlcnNhbCcsCiAgICAxOiAnYXBwbGljYXRpb24nLAogICAgMjogJ2NvbnRleHQnLAogICAgMzogJ3ByaXZhdGUnCiAgfTsKICBleHBvcnRzLnRhZ0NsYXNzQnlOYW1lID0gcmV2ZXJzZShleHBvcnRzLnRhZ0NsYXNzKTsKCiAgZXhwb3J0cy50YWcgPSB7CiAgICAweDAwOiAnZW5kJywKICAgIDB4MDE6ICdib29sJywKICAgIDB4MDI6ICdpbnQnLAogICAgMHgwMzogJ2JpdHN0cicsCiAgICAweDA0OiAnb2N0c3RyJywKICAgIDB4MDU6ICdudWxsXycsCiAgICAweDA2OiAnb2JqaWQnLAogICAgMHgwNzogJ29iakRlc2MnLAogICAgMHgwODogJ2V4dGVybmFsJywKICAgIDB4MDk6ICdyZWFsJywKICAgIDB4MGE6ICdlbnVtJywKICAgIDB4MGI6ICdlbWJlZCcsCiAgICAweDBjOiAndXRmOHN0cicsCiAgICAweDBkOiAncmVsYXRpdmVPaWQnLAogICAgMHgxMDogJ3NlcScsCiAgICAweDExOiAnc2V0JywKICAgIDB4MTI6ICdudW1zdHInLAogICAgMHgxMzogJ3ByaW50c3RyJywKICAgIDB4MTQ6ICd0NjFzdHInLAogICAgMHgxNTogJ3ZpZGVvc3RyJywKICAgIDB4MTY6ICdpYTVzdHInLAogICAgMHgxNzogJ3V0Y3RpbWUnLAogICAgMHgxODogJ2dlbnRpbWUnLAogICAgMHgxOTogJ2dyYXBoc3RyJywKICAgIDB4MWE6ICdpc282NDZzdHInLAogICAgMHgxYjogJ2dlbnN0cicsCiAgICAweDFjOiAndW5pc3RyJywKICAgIDB4MWQ6ICdjaGFyc3RyJywKICAgIDB4MWU6ICdibXBzdHInCiAgfTsKICBleHBvcnRzLnRhZ0J5TmFtZSA9IHJldmVyc2UoZXhwb3J0cy50YWcpOwogIH0oZGVyJDIpKTsKCiAgY29uc3QgaW5oZXJpdHMkNiA9IGluaGVyaXRzJGQuZXhwb3J0czsKICBjb25zdCBCdWZmZXIkZyA9IHNhZmVyXzEuQnVmZmVyOwogIGNvbnN0IE5vZGUkMSA9IG5vZGUkMTsKCiAgLy8gSW1wb3J0IERFUiBjb25zdGFudHMKICBjb25zdCBkZXIkMSA9IGRlciQyOwoKICBmdW5jdGlvbiBERVJFbmNvZGVyJDEoZW50aXR5KSB7CiAgICB0aGlzLmVuYyA9ICdkZXInOwogICAgdGhpcy5uYW1lID0gZW50aXR5Lm5hbWU7CiAgICB0aGlzLmVudGl0eSA9IGVudGl0eTsKCiAgICAvLyBDb25zdHJ1Y3QgYmFzZSB0cmVlCiAgICB0aGlzLnRyZWUgPSBuZXcgREVSTm9kZSQxKCk7CiAgICB0aGlzLnRyZWUuX2luaXQoZW50aXR5LmJvZHkpOwogIH0KICB2YXIgZGVyXzEkMSA9IERFUkVuY29kZXIkMTsKCiAgREVSRW5jb2RlciQxLnByb3RvdHlwZS5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUoZGF0YSwgcmVwb3J0ZXIpIHsKICAgIHJldHVybiB0aGlzLnRyZWUuX2VuY29kZShkYXRhLCByZXBvcnRlcikuam9pbigpOwogIH07CgogIC8vIFRyZWUgbWV0aG9kcwoKICBmdW5jdGlvbiBERVJOb2RlJDEocGFyZW50KSB7CiAgICBOb2RlJDEuY2FsbCh0aGlzLCAnZGVyJywgcGFyZW50KTsKICB9CiAgaW5oZXJpdHMkNihERVJOb2RlJDEsIE5vZGUkMSk7CgogIERFUk5vZGUkMS5wcm90b3R5cGUuX2VuY29kZUNvbXBvc2l0ZSA9IGZ1bmN0aW9uIGVuY29kZUNvbXBvc2l0ZSh0YWcsCiAgICBwcmltaXRpdmUsCiAgICBjbHMsCiAgICBjb250ZW50KSB7CiAgICBjb25zdCBlbmNvZGVkVGFnID0gZW5jb2RlVGFnKHRhZywgcHJpbWl0aXZlLCBjbHMsIHRoaXMucmVwb3J0ZXIpOwoKICAgIC8vIFNob3J0IGZvcm0KICAgIGlmIChjb250ZW50Lmxlbmd0aCA8IDB4ODApIHsKICAgICAgY29uc3QgaGVhZGVyID0gQnVmZmVyJGcuYWxsb2MoMik7CiAgICAgIGhlYWRlclswXSA9IGVuY29kZWRUYWc7CiAgICAgIGhlYWRlclsxXSA9IGNvbnRlbnQubGVuZ3RoOwogICAgICByZXR1cm4gdGhpcy5fY3JlYXRlRW5jb2RlckJ1ZmZlcihbIGhlYWRlciwgY29udGVudCBdKTsKICAgIH0KCiAgICAvLyBMb25nIGZvcm0KICAgIC8vIENvdW50IG9jdGV0cyByZXF1aXJlZCB0byBzdG9yZSBsZW5ndGgKICAgIGxldCBsZW5PY3RldHMgPSAxOwogICAgZm9yIChsZXQgaSA9IGNvbnRlbnQubGVuZ3RoOyBpID49IDB4MTAwOyBpID4+PSA4KQogICAgICBsZW5PY3RldHMrKzsKCiAgICBjb25zdCBoZWFkZXIgPSBCdWZmZXIkZy5hbGxvYygxICsgMSArIGxlbk9jdGV0cyk7CiAgICBoZWFkZXJbMF0gPSBlbmNvZGVkVGFnOwogICAgaGVhZGVyWzFdID0gMHg4MCB8IGxlbk9jdGV0czsKCiAgICBmb3IgKGxldCBpID0gMSArIGxlbk9jdGV0cywgaiA9IGNvbnRlbnQubGVuZ3RoOyBqID4gMDsgaS0tLCBqID4+PSA4KQogICAgICBoZWFkZXJbaV0gPSBqICYgMHhmZjsKCiAgICByZXR1cm4gdGhpcy5fY3JlYXRlRW5jb2RlckJ1ZmZlcihbIGhlYWRlciwgY29udGVudCBdKTsKICB9OwoKICBERVJOb2RlJDEucHJvdG90eXBlLl9lbmNvZGVTdHIgPSBmdW5jdGlvbiBlbmNvZGVTdHIoc3RyLCB0YWcpIHsKICAgIGlmICh0YWcgPT09ICdiaXRzdHInKSB7CiAgICAgIHJldHVybiB0aGlzLl9jcmVhdGVFbmNvZGVyQnVmZmVyKFsgc3RyLnVudXNlZCB8IDAsIHN0ci5kYXRhIF0pOwogICAgfSBlbHNlIGlmICh0YWcgPT09ICdibXBzdHInKSB7CiAgICAgIGNvbnN0IGJ1ZiA9IEJ1ZmZlciRnLmFsbG9jKHN0ci5sZW5ndGggKiAyKTsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHsKICAgICAgICBidWYud3JpdGVVSW50MTZCRShzdHIuY2hhckNvZGVBdChpKSwgaSAqIDIpOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLl9jcmVhdGVFbmNvZGVyQnVmZmVyKGJ1Zik7CiAgICB9IGVsc2UgaWYgKHRhZyA9PT0gJ251bXN0cicpIHsKICAgICAgaWYgKCF0aGlzLl9pc051bXN0cihzdHIpKSB7CiAgICAgICAgcmV0dXJuIHRoaXMucmVwb3J0ZXIuZXJyb3IoJ0VuY29kaW5nIG9mIHN0cmluZyB0eXBlOiBudW1zdHIgc3VwcG9ydHMgJyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ29ubHkgZGlnaXRzIGFuZCBzcGFjZScpOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLl9jcmVhdGVFbmNvZGVyQnVmZmVyKHN0cik7CiAgICB9IGVsc2UgaWYgKHRhZyA9PT0gJ3ByaW50c3RyJykgewogICAgICBpZiAoIXRoaXMuX2lzUHJpbnRzdHIoc3RyKSkgewogICAgICAgIHJldHVybiB0aGlzLnJlcG9ydGVyLmVycm9yKCdFbmNvZGluZyBvZiBzdHJpbmcgdHlwZTogcHJpbnRzdHIgc3VwcG9ydHMgJyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ29ubHkgbGF0aW4gdXBwZXIgYW5kIGxvd2VyIGNhc2UgbGV0dGVycywgJyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpZ2l0cywgc3BhY2UsIGFwb3N0cm9waGUsIGxlZnQgYW5kIHJpZ3RoICcgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdwYXJlbnRoZXNpcywgcGx1cyBzaWduLCBjb21tYSwgaHlwaGVuLCAnICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZG90LCBzbGFzaCwgY29sb24sIGVxdWFsIHNpZ24sICcgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdxdWVzdGlvbiBtYXJrJyk7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMuX2NyZWF0ZUVuY29kZXJCdWZmZXIoc3RyKTsKICAgIH0gZWxzZSBpZiAoL3N0ciQvLnRlc3QodGFnKSkgewogICAgICByZXR1cm4gdGhpcy5fY3JlYXRlRW5jb2RlckJ1ZmZlcihzdHIpOwogICAgfSBlbHNlIGlmICh0YWcgPT09ICdvYmpEZXNjJykgewogICAgICByZXR1cm4gdGhpcy5fY3JlYXRlRW5jb2RlckJ1ZmZlcihzdHIpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHRoaXMucmVwb3J0ZXIuZXJyb3IoJ0VuY29kaW5nIG9mIHN0cmluZyB0eXBlOiAnICsgdGFnICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyB1bnN1cHBvcnRlZCcpOwogICAgfQogIH07CgogIERFUk5vZGUkMS5wcm90b3R5cGUuX2VuY29kZU9iamlkID0gZnVuY3Rpb24gZW5jb2RlT2JqaWQoaWQsIHZhbHVlcywgcmVsYXRpdmUpIHsKICAgIGlmICh0eXBlb2YgaWQgPT09ICdzdHJpbmcnKSB7CiAgICAgIGlmICghdmFsdWVzKQogICAgICAgIHJldHVybiB0aGlzLnJlcG9ydGVyLmVycm9yKCdzdHJpbmcgb2JqaWQgZ2l2ZW4sIGJ1dCBubyB2YWx1ZXMgbWFwIGZvdW5kJyk7CiAgICAgIGlmICghdmFsdWVzLmhhc093blByb3BlcnR5KGlkKSkKICAgICAgICByZXR1cm4gdGhpcy5yZXBvcnRlci5lcnJvcignb2JqaWQgbm90IGZvdW5kIGluIHZhbHVlcyBtYXAnKTsKICAgICAgaWQgPSB2YWx1ZXNbaWRdLnNwbGl0KC9bXHMuXSsvZyk7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaWQubGVuZ3RoOyBpKyspCiAgICAgICAgaWRbaV0gfD0gMDsKICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShpZCkpIHsKICAgICAgaWQgPSBpZC5zbGljZSgpOwogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlkLmxlbmd0aDsgaSsrKQogICAgICAgIGlkW2ldIHw9IDA7CiAgICB9CgogICAgaWYgKCFBcnJheS5pc0FycmF5KGlkKSkgewogICAgICByZXR1cm4gdGhpcy5yZXBvcnRlci5lcnJvcignb2JqaWQoKSBzaG91bGQgYmUgZWl0aGVyIGFycmF5IG9yIHN0cmluZywgJyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdnb3Q6ICcgKyBKU09OLnN0cmluZ2lmeShpZCkpOwogICAgfQoKICAgIGlmICghcmVsYXRpdmUpIHsKICAgICAgaWYgKGlkWzFdID49IDQwKQogICAgICAgIHJldHVybiB0aGlzLnJlcG9ydGVyLmVycm9yKCdTZWNvbmQgb2JqaWQgaWRlbnRpZmllciBPT0InKTsKICAgICAgaWQuc3BsaWNlKDAsIDIsIGlkWzBdICogNDAgKyBpZFsxXSk7CiAgICB9CgogICAgLy8gQ291bnQgbnVtYmVyIG9mIG9jdGV0cwogICAgbGV0IHNpemUgPSAwOwogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpZC5sZW5ndGg7IGkrKykgewogICAgICBsZXQgaWRlbnQgPSBpZFtpXTsKICAgICAgZm9yIChzaXplKys7IGlkZW50ID49IDB4ODA7IGlkZW50ID4+PSA3KQogICAgICAgIHNpemUrKzsKICAgIH0KCiAgICBjb25zdCBvYmppZCA9IEJ1ZmZlciRnLmFsbG9jKHNpemUpOwogICAgbGV0IG9mZnNldCA9IG9iamlkLmxlbmd0aCAtIDE7CiAgICBmb3IgKGxldCBpID0gaWQubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgICAgbGV0IGlkZW50ID0gaWRbaV07CiAgICAgIG9iamlkW29mZnNldC0tXSA9IGlkZW50ICYgMHg3ZjsKICAgICAgd2hpbGUgKChpZGVudCA+Pj0gNykgPiAwKQogICAgICAgIG9iamlkW29mZnNldC0tXSA9IDB4ODAgfCAoaWRlbnQgJiAweDdmKTsKICAgIH0KCiAgICByZXR1cm4gdGhpcy5fY3JlYXRlRW5jb2RlckJ1ZmZlcihvYmppZCk7CiAgfTsKCiAgZnVuY3Rpb24gdHdvKG51bSkgewogICAgaWYgKG51bSA8IDEwKQogICAgICByZXR1cm4gJzAnICsgbnVtOwogICAgZWxzZQogICAgICByZXR1cm4gbnVtOwogIH0KCiAgREVSTm9kZSQxLnByb3RvdHlwZS5fZW5jb2RlVGltZSA9IGZ1bmN0aW9uIGVuY29kZVRpbWUodGltZSwgdGFnKSB7CiAgICBsZXQgc3RyOwogICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHRpbWUpOwoKICAgIGlmICh0YWcgPT09ICdnZW50aW1lJykgewogICAgICBzdHIgPSBbCiAgICAgICAgdHdvKGRhdGUuZ2V0VVRDRnVsbFllYXIoKSksCiAgICAgICAgdHdvKGRhdGUuZ2V0VVRDTW9udGgoKSArIDEpLAogICAgICAgIHR3byhkYXRlLmdldFVUQ0RhdGUoKSksCiAgICAgICAgdHdvKGRhdGUuZ2V0VVRDSG91cnMoKSksCiAgICAgICAgdHdvKGRhdGUuZ2V0VVRDTWludXRlcygpKSwKICAgICAgICB0d28oZGF0ZS5nZXRVVENTZWNvbmRzKCkpLAogICAgICAgICdaJwogICAgICBdLmpvaW4oJycpOwogICAgfSBlbHNlIGlmICh0YWcgPT09ICd1dGN0aW1lJykgewogICAgICBzdHIgPSBbCiAgICAgICAgdHdvKGRhdGUuZ2V0VVRDRnVsbFllYXIoKSAlIDEwMCksCiAgICAgICAgdHdvKGRhdGUuZ2V0VVRDTW9udGgoKSArIDEpLAogICAgICAgIHR3byhkYXRlLmdldFVUQ0RhdGUoKSksCiAgICAgICAgdHdvKGRhdGUuZ2V0VVRDSG91cnMoKSksCiAgICAgICAgdHdvKGRhdGUuZ2V0VVRDTWludXRlcygpKSwKICAgICAgICB0d28oZGF0ZS5nZXRVVENTZWNvbmRzKCkpLAogICAgICAgICdaJwogICAgICBdLmpvaW4oJycpOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy5yZXBvcnRlci5lcnJvcignRW5jb2RpbmcgJyArIHRhZyArICcgdGltZSBpcyBub3Qgc3VwcG9ydGVkIHlldCcpOwogICAgfQoKICAgIHJldHVybiB0aGlzLl9lbmNvZGVTdHIoc3RyLCAnb2N0c3RyJyk7CiAgfTsKCiAgREVSTm9kZSQxLnByb3RvdHlwZS5fZW5jb2RlTnVsbCA9IGZ1bmN0aW9uIGVuY29kZU51bGwoKSB7CiAgICByZXR1cm4gdGhpcy5fY3JlYXRlRW5jb2RlckJ1ZmZlcignJyk7CiAgfTsKCiAgREVSTm9kZSQxLnByb3RvdHlwZS5fZW5jb2RlSW50ID0gZnVuY3Rpb24gZW5jb2RlSW50KG51bSwgdmFsdWVzKSB7CiAgICBpZiAodHlwZW9mIG51bSA9PT0gJ3N0cmluZycpIHsKICAgICAgaWYgKCF2YWx1ZXMpCiAgICAgICAgcmV0dXJuIHRoaXMucmVwb3J0ZXIuZXJyb3IoJ1N0cmluZyBpbnQgb3IgZW51bSBnaXZlbiwgYnV0IG5vIHZhbHVlcyBtYXAnKTsKICAgICAgaWYgKCF2YWx1ZXMuaGFzT3duUHJvcGVydHkobnVtKSkgewogICAgICAgIHJldHVybiB0aGlzLnJlcG9ydGVyLmVycm9yKCdWYWx1ZXMgbWFwIGRvZXNuXCd0IGNvbnRhaW46ICcgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KG51bSkpOwogICAgICB9CiAgICAgIG51bSA9IHZhbHVlc1tudW1dOwogICAgfQoKICAgIC8vIEJpZ251bSwgYXNzdW1lIGJpZyBlbmRpYW4KICAgIGlmICh0eXBlb2YgbnVtICE9PSAnbnVtYmVyJyAmJiAhQnVmZmVyJGcuaXNCdWZmZXIobnVtKSkgewogICAgICBjb25zdCBudW1BcnJheSA9IG51bS50b0FycmF5KCk7CiAgICAgIGlmICghbnVtLnNpZ24gJiYgbnVtQXJyYXlbMF0gJiAweDgwKSB7CiAgICAgICAgbnVtQXJyYXkudW5zaGlmdCgwKTsKICAgICAgfQogICAgICBudW0gPSBCdWZmZXIkZy5mcm9tKG51bUFycmF5KTsKICAgIH0KCiAgICBpZiAoQnVmZmVyJGcuaXNCdWZmZXIobnVtKSkgewogICAgICBsZXQgc2l6ZSA9IG51bS5sZW5ndGg7CiAgICAgIGlmIChudW0ubGVuZ3RoID09PSAwKQogICAgICAgIHNpemUrKzsKCiAgICAgIGNvbnN0IG91dCA9IEJ1ZmZlciRnLmFsbG9jKHNpemUpOwogICAgICBudW0uY29weShvdXQpOwogICAgICBpZiAobnVtLmxlbmd0aCA9PT0gMCkKICAgICAgICBvdXRbMF0gPSAwOwogICAgICByZXR1cm4gdGhpcy5fY3JlYXRlRW5jb2RlckJ1ZmZlcihvdXQpOwogICAgfQoKICAgIGlmIChudW0gPCAweDgwKQogICAgICByZXR1cm4gdGhpcy5fY3JlYXRlRW5jb2RlckJ1ZmZlcihudW0pOwoKICAgIGlmIChudW0gPCAweDEwMCkKICAgICAgcmV0dXJuIHRoaXMuX2NyZWF0ZUVuY29kZXJCdWZmZXIoWzAsIG51bV0pOwoKICAgIGxldCBzaXplID0gMTsKICAgIGZvciAobGV0IGkgPSBudW07IGkgPj0gMHgxMDA7IGkgPj49IDgpCiAgICAgIHNpemUrKzsKCiAgICBjb25zdCBvdXQgPSBuZXcgQXJyYXkoc2l6ZSk7CiAgICBmb3IgKGxldCBpID0gb3V0Lmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICAgIG91dFtpXSA9IG51bSAmIDB4ZmY7CiAgICAgIG51bSA+Pj0gODsKICAgIH0KICAgIGlmKG91dFswXSAmIDB4ODApIHsKICAgICAgb3V0LnVuc2hpZnQoMCk7CiAgICB9CgogICAgcmV0dXJuIHRoaXMuX2NyZWF0ZUVuY29kZXJCdWZmZXIoQnVmZmVyJGcuZnJvbShvdXQpKTsKICB9OwoKICBERVJOb2RlJDEucHJvdG90eXBlLl9lbmNvZGVCb29sID0gZnVuY3Rpb24gZW5jb2RlQm9vbCh2YWx1ZSkgewogICAgcmV0dXJuIHRoaXMuX2NyZWF0ZUVuY29kZXJCdWZmZXIodmFsdWUgPyAweGZmIDogMCk7CiAgfTsKCiAgREVSTm9kZSQxLnByb3RvdHlwZS5fdXNlID0gZnVuY3Rpb24gdXNlKGVudGl0eSwgb2JqKSB7CiAgICBpZiAodHlwZW9mIGVudGl0eSA9PT0gJ2Z1bmN0aW9uJykKICAgICAgZW50aXR5ID0gZW50aXR5KG9iaik7CiAgICByZXR1cm4gZW50aXR5Ll9nZXRFbmNvZGVyKCdkZXInKS50cmVlOwogIH07CgogIERFUk5vZGUkMS5wcm90b3R5cGUuX3NraXBEZWZhdWx0ID0gZnVuY3Rpb24gc2tpcERlZmF1bHQoZGF0YUJ1ZmZlciwgcmVwb3J0ZXIsIHBhcmVudCkgewogICAgY29uc3Qgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CiAgICBsZXQgaTsKICAgIGlmIChzdGF0ZVsnZGVmYXVsdCddID09PSBudWxsKQogICAgICByZXR1cm4gZmFsc2U7CgogICAgY29uc3QgZGF0YSA9IGRhdGFCdWZmZXIuam9pbigpOwogICAgaWYgKHN0YXRlLmRlZmF1bHRCdWZmZXIgPT09IHVuZGVmaW5lZCkKICAgICAgc3RhdGUuZGVmYXVsdEJ1ZmZlciA9IHRoaXMuX2VuY29kZVZhbHVlKHN0YXRlWydkZWZhdWx0J10sIHJlcG9ydGVyLCBwYXJlbnQpLmpvaW4oKTsKCiAgICBpZiAoZGF0YS5sZW5ndGggIT09IHN0YXRlLmRlZmF1bHRCdWZmZXIubGVuZ3RoKQogICAgICByZXR1cm4gZmFsc2U7CgogICAgZm9yIChpPTA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKQogICAgICBpZiAoZGF0YVtpXSAhPT0gc3RhdGUuZGVmYXVsdEJ1ZmZlcltpXSkKICAgICAgICByZXR1cm4gZmFsc2U7CgogICAgcmV0dXJuIHRydWU7CiAgfTsKCiAgLy8gVXRpbGl0eSBtZXRob2RzCgogIGZ1bmN0aW9uIGVuY29kZVRhZyh0YWcsIHByaW1pdGl2ZSwgY2xzLCByZXBvcnRlcikgewogICAgbGV0IHJlczsKCiAgICBpZiAodGFnID09PSAnc2Vxb2YnKQogICAgICB0YWcgPSAnc2VxJzsKICAgIGVsc2UgaWYgKHRhZyA9PT0gJ3NldG9mJykKICAgICAgdGFnID0gJ3NldCc7CgogICAgaWYgKGRlciQxLnRhZ0J5TmFtZS5oYXNPd25Qcm9wZXJ0eSh0YWcpKQogICAgICByZXMgPSBkZXIkMS50YWdCeU5hbWVbdGFnXTsKICAgIGVsc2UgaWYgKHR5cGVvZiB0YWcgPT09ICdudW1iZXInICYmICh0YWcgfCAwKSA9PT0gdGFnKQogICAgICByZXMgPSB0YWc7CiAgICBlbHNlCiAgICAgIHJldHVybiByZXBvcnRlci5lcnJvcignVW5rbm93biB0YWc6ICcgKyB0YWcpOwoKICAgIGlmIChyZXMgPj0gMHgxZikKICAgICAgcmV0dXJuIHJlcG9ydGVyLmVycm9yKCdNdWx0aS1vY3RldCB0YWcgZW5jb2RpbmcgdW5zdXBwb3J0ZWQnKTsKCiAgICBpZiAoIXByaW1pdGl2ZSkKICAgICAgcmVzIHw9IDB4MjA7CgogICAgcmVzIHw9IChkZXIkMS50YWdDbGFzc0J5TmFtZVtjbHMgfHwgJ3VuaXZlcnNhbCddIDw8IDYpOwoKICAgIHJldHVybiByZXM7CiAgfQoKICBjb25zdCBpbmhlcml0cyQ1ID0gaW5oZXJpdHMkZC5leHBvcnRzOwoKICBjb25zdCBERVJFbmNvZGVyID0gZGVyXzEkMTsKCiAgZnVuY3Rpb24gUEVNRW5jb2RlcihlbnRpdHkpIHsKICAgIERFUkVuY29kZXIuY2FsbCh0aGlzLCBlbnRpdHkpOwogICAgdGhpcy5lbmMgPSAncGVtJzsKICB9CiAgaW5oZXJpdHMkNShQRU1FbmNvZGVyLCBERVJFbmNvZGVyKTsKICB2YXIgcGVtJDEgPSBQRU1FbmNvZGVyOwoKICBQRU1FbmNvZGVyLnByb3RvdHlwZS5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUoZGF0YSwgb3B0aW9ucykgewogICAgY29uc3QgYnVmID0gREVSRW5jb2Rlci5wcm90b3R5cGUuZW5jb2RlLmNhbGwodGhpcywgZGF0YSk7CgogICAgY29uc3QgcCA9IGJ1Zi50b1N0cmluZygnYmFzZTY0Jyk7CiAgICBjb25zdCBvdXQgPSBbICctLS0tLUJFR0lOICcgKyBvcHRpb25zLmxhYmVsICsgJy0tLS0tJyBdOwogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwLmxlbmd0aDsgaSArPSA2NCkKICAgICAgb3V0LnB1c2gocC5zbGljZShpLCBpICsgNjQpKTsKICAgIG91dC5wdXNoKCctLS0tLUVORCAnICsgb3B0aW9ucy5sYWJlbCArICctLS0tLScpOwogICAgcmV0dXJuIG91dC5qb2luKCdcbicpOwogIH07CgogIChmdW5jdGlvbiAoZXhwb3J0cykgewoKICBjb25zdCBlbmNvZGVycyA9IGV4cG9ydHM7CgogIGVuY29kZXJzLmRlciA9IGRlcl8xJDE7CiAgZW5jb2RlcnMucGVtID0gcGVtJDE7CiAgfShlbmNvZGVycykpOwoKICB2YXIgZGVjb2RlcnMgPSB7fTsKCiAgY29uc3QgaW5oZXJpdHMkNCA9IGluaGVyaXRzJGQuZXhwb3J0czsKCiAgY29uc3QgYmlnbnVtID0gYm4kMi5leHBvcnRzOwogIGNvbnN0IERlY29kZXJCdWZmZXIgPSBidWZmZXIuRGVjb2RlckJ1ZmZlcjsKICBjb25zdCBOb2RlID0gbm9kZSQxOwoKICAvLyBJbXBvcnQgREVSIGNvbnN0YW50cwogIGNvbnN0IGRlciA9IGRlciQyOwoKICBmdW5jdGlvbiBERVJEZWNvZGVyJDEoZW50aXR5KSB7CiAgICB0aGlzLmVuYyA9ICdkZXInOwogICAgdGhpcy5uYW1lID0gZW50aXR5Lm5hbWU7CiAgICB0aGlzLmVudGl0eSA9IGVudGl0eTsKCiAgICAvLyBDb25zdHJ1Y3QgYmFzZSB0cmVlCiAgICB0aGlzLnRyZWUgPSBuZXcgREVSTm9kZSgpOwogICAgdGhpcy50cmVlLl9pbml0KGVudGl0eS5ib2R5KTsKICB9CiAgdmFyIGRlcl8xID0gREVSRGVjb2RlciQxOwoKICBERVJEZWNvZGVyJDEucHJvdG90eXBlLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShkYXRhLCBvcHRpb25zKSB7CiAgICBpZiAoIURlY29kZXJCdWZmZXIuaXNEZWNvZGVyQnVmZmVyKGRhdGEpKSB7CiAgICAgIGRhdGEgPSBuZXcgRGVjb2RlckJ1ZmZlcihkYXRhLCBvcHRpb25zKTsKICAgIH0KCiAgICByZXR1cm4gdGhpcy50cmVlLl9kZWNvZGUoZGF0YSwgb3B0aW9ucyk7CiAgfTsKCiAgLy8gVHJlZSBtZXRob2RzCgogIGZ1bmN0aW9uIERFUk5vZGUocGFyZW50KSB7CiAgICBOb2RlLmNhbGwodGhpcywgJ2RlcicsIHBhcmVudCk7CiAgfQogIGluaGVyaXRzJDQoREVSTm9kZSwgTm9kZSk7CgogIERFUk5vZGUucHJvdG90eXBlLl9wZWVrVGFnID0gZnVuY3Rpb24gcGVla1RhZyhidWZmZXIsIHRhZywgYW55KSB7CiAgICBpZiAoYnVmZmVyLmlzRW1wdHkoKSkKICAgICAgcmV0dXJuIGZhbHNlOwoKICAgIGNvbnN0IHN0YXRlID0gYnVmZmVyLnNhdmUoKTsKICAgIGNvbnN0IGRlY29kZWRUYWcgPSBkZXJEZWNvZGVUYWcoYnVmZmVyLCAnRmFpbGVkIHRvIHBlZWsgdGFnOiAiJyArIHRhZyArICciJyk7CiAgICBpZiAoYnVmZmVyLmlzRXJyb3IoZGVjb2RlZFRhZykpCiAgICAgIHJldHVybiBkZWNvZGVkVGFnOwoKICAgIGJ1ZmZlci5yZXN0b3JlKHN0YXRlKTsKCiAgICByZXR1cm4gZGVjb2RlZFRhZy50YWcgPT09IHRhZyB8fCBkZWNvZGVkVGFnLnRhZ1N0ciA9PT0gdGFnIHx8CiAgICAgIChkZWNvZGVkVGFnLnRhZ1N0ciArICdvZicpID09PSB0YWcgfHwgYW55OwogIH07CgogIERFUk5vZGUucHJvdG90eXBlLl9kZWNvZGVUYWcgPSBmdW5jdGlvbiBkZWNvZGVUYWcoYnVmZmVyLCB0YWcsIGFueSkgewogICAgY29uc3QgZGVjb2RlZFRhZyA9IGRlckRlY29kZVRhZyhidWZmZXIsCiAgICAgICdGYWlsZWQgdG8gZGVjb2RlIHRhZyBvZiAiJyArIHRhZyArICciJyk7CiAgICBpZiAoYnVmZmVyLmlzRXJyb3IoZGVjb2RlZFRhZykpCiAgICAgIHJldHVybiBkZWNvZGVkVGFnOwoKICAgIGxldCBsZW4gPSBkZXJEZWNvZGVMZW4oYnVmZmVyLAogICAgICBkZWNvZGVkVGFnLnByaW1pdGl2ZSwKICAgICAgJ0ZhaWxlZCB0byBnZXQgbGVuZ3RoIG9mICInICsgdGFnICsgJyInKTsKCiAgICAvLyBGYWlsdXJlCiAgICBpZiAoYnVmZmVyLmlzRXJyb3IobGVuKSkKICAgICAgcmV0dXJuIGxlbjsKCiAgICBpZiAoIWFueSAmJgogICAgICAgIGRlY29kZWRUYWcudGFnICE9PSB0YWcgJiYKICAgICAgICBkZWNvZGVkVGFnLnRhZ1N0ciAhPT0gdGFnICYmCiAgICAgICAgZGVjb2RlZFRhZy50YWdTdHIgKyAnb2YnICE9PSB0YWcpIHsKICAgICAgcmV0dXJuIGJ1ZmZlci5lcnJvcignRmFpbGVkIHRvIG1hdGNoIHRhZzogIicgKyB0YWcgKyAnIicpOwogICAgfQoKICAgIGlmIChkZWNvZGVkVGFnLnByaW1pdGl2ZSB8fCBsZW4gIT09IG51bGwpCiAgICAgIHJldHVybiBidWZmZXIuc2tpcChsZW4sICdGYWlsZWQgdG8gbWF0Y2ggYm9keSBvZjogIicgKyB0YWcgKyAnIicpOwoKICAgIC8vIEluZGVmaW5pdGUgbGVuZ3RoLi4uIGZpbmQgRU5EIHRhZwogICAgY29uc3Qgc3RhdGUgPSBidWZmZXIuc2F2ZSgpOwogICAgY29uc3QgcmVzID0gdGhpcy5fc2tpcFVudGlsRW5kKAogICAgICBidWZmZXIsCiAgICAgICdGYWlsZWQgdG8gc2tpcCBpbmRlZmluaXRlIGxlbmd0aCBib2R5OiAiJyArIHRoaXMudGFnICsgJyInKTsKICAgIGlmIChidWZmZXIuaXNFcnJvcihyZXMpKQogICAgICByZXR1cm4gcmVzOwoKICAgIGxlbiA9IGJ1ZmZlci5vZmZzZXQgLSBzdGF0ZS5vZmZzZXQ7CiAgICBidWZmZXIucmVzdG9yZShzdGF0ZSk7CiAgICByZXR1cm4gYnVmZmVyLnNraXAobGVuLCAnRmFpbGVkIHRvIG1hdGNoIGJvZHkgb2Y6ICInICsgdGFnICsgJyInKTsKICB9OwoKICBERVJOb2RlLnByb3RvdHlwZS5fc2tpcFVudGlsRW5kID0gZnVuY3Rpb24gc2tpcFVudGlsRW5kKGJ1ZmZlciwgZmFpbCkgewogICAgZm9yICg7OykgewogICAgICBjb25zdCB0YWcgPSBkZXJEZWNvZGVUYWcoYnVmZmVyLCBmYWlsKTsKICAgICAgaWYgKGJ1ZmZlci5pc0Vycm9yKHRhZykpCiAgICAgICAgcmV0dXJuIHRhZzsKICAgICAgY29uc3QgbGVuID0gZGVyRGVjb2RlTGVuKGJ1ZmZlciwgdGFnLnByaW1pdGl2ZSwgZmFpbCk7CiAgICAgIGlmIChidWZmZXIuaXNFcnJvcihsZW4pKQogICAgICAgIHJldHVybiBsZW47CgogICAgICBsZXQgcmVzOwogICAgICBpZiAodGFnLnByaW1pdGl2ZSB8fCBsZW4gIT09IG51bGwpCiAgICAgICAgcmVzID0gYnVmZmVyLnNraXAobGVuKTsKICAgICAgZWxzZQogICAgICAgIHJlcyA9IHRoaXMuX3NraXBVbnRpbEVuZChidWZmZXIsIGZhaWwpOwoKICAgICAgLy8gRmFpbHVyZQogICAgICBpZiAoYnVmZmVyLmlzRXJyb3IocmVzKSkKICAgICAgICByZXR1cm4gcmVzOwoKICAgICAgaWYgKHRhZy50YWdTdHIgPT09ICdlbmQnKQogICAgICAgIGJyZWFrOwogICAgfQogIH07CgogIERFUk5vZGUucHJvdG90eXBlLl9kZWNvZGVMaXN0ID0gZnVuY3Rpb24gZGVjb2RlTGlzdChidWZmZXIsIHRhZywgZGVjb2RlciwKICAgIG9wdGlvbnMpIHsKICAgIGNvbnN0IHJlc3VsdCA9IFtdOwogICAgd2hpbGUgKCFidWZmZXIuaXNFbXB0eSgpKSB7CiAgICAgIGNvbnN0IHBvc3NpYmxlRW5kID0gdGhpcy5fcGVla1RhZyhidWZmZXIsICdlbmQnKTsKICAgICAgaWYgKGJ1ZmZlci5pc0Vycm9yKHBvc3NpYmxlRW5kKSkKICAgICAgICByZXR1cm4gcG9zc2libGVFbmQ7CgogICAgICBjb25zdCByZXMgPSBkZWNvZGVyLmRlY29kZShidWZmZXIsICdkZXInLCBvcHRpb25zKTsKICAgICAgaWYgKGJ1ZmZlci5pc0Vycm9yKHJlcykgJiYgcG9zc2libGVFbmQpCiAgICAgICAgYnJlYWs7CiAgICAgIHJlc3VsdC5wdXNoKHJlcyk7CiAgICB9CiAgICByZXR1cm4gcmVzdWx0OwogIH07CgogIERFUk5vZGUucHJvdG90eXBlLl9kZWNvZGVTdHIgPSBmdW5jdGlvbiBkZWNvZGVTdHIoYnVmZmVyLCB0YWcpIHsKICAgIGlmICh0YWcgPT09ICdiaXRzdHInKSB7CiAgICAgIGNvbnN0IHVudXNlZCA9IGJ1ZmZlci5yZWFkVUludDgoKTsKICAgICAgaWYgKGJ1ZmZlci5pc0Vycm9yKHVudXNlZCkpCiAgICAgICAgcmV0dXJuIHVudXNlZDsKICAgICAgcmV0dXJuIHsgdW51c2VkOiB1bnVzZWQsIGRhdGE6IGJ1ZmZlci5yYXcoKSB9OwogICAgfSBlbHNlIGlmICh0YWcgPT09ICdibXBzdHInKSB7CiAgICAgIGNvbnN0IHJhdyA9IGJ1ZmZlci5yYXcoKTsKICAgICAgaWYgKHJhdy5sZW5ndGggJSAyID09PSAxKQogICAgICAgIHJldHVybiBidWZmZXIuZXJyb3IoJ0RlY29kaW5nIG9mIHN0cmluZyB0eXBlOiBibXBzdHIgbGVuZ3RoIG1pc21hdGNoJyk7CgogICAgICBsZXQgc3RyID0gJyc7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmF3Lmxlbmd0aCAvIDI7IGkrKykgewogICAgICAgIHN0ciArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHJhdy5yZWFkVUludDE2QkUoaSAqIDIpKTsKICAgICAgfQogICAgICByZXR1cm4gc3RyOwogICAgfSBlbHNlIGlmICh0YWcgPT09ICdudW1zdHInKSB7CiAgICAgIGNvbnN0IG51bXN0ciA9IGJ1ZmZlci5yYXcoKS50b1N0cmluZygnYXNjaWknKTsKICAgICAgaWYgKCF0aGlzLl9pc051bXN0cihudW1zdHIpKSB7CiAgICAgICAgcmV0dXJuIGJ1ZmZlci5lcnJvcignRGVjb2Rpbmcgb2Ygc3RyaW5nIHR5cGU6ICcgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ251bXN0ciB1bnN1cHBvcnRlZCBjaGFyYWN0ZXJzJyk7CiAgICAgIH0KICAgICAgcmV0dXJuIG51bXN0cjsKICAgIH0gZWxzZSBpZiAodGFnID09PSAnb2N0c3RyJykgewogICAgICByZXR1cm4gYnVmZmVyLnJhdygpOwogICAgfSBlbHNlIGlmICh0YWcgPT09ICdvYmpEZXNjJykgewogICAgICByZXR1cm4gYnVmZmVyLnJhdygpOwogICAgfSBlbHNlIGlmICh0YWcgPT09ICdwcmludHN0cicpIHsKICAgICAgY29uc3QgcHJpbnRzdHIgPSBidWZmZXIucmF3KCkudG9TdHJpbmcoJ2FzY2lpJyk7CiAgICAgIGlmICghdGhpcy5faXNQcmludHN0cihwcmludHN0cikpIHsKICAgICAgICByZXR1cm4gYnVmZmVyLmVycm9yKCdEZWNvZGluZyBvZiBzdHJpbmcgdHlwZTogJyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAncHJpbnRzdHIgdW5zdXBwb3J0ZWQgY2hhcmFjdGVycycpOwogICAgICB9CiAgICAgIHJldHVybiBwcmludHN0cjsKICAgIH0gZWxzZSBpZiAoL3N0ciQvLnRlc3QodGFnKSkgewogICAgICByZXR1cm4gYnVmZmVyLnJhdygpLnRvU3RyaW5nKCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gYnVmZmVyLmVycm9yKCdEZWNvZGluZyBvZiBzdHJpbmcgdHlwZTogJyArIHRhZyArICcgdW5zdXBwb3J0ZWQnKTsKICAgIH0KICB9OwoKICBERVJOb2RlLnByb3RvdHlwZS5fZGVjb2RlT2JqaWQgPSBmdW5jdGlvbiBkZWNvZGVPYmppZChidWZmZXIsIHZhbHVlcywgcmVsYXRpdmUpIHsKICAgIGxldCByZXN1bHQ7CiAgICBjb25zdCBpZGVudGlmaWVycyA9IFtdOwogICAgbGV0IGlkZW50ID0gMDsKICAgIGxldCBzdWJpZGVudCA9IDA7CiAgICB3aGlsZSAoIWJ1ZmZlci5pc0VtcHR5KCkpIHsKICAgICAgc3ViaWRlbnQgPSBidWZmZXIucmVhZFVJbnQ4KCk7CiAgICAgIGlkZW50IDw8PSA3OwogICAgICBpZGVudCB8PSBzdWJpZGVudCAmIDB4N2Y7CiAgICAgIGlmICgoc3ViaWRlbnQgJiAweDgwKSA9PT0gMCkgewogICAgICAgIGlkZW50aWZpZXJzLnB1c2goaWRlbnQpOwogICAgICAgIGlkZW50ID0gMDsKICAgICAgfQogICAgfQogICAgaWYgKHN1YmlkZW50ICYgMHg4MCkKICAgICAgaWRlbnRpZmllcnMucHVzaChpZGVudCk7CgogICAgY29uc3QgZmlyc3QgPSAoaWRlbnRpZmllcnNbMF0gLyA0MCkgfCAwOwogICAgY29uc3Qgc2Vjb25kID0gaWRlbnRpZmllcnNbMF0gJSA0MDsKCiAgICBpZiAocmVsYXRpdmUpCiAgICAgIHJlc3VsdCA9IGlkZW50aWZpZXJzOwogICAgZWxzZQogICAgICByZXN1bHQgPSBbZmlyc3QsIHNlY29uZF0uY29uY2F0KGlkZW50aWZpZXJzLnNsaWNlKDEpKTsKCiAgICBpZiAodmFsdWVzKSB7CiAgICAgIGxldCB0bXAgPSB2YWx1ZXNbcmVzdWx0LmpvaW4oJyAnKV07CiAgICAgIGlmICh0bXAgPT09IHVuZGVmaW5lZCkKICAgICAgICB0bXAgPSB2YWx1ZXNbcmVzdWx0LmpvaW4oJy4nKV07CiAgICAgIGlmICh0bXAgIT09IHVuZGVmaW5lZCkKICAgICAgICByZXN1bHQgPSB0bXA7CiAgICB9CgogICAgcmV0dXJuIHJlc3VsdDsKICB9OwoKICBERVJOb2RlLnByb3RvdHlwZS5fZGVjb2RlVGltZSA9IGZ1bmN0aW9uIGRlY29kZVRpbWUoYnVmZmVyLCB0YWcpIHsKICAgIGNvbnN0IHN0ciA9IGJ1ZmZlci5yYXcoKS50b1N0cmluZygpOwoKICAgIGxldCB5ZWFyOwogICAgbGV0IG1vbjsKICAgIGxldCBkYXk7CiAgICBsZXQgaG91cjsKICAgIGxldCBtaW47CiAgICBsZXQgc2VjOwogICAgaWYgKHRhZyA9PT0gJ2dlbnRpbWUnKSB7CiAgICAgIHllYXIgPSBzdHIuc2xpY2UoMCwgNCkgfCAwOwogICAgICBtb24gPSBzdHIuc2xpY2UoNCwgNikgfCAwOwogICAgICBkYXkgPSBzdHIuc2xpY2UoNiwgOCkgfCAwOwogICAgICBob3VyID0gc3RyLnNsaWNlKDgsIDEwKSB8IDA7CiAgICAgIG1pbiA9IHN0ci5zbGljZSgxMCwgMTIpIHwgMDsKICAgICAgc2VjID0gc3RyLnNsaWNlKDEyLCAxNCkgfCAwOwogICAgfSBlbHNlIGlmICh0YWcgPT09ICd1dGN0aW1lJykgewogICAgICB5ZWFyID0gc3RyLnNsaWNlKDAsIDIpIHwgMDsKICAgICAgbW9uID0gc3RyLnNsaWNlKDIsIDQpIHwgMDsKICAgICAgZGF5ID0gc3RyLnNsaWNlKDQsIDYpIHwgMDsKICAgICAgaG91ciA9IHN0ci5zbGljZSg2LCA4KSB8IDA7CiAgICAgIG1pbiA9IHN0ci5zbGljZSg4LCAxMCkgfCAwOwogICAgICBzZWMgPSBzdHIuc2xpY2UoMTAsIDEyKSB8IDA7CiAgICAgIGlmICh5ZWFyIDwgNzApCiAgICAgICAgeWVhciA9IDIwMDAgKyB5ZWFyOwogICAgICBlbHNlCiAgICAgICAgeWVhciA9IDE5MDAgKyB5ZWFyOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGJ1ZmZlci5lcnJvcignRGVjb2RpbmcgJyArIHRhZyArICcgdGltZSBpcyBub3Qgc3VwcG9ydGVkIHlldCcpOwogICAgfQoKICAgIHJldHVybiBEYXRlLlVUQyh5ZWFyLCBtb24gLSAxLCBkYXksIGhvdXIsIG1pbiwgc2VjLCAwKTsKICB9OwoKICBERVJOb2RlLnByb3RvdHlwZS5fZGVjb2RlTnVsbCA9IGZ1bmN0aW9uIGRlY29kZU51bGwoKSB7CiAgICByZXR1cm4gbnVsbDsKICB9OwoKICBERVJOb2RlLnByb3RvdHlwZS5fZGVjb2RlQm9vbCA9IGZ1bmN0aW9uIGRlY29kZUJvb2woYnVmZmVyKSB7CiAgICBjb25zdCByZXMgPSBidWZmZXIucmVhZFVJbnQ4KCk7CiAgICBpZiAoYnVmZmVyLmlzRXJyb3IocmVzKSkKICAgICAgcmV0dXJuIHJlczsKICAgIGVsc2UKICAgICAgcmV0dXJuIHJlcyAhPT0gMDsKICB9OwoKICBERVJOb2RlLnByb3RvdHlwZS5fZGVjb2RlSW50ID0gZnVuY3Rpb24gZGVjb2RlSW50KGJ1ZmZlciwgdmFsdWVzKSB7CiAgICAvLyBCaWdpbnQsIHJldHVybiBhcyBpdCBpcyAoYXNzdW1lIGJpZyBlbmRpYW4pCiAgICBjb25zdCByYXcgPSBidWZmZXIucmF3KCk7CiAgICBsZXQgcmVzID0gbmV3IGJpZ251bShyYXcpOwoKICAgIGlmICh2YWx1ZXMpCiAgICAgIHJlcyA9IHZhbHVlc1tyZXMudG9TdHJpbmcoMTApXSB8fCByZXM7CgogICAgcmV0dXJuIHJlczsKICB9OwoKICBERVJOb2RlLnByb3RvdHlwZS5fdXNlID0gZnVuY3Rpb24gdXNlKGVudGl0eSwgb2JqKSB7CiAgICBpZiAodHlwZW9mIGVudGl0eSA9PT0gJ2Z1bmN0aW9uJykKICAgICAgZW50aXR5ID0gZW50aXR5KG9iaik7CiAgICByZXR1cm4gZW50aXR5Ll9nZXREZWNvZGVyKCdkZXInKS50cmVlOwogIH07CgogIC8vIFV0aWxpdHkgbWV0aG9kcwoKICBmdW5jdGlvbiBkZXJEZWNvZGVUYWcoYnVmLCBmYWlsKSB7CiAgICBsZXQgdGFnID0gYnVmLnJlYWRVSW50OChmYWlsKTsKICAgIGlmIChidWYuaXNFcnJvcih0YWcpKQogICAgICByZXR1cm4gdGFnOwoKICAgIGNvbnN0IGNscyA9IGRlci50YWdDbGFzc1t0YWcgPj4gNl07CiAgICBjb25zdCBwcmltaXRpdmUgPSAodGFnICYgMHgyMCkgPT09IDA7CgogICAgLy8gTXVsdGktb2N0ZXQgdGFnIC0gbG9hZAogICAgaWYgKCh0YWcgJiAweDFmKSA9PT0gMHgxZikgewogICAgICBsZXQgb2N0ID0gdGFnOwogICAgICB0YWcgPSAwOwogICAgICB3aGlsZSAoKG9jdCAmIDB4ODApID09PSAweDgwKSB7CiAgICAgICAgb2N0ID0gYnVmLnJlYWRVSW50OChmYWlsKTsKICAgICAgICBpZiAoYnVmLmlzRXJyb3Iob2N0KSkKICAgICAgICAgIHJldHVybiBvY3Q7CgogICAgICAgIHRhZyA8PD0gNzsKICAgICAgICB0YWcgfD0gb2N0ICYgMHg3ZjsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgdGFnICY9IDB4MWY7CiAgICB9CiAgICBjb25zdCB0YWdTdHIgPSBkZXIudGFnW3RhZ107CgogICAgcmV0dXJuIHsKICAgICAgY2xzOiBjbHMsCiAgICAgIHByaW1pdGl2ZTogcHJpbWl0aXZlLAogICAgICB0YWc6IHRhZywKICAgICAgdGFnU3RyOiB0YWdTdHIKICAgIH07CiAgfQoKICBmdW5jdGlvbiBkZXJEZWNvZGVMZW4oYnVmLCBwcmltaXRpdmUsIGZhaWwpIHsKICAgIGxldCBsZW4gPSBidWYucmVhZFVJbnQ4KGZhaWwpOwogICAgaWYgKGJ1Zi5pc0Vycm9yKGxlbikpCiAgICAgIHJldHVybiBsZW47CgogICAgLy8gSW5kZWZpbml0ZSBmb3JtCiAgICBpZiAoIXByaW1pdGl2ZSAmJiBsZW4gPT09IDB4ODApCiAgICAgIHJldHVybiBudWxsOwoKICAgIC8vIERlZmluaXRlIGZvcm0KICAgIGlmICgobGVuICYgMHg4MCkgPT09IDApIHsKICAgICAgLy8gU2hvcnQgZm9ybQogICAgICByZXR1cm4gbGVuOwogICAgfQoKICAgIC8vIExvbmcgZm9ybQogICAgY29uc3QgbnVtID0gbGVuICYgMHg3ZjsKICAgIGlmIChudW0gPiA0KQogICAgICByZXR1cm4gYnVmLmVycm9yKCdsZW5ndGggb2N0ZWN0IGlzIHRvbyBsb25nJyk7CgogICAgbGVuID0gMDsKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtOyBpKyspIHsKICAgICAgbGVuIDw8PSA4OwogICAgICBjb25zdCBqID0gYnVmLnJlYWRVSW50OChmYWlsKTsKICAgICAgaWYgKGJ1Zi5pc0Vycm9yKGopKQogICAgICAgIHJldHVybiBqOwogICAgICBsZW4gfD0gajsKICAgIH0KCiAgICByZXR1cm4gbGVuOwogIH0KCiAgY29uc3QgaW5oZXJpdHMkMyA9IGluaGVyaXRzJGQuZXhwb3J0czsKICBjb25zdCBCdWZmZXIkZiA9IHNhZmVyXzEuQnVmZmVyOwoKICBjb25zdCBERVJEZWNvZGVyID0gZGVyXzE7CgogIGZ1bmN0aW9uIFBFTURlY29kZXIoZW50aXR5KSB7CiAgICBERVJEZWNvZGVyLmNhbGwodGhpcywgZW50aXR5KTsKICAgIHRoaXMuZW5jID0gJ3BlbSc7CiAgfQogIGluaGVyaXRzJDMoUEVNRGVjb2RlciwgREVSRGVjb2Rlcik7CiAgdmFyIHBlbSA9IFBFTURlY29kZXI7CgogIFBFTURlY29kZXIucHJvdG90eXBlLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShkYXRhLCBvcHRpb25zKSB7CiAgICBjb25zdCBsaW5lcyA9IGRhdGEudG9TdHJpbmcoKS5zcGxpdCgvW1xyXG5dKy9nKTsKCiAgICBjb25zdCBsYWJlbCA9IG9wdGlvbnMubGFiZWwudG9VcHBlckNhc2UoKTsKCiAgICBjb25zdCByZSA9IC9eLS0tLS0oQkVHSU58RU5EKSAoW14tXSspLS0tLS0kLzsKICAgIGxldCBzdGFydCA9IC0xOwogICAgbGV0IGVuZCA9IC0xOwogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykgewogICAgICBjb25zdCBtYXRjaCA9IGxpbmVzW2ldLm1hdGNoKHJlKTsKICAgICAgaWYgKG1hdGNoID09PSBudWxsKQogICAgICAgIGNvbnRpbnVlOwoKICAgICAgaWYgKG1hdGNoWzJdICE9PSBsYWJlbCkKICAgICAgICBjb250aW51ZTsKCiAgICAgIGlmIChzdGFydCA9PT0gLTEpIHsKICAgICAgICBpZiAobWF0Y2hbMV0gIT09ICdCRUdJTicpCiAgICAgICAgICBicmVhazsKICAgICAgICBzdGFydCA9IGk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKG1hdGNoWzFdICE9PSAnRU5EJykKICAgICAgICAgIGJyZWFrOwogICAgICAgIGVuZCA9IGk7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KICAgIGlmIChzdGFydCA9PT0gLTEgfHwgZW5kID09PSAtMSkKICAgICAgdGhyb3cgbmV3IEVycm9yKCdQRU0gc2VjdGlvbiBub3QgZm91bmQgZm9yOiAnICsgbGFiZWwpOwoKICAgIGNvbnN0IGJhc2U2NCA9IGxpbmVzLnNsaWNlKHN0YXJ0ICsgMSwgZW5kKS5qb2luKCcnKTsKICAgIC8vIFJlbW92ZSBleGNlc3NpdmUgc3ltYm9scwogICAgYmFzZTY0LnJlcGxhY2UoL1teYS16MC05Ky89XSsvZ2ksICcnKTsKCiAgICBjb25zdCBpbnB1dCA9IEJ1ZmZlciRmLmZyb20oYmFzZTY0LCAnYmFzZTY0Jyk7CiAgICByZXR1cm4gREVSRGVjb2Rlci5wcm90b3R5cGUuZGVjb2RlLmNhbGwodGhpcywgaW5wdXQsIG9wdGlvbnMpOwogIH07CgogIChmdW5jdGlvbiAoZXhwb3J0cykgewoKICBjb25zdCBkZWNvZGVycyA9IGV4cG9ydHM7CgogIGRlY29kZXJzLmRlciA9IGRlcl8xOwogIGRlY29kZXJzLnBlbSA9IHBlbTsKICB9KGRlY29kZXJzKSk7CgogIChmdW5jdGlvbiAoZXhwb3J0cykgewoKICBjb25zdCBlbmNvZGVycyQxID0gZW5jb2RlcnM7CiAgY29uc3QgZGVjb2RlcnMkMSA9IGRlY29kZXJzOwogIGNvbnN0IGluaGVyaXRzID0gaW5oZXJpdHMkZC5leHBvcnRzOwoKICBjb25zdCBhcGkgPSBleHBvcnRzOwoKICBhcGkuZGVmaW5lID0gZnVuY3Rpb24gZGVmaW5lKG5hbWUsIGJvZHkpIHsKICAgIHJldHVybiBuZXcgRW50aXR5KG5hbWUsIGJvZHkpOwogIH07CgogIGZ1bmN0aW9uIEVudGl0eShuYW1lLCBib2R5KSB7CiAgICB0aGlzLm5hbWUgPSBuYW1lOwogICAgdGhpcy5ib2R5ID0gYm9keTsKCiAgICB0aGlzLmRlY29kZXJzID0ge307CiAgICB0aGlzLmVuY29kZXJzID0ge307CiAgfQoKICBFbnRpdHkucHJvdG90eXBlLl9jcmVhdGVOYW1lZCA9IGZ1bmN0aW9uIGNyZWF0ZU5hbWVkKEJhc2UpIHsKICAgIGNvbnN0IG5hbWUgPSB0aGlzLm5hbWU7CgogICAgZnVuY3Rpb24gR2VuZXJhdGVkKGVudGl0eSkgewogICAgICB0aGlzLl9pbml0TmFtZWQoZW50aXR5LCBuYW1lKTsKICAgIH0KICAgIGluaGVyaXRzKEdlbmVyYXRlZCwgQmFzZSk7CiAgICBHZW5lcmF0ZWQucHJvdG90eXBlLl9pbml0TmFtZWQgPSBmdW5jdGlvbiBfaW5pdE5hbWVkKGVudGl0eSwgbmFtZSkgewogICAgICBCYXNlLmNhbGwodGhpcywgZW50aXR5LCBuYW1lKTsKICAgIH07CgogICAgcmV0dXJuIG5ldyBHZW5lcmF0ZWQodGhpcyk7CiAgfTsKCiAgRW50aXR5LnByb3RvdHlwZS5fZ2V0RGVjb2RlciA9IGZ1bmN0aW9uIF9nZXREZWNvZGVyKGVuYykgewogICAgZW5jID0gZW5jIHx8ICdkZXInOwogICAgLy8gTGF6aWx5IGNyZWF0ZSBkZWNvZGVyCiAgICBpZiAoIXRoaXMuZGVjb2RlcnMuaGFzT3duUHJvcGVydHkoZW5jKSkKICAgICAgdGhpcy5kZWNvZGVyc1tlbmNdID0gdGhpcy5fY3JlYXRlTmFtZWQoZGVjb2RlcnMkMVtlbmNdKTsKICAgIHJldHVybiB0aGlzLmRlY29kZXJzW2VuY107CiAgfTsKCiAgRW50aXR5LnByb3RvdHlwZS5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUoZGF0YSwgZW5jLCBvcHRpb25zKSB7CiAgICByZXR1cm4gdGhpcy5fZ2V0RGVjb2RlcihlbmMpLmRlY29kZShkYXRhLCBvcHRpb25zKTsKICB9OwoKICBFbnRpdHkucHJvdG90eXBlLl9nZXRFbmNvZGVyID0gZnVuY3Rpb24gX2dldEVuY29kZXIoZW5jKSB7CiAgICBlbmMgPSBlbmMgfHwgJ2Rlcic7CiAgICAvLyBMYXppbHkgY3JlYXRlIGVuY29kZXIKICAgIGlmICghdGhpcy5lbmNvZGVycy5oYXNPd25Qcm9wZXJ0eShlbmMpKQogICAgICB0aGlzLmVuY29kZXJzW2VuY10gPSB0aGlzLl9jcmVhdGVOYW1lZChlbmNvZGVycyQxW2VuY10pOwogICAgcmV0dXJuIHRoaXMuZW5jb2RlcnNbZW5jXTsKICB9OwoKICBFbnRpdHkucHJvdG90eXBlLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShkYXRhLCBlbmMsIC8qIGludGVybmFsICovIHJlcG9ydGVyKSB7CiAgICByZXR1cm4gdGhpcy5fZ2V0RW5jb2RlcihlbmMpLmVuY29kZShkYXRhLCByZXBvcnRlcik7CiAgfTsKICB9KGFwaSkpOwoKICB2YXIgYmFzZSA9IHt9OwoKICAoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCiAgY29uc3QgYmFzZSA9IGV4cG9ydHM7CgogIGJhc2UuUmVwb3J0ZXIgPSByZXBvcnRlci5SZXBvcnRlcjsKICBiYXNlLkRlY29kZXJCdWZmZXIgPSBidWZmZXIuRGVjb2RlckJ1ZmZlcjsKICBiYXNlLkVuY29kZXJCdWZmZXIgPSBidWZmZXIuRW5jb2RlckJ1ZmZlcjsKICBiYXNlLk5vZGUgPSBub2RlJDE7CiAgfShiYXNlKSk7CgogIHZhciBjb25zdGFudHMgPSB7fTsKCiAgKGZ1bmN0aW9uIChleHBvcnRzKSB7CgogIGNvbnN0IGNvbnN0YW50cyA9IGV4cG9ydHM7CgogIC8vIEhlbHBlcgogIGNvbnN0YW50cy5fcmV2ZXJzZSA9IGZ1bmN0aW9uIHJldmVyc2UobWFwKSB7CiAgICBjb25zdCByZXMgPSB7fTsKCiAgICBPYmplY3Qua2V5cyhtYXApLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7CiAgICAgIC8vIENvbnZlcnQga2V5IHRvIGludGVnZXIgaWYgaXQgaXMgc3RyaW5naWZpZWQKICAgICAgaWYgKChrZXkgfCAwKSA9PSBrZXkpCiAgICAgICAga2V5ID0ga2V5IHwgMDsKCiAgICAgIGNvbnN0IHZhbHVlID0gbWFwW2tleV07CiAgICAgIHJlc1t2YWx1ZV0gPSBrZXk7CiAgICB9KTsKCiAgICByZXR1cm4gcmVzOwogIH07CgogIGNvbnN0YW50cy5kZXIgPSBkZXIkMjsKICB9KGNvbnN0YW50cykpOwoKICAoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCiAgY29uc3QgYXNuMSA9IGV4cG9ydHM7CgogIGFzbjEuYmlnbnVtID0gYm4kMi5leHBvcnRzOwoKICBhc24xLmRlZmluZSA9IGFwaS5kZWZpbmU7CiAgYXNuMS5iYXNlID0gYmFzZTsKICBhc24xLmNvbnN0YW50cyA9IGNvbnN0YW50czsKICBhc24xLmRlY29kZXJzID0gZGVjb2RlcnM7CiAgYXNuMS5lbmNvZGVycyA9IGVuY29kZXJzOwogIH0oYXNuMSQyKSk7CgogIHZhciBhc24gPSBhc24xJDI7CgogIHZhciBUaW1lID0gYXNuLmRlZmluZSgnVGltZScsIGZ1bmN0aW9uICgpIHsKICAgIHRoaXMuY2hvaWNlKHsKICAgICAgdXRjVGltZTogdGhpcy51dGN0aW1lKCksCiAgICAgIGdlbmVyYWxUaW1lOiB0aGlzLmdlbnRpbWUoKQogICAgfSk7CiAgfSk7CgogIHZhciBBdHRyaWJ1dGVUeXBlVmFsdWUgPSBhc24uZGVmaW5lKCdBdHRyaWJ1dGVUeXBlVmFsdWUnLCBmdW5jdGlvbiAoKSB7CiAgICB0aGlzLnNlcSgpLm9iaigKICAgICAgdGhpcy5rZXkoJ3R5cGUnKS5vYmppZCgpLAogICAgICB0aGlzLmtleSgndmFsdWUnKS5hbnkoKQogICAgKTsKICB9KTsKCiAgdmFyIEFsZ29yaXRobUlkZW50aWZpZXIkMSA9IGFzbi5kZWZpbmUoJ0FsZ29yaXRobUlkZW50aWZpZXInLCBmdW5jdGlvbiAoKSB7CiAgICB0aGlzLnNlcSgpLm9iaigKICAgICAgdGhpcy5rZXkoJ2FsZ29yaXRobScpLm9iamlkKCksCiAgICAgIHRoaXMua2V5KCdwYXJhbWV0ZXJzJykub3B0aW9uYWwoKSwKICAgICAgdGhpcy5rZXkoJ2N1cnZlJykub2JqaWQoKS5vcHRpb25hbCgpCiAgICApOwogIH0pOwoKICB2YXIgU3ViamVjdFB1YmxpY0tleUluZm8gPSBhc24uZGVmaW5lKCdTdWJqZWN0UHVibGljS2V5SW5mbycsIGZ1bmN0aW9uICgpIHsKICAgIHRoaXMuc2VxKCkub2JqKAogICAgICB0aGlzLmtleSgnYWxnb3JpdGhtJykudXNlKEFsZ29yaXRobUlkZW50aWZpZXIkMSksCiAgICAgIHRoaXMua2V5KCdzdWJqZWN0UHVibGljS2V5JykuYml0c3RyKCkKICAgICk7CiAgfSk7CgogIHZhciBSZWxhdGl2ZURpc3Rpbmd1aXNoZWROYW1lID0gYXNuLmRlZmluZSgnUmVsYXRpdmVEaXN0aW5ndWlzaGVkTmFtZScsIGZ1bmN0aW9uICgpIHsKICAgIHRoaXMuc2V0b2YoQXR0cmlidXRlVHlwZVZhbHVlKTsKICB9KTsKCiAgdmFyIFJETlNlcXVlbmNlID0gYXNuLmRlZmluZSgnUkROU2VxdWVuY2UnLCBmdW5jdGlvbiAoKSB7CiAgICB0aGlzLnNlcW9mKFJlbGF0aXZlRGlzdGluZ3Vpc2hlZE5hbWUpOwogIH0pOwoKICB2YXIgTmFtZSA9IGFzbi5kZWZpbmUoJ05hbWUnLCBmdW5jdGlvbiAoKSB7CiAgICB0aGlzLmNob2ljZSh7CiAgICAgIHJkblNlcXVlbmNlOiB0aGlzLnVzZShSRE5TZXF1ZW5jZSkKICAgIH0pOwogIH0pOwoKICB2YXIgVmFsaWRpdHkgPSBhc24uZGVmaW5lKCdWYWxpZGl0eScsIGZ1bmN0aW9uICgpIHsKICAgIHRoaXMuc2VxKCkub2JqKAogICAgICB0aGlzLmtleSgnbm90QmVmb3JlJykudXNlKFRpbWUpLAogICAgICB0aGlzLmtleSgnbm90QWZ0ZXInKS51c2UoVGltZSkKICAgICk7CiAgfSk7CgogIHZhciBFeHRlbnNpb24gPSBhc24uZGVmaW5lKCdFeHRlbnNpb24nLCBmdW5jdGlvbiAoKSB7CiAgICB0aGlzLnNlcSgpLm9iaigKICAgICAgdGhpcy5rZXkoJ2V4dG5JRCcpLm9iamlkKCksCiAgICAgIHRoaXMua2V5KCdjcml0aWNhbCcpLmJvb2woKS5kZWYoZmFsc2UpLAogICAgICB0aGlzLmtleSgnZXh0blZhbHVlJykub2N0c3RyKCkKICAgICk7CiAgfSk7CgogIHZhciBUQlNDZXJ0aWZpY2F0ZSA9IGFzbi5kZWZpbmUoJ1RCU0NlcnRpZmljYXRlJywgZnVuY3Rpb24gKCkgewogICAgdGhpcy5zZXEoKS5vYmooCiAgICAgIHRoaXMua2V5KCd2ZXJzaW9uJykuZXhwbGljaXQoMCkuaW50KCkub3B0aW9uYWwoKSwKICAgICAgdGhpcy5rZXkoJ3NlcmlhbE51bWJlcicpLmludCgpLAogICAgICB0aGlzLmtleSgnc2lnbmF0dXJlJykudXNlKEFsZ29yaXRobUlkZW50aWZpZXIkMSksCiAgICAgIHRoaXMua2V5KCdpc3N1ZXInKS51c2UoTmFtZSksCiAgICAgIHRoaXMua2V5KCd2YWxpZGl0eScpLnVzZShWYWxpZGl0eSksCiAgICAgIHRoaXMua2V5KCdzdWJqZWN0JykudXNlKE5hbWUpLAogICAgICB0aGlzLmtleSgnc3ViamVjdFB1YmxpY0tleUluZm8nKS51c2UoU3ViamVjdFB1YmxpY0tleUluZm8pLAogICAgICB0aGlzLmtleSgnaXNzdWVyVW5pcXVlSUQnKS5pbXBsaWNpdCgxKS5iaXRzdHIoKS5vcHRpb25hbCgpLAogICAgICB0aGlzLmtleSgnc3ViamVjdFVuaXF1ZUlEJykuaW1wbGljaXQoMikuYml0c3RyKCkub3B0aW9uYWwoKSwKICAgICAgdGhpcy5rZXkoJ2V4dGVuc2lvbnMnKS5leHBsaWNpdCgzKS5zZXFvZihFeHRlbnNpb24pLm9wdGlvbmFsKCkKICAgICk7CiAgfSk7CgogIHZhciBYNTA5Q2VydGlmaWNhdGUgPSBhc24uZGVmaW5lKCdYNTA5Q2VydGlmaWNhdGUnLCBmdW5jdGlvbiAoKSB7CiAgICB0aGlzLnNlcSgpLm9iaigKICAgICAgdGhpcy5rZXkoJ3Ric0NlcnRpZmljYXRlJykudXNlKFRCU0NlcnRpZmljYXRlKSwKICAgICAgdGhpcy5rZXkoJ3NpZ25hdHVyZUFsZ29yaXRobScpLnVzZShBbGdvcml0aG1JZGVudGlmaWVyJDEpLAogICAgICB0aGlzLmtleSgnc2lnbmF0dXJlVmFsdWUnKS5iaXRzdHIoKQogICAgKTsKICB9KTsKCiAgdmFyIGNlcnRpZmljYXRlID0gWDUwOUNlcnRpZmljYXRlOwoKICB2YXIgYXNuMSQxID0gYXNuMSQyOwoKICBhc24xJDMuY2VydGlmaWNhdGUgPSBjZXJ0aWZpY2F0ZTsKCiAgdmFyIFJTQVByaXZhdGVLZXkgPSBhc24xJDEuZGVmaW5lKCdSU0FQcml2YXRlS2V5JywgZnVuY3Rpb24gKCkgewogICAgdGhpcy5zZXEoKS5vYmooCiAgICAgIHRoaXMua2V5KCd2ZXJzaW9uJykuaW50KCksCiAgICAgIHRoaXMua2V5KCdtb2R1bHVzJykuaW50KCksCiAgICAgIHRoaXMua2V5KCdwdWJsaWNFeHBvbmVudCcpLmludCgpLAogICAgICB0aGlzLmtleSgncHJpdmF0ZUV4cG9uZW50JykuaW50KCksCiAgICAgIHRoaXMua2V5KCdwcmltZTEnKS5pbnQoKSwKICAgICAgdGhpcy5rZXkoJ3ByaW1lMicpLmludCgpLAogICAgICB0aGlzLmtleSgnZXhwb25lbnQxJykuaW50KCksCiAgICAgIHRoaXMua2V5KCdleHBvbmVudDInKS5pbnQoKSwKICAgICAgdGhpcy5rZXkoJ2NvZWZmaWNpZW50JykuaW50KCkKICAgICk7CiAgfSk7CiAgYXNuMSQzLlJTQVByaXZhdGVLZXkgPSBSU0FQcml2YXRlS2V5OwoKICB2YXIgUlNBUHVibGljS2V5ID0gYXNuMSQxLmRlZmluZSgnUlNBUHVibGljS2V5JywgZnVuY3Rpb24gKCkgewogICAgdGhpcy5zZXEoKS5vYmooCiAgICAgIHRoaXMua2V5KCdtb2R1bHVzJykuaW50KCksCiAgICAgIHRoaXMua2V5KCdwdWJsaWNFeHBvbmVudCcpLmludCgpCiAgICApOwogIH0pOwogIGFzbjEkMy5SU0FQdWJsaWNLZXkgPSBSU0FQdWJsaWNLZXk7CgogIHZhciBQdWJsaWNLZXkgPSBhc24xJDEuZGVmaW5lKCdTdWJqZWN0UHVibGljS2V5SW5mbycsIGZ1bmN0aW9uICgpIHsKICAgIHRoaXMuc2VxKCkub2JqKAogICAgICB0aGlzLmtleSgnYWxnb3JpdGhtJykudXNlKEFsZ29yaXRobUlkZW50aWZpZXIpLAogICAgICB0aGlzLmtleSgnc3ViamVjdFB1YmxpY0tleScpLmJpdHN0cigpCiAgICApOwogIH0pOwogIGFzbjEkMy5QdWJsaWNLZXkgPSBQdWJsaWNLZXk7CgogIHZhciBBbGdvcml0aG1JZGVudGlmaWVyID0gYXNuMSQxLmRlZmluZSgnQWxnb3JpdGhtSWRlbnRpZmllcicsIGZ1bmN0aW9uICgpIHsKICAgIHRoaXMuc2VxKCkub2JqKAogICAgICB0aGlzLmtleSgnYWxnb3JpdGhtJykub2JqaWQoKSwKICAgICAgdGhpcy5rZXkoJ25vbmUnKS5udWxsXygpLm9wdGlvbmFsKCksCiAgICAgIHRoaXMua2V5KCdjdXJ2ZScpLm9iamlkKCkub3B0aW9uYWwoKSwKICAgICAgdGhpcy5rZXkoJ3BhcmFtcycpLnNlcSgpLm9iaigKICAgICAgICB0aGlzLmtleSgncCcpLmludCgpLAogICAgICAgIHRoaXMua2V5KCdxJykuaW50KCksCiAgICAgICAgdGhpcy5rZXkoJ2cnKS5pbnQoKQogICAgICApLm9wdGlvbmFsKCkKICAgICk7CiAgfSk7CgogIHZhciBQcml2YXRlS2V5SW5mbyA9IGFzbjEkMS5kZWZpbmUoJ1ByaXZhdGVLZXlJbmZvJywgZnVuY3Rpb24gKCkgewogICAgdGhpcy5zZXEoKS5vYmooCiAgICAgIHRoaXMua2V5KCd2ZXJzaW9uJykuaW50KCksCiAgICAgIHRoaXMua2V5KCdhbGdvcml0aG0nKS51c2UoQWxnb3JpdGhtSWRlbnRpZmllciksCiAgICAgIHRoaXMua2V5KCdzdWJqZWN0UHJpdmF0ZUtleScpLm9jdHN0cigpCiAgICApOwogIH0pOwogIGFzbjEkMy5Qcml2YXRlS2V5ID0gUHJpdmF0ZUtleUluZm87CiAgdmFyIEVuY3J5cHRlZFByaXZhdGVLZXlJbmZvID0gYXNuMSQxLmRlZmluZSgnRW5jcnlwdGVkUHJpdmF0ZUtleUluZm8nLCBmdW5jdGlvbiAoKSB7CiAgICB0aGlzLnNlcSgpLm9iaigKICAgICAgdGhpcy5rZXkoJ2FsZ29yaXRobScpLnNlcSgpLm9iaigKICAgICAgICB0aGlzLmtleSgnaWQnKS5vYmppZCgpLAogICAgICAgIHRoaXMua2V5KCdkZWNyeXB0Jykuc2VxKCkub2JqKAogICAgICAgICAgdGhpcy5rZXkoJ2tkZScpLnNlcSgpLm9iaigKICAgICAgICAgICAgdGhpcy5rZXkoJ2lkJykub2JqaWQoKSwKICAgICAgICAgICAgdGhpcy5rZXkoJ2tkZXBhcmFtcycpLnNlcSgpLm9iaigKICAgICAgICAgICAgICB0aGlzLmtleSgnc2FsdCcpLm9jdHN0cigpLAogICAgICAgICAgICAgIHRoaXMua2V5KCdpdGVycycpLmludCgpCiAgICAgICAgICAgICkKICAgICAgICAgICksCiAgICAgICAgICB0aGlzLmtleSgnY2lwaGVyJykuc2VxKCkub2JqKAogICAgICAgICAgICB0aGlzLmtleSgnYWxnbycpLm9iamlkKCksCiAgICAgICAgICAgIHRoaXMua2V5KCdpdicpLm9jdHN0cigpCiAgICAgICAgICApCiAgICAgICAgKQogICAgICApLAogICAgICB0aGlzLmtleSgnc3ViamVjdFByaXZhdGVLZXknKS5vY3RzdHIoKQogICAgKTsKICB9KTsKCiAgYXNuMSQzLkVuY3J5cHRlZFByaXZhdGVLZXkgPSBFbmNyeXB0ZWRQcml2YXRlS2V5SW5mbzsKCiAgdmFyIERTQVByaXZhdGVLZXkgPSBhc24xJDEuZGVmaW5lKCdEU0FQcml2YXRlS2V5JywgZnVuY3Rpb24gKCkgewogICAgdGhpcy5zZXEoKS5vYmooCiAgICAgIHRoaXMua2V5KCd2ZXJzaW9uJykuaW50KCksCiAgICAgIHRoaXMua2V5KCdwJykuaW50KCksCiAgICAgIHRoaXMua2V5KCdxJykuaW50KCksCiAgICAgIHRoaXMua2V5KCdnJykuaW50KCksCiAgICAgIHRoaXMua2V5KCdwdWJfa2V5JykuaW50KCksCiAgICAgIHRoaXMua2V5KCdwcml2X2tleScpLmludCgpCiAgICApOwogIH0pOwogIGFzbjEkMy5EU0FQcml2YXRlS2V5ID0gRFNBUHJpdmF0ZUtleTsKCiAgYXNuMSQzLkRTQXBhcmFtID0gYXNuMSQxLmRlZmluZSgnRFNBcGFyYW0nLCBmdW5jdGlvbiAoKSB7CiAgICB0aGlzLmludCgpOwogIH0pOwoKICB2YXIgRUNQcml2YXRlS2V5ID0gYXNuMSQxLmRlZmluZSgnRUNQcml2YXRlS2V5JywgZnVuY3Rpb24gKCkgewogICAgdGhpcy5zZXEoKS5vYmooCiAgICAgIHRoaXMua2V5KCd2ZXJzaW9uJykuaW50KCksCiAgICAgIHRoaXMua2V5KCdwcml2YXRlS2V5Jykub2N0c3RyKCksCiAgICAgIHRoaXMua2V5KCdwYXJhbWV0ZXJzJykub3B0aW9uYWwoKS5leHBsaWNpdCgwKS51c2UoRUNQYXJhbWV0ZXJzKSwKICAgICAgdGhpcy5rZXkoJ3B1YmxpY0tleScpLm9wdGlvbmFsKCkuZXhwbGljaXQoMSkuYml0c3RyKCkKICAgICk7CiAgfSk7CiAgYXNuMSQzLkVDUHJpdmF0ZUtleSA9IEVDUHJpdmF0ZUtleTsKCiAgdmFyIEVDUGFyYW1ldGVycyA9IGFzbjEkMS5kZWZpbmUoJ0VDUGFyYW1ldGVycycsIGZ1bmN0aW9uICgpIHsKICAgIHRoaXMuY2hvaWNlKHsKICAgICAgbmFtZWRDdXJ2ZTogdGhpcy5vYmppZCgpCiAgICB9KTsKICB9KTsKCiAgYXNuMSQzLnNpZ25hdHVyZSA9IGFzbjEkMS5kZWZpbmUoJ3NpZ25hdHVyZScsIGZ1bmN0aW9uICgpIHsKICAgIHRoaXMuc2VxKCkub2JqKAogICAgICB0aGlzLmtleSgncicpLmludCgpLAogICAgICB0aGlzLmtleSgncycpLmludCgpCiAgICApOwogIH0pOwoKICB2YXIgcmVxdWlyZSQkMSA9IHsKICAJIjIuMTYuODQwLjEuMTAxLjMuNC4xLjEiOiAiYWVzLTEyOC1lY2IiLAogIAkiMi4xNi44NDAuMS4xMDEuMy40LjEuMiI6ICJhZXMtMTI4LWNiYyIsCiAgCSIyLjE2Ljg0MC4xLjEwMS4zLjQuMS4zIjogImFlcy0xMjgtb2ZiIiwKICAJIjIuMTYuODQwLjEuMTAxLjMuNC4xLjQiOiAiYWVzLTEyOC1jZmIiLAogIAkiMi4xNi44NDAuMS4xMDEuMy40LjEuMjEiOiAiYWVzLTE5Mi1lY2IiLAogIAkiMi4xNi44NDAuMS4xMDEuMy40LjEuMjIiOiAiYWVzLTE5Mi1jYmMiLAogIAkiMi4xNi44NDAuMS4xMDEuMy40LjEuMjMiOiAiYWVzLTE5Mi1vZmIiLAogIAkiMi4xNi44NDAuMS4xMDEuMy40LjEuMjQiOiAiYWVzLTE5Mi1jZmIiLAogIAkiMi4xNi44NDAuMS4xMDEuMy40LjEuNDEiOiAiYWVzLTI1Ni1lY2IiLAogIAkiMi4xNi44NDAuMS4xMDEuMy40LjEuNDIiOiAiYWVzLTI1Ni1jYmMiLAogIAkiMi4xNi44NDAuMS4xMDEuMy40LjEuNDMiOiAiYWVzLTI1Ni1vZmIiLAogIAkiMi4xNi44NDAuMS4xMDEuMy40LjEuNDQiOiAiYWVzLTI1Ni1jZmIiCiAgfTsKCiAgdmFyIHJlYWRhYmxlID0ge2V4cG9ydHM6IHt9fTsKCiAgdmFyIGV2ZW50cyA9IHtleHBvcnRzOiB7fX07CgogIHZhciBSID0gdHlwZW9mIFJlZmxlY3QgPT09ICdvYmplY3QnID8gUmVmbGVjdCA6IG51bGw7CiAgdmFyIFJlZmxlY3RBcHBseSA9IFIgJiYgdHlwZW9mIFIuYXBwbHkgPT09ICdmdW5jdGlvbicKICAgID8gUi5hcHBseQogICAgOiBmdW5jdGlvbiBSZWZsZWN0QXBwbHkodGFyZ2V0LCByZWNlaXZlciwgYXJncykgewogICAgICByZXR1cm4gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5LmNhbGwodGFyZ2V0LCByZWNlaXZlciwgYXJncyk7CiAgICB9OwoKICB2YXIgUmVmbGVjdE93bktleXM7CiAgaWYgKFIgJiYgdHlwZW9mIFIub3duS2V5cyA9PT0gJ2Z1bmN0aW9uJykgewogICAgUmVmbGVjdE93bktleXMgPSBSLm93bktleXM7CiAgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICBSZWZsZWN0T3duS2V5cyA9IGZ1bmN0aW9uIFJlZmxlY3RPd25LZXlzKHRhcmdldCkgewogICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGFyZ2V0KQogICAgICAgIC5jb25jYXQoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyh0YXJnZXQpKTsKICAgIH07CiAgfSBlbHNlIHsKICAgIFJlZmxlY3RPd25LZXlzID0gZnVuY3Rpb24gUmVmbGVjdE93bktleXModGFyZ2V0KSB7CiAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0YXJnZXQpOwogICAgfTsKICB9CgogIGZ1bmN0aW9uIFByb2Nlc3NFbWl0V2FybmluZyh3YXJuaW5nKSB7CiAgICBpZiAoY29uc29sZSAmJiBjb25zb2xlLndhcm4pIGNvbnNvbGUud2Fybih3YXJuaW5nKTsKICB9CgogIHZhciBOdW1iZXJJc05hTiA9IE51bWJlci5pc05hTiB8fCBmdW5jdGlvbiBOdW1iZXJJc05hTih2YWx1ZSkgewogICAgcmV0dXJuIHZhbHVlICE9PSB2YWx1ZTsKICB9OwoKICBmdW5jdGlvbiBFdmVudEVtaXR0ZXIoKSB7CiAgICBFdmVudEVtaXR0ZXIuaW5pdC5jYWxsKHRoaXMpOwogIH0KICBldmVudHMuZXhwb3J0cyA9IEV2ZW50RW1pdHRlcjsKICBldmVudHMuZXhwb3J0cy5vbmNlID0gb25jZSQyOwoKICAvLyBCYWNrd2FyZHMtY29tcGF0IHdpdGggbm9kZSAwLjEwLngKICBFdmVudEVtaXR0ZXIuRXZlbnRFbWl0dGVyID0gRXZlbnRFbWl0dGVyOwoKICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLl9ldmVudHMgPSB1bmRlZmluZWQ7CiAgRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fZXZlbnRzQ291bnQgPSAwOwogIEV2ZW50RW1pdHRlci5wcm90b3R5cGUuX21heExpc3RlbmVycyA9IHVuZGVmaW5lZDsKCiAgLy8gQnkgZGVmYXVsdCBFdmVudEVtaXR0ZXJzIHdpbGwgcHJpbnQgYSB3YXJuaW5nIGlmIG1vcmUgdGhhbiAxMCBsaXN0ZW5lcnMgYXJlCiAgLy8gYWRkZWQgdG8gaXQuIFRoaXMgaXMgYSB1c2VmdWwgZGVmYXVsdCB3aGljaCBoZWxwcyBmaW5kaW5nIG1lbW9yeSBsZWFrcy4KICB2YXIgZGVmYXVsdE1heExpc3RlbmVycyA9IDEwOwoKICBmdW5jdGlvbiBjaGVja0xpc3RlbmVyKGxpc3RlbmVyKSB7CiAgICBpZiAodHlwZW9mIGxpc3RlbmVyICE9PSAnZnVuY3Rpb24nKSB7CiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSAibGlzdGVuZXIiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBGdW5jdGlvbi4gUmVjZWl2ZWQgdHlwZSAnICsgdHlwZW9mIGxpc3RlbmVyKTsKICAgIH0KICB9CgogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShFdmVudEVtaXR0ZXIsICdkZWZhdWx0TWF4TGlzdGVuZXJzJywgewogICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgIGdldDogZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBkZWZhdWx0TWF4TGlzdGVuZXJzOwogICAgfSwKICAgIHNldDogZnVuY3Rpb24oYXJnKSB7CiAgICAgIGlmICh0eXBlb2YgYXJnICE9PSAnbnVtYmVyJyB8fCBhcmcgPCAwIHx8IE51bWJlcklzTmFOKGFyZykpIHsKICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignVGhlIHZhbHVlIG9mICJkZWZhdWx0TWF4TGlzdGVuZXJzIiBpcyBvdXQgb2YgcmFuZ2UuIEl0IG11c3QgYmUgYSBub24tbmVnYXRpdmUgbnVtYmVyLiBSZWNlaXZlZCAnICsgYXJnICsgJy4nKTsKICAgICAgfQogICAgICBkZWZhdWx0TWF4TGlzdGVuZXJzID0gYXJnOwogICAgfQogIH0pOwoKICBFdmVudEVtaXR0ZXIuaW5pdCA9IGZ1bmN0aW9uKCkgewoKICAgIGlmICh0aGlzLl9ldmVudHMgPT09IHVuZGVmaW5lZCB8fAogICAgICAgIHRoaXMuX2V2ZW50cyA9PT0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMpLl9ldmVudHMpIHsKICAgICAgdGhpcy5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTsKICAgICAgdGhpcy5fZXZlbnRzQ291bnQgPSAwOwogICAgfQoKICAgIHRoaXMuX21heExpc3RlbmVycyA9IHRoaXMuX21heExpc3RlbmVycyB8fCB1bmRlZmluZWQ7CiAgfTsKCiAgLy8gT2J2aW91c2x5IG5vdCBhbGwgRW1pdHRlcnMgc2hvdWxkIGJlIGxpbWl0ZWQgdG8gMTAuIFRoaXMgZnVuY3Rpb24gYWxsb3dzCiAgLy8gdGhhdCB0byBiZSBpbmNyZWFzZWQuIFNldCB0byB6ZXJvIGZvciB1bmxpbWl0ZWQuCiAgRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5zZXRNYXhMaXN0ZW5lcnMgPSBmdW5jdGlvbiBzZXRNYXhMaXN0ZW5lcnMobikgewogICAgaWYgKHR5cGVvZiBuICE9PSAnbnVtYmVyJyB8fCBuIDwgMCB8fCBOdW1iZXJJc05hTihuKSkgewogICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignVGhlIHZhbHVlIG9mICJuIiBpcyBvdXQgb2YgcmFuZ2UuIEl0IG11c3QgYmUgYSBub24tbmVnYXRpdmUgbnVtYmVyLiBSZWNlaXZlZCAnICsgbiArICcuJyk7CiAgICB9CiAgICB0aGlzLl9tYXhMaXN0ZW5lcnMgPSBuOwogICAgcmV0dXJuIHRoaXM7CiAgfTsKCiAgZnVuY3Rpb24gX2dldE1heExpc3RlbmVycyh0aGF0KSB7CiAgICBpZiAodGhhdC5fbWF4TGlzdGVuZXJzID09PSB1bmRlZmluZWQpCiAgICAgIHJldHVybiBFdmVudEVtaXR0ZXIuZGVmYXVsdE1heExpc3RlbmVyczsKICAgIHJldHVybiB0aGF0Ll9tYXhMaXN0ZW5lcnM7CiAgfQoKICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLmdldE1heExpc3RlbmVycyA9IGZ1bmN0aW9uIGdldE1heExpc3RlbmVycygpIHsKICAgIHJldHVybiBfZ2V0TWF4TGlzdGVuZXJzKHRoaXMpOwogIH07CgogIEV2ZW50RW1pdHRlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uIGVtaXQodHlwZSkgewogICAgdmFyIGFyZ3MgPSBbXTsKICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSBhcmdzLnB1c2goYXJndW1lbnRzW2ldKTsKICAgIHZhciBkb0Vycm9yID0gKHR5cGUgPT09ICdlcnJvcicpOwoKICAgIHZhciBldmVudHMgPSB0aGlzLl9ldmVudHM7CiAgICBpZiAoZXZlbnRzICE9PSB1bmRlZmluZWQpCiAgICAgIGRvRXJyb3IgPSAoZG9FcnJvciAmJiBldmVudHMuZXJyb3IgPT09IHVuZGVmaW5lZCk7CiAgICBlbHNlIGlmICghZG9FcnJvcikKICAgICAgcmV0dXJuIGZhbHNlOwoKICAgIC8vIElmIHRoZXJlIGlzIG5vICdlcnJvcicgZXZlbnQgbGlzdGVuZXIgdGhlbiB0aHJvdy4KICAgIGlmIChkb0Vycm9yKSB7CiAgICAgIHZhciBlcjsKICAgICAgaWYgKGFyZ3MubGVuZ3RoID4gMCkKICAgICAgICBlciA9IGFyZ3NbMF07CiAgICAgIGlmIChlciBpbnN0YW5jZW9mIEVycm9yKSB7CiAgICAgICAgLy8gTm90ZTogVGhlIGNvbW1lbnRzIG9uIHRoZSBgdGhyb3dgIGxpbmVzIGFyZSBpbnRlbnRpb25hbCwgdGhleSBzaG93CiAgICAgICAgLy8gdXAgaW4gTm9kZSdzIG91dHB1dCBpZiB0aGlzIHJlc3VsdHMgaW4gYW4gdW5oYW5kbGVkIGV4Y2VwdGlvbi4KICAgICAgICB0aHJvdyBlcjsgLy8gVW5oYW5kbGVkICdlcnJvcicgZXZlbnQKICAgICAgfQogICAgICAvLyBBdCBsZWFzdCBnaXZlIHNvbWUga2luZCBvZiBjb250ZXh0IHRvIHRoZSB1c2VyCiAgICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoJ1VuaGFuZGxlZCBlcnJvci4nICsgKGVyID8gJyAoJyArIGVyLm1lc3NhZ2UgKyAnKScgOiAnJykpOwogICAgICBlcnIuY29udGV4dCA9IGVyOwogICAgICB0aHJvdyBlcnI7IC8vIFVuaGFuZGxlZCAnZXJyb3InIGV2ZW50CiAgICB9CgogICAgdmFyIGhhbmRsZXIgPSBldmVudHNbdHlwZV07CgogICAgaWYgKGhhbmRsZXIgPT09IHVuZGVmaW5lZCkKICAgICAgcmV0dXJuIGZhbHNlOwoKICAgIGlmICh0eXBlb2YgaGFuZGxlciA9PT0gJ2Z1bmN0aW9uJykgewogICAgICBSZWZsZWN0QXBwbHkoaGFuZGxlciwgdGhpcywgYXJncyk7CiAgICB9IGVsc2UgewogICAgICB2YXIgbGVuID0gaGFuZGxlci5sZW5ndGg7CiAgICAgIHZhciBsaXN0ZW5lcnMgPSBhcnJheUNsb25lKGhhbmRsZXIsIGxlbik7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpCiAgICAgICAgUmVmbGVjdEFwcGx5KGxpc3RlbmVyc1tpXSwgdGhpcywgYXJncyk7CiAgICB9CgogICAgcmV0dXJuIHRydWU7CiAgfTsKCiAgZnVuY3Rpb24gX2FkZExpc3RlbmVyKHRhcmdldCwgdHlwZSwgbGlzdGVuZXIsIHByZXBlbmQpIHsKICAgIHZhciBtOwogICAgdmFyIGV2ZW50czsKICAgIHZhciBleGlzdGluZzsKCiAgICBjaGVja0xpc3RlbmVyKGxpc3RlbmVyKTsKCiAgICBldmVudHMgPSB0YXJnZXQuX2V2ZW50czsKICAgIGlmIChldmVudHMgPT09IHVuZGVmaW5lZCkgewogICAgICBldmVudHMgPSB0YXJnZXQuX2V2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7CiAgICAgIHRhcmdldC5fZXZlbnRzQ291bnQgPSAwOwogICAgfSBlbHNlIHsKICAgICAgLy8gVG8gYXZvaWQgcmVjdXJzaW9uIGluIHRoZSBjYXNlIHRoYXQgdHlwZSA9PT0gIm5ld0xpc3RlbmVyIiEgQmVmb3JlCiAgICAgIC8vIGFkZGluZyBpdCB0byB0aGUgbGlzdGVuZXJzLCBmaXJzdCBlbWl0ICJuZXdMaXN0ZW5lciIuCiAgICAgIGlmIChldmVudHMubmV3TGlzdGVuZXIgIT09IHVuZGVmaW5lZCkgewogICAgICAgIHRhcmdldC5lbWl0KCduZXdMaXN0ZW5lcicsIHR5cGUsCiAgICAgICAgICAgICAgICAgICAgbGlzdGVuZXIubGlzdGVuZXIgPyBsaXN0ZW5lci5saXN0ZW5lciA6IGxpc3RlbmVyKTsKCiAgICAgICAgLy8gUmUtYXNzaWduIGBldmVudHNgIGJlY2F1c2UgYSBuZXdMaXN0ZW5lciBoYW5kbGVyIGNvdWxkIGhhdmUgY2F1c2VkIHRoZQogICAgICAgIC8vIHRoaXMuX2V2ZW50cyB0byBiZSBhc3NpZ25lZCB0byBhIG5ldyBvYmplY3QKICAgICAgICBldmVudHMgPSB0YXJnZXQuX2V2ZW50czsKICAgICAgfQogICAgICBleGlzdGluZyA9IGV2ZW50c1t0eXBlXTsKICAgIH0KCiAgICBpZiAoZXhpc3RpbmcgPT09IHVuZGVmaW5lZCkgewogICAgICAvLyBPcHRpbWl6ZSB0aGUgY2FzZSBvZiBvbmUgbGlzdGVuZXIuIERvbid0IG5lZWQgdGhlIGV4dHJhIGFycmF5IG9iamVjdC4KICAgICAgZXhpc3RpbmcgPSBldmVudHNbdHlwZV0gPSBsaXN0ZW5lcjsKICAgICAgKyt0YXJnZXQuX2V2ZW50c0NvdW50OwogICAgfSBlbHNlIHsKICAgICAgaWYgKHR5cGVvZiBleGlzdGluZyA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIC8vIEFkZGluZyB0aGUgc2Vjb25kIGVsZW1lbnQsIG5lZWQgdG8gY2hhbmdlIHRvIGFycmF5LgogICAgICAgIGV4aXN0aW5nID0gZXZlbnRzW3R5cGVdID0KICAgICAgICAgIHByZXBlbmQgPyBbbGlzdGVuZXIsIGV4aXN0aW5nXSA6IFtleGlzdGluZywgbGlzdGVuZXJdOwogICAgICAgIC8vIElmIHdlJ3ZlIGFscmVhZHkgZ290IGFuIGFycmF5LCBqdXN0IGFwcGVuZC4KICAgICAgfSBlbHNlIGlmIChwcmVwZW5kKSB7CiAgICAgICAgZXhpc3RpbmcudW5zaGlmdChsaXN0ZW5lcik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZXhpc3RpbmcucHVzaChsaXN0ZW5lcik7CiAgICAgIH0KCiAgICAgIC8vIENoZWNrIGZvciBsaXN0ZW5lciBsZWFrCiAgICAgIG0gPSBfZ2V0TWF4TGlzdGVuZXJzKHRhcmdldCk7CiAgICAgIGlmIChtID4gMCAmJiBleGlzdGluZy5sZW5ndGggPiBtICYmICFleGlzdGluZy53YXJuZWQpIHsKICAgICAgICBleGlzdGluZy53YXJuZWQgPSB0cnVlOwogICAgICAgIC8vIE5vIGVycm9yIGNvZGUgZm9yIHRoaXMgc2luY2UgaXQgaXMgYSBXYXJuaW5nCiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4CiAgICAgICAgdmFyIHcgPSBuZXcgRXJyb3IoJ1Bvc3NpYmxlIEV2ZW50RW1pdHRlciBtZW1vcnkgbGVhayBkZXRlY3RlZC4gJyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZy5sZW5ndGggKyAnICcgKyBTdHJpbmcodHlwZSkgKyAnIGxpc3RlbmVycyAnICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhZGRlZC4gVXNlIGVtaXR0ZXIuc2V0TWF4TGlzdGVuZXJzKCkgdG8gJyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaW5jcmVhc2UgbGltaXQnKTsKICAgICAgICB3Lm5hbWUgPSAnTWF4TGlzdGVuZXJzRXhjZWVkZWRXYXJuaW5nJzsKICAgICAgICB3LmVtaXR0ZXIgPSB0YXJnZXQ7CiAgICAgICAgdy50eXBlID0gdHlwZTsKICAgICAgICB3LmNvdW50ID0gZXhpc3RpbmcubGVuZ3RoOwogICAgICAgIFByb2Nlc3NFbWl0V2FybmluZyh3KTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiB0YXJnZXQ7CiAgfQoKICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyID0gZnVuY3Rpb24gYWRkTGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHsKICAgIHJldHVybiBfYWRkTGlzdGVuZXIodGhpcywgdHlwZSwgbGlzdGVuZXIsIGZhbHNlKTsKICB9OwoKICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lcjsKCiAgRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5wcmVwZW5kTGlzdGVuZXIgPQogICAgICBmdW5jdGlvbiBwcmVwZW5kTGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHsKICAgICAgICByZXR1cm4gX2FkZExpc3RlbmVyKHRoaXMsIHR5cGUsIGxpc3RlbmVyLCB0cnVlKTsKICAgICAgfTsKCiAgZnVuY3Rpb24gb25jZVdyYXBwZXIoKSB7CiAgICBpZiAoIXRoaXMuZmlyZWQpIHsKICAgICAgdGhpcy50YXJnZXQucmVtb3ZlTGlzdGVuZXIodGhpcy50eXBlLCB0aGlzLndyYXBGbik7CiAgICAgIHRoaXMuZmlyZWQgPSB0cnVlOwogICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkKICAgICAgICByZXR1cm4gdGhpcy5saXN0ZW5lci5jYWxsKHRoaXMudGFyZ2V0KTsKICAgICAgcmV0dXJuIHRoaXMubGlzdGVuZXIuYXBwbHkodGhpcy50YXJnZXQsIGFyZ3VtZW50cyk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBfb25jZVdyYXAodGFyZ2V0LCB0eXBlLCBsaXN0ZW5lcikgewogICAgdmFyIHN0YXRlID0geyBmaXJlZDogZmFsc2UsIHdyYXBGbjogdW5kZWZpbmVkLCB0YXJnZXQ6IHRhcmdldCwgdHlwZTogdHlwZSwgbGlzdGVuZXI6IGxpc3RlbmVyIH07CiAgICB2YXIgd3JhcHBlZCA9IG9uY2VXcmFwcGVyLmJpbmQoc3RhdGUpOwogICAgd3JhcHBlZC5saXN0ZW5lciA9IGxpc3RlbmVyOwogICAgc3RhdGUud3JhcEZuID0gd3JhcHBlZDsKICAgIHJldHVybiB3cmFwcGVkOwogIH0KCiAgRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbmNlID0gZnVuY3Rpb24gb25jZSh0eXBlLCBsaXN0ZW5lcikgewogICAgY2hlY2tMaXN0ZW5lcihsaXN0ZW5lcik7CiAgICB0aGlzLm9uKHR5cGUsIF9vbmNlV3JhcCh0aGlzLCB0eXBlLCBsaXN0ZW5lcikpOwogICAgcmV0dXJuIHRoaXM7CiAgfTsKCiAgRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5wcmVwZW5kT25jZUxpc3RlbmVyID0KICAgICAgZnVuY3Rpb24gcHJlcGVuZE9uY2VMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikgewogICAgICAgIGNoZWNrTGlzdGVuZXIobGlzdGVuZXIpOwogICAgICAgIHRoaXMucHJlcGVuZExpc3RlbmVyKHR5cGUsIF9vbmNlV3JhcCh0aGlzLCB0eXBlLCBsaXN0ZW5lcikpOwogICAgICAgIHJldHVybiB0aGlzOwogICAgICB9OwoKICAvLyBFbWl0cyBhICdyZW1vdmVMaXN0ZW5lcicgZXZlbnQgaWYgYW5kIG9ubHkgaWYgdGhlIGxpc3RlbmVyIHdhcyByZW1vdmVkLgogIEV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIgPQogICAgICBmdW5jdGlvbiByZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikgewogICAgICAgIHZhciBsaXN0LCBldmVudHMsIHBvc2l0aW9uLCBpLCBvcmlnaW5hbExpc3RlbmVyOwoKICAgICAgICBjaGVja0xpc3RlbmVyKGxpc3RlbmVyKTsKCiAgICAgICAgZXZlbnRzID0gdGhpcy5fZXZlbnRzOwogICAgICAgIGlmIChldmVudHMgPT09IHVuZGVmaW5lZCkKICAgICAgICAgIHJldHVybiB0aGlzOwoKICAgICAgICBsaXN0ID0gZXZlbnRzW3R5cGVdOwogICAgICAgIGlmIChsaXN0ID09PSB1bmRlZmluZWQpCiAgICAgICAgICByZXR1cm4gdGhpczsKCiAgICAgICAgaWYgKGxpc3QgPT09IGxpc3RlbmVyIHx8IGxpc3QubGlzdGVuZXIgPT09IGxpc3RlbmVyKSB7CiAgICAgICAgICBpZiAoLS10aGlzLl9ldmVudHNDb3VudCA9PT0gMCkKICAgICAgICAgICAgdGhpcy5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTsKICAgICAgICAgIGVsc2UgewogICAgICAgICAgICBkZWxldGUgZXZlbnRzW3R5cGVdOwogICAgICAgICAgICBpZiAoZXZlbnRzLnJlbW92ZUxpc3RlbmVyKQogICAgICAgICAgICAgIHRoaXMuZW1pdCgncmVtb3ZlTGlzdGVuZXInLCB0eXBlLCBsaXN0Lmxpc3RlbmVyIHx8IGxpc3RlbmVyKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBsaXN0ICE9PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICBwb3NpdGlvbiA9IC0xOwoKICAgICAgICAgIGZvciAoaSA9IGxpc3QubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgICAgICAgICAgaWYgKGxpc3RbaV0gPT09IGxpc3RlbmVyIHx8IGxpc3RbaV0ubGlzdGVuZXIgPT09IGxpc3RlbmVyKSB7CiAgICAgICAgICAgICAgb3JpZ2luYWxMaXN0ZW5lciA9IGxpc3RbaV0ubGlzdGVuZXI7CiAgICAgICAgICAgICAgcG9zaXRpb24gPSBpOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHBvc2l0aW9uIDwgMCkKICAgICAgICAgICAgcmV0dXJuIHRoaXM7CgogICAgICAgICAgaWYgKHBvc2l0aW9uID09PSAwKQogICAgICAgICAgICBsaXN0LnNoaWZ0KCk7CiAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgc3BsaWNlT25lKGxpc3QsIHBvc2l0aW9uKTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAobGlzdC5sZW5ndGggPT09IDEpCiAgICAgICAgICAgIGV2ZW50c1t0eXBlXSA9IGxpc3RbMF07CgogICAgICAgICAgaWYgKGV2ZW50cy5yZW1vdmVMaXN0ZW5lciAhPT0gdW5kZWZpbmVkKQogICAgICAgICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgb3JpZ2luYWxMaXN0ZW5lciB8fCBsaXN0ZW5lcik7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfTsKCiAgRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vZmYgPSBFdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyOwoKICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycyA9CiAgICAgIGZ1bmN0aW9uIHJlbW92ZUFsbExpc3RlbmVycyh0eXBlKSB7CiAgICAgICAgdmFyIGxpc3RlbmVycywgZXZlbnRzLCBpOwoKICAgICAgICBldmVudHMgPSB0aGlzLl9ldmVudHM7CiAgICAgICAgaWYgKGV2ZW50cyA9PT0gdW5kZWZpbmVkKQogICAgICAgICAgcmV0dXJuIHRoaXM7CgogICAgICAgIC8vIG5vdCBsaXN0ZW5pbmcgZm9yIHJlbW92ZUxpc3RlbmVyLCBubyBuZWVkIHRvIGVtaXQKICAgICAgICBpZiAoZXZlbnRzLnJlbW92ZUxpc3RlbmVyID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgIHRoaXMuX2V2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7CiAgICAgICAgICAgIHRoaXMuX2V2ZW50c0NvdW50ID0gMDsKICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnRzW3R5cGVdICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgaWYgKC0tdGhpcy5fZXZlbnRzQ291bnQgPT09IDApCiAgICAgICAgICAgICAgdGhpcy5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTsKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgIGRlbGV0ZSBldmVudHNbdHlwZV07CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gdGhpczsKICAgICAgICB9CgogICAgICAgIC8vIGVtaXQgcmVtb3ZlTGlzdGVuZXIgZm9yIGFsbCBsaXN0ZW5lcnMgb24gYWxsIGV2ZW50cwogICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGV2ZW50cyk7CiAgICAgICAgICB2YXIga2V5OwogICAgICAgICAgZm9yIChpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHsKICAgICAgICAgICAga2V5ID0ga2V5c1tpXTsKICAgICAgICAgICAgaWYgKGtleSA9PT0gJ3JlbW92ZUxpc3RlbmVyJykgY29udGludWU7CiAgICAgICAgICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKGtleSk7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycygncmVtb3ZlTGlzdGVuZXInKTsKICAgICAgICAgIHRoaXMuX2V2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7CiAgICAgICAgICB0aGlzLl9ldmVudHNDb3VudCA9IDA7CiAgICAgICAgICByZXR1cm4gdGhpczsKICAgICAgICB9CgogICAgICAgIGxpc3RlbmVycyA9IGV2ZW50c1t0eXBlXTsKCiAgICAgICAgaWYgKHR5cGVvZiBsaXN0ZW5lcnMgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXJzKTsKICAgICAgICB9IGVsc2UgaWYgKGxpc3RlbmVycyAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAvLyBMSUZPIG9yZGVyCiAgICAgICAgICBmb3IgKGkgPSBsaXN0ZW5lcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgICAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnNbaV0pOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH07CgogIGZ1bmN0aW9uIF9saXN0ZW5lcnModGFyZ2V0LCB0eXBlLCB1bndyYXApIHsKICAgIHZhciBldmVudHMgPSB0YXJnZXQuX2V2ZW50czsKCiAgICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpCiAgICAgIHJldHVybiBbXTsKCiAgICB2YXIgZXZsaXN0ZW5lciA9IGV2ZW50c1t0eXBlXTsKICAgIGlmIChldmxpc3RlbmVyID09PSB1bmRlZmluZWQpCiAgICAgIHJldHVybiBbXTsKCiAgICBpZiAodHlwZW9mIGV2bGlzdGVuZXIgPT09ICdmdW5jdGlvbicpCiAgICAgIHJldHVybiB1bndyYXAgPyBbZXZsaXN0ZW5lci5saXN0ZW5lciB8fCBldmxpc3RlbmVyXSA6IFtldmxpc3RlbmVyXTsKCiAgICByZXR1cm4gdW53cmFwID8KICAgICAgdW53cmFwTGlzdGVuZXJzKGV2bGlzdGVuZXIpIDogYXJyYXlDbG9uZShldmxpc3RlbmVyLCBldmxpc3RlbmVyLmxlbmd0aCk7CiAgfQoKICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVycyA9IGZ1bmN0aW9uIGxpc3RlbmVycyh0eXBlKSB7CiAgICByZXR1cm4gX2xpc3RlbmVycyh0aGlzLCB0eXBlLCB0cnVlKTsKICB9OwoKICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLnJhd0xpc3RlbmVycyA9IGZ1bmN0aW9uIHJhd0xpc3RlbmVycyh0eXBlKSB7CiAgICByZXR1cm4gX2xpc3RlbmVycyh0aGlzLCB0eXBlLCBmYWxzZSk7CiAgfTsKCiAgRXZlbnRFbWl0dGVyLmxpc3RlbmVyQ291bnQgPSBmdW5jdGlvbihlbWl0dGVyLCB0eXBlKSB7CiAgICBpZiAodHlwZW9mIGVtaXR0ZXIubGlzdGVuZXJDb3VudCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICByZXR1cm4gZW1pdHRlci5saXN0ZW5lckNvdW50KHR5cGUpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGxpc3RlbmVyQ291bnQuY2FsbChlbWl0dGVyLCB0eXBlKTsKICAgIH0KICB9OwoKICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVyQ291bnQgPSBsaXN0ZW5lckNvdW50OwogIGZ1bmN0aW9uIGxpc3RlbmVyQ291bnQodHlwZSkgewogICAgdmFyIGV2ZW50cyA9IHRoaXMuX2V2ZW50czsKCiAgICBpZiAoZXZlbnRzICE9PSB1bmRlZmluZWQpIHsKICAgICAgdmFyIGV2bGlzdGVuZXIgPSBldmVudHNbdHlwZV07CgogICAgICBpZiAodHlwZW9mIGV2bGlzdGVuZXIgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICByZXR1cm4gMTsKICAgICAgfSBlbHNlIGlmIChldmxpc3RlbmVyICE9PSB1bmRlZmluZWQpIHsKICAgICAgICByZXR1cm4gZXZsaXN0ZW5lci5sZW5ndGg7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gMDsKICB9CgogIEV2ZW50RW1pdHRlci5wcm90b3R5cGUuZXZlbnROYW1lcyA9IGZ1bmN0aW9uIGV2ZW50TmFtZXMoKSB7CiAgICByZXR1cm4gdGhpcy5fZXZlbnRzQ291bnQgPiAwID8gUmVmbGVjdE93bktleXModGhpcy5fZXZlbnRzKSA6IFtdOwogIH07CgogIGZ1bmN0aW9uIGFycmF5Q2xvbmUoYXJyLCBuKSB7CiAgICB2YXIgY29weSA9IG5ldyBBcnJheShuKTsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgKytpKQogICAgICBjb3B5W2ldID0gYXJyW2ldOwogICAgcmV0dXJuIGNvcHk7CiAgfQoKICBmdW5jdGlvbiBzcGxpY2VPbmUobGlzdCwgaW5kZXgpIHsKICAgIGZvciAoOyBpbmRleCArIDEgPCBsaXN0Lmxlbmd0aDsgaW5kZXgrKykKICAgICAgbGlzdFtpbmRleF0gPSBsaXN0W2luZGV4ICsgMV07CiAgICBsaXN0LnBvcCgpOwogIH0KCiAgZnVuY3Rpb24gdW53cmFwTGlzdGVuZXJzKGFycikgewogICAgdmFyIHJldCA9IG5ldyBBcnJheShhcnIubGVuZ3RoKTsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmV0Lmxlbmd0aDsgKytpKSB7CiAgICAgIHJldFtpXSA9IGFycltpXS5saXN0ZW5lciB8fCBhcnJbaV07CiAgICB9CiAgICByZXR1cm4gcmV0OwogIH0KCiAgZnVuY3Rpb24gb25jZSQyKGVtaXR0ZXIsIG5hbWUpIHsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIGZ1bmN0aW9uIGVycm9yTGlzdGVuZXIoZXJyKSB7CiAgICAgICAgZW1pdHRlci5yZW1vdmVMaXN0ZW5lcihuYW1lLCByZXNvbHZlcik7CiAgICAgICAgcmVqZWN0KGVycik7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIHJlc29sdmVyKCkgewogICAgICAgIGlmICh0eXBlb2YgZW1pdHRlci5yZW1vdmVMaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgZW1pdHRlci5yZW1vdmVMaXN0ZW5lcignZXJyb3InLCBlcnJvckxpc3RlbmVyKTsKICAgICAgICB9CiAgICAgICAgcmVzb2x2ZShbXS5zbGljZS5jYWxsKGFyZ3VtZW50cykpOwogICAgICB9CiAgICAgIGV2ZW50VGFyZ2V0QWdub3N0aWNBZGRMaXN0ZW5lcihlbWl0dGVyLCBuYW1lLCByZXNvbHZlciwgeyBvbmNlOiB0cnVlIH0pOwogICAgICBpZiAobmFtZSAhPT0gJ2Vycm9yJykgewogICAgICAgIGFkZEVycm9ySGFuZGxlcklmRXZlbnRFbWl0dGVyKGVtaXR0ZXIsIGVycm9yTGlzdGVuZXIsIHsgb25jZTogdHJ1ZSB9KTsKICAgICAgfQogICAgfSk7CiAgfQoKICBmdW5jdGlvbiBhZGRFcnJvckhhbmRsZXJJZkV2ZW50RW1pdHRlcihlbWl0dGVyLCBoYW5kbGVyLCBmbGFncykgewogICAgaWYgKHR5cGVvZiBlbWl0dGVyLm9uID09PSAnZnVuY3Rpb24nKSB7CiAgICAgIGV2ZW50VGFyZ2V0QWdub3N0aWNBZGRMaXN0ZW5lcihlbWl0dGVyLCAnZXJyb3InLCBoYW5kbGVyLCBmbGFncyk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBldmVudFRhcmdldEFnbm9zdGljQWRkTGlzdGVuZXIoZW1pdHRlciwgbmFtZSwgbGlzdGVuZXIsIGZsYWdzKSB7CiAgICBpZiAodHlwZW9mIGVtaXR0ZXIub24gPT09ICdmdW5jdGlvbicpIHsKICAgICAgaWYgKGZsYWdzLm9uY2UpIHsKICAgICAgICBlbWl0dGVyLm9uY2UobmFtZSwgbGlzdGVuZXIpOwogICAgICB9IGVsc2UgewogICAgICAgIGVtaXR0ZXIub24obmFtZSwgbGlzdGVuZXIpOwogICAgICB9CiAgICB9IGVsc2UgaWYgKHR5cGVvZiBlbWl0dGVyLmFkZEV2ZW50TGlzdGVuZXIgPT09ICdmdW5jdGlvbicpIHsKICAgICAgLy8gRXZlbnRUYXJnZXQgZG9lcyBub3QgaGF2ZSBgZXJyb3JgIGV2ZW50IHNlbWFudGljcyBsaWtlIE5vZGUKICAgICAgLy8gRXZlbnRFbWl0dGVycywgd2UgZG8gbm90IGxpc3RlbiBmb3IgYGVycm9yYCBldmVudHMgaGVyZS4KICAgICAgZW1pdHRlci5hZGRFdmVudExpc3RlbmVyKG5hbWUsIGZ1bmN0aW9uIHdyYXBMaXN0ZW5lcihhcmcpIHsKICAgICAgICAvLyBJRSBkb2VzIG5vdCBoYXZlIGJ1aWx0aW4gYHsgb25jZTogdHJ1ZSB9YCBzdXBwb3J0IHNvIHdlCiAgICAgICAgLy8gaGF2ZSB0byBkbyBpdCBtYW51YWxseS4KICAgICAgICBpZiAoZmxhZ3Mub25jZSkgewogICAgICAgICAgZW1pdHRlci5yZW1vdmVFdmVudExpc3RlbmVyKG5hbWUsIHdyYXBMaXN0ZW5lcik7CiAgICAgICAgfQogICAgICAgIGxpc3RlbmVyKGFyZyk7CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlICJlbWl0dGVyIiBhcmd1bWVudCBtdXN0IGJlIG9mIHR5cGUgRXZlbnRFbWl0dGVyLiBSZWNlaXZlZCB0eXBlICcgKyB0eXBlb2YgZW1pdHRlcik7CiAgICB9CiAgfQoKICB2YXIgc3RyZWFtJDEgPSBzdHJlYW07CgogIHZhciB1dGlsID0ge307CgogIHZhciB0eXBlcyA9IHt9OwoKICAvKiBlc2xpbnQgY29tcGxleGl0eTogWzIsIDE4XSwgbWF4LXN0YXRlbWVudHM6IFsyLCAzM10gKi8KICB2YXIgc2hhbXMkMSA9IGZ1bmN0aW9uIGhhc1N5bWJvbHMoKSB7CiAgCWlmICh0eXBlb2YgU3ltYm9sICE9PSAnZnVuY3Rpb24nIHx8IHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzICE9PSAnZnVuY3Rpb24nKSB7IHJldHVybiBmYWxzZTsgfQogIAlpZiAodHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gJ3N5bWJvbCcpIHsgcmV0dXJuIHRydWU7IH0KCiAgCXZhciBvYmogPSB7fTsKICAJdmFyIHN5bSA9IFN5bWJvbCgndGVzdCcpOwogIAl2YXIgc3ltT2JqID0gT2JqZWN0KHN5bSk7CiAgCWlmICh0eXBlb2Ygc3ltID09PSAnc3RyaW5nJykgeyByZXR1cm4gZmFsc2U7IH0KCiAgCWlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoc3ltKSAhPT0gJ1tvYmplY3QgU3ltYm9sXScpIHsgcmV0dXJuIGZhbHNlOyB9CiAgCWlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoc3ltT2JqKSAhPT0gJ1tvYmplY3QgU3ltYm9sXScpIHsgcmV0dXJuIGZhbHNlOyB9CgogIAkvLyB0ZW1wIGRpc2FibGVkIHBlciBodHRwczovL2dpdGh1Yi5jb20vbGpoYXJiL29iamVjdC5hc3NpZ24vaXNzdWVzLzE3CiAgCS8vIGlmIChzeW0gaW5zdGFuY2VvZiBTeW1ib2wpIHsgcmV0dXJuIGZhbHNlOyB9CiAgCS8vIHRlbXAgZGlzYWJsZWQgcGVyIGh0dHBzOi8vZ2l0aHViLmNvbS9XZWJSZWZsZWN0aW9uL2dldC1vd24tcHJvcGVydHktc3ltYm9scy9pc3N1ZXMvNAogIAkvLyBpZiAoIShzeW1PYmogaW5zdGFuY2VvZiBTeW1ib2wpKSB7IHJldHVybiBmYWxzZTsgfQoKICAJLy8gaWYgKHR5cGVvZiBTeW1ib2wucHJvdG90eXBlLnRvU3RyaW5nICE9PSAnZnVuY3Rpb24nKSB7IHJldHVybiBmYWxzZTsgfQogIAkvLyBpZiAoU3RyaW5nKHN5bSkgIT09IFN5bWJvbC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChzeW0pKSB7IHJldHVybiBmYWxzZTsgfQoKICAJdmFyIHN5bVZhbCA9IDQyOwogIAlvYmpbc3ltXSA9IHN5bVZhbDsKICAJZm9yIChzeW0gaW4gb2JqKSB7IHJldHVybiBmYWxzZTsgfSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4LCBuby11bnJlYWNoYWJsZS1sb29wCiAgCWlmICh0eXBlb2YgT2JqZWN0LmtleXMgPT09ICdmdW5jdGlvbicgJiYgT2JqZWN0LmtleXMob2JqKS5sZW5ndGggIT09IDApIHsgcmV0dXJuIGZhbHNlOyB9CgogIAlpZiAodHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzID09PSAnZnVuY3Rpb24nICYmIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKG9iaikubGVuZ3RoICE9PSAwKSB7IHJldHVybiBmYWxzZTsgfQoKICAJdmFyIHN5bXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iaik7CiAgCWlmIChzeW1zLmxlbmd0aCAhPT0gMSB8fCBzeW1zWzBdICE9PSBzeW0pIHsgcmV0dXJuIGZhbHNlOyB9CgogIAlpZiAoIU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChvYmosIHN5bSkpIHsgcmV0dXJuIGZhbHNlOyB9CgogIAlpZiAodHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPT09ICdmdW5jdGlvbicpIHsKICAJCXZhciBkZXNjcmlwdG9yID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIHN5bSk7CiAgCQlpZiAoZGVzY3JpcHRvci52YWx1ZSAhPT0gc3ltVmFsIHx8IGRlc2NyaXB0b3IuZW51bWVyYWJsZSAhPT0gdHJ1ZSkgeyByZXR1cm4gZmFsc2U7IH0KICAJfQoKICAJcmV0dXJuIHRydWU7CiAgfTsKCiAgdmFyIGhhc1N5bWJvbHMkMiA9IHNoYW1zJDE7CgogIHZhciBzaGFtcyA9IGZ1bmN0aW9uIGhhc1RvU3RyaW5nVGFnU2hhbXMoKSB7CiAgCXJldHVybiBoYXNTeW1ib2xzJDIoKSAmJiAhIVN5bWJvbC50b1N0cmluZ1RhZzsKICB9OwoKICB2YXIgb3JpZ1N5bWJvbCA9IHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbDsKICB2YXIgaGFzU3ltYm9sU2hhbSA9IHNoYW1zJDE7CgogIHZhciBoYXNTeW1ib2xzJDEgPSBmdW5jdGlvbiBoYXNOYXRpdmVTeW1ib2xzKCkgewogIAlpZiAodHlwZW9mIG9yaWdTeW1ib2wgIT09ICdmdW5jdGlvbicpIHsgcmV0dXJuIGZhbHNlOyB9CiAgCWlmICh0eXBlb2YgU3ltYm9sICE9PSAnZnVuY3Rpb24nKSB7IHJldHVybiBmYWxzZTsgfQogIAlpZiAodHlwZW9mIG9yaWdTeW1ib2woJ2ZvbycpICE9PSAnc3ltYm9sJykgeyByZXR1cm4gZmFsc2U7IH0KICAJaWYgKHR5cGVvZiBTeW1ib2woJ2JhcicpICE9PSAnc3ltYm9sJykgeyByZXR1cm4gZmFsc2U7IH0KCiAgCXJldHVybiBoYXNTeW1ib2xTaGFtKCk7CiAgfTsKCiAgLyogZXNsaW50IG5vLWludmFsaWQtdGhpczogMSAqLwoKICB2YXIgRVJST1JfTUVTU0FHRSA9ICdGdW5jdGlvbi5wcm90b3R5cGUuYmluZCBjYWxsZWQgb24gaW5jb21wYXRpYmxlICc7CiAgdmFyIHNsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlOwogIHZhciB0b1N0ciQxID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZzsKICB2YXIgZnVuY1R5cGUgPSAnW29iamVjdCBGdW5jdGlvbl0nOwoKICB2YXIgaW1wbGVtZW50YXRpb24kMSA9IGZ1bmN0aW9uIGJpbmQodGhhdCkgewogICAgICB2YXIgdGFyZ2V0ID0gdGhpczsKICAgICAgaWYgKHR5cGVvZiB0YXJnZXQgIT09ICdmdW5jdGlvbicgfHwgdG9TdHIkMS5jYWxsKHRhcmdldCkgIT09IGZ1bmNUeXBlKSB7CiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEVSUk9SX01FU1NBR0UgKyB0YXJnZXQpOwogICAgICB9CiAgICAgIHZhciBhcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpOwoKICAgICAgdmFyIGJvdW5kOwogICAgICB2YXIgYmluZGVyID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKHRoaXMgaW5zdGFuY2VvZiBib3VuZCkgewogICAgICAgICAgICAgIHZhciByZXN1bHQgPSB0YXJnZXQuYXBwbHkoCiAgICAgICAgICAgICAgICAgIHRoaXMsCiAgICAgICAgICAgICAgICAgIGFyZ3MuY29uY2F0KHNsaWNlLmNhbGwoYXJndW1lbnRzKSkKICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIGlmIChPYmplY3QocmVzdWx0KSA9PT0gcmVzdWx0KSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0LmFwcGx5KAogICAgICAgICAgICAgICAgICB0aGF0LAogICAgICAgICAgICAgICAgICBhcmdzLmNvbmNhdChzbGljZS5jYWxsKGFyZ3VtZW50cykpCiAgICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgfTsKCiAgICAgIHZhciBib3VuZExlbmd0aCA9IE1hdGgubWF4KDAsIHRhcmdldC5sZW5ndGggLSBhcmdzLmxlbmd0aCk7CiAgICAgIHZhciBib3VuZEFyZ3MgPSBbXTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBib3VuZExlbmd0aDsgaSsrKSB7CiAgICAgICAgICBib3VuZEFyZ3MucHVzaCgnJCcgKyBpKTsKICAgICAgfQoKICAgICAgYm91bmQgPSBGdW5jdGlvbignYmluZGVyJywgJ3JldHVybiBmdW5jdGlvbiAoJyArIGJvdW5kQXJncy5qb2luKCcsJykgKyAnKXsgcmV0dXJuIGJpbmRlci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7IH0nKShiaW5kZXIpOwoKICAgICAgaWYgKHRhcmdldC5wcm90b3R5cGUpIHsKICAgICAgICAgIHZhciBFbXB0eSA9IGZ1bmN0aW9uIEVtcHR5KCkge307CiAgICAgICAgICBFbXB0eS5wcm90b3R5cGUgPSB0YXJnZXQucHJvdG90eXBlOwogICAgICAgICAgYm91bmQucHJvdG90eXBlID0gbmV3IEVtcHR5KCk7CiAgICAgICAgICBFbXB0eS5wcm90b3R5cGUgPSBudWxsOwogICAgICB9CgogICAgICByZXR1cm4gYm91bmQ7CiAgfTsKCiAgdmFyIGltcGxlbWVudGF0aW9uID0gaW1wbGVtZW50YXRpb24kMTsKCiAgdmFyIGZ1bmN0aW9uQmluZCA9IEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kIHx8IGltcGxlbWVudGF0aW9uOwoKICB2YXIgYmluZCQxID0gZnVuY3Rpb25CaW5kOwoKICB2YXIgc3JjID0gYmluZCQxLmNhbGwoRnVuY3Rpb24uY2FsbCwgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSk7CgogIHZhciB1bmRlZmluZWQkMTsKCiAgdmFyICRTeW50YXhFcnJvciA9IFN5bnRheEVycm9yOwogIHZhciAkRnVuY3Rpb24gPSBGdW5jdGlvbjsKICB2YXIgJFR5cGVFcnJvciA9IFR5cGVFcnJvcjsKCiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbnNpc3RlbnQtcmV0dXJuCiAgdmFyIGdldEV2YWxsZWRDb25zdHJ1Y3RvciA9IGZ1bmN0aW9uIChleHByZXNzaW9uU3ludGF4KSB7CiAgCXRyeSB7CiAgCQlyZXR1cm4gJEZ1bmN0aW9uKCcidXNlIHN0cmljdCI7IHJldHVybiAoJyArIGV4cHJlc3Npb25TeW50YXggKyAnKS5jb25zdHJ1Y3RvcjsnKSgpOwogIAl9IGNhdGNoIChlKSB7fQogIH07CgogIHZhciAkZ09QRCQxID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjsKICBpZiAoJGdPUEQkMSkgewogIAl0cnkgewogIAkJJGdPUEQkMSh7fSwgJycpOwogIAl9IGNhdGNoIChlKSB7CiAgCQkkZ09QRCQxID0gbnVsbDsgLy8gdGhpcyBpcyBJRSA4LCB3aGljaCBoYXMgYSBicm9rZW4gZ09QRAogIAl9CiAgfQoKICB2YXIgdGhyb3dUeXBlRXJyb3IgPSBmdW5jdGlvbiAoKSB7CiAgCXRocm93IG5ldyAkVHlwZUVycm9yKCk7CiAgfTsKICB2YXIgVGhyb3dUeXBlRXJyb3IgPSAkZ09QRCQxCiAgCT8gKGZ1bmN0aW9uICgpIHsKICAJCXRyeSB7CiAgCQkJLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC1leHByZXNzaW9ucywgbm8tY2FsbGVyLCBuby1yZXN0cmljdGVkLXByb3BlcnRpZXMKICAJCQlhcmd1bWVudHMuY2FsbGVlOyAvLyBJRSA4IGRvZXMgbm90IHRocm93IGhlcmUKICAJCQlyZXR1cm4gdGhyb3dUeXBlRXJyb3I7CiAgCQl9IGNhdGNoIChjYWxsZWVUaHJvd3MpIHsKICAJCQl0cnkgewogIAkJCQkvLyBJRSA4IHRocm93cyBvbiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGFyZ3VtZW50cywgJycpCiAgCQkJCXJldHVybiAkZ09QRCQxKGFyZ3VtZW50cywgJ2NhbGxlZScpLmdldDsKICAJCQl9IGNhdGNoIChnT1BEdGhyb3dzKSB7CiAgCQkJCXJldHVybiB0aHJvd1R5cGVFcnJvcjsKICAJCQl9CiAgCQl9CiAgCX0oKSkKICAJOiB0aHJvd1R5cGVFcnJvcjsKCiAgdmFyIGhhc1N5bWJvbHMgPSBoYXNTeW1ib2xzJDEoKTsKCiAgdmFyIGdldFByb3RvJDEgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHguX19wcm90b19fOyB9OyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXByb3RvCgogIHZhciBuZWVkc0V2YWwgPSB7fTsKCiAgdmFyIFR5cGVkQXJyYXkgPSB0eXBlb2YgVWludDhBcnJheSA9PT0gJ3VuZGVmaW5lZCcgPyB1bmRlZmluZWQkMSA6IGdldFByb3RvJDEoVWludDhBcnJheSk7CgogIHZhciBJTlRSSU5TSUNTID0gewogIAknJUFnZ3JlZ2F0ZUVycm9yJSc6IHR5cGVvZiBBZ2dyZWdhdGVFcnJvciA9PT0gJ3VuZGVmaW5lZCcgPyB1bmRlZmluZWQkMSA6IEFnZ3JlZ2F0ZUVycm9yLAogIAknJUFycmF5JSc6IEFycmF5LAogIAknJUFycmF5QnVmZmVyJSc6IHR5cGVvZiBBcnJheUJ1ZmZlciA9PT0gJ3VuZGVmaW5lZCcgPyB1bmRlZmluZWQkMSA6IEFycmF5QnVmZmVyLAogIAknJUFycmF5SXRlcmF0b3JQcm90b3R5cGUlJzogaGFzU3ltYm9scyA/IGdldFByb3RvJDEoW11bU3ltYm9sLml0ZXJhdG9yXSgpKSA6IHVuZGVmaW5lZCQxLAogIAknJUFzeW5jRnJvbVN5bmNJdGVyYXRvclByb3RvdHlwZSUnOiB1bmRlZmluZWQkMSwKICAJJyVBc3luY0Z1bmN0aW9uJSc6IG5lZWRzRXZhbCwKICAJJyVBc3luY0dlbmVyYXRvciUnOiBuZWVkc0V2YWwsCiAgCSclQXN5bmNHZW5lcmF0b3JGdW5jdGlvbiUnOiBuZWVkc0V2YWwsCiAgCSclQXN5bmNJdGVyYXRvclByb3RvdHlwZSUnOiBuZWVkc0V2YWwsCiAgCSclQXRvbWljcyUnOiB0eXBlb2YgQXRvbWljcyA9PT0gJ3VuZGVmaW5lZCcgPyB1bmRlZmluZWQkMSA6IEF0b21pY3MsCiAgCSclQmlnSW50JSc6IHR5cGVvZiBCaWdJbnQgPT09ICd1bmRlZmluZWQnID8gdW5kZWZpbmVkJDEgOiBCaWdJbnQsCiAgCSclQm9vbGVhbiUnOiBCb29sZWFuLAogIAknJURhdGFWaWV3JSc6IHR5cGVvZiBEYXRhVmlldyA9PT0gJ3VuZGVmaW5lZCcgPyB1bmRlZmluZWQkMSA6IERhdGFWaWV3LAogIAknJURhdGUlJzogRGF0ZSwKICAJJyVkZWNvZGVVUkklJzogZGVjb2RlVVJJLAogIAknJWRlY29kZVVSSUNvbXBvbmVudCUnOiBkZWNvZGVVUklDb21wb25lbnQsCiAgCSclZW5jb2RlVVJJJSc6IGVuY29kZVVSSSwKICAJJyVlbmNvZGVVUklDb21wb25lbnQlJzogZW5jb2RlVVJJQ29tcG9uZW50LAogIAknJUVycm9yJSc6IEVycm9yLAogIAknJWV2YWwlJzogZXZhbCwgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1ldmFsCiAgCSclRXZhbEVycm9yJSc6IEV2YWxFcnJvciwKICAJJyVGbG9hdDMyQXJyYXklJzogdHlwZW9mIEZsb2F0MzJBcnJheSA9PT0gJ3VuZGVmaW5lZCcgPyB1bmRlZmluZWQkMSA6IEZsb2F0MzJBcnJheSwKICAJJyVGbG9hdDY0QXJyYXklJzogdHlwZW9mIEZsb2F0NjRBcnJheSA9PT0gJ3VuZGVmaW5lZCcgPyB1bmRlZmluZWQkMSA6IEZsb2F0NjRBcnJheSwKICAJJyVGaW5hbGl6YXRpb25SZWdpc3RyeSUnOiB0eXBlb2YgRmluYWxpemF0aW9uUmVnaXN0cnkgPT09ICd1bmRlZmluZWQnID8gdW5kZWZpbmVkJDEgOiBGaW5hbGl6YXRpb25SZWdpc3RyeSwKICAJJyVGdW5jdGlvbiUnOiAkRnVuY3Rpb24sCiAgCSclR2VuZXJhdG9yRnVuY3Rpb24lJzogbmVlZHNFdmFsLAogIAknJUludDhBcnJheSUnOiB0eXBlb2YgSW50OEFycmF5ID09PSAndW5kZWZpbmVkJyA/IHVuZGVmaW5lZCQxIDogSW50OEFycmF5LAogIAknJUludDE2QXJyYXklJzogdHlwZW9mIEludDE2QXJyYXkgPT09ICd1bmRlZmluZWQnID8gdW5kZWZpbmVkJDEgOiBJbnQxNkFycmF5LAogIAknJUludDMyQXJyYXklJzogdHlwZW9mIEludDMyQXJyYXkgPT09ICd1bmRlZmluZWQnID8gdW5kZWZpbmVkJDEgOiBJbnQzMkFycmF5LAogIAknJWlzRmluaXRlJSc6IGlzRmluaXRlLAogIAknJWlzTmFOJSc6IGlzTmFOLAogIAknJUl0ZXJhdG9yUHJvdG90eXBlJSc6IGhhc1N5bWJvbHMgPyBnZXRQcm90byQxKGdldFByb3RvJDEoW11bU3ltYm9sLml0ZXJhdG9yXSgpKSkgOiB1bmRlZmluZWQkMSwKICAJJyVKU09OJSc6IHR5cGVvZiBKU09OID09PSAnb2JqZWN0JyA/IEpTT04gOiB1bmRlZmluZWQkMSwKICAJJyVNYXAlJzogdHlwZW9mIE1hcCA9PT0gJ3VuZGVmaW5lZCcgPyB1bmRlZmluZWQkMSA6IE1hcCwKICAJJyVNYXBJdGVyYXRvclByb3RvdHlwZSUnOiB0eXBlb2YgTWFwID09PSAndW5kZWZpbmVkJyB8fCAhaGFzU3ltYm9scyA/IHVuZGVmaW5lZCQxIDogZ2V0UHJvdG8kMShuZXcgTWFwKClbU3ltYm9sLml0ZXJhdG9yXSgpKSwKICAJJyVNYXRoJSc6IE1hdGgsCiAgCSclTnVtYmVyJSc6IE51bWJlciwKICAJJyVPYmplY3QlJzogT2JqZWN0LAogIAknJXBhcnNlRmxvYXQlJzogcGFyc2VGbG9hdCwKICAJJyVwYXJzZUludCUnOiBwYXJzZUludCwKICAJJyVQcm9taXNlJSc6IHR5cGVvZiBQcm9taXNlID09PSAndW5kZWZpbmVkJyA/IHVuZGVmaW5lZCQxIDogUHJvbWlzZSwKICAJJyVQcm94eSUnOiB0eXBlb2YgUHJveHkgPT09ICd1bmRlZmluZWQnID8gdW5kZWZpbmVkJDEgOiBQcm94eSwKICAJJyVSYW5nZUVycm9yJSc6IFJhbmdlRXJyb3IsCiAgCSclUmVmZXJlbmNlRXJyb3IlJzogUmVmZXJlbmNlRXJyb3IsCiAgCSclUmVmbGVjdCUnOiB0eXBlb2YgUmVmbGVjdCA9PT0gJ3VuZGVmaW5lZCcgPyB1bmRlZmluZWQkMSA6IFJlZmxlY3QsCiAgCSclUmVnRXhwJSc6IFJlZ0V4cCwKICAJJyVTZXQlJzogdHlwZW9mIFNldCA9PT0gJ3VuZGVmaW5lZCcgPyB1bmRlZmluZWQkMSA6IFNldCwKICAJJyVTZXRJdGVyYXRvclByb3RvdHlwZSUnOiB0eXBlb2YgU2V0ID09PSAndW5kZWZpbmVkJyB8fCAhaGFzU3ltYm9scyA/IHVuZGVmaW5lZCQxIDogZ2V0UHJvdG8kMShuZXcgU2V0KClbU3ltYm9sLml0ZXJhdG9yXSgpKSwKICAJJyVTaGFyZWRBcnJheUJ1ZmZlciUnOiB0eXBlb2YgU2hhcmVkQXJyYXlCdWZmZXIgPT09ICd1bmRlZmluZWQnID8gdW5kZWZpbmVkJDEgOiBTaGFyZWRBcnJheUJ1ZmZlciwKICAJJyVTdHJpbmclJzogU3RyaW5nLAogIAknJVN0cmluZ0l0ZXJhdG9yUHJvdG90eXBlJSc6IGhhc1N5bWJvbHMgPyBnZXRQcm90byQxKCcnW1N5bWJvbC5pdGVyYXRvcl0oKSkgOiB1bmRlZmluZWQkMSwKICAJJyVTeW1ib2wlJzogaGFzU3ltYm9scyA/IFN5bWJvbCA6IHVuZGVmaW5lZCQxLAogIAknJVN5bnRheEVycm9yJSc6ICRTeW50YXhFcnJvciwKICAJJyVUaHJvd1R5cGVFcnJvciUnOiBUaHJvd1R5cGVFcnJvciwKICAJJyVUeXBlZEFycmF5JSc6IFR5cGVkQXJyYXksCiAgCSclVHlwZUVycm9yJSc6ICRUeXBlRXJyb3IsCiAgCSclVWludDhBcnJheSUnOiB0eXBlb2YgVWludDhBcnJheSA9PT0gJ3VuZGVmaW5lZCcgPyB1bmRlZmluZWQkMSA6IFVpbnQ4QXJyYXksCiAgCSclVWludDhDbGFtcGVkQXJyYXklJzogdHlwZW9mIFVpbnQ4Q2xhbXBlZEFycmF5ID09PSAndW5kZWZpbmVkJyA/IHVuZGVmaW5lZCQxIDogVWludDhDbGFtcGVkQXJyYXksCiAgCSclVWludDE2QXJyYXklJzogdHlwZW9mIFVpbnQxNkFycmF5ID09PSAndW5kZWZpbmVkJyA/IHVuZGVmaW5lZCQxIDogVWludDE2QXJyYXksCiAgCSclVWludDMyQXJyYXklJzogdHlwZW9mIFVpbnQzMkFycmF5ID09PSAndW5kZWZpbmVkJyA/IHVuZGVmaW5lZCQxIDogVWludDMyQXJyYXksCiAgCSclVVJJRXJyb3IlJzogVVJJRXJyb3IsCiAgCSclV2Vha01hcCUnOiB0eXBlb2YgV2Vha01hcCA9PT0gJ3VuZGVmaW5lZCcgPyB1bmRlZmluZWQkMSA6IFdlYWtNYXAsCiAgCSclV2Vha1JlZiUnOiB0eXBlb2YgV2Vha1JlZiA9PT0gJ3VuZGVmaW5lZCcgPyB1bmRlZmluZWQkMSA6IFdlYWtSZWYsCiAgCSclV2Vha1NldCUnOiB0eXBlb2YgV2Vha1NldCA9PT0gJ3VuZGVmaW5lZCcgPyB1bmRlZmluZWQkMSA6IFdlYWtTZXQKICB9OwoKICB2YXIgZG9FdmFsID0gZnVuY3Rpb24gZG9FdmFsKG5hbWUpIHsKICAJdmFyIHZhbHVlOwogIAlpZiAobmFtZSA9PT0gJyVBc3luY0Z1bmN0aW9uJScpIHsKICAJCXZhbHVlID0gZ2V0RXZhbGxlZENvbnN0cnVjdG9yKCdhc3luYyBmdW5jdGlvbiAoKSB7fScpOwogIAl9IGVsc2UgaWYgKG5hbWUgPT09ICclR2VuZXJhdG9yRnVuY3Rpb24lJykgewogIAkJdmFsdWUgPSBnZXRFdmFsbGVkQ29uc3RydWN0b3IoJ2Z1bmN0aW9uKiAoKSB7fScpOwogIAl9IGVsc2UgaWYgKG5hbWUgPT09ICclQXN5bmNHZW5lcmF0b3JGdW5jdGlvbiUnKSB7CiAgCQl2YWx1ZSA9IGdldEV2YWxsZWRDb25zdHJ1Y3RvcignYXN5bmMgZnVuY3Rpb24qICgpIHt9Jyk7CiAgCX0gZWxzZSBpZiAobmFtZSA9PT0gJyVBc3luY0dlbmVyYXRvciUnKSB7CiAgCQl2YXIgZm4gPSBkb0V2YWwoJyVBc3luY0dlbmVyYXRvckZ1bmN0aW9uJScpOwogIAkJaWYgKGZuKSB7CiAgCQkJdmFsdWUgPSBmbi5wcm90b3R5cGU7CiAgCQl9CiAgCX0gZWxzZSBpZiAobmFtZSA9PT0gJyVBc3luY0l0ZXJhdG9yUHJvdG90eXBlJScpIHsKICAJCXZhciBnZW4gPSBkb0V2YWwoJyVBc3luY0dlbmVyYXRvciUnKTsKICAJCWlmIChnZW4pIHsKICAJCQl2YWx1ZSA9IGdldFByb3RvJDEoZ2VuLnByb3RvdHlwZSk7CiAgCQl9CiAgCX0KCiAgCUlOVFJJTlNJQ1NbbmFtZV0gPSB2YWx1ZTsKCiAgCXJldHVybiB2YWx1ZTsKICB9OwoKICB2YXIgTEVHQUNZX0FMSUFTRVMgPSB7CiAgCSclQXJyYXlCdWZmZXJQcm90b3R5cGUlJzogWydBcnJheUJ1ZmZlcicsICdwcm90b3R5cGUnXSwKICAJJyVBcnJheVByb3RvdHlwZSUnOiBbJ0FycmF5JywgJ3Byb3RvdHlwZSddLAogIAknJUFycmF5UHJvdG9fZW50cmllcyUnOiBbJ0FycmF5JywgJ3Byb3RvdHlwZScsICdlbnRyaWVzJ10sCiAgCSclQXJyYXlQcm90b19mb3JFYWNoJSc6IFsnQXJyYXknLCAncHJvdG90eXBlJywgJ2ZvckVhY2gnXSwKICAJJyVBcnJheVByb3RvX2tleXMlJzogWydBcnJheScsICdwcm90b3R5cGUnLCAna2V5cyddLAogIAknJUFycmF5UHJvdG9fdmFsdWVzJSc6IFsnQXJyYXknLCAncHJvdG90eXBlJywgJ3ZhbHVlcyddLAogIAknJUFzeW5jRnVuY3Rpb25Qcm90b3R5cGUlJzogWydBc3luY0Z1bmN0aW9uJywgJ3Byb3RvdHlwZSddLAogIAknJUFzeW5jR2VuZXJhdG9yJSc6IFsnQXN5bmNHZW5lcmF0b3JGdW5jdGlvbicsICdwcm90b3R5cGUnXSwKICAJJyVBc3luY0dlbmVyYXRvclByb3RvdHlwZSUnOiBbJ0FzeW5jR2VuZXJhdG9yRnVuY3Rpb24nLCAncHJvdG90eXBlJywgJ3Byb3RvdHlwZSddLAogIAknJUJvb2xlYW5Qcm90b3R5cGUlJzogWydCb29sZWFuJywgJ3Byb3RvdHlwZSddLAogIAknJURhdGFWaWV3UHJvdG90eXBlJSc6IFsnRGF0YVZpZXcnLCAncHJvdG90eXBlJ10sCiAgCSclRGF0ZVByb3RvdHlwZSUnOiBbJ0RhdGUnLCAncHJvdG90eXBlJ10sCiAgCSclRXJyb3JQcm90b3R5cGUlJzogWydFcnJvcicsICdwcm90b3R5cGUnXSwKICAJJyVFdmFsRXJyb3JQcm90b3R5cGUlJzogWydFdmFsRXJyb3InLCAncHJvdG90eXBlJ10sCiAgCSclRmxvYXQzMkFycmF5UHJvdG90eXBlJSc6IFsnRmxvYXQzMkFycmF5JywgJ3Byb3RvdHlwZSddLAogIAknJUZsb2F0NjRBcnJheVByb3RvdHlwZSUnOiBbJ0Zsb2F0NjRBcnJheScsICdwcm90b3R5cGUnXSwKICAJJyVGdW5jdGlvblByb3RvdHlwZSUnOiBbJ0Z1bmN0aW9uJywgJ3Byb3RvdHlwZSddLAogIAknJUdlbmVyYXRvciUnOiBbJ0dlbmVyYXRvckZ1bmN0aW9uJywgJ3Byb3RvdHlwZSddLAogIAknJUdlbmVyYXRvclByb3RvdHlwZSUnOiBbJ0dlbmVyYXRvckZ1bmN0aW9uJywgJ3Byb3RvdHlwZScsICdwcm90b3R5cGUnXSwKICAJJyVJbnQ4QXJyYXlQcm90b3R5cGUlJzogWydJbnQ4QXJyYXknLCAncHJvdG90eXBlJ10sCiAgCSclSW50MTZBcnJheVByb3RvdHlwZSUnOiBbJ0ludDE2QXJyYXknLCAncHJvdG90eXBlJ10sCiAgCSclSW50MzJBcnJheVByb3RvdHlwZSUnOiBbJ0ludDMyQXJyYXknLCAncHJvdG90eXBlJ10sCiAgCSclSlNPTlBhcnNlJSc6IFsnSlNPTicsICdwYXJzZSddLAogIAknJUpTT05TdHJpbmdpZnklJzogWydKU09OJywgJ3N0cmluZ2lmeSddLAogIAknJU1hcFByb3RvdHlwZSUnOiBbJ01hcCcsICdwcm90b3R5cGUnXSwKICAJJyVOdW1iZXJQcm90b3R5cGUlJzogWydOdW1iZXInLCAncHJvdG90eXBlJ10sCiAgCSclT2JqZWN0UHJvdG90eXBlJSc6IFsnT2JqZWN0JywgJ3Byb3RvdHlwZSddLAogIAknJU9ialByb3RvX3RvU3RyaW5nJSc6IFsnT2JqZWN0JywgJ3Byb3RvdHlwZScsICd0b1N0cmluZyddLAogIAknJU9ialByb3RvX3ZhbHVlT2YlJzogWydPYmplY3QnLCAncHJvdG90eXBlJywgJ3ZhbHVlT2YnXSwKICAJJyVQcm9taXNlUHJvdG90eXBlJSc6IFsnUHJvbWlzZScsICdwcm90b3R5cGUnXSwKICAJJyVQcm9taXNlUHJvdG9fdGhlbiUnOiBbJ1Byb21pc2UnLCAncHJvdG90eXBlJywgJ3RoZW4nXSwKICAJJyVQcm9taXNlX2FsbCUnOiBbJ1Byb21pc2UnLCAnYWxsJ10sCiAgCSclUHJvbWlzZV9yZWplY3QlJzogWydQcm9taXNlJywgJ3JlamVjdCddLAogIAknJVByb21pc2VfcmVzb2x2ZSUnOiBbJ1Byb21pc2UnLCAncmVzb2x2ZSddLAogIAknJVJhbmdlRXJyb3JQcm90b3R5cGUlJzogWydSYW5nZUVycm9yJywgJ3Byb3RvdHlwZSddLAogIAknJVJlZmVyZW5jZUVycm9yUHJvdG90eXBlJSc6IFsnUmVmZXJlbmNlRXJyb3InLCAncHJvdG90eXBlJ10sCiAgCSclUmVnRXhwUHJvdG90eXBlJSc6IFsnUmVnRXhwJywgJ3Byb3RvdHlwZSddLAogIAknJVNldFByb3RvdHlwZSUnOiBbJ1NldCcsICdwcm90b3R5cGUnXSwKICAJJyVTaGFyZWRBcnJheUJ1ZmZlclByb3RvdHlwZSUnOiBbJ1NoYXJlZEFycmF5QnVmZmVyJywgJ3Byb3RvdHlwZSddLAogIAknJVN0cmluZ1Byb3RvdHlwZSUnOiBbJ1N0cmluZycsICdwcm90b3R5cGUnXSwKICAJJyVTeW1ib2xQcm90b3R5cGUlJzogWydTeW1ib2wnLCAncHJvdG90eXBlJ10sCiAgCSclU3ludGF4RXJyb3JQcm90b3R5cGUlJzogWydTeW50YXhFcnJvcicsICdwcm90b3R5cGUnXSwKICAJJyVUeXBlZEFycmF5UHJvdG90eXBlJSc6IFsnVHlwZWRBcnJheScsICdwcm90b3R5cGUnXSwKICAJJyVUeXBlRXJyb3JQcm90b3R5cGUlJzogWydUeXBlRXJyb3InLCAncHJvdG90eXBlJ10sCiAgCSclVWludDhBcnJheVByb3RvdHlwZSUnOiBbJ1VpbnQ4QXJyYXknLCAncHJvdG90eXBlJ10sCiAgCSclVWludDhDbGFtcGVkQXJyYXlQcm90b3R5cGUlJzogWydVaW50OENsYW1wZWRBcnJheScsICdwcm90b3R5cGUnXSwKICAJJyVVaW50MTZBcnJheVByb3RvdHlwZSUnOiBbJ1VpbnQxNkFycmF5JywgJ3Byb3RvdHlwZSddLAogIAknJVVpbnQzMkFycmF5UHJvdG90eXBlJSc6IFsnVWludDMyQXJyYXknLCAncHJvdG90eXBlJ10sCiAgCSclVVJJRXJyb3JQcm90b3R5cGUlJzogWydVUklFcnJvcicsICdwcm90b3R5cGUnXSwKICAJJyVXZWFrTWFwUHJvdG90eXBlJSc6IFsnV2Vha01hcCcsICdwcm90b3R5cGUnXSwKICAJJyVXZWFrU2V0UHJvdG90eXBlJSc6IFsnV2Vha1NldCcsICdwcm90b3R5cGUnXQogIH07CgogIHZhciBiaW5kID0gZnVuY3Rpb25CaW5kOwogIHZhciBoYXNPd24kMSA9IHNyYzsKICB2YXIgJGNvbmNhdCA9IGJpbmQuY2FsbChGdW5jdGlvbi5jYWxsLCBBcnJheS5wcm90b3R5cGUuY29uY2F0KTsKICB2YXIgJHNwbGljZUFwcGx5ID0gYmluZC5jYWxsKEZ1bmN0aW9uLmFwcGx5LCBBcnJheS5wcm90b3R5cGUuc3BsaWNlKTsKICB2YXIgJHJlcGxhY2UgPSBiaW5kLmNhbGwoRnVuY3Rpb24uY2FsbCwgU3RyaW5nLnByb3RvdHlwZS5yZXBsYWNlKTsKICB2YXIgJHN0clNsaWNlID0gYmluZC5jYWxsKEZ1bmN0aW9uLmNhbGwsIFN0cmluZy5wcm90b3R5cGUuc2xpY2UpOwoKICAvKiBhZGFwdGVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2xvZGFzaC9sb2Rhc2gvYmxvYi80LjE3LjE1L2Rpc3QvbG9kYXNoLmpzI0w2NzM1LUw2NzQ0ICovCiAgdmFyIHJlUHJvcE5hbWUgPSAvW14lLltcXV0rfFxbKD86KC0/XGQrKD86XC5cZCspPyl8KFsiJ10pKCg/Oig/IVwyKVteXFxdfFxcLikqPylcMilcXXwoPz0oPzpcLnxcW1xdKSg/OlwufFxbXF18JSQpKS9nOwogIHZhciByZUVzY2FwZUNoYXIgPSAvXFwoXFwpPy9nOyAvKiogVXNlZCB0byBtYXRjaCBiYWNrc2xhc2hlcyBpbiBwcm9wZXJ0eSBwYXRocy4gKi8KICB2YXIgc3RyaW5nVG9QYXRoID0gZnVuY3Rpb24gc3RyaW5nVG9QYXRoKHN0cmluZykgewogIAl2YXIgZmlyc3QgPSAkc3RyU2xpY2Uoc3RyaW5nLCAwLCAxKTsKICAJdmFyIGxhc3QgPSAkc3RyU2xpY2Uoc3RyaW5nLCAtMSk7CiAgCWlmIChmaXJzdCA9PT0gJyUnICYmIGxhc3QgIT09ICclJykgewogIAkJdGhyb3cgbmV3ICRTeW50YXhFcnJvcignaW52YWxpZCBpbnRyaW5zaWMgc3ludGF4LCBleHBlY3RlZCBjbG9zaW5nIGAlYCcpOwogIAl9IGVsc2UgaWYgKGxhc3QgPT09ICclJyAmJiBmaXJzdCAhPT0gJyUnKSB7CiAgCQl0aHJvdyBuZXcgJFN5bnRheEVycm9yKCdpbnZhbGlkIGludHJpbnNpYyBzeW50YXgsIGV4cGVjdGVkIG9wZW5pbmcgYCVgJyk7CiAgCX0KICAJdmFyIHJlc3VsdCA9IFtdOwogIAkkcmVwbGFjZShzdHJpbmcsIHJlUHJvcE5hbWUsIGZ1bmN0aW9uIChtYXRjaCwgbnVtYmVyLCBxdW90ZSwgc3ViU3RyaW5nKSB7CiAgCQlyZXN1bHRbcmVzdWx0Lmxlbmd0aF0gPSBxdW90ZSA/ICRyZXBsYWNlKHN1YlN0cmluZywgcmVFc2NhcGVDaGFyLCAnJDEnKSA6IG51bWJlciB8fCBtYXRjaDsKICAJfSk7CiAgCXJldHVybiByZXN1bHQ7CiAgfTsKICAvKiBlbmQgYWRhcHRhdGlvbiAqLwoKICB2YXIgZ2V0QmFzZUludHJpbnNpYyA9IGZ1bmN0aW9uIGdldEJhc2VJbnRyaW5zaWMobmFtZSwgYWxsb3dNaXNzaW5nKSB7CiAgCXZhciBpbnRyaW5zaWNOYW1lID0gbmFtZTsKICAJdmFyIGFsaWFzOwogIAlpZiAoaGFzT3duJDEoTEVHQUNZX0FMSUFTRVMsIGludHJpbnNpY05hbWUpKSB7CiAgCQlhbGlhcyA9IExFR0FDWV9BTElBU0VTW2ludHJpbnNpY05hbWVdOwogIAkJaW50cmluc2ljTmFtZSA9ICclJyArIGFsaWFzWzBdICsgJyUnOwogIAl9CgogIAlpZiAoaGFzT3duJDEoSU5UUklOU0lDUywgaW50cmluc2ljTmFtZSkpIHsKICAJCXZhciB2YWx1ZSA9IElOVFJJTlNJQ1NbaW50cmluc2ljTmFtZV07CiAgCQlpZiAodmFsdWUgPT09IG5lZWRzRXZhbCkgewogIAkJCXZhbHVlID0gZG9FdmFsKGludHJpbnNpY05hbWUpOwogIAkJfQogIAkJaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcgJiYgIWFsbG93TWlzc2luZykgewogIAkJCXRocm93IG5ldyAkVHlwZUVycm9yKCdpbnRyaW5zaWMgJyArIG5hbWUgKyAnIGV4aXN0cywgYnV0IGlzIG5vdCBhdmFpbGFibGUuIFBsZWFzZSBmaWxlIGFuIGlzc3VlIScpOwogIAkJfQoKICAJCXJldHVybiB7CiAgCQkJYWxpYXM6IGFsaWFzLAogIAkJCW5hbWU6IGludHJpbnNpY05hbWUsCiAgCQkJdmFsdWU6IHZhbHVlCiAgCQl9OwogIAl9CgogIAl0aHJvdyBuZXcgJFN5bnRheEVycm9yKCdpbnRyaW5zaWMgJyArIG5hbWUgKyAnIGRvZXMgbm90IGV4aXN0IScpOwogIH07CgogIHZhciBnZXRJbnRyaW5zaWMgPSBmdW5jdGlvbiBHZXRJbnRyaW5zaWMobmFtZSwgYWxsb3dNaXNzaW5nKSB7CiAgCWlmICh0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycgfHwgbmFtZS5sZW5ndGggPT09IDApIHsKICAJCXRocm93IG5ldyAkVHlwZUVycm9yKCdpbnRyaW5zaWMgbmFtZSBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZycpOwogIAl9CiAgCWlmIChhcmd1bWVudHMubGVuZ3RoID4gMSAmJiB0eXBlb2YgYWxsb3dNaXNzaW5nICE9PSAnYm9vbGVhbicpIHsKICAJCXRocm93IG5ldyAkVHlwZUVycm9yKCciYWxsb3dNaXNzaW5nIiBhcmd1bWVudCBtdXN0IGJlIGEgYm9vbGVhbicpOwogIAl9CgogIAl2YXIgcGFydHMgPSBzdHJpbmdUb1BhdGgobmFtZSk7CiAgCXZhciBpbnRyaW5zaWNCYXNlTmFtZSA9IHBhcnRzLmxlbmd0aCA+IDAgPyBwYXJ0c1swXSA6ICcnOwoKICAJdmFyIGludHJpbnNpYyA9IGdldEJhc2VJbnRyaW5zaWMoJyUnICsgaW50cmluc2ljQmFzZU5hbWUgKyAnJScsIGFsbG93TWlzc2luZyk7CiAgCXZhciBpbnRyaW5zaWNSZWFsTmFtZSA9IGludHJpbnNpYy5uYW1lOwogIAl2YXIgdmFsdWUgPSBpbnRyaW5zaWMudmFsdWU7CiAgCXZhciBza2lwRnVydGhlckNhY2hpbmcgPSBmYWxzZTsKCiAgCXZhciBhbGlhcyA9IGludHJpbnNpYy5hbGlhczsKICAJaWYgKGFsaWFzKSB7CiAgCQlpbnRyaW5zaWNCYXNlTmFtZSA9IGFsaWFzWzBdOwogIAkJJHNwbGljZUFwcGx5KHBhcnRzLCAkY29uY2F0KFswLCAxXSwgYWxpYXMpKTsKICAJfQoKICAJZm9yICh2YXIgaSA9IDEsIGlzT3duID0gdHJ1ZTsgaSA8IHBhcnRzLmxlbmd0aDsgaSArPSAxKSB7CiAgCQl2YXIgcGFydCA9IHBhcnRzW2ldOwogIAkJdmFyIGZpcnN0ID0gJHN0clNsaWNlKHBhcnQsIDAsIDEpOwogIAkJdmFyIGxhc3QgPSAkc3RyU2xpY2UocGFydCwgLTEpOwogIAkJaWYgKAogIAkJCSgKICAJCQkJKGZpcnN0ID09PSAnIicgfHwgZmlyc3QgPT09ICInIiB8fCBmaXJzdCA9PT0gJ2AnKQogIAkJCQl8fCAobGFzdCA9PT0gJyInIHx8IGxhc3QgPT09ICInIiB8fCBsYXN0ID09PSAnYCcpCiAgCQkJKQogIAkJCSYmIGZpcnN0ICE9PSBsYXN0CiAgCQkpIHsKICAJCQl0aHJvdyBuZXcgJFN5bnRheEVycm9yKCdwcm9wZXJ0eSBuYW1lcyB3aXRoIHF1b3RlcyBtdXN0IGhhdmUgbWF0Y2hpbmcgcXVvdGVzJyk7CiAgCQl9CiAgCQlpZiAocGFydCA9PT0gJ2NvbnN0cnVjdG9yJyB8fCAhaXNPd24pIHsKICAJCQlza2lwRnVydGhlckNhY2hpbmcgPSB0cnVlOwogIAkJfQoKICAJCWludHJpbnNpY0Jhc2VOYW1lICs9ICcuJyArIHBhcnQ7CiAgCQlpbnRyaW5zaWNSZWFsTmFtZSA9ICclJyArIGludHJpbnNpY0Jhc2VOYW1lICsgJyUnOwoKICAJCWlmIChoYXNPd24kMShJTlRSSU5TSUNTLCBpbnRyaW5zaWNSZWFsTmFtZSkpIHsKICAJCQl2YWx1ZSA9IElOVFJJTlNJQ1NbaW50cmluc2ljUmVhbE5hbWVdOwogIAkJfSBlbHNlIGlmICh2YWx1ZSAhPSBudWxsKSB7CiAgCQkJaWYgKCEocGFydCBpbiB2YWx1ZSkpIHsKICAJCQkJaWYgKCFhbGxvd01pc3NpbmcpIHsKICAJCQkJCXRocm93IG5ldyAkVHlwZUVycm9yKCdiYXNlIGludHJpbnNpYyBmb3IgJyArIG5hbWUgKyAnIGV4aXN0cywgYnV0IHRoZSBwcm9wZXJ0eSBpcyBub3QgYXZhaWxhYmxlLicpOwogIAkJCQl9CiAgCQkJCXJldHVybiB2b2lkIHVuZGVmaW5lZCQxOwogIAkJCX0KICAJCQlpZiAoJGdPUEQkMSAmJiAoaSArIDEpID49IHBhcnRzLmxlbmd0aCkgewogIAkJCQl2YXIgZGVzYyA9ICRnT1BEJDEodmFsdWUsIHBhcnQpOwogIAkJCQlpc093biA9ICEhZGVzYzsKCiAgCQkJCS8vIEJ5IGNvbnZlbnRpb24sIHdoZW4gYSBkYXRhIHByb3BlcnR5IGlzIGNvbnZlcnRlZCB0byBhbiBhY2Nlc3NvcgogIAkJCQkvLyBwcm9wZXJ0eSB0byBlbXVsYXRlIGEgZGF0YSBwcm9wZXJ0eSB0aGF0IGRvZXMgbm90IHN1ZmZlciBmcm9tCiAgCQkJCS8vIHRoZSBvdmVycmlkZSBtaXN0YWtlLCB0aGF0IGFjY2Vzc29yJ3MgZ2V0dGVyIGlzIG1hcmtlZCB3aXRoCiAgCQkJCS8vIGFuIGBvcmlnaW5hbFZhbHVlYCBwcm9wZXJ0eS4gSGVyZSwgd2hlbiB3ZSBkZXRlY3QgdGhpcywgd2UKICAJCQkJLy8gdXBob2xkIHRoZSBpbGx1c2lvbiBieSBwcmV0ZW5kaW5nIHRvIHNlZSB0aGF0IG9yaWdpbmFsIGRhdGEKICAJCQkJLy8gcHJvcGVydHksIGkuZS4sIHJldHVybmluZyB0aGUgdmFsdWUgcmF0aGVyIHRoYW4gdGhlIGdldHRlcgogIAkJCQkvLyBpdHNlbGYuCiAgCQkJCWlmIChpc093biAmJiAnZ2V0JyBpbiBkZXNjICYmICEoJ29yaWdpbmFsVmFsdWUnIGluIGRlc2MuZ2V0KSkgewogIAkJCQkJdmFsdWUgPSBkZXNjLmdldDsKICAJCQkJfSBlbHNlIHsKICAJCQkJCXZhbHVlID0gdmFsdWVbcGFydF07CiAgCQkJCX0KICAJCQl9IGVsc2UgewogIAkJCQlpc093biA9IGhhc093biQxKHZhbHVlLCBwYXJ0KTsKICAJCQkJdmFsdWUgPSB2YWx1ZVtwYXJ0XTsKICAJCQl9CgogIAkJCWlmIChpc093biAmJiAhc2tpcEZ1cnRoZXJDYWNoaW5nKSB7CiAgCQkJCUlOVFJJTlNJQ1NbaW50cmluc2ljUmVhbE5hbWVdID0gdmFsdWU7CiAgCQkJfQogIAkJfQogIAl9CiAgCXJldHVybiB2YWx1ZTsKICB9OwoKICB2YXIgY2FsbEJpbmQkMSA9IHtleHBvcnRzOiB7fX07CgogIChmdW5jdGlvbiAobW9kdWxlKSB7CgogIHZhciBiaW5kID0gZnVuY3Rpb25CaW5kOwogIHZhciBHZXRJbnRyaW5zaWMgPSBnZXRJbnRyaW5zaWM7CgogIHZhciAkYXBwbHkgPSBHZXRJbnRyaW5zaWMoJyVGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHklJyk7CiAgdmFyICRjYWxsID0gR2V0SW50cmluc2ljKCclRnVuY3Rpb24ucHJvdG90eXBlLmNhbGwlJyk7CiAgdmFyICRyZWZsZWN0QXBwbHkgPSBHZXRJbnRyaW5zaWMoJyVSZWZsZWN0LmFwcGx5JScsIHRydWUpIHx8IGJpbmQuY2FsbCgkY2FsbCwgJGFwcGx5KTsKCiAgdmFyICRnT1BEID0gR2V0SW50cmluc2ljKCclT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciUnLCB0cnVlKTsKICB2YXIgJGRlZmluZVByb3BlcnR5ID0gR2V0SW50cmluc2ljKCclT2JqZWN0LmRlZmluZVByb3BlcnR5JScsIHRydWUpOwogIHZhciAkbWF4ID0gR2V0SW50cmluc2ljKCclTWF0aC5tYXglJyk7CgogIGlmICgkZGVmaW5lUHJvcGVydHkpIHsKICAJdHJ5IHsKICAJCSRkZWZpbmVQcm9wZXJ0eSh7fSwgJ2EnLCB7IHZhbHVlOiAxIH0pOwogIAl9IGNhdGNoIChlKSB7CiAgCQkvLyBJRSA4IGhhcyBhIGJyb2tlbiBkZWZpbmVQcm9wZXJ0eQogIAkJJGRlZmluZVByb3BlcnR5ID0gbnVsbDsKICAJfQogIH0KCiAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBjYWxsQmluZChvcmlnaW5hbEZ1bmN0aW9uKSB7CiAgCXZhciBmdW5jID0gJHJlZmxlY3RBcHBseShiaW5kLCAkY2FsbCwgYXJndW1lbnRzKTsKICAJaWYgKCRnT1BEICYmICRkZWZpbmVQcm9wZXJ0eSkgewogIAkJdmFyIGRlc2MgPSAkZ09QRChmdW5jLCAnbGVuZ3RoJyk7CiAgCQlpZiAoZGVzYy5jb25maWd1cmFibGUpIHsKICAJCQkvLyBvcmlnaW5hbCBsZW5ndGgsIHBsdXMgdGhlIHJlY2VpdmVyLCBtaW51cyBhbnkgYWRkaXRpb25hbCBhcmd1bWVudHMgKGFmdGVyIHRoZSByZWNlaXZlcikKICAJCQkkZGVmaW5lUHJvcGVydHkoCiAgCQkJCWZ1bmMsCiAgCQkJCSdsZW5ndGgnLAogIAkJCQl7IHZhbHVlOiAxICsgJG1heCgwLCBvcmlnaW5hbEZ1bmN0aW9uLmxlbmd0aCAtIChhcmd1bWVudHMubGVuZ3RoIC0gMSkpIH0KICAJCQkpOwogIAkJfQogIAl9CiAgCXJldHVybiBmdW5jOwogIH07CgogIHZhciBhcHBseUJpbmQgPSBmdW5jdGlvbiBhcHBseUJpbmQoKSB7CiAgCXJldHVybiAkcmVmbGVjdEFwcGx5KGJpbmQsICRhcHBseSwgYXJndW1lbnRzKTsKICB9OwoKICBpZiAoJGRlZmluZVByb3BlcnR5KSB7CiAgCSRkZWZpbmVQcm9wZXJ0eShtb2R1bGUuZXhwb3J0cywgJ2FwcGx5JywgeyB2YWx1ZTogYXBwbHlCaW5kIH0pOwogIH0gZWxzZSB7CiAgCW1vZHVsZS5leHBvcnRzLmFwcGx5ID0gYXBwbHlCaW5kOwogIH0KICB9KGNhbGxCaW5kJDEpKTsKCiAgdmFyIEdldEludHJpbnNpYyQxID0gZ2V0SW50cmluc2ljOwoKICB2YXIgY2FsbEJpbmQgPSBjYWxsQmluZCQxLmV4cG9ydHM7CgogIHZhciAkaW5kZXhPZiQxID0gY2FsbEJpbmQoR2V0SW50cmluc2ljJDEoJ1N0cmluZy5wcm90b3R5cGUuaW5kZXhPZicpKTsKCiAgdmFyIGNhbGxCb3VuZCQzID0gZnVuY3Rpb24gY2FsbEJvdW5kSW50cmluc2ljKG5hbWUsIGFsbG93TWlzc2luZykgewogIAl2YXIgaW50cmluc2ljID0gR2V0SW50cmluc2ljJDEobmFtZSwgISFhbGxvd01pc3NpbmcpOwogIAlpZiAodHlwZW9mIGludHJpbnNpYyA9PT0gJ2Z1bmN0aW9uJyAmJiAkaW5kZXhPZiQxKG5hbWUsICcucHJvdG90eXBlLicpID4gLTEpIHsKICAJCXJldHVybiBjYWxsQmluZChpbnRyaW5zaWMpOwogIAl9CiAgCXJldHVybiBpbnRyaW5zaWM7CiAgfTsKCiAgdmFyIGhhc1RvU3RyaW5nVGFnJDMgPSBzaGFtcygpOwogIHZhciBjYWxsQm91bmQkMiA9IGNhbGxCb3VuZCQzOwoKICB2YXIgJHRvU3RyaW5nJDIgPSBjYWxsQm91bmQkMignT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZycpOwoKICB2YXIgaXNTdGFuZGFyZEFyZ3VtZW50cyA9IGZ1bmN0aW9uIGlzQXJndW1lbnRzKHZhbHVlKSB7CiAgCWlmIChoYXNUb1N0cmluZ1RhZyQzICYmIHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnIGluIHZhbHVlKSB7CiAgCQlyZXR1cm4gZmFsc2U7CiAgCX0KICAJcmV0dXJuICR0b1N0cmluZyQyKHZhbHVlKSA9PT0gJ1tvYmplY3QgQXJndW1lbnRzXSc7CiAgfTsKCiAgdmFyIGlzTGVnYWN5QXJndW1lbnRzID0gZnVuY3Rpb24gaXNBcmd1bWVudHModmFsdWUpIHsKICAJaWYgKGlzU3RhbmRhcmRBcmd1bWVudHModmFsdWUpKSB7CiAgCQlyZXR1cm4gdHJ1ZTsKICAJfQogIAlyZXR1cm4gdmFsdWUgIT09IG51bGwgJiYKICAJCXR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYKICAJCXR5cGVvZiB2YWx1ZS5sZW5ndGggPT09ICdudW1iZXInICYmCiAgCQl2YWx1ZS5sZW5ndGggPj0gMCAmJgogIAkJJHRvU3RyaW5nJDIodmFsdWUpICE9PSAnW29iamVjdCBBcnJheV0nICYmCiAgCQkkdG9TdHJpbmckMih2YWx1ZS5jYWxsZWUpID09PSAnW29iamVjdCBGdW5jdGlvbl0nOwogIH07CgogIHZhciBzdXBwb3J0c1N0YW5kYXJkQXJndW1lbnRzID0gKGZ1bmN0aW9uICgpIHsKICAJcmV0dXJuIGlzU3RhbmRhcmRBcmd1bWVudHMoYXJndW1lbnRzKTsKICB9KCkpOwoKICBpc1N0YW5kYXJkQXJndW1lbnRzLmlzTGVnYWN5QXJndW1lbnRzID0gaXNMZWdhY3lBcmd1bWVudHM7IC8vIGZvciB0ZXN0cwoKICB2YXIgaXNBcmd1bWVudHMgPSBzdXBwb3J0c1N0YW5kYXJkQXJndW1lbnRzID8gaXNTdGFuZGFyZEFyZ3VtZW50cyA6IGlzTGVnYWN5QXJndW1lbnRzOwoKICB2YXIgdG9TdHIgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nOwogIHZhciBmblRvU3RyID0gRnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nOwogIHZhciBpc0ZuUmVnZXggPSAvXlxzKig/OmZ1bmN0aW9uKT9cKi87CiAgdmFyIGhhc1RvU3RyaW5nVGFnJDIgPSBzaGFtcygpOwogIHZhciBnZXRQcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZjsKICB2YXIgZ2V0R2VuZXJhdG9yRnVuYyA9IGZ1bmN0aW9uICgpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBjb25zaXN0ZW50LXJldHVybgogIAlpZiAoIWhhc1RvU3RyaW5nVGFnJDIpIHsKICAJCXJldHVybiBmYWxzZTsKICAJfQogIAl0cnkgewogIAkJcmV0dXJuIEZ1bmN0aW9uKCdyZXR1cm4gZnVuY3Rpb24qKCkge30nKSgpOwogIAl9IGNhdGNoIChlKSB7CiAgCX0KICB9OwogIHZhciBHZW5lcmF0b3JGdW5jdGlvbjsKCiAgdmFyIGlzR2VuZXJhdG9yRnVuY3Rpb24gPSBmdW5jdGlvbiBpc0dlbmVyYXRvckZ1bmN0aW9uKGZuKSB7CiAgCWlmICh0eXBlb2YgZm4gIT09ICdmdW5jdGlvbicpIHsKICAJCXJldHVybiBmYWxzZTsKICAJfQogIAlpZiAoaXNGblJlZ2V4LnRlc3QoZm5Ub1N0ci5jYWxsKGZuKSkpIHsKICAJCXJldHVybiB0cnVlOwogIAl9CiAgCWlmICghaGFzVG9TdHJpbmdUYWckMikgewogIAkJdmFyIHN0ciA9IHRvU3RyLmNhbGwoZm4pOwogIAkJcmV0dXJuIHN0ciA9PT0gJ1tvYmplY3QgR2VuZXJhdG9yRnVuY3Rpb25dJzsKICAJfQogIAlpZiAoIWdldFByb3RvKSB7CiAgCQlyZXR1cm4gZmFsc2U7CiAgCX0KICAJaWYgKHR5cGVvZiBHZW5lcmF0b3JGdW5jdGlvbiA9PT0gJ3VuZGVmaW5lZCcpIHsKICAJCXZhciBnZW5lcmF0b3JGdW5jID0gZ2V0R2VuZXJhdG9yRnVuYygpOwogIAkJR2VuZXJhdG9yRnVuY3Rpb24gPSBnZW5lcmF0b3JGdW5jID8gZ2V0UHJvdG8oZ2VuZXJhdG9yRnVuYykgOiBmYWxzZTsKICAJfQogIAlyZXR1cm4gZ2V0UHJvdG8oZm4pID09PSBHZW5lcmF0b3JGdW5jdGlvbjsKICB9OwoKICB2YXIgaGFzT3duID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTsKICB2YXIgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nOwoKICB2YXIgZm9yZWFjaCA9IGZ1bmN0aW9uIGZvckVhY2ggKG9iaiwgZm4sIGN0eCkgewogICAgICBpZiAodG9TdHJpbmcuY2FsbChmbikgIT09ICdbb2JqZWN0IEZ1bmN0aW9uXScpIHsKICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2l0ZXJhdG9yIG11c3QgYmUgYSBmdW5jdGlvbicpOwogICAgICB9CiAgICAgIHZhciBsID0gb2JqLmxlbmd0aDsKICAgICAgaWYgKGwgPT09ICtsKSB7CiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGw7IGkrKykgewogICAgICAgICAgICAgIGZuLmNhbGwoY3R4LCBvYmpbaV0sIGksIG9iaik7CiAgICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgICBmb3IgKHZhciBrIGluIG9iaikgewogICAgICAgICAgICAgIGlmIChoYXNPd24uY2FsbChvYmosIGspKSB7CiAgICAgICAgICAgICAgICAgIGZuLmNhbGwoY3R4LCBvYmpba10sIGssIG9iaik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICB9CiAgfTsKCiAgdmFyIHBvc3NpYmxlTmFtZXMgPSBbCiAgCSdCaWdJbnQ2NEFycmF5JywKICAJJ0JpZ1VpbnQ2NEFycmF5JywKICAJJ0Zsb2F0MzJBcnJheScsCiAgCSdGbG9hdDY0QXJyYXknLAogIAknSW50MTZBcnJheScsCiAgCSdJbnQzMkFycmF5JywKICAJJ0ludDhBcnJheScsCiAgCSdVaW50MTZBcnJheScsCiAgCSdVaW50MzJBcnJheScsCiAgCSdVaW50OEFycmF5JywKICAJJ1VpbnQ4Q2xhbXBlZEFycmF5JwogIF07CgogIHZhciBnJDIgPSB0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ3VuZGVmaW5lZCcgPyBjb21tb25qc0dsb2JhbCA6IGdsb2JhbFRoaXM7CgogIHZhciBhdmFpbGFibGVUeXBlZEFycmF5cyQyID0gZnVuY3Rpb24gYXZhaWxhYmxlVHlwZWRBcnJheXMoKSB7CiAgCXZhciBvdXQgPSBbXTsKICAJZm9yICh2YXIgaSA9IDA7IGkgPCBwb3NzaWJsZU5hbWVzLmxlbmd0aDsgaSsrKSB7CiAgCQlpZiAodHlwZW9mIGckMltwb3NzaWJsZU5hbWVzW2ldXSA9PT0gJ2Z1bmN0aW9uJykgewogIAkJCW91dFtvdXQubGVuZ3RoXSA9IHBvc3NpYmxlTmFtZXNbaV07CiAgCQl9CiAgCX0KICAJcmV0dXJuIG91dDsKICB9OwoKICB2YXIgR2V0SW50cmluc2ljID0gZ2V0SW50cmluc2ljOwoKICB2YXIgJGdPUEQgPSBHZXRJbnRyaW5zaWMoJyVPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yJScpOwogIGlmICgkZ09QRCkgewogIAl0cnkgewogIAkJJGdPUEQoW10sICdsZW5ndGgnKTsKICAJfSBjYXRjaCAoZSkgewogIAkJLy8gSUUgOCBoYXMgYSBicm9rZW4gZ09QRAogIAkJJGdPUEQgPSBudWxsOwogIAl9CiAgfQoKICB2YXIgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID0gJGdPUEQ7CgogIHZhciBmb3JFYWNoJDEgPSBmb3JlYWNoOwogIHZhciBhdmFpbGFibGVUeXBlZEFycmF5cyQxID0gYXZhaWxhYmxlVHlwZWRBcnJheXMkMjsKICB2YXIgY2FsbEJvdW5kJDEgPSBjYWxsQm91bmQkMzsKCiAgdmFyICR0b1N0cmluZyQxID0gY2FsbEJvdW5kJDEoJ09iamVjdC5wcm90b3R5cGUudG9TdHJpbmcnKTsKICB2YXIgaGFzVG9TdHJpbmdUYWckMSA9IHNoYW1zKCk7CgogIHZhciBnJDEgPSB0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ3VuZGVmaW5lZCcgPyBjb21tb25qc0dsb2JhbCA6IGdsb2JhbFRoaXM7CiAgdmFyIHR5cGVkQXJyYXlzJDEgPSBhdmFpbGFibGVUeXBlZEFycmF5cyQxKCk7CgogIHZhciAkaW5kZXhPZiA9IGNhbGxCb3VuZCQxKCdBcnJheS5wcm90b3R5cGUuaW5kZXhPZicsIHRydWUpIHx8IGZ1bmN0aW9uIGluZGV4T2YoYXJyYXksIHZhbHVlKSB7CiAgCWZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpICs9IDEpIHsKICAJCWlmIChhcnJheVtpXSA9PT0gdmFsdWUpIHsKICAJCQlyZXR1cm4gaTsKICAJCX0KICAJfQogIAlyZXR1cm4gLTE7CiAgfTsKICB2YXIgJHNsaWNlJDEgPSBjYWxsQm91bmQkMSgnU3RyaW5nLnByb3RvdHlwZS5zbGljZScpOwogIHZhciB0b1N0clRhZ3MkMSA9IHt9OwogIHZhciBnT1BEJDEgPSBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7CiAgdmFyIGdldFByb3RvdHlwZU9mJDEgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Y7IC8vIHJlcXVpcmUoJ2dldHByb3RvdHlwZW9mJyk7CiAgaWYgKGhhc1RvU3RyaW5nVGFnJDEgJiYgZ09QRCQxICYmIGdldFByb3RvdHlwZU9mJDEpIHsKICAJZm9yRWFjaCQxKHR5cGVkQXJyYXlzJDEsIGZ1bmN0aW9uICh0eXBlZEFycmF5KSB7CiAgCQl2YXIgYXJyID0gbmV3IGckMVt0eXBlZEFycmF5XSgpOwogIAkJaWYgKFN5bWJvbC50b1N0cmluZ1RhZyBpbiBhcnIpIHsKICAJCQl2YXIgcHJvdG8gPSBnZXRQcm90b3R5cGVPZiQxKGFycik7CiAgCQkJdmFyIGRlc2NyaXB0b3IgPSBnT1BEJDEocHJvdG8sIFN5bWJvbC50b1N0cmluZ1RhZyk7CiAgCQkJaWYgKCFkZXNjcmlwdG9yKSB7CiAgCQkJCXZhciBzdXBlclByb3RvID0gZ2V0UHJvdG90eXBlT2YkMShwcm90byk7CiAgCQkJCWRlc2NyaXB0b3IgPSBnT1BEJDEoc3VwZXJQcm90bywgU3ltYm9sLnRvU3RyaW5nVGFnKTsKICAJCQl9CiAgCQkJdG9TdHJUYWdzJDFbdHlwZWRBcnJheV0gPSBkZXNjcmlwdG9yLmdldDsKICAJCX0KICAJfSk7CiAgfQoKICB2YXIgdHJ5VHlwZWRBcnJheXMkMSA9IGZ1bmN0aW9uIHRyeUFsbFR5cGVkQXJyYXlzKHZhbHVlKSB7CiAgCXZhciBhbnlUcnVlID0gZmFsc2U7CiAgCWZvckVhY2gkMSh0b1N0clRhZ3MkMSwgZnVuY3Rpb24gKGdldHRlciwgdHlwZWRBcnJheSkgewogIAkJaWYgKCFhbnlUcnVlKSB7CiAgCQkJdHJ5IHsKICAJCQkJYW55VHJ1ZSA9IGdldHRlci5jYWxsKHZhbHVlKSA9PT0gdHlwZWRBcnJheTsKICAJCQl9IGNhdGNoIChlKSB7IC8qKi8gfQogIAkJfQogIAl9KTsKICAJcmV0dXJuIGFueVRydWU7CiAgfTsKCiAgdmFyIGlzVHlwZWRBcnJheSQxID0gZnVuY3Rpb24gaXNUeXBlZEFycmF5KHZhbHVlKSB7CiAgCWlmICghdmFsdWUgfHwgdHlwZW9mIHZhbHVlICE9PSAnb2JqZWN0JykgeyByZXR1cm4gZmFsc2U7IH0KICAJaWYgKCFoYXNUb1N0cmluZ1RhZyQxIHx8ICEoU3ltYm9sLnRvU3RyaW5nVGFnIGluIHZhbHVlKSkgewogIAkJdmFyIHRhZyA9ICRzbGljZSQxKCR0b1N0cmluZyQxKHZhbHVlKSwgOCwgLTEpOwogIAkJcmV0dXJuICRpbmRleE9mKHR5cGVkQXJyYXlzJDEsIHRhZykgPiAtMTsKICAJfQogIAlpZiAoIWdPUEQkMSkgeyByZXR1cm4gZmFsc2U7IH0KICAJcmV0dXJuIHRyeVR5cGVkQXJyYXlzJDEodmFsdWUpOwogIH07CgogIHZhciBmb3JFYWNoID0gZm9yZWFjaDsKICB2YXIgYXZhaWxhYmxlVHlwZWRBcnJheXMgPSBhdmFpbGFibGVUeXBlZEFycmF5cyQyOwogIHZhciBjYWxsQm91bmQgPSBjYWxsQm91bmQkMzsKCiAgdmFyICR0b1N0cmluZyA9IGNhbGxCb3VuZCgnT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZycpOwogIHZhciBoYXNUb1N0cmluZ1RhZyA9IHNoYW1zKCk7CgogIHZhciBnID0gdHlwZW9mIGdsb2JhbFRoaXMgPT09ICd1bmRlZmluZWQnID8gY29tbW9uanNHbG9iYWwgOiBnbG9iYWxUaGlzOwogIHZhciB0eXBlZEFycmF5cyA9IGF2YWlsYWJsZVR5cGVkQXJyYXlzKCk7CgogIHZhciAkc2xpY2UgPSBjYWxsQm91bmQoJ1N0cmluZy5wcm90b3R5cGUuc2xpY2UnKTsKICB2YXIgdG9TdHJUYWdzID0ge307CiAgdmFyIGdPUEQgPSBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7CiAgdmFyIGdldFByb3RvdHlwZU9mID0gT2JqZWN0LmdldFByb3RvdHlwZU9mOyAvLyByZXF1aXJlKCdnZXRwcm90b3R5cGVvZicpOwogIGlmIChoYXNUb1N0cmluZ1RhZyAmJiBnT1BEICYmIGdldFByb3RvdHlwZU9mKSB7CiAgCWZvckVhY2godHlwZWRBcnJheXMsIGZ1bmN0aW9uICh0eXBlZEFycmF5KSB7CiAgCQlpZiAodHlwZW9mIGdbdHlwZWRBcnJheV0gPT09ICdmdW5jdGlvbicpIHsKICAJCQl2YXIgYXJyID0gbmV3IGdbdHlwZWRBcnJheV0oKTsKICAJCQlpZiAoU3ltYm9sLnRvU3RyaW5nVGFnIGluIGFycikgewogIAkJCQl2YXIgcHJvdG8gPSBnZXRQcm90b3R5cGVPZihhcnIpOwogIAkJCQl2YXIgZGVzY3JpcHRvciA9IGdPUEQocHJvdG8sIFN5bWJvbC50b1N0cmluZ1RhZyk7CiAgCQkJCWlmICghZGVzY3JpcHRvcikgewogIAkJCQkJdmFyIHN1cGVyUHJvdG8gPSBnZXRQcm90b3R5cGVPZihwcm90byk7CiAgCQkJCQlkZXNjcmlwdG9yID0gZ09QRChzdXBlclByb3RvLCBTeW1ib2wudG9TdHJpbmdUYWcpOwogIAkJCQl9CiAgCQkJCXRvU3RyVGFnc1t0eXBlZEFycmF5XSA9IGRlc2NyaXB0b3IuZ2V0OwogIAkJCX0KICAJCX0KICAJfSk7CiAgfQoKICB2YXIgdHJ5VHlwZWRBcnJheXMgPSBmdW5jdGlvbiB0cnlBbGxUeXBlZEFycmF5cyh2YWx1ZSkgewogIAl2YXIgZm91bmROYW1lID0gZmFsc2U7CiAgCWZvckVhY2godG9TdHJUYWdzLCBmdW5jdGlvbiAoZ2V0dGVyLCB0eXBlZEFycmF5KSB7CiAgCQlpZiAoIWZvdW5kTmFtZSkgewogIAkJCXRyeSB7CiAgCQkJCXZhciBuYW1lID0gZ2V0dGVyLmNhbGwodmFsdWUpOwogIAkJCQlpZiAobmFtZSA9PT0gdHlwZWRBcnJheSkgewogIAkJCQkJZm91bmROYW1lID0gbmFtZTsKICAJCQkJfQogIAkJCX0gY2F0Y2ggKGUpIHt9CiAgCQl9CiAgCX0pOwogIAlyZXR1cm4gZm91bmROYW1lOwogIH07CgogIHZhciBpc1R5cGVkQXJyYXkgPSBpc1R5cGVkQXJyYXkkMTsKCiAgdmFyIHdoaWNoVHlwZWRBcnJheSA9IGZ1bmN0aW9uIHdoaWNoVHlwZWRBcnJheSh2YWx1ZSkgewogIAlpZiAoIWlzVHlwZWRBcnJheSh2YWx1ZSkpIHsgcmV0dXJuIGZhbHNlOyB9CiAgCWlmICghaGFzVG9TdHJpbmdUYWcgfHwgIShTeW1ib2wudG9TdHJpbmdUYWcgaW4gdmFsdWUpKSB7IHJldHVybiAkc2xpY2UoJHRvU3RyaW5nKHZhbHVlKSwgOCwgLTEpOyB9CiAgCXJldHVybiB0cnlUeXBlZEFycmF5cyh2YWx1ZSk7CiAgfTsKCiAgKGZ1bmN0aW9uIChleHBvcnRzKSB7CgogIHZhciBpc0FyZ3VtZW50c09iamVjdCA9IGlzQXJndW1lbnRzOwogIHZhciBpc0dlbmVyYXRvckZ1bmN0aW9uJDEgPSBpc0dlbmVyYXRvckZ1bmN0aW9uOwogIHZhciB3aGljaFR5cGVkQXJyYXkkMSA9IHdoaWNoVHlwZWRBcnJheTsKICB2YXIgaXNUeXBlZEFycmF5ID0gaXNUeXBlZEFycmF5JDE7CgogIGZ1bmN0aW9uIHVuY3VycnlUaGlzKGYpIHsKICAgIHJldHVybiBmLmNhbGwuYmluZChmKTsKICB9CgogIHZhciBCaWdJbnRTdXBwb3J0ZWQgPSB0eXBlb2YgQmlnSW50ICE9PSAndW5kZWZpbmVkJzsKICB2YXIgU3ltYm9sU3VwcG9ydGVkID0gdHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCc7CgogIHZhciBPYmplY3RUb1N0cmluZyA9IHVuY3VycnlUaGlzKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcpOwoKICB2YXIgbnVtYmVyVmFsdWUgPSB1bmN1cnJ5VGhpcyhOdW1iZXIucHJvdG90eXBlLnZhbHVlT2YpOwogIHZhciBzdHJpbmdWYWx1ZSA9IHVuY3VycnlUaGlzKFN0cmluZy5wcm90b3R5cGUudmFsdWVPZik7CiAgdmFyIGJvb2xlYW5WYWx1ZSA9IHVuY3VycnlUaGlzKEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YpOwoKICBpZiAoQmlnSW50U3VwcG9ydGVkKSB7CiAgICB2YXIgYmlnSW50VmFsdWUgPSB1bmN1cnJ5VGhpcyhCaWdJbnQucHJvdG90eXBlLnZhbHVlT2YpOwogIH0KCiAgaWYgKFN5bWJvbFN1cHBvcnRlZCkgewogICAgdmFyIHN5bWJvbFZhbHVlID0gdW5jdXJyeVRoaXMoU3ltYm9sLnByb3RvdHlwZS52YWx1ZU9mKTsKICB9CgogIGZ1bmN0aW9uIGNoZWNrQm94ZWRQcmltaXRpdmUodmFsdWUsIHByb3RvdHlwZVZhbHVlT2YpIHsKICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdvYmplY3QnKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIHRyeSB7CiAgICAgIHByb3RvdHlwZVZhbHVlT2YodmFsdWUpOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0gY2F0Y2goZSkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfQoKICBleHBvcnRzLmlzQXJndW1lbnRzT2JqZWN0ID0gaXNBcmd1bWVudHNPYmplY3Q7CiAgZXhwb3J0cy5pc0dlbmVyYXRvckZ1bmN0aW9uID0gaXNHZW5lcmF0b3JGdW5jdGlvbiQxOwogIGV4cG9ydHMuaXNUeXBlZEFycmF5ID0gaXNUeXBlZEFycmF5OwoKICAvLyBUYWtlbiBmcm9tIGhlcmUgYW5kIG1vZGlmaWVkIGZvciBiZXR0ZXIgYnJvd3NlciBzdXBwb3J0CiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3NpbmRyZXNvcmh1cy9wLWlzLXByb21pc2UvYmxvYi9jZGEzNWE1MTNiZGEwM2Y5NzdhZDVjZGUzYTA3OWQyMzdlODJkN2VmL2luZGV4LmpzCiAgZnVuY3Rpb24gaXNQcm9taXNlKGlucHV0KSB7CiAgCXJldHVybiAoCiAgCQkoCiAgCQkJdHlwZW9mIFByb21pc2UgIT09ICd1bmRlZmluZWQnICYmCiAgCQkJaW5wdXQgaW5zdGFuY2VvZiBQcm9taXNlCiAgCQkpIHx8CiAgCQkoCiAgCQkJaW5wdXQgIT09IG51bGwgJiYKICAJCQl0eXBlb2YgaW5wdXQgPT09ICdvYmplY3QnICYmCiAgCQkJdHlwZW9mIGlucHV0LnRoZW4gPT09ICdmdW5jdGlvbicgJiYKICAJCQl0eXBlb2YgaW5wdXQuY2F0Y2ggPT09ICdmdW5jdGlvbicKICAJCSkKICAJKTsKICB9CiAgZXhwb3J0cy5pc1Byb21pc2UgPSBpc1Byb21pc2U7CgogIGZ1bmN0aW9uIGlzQXJyYXlCdWZmZXJWaWV3KHZhbHVlKSB7CiAgICBpZiAodHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJiBBcnJheUJ1ZmZlci5pc1ZpZXcpIHsKICAgICAgcmV0dXJuIEFycmF5QnVmZmVyLmlzVmlldyh2YWx1ZSk7CiAgICB9CgogICAgcmV0dXJuICgKICAgICAgaXNUeXBlZEFycmF5KHZhbHVlKSB8fAogICAgICBpc0RhdGFWaWV3KHZhbHVlKQogICAgKTsKICB9CiAgZXhwb3J0cy5pc0FycmF5QnVmZmVyVmlldyA9IGlzQXJyYXlCdWZmZXJWaWV3OwoKCiAgZnVuY3Rpb24gaXNVaW50OEFycmF5KHZhbHVlKSB7CiAgICByZXR1cm4gd2hpY2hUeXBlZEFycmF5JDEodmFsdWUpID09PSAnVWludDhBcnJheSc7CiAgfQogIGV4cG9ydHMuaXNVaW50OEFycmF5ID0gaXNVaW50OEFycmF5OwoKICBmdW5jdGlvbiBpc1VpbnQ4Q2xhbXBlZEFycmF5KHZhbHVlKSB7CiAgICByZXR1cm4gd2hpY2hUeXBlZEFycmF5JDEodmFsdWUpID09PSAnVWludDhDbGFtcGVkQXJyYXknOwogIH0KICBleHBvcnRzLmlzVWludDhDbGFtcGVkQXJyYXkgPSBpc1VpbnQ4Q2xhbXBlZEFycmF5OwoKICBmdW5jdGlvbiBpc1VpbnQxNkFycmF5KHZhbHVlKSB7CiAgICByZXR1cm4gd2hpY2hUeXBlZEFycmF5JDEodmFsdWUpID09PSAnVWludDE2QXJyYXknOwogIH0KICBleHBvcnRzLmlzVWludDE2QXJyYXkgPSBpc1VpbnQxNkFycmF5OwoKICBmdW5jdGlvbiBpc1VpbnQzMkFycmF5KHZhbHVlKSB7CiAgICByZXR1cm4gd2hpY2hUeXBlZEFycmF5JDEodmFsdWUpID09PSAnVWludDMyQXJyYXknOwogIH0KICBleHBvcnRzLmlzVWludDMyQXJyYXkgPSBpc1VpbnQzMkFycmF5OwoKICBmdW5jdGlvbiBpc0ludDhBcnJheSh2YWx1ZSkgewogICAgcmV0dXJuIHdoaWNoVHlwZWRBcnJheSQxKHZhbHVlKSA9PT0gJ0ludDhBcnJheSc7CiAgfQogIGV4cG9ydHMuaXNJbnQ4QXJyYXkgPSBpc0ludDhBcnJheTsKCiAgZnVuY3Rpb24gaXNJbnQxNkFycmF5KHZhbHVlKSB7CiAgICByZXR1cm4gd2hpY2hUeXBlZEFycmF5JDEodmFsdWUpID09PSAnSW50MTZBcnJheSc7CiAgfQogIGV4cG9ydHMuaXNJbnQxNkFycmF5ID0gaXNJbnQxNkFycmF5OwoKICBmdW5jdGlvbiBpc0ludDMyQXJyYXkodmFsdWUpIHsKICAgIHJldHVybiB3aGljaFR5cGVkQXJyYXkkMSh2YWx1ZSkgPT09ICdJbnQzMkFycmF5JzsKICB9CiAgZXhwb3J0cy5pc0ludDMyQXJyYXkgPSBpc0ludDMyQXJyYXk7CgogIGZ1bmN0aW9uIGlzRmxvYXQzMkFycmF5KHZhbHVlKSB7CiAgICByZXR1cm4gd2hpY2hUeXBlZEFycmF5JDEodmFsdWUpID09PSAnRmxvYXQzMkFycmF5JzsKICB9CiAgZXhwb3J0cy5pc0Zsb2F0MzJBcnJheSA9IGlzRmxvYXQzMkFycmF5OwoKICBmdW5jdGlvbiBpc0Zsb2F0NjRBcnJheSh2YWx1ZSkgewogICAgcmV0dXJuIHdoaWNoVHlwZWRBcnJheSQxKHZhbHVlKSA9PT0gJ0Zsb2F0NjRBcnJheSc7CiAgfQogIGV4cG9ydHMuaXNGbG9hdDY0QXJyYXkgPSBpc0Zsb2F0NjRBcnJheTsKCiAgZnVuY3Rpb24gaXNCaWdJbnQ2NEFycmF5KHZhbHVlKSB7CiAgICByZXR1cm4gd2hpY2hUeXBlZEFycmF5JDEodmFsdWUpID09PSAnQmlnSW50NjRBcnJheSc7CiAgfQogIGV4cG9ydHMuaXNCaWdJbnQ2NEFycmF5ID0gaXNCaWdJbnQ2NEFycmF5OwoKICBmdW5jdGlvbiBpc0JpZ1VpbnQ2NEFycmF5KHZhbHVlKSB7CiAgICByZXR1cm4gd2hpY2hUeXBlZEFycmF5JDEodmFsdWUpID09PSAnQmlnVWludDY0QXJyYXknOwogIH0KICBleHBvcnRzLmlzQmlnVWludDY0QXJyYXkgPSBpc0JpZ1VpbnQ2NEFycmF5OwoKICBmdW5jdGlvbiBpc01hcFRvU3RyaW5nKHZhbHVlKSB7CiAgICByZXR1cm4gT2JqZWN0VG9TdHJpbmcodmFsdWUpID09PSAnW29iamVjdCBNYXBdJzsKICB9CiAgaXNNYXBUb1N0cmluZy53b3JraW5nID0gKAogICAgdHlwZW9mIE1hcCAhPT0gJ3VuZGVmaW5lZCcgJiYKICAgIGlzTWFwVG9TdHJpbmcobmV3IE1hcCgpKQogICk7CgogIGZ1bmN0aW9uIGlzTWFwKHZhbHVlKSB7CiAgICBpZiAodHlwZW9mIE1hcCA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIHJldHVybiBpc01hcFRvU3RyaW5nLndvcmtpbmcKICAgICAgPyBpc01hcFRvU3RyaW5nKHZhbHVlKQogICAgICA6IHZhbHVlIGluc3RhbmNlb2YgTWFwOwogIH0KICBleHBvcnRzLmlzTWFwID0gaXNNYXA7CgogIGZ1bmN0aW9uIGlzU2V0VG9TdHJpbmcodmFsdWUpIHsKICAgIHJldHVybiBPYmplY3RUb1N0cmluZyh2YWx1ZSkgPT09ICdbb2JqZWN0IFNldF0nOwogIH0KICBpc1NldFRvU3RyaW5nLndvcmtpbmcgPSAoCiAgICB0eXBlb2YgU2V0ICE9PSAndW5kZWZpbmVkJyAmJgogICAgaXNTZXRUb1N0cmluZyhuZXcgU2V0KCkpCiAgKTsKICBmdW5jdGlvbiBpc1NldCh2YWx1ZSkgewogICAgaWYgKHR5cGVvZiBTZXQgPT09ICd1bmRlZmluZWQnKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICByZXR1cm4gaXNTZXRUb1N0cmluZy53b3JraW5nCiAgICAgID8gaXNTZXRUb1N0cmluZyh2YWx1ZSkKICAgICAgOiB2YWx1ZSBpbnN0YW5jZW9mIFNldDsKICB9CiAgZXhwb3J0cy5pc1NldCA9IGlzU2V0OwoKICBmdW5jdGlvbiBpc1dlYWtNYXBUb1N0cmluZyh2YWx1ZSkgewogICAgcmV0dXJuIE9iamVjdFRvU3RyaW5nKHZhbHVlKSA9PT0gJ1tvYmplY3QgV2Vha01hcF0nOwogIH0KICBpc1dlYWtNYXBUb1N0cmluZy53b3JraW5nID0gKAogICAgdHlwZW9mIFdlYWtNYXAgIT09ICd1bmRlZmluZWQnICYmCiAgICBpc1dlYWtNYXBUb1N0cmluZyhuZXcgV2Vha01hcCgpKQogICk7CiAgZnVuY3Rpb24gaXNXZWFrTWFwKHZhbHVlKSB7CiAgICBpZiAodHlwZW9mIFdlYWtNYXAgPT09ICd1bmRlZmluZWQnKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICByZXR1cm4gaXNXZWFrTWFwVG9TdHJpbmcud29ya2luZwogICAgICA/IGlzV2Vha01hcFRvU3RyaW5nKHZhbHVlKQogICAgICA6IHZhbHVlIGluc3RhbmNlb2YgV2Vha01hcDsKICB9CiAgZXhwb3J0cy5pc1dlYWtNYXAgPSBpc1dlYWtNYXA7CgogIGZ1bmN0aW9uIGlzV2Vha1NldFRvU3RyaW5nKHZhbHVlKSB7CiAgICByZXR1cm4gT2JqZWN0VG9TdHJpbmcodmFsdWUpID09PSAnW29iamVjdCBXZWFrU2V0XSc7CiAgfQogIGlzV2Vha1NldFRvU3RyaW5nLndvcmtpbmcgPSAoCiAgICB0eXBlb2YgV2Vha1NldCAhPT0gJ3VuZGVmaW5lZCcgJiYKICAgIGlzV2Vha1NldFRvU3RyaW5nKG5ldyBXZWFrU2V0KCkpCiAgKTsKICBmdW5jdGlvbiBpc1dlYWtTZXQodmFsdWUpIHsKICAgIHJldHVybiBpc1dlYWtTZXRUb1N0cmluZyh2YWx1ZSk7CiAgfQogIGV4cG9ydHMuaXNXZWFrU2V0ID0gaXNXZWFrU2V0OwoKICBmdW5jdGlvbiBpc0FycmF5QnVmZmVyVG9TdHJpbmcodmFsdWUpIHsKICAgIHJldHVybiBPYmplY3RUb1N0cmluZyh2YWx1ZSkgPT09ICdbb2JqZWN0IEFycmF5QnVmZmVyXSc7CiAgfQogIGlzQXJyYXlCdWZmZXJUb1N0cmluZy53b3JraW5nID0gKAogICAgdHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJgogICAgaXNBcnJheUJ1ZmZlclRvU3RyaW5nKG5ldyBBcnJheUJ1ZmZlcigpKQogICk7CiAgZnVuY3Rpb24gaXNBcnJheUJ1ZmZlcih2YWx1ZSkgewogICAgaWYgKHR5cGVvZiBBcnJheUJ1ZmZlciA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIHJldHVybiBpc0FycmF5QnVmZmVyVG9TdHJpbmcud29ya2luZwogICAgICA/IGlzQXJyYXlCdWZmZXJUb1N0cmluZyh2YWx1ZSkKICAgICAgOiB2YWx1ZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyOwogIH0KICBleHBvcnRzLmlzQXJyYXlCdWZmZXIgPSBpc0FycmF5QnVmZmVyOwoKICBmdW5jdGlvbiBpc0RhdGFWaWV3VG9TdHJpbmcodmFsdWUpIHsKICAgIHJldHVybiBPYmplY3RUb1N0cmluZyh2YWx1ZSkgPT09ICdbb2JqZWN0IERhdGFWaWV3XSc7CiAgfQogIGlzRGF0YVZpZXdUb1N0cmluZy53b3JraW5nID0gKAogICAgdHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJgogICAgdHlwZW9mIERhdGFWaWV3ICE9PSAndW5kZWZpbmVkJyAmJgogICAgaXNEYXRhVmlld1RvU3RyaW5nKG5ldyBEYXRhVmlldyhuZXcgQXJyYXlCdWZmZXIoMSksIDAsIDEpKQogICk7CiAgZnVuY3Rpb24gaXNEYXRhVmlldyh2YWx1ZSkgewogICAgaWYgKHR5cGVvZiBEYXRhVmlldyA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIHJldHVybiBpc0RhdGFWaWV3VG9TdHJpbmcud29ya2luZwogICAgICA/IGlzRGF0YVZpZXdUb1N0cmluZyh2YWx1ZSkKICAgICAgOiB2YWx1ZSBpbnN0YW5jZW9mIERhdGFWaWV3OwogIH0KICBleHBvcnRzLmlzRGF0YVZpZXcgPSBpc0RhdGFWaWV3OwoKICAvLyBTdG9yZSBhIGNvcHkgb2YgU2hhcmVkQXJyYXlCdWZmZXIgaW4gY2FzZSBpdCdzIGRlbGV0ZWQgZWxzZXdoZXJlCiAgdmFyIFNoYXJlZEFycmF5QnVmZmVyQ29weSA9IHR5cGVvZiBTaGFyZWRBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgPyBTaGFyZWRBcnJheUJ1ZmZlciA6IHVuZGVmaW5lZDsKICBmdW5jdGlvbiBpc1NoYXJlZEFycmF5QnVmZmVyVG9TdHJpbmcodmFsdWUpIHsKICAgIHJldHVybiBPYmplY3RUb1N0cmluZyh2YWx1ZSkgPT09ICdbb2JqZWN0IFNoYXJlZEFycmF5QnVmZmVyXSc7CiAgfQogIGZ1bmN0aW9uIGlzU2hhcmVkQXJyYXlCdWZmZXIodmFsdWUpIHsKICAgIGlmICh0eXBlb2YgU2hhcmVkQXJyYXlCdWZmZXJDb3B5ID09PSAndW5kZWZpbmVkJykgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgaWYgKHR5cGVvZiBpc1NoYXJlZEFycmF5QnVmZmVyVG9TdHJpbmcud29ya2luZyA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgaXNTaGFyZWRBcnJheUJ1ZmZlclRvU3RyaW5nLndvcmtpbmcgPSBpc1NoYXJlZEFycmF5QnVmZmVyVG9TdHJpbmcobmV3IFNoYXJlZEFycmF5QnVmZmVyQ29weSgpKTsKICAgIH0KCiAgICByZXR1cm4gaXNTaGFyZWRBcnJheUJ1ZmZlclRvU3RyaW5nLndvcmtpbmcKICAgICAgPyBpc1NoYXJlZEFycmF5QnVmZmVyVG9TdHJpbmcodmFsdWUpCiAgICAgIDogdmFsdWUgaW5zdGFuY2VvZiBTaGFyZWRBcnJheUJ1ZmZlckNvcHk7CiAgfQogIGV4cG9ydHMuaXNTaGFyZWRBcnJheUJ1ZmZlciA9IGlzU2hhcmVkQXJyYXlCdWZmZXI7CgogIGZ1bmN0aW9uIGlzQXN5bmNGdW5jdGlvbih2YWx1ZSkgewogICAgcmV0dXJuIE9iamVjdFRvU3RyaW5nKHZhbHVlKSA9PT0gJ1tvYmplY3QgQXN5bmNGdW5jdGlvbl0nOwogIH0KICBleHBvcnRzLmlzQXN5bmNGdW5jdGlvbiA9IGlzQXN5bmNGdW5jdGlvbjsKCiAgZnVuY3Rpb24gaXNNYXBJdGVyYXRvcih2YWx1ZSkgewogICAgcmV0dXJuIE9iamVjdFRvU3RyaW5nKHZhbHVlKSA9PT0gJ1tvYmplY3QgTWFwIEl0ZXJhdG9yXSc7CiAgfQogIGV4cG9ydHMuaXNNYXBJdGVyYXRvciA9IGlzTWFwSXRlcmF0b3I7CgogIGZ1bmN0aW9uIGlzU2V0SXRlcmF0b3IodmFsdWUpIHsKICAgIHJldHVybiBPYmplY3RUb1N0cmluZyh2YWx1ZSkgPT09ICdbb2JqZWN0IFNldCBJdGVyYXRvcl0nOwogIH0KICBleHBvcnRzLmlzU2V0SXRlcmF0b3IgPSBpc1NldEl0ZXJhdG9yOwoKICBmdW5jdGlvbiBpc0dlbmVyYXRvck9iamVjdCh2YWx1ZSkgewogICAgcmV0dXJuIE9iamVjdFRvU3RyaW5nKHZhbHVlKSA9PT0gJ1tvYmplY3QgR2VuZXJhdG9yXSc7CiAgfQogIGV4cG9ydHMuaXNHZW5lcmF0b3JPYmplY3QgPSBpc0dlbmVyYXRvck9iamVjdDsKCiAgZnVuY3Rpb24gaXNXZWJBc3NlbWJseUNvbXBpbGVkTW9kdWxlKHZhbHVlKSB7CiAgICByZXR1cm4gT2JqZWN0VG9TdHJpbmcodmFsdWUpID09PSAnW29iamVjdCBXZWJBc3NlbWJseS5Nb2R1bGVdJzsKICB9CiAgZXhwb3J0cy5pc1dlYkFzc2VtYmx5Q29tcGlsZWRNb2R1bGUgPSBpc1dlYkFzc2VtYmx5Q29tcGlsZWRNb2R1bGU7CgogIGZ1bmN0aW9uIGlzTnVtYmVyT2JqZWN0KHZhbHVlKSB7CiAgICByZXR1cm4gY2hlY2tCb3hlZFByaW1pdGl2ZSh2YWx1ZSwgbnVtYmVyVmFsdWUpOwogIH0KICBleHBvcnRzLmlzTnVtYmVyT2JqZWN0ID0gaXNOdW1iZXJPYmplY3Q7CgogIGZ1bmN0aW9uIGlzU3RyaW5nT2JqZWN0KHZhbHVlKSB7CiAgICByZXR1cm4gY2hlY2tCb3hlZFByaW1pdGl2ZSh2YWx1ZSwgc3RyaW5nVmFsdWUpOwogIH0KICBleHBvcnRzLmlzU3RyaW5nT2JqZWN0ID0gaXNTdHJpbmdPYmplY3Q7CgogIGZ1bmN0aW9uIGlzQm9vbGVhbk9iamVjdCh2YWx1ZSkgewogICAgcmV0dXJuIGNoZWNrQm94ZWRQcmltaXRpdmUodmFsdWUsIGJvb2xlYW5WYWx1ZSk7CiAgfQogIGV4cG9ydHMuaXNCb29sZWFuT2JqZWN0ID0gaXNCb29sZWFuT2JqZWN0OwoKICBmdW5jdGlvbiBpc0JpZ0ludE9iamVjdCh2YWx1ZSkgewogICAgcmV0dXJuIEJpZ0ludFN1cHBvcnRlZCAmJiBjaGVja0JveGVkUHJpbWl0aXZlKHZhbHVlLCBiaWdJbnRWYWx1ZSk7CiAgfQogIGV4cG9ydHMuaXNCaWdJbnRPYmplY3QgPSBpc0JpZ0ludE9iamVjdDsKCiAgZnVuY3Rpb24gaXNTeW1ib2xPYmplY3QodmFsdWUpIHsKICAgIHJldHVybiBTeW1ib2xTdXBwb3J0ZWQgJiYgY2hlY2tCb3hlZFByaW1pdGl2ZSh2YWx1ZSwgc3ltYm9sVmFsdWUpOwogIH0KICBleHBvcnRzLmlzU3ltYm9sT2JqZWN0ID0gaXNTeW1ib2xPYmplY3Q7CgogIGZ1bmN0aW9uIGlzQm94ZWRQcmltaXRpdmUodmFsdWUpIHsKICAgIHJldHVybiAoCiAgICAgIGlzTnVtYmVyT2JqZWN0KHZhbHVlKSB8fAogICAgICBpc1N0cmluZ09iamVjdCh2YWx1ZSkgfHwKICAgICAgaXNCb29sZWFuT2JqZWN0KHZhbHVlKSB8fAogICAgICBpc0JpZ0ludE9iamVjdCh2YWx1ZSkgfHwKICAgICAgaXNTeW1ib2xPYmplY3QodmFsdWUpCiAgICApOwogIH0KICBleHBvcnRzLmlzQm94ZWRQcmltaXRpdmUgPSBpc0JveGVkUHJpbWl0aXZlOwoKICBmdW5jdGlvbiBpc0FueUFycmF5QnVmZmVyKHZhbHVlKSB7CiAgICByZXR1cm4gdHlwZW9mIFVpbnQ4QXJyYXkgIT09ICd1bmRlZmluZWQnICYmICgKICAgICAgaXNBcnJheUJ1ZmZlcih2YWx1ZSkgfHwKICAgICAgaXNTaGFyZWRBcnJheUJ1ZmZlcih2YWx1ZSkKICAgICk7CiAgfQogIGV4cG9ydHMuaXNBbnlBcnJheUJ1ZmZlciA9IGlzQW55QXJyYXlCdWZmZXI7CgogIFsnaXNQcm94eScsICdpc0V4dGVybmFsJywgJ2lzTW9kdWxlTmFtZXNwYWNlT2JqZWN0J10uZm9yRWFjaChmdW5jdGlvbihtZXRob2QpIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBtZXRob2QsIHsKICAgICAgZW51bWVyYWJsZTogZmFsc2UsCiAgICAgIHZhbHVlOiBmdW5jdGlvbigpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IobWV0aG9kICsgJyBpcyBub3Qgc3VwcG9ydGVkIGluIHVzZXJsYW5kJyk7CiAgICAgIH0KICAgIH0pOwogIH0pOwogIH0odHlwZXMpKTsKCiAgdmFyIGlzQnVmZmVyID0gZnVuY3Rpb24gaXNCdWZmZXIoYXJnKSB7CiAgICByZXR1cm4gYXJnIGluc3RhbmNlb2YgQnVmZmVyOwogIH07CgogIChmdW5jdGlvbiAoZXhwb3J0cykgewogIC8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLgogIC8vCiAgLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEKICAvLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlCiAgLy8gIlNvZnR3YXJlIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZwogIC8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwKICAvLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0CiAgLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlCiAgLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6CiAgLy8KICAvLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZAogIC8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLgogIC8vCiAgLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MKICAvLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GCiAgLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTgogIC8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLAogIC8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUgogIC8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUKICAvLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLgoKICB2YXIgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzIHx8CiAgICBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKG9iaikgewogICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iaik7CiAgICAgIHZhciBkZXNjcmlwdG9ycyA9IHt9OwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBkZXNjcmlwdG9yc1trZXlzW2ldXSA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXlzW2ldKTsKICAgICAgfQogICAgICByZXR1cm4gZGVzY3JpcHRvcnM7CiAgICB9OwoKICB2YXIgZm9ybWF0UmVnRXhwID0gLyVbc2RqJV0vZzsKICBleHBvcnRzLmZvcm1hdCA9IGZ1bmN0aW9uKGYpIHsKICAgIGlmICghaXNTdHJpbmcoZikpIHsKICAgICAgdmFyIG9iamVjdHMgPSBbXTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgICAgICBvYmplY3RzLnB1c2goaW5zcGVjdChhcmd1bWVudHNbaV0pKTsKICAgICAgfQogICAgICByZXR1cm4gb2JqZWN0cy5qb2luKCcgJyk7CiAgICB9CgogICAgdmFyIGkgPSAxOwogICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7CiAgICB2YXIgbGVuID0gYXJncy5sZW5ndGg7CiAgICB2YXIgc3RyID0gU3RyaW5nKGYpLnJlcGxhY2UoZm9ybWF0UmVnRXhwLCBmdW5jdGlvbih4KSB7CiAgICAgIGlmICh4ID09PSAnJSUnKSByZXR1cm4gJyUnOwogICAgICBpZiAoaSA+PSBsZW4pIHJldHVybiB4OwogICAgICBzd2l0Y2ggKHgpIHsKICAgICAgICBjYXNlICclcyc6IHJldHVybiBTdHJpbmcoYXJnc1tpKytdKTsKICAgICAgICBjYXNlICclZCc6IHJldHVybiBOdW1iZXIoYXJnc1tpKytdKTsKICAgICAgICBjYXNlICclaic6CiAgICAgICAgICB0cnkgewogICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoYXJnc1tpKytdKTsKICAgICAgICAgIH0gY2F0Y2ggKF8pIHsKICAgICAgICAgICAgcmV0dXJuICdbQ2lyY3VsYXJdJzsKICAgICAgICAgIH0KICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmV0dXJuIHg7CiAgICAgIH0KICAgIH0pOwogICAgZm9yICh2YXIgeCA9IGFyZ3NbaV07IGkgPCBsZW47IHggPSBhcmdzWysraV0pIHsKICAgICAgaWYgKGlzTnVsbCh4KSB8fCAhaXNPYmplY3QoeCkpIHsKICAgICAgICBzdHIgKz0gJyAnICsgeDsKICAgICAgfSBlbHNlIHsKICAgICAgICBzdHIgKz0gJyAnICsgaW5zcGVjdCh4KTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHN0cjsKICB9OwoKCiAgLy8gTWFyayB0aGF0IGEgbWV0aG9kIHNob3VsZCBub3QgYmUgdXNlZC4KICAvLyBSZXR1cm5zIGEgbW9kaWZpZWQgZnVuY3Rpb24gd2hpY2ggd2FybnMgb25jZSBieSBkZWZhdWx0LgogIC8vIElmIC0tbm8tZGVwcmVjYXRpb24gaXMgc2V0LCB0aGVuIGl0IGlzIGEgbm8tb3AuCiAgZXhwb3J0cy5kZXByZWNhdGUgPSBmdW5jdGlvbihmbiwgbXNnKSB7CiAgICBpZiAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIHByb2Nlc3Mubm9EZXByZWNhdGlvbiA9PT0gdHJ1ZSkgewogICAgICByZXR1cm4gZm47CiAgICB9CgogICAgLy8gQWxsb3cgZm9yIGRlcHJlY2F0aW5nIHRoaW5ncyBpbiB0aGUgcHJvY2VzcyBvZiBzdGFydGluZyB1cC4KICAgIGlmICh0eXBlb2YgcHJvY2VzcyA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiBleHBvcnRzLmRlcHJlY2F0ZShmbiwgbXNnKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9OwogICAgfQoKICAgIHZhciB3YXJuZWQgPSBmYWxzZTsKICAgIGZ1bmN0aW9uIGRlcHJlY2F0ZWQoKSB7CiAgICAgIGlmICghd2FybmVkKSB7CiAgICAgICAgewogICAgICAgICAgY29uc29sZS5lcnJvcihtc2cpOwogICAgICAgIH0KICAgICAgICB3YXJuZWQgPSB0cnVlOwogICAgICB9CiAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfQoKICAgIHJldHVybiBkZXByZWNhdGVkOwogIH07CgoKICB2YXIgZGVidWdzID0ge307CiAgdmFyIGRlYnVnRW52UmVnZXggPSAvXiQvOwogIGV4cG9ydHMuZGVidWdsb2cgPSBmdW5jdGlvbihzZXQpIHsKICAgIHNldCA9IHNldC50b1VwcGVyQ2FzZSgpOwogICAgaWYgKCFkZWJ1Z3Nbc2V0XSkgewogICAgICBpZiAoZGVidWdFbnZSZWdleC50ZXN0KHNldCkpIHsKICAgICAgICB2YXIgcGlkID0gcHJvY2Vzcy5waWQ7CiAgICAgICAgZGVidWdzW3NldF0gPSBmdW5jdGlvbigpIHsKICAgICAgICAgIHZhciBtc2cgPSBleHBvcnRzLmZvcm1hdC5hcHBseShleHBvcnRzLCBhcmd1bWVudHMpOwogICAgICAgICAgY29uc29sZS5lcnJvcignJXMgJWQ6ICVzJywgc2V0LCBwaWQsIG1zZyk7CiAgICAgICAgfTsKICAgICAgfSBlbHNlIHsKICAgICAgICBkZWJ1Z3Nbc2V0XSA9IGZ1bmN0aW9uKCkge307CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBkZWJ1Z3Nbc2V0XTsKICB9OwoKCiAgLyoqCiAgICogRWNob3MgdGhlIHZhbHVlIG9mIGEgdmFsdWUuIFRyeXMgdG8gcHJpbnQgdGhlIHZhbHVlIG91dAogICAqIGluIHRoZSBiZXN0IHdheSBwb3NzaWJsZSBnaXZlbiB0aGUgZGlmZmVyZW50IHR5cGVzLgogICAqCiAgICogQHBhcmFtIHtPYmplY3R9IG9iaiBUaGUgb2JqZWN0IHRvIHByaW50IG91dC4KICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyBPcHRpb25hbCBvcHRpb25zIG9iamVjdCB0aGF0IGFsdGVycyB0aGUgb3V0cHV0LgogICAqLwogIC8qIGxlZ2FjeTogb2JqLCBzaG93SGlkZGVuLCBkZXB0aCwgY29sb3JzKi8KICBmdW5jdGlvbiBpbnNwZWN0KG9iaiwgb3B0cykgewogICAgLy8gZGVmYXVsdCBvcHRpb25zCiAgICB2YXIgY3R4ID0gewogICAgICBzZWVuOiBbXSwKICAgICAgc3R5bGl6ZTogc3R5bGl6ZU5vQ29sb3IKICAgIH07CiAgICAvLyBsZWdhY3kuLi4KICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID49IDMpIGN0eC5kZXB0aCA9IGFyZ3VtZW50c1syXTsKICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID49IDQpIGN0eC5jb2xvcnMgPSBhcmd1bWVudHNbM107CiAgICBpZiAoaXNCb29sZWFuKG9wdHMpKSB7CiAgICAgIC8vIGxlZ2FjeS4uLgogICAgICBjdHguc2hvd0hpZGRlbiA9IG9wdHM7CiAgICB9IGVsc2UgaWYgKG9wdHMpIHsKICAgICAgLy8gZ290IGFuICJvcHRpb25zIiBvYmplY3QKICAgICAgZXhwb3J0cy5fZXh0ZW5kKGN0eCwgb3B0cyk7CiAgICB9CiAgICAvLyBzZXQgZGVmYXVsdCBvcHRpb25zCiAgICBpZiAoaXNVbmRlZmluZWQoY3R4LnNob3dIaWRkZW4pKSBjdHguc2hvd0hpZGRlbiA9IGZhbHNlOwogICAgaWYgKGlzVW5kZWZpbmVkKGN0eC5kZXB0aCkpIGN0eC5kZXB0aCA9IDI7CiAgICBpZiAoaXNVbmRlZmluZWQoY3R4LmNvbG9ycykpIGN0eC5jb2xvcnMgPSBmYWxzZTsKICAgIGlmIChpc1VuZGVmaW5lZChjdHguY3VzdG9tSW5zcGVjdCkpIGN0eC5jdXN0b21JbnNwZWN0ID0gdHJ1ZTsKICAgIGlmIChjdHguY29sb3JzKSBjdHguc3R5bGl6ZSA9IHN0eWxpemVXaXRoQ29sb3I7CiAgICByZXR1cm4gZm9ybWF0VmFsdWUoY3R4LCBvYmosIGN0eC5kZXB0aCk7CiAgfQogIGV4cG9ydHMuaW5zcGVjdCA9IGluc3BlY3Q7CgoKICAvLyBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0FOU0lfZXNjYXBlX2NvZGUjZ3JhcGhpY3MKICBpbnNwZWN0LmNvbG9ycyA9IHsKICAgICdib2xkJyA6IFsxLCAyMl0sCiAgICAnaXRhbGljJyA6IFszLCAyM10sCiAgICAndW5kZXJsaW5lJyA6IFs0LCAyNF0sCiAgICAnaW52ZXJzZScgOiBbNywgMjddLAogICAgJ3doaXRlJyA6IFszNywgMzldLAogICAgJ2dyZXknIDogWzkwLCAzOV0sCiAgICAnYmxhY2snIDogWzMwLCAzOV0sCiAgICAnYmx1ZScgOiBbMzQsIDM5XSwKICAgICdjeWFuJyA6IFszNiwgMzldLAogICAgJ2dyZWVuJyA6IFszMiwgMzldLAogICAgJ21hZ2VudGEnIDogWzM1LCAzOV0sCiAgICAncmVkJyA6IFszMSwgMzldLAogICAgJ3llbGxvdycgOiBbMzMsIDM5XQogIH07CgogIC8vIERvbid0IHVzZSAnYmx1ZScgbm90IHZpc2libGUgb24gY21kLmV4ZQogIGluc3BlY3Quc3R5bGVzID0gewogICAgJ3NwZWNpYWwnOiAnY3lhbicsCiAgICAnbnVtYmVyJzogJ3llbGxvdycsCiAgICAnYm9vbGVhbic6ICd5ZWxsb3cnLAogICAgJ3VuZGVmaW5lZCc6ICdncmV5JywKICAgICdudWxsJzogJ2JvbGQnLAogICAgJ3N0cmluZyc6ICdncmVlbicsCiAgICAnZGF0ZSc6ICdtYWdlbnRhJywKICAgIC8vICJuYW1lIjogaW50ZW50aW9uYWxseSBub3Qgc3R5bGluZwogICAgJ3JlZ2V4cCc6ICdyZWQnCiAgfTsKCgogIGZ1bmN0aW9uIHN0eWxpemVXaXRoQ29sb3Ioc3RyLCBzdHlsZVR5cGUpIHsKICAgIHZhciBzdHlsZSA9IGluc3BlY3Quc3R5bGVzW3N0eWxlVHlwZV07CgogICAgaWYgKHN0eWxlKSB7CiAgICAgIHJldHVybiAnXHUwMDFiWycgKyBpbnNwZWN0LmNvbG9yc1tzdHlsZV1bMF0gKyAnbScgKyBzdHIgKwogICAgICAgICAgICAgJ1x1MDAxYlsnICsgaW5zcGVjdC5jb2xvcnNbc3R5bGVdWzFdICsgJ20nOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHN0cjsKICAgIH0KICB9CgoKICBmdW5jdGlvbiBzdHlsaXplTm9Db2xvcihzdHIsIHN0eWxlVHlwZSkgewogICAgcmV0dXJuIHN0cjsKICB9CgoKICBmdW5jdGlvbiBhcnJheVRvSGFzaChhcnJheSkgewogICAgdmFyIGhhc2ggPSB7fTsKCiAgICBhcnJheS5mb3JFYWNoKGZ1bmN0aW9uKHZhbCwgaWR4KSB7CiAgICAgIGhhc2hbdmFsXSA9IHRydWU7CiAgICB9KTsKCiAgICByZXR1cm4gaGFzaDsKICB9CgoKICBmdW5jdGlvbiBmb3JtYXRWYWx1ZShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMpIHsKICAgIC8vIFByb3ZpZGUgYSBob29rIGZvciB1c2VyLXNwZWNpZmllZCBpbnNwZWN0IGZ1bmN0aW9ucy4KICAgIC8vIENoZWNrIHRoYXQgdmFsdWUgaXMgYW4gb2JqZWN0IHdpdGggYW4gaW5zcGVjdCBmdW5jdGlvbiBvbiBpdAogICAgaWYgKGN0eC5jdXN0b21JbnNwZWN0ICYmCiAgICAgICAgdmFsdWUgJiYKICAgICAgICBpc0Z1bmN0aW9uKHZhbHVlLmluc3BlY3QpICYmCiAgICAgICAgLy8gRmlsdGVyIG91dCB0aGUgdXRpbCBtb2R1bGUsIGl0J3MgaW5zcGVjdCBmdW5jdGlvbiBpcyBzcGVjaWFsCiAgICAgICAgdmFsdWUuaW5zcGVjdCAhPT0gZXhwb3J0cy5pbnNwZWN0ICYmCiAgICAgICAgLy8gQWxzbyBmaWx0ZXIgb3V0IGFueSBwcm90b3R5cGUgb2JqZWN0cyB1c2luZyB0aGUgY2lyY3VsYXIgY2hlY2suCiAgICAgICAgISh2YWx1ZS5jb25zdHJ1Y3RvciAmJiB2YWx1ZS5jb25zdHJ1Y3Rvci5wcm90b3R5cGUgPT09IHZhbHVlKSkgewogICAgICB2YXIgcmV0ID0gdmFsdWUuaW5zcGVjdChyZWN1cnNlVGltZXMsIGN0eCk7CiAgICAgIGlmICghaXNTdHJpbmcocmV0KSkgewogICAgICAgIHJldCA9IGZvcm1hdFZhbHVlKGN0eCwgcmV0LCByZWN1cnNlVGltZXMpOwogICAgICB9CiAgICAgIHJldHVybiByZXQ7CiAgICB9CgogICAgLy8gUHJpbWl0aXZlIHR5cGVzIGNhbm5vdCBoYXZlIHByb3BlcnRpZXMKICAgIHZhciBwcmltaXRpdmUgPSBmb3JtYXRQcmltaXRpdmUoY3R4LCB2YWx1ZSk7CiAgICBpZiAocHJpbWl0aXZlKSB7CiAgICAgIHJldHVybiBwcmltaXRpdmU7CiAgICB9CgogICAgLy8gTG9vayB1cCB0aGUga2V5cyBvZiB0aGUgb2JqZWN0LgogICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh2YWx1ZSk7CiAgICB2YXIgdmlzaWJsZUtleXMgPSBhcnJheVRvSGFzaChrZXlzKTsKCiAgICBpZiAoY3R4LnNob3dIaWRkZW4pIHsKICAgICAga2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHZhbHVlKTsKICAgIH0KCiAgICAvLyBJRSBkb2Vzbid0IG1ha2UgZXJyb3IgZmllbGRzIG5vbi1lbnVtZXJhYmxlCiAgICAvLyBodHRwOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvaWUvZHd3NTJzYnQodj12cy45NCkuYXNweAogICAgaWYgKGlzRXJyb3IodmFsdWUpCiAgICAgICAgJiYgKGtleXMuaW5kZXhPZignbWVzc2FnZScpID49IDAgfHwga2V5cy5pbmRleE9mKCdkZXNjcmlwdGlvbicpID49IDApKSB7CiAgICAgIHJldHVybiBmb3JtYXRFcnJvcih2YWx1ZSk7CiAgICB9CgogICAgLy8gU29tZSB0eXBlIG9mIG9iamVjdCB3aXRob3V0IHByb3BlcnRpZXMgY2FuIGJlIHNob3J0Y3V0dGVkLgogICAgaWYgKGtleXMubGVuZ3RoID09PSAwKSB7CiAgICAgIGlmIChpc0Z1bmN0aW9uKHZhbHVlKSkgewogICAgICAgIHZhciBuYW1lID0gdmFsdWUubmFtZSA/ICc6ICcgKyB2YWx1ZS5uYW1lIDogJyc7CiAgICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKCdbRnVuY3Rpb24nICsgbmFtZSArICddJywgJ3NwZWNpYWwnKTsKICAgICAgfQogICAgICBpZiAoaXNSZWdFeHAodmFsdWUpKSB7CiAgICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKFJlZ0V4cC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSksICdyZWdleHAnKTsKICAgICAgfQogICAgICBpZiAoaXNEYXRlKHZhbHVlKSkgewogICAgICAgIHJldHVybiBjdHguc3R5bGl6ZShEYXRlLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSwgJ2RhdGUnKTsKICAgICAgfQogICAgICBpZiAoaXNFcnJvcih2YWx1ZSkpIHsKICAgICAgICByZXR1cm4gZm9ybWF0RXJyb3IodmFsdWUpOwogICAgICB9CiAgICB9CgogICAgdmFyIGJhc2UgPSAnJywgYXJyYXkgPSBmYWxzZSwgYnJhY2VzID0gWyd7JywgJ30nXTsKCiAgICAvLyBNYWtlIEFycmF5IHNheSB0aGF0IHRoZXkgYXJlIEFycmF5CiAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHsKICAgICAgYXJyYXkgPSB0cnVlOwogICAgICBicmFjZXMgPSBbJ1snLCAnXSddOwogICAgfQoKICAgIC8vIE1ha2UgZnVuY3Rpb25zIHNheSB0aGF0IHRoZXkgYXJlIGZ1bmN0aW9ucwogICAgaWYgKGlzRnVuY3Rpb24odmFsdWUpKSB7CiAgICAgIHZhciBuID0gdmFsdWUubmFtZSA/ICc6ICcgKyB2YWx1ZS5uYW1lIDogJyc7CiAgICAgIGJhc2UgPSAnIFtGdW5jdGlvbicgKyBuICsgJ10nOwogICAgfQoKICAgIC8vIE1ha2UgUmVnRXhwcyBzYXkgdGhhdCB0aGV5IGFyZSBSZWdFeHBzCiAgICBpZiAoaXNSZWdFeHAodmFsdWUpKSB7CiAgICAgIGJhc2UgPSAnICcgKyBSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpOwogICAgfQoKICAgIC8vIE1ha2UgZGF0ZXMgd2l0aCBwcm9wZXJ0aWVzIGZpcnN0IHNheSB0aGUgZGF0ZQogICAgaWYgKGlzRGF0ZSh2YWx1ZSkpIHsKICAgICAgYmFzZSA9ICcgJyArIERhdGUucHJvdG90eXBlLnRvVVRDU3RyaW5nLmNhbGwodmFsdWUpOwogICAgfQoKICAgIC8vIE1ha2UgZXJyb3Igd2l0aCBtZXNzYWdlIGZpcnN0IHNheSB0aGUgZXJyb3IKICAgIGlmIChpc0Vycm9yKHZhbHVlKSkgewogICAgICBiYXNlID0gJyAnICsgZm9ybWF0RXJyb3IodmFsdWUpOwogICAgfQoKICAgIGlmIChrZXlzLmxlbmd0aCA9PT0gMCAmJiAoIWFycmF5IHx8IHZhbHVlLmxlbmd0aCA9PSAwKSkgewogICAgICByZXR1cm4gYnJhY2VzWzBdICsgYmFzZSArIGJyYWNlc1sxXTsKICAgIH0KCiAgICBpZiAocmVjdXJzZVRpbWVzIDwgMCkgewogICAgICBpZiAoaXNSZWdFeHAodmFsdWUpKSB7CiAgICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKFJlZ0V4cC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSksICdyZWdleHAnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gY3R4LnN0eWxpemUoJ1tPYmplY3RdJywgJ3NwZWNpYWwnKTsKICAgICAgfQogICAgfQoKICAgIGN0eC5zZWVuLnB1c2godmFsdWUpOwoKICAgIHZhciBvdXRwdXQ7CiAgICBpZiAoYXJyYXkpIHsKICAgICAgb3V0cHV0ID0gZm9ybWF0QXJyYXkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cywga2V5cyk7CiAgICB9IGVsc2UgewogICAgICBvdXRwdXQgPSBrZXlzLm1hcChmdW5jdGlvbihrZXkpIHsKICAgICAgICByZXR1cm4gZm9ybWF0UHJvcGVydHkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cywga2V5LCBhcnJheSk7CiAgICAgIH0pOwogICAgfQoKICAgIGN0eC5zZWVuLnBvcCgpOwoKICAgIHJldHVybiByZWR1Y2VUb1NpbmdsZVN0cmluZyhvdXRwdXQsIGJhc2UsIGJyYWNlcyk7CiAgfQoKCiAgZnVuY3Rpb24gZm9ybWF0UHJpbWl0aXZlKGN0eCwgdmFsdWUpIHsKICAgIGlmIChpc1VuZGVmaW5lZCh2YWx1ZSkpCiAgICAgIHJldHVybiBjdHguc3R5bGl6ZSgndW5kZWZpbmVkJywgJ3VuZGVmaW5lZCcpOwogICAgaWYgKGlzU3RyaW5nKHZhbHVlKSkgewogICAgICB2YXIgc2ltcGxlID0gJ1wnJyArIEpTT04uc3RyaW5naWZ5KHZhbHVlKS5yZXBsYWNlKC9eInwiJC9nLCAnJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvJy9nLCAiXFwnIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFwiL2csICciJykgKyAnXCcnOwogICAgICByZXR1cm4gY3R4LnN0eWxpemUoc2ltcGxlLCAnc3RyaW5nJyk7CiAgICB9CiAgICBpZiAoaXNOdW1iZXIodmFsdWUpKQogICAgICByZXR1cm4gY3R4LnN0eWxpemUoJycgKyB2YWx1ZSwgJ251bWJlcicpOwogICAgaWYgKGlzQm9vbGVhbih2YWx1ZSkpCiAgICAgIHJldHVybiBjdHguc3R5bGl6ZSgnJyArIHZhbHVlLCAnYm9vbGVhbicpOwogICAgLy8gRm9yIHNvbWUgcmVhc29uIHR5cGVvZiBudWxsIGlzICJvYmplY3QiLCBzbyBzcGVjaWFsIGNhc2UgaGVyZS4KICAgIGlmIChpc051bGwodmFsdWUpKQogICAgICByZXR1cm4gY3R4LnN0eWxpemUoJ251bGwnLCAnbnVsbCcpOwogIH0KCgogIGZ1bmN0aW9uIGZvcm1hdEVycm9yKHZhbHVlKSB7CiAgICByZXR1cm4gJ1snICsgRXJyb3IucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpICsgJ10nOwogIH0KCgogIGZ1bmN0aW9uIGZvcm1hdEFycmF5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsIGtleXMpIHsKICAgIHZhciBvdXRwdXQgPSBbXTsKICAgIGZvciAodmFyIGkgPSAwLCBsID0gdmFsdWUubGVuZ3RoOyBpIDwgbDsgKytpKSB7CiAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eSh2YWx1ZSwgU3RyaW5nKGkpKSkgewogICAgICAgIG91dHB1dC5wdXNoKGZvcm1hdFByb3BlcnR5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsCiAgICAgICAgICAgIFN0cmluZyhpKSwgdHJ1ZSkpOwogICAgICB9IGVsc2UgewogICAgICAgIG91dHB1dC5wdXNoKCcnKTsKICAgICAgfQogICAgfQogICAga2V5cy5mb3JFYWNoKGZ1bmN0aW9uKGtleSkgewogICAgICBpZiAoIWtleS5tYXRjaCgvXlxkKyQvKSkgewogICAgICAgIG91dHB1dC5wdXNoKGZvcm1hdFByb3BlcnR5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsCiAgICAgICAgICAgIGtleSwgdHJ1ZSkpOwogICAgICB9CiAgICB9KTsKICAgIHJldHVybiBvdXRwdXQ7CiAgfQoKCiAgZnVuY3Rpb24gZm9ybWF0UHJvcGVydHkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cywga2V5LCBhcnJheSkgewogICAgdmFyIG5hbWUsIHN0ciwgZGVzYzsKICAgIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHZhbHVlLCBrZXkpIHx8IHsgdmFsdWU6IHZhbHVlW2tleV0gfTsKICAgIGlmIChkZXNjLmdldCkgewogICAgICBpZiAoZGVzYy5zZXQpIHsKICAgICAgICBzdHIgPSBjdHguc3R5bGl6ZSgnW0dldHRlci9TZXR0ZXJdJywgJ3NwZWNpYWwnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBzdHIgPSBjdHguc3R5bGl6ZSgnW0dldHRlcl0nLCAnc3BlY2lhbCcpOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICBpZiAoZGVzYy5zZXQpIHsKICAgICAgICBzdHIgPSBjdHguc3R5bGl6ZSgnW1NldHRlcl0nLCAnc3BlY2lhbCcpOwogICAgICB9CiAgICB9CiAgICBpZiAoIWhhc093blByb3BlcnR5KHZpc2libGVLZXlzLCBrZXkpKSB7CiAgICAgIG5hbWUgPSAnWycgKyBrZXkgKyAnXSc7CiAgICB9CiAgICBpZiAoIXN0cikgewogICAgICBpZiAoY3R4LnNlZW4uaW5kZXhPZihkZXNjLnZhbHVlKSA8IDApIHsKICAgICAgICBpZiAoaXNOdWxsKHJlY3Vyc2VUaW1lcykpIHsKICAgICAgICAgIHN0ciA9IGZvcm1hdFZhbHVlKGN0eCwgZGVzYy52YWx1ZSwgbnVsbCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHN0ciA9IGZvcm1hdFZhbHVlKGN0eCwgZGVzYy52YWx1ZSwgcmVjdXJzZVRpbWVzIC0gMSk7CiAgICAgICAgfQogICAgICAgIGlmIChzdHIuaW5kZXhPZignXG4nKSA+IC0xKSB7CiAgICAgICAgICBpZiAoYXJyYXkpIHsKICAgICAgICAgICAgc3RyID0gc3RyLnNwbGl0KCdcbicpLm1hcChmdW5jdGlvbihsaW5lKSB7CiAgICAgICAgICAgICAgcmV0dXJuICcgICcgKyBsaW5lOwogICAgICAgICAgICB9KS5qb2luKCdcbicpLnN1YnN0cigyKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHN0ciA9ICdcbicgKyBzdHIuc3BsaXQoJ1xuJykubWFwKGZ1bmN0aW9uKGxpbmUpIHsKICAgICAgICAgICAgICByZXR1cm4gJyAgICcgKyBsaW5lOwogICAgICAgICAgICB9KS5qb2luKCdcbicpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBzdHIgPSBjdHguc3R5bGl6ZSgnW0NpcmN1bGFyXScsICdzcGVjaWFsJyk7CiAgICAgIH0KICAgIH0KICAgIGlmIChpc1VuZGVmaW5lZChuYW1lKSkgewogICAgICBpZiAoYXJyYXkgJiYga2V5Lm1hdGNoKC9eXGQrJC8pKSB7CiAgICAgICAgcmV0dXJuIHN0cjsKICAgICAgfQogICAgICBuYW1lID0gSlNPTi5zdHJpbmdpZnkoJycgKyBrZXkpOwogICAgICBpZiAobmFtZS5tYXRjaCgvXiIoW2EtekEtWl9dW2EtekEtWl8wLTldKikiJC8pKSB7CiAgICAgICAgbmFtZSA9IG5hbWUuc3Vic3RyKDEsIG5hbWUubGVuZ3RoIC0gMik7CiAgICAgICAgbmFtZSA9IGN0eC5zdHlsaXplKG5hbWUsICduYW1lJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZSgvJy9nLCAiXFwnIikKICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXCIvZywgJyInKQogICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLyheInwiJCkvZywgIiciKTsKICAgICAgICBuYW1lID0gY3R4LnN0eWxpemUobmFtZSwgJ3N0cmluZycpOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG5hbWUgKyAnOiAnICsgc3RyOwogIH0KCgogIGZ1bmN0aW9uIHJlZHVjZVRvU2luZ2xlU3RyaW5nKG91dHB1dCwgYmFzZSwgYnJhY2VzKSB7CiAgICB2YXIgbGVuZ3RoID0gb3V0cHV0LnJlZHVjZShmdW5jdGlvbihwcmV2LCBjdXIpIHsKICAgICAgaWYgKGN1ci5pbmRleE9mKCdcbicpID49IDApIDsKICAgICAgcmV0dXJuIHByZXYgKyBjdXIucmVwbGFjZSgvXHUwMDFiXFtcZFxkP20vZywgJycpLmxlbmd0aCArIDE7CiAgICB9LCAwKTsKCiAgICBpZiAobGVuZ3RoID4gNjApIHsKICAgICAgcmV0dXJuIGJyYWNlc1swXSArCiAgICAgICAgICAgICAoYmFzZSA9PT0gJycgPyAnJyA6IGJhc2UgKyAnXG4gJykgKwogICAgICAgICAgICAgJyAnICsKICAgICAgICAgICAgIG91dHB1dC5qb2luKCcsXG4gICcpICsKICAgICAgICAgICAgICcgJyArCiAgICAgICAgICAgICBicmFjZXNbMV07CiAgICB9CgogICAgcmV0dXJuIGJyYWNlc1swXSArIGJhc2UgKyAnICcgKyBvdXRwdXQuam9pbignLCAnKSArICcgJyArIGJyYWNlc1sxXTsKICB9CgoKICAvLyBOT1RFOiBUaGVzZSB0eXBlIGNoZWNraW5nIGZ1bmN0aW9ucyBpbnRlbnRpb25hbGx5IGRvbid0IHVzZSBgaW5zdGFuY2VvZmAKICAvLyBiZWNhdXNlIGl0IGlzIGZyYWdpbGUgYW5kIGNhbiBiZSBlYXNpbHkgZmFrZWQgd2l0aCBgT2JqZWN0LmNyZWF0ZSgpYC4KICBleHBvcnRzLnR5cGVzID0gdHlwZXM7CgogIGZ1bmN0aW9uIGlzQXJyYXkoYXIpIHsKICAgIHJldHVybiBBcnJheS5pc0FycmF5KGFyKTsKICB9CiAgZXhwb3J0cy5pc0FycmF5ID0gaXNBcnJheTsKCiAgZnVuY3Rpb24gaXNCb29sZWFuKGFyZykgewogICAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdib29sZWFuJzsKICB9CiAgZXhwb3J0cy5pc0Jvb2xlYW4gPSBpc0Jvb2xlYW47CgogIGZ1bmN0aW9uIGlzTnVsbChhcmcpIHsKICAgIHJldHVybiBhcmcgPT09IG51bGw7CiAgfQogIGV4cG9ydHMuaXNOdWxsID0gaXNOdWxsOwoKICBmdW5jdGlvbiBpc051bGxPclVuZGVmaW5lZChhcmcpIHsKICAgIHJldHVybiBhcmcgPT0gbnVsbDsKICB9CiAgZXhwb3J0cy5pc051bGxPclVuZGVmaW5lZCA9IGlzTnVsbE9yVW5kZWZpbmVkOwoKICBmdW5jdGlvbiBpc051bWJlcihhcmcpIHsKICAgIHJldHVybiB0eXBlb2YgYXJnID09PSAnbnVtYmVyJzsKICB9CiAgZXhwb3J0cy5pc051bWJlciA9IGlzTnVtYmVyOwoKICBmdW5jdGlvbiBpc1N0cmluZyhhcmcpIHsKICAgIHJldHVybiB0eXBlb2YgYXJnID09PSAnc3RyaW5nJzsKICB9CiAgZXhwb3J0cy5pc1N0cmluZyA9IGlzU3RyaW5nOwoKICBmdW5jdGlvbiBpc1N5bWJvbChhcmcpIHsKICAgIHJldHVybiB0eXBlb2YgYXJnID09PSAnc3ltYm9sJzsKICB9CiAgZXhwb3J0cy5pc1N5bWJvbCA9IGlzU3ltYm9sOwoKICBmdW5jdGlvbiBpc1VuZGVmaW5lZChhcmcpIHsKICAgIHJldHVybiBhcmcgPT09IHZvaWQgMDsKICB9CiAgZXhwb3J0cy5pc1VuZGVmaW5lZCA9IGlzVW5kZWZpbmVkOwoKICBmdW5jdGlvbiBpc1JlZ0V4cChyZSkgewogICAgcmV0dXJuIGlzT2JqZWN0KHJlKSAmJiBvYmplY3RUb1N0cmluZyhyZSkgPT09ICdbb2JqZWN0IFJlZ0V4cF0nOwogIH0KICBleHBvcnRzLmlzUmVnRXhwID0gaXNSZWdFeHA7CiAgZXhwb3J0cy50eXBlcy5pc1JlZ0V4cCA9IGlzUmVnRXhwOwoKICBmdW5jdGlvbiBpc09iamVjdChhcmcpIHsKICAgIHJldHVybiB0eXBlb2YgYXJnID09PSAnb2JqZWN0JyAmJiBhcmcgIT09IG51bGw7CiAgfQogIGV4cG9ydHMuaXNPYmplY3QgPSBpc09iamVjdDsKCiAgZnVuY3Rpb24gaXNEYXRlKGQpIHsKICAgIHJldHVybiBpc09iamVjdChkKSAmJiBvYmplY3RUb1N0cmluZyhkKSA9PT0gJ1tvYmplY3QgRGF0ZV0nOwogIH0KICBleHBvcnRzLmlzRGF0ZSA9IGlzRGF0ZTsKICBleHBvcnRzLnR5cGVzLmlzRGF0ZSA9IGlzRGF0ZTsKCiAgZnVuY3Rpb24gaXNFcnJvcihlKSB7CiAgICByZXR1cm4gaXNPYmplY3QoZSkgJiYKICAgICAgICAob2JqZWN0VG9TdHJpbmcoZSkgPT09ICdbb2JqZWN0IEVycm9yXScgfHwgZSBpbnN0YW5jZW9mIEVycm9yKTsKICB9CiAgZXhwb3J0cy5pc0Vycm9yID0gaXNFcnJvcjsKICBleHBvcnRzLnR5cGVzLmlzTmF0aXZlRXJyb3IgPSBpc0Vycm9yOwoKICBmdW5jdGlvbiBpc0Z1bmN0aW9uKGFyZykgewogICAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdmdW5jdGlvbic7CiAgfQogIGV4cG9ydHMuaXNGdW5jdGlvbiA9IGlzRnVuY3Rpb247CgogIGZ1bmN0aW9uIGlzUHJpbWl0aXZlKGFyZykgewogICAgcmV0dXJuIGFyZyA9PT0gbnVsbCB8fAogICAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdib29sZWFuJyB8fAogICAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdudW1iZXInIHx8CiAgICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ3N0cmluZycgfHwKICAgICAgICAgICB0eXBlb2YgYXJnID09PSAnc3ltYm9sJyB8fCAgLy8gRVM2IHN5bWJvbAogICAgICAgICAgIHR5cGVvZiBhcmcgPT09ICd1bmRlZmluZWQnOwogIH0KICBleHBvcnRzLmlzUHJpbWl0aXZlID0gaXNQcmltaXRpdmU7CgogIGV4cG9ydHMuaXNCdWZmZXIgPSBpc0J1ZmZlcjsKCiAgZnVuY3Rpb24gb2JqZWN0VG9TdHJpbmcobykgewogICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKTsKICB9CgoKICBmdW5jdGlvbiBwYWQobikgewogICAgcmV0dXJuIG4gPCAxMCA/ICcwJyArIG4udG9TdHJpbmcoMTApIDogbi50b1N0cmluZygxMCk7CiAgfQoKCiAgdmFyIG1vbnRocyA9IFsnSmFuJywgJ0ZlYicsICdNYXInLCAnQXByJywgJ01heScsICdKdW4nLCAnSnVsJywgJ0F1ZycsICdTZXAnLAogICAgICAgICAgICAgICAgJ09jdCcsICdOb3YnLCAnRGVjJ107CgogIC8vIDI2IEZlYiAxNjoxOTozNAogIGZ1bmN0aW9uIHRpbWVzdGFtcCgpIHsKICAgIHZhciBkID0gbmV3IERhdGUoKTsKICAgIHZhciB0aW1lID0gW3BhZChkLmdldEhvdXJzKCkpLAogICAgICAgICAgICAgICAgcGFkKGQuZ2V0TWludXRlcygpKSwKICAgICAgICAgICAgICAgIHBhZChkLmdldFNlY29uZHMoKSldLmpvaW4oJzonKTsKICAgIHJldHVybiBbZC5nZXREYXRlKCksIG1vbnRoc1tkLmdldE1vbnRoKCldLCB0aW1lXS5qb2luKCcgJyk7CiAgfQoKCiAgLy8gbG9nIGlzIGp1c3QgYSB0aGluIHdyYXBwZXIgdG8gY29uc29sZS5sb2cgdGhhdCBwcmVwZW5kcyBhIHRpbWVzdGFtcAogIGV4cG9ydHMubG9nID0gZnVuY3Rpb24oKSB7CiAgICBjb25zb2xlLmxvZygnJXMgLSAlcycsIHRpbWVzdGFtcCgpLCBleHBvcnRzLmZvcm1hdC5hcHBseShleHBvcnRzLCBhcmd1bWVudHMpKTsKICB9OwoKCiAgLyoqCiAgICogSW5oZXJpdCB0aGUgcHJvdG90eXBlIG1ldGhvZHMgZnJvbSBvbmUgY29uc3RydWN0b3IgaW50byBhbm90aGVyLgogICAqCiAgICogVGhlIEZ1bmN0aW9uLnByb3RvdHlwZS5pbmhlcml0cyBmcm9tIGxhbmcuanMgcmV3cml0dGVuIGFzIGEgc3RhbmRhbG9uZQogICAqIGZ1bmN0aW9uIChub3Qgb24gRnVuY3Rpb24ucHJvdG90eXBlKS4gTk9URTogSWYgdGhpcyBmaWxlIGlzIHRvIGJlIGxvYWRlZAogICAqIGR1cmluZyBib290c3RyYXBwaW5nIHRoaXMgZnVuY3Rpb24gbmVlZHMgdG8gYmUgcmV3cml0dGVuIHVzaW5nIHNvbWUgbmF0aXZlCiAgICogZnVuY3Rpb25zIGFzIHByb3RvdHlwZSBzZXR1cCB1c2luZyBub3JtYWwgSmF2YVNjcmlwdCBkb2VzIG5vdCB3b3JrIGFzCiAgICogZXhwZWN0ZWQgZHVyaW5nIGJvb3RzdHJhcHBpbmcgKHNlZSBtaXJyb3IuanMgaW4gcjExNDkwMykuCiAgICoKICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjdG9yIENvbnN0cnVjdG9yIGZ1bmN0aW9uIHdoaWNoIG5lZWRzIHRvIGluaGVyaXQgdGhlCiAgICogICAgIHByb3RvdHlwZS4KICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBzdXBlckN0b3IgQ29uc3RydWN0b3IgZnVuY3Rpb24gdG8gaW5oZXJpdCBwcm90b3R5cGUgZnJvbS4KICAgKi8KICBleHBvcnRzLmluaGVyaXRzID0gaW5oZXJpdHMkZC5leHBvcnRzOwoKICBleHBvcnRzLl9leHRlbmQgPSBmdW5jdGlvbihvcmlnaW4sIGFkZCkgewogICAgLy8gRG9uJ3QgZG8gYW55dGhpbmcgaWYgYWRkIGlzbid0IGFuIG9iamVjdAogICAgaWYgKCFhZGQgfHwgIWlzT2JqZWN0KGFkZCkpIHJldHVybiBvcmlnaW47CgogICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhhZGQpOwogICAgdmFyIGkgPSBrZXlzLmxlbmd0aDsKICAgIHdoaWxlIChpLS0pIHsKICAgICAgb3JpZ2luW2tleXNbaV1dID0gYWRkW2tleXNbaV1dOwogICAgfQogICAgcmV0dXJuIG9yaWdpbjsKICB9OwoKICBmdW5jdGlvbiBoYXNPd25Qcm9wZXJ0eShvYmosIHByb3ApIHsKICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKTsKICB9CgogIHZhciBrQ3VzdG9tUHJvbWlzaWZpZWRTeW1ib2wgPSB0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyA/IFN5bWJvbCgndXRpbC5wcm9taXNpZnkuY3VzdG9tJykgOiB1bmRlZmluZWQ7CgogIGV4cG9ydHMucHJvbWlzaWZ5ID0gZnVuY3Rpb24gcHJvbWlzaWZ5KG9yaWdpbmFsKSB7CiAgICBpZiAodHlwZW9mIG9yaWdpbmFsICE9PSAnZnVuY3Rpb24nKQogICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgIm9yaWdpbmFsIiBhcmd1bWVudCBtdXN0IGJlIG9mIHR5cGUgRnVuY3Rpb24nKTsKCiAgICBpZiAoa0N1c3RvbVByb21pc2lmaWVkU3ltYm9sICYmIG9yaWdpbmFsW2tDdXN0b21Qcm9taXNpZmllZFN5bWJvbF0pIHsKICAgICAgdmFyIGZuID0gb3JpZ2luYWxba0N1c3RvbVByb21pc2lmaWVkU3ltYm9sXTsKICAgICAgaWYgKHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykgewogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSAidXRpbC5wcm9taXNpZnkuY3VzdG9tIiBhcmd1bWVudCBtdXN0IGJlIG9mIHR5cGUgRnVuY3Rpb24nKTsKICAgICAgfQogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZm4sIGtDdXN0b21Qcm9taXNpZmllZFN5bWJvbCwgewogICAgICAgIHZhbHVlOiBmbiwgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiBmYWxzZSwgY29uZmlndXJhYmxlOiB0cnVlCiAgICAgIH0pOwogICAgICByZXR1cm4gZm47CiAgICB9CgogICAgZnVuY3Rpb24gZm4oKSB7CiAgICAgIHZhciBwcm9taXNlUmVzb2x2ZSwgcHJvbWlzZVJlamVjdDsKICAgICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgcHJvbWlzZVJlc29sdmUgPSByZXNvbHZlOwogICAgICAgIHByb21pc2VSZWplY3QgPSByZWplY3Q7CiAgICAgIH0pOwoKICAgICAgdmFyIGFyZ3MgPSBbXTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgICAgICBhcmdzLnB1c2goYXJndW1lbnRzW2ldKTsKICAgICAgfQogICAgICBhcmdzLnB1c2goZnVuY3Rpb24gKGVyciwgdmFsdWUpIHsKICAgICAgICBpZiAoZXJyKSB7CiAgICAgICAgICBwcm9taXNlUmVqZWN0KGVycik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHByb21pc2VSZXNvbHZlKHZhbHVlKTsKICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgdHJ5IHsKICAgICAgICBvcmlnaW5hbC5hcHBseSh0aGlzLCBhcmdzKTsKICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgcHJvbWlzZVJlamVjdChlcnIpOwogICAgICB9CgogICAgICByZXR1cm4gcHJvbWlzZTsKICAgIH0KCiAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YoZm4sIE9iamVjdC5nZXRQcm90b3R5cGVPZihvcmlnaW5hbCkpOwoKICAgIGlmIChrQ3VzdG9tUHJvbWlzaWZpZWRTeW1ib2wpIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmbiwga0N1c3RvbVByb21pc2lmaWVkU3ltYm9sLCB7CiAgICAgIHZhbHVlOiBmbiwgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiBmYWxzZSwgY29uZmlndXJhYmxlOiB0cnVlCiAgICB9KTsKICAgIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydGllcygKICAgICAgZm4sCiAgICAgIGdldE93blByb3BlcnR5RGVzY3JpcHRvcnMob3JpZ2luYWwpCiAgICApOwogIH07CgogIGV4cG9ydHMucHJvbWlzaWZ5LmN1c3RvbSA9IGtDdXN0b21Qcm9taXNpZmllZFN5bWJvbDsKCiAgZnVuY3Rpb24gY2FsbGJhY2tpZnlPblJlamVjdGVkKHJlYXNvbiwgY2IpIHsKICAgIC8vIGAhcmVhc29uYCBndWFyZCBpbnNwaXJlZCBieSBibHVlYmlyZCAoUmVmOiBodHRwczovL2dvby5nbC90NUlTNk0pLgogICAgLy8gQmVjYXVzZSBgbnVsbGAgaXMgYSBzcGVjaWFsIGVycm9yIHZhbHVlIGluIGNhbGxiYWNrcyB3aGljaCBtZWFucyAibm8gZXJyb3IKICAgIC8vIG9jY3VycmVkIiwgd2UgZXJyb3Itd3JhcCBzbyB0aGUgY2FsbGJhY2sgY29uc3VtZXIgY2FuIGRpc3Rpbmd1aXNoIGJldHdlZW4KICAgIC8vICJ0aGUgcHJvbWlzZSByZWplY3RlZCB3aXRoIG51bGwiIG9yICJ0aGUgcHJvbWlzZSBmdWxmaWxsZWQgd2l0aCB1bmRlZmluZWQiLgogICAgaWYgKCFyZWFzb24pIHsKICAgICAgdmFyIG5ld1JlYXNvbiA9IG5ldyBFcnJvcignUHJvbWlzZSB3YXMgcmVqZWN0ZWQgd2l0aCBhIGZhbHN5IHZhbHVlJyk7CiAgICAgIG5ld1JlYXNvbi5yZWFzb24gPSByZWFzb247CiAgICAgIHJlYXNvbiA9IG5ld1JlYXNvbjsKICAgIH0KICAgIHJldHVybiBjYihyZWFzb24pOwogIH0KCiAgZnVuY3Rpb24gY2FsbGJhY2tpZnkob3JpZ2luYWwpIHsKICAgIGlmICh0eXBlb2Ygb3JpZ2luYWwgIT09ICdmdW5jdGlvbicpIHsKICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlICJvcmlnaW5hbCIgYXJndW1lbnQgbXVzdCBiZSBvZiB0eXBlIEZ1bmN0aW9uJyk7CiAgICB9CgogICAgLy8gV2UgRE8gTk9UIHJldHVybiB0aGUgcHJvbWlzZSBhcyBpdCBnaXZlcyB0aGUgdXNlciBhIGZhbHNlIHNlbnNlIHRoYXQKICAgIC8vIHRoZSBwcm9taXNlIGlzIGFjdHVhbGx5IHNvbWVob3cgcmVsYXRlZCB0byB0aGUgY2FsbGJhY2sncyBleGVjdXRpb24KICAgIC8vIGFuZCB0aGF0IHRoZSBjYWxsYmFjayB0aHJvd2luZyB3aWxsIHJlamVjdCB0aGUgcHJvbWlzZS4KICAgIGZ1bmN0aW9uIGNhbGxiYWNraWZpZWQoKSB7CiAgICAgIHZhciBhcmdzID0gW107CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgYXJncy5wdXNoKGFyZ3VtZW50c1tpXSk7CiAgICAgIH0KCiAgICAgIHZhciBtYXliZUNiID0gYXJncy5wb3AoKTsKICAgICAgaWYgKHR5cGVvZiBtYXliZUNiICE9PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIGxhc3QgYXJndW1lbnQgbXVzdCBiZSBvZiB0eXBlIEZ1bmN0aW9uJyk7CiAgICAgIH0KICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICB2YXIgY2IgPSBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gbWF5YmVDYi5hcHBseShzZWxmLCBhcmd1bWVudHMpOwogICAgICB9OwogICAgICAvLyBJbiB0cnVlIG5vZGUgc3R5bGUgd2UgcHJvY2VzcyB0aGUgY2FsbGJhY2sgb24gYG5leHRUaWNrYCB3aXRoIGFsbCB0aGUKICAgICAgLy8gaW1wbGljYXRpb25zIChzdGFjaywgYHVuY2F1Z2h0RXhjZXB0aW9uYCwgYGFzeW5jX2hvb2tzYCkKICAgICAgb3JpZ2luYWwuYXBwbHkodGhpcywgYXJncykKICAgICAgICAudGhlbihmdW5jdGlvbihyZXQpIHsgbmV4dFRpY2skMShjYi5iaW5kKG51bGwsIG51bGwsIHJldCkpOyB9LAogICAgICAgICAgICAgIGZ1bmN0aW9uKHJlaikgeyBuZXh0VGljayQxKGNhbGxiYWNraWZ5T25SZWplY3RlZC5iaW5kKG51bGwsIHJlaiwgY2IpKTsgfSk7CiAgICB9CgogICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKGNhbGxiYWNraWZpZWQsIE9iamVjdC5nZXRQcm90b3R5cGVPZihvcmlnaW5hbCkpOwogICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoY2FsbGJhY2tpZmllZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldE93blByb3BlcnR5RGVzY3JpcHRvcnMob3JpZ2luYWwpKTsKICAgIHJldHVybiBjYWxsYmFja2lmaWVkOwogIH0KICBleHBvcnRzLmNhbGxiYWNraWZ5ID0gY2FsbGJhY2tpZnk7CiAgfSh1dGlsKSk7CgogIGZ1bmN0aW9uIG93bktleXMkMShvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH0KCiAgZnVuY3Rpb24gX29iamVjdFNwcmVhZCQxKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMkMShPYmplY3Qoc291cmNlKSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSQyKHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMkMShPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCiAgZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5JDIob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfQoKICBmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCiAgZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0KCiAgZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH0KCiAgdmFyIF9yZXF1aXJlJDIgPSBidWZmZXIkMiwKICAgICAgQnVmZmVyJGUgPSBfcmVxdWlyZSQyLkJ1ZmZlcjsKCiAgdmFyIF9yZXF1aXJlMiA9IHV0aWwsCiAgICAgIGluc3BlY3QgPSBfcmVxdWlyZTIuaW5zcGVjdDsKCiAgdmFyIGN1c3RvbSA9IGluc3BlY3QgJiYgaW5zcGVjdC5jdXN0b20gfHwgJ2luc3BlY3QnOwoKICBmdW5jdGlvbiBjb3B5QnVmZmVyKHNyYywgdGFyZ2V0LCBvZmZzZXQpIHsKICAgIEJ1ZmZlciRlLnByb3RvdHlwZS5jb3B5LmNhbGwoc3JjLCB0YXJnZXQsIG9mZnNldCk7CiAgfQoKICB2YXIgYnVmZmVyX2xpc3QgPQogIC8qI19fUFVSRV9fKi8KICBmdW5jdGlvbiAoKSB7CiAgICBmdW5jdGlvbiBCdWZmZXJMaXN0KCkgewogICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQnVmZmVyTGlzdCk7CgogICAgICB0aGlzLmhlYWQgPSBudWxsOwogICAgICB0aGlzLnRhaWwgPSBudWxsOwogICAgICB0aGlzLmxlbmd0aCA9IDA7CiAgICB9CgogICAgX2NyZWF0ZUNsYXNzKEJ1ZmZlckxpc3QsIFt7CiAgICAgIGtleTogInB1c2giLAogICAgICB2YWx1ZTogZnVuY3Rpb24gcHVzaCh2KSB7CiAgICAgICAgdmFyIGVudHJ5ID0gewogICAgICAgICAgZGF0YTogdiwKICAgICAgICAgIG5leHQ6IG51bGwKICAgICAgICB9OwogICAgICAgIGlmICh0aGlzLmxlbmd0aCA+IDApIHRoaXMudGFpbC5uZXh0ID0gZW50cnk7ZWxzZSB0aGlzLmhlYWQgPSBlbnRyeTsKICAgICAgICB0aGlzLnRhaWwgPSBlbnRyeTsKICAgICAgICArK3RoaXMubGVuZ3RoOwogICAgICB9CiAgICB9LCB7CiAgICAgIGtleTogInVuc2hpZnQiLAogICAgICB2YWx1ZTogZnVuY3Rpb24gdW5zaGlmdCh2KSB7CiAgICAgICAgdmFyIGVudHJ5ID0gewogICAgICAgICAgZGF0YTogdiwKICAgICAgICAgIG5leHQ6IHRoaXMuaGVhZAogICAgICAgIH07CiAgICAgICAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSB0aGlzLnRhaWwgPSBlbnRyeTsKICAgICAgICB0aGlzLmhlYWQgPSBlbnRyeTsKICAgICAgICArK3RoaXMubGVuZ3RoOwogICAgICB9CiAgICB9LCB7CiAgICAgIGtleTogInNoaWZ0IiwKICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNoaWZ0KCkgewogICAgICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuOwogICAgICAgIHZhciByZXQgPSB0aGlzLmhlYWQuZGF0YTsKICAgICAgICBpZiAodGhpcy5sZW5ndGggPT09IDEpIHRoaXMuaGVhZCA9IHRoaXMudGFpbCA9IG51bGw7ZWxzZSB0aGlzLmhlYWQgPSB0aGlzLmhlYWQubmV4dDsKICAgICAgICAtLXRoaXMubGVuZ3RoOwogICAgICAgIHJldHVybiByZXQ7CiAgICAgIH0KICAgIH0sIHsKICAgICAga2V5OiAiY2xlYXIiLAogICAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYXIoKSB7CiAgICAgICAgdGhpcy5oZWFkID0gdGhpcy50YWlsID0gbnVsbDsKICAgICAgICB0aGlzLmxlbmd0aCA9IDA7CiAgICAgIH0KICAgIH0sIHsKICAgICAga2V5OiAiam9pbiIsCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBqb2luKHMpIHsKICAgICAgICBpZiAodGhpcy5sZW5ndGggPT09IDApIHJldHVybiAnJzsKICAgICAgICB2YXIgcCA9IHRoaXMuaGVhZDsKICAgICAgICB2YXIgcmV0ID0gJycgKyBwLmRhdGE7CgogICAgICAgIHdoaWxlIChwID0gcC5uZXh0KSB7CiAgICAgICAgICByZXQgKz0gcyArIHAuZGF0YTsKICAgICAgICB9CgogICAgICAgIHJldHVybiByZXQ7CiAgICAgIH0KICAgIH0sIHsKICAgICAga2V5OiAiY29uY2F0IiwKICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbmNhdChuKSB7CiAgICAgICAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSByZXR1cm4gQnVmZmVyJGUuYWxsb2MoMCk7CiAgICAgICAgdmFyIHJldCA9IEJ1ZmZlciRlLmFsbG9jVW5zYWZlKG4gPj4+IDApOwogICAgICAgIHZhciBwID0gdGhpcy5oZWFkOwogICAgICAgIHZhciBpID0gMDsKCiAgICAgICAgd2hpbGUgKHApIHsKICAgICAgICAgIGNvcHlCdWZmZXIocC5kYXRhLCByZXQsIGkpOwogICAgICAgICAgaSArPSBwLmRhdGEubGVuZ3RoOwogICAgICAgICAgcCA9IHAubmV4dDsKICAgICAgICB9CgogICAgICAgIHJldHVybiByZXQ7CiAgICAgIH0gLy8gQ29uc3VtZXMgYSBzcGVjaWZpZWQgYW1vdW50IG9mIGJ5dGVzIG9yIGNoYXJhY3RlcnMgZnJvbSB0aGUgYnVmZmVyZWQgZGF0YS4KCiAgICB9LCB7CiAgICAgIGtleTogImNvbnN1bWUiLAogICAgICB2YWx1ZTogZnVuY3Rpb24gY29uc3VtZShuLCBoYXNTdHJpbmdzKSB7CiAgICAgICAgdmFyIHJldDsKCiAgICAgICAgaWYgKG4gPCB0aGlzLmhlYWQuZGF0YS5sZW5ndGgpIHsKICAgICAgICAgIC8vIGBzbGljZWAgaXMgdGhlIHNhbWUgZm9yIGJ1ZmZlcnMgYW5kIHN0cmluZ3MuCiAgICAgICAgICByZXQgPSB0aGlzLmhlYWQuZGF0YS5zbGljZSgwLCBuKTsKICAgICAgICAgIHRoaXMuaGVhZC5kYXRhID0gdGhpcy5oZWFkLmRhdGEuc2xpY2Uobik7CiAgICAgICAgfSBlbHNlIGlmIChuID09PSB0aGlzLmhlYWQuZGF0YS5sZW5ndGgpIHsKICAgICAgICAgIC8vIEZpcnN0IGNodW5rIGlzIGEgcGVyZmVjdCBtYXRjaC4KICAgICAgICAgIHJldCA9IHRoaXMuc2hpZnQoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8gUmVzdWx0IHNwYW5zIG1vcmUgdGhhbiBvbmUgYnVmZmVyLgogICAgICAgICAgcmV0ID0gaGFzU3RyaW5ncyA/IHRoaXMuX2dldFN0cmluZyhuKSA6IHRoaXMuX2dldEJ1ZmZlcihuKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiByZXQ7CiAgICAgIH0KICAgIH0sIHsKICAgICAga2V5OiAiZmlyc3QiLAogICAgICB2YWx1ZTogZnVuY3Rpb24gZmlyc3QoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuaGVhZC5kYXRhOwogICAgICB9IC8vIENvbnN1bWVzIGEgc3BlY2lmaWVkIGFtb3VudCBvZiBjaGFyYWN0ZXJzIGZyb20gdGhlIGJ1ZmZlcmVkIGRhdGEuCgogICAgfSwgewogICAgICBrZXk6ICJfZ2V0U3RyaW5nIiwKICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRTdHJpbmcobikgewogICAgICAgIHZhciBwID0gdGhpcy5oZWFkOwogICAgICAgIHZhciBjID0gMTsKICAgICAgICB2YXIgcmV0ID0gcC5kYXRhOwogICAgICAgIG4gLT0gcmV0Lmxlbmd0aDsKCiAgICAgICAgd2hpbGUgKHAgPSBwLm5leHQpIHsKICAgICAgICAgIHZhciBzdHIgPSBwLmRhdGE7CiAgICAgICAgICB2YXIgbmIgPSBuID4gc3RyLmxlbmd0aCA/IHN0ci5sZW5ndGggOiBuOwogICAgICAgICAgaWYgKG5iID09PSBzdHIubGVuZ3RoKSByZXQgKz0gc3RyO2Vsc2UgcmV0ICs9IHN0ci5zbGljZSgwLCBuKTsKICAgICAgICAgIG4gLT0gbmI7CgogICAgICAgICAgaWYgKG4gPT09IDApIHsKICAgICAgICAgICAgaWYgKG5iID09PSBzdHIubGVuZ3RoKSB7CiAgICAgICAgICAgICAgKytjOwogICAgICAgICAgICAgIGlmIChwLm5leHQpIHRoaXMuaGVhZCA9IHAubmV4dDtlbHNlIHRoaXMuaGVhZCA9IHRoaXMudGFpbCA9IG51bGw7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGhpcy5oZWFkID0gcDsKICAgICAgICAgICAgICBwLmRhdGEgPSBzdHIuc2xpY2UobmIpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICArK2M7CiAgICAgICAgfQoKICAgICAgICB0aGlzLmxlbmd0aCAtPSBjOwogICAgICAgIHJldHVybiByZXQ7CiAgICAgIH0gLy8gQ29uc3VtZXMgYSBzcGVjaWZpZWQgYW1vdW50IG9mIGJ5dGVzIGZyb20gdGhlIGJ1ZmZlcmVkIGRhdGEuCgogICAgfSwgewogICAgICBrZXk6ICJfZ2V0QnVmZmVyIiwKICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRCdWZmZXIobikgewogICAgICAgIHZhciByZXQgPSBCdWZmZXIkZS5hbGxvY1Vuc2FmZShuKTsKICAgICAgICB2YXIgcCA9IHRoaXMuaGVhZDsKICAgICAgICB2YXIgYyA9IDE7CiAgICAgICAgcC5kYXRhLmNvcHkocmV0KTsKICAgICAgICBuIC09IHAuZGF0YS5sZW5ndGg7CgogICAgICAgIHdoaWxlIChwID0gcC5uZXh0KSB7CiAgICAgICAgICB2YXIgYnVmID0gcC5kYXRhOwogICAgICAgICAgdmFyIG5iID0gbiA+IGJ1Zi5sZW5ndGggPyBidWYubGVuZ3RoIDogbjsKICAgICAgICAgIGJ1Zi5jb3B5KHJldCwgcmV0Lmxlbmd0aCAtIG4sIDAsIG5iKTsKICAgICAgICAgIG4gLT0gbmI7CgogICAgICAgICAgaWYgKG4gPT09IDApIHsKICAgICAgICAgICAgaWYgKG5iID09PSBidWYubGVuZ3RoKSB7CiAgICAgICAgICAgICAgKytjOwogICAgICAgICAgICAgIGlmIChwLm5leHQpIHRoaXMuaGVhZCA9IHAubmV4dDtlbHNlIHRoaXMuaGVhZCA9IHRoaXMudGFpbCA9IG51bGw7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGhpcy5oZWFkID0gcDsKICAgICAgICAgICAgICBwLmRhdGEgPSBidWYuc2xpY2UobmIpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICArK2M7CiAgICAgICAgfQoKICAgICAgICB0aGlzLmxlbmd0aCAtPSBjOwogICAgICAgIHJldHVybiByZXQ7CiAgICAgIH0gLy8gTWFrZSBzdXJlIHRoZSBsaW5rZWQgbGlzdCBvbmx5IHNob3dzIHRoZSBtaW5pbWFsIG5lY2Vzc2FyeSBpbmZvcm1hdGlvbi4KCiAgICB9LCB7CiAgICAgIGtleTogY3VzdG9tLAogICAgICB2YWx1ZTogZnVuY3Rpb24gdmFsdWUoXywgb3B0aW9ucykgewogICAgICAgIHJldHVybiBpbnNwZWN0KHRoaXMsIF9vYmplY3RTcHJlYWQkMSh7fSwgb3B0aW9ucywgewogICAgICAgICAgLy8gT25seSBpbnNwZWN0IG9uZSBsZXZlbC4KICAgICAgICAgIGRlcHRoOiAwLAogICAgICAgICAgLy8gSXQgc2hvdWxkIG5vdCByZWN1cnNlLgogICAgICAgICAgY3VzdG9tSW5zcGVjdDogZmFsc2UKICAgICAgICB9KSk7CiAgICAgIH0KICAgIH1dKTsKCiAgICByZXR1cm4gQnVmZmVyTGlzdDsKICB9KCk7CgogIGZ1bmN0aW9uIGRlc3Ryb3koZXJyLCBjYikgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB2YXIgcmVhZGFibGVEZXN0cm95ZWQgPSB0aGlzLl9yZWFkYWJsZVN0YXRlICYmIHRoaXMuX3JlYWRhYmxlU3RhdGUuZGVzdHJveWVkOwogICAgdmFyIHdyaXRhYmxlRGVzdHJveWVkID0gdGhpcy5fd3JpdGFibGVTdGF0ZSAmJiB0aGlzLl93cml0YWJsZVN0YXRlLmRlc3Ryb3llZDsKCiAgICBpZiAocmVhZGFibGVEZXN0cm95ZWQgfHwgd3JpdGFibGVEZXN0cm95ZWQpIHsKICAgICAgaWYgKGNiKSB7CiAgICAgICAgY2IoZXJyKTsKICAgICAgfSBlbHNlIGlmIChlcnIpIHsKICAgICAgICBpZiAoIXRoaXMuX3dyaXRhYmxlU3RhdGUpIHsKICAgICAgICAgIG5leHRUaWNrJDEoZW1pdEVycm9yTlQsIHRoaXMsIGVycik7CiAgICAgICAgfSBlbHNlIGlmICghdGhpcy5fd3JpdGFibGVTdGF0ZS5lcnJvckVtaXR0ZWQpIHsKICAgICAgICAgIHRoaXMuX3dyaXRhYmxlU3RhdGUuZXJyb3JFbWl0dGVkID0gdHJ1ZTsKICAgICAgICAgIG5leHRUaWNrJDEoZW1pdEVycm9yTlQsIHRoaXMsIGVycik7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gdGhpczsKICAgIH0gLy8gd2Ugc2V0IGRlc3Ryb3llZCB0byB0cnVlIGJlZm9yZSBmaXJpbmcgZXJyb3IgY2FsbGJhY2tzIGluIG9yZGVyCiAgICAvLyB0byBtYWtlIGl0IHJlLWVudHJhbmNlIHNhZmUgaW4gY2FzZSBkZXN0cm95KCkgaXMgY2FsbGVkIHdpdGhpbiBjYWxsYmFja3MKCgogICAgaWYgKHRoaXMuX3JlYWRhYmxlU3RhdGUpIHsKICAgICAgdGhpcy5fcmVhZGFibGVTdGF0ZS5kZXN0cm95ZWQgPSB0cnVlOwogICAgfSAvLyBpZiB0aGlzIGlzIGEgZHVwbGV4IHN0cmVhbSBtYXJrIHRoZSB3cml0YWJsZSBwYXJ0IGFzIGRlc3Ryb3llZCBhcyB3ZWxsCgoKICAgIGlmICh0aGlzLl93cml0YWJsZVN0YXRlKSB7CiAgICAgIHRoaXMuX3dyaXRhYmxlU3RhdGUuZGVzdHJveWVkID0gdHJ1ZTsKICAgIH0KCiAgICB0aGlzLl9kZXN0cm95KGVyciB8fCBudWxsLCBmdW5jdGlvbiAoZXJyKSB7CiAgICAgIGlmICghY2IgJiYgZXJyKSB7CiAgICAgICAgaWYgKCFfdGhpcy5fd3JpdGFibGVTdGF0ZSkgewogICAgICAgICAgbmV4dFRpY2skMShlbWl0RXJyb3JBbmRDbG9zZU5ULCBfdGhpcywgZXJyKTsKICAgICAgICB9IGVsc2UgaWYgKCFfdGhpcy5fd3JpdGFibGVTdGF0ZS5lcnJvckVtaXR0ZWQpIHsKICAgICAgICAgIF90aGlzLl93cml0YWJsZVN0YXRlLmVycm9yRW1pdHRlZCA9IHRydWU7CiAgICAgICAgICBuZXh0VGljayQxKGVtaXRFcnJvckFuZENsb3NlTlQsIF90aGlzLCBlcnIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBuZXh0VGljayQxKGVtaXRDbG9zZU5ULCBfdGhpcyk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKGNiKSB7CiAgICAgICAgbmV4dFRpY2skMShlbWl0Q2xvc2VOVCwgX3RoaXMpOwogICAgICAgIGNiKGVycik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbmV4dFRpY2skMShlbWl0Q2xvc2VOVCwgX3RoaXMpOwogICAgICB9CiAgICB9KTsKCiAgICByZXR1cm4gdGhpczsKICB9CgogIGZ1bmN0aW9uIGVtaXRFcnJvckFuZENsb3NlTlQoc2VsZiwgZXJyKSB7CiAgICBlbWl0RXJyb3JOVChzZWxmLCBlcnIpOwogICAgZW1pdENsb3NlTlQoc2VsZik7CiAgfQoKICBmdW5jdGlvbiBlbWl0Q2xvc2VOVChzZWxmKSB7CiAgICBpZiAoc2VsZi5fd3JpdGFibGVTdGF0ZSAmJiAhc2VsZi5fd3JpdGFibGVTdGF0ZS5lbWl0Q2xvc2UpIHJldHVybjsKICAgIGlmIChzZWxmLl9yZWFkYWJsZVN0YXRlICYmICFzZWxmLl9yZWFkYWJsZVN0YXRlLmVtaXRDbG9zZSkgcmV0dXJuOwogICAgc2VsZi5lbWl0KCdjbG9zZScpOwogIH0KCiAgZnVuY3Rpb24gdW5kZXN0cm95KCkgewogICAgaWYgKHRoaXMuX3JlYWRhYmxlU3RhdGUpIHsKICAgICAgdGhpcy5fcmVhZGFibGVTdGF0ZS5kZXN0cm95ZWQgPSBmYWxzZTsKICAgICAgdGhpcy5fcmVhZGFibGVTdGF0ZS5yZWFkaW5nID0gZmFsc2U7CiAgICAgIHRoaXMuX3JlYWRhYmxlU3RhdGUuZW5kZWQgPSBmYWxzZTsKICAgICAgdGhpcy5fcmVhZGFibGVTdGF0ZS5lbmRFbWl0dGVkID0gZmFsc2U7CiAgICB9CgogICAgaWYgKHRoaXMuX3dyaXRhYmxlU3RhdGUpIHsKICAgICAgdGhpcy5fd3JpdGFibGVTdGF0ZS5kZXN0cm95ZWQgPSBmYWxzZTsKICAgICAgdGhpcy5fd3JpdGFibGVTdGF0ZS5lbmRlZCA9IGZhbHNlOwogICAgICB0aGlzLl93cml0YWJsZVN0YXRlLmVuZGluZyA9IGZhbHNlOwogICAgICB0aGlzLl93cml0YWJsZVN0YXRlLmZpbmFsQ2FsbGVkID0gZmFsc2U7CiAgICAgIHRoaXMuX3dyaXRhYmxlU3RhdGUucHJlZmluaXNoZWQgPSBmYWxzZTsKICAgICAgdGhpcy5fd3JpdGFibGVTdGF0ZS5maW5pc2hlZCA9IGZhbHNlOwogICAgICB0aGlzLl93cml0YWJsZVN0YXRlLmVycm9yRW1pdHRlZCA9IGZhbHNlOwogICAgfQogIH0KCiAgZnVuY3Rpb24gZW1pdEVycm9yTlQoc2VsZiwgZXJyKSB7CiAgICBzZWxmLmVtaXQoJ2Vycm9yJywgZXJyKTsKICB9CgogIGZ1bmN0aW9uIGVycm9yT3JEZXN0cm95JDIoc3RyZWFtLCBlcnIpIHsKICAgIC8vIFdlIGhhdmUgdGVzdHMgdGhhdCByZWx5IG9uIGVycm9ycyBiZWluZyBlbWl0dGVkCiAgICAvLyBpbiB0aGUgc2FtZSB0aWNrLCBzbyBjaGFuZ2luZyB0aGlzIGlzIHNlbXZlciBtYWpvci4KICAgIC8vIEZvciBub3cgd2hlbiB5b3Ugb3B0LWluIHRvIGF1dG9EZXN0cm95IHdlIGFsbG93CiAgICAvLyB0aGUgZXJyb3IgdG8gYmUgZW1pdHRlZCBuZXh0VGljay4gSW4gYSBmdXR1cmUKICAgIC8vIHNlbXZlciBtYWpvciB1cGRhdGUgd2Ugc2hvdWxkIGNoYW5nZSB0aGUgZGVmYXVsdCB0byB0aGlzLgogICAgdmFyIHJTdGF0ZSA9IHN0cmVhbS5fcmVhZGFibGVTdGF0ZTsKICAgIHZhciB3U3RhdGUgPSBzdHJlYW0uX3dyaXRhYmxlU3RhdGU7CiAgICBpZiAoclN0YXRlICYmIHJTdGF0ZS5hdXRvRGVzdHJveSB8fCB3U3RhdGUgJiYgd1N0YXRlLmF1dG9EZXN0cm95KSBzdHJlYW0uZGVzdHJveShlcnIpO2Vsc2Ugc3RyZWFtLmVtaXQoJ2Vycm9yJywgZXJyKTsKICB9CgogIHZhciBkZXN0cm95XzEgPSB7CiAgICBkZXN0cm95OiBkZXN0cm95LAogICAgdW5kZXN0cm95OiB1bmRlc3Ryb3ksCiAgICBlcnJvck9yRGVzdHJveTogZXJyb3JPckRlc3Ryb3kkMgogIH07CgogIHZhciBlcnJvcnMgPSB7fTsKCiAgY29uc3QgY29kZXMgPSB7fTsKCiAgZnVuY3Rpb24gY3JlYXRlRXJyb3JUeXBlKGNvZGUsIG1lc3NhZ2UsIEJhc2UpIHsKICAgIGlmICghQmFzZSkgewogICAgICBCYXNlID0gRXJyb3I7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0TWVzc2FnZSAoYXJnMSwgYXJnMiwgYXJnMykgewogICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgcmV0dXJuIG1lc3NhZ2UKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gbWVzc2FnZShhcmcxLCBhcmcyLCBhcmczKQogICAgICB9CiAgICB9CgogICAgY2xhc3MgTm9kZUVycm9yIGV4dGVuZHMgQmFzZSB7CiAgICAgIGNvbnN0cnVjdG9yIChhcmcxLCBhcmcyLCBhcmczKSB7CiAgICAgICAgc3VwZXIoZ2V0TWVzc2FnZShhcmcxLCBhcmcyLCBhcmczKSk7CiAgICAgIH0KICAgIH0KCiAgICBOb2RlRXJyb3IucHJvdG90eXBlLm5hbWUgPSBCYXNlLm5hbWU7CiAgICBOb2RlRXJyb3IucHJvdG90eXBlLmNvZGUgPSBjb2RlOwoKICAgIGNvZGVzW2NvZGVdID0gTm9kZUVycm9yOwogIH0KCiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL25vZGVqcy9ub2RlL2Jsb2IvdjEwLjguMC9saWIvaW50ZXJuYWwvZXJyb3JzLmpzCiAgZnVuY3Rpb24gb25lT2YoZXhwZWN0ZWQsIHRoaW5nKSB7CiAgICBpZiAoQXJyYXkuaXNBcnJheShleHBlY3RlZCkpIHsKICAgICAgY29uc3QgbGVuID0gZXhwZWN0ZWQubGVuZ3RoOwogICAgICBleHBlY3RlZCA9IGV4cGVjdGVkLm1hcCgoaSkgPT4gU3RyaW5nKGkpKTsKICAgICAgaWYgKGxlbiA+IDIpIHsKICAgICAgICByZXR1cm4gYG9uZSBvZiAke3RoaW5nfSAke2V4cGVjdGVkLnNsaWNlKDAsIGxlbiAtIDEpLmpvaW4oJywgJyl9LCBvciBgICsKICAgICAgICAgICAgICAgZXhwZWN0ZWRbbGVuIC0gMV07CiAgICAgIH0gZWxzZSBpZiAobGVuID09PSAyKSB7CiAgICAgICAgcmV0dXJuIGBvbmUgb2YgJHt0aGluZ30gJHtleHBlY3RlZFswXX0gb3IgJHtleHBlY3RlZFsxXX1gOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBgb2YgJHt0aGluZ30gJHtleHBlY3RlZFswXX1gOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gYG9mICR7dGhpbmd9ICR7U3RyaW5nKGV4cGVjdGVkKX1gOwogICAgfQogIH0KCiAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvU3RyaW5nL3N0YXJ0c1dpdGgKICBmdW5jdGlvbiBzdGFydHNXaXRoKHN0ciwgc2VhcmNoLCBwb3MpIHsKICAJcmV0dXJuIHN0ci5zdWJzdHIoIXBvcyB8fCBwb3MgPCAwID8gMCA6ICtwb3MsIHNlYXJjaC5sZW5ndGgpID09PSBzZWFyY2g7CiAgfQoKICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9TdHJpbmcvZW5kc1dpdGgKICBmdW5jdGlvbiBlbmRzV2l0aChzdHIsIHNlYXJjaCwgdGhpc19sZW4pIHsKICAJaWYgKHRoaXNfbGVuID09PSB1bmRlZmluZWQgfHwgdGhpc19sZW4gPiBzdHIubGVuZ3RoKSB7CiAgCQl0aGlzX2xlbiA9IHN0ci5sZW5ndGg7CiAgCX0KICAJcmV0dXJuIHN0ci5zdWJzdHJpbmcodGhpc19sZW4gLSBzZWFyY2gubGVuZ3RoLCB0aGlzX2xlbikgPT09IHNlYXJjaDsKICB9CgogIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL1N0cmluZy9pbmNsdWRlcwogIGZ1bmN0aW9uIGluY2x1ZGVzKHN0ciwgc2VhcmNoLCBzdGFydCkgewogICAgaWYgKHR5cGVvZiBzdGFydCAhPT0gJ251bWJlcicpIHsKICAgICAgc3RhcnQgPSAwOwogICAgfQoKICAgIGlmIChzdGFydCArIHNlYXJjaC5sZW5ndGggPiBzdHIubGVuZ3RoKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBzdHIuaW5kZXhPZihzZWFyY2gsIHN0YXJ0KSAhPT0gLTE7CiAgICB9CiAgfQoKICBjcmVhdGVFcnJvclR5cGUoJ0VSUl9JTlZBTElEX09QVF9WQUxVRScsIGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkgewogICAgcmV0dXJuICdUaGUgdmFsdWUgIicgKyB2YWx1ZSArICciIGlzIGludmFsaWQgZm9yIG9wdGlvbiAiJyArIG5hbWUgKyAnIicKICB9LCBUeXBlRXJyb3IpOwogIGNyZWF0ZUVycm9yVHlwZSgnRVJSX0lOVkFMSURfQVJHX1RZUEUnLCBmdW5jdGlvbiAobmFtZSwgZXhwZWN0ZWQsIGFjdHVhbCkgewogICAgLy8gZGV0ZXJtaW5lcjogJ211c3QgYmUnIG9yICdtdXN0IG5vdCBiZScKICAgIGxldCBkZXRlcm1pbmVyOwogICAgaWYgKHR5cGVvZiBleHBlY3RlZCA9PT0gJ3N0cmluZycgJiYgc3RhcnRzV2l0aChleHBlY3RlZCwgJ25vdCAnKSkgewogICAgICBkZXRlcm1pbmVyID0gJ211c3Qgbm90IGJlJzsKICAgICAgZXhwZWN0ZWQgPSBleHBlY3RlZC5yZXBsYWNlKC9ebm90IC8sICcnKTsKICAgIH0gZWxzZSB7CiAgICAgIGRldGVybWluZXIgPSAnbXVzdCBiZSc7CiAgICB9CgogICAgbGV0IG1zZzsKICAgIGlmIChlbmRzV2l0aChuYW1lLCAnIGFyZ3VtZW50JykpIHsKICAgICAgLy8gRm9yIGNhc2VzIGxpa2UgJ2ZpcnN0IGFyZ3VtZW50JwogICAgICBtc2cgPSBgVGhlICR7bmFtZX0gJHtkZXRlcm1pbmVyfSAke29uZU9mKGV4cGVjdGVkLCAndHlwZScpfWA7CiAgICB9IGVsc2UgewogICAgICBjb25zdCB0eXBlID0gaW5jbHVkZXMobmFtZSwgJy4nKSA/ICdwcm9wZXJ0eScgOiAnYXJndW1lbnQnOwogICAgICBtc2cgPSBgVGhlICIke25hbWV9IiAke3R5cGV9ICR7ZGV0ZXJtaW5lcn0gJHtvbmVPZihleHBlY3RlZCwgJ3R5cGUnKX1gOwogICAgfQoKICAgIG1zZyArPSBgLiBSZWNlaXZlZCB0eXBlICR7dHlwZW9mIGFjdHVhbH1gOwogICAgcmV0dXJuIG1zZzsKICB9LCBUeXBlRXJyb3IpOwogIGNyZWF0ZUVycm9yVHlwZSgnRVJSX1NUUkVBTV9QVVNIX0FGVEVSX0VPRicsICdzdHJlYW0ucHVzaCgpIGFmdGVyIEVPRicpOwogIGNyZWF0ZUVycm9yVHlwZSgnRVJSX01FVEhPRF9OT1RfSU1QTEVNRU5URUQnLCBmdW5jdGlvbiAobmFtZSkgewogICAgcmV0dXJuICdUaGUgJyArIG5hbWUgKyAnIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQnCiAgfSk7CiAgY3JlYXRlRXJyb3JUeXBlKCdFUlJfU1RSRUFNX1BSRU1BVFVSRV9DTE9TRScsICdQcmVtYXR1cmUgY2xvc2UnKTsKICBjcmVhdGVFcnJvclR5cGUoJ0VSUl9TVFJFQU1fREVTVFJPWUVEJywgZnVuY3Rpb24gKG5hbWUpIHsKICAgIHJldHVybiAnQ2Fubm90IGNhbGwgJyArIG5hbWUgKyAnIGFmdGVyIGEgc3RyZWFtIHdhcyBkZXN0cm95ZWQnOwogIH0pOwogIGNyZWF0ZUVycm9yVHlwZSgnRVJSX01VTFRJUExFX0NBTExCQUNLJywgJ0NhbGxiYWNrIGNhbGxlZCBtdWx0aXBsZSB0aW1lcycpOwogIGNyZWF0ZUVycm9yVHlwZSgnRVJSX1NUUkVBTV9DQU5OT1RfUElQRScsICdDYW5ub3QgcGlwZSwgbm90IHJlYWRhYmxlJyk7CiAgY3JlYXRlRXJyb3JUeXBlKCdFUlJfU1RSRUFNX1dSSVRFX0FGVEVSX0VORCcsICd3cml0ZSBhZnRlciBlbmQnKTsKICBjcmVhdGVFcnJvclR5cGUoJ0VSUl9TVFJFQU1fTlVMTF9WQUxVRVMnLCAnTWF5IG5vdCB3cml0ZSBudWxsIHZhbHVlcyB0byBzdHJlYW0nLCBUeXBlRXJyb3IpOwogIGNyZWF0ZUVycm9yVHlwZSgnRVJSX1VOS05PV05fRU5DT0RJTkcnLCBmdW5jdGlvbiAoYXJnKSB7CiAgICByZXR1cm4gJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBhcmcKICB9LCBUeXBlRXJyb3IpOwogIGNyZWF0ZUVycm9yVHlwZSgnRVJSX1NUUkVBTV9VTlNISUZUX0FGVEVSX0VORF9FVkVOVCcsICdzdHJlYW0udW5zaGlmdCgpIGFmdGVyIGVuZCBldmVudCcpOwoKICBlcnJvcnMuY29kZXMgPSBjb2RlczsKCiAgdmFyIEVSUl9JTlZBTElEX09QVF9WQUxVRSA9IGVycm9ycy5jb2Rlcy5FUlJfSU5WQUxJRF9PUFRfVkFMVUU7CgogIGZ1bmN0aW9uIGhpZ2hXYXRlck1hcmtGcm9tKG9wdGlvbnMsIGlzRHVwbGV4LCBkdXBsZXhLZXkpIHsKICAgIHJldHVybiBvcHRpb25zLmhpZ2hXYXRlck1hcmsgIT0gbnVsbCA/IG9wdGlvbnMuaGlnaFdhdGVyTWFyayA6IGlzRHVwbGV4ID8gb3B0aW9uc1tkdXBsZXhLZXldIDogbnVsbDsKICB9CgogIGZ1bmN0aW9uIGdldEhpZ2hXYXRlck1hcmskMihzdGF0ZSwgb3B0aW9ucywgZHVwbGV4S2V5LCBpc0R1cGxleCkgewogICAgdmFyIGh3bSA9IGhpZ2hXYXRlck1hcmtGcm9tKG9wdGlvbnMsIGlzRHVwbGV4LCBkdXBsZXhLZXkpOwoKICAgIGlmIChod20gIT0gbnVsbCkgewogICAgICBpZiAoIShpc0Zpbml0ZShod20pICYmIE1hdGguZmxvb3IoaHdtKSA9PT0gaHdtKSB8fCBod20gPCAwKSB7CiAgICAgICAgdmFyIG5hbWUgPSBpc0R1cGxleCA/IGR1cGxleEtleSA6ICdoaWdoV2F0ZXJNYXJrJzsKICAgICAgICB0aHJvdyBuZXcgRVJSX0lOVkFMSURfT1BUX1ZBTFVFKG5hbWUsIGh3bSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBNYXRoLmZsb29yKGh3bSk7CiAgICB9IC8vIERlZmF1bHQgdmFsdWUKCgogICAgcmV0dXJuIHN0YXRlLm9iamVjdE1vZGUgPyAxNiA6IDE2ICogMTAyNDsKICB9CgogIHZhciBzdGF0ZSA9IHsKICAgIGdldEhpZ2hXYXRlck1hcms6IGdldEhpZ2hXYXRlck1hcmskMgogIH07CgogIC8qKgogICAqIEZvciBOb2RlLmpzLCBzaW1wbHkgcmUtZXhwb3J0IHRoZSBjb3JlIGB1dGlsLmRlcHJlY2F0ZWAgZnVuY3Rpb24uCiAgICovCgogIHZhciBub2RlID0gdXRpbC5kZXByZWNhdGU7CgogIHZhciBfc3RyZWFtX3dyaXRhYmxlID0gV3JpdGFibGUkMTsKICAvLyB0aGVyZSB3aWxsIGJlIG9ubHkgMiBvZiB0aGVzZSBmb3IgZWFjaCBzdHJlYW0KCgogIGZ1bmN0aW9uIENvcmtlZFJlcXVlc3Qoc3RhdGUpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgdGhpcy5uZXh0ID0gbnVsbDsKICAgIHRoaXMuZW50cnkgPSBudWxsOwoKICAgIHRoaXMuZmluaXNoID0gZnVuY3Rpb24gKCkgewogICAgICBvbkNvcmtlZEZpbmlzaChfdGhpcywgc3RhdGUpOwogICAgfTsKICB9CiAgLyogPC9yZXBsYWNlbWVudD4gKi8KCiAgLyo8cmVwbGFjZW1lbnQ+Ki8KCgogIHZhciBEdXBsZXgkMzsKICAvKjwvcmVwbGFjZW1lbnQ+Ki8KCiAgV3JpdGFibGUkMS5Xcml0YWJsZVN0YXRlID0gV3JpdGFibGVTdGF0ZTsKICAvKjxyZXBsYWNlbWVudD4qLwoKICB2YXIgaW50ZXJuYWxVdGlsID0gewogICAgZGVwcmVjYXRlOiBub2RlCiAgfTsKICAvKjwvcmVwbGFjZW1lbnQ+Ki8KCiAgLyo8cmVwbGFjZW1lbnQ+Ki8KCiAgdmFyIFN0cmVhbSQyID0gc3RyZWFtJDE7CiAgLyo8L3JlcGxhY2VtZW50PiovCgoKICB2YXIgQnVmZmVyJGQgPSBidWZmZXIkMi5CdWZmZXI7CgogIHZhciBPdXJVaW50OEFycmF5JDEgPSBjb21tb25qc0dsb2JhbC5VaW50OEFycmF5IHx8IGZ1bmN0aW9uICgpIHt9OwoKICBmdW5jdGlvbiBfdWludDhBcnJheVRvQnVmZmVyJDEoY2h1bmspIHsKICAgIHJldHVybiBCdWZmZXIkZC5mcm9tKGNodW5rKTsKICB9CgogIGZ1bmN0aW9uIF9pc1VpbnQ4QXJyYXkkMShvYmopIHsKICAgIHJldHVybiBCdWZmZXIkZC5pc0J1ZmZlcihvYmopIHx8IG9iaiBpbnN0YW5jZW9mIE91clVpbnQ4QXJyYXkkMTsKICB9CgogIHZhciBkZXN0cm95SW1wbCQxID0gZGVzdHJveV8xOwoKICB2YXIgX3JlcXVpcmUkMSA9IHN0YXRlLAogICAgICBnZXRIaWdoV2F0ZXJNYXJrJDEgPSBfcmVxdWlyZSQxLmdldEhpZ2hXYXRlck1hcms7CgogIHZhciBfcmVxdWlyZSRjb2RlcyQzID0gZXJyb3JzLmNvZGVzLAogICAgICBFUlJfSU5WQUxJRF9BUkdfVFlQRSQyID0gX3JlcXVpcmUkY29kZXMkMy5FUlJfSU5WQUxJRF9BUkdfVFlQRSwKICAgICAgRVJSX01FVEhPRF9OT1RfSU1QTEVNRU5URUQkMiA9IF9yZXF1aXJlJGNvZGVzJDMuRVJSX01FVEhPRF9OT1RfSU1QTEVNRU5URUQsCiAgICAgIEVSUl9NVUxUSVBMRV9DQUxMQkFDSyQxID0gX3JlcXVpcmUkY29kZXMkMy5FUlJfTVVMVElQTEVfQ0FMTEJBQ0ssCiAgICAgIEVSUl9TVFJFQU1fQ0FOTk9UX1BJUEUgPSBfcmVxdWlyZSRjb2RlcyQzLkVSUl9TVFJFQU1fQ0FOTk9UX1BJUEUsCiAgICAgIEVSUl9TVFJFQU1fREVTVFJPWUVEJDEgPSBfcmVxdWlyZSRjb2RlcyQzLkVSUl9TVFJFQU1fREVTVFJPWUVELAogICAgICBFUlJfU1RSRUFNX05VTExfVkFMVUVTID0gX3JlcXVpcmUkY29kZXMkMy5FUlJfU1RSRUFNX05VTExfVkFMVUVTLAogICAgICBFUlJfU1RSRUFNX1dSSVRFX0FGVEVSX0VORCA9IF9yZXF1aXJlJGNvZGVzJDMuRVJSX1NUUkVBTV9XUklURV9BRlRFUl9FTkQsCiAgICAgIEVSUl9VTktOT1dOX0VOQ09ESU5HID0gX3JlcXVpcmUkY29kZXMkMy5FUlJfVU5LTk9XTl9FTkNPRElORzsKCiAgdmFyIGVycm9yT3JEZXN0cm95JDEgPSBkZXN0cm95SW1wbCQxLmVycm9yT3JEZXN0cm95OwoKICBpbmhlcml0cyRkLmV4cG9ydHMoV3JpdGFibGUkMSwgU3RyZWFtJDIpOwoKICBmdW5jdGlvbiBub3AoKSB7fQoKICBmdW5jdGlvbiBXcml0YWJsZVN0YXRlKG9wdGlvbnMsIHN0cmVhbSwgaXNEdXBsZXgpIHsKICAgIER1cGxleCQzID0gRHVwbGV4JDMgfHwgX3N0cmVhbV9kdXBsZXg7CiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsgLy8gRHVwbGV4IHN0cmVhbXMgYXJlIGJvdGggcmVhZGFibGUgYW5kIHdyaXRhYmxlLCBidXQgc2hhcmUKICAgIC8vIHRoZSBzYW1lIG9wdGlvbnMgb2JqZWN0LgogICAgLy8gSG93ZXZlciwgc29tZSBjYXNlcyByZXF1aXJlIHNldHRpbmcgb3B0aW9ucyB0byBkaWZmZXJlbnQKICAgIC8vIHZhbHVlcyBmb3IgdGhlIHJlYWRhYmxlIGFuZCB0aGUgd3JpdGFibGUgc2lkZXMgb2YgdGhlIGR1cGxleCBzdHJlYW0sCiAgICAvLyBlLmcuIG9wdGlvbnMucmVhZGFibGVPYmplY3RNb2RlIHZzLiBvcHRpb25zLndyaXRhYmxlT2JqZWN0TW9kZSwgZXRjLgoKICAgIGlmICh0eXBlb2YgaXNEdXBsZXggIT09ICdib29sZWFuJykgaXNEdXBsZXggPSBzdHJlYW0gaW5zdGFuY2VvZiBEdXBsZXgkMzsgLy8gb2JqZWN0IHN0cmVhbSBmbGFnIHRvIGluZGljYXRlIHdoZXRoZXIgb3Igbm90IHRoaXMgc3RyZWFtCiAgICAvLyBjb250YWlucyBidWZmZXJzIG9yIG9iamVjdHMuCgogICAgdGhpcy5vYmplY3RNb2RlID0gISFvcHRpb25zLm9iamVjdE1vZGU7CiAgICBpZiAoaXNEdXBsZXgpIHRoaXMub2JqZWN0TW9kZSA9IHRoaXMub2JqZWN0TW9kZSB8fCAhIW9wdGlvbnMud3JpdGFibGVPYmplY3RNb2RlOyAvLyB0aGUgcG9pbnQgYXQgd2hpY2ggd3JpdGUoKSBzdGFydHMgcmV0dXJuaW5nIGZhbHNlCiAgICAvLyBOb3RlOiAwIGlzIGEgdmFsaWQgdmFsdWUsIG1lYW5zIHRoYXQgd2UgYWx3YXlzIHJldHVybiBmYWxzZSBpZgogICAgLy8gdGhlIGVudGlyZSBidWZmZXIgaXMgbm90IGZsdXNoZWQgaW1tZWRpYXRlbHkgb24gd3JpdGUoKQoKICAgIHRoaXMuaGlnaFdhdGVyTWFyayA9IGdldEhpZ2hXYXRlck1hcmskMSh0aGlzLCBvcHRpb25zLCAnd3JpdGFibGVIaWdoV2F0ZXJNYXJrJywgaXNEdXBsZXgpOyAvLyBpZiBfZmluYWwgaGFzIGJlZW4gY2FsbGVkCgogICAgdGhpcy5maW5hbENhbGxlZCA9IGZhbHNlOyAvLyBkcmFpbiBldmVudCBmbGFnLgoKICAgIHRoaXMubmVlZERyYWluID0gZmFsc2U7IC8vIGF0IHRoZSBzdGFydCBvZiBjYWxsaW5nIGVuZCgpCgogICAgdGhpcy5lbmRpbmcgPSBmYWxzZTsgLy8gd2hlbiBlbmQoKSBoYXMgYmVlbiBjYWxsZWQsIGFuZCByZXR1cm5lZAoKICAgIHRoaXMuZW5kZWQgPSBmYWxzZTsgLy8gd2hlbiAnZmluaXNoJyBpcyBlbWl0dGVkCgogICAgdGhpcy5maW5pc2hlZCA9IGZhbHNlOyAvLyBoYXMgaXQgYmVlbiBkZXN0cm95ZWQKCiAgICB0aGlzLmRlc3Ryb3llZCA9IGZhbHNlOyAvLyBzaG91bGQgd2UgZGVjb2RlIHN0cmluZ3MgaW50byBidWZmZXJzIGJlZm9yZSBwYXNzaW5nIHRvIF93cml0ZT8KICAgIC8vIHRoaXMgaXMgaGVyZSBzbyB0aGF0IHNvbWUgbm9kZS1jb3JlIHN0cmVhbXMgY2FuIG9wdGltaXplIHN0cmluZwogICAgLy8gaGFuZGxpbmcgYXQgYSBsb3dlciBsZXZlbC4KCiAgICB2YXIgbm9EZWNvZGUgPSBvcHRpb25zLmRlY29kZVN0cmluZ3MgPT09IGZhbHNlOwogICAgdGhpcy5kZWNvZGVTdHJpbmdzID0gIW5vRGVjb2RlOyAvLyBDcnlwdG8gaXMga2luZCBvZiBvbGQgYW5kIGNydXN0eS4gIEhpc3RvcmljYWxseSwgaXRzIGRlZmF1bHQgc3RyaW5nCiAgICAvLyBlbmNvZGluZyBpcyAnYmluYXJ5JyBzbyB3ZSBoYXZlIHRvIG1ha2UgdGhpcyBjb25maWd1cmFibGUuCiAgICAvLyBFdmVyeXRoaW5nIGVsc2UgaW4gdGhlIHVuaXZlcnNlIHVzZXMgJ3V0ZjgnLCB0aG91Z2guCgogICAgdGhpcy5kZWZhdWx0RW5jb2RpbmcgPSBvcHRpb25zLmRlZmF1bHRFbmNvZGluZyB8fCAndXRmOCc7IC8vIG5vdCBhbiBhY3R1YWwgYnVmZmVyIHdlIGtlZXAgdHJhY2sgb2YsIGJ1dCBhIG1lYXN1cmVtZW50CiAgICAvLyBvZiBob3cgbXVjaCB3ZSdyZSB3YWl0aW5nIHRvIGdldCBwdXNoZWQgdG8gc29tZSB1bmRlcmx5aW5nCiAgICAvLyBzb2NrZXQgb3IgZmlsZS4KCiAgICB0aGlzLmxlbmd0aCA9IDA7IC8vIGEgZmxhZyB0byBzZWUgd2hlbiB3ZSdyZSBpbiB0aGUgbWlkZGxlIG9mIGEgd3JpdGUuCgogICAgdGhpcy53cml0aW5nID0gZmFsc2U7IC8vIHdoZW4gdHJ1ZSBhbGwgd3JpdGVzIHdpbGwgYmUgYnVmZmVyZWQgdW50aWwgLnVuY29yaygpIGNhbGwKCiAgICB0aGlzLmNvcmtlZCA9IDA7IC8vIGEgZmxhZyB0byBiZSBhYmxlIHRvIHRlbGwgaWYgdGhlIG9ud3JpdGUgY2IgaXMgY2FsbGVkIGltbWVkaWF0ZWx5LAogICAgLy8gb3Igb24gYSBsYXRlciB0aWNrLiAgV2Ugc2V0IHRoaXMgdG8gdHJ1ZSBhdCBmaXJzdCwgYmVjYXVzZSBhbnkKICAgIC8vIGFjdGlvbnMgdGhhdCBzaG91bGRuJ3QgaGFwcGVuIHVudGlsICJsYXRlciIgc2hvdWxkIGdlbmVyYWxseSBhbHNvCiAgICAvLyBub3QgaGFwcGVuIGJlZm9yZSB0aGUgZmlyc3Qgd3JpdGUgY2FsbC4KCiAgICB0aGlzLnN5bmMgPSB0cnVlOyAvLyBhIGZsYWcgdG8ga25vdyBpZiB3ZSdyZSBwcm9jZXNzaW5nIHByZXZpb3VzbHkgYnVmZmVyZWQgaXRlbXMsIHdoaWNoCiAgICAvLyBtYXkgY2FsbCB0aGUgX3dyaXRlKCkgY2FsbGJhY2sgaW4gdGhlIHNhbWUgdGljaywgc28gdGhhdCB3ZSBkb24ndAogICAgLy8gZW5kIHVwIGluIGFuIG92ZXJsYXBwZWQgb253cml0ZSBzaXR1YXRpb24uCgogICAgdGhpcy5idWZmZXJQcm9jZXNzaW5nID0gZmFsc2U7IC8vIHRoZSBjYWxsYmFjayB0aGF0J3MgcGFzc2VkIHRvIF93cml0ZShjaHVuayxjYikKCiAgICB0aGlzLm9ud3JpdGUgPSBmdW5jdGlvbiAoZXIpIHsKICAgICAgb253cml0ZShzdHJlYW0sIGVyKTsKICAgIH07IC8vIHRoZSBjYWxsYmFjayB0aGF0IHRoZSB1c2VyIHN1cHBsaWVzIHRvIHdyaXRlKGNodW5rLGVuY29kaW5nLGNiKQoKCiAgICB0aGlzLndyaXRlY2IgPSBudWxsOyAvLyB0aGUgYW1vdW50IHRoYXQgaXMgYmVpbmcgd3JpdHRlbiB3aGVuIF93cml0ZSBpcyBjYWxsZWQuCgogICAgdGhpcy53cml0ZWxlbiA9IDA7CiAgICB0aGlzLmJ1ZmZlcmVkUmVxdWVzdCA9IG51bGw7CiAgICB0aGlzLmxhc3RCdWZmZXJlZFJlcXVlc3QgPSBudWxsOyAvLyBudW1iZXIgb2YgcGVuZGluZyB1c2VyLXN1cHBsaWVkIHdyaXRlIGNhbGxiYWNrcwogICAgLy8gdGhpcyBtdXN0IGJlIDAgYmVmb3JlICdmaW5pc2gnIGNhbiBiZSBlbWl0dGVkCgogICAgdGhpcy5wZW5kaW5nY2IgPSAwOyAvLyBlbWl0IHByZWZpbmlzaCBpZiB0aGUgb25seSB0aGluZyB3ZSdyZSB3YWl0aW5nIGZvciBpcyBfd3JpdGUgY2JzCiAgICAvLyBUaGlzIGlzIHJlbGV2YW50IGZvciBzeW5jaHJvbm91cyBUcmFuc2Zvcm0gc3RyZWFtcwoKICAgIHRoaXMucHJlZmluaXNoZWQgPSBmYWxzZTsgLy8gVHJ1ZSBpZiB0aGUgZXJyb3Igd2FzIGFscmVhZHkgZW1pdHRlZCBhbmQgc2hvdWxkIG5vdCBiZSB0aHJvd24gYWdhaW4KCiAgICB0aGlzLmVycm9yRW1pdHRlZCA9IGZhbHNlOyAvLyBTaG91bGQgY2xvc2UgYmUgZW1pdHRlZCBvbiBkZXN0cm95LiBEZWZhdWx0cyB0byB0cnVlLgoKICAgIHRoaXMuZW1pdENsb3NlID0gb3B0aW9ucy5lbWl0Q2xvc2UgIT09IGZhbHNlOyAvLyBTaG91bGQgLmRlc3Ryb3koKSBiZSBjYWxsZWQgYWZ0ZXIgJ2ZpbmlzaCcgKGFuZCBwb3RlbnRpYWxseSAnZW5kJykKCiAgICB0aGlzLmF1dG9EZXN0cm95ID0gISFvcHRpb25zLmF1dG9EZXN0cm95OyAvLyBjb3VudCBidWZmZXJlZCByZXF1ZXN0cwoKICAgIHRoaXMuYnVmZmVyZWRSZXF1ZXN0Q291bnQgPSAwOyAvLyBhbGxvY2F0ZSB0aGUgZmlyc3QgQ29ya2VkUmVxdWVzdCwgdGhlcmUgaXMgYWx3YXlzCiAgICAvLyBvbmUgYWxsb2NhdGVkIGFuZCBmcmVlIHRvIHVzZSwgYW5kIHdlIG1haW50YWluIGF0IG1vc3QgdHdvCgogICAgdGhpcy5jb3JrZWRSZXF1ZXN0c0ZyZWUgPSBuZXcgQ29ya2VkUmVxdWVzdCh0aGlzKTsKICB9CgogIFdyaXRhYmxlU3RhdGUucHJvdG90eXBlLmdldEJ1ZmZlciA9IGZ1bmN0aW9uIGdldEJ1ZmZlcigpIHsKICAgIHZhciBjdXJyZW50ID0gdGhpcy5idWZmZXJlZFJlcXVlc3Q7CiAgICB2YXIgb3V0ID0gW107CgogICAgd2hpbGUgKGN1cnJlbnQpIHsKICAgICAgb3V0LnB1c2goY3VycmVudCk7CiAgICAgIGN1cnJlbnQgPSBjdXJyZW50Lm5leHQ7CiAgICB9CgogICAgcmV0dXJuIG91dDsKICB9OwoKICAoZnVuY3Rpb24gKCkgewogICAgdHJ5IHsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFdyaXRhYmxlU3RhdGUucHJvdG90eXBlLCAnYnVmZmVyJywgewogICAgICAgIGdldDogaW50ZXJuYWxVdGlsLmRlcHJlY2F0ZShmdW5jdGlvbiB3cml0YWJsZVN0YXRlQnVmZmVyR2V0dGVyKCkgewogICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QnVmZmVyKCk7CiAgICAgICAgfSwgJ193cml0YWJsZVN0YXRlLmJ1ZmZlciBpcyBkZXByZWNhdGVkLiBVc2UgX3dyaXRhYmxlU3RhdGUuZ2V0QnVmZmVyICcgKyAnaW5zdGVhZC4nLCAnREVQMDAwMycpCiAgICAgIH0pOwogICAgfSBjYXRjaCAoXykge30KICB9KSgpOyAvLyBUZXN0IF93cml0YWJsZVN0YXRlIGZvciBpbmhlcml0YW5jZSB0byBhY2NvdW50IGZvciBEdXBsZXggc3RyZWFtcywKICAvLyB3aG9zZSBwcm90b3R5cGUgY2hhaW4gb25seSBwb2ludHMgdG8gUmVhZGFibGUuCgoKICB2YXIgcmVhbEhhc0luc3RhbmNlOwoKICBpZiAodHlwZW9mIFN5bWJvbCA9PT0gJ2Z1bmN0aW9uJyAmJiBTeW1ib2wuaGFzSW5zdGFuY2UgJiYgdHlwZW9mIEZ1bmN0aW9uLnByb3RvdHlwZVtTeW1ib2wuaGFzSW5zdGFuY2VdID09PSAnZnVuY3Rpb24nKSB7CiAgICByZWFsSGFzSW5zdGFuY2UgPSBGdW5jdGlvbi5wcm90b3R5cGVbU3ltYm9sLmhhc0luc3RhbmNlXTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShXcml0YWJsZSQxLCBTeW1ib2wuaGFzSW5zdGFuY2UsIHsKICAgICAgdmFsdWU6IGZ1bmN0aW9uIHZhbHVlKG9iamVjdCkgewogICAgICAgIGlmIChyZWFsSGFzSW5zdGFuY2UuY2FsbCh0aGlzLCBvYmplY3QpKSByZXR1cm4gdHJ1ZTsKICAgICAgICBpZiAodGhpcyAhPT0gV3JpdGFibGUkMSkgcmV0dXJuIGZhbHNlOwogICAgICAgIHJldHVybiBvYmplY3QgJiYgb2JqZWN0Ll93cml0YWJsZVN0YXRlIGluc3RhbmNlb2YgV3JpdGFibGVTdGF0ZTsKICAgICAgfQogICAgfSk7CiAgfSBlbHNlIHsKICAgIHJlYWxIYXNJbnN0YW5jZSA9IGZ1bmN0aW9uIHJlYWxIYXNJbnN0YW5jZShvYmplY3QpIHsKICAgICAgcmV0dXJuIG9iamVjdCBpbnN0YW5jZW9mIHRoaXM7CiAgICB9OwogIH0KCiAgZnVuY3Rpb24gV3JpdGFibGUkMShvcHRpb25zKSB7CiAgICBEdXBsZXgkMyA9IER1cGxleCQzIHx8IF9zdHJlYW1fZHVwbGV4OyAvLyBXcml0YWJsZSBjdG9yIGlzIGFwcGxpZWQgdG8gRHVwbGV4ZXMsIHRvby4KICAgIC8vIGByZWFsSGFzSW5zdGFuY2VgIGlzIG5lY2Vzc2FyeSBiZWNhdXNlIHVzaW5nIHBsYWluIGBpbnN0YW5jZW9mYAogICAgLy8gd291bGQgcmV0dXJuIGZhbHNlLCBhcyBubyBgX3dyaXRhYmxlU3RhdGVgIHByb3BlcnR5IGlzIGF0dGFjaGVkLgogICAgLy8gVHJ5aW5nIHRvIHVzZSB0aGUgY3VzdG9tIGBpbnN0YW5jZW9mYCBmb3IgV3JpdGFibGUgaGVyZSB3aWxsIGFsc28gYnJlYWsgdGhlCiAgICAvLyBOb2RlLmpzIExhenlUcmFuc2Zvcm0gaW1wbGVtZW50YXRpb24sIHdoaWNoIGhhcyBhIG5vbi10cml2aWFsIGdldHRlciBmb3IKICAgIC8vIGBfd3JpdGFibGVTdGF0ZWAgdGhhdCB3b3VsZCBsZWFkIHRvIGluZmluaXRlIHJlY3Vyc2lvbi4KICAgIC8vIENoZWNraW5nIGZvciBhIFN0cmVhbS5EdXBsZXggaW5zdGFuY2UgaXMgZmFzdGVyIGhlcmUgaW5zdGVhZCBvZiBpbnNpZGUKICAgIC8vIHRoZSBXcml0YWJsZVN0YXRlIGNvbnN0cnVjdG9yLCBhdCBsZWFzdCB3aXRoIFY4IDYuNQoKICAgIHZhciBpc0R1cGxleCA9IHRoaXMgaW5zdGFuY2VvZiBEdXBsZXgkMzsKICAgIGlmICghaXNEdXBsZXggJiYgIXJlYWxIYXNJbnN0YW5jZS5jYWxsKFdyaXRhYmxlJDEsIHRoaXMpKSByZXR1cm4gbmV3IFdyaXRhYmxlJDEob3B0aW9ucyk7CiAgICB0aGlzLl93cml0YWJsZVN0YXRlID0gbmV3IFdyaXRhYmxlU3RhdGUob3B0aW9ucywgdGhpcywgaXNEdXBsZXgpOyAvLyBsZWdhY3kuCgogICAgdGhpcy53cml0YWJsZSA9IHRydWU7CgogICAgaWYgKG9wdGlvbnMpIHsKICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLndyaXRlID09PSAnZnVuY3Rpb24nKSB0aGlzLl93cml0ZSA9IG9wdGlvbnMud3JpdGU7CiAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy53cml0ZXYgPT09ICdmdW5jdGlvbicpIHRoaXMuX3dyaXRldiA9IG9wdGlvbnMud3JpdGV2OwogICAgICBpZiAodHlwZW9mIG9wdGlvbnMuZGVzdHJveSA9PT0gJ2Z1bmN0aW9uJykgdGhpcy5fZGVzdHJveSA9IG9wdGlvbnMuZGVzdHJveTsKICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLmZpbmFsID09PSAnZnVuY3Rpb24nKSB0aGlzLl9maW5hbCA9IG9wdGlvbnMuZmluYWw7CiAgICB9CgogICAgU3RyZWFtJDIuY2FsbCh0aGlzKTsKICB9IC8vIE90aGVyd2lzZSBwZW9wbGUgY2FuIHBpcGUgV3JpdGFibGUgc3RyZWFtcywgd2hpY2ggaXMganVzdCB3cm9uZy4KCgogIFdyaXRhYmxlJDEucHJvdG90eXBlLnBpcGUgPSBmdW5jdGlvbiAoKSB7CiAgICBlcnJvck9yRGVzdHJveSQxKHRoaXMsIG5ldyBFUlJfU1RSRUFNX0NBTk5PVF9QSVBFKCkpOwogIH07CgogIGZ1bmN0aW9uIHdyaXRlQWZ0ZXJFbmQoc3RyZWFtLCBjYikgewogICAgdmFyIGVyID0gbmV3IEVSUl9TVFJFQU1fV1JJVEVfQUZURVJfRU5EKCk7IC8vIFRPRE86IGRlZmVyIGVycm9yIGV2ZW50cyBjb25zaXN0ZW50bHkgZXZlcnl3aGVyZSwgbm90IGp1c3QgdGhlIGNiCgogICAgZXJyb3JPckRlc3Ryb3kkMShzdHJlYW0sIGVyKTsKICAgIG5leHRUaWNrJDEoY2IsIGVyKTsKICB9IC8vIENoZWNrcyB0aGF0IGEgdXNlci1zdXBwbGllZCBjaHVuayBpcyB2YWxpZCwgZXNwZWNpYWxseSBmb3IgdGhlIHBhcnRpY3VsYXIKICAvLyBtb2RlIHRoZSBzdHJlYW0gaXMgaW4uIEN1cnJlbnRseSB0aGlzIG1lYW5zIHRoYXQgYG51bGxgIGlzIG5ldmVyIGFjY2VwdGVkCiAgLy8gYW5kIHVuZGVmaW5lZC9ub24tc3RyaW5nIHZhbHVlcyBhcmUgb25seSBhbGxvd2VkIGluIG9iamVjdCBtb2RlLgoKCiAgZnVuY3Rpb24gdmFsaWRDaHVuayhzdHJlYW0sIHN0YXRlLCBjaHVuaywgY2IpIHsKICAgIHZhciBlcjsKCiAgICBpZiAoY2h1bmsgPT09IG51bGwpIHsKICAgICAgZXIgPSBuZXcgRVJSX1NUUkVBTV9OVUxMX1ZBTFVFUygpOwogICAgfSBlbHNlIGlmICh0eXBlb2YgY2h1bmsgIT09ICdzdHJpbmcnICYmICFzdGF0ZS5vYmplY3RNb2RlKSB7CiAgICAgIGVyID0gbmV3IEVSUl9JTlZBTElEX0FSR19UWVBFJDIoJ2NodW5rJywgWydzdHJpbmcnLCAnQnVmZmVyJ10sIGNodW5rKTsKICAgIH0KCiAgICBpZiAoZXIpIHsKICAgICAgZXJyb3JPckRlc3Ryb3kkMShzdHJlYW0sIGVyKTsKICAgICAgbmV4dFRpY2skMShjYiwgZXIpOwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgcmV0dXJuIHRydWU7CiAgfQoKICBXcml0YWJsZSQxLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uIChjaHVuaywgZW5jb2RpbmcsIGNiKSB7CiAgICB2YXIgc3RhdGUgPSB0aGlzLl93cml0YWJsZVN0YXRlOwogICAgdmFyIHJldCA9IGZhbHNlOwoKICAgIHZhciBpc0J1ZiA9ICFzdGF0ZS5vYmplY3RNb2RlICYmIF9pc1VpbnQ4QXJyYXkkMShjaHVuayk7CgogICAgaWYgKGlzQnVmICYmICFCdWZmZXIkZC5pc0J1ZmZlcihjaHVuaykpIHsKICAgICAgY2h1bmsgPSBfdWludDhBcnJheVRvQnVmZmVyJDEoY2h1bmspOwogICAgfQoKICAgIGlmICh0eXBlb2YgZW5jb2RpbmcgPT09ICdmdW5jdGlvbicpIHsKICAgICAgY2IgPSBlbmNvZGluZzsKICAgICAgZW5jb2RpbmcgPSBudWxsOwogICAgfQoKICAgIGlmIChpc0J1ZikgZW5jb2RpbmcgPSAnYnVmZmVyJztlbHNlIGlmICghZW5jb2RpbmcpIGVuY29kaW5nID0gc3RhdGUuZGVmYXVsdEVuY29kaW5nOwogICAgaWYgKHR5cGVvZiBjYiAhPT0gJ2Z1bmN0aW9uJykgY2IgPSBub3A7CiAgICBpZiAoc3RhdGUuZW5kaW5nKSB3cml0ZUFmdGVyRW5kKHRoaXMsIGNiKTtlbHNlIGlmIChpc0J1ZiB8fCB2YWxpZENodW5rKHRoaXMsIHN0YXRlLCBjaHVuaywgY2IpKSB7CiAgICAgIHN0YXRlLnBlbmRpbmdjYisrOwogICAgICByZXQgPSB3cml0ZU9yQnVmZmVyKHRoaXMsIHN0YXRlLCBpc0J1ZiwgY2h1bmssIGVuY29kaW5nLCBjYik7CiAgICB9CiAgICByZXR1cm4gcmV0OwogIH07CgogIFdyaXRhYmxlJDEucHJvdG90eXBlLmNvcmsgPSBmdW5jdGlvbiAoKSB7CiAgICB0aGlzLl93cml0YWJsZVN0YXRlLmNvcmtlZCsrOwogIH07CgogIFdyaXRhYmxlJDEucHJvdG90eXBlLnVuY29yayA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciBzdGF0ZSA9IHRoaXMuX3dyaXRhYmxlU3RhdGU7CgogICAgaWYgKHN0YXRlLmNvcmtlZCkgewogICAgICBzdGF0ZS5jb3JrZWQtLTsKICAgICAgaWYgKCFzdGF0ZS53cml0aW5nICYmICFzdGF0ZS5jb3JrZWQgJiYgIXN0YXRlLmJ1ZmZlclByb2Nlc3NpbmcgJiYgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0KSBjbGVhckJ1ZmZlcih0aGlzLCBzdGF0ZSk7CiAgICB9CiAgfTsKCiAgV3JpdGFibGUkMS5wcm90b3R5cGUuc2V0RGVmYXVsdEVuY29kaW5nID0gZnVuY3Rpb24gc2V0RGVmYXVsdEVuY29kaW5nKGVuY29kaW5nKSB7CiAgICAvLyBub2RlOjpQYXJzZUVuY29kaW5nKCkgcmVxdWlyZXMgbG93ZXIgY2FzZS4KICAgIGlmICh0eXBlb2YgZW5jb2RpbmcgPT09ICdzdHJpbmcnKSBlbmNvZGluZyA9IGVuY29kaW5nLnRvTG93ZXJDYXNlKCk7CiAgICBpZiAoIShbJ2hleCcsICd1dGY4JywgJ3V0Zi04JywgJ2FzY2lpJywgJ2JpbmFyeScsICdiYXNlNjQnLCAndWNzMicsICd1Y3MtMicsICd1dGYxNmxlJywgJ3V0Zi0xNmxlJywgJ3JhdyddLmluZGV4T2YoKGVuY29kaW5nICsgJycpLnRvTG93ZXJDYXNlKCkpID4gLTEpKSB0aHJvdyBuZXcgRVJSX1VOS05PV05fRU5DT0RJTkcoZW5jb2RpbmcpOwogICAgdGhpcy5fd3JpdGFibGVTdGF0ZS5kZWZhdWx0RW5jb2RpbmcgPSBlbmNvZGluZzsKICAgIHJldHVybiB0aGlzOwogIH07CgogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShXcml0YWJsZSQxLnByb3RvdHlwZSwgJ3dyaXRhYmxlQnVmZmVyJywgewogICAgLy8gbWFraW5nIGl0IGV4cGxpY2l0IHRoaXMgcHJvcGVydHkgaXMgbm90IGVudW1lcmFibGUKICAgIC8vIGJlY2F1c2Ugb3RoZXJ3aXNlIHNvbWUgcHJvdG90eXBlIG1hbmlwdWxhdGlvbiBpbgogICAgLy8gdXNlcmxhbmQgd2lsbCBmYWlsCiAgICBlbnVtZXJhYmxlOiBmYWxzZSwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fd3JpdGFibGVTdGF0ZSAmJiB0aGlzLl93cml0YWJsZVN0YXRlLmdldEJ1ZmZlcigpOwogICAgfQogIH0pOwoKICBmdW5jdGlvbiBkZWNvZGVDaHVuayhzdGF0ZSwgY2h1bmssIGVuY29kaW5nKSB7CiAgICBpZiAoIXN0YXRlLm9iamVjdE1vZGUgJiYgc3RhdGUuZGVjb2RlU3RyaW5ncyAhPT0gZmFsc2UgJiYgdHlwZW9mIGNodW5rID09PSAnc3RyaW5nJykgewogICAgICBjaHVuayA9IEJ1ZmZlciRkLmZyb20oY2h1bmssIGVuY29kaW5nKTsKICAgIH0KCiAgICByZXR1cm4gY2h1bms7CiAgfQoKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoV3JpdGFibGUkMS5wcm90b3R5cGUsICd3cml0YWJsZUhpZ2hXYXRlck1hcmsnLCB7CiAgICAvLyBtYWtpbmcgaXQgZXhwbGljaXQgdGhpcyBwcm9wZXJ0eSBpcyBub3QgZW51bWVyYWJsZQogICAgLy8gYmVjYXVzZSBvdGhlcndpc2Ugc29tZSBwcm90b3R5cGUgbWFuaXB1bGF0aW9uIGluCiAgICAvLyB1c2VybGFuZCB3aWxsIGZhaWwKICAgIGVudW1lcmFibGU6IGZhbHNlLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl93cml0YWJsZVN0YXRlLmhpZ2hXYXRlck1hcms7CiAgICB9CiAgfSk7IC8vIGlmIHdlJ3JlIGFscmVhZHkgd3JpdGluZyBzb21ldGhpbmcsIHRoZW4ganVzdCBwdXQgdGhpcwogIC8vIGluIHRoZSBxdWV1ZSwgYW5kIHdhaXQgb3VyIHR1cm4uICBPdGhlcndpc2UsIGNhbGwgX3dyaXRlCiAgLy8gSWYgd2UgcmV0dXJuIGZhbHNlLCB0aGVuIHdlIG5lZWQgYSBkcmFpbiBldmVudCwgc28gc2V0IHRoYXQgZmxhZy4KCiAgZnVuY3Rpb24gd3JpdGVPckJ1ZmZlcihzdHJlYW0sIHN0YXRlLCBpc0J1ZiwgY2h1bmssIGVuY29kaW5nLCBjYikgewogICAgaWYgKCFpc0J1ZikgewogICAgICB2YXIgbmV3Q2h1bmsgPSBkZWNvZGVDaHVuayhzdGF0ZSwgY2h1bmssIGVuY29kaW5nKTsKCiAgICAgIGlmIChjaHVuayAhPT0gbmV3Q2h1bmspIHsKICAgICAgICBpc0J1ZiA9IHRydWU7CiAgICAgICAgZW5jb2RpbmcgPSAnYnVmZmVyJzsKICAgICAgICBjaHVuayA9IG5ld0NodW5rOwogICAgICB9CiAgICB9CgogICAgdmFyIGxlbiA9IHN0YXRlLm9iamVjdE1vZGUgPyAxIDogY2h1bmsubGVuZ3RoOwogICAgc3RhdGUubGVuZ3RoICs9IGxlbjsKICAgIHZhciByZXQgPSBzdGF0ZS5sZW5ndGggPCBzdGF0ZS5oaWdoV2F0ZXJNYXJrOyAvLyB3ZSBtdXN0IGVuc3VyZSB0aGF0IHByZXZpb3VzIG5lZWREcmFpbiB3aWxsIG5vdCBiZSByZXNldCB0byBmYWxzZS4KCiAgICBpZiAoIXJldCkgc3RhdGUubmVlZERyYWluID0gdHJ1ZTsKCiAgICBpZiAoc3RhdGUud3JpdGluZyB8fCBzdGF0ZS5jb3JrZWQpIHsKICAgICAgdmFyIGxhc3QgPSBzdGF0ZS5sYXN0QnVmZmVyZWRSZXF1ZXN0OwogICAgICBzdGF0ZS5sYXN0QnVmZmVyZWRSZXF1ZXN0ID0gewogICAgICAgIGNodW5rOiBjaHVuaywKICAgICAgICBlbmNvZGluZzogZW5jb2RpbmcsCiAgICAgICAgaXNCdWY6IGlzQnVmLAogICAgICAgIGNhbGxiYWNrOiBjYiwKICAgICAgICBuZXh0OiBudWxsCiAgICAgIH07CgogICAgICBpZiAobGFzdCkgewogICAgICAgIGxhc3QubmV4dCA9IHN0YXRlLmxhc3RCdWZmZXJlZFJlcXVlc3Q7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0ID0gc3RhdGUubGFzdEJ1ZmZlcmVkUmVxdWVzdDsKICAgICAgfQoKICAgICAgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0Q291bnQgKz0gMTsKICAgIH0gZWxzZSB7CiAgICAgIGRvV3JpdGUoc3RyZWFtLCBzdGF0ZSwgZmFsc2UsIGxlbiwgY2h1bmssIGVuY29kaW5nLCBjYik7CiAgICB9CgogICAgcmV0dXJuIHJldDsKICB9CgogIGZ1bmN0aW9uIGRvV3JpdGUoc3RyZWFtLCBzdGF0ZSwgd3JpdGV2LCBsZW4sIGNodW5rLCBlbmNvZGluZywgY2IpIHsKICAgIHN0YXRlLndyaXRlbGVuID0gbGVuOwogICAgc3RhdGUud3JpdGVjYiA9IGNiOwogICAgc3RhdGUud3JpdGluZyA9IHRydWU7CiAgICBzdGF0ZS5zeW5jID0gdHJ1ZTsKICAgIGlmIChzdGF0ZS5kZXN0cm95ZWQpIHN0YXRlLm9ud3JpdGUobmV3IEVSUl9TVFJFQU1fREVTVFJPWUVEJDEoJ3dyaXRlJykpO2Vsc2UgaWYgKHdyaXRldikgc3RyZWFtLl93cml0ZXYoY2h1bmssIHN0YXRlLm9ud3JpdGUpO2Vsc2Ugc3RyZWFtLl93cml0ZShjaHVuaywgZW5jb2RpbmcsIHN0YXRlLm9ud3JpdGUpOwogICAgc3RhdGUuc3luYyA9IGZhbHNlOwogIH0KCiAgZnVuY3Rpb24gb253cml0ZUVycm9yKHN0cmVhbSwgc3RhdGUsIHN5bmMsIGVyLCBjYikgewogICAgLS1zdGF0ZS5wZW5kaW5nY2I7CgogICAgaWYgKHN5bmMpIHsKICAgICAgLy8gZGVmZXIgdGhlIGNhbGxiYWNrIGlmIHdlIGFyZSBiZWluZyBjYWxsZWQgc3luY2hyb25vdXNseQogICAgICAvLyB0byBhdm9pZCBwaWxpbmcgdXAgdGhpbmdzIG9uIHRoZSBzdGFjawogICAgICBuZXh0VGljayQxKGNiLCBlcik7IC8vIHRoaXMgY2FuIGVtaXQgZmluaXNoLCBhbmQgaXQgd2lsbCBhbHdheXMgaGFwcGVuCiAgICAgIC8vIGFmdGVyIGVycm9yCgogICAgICBuZXh0VGljayQxKGZpbmlzaE1heWJlLCBzdHJlYW0sIHN0YXRlKTsKICAgICAgc3RyZWFtLl93cml0YWJsZVN0YXRlLmVycm9yRW1pdHRlZCA9IHRydWU7CiAgICAgIGVycm9yT3JEZXN0cm95JDEoc3RyZWFtLCBlcik7CiAgICB9IGVsc2UgewogICAgICAvLyB0aGUgY2FsbGVyIGV4cGVjdCB0aGlzIHRvIGhhcHBlbiBiZWZvcmUgaWYKICAgICAgLy8gaXQgaXMgYXN5bmMKICAgICAgY2IoZXIpOwogICAgICBzdHJlYW0uX3dyaXRhYmxlU3RhdGUuZXJyb3JFbWl0dGVkID0gdHJ1ZTsKICAgICAgZXJyb3JPckRlc3Ryb3kkMShzdHJlYW0sIGVyKTsgLy8gdGhpcyBjYW4gZW1pdCBmaW5pc2gsIGJ1dCBmaW5pc2ggbXVzdAogICAgICAvLyBhbHdheXMgZm9sbG93IGVycm9yCgogICAgICBmaW5pc2hNYXliZShzdHJlYW0sIHN0YXRlKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIG9ud3JpdGVTdGF0ZVVwZGF0ZShzdGF0ZSkgewogICAgc3RhdGUud3JpdGluZyA9IGZhbHNlOwogICAgc3RhdGUud3JpdGVjYiA9IG51bGw7CiAgICBzdGF0ZS5sZW5ndGggLT0gc3RhdGUud3JpdGVsZW47CiAgICBzdGF0ZS53cml0ZWxlbiA9IDA7CiAgfQoKICBmdW5jdGlvbiBvbndyaXRlKHN0cmVhbSwgZXIpIHsKICAgIHZhciBzdGF0ZSA9IHN0cmVhbS5fd3JpdGFibGVTdGF0ZTsKICAgIHZhciBzeW5jID0gc3RhdGUuc3luYzsKICAgIHZhciBjYiA9IHN0YXRlLndyaXRlY2I7CiAgICBpZiAodHlwZW9mIGNiICE9PSAnZnVuY3Rpb24nKSB0aHJvdyBuZXcgRVJSX01VTFRJUExFX0NBTExCQUNLJDEoKTsKICAgIG9ud3JpdGVTdGF0ZVVwZGF0ZShzdGF0ZSk7CiAgICBpZiAoZXIpIG9ud3JpdGVFcnJvcihzdHJlYW0sIHN0YXRlLCBzeW5jLCBlciwgY2IpO2Vsc2UgewogICAgICAvLyBDaGVjayBpZiB3ZSdyZSBhY3R1YWxseSByZWFkeSB0byBmaW5pc2gsIGJ1dCBkb24ndCBlbWl0IHlldAogICAgICB2YXIgZmluaXNoZWQgPSBuZWVkRmluaXNoKHN0YXRlKSB8fCBzdHJlYW0uZGVzdHJveWVkOwoKICAgICAgaWYgKCFmaW5pc2hlZCAmJiAhc3RhdGUuY29ya2VkICYmICFzdGF0ZS5idWZmZXJQcm9jZXNzaW5nICYmIHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdCkgewogICAgICAgIGNsZWFyQnVmZmVyKHN0cmVhbSwgc3RhdGUpOwogICAgICB9CgogICAgICBpZiAoc3luYykgewogICAgICAgIG5leHRUaWNrJDEoYWZ0ZXJXcml0ZSwgc3RyZWFtLCBzdGF0ZSwgZmluaXNoZWQsIGNiKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBhZnRlcldyaXRlKHN0cmVhbSwgc3RhdGUsIGZpbmlzaGVkLCBjYik7CiAgICAgIH0KICAgIH0KICB9CgogIGZ1bmN0aW9uIGFmdGVyV3JpdGUoc3RyZWFtLCBzdGF0ZSwgZmluaXNoZWQsIGNiKSB7CiAgICBpZiAoIWZpbmlzaGVkKSBvbndyaXRlRHJhaW4oc3RyZWFtLCBzdGF0ZSk7CiAgICBzdGF0ZS5wZW5kaW5nY2ItLTsKICAgIGNiKCk7CiAgICBmaW5pc2hNYXliZShzdHJlYW0sIHN0YXRlKTsKICB9IC8vIE11c3QgZm9yY2UgY2FsbGJhY2sgdG8gYmUgY2FsbGVkIG9uIG5leHRUaWNrLCBzbyB0aGF0IHdlIGRvbid0CiAgLy8gZW1pdCAnZHJhaW4nIGJlZm9yZSB0aGUgd3JpdGUoKSBjb25zdW1lciBnZXRzIHRoZSAnZmFsc2UnIHJldHVybgogIC8vIHZhbHVlLCBhbmQgaGFzIGEgY2hhbmNlIHRvIGF0dGFjaCBhICdkcmFpbicgbGlzdGVuZXIuCgoKICBmdW5jdGlvbiBvbndyaXRlRHJhaW4oc3RyZWFtLCBzdGF0ZSkgewogICAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCAmJiBzdGF0ZS5uZWVkRHJhaW4pIHsKICAgICAgc3RhdGUubmVlZERyYWluID0gZmFsc2U7CiAgICAgIHN0cmVhbS5lbWl0KCdkcmFpbicpOwogICAgfQogIH0gLy8gaWYgdGhlcmUncyBzb21ldGhpbmcgaW4gdGhlIGJ1ZmZlciB3YWl0aW5nLCB0aGVuIHByb2Nlc3MgaXQKCgogIGZ1bmN0aW9uIGNsZWFyQnVmZmVyKHN0cmVhbSwgc3RhdGUpIHsKICAgIHN0YXRlLmJ1ZmZlclByb2Nlc3NpbmcgPSB0cnVlOwogICAgdmFyIGVudHJ5ID0gc3RhdGUuYnVmZmVyZWRSZXF1ZXN0OwoKICAgIGlmIChzdHJlYW0uX3dyaXRldiAmJiBlbnRyeSAmJiBlbnRyeS5uZXh0KSB7CiAgICAgIC8vIEZhc3QgY2FzZSwgd3JpdGUgZXZlcnl0aGluZyB1c2luZyBfd3JpdGV2KCkKICAgICAgdmFyIGwgPSBzdGF0ZS5idWZmZXJlZFJlcXVlc3RDb3VudDsKICAgICAgdmFyIGJ1ZmZlciA9IG5ldyBBcnJheShsKTsKICAgICAgdmFyIGhvbGRlciA9IHN0YXRlLmNvcmtlZFJlcXVlc3RzRnJlZTsKICAgICAgaG9sZGVyLmVudHJ5ID0gZW50cnk7CiAgICAgIHZhciBjb3VudCA9IDA7CiAgICAgIHZhciBhbGxCdWZmZXJzID0gdHJ1ZTsKCiAgICAgIHdoaWxlIChlbnRyeSkgewogICAgICAgIGJ1ZmZlcltjb3VudF0gPSBlbnRyeTsKICAgICAgICBpZiAoIWVudHJ5LmlzQnVmKSBhbGxCdWZmZXJzID0gZmFsc2U7CiAgICAgICAgZW50cnkgPSBlbnRyeS5uZXh0OwogICAgICAgIGNvdW50ICs9IDE7CiAgICAgIH0KCiAgICAgIGJ1ZmZlci5hbGxCdWZmZXJzID0gYWxsQnVmZmVyczsKICAgICAgZG9Xcml0ZShzdHJlYW0sIHN0YXRlLCB0cnVlLCBzdGF0ZS5sZW5ndGgsIGJ1ZmZlciwgJycsIGhvbGRlci5maW5pc2gpOyAvLyBkb1dyaXRlIGlzIGFsbW9zdCBhbHdheXMgYXN5bmMsIGRlZmVyIHRoZXNlIHRvIHNhdmUgYSBiaXQgb2YgdGltZQogICAgICAvLyBhcyB0aGUgaG90IHBhdGggZW5kcyB3aXRoIGRvV3JpdGUKCiAgICAgIHN0YXRlLnBlbmRpbmdjYisrOwogICAgICBzdGF0ZS5sYXN0QnVmZmVyZWRSZXF1ZXN0ID0gbnVsbDsKCiAgICAgIGlmIChob2xkZXIubmV4dCkgewogICAgICAgIHN0YXRlLmNvcmtlZFJlcXVlc3RzRnJlZSA9IGhvbGRlci5uZXh0OwogICAgICAgIGhvbGRlci5uZXh0ID0gbnVsbDsKICAgICAgfSBlbHNlIHsKICAgICAgICBzdGF0ZS5jb3JrZWRSZXF1ZXN0c0ZyZWUgPSBuZXcgQ29ya2VkUmVxdWVzdChzdGF0ZSk7CiAgICAgIH0KCiAgICAgIHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdENvdW50ID0gMDsKICAgIH0gZWxzZSB7CiAgICAgIC8vIFNsb3cgY2FzZSwgd3JpdGUgY2h1bmtzIG9uZS1ieS1vbmUKICAgICAgd2hpbGUgKGVudHJ5KSB7CiAgICAgICAgdmFyIGNodW5rID0gZW50cnkuY2h1bms7CiAgICAgICAgdmFyIGVuY29kaW5nID0gZW50cnkuZW5jb2Rpbmc7CiAgICAgICAgdmFyIGNiID0gZW50cnkuY2FsbGJhY2s7CiAgICAgICAgdmFyIGxlbiA9IHN0YXRlLm9iamVjdE1vZGUgPyAxIDogY2h1bmsubGVuZ3RoOwogICAgICAgIGRvV3JpdGUoc3RyZWFtLCBzdGF0ZSwgZmFsc2UsIGxlbiwgY2h1bmssIGVuY29kaW5nLCBjYik7CiAgICAgICAgZW50cnkgPSBlbnRyeS5uZXh0OwogICAgICAgIHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdENvdW50LS07IC8vIGlmIHdlIGRpZG4ndCBjYWxsIHRoZSBvbndyaXRlIGltbWVkaWF0ZWx5LCB0aGVuCiAgICAgICAgLy8gaXQgbWVhbnMgdGhhdCB3ZSBuZWVkIHRvIHdhaXQgdW50aWwgaXQgZG9lcy4KICAgICAgICAvLyBhbHNvLCB0aGF0IG1lYW5zIHRoYXQgdGhlIGNodW5rIGFuZCBjYiBhcmUgY3VycmVudGx5CiAgICAgICAgLy8gYmVpbmcgcHJvY2Vzc2VkLCBzbyBtb3ZlIHRoZSBidWZmZXIgY291bnRlciBwYXN0IHRoZW0uCgogICAgICAgIGlmIChzdGF0ZS53cml0aW5nKSB7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChlbnRyeSA9PT0gbnVsbCkgc3RhdGUubGFzdEJ1ZmZlcmVkUmVxdWVzdCA9IG51bGw7CiAgICB9CgogICAgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0ID0gZW50cnk7CiAgICBzdGF0ZS5idWZmZXJQcm9jZXNzaW5nID0gZmFsc2U7CiAgfQoKICBXcml0YWJsZSQxLnByb3RvdHlwZS5fd3JpdGUgPSBmdW5jdGlvbiAoY2h1bmssIGVuY29kaW5nLCBjYikgewogICAgY2IobmV3IEVSUl9NRVRIT0RfTk9UX0lNUExFTUVOVEVEJDIoJ193cml0ZSgpJykpOwogIH07CgogIFdyaXRhYmxlJDEucHJvdG90eXBlLl93cml0ZXYgPSBudWxsOwoKICBXcml0YWJsZSQxLnByb3RvdHlwZS5lbmQgPSBmdW5jdGlvbiAoY2h1bmssIGVuY29kaW5nLCBjYikgewogICAgdmFyIHN0YXRlID0gdGhpcy5fd3JpdGFibGVTdGF0ZTsKCiAgICBpZiAodHlwZW9mIGNodW5rID09PSAnZnVuY3Rpb24nKSB7CiAgICAgIGNiID0gY2h1bms7CiAgICAgIGNodW5rID0gbnVsbDsKICAgICAgZW5jb2RpbmcgPSBudWxsOwogICAgfSBlbHNlIGlmICh0eXBlb2YgZW5jb2RpbmcgPT09ICdmdW5jdGlvbicpIHsKICAgICAgY2IgPSBlbmNvZGluZzsKICAgICAgZW5jb2RpbmcgPSBudWxsOwogICAgfQoKICAgIGlmIChjaHVuayAhPT0gbnVsbCAmJiBjaHVuayAhPT0gdW5kZWZpbmVkKSB0aGlzLndyaXRlKGNodW5rLCBlbmNvZGluZyk7IC8vIC5lbmQoKSBmdWxseSB1bmNvcmtzCgogICAgaWYgKHN0YXRlLmNvcmtlZCkgewogICAgICBzdGF0ZS5jb3JrZWQgPSAxOwogICAgICB0aGlzLnVuY29yaygpOwogICAgfSAvLyBpZ25vcmUgdW5uZWNlc3NhcnkgZW5kKCkgY2FsbHMuCgoKICAgIGlmICghc3RhdGUuZW5kaW5nKSBlbmRXcml0YWJsZSh0aGlzLCBzdGF0ZSwgY2IpOwogICAgcmV0dXJuIHRoaXM7CiAgfTsKCiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFdyaXRhYmxlJDEucHJvdG90eXBlLCAnd3JpdGFibGVMZW5ndGgnLCB7CiAgICAvLyBtYWtpbmcgaXQgZXhwbGljaXQgdGhpcyBwcm9wZXJ0eSBpcyBub3QgZW51bWVyYWJsZQogICAgLy8gYmVjYXVzZSBvdGhlcndpc2Ugc29tZSBwcm90b3R5cGUgbWFuaXB1bGF0aW9uIGluCiAgICAvLyB1c2VybGFuZCB3aWxsIGZhaWwKICAgIGVudW1lcmFibGU6IGZhbHNlLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl93cml0YWJsZVN0YXRlLmxlbmd0aDsKICAgIH0KICB9KTsKCiAgZnVuY3Rpb24gbmVlZEZpbmlzaChzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlLmVuZGluZyAmJiBzdGF0ZS5sZW5ndGggPT09IDAgJiYgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0ID09PSBudWxsICYmICFzdGF0ZS5maW5pc2hlZCAmJiAhc3RhdGUud3JpdGluZzsKICB9CgogIGZ1bmN0aW9uIGNhbGxGaW5hbChzdHJlYW0sIHN0YXRlKSB7CiAgICBzdHJlYW0uX2ZpbmFsKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgc3RhdGUucGVuZGluZ2NiLS07CgogICAgICBpZiAoZXJyKSB7CiAgICAgICAgZXJyb3JPckRlc3Ryb3kkMShzdHJlYW0sIGVycik7CiAgICAgIH0KCiAgICAgIHN0YXRlLnByZWZpbmlzaGVkID0gdHJ1ZTsKICAgICAgc3RyZWFtLmVtaXQoJ3ByZWZpbmlzaCcpOwogICAgICBmaW5pc2hNYXliZShzdHJlYW0sIHN0YXRlKTsKICAgIH0pOwogIH0KCiAgZnVuY3Rpb24gcHJlZmluaXNoJDEoc3RyZWFtLCBzdGF0ZSkgewogICAgaWYgKCFzdGF0ZS5wcmVmaW5pc2hlZCAmJiAhc3RhdGUuZmluYWxDYWxsZWQpIHsKICAgICAgaWYgKHR5cGVvZiBzdHJlYW0uX2ZpbmFsID09PSAnZnVuY3Rpb24nICYmICFzdGF0ZS5kZXN0cm95ZWQpIHsKICAgICAgICBzdGF0ZS5wZW5kaW5nY2IrKzsKICAgICAgICBzdGF0ZS5maW5hbENhbGxlZCA9IHRydWU7CiAgICAgICAgbmV4dFRpY2skMShjYWxsRmluYWwsIHN0cmVhbSwgc3RhdGUpOwogICAgICB9IGVsc2UgewogICAgICAgIHN0YXRlLnByZWZpbmlzaGVkID0gdHJ1ZTsKICAgICAgICBzdHJlYW0uZW1pdCgncHJlZmluaXNoJyk7CiAgICAgIH0KICAgIH0KICB9CgogIGZ1bmN0aW9uIGZpbmlzaE1heWJlKHN0cmVhbSwgc3RhdGUpIHsKICAgIHZhciBuZWVkID0gbmVlZEZpbmlzaChzdGF0ZSk7CgogICAgaWYgKG5lZWQpIHsKICAgICAgcHJlZmluaXNoJDEoc3RyZWFtLCBzdGF0ZSk7CgogICAgICBpZiAoc3RhdGUucGVuZGluZ2NiID09PSAwKSB7CiAgICAgICAgc3RhdGUuZmluaXNoZWQgPSB0cnVlOwogICAgICAgIHN0cmVhbS5lbWl0KCdmaW5pc2gnKTsKCiAgICAgICAgaWYgKHN0YXRlLmF1dG9EZXN0cm95KSB7CiAgICAgICAgICAvLyBJbiBjYXNlIG9mIGR1cGxleCBzdHJlYW1zIHdlIG5lZWQgYSB3YXkgdG8gZGV0ZWN0CiAgICAgICAgICAvLyBpZiB0aGUgcmVhZGFibGUgc2lkZSBpcyByZWFkeSBmb3IgYXV0b0Rlc3Ryb3kgYXMgd2VsbAogICAgICAgICAgdmFyIHJTdGF0ZSA9IHN0cmVhbS5fcmVhZGFibGVTdGF0ZTsKCiAgICAgICAgICBpZiAoIXJTdGF0ZSB8fCByU3RhdGUuYXV0b0Rlc3Ryb3kgJiYgclN0YXRlLmVuZEVtaXR0ZWQpIHsKICAgICAgICAgICAgc3RyZWFtLmRlc3Ryb3koKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbmVlZDsKICB9CgogIGZ1bmN0aW9uIGVuZFdyaXRhYmxlKHN0cmVhbSwgc3RhdGUsIGNiKSB7CiAgICBzdGF0ZS5lbmRpbmcgPSB0cnVlOwogICAgZmluaXNoTWF5YmUoc3RyZWFtLCBzdGF0ZSk7CgogICAgaWYgKGNiKSB7CiAgICAgIGlmIChzdGF0ZS5maW5pc2hlZCkgbmV4dFRpY2skMShjYik7ZWxzZSBzdHJlYW0ub25jZSgnZmluaXNoJywgY2IpOwogICAgfQoKICAgIHN0YXRlLmVuZGVkID0gdHJ1ZTsKICAgIHN0cmVhbS53cml0YWJsZSA9IGZhbHNlOwogIH0KCiAgZnVuY3Rpb24gb25Db3JrZWRGaW5pc2goY29ya1JlcSwgc3RhdGUsIGVycikgewogICAgdmFyIGVudHJ5ID0gY29ya1JlcS5lbnRyeTsKICAgIGNvcmtSZXEuZW50cnkgPSBudWxsOwoKICAgIHdoaWxlIChlbnRyeSkgewogICAgICB2YXIgY2IgPSBlbnRyeS5jYWxsYmFjazsKICAgICAgc3RhdGUucGVuZGluZ2NiLS07CiAgICAgIGNiKGVycik7CiAgICAgIGVudHJ5ID0gZW50cnkubmV4dDsKICAgIH0gLy8gcmV1c2UgdGhlIGZyZWUgY29ya1JlcS4KCgogICAgc3RhdGUuY29ya2VkUmVxdWVzdHNGcmVlLm5leHQgPSBjb3JrUmVxOwogIH0KCiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFdyaXRhYmxlJDEucHJvdG90eXBlLCAnZGVzdHJveWVkJywgewogICAgLy8gbWFraW5nIGl0IGV4cGxpY2l0IHRoaXMgcHJvcGVydHkgaXMgbm90IGVudW1lcmFibGUKICAgIC8vIGJlY2F1c2Ugb3RoZXJ3aXNlIHNvbWUgcHJvdG90eXBlIG1hbmlwdWxhdGlvbiBpbgogICAgLy8gdXNlcmxhbmQgd2lsbCBmYWlsCiAgICBlbnVtZXJhYmxlOiBmYWxzZSwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICBpZiAodGhpcy5fd3JpdGFibGVTdGF0ZSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5fd3JpdGFibGVTdGF0ZS5kZXN0cm95ZWQ7CiAgICB9LAogICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsdWUpIHsKICAgICAgLy8gd2UgaWdub3JlIHRoZSB2YWx1ZSBpZiB0aGUgc3RyZWFtCiAgICAgIC8vIGhhcyBub3QgYmVlbiBpbml0aWFsaXplZCB5ZXQKICAgICAgaWYgKCF0aGlzLl93cml0YWJsZVN0YXRlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9IC8vIGJhY2t3YXJkIGNvbXBhdGliaWxpdHksIHRoZSB1c2VyIGlzIGV4cGxpY2l0bHkKICAgICAgLy8gbWFuYWdpbmcgZGVzdHJveWVkCgoKICAgICAgdGhpcy5fd3JpdGFibGVTdGF0ZS5kZXN0cm95ZWQgPSB2YWx1ZTsKICAgIH0KICB9KTsKICBXcml0YWJsZSQxLnByb3RvdHlwZS5kZXN0cm95ID0gZGVzdHJveUltcGwkMS5kZXN0cm95OwogIFdyaXRhYmxlJDEucHJvdG90eXBlLl91bmRlc3Ryb3kgPSBkZXN0cm95SW1wbCQxLnVuZGVzdHJveTsKCiAgV3JpdGFibGUkMS5wcm90b3R5cGUuX2Rlc3Ryb3kgPSBmdW5jdGlvbiAoZXJyLCBjYikgewogICAgY2IoZXJyKTsKICB9OwoKICAvKjxyZXBsYWNlbWVudD4qLwoKICB2YXIgb2JqZWN0S2V5cyA9IE9iamVjdC5rZXlzIHx8IGZ1bmN0aW9uIChvYmopIHsKICAgIHZhciBrZXlzID0gW107CgogICAgZm9yICh2YXIga2V5IGluIG9iaikgewogICAgICBrZXlzLnB1c2goa2V5KTsKICAgIH0KCiAgICByZXR1cm4ga2V5czsKICB9OwogIC8qPC9yZXBsYWNlbWVudD4qLwoKCiAgdmFyIF9zdHJlYW1fZHVwbGV4ID0gRHVwbGV4JDI7CgogIHZhciBSZWFkYWJsZSQxID0gX3N0cmVhbV9yZWFkYWJsZTsKCiAgdmFyIFdyaXRhYmxlID0gX3N0cmVhbV93cml0YWJsZTsKCiAgaW5oZXJpdHMkZC5leHBvcnRzKER1cGxleCQyLCBSZWFkYWJsZSQxKTsKCiAgewogICAgLy8gQWxsb3cgdGhlIGtleXMgYXJyYXkgdG8gYmUgR0MnZWQuCiAgICB2YXIga2V5cyA9IG9iamVjdEtleXMoV3JpdGFibGUucHJvdG90eXBlKTsKCiAgICBmb3IgKHZhciB2ID0gMDsgdiA8IGtleXMubGVuZ3RoOyB2KyspIHsKICAgICAgdmFyIG1ldGhvZCA9IGtleXNbdl07CiAgICAgIGlmICghRHVwbGV4JDIucHJvdG90eXBlW21ldGhvZF0pIER1cGxleCQyLnByb3RvdHlwZVttZXRob2RdID0gV3JpdGFibGUucHJvdG90eXBlW21ldGhvZF07CiAgICB9CiAgfQoKICBmdW5jdGlvbiBEdXBsZXgkMihvcHRpb25zKSB7CiAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgRHVwbGV4JDIpKSByZXR1cm4gbmV3IER1cGxleCQyKG9wdGlvbnMpOwogICAgUmVhZGFibGUkMS5jYWxsKHRoaXMsIG9wdGlvbnMpOwogICAgV3JpdGFibGUuY2FsbCh0aGlzLCBvcHRpb25zKTsKICAgIHRoaXMuYWxsb3dIYWxmT3BlbiA9IHRydWU7CgogICAgaWYgKG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMucmVhZGFibGUgPT09IGZhbHNlKSB0aGlzLnJlYWRhYmxlID0gZmFsc2U7CiAgICAgIGlmIChvcHRpb25zLndyaXRhYmxlID09PSBmYWxzZSkgdGhpcy53cml0YWJsZSA9IGZhbHNlOwoKICAgICAgaWYgKG9wdGlvbnMuYWxsb3dIYWxmT3BlbiA9PT0gZmFsc2UpIHsKICAgICAgICB0aGlzLmFsbG93SGFsZk9wZW4gPSBmYWxzZTsKICAgICAgICB0aGlzLm9uY2UoJ2VuZCcsIG9uZW5kKTsKICAgICAgfQogICAgfQogIH0KCiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KER1cGxleCQyLnByb3RvdHlwZSwgJ3dyaXRhYmxlSGlnaFdhdGVyTWFyaycsIHsKICAgIC8vIG1ha2luZyBpdCBleHBsaWNpdCB0aGlzIHByb3BlcnR5IGlzIG5vdCBlbnVtZXJhYmxlCiAgICAvLyBiZWNhdXNlIG90aGVyd2lzZSBzb21lIHByb3RvdHlwZSBtYW5pcHVsYXRpb24gaW4KICAgIC8vIHVzZXJsYW5kIHdpbGwgZmFpbAogICAgZW51bWVyYWJsZTogZmFsc2UsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX3dyaXRhYmxlU3RhdGUuaGlnaFdhdGVyTWFyazsKICAgIH0KICB9KTsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRHVwbGV4JDIucHJvdG90eXBlLCAnd3JpdGFibGVCdWZmZXInLCB7CiAgICAvLyBtYWtpbmcgaXQgZXhwbGljaXQgdGhpcyBwcm9wZXJ0eSBpcyBub3QgZW51bWVyYWJsZQogICAgLy8gYmVjYXVzZSBvdGhlcndpc2Ugc29tZSBwcm90b3R5cGUgbWFuaXB1bGF0aW9uIGluCiAgICAvLyB1c2VybGFuZCB3aWxsIGZhaWwKICAgIGVudW1lcmFibGU6IGZhbHNlLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl93cml0YWJsZVN0YXRlICYmIHRoaXMuX3dyaXRhYmxlU3RhdGUuZ2V0QnVmZmVyKCk7CiAgICB9CiAgfSk7CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KER1cGxleCQyLnByb3RvdHlwZSwgJ3dyaXRhYmxlTGVuZ3RoJywgewogICAgLy8gbWFraW5nIGl0IGV4cGxpY2l0IHRoaXMgcHJvcGVydHkgaXMgbm90IGVudW1lcmFibGUKICAgIC8vIGJlY2F1c2Ugb3RoZXJ3aXNlIHNvbWUgcHJvdG90eXBlIG1hbmlwdWxhdGlvbiBpbgogICAgLy8gdXNlcmxhbmQgd2lsbCBmYWlsCiAgICBlbnVtZXJhYmxlOiBmYWxzZSwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fd3JpdGFibGVTdGF0ZS5sZW5ndGg7CiAgICB9CiAgfSk7IC8vIHRoZSBuby1oYWxmLW9wZW4gZW5mb3JjZXIKCiAgZnVuY3Rpb24gb25lbmQoKSB7CiAgICAvLyBJZiB0aGUgd3JpdGFibGUgc2lkZSBlbmRlZCwgdGhlbiB3ZSdyZSBvay4KICAgIGlmICh0aGlzLl93cml0YWJsZVN0YXRlLmVuZGVkKSByZXR1cm47IC8vIG5vIG1vcmUgZGF0YSBjYW4gYmUgd3JpdHRlbi4KICAgIC8vIEJ1dCBhbGxvdyBtb3JlIHdyaXRlcyB0byBoYXBwZW4gaW4gdGhpcyB0aWNrLgoKICAgIG5leHRUaWNrJDEob25FbmROVCwgdGhpcyk7CiAgfQoKICBmdW5jdGlvbiBvbkVuZE5UKHNlbGYpIHsKICAgIHNlbGYuZW5kKCk7CiAgfQoKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRHVwbGV4JDIucHJvdG90eXBlLCAnZGVzdHJveWVkJywgewogICAgLy8gbWFraW5nIGl0IGV4cGxpY2l0IHRoaXMgcHJvcGVydHkgaXMgbm90IGVudW1lcmFibGUKICAgIC8vIGJlY2F1c2Ugb3RoZXJ3aXNlIHNvbWUgcHJvdG90eXBlIG1hbmlwdWxhdGlvbiBpbgogICAgLy8gdXNlcmxhbmQgd2lsbCBmYWlsCiAgICBlbnVtZXJhYmxlOiBmYWxzZSwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICBpZiAodGhpcy5fcmVhZGFibGVTdGF0ZSA9PT0gdW5kZWZpbmVkIHx8IHRoaXMuX3dyaXRhYmxlU3RhdGUgPT09IHVuZGVmaW5lZCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMuX3JlYWRhYmxlU3RhdGUuZGVzdHJveWVkICYmIHRoaXMuX3dyaXRhYmxlU3RhdGUuZGVzdHJveWVkOwogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbHVlKSB7CiAgICAgIC8vIHdlIGlnbm9yZSB0aGUgdmFsdWUgaWYgdGhlIHN0cmVhbQogICAgICAvLyBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQgeWV0CiAgICAgIGlmICh0aGlzLl9yZWFkYWJsZVN0YXRlID09PSB1bmRlZmluZWQgfHwgdGhpcy5fd3JpdGFibGVTdGF0ZSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9IC8vIGJhY2t3YXJkIGNvbXBhdGliaWxpdHksIHRoZSB1c2VyIGlzIGV4cGxpY2l0bHkKICAgICAgLy8gbWFuYWdpbmcgZGVzdHJveWVkCgoKICAgICAgdGhpcy5fcmVhZGFibGVTdGF0ZS5kZXN0cm95ZWQgPSB2YWx1ZTsKICAgICAgdGhpcy5fd3JpdGFibGVTdGF0ZS5kZXN0cm95ZWQgPSB2YWx1ZTsKICAgIH0KICB9KTsKCiAgdmFyIHN0cmluZ19kZWNvZGVyID0ge307CgogIC8qPHJlcGxhY2VtZW50PiovCgogIHZhciBCdWZmZXIkYyA9IHNhZmVCdWZmZXIkMS5leHBvcnRzLkJ1ZmZlcjsKICAvKjwvcmVwbGFjZW1lbnQ+Ki8KCiAgdmFyIGlzRW5jb2RpbmcgPSBCdWZmZXIkYy5pc0VuY29kaW5nIHx8IGZ1bmN0aW9uIChlbmNvZGluZykgewogICAgZW5jb2RpbmcgPSAnJyArIGVuY29kaW5nOwogICAgc3dpdGNoIChlbmNvZGluZyAmJiBlbmNvZGluZy50b0xvd2VyQ2FzZSgpKSB7CiAgICAgIGNhc2UgJ2hleCc6Y2FzZSAndXRmOCc6Y2FzZSAndXRmLTgnOmNhc2UgJ2FzY2lpJzpjYXNlICdiaW5hcnknOmNhc2UgJ2Jhc2U2NCc6Y2FzZSAndWNzMic6Y2FzZSAndWNzLTInOmNhc2UgJ3V0ZjE2bGUnOmNhc2UgJ3V0Zi0xNmxlJzpjYXNlICdyYXcnOgogICAgICAgIHJldHVybiB0cnVlOwogICAgICBkZWZhdWx0OgogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICB9OwoKICBmdW5jdGlvbiBfbm9ybWFsaXplRW5jb2RpbmcoZW5jKSB7CiAgICBpZiAoIWVuYykgcmV0dXJuICd1dGY4JzsKICAgIHZhciByZXRyaWVkOwogICAgd2hpbGUgKHRydWUpIHsKICAgICAgc3dpdGNoIChlbmMpIHsKICAgICAgICBjYXNlICd1dGY4JzoKICAgICAgICBjYXNlICd1dGYtOCc6CiAgICAgICAgICByZXR1cm4gJ3V0ZjgnOwogICAgICAgIGNhc2UgJ3VjczInOgogICAgICAgIGNhc2UgJ3Vjcy0yJzoKICAgICAgICBjYXNlICd1dGYxNmxlJzoKICAgICAgICBjYXNlICd1dGYtMTZsZSc6CiAgICAgICAgICByZXR1cm4gJ3V0ZjE2bGUnOwogICAgICAgIGNhc2UgJ2xhdGluMSc6CiAgICAgICAgY2FzZSAnYmluYXJ5JzoKICAgICAgICAgIHJldHVybiAnbGF0aW4xJzsKICAgICAgICBjYXNlICdiYXNlNjQnOgogICAgICAgIGNhc2UgJ2FzY2lpJzoKICAgICAgICBjYXNlICdoZXgnOgogICAgICAgICAgcmV0dXJuIGVuYzsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgaWYgKHJldHJpZWQpIHJldHVybjsgLy8gdW5kZWZpbmVkCiAgICAgICAgICBlbmMgPSAoJycgKyBlbmMpLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgICByZXRyaWVkID0gdHJ1ZTsKICAgICAgfQogICAgfQogIH0KICAvLyBEbyBub3QgY2FjaGUgYEJ1ZmZlci5pc0VuY29kaW5nYCB3aGVuIGNoZWNraW5nIGVuY29kaW5nIG5hbWVzIGFzIHNvbWUKICAvLyBtb2R1bGVzIG1vbmtleS1wYXRjaCBpdCB0byBzdXBwb3J0IGFkZGl0aW9uYWwgZW5jb2RpbmdzCiAgZnVuY3Rpb24gbm9ybWFsaXplRW5jb2RpbmcoZW5jKSB7CiAgICB2YXIgbmVuYyA9IF9ub3JtYWxpemVFbmNvZGluZyhlbmMpOwogICAgaWYgKHR5cGVvZiBuZW5jICE9PSAnc3RyaW5nJyAmJiAoQnVmZmVyJGMuaXNFbmNvZGluZyA9PT0gaXNFbmNvZGluZyB8fCAhaXNFbmNvZGluZyhlbmMpKSkgdGhyb3cgbmV3IEVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jKTsKICAgIHJldHVybiBuZW5jIHx8IGVuYzsKICB9CgogIC8vIFN0cmluZ0RlY29kZXIgcHJvdmlkZXMgYW4gaW50ZXJmYWNlIGZvciBlZmZpY2llbnRseSBzcGxpdHRpbmcgYSBzZXJpZXMgb2YKICAvLyBidWZmZXJzIGludG8gYSBzZXJpZXMgb2YgSlMgc3RyaW5ncyB3aXRob3V0IGJyZWFraW5nIGFwYXJ0IG11bHRpLWJ5dGUKICAvLyBjaGFyYWN0ZXJzLgogIHN0cmluZ19kZWNvZGVyLlN0cmluZ0RlY29kZXIgPSBTdHJpbmdEZWNvZGVyJDE7CiAgZnVuY3Rpb24gU3RyaW5nRGVjb2RlciQxKGVuY29kaW5nKSB7CiAgICB0aGlzLmVuY29kaW5nID0gbm9ybWFsaXplRW5jb2RpbmcoZW5jb2RpbmcpOwogICAgdmFyIG5iOwogICAgc3dpdGNoICh0aGlzLmVuY29kaW5nKSB7CiAgICAgIGNhc2UgJ3V0ZjE2bGUnOgogICAgICAgIHRoaXMudGV4dCA9IHV0ZjE2VGV4dDsKICAgICAgICB0aGlzLmVuZCA9IHV0ZjE2RW5kOwogICAgICAgIG5iID0gNDsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAndXRmOCc6CiAgICAgICAgdGhpcy5maWxsTGFzdCA9IHV0ZjhGaWxsTGFzdDsKICAgICAgICBuYiA9IDQ7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ2Jhc2U2NCc6CiAgICAgICAgdGhpcy50ZXh0ID0gYmFzZTY0VGV4dDsKICAgICAgICB0aGlzLmVuZCA9IGJhc2U2NEVuZDsKICAgICAgICBuYiA9IDM7CiAgICAgICAgYnJlYWs7CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgdGhpcy53cml0ZSA9IHNpbXBsZVdyaXRlOwogICAgICAgIHRoaXMuZW5kID0gc2ltcGxlRW5kOwogICAgICAgIHJldHVybjsKICAgIH0KICAgIHRoaXMubGFzdE5lZWQgPSAwOwogICAgdGhpcy5sYXN0VG90YWwgPSAwOwogICAgdGhpcy5sYXN0Q2hhciA9IEJ1ZmZlciRjLmFsbG9jVW5zYWZlKG5iKTsKICB9CgogIFN0cmluZ0RlY29kZXIkMS5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiAoYnVmKSB7CiAgICBpZiAoYnVmLmxlbmd0aCA9PT0gMCkgcmV0dXJuICcnOwogICAgdmFyIHI7CiAgICB2YXIgaTsKICAgIGlmICh0aGlzLmxhc3ROZWVkKSB7CiAgICAgIHIgPSB0aGlzLmZpbGxMYXN0KGJ1Zik7CiAgICAgIGlmIChyID09PSB1bmRlZmluZWQpIHJldHVybiAnJzsKICAgICAgaSA9IHRoaXMubGFzdE5lZWQ7CiAgICAgIHRoaXMubGFzdE5lZWQgPSAwOwogICAgfSBlbHNlIHsKICAgICAgaSA9IDA7CiAgICB9CiAgICBpZiAoaSA8IGJ1Zi5sZW5ndGgpIHJldHVybiByID8gciArIHRoaXMudGV4dChidWYsIGkpIDogdGhpcy50ZXh0KGJ1ZiwgaSk7CiAgICByZXR1cm4gciB8fCAnJzsKICB9OwoKICBTdHJpbmdEZWNvZGVyJDEucHJvdG90eXBlLmVuZCA9IHV0ZjhFbmQ7CgogIC8vIFJldHVybnMgb25seSBjb21wbGV0ZSBjaGFyYWN0ZXJzIGluIGEgQnVmZmVyCiAgU3RyaW5nRGVjb2RlciQxLnByb3RvdHlwZS50ZXh0ID0gdXRmOFRleHQ7CgogIC8vIEF0dGVtcHRzIHRvIGNvbXBsZXRlIGEgcGFydGlhbCBub24tVVRGLTggY2hhcmFjdGVyIHVzaW5nIGJ5dGVzIGZyb20gYSBCdWZmZXIKICBTdHJpbmdEZWNvZGVyJDEucHJvdG90eXBlLmZpbGxMYXN0ID0gZnVuY3Rpb24gKGJ1ZikgewogICAgaWYgKHRoaXMubGFzdE5lZWQgPD0gYnVmLmxlbmd0aCkgewogICAgICBidWYuY29weSh0aGlzLmxhc3RDaGFyLCB0aGlzLmxhc3RUb3RhbCAtIHRoaXMubGFzdE5lZWQsIDAsIHRoaXMubGFzdE5lZWQpOwogICAgICByZXR1cm4gdGhpcy5sYXN0Q2hhci50b1N0cmluZyh0aGlzLmVuY29kaW5nLCAwLCB0aGlzLmxhc3RUb3RhbCk7CiAgICB9CiAgICBidWYuY29weSh0aGlzLmxhc3RDaGFyLCB0aGlzLmxhc3RUb3RhbCAtIHRoaXMubGFzdE5lZWQsIDAsIGJ1Zi5sZW5ndGgpOwogICAgdGhpcy5sYXN0TmVlZCAtPSBidWYubGVuZ3RoOwogIH07CgogIC8vIENoZWNrcyB0aGUgdHlwZSBvZiBhIFVURi04IGJ5dGUsIHdoZXRoZXIgaXQncyBBU0NJSSwgYSBsZWFkaW5nIGJ5dGUsIG9yIGEKICAvLyBjb250aW51YXRpb24gYnl0ZS4gSWYgYW4gaW52YWxpZCBieXRlIGlzIGRldGVjdGVkLCAtMiBpcyByZXR1cm5lZC4KICBmdW5jdGlvbiB1dGY4Q2hlY2tCeXRlKGJ5dGUpIHsKICAgIGlmIChieXRlIDw9IDB4N0YpIHJldHVybiAwO2Vsc2UgaWYgKGJ5dGUgPj4gNSA9PT0gMHgwNikgcmV0dXJuIDI7ZWxzZSBpZiAoYnl0ZSA+PiA0ID09PSAweDBFKSByZXR1cm4gMztlbHNlIGlmIChieXRlID4+IDMgPT09IDB4MUUpIHJldHVybiA0OwogICAgcmV0dXJuIGJ5dGUgPj4gNiA9PT0gMHgwMiA/IC0xIDogLTI7CiAgfQoKICAvLyBDaGVja3MgYXQgbW9zdCAzIGJ5dGVzIGF0IHRoZSBlbmQgb2YgYSBCdWZmZXIgaW4gb3JkZXIgdG8gZGV0ZWN0IGFuCiAgLy8gaW5jb21wbGV0ZSBtdWx0aS1ieXRlIFVURi04IGNoYXJhY3Rlci4gVGhlIHRvdGFsIG51bWJlciBvZiBieXRlcyAoMiwgMywgb3IgNCkKICAvLyBuZWVkZWQgdG8gY29tcGxldGUgdGhlIFVURi04IGNoYXJhY3RlciAoaWYgYXBwbGljYWJsZSkgYXJlIHJldHVybmVkLgogIGZ1bmN0aW9uIHV0ZjhDaGVja0luY29tcGxldGUoc2VsZiwgYnVmLCBpKSB7CiAgICB2YXIgaiA9IGJ1Zi5sZW5ndGggLSAxOwogICAgaWYgKGogPCBpKSByZXR1cm4gMDsKICAgIHZhciBuYiA9IHV0ZjhDaGVja0J5dGUoYnVmW2pdKTsKICAgIGlmIChuYiA+PSAwKSB7CiAgICAgIGlmIChuYiA+IDApIHNlbGYubGFzdE5lZWQgPSBuYiAtIDE7CiAgICAgIHJldHVybiBuYjsKICAgIH0KICAgIGlmICgtLWogPCBpIHx8IG5iID09PSAtMikgcmV0dXJuIDA7CiAgICBuYiA9IHV0ZjhDaGVja0J5dGUoYnVmW2pdKTsKICAgIGlmIChuYiA+PSAwKSB7CiAgICAgIGlmIChuYiA+IDApIHNlbGYubGFzdE5lZWQgPSBuYiAtIDI7CiAgICAgIHJldHVybiBuYjsKICAgIH0KICAgIGlmICgtLWogPCBpIHx8IG5iID09PSAtMikgcmV0dXJuIDA7CiAgICBuYiA9IHV0ZjhDaGVja0J5dGUoYnVmW2pdKTsKICAgIGlmIChuYiA+PSAwKSB7CiAgICAgIGlmIChuYiA+IDApIHsKICAgICAgICBpZiAobmIgPT09IDIpIG5iID0gMDtlbHNlIHNlbGYubGFzdE5lZWQgPSBuYiAtIDM7CiAgICAgIH0KICAgICAgcmV0dXJuIG5iOwogICAgfQogICAgcmV0dXJuIDA7CiAgfQoKICAvLyBWYWxpZGF0ZXMgYXMgbWFueSBjb250aW51YXRpb24gYnl0ZXMgZm9yIGEgbXVsdGktYnl0ZSBVVEYtOCBjaGFyYWN0ZXIgYXMKICAvLyBuZWVkZWQgb3IgYXJlIGF2YWlsYWJsZS4gSWYgd2Ugc2VlIGEgbm9uLWNvbnRpbnVhdGlvbiBieXRlIHdoZXJlIHdlIGV4cGVjdAogIC8vIG9uZSwgd2UgInJlcGxhY2UiIHRoZSB2YWxpZGF0ZWQgY29udGludWF0aW9uIGJ5dGVzIHdlJ3ZlIHNlZW4gc28gZmFyIHdpdGgKICAvLyBhIHNpbmdsZSBVVEYtOCByZXBsYWNlbWVudCBjaGFyYWN0ZXIgKCdcdWZmZmQnKSwgdG8gbWF0Y2ggdjgncyBVVEYtOCBkZWNvZGluZwogIC8vIGJlaGF2aW9yLiBUaGUgY29udGludWF0aW9uIGJ5dGUgY2hlY2sgaXMgaW5jbHVkZWQgdGhyZWUgdGltZXMgaW4gdGhlIGNhc2UKICAvLyB3aGVyZSBhbGwgb2YgdGhlIGNvbnRpbnVhdGlvbiBieXRlcyBmb3IgYSBjaGFyYWN0ZXIgZXhpc3QgaW4gdGhlIHNhbWUgYnVmZmVyLgogIC8vIEl0IGlzIGFsc28gZG9uZSB0aGlzIHdheSBhcyBhIHNsaWdodCBwZXJmb3JtYW5jZSBpbmNyZWFzZSBpbnN0ZWFkIG9mIHVzaW5nIGEKICAvLyBsb29wLgogIGZ1bmN0aW9uIHV0ZjhDaGVja0V4dHJhQnl0ZXMoc2VsZiwgYnVmLCBwKSB7CiAgICBpZiAoKGJ1ZlswXSAmIDB4QzApICE9PSAweDgwKSB7CiAgICAgIHNlbGYubGFzdE5lZWQgPSAwOwogICAgICByZXR1cm4gJ1x1ZmZmZCc7CiAgICB9CiAgICBpZiAoc2VsZi5sYXN0TmVlZCA+IDEgJiYgYnVmLmxlbmd0aCA+IDEpIHsKICAgICAgaWYgKChidWZbMV0gJiAweEMwKSAhPT0gMHg4MCkgewogICAgICAgIHNlbGYubGFzdE5lZWQgPSAxOwogICAgICAgIHJldHVybiAnXHVmZmZkJzsKICAgICAgfQogICAgICBpZiAoc2VsZi5sYXN0TmVlZCA+IDIgJiYgYnVmLmxlbmd0aCA+IDIpIHsKICAgICAgICBpZiAoKGJ1ZlsyXSAmIDB4QzApICE9PSAweDgwKSB7CiAgICAgICAgICBzZWxmLmxhc3ROZWVkID0gMjsKICAgICAgICAgIHJldHVybiAnXHVmZmZkJzsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9CgogIC8vIEF0dGVtcHRzIHRvIGNvbXBsZXRlIGEgbXVsdGktYnl0ZSBVVEYtOCBjaGFyYWN0ZXIgdXNpbmcgYnl0ZXMgZnJvbSBhIEJ1ZmZlci4KICBmdW5jdGlvbiB1dGY4RmlsbExhc3QoYnVmKSB7CiAgICB2YXIgcCA9IHRoaXMubGFzdFRvdGFsIC0gdGhpcy5sYXN0TmVlZDsKICAgIHZhciByID0gdXRmOENoZWNrRXh0cmFCeXRlcyh0aGlzLCBidWYpOwogICAgaWYgKHIgIT09IHVuZGVmaW5lZCkgcmV0dXJuIHI7CiAgICBpZiAodGhpcy5sYXN0TmVlZCA8PSBidWYubGVuZ3RoKSB7CiAgICAgIGJ1Zi5jb3B5KHRoaXMubGFzdENoYXIsIHAsIDAsIHRoaXMubGFzdE5lZWQpOwogICAgICByZXR1cm4gdGhpcy5sYXN0Q2hhci50b1N0cmluZyh0aGlzLmVuY29kaW5nLCAwLCB0aGlzLmxhc3RUb3RhbCk7CiAgICB9CiAgICBidWYuY29weSh0aGlzLmxhc3RDaGFyLCBwLCAwLCBidWYubGVuZ3RoKTsKICAgIHRoaXMubGFzdE5lZWQgLT0gYnVmLmxlbmd0aDsKICB9CgogIC8vIFJldHVybnMgYWxsIGNvbXBsZXRlIFVURi04IGNoYXJhY3RlcnMgaW4gYSBCdWZmZXIuIElmIHRoZSBCdWZmZXIgZW5kZWQgb24gYQogIC8vIHBhcnRpYWwgY2hhcmFjdGVyLCB0aGUgY2hhcmFjdGVyJ3MgYnl0ZXMgYXJlIGJ1ZmZlcmVkIHVudGlsIHRoZSByZXF1aXJlZAogIC8vIG51bWJlciBvZiBieXRlcyBhcmUgYXZhaWxhYmxlLgogIGZ1bmN0aW9uIHV0ZjhUZXh0KGJ1ZiwgaSkgewogICAgdmFyIHRvdGFsID0gdXRmOENoZWNrSW5jb21wbGV0ZSh0aGlzLCBidWYsIGkpOwogICAgaWYgKCF0aGlzLmxhc3ROZWVkKSByZXR1cm4gYnVmLnRvU3RyaW5nKCd1dGY4JywgaSk7CiAgICB0aGlzLmxhc3RUb3RhbCA9IHRvdGFsOwogICAgdmFyIGVuZCA9IGJ1Zi5sZW5ndGggLSAodG90YWwgLSB0aGlzLmxhc3ROZWVkKTsKICAgIGJ1Zi5jb3B5KHRoaXMubGFzdENoYXIsIDAsIGVuZCk7CiAgICByZXR1cm4gYnVmLnRvU3RyaW5nKCd1dGY4JywgaSwgZW5kKTsKICB9CgogIC8vIEZvciBVVEYtOCwgYSByZXBsYWNlbWVudCBjaGFyYWN0ZXIgaXMgYWRkZWQgd2hlbiBlbmRpbmcgb24gYSBwYXJ0aWFsCiAgLy8gY2hhcmFjdGVyLgogIGZ1bmN0aW9uIHV0ZjhFbmQoYnVmKSB7CiAgICB2YXIgciA9IGJ1ZiAmJiBidWYubGVuZ3RoID8gdGhpcy53cml0ZShidWYpIDogJyc7CiAgICBpZiAodGhpcy5sYXN0TmVlZCkgcmV0dXJuIHIgKyAnXHVmZmZkJzsKICAgIHJldHVybiByOwogIH0KCiAgLy8gVVRGLTE2TEUgdHlwaWNhbGx5IG5lZWRzIHR3byBieXRlcyBwZXIgY2hhcmFjdGVyLCBidXQgZXZlbiBpZiB3ZSBoYXZlIGFuIGV2ZW4KICAvLyBudW1iZXIgb2YgYnl0ZXMgYXZhaWxhYmxlLCB3ZSBuZWVkIHRvIGNoZWNrIGlmIHdlIGVuZCBvbiBhIGxlYWRpbmcvaGlnaAogIC8vIHN1cnJvZ2F0ZS4gSW4gdGhhdCBjYXNlLCB3ZSBuZWVkIHRvIHdhaXQgZm9yIHRoZSBuZXh0IHR3byBieXRlcyBpbiBvcmRlciB0bwogIC8vIGRlY29kZSB0aGUgbGFzdCBjaGFyYWN0ZXIgcHJvcGVybHkuCiAgZnVuY3Rpb24gdXRmMTZUZXh0KGJ1ZiwgaSkgewogICAgaWYgKChidWYubGVuZ3RoIC0gaSkgJSAyID09PSAwKSB7CiAgICAgIHZhciByID0gYnVmLnRvU3RyaW5nKCd1dGYxNmxlJywgaSk7CiAgICAgIGlmIChyKSB7CiAgICAgICAgdmFyIGMgPSByLmNoYXJDb2RlQXQoci5sZW5ndGggLSAxKTsKICAgICAgICBpZiAoYyA+PSAweEQ4MDAgJiYgYyA8PSAweERCRkYpIHsKICAgICAgICAgIHRoaXMubGFzdE5lZWQgPSAyOwogICAgICAgICAgdGhpcy5sYXN0VG90YWwgPSA0OwogICAgICAgICAgdGhpcy5sYXN0Q2hhclswXSA9IGJ1ZltidWYubGVuZ3RoIC0gMl07CiAgICAgICAgICB0aGlzLmxhc3RDaGFyWzFdID0gYnVmW2J1Zi5sZW5ndGggLSAxXTsKICAgICAgICAgIHJldHVybiByLnNsaWNlKDAsIC0xKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHI7CiAgICB9CiAgICB0aGlzLmxhc3ROZWVkID0gMTsKICAgIHRoaXMubGFzdFRvdGFsID0gMjsKICAgIHRoaXMubGFzdENoYXJbMF0gPSBidWZbYnVmLmxlbmd0aCAtIDFdOwogICAgcmV0dXJuIGJ1Zi50b1N0cmluZygndXRmMTZsZScsIGksIGJ1Zi5sZW5ndGggLSAxKTsKICB9CgogIC8vIEZvciBVVEYtMTZMRSB3ZSBkbyBub3QgZXhwbGljaXRseSBhcHBlbmQgc3BlY2lhbCByZXBsYWNlbWVudCBjaGFyYWN0ZXJzIGlmIHdlCiAgLy8gZW5kIG9uIGEgcGFydGlhbCBjaGFyYWN0ZXIsIHdlIHNpbXBseSBsZXQgdjggaGFuZGxlIHRoYXQuCiAgZnVuY3Rpb24gdXRmMTZFbmQoYnVmKSB7CiAgICB2YXIgciA9IGJ1ZiAmJiBidWYubGVuZ3RoID8gdGhpcy53cml0ZShidWYpIDogJyc7CiAgICBpZiAodGhpcy5sYXN0TmVlZCkgewogICAgICB2YXIgZW5kID0gdGhpcy5sYXN0VG90YWwgLSB0aGlzLmxhc3ROZWVkOwogICAgICByZXR1cm4gciArIHRoaXMubGFzdENoYXIudG9TdHJpbmcoJ3V0ZjE2bGUnLCAwLCBlbmQpOwogICAgfQogICAgcmV0dXJuIHI7CiAgfQoKICBmdW5jdGlvbiBiYXNlNjRUZXh0KGJ1ZiwgaSkgewogICAgdmFyIG4gPSAoYnVmLmxlbmd0aCAtIGkpICUgMzsKICAgIGlmIChuID09PSAwKSByZXR1cm4gYnVmLnRvU3RyaW5nKCdiYXNlNjQnLCBpKTsKICAgIHRoaXMubGFzdE5lZWQgPSAzIC0gbjsKICAgIHRoaXMubGFzdFRvdGFsID0gMzsKICAgIGlmIChuID09PSAxKSB7CiAgICAgIHRoaXMubGFzdENoYXJbMF0gPSBidWZbYnVmLmxlbmd0aCAtIDFdOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy5sYXN0Q2hhclswXSA9IGJ1ZltidWYubGVuZ3RoIC0gMl07CiAgICAgIHRoaXMubGFzdENoYXJbMV0gPSBidWZbYnVmLmxlbmd0aCAtIDFdOwogICAgfQogICAgcmV0dXJuIGJ1Zi50b1N0cmluZygnYmFzZTY0JywgaSwgYnVmLmxlbmd0aCAtIG4pOwogIH0KCiAgZnVuY3Rpb24gYmFzZTY0RW5kKGJ1ZikgewogICAgdmFyIHIgPSBidWYgJiYgYnVmLmxlbmd0aCA/IHRoaXMud3JpdGUoYnVmKSA6ICcnOwogICAgaWYgKHRoaXMubGFzdE5lZWQpIHJldHVybiByICsgdGhpcy5sYXN0Q2hhci50b1N0cmluZygnYmFzZTY0JywgMCwgMyAtIHRoaXMubGFzdE5lZWQpOwogICAgcmV0dXJuIHI7CiAgfQoKICAvLyBQYXNzIGJ5dGVzIG9uIHRocm91Z2ggZm9yIHNpbmdsZS1ieXRlIGVuY29kaW5ncyAoZS5nLiBhc2NpaSwgbGF0aW4xLCBoZXgpCiAgZnVuY3Rpb24gc2ltcGxlV3JpdGUoYnVmKSB7CiAgICByZXR1cm4gYnVmLnRvU3RyaW5nKHRoaXMuZW5jb2RpbmcpOwogIH0KCiAgZnVuY3Rpb24gc2ltcGxlRW5kKGJ1ZikgewogICAgcmV0dXJuIGJ1ZiAmJiBidWYubGVuZ3RoID8gdGhpcy53cml0ZShidWYpIDogJyc7CiAgfQoKICB2YXIgRVJSX1NUUkVBTV9QUkVNQVRVUkVfQ0xPU0UgPSBlcnJvcnMuY29kZXMuRVJSX1NUUkVBTV9QUkVNQVRVUkVfQ0xPU0U7CgogIGZ1bmN0aW9uIG9uY2UkMShjYWxsYmFjaykgewogICAgdmFyIGNhbGxlZCA9IGZhbHNlOwogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKGNhbGxlZCkgcmV0dXJuOwogICAgICBjYWxsZWQgPSB0cnVlOwoKICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7CiAgICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTsKICAgICAgfQoKICAgICAgY2FsbGJhY2suYXBwbHkodGhpcywgYXJncyk7CiAgICB9OwogIH0KCiAgZnVuY3Rpb24gbm9vcCQxKCkge30KCiAgZnVuY3Rpb24gaXNSZXF1ZXN0JDEoc3RyZWFtKSB7CiAgICByZXR1cm4gc3RyZWFtLnNldEhlYWRlciAmJiB0eXBlb2Ygc3RyZWFtLmFib3J0ID09PSAnZnVuY3Rpb24nOwogIH0KCiAgZnVuY3Rpb24gZW9zJDEoc3RyZWFtLCBvcHRzLCBjYWxsYmFjaykgewogICAgaWYgKHR5cGVvZiBvcHRzID09PSAnZnVuY3Rpb24nKSByZXR1cm4gZW9zJDEoc3RyZWFtLCBudWxsLCBvcHRzKTsKICAgIGlmICghb3B0cykgb3B0cyA9IHt9OwogICAgY2FsbGJhY2sgPSBvbmNlJDEoY2FsbGJhY2sgfHwgbm9vcCQxKTsKICAgIHZhciByZWFkYWJsZSA9IG9wdHMucmVhZGFibGUgfHwgb3B0cy5yZWFkYWJsZSAhPT0gZmFsc2UgJiYgc3RyZWFtLnJlYWRhYmxlOwogICAgdmFyIHdyaXRhYmxlID0gb3B0cy53cml0YWJsZSB8fCBvcHRzLndyaXRhYmxlICE9PSBmYWxzZSAmJiBzdHJlYW0ud3JpdGFibGU7CgogICAgdmFyIG9ubGVnYWN5ZmluaXNoID0gZnVuY3Rpb24gb25sZWdhY3lmaW5pc2goKSB7CiAgICAgIGlmICghc3RyZWFtLndyaXRhYmxlKSBvbmZpbmlzaCgpOwogICAgfTsKCiAgICB2YXIgd3JpdGFibGVFbmRlZCA9IHN0cmVhbS5fd3JpdGFibGVTdGF0ZSAmJiBzdHJlYW0uX3dyaXRhYmxlU3RhdGUuZmluaXNoZWQ7CgogICAgdmFyIG9uZmluaXNoID0gZnVuY3Rpb24gb25maW5pc2goKSB7CiAgICAgIHdyaXRhYmxlID0gZmFsc2U7CiAgICAgIHdyaXRhYmxlRW5kZWQgPSB0cnVlOwogICAgICBpZiAoIXJlYWRhYmxlKSBjYWxsYmFjay5jYWxsKHN0cmVhbSk7CiAgICB9OwoKICAgIHZhciByZWFkYWJsZUVuZGVkID0gc3RyZWFtLl9yZWFkYWJsZVN0YXRlICYmIHN0cmVhbS5fcmVhZGFibGVTdGF0ZS5lbmRFbWl0dGVkOwoKICAgIHZhciBvbmVuZCA9IGZ1bmN0aW9uIG9uZW5kKCkgewogICAgICByZWFkYWJsZSA9IGZhbHNlOwogICAgICByZWFkYWJsZUVuZGVkID0gdHJ1ZTsKICAgICAgaWYgKCF3cml0YWJsZSkgY2FsbGJhY2suY2FsbChzdHJlYW0pOwogICAgfTsKCiAgICB2YXIgb25lcnJvciA9IGZ1bmN0aW9uIG9uZXJyb3IoZXJyKSB7CiAgICAgIGNhbGxiYWNrLmNhbGwoc3RyZWFtLCBlcnIpOwogICAgfTsKCiAgICB2YXIgb25jbG9zZSA9IGZ1bmN0aW9uIG9uY2xvc2UoKSB7CiAgICAgIHZhciBlcnI7CgogICAgICBpZiAocmVhZGFibGUgJiYgIXJlYWRhYmxlRW5kZWQpIHsKICAgICAgICBpZiAoIXN0cmVhbS5fcmVhZGFibGVTdGF0ZSB8fCAhc3RyZWFtLl9yZWFkYWJsZVN0YXRlLmVuZGVkKSBlcnIgPSBuZXcgRVJSX1NUUkVBTV9QUkVNQVRVUkVfQ0xPU0UoKTsKICAgICAgICByZXR1cm4gY2FsbGJhY2suY2FsbChzdHJlYW0sIGVycik7CiAgICAgIH0KCiAgICAgIGlmICh3cml0YWJsZSAmJiAhd3JpdGFibGVFbmRlZCkgewogICAgICAgIGlmICghc3RyZWFtLl93cml0YWJsZVN0YXRlIHx8ICFzdHJlYW0uX3dyaXRhYmxlU3RhdGUuZW5kZWQpIGVyciA9IG5ldyBFUlJfU1RSRUFNX1BSRU1BVFVSRV9DTE9TRSgpOwogICAgICAgIHJldHVybiBjYWxsYmFjay5jYWxsKHN0cmVhbSwgZXJyKTsKICAgICAgfQogICAgfTsKCiAgICB2YXIgb25yZXF1ZXN0ID0gZnVuY3Rpb24gb25yZXF1ZXN0KCkgewogICAgICBzdHJlYW0ucmVxLm9uKCdmaW5pc2gnLCBvbmZpbmlzaCk7CiAgICB9OwoKICAgIGlmIChpc1JlcXVlc3QkMShzdHJlYW0pKSB7CiAgICAgIHN0cmVhbS5vbignY29tcGxldGUnLCBvbmZpbmlzaCk7CiAgICAgIHN0cmVhbS5vbignYWJvcnQnLCBvbmNsb3NlKTsKICAgICAgaWYgKHN0cmVhbS5yZXEpIG9ucmVxdWVzdCgpO2Vsc2Ugc3RyZWFtLm9uKCdyZXF1ZXN0Jywgb25yZXF1ZXN0KTsKICAgIH0gZWxzZSBpZiAod3JpdGFibGUgJiYgIXN0cmVhbS5fd3JpdGFibGVTdGF0ZSkgewogICAgICAvLyBsZWdhY3kgc3RyZWFtcwogICAgICBzdHJlYW0ub24oJ2VuZCcsIG9ubGVnYWN5ZmluaXNoKTsKICAgICAgc3RyZWFtLm9uKCdjbG9zZScsIG9ubGVnYWN5ZmluaXNoKTsKICAgIH0KCiAgICBzdHJlYW0ub24oJ2VuZCcsIG9uZW5kKTsKICAgIHN0cmVhbS5vbignZmluaXNoJywgb25maW5pc2gpOwogICAgaWYgKG9wdHMuZXJyb3IgIT09IGZhbHNlKSBzdHJlYW0ub24oJ2Vycm9yJywgb25lcnJvcik7CiAgICBzdHJlYW0ub24oJ2Nsb3NlJywgb25jbG9zZSk7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICBzdHJlYW0ucmVtb3ZlTGlzdGVuZXIoJ2NvbXBsZXRlJywgb25maW5pc2gpOwogICAgICBzdHJlYW0ucmVtb3ZlTGlzdGVuZXIoJ2Fib3J0Jywgb25jbG9zZSk7CiAgICAgIHN0cmVhbS5yZW1vdmVMaXN0ZW5lcigncmVxdWVzdCcsIG9ucmVxdWVzdCk7CiAgICAgIGlmIChzdHJlYW0ucmVxKSBzdHJlYW0ucmVxLnJlbW92ZUxpc3RlbmVyKCdmaW5pc2gnLCBvbmZpbmlzaCk7CiAgICAgIHN0cmVhbS5yZW1vdmVMaXN0ZW5lcignZW5kJywgb25sZWdhY3lmaW5pc2gpOwogICAgICBzdHJlYW0ucmVtb3ZlTGlzdGVuZXIoJ2Nsb3NlJywgb25sZWdhY3lmaW5pc2gpOwogICAgICBzdHJlYW0ucmVtb3ZlTGlzdGVuZXIoJ2ZpbmlzaCcsIG9uZmluaXNoKTsKICAgICAgc3RyZWFtLnJlbW92ZUxpc3RlbmVyKCdlbmQnLCBvbmVuZCk7CiAgICAgIHN0cmVhbS5yZW1vdmVMaXN0ZW5lcignZXJyb3InLCBvbmVycm9yKTsKICAgICAgc3RyZWFtLnJlbW92ZUxpc3RlbmVyKCdjbG9zZScsIG9uY2xvc2UpOwogICAgfTsKICB9CgogIHZhciBlbmRPZlN0cmVhbSA9IGVvcyQxOwoKICB2YXIgX09iamVjdCRzZXRQcm90b3R5cGVPOwoKICBmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkkMShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9CgogIHZhciBmaW5pc2hlZCA9IGVuZE9mU3RyZWFtOwoKICB2YXIga0xhc3RSZXNvbHZlID0gU3ltYm9sKCdsYXN0UmVzb2x2ZScpOwogIHZhciBrTGFzdFJlamVjdCA9IFN5bWJvbCgnbGFzdFJlamVjdCcpOwogIHZhciBrRXJyb3IgPSBTeW1ib2woJ2Vycm9yJyk7CiAgdmFyIGtFbmRlZCA9IFN5bWJvbCgnZW5kZWQnKTsKICB2YXIga0xhc3RQcm9taXNlID0gU3ltYm9sKCdsYXN0UHJvbWlzZScpOwogIHZhciBrSGFuZGxlUHJvbWlzZSA9IFN5bWJvbCgnaGFuZGxlUHJvbWlzZScpOwogIHZhciBrU3RyZWFtID0gU3ltYm9sKCdzdHJlYW0nKTsKCiAgZnVuY3Rpb24gY3JlYXRlSXRlclJlc3VsdCh2YWx1ZSwgZG9uZSkgewogICAgcmV0dXJuIHsKICAgICAgdmFsdWU6IHZhbHVlLAogICAgICBkb25lOiBkb25lCiAgICB9OwogIH0KCiAgZnVuY3Rpb24gcmVhZEFuZFJlc29sdmUoaXRlcikgewogICAgdmFyIHJlc29sdmUgPSBpdGVyW2tMYXN0UmVzb2x2ZV07CgogICAgaWYgKHJlc29sdmUgIT09IG51bGwpIHsKICAgICAgdmFyIGRhdGEgPSBpdGVyW2tTdHJlYW1dLnJlYWQoKTsgLy8gd2UgZGVmZXIgaWYgZGF0YSBpcyBudWxsCiAgICAgIC8vIHdlIGNhbiBiZSBleHBlY3RpbmcgZWl0aGVyICdlbmQnIG9yCiAgICAgIC8vICdlcnJvcicKCiAgICAgIGlmIChkYXRhICE9PSBudWxsKSB7CiAgICAgICAgaXRlcltrTGFzdFByb21pc2VdID0gbnVsbDsKICAgICAgICBpdGVyW2tMYXN0UmVzb2x2ZV0gPSBudWxsOwogICAgICAgIGl0ZXJba0xhc3RSZWplY3RdID0gbnVsbDsKICAgICAgICByZXNvbHZlKGNyZWF0ZUl0ZXJSZXN1bHQoZGF0YSwgZmFsc2UpKTsKICAgICAgfQogICAgfQogIH0KCiAgZnVuY3Rpb24gb25SZWFkYWJsZShpdGVyKSB7CiAgICAvLyB3ZSB3YWl0IGZvciB0aGUgbmV4dCB0aWNrLCBiZWNhdXNlIGl0IG1pZ2h0CiAgICAvLyBlbWl0IGFuIGVycm9yIHdpdGggcHJvY2Vzcy5uZXh0VGljawogICAgbmV4dFRpY2skMShyZWFkQW5kUmVzb2x2ZSwgaXRlcik7CiAgfQoKICBmdW5jdGlvbiB3cmFwRm9yTmV4dChsYXN0UHJvbWlzZSwgaXRlcikgewogICAgcmV0dXJuIGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgbGFzdFByb21pc2UudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKGl0ZXJba0VuZGVkXSkgewogICAgICAgICAgcmVzb2x2ZShjcmVhdGVJdGVyUmVzdWx0KHVuZGVmaW5lZCwgdHJ1ZSkpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaXRlcltrSGFuZGxlUHJvbWlzZV0ocmVzb2x2ZSwgcmVqZWN0KTsKICAgICAgfSwgcmVqZWN0KTsKICAgIH07CiAgfQoKICB2YXIgQXN5bmNJdGVyYXRvclByb3RvdHlwZSA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihmdW5jdGlvbiAoKSB7fSk7CiAgdmFyIFJlYWRhYmxlU3RyZWFtQXN5bmNJdGVyYXRvclByb3RvdHlwZSA9IE9iamVjdC5zZXRQcm90b3R5cGVPZigoX09iamVjdCRzZXRQcm90b3R5cGVPID0gewogICAgZ2V0IHN0cmVhbSgpIHsKICAgICAgcmV0dXJuIHRoaXNba1N0cmVhbV07CiAgICB9LAoKICAgIG5leHQ6IGZ1bmN0aW9uIG5leHQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvLyBpZiB3ZSBoYXZlIGRldGVjdGVkIGFuIGVycm9yIGluIHRoZSBtZWFud2hpbGUKICAgICAgLy8gcmVqZWN0IHN0cmFpZ2h0IGF3YXkKICAgICAgdmFyIGVycm9yID0gdGhpc1trRXJyb3JdOwoKICAgICAgaWYgKGVycm9yICE9PSBudWxsKSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXNba0VuZGVkXSkgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoY3JlYXRlSXRlclJlc3VsdCh1bmRlZmluZWQsIHRydWUpKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXNba1N0cmVhbV0uZGVzdHJveWVkKSB7CiAgICAgICAgLy8gV2UgbmVlZCB0byBkZWZlciB2aWEgbmV4dFRpY2sgYmVjYXVzZSBpZiAuZGVzdHJveShlcnIpIGlzCiAgICAgICAgLy8gY2FsbGVkLCB0aGUgZXJyb3Igd2lsbCBiZSBlbWl0dGVkIHZpYSBuZXh0VGljaywgYW5kCiAgICAgICAgLy8gd2UgY2Fubm90IGd1YXJhbnRlZSB0aGF0IHRoZXJlIGlzIG5vIGVycm9yIGxpbmdlcmluZyBhcm91bmQKICAgICAgICAvLyB3YWl0aW5nIHRvIGJlIGVtaXR0ZWQuCiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICAgIG5leHRUaWNrJDEoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoX3RoaXNba0Vycm9yXSkgewogICAgICAgICAgICAgIHJlamVjdChfdGhpc1trRXJyb3JdKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXNvbHZlKGNyZWF0ZUl0ZXJSZXN1bHQodW5kZWZpbmVkLCB0cnVlKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9IC8vIGlmIHdlIGhhdmUgbXVsdGlwbGUgbmV4dCgpIGNhbGxzCiAgICAgIC8vIHdlIHdpbGwgd2FpdCBmb3IgdGhlIHByZXZpb3VzIFByb21pc2UgdG8gZmluaXNoCiAgICAgIC8vIHRoaXMgbG9naWMgaXMgb3B0aW1pemVkIHRvIHN1cHBvcnQgZm9yIGF3YWl0IGxvb3BzLAogICAgICAvLyB3aGVyZSBuZXh0KCkgaXMgb25seSBjYWxsZWQgb25jZSBhdCBhIHRpbWUKCgogICAgICB2YXIgbGFzdFByb21pc2UgPSB0aGlzW2tMYXN0UHJvbWlzZV07CiAgICAgIHZhciBwcm9taXNlOwoKICAgICAgaWYgKGxhc3RQcm9taXNlKSB7CiAgICAgICAgcHJvbWlzZSA9IG5ldyBQcm9taXNlKHdyYXBGb3JOZXh0KGxhc3RQcm9taXNlLCB0aGlzKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gZmFzdCBwYXRoIG5lZWRlZCB0byBzdXBwb3J0IG11bHRpcGxlIHRoaXMucHVzaCgpCiAgICAgICAgLy8gd2l0aG91dCB0cmlnZ2VyaW5nIHRoZSBuZXh0KCkgcXVldWUKICAgICAgICB2YXIgZGF0YSA9IHRoaXNba1N0cmVhbV0ucmVhZCgpOwoKICAgICAgICBpZiAoZGF0YSAhPT0gbnVsbCkgewogICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShjcmVhdGVJdGVyUmVzdWx0KGRhdGEsIGZhbHNlKSk7CiAgICAgICAgfQoKICAgICAgICBwcm9taXNlID0gbmV3IFByb21pc2UodGhpc1trSGFuZGxlUHJvbWlzZV0pOwogICAgICB9CgogICAgICB0aGlzW2tMYXN0UHJvbWlzZV0gPSBwcm9taXNlOwogICAgICByZXR1cm4gcHJvbWlzZTsKICAgIH0KICB9LCBfZGVmaW5lUHJvcGVydHkkMShfT2JqZWN0JHNldFByb3RvdHlwZU8sIFN5bWJvbC5hc3luY0l0ZXJhdG9yLCBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gdGhpczsKICB9KSwgX2RlZmluZVByb3BlcnR5JDEoX09iamVjdCRzZXRQcm90b3R5cGVPLCAicmV0dXJuIiwgZnVuY3Rpb24gX3JldHVybigpIHsKICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgIC8vIGRlc3Ryb3koZXJyLCBjYikgaXMgYSBwcml2YXRlIEFQSQogICAgLy8gd2UgY2FuIGd1YXJhbnRlZSB3ZSBoYXZlIHRoYXQgaGVyZSwgYmVjYXVzZSB3ZSBjb250cm9sIHRoZQogICAgLy8gUmVhZGFibGUgY2xhc3MgdGhpcyBpcyBhdHRhY2hlZCB0bwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgX3RoaXMyW2tTdHJlYW1dLmRlc3Ryb3kobnVsbCwgZnVuY3Rpb24gKGVycikgewogICAgICAgIGlmIChlcnIpIHsKICAgICAgICAgIHJlamVjdChlcnIpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgcmVzb2x2ZShjcmVhdGVJdGVyUmVzdWx0KHVuZGVmaW5lZCwgdHJ1ZSkpOwogICAgICB9KTsKICAgIH0pOwogIH0pLCBfT2JqZWN0JHNldFByb3RvdHlwZU8pLCBBc3luY0l0ZXJhdG9yUHJvdG90eXBlKTsKCiAgdmFyIGNyZWF0ZVJlYWRhYmxlU3RyZWFtQXN5bmNJdGVyYXRvciQxID0gZnVuY3Rpb24gY3JlYXRlUmVhZGFibGVTdHJlYW1Bc3luY0l0ZXJhdG9yKHN0cmVhbSkgewogICAgdmFyIF9PYmplY3QkY3JlYXRlOwoKICAgIHZhciBpdGVyYXRvciA9IE9iamVjdC5jcmVhdGUoUmVhZGFibGVTdHJlYW1Bc3luY0l0ZXJhdG9yUHJvdG90eXBlLCAoX09iamVjdCRjcmVhdGUgPSB7fSwgX2RlZmluZVByb3BlcnR5JDEoX09iamVjdCRjcmVhdGUsIGtTdHJlYW0sIHsKICAgICAgdmFsdWU6IHN0cmVhbSwKICAgICAgd3JpdGFibGU6IHRydWUKICAgIH0pLCBfZGVmaW5lUHJvcGVydHkkMShfT2JqZWN0JGNyZWF0ZSwga0xhc3RSZXNvbHZlLCB7CiAgICAgIHZhbHVlOiBudWxsLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSksIF9kZWZpbmVQcm9wZXJ0eSQxKF9PYmplY3QkY3JlYXRlLCBrTGFzdFJlamVjdCwgewogICAgICB2YWx1ZTogbnVsbCwKICAgICAgd3JpdGFibGU6IHRydWUKICAgIH0pLCBfZGVmaW5lUHJvcGVydHkkMShfT2JqZWN0JGNyZWF0ZSwga0Vycm9yLCB7CiAgICAgIHZhbHVlOiBudWxsLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSksIF9kZWZpbmVQcm9wZXJ0eSQxKF9PYmplY3QkY3JlYXRlLCBrRW5kZWQsIHsKICAgICAgdmFsdWU6IHN0cmVhbS5fcmVhZGFibGVTdGF0ZS5lbmRFbWl0dGVkLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSksIF9kZWZpbmVQcm9wZXJ0eSQxKF9PYmplY3QkY3JlYXRlLCBrSGFuZGxlUHJvbWlzZSwgewogICAgICB2YWx1ZTogZnVuY3Rpb24gdmFsdWUocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgdmFyIGRhdGEgPSBpdGVyYXRvcltrU3RyZWFtXS5yZWFkKCk7CgogICAgICAgIGlmIChkYXRhKSB7CiAgICAgICAgICBpdGVyYXRvcltrTGFzdFByb21pc2VdID0gbnVsbDsKICAgICAgICAgIGl0ZXJhdG9yW2tMYXN0UmVzb2x2ZV0gPSBudWxsOwogICAgICAgICAgaXRlcmF0b3Jba0xhc3RSZWplY3RdID0gbnVsbDsKICAgICAgICAgIHJlc29sdmUoY3JlYXRlSXRlclJlc3VsdChkYXRhLCBmYWxzZSkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpdGVyYXRvcltrTGFzdFJlc29sdmVdID0gcmVzb2x2ZTsKICAgICAgICAgIGl0ZXJhdG9yW2tMYXN0UmVqZWN0XSA9IHJlamVjdDsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHdyaXRhYmxlOiB0cnVlCiAgICB9KSwgX09iamVjdCRjcmVhdGUpKTsKICAgIGl0ZXJhdG9yW2tMYXN0UHJvbWlzZV0gPSBudWxsOwogICAgZmluaXNoZWQoc3RyZWFtLCBmdW5jdGlvbiAoZXJyKSB7CiAgICAgIGlmIChlcnIgJiYgZXJyLmNvZGUgIT09ICdFUlJfU1RSRUFNX1BSRU1BVFVSRV9DTE9TRScpIHsKICAgICAgICB2YXIgcmVqZWN0ID0gaXRlcmF0b3Jba0xhc3RSZWplY3RdOyAvLyByZWplY3QgaWYgd2UgYXJlIHdhaXRpbmcgZm9yIGRhdGEgaW4gdGhlIFByb21pc2UKICAgICAgICAvLyByZXR1cm5lZCBieSBuZXh0KCkgYW5kIHN0b3JlIHRoZSBlcnJvcgoKICAgICAgICBpZiAocmVqZWN0ICE9PSBudWxsKSB7CiAgICAgICAgICBpdGVyYXRvcltrTGFzdFByb21pc2VdID0gbnVsbDsKICAgICAgICAgIGl0ZXJhdG9yW2tMYXN0UmVzb2x2ZV0gPSBudWxsOwogICAgICAgICAgaXRlcmF0b3Jba0xhc3RSZWplY3RdID0gbnVsbDsKICAgICAgICAgIHJlamVjdChlcnIpOwogICAgICAgIH0KCiAgICAgICAgaXRlcmF0b3Jba0Vycm9yXSA9IGVycjsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciByZXNvbHZlID0gaXRlcmF0b3Jba0xhc3RSZXNvbHZlXTsKCiAgICAgIGlmIChyZXNvbHZlICE9PSBudWxsKSB7CiAgICAgICAgaXRlcmF0b3Jba0xhc3RQcm9taXNlXSA9IG51bGw7CiAgICAgICAgaXRlcmF0b3Jba0xhc3RSZXNvbHZlXSA9IG51bGw7CiAgICAgICAgaXRlcmF0b3Jba0xhc3RSZWplY3RdID0gbnVsbDsKICAgICAgICByZXNvbHZlKGNyZWF0ZUl0ZXJSZXN1bHQodW5kZWZpbmVkLCB0cnVlKSk7CiAgICAgIH0KCiAgICAgIGl0ZXJhdG9yW2tFbmRlZF0gPSB0cnVlOwogICAgfSk7CiAgICBzdHJlYW0ub24oJ3JlYWRhYmxlJywgb25SZWFkYWJsZS5iaW5kKG51bGwsIGl0ZXJhdG9yKSk7CiAgICByZXR1cm4gaXRlcmF0b3I7CiAgfTsKCiAgdmFyIGFzeW5jX2l0ZXJhdG9yID0gY3JlYXRlUmVhZGFibGVTdHJlYW1Bc3luY0l0ZXJhdG9yJDE7CgogIGZ1bmN0aW9uIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywga2V5LCBhcmcpIHsgdHJ5IHsgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpOyB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlOyB9IGNhdGNoIChlcnJvcikgeyByZWplY3QoZXJyb3IpOyByZXR1cm47IH0gaWYgKGluZm8uZG9uZSkgeyByZXNvbHZlKHZhbHVlKTsgfSBlbHNlIHsgUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKF9uZXh0LCBfdGhyb3cpOyB9IH0KCiAgZnVuY3Rpb24gX2FzeW5jVG9HZW5lcmF0b3IoZm4pIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgdmFyIHNlbGYgPSB0aGlzLCBhcmdzID0gYXJndW1lbnRzOyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2YXIgZ2VuID0gZm4uYXBwbHkoc2VsZiwgYXJncyk7IGZ1bmN0aW9uIF9uZXh0KHZhbHVlKSB7IGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgIm5leHQiLCB2YWx1ZSk7IH0gZnVuY3Rpb24gX3Rocm93KGVycikgeyBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJ0aHJvdyIsIGVycik7IH0gX25leHQodW5kZWZpbmVkKTsgfSk7IH07IH0KCiAgZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH0KCiAgZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9CgogIGZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9CgogIHZhciBFUlJfSU5WQUxJRF9BUkdfVFlQRSQxID0gZXJyb3JzLmNvZGVzLkVSUl9JTlZBTElEX0FSR19UWVBFOwoKICBmdW5jdGlvbiBmcm9tJDEoUmVhZGFibGUsIGl0ZXJhYmxlLCBvcHRzKSB7CiAgICB2YXIgaXRlcmF0b3I7CgogICAgaWYgKGl0ZXJhYmxlICYmIHR5cGVvZiBpdGVyYWJsZS5uZXh0ID09PSAnZnVuY3Rpb24nKSB7CiAgICAgIGl0ZXJhdG9yID0gaXRlcmFibGU7CiAgICB9IGVsc2UgaWYgKGl0ZXJhYmxlICYmIGl0ZXJhYmxlW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSkgaXRlcmF0b3IgPSBpdGVyYWJsZVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKTtlbHNlIGlmIChpdGVyYWJsZSAmJiBpdGVyYWJsZVtTeW1ib2wuaXRlcmF0b3JdKSBpdGVyYXRvciA9IGl0ZXJhYmxlW1N5bWJvbC5pdGVyYXRvcl0oKTtlbHNlIHRocm93IG5ldyBFUlJfSU5WQUxJRF9BUkdfVFlQRSQxKCdpdGVyYWJsZScsIFsnSXRlcmFibGUnXSwgaXRlcmFibGUpOwoKICAgIHZhciByZWFkYWJsZSA9IG5ldyBSZWFkYWJsZShfb2JqZWN0U3ByZWFkKHsKICAgICAgb2JqZWN0TW9kZTogdHJ1ZQogICAgfSwgb3B0cykpOyAvLyBSZWFkaW5nIGJvb2xlYW4gdG8gcHJvdGVjdCBhZ2FpbnN0IF9yZWFkCiAgICAvLyBiZWluZyBjYWxsZWQgYmVmb3JlIGxhc3QgaXRlcmF0aW9uIGNvbXBsZXRpb24uCgogICAgdmFyIHJlYWRpbmcgPSBmYWxzZTsKCiAgICByZWFkYWJsZS5fcmVhZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKCFyZWFkaW5nKSB7CiAgICAgICAgcmVhZGluZyA9IHRydWU7CiAgICAgICAgbmV4dCgpOwogICAgICB9CiAgICB9OwoKICAgIGZ1bmN0aW9uIG5leHQoKSB7CiAgICAgIHJldHVybiBfbmV4dDIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0KCiAgICBmdW5jdGlvbiBfbmV4dDIoKSB7CiAgICAgIF9uZXh0MiA9IF9hc3luY1RvR2VuZXJhdG9yKGZ1bmN0aW9uKiAoKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHZhciBfcmVmID0geWllbGQgaXRlcmF0b3IubmV4dCgpLAogICAgICAgICAgICAgIHZhbHVlID0gX3JlZi52YWx1ZSwKICAgICAgICAgICAgICBkb25lID0gX3JlZi5kb25lOwoKICAgICAgICAgIGlmIChkb25lKSB7CiAgICAgICAgICAgIHJlYWRhYmxlLnB1c2gobnVsbCk7CiAgICAgICAgICB9IGVsc2UgaWYgKHJlYWRhYmxlLnB1c2goKHlpZWxkIHZhbHVlKSkpIHsKICAgICAgICAgICAgbmV4dCgpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVhZGluZyA9IGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgcmVhZGFibGUuZGVzdHJveShlcnIpOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHJldHVybiBfbmV4dDIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0KCiAgICByZXR1cm4gcmVhZGFibGU7CiAgfQoKICB2YXIgZnJvbV8xID0gZnJvbSQxOwoKICB2YXIgX3N0cmVhbV9yZWFkYWJsZSA9IFJlYWRhYmxlOwogIC8qPHJlcGxhY2VtZW50PiovCgogIHZhciBEdXBsZXgkMTsKICAvKjwvcmVwbGFjZW1lbnQ+Ki8KCiAgUmVhZGFibGUuUmVhZGFibGVTdGF0ZSA9IFJlYWRhYmxlU3RhdGU7CiAgLyo8cmVwbGFjZW1lbnQ+Ki8KCiAgZXZlbnRzLmV4cG9ydHMuRXZlbnRFbWl0dGVyOwoKICB2YXIgRUVsaXN0ZW5lckNvdW50ID0gZnVuY3Rpb24gRUVsaXN0ZW5lckNvdW50KGVtaXR0ZXIsIHR5cGUpIHsKICAgIHJldHVybiBlbWl0dGVyLmxpc3RlbmVycyh0eXBlKS5sZW5ndGg7CiAgfTsKICAvKjwvcmVwbGFjZW1lbnQ+Ki8KCiAgLyo8cmVwbGFjZW1lbnQ+Ki8KCgogIHZhciBTdHJlYW0kMSA9IHN0cmVhbSQxOwogIC8qPC9yZXBsYWNlbWVudD4qLwoKCiAgdmFyIEJ1ZmZlciRiID0gYnVmZmVyJDIuQnVmZmVyOwoKICB2YXIgT3VyVWludDhBcnJheSA9IGNvbW1vbmpzR2xvYmFsLlVpbnQ4QXJyYXkgfHwgZnVuY3Rpb24gKCkge307CgogIGZ1bmN0aW9uIF91aW50OEFycmF5VG9CdWZmZXIoY2h1bmspIHsKICAgIHJldHVybiBCdWZmZXIkYi5mcm9tKGNodW5rKTsKICB9CgogIGZ1bmN0aW9uIF9pc1VpbnQ4QXJyYXkob2JqKSB7CiAgICByZXR1cm4gQnVmZmVyJGIuaXNCdWZmZXIob2JqKSB8fCBvYmogaW5zdGFuY2VvZiBPdXJVaW50OEFycmF5OwogIH0KICAvKjxyZXBsYWNlbWVudD4qLwoKCiAgdmFyIGRlYnVnVXRpbCA9IHV0aWw7CgogIHZhciBkZWJ1ZzsKCiAgaWYgKGRlYnVnVXRpbCAmJiBkZWJ1Z1V0aWwuZGVidWdsb2cpIHsKICAgIGRlYnVnID0gZGVidWdVdGlsLmRlYnVnbG9nKCdzdHJlYW0nKTsKICB9IGVsc2UgewogICAgZGVidWcgPSBmdW5jdGlvbiBkZWJ1ZygpIHt9OwogIH0KICAvKjwvcmVwbGFjZW1lbnQ+Ki8KCgogIHZhciBCdWZmZXJMaXN0ID0gYnVmZmVyX2xpc3Q7CgogIHZhciBkZXN0cm95SW1wbCA9IGRlc3Ryb3lfMTsKCiAgdmFyIF9yZXF1aXJlID0gc3RhdGUsCiAgICAgIGdldEhpZ2hXYXRlck1hcmsgPSBfcmVxdWlyZS5nZXRIaWdoV2F0ZXJNYXJrOwoKICB2YXIgX3JlcXVpcmUkY29kZXMkMiA9IGVycm9ycy5jb2RlcywKICAgICAgRVJSX0lOVkFMSURfQVJHX1RZUEUgPSBfcmVxdWlyZSRjb2RlcyQyLkVSUl9JTlZBTElEX0FSR19UWVBFLAogICAgICBFUlJfU1RSRUFNX1BVU0hfQUZURVJfRU9GID0gX3JlcXVpcmUkY29kZXMkMi5FUlJfU1RSRUFNX1BVU0hfQUZURVJfRU9GLAogICAgICBFUlJfTUVUSE9EX05PVF9JTVBMRU1FTlRFRCQxID0gX3JlcXVpcmUkY29kZXMkMi5FUlJfTUVUSE9EX05PVF9JTVBMRU1FTlRFRCwKICAgICAgRVJSX1NUUkVBTV9VTlNISUZUX0FGVEVSX0VORF9FVkVOVCA9IF9yZXF1aXJlJGNvZGVzJDIuRVJSX1NUUkVBTV9VTlNISUZUX0FGVEVSX0VORF9FVkVOVDsgLy8gTGF6eSBsb2FkZWQgdG8gaW1wcm92ZSB0aGUgc3RhcnR1cCBwZXJmb3JtYW5jZS4KCgogIHZhciBTdHJpbmdEZWNvZGVyOwogIHZhciBjcmVhdGVSZWFkYWJsZVN0cmVhbUFzeW5jSXRlcmF0b3I7CiAgdmFyIGZyb207CgogIGluaGVyaXRzJGQuZXhwb3J0cyhSZWFkYWJsZSwgU3RyZWFtJDEpOwoKICB2YXIgZXJyb3JPckRlc3Ryb3kgPSBkZXN0cm95SW1wbC5lcnJvck9yRGVzdHJveTsKICB2YXIga1Byb3h5RXZlbnRzID0gWydlcnJvcicsICdjbG9zZScsICdkZXN0cm95JywgJ3BhdXNlJywgJ3Jlc3VtZSddOwoKICBmdW5jdGlvbiBwcmVwZW5kTGlzdGVuZXIoZW1pdHRlciwgZXZlbnQsIGZuKSB7CiAgICAvLyBTYWRseSB0aGlzIGlzIG5vdCBjYWNoZWFibGUgYXMgc29tZSBsaWJyYXJpZXMgYnVuZGxlIHRoZWlyIG93bgogICAgLy8gZXZlbnQgZW1pdHRlciBpbXBsZW1lbnRhdGlvbiB3aXRoIHRoZW0uCiAgICBpZiAodHlwZW9mIGVtaXR0ZXIucHJlcGVuZExpc3RlbmVyID09PSAnZnVuY3Rpb24nKSByZXR1cm4gZW1pdHRlci5wcmVwZW5kTGlzdGVuZXIoZXZlbnQsIGZuKTsgLy8gVGhpcyBpcyBhIGhhY2sgdG8gbWFrZSBzdXJlIHRoYXQgb3VyIGVycm9yIGhhbmRsZXIgaXMgYXR0YWNoZWQgYmVmb3JlIGFueQogICAgLy8gdXNlcmxhbmQgb25lcy4gIE5FVkVSIERPIFRISVMuIFRoaXMgaXMgaGVyZSBvbmx5IGJlY2F1c2UgdGhpcyBjb2RlIG5lZWRzCiAgICAvLyB0byBjb250aW51ZSB0byB3b3JrIHdpdGggb2xkZXIgdmVyc2lvbnMgb2YgTm9kZS5qcyB0aGF0IGRvIG5vdCBpbmNsdWRlCiAgICAvLyB0aGUgcHJlcGVuZExpc3RlbmVyKCkgbWV0aG9kLiBUaGUgZ29hbCBpcyB0byBldmVudHVhbGx5IHJlbW92ZSB0aGlzIGhhY2suCgogICAgaWYgKCFlbWl0dGVyLl9ldmVudHMgfHwgIWVtaXR0ZXIuX2V2ZW50c1tldmVudF0pIGVtaXR0ZXIub24oZXZlbnQsIGZuKTtlbHNlIGlmIChBcnJheS5pc0FycmF5KGVtaXR0ZXIuX2V2ZW50c1tldmVudF0pKSBlbWl0dGVyLl9ldmVudHNbZXZlbnRdLnVuc2hpZnQoZm4pO2Vsc2UgZW1pdHRlci5fZXZlbnRzW2V2ZW50XSA9IFtmbiwgZW1pdHRlci5fZXZlbnRzW2V2ZW50XV07CiAgfQoKICBmdW5jdGlvbiBSZWFkYWJsZVN0YXRlKG9wdGlvbnMsIHN0cmVhbSwgaXNEdXBsZXgpIHsKICAgIER1cGxleCQxID0gRHVwbGV4JDEgfHwgX3N0cmVhbV9kdXBsZXg7CiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsgLy8gRHVwbGV4IHN0cmVhbXMgYXJlIGJvdGggcmVhZGFibGUgYW5kIHdyaXRhYmxlLCBidXQgc2hhcmUKICAgIC8vIHRoZSBzYW1lIG9wdGlvbnMgb2JqZWN0LgogICAgLy8gSG93ZXZlciwgc29tZSBjYXNlcyByZXF1aXJlIHNldHRpbmcgb3B0aW9ucyB0byBkaWZmZXJlbnQKICAgIC8vIHZhbHVlcyBmb3IgdGhlIHJlYWRhYmxlIGFuZCB0aGUgd3JpdGFibGUgc2lkZXMgb2YgdGhlIGR1cGxleCBzdHJlYW0uCiAgICAvLyBUaGVzZSBvcHRpb25zIGNhbiBiZSBwcm92aWRlZCBzZXBhcmF0ZWx5IGFzIHJlYWRhYmxlWFhYIGFuZCB3cml0YWJsZVhYWC4KCiAgICBpZiAodHlwZW9mIGlzRHVwbGV4ICE9PSAnYm9vbGVhbicpIGlzRHVwbGV4ID0gc3RyZWFtIGluc3RhbmNlb2YgRHVwbGV4JDE7IC8vIG9iamVjdCBzdHJlYW0gZmxhZy4gVXNlZCB0byBtYWtlIHJlYWQobikgaWdub3JlIG4gYW5kIHRvCiAgICAvLyBtYWtlIGFsbCB0aGUgYnVmZmVyIG1lcmdpbmcgYW5kIGxlbmd0aCBjaGVja3MgZ28gYXdheQoKICAgIHRoaXMub2JqZWN0TW9kZSA9ICEhb3B0aW9ucy5vYmplY3RNb2RlOwogICAgaWYgKGlzRHVwbGV4KSB0aGlzLm9iamVjdE1vZGUgPSB0aGlzLm9iamVjdE1vZGUgfHwgISFvcHRpb25zLnJlYWRhYmxlT2JqZWN0TW9kZTsgLy8gdGhlIHBvaW50IGF0IHdoaWNoIGl0IHN0b3BzIGNhbGxpbmcgX3JlYWQoKSB0byBmaWxsIHRoZSBidWZmZXIKICAgIC8vIE5vdGU6IDAgaXMgYSB2YWxpZCB2YWx1ZSwgbWVhbnMgImRvbid0IGNhbGwgX3JlYWQgcHJlZW1wdGl2ZWx5IGV2ZXIiCgogICAgdGhpcy5oaWdoV2F0ZXJNYXJrID0gZ2V0SGlnaFdhdGVyTWFyayh0aGlzLCBvcHRpb25zLCAncmVhZGFibGVIaWdoV2F0ZXJNYXJrJywgaXNEdXBsZXgpOyAvLyBBIGxpbmtlZCBsaXN0IGlzIHVzZWQgdG8gc3RvcmUgZGF0YSBjaHVua3MgaW5zdGVhZCBvZiBhbiBhcnJheSBiZWNhdXNlIHRoZQogICAgLy8gbGlua2VkIGxpc3QgY2FuIHJlbW92ZSBlbGVtZW50cyBmcm9tIHRoZSBiZWdpbm5pbmcgZmFzdGVyIHRoYW4KICAgIC8vIGFycmF5LnNoaWZ0KCkKCiAgICB0aGlzLmJ1ZmZlciA9IG5ldyBCdWZmZXJMaXN0KCk7CiAgICB0aGlzLmxlbmd0aCA9IDA7CiAgICB0aGlzLnBpcGVzID0gbnVsbDsKICAgIHRoaXMucGlwZXNDb3VudCA9IDA7CiAgICB0aGlzLmZsb3dpbmcgPSBudWxsOwogICAgdGhpcy5lbmRlZCA9IGZhbHNlOwogICAgdGhpcy5lbmRFbWl0dGVkID0gZmFsc2U7CiAgICB0aGlzLnJlYWRpbmcgPSBmYWxzZTsgLy8gYSBmbGFnIHRvIGJlIGFibGUgdG8gdGVsbCBpZiB0aGUgZXZlbnQgJ3JlYWRhYmxlJy8nZGF0YScgaXMgZW1pdHRlZAogICAgLy8gaW1tZWRpYXRlbHksIG9yIG9uIGEgbGF0ZXIgdGljay4gIFdlIHNldCB0aGlzIHRvIHRydWUgYXQgZmlyc3QsIGJlY2F1c2UKICAgIC8vIGFueSBhY3Rpb25zIHRoYXQgc2hvdWxkbid0IGhhcHBlbiB1bnRpbCAibGF0ZXIiIHNob3VsZCBnZW5lcmFsbHkgYWxzbwogICAgLy8gbm90IGhhcHBlbiBiZWZvcmUgdGhlIGZpcnN0IHJlYWQgY2FsbC4KCiAgICB0aGlzLnN5bmMgPSB0cnVlOyAvLyB3aGVuZXZlciB3ZSByZXR1cm4gbnVsbCwgdGhlbiB3ZSBzZXQgYSBmbGFnIHRvIHNheQogICAgLy8gdGhhdCB3ZSdyZSBhd2FpdGluZyBhICdyZWFkYWJsZScgZXZlbnQgZW1pc3Npb24uCgogICAgdGhpcy5uZWVkUmVhZGFibGUgPSBmYWxzZTsKICAgIHRoaXMuZW1pdHRlZFJlYWRhYmxlID0gZmFsc2U7CiAgICB0aGlzLnJlYWRhYmxlTGlzdGVuaW5nID0gZmFsc2U7CiAgICB0aGlzLnJlc3VtZVNjaGVkdWxlZCA9IGZhbHNlOwogICAgdGhpcy5wYXVzZWQgPSB0cnVlOyAvLyBTaG91bGQgY2xvc2UgYmUgZW1pdHRlZCBvbiBkZXN0cm95LiBEZWZhdWx0cyB0byB0cnVlLgoKICAgIHRoaXMuZW1pdENsb3NlID0gb3B0aW9ucy5lbWl0Q2xvc2UgIT09IGZhbHNlOyAvLyBTaG91bGQgLmRlc3Ryb3koKSBiZSBjYWxsZWQgYWZ0ZXIgJ2VuZCcgKGFuZCBwb3RlbnRpYWxseSAnZmluaXNoJykKCiAgICB0aGlzLmF1dG9EZXN0cm95ID0gISFvcHRpb25zLmF1dG9EZXN0cm95OyAvLyBoYXMgaXQgYmVlbiBkZXN0cm95ZWQKCiAgICB0aGlzLmRlc3Ryb3llZCA9IGZhbHNlOyAvLyBDcnlwdG8gaXMga2luZCBvZiBvbGQgYW5kIGNydXN0eS4gIEhpc3RvcmljYWxseSwgaXRzIGRlZmF1bHQgc3RyaW5nCiAgICAvLyBlbmNvZGluZyBpcyAnYmluYXJ5JyBzbyB3ZSBoYXZlIHRvIG1ha2UgdGhpcyBjb25maWd1cmFibGUuCiAgICAvLyBFdmVyeXRoaW5nIGVsc2UgaW4gdGhlIHVuaXZlcnNlIHVzZXMgJ3V0ZjgnLCB0aG91Z2guCgogICAgdGhpcy5kZWZhdWx0RW5jb2RpbmcgPSBvcHRpb25zLmRlZmF1bHRFbmNvZGluZyB8fCAndXRmOCc7IC8vIHRoZSBudW1iZXIgb2Ygd3JpdGVycyB0aGF0IGFyZSBhd2FpdGluZyBhIGRyYWluIGV2ZW50IGluIC5waXBlKClzCgogICAgdGhpcy5hd2FpdERyYWluID0gMDsgLy8gaWYgdHJ1ZSwgYSBtYXliZVJlYWRNb3JlIGhhcyBiZWVuIHNjaGVkdWxlZAoKICAgIHRoaXMucmVhZGluZ01vcmUgPSBmYWxzZTsKICAgIHRoaXMuZGVjb2RlciA9IG51bGw7CiAgICB0aGlzLmVuY29kaW5nID0gbnVsbDsKCiAgICBpZiAob3B0aW9ucy5lbmNvZGluZykgewogICAgICBpZiAoIVN0cmluZ0RlY29kZXIpIFN0cmluZ0RlY29kZXIgPSBzdHJpbmdfZGVjb2Rlci5TdHJpbmdEZWNvZGVyOwogICAgICB0aGlzLmRlY29kZXIgPSBuZXcgU3RyaW5nRGVjb2RlcihvcHRpb25zLmVuY29kaW5nKTsKICAgICAgdGhpcy5lbmNvZGluZyA9IG9wdGlvbnMuZW5jb2Rpbmc7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBSZWFkYWJsZShvcHRpb25zKSB7CiAgICBEdXBsZXgkMSA9IER1cGxleCQxIHx8IF9zdHJlYW1fZHVwbGV4OwogICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFJlYWRhYmxlKSkgcmV0dXJuIG5ldyBSZWFkYWJsZShvcHRpb25zKTsgLy8gQ2hlY2tpbmcgZm9yIGEgU3RyZWFtLkR1cGxleCBpbnN0YW5jZSBpcyBmYXN0ZXIgaGVyZSBpbnN0ZWFkIG9mIGluc2lkZQogICAgLy8gdGhlIFJlYWRhYmxlU3RhdGUgY29uc3RydWN0b3IsIGF0IGxlYXN0IHdpdGggVjggNi41CgogICAgdmFyIGlzRHVwbGV4ID0gdGhpcyBpbnN0YW5jZW9mIER1cGxleCQxOwogICAgdGhpcy5fcmVhZGFibGVTdGF0ZSA9IG5ldyBSZWFkYWJsZVN0YXRlKG9wdGlvbnMsIHRoaXMsIGlzRHVwbGV4KTsgLy8gbGVnYWN5CgogICAgdGhpcy5yZWFkYWJsZSA9IHRydWU7CgogICAgaWYgKG9wdGlvbnMpIHsKICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLnJlYWQgPT09ICdmdW5jdGlvbicpIHRoaXMuX3JlYWQgPSBvcHRpb25zLnJlYWQ7CiAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5kZXN0cm95ID09PSAnZnVuY3Rpb24nKSB0aGlzLl9kZXN0cm95ID0gb3B0aW9ucy5kZXN0cm95OwogICAgfQoKICAgIFN0cmVhbSQxLmNhbGwodGhpcyk7CiAgfQoKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVhZGFibGUucHJvdG90eXBlLCAnZGVzdHJveWVkJywgewogICAgLy8gbWFraW5nIGl0IGV4cGxpY2l0IHRoaXMgcHJvcGVydHkgaXMgbm90IGVudW1lcmFibGUKICAgIC8vIGJlY2F1c2Ugb3RoZXJ3aXNlIHNvbWUgcHJvdG90eXBlIG1hbmlwdWxhdGlvbiBpbgogICAgLy8gdXNlcmxhbmQgd2lsbCBmYWlsCiAgICBlbnVtZXJhYmxlOiBmYWxzZSwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICBpZiAodGhpcy5fcmVhZGFibGVTdGF0ZSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5fcmVhZGFibGVTdGF0ZS5kZXN0cm95ZWQ7CiAgICB9LAogICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsdWUpIHsKICAgICAgLy8gd2UgaWdub3JlIHRoZSB2YWx1ZSBpZiB0aGUgc3RyZWFtCiAgICAgIC8vIGhhcyBub3QgYmVlbiBpbml0aWFsaXplZCB5ZXQKICAgICAgaWYgKCF0aGlzLl9yZWFkYWJsZVN0YXRlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9IC8vIGJhY2t3YXJkIGNvbXBhdGliaWxpdHksIHRoZSB1c2VyIGlzIGV4cGxpY2l0bHkKICAgICAgLy8gbWFuYWdpbmcgZGVzdHJveWVkCgoKICAgICAgdGhpcy5fcmVhZGFibGVTdGF0ZS5kZXN0cm95ZWQgPSB2YWx1ZTsKICAgIH0KICB9KTsKICBSZWFkYWJsZS5wcm90b3R5cGUuZGVzdHJveSA9IGRlc3Ryb3lJbXBsLmRlc3Ryb3k7CiAgUmVhZGFibGUucHJvdG90eXBlLl91bmRlc3Ryb3kgPSBkZXN0cm95SW1wbC51bmRlc3Ryb3k7CgogIFJlYWRhYmxlLnByb3RvdHlwZS5fZGVzdHJveSA9IGZ1bmN0aW9uIChlcnIsIGNiKSB7CiAgICBjYihlcnIpOwogIH07IC8vIE1hbnVhbGx5IHNob3ZlIHNvbWV0aGluZyBpbnRvIHRoZSByZWFkKCkgYnVmZmVyLgogIC8vIFRoaXMgcmV0dXJucyB0cnVlIGlmIHRoZSBoaWdoV2F0ZXJNYXJrIGhhcyBub3QgYmVlbiBoaXQgeWV0LAogIC8vIHNpbWlsYXIgdG8gaG93IFdyaXRhYmxlLndyaXRlKCkgcmV0dXJucyB0cnVlIGlmIHlvdSBzaG91bGQKICAvLyB3cml0ZSgpIHNvbWUgbW9yZS4KCgogIFJlYWRhYmxlLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gKGNodW5rLCBlbmNvZGluZykgewogICAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTsKICAgIHZhciBza2lwQ2h1bmtDaGVjazsKCiAgICBpZiAoIXN0YXRlLm9iamVjdE1vZGUpIHsKICAgICAgaWYgKHR5cGVvZiBjaHVuayA9PT0gJ3N0cmluZycpIHsKICAgICAgICBlbmNvZGluZyA9IGVuY29kaW5nIHx8IHN0YXRlLmRlZmF1bHRFbmNvZGluZzsKCiAgICAgICAgaWYgKGVuY29kaW5nICE9PSBzdGF0ZS5lbmNvZGluZykgewogICAgICAgICAgY2h1bmsgPSBCdWZmZXIkYi5mcm9tKGNodW5rLCBlbmNvZGluZyk7CiAgICAgICAgICBlbmNvZGluZyA9ICcnOwogICAgICAgIH0KCiAgICAgICAgc2tpcENodW5rQ2hlY2sgPSB0cnVlOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICBza2lwQ2h1bmtDaGVjayA9IHRydWU7CiAgICB9CgogICAgcmV0dXJuIHJlYWRhYmxlQWRkQ2h1bmsodGhpcywgY2h1bmssIGVuY29kaW5nLCBmYWxzZSwgc2tpcENodW5rQ2hlY2spOwogIH07IC8vIFVuc2hpZnQgc2hvdWxkICphbHdheXMqIGJlIHNvbWV0aGluZyBkaXJlY3RseSBvdXQgb2YgcmVhZCgpCgoKICBSZWFkYWJsZS5wcm90b3R5cGUudW5zaGlmdCA9IGZ1bmN0aW9uIChjaHVuaykgewogICAgcmV0dXJuIHJlYWRhYmxlQWRkQ2h1bmsodGhpcywgY2h1bmssIG51bGwsIHRydWUsIGZhbHNlKTsKICB9OwoKICBmdW5jdGlvbiByZWFkYWJsZUFkZENodW5rKHN0cmVhbSwgY2h1bmssIGVuY29kaW5nLCBhZGRUb0Zyb250LCBza2lwQ2h1bmtDaGVjaykgewogICAgZGVidWcoJ3JlYWRhYmxlQWRkQ2h1bmsnLCBjaHVuayk7CiAgICB2YXIgc3RhdGUgPSBzdHJlYW0uX3JlYWRhYmxlU3RhdGU7CgogICAgaWYgKGNodW5rID09PSBudWxsKSB7CiAgICAgIHN0YXRlLnJlYWRpbmcgPSBmYWxzZTsKICAgICAgb25Fb2ZDaHVuayhzdHJlYW0sIHN0YXRlKTsKICAgIH0gZWxzZSB7CiAgICAgIHZhciBlcjsKICAgICAgaWYgKCFza2lwQ2h1bmtDaGVjaykgZXIgPSBjaHVua0ludmFsaWQoc3RhdGUsIGNodW5rKTsKCiAgICAgIGlmIChlcikgewogICAgICAgIGVycm9yT3JEZXN0cm95KHN0cmVhbSwgZXIpOwogICAgICB9IGVsc2UgaWYgKHN0YXRlLm9iamVjdE1vZGUgfHwgY2h1bmsgJiYgY2h1bmsubGVuZ3RoID4gMCkgewogICAgICAgIGlmICh0eXBlb2YgY2h1bmsgIT09ICdzdHJpbmcnICYmICFzdGF0ZS5vYmplY3RNb2RlICYmIE9iamVjdC5nZXRQcm90b3R5cGVPZihjaHVuaykgIT09IEJ1ZmZlciRiLnByb3RvdHlwZSkgewogICAgICAgICAgY2h1bmsgPSBfdWludDhBcnJheVRvQnVmZmVyKGNodW5rKTsKICAgICAgICB9CgogICAgICAgIGlmIChhZGRUb0Zyb250KSB7CiAgICAgICAgICBpZiAoc3RhdGUuZW5kRW1pdHRlZCkgZXJyb3JPckRlc3Ryb3koc3RyZWFtLCBuZXcgRVJSX1NUUkVBTV9VTlNISUZUX0FGVEVSX0VORF9FVkVOVCgpKTtlbHNlIGFkZENodW5rKHN0cmVhbSwgc3RhdGUsIGNodW5rLCB0cnVlKTsKICAgICAgICB9IGVsc2UgaWYgKHN0YXRlLmVuZGVkKSB7CiAgICAgICAgICBlcnJvck9yRGVzdHJveShzdHJlYW0sIG5ldyBFUlJfU1RSRUFNX1BVU0hfQUZURVJfRU9GKCkpOwogICAgICAgIH0gZWxzZSBpZiAoc3RhdGUuZGVzdHJveWVkKSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHN0YXRlLnJlYWRpbmcgPSBmYWxzZTsKCiAgICAgICAgICBpZiAoc3RhdGUuZGVjb2RlciAmJiAhZW5jb2RpbmcpIHsKICAgICAgICAgICAgY2h1bmsgPSBzdGF0ZS5kZWNvZGVyLndyaXRlKGNodW5rKTsKICAgICAgICAgICAgaWYgKHN0YXRlLm9iamVjdE1vZGUgfHwgY2h1bmsubGVuZ3RoICE9PSAwKSBhZGRDaHVuayhzdHJlYW0sIHN0YXRlLCBjaHVuaywgZmFsc2UpO2Vsc2UgbWF5YmVSZWFkTW9yZShzdHJlYW0sIHN0YXRlKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGFkZENodW5rKHN0cmVhbSwgc3RhdGUsIGNodW5rLCBmYWxzZSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKCFhZGRUb0Zyb250KSB7CiAgICAgICAgc3RhdGUucmVhZGluZyA9IGZhbHNlOwogICAgICAgIG1heWJlUmVhZE1vcmUoc3RyZWFtLCBzdGF0ZSk7CiAgICAgIH0KICAgIH0gLy8gV2UgY2FuIHB1c2ggbW9yZSBkYXRhIGlmIHdlIGFyZSBiZWxvdyB0aGUgaGlnaFdhdGVyTWFyay4KICAgIC8vIEFsc28sIGlmIHdlIGhhdmUgbm8gZGF0YSB5ZXQsIHdlIGNhbiBzdGFuZCBzb21lIG1vcmUgYnl0ZXMuCiAgICAvLyBUaGlzIGlzIHRvIHdvcmsgYXJvdW5kIGNhc2VzIHdoZXJlIGh3bT0wLCBzdWNoIGFzIHRoZSByZXBsLgoKCiAgICByZXR1cm4gIXN0YXRlLmVuZGVkICYmIChzdGF0ZS5sZW5ndGggPCBzdGF0ZS5oaWdoV2F0ZXJNYXJrIHx8IHN0YXRlLmxlbmd0aCA9PT0gMCk7CiAgfQoKICBmdW5jdGlvbiBhZGRDaHVuayhzdHJlYW0sIHN0YXRlLCBjaHVuaywgYWRkVG9Gcm9udCkgewogICAgaWYgKHN0YXRlLmZsb3dpbmcgJiYgc3RhdGUubGVuZ3RoID09PSAwICYmICFzdGF0ZS5zeW5jKSB7CiAgICAgIHN0YXRlLmF3YWl0RHJhaW4gPSAwOwogICAgICBzdHJlYW0uZW1pdCgnZGF0YScsIGNodW5rKTsKICAgIH0gZWxzZSB7CiAgICAgIC8vIHVwZGF0ZSB0aGUgYnVmZmVyIGluZm8uCiAgICAgIHN0YXRlLmxlbmd0aCArPSBzdGF0ZS5vYmplY3RNb2RlID8gMSA6IGNodW5rLmxlbmd0aDsKICAgICAgaWYgKGFkZFRvRnJvbnQpIHN0YXRlLmJ1ZmZlci51bnNoaWZ0KGNodW5rKTtlbHNlIHN0YXRlLmJ1ZmZlci5wdXNoKGNodW5rKTsKICAgICAgaWYgKHN0YXRlLm5lZWRSZWFkYWJsZSkgZW1pdFJlYWRhYmxlKHN0cmVhbSk7CiAgICB9CgogICAgbWF5YmVSZWFkTW9yZShzdHJlYW0sIHN0YXRlKTsKICB9CgogIGZ1bmN0aW9uIGNodW5rSW52YWxpZChzdGF0ZSwgY2h1bmspIHsKICAgIHZhciBlcjsKCiAgICBpZiAoIV9pc1VpbnQ4QXJyYXkoY2h1bmspICYmIHR5cGVvZiBjaHVuayAhPT0gJ3N0cmluZycgJiYgY2h1bmsgIT09IHVuZGVmaW5lZCAmJiAhc3RhdGUub2JqZWN0TW9kZSkgewogICAgICBlciA9IG5ldyBFUlJfSU5WQUxJRF9BUkdfVFlQRSgnY2h1bmsnLCBbJ3N0cmluZycsICdCdWZmZXInLCAnVWludDhBcnJheSddLCBjaHVuayk7CiAgICB9CgogICAgcmV0dXJuIGVyOwogIH0KCiAgUmVhZGFibGUucHJvdG90eXBlLmlzUGF1c2VkID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZyA9PT0gZmFsc2U7CiAgfTsgLy8gYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuCgoKICBSZWFkYWJsZS5wcm90b3R5cGUuc2V0RW5jb2RpbmcgPSBmdW5jdGlvbiAoZW5jKSB7CiAgICBpZiAoIVN0cmluZ0RlY29kZXIpIFN0cmluZ0RlY29kZXIgPSBzdHJpbmdfZGVjb2Rlci5TdHJpbmdEZWNvZGVyOwogICAgdmFyIGRlY29kZXIgPSBuZXcgU3RyaW5nRGVjb2RlcihlbmMpOwogICAgdGhpcy5fcmVhZGFibGVTdGF0ZS5kZWNvZGVyID0gZGVjb2RlcjsgLy8gSWYgc2V0RW5jb2RpbmcobnVsbCksIGRlY29kZXIuZW5jb2RpbmcgZXF1YWxzIHV0ZjgKCiAgICB0aGlzLl9yZWFkYWJsZVN0YXRlLmVuY29kaW5nID0gdGhpcy5fcmVhZGFibGVTdGF0ZS5kZWNvZGVyLmVuY29kaW5nOyAvLyBJdGVyYXRlIG92ZXIgY3VycmVudCBidWZmZXIgdG8gY29udmVydCBhbHJlYWR5IHN0b3JlZCBCdWZmZXJzOgoKICAgIHZhciBwID0gdGhpcy5fcmVhZGFibGVTdGF0ZS5idWZmZXIuaGVhZDsKICAgIHZhciBjb250ZW50ID0gJyc7CgogICAgd2hpbGUgKHAgIT09IG51bGwpIHsKICAgICAgY29udGVudCArPSBkZWNvZGVyLndyaXRlKHAuZGF0YSk7CiAgICAgIHAgPSBwLm5leHQ7CiAgICB9CgogICAgdGhpcy5fcmVhZGFibGVTdGF0ZS5idWZmZXIuY2xlYXIoKTsKCiAgICBpZiAoY29udGVudCAhPT0gJycpIHRoaXMuX3JlYWRhYmxlU3RhdGUuYnVmZmVyLnB1c2goY29udGVudCk7CiAgICB0aGlzLl9yZWFkYWJsZVN0YXRlLmxlbmd0aCA9IGNvbnRlbnQubGVuZ3RoOwogICAgcmV0dXJuIHRoaXM7CiAgfTsgLy8gRG9uJ3QgcmFpc2UgdGhlIGh3bSA+IDFHQgoKCiAgdmFyIE1BWF9IV00gPSAweDQwMDAwMDAwOwoKICBmdW5jdGlvbiBjb21wdXRlTmV3SGlnaFdhdGVyTWFyayhuKSB7CiAgICBpZiAobiA+PSBNQVhfSFdNKSB7CiAgICAgIC8vIFRPRE8ocm9uYWcpOiBUaHJvdyBFUlJfVkFMVUVfT1VUX09GX1JBTkdFLgogICAgICBuID0gTUFYX0hXTTsKICAgIH0gZWxzZSB7CiAgICAgIC8vIEdldCB0aGUgbmV4dCBoaWdoZXN0IHBvd2VyIG9mIDIgdG8gcHJldmVudCBpbmNyZWFzaW5nIGh3bSBleGNlc3NpdmVseSBpbgogICAgICAvLyB0aW55IGFtb3VudHMKICAgICAgbi0tOwogICAgICBuIHw9IG4gPj4+IDE7CiAgICAgIG4gfD0gbiA+Pj4gMjsKICAgICAgbiB8PSBuID4+PiA0OwogICAgICBuIHw9IG4gPj4+IDg7CiAgICAgIG4gfD0gbiA+Pj4gMTY7CiAgICAgIG4rKzsKICAgIH0KCiAgICByZXR1cm4gbjsKICB9IC8vIFRoaXMgZnVuY3Rpb24gaXMgZGVzaWduZWQgdG8gYmUgaW5saW5hYmxlLCBzbyBwbGVhc2UgdGFrZSBjYXJlIHdoZW4gbWFraW5nCiAgLy8gY2hhbmdlcyB0byB0aGUgZnVuY3Rpb24gYm9keS4KCgogIGZ1bmN0aW9uIGhvd011Y2hUb1JlYWQobiwgc3RhdGUpIHsKICAgIGlmIChuIDw9IDAgfHwgc3RhdGUubGVuZ3RoID09PSAwICYmIHN0YXRlLmVuZGVkKSByZXR1cm4gMDsKICAgIGlmIChzdGF0ZS5vYmplY3RNb2RlKSByZXR1cm4gMTsKCiAgICBpZiAobiAhPT0gbikgewogICAgICAvLyBPbmx5IGZsb3cgb25lIGJ1ZmZlciBhdCBhIHRpbWUKICAgICAgaWYgKHN0YXRlLmZsb3dpbmcgJiYgc3RhdGUubGVuZ3RoKSByZXR1cm4gc3RhdGUuYnVmZmVyLmhlYWQuZGF0YS5sZW5ndGg7ZWxzZSByZXR1cm4gc3RhdGUubGVuZ3RoOwogICAgfSAvLyBJZiB3ZSdyZSBhc2tpbmcgZm9yIG1vcmUgdGhhbiB0aGUgY3VycmVudCBod20sIHRoZW4gcmFpc2UgdGhlIGh3bS4KCgogICAgaWYgKG4gPiBzdGF0ZS5oaWdoV2F0ZXJNYXJrKSBzdGF0ZS5oaWdoV2F0ZXJNYXJrID0gY29tcHV0ZU5ld0hpZ2hXYXRlck1hcmsobik7CiAgICBpZiAobiA8PSBzdGF0ZS5sZW5ndGgpIHJldHVybiBuOyAvLyBEb24ndCBoYXZlIGVub3VnaAoKICAgIGlmICghc3RhdGUuZW5kZWQpIHsKICAgICAgc3RhdGUubmVlZFJlYWRhYmxlID0gdHJ1ZTsKICAgICAgcmV0dXJuIDA7CiAgICB9CgogICAgcmV0dXJuIHN0YXRlLmxlbmd0aDsKICB9IC8vIHlvdSBjYW4gb3ZlcnJpZGUgZWl0aGVyIHRoaXMgbWV0aG9kLCBvciB0aGUgYXN5bmMgX3JlYWQobikgYmVsb3cuCgoKICBSZWFkYWJsZS5wcm90b3R5cGUucmVhZCA9IGZ1bmN0aW9uIChuKSB7CiAgICBkZWJ1ZygncmVhZCcsIG4pOwogICAgbiA9IHBhcnNlSW50KG4sIDEwKTsKICAgIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7CiAgICB2YXIgbk9yaWcgPSBuOwogICAgaWYgKG4gIT09IDApIHN0YXRlLmVtaXR0ZWRSZWFkYWJsZSA9IGZhbHNlOyAvLyBpZiB3ZSdyZSBkb2luZyByZWFkKDApIHRvIHRyaWdnZXIgYSByZWFkYWJsZSBldmVudCwgYnV0IHdlCiAgICAvLyBhbHJlYWR5IGhhdmUgYSBidW5jaCBvZiBkYXRhIGluIHRoZSBidWZmZXIsIHRoZW4ganVzdCB0cmlnZ2VyCiAgICAvLyB0aGUgJ3JlYWRhYmxlJyBldmVudCBhbmQgbW92ZSBvbi4KCiAgICBpZiAobiA9PT0gMCAmJiBzdGF0ZS5uZWVkUmVhZGFibGUgJiYgKChzdGF0ZS5oaWdoV2F0ZXJNYXJrICE9PSAwID8gc3RhdGUubGVuZ3RoID49IHN0YXRlLmhpZ2hXYXRlck1hcmsgOiBzdGF0ZS5sZW5ndGggPiAwKSB8fCBzdGF0ZS5lbmRlZCkpIHsKICAgICAgZGVidWcoJ3JlYWQ6IGVtaXRSZWFkYWJsZScsIHN0YXRlLmxlbmd0aCwgc3RhdGUuZW5kZWQpOwogICAgICBpZiAoc3RhdGUubGVuZ3RoID09PSAwICYmIHN0YXRlLmVuZGVkKSBlbmRSZWFkYWJsZSh0aGlzKTtlbHNlIGVtaXRSZWFkYWJsZSh0aGlzKTsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CgogICAgbiA9IGhvd011Y2hUb1JlYWQobiwgc3RhdGUpOyAvLyBpZiB3ZSd2ZSBlbmRlZCwgYW5kIHdlJ3JlIG5vdyBjbGVhciwgdGhlbiBmaW5pc2ggaXQgdXAuCgogICAgaWYgKG4gPT09IDAgJiYgc3RhdGUuZW5kZWQpIHsKICAgICAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCkgZW5kUmVhZGFibGUodGhpcyk7CiAgICAgIHJldHVybiBudWxsOwogICAgfSAvLyBBbGwgdGhlIGFjdHVhbCBjaHVuayBnZW5lcmF0aW9uIGxvZ2ljIG5lZWRzIHRvIGJlCiAgICAvLyAqYmVsb3cqIHRoZSBjYWxsIHRvIF9yZWFkLiAgVGhlIHJlYXNvbiBpcyB0aGF0IGluIGNlcnRhaW4KICAgIC8vIHN5bnRoZXRpYyBzdHJlYW0gY2FzZXMsIHN1Y2ggYXMgcGFzc3Rocm91Z2ggc3RyZWFtcywgX3JlYWQKICAgIC8vIG1heSBiZSBhIGNvbXBsZXRlbHkgc3luY2hyb25vdXMgb3BlcmF0aW9uIHdoaWNoIG1heSBjaGFuZ2UKICAgIC8vIHRoZSBzdGF0ZSBvZiB0aGUgcmVhZCBidWZmZXIsIHByb3ZpZGluZyBlbm91Z2ggZGF0YSB3aGVuCiAgICAvLyBiZWZvcmUgdGhlcmUgd2FzICpub3QqIGVub3VnaC4KICAgIC8vCiAgICAvLyBTbywgdGhlIHN0ZXBzIGFyZToKICAgIC8vIDEuIEZpZ3VyZSBvdXQgd2hhdCB0aGUgc3RhdGUgb2YgdGhpbmdzIHdpbGwgYmUgYWZ0ZXIgd2UgZG8KICAgIC8vIGEgcmVhZCBmcm9tIHRoZSBidWZmZXIuCiAgICAvLwogICAgLy8gMi4gSWYgdGhhdCByZXN1bHRpbmcgc3RhdGUgd2lsbCB0cmlnZ2VyIGEgX3JlYWQsIHRoZW4gY2FsbCBfcmVhZC4KICAgIC8vIE5vdGUgdGhhdCB0aGlzIG1heSBiZSBhc3luY2hyb25vdXMsIG9yIHN5bmNocm9ub3VzLiAgWWVzLCBpdCBpcwogICAgLy8gZGVlcGx5IHVnbHkgdG8gd3JpdGUgQVBJcyB0aGlzIHdheSwgYnV0IHRoYXQgc3RpbGwgZG9lc24ndCBtZWFuCiAgICAvLyB0aGF0IHRoZSBSZWFkYWJsZSBjbGFzcyBzaG91bGQgYmVoYXZlIGltcHJvcGVybHksIGFzIHN0cmVhbXMgYXJlCiAgICAvLyBkZXNpZ25lZCB0byBiZSBzeW5jL2FzeW5jIGFnbm9zdGljLgogICAgLy8gVGFrZSBub3RlIGlmIHRoZSBfcmVhZCBjYWxsIGlzIHN5bmMgb3IgYXN5bmMgKGllLCBpZiB0aGUgcmVhZCBjYWxsCiAgICAvLyBoYXMgcmV0dXJuZWQgeWV0KSwgc28gdGhhdCB3ZSBrbm93IHdoZXRoZXIgb3Igbm90IGl0J3Mgc2FmZSB0byBlbWl0CiAgICAvLyAncmVhZGFibGUnIGV0Yy4KICAgIC8vCiAgICAvLyAzLiBBY3R1YWxseSBwdWxsIHRoZSByZXF1ZXN0ZWQgY2h1bmtzIG91dCBvZiB0aGUgYnVmZmVyIGFuZCByZXR1cm4uCiAgICAvLyBpZiB3ZSBuZWVkIGEgcmVhZGFibGUgZXZlbnQsIHRoZW4gd2UgbmVlZCB0byBkbyBzb21lIHJlYWRpbmcuCgoKICAgIHZhciBkb1JlYWQgPSBzdGF0ZS5uZWVkUmVhZGFibGU7CiAgICBkZWJ1ZygnbmVlZCByZWFkYWJsZScsIGRvUmVhZCk7IC8vIGlmIHdlIGN1cnJlbnRseSBoYXZlIGxlc3MgdGhhbiB0aGUgaGlnaFdhdGVyTWFyaywgdGhlbiBhbHNvIHJlYWQgc29tZQoKICAgIGlmIChzdGF0ZS5sZW5ndGggPT09IDAgfHwgc3RhdGUubGVuZ3RoIC0gbiA8IHN0YXRlLmhpZ2hXYXRlck1hcmspIHsKICAgICAgZG9SZWFkID0gdHJ1ZTsKICAgICAgZGVidWcoJ2xlbmd0aCBsZXNzIHRoYW4gd2F0ZXJtYXJrJywgZG9SZWFkKTsKICAgIH0gLy8gaG93ZXZlciwgaWYgd2UndmUgZW5kZWQsIHRoZW4gdGhlcmUncyBubyBwb2ludCwgYW5kIGlmIHdlJ3JlIGFscmVhZHkKICAgIC8vIHJlYWRpbmcsIHRoZW4gaXQncyB1bm5lY2Vzc2FyeS4KCgogICAgaWYgKHN0YXRlLmVuZGVkIHx8IHN0YXRlLnJlYWRpbmcpIHsKICAgICAgZG9SZWFkID0gZmFsc2U7CiAgICAgIGRlYnVnKCdyZWFkaW5nIG9yIGVuZGVkJywgZG9SZWFkKTsKICAgIH0gZWxzZSBpZiAoZG9SZWFkKSB7CiAgICAgIGRlYnVnKCdkbyByZWFkJyk7CiAgICAgIHN0YXRlLnJlYWRpbmcgPSB0cnVlOwogICAgICBzdGF0ZS5zeW5jID0gdHJ1ZTsgLy8gaWYgdGhlIGxlbmd0aCBpcyBjdXJyZW50bHkgemVybywgdGhlbiB3ZSAqbmVlZCogYSByZWFkYWJsZSBldmVudC4KCiAgICAgIGlmIChzdGF0ZS5sZW5ndGggPT09IDApIHN0YXRlLm5lZWRSZWFkYWJsZSA9IHRydWU7IC8vIGNhbGwgaW50ZXJuYWwgcmVhZCBtZXRob2QKCiAgICAgIHRoaXMuX3JlYWQoc3RhdGUuaGlnaFdhdGVyTWFyayk7CgogICAgICBzdGF0ZS5zeW5jID0gZmFsc2U7IC8vIElmIF9yZWFkIHB1c2hlZCBkYXRhIHN5bmNocm9ub3VzbHksIHRoZW4gYHJlYWRpbmdgIHdpbGwgYmUgZmFsc2UsCiAgICAgIC8vIGFuZCB3ZSBuZWVkIHRvIHJlLWV2YWx1YXRlIGhvdyBtdWNoIGRhdGEgd2UgY2FuIHJldHVybiB0byB0aGUgdXNlci4KCiAgICAgIGlmICghc3RhdGUucmVhZGluZykgbiA9IGhvd011Y2hUb1JlYWQobk9yaWcsIHN0YXRlKTsKICAgIH0KCiAgICB2YXIgcmV0OwogICAgaWYgKG4gPiAwKSByZXQgPSBmcm9tTGlzdChuLCBzdGF0ZSk7ZWxzZSByZXQgPSBudWxsOwoKICAgIGlmIChyZXQgPT09IG51bGwpIHsKICAgICAgc3RhdGUubmVlZFJlYWRhYmxlID0gc3RhdGUubGVuZ3RoIDw9IHN0YXRlLmhpZ2hXYXRlck1hcms7CiAgICAgIG4gPSAwOwogICAgfSBlbHNlIHsKICAgICAgc3RhdGUubGVuZ3RoIC09IG47CiAgICAgIHN0YXRlLmF3YWl0RHJhaW4gPSAwOwogICAgfQoKICAgIGlmIChzdGF0ZS5sZW5ndGggPT09IDApIHsKICAgICAgLy8gSWYgd2UgaGF2ZSBub3RoaW5nIGluIHRoZSBidWZmZXIsIHRoZW4gd2Ugd2FudCB0byBrbm93CiAgICAgIC8vIGFzIHNvb24gYXMgd2UgKmRvKiBnZXQgc29tZXRoaW5nIGludG8gdGhlIGJ1ZmZlci4KICAgICAgaWYgKCFzdGF0ZS5lbmRlZCkgc3RhdGUubmVlZFJlYWRhYmxlID0gdHJ1ZTsgLy8gSWYgd2UgdHJpZWQgdG8gcmVhZCgpIHBhc3QgdGhlIEVPRiwgdGhlbiBlbWl0IGVuZCBvbiB0aGUgbmV4dCB0aWNrLgoKICAgICAgaWYgKG5PcmlnICE9PSBuICYmIHN0YXRlLmVuZGVkKSBlbmRSZWFkYWJsZSh0aGlzKTsKICAgIH0KCiAgICBpZiAocmV0ICE9PSBudWxsKSB0aGlzLmVtaXQoJ2RhdGEnLCByZXQpOwogICAgcmV0dXJuIHJldDsKICB9OwoKICBmdW5jdGlvbiBvbkVvZkNodW5rKHN0cmVhbSwgc3RhdGUpIHsKICAgIGRlYnVnKCdvbkVvZkNodW5rJyk7CiAgICBpZiAoc3RhdGUuZW5kZWQpIHJldHVybjsKCiAgICBpZiAoc3RhdGUuZGVjb2RlcikgewogICAgICB2YXIgY2h1bmsgPSBzdGF0ZS5kZWNvZGVyLmVuZCgpOwoKICAgICAgaWYgKGNodW5rICYmIGNodW5rLmxlbmd0aCkgewogICAgICAgIHN0YXRlLmJ1ZmZlci5wdXNoKGNodW5rKTsKICAgICAgICBzdGF0ZS5sZW5ndGggKz0gc3RhdGUub2JqZWN0TW9kZSA/IDEgOiBjaHVuay5sZW5ndGg7CiAgICAgIH0KICAgIH0KCiAgICBzdGF0ZS5lbmRlZCA9IHRydWU7CgogICAgaWYgKHN0YXRlLnN5bmMpIHsKICAgICAgLy8gaWYgd2UgYXJlIHN5bmMsIHdhaXQgdW50aWwgbmV4dCB0aWNrIHRvIGVtaXQgdGhlIGRhdGEuCiAgICAgIC8vIE90aGVyd2lzZSB3ZSByaXNrIGVtaXR0aW5nIGRhdGEgaW4gdGhlIGZsb3coKQogICAgICAvLyB0aGUgcmVhZGFibGUgY29kZSB0cmlnZ2VycyBkdXJpbmcgYSByZWFkKCkgY2FsbAogICAgICBlbWl0UmVhZGFibGUoc3RyZWFtKTsKICAgIH0gZWxzZSB7CiAgICAgIC8vIGVtaXQgJ3JlYWRhYmxlJyBub3cgdG8gbWFrZSBzdXJlIGl0IGdldHMgcGlja2VkIHVwLgogICAgICBzdGF0ZS5uZWVkUmVhZGFibGUgPSBmYWxzZTsKCiAgICAgIGlmICghc3RhdGUuZW1pdHRlZFJlYWRhYmxlKSB7CiAgICAgICAgc3RhdGUuZW1pdHRlZFJlYWRhYmxlID0gdHJ1ZTsKICAgICAgICBlbWl0UmVhZGFibGVfKHN0cmVhbSk7CiAgICAgIH0KICAgIH0KICB9IC8vIERvbid0IGVtaXQgcmVhZGFibGUgcmlnaHQgYXdheSBpbiBzeW5jIG1vZGUsIGJlY2F1c2UgdGhpcyBjYW4gdHJpZ2dlcgogIC8vIGFub3RoZXIgcmVhZCgpIGNhbGwgPT4gc3RhY2sgb3ZlcmZsb3cuICBUaGlzIHdheSwgaXQgbWlnaHQgdHJpZ2dlcgogIC8vIGEgbmV4dFRpY2sgcmVjdXJzaW9uIHdhcm5pbmcsIGJ1dCB0aGF0J3Mgbm90IHNvIGJhZC4KCgogIGZ1bmN0aW9uIGVtaXRSZWFkYWJsZShzdHJlYW0pIHsKICAgIHZhciBzdGF0ZSA9IHN0cmVhbS5fcmVhZGFibGVTdGF0ZTsKICAgIGRlYnVnKCdlbWl0UmVhZGFibGUnLCBzdGF0ZS5uZWVkUmVhZGFibGUsIHN0YXRlLmVtaXR0ZWRSZWFkYWJsZSk7CiAgICBzdGF0ZS5uZWVkUmVhZGFibGUgPSBmYWxzZTsKCiAgICBpZiAoIXN0YXRlLmVtaXR0ZWRSZWFkYWJsZSkgewogICAgICBkZWJ1ZygnZW1pdFJlYWRhYmxlJywgc3RhdGUuZmxvd2luZyk7CiAgICAgIHN0YXRlLmVtaXR0ZWRSZWFkYWJsZSA9IHRydWU7CiAgICAgIG5leHRUaWNrJDEoZW1pdFJlYWRhYmxlXywgc3RyZWFtKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGVtaXRSZWFkYWJsZV8oc3RyZWFtKSB7CiAgICB2YXIgc3RhdGUgPSBzdHJlYW0uX3JlYWRhYmxlU3RhdGU7CiAgICBkZWJ1ZygnZW1pdFJlYWRhYmxlXycsIHN0YXRlLmRlc3Ryb3llZCwgc3RhdGUubGVuZ3RoLCBzdGF0ZS5lbmRlZCk7CgogICAgaWYgKCFzdGF0ZS5kZXN0cm95ZWQgJiYgKHN0YXRlLmxlbmd0aCB8fCBzdGF0ZS5lbmRlZCkpIHsKICAgICAgc3RyZWFtLmVtaXQoJ3JlYWRhYmxlJyk7CiAgICAgIHN0YXRlLmVtaXR0ZWRSZWFkYWJsZSA9IGZhbHNlOwogICAgfSAvLyBUaGUgc3RyZWFtIG5lZWRzIGFub3RoZXIgcmVhZGFibGUgZXZlbnQgaWYKICAgIC8vIDEuIEl0IGlzIG5vdCBmbG93aW5nLCBhcyB0aGUgZmxvdyBtZWNoYW5pc20gd2lsbCB0YWtlCiAgICAvLyAgICBjYXJlIG9mIGl0LgogICAgLy8gMi4gSXQgaXMgbm90IGVuZGVkLgogICAgLy8gMy4gSXQgaXMgYmVsb3cgdGhlIGhpZ2hXYXRlck1hcmssIHNvIHdlIGNhbiBzY2hlZHVsZQogICAgLy8gICAgYW5vdGhlciByZWFkYWJsZSBsYXRlci4KCgogICAgc3RhdGUubmVlZFJlYWRhYmxlID0gIXN0YXRlLmZsb3dpbmcgJiYgIXN0YXRlLmVuZGVkICYmIHN0YXRlLmxlbmd0aCA8PSBzdGF0ZS5oaWdoV2F0ZXJNYXJrOwogICAgZmxvdyhzdHJlYW0pOwogIH0gLy8gYXQgdGhpcyBwb2ludCwgdGhlIHVzZXIgaGFzIHByZXN1bWFibHkgc2VlbiB0aGUgJ3JlYWRhYmxlJyBldmVudCwKICAvLyBhbmQgY2FsbGVkIHJlYWQoKSB0byBjb25zdW1lIHNvbWUgZGF0YS4gIHRoYXQgbWF5IGhhdmUgdHJpZ2dlcmVkCiAgLy8gaW4gdHVybiBhbm90aGVyIF9yZWFkKG4pIGNhbGwsIGluIHdoaWNoIGNhc2UgcmVhZGluZyA9IHRydWUgaWYKICAvLyBpdCdzIGluIHByb2dyZXNzLgogIC8vIEhvd2V2ZXIsIGlmIHdlJ3JlIG5vdCBlbmRlZCwgb3IgcmVhZGluZywgYW5kIHRoZSBsZW5ndGggPCBod20sCiAgLy8gdGhlbiBnbyBhaGVhZCBhbmQgdHJ5IHRvIHJlYWQgc29tZSBtb3JlIHByZWVtcHRpdmVseS4KCgogIGZ1bmN0aW9uIG1heWJlUmVhZE1vcmUoc3RyZWFtLCBzdGF0ZSkgewogICAgaWYgKCFzdGF0ZS5yZWFkaW5nTW9yZSkgewogICAgICBzdGF0ZS5yZWFkaW5nTW9yZSA9IHRydWU7CiAgICAgIG5leHRUaWNrJDEobWF5YmVSZWFkTW9yZV8sIHN0cmVhbSwgc3RhdGUpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gbWF5YmVSZWFkTW9yZV8oc3RyZWFtLCBzdGF0ZSkgewogICAgLy8gQXR0ZW1wdCB0byByZWFkIG1vcmUgZGF0YSBpZiB3ZSBzaG91bGQuCiAgICAvLwogICAgLy8gVGhlIGNvbmRpdGlvbnMgZm9yIHJlYWRpbmcgbW9yZSBkYXRhIGFyZSAob25lIG9mKToKICAgIC8vIC0gTm90IGVub3VnaCBkYXRhIGJ1ZmZlcmVkIChzdGF0ZS5sZW5ndGggPCBzdGF0ZS5oaWdoV2F0ZXJNYXJrKS4gVGhlIGxvb3AKICAgIC8vICAgaXMgcmVzcG9uc2libGUgZm9yIGZpbGxpbmcgdGhlIGJ1ZmZlciB3aXRoIGVub3VnaCBkYXRhIGlmIHN1Y2ggZGF0YQogICAgLy8gICBpcyBhdmFpbGFibGUuIElmIGhpZ2hXYXRlck1hcmsgaXMgMCBhbmQgd2UgYXJlIG5vdCBpbiB0aGUgZmxvd2luZyBtb2RlCiAgICAvLyAgIHdlIHNob3VsZCBfbm90XyBhdHRlbXB0IHRvIGJ1ZmZlciBhbnkgZXh0cmEgZGF0YS4gV2UnbGwgZ2V0IG1vcmUgZGF0YQogICAgLy8gICB3aGVuIHRoZSBzdHJlYW0gY29uc3VtZXIgY2FsbHMgcmVhZCgpIGluc3RlYWQuCiAgICAvLyAtIE5vIGRhdGEgaW4gdGhlIGJ1ZmZlciwgYW5kIHRoZSBzdHJlYW0gaXMgaW4gZmxvd2luZyBtb2RlLiBJbiB0aGlzIG1vZGUKICAgIC8vICAgdGhlIGxvb3AgYmVsb3cgaXMgcmVzcG9uc2libGUgZm9yIGVuc3VyaW5nIHJlYWQoKSBpcyBjYWxsZWQuIEZhaWxpbmcgdG8KICAgIC8vICAgY2FsbCByZWFkIGhlcmUgd291bGQgYWJvcnQgdGhlIGZsb3cgYW5kIHRoZXJlJ3Mgbm8gb3RoZXIgbWVjaGFuaXNtIGZvcgogICAgLy8gICBjb250aW51aW5nIHRoZSBmbG93IGlmIHRoZSBzdHJlYW0gY29uc3VtZXIgaGFzIGp1c3Qgc3Vic2NyaWJlZCB0byB0aGUKICAgIC8vICAgJ2RhdGEnIGV2ZW50LgogICAgLy8KICAgIC8vIEluIGFkZGl0aW9uIHRvIHRoZSBhYm92ZSBjb25kaXRpb25zIHRvIGtlZXAgcmVhZGluZyBkYXRhLCB0aGUgZm9sbG93aW5nCiAgICAvLyBjb25kaXRpb25zIHByZXZlbnQgdGhlIGRhdGEgZnJvbSBiZWluZyByZWFkOgogICAgLy8gLSBUaGUgc3RyZWFtIGhhcyBlbmRlZCAoc3RhdGUuZW5kZWQpLgogICAgLy8gLSBUaGVyZSBpcyBhbHJlYWR5IGEgcGVuZGluZyAncmVhZCcgb3BlcmF0aW9uIChzdGF0ZS5yZWFkaW5nKS4gVGhpcyBpcyBhCiAgICAvLyAgIGNhc2Ugd2hlcmUgdGhlIHRoZSBzdHJlYW0gaGFzIGNhbGxlZCB0aGUgaW1wbGVtZW50YXRpb24gZGVmaW5lZCBfcmVhZCgpCiAgICAvLyAgIG1ldGhvZCwgYnV0IHRoZXkgYXJlIHByb2Nlc3NpbmcgdGhlIGNhbGwgYXN5bmNocm9ub3VzbHkgYW5kIGhhdmUgX25vdF8KICAgIC8vICAgY2FsbGVkIHB1c2goKSB3aXRoIG5ldyBkYXRhLiBJbiB0aGlzIGNhc2Ugd2Ugc2tpcCBwZXJmb3JtaW5nIG1vcmUKICAgIC8vICAgcmVhZCgpcy4gVGhlIGV4ZWN1dGlvbiBlbmRzIGluIHRoaXMgbWV0aG9kIGFnYWluIGFmdGVyIHRoZSBfcmVhZCgpIGVuZHMKICAgIC8vICAgdXAgY2FsbGluZyBwdXNoKCkgd2l0aCBtb3JlIGRhdGEuCiAgICB3aGlsZSAoIXN0YXRlLnJlYWRpbmcgJiYgIXN0YXRlLmVuZGVkICYmIChzdGF0ZS5sZW5ndGggPCBzdGF0ZS5oaWdoV2F0ZXJNYXJrIHx8IHN0YXRlLmZsb3dpbmcgJiYgc3RhdGUubGVuZ3RoID09PSAwKSkgewogICAgICB2YXIgbGVuID0gc3RhdGUubGVuZ3RoOwogICAgICBkZWJ1ZygnbWF5YmVSZWFkTW9yZSByZWFkIDAnKTsKICAgICAgc3RyZWFtLnJlYWQoMCk7CiAgICAgIGlmIChsZW4gPT09IHN0YXRlLmxlbmd0aCkgLy8gZGlkbid0IGdldCBhbnkgZGF0YSwgc3RvcCBzcGlubmluZy4KICAgICAgICBicmVhazsKICAgIH0KCiAgICBzdGF0ZS5yZWFkaW5nTW9yZSA9IGZhbHNlOwogIH0gLy8gYWJzdHJhY3QgbWV0aG9kLiAgdG8gYmUgb3ZlcnJpZGRlbiBpbiBzcGVjaWZpYyBpbXBsZW1lbnRhdGlvbiBjbGFzc2VzLgogIC8vIGNhbGwgY2IoZXIsIGRhdGEpIHdoZXJlIGRhdGEgaXMgPD0gbiBpbiBsZW5ndGguCiAgLy8gZm9yIHZpcnR1YWwgKG5vbi1zdHJpbmcsIG5vbi1idWZmZXIpIHN0cmVhbXMsICJsZW5ndGgiIGlzIHNvbWV3aGF0CiAgLy8gYXJiaXRyYXJ5LCBhbmQgcGVyaGFwcyBub3QgdmVyeSBtZWFuaW5nZnVsLgoKCiAgUmVhZGFibGUucHJvdG90eXBlLl9yZWFkID0gZnVuY3Rpb24gKG4pIHsKICAgIGVycm9yT3JEZXN0cm95KHRoaXMsIG5ldyBFUlJfTUVUSE9EX05PVF9JTVBMRU1FTlRFRCQxKCdfcmVhZCgpJykpOwogIH07CgogIFJlYWRhYmxlLnByb3RvdHlwZS5waXBlID0gZnVuY3Rpb24gKGRlc3QsIHBpcGVPcHRzKSB7CiAgICB2YXIgc3JjID0gdGhpczsKICAgIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7CgogICAgc3dpdGNoIChzdGF0ZS5waXBlc0NvdW50KSB7CiAgICAgIGNhc2UgMDoKICAgICAgICBzdGF0ZS5waXBlcyA9IGRlc3Q7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDE6CiAgICAgICAgc3RhdGUucGlwZXMgPSBbc3RhdGUucGlwZXMsIGRlc3RdOwogICAgICAgIGJyZWFrOwoKICAgICAgZGVmYXVsdDoKICAgICAgICBzdGF0ZS5waXBlcy5wdXNoKGRlc3QpOwogICAgICAgIGJyZWFrOwogICAgfQoKICAgIHN0YXRlLnBpcGVzQ291bnQgKz0gMTsKICAgIGRlYnVnKCdwaXBlIGNvdW50PSVkIG9wdHM9JWonLCBzdGF0ZS5waXBlc0NvdW50LCBwaXBlT3B0cyk7CiAgICB2YXIgZG9FbmQgPSAoIXBpcGVPcHRzIHx8IHBpcGVPcHRzLmVuZCAhPT0gZmFsc2UpICYmIGRlc3QgIT09IHByb2Nlc3Muc3Rkb3V0ICYmIGRlc3QgIT09IHByb2Nlc3Muc3RkZXJyOwogICAgdmFyIGVuZEZuID0gZG9FbmQgPyBvbmVuZCA6IHVucGlwZTsKICAgIGlmIChzdGF0ZS5lbmRFbWl0dGVkKSBuZXh0VGljayQxKGVuZEZuKTtlbHNlIHNyYy5vbmNlKCdlbmQnLCBlbmRGbik7CiAgICBkZXN0Lm9uKCd1bnBpcGUnLCBvbnVucGlwZSk7CgogICAgZnVuY3Rpb24gb251bnBpcGUocmVhZGFibGUsIHVucGlwZUluZm8pIHsKICAgICAgZGVidWcoJ29udW5waXBlJyk7CgogICAgICBpZiAocmVhZGFibGUgPT09IHNyYykgewogICAgICAgIGlmICh1bnBpcGVJbmZvICYmIHVucGlwZUluZm8uaGFzVW5waXBlZCA9PT0gZmFsc2UpIHsKICAgICAgICAgIHVucGlwZUluZm8uaGFzVW5waXBlZCA9IHRydWU7CiAgICAgICAgICBjbGVhbnVwKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gb25lbmQoKSB7CiAgICAgIGRlYnVnKCdvbmVuZCcpOwogICAgICBkZXN0LmVuZCgpOwogICAgfSAvLyB3aGVuIHRoZSBkZXN0IGRyYWlucywgaXQgcmVkdWNlcyB0aGUgYXdhaXREcmFpbiBjb3VudGVyCiAgICAvLyBvbiB0aGUgc291cmNlLiAgVGhpcyB3b3VsZCBiZSBtb3JlIGVsZWdhbnQgd2l0aCBhIC5vbmNlKCkKICAgIC8vIGhhbmRsZXIgaW4gZmxvdygpLCBidXQgYWRkaW5nIGFuZCByZW1vdmluZyByZXBlYXRlZGx5IGlzCiAgICAvLyB0b28gc2xvdy4KCgogICAgdmFyIG9uZHJhaW4gPSBwaXBlT25EcmFpbihzcmMpOwogICAgZGVzdC5vbignZHJhaW4nLCBvbmRyYWluKTsKICAgIHZhciBjbGVhbmVkVXAgPSBmYWxzZTsKCiAgICBmdW5jdGlvbiBjbGVhbnVwKCkgewogICAgICBkZWJ1ZygnY2xlYW51cCcpOyAvLyBjbGVhbnVwIGV2ZW50IGhhbmRsZXJzIG9uY2UgdGhlIHBpcGUgaXMgYnJva2VuCgogICAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdjbG9zZScsIG9uY2xvc2UpOwogICAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdmaW5pc2gnLCBvbmZpbmlzaCk7CiAgICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2RyYWluJywgb25kcmFpbik7CiAgICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2Vycm9yJywgb25lcnJvcik7CiAgICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ3VucGlwZScsIG9udW5waXBlKTsKICAgICAgc3JjLnJlbW92ZUxpc3RlbmVyKCdlbmQnLCBvbmVuZCk7CiAgICAgIHNyYy5yZW1vdmVMaXN0ZW5lcignZW5kJywgdW5waXBlKTsKICAgICAgc3JjLnJlbW92ZUxpc3RlbmVyKCdkYXRhJywgb25kYXRhKTsKICAgICAgY2xlYW5lZFVwID0gdHJ1ZTsgLy8gaWYgdGhlIHJlYWRlciBpcyB3YWl0aW5nIGZvciBhIGRyYWluIGV2ZW50IGZyb20gdGhpcwogICAgICAvLyBzcGVjaWZpYyB3cml0ZXIsIHRoZW4gaXQgd291bGQgY2F1c2UgaXQgdG8gbmV2ZXIgc3RhcnQKICAgICAgLy8gZmxvd2luZyBhZ2Fpbi4KICAgICAgLy8gU28sIGlmIHRoaXMgaXMgYXdhaXRpbmcgYSBkcmFpbiwgdGhlbiB3ZSBqdXN0IGNhbGwgaXQgbm93LgogICAgICAvLyBJZiB3ZSBkb24ndCBrbm93LCB0aGVuIGFzc3VtZSB0aGF0IHdlIGFyZSB3YWl0aW5nIGZvciBvbmUuCgogICAgICBpZiAoc3RhdGUuYXdhaXREcmFpbiAmJiAoIWRlc3QuX3dyaXRhYmxlU3RhdGUgfHwgZGVzdC5fd3JpdGFibGVTdGF0ZS5uZWVkRHJhaW4pKSBvbmRyYWluKCk7CiAgICB9CgogICAgc3JjLm9uKCdkYXRhJywgb25kYXRhKTsKCiAgICBmdW5jdGlvbiBvbmRhdGEoY2h1bmspIHsKICAgICAgZGVidWcoJ29uZGF0YScpOwogICAgICB2YXIgcmV0ID0gZGVzdC53cml0ZShjaHVuayk7CiAgICAgIGRlYnVnKCdkZXN0LndyaXRlJywgcmV0KTsKCiAgICAgIGlmIChyZXQgPT09IGZhbHNlKSB7CiAgICAgICAgLy8gSWYgdGhlIHVzZXIgdW5waXBlZCBkdXJpbmcgYGRlc3Qud3JpdGUoKWAsIGl0IGlzIHBvc3NpYmxlCiAgICAgICAgLy8gdG8gZ2V0IHN0dWNrIGluIGEgcGVybWFuZW50bHkgcGF1c2VkIHN0YXRlIGlmIHRoYXQgd3JpdGUKICAgICAgICAvLyBhbHNvIHJldHVybmVkIGZhbHNlLgogICAgICAgIC8vID0+IENoZWNrIHdoZXRoZXIgYGRlc3RgIGlzIHN0aWxsIGEgcGlwaW5nIGRlc3RpbmF0aW9uLgogICAgICAgIGlmICgoc3RhdGUucGlwZXNDb3VudCA9PT0gMSAmJiBzdGF0ZS5waXBlcyA9PT0gZGVzdCB8fCBzdGF0ZS5waXBlc0NvdW50ID4gMSAmJiBpbmRleE9mKHN0YXRlLnBpcGVzLCBkZXN0KSAhPT0gLTEpICYmICFjbGVhbmVkVXApIHsKICAgICAgICAgIGRlYnVnKCdmYWxzZSB3cml0ZSByZXNwb25zZSwgcGF1c2UnLCBzdGF0ZS5hd2FpdERyYWluKTsKICAgICAgICAgIHN0YXRlLmF3YWl0RHJhaW4rKzsKICAgICAgICB9CgogICAgICAgIHNyYy5wYXVzZSgpOwogICAgICB9CiAgICB9IC8vIGlmIHRoZSBkZXN0IGhhcyBhbiBlcnJvciwgdGhlbiBzdG9wIHBpcGluZyBpbnRvIGl0LgogICAgLy8gaG93ZXZlciwgZG9uJ3Qgc3VwcHJlc3MgdGhlIHRocm93aW5nIGJlaGF2aW9yIGZvciB0aGlzLgoKCiAgICBmdW5jdGlvbiBvbmVycm9yKGVyKSB7CiAgICAgIGRlYnVnKCdvbmVycm9yJywgZXIpOwogICAgICB1bnBpcGUoKTsKICAgICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZXJyb3InLCBvbmVycm9yKTsKICAgICAgaWYgKEVFbGlzdGVuZXJDb3VudChkZXN0LCAnZXJyb3InKSA9PT0gMCkgZXJyb3JPckRlc3Ryb3koZGVzdCwgZXIpOwogICAgfSAvLyBNYWtlIHN1cmUgb3VyIGVycm9yIGhhbmRsZXIgaXMgYXR0YWNoZWQgYmVmb3JlIHVzZXJsYW5kIG9uZXMuCgoKICAgIHByZXBlbmRMaXN0ZW5lcihkZXN0LCAnZXJyb3InLCBvbmVycm9yKTsgLy8gQm90aCBjbG9zZSBhbmQgZmluaXNoIHNob3VsZCB0cmlnZ2VyIHVucGlwZSwgYnV0IG9ubHkgb25jZS4KCiAgICBmdW5jdGlvbiBvbmNsb3NlKCkgewogICAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdmaW5pc2gnLCBvbmZpbmlzaCk7CiAgICAgIHVucGlwZSgpOwogICAgfQoKICAgIGRlc3Qub25jZSgnY2xvc2UnLCBvbmNsb3NlKTsKCiAgICBmdW5jdGlvbiBvbmZpbmlzaCgpIHsKICAgICAgZGVidWcoJ29uZmluaXNoJyk7CiAgICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2Nsb3NlJywgb25jbG9zZSk7CiAgICAgIHVucGlwZSgpOwogICAgfQoKICAgIGRlc3Qub25jZSgnZmluaXNoJywgb25maW5pc2gpOwoKICAgIGZ1bmN0aW9uIHVucGlwZSgpIHsKICAgICAgZGVidWcoJ3VucGlwZScpOwogICAgICBzcmMudW5waXBlKGRlc3QpOwogICAgfSAvLyB0ZWxsIHRoZSBkZXN0IHRoYXQgaXQncyBiZWluZyBwaXBlZCB0bwoKCiAgICBkZXN0LmVtaXQoJ3BpcGUnLCBzcmMpOyAvLyBzdGFydCB0aGUgZmxvdyBpZiBpdCBoYXNuJ3QgYmVlbiBzdGFydGVkIGFscmVhZHkuCgogICAgaWYgKCFzdGF0ZS5mbG93aW5nKSB7CiAgICAgIGRlYnVnKCdwaXBlIHJlc3VtZScpOwogICAgICBzcmMucmVzdW1lKCk7CiAgICB9CgogICAgcmV0dXJuIGRlc3Q7CiAgfTsKCiAgZnVuY3Rpb24gcGlwZU9uRHJhaW4oc3JjKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gcGlwZU9uRHJhaW5GdW5jdGlvblJlc3VsdCgpIHsKICAgICAgdmFyIHN0YXRlID0gc3JjLl9yZWFkYWJsZVN0YXRlOwogICAgICBkZWJ1ZygncGlwZU9uRHJhaW4nLCBzdGF0ZS5hd2FpdERyYWluKTsKICAgICAgaWYgKHN0YXRlLmF3YWl0RHJhaW4pIHN0YXRlLmF3YWl0RHJhaW4tLTsKCiAgICAgIGlmIChzdGF0ZS5hd2FpdERyYWluID09PSAwICYmIEVFbGlzdGVuZXJDb3VudChzcmMsICdkYXRhJykpIHsKICAgICAgICBzdGF0ZS5mbG93aW5nID0gdHJ1ZTsKICAgICAgICBmbG93KHNyYyk7CiAgICAgIH0KICAgIH07CiAgfQoKICBSZWFkYWJsZS5wcm90b3R5cGUudW5waXBlID0gZnVuY3Rpb24gKGRlc3QpIHsKICAgIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7CiAgICB2YXIgdW5waXBlSW5mbyA9IHsKICAgICAgaGFzVW5waXBlZDogZmFsc2UKICAgIH07IC8vIGlmIHdlJ3JlIG5vdCBwaXBpbmcgYW55d2hlcmUsIHRoZW4gZG8gbm90aGluZy4KCiAgICBpZiAoc3RhdGUucGlwZXNDb3VudCA9PT0gMCkgcmV0dXJuIHRoaXM7IC8vIGp1c3Qgb25lIGRlc3RpbmF0aW9uLiAgbW9zdCBjb21tb24gY2FzZS4KCiAgICBpZiAoc3RhdGUucGlwZXNDb3VudCA9PT0gMSkgewogICAgICAvLyBwYXNzZWQgaW4gb25lLCBidXQgaXQncyBub3QgdGhlIHJpZ2h0IG9uZS4KICAgICAgaWYgKGRlc3QgJiYgZGVzdCAhPT0gc3RhdGUucGlwZXMpIHJldHVybiB0aGlzOwogICAgICBpZiAoIWRlc3QpIGRlc3QgPSBzdGF0ZS5waXBlczsgLy8gZ290IGEgbWF0Y2guCgogICAgICBzdGF0ZS5waXBlcyA9IG51bGw7CiAgICAgIHN0YXRlLnBpcGVzQ291bnQgPSAwOwogICAgICBzdGF0ZS5mbG93aW5nID0gZmFsc2U7CiAgICAgIGlmIChkZXN0KSBkZXN0LmVtaXQoJ3VucGlwZScsIHRoaXMsIHVucGlwZUluZm8pOwogICAgICByZXR1cm4gdGhpczsKICAgIH0gLy8gc2xvdyBjYXNlLiBtdWx0aXBsZSBwaXBlIGRlc3RpbmF0aW9ucy4KCgogICAgaWYgKCFkZXN0KSB7CiAgICAgIC8vIHJlbW92ZSBhbGwuCiAgICAgIHZhciBkZXN0cyA9IHN0YXRlLnBpcGVzOwogICAgICB2YXIgbGVuID0gc3RhdGUucGlwZXNDb3VudDsKICAgICAgc3RhdGUucGlwZXMgPSBudWxsOwogICAgICBzdGF0ZS5waXBlc0NvdW50ID0gMDsKICAgICAgc3RhdGUuZmxvd2luZyA9IGZhbHNlOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgewogICAgICAgIGRlc3RzW2ldLmVtaXQoJ3VucGlwZScsIHRoaXMsIHsKICAgICAgICAgIGhhc1VucGlwZWQ6IGZhbHNlCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzOwogICAgfSAvLyB0cnkgdG8gZmluZCB0aGUgcmlnaHQgb25lLgoKCiAgICB2YXIgaW5kZXggPSBpbmRleE9mKHN0YXRlLnBpcGVzLCBkZXN0KTsKICAgIGlmIChpbmRleCA9PT0gLTEpIHJldHVybiB0aGlzOwogICAgc3RhdGUucGlwZXMuc3BsaWNlKGluZGV4LCAxKTsKICAgIHN0YXRlLnBpcGVzQ291bnQgLT0gMTsKICAgIGlmIChzdGF0ZS5waXBlc0NvdW50ID09PSAxKSBzdGF0ZS5waXBlcyA9IHN0YXRlLnBpcGVzWzBdOwogICAgZGVzdC5lbWl0KCd1bnBpcGUnLCB0aGlzLCB1bnBpcGVJbmZvKTsKICAgIHJldHVybiB0aGlzOwogIH07IC8vIHNldCB1cCBkYXRhIGV2ZW50cyBpZiB0aGV5IGFyZSBhc2tlZCBmb3IKICAvLyBFbnN1cmUgcmVhZGFibGUgbGlzdGVuZXJzIGV2ZW50dWFsbHkgZ2V0IHNvbWV0aGluZwoKCiAgUmVhZGFibGUucHJvdG90eXBlLm9uID0gZnVuY3Rpb24gKGV2LCBmbikgewogICAgdmFyIHJlcyA9IFN0cmVhbSQxLnByb3RvdHlwZS5vbi5jYWxsKHRoaXMsIGV2LCBmbik7CiAgICB2YXIgc3RhdGUgPSB0aGlzLl9yZWFkYWJsZVN0YXRlOwoKICAgIGlmIChldiA9PT0gJ2RhdGEnKSB7CiAgICAgIC8vIHVwZGF0ZSByZWFkYWJsZUxpc3RlbmluZyBzbyB0aGF0IHJlc3VtZSgpIG1heSBiZSBhIG5vLW9wCiAgICAgIC8vIGEgZmV3IGxpbmVzIGRvd24uIFRoaXMgaXMgbmVlZGVkIHRvIHN1cHBvcnQgb25jZSgncmVhZGFibGUnKS4KICAgICAgc3RhdGUucmVhZGFibGVMaXN0ZW5pbmcgPSB0aGlzLmxpc3RlbmVyQ291bnQoJ3JlYWRhYmxlJykgPiAwOyAvLyBUcnkgc3RhcnQgZmxvd2luZyBvbiBuZXh0IHRpY2sgaWYgc3RyZWFtIGlzbid0IGV4cGxpY2l0bHkgcGF1c2VkCgogICAgICBpZiAoc3RhdGUuZmxvd2luZyAhPT0gZmFsc2UpIHRoaXMucmVzdW1lKCk7CiAgICB9IGVsc2UgaWYgKGV2ID09PSAncmVhZGFibGUnKSB7CiAgICAgIGlmICghc3RhdGUuZW5kRW1pdHRlZCAmJiAhc3RhdGUucmVhZGFibGVMaXN0ZW5pbmcpIHsKICAgICAgICBzdGF0ZS5yZWFkYWJsZUxpc3RlbmluZyA9IHN0YXRlLm5lZWRSZWFkYWJsZSA9IHRydWU7CiAgICAgICAgc3RhdGUuZmxvd2luZyA9IGZhbHNlOwogICAgICAgIHN0YXRlLmVtaXR0ZWRSZWFkYWJsZSA9IGZhbHNlOwogICAgICAgIGRlYnVnKCdvbiByZWFkYWJsZScsIHN0YXRlLmxlbmd0aCwgc3RhdGUucmVhZGluZyk7CgogICAgICAgIGlmIChzdGF0ZS5sZW5ndGgpIHsKICAgICAgICAgIGVtaXRSZWFkYWJsZSh0aGlzKTsKICAgICAgICB9IGVsc2UgaWYgKCFzdGF0ZS5yZWFkaW5nKSB7CiAgICAgICAgICBuZXh0VGljayQxKG5SZWFkaW5nTmV4dFRpY2ssIHRoaXMpOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIHJldHVybiByZXM7CiAgfTsKCiAgUmVhZGFibGUucHJvdG90eXBlLmFkZExpc3RlbmVyID0gUmVhZGFibGUucHJvdG90eXBlLm9uOwoKICBSZWFkYWJsZS5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIgPSBmdW5jdGlvbiAoZXYsIGZuKSB7CiAgICB2YXIgcmVzID0gU3RyZWFtJDEucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyLmNhbGwodGhpcywgZXYsIGZuKTsKCiAgICBpZiAoZXYgPT09ICdyZWFkYWJsZScpIHsKICAgICAgLy8gV2UgbmVlZCB0byBjaGVjayBpZiB0aGVyZSBpcyBzb21lb25lIHN0aWxsIGxpc3RlbmluZyB0bwogICAgICAvLyByZWFkYWJsZSBhbmQgcmVzZXQgdGhlIHN0YXRlLiBIb3dldmVyIHRoaXMgbmVlZHMgdG8gaGFwcGVuCiAgICAgIC8vIGFmdGVyIHJlYWRhYmxlIGhhcyBiZWVuIGVtaXR0ZWQgYnV0IGJlZm9yZSBJL08gKG5leHRUaWNrKSB0bwogICAgICAvLyBzdXBwb3J0IG9uY2UoJ3JlYWRhYmxlJywgZm4pIGN5Y2xlcy4gVGhpcyBtZWFucyB0aGF0IGNhbGxpbmcKICAgICAgLy8gcmVzdW1lIHdpdGhpbiB0aGUgc2FtZSB0aWNrIHdpbGwgaGF2ZSBubwogICAgICAvLyBlZmZlY3QuCiAgICAgIG5leHRUaWNrJDEodXBkYXRlUmVhZGFibGVMaXN0ZW5pbmcsIHRoaXMpOwogICAgfQoKICAgIHJldHVybiByZXM7CiAgfTsKCiAgUmVhZGFibGUucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycyA9IGZ1bmN0aW9uIChldikgewogICAgdmFyIHJlcyA9IFN0cmVhbSQxLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKCiAgICBpZiAoZXYgPT09ICdyZWFkYWJsZScgfHwgZXYgPT09IHVuZGVmaW5lZCkgewogICAgICAvLyBXZSBuZWVkIHRvIGNoZWNrIGlmIHRoZXJlIGlzIHNvbWVvbmUgc3RpbGwgbGlzdGVuaW5nIHRvCiAgICAgIC8vIHJlYWRhYmxlIGFuZCByZXNldCB0aGUgc3RhdGUuIEhvd2V2ZXIgdGhpcyBuZWVkcyB0byBoYXBwZW4KICAgICAgLy8gYWZ0ZXIgcmVhZGFibGUgaGFzIGJlZW4gZW1pdHRlZCBidXQgYmVmb3JlIEkvTyAobmV4dFRpY2spIHRvCiAgICAgIC8vIHN1cHBvcnQgb25jZSgncmVhZGFibGUnLCBmbikgY3ljbGVzLiBUaGlzIG1lYW5zIHRoYXQgY2FsbGluZwogICAgICAvLyByZXN1bWUgd2l0aGluIHRoZSBzYW1lIHRpY2sgd2lsbCBoYXZlIG5vCiAgICAgIC8vIGVmZmVjdC4KICAgICAgbmV4dFRpY2skMSh1cGRhdGVSZWFkYWJsZUxpc3RlbmluZywgdGhpcyk7CiAgICB9CgogICAgcmV0dXJuIHJlczsKICB9OwoKICBmdW5jdGlvbiB1cGRhdGVSZWFkYWJsZUxpc3RlbmluZyhzZWxmKSB7CiAgICB2YXIgc3RhdGUgPSBzZWxmLl9yZWFkYWJsZVN0YXRlOwogICAgc3RhdGUucmVhZGFibGVMaXN0ZW5pbmcgPSBzZWxmLmxpc3RlbmVyQ291bnQoJ3JlYWRhYmxlJykgPiAwOwoKICAgIGlmIChzdGF0ZS5yZXN1bWVTY2hlZHVsZWQgJiYgIXN0YXRlLnBhdXNlZCkgewogICAgICAvLyBmbG93aW5nIG5lZWRzIHRvIGJlIHNldCB0byB0cnVlIG5vdywgb3RoZXJ3aXNlCiAgICAgIC8vIHRoZSB1cGNvbWluZyByZXN1bWUgd2lsbCBub3QgZmxvdy4KICAgICAgc3RhdGUuZmxvd2luZyA9IHRydWU7IC8vIGNydWRlIHdheSB0byBjaGVjayBpZiB3ZSBzaG91bGQgcmVzdW1lCiAgICB9IGVsc2UgaWYgKHNlbGYubGlzdGVuZXJDb3VudCgnZGF0YScpID4gMCkgewogICAgICBzZWxmLnJlc3VtZSgpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gblJlYWRpbmdOZXh0VGljayhzZWxmKSB7CiAgICBkZWJ1ZygncmVhZGFibGUgbmV4dHRpY2sgcmVhZCAwJyk7CiAgICBzZWxmLnJlYWQoMCk7CiAgfSAvLyBwYXVzZSgpIGFuZCByZXN1bWUoKSBhcmUgcmVtbmFudHMgb2YgdGhlIGxlZ2FjeSByZWFkYWJsZSBzdHJlYW0gQVBJCiAgLy8gSWYgdGhlIHVzZXIgdXNlcyB0aGVtLCB0aGVuIHN3aXRjaCBpbnRvIG9sZCBtb2RlLgoKCiAgUmVhZGFibGUucHJvdG90eXBlLnJlc3VtZSA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7CgogICAgaWYgKCFzdGF0ZS5mbG93aW5nKSB7CiAgICAgIGRlYnVnKCdyZXN1bWUnKTsgLy8gd2UgZmxvdyBvbmx5IGlmIHRoZXJlIGlzIG5vIG9uZSBsaXN0ZW5pbmcKICAgICAgLy8gZm9yIHJlYWRhYmxlLCBidXQgd2Ugc3RpbGwgaGF2ZSB0byBjYWxsCiAgICAgIC8vIHJlc3VtZSgpCgogICAgICBzdGF0ZS5mbG93aW5nID0gIXN0YXRlLnJlYWRhYmxlTGlzdGVuaW5nOwogICAgICByZXN1bWUodGhpcywgc3RhdGUpOwogICAgfQoKICAgIHN0YXRlLnBhdXNlZCA9IGZhbHNlOwogICAgcmV0dXJuIHRoaXM7CiAgfTsKCiAgZnVuY3Rpb24gcmVzdW1lKHN0cmVhbSwgc3RhdGUpIHsKICAgIGlmICghc3RhdGUucmVzdW1lU2NoZWR1bGVkKSB7CiAgICAgIHN0YXRlLnJlc3VtZVNjaGVkdWxlZCA9IHRydWU7CiAgICAgIG5leHRUaWNrJDEocmVzdW1lXywgc3RyZWFtLCBzdGF0ZSk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiByZXN1bWVfKHN0cmVhbSwgc3RhdGUpIHsKICAgIGRlYnVnKCdyZXN1bWUnLCBzdGF0ZS5yZWFkaW5nKTsKCiAgICBpZiAoIXN0YXRlLnJlYWRpbmcpIHsKICAgICAgc3RyZWFtLnJlYWQoMCk7CiAgICB9CgogICAgc3RhdGUucmVzdW1lU2NoZWR1bGVkID0gZmFsc2U7CiAgICBzdHJlYW0uZW1pdCgncmVzdW1lJyk7CiAgICBmbG93KHN0cmVhbSk7CiAgICBpZiAoc3RhdGUuZmxvd2luZyAmJiAhc3RhdGUucmVhZGluZykgc3RyZWFtLnJlYWQoMCk7CiAgfQoKICBSZWFkYWJsZS5wcm90b3R5cGUucGF1c2UgPSBmdW5jdGlvbiAoKSB7CiAgICBkZWJ1ZygnY2FsbCBwYXVzZSBmbG93aW5nPSVqJywgdGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nKTsKCiAgICBpZiAodGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nICE9PSBmYWxzZSkgewogICAgICBkZWJ1ZygncGF1c2UnKTsKICAgICAgdGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nID0gZmFsc2U7CiAgICAgIHRoaXMuZW1pdCgncGF1c2UnKTsKICAgIH0KCiAgICB0aGlzLl9yZWFkYWJsZVN0YXRlLnBhdXNlZCA9IHRydWU7CiAgICByZXR1cm4gdGhpczsKICB9OwoKICBmdW5jdGlvbiBmbG93KHN0cmVhbSkgewogICAgdmFyIHN0YXRlID0gc3RyZWFtLl9yZWFkYWJsZVN0YXRlOwogICAgZGVidWcoJ2Zsb3cnLCBzdGF0ZS5mbG93aW5nKTsKCiAgICB3aGlsZSAoc3RhdGUuZmxvd2luZyAmJiBzdHJlYW0ucmVhZCgpICE9PSBudWxsKSB7CiAgICB9CiAgfSAvLyB3cmFwIGFuIG9sZC1zdHlsZSBzdHJlYW0gYXMgdGhlIGFzeW5jIGRhdGEgc291cmNlLgogIC8vIFRoaXMgaXMgKm5vdCogcGFydCBvZiB0aGUgcmVhZGFibGUgc3RyZWFtIGludGVyZmFjZS4KICAvLyBJdCBpcyBhbiB1Z2x5IHVuZm9ydHVuYXRlIG1lc3Mgb2YgaGlzdG9yeS4KCgogIFJlYWRhYmxlLnByb3RvdHlwZS53cmFwID0gZnVuY3Rpb24gKHN0cmVhbSkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB2YXIgc3RhdGUgPSB0aGlzLl9yZWFkYWJsZVN0YXRlOwogICAgdmFyIHBhdXNlZCA9IGZhbHNlOwogICAgc3RyZWFtLm9uKCdlbmQnLCBmdW5jdGlvbiAoKSB7CiAgICAgIGRlYnVnKCd3cmFwcGVkIGVuZCcpOwoKICAgICAgaWYgKHN0YXRlLmRlY29kZXIgJiYgIXN0YXRlLmVuZGVkKSB7CiAgICAgICAgdmFyIGNodW5rID0gc3RhdGUuZGVjb2Rlci5lbmQoKTsKICAgICAgICBpZiAoY2h1bmsgJiYgY2h1bmsubGVuZ3RoKSBfdGhpcy5wdXNoKGNodW5rKTsKICAgICAgfQoKICAgICAgX3RoaXMucHVzaChudWxsKTsKICAgIH0pOwogICAgc3RyZWFtLm9uKCdkYXRhJywgZnVuY3Rpb24gKGNodW5rKSB7CiAgICAgIGRlYnVnKCd3cmFwcGVkIGRhdGEnKTsKICAgICAgaWYgKHN0YXRlLmRlY29kZXIpIGNodW5rID0gc3RhdGUuZGVjb2Rlci53cml0ZShjaHVuayk7IC8vIGRvbid0IHNraXAgb3ZlciBmYWxzeSB2YWx1ZXMgaW4gb2JqZWN0TW9kZQoKICAgICAgaWYgKHN0YXRlLm9iamVjdE1vZGUgJiYgKGNodW5rID09PSBudWxsIHx8IGNodW5rID09PSB1bmRlZmluZWQpKSByZXR1cm47ZWxzZSBpZiAoIXN0YXRlLm9iamVjdE1vZGUgJiYgKCFjaHVuayB8fCAhY2h1bmsubGVuZ3RoKSkgcmV0dXJuOwoKICAgICAgdmFyIHJldCA9IF90aGlzLnB1c2goY2h1bmspOwoKICAgICAgaWYgKCFyZXQpIHsKICAgICAgICBwYXVzZWQgPSB0cnVlOwogICAgICAgIHN0cmVhbS5wYXVzZSgpOwogICAgICB9CiAgICB9KTsgLy8gcHJveHkgYWxsIHRoZSBvdGhlciBtZXRob2RzLgogICAgLy8gaW1wb3J0YW50IHdoZW4gd3JhcHBpbmcgZmlsdGVycyBhbmQgZHVwbGV4ZXMuCgogICAgZm9yICh2YXIgaSBpbiBzdHJlYW0pIHsKICAgICAgaWYgKHRoaXNbaV0gPT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygc3RyZWFtW2ldID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgdGhpc1tpXSA9IGZ1bmN0aW9uIG1ldGhvZFdyYXAobWV0aG9kKSB7CiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gbWV0aG9kV3JhcFJldHVybkZ1bmN0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gc3RyZWFtW21ldGhvZF0uYXBwbHkoc3RyZWFtLCBhcmd1bWVudHMpOwogICAgICAgICAgfTsKICAgICAgICB9KGkpOwogICAgICB9CiAgICB9IC8vIHByb3h5IGNlcnRhaW4gaW1wb3J0YW50IGV2ZW50cy4KCgogICAgZm9yICh2YXIgbiA9IDA7IG4gPCBrUHJveHlFdmVudHMubGVuZ3RoOyBuKyspIHsKICAgICAgc3RyZWFtLm9uKGtQcm94eUV2ZW50c1tuXSwgdGhpcy5lbWl0LmJpbmQodGhpcywga1Byb3h5RXZlbnRzW25dKSk7CiAgICB9IC8vIHdoZW4gd2UgdHJ5IHRvIGNvbnN1bWUgc29tZSBtb3JlIGJ5dGVzLCBzaW1wbHkgdW5wYXVzZSB0aGUKICAgIC8vIHVuZGVybHlpbmcgc3RyZWFtLgoKCiAgICB0aGlzLl9yZWFkID0gZnVuY3Rpb24gKG4pIHsKICAgICAgZGVidWcoJ3dyYXBwZWQgX3JlYWQnLCBuKTsKCiAgICAgIGlmIChwYXVzZWQpIHsKICAgICAgICBwYXVzZWQgPSBmYWxzZTsKICAgICAgICBzdHJlYW0ucmVzdW1lKCk7CiAgICAgIH0KICAgIH07CgogICAgcmV0dXJuIHRoaXM7CiAgfTsKCiAgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicpIHsKICAgIFJlYWRhYmxlLnByb3RvdHlwZVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7CiAgICAgIGlmIChjcmVhdGVSZWFkYWJsZVN0cmVhbUFzeW5jSXRlcmF0b3IgPT09IHVuZGVmaW5lZCkgewogICAgICAgIGNyZWF0ZVJlYWRhYmxlU3RyZWFtQXN5bmNJdGVyYXRvciA9IGFzeW5jX2l0ZXJhdG9yOwogICAgICB9CgogICAgICByZXR1cm4gY3JlYXRlUmVhZGFibGVTdHJlYW1Bc3luY0l0ZXJhdG9yKHRoaXMpOwogICAgfTsKICB9CgogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWFkYWJsZS5wcm90b3R5cGUsICdyZWFkYWJsZUhpZ2hXYXRlck1hcmsnLCB7CiAgICAvLyBtYWtpbmcgaXQgZXhwbGljaXQgdGhpcyBwcm9wZXJ0eSBpcyBub3QgZW51bWVyYWJsZQogICAgLy8gYmVjYXVzZSBvdGhlcndpc2Ugc29tZSBwcm90b3R5cGUgbWFuaXB1bGF0aW9uIGluCiAgICAvLyB1c2VybGFuZCB3aWxsIGZhaWwKICAgIGVudW1lcmFibGU6IGZhbHNlLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9yZWFkYWJsZVN0YXRlLmhpZ2hXYXRlck1hcms7CiAgICB9CiAgfSk7CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlYWRhYmxlLnByb3RvdHlwZSwgJ3JlYWRhYmxlQnVmZmVyJywgewogICAgLy8gbWFraW5nIGl0IGV4cGxpY2l0IHRoaXMgcHJvcGVydHkgaXMgbm90IGVudW1lcmFibGUKICAgIC8vIGJlY2F1c2Ugb3RoZXJ3aXNlIHNvbWUgcHJvdG90eXBlIG1hbmlwdWxhdGlvbiBpbgogICAgLy8gdXNlcmxhbmQgd2lsbCBmYWlsCiAgICBlbnVtZXJhYmxlOiBmYWxzZSwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fcmVhZGFibGVTdGF0ZSAmJiB0aGlzLl9yZWFkYWJsZVN0YXRlLmJ1ZmZlcjsKICAgIH0KICB9KTsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVhZGFibGUucHJvdG90eXBlLCAncmVhZGFibGVGbG93aW5nJywgewogICAgLy8gbWFraW5nIGl0IGV4cGxpY2l0IHRoaXMgcHJvcGVydHkgaXMgbm90IGVudW1lcmFibGUKICAgIC8vIGJlY2F1c2Ugb3RoZXJ3aXNlIHNvbWUgcHJvdG90eXBlIG1hbmlwdWxhdGlvbiBpbgogICAgLy8gdXNlcmxhbmQgd2lsbCBmYWlsCiAgICBlbnVtZXJhYmxlOiBmYWxzZSwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nOwogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0KHN0YXRlKSB7CiAgICAgIGlmICh0aGlzLl9yZWFkYWJsZVN0YXRlKSB7CiAgICAgICAgdGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nID0gc3RhdGU7CiAgICAgIH0KICAgIH0KICB9KTsgLy8gZXhwb3NlZCBmb3IgdGVzdGluZyBwdXJwb3NlcyBvbmx5LgoKICBSZWFkYWJsZS5fZnJvbUxpc3QgPSBmcm9tTGlzdDsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVhZGFibGUucHJvdG90eXBlLCAncmVhZGFibGVMZW5ndGgnLCB7CiAgICAvLyBtYWtpbmcgaXQgZXhwbGljaXQgdGhpcyBwcm9wZXJ0eSBpcyBub3QgZW51bWVyYWJsZQogICAgLy8gYmVjYXVzZSBvdGhlcndpc2Ugc29tZSBwcm90b3R5cGUgbWFuaXB1bGF0aW9uIGluCiAgICAvLyB1c2VybGFuZCB3aWxsIGZhaWwKICAgIGVudW1lcmFibGU6IGZhbHNlLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9yZWFkYWJsZVN0YXRlLmxlbmd0aDsKICAgIH0KICB9KTsgLy8gUGx1Y2sgb2ZmIG4gYnl0ZXMgZnJvbSBhbiBhcnJheSBvZiBidWZmZXJzLgogIC8vIExlbmd0aCBpcyB0aGUgY29tYmluZWQgbGVuZ3RocyBvZiBhbGwgdGhlIGJ1ZmZlcnMgaW4gdGhlIGxpc3QuCiAgLy8gVGhpcyBmdW5jdGlvbiBpcyBkZXNpZ25lZCB0byBiZSBpbmxpbmFibGUsIHNvIHBsZWFzZSB0YWtlIGNhcmUgd2hlbiBtYWtpbmcKICAvLyBjaGFuZ2VzIHRvIHRoZSBmdW5jdGlvbiBib2R5LgoKICBmdW5jdGlvbiBmcm9tTGlzdChuLCBzdGF0ZSkgewogICAgLy8gbm90aGluZyBidWZmZXJlZAogICAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGw7CiAgICB2YXIgcmV0OwogICAgaWYgKHN0YXRlLm9iamVjdE1vZGUpIHJldCA9IHN0YXRlLmJ1ZmZlci5zaGlmdCgpO2Vsc2UgaWYgKCFuIHx8IG4gPj0gc3RhdGUubGVuZ3RoKSB7CiAgICAgIC8vIHJlYWQgaXQgYWxsLCB0cnVuY2F0ZSB0aGUgbGlzdAogICAgICBpZiAoc3RhdGUuZGVjb2RlcikgcmV0ID0gc3RhdGUuYnVmZmVyLmpvaW4oJycpO2Vsc2UgaWYgKHN0YXRlLmJ1ZmZlci5sZW5ndGggPT09IDEpIHJldCA9IHN0YXRlLmJ1ZmZlci5maXJzdCgpO2Vsc2UgcmV0ID0gc3RhdGUuYnVmZmVyLmNvbmNhdChzdGF0ZS5sZW5ndGgpOwogICAgICBzdGF0ZS5idWZmZXIuY2xlYXIoKTsKICAgIH0gZWxzZSB7CiAgICAgIC8vIHJlYWQgcGFydCBvZiBsaXN0CiAgICAgIHJldCA9IHN0YXRlLmJ1ZmZlci5jb25zdW1lKG4sIHN0YXRlLmRlY29kZXIpOwogICAgfQogICAgcmV0dXJuIHJldDsKICB9CgogIGZ1bmN0aW9uIGVuZFJlYWRhYmxlKHN0cmVhbSkgewogICAgdmFyIHN0YXRlID0gc3RyZWFtLl9yZWFkYWJsZVN0YXRlOwogICAgZGVidWcoJ2VuZFJlYWRhYmxlJywgc3RhdGUuZW5kRW1pdHRlZCk7CgogICAgaWYgKCFzdGF0ZS5lbmRFbWl0dGVkKSB7CiAgICAgIHN0YXRlLmVuZGVkID0gdHJ1ZTsKICAgICAgbmV4dFRpY2skMShlbmRSZWFkYWJsZU5ULCBzdGF0ZSwgc3RyZWFtKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGVuZFJlYWRhYmxlTlQoc3RhdGUsIHN0cmVhbSkgewogICAgZGVidWcoJ2VuZFJlYWRhYmxlTlQnLCBzdGF0ZS5lbmRFbWl0dGVkLCBzdGF0ZS5sZW5ndGgpOyAvLyBDaGVjayB0aGF0IHdlIGRpZG4ndCBnZXQgb25lIGxhc3QgdW5zaGlmdC4KCiAgICBpZiAoIXN0YXRlLmVuZEVtaXR0ZWQgJiYgc3RhdGUubGVuZ3RoID09PSAwKSB7CiAgICAgIHN0YXRlLmVuZEVtaXR0ZWQgPSB0cnVlOwogICAgICBzdHJlYW0ucmVhZGFibGUgPSBmYWxzZTsKICAgICAgc3RyZWFtLmVtaXQoJ2VuZCcpOwoKICAgICAgaWYgKHN0YXRlLmF1dG9EZXN0cm95KSB7CiAgICAgICAgLy8gSW4gY2FzZSBvZiBkdXBsZXggc3RyZWFtcyB3ZSBuZWVkIGEgd2F5IHRvIGRldGVjdAogICAgICAgIC8vIGlmIHRoZSB3cml0YWJsZSBzaWRlIGlzIHJlYWR5IGZvciBhdXRvRGVzdHJveSBhcyB3ZWxsCiAgICAgICAgdmFyIHdTdGF0ZSA9IHN0cmVhbS5fd3JpdGFibGVTdGF0ZTsKCiAgICAgICAgaWYgKCF3U3RhdGUgfHwgd1N0YXRlLmF1dG9EZXN0cm95ICYmIHdTdGF0ZS5maW5pc2hlZCkgewogICAgICAgICAgc3RyZWFtLmRlc3Ryb3koKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9CgogIGlmICh0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nKSB7CiAgICBSZWFkYWJsZS5mcm9tID0gZnVuY3Rpb24gKGl0ZXJhYmxlLCBvcHRzKSB7CiAgICAgIGlmIChmcm9tID09PSB1bmRlZmluZWQpIHsKICAgICAgICBmcm9tID0gZnJvbV8xOwogICAgICB9CgogICAgICByZXR1cm4gZnJvbShSZWFkYWJsZSwgaXRlcmFibGUsIG9wdHMpOwogICAgfTsKICB9CgogIGZ1bmN0aW9uIGluZGV4T2YoeHMsIHgpIHsKICAgIGZvciAodmFyIGkgPSAwLCBsID0geHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgIGlmICh4c1tpXSA9PT0geCkgcmV0dXJuIGk7CiAgICB9CgogICAgcmV0dXJuIC0xOwogIH0KCiAgdmFyIF9zdHJlYW1fdHJhbnNmb3JtID0gVHJhbnNmb3JtJDI7CgogIHZhciBfcmVxdWlyZSRjb2RlcyQxID0gZXJyb3JzLmNvZGVzLAogICAgICBFUlJfTUVUSE9EX05PVF9JTVBMRU1FTlRFRCA9IF9yZXF1aXJlJGNvZGVzJDEuRVJSX01FVEhPRF9OT1RfSU1QTEVNRU5URUQsCiAgICAgIEVSUl9NVUxUSVBMRV9DQUxMQkFDSyA9IF9yZXF1aXJlJGNvZGVzJDEuRVJSX01VTFRJUExFX0NBTExCQUNLLAogICAgICBFUlJfVFJBTlNGT1JNX0FMUkVBRFlfVFJBTlNGT1JNSU5HID0gX3JlcXVpcmUkY29kZXMkMS5FUlJfVFJBTlNGT1JNX0FMUkVBRFlfVFJBTlNGT1JNSU5HLAogICAgICBFUlJfVFJBTlNGT1JNX1dJVEhfTEVOR1RIXzAgPSBfcmVxdWlyZSRjb2RlcyQxLkVSUl9UUkFOU0ZPUk1fV0lUSF9MRU5HVEhfMDsKCiAgdmFyIER1cGxleCA9IF9zdHJlYW1fZHVwbGV4OwoKICBpbmhlcml0cyRkLmV4cG9ydHMoVHJhbnNmb3JtJDIsIER1cGxleCk7CgogIGZ1bmN0aW9uIGFmdGVyVHJhbnNmb3JtKGVyLCBkYXRhKSB7CiAgICB2YXIgdHMgPSB0aGlzLl90cmFuc2Zvcm1TdGF0ZTsKICAgIHRzLnRyYW5zZm9ybWluZyA9IGZhbHNlOwogICAgdmFyIGNiID0gdHMud3JpdGVjYjsKCiAgICBpZiAoY2IgPT09IG51bGwpIHsKICAgICAgcmV0dXJuIHRoaXMuZW1pdCgnZXJyb3InLCBuZXcgRVJSX01VTFRJUExFX0NBTExCQUNLKCkpOwogICAgfQoKICAgIHRzLndyaXRlY2h1bmsgPSBudWxsOwogICAgdHMud3JpdGVjYiA9IG51bGw7CiAgICBpZiAoZGF0YSAhPSBudWxsKSAvLyBzaW5nbGUgZXF1YWxzIGNoZWNrIGZvciBib3RoIGBudWxsYCBhbmQgYHVuZGVmaW5lZGAKICAgICAgdGhpcy5wdXNoKGRhdGEpOwogICAgY2IoZXIpOwogICAgdmFyIHJzID0gdGhpcy5fcmVhZGFibGVTdGF0ZTsKICAgIHJzLnJlYWRpbmcgPSBmYWxzZTsKCiAgICBpZiAocnMubmVlZFJlYWRhYmxlIHx8IHJzLmxlbmd0aCA8IHJzLmhpZ2hXYXRlck1hcmspIHsKICAgICAgdGhpcy5fcmVhZChycy5oaWdoV2F0ZXJNYXJrKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIFRyYW5zZm9ybSQyKG9wdGlvbnMpIHsKICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBUcmFuc2Zvcm0kMikpIHJldHVybiBuZXcgVHJhbnNmb3JtJDIob3B0aW9ucyk7CiAgICBEdXBsZXguY2FsbCh0aGlzLCBvcHRpb25zKTsKICAgIHRoaXMuX3RyYW5zZm9ybVN0YXRlID0gewogICAgICBhZnRlclRyYW5zZm9ybTogYWZ0ZXJUcmFuc2Zvcm0uYmluZCh0aGlzKSwKICAgICAgbmVlZFRyYW5zZm9ybTogZmFsc2UsCiAgICAgIHRyYW5zZm9ybWluZzogZmFsc2UsCiAgICAgIHdyaXRlY2I6IG51bGwsCiAgICAgIHdyaXRlY2h1bms6IG51bGwsCiAgICAgIHdyaXRlZW5jb2Rpbmc6IG51bGwKICAgIH07IC8vIHN0YXJ0IG91dCBhc2tpbmcgZm9yIGEgcmVhZGFibGUgZXZlbnQgb25jZSBkYXRhIGlzIHRyYW5zZm9ybWVkLgoKICAgIHRoaXMuX3JlYWRhYmxlU3RhdGUubmVlZFJlYWRhYmxlID0gdHJ1ZTsgLy8gd2UgaGF2ZSBpbXBsZW1lbnRlZCB0aGUgX3JlYWQgbWV0aG9kLCBhbmQgZG9uZSB0aGUgb3RoZXIgdGhpbmdzCiAgICAvLyB0aGF0IFJlYWRhYmxlIHdhbnRzIGJlZm9yZSB0aGUgZmlyc3QgX3JlYWQgY2FsbCwgc28gdW5zZXQgdGhlCiAgICAvLyBzeW5jIGd1YXJkIGZsYWcuCgogICAgdGhpcy5fcmVhZGFibGVTdGF0ZS5zeW5jID0gZmFsc2U7CgogICAgaWYgKG9wdGlvbnMpIHsKICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLnRyYW5zZm9ybSA9PT0gJ2Z1bmN0aW9uJykgdGhpcy5fdHJhbnNmb3JtID0gb3B0aW9ucy50cmFuc2Zvcm07CiAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5mbHVzaCA9PT0gJ2Z1bmN0aW9uJykgdGhpcy5fZmx1c2ggPSBvcHRpb25zLmZsdXNoOwogICAgfSAvLyBXaGVuIHRoZSB3cml0YWJsZSBzaWRlIGZpbmlzaGVzLCB0aGVuIGZsdXNoIG91dCBhbnl0aGluZyByZW1haW5pbmcuCgoKICAgIHRoaXMub24oJ3ByZWZpbmlzaCcsIHByZWZpbmlzaCk7CiAgfQoKICBmdW5jdGlvbiBwcmVmaW5pc2goKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIGlmICh0eXBlb2YgdGhpcy5fZmx1c2ggPT09ICdmdW5jdGlvbicgJiYgIXRoaXMuX3JlYWRhYmxlU3RhdGUuZGVzdHJveWVkKSB7CiAgICAgIHRoaXMuX2ZsdXNoKGZ1bmN0aW9uIChlciwgZGF0YSkgewogICAgICAgIGRvbmUoX3RoaXMsIGVyLCBkYXRhKTsKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICBkb25lKHRoaXMsIG51bGwsIG51bGwpOwogICAgfQogIH0KCiAgVHJhbnNmb3JtJDIucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiAoY2h1bmssIGVuY29kaW5nKSB7CiAgICB0aGlzLl90cmFuc2Zvcm1TdGF0ZS5uZWVkVHJhbnNmb3JtID0gZmFsc2U7CiAgICByZXR1cm4gRHVwbGV4LnByb3RvdHlwZS5wdXNoLmNhbGwodGhpcywgY2h1bmssIGVuY29kaW5nKTsKICB9OyAvLyBUaGlzIGlzIHRoZSBwYXJ0IHdoZXJlIHlvdSBkbyBzdHVmZiEKICAvLyBvdmVycmlkZSB0aGlzIGZ1bmN0aW9uIGluIGltcGxlbWVudGF0aW9uIGNsYXNzZXMuCiAgLy8gJ2NodW5rJyBpcyBhbiBpbnB1dCBjaHVuay4KICAvLwogIC8vIENhbGwgYHB1c2gobmV3Q2h1bmspYCB0byBwYXNzIGFsb25nIHRyYW5zZm9ybWVkIG91dHB1dAogIC8vIHRvIHRoZSByZWFkYWJsZSBzaWRlLiAgWW91IG1heSBjYWxsICdwdXNoJyB6ZXJvIG9yIG1vcmUgdGltZXMuCiAgLy8KICAvLyBDYWxsIGBjYihlcnIpYCB3aGVuIHlvdSBhcmUgZG9uZSB3aXRoIHRoaXMgY2h1bmsuICBJZiB5b3UgcGFzcwogIC8vIGFuIGVycm9yLCB0aGVuIHRoYXQnbGwgcHV0IHRoZSBodXJ0IG9uIHRoZSB3aG9sZSBvcGVyYXRpb24uICBJZiB5b3UKICAvLyBuZXZlciBjYWxsIGNiKCksIHRoZW4geW91J2xsIG5ldmVyIGdldCBhbm90aGVyIGNodW5rLgoKCiAgVHJhbnNmb3JtJDIucHJvdG90eXBlLl90cmFuc2Zvcm0gPSBmdW5jdGlvbiAoY2h1bmssIGVuY29kaW5nLCBjYikgewogICAgY2IobmV3IEVSUl9NRVRIT0RfTk9UX0lNUExFTUVOVEVEKCdfdHJhbnNmb3JtKCknKSk7CiAgfTsKCiAgVHJhbnNmb3JtJDIucHJvdG90eXBlLl93cml0ZSA9IGZ1bmN0aW9uIChjaHVuaywgZW5jb2RpbmcsIGNiKSB7CiAgICB2YXIgdHMgPSB0aGlzLl90cmFuc2Zvcm1TdGF0ZTsKICAgIHRzLndyaXRlY2IgPSBjYjsKICAgIHRzLndyaXRlY2h1bmsgPSBjaHVuazsKICAgIHRzLndyaXRlZW5jb2RpbmcgPSBlbmNvZGluZzsKCiAgICBpZiAoIXRzLnRyYW5zZm9ybWluZykgewogICAgICB2YXIgcnMgPSB0aGlzLl9yZWFkYWJsZVN0YXRlOwogICAgICBpZiAodHMubmVlZFRyYW5zZm9ybSB8fCBycy5uZWVkUmVhZGFibGUgfHwgcnMubGVuZ3RoIDwgcnMuaGlnaFdhdGVyTWFyaykgdGhpcy5fcmVhZChycy5oaWdoV2F0ZXJNYXJrKTsKICAgIH0KICB9OyAvLyBEb2Vzbid0IG1hdHRlciB3aGF0IHRoZSBhcmdzIGFyZSBoZXJlLgogIC8vIF90cmFuc2Zvcm0gZG9lcyBhbGwgdGhlIHdvcmsuCiAgLy8gVGhhdCB3ZSBnb3QgaGVyZSBtZWFucyB0aGF0IHRoZSByZWFkYWJsZSBzaWRlIHdhbnRzIG1vcmUgZGF0YS4KCgogIFRyYW5zZm9ybSQyLnByb3RvdHlwZS5fcmVhZCA9IGZ1bmN0aW9uIChuKSB7CiAgICB2YXIgdHMgPSB0aGlzLl90cmFuc2Zvcm1TdGF0ZTsKCiAgICBpZiAodHMud3JpdGVjaHVuayAhPT0gbnVsbCAmJiAhdHMudHJhbnNmb3JtaW5nKSB7CiAgICAgIHRzLnRyYW5zZm9ybWluZyA9IHRydWU7CgogICAgICB0aGlzLl90cmFuc2Zvcm0odHMud3JpdGVjaHVuaywgdHMud3JpdGVlbmNvZGluZywgdHMuYWZ0ZXJUcmFuc2Zvcm0pOwogICAgfSBlbHNlIHsKICAgICAgLy8gbWFyayB0aGF0IHdlIG5lZWQgYSB0cmFuc2Zvcm0sIHNvIHRoYXQgYW55IGRhdGEgdGhhdCBjb21lcyBpbgogICAgICAvLyB3aWxsIGdldCBwcm9jZXNzZWQsIG5vdyB0aGF0IHdlJ3ZlIGFza2VkIGZvciBpdC4KICAgICAgdHMubmVlZFRyYW5zZm9ybSA9IHRydWU7CiAgICB9CiAgfTsKCiAgVHJhbnNmb3JtJDIucHJvdG90eXBlLl9kZXN0cm95ID0gZnVuY3Rpb24gKGVyciwgY2IpIHsKICAgIER1cGxleC5wcm90b3R5cGUuX2Rlc3Ryb3kuY2FsbCh0aGlzLCBlcnIsIGZ1bmN0aW9uIChlcnIyKSB7CiAgICAgIGNiKGVycjIpOwogICAgfSk7CiAgfTsKCiAgZnVuY3Rpb24gZG9uZShzdHJlYW0sIGVyLCBkYXRhKSB7CiAgICBpZiAoZXIpIHJldHVybiBzdHJlYW0uZW1pdCgnZXJyb3InLCBlcik7CiAgICBpZiAoZGF0YSAhPSBudWxsKSAvLyBzaW5nbGUgZXF1YWxzIGNoZWNrIGZvciBib3RoIGBudWxsYCBhbmQgYHVuZGVmaW5lZGAKICAgICAgc3RyZWFtLnB1c2goZGF0YSk7IC8vIFRPRE8oQnJpZGdlQVIpOiBXcml0ZSBhIHRlc3QgZm9yIHRoZXNlIHR3byBlcnJvciBjYXNlcwogICAgLy8gaWYgdGhlcmUncyBub3RoaW5nIGluIHRoZSB3cml0ZSBidWZmZXIsIHRoZW4gdGhhdCBtZWFucwogICAgLy8gdGhhdCBub3RoaW5nIG1vcmUgd2lsbCBldmVyIGJlIHByb3ZpZGVkCgogICAgaWYgKHN0cmVhbS5fd3JpdGFibGVTdGF0ZS5sZW5ndGgpIHRocm93IG5ldyBFUlJfVFJBTlNGT1JNX1dJVEhfTEVOR1RIXzAoKTsKICAgIGlmIChzdHJlYW0uX3RyYW5zZm9ybVN0YXRlLnRyYW5zZm9ybWluZykgdGhyb3cgbmV3IEVSUl9UUkFOU0ZPUk1fQUxSRUFEWV9UUkFOU0ZPUk1JTkcoKTsKICAgIHJldHVybiBzdHJlYW0ucHVzaChudWxsKTsKICB9CgogIHZhciBfc3RyZWFtX3Bhc3N0aHJvdWdoID0gUGFzc1Rocm91Z2g7CgogIHZhciBUcmFuc2Zvcm0kMSA9IF9zdHJlYW1fdHJhbnNmb3JtOwoKICBpbmhlcml0cyRkLmV4cG9ydHMoUGFzc1Rocm91Z2gsIFRyYW5zZm9ybSQxKTsKCiAgZnVuY3Rpb24gUGFzc1Rocm91Z2gob3B0aW9ucykgewogICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFBhc3NUaHJvdWdoKSkgcmV0dXJuIG5ldyBQYXNzVGhyb3VnaChvcHRpb25zKTsKICAgIFRyYW5zZm9ybSQxLmNhbGwodGhpcywgb3B0aW9ucyk7CiAgfQoKICBQYXNzVGhyb3VnaC5wcm90b3R5cGUuX3RyYW5zZm9ybSA9IGZ1bmN0aW9uIChjaHVuaywgZW5jb2RpbmcsIGNiKSB7CiAgICBjYihudWxsLCBjaHVuayk7CiAgfTsKCiAgdmFyIGVvczsKCiAgZnVuY3Rpb24gb25jZShjYWxsYmFjaykgewogICAgdmFyIGNhbGxlZCA9IGZhbHNlOwogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKGNhbGxlZCkgcmV0dXJuOwogICAgICBjYWxsZWQgPSB0cnVlOwogICAgICBjYWxsYmFjay5hcHBseSh2b2lkIDAsIGFyZ3VtZW50cyk7CiAgICB9OwogIH0KCiAgdmFyIF9yZXF1aXJlJGNvZGVzID0gZXJyb3JzLmNvZGVzLAogICAgICBFUlJfTUlTU0lOR19BUkdTID0gX3JlcXVpcmUkY29kZXMuRVJSX01JU1NJTkdfQVJHUywKICAgICAgRVJSX1NUUkVBTV9ERVNUUk9ZRUQgPSBfcmVxdWlyZSRjb2Rlcy5FUlJfU1RSRUFNX0RFU1RST1lFRDsKCiAgZnVuY3Rpb24gbm9vcChlcnIpIHsKICAgIC8vIFJldGhyb3cgdGhlIGVycm9yIGlmIGl0IGV4aXN0cyB0byBhdm9pZCBzd2FsbG93aW5nIGl0CiAgICBpZiAoZXJyKSB0aHJvdyBlcnI7CiAgfQoKICBmdW5jdGlvbiBpc1JlcXVlc3Qoc3RyZWFtKSB7CiAgICByZXR1cm4gc3RyZWFtLnNldEhlYWRlciAmJiB0eXBlb2Ygc3RyZWFtLmFib3J0ID09PSAnZnVuY3Rpb24nOwogIH0KCiAgZnVuY3Rpb24gZGVzdHJveWVyKHN0cmVhbSwgcmVhZGluZywgd3JpdGluZywgY2FsbGJhY2spIHsKICAgIGNhbGxiYWNrID0gb25jZShjYWxsYmFjayk7CiAgICB2YXIgY2xvc2VkID0gZmFsc2U7CiAgICBzdHJlYW0ub24oJ2Nsb3NlJywgZnVuY3Rpb24gKCkgewogICAgICBjbG9zZWQgPSB0cnVlOwogICAgfSk7CiAgICBpZiAoZW9zID09PSB1bmRlZmluZWQpIGVvcyA9IGVuZE9mU3RyZWFtOwogICAgZW9zKHN0cmVhbSwgewogICAgICByZWFkYWJsZTogcmVhZGluZywKICAgICAgd3JpdGFibGU6IHdyaXRpbmcKICAgIH0sIGZ1bmN0aW9uIChlcnIpIHsKICAgICAgaWYgKGVycikgcmV0dXJuIGNhbGxiYWNrKGVycik7CiAgICAgIGNsb3NlZCA9IHRydWU7CiAgICAgIGNhbGxiYWNrKCk7CiAgICB9KTsKICAgIHZhciBkZXN0cm95ZWQgPSBmYWxzZTsKICAgIHJldHVybiBmdW5jdGlvbiAoZXJyKSB7CiAgICAgIGlmIChjbG9zZWQpIHJldHVybjsKICAgICAgaWYgKGRlc3Ryb3llZCkgcmV0dXJuOwogICAgICBkZXN0cm95ZWQgPSB0cnVlOyAvLyByZXF1ZXN0LmRlc3Ryb3kganVzdCBkbyAuZW5kIC0gLmFib3J0IGlzIHdoYXQgd2Ugd2FudAoKICAgICAgaWYgKGlzUmVxdWVzdChzdHJlYW0pKSByZXR1cm4gc3RyZWFtLmFib3J0KCk7CiAgICAgIGlmICh0eXBlb2Ygc3RyZWFtLmRlc3Ryb3kgPT09ICdmdW5jdGlvbicpIHJldHVybiBzdHJlYW0uZGVzdHJveSgpOwogICAgICBjYWxsYmFjayhlcnIgfHwgbmV3IEVSUl9TVFJFQU1fREVTVFJPWUVEKCdwaXBlJykpOwogICAgfTsKICB9CgogIGZ1bmN0aW9uIGNhbGwoZm4pIHsKICAgIGZuKCk7CiAgfQoKICBmdW5jdGlvbiBwaXBlKGZyb20sIHRvKSB7CiAgICByZXR1cm4gZnJvbS5waXBlKHRvKTsKICB9CgogIGZ1bmN0aW9uIHBvcENhbGxiYWNrKHN0cmVhbXMpIHsKICAgIGlmICghc3RyZWFtcy5sZW5ndGgpIHJldHVybiBub29wOwogICAgaWYgKHR5cGVvZiBzdHJlYW1zW3N0cmVhbXMubGVuZ3RoIC0gMV0gIT09ICdmdW5jdGlvbicpIHJldHVybiBub29wOwogICAgcmV0dXJuIHN0cmVhbXMucG9wKCk7CiAgfQoKICBmdW5jdGlvbiBwaXBlbGluZSgpIHsKICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBzdHJlYW1zID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykgewogICAgICBzdHJlYW1zW19rZXldID0gYXJndW1lbnRzW19rZXldOwogICAgfQoKICAgIHZhciBjYWxsYmFjayA9IHBvcENhbGxiYWNrKHN0cmVhbXMpOwogICAgaWYgKEFycmF5LmlzQXJyYXkoc3RyZWFtc1swXSkpIHN0cmVhbXMgPSBzdHJlYW1zWzBdOwoKICAgIGlmIChzdHJlYW1zLmxlbmd0aCA8IDIpIHsKICAgICAgdGhyb3cgbmV3IEVSUl9NSVNTSU5HX0FSR1MoJ3N0cmVhbXMnKTsKICAgIH0KCiAgICB2YXIgZXJyb3I7CiAgICB2YXIgZGVzdHJveXMgPSBzdHJlYW1zLm1hcChmdW5jdGlvbiAoc3RyZWFtLCBpKSB7CiAgICAgIHZhciByZWFkaW5nID0gaSA8IHN0cmVhbXMubGVuZ3RoIC0gMTsKICAgICAgdmFyIHdyaXRpbmcgPSBpID4gMDsKICAgICAgcmV0dXJuIGRlc3Ryb3llcihzdHJlYW0sIHJlYWRpbmcsIHdyaXRpbmcsIGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBpZiAoIWVycm9yKSBlcnJvciA9IGVycjsKICAgICAgICBpZiAoZXJyKSBkZXN0cm95cy5mb3JFYWNoKGNhbGwpOwogICAgICAgIGlmIChyZWFkaW5nKSByZXR1cm47CiAgICAgICAgZGVzdHJveXMuZm9yRWFjaChjYWxsKTsKICAgICAgICBjYWxsYmFjayhlcnJvcik7CiAgICAgIH0pOwogICAgfSk7CiAgICByZXR1cm4gc3RyZWFtcy5yZWR1Y2UocGlwZSk7CiAgfQoKICB2YXIgcGlwZWxpbmVfMSA9IHBpcGVsaW5lOwoKICAvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy4KICAvLwogIC8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhCiAgLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZQogIC8vICJTb2Z0d2FyZSIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcKICAvLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsCiAgLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdAogIC8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZQogIC8vIGZvbGxvd2luZyBjb25kaXRpb25zOgogIC8vCiAgLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQKICAvLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4KICAvLwogIC8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTCiAgLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRgogIC8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4KICAvLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwKICAvLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IKICAvLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFCiAgLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS4KCiAgdmFyIHN0cmVhbSA9IFN0cmVhbTsKCiAgdmFyIEVFID0gZXZlbnRzLmV4cG9ydHMuRXZlbnRFbWl0dGVyOwogIHZhciBpbmhlcml0cyQyID0gaW5oZXJpdHMkZC5leHBvcnRzOwoKICBpbmhlcml0cyQyKFN0cmVhbSwgRUUpOwogIFN0cmVhbS5SZWFkYWJsZSA9IF9zdHJlYW1fcmVhZGFibGU7CiAgU3RyZWFtLldyaXRhYmxlID0gX3N0cmVhbV93cml0YWJsZTsKICBTdHJlYW0uRHVwbGV4ID0gX3N0cmVhbV9kdXBsZXg7CiAgU3RyZWFtLlRyYW5zZm9ybSA9IF9zdHJlYW1fdHJhbnNmb3JtOwogIFN0cmVhbS5QYXNzVGhyb3VnaCA9IF9zdHJlYW1fcGFzc3Rocm91Z2g7CiAgU3RyZWFtLmZpbmlzaGVkID0gZW5kT2ZTdHJlYW07CiAgU3RyZWFtLnBpcGVsaW5lID0gcGlwZWxpbmVfMTsKCiAgLy8gQmFja3dhcmRzLWNvbXBhdCB3aXRoIG5vZGUgMC40LngKICBTdHJlYW0uU3RyZWFtID0gU3RyZWFtOwoKCgogIC8vIG9sZC1zdHlsZSBzdHJlYW1zLiAgTm90ZSB0aGF0IHRoZSBwaXBlIG1ldGhvZCAodGhlIG9ubHkgcmVsZXZhbnQKICAvLyBwYXJ0IG9mIHRoaXMgY2xhc3MpIGlzIG92ZXJyaWRkZW4gaW4gdGhlIFJlYWRhYmxlIGNsYXNzLgoKICBmdW5jdGlvbiBTdHJlYW0oKSB7CiAgICBFRS5jYWxsKHRoaXMpOwogIH0KCiAgU3RyZWFtLnByb3RvdHlwZS5waXBlID0gZnVuY3Rpb24oZGVzdCwgb3B0aW9ucykgewogICAgdmFyIHNvdXJjZSA9IHRoaXM7CgogICAgZnVuY3Rpb24gb25kYXRhKGNodW5rKSB7CiAgICAgIGlmIChkZXN0LndyaXRhYmxlKSB7CiAgICAgICAgaWYgKGZhbHNlID09PSBkZXN0LndyaXRlKGNodW5rKSAmJiBzb3VyY2UucGF1c2UpIHsKICAgICAgICAgIHNvdXJjZS5wYXVzZSgpOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIHNvdXJjZS5vbignZGF0YScsIG9uZGF0YSk7CgogICAgZnVuY3Rpb24gb25kcmFpbigpIHsKICAgICAgaWYgKHNvdXJjZS5yZWFkYWJsZSAmJiBzb3VyY2UucmVzdW1lKSB7CiAgICAgICAgc291cmNlLnJlc3VtZSgpOwogICAgICB9CiAgICB9CgogICAgZGVzdC5vbignZHJhaW4nLCBvbmRyYWluKTsKCiAgICAvLyBJZiB0aGUgJ2VuZCcgb3B0aW9uIGlzIG5vdCBzdXBwbGllZCwgZGVzdC5lbmQoKSB3aWxsIGJlIGNhbGxlZCB3aGVuCiAgICAvLyBzb3VyY2UgZ2V0cyB0aGUgJ2VuZCcgb3IgJ2Nsb3NlJyBldmVudHMuICBPbmx5IGRlc3QuZW5kKCkgb25jZS4KICAgIGlmICghZGVzdC5faXNTdGRpbyAmJiAoIW9wdGlvbnMgfHwgb3B0aW9ucy5lbmQgIT09IGZhbHNlKSkgewogICAgICBzb3VyY2Uub24oJ2VuZCcsIG9uZW5kKTsKICAgICAgc291cmNlLm9uKCdjbG9zZScsIG9uY2xvc2UpOwogICAgfQoKICAgIHZhciBkaWRPbkVuZCA9IGZhbHNlOwogICAgZnVuY3Rpb24gb25lbmQoKSB7CiAgICAgIGlmIChkaWRPbkVuZCkgcmV0dXJuOwogICAgICBkaWRPbkVuZCA9IHRydWU7CgogICAgICBkZXN0LmVuZCgpOwogICAgfQoKCiAgICBmdW5jdGlvbiBvbmNsb3NlKCkgewogICAgICBpZiAoZGlkT25FbmQpIHJldHVybjsKICAgICAgZGlkT25FbmQgPSB0cnVlOwoKICAgICAgaWYgKHR5cGVvZiBkZXN0LmRlc3Ryb3kgPT09ICdmdW5jdGlvbicpIGRlc3QuZGVzdHJveSgpOwogICAgfQoKICAgIC8vIGRvbid0IGxlYXZlIGRhbmdsaW5nIHBpcGVzIHdoZW4gdGhlcmUgYXJlIGVycm9ycy4KICAgIGZ1bmN0aW9uIG9uZXJyb3IoZXIpIHsKICAgICAgY2xlYW51cCgpOwogICAgICBpZiAoRUUubGlzdGVuZXJDb3VudCh0aGlzLCAnZXJyb3InKSA9PT0gMCkgewogICAgICAgIHRocm93IGVyOyAvLyBVbmhhbmRsZWQgc3RyZWFtIGVycm9yIGluIHBpcGUuCiAgICAgIH0KICAgIH0KCiAgICBzb3VyY2Uub24oJ2Vycm9yJywgb25lcnJvcik7CiAgICBkZXN0Lm9uKCdlcnJvcicsIG9uZXJyb3IpOwoKICAgIC8vIHJlbW92ZSBhbGwgdGhlIGV2ZW50IGxpc3RlbmVycyB0aGF0IHdlcmUgYWRkZWQuCiAgICBmdW5jdGlvbiBjbGVhbnVwKCkgewogICAgICBzb3VyY2UucmVtb3ZlTGlzdGVuZXIoJ2RhdGEnLCBvbmRhdGEpOwogICAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdkcmFpbicsIG9uZHJhaW4pOwoKICAgICAgc291cmNlLnJlbW92ZUxpc3RlbmVyKCdlbmQnLCBvbmVuZCk7CiAgICAgIHNvdXJjZS5yZW1vdmVMaXN0ZW5lcignY2xvc2UnLCBvbmNsb3NlKTsKCiAgICAgIHNvdXJjZS5yZW1vdmVMaXN0ZW5lcignZXJyb3InLCBvbmVycm9yKTsKICAgICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZXJyb3InLCBvbmVycm9yKTsKCiAgICAgIHNvdXJjZS5yZW1vdmVMaXN0ZW5lcignZW5kJywgY2xlYW51cCk7CiAgICAgIHNvdXJjZS5yZW1vdmVMaXN0ZW5lcignY2xvc2UnLCBjbGVhbnVwKTsKCiAgICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2Nsb3NlJywgY2xlYW51cCk7CiAgICB9CgogICAgc291cmNlLm9uKCdlbmQnLCBjbGVhbnVwKTsKICAgIHNvdXJjZS5vbignY2xvc2UnLCBjbGVhbnVwKTsKCiAgICBkZXN0Lm9uKCdjbG9zZScsIGNsZWFudXApOwoKICAgIGRlc3QuZW1pdCgncGlwZScsIHNvdXJjZSk7CgogICAgLy8gQWxsb3cgZm9yIHVuaXgtbGlrZSB1c2FnZTogQS5waXBlKEIpLnBpcGUoQykKICAgIHJldHVybiBkZXN0OwogIH07CgogIChmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgdmFyIFN0cmVhbSA9IHN0cmVhbTsKICB7CiAgICBleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBfc3RyZWFtX3JlYWRhYmxlOwogICAgZXhwb3J0cy5TdHJlYW0gPSBTdHJlYW0gfHwgZXhwb3J0czsKICAgIGV4cG9ydHMuUmVhZGFibGUgPSBleHBvcnRzOwogICAgZXhwb3J0cy5Xcml0YWJsZSA9IF9zdHJlYW1fd3JpdGFibGU7CiAgICBleHBvcnRzLkR1cGxleCA9IF9zdHJlYW1fZHVwbGV4OwogICAgZXhwb3J0cy5UcmFuc2Zvcm0gPSBfc3RyZWFtX3RyYW5zZm9ybTsKICAgIGV4cG9ydHMuUGFzc1Rocm91Z2ggPSBfc3RyZWFtX3Bhc3N0aHJvdWdoOwogICAgZXhwb3J0cy5maW5pc2hlZCA9IGVuZE9mU3RyZWFtOwogICAgZXhwb3J0cy5waXBlbGluZSA9IHBpcGVsaW5lXzE7CiAgfQogIH0ocmVhZGFibGUsIHJlYWRhYmxlLmV4cG9ydHMpKTsKCiAgdmFyIEJ1ZmZlciRhID0gc2FmZUJ1ZmZlciQxLmV4cG9ydHMuQnVmZmVyOwogIHZhciBUcmFuc2Zvcm0gPSByZWFkYWJsZS5leHBvcnRzLlRyYW5zZm9ybTsKICB2YXIgaW5oZXJpdHMkMSA9IGluaGVyaXRzJGQuZXhwb3J0czsKCiAgZnVuY3Rpb24gdGhyb3dJZk5vdFN0cmluZ09yQnVmZmVyICh2YWwsIHByZWZpeCkgewogICAgaWYgKCFCdWZmZXIkYS5pc0J1ZmZlcih2YWwpICYmIHR5cGVvZiB2YWwgIT09ICdzdHJpbmcnKSB7CiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IocHJlZml4ICsgJyBtdXN0IGJlIGEgc3RyaW5nIG9yIGEgYnVmZmVyJykKICAgIH0KICB9CgogIGZ1bmN0aW9uIEhhc2hCYXNlJDEgKGJsb2NrU2l6ZSkgewogICAgVHJhbnNmb3JtLmNhbGwodGhpcyk7CgogICAgdGhpcy5fYmxvY2sgPSBCdWZmZXIkYS5hbGxvY1Vuc2FmZShibG9ja1NpemUpOwogICAgdGhpcy5fYmxvY2tTaXplID0gYmxvY2tTaXplOwogICAgdGhpcy5fYmxvY2tPZmZzZXQgPSAwOwogICAgdGhpcy5fbGVuZ3RoID0gWzAsIDAsIDAsIDBdOwoKICAgIHRoaXMuX2ZpbmFsaXplZCA9IGZhbHNlOwogIH0KCiAgaW5oZXJpdHMkMShIYXNoQmFzZSQxLCBUcmFuc2Zvcm0pOwoKICBIYXNoQmFzZSQxLnByb3RvdHlwZS5fdHJhbnNmb3JtID0gZnVuY3Rpb24gKGNodW5rLCBlbmNvZGluZywgY2FsbGJhY2spIHsKICAgIHZhciBlcnJvciA9IG51bGw7CiAgICB0cnkgewogICAgICB0aGlzLnVwZGF0ZShjaHVuaywgZW5jb2RpbmcpOwogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgIGVycm9yID0gZXJyOwogICAgfQoKICAgIGNhbGxiYWNrKGVycm9yKTsKICB9OwoKICBIYXNoQmFzZSQxLnByb3RvdHlwZS5fZmx1c2ggPSBmdW5jdGlvbiAoY2FsbGJhY2spIHsKICAgIHZhciBlcnJvciA9IG51bGw7CiAgICB0cnkgewogICAgICB0aGlzLnB1c2godGhpcy5kaWdlc3QoKSk7CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgZXJyb3IgPSBlcnI7CiAgICB9CgogICAgY2FsbGJhY2soZXJyb3IpOwogIH07CgogIEhhc2hCYXNlJDEucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChkYXRhLCBlbmNvZGluZykgewogICAgdGhyb3dJZk5vdFN0cmluZ09yQnVmZmVyKGRhdGEsICdEYXRhJyk7CiAgICBpZiAodGhpcy5fZmluYWxpemVkKSB0aHJvdyBuZXcgRXJyb3IoJ0RpZ2VzdCBhbHJlYWR5IGNhbGxlZCcpCiAgICBpZiAoIUJ1ZmZlciRhLmlzQnVmZmVyKGRhdGEpKSBkYXRhID0gQnVmZmVyJGEuZnJvbShkYXRhLCBlbmNvZGluZyk7CgogICAgLy8gY29uc3VtZSBkYXRhCiAgICB2YXIgYmxvY2sgPSB0aGlzLl9ibG9jazsKICAgIHZhciBvZmZzZXQgPSAwOwogICAgd2hpbGUgKHRoaXMuX2Jsb2NrT2Zmc2V0ICsgZGF0YS5sZW5ndGggLSBvZmZzZXQgPj0gdGhpcy5fYmxvY2tTaXplKSB7CiAgICAgIGZvciAodmFyIGkgPSB0aGlzLl9ibG9ja09mZnNldDsgaSA8IHRoaXMuX2Jsb2NrU2l6ZTspIGJsb2NrW2krK10gPSBkYXRhW29mZnNldCsrXTsKICAgICAgdGhpcy5fdXBkYXRlKCk7CiAgICAgIHRoaXMuX2Jsb2NrT2Zmc2V0ID0gMDsKICAgIH0KICAgIHdoaWxlIChvZmZzZXQgPCBkYXRhLmxlbmd0aCkgYmxvY2tbdGhpcy5fYmxvY2tPZmZzZXQrK10gPSBkYXRhW29mZnNldCsrXTsKCiAgICAvLyB1cGRhdGUgbGVuZ3RoCiAgICBmb3IgKHZhciBqID0gMCwgY2FycnkgPSBkYXRhLmxlbmd0aCAqIDg7IGNhcnJ5ID4gMDsgKytqKSB7CiAgICAgIHRoaXMuX2xlbmd0aFtqXSArPSBjYXJyeTsKICAgICAgY2FycnkgPSAodGhpcy5fbGVuZ3RoW2pdIC8gMHgwMTAwMDAwMDAwKSB8IDA7CiAgICAgIGlmIChjYXJyeSA+IDApIHRoaXMuX2xlbmd0aFtqXSAtPSAweDAxMDAwMDAwMDAgKiBjYXJyeTsKICAgIH0KCiAgICByZXR1cm4gdGhpcwogIH07CgogIEhhc2hCYXNlJDEucHJvdG90eXBlLl91cGRhdGUgPSBmdW5jdGlvbiAoKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ191cGRhdGUgaXMgbm90IGltcGxlbWVudGVkJykKICB9OwoKICBIYXNoQmFzZSQxLnByb3RvdHlwZS5kaWdlc3QgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKICAgIGlmICh0aGlzLl9maW5hbGl6ZWQpIHRocm93IG5ldyBFcnJvcignRGlnZXN0IGFscmVhZHkgY2FsbGVkJykKICAgIHRoaXMuX2ZpbmFsaXplZCA9IHRydWU7CgogICAgdmFyIGRpZ2VzdCA9IHRoaXMuX2RpZ2VzdCgpOwogICAgaWYgKGVuY29kaW5nICE9PSB1bmRlZmluZWQpIGRpZ2VzdCA9IGRpZ2VzdC50b1N0cmluZyhlbmNvZGluZyk7CgogICAgLy8gcmVzZXQgc3RhdGUKICAgIHRoaXMuX2Jsb2NrLmZpbGwoMCk7CiAgICB0aGlzLl9ibG9ja09mZnNldCA9IDA7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDQ7ICsraSkgdGhpcy5fbGVuZ3RoW2ldID0gMDsKCiAgICByZXR1cm4gZGlnZXN0CiAgfTsKCiAgSGFzaEJhc2UkMS5wcm90b3R5cGUuX2RpZ2VzdCA9IGZ1bmN0aW9uICgpIHsKICAgIHRocm93IG5ldyBFcnJvcignX2RpZ2VzdCBpcyBub3QgaW1wbGVtZW50ZWQnKQogIH07CgogIHZhciBoYXNoQmFzZSA9IEhhc2hCYXNlJDE7CgogIHZhciBpbmhlcml0cyA9IGluaGVyaXRzJGQuZXhwb3J0czsKICB2YXIgSGFzaEJhc2UgPSBoYXNoQmFzZTsKICB2YXIgQnVmZmVyJDkgPSBzYWZlQnVmZmVyJDEuZXhwb3J0cy5CdWZmZXI7CgogIHZhciBBUlJBWTE2ID0gbmV3IEFycmF5KDE2KTsKCiAgZnVuY3Rpb24gTUQ1JDEgKCkgewogICAgSGFzaEJhc2UuY2FsbCh0aGlzLCA2NCk7CgogICAgLy8gc3RhdGUKICAgIHRoaXMuX2EgPSAweDY3NDUyMzAxOwogICAgdGhpcy5fYiA9IDB4ZWZjZGFiODk7CiAgICB0aGlzLl9jID0gMHg5OGJhZGNmZTsKICAgIHRoaXMuX2QgPSAweDEwMzI1NDc2OwogIH0KCiAgaW5oZXJpdHMoTUQ1JDEsIEhhc2hCYXNlKTsKCiAgTUQ1JDEucHJvdG90eXBlLl91cGRhdGUgPSBmdW5jdGlvbiAoKSB7CiAgICB2YXIgTSA9IEFSUkFZMTY7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDE2OyArK2kpIE1baV0gPSB0aGlzLl9ibG9jay5yZWFkSW50MzJMRShpICogNCk7CgogICAgdmFyIGEgPSB0aGlzLl9hOwogICAgdmFyIGIgPSB0aGlzLl9iOwogICAgdmFyIGMgPSB0aGlzLl9jOwogICAgdmFyIGQgPSB0aGlzLl9kOwoKICAgIGEgPSBmbkYoYSwgYiwgYywgZCwgTVswXSwgMHhkNzZhYTQ3OCwgNyk7CiAgICBkID0gZm5GKGQsIGEsIGIsIGMsIE1bMV0sIDB4ZThjN2I3NTYsIDEyKTsKICAgIGMgPSBmbkYoYywgZCwgYSwgYiwgTVsyXSwgMHgyNDIwNzBkYiwgMTcpOwogICAgYiA9IGZuRihiLCBjLCBkLCBhLCBNWzNdLCAweGMxYmRjZWVlLCAyMik7CiAgICBhID0gZm5GKGEsIGIsIGMsIGQsIE1bNF0sIDB4ZjU3YzBmYWYsIDcpOwogICAgZCA9IGZuRihkLCBhLCBiLCBjLCBNWzVdLCAweDQ3ODdjNjJhLCAxMik7CiAgICBjID0gZm5GKGMsIGQsIGEsIGIsIE1bNl0sIDB4YTgzMDQ2MTMsIDE3KTsKICAgIGIgPSBmbkYoYiwgYywgZCwgYSwgTVs3XSwgMHhmZDQ2OTUwMSwgMjIpOwogICAgYSA9IGZuRihhLCBiLCBjLCBkLCBNWzhdLCAweDY5ODA5OGQ4LCA3KTsKICAgIGQgPSBmbkYoZCwgYSwgYiwgYywgTVs5XSwgMHg4YjQ0ZjdhZiwgMTIpOwogICAgYyA9IGZuRihjLCBkLCBhLCBiLCBNWzEwXSwgMHhmZmZmNWJiMSwgMTcpOwogICAgYiA9IGZuRihiLCBjLCBkLCBhLCBNWzExXSwgMHg4OTVjZDdiZSwgMjIpOwogICAgYSA9IGZuRihhLCBiLCBjLCBkLCBNWzEyXSwgMHg2YjkwMTEyMiwgNyk7CiAgICBkID0gZm5GKGQsIGEsIGIsIGMsIE1bMTNdLCAweGZkOTg3MTkzLCAxMik7CiAgICBjID0gZm5GKGMsIGQsIGEsIGIsIE1bMTRdLCAweGE2Nzk0MzhlLCAxNyk7CiAgICBiID0gZm5GKGIsIGMsIGQsIGEsIE1bMTVdLCAweDQ5YjQwODIxLCAyMik7CgogICAgYSA9IGZuRyhhLCBiLCBjLCBkLCBNWzFdLCAweGY2MWUyNTYyLCA1KTsKICAgIGQgPSBmbkcoZCwgYSwgYiwgYywgTVs2XSwgMHhjMDQwYjM0MCwgOSk7CiAgICBjID0gZm5HKGMsIGQsIGEsIGIsIE1bMTFdLCAweDI2NWU1YTUxLCAxNCk7CiAgICBiID0gZm5HKGIsIGMsIGQsIGEsIE1bMF0sIDB4ZTliNmM3YWEsIDIwKTsKICAgIGEgPSBmbkcoYSwgYiwgYywgZCwgTVs1XSwgMHhkNjJmMTA1ZCwgNSk7CiAgICBkID0gZm5HKGQsIGEsIGIsIGMsIE1bMTBdLCAweDAyNDQxNDUzLCA5KTsKICAgIGMgPSBmbkcoYywgZCwgYSwgYiwgTVsxNV0sIDB4ZDhhMWU2ODEsIDE0KTsKICAgIGIgPSBmbkcoYiwgYywgZCwgYSwgTVs0XSwgMHhlN2QzZmJjOCwgMjApOwogICAgYSA9IGZuRyhhLCBiLCBjLCBkLCBNWzldLCAweDIxZTFjZGU2LCA1KTsKICAgIGQgPSBmbkcoZCwgYSwgYiwgYywgTVsxNF0sIDB4YzMzNzA3ZDYsIDkpOwogICAgYyA9IGZuRyhjLCBkLCBhLCBiLCBNWzNdLCAweGY0ZDUwZDg3LCAxNCk7CiAgICBiID0gZm5HKGIsIGMsIGQsIGEsIE1bOF0sIDB4NDU1YTE0ZWQsIDIwKTsKICAgIGEgPSBmbkcoYSwgYiwgYywgZCwgTVsxM10sIDB4YTllM2U5MDUsIDUpOwogICAgZCA9IGZuRyhkLCBhLCBiLCBjLCBNWzJdLCAweGZjZWZhM2Y4LCA5KTsKICAgIGMgPSBmbkcoYywgZCwgYSwgYiwgTVs3XSwgMHg2NzZmMDJkOSwgMTQpOwogICAgYiA9IGZuRyhiLCBjLCBkLCBhLCBNWzEyXSwgMHg4ZDJhNGM4YSwgMjApOwoKICAgIGEgPSBmbkgoYSwgYiwgYywgZCwgTVs1XSwgMHhmZmZhMzk0MiwgNCk7CiAgICBkID0gZm5IKGQsIGEsIGIsIGMsIE1bOF0sIDB4ODc3MWY2ODEsIDExKTsKICAgIGMgPSBmbkgoYywgZCwgYSwgYiwgTVsxMV0sIDB4NmQ5ZDYxMjIsIDE2KTsKICAgIGIgPSBmbkgoYiwgYywgZCwgYSwgTVsxNF0sIDB4ZmRlNTM4MGMsIDIzKTsKICAgIGEgPSBmbkgoYSwgYiwgYywgZCwgTVsxXSwgMHhhNGJlZWE0NCwgNCk7CiAgICBkID0gZm5IKGQsIGEsIGIsIGMsIE1bNF0sIDB4NGJkZWNmYTksIDExKTsKICAgIGMgPSBmbkgoYywgZCwgYSwgYiwgTVs3XSwgMHhmNmJiNGI2MCwgMTYpOwogICAgYiA9IGZuSChiLCBjLCBkLCBhLCBNWzEwXSwgMHhiZWJmYmM3MCwgMjMpOwogICAgYSA9IGZuSChhLCBiLCBjLCBkLCBNWzEzXSwgMHgyODliN2VjNiwgNCk7CiAgICBkID0gZm5IKGQsIGEsIGIsIGMsIE1bMF0sIDB4ZWFhMTI3ZmEsIDExKTsKICAgIGMgPSBmbkgoYywgZCwgYSwgYiwgTVszXSwgMHhkNGVmMzA4NSwgMTYpOwogICAgYiA9IGZuSChiLCBjLCBkLCBhLCBNWzZdLCAweDA0ODgxZDA1LCAyMyk7CiAgICBhID0gZm5IKGEsIGIsIGMsIGQsIE1bOV0sIDB4ZDlkNGQwMzksIDQpOwogICAgZCA9IGZuSChkLCBhLCBiLCBjLCBNWzEyXSwgMHhlNmRiOTllNSwgMTEpOwogICAgYyA9IGZuSChjLCBkLCBhLCBiLCBNWzE1XSwgMHgxZmEyN2NmOCwgMTYpOwogICAgYiA9IGZuSChiLCBjLCBkLCBhLCBNWzJdLCAweGM0YWM1NjY1LCAyMyk7CgogICAgYSA9IGZuSShhLCBiLCBjLCBkLCBNWzBdLCAweGY0MjkyMjQ0LCA2KTsKICAgIGQgPSBmbkkoZCwgYSwgYiwgYywgTVs3XSwgMHg0MzJhZmY5NywgMTApOwogICAgYyA9IGZuSShjLCBkLCBhLCBiLCBNWzE0XSwgMHhhYjk0MjNhNywgMTUpOwogICAgYiA9IGZuSShiLCBjLCBkLCBhLCBNWzVdLCAweGZjOTNhMDM5LCAyMSk7CiAgICBhID0gZm5JKGEsIGIsIGMsIGQsIE1bMTJdLCAweDY1NWI1OWMzLCA2KTsKICAgIGQgPSBmbkkoZCwgYSwgYiwgYywgTVszXSwgMHg4ZjBjY2M5MiwgMTApOwogICAgYyA9IGZuSShjLCBkLCBhLCBiLCBNWzEwXSwgMHhmZmVmZjQ3ZCwgMTUpOwogICAgYiA9IGZuSShiLCBjLCBkLCBhLCBNWzFdLCAweDg1ODQ1ZGQxLCAyMSk7CiAgICBhID0gZm5JKGEsIGIsIGMsIGQsIE1bOF0sIDB4NmZhODdlNGYsIDYpOwogICAgZCA9IGZuSShkLCBhLCBiLCBjLCBNWzE1XSwgMHhmZTJjZTZlMCwgMTApOwogICAgYyA9IGZuSShjLCBkLCBhLCBiLCBNWzZdLCAweGEzMDE0MzE0LCAxNSk7CiAgICBiID0gZm5JKGIsIGMsIGQsIGEsIE1bMTNdLCAweDRlMDgxMWExLCAyMSk7CiAgICBhID0gZm5JKGEsIGIsIGMsIGQsIE1bNF0sIDB4Zjc1MzdlODIsIDYpOwogICAgZCA9IGZuSShkLCBhLCBiLCBjLCBNWzExXSwgMHhiZDNhZjIzNSwgMTApOwogICAgYyA9IGZuSShjLCBkLCBhLCBiLCBNWzJdLCAweDJhZDdkMmJiLCAxNSk7CiAgICBiID0gZm5JKGIsIGMsIGQsIGEsIE1bOV0sIDB4ZWI4NmQzOTEsIDIxKTsKCiAgICB0aGlzLl9hID0gKHRoaXMuX2EgKyBhKSB8IDA7CiAgICB0aGlzLl9iID0gKHRoaXMuX2IgKyBiKSB8IDA7CiAgICB0aGlzLl9jID0gKHRoaXMuX2MgKyBjKSB8IDA7CiAgICB0aGlzLl9kID0gKHRoaXMuX2QgKyBkKSB8IDA7CiAgfTsKCiAgTUQ1JDEucHJvdG90eXBlLl9kaWdlc3QgPSBmdW5jdGlvbiAoKSB7CiAgICAvLyBjcmVhdGUgcGFkZGluZyBhbmQgaGFuZGxlIGJsb2NrcwogICAgdGhpcy5fYmxvY2tbdGhpcy5fYmxvY2tPZmZzZXQrK10gPSAweDgwOwogICAgaWYgKHRoaXMuX2Jsb2NrT2Zmc2V0ID4gNTYpIHsKICAgICAgdGhpcy5fYmxvY2suZmlsbCgwLCB0aGlzLl9ibG9ja09mZnNldCwgNjQpOwogICAgICB0aGlzLl91cGRhdGUoKTsKICAgICAgdGhpcy5fYmxvY2tPZmZzZXQgPSAwOwogICAgfQoKICAgIHRoaXMuX2Jsb2NrLmZpbGwoMCwgdGhpcy5fYmxvY2tPZmZzZXQsIDU2KTsKICAgIHRoaXMuX2Jsb2NrLndyaXRlVUludDMyTEUodGhpcy5fbGVuZ3RoWzBdLCA1Nik7CiAgICB0aGlzLl9ibG9jay53cml0ZVVJbnQzMkxFKHRoaXMuX2xlbmd0aFsxXSwgNjApOwogICAgdGhpcy5fdXBkYXRlKCk7CgogICAgLy8gcHJvZHVjZSByZXN1bHQKICAgIHZhciBidWZmZXIgPSBCdWZmZXIkOS5hbGxvY1Vuc2FmZSgxNik7CiAgICBidWZmZXIud3JpdGVJbnQzMkxFKHRoaXMuX2EsIDApOwogICAgYnVmZmVyLndyaXRlSW50MzJMRSh0aGlzLl9iLCA0KTsKICAgIGJ1ZmZlci53cml0ZUludDMyTEUodGhpcy5fYywgOCk7CiAgICBidWZmZXIud3JpdGVJbnQzMkxFKHRoaXMuX2QsIDEyKTsKICAgIHJldHVybiBidWZmZXIKICB9OwoKICBmdW5jdGlvbiByb3RsICh4LCBuKSB7CiAgICByZXR1cm4gKHggPDwgbikgfCAoeCA+Pj4gKDMyIC0gbikpCiAgfQoKICBmdW5jdGlvbiBmbkYgKGEsIGIsIGMsIGQsIG0sIGssIHMpIHsKICAgIHJldHVybiAocm90bCgoYSArICgoYiAmIGMpIHwgKCh+YikgJiBkKSkgKyBtICsgaykgfCAwLCBzKSArIGIpIHwgMAogIH0KCiAgZnVuY3Rpb24gZm5HIChhLCBiLCBjLCBkLCBtLCBrLCBzKSB7CiAgICByZXR1cm4gKHJvdGwoKGEgKyAoKGIgJiBkKSB8IChjICYgKH5kKSkpICsgbSArIGspIHwgMCwgcykgKyBiKSB8IDAKICB9CgogIGZ1bmN0aW9uIGZuSCAoYSwgYiwgYywgZCwgbSwgaywgcykgewogICAgcmV0dXJuIChyb3RsKChhICsgKGIgXiBjIF4gZCkgKyBtICsgaykgfCAwLCBzKSArIGIpIHwgMAogIH0KCiAgZnVuY3Rpb24gZm5JIChhLCBiLCBjLCBkLCBtLCBrLCBzKSB7CiAgICByZXR1cm4gKHJvdGwoKGEgKyAoKGMgXiAoYiB8ICh+ZCkpKSkgKyBtICsgaykgfCAwLCBzKSArIGIpIHwgMAogIH0KCiAgdmFyIG1kNV9qcyA9IE1ENSQxOwoKICB2YXIgQnVmZmVyJDggPSBzYWZlQnVmZmVyJDEuZXhwb3J0cy5CdWZmZXI7CiAgdmFyIE1ENSA9IG1kNV9qczsKCiAgLyogZXNsaW50LWRpc2FibGUgY2FtZWxjYXNlICovCiAgZnVuY3Rpb24gRVZQX0J5dGVzVG9LZXkgKHBhc3N3b3JkLCBzYWx0LCBrZXlCaXRzLCBpdkxlbikgewogICAgaWYgKCFCdWZmZXIkOC5pc0J1ZmZlcihwYXNzd29yZCkpIHBhc3N3b3JkID0gQnVmZmVyJDguZnJvbShwYXNzd29yZCwgJ2JpbmFyeScpOwogICAgaWYgKHNhbHQpIHsKICAgICAgaWYgKCFCdWZmZXIkOC5pc0J1ZmZlcihzYWx0KSkgc2FsdCA9IEJ1ZmZlciQ4LmZyb20oc2FsdCwgJ2JpbmFyeScpOwogICAgICBpZiAoc2FsdC5sZW5ndGggIT09IDgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdzYWx0IHNob3VsZCBiZSBCdWZmZXIgd2l0aCA4IGJ5dGUgbGVuZ3RoJykKICAgIH0KCiAgICB2YXIga2V5TGVuID0ga2V5Qml0cyAvIDg7CiAgICB2YXIga2V5ID0gQnVmZmVyJDguYWxsb2Moa2V5TGVuKTsKICAgIHZhciBpdiA9IEJ1ZmZlciQ4LmFsbG9jKGl2TGVuIHx8IDApOwogICAgdmFyIHRtcCA9IEJ1ZmZlciQ4LmFsbG9jKDApOwoKICAgIHdoaWxlIChrZXlMZW4gPiAwIHx8IGl2TGVuID4gMCkgewogICAgICB2YXIgaGFzaCA9IG5ldyBNRDUoKTsKICAgICAgaGFzaC51cGRhdGUodG1wKTsKICAgICAgaGFzaC51cGRhdGUocGFzc3dvcmQpOwogICAgICBpZiAoc2FsdCkgaGFzaC51cGRhdGUoc2FsdCk7CiAgICAgIHRtcCA9IGhhc2guZGlnZXN0KCk7CgogICAgICB2YXIgdXNlZCA9IDA7CgogICAgICBpZiAoa2V5TGVuID4gMCkgewogICAgICAgIHZhciBrZXlTdGFydCA9IGtleS5sZW5ndGggLSBrZXlMZW47CiAgICAgICAgdXNlZCA9IE1hdGgubWluKGtleUxlbiwgdG1wLmxlbmd0aCk7CiAgICAgICAgdG1wLmNvcHkoa2V5LCBrZXlTdGFydCwgMCwgdXNlZCk7CiAgICAgICAga2V5TGVuIC09IHVzZWQ7CiAgICAgIH0KCiAgICAgIGlmICh1c2VkIDwgdG1wLmxlbmd0aCAmJiBpdkxlbiA+IDApIHsKICAgICAgICB2YXIgaXZTdGFydCA9IGl2Lmxlbmd0aCAtIGl2TGVuOwogICAgICAgIHZhciBsZW5ndGggPSBNYXRoLm1pbihpdkxlbiwgdG1wLmxlbmd0aCAtIHVzZWQpOwogICAgICAgIHRtcC5jb3B5KGl2LCBpdlN0YXJ0LCB1c2VkLCB1c2VkICsgbGVuZ3RoKTsKICAgICAgICBpdkxlbiAtPSBsZW5ndGg7CiAgICAgIH0KICAgIH0KCiAgICB0bXAuZmlsbCgwKTsKICAgIHJldHVybiB7IGtleToga2V5LCBpdjogaXYgfQogIH0KCiAgdmFyIGV2cF9ieXRlc3Rva2V5ID0gRVZQX0J5dGVzVG9LZXk7CgogIHZhciBicm93c2VyaWZ5QWVzID0ge307CgogIHZhciBjcnlwdG8kMiA9IGNyeXB0byQ3OwoKICBicm93c2VyaWZ5QWVzLmNyZWF0ZUNpcGhlciA9IGJyb3dzZXJpZnlBZXMuQ2lwaGVyID0gY3J5cHRvJDIuY3JlYXRlQ2lwaGVyOwogIGJyb3dzZXJpZnlBZXMuY3JlYXRlQ2lwaGVyaXYgPSBicm93c2VyaWZ5QWVzLkNpcGhlcml2ID0gY3J5cHRvJDIuY3JlYXRlQ2lwaGVyaXY7CiAgYnJvd3NlcmlmeUFlcy5jcmVhdGVEZWNpcGhlciA9IGJyb3dzZXJpZnlBZXMuRGVjaXBoZXIgPSBjcnlwdG8kMi5jcmVhdGVEZWNpcGhlcjsKICBicm93c2VyaWZ5QWVzLmNyZWF0ZURlY2lwaGVyaXYgPSBicm93c2VyaWZ5QWVzLkRlY2lwaGVyaXYgPSBjcnlwdG8kMi5jcmVhdGVEZWNpcGhlcml2OwogIGJyb3dzZXJpZnlBZXMubGlzdENpcGhlcnMgPSBicm93c2VyaWZ5QWVzLmdldENpcGhlcnMgPSBjcnlwdG8kMi5nZXRDaXBoZXJzOwoKICAvLyBhZGFwdGVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2FwYXRpbC9wZW1zdHJpcAogIHZhciBmaW5kUHJvYyA9IC9Qcm9jLVR5cGU6IDQsRU5DUllQVEVEW1xuXHJdK0RFSy1JbmZvOiBBRVMtKCg/OjEyOCl8KD86MTkyKXwoPzoyNTYpKS1DQkMsKFswLTlBLUhdKylbXG5ccl0rKFswLTlBLXpcblxyKy89XSspW1xuXHJdKy9tOwogIHZhciBzdGFydFJlZ2V4ID0gL14tLS0tLUJFR0lOICgoPzouKj8gS0VZKXxDRVJUSUZJQ0FURSktLS0tLS9tOwogIHZhciBmdWxsUmVnZXggPSAvXi0tLS0tQkVHSU4gKCg/Oi4qPyBLRVkpfENFUlRJRklDQVRFKS0tLS0tKFswLTlBLXpcblxyKy89XSspLS0tLS1FTkQgXDEtLS0tLSQvbTsKICB2YXIgZXZwID0gZXZwX2J5dGVzdG9rZXk7CiAgdmFyIGNpcGhlcnMkMSA9IGJyb3dzZXJpZnlBZXM7CiAgdmFyIEJ1ZmZlciQ3ID0gc2FmZUJ1ZmZlciQxLmV4cG9ydHMuQnVmZmVyOwogIHZhciBmaXhQcm9jJDEgPSBmdW5jdGlvbiAob2tleSwgcGFzc3dvcmQpIHsKICAgIHZhciBrZXkgPSBva2V5LnRvU3RyaW5nKCk7CiAgICB2YXIgbWF0Y2ggPSBrZXkubWF0Y2goZmluZFByb2MpOwogICAgdmFyIGRlY3J5cHRlZDsKICAgIGlmICghbWF0Y2gpIHsKICAgICAgdmFyIG1hdGNoMiA9IGtleS5tYXRjaChmdWxsUmVnZXgpOwogICAgICBkZWNyeXB0ZWQgPSBCdWZmZXIkNy5mcm9tKG1hdGNoMlsyXS5yZXBsYWNlKC9bXHJcbl0vZywgJycpLCAnYmFzZTY0Jyk7CiAgICB9IGVsc2UgewogICAgICB2YXIgc3VpdGUgPSAnYWVzJyArIG1hdGNoWzFdOwogICAgICB2YXIgaXYgPSBCdWZmZXIkNy5mcm9tKG1hdGNoWzJdLCAnaGV4Jyk7CiAgICAgIHZhciBjaXBoZXJUZXh0ID0gQnVmZmVyJDcuZnJvbShtYXRjaFszXS5yZXBsYWNlKC9bXHJcbl0vZywgJycpLCAnYmFzZTY0Jyk7CiAgICAgIHZhciBjaXBoZXJLZXkgPSBldnAocGFzc3dvcmQsIGl2LnNsaWNlKDAsIDgpLCBwYXJzZUludChtYXRjaFsxXSwgMTApKS5rZXk7CiAgICAgIHZhciBvdXQgPSBbXTsKICAgICAgdmFyIGNpcGhlciA9IGNpcGhlcnMkMS5jcmVhdGVEZWNpcGhlcml2KHN1aXRlLCBjaXBoZXJLZXksIGl2KTsKICAgICAgb3V0LnB1c2goY2lwaGVyLnVwZGF0ZShjaXBoZXJUZXh0KSk7CiAgICAgIG91dC5wdXNoKGNpcGhlci5maW5hbCgpKTsKICAgICAgZGVjcnlwdGVkID0gQnVmZmVyJDcuY29uY2F0KG91dCk7CiAgICB9CiAgICB2YXIgdGFnID0ga2V5Lm1hdGNoKHN0YXJ0UmVnZXgpWzFdOwogICAgcmV0dXJuIHsKICAgICAgdGFnOiB0YWcsCiAgICAgIGRhdGE6IGRlY3J5cHRlZAogICAgfQogIH07CgogIHZhciBhc24xID0gYXNuMSQzOwogIHZhciBhZXNpZCA9IHJlcXVpcmUkJDE7CiAgdmFyIGZpeFByb2MgPSBmaXhQcm9jJDE7CiAgdmFyIGNpcGhlcnMgPSBicm93c2VyaWZ5QWVzOwogIHZhciBjb21wYXQgPSBwYmtkZjIkMTsKICB2YXIgQnVmZmVyJDYgPSBzYWZlQnVmZmVyJDEuZXhwb3J0cy5CdWZmZXI7CiAgdmFyIHBhcnNlQXNuMSA9IHBhcnNlS2V5cyQyOwoKICBmdW5jdGlvbiBwYXJzZUtleXMkMiAoYnVmZmVyKSB7CiAgICB2YXIgcGFzc3dvcmQ7CiAgICBpZiAodHlwZW9mIGJ1ZmZlciA9PT0gJ29iamVjdCcgJiYgIUJ1ZmZlciQ2LmlzQnVmZmVyKGJ1ZmZlcikpIHsKICAgICAgcGFzc3dvcmQgPSBidWZmZXIucGFzc3BocmFzZTsKICAgICAgYnVmZmVyID0gYnVmZmVyLmtleTsKICAgIH0KICAgIGlmICh0eXBlb2YgYnVmZmVyID09PSAnc3RyaW5nJykgewogICAgICBidWZmZXIgPSBCdWZmZXIkNi5mcm9tKGJ1ZmZlcik7CiAgICB9CgogICAgdmFyIHN0cmlwcGVkID0gZml4UHJvYyhidWZmZXIsIHBhc3N3b3JkKTsKCiAgICB2YXIgdHlwZSA9IHN0cmlwcGVkLnRhZzsKICAgIHZhciBkYXRhID0gc3RyaXBwZWQuZGF0YTsKICAgIHZhciBzdWJ0eXBlLCBuZGF0YTsKICAgIHN3aXRjaCAodHlwZSkgewogICAgICBjYXNlICdDRVJUSUZJQ0FURSc6CiAgICAgICAgbmRhdGEgPSBhc24xLmNlcnRpZmljYXRlLmRlY29kZShkYXRhLCAnZGVyJykudGJzQ2VydGlmaWNhdGUuc3ViamVjdFB1YmxpY0tleUluZm87CiAgICAgICAgLy8gZmFsbHMgdGhyb3VnaAogICAgICBjYXNlICdQVUJMSUMgS0VZJzoKICAgICAgICBpZiAoIW5kYXRhKSB7CiAgICAgICAgICBuZGF0YSA9IGFzbjEuUHVibGljS2V5LmRlY29kZShkYXRhLCAnZGVyJyk7CiAgICAgICAgfQogICAgICAgIHN1YnR5cGUgPSBuZGF0YS5hbGdvcml0aG0uYWxnb3JpdGhtLmpvaW4oJy4nKTsKICAgICAgICBzd2l0Y2ggKHN1YnR5cGUpIHsKICAgICAgICAgIGNhc2UgJzEuMi44NDAuMTEzNTQ5LjEuMS4xJzoKICAgICAgICAgICAgcmV0dXJuIGFzbjEuUlNBUHVibGljS2V5LmRlY29kZShuZGF0YS5zdWJqZWN0UHVibGljS2V5LmRhdGEsICdkZXInKQogICAgICAgICAgY2FzZSAnMS4yLjg0MC4xMDA0NS4yLjEnOgogICAgICAgICAgICBuZGF0YS5zdWJqZWN0UHJpdmF0ZUtleSA9IG5kYXRhLnN1YmplY3RQdWJsaWNLZXk7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgdHlwZTogJ2VjJywKICAgICAgICAgICAgICBkYXRhOiBuZGF0YQogICAgICAgICAgICB9CiAgICAgICAgICBjYXNlICcxLjIuODQwLjEwMDQwLjQuMSc6CiAgICAgICAgICAgIG5kYXRhLmFsZ29yaXRobS5wYXJhbXMucHViX2tleSA9IGFzbjEuRFNBcGFyYW0uZGVjb2RlKG5kYXRhLnN1YmplY3RQdWJsaWNLZXkuZGF0YSwgJ2RlcicpOwogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgIHR5cGU6ICdkc2EnLAogICAgICAgICAgICAgIGRhdGE6IG5kYXRhLmFsZ29yaXRobS5wYXJhbXMKICAgICAgICAgICAgfQogICAgICAgICAgZGVmYXVsdDogdGhyb3cgbmV3IEVycm9yKCd1bmtub3duIGtleSBpZCAnICsgc3VidHlwZSkKICAgICAgICB9CiAgICAgICAgLy8gdGhyb3cgbmV3IEVycm9yKCd1bmtub3duIGtleSB0eXBlICcgKyB0eXBlKQogICAgICBjYXNlICdFTkNSWVBURUQgUFJJVkFURSBLRVknOgogICAgICAgIGRhdGEgPSBhc24xLkVuY3J5cHRlZFByaXZhdGVLZXkuZGVjb2RlKGRhdGEsICdkZXInKTsKICAgICAgICBkYXRhID0gZGVjcnlwdChkYXRhLCBwYXNzd29yZCk7CiAgICAgICAgLy8gZmFsbHMgdGhyb3VnaAogICAgICBjYXNlICdQUklWQVRFIEtFWSc6CiAgICAgICAgbmRhdGEgPSBhc24xLlByaXZhdGVLZXkuZGVjb2RlKGRhdGEsICdkZXInKTsKICAgICAgICBzdWJ0eXBlID0gbmRhdGEuYWxnb3JpdGhtLmFsZ29yaXRobS5qb2luKCcuJyk7CiAgICAgICAgc3dpdGNoIChzdWJ0eXBlKSB7CiAgICAgICAgICBjYXNlICcxLjIuODQwLjExMzU0OS4xLjEuMSc6CiAgICAgICAgICAgIHJldHVybiBhc24xLlJTQVByaXZhdGVLZXkuZGVjb2RlKG5kYXRhLnN1YmplY3RQcml2YXRlS2V5LCAnZGVyJykKICAgICAgICAgIGNhc2UgJzEuMi44NDAuMTAwNDUuMi4xJzoKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICBjdXJ2ZTogbmRhdGEuYWxnb3JpdGhtLmN1cnZlLAogICAgICAgICAgICAgIHByaXZhdGVLZXk6IGFzbjEuRUNQcml2YXRlS2V5LmRlY29kZShuZGF0YS5zdWJqZWN0UHJpdmF0ZUtleSwgJ2RlcicpLnByaXZhdGVLZXkKICAgICAgICAgICAgfQogICAgICAgICAgY2FzZSAnMS4yLjg0MC4xMDA0MC40LjEnOgogICAgICAgICAgICBuZGF0YS5hbGdvcml0aG0ucGFyYW1zLnByaXZfa2V5ID0gYXNuMS5EU0FwYXJhbS5kZWNvZGUobmRhdGEuc3ViamVjdFByaXZhdGVLZXksICdkZXInKTsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICB0eXBlOiAnZHNhJywKICAgICAgICAgICAgICBwYXJhbXM6IG5kYXRhLmFsZ29yaXRobS5wYXJhbXMKICAgICAgICAgICAgfQogICAgICAgICAgZGVmYXVsdDogdGhyb3cgbmV3IEVycm9yKCd1bmtub3duIGtleSBpZCAnICsgc3VidHlwZSkKICAgICAgICB9CiAgICAgICAgLy8gdGhyb3cgbmV3IEVycm9yKCd1bmtub3duIGtleSB0eXBlICcgKyB0eXBlKQogICAgICBjYXNlICdSU0EgUFVCTElDIEtFWSc6CiAgICAgICAgcmV0dXJuIGFzbjEuUlNBUHVibGljS2V5LmRlY29kZShkYXRhLCAnZGVyJykKICAgICAgY2FzZSAnUlNBIFBSSVZBVEUgS0VZJzoKICAgICAgICByZXR1cm4gYXNuMS5SU0FQcml2YXRlS2V5LmRlY29kZShkYXRhLCAnZGVyJykKICAgICAgY2FzZSAnRFNBIFBSSVZBVEUgS0VZJzoKICAgICAgICByZXR1cm4gewogICAgICAgICAgdHlwZTogJ2RzYScsCiAgICAgICAgICBwYXJhbXM6IGFzbjEuRFNBUHJpdmF0ZUtleS5kZWNvZGUoZGF0YSwgJ2RlcicpCiAgICAgICAgfQogICAgICBjYXNlICdFQyBQUklWQVRFIEtFWSc6CiAgICAgICAgZGF0YSA9IGFzbjEuRUNQcml2YXRlS2V5LmRlY29kZShkYXRhLCAnZGVyJyk7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGN1cnZlOiBkYXRhLnBhcmFtZXRlcnMudmFsdWUsCiAgICAgICAgICBwcml2YXRlS2V5OiBkYXRhLnByaXZhdGVLZXkKICAgICAgICB9CiAgICAgIGRlZmF1bHQ6IHRocm93IG5ldyBFcnJvcigndW5rbm93biBrZXkgdHlwZSAnICsgdHlwZSkKICAgIH0KICB9CiAgcGFyc2VLZXlzJDIuc2lnbmF0dXJlID0gYXNuMS5zaWduYXR1cmU7CiAgZnVuY3Rpb24gZGVjcnlwdCAoZGF0YSwgcGFzc3dvcmQpIHsKICAgIHZhciBzYWx0ID0gZGF0YS5hbGdvcml0aG0uZGVjcnlwdC5rZGUua2RlcGFyYW1zLnNhbHQ7CiAgICB2YXIgaXRlcnMgPSBwYXJzZUludChkYXRhLmFsZ29yaXRobS5kZWNyeXB0LmtkZS5rZGVwYXJhbXMuaXRlcnMudG9TdHJpbmcoKSwgMTApOwogICAgdmFyIGFsZ28gPSBhZXNpZFtkYXRhLmFsZ29yaXRobS5kZWNyeXB0LmNpcGhlci5hbGdvLmpvaW4oJy4nKV07CiAgICB2YXIgaXYgPSBkYXRhLmFsZ29yaXRobS5kZWNyeXB0LmNpcGhlci5pdjsKICAgIHZhciBjaXBoZXJUZXh0ID0gZGF0YS5zdWJqZWN0UHJpdmF0ZUtleTsKICAgIHZhciBrZXlsZW4gPSBwYXJzZUludChhbGdvLnNwbGl0KCctJylbMV0sIDEwKSAvIDg7CiAgICB2YXIga2V5ID0gY29tcGF0LnBia2RmMlN5bmMocGFzc3dvcmQsIHNhbHQsIGl0ZXJzLCBrZXlsZW4sICdzaGExJyk7CiAgICB2YXIgY2lwaGVyID0gY2lwaGVycy5jcmVhdGVEZWNpcGhlcml2KGFsZ28sIGtleSwgaXYpOwogICAgdmFyIG91dCA9IFtdOwogICAgb3V0LnB1c2goY2lwaGVyLnVwZGF0ZShjaXBoZXJUZXh0KSk7CiAgICBvdXQucHVzaChjaXBoZXIuZmluYWwoKSk7CiAgICByZXR1cm4gQnVmZmVyJDYuY29uY2F0KG91dCkKICB9CgogIHZhciBjcmVhdGVIYXNoJDIgPSBjcmVhdGVIYXNoJDM7CiAgdmFyIEJ1ZmZlciQ1ID0gc2FmZUJ1ZmZlciQxLmV4cG9ydHMuQnVmZmVyOwoKICB2YXIgbWdmJDIgPSBmdW5jdGlvbiAoc2VlZCwgbGVuKSB7CiAgICB2YXIgdCA9IEJ1ZmZlciQ1LmFsbG9jKDApOwogICAgdmFyIGkgPSAwOwogICAgdmFyIGM7CiAgICB3aGlsZSAodC5sZW5ndGggPCBsZW4pIHsKICAgICAgYyA9IGkyb3BzKGkrKyk7CiAgICAgIHQgPSBCdWZmZXIkNS5jb25jYXQoW3QsIGNyZWF0ZUhhc2gkMignc2hhMScpLnVwZGF0ZShzZWVkKS51cGRhdGUoYykuZGlnZXN0KCldKTsKICAgIH0KICAgIHJldHVybiB0LnNsaWNlKDAsIGxlbikKICB9OwoKICBmdW5jdGlvbiBpMm9wcyAoYykgewogICAgdmFyIG91dCA9IEJ1ZmZlciQ1LmFsbG9jVW5zYWZlKDQpOwogICAgb3V0LndyaXRlVUludDMyQkUoYywgMCk7CiAgICByZXR1cm4gb3V0CiAgfQoKICB2YXIgeG9yJDIgPSBmdW5jdGlvbiB4b3IgKGEsIGIpIHsKICAgIHZhciBsZW4gPSBhLmxlbmd0aDsKICAgIHZhciBpID0gLTE7CiAgICB3aGlsZSAoKytpIDwgbGVuKSB7CiAgICAgIGFbaV0gXj0gYltpXTsKICAgIH0KICAgIHJldHVybiBhCiAgfTsKCiAgdmFyIGJuJDEgPSB7ZXhwb3J0czoge319OwoKICAoZnVuY3Rpb24gKG1vZHVsZSkgewogIChmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CgogICAgLy8gVXRpbHMKICAgIGZ1bmN0aW9uIGFzc2VydCAodmFsLCBtc2cpIHsKICAgICAgaWYgKCF2YWwpIHRocm93IG5ldyBFcnJvcihtc2cgfHwgJ0Fzc2VydGlvbiBmYWlsZWQnKTsKICAgIH0KCiAgICAvLyBDb3VsZCB1c2UgYGluaGVyaXRzYCBtb2R1bGUsIGJ1dCBkb24ndCB3YW50IHRvIG1vdmUgZnJvbSBzaW5nbGUgZmlsZQogICAgLy8gYXJjaGl0ZWN0dXJlIHlldC4KICAgIGZ1bmN0aW9uIGluaGVyaXRzIChjdG9yLCBzdXBlckN0b3IpIHsKICAgICAgY3Rvci5zdXBlcl8gPSBzdXBlckN0b3I7CiAgICAgIHZhciBUZW1wQ3RvciA9IGZ1bmN0aW9uICgpIHt9OwogICAgICBUZW1wQ3Rvci5wcm90b3R5cGUgPSBzdXBlckN0b3IucHJvdG90eXBlOwogICAgICBjdG9yLnByb3RvdHlwZSA9IG5ldyBUZW1wQ3RvcigpOwogICAgICBjdG9yLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGN0b3I7CiAgICB9CgogICAgLy8gQk4KCiAgICBmdW5jdGlvbiBCTiAobnVtYmVyLCBiYXNlLCBlbmRpYW4pIHsKICAgICAgaWYgKEJOLmlzQk4obnVtYmVyKSkgewogICAgICAgIHJldHVybiBudW1iZXI7CiAgICAgIH0KCiAgICAgIHRoaXMubmVnYXRpdmUgPSAwOwogICAgICB0aGlzLndvcmRzID0gbnVsbDsKICAgICAgdGhpcy5sZW5ndGggPSAwOwoKICAgICAgLy8gUmVkdWN0aW9uIGNvbnRleHQKICAgICAgdGhpcy5yZWQgPSBudWxsOwoKICAgICAgaWYgKG51bWJlciAhPT0gbnVsbCkgewogICAgICAgIGlmIChiYXNlID09PSAnbGUnIHx8IGJhc2UgPT09ICdiZScpIHsKICAgICAgICAgIGVuZGlhbiA9IGJhc2U7CiAgICAgICAgICBiYXNlID0gMTA7CiAgICAgICAgfQoKICAgICAgICB0aGlzLl9pbml0KG51bWJlciB8fCAwLCBiYXNlIHx8IDEwLCBlbmRpYW4gfHwgJ2JlJyk7CiAgICAgIH0KICAgIH0KICAgIGlmICh0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0JykgewogICAgICBtb2R1bGUuZXhwb3J0cyA9IEJOOwogICAgfSBlbHNlIHsKICAgICAgZXhwb3J0cy5CTiA9IEJOOwogICAgfQoKICAgIEJOLkJOID0gQk47CiAgICBCTi53b3JkU2l6ZSA9IDI2OwoKICAgIHZhciBCdWZmZXI7CiAgICB0cnkgewogICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHdpbmRvdy5CdWZmZXIgIT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgQnVmZmVyID0gd2luZG93LkJ1ZmZlcjsKICAgICAgfSBlbHNlIHsKICAgICAgICBCdWZmZXIgPSByZXF1aXJlKCdidWZmZXInKS5CdWZmZXI7CiAgICAgIH0KICAgIH0gY2F0Y2ggKGUpIHsKICAgIH0KCiAgICBCTi5pc0JOID0gZnVuY3Rpb24gaXNCTiAobnVtKSB7CiAgICAgIGlmIChudW0gaW5zdGFuY2VvZiBCTikgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICByZXR1cm4gbnVtICE9PSBudWxsICYmIHR5cGVvZiBudW0gPT09ICdvYmplY3QnICYmCiAgICAgICAgbnVtLmNvbnN0cnVjdG9yLndvcmRTaXplID09PSBCTi53b3JkU2l6ZSAmJiBBcnJheS5pc0FycmF5KG51bS53b3Jkcyk7CiAgICB9OwoKICAgIEJOLm1heCA9IGZ1bmN0aW9uIG1heCAobGVmdCwgcmlnaHQpIHsKICAgICAgaWYgKGxlZnQuY21wKHJpZ2h0KSA+IDApIHJldHVybiBsZWZ0OwogICAgICByZXR1cm4gcmlnaHQ7CiAgICB9OwoKICAgIEJOLm1pbiA9IGZ1bmN0aW9uIG1pbiAobGVmdCwgcmlnaHQpIHsKICAgICAgaWYgKGxlZnQuY21wKHJpZ2h0KSA8IDApIHJldHVybiBsZWZ0OwogICAgICByZXR1cm4gcmlnaHQ7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5faW5pdCA9IGZ1bmN0aW9uIGluaXQgKG51bWJlciwgYmFzZSwgZW5kaWFuKSB7CiAgICAgIGlmICh0eXBlb2YgbnVtYmVyID09PSAnbnVtYmVyJykgewogICAgICAgIHJldHVybiB0aGlzLl9pbml0TnVtYmVyKG51bWJlciwgYmFzZSwgZW5kaWFuKTsKICAgICAgfQoKICAgICAgaWYgKHR5cGVvZiBudW1iZXIgPT09ICdvYmplY3QnKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuX2luaXRBcnJheShudW1iZXIsIGJhc2UsIGVuZGlhbik7CiAgICAgIH0KCiAgICAgIGlmIChiYXNlID09PSAnaGV4JykgewogICAgICAgIGJhc2UgPSAxNjsKICAgICAgfQogICAgICBhc3NlcnQoYmFzZSA9PT0gKGJhc2UgfCAwKSAmJiBiYXNlID49IDIgJiYgYmFzZSA8PSAzNik7CgogICAgICBudW1iZXIgPSBudW1iZXIudG9TdHJpbmcoKS5yZXBsYWNlKC9ccysvZywgJycpOwogICAgICB2YXIgc3RhcnQgPSAwOwogICAgICBpZiAobnVtYmVyWzBdID09PSAnLScpIHsKICAgICAgICBzdGFydCsrOwogICAgICAgIHRoaXMubmVnYXRpdmUgPSAxOwogICAgICB9CgogICAgICBpZiAoc3RhcnQgPCBudW1iZXIubGVuZ3RoKSB7CiAgICAgICAgaWYgKGJhc2UgPT09IDE2KSB7CiAgICAgICAgICB0aGlzLl9wYXJzZUhleChudW1iZXIsIHN0YXJ0LCBlbmRpYW4pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLl9wYXJzZUJhc2UobnVtYmVyLCBiYXNlLCBzdGFydCk7CiAgICAgICAgICBpZiAoZW5kaWFuID09PSAnbGUnKSB7CiAgICAgICAgICAgIHRoaXMuX2luaXRBcnJheSh0aGlzLnRvQXJyYXkoKSwgYmFzZSwgZW5kaWFuKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH07CgogICAgQk4ucHJvdG90eXBlLl9pbml0TnVtYmVyID0gZnVuY3Rpb24gX2luaXROdW1iZXIgKG51bWJlciwgYmFzZSwgZW5kaWFuKSB7CiAgICAgIGlmIChudW1iZXIgPCAwKSB7CiAgICAgICAgdGhpcy5uZWdhdGl2ZSA9IDE7CiAgICAgICAgbnVtYmVyID0gLW51bWJlcjsKICAgICAgfQogICAgICBpZiAobnVtYmVyIDwgMHg0MDAwMDAwKSB7CiAgICAgICAgdGhpcy53b3JkcyA9IFsgbnVtYmVyICYgMHgzZmZmZmZmIF07CiAgICAgICAgdGhpcy5sZW5ndGggPSAxOwogICAgICB9IGVsc2UgaWYgKG51bWJlciA8IDB4MTAwMDAwMDAwMDAwMDApIHsKICAgICAgICB0aGlzLndvcmRzID0gWwogICAgICAgICAgbnVtYmVyICYgMHgzZmZmZmZmLAogICAgICAgICAgKG51bWJlciAvIDB4NDAwMDAwMCkgJiAweDNmZmZmZmYKICAgICAgICBdOwogICAgICAgIHRoaXMubGVuZ3RoID0gMjsKICAgICAgfSBlbHNlIHsKICAgICAgICBhc3NlcnQobnVtYmVyIDwgMHgyMDAwMDAwMDAwMDAwMCk7IC8vIDIgXiA1MyAodW5zYWZlKQogICAgICAgIHRoaXMud29yZHMgPSBbCiAgICAgICAgICBudW1iZXIgJiAweDNmZmZmZmYsCiAgICAgICAgICAobnVtYmVyIC8gMHg0MDAwMDAwKSAmIDB4M2ZmZmZmZiwKICAgICAgICAgIDEKICAgICAgICBdOwogICAgICAgIHRoaXMubGVuZ3RoID0gMzsKICAgICAgfQoKICAgICAgaWYgKGVuZGlhbiAhPT0gJ2xlJykgcmV0dXJuOwoKICAgICAgLy8gUmV2ZXJzZSB0aGUgYnl0ZXMKICAgICAgdGhpcy5faW5pdEFycmF5KHRoaXMudG9BcnJheSgpLCBiYXNlLCBlbmRpYW4pOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuX2luaXRBcnJheSA9IGZ1bmN0aW9uIF9pbml0QXJyYXkgKG51bWJlciwgYmFzZSwgZW5kaWFuKSB7CiAgICAgIC8vIFBlcmhhcHMgYSBVaW50OEFycmF5CiAgICAgIGFzc2VydCh0eXBlb2YgbnVtYmVyLmxlbmd0aCA9PT0gJ251bWJlcicpOwogICAgICBpZiAobnVtYmVyLmxlbmd0aCA8PSAwKSB7CiAgICAgICAgdGhpcy53b3JkcyA9IFsgMCBdOwogICAgICAgIHRoaXMubGVuZ3RoID0gMTsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfQoKICAgICAgdGhpcy5sZW5ndGggPSBNYXRoLmNlaWwobnVtYmVyLmxlbmd0aCAvIDMpOwogICAgICB0aGlzLndvcmRzID0gbmV3IEFycmF5KHRoaXMubGVuZ3RoKTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy53b3Jkc1tpXSA9IDA7CiAgICAgIH0KCiAgICAgIHZhciBqLCB3OwogICAgICB2YXIgb2ZmID0gMDsKICAgICAgaWYgKGVuZGlhbiA9PT0gJ2JlJykgewogICAgICAgIGZvciAoaSA9IG51bWJlci5sZW5ndGggLSAxLCBqID0gMDsgaSA+PSAwOyBpIC09IDMpIHsKICAgICAgICAgIHcgPSBudW1iZXJbaV0gfCAobnVtYmVyW2kgLSAxXSA8PCA4KSB8IChudW1iZXJbaSAtIDJdIDw8IDE2KTsKICAgICAgICAgIHRoaXMud29yZHNbal0gfD0gKHcgPDwgb2ZmKSAmIDB4M2ZmZmZmZjsKICAgICAgICAgIHRoaXMud29yZHNbaiArIDFdID0gKHcgPj4+ICgyNiAtIG9mZikpICYgMHgzZmZmZmZmOwogICAgICAgICAgb2ZmICs9IDI0OwogICAgICAgICAgaWYgKG9mZiA+PSAyNikgewogICAgICAgICAgICBvZmYgLT0gMjY7CiAgICAgICAgICAgIGorKzsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoZW5kaWFuID09PSAnbGUnKSB7CiAgICAgICAgZm9yIChpID0gMCwgaiA9IDA7IGkgPCBudW1iZXIubGVuZ3RoOyBpICs9IDMpIHsKICAgICAgICAgIHcgPSBudW1iZXJbaV0gfCAobnVtYmVyW2kgKyAxXSA8PCA4KSB8IChudW1iZXJbaSArIDJdIDw8IDE2KTsKICAgICAgICAgIHRoaXMud29yZHNbal0gfD0gKHcgPDwgb2ZmKSAmIDB4M2ZmZmZmZjsKICAgICAgICAgIHRoaXMud29yZHNbaiArIDFdID0gKHcgPj4+ICgyNiAtIG9mZikpICYgMHgzZmZmZmZmOwogICAgICAgICAgb2ZmICs9IDI0OwogICAgICAgICAgaWYgKG9mZiA+PSAyNikgewogICAgICAgICAgICBvZmYgLT0gMjY7CiAgICAgICAgICAgIGorKzsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMuc3RyaXAoKTsKICAgIH07CgogICAgZnVuY3Rpb24gcGFyc2VIZXg0Qml0cyAoc3RyaW5nLCBpbmRleCkgewogICAgICB2YXIgYyA9IHN0cmluZy5jaGFyQ29kZUF0KGluZGV4KTsKICAgICAgLy8gJ0EnIC0gJ0YnCiAgICAgIGlmIChjID49IDY1ICYmIGMgPD0gNzApIHsKICAgICAgICByZXR1cm4gYyAtIDU1OwogICAgICAvLyAnYScgLSAnZicKICAgICAgfSBlbHNlIGlmIChjID49IDk3ICYmIGMgPD0gMTAyKSB7CiAgICAgICAgcmV0dXJuIGMgLSA4NzsKICAgICAgLy8gJzAnIC0gJzknCiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIChjIC0gNDgpICYgMHhmOwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gcGFyc2VIZXhCeXRlIChzdHJpbmcsIGxvd2VyQm91bmQsIGluZGV4KSB7CiAgICAgIHZhciByID0gcGFyc2VIZXg0Qml0cyhzdHJpbmcsIGluZGV4KTsKICAgICAgaWYgKGluZGV4IC0gMSA+PSBsb3dlckJvdW5kKSB7CiAgICAgICAgciB8PSBwYXJzZUhleDRCaXRzKHN0cmluZywgaW5kZXggLSAxKSA8PCA0OwogICAgICB9CiAgICAgIHJldHVybiByOwogICAgfQoKICAgIEJOLnByb3RvdHlwZS5fcGFyc2VIZXggPSBmdW5jdGlvbiBfcGFyc2VIZXggKG51bWJlciwgc3RhcnQsIGVuZGlhbikgewogICAgICAvLyBDcmVhdGUgcG9zc2libHkgYmlnZ2VyIGFycmF5IHRvIGVuc3VyZSB0aGF0IGl0IGZpdHMgdGhlIG51bWJlcgogICAgICB0aGlzLmxlbmd0aCA9IE1hdGguY2VpbCgobnVtYmVyLmxlbmd0aCAtIHN0YXJ0KSAvIDYpOwogICAgICB0aGlzLndvcmRzID0gbmV3IEFycmF5KHRoaXMubGVuZ3RoKTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy53b3Jkc1tpXSA9IDA7CiAgICAgIH0KCiAgICAgIC8vIDI0LWJpdHMgY2h1bmtzCiAgICAgIHZhciBvZmYgPSAwOwogICAgICB2YXIgaiA9IDA7CgogICAgICB2YXIgdzsKICAgICAgaWYgKGVuZGlhbiA9PT0gJ2JlJykgewogICAgICAgIGZvciAoaSA9IG51bWJlci5sZW5ndGggLSAxOyBpID49IHN0YXJ0OyBpIC09IDIpIHsKICAgICAgICAgIHcgPSBwYXJzZUhleEJ5dGUobnVtYmVyLCBzdGFydCwgaSkgPDwgb2ZmOwogICAgICAgICAgdGhpcy53b3Jkc1tqXSB8PSB3ICYgMHgzZmZmZmZmOwogICAgICAgICAgaWYgKG9mZiA+PSAxOCkgewogICAgICAgICAgICBvZmYgLT0gMTg7CiAgICAgICAgICAgIGogKz0gMTsKICAgICAgICAgICAgdGhpcy53b3Jkc1tqXSB8PSB3ID4+PiAyNjsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG9mZiArPSA4OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgcGFyc2VMZW5ndGggPSBudW1iZXIubGVuZ3RoIC0gc3RhcnQ7CiAgICAgICAgZm9yIChpID0gcGFyc2VMZW5ndGggJSAyID09PSAwID8gc3RhcnQgKyAxIDogc3RhcnQ7IGkgPCBudW1iZXIubGVuZ3RoOyBpICs9IDIpIHsKICAgICAgICAgIHcgPSBwYXJzZUhleEJ5dGUobnVtYmVyLCBzdGFydCwgaSkgPDwgb2ZmOwogICAgICAgICAgdGhpcy53b3Jkc1tqXSB8PSB3ICYgMHgzZmZmZmZmOwogICAgICAgICAgaWYgKG9mZiA+PSAxOCkgewogICAgICAgICAgICBvZmYgLT0gMTg7CiAgICAgICAgICAgIGogKz0gMTsKICAgICAgICAgICAgdGhpcy53b3Jkc1tqXSB8PSB3ID4+PiAyNjsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG9mZiArPSA4OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5zdHJpcCgpOwogICAgfTsKCiAgICBmdW5jdGlvbiBwYXJzZUJhc2UgKHN0ciwgc3RhcnQsIGVuZCwgbXVsKSB7CiAgICAgIHZhciByID0gMDsKICAgICAgdmFyIGxlbiA9IE1hdGgubWluKHN0ci5sZW5ndGgsIGVuZCk7CiAgICAgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgdmFyIGMgPSBzdHIuY2hhckNvZGVBdChpKSAtIDQ4OwoKICAgICAgICByICo9IG11bDsKCiAgICAgICAgLy8gJ2EnCiAgICAgICAgaWYgKGMgPj0gNDkpIHsKICAgICAgICAgIHIgKz0gYyAtIDQ5ICsgMHhhOwoKICAgICAgICAvLyAnQScKICAgICAgICB9IGVsc2UgaWYgKGMgPj0gMTcpIHsKICAgICAgICAgIHIgKz0gYyAtIDE3ICsgMHhhOwoKICAgICAgICAvLyAnMCcgLSAnOScKICAgICAgICB9IGVsc2UgewogICAgICAgICAgciArPSBjOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gcjsKICAgIH0KCiAgICBCTi5wcm90b3R5cGUuX3BhcnNlQmFzZSA9IGZ1bmN0aW9uIF9wYXJzZUJhc2UgKG51bWJlciwgYmFzZSwgc3RhcnQpIHsKICAgICAgLy8gSW5pdGlhbGl6ZSBhcyB6ZXJvCiAgICAgIHRoaXMud29yZHMgPSBbIDAgXTsKICAgICAgdGhpcy5sZW5ndGggPSAxOwoKICAgICAgLy8gRmluZCBsZW5ndGggb2YgbGltYiBpbiBiYXNlCiAgICAgIGZvciAodmFyIGxpbWJMZW4gPSAwLCBsaW1iUG93ID0gMTsgbGltYlBvdyA8PSAweDNmZmZmZmY7IGxpbWJQb3cgKj0gYmFzZSkgewogICAgICAgIGxpbWJMZW4rKzsKICAgICAgfQogICAgICBsaW1iTGVuLS07CiAgICAgIGxpbWJQb3cgPSAobGltYlBvdyAvIGJhc2UpIHwgMDsKCiAgICAgIHZhciB0b3RhbCA9IG51bWJlci5sZW5ndGggLSBzdGFydDsKICAgICAgdmFyIG1vZCA9IHRvdGFsICUgbGltYkxlbjsKICAgICAgdmFyIGVuZCA9IE1hdGgubWluKHRvdGFsLCB0b3RhbCAtIG1vZCkgKyBzdGFydDsKCiAgICAgIHZhciB3b3JkID0gMDsKICAgICAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpICs9IGxpbWJMZW4pIHsKICAgICAgICB3b3JkID0gcGFyc2VCYXNlKG51bWJlciwgaSwgaSArIGxpbWJMZW4sIGJhc2UpOwoKICAgICAgICB0aGlzLmltdWxuKGxpbWJQb3cpOwogICAgICAgIGlmICh0aGlzLndvcmRzWzBdICsgd29yZCA8IDB4NDAwMDAwMCkgewogICAgICAgICAgdGhpcy53b3Jkc1swXSArPSB3b3JkOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLl9pYWRkbih3b3JkKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChtb2QgIT09IDApIHsKICAgICAgICB2YXIgcG93ID0gMTsKICAgICAgICB3b3JkID0gcGFyc2VCYXNlKG51bWJlciwgaSwgbnVtYmVyLmxlbmd0aCwgYmFzZSk7CgogICAgICAgIGZvciAoaSA9IDA7IGkgPCBtb2Q7IGkrKykgewogICAgICAgICAgcG93ICo9IGJhc2U7CiAgICAgICAgfQoKICAgICAgICB0aGlzLmltdWxuKHBvdyk7CiAgICAgICAgaWYgKHRoaXMud29yZHNbMF0gKyB3b3JkIDwgMHg0MDAwMDAwKSB7CiAgICAgICAgICB0aGlzLndvcmRzWzBdICs9IHdvcmQ7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuX2lhZGRuKHdvcmQpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5zdHJpcCgpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuY29weSA9IGZ1bmN0aW9uIGNvcHkgKGRlc3QpIHsKICAgICAgZGVzdC53b3JkcyA9IG5ldyBBcnJheSh0aGlzLmxlbmd0aCk7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykgewogICAgICAgIGRlc3Qud29yZHNbaV0gPSB0aGlzLndvcmRzW2ldOwogICAgICB9CiAgICAgIGRlc3QubGVuZ3RoID0gdGhpcy5sZW5ndGg7CiAgICAgIGRlc3QubmVnYXRpdmUgPSB0aGlzLm5lZ2F0aXZlOwogICAgICBkZXN0LnJlZCA9IHRoaXMucmVkOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiBjbG9uZSAoKSB7CiAgICAgIHZhciByID0gbmV3IEJOKG51bGwpOwogICAgICB0aGlzLmNvcHkocik7CiAgICAgIHJldHVybiByOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuX2V4cGFuZCA9IGZ1bmN0aW9uIF9leHBhbmQgKHNpemUpIHsKICAgICAgd2hpbGUgKHRoaXMubGVuZ3RoIDwgc2l6ZSkgewogICAgICAgIHRoaXMud29yZHNbdGhpcy5sZW5ndGgrK10gPSAwOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzOwogICAgfTsKCiAgICAvLyBSZW1vdmUgbGVhZGluZyBgMGAgZnJvbSBgdGhpc2AKICAgIEJOLnByb3RvdHlwZS5zdHJpcCA9IGZ1bmN0aW9uIHN0cmlwICgpIHsKICAgICAgd2hpbGUgKHRoaXMubGVuZ3RoID4gMSAmJiB0aGlzLndvcmRzW3RoaXMubGVuZ3RoIC0gMV0gPT09IDApIHsKICAgICAgICB0aGlzLmxlbmd0aC0tOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLl9ub3JtU2lnbigpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuX25vcm1TaWduID0gZnVuY3Rpb24gX25vcm1TaWduICgpIHsKICAgICAgLy8gLTAgPSAwCiAgICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMSAmJiB0aGlzLndvcmRzWzBdID09PSAwKSB7CiAgICAgICAgdGhpcy5uZWdhdGl2ZSA9IDA7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXM7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5pbnNwZWN0ID0gZnVuY3Rpb24gaW5zcGVjdCAoKSB7CiAgICAgIHJldHVybiAodGhpcy5yZWQgPyAnPEJOLVI6ICcgOiAnPEJOOiAnKSArIHRoaXMudG9TdHJpbmcoMTYpICsgJz4nOwogICAgfTsKCiAgICAvKgoKICAgIHZhciB6ZXJvcyA9IFtdOwogICAgdmFyIGdyb3VwU2l6ZXMgPSBbXTsKICAgIHZhciBncm91cEJhc2VzID0gW107CgogICAgdmFyIHMgPSAnJzsKICAgIHZhciBpID0gLTE7CiAgICB3aGlsZSAoKytpIDwgQk4ud29yZFNpemUpIHsKICAgICAgemVyb3NbaV0gPSBzOwogICAgICBzICs9ICcwJzsKICAgIH0KICAgIGdyb3VwU2l6ZXNbMF0gPSAwOwogICAgZ3JvdXBTaXplc1sxXSA9IDA7CiAgICBncm91cEJhc2VzWzBdID0gMDsKICAgIGdyb3VwQmFzZXNbMV0gPSAwOwogICAgdmFyIGJhc2UgPSAyIC0gMTsKICAgIHdoaWxlICgrK2Jhc2UgPCAzNiArIDEpIHsKICAgICAgdmFyIGdyb3VwU2l6ZSA9IDA7CiAgICAgIHZhciBncm91cEJhc2UgPSAxOwogICAgICB3aGlsZSAoZ3JvdXBCYXNlIDwgKDEgPDwgQk4ud29yZFNpemUpIC8gYmFzZSkgewogICAgICAgIGdyb3VwQmFzZSAqPSBiYXNlOwogICAgICAgIGdyb3VwU2l6ZSArPSAxOwogICAgICB9CiAgICAgIGdyb3VwU2l6ZXNbYmFzZV0gPSBncm91cFNpemU7CiAgICAgIGdyb3VwQmFzZXNbYmFzZV0gPSBncm91cEJhc2U7CiAgICB9CgogICAgKi8KCiAgICB2YXIgemVyb3MgPSBbCiAgICAgICcnLAogICAgICAnMCcsCiAgICAgICcwMCcsCiAgICAgICcwMDAnLAogICAgICAnMDAwMCcsCiAgICAgICcwMDAwMCcsCiAgICAgICcwMDAwMDAnLAogICAgICAnMDAwMDAwMCcsCiAgICAgICcwMDAwMDAwMCcsCiAgICAgICcwMDAwMDAwMDAnLAogICAgICAnMDAwMDAwMDAwMCcsCiAgICAgICcwMDAwMDAwMDAwMCcsCiAgICAgICcwMDAwMDAwMDAwMDAnLAogICAgICAnMDAwMDAwMDAwMDAwMCcsCiAgICAgICcwMDAwMDAwMDAwMDAwMCcsCiAgICAgICcwMDAwMDAwMDAwMDAwMDAnLAogICAgICAnMDAwMDAwMDAwMDAwMDAwMCcsCiAgICAgICcwMDAwMDAwMDAwMDAwMDAwMCcsCiAgICAgICcwMDAwMDAwMDAwMDAwMDAwMDAnLAogICAgICAnMDAwMDAwMDAwMDAwMDAwMDAwMCcsCiAgICAgICcwMDAwMDAwMDAwMDAwMDAwMDAwMCcsCiAgICAgICcwMDAwMDAwMDAwMDAwMDAwMDAwMDAnLAogICAgICAnMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCcsCiAgICAgICcwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCcsCiAgICAgICcwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAnLAogICAgICAnMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCcKICAgIF07CgogICAgdmFyIGdyb3VwU2l6ZXMgPSBbCiAgICAgIDAsIDAsCiAgICAgIDI1LCAxNiwgMTIsIDExLCAxMCwgOSwgOCwKICAgICAgOCwgNywgNywgNywgNywgNiwgNiwKICAgICAgNiwgNiwgNiwgNiwgNiwgNSwgNSwKICAgICAgNSwgNSwgNSwgNSwgNSwgNSwgNSwKICAgICAgNSwgNSwgNSwgNSwgNSwgNSwgNQogICAgXTsKCiAgICB2YXIgZ3JvdXBCYXNlcyA9IFsKICAgICAgMCwgMCwKICAgICAgMzM1NTQ0MzIsIDQzMDQ2NzIxLCAxNjc3NzIxNiwgNDg4MjgxMjUsIDYwNDY2MTc2LCA0MDM1MzYwNywgMTY3NzcyMTYsCiAgICAgIDQzMDQ2NzIxLCAxMDAwMDAwMCwgMTk0ODcxNzEsIDM1ODMxODA4LCA2Mjc0ODUxNywgNzUyOTUzNiwgMTEzOTA2MjUsCiAgICAgIDE2Nzc3MjE2LCAyNDEzNzU2OSwgMzQwMTIyMjQsIDQ3MDQ1ODgxLCA2NDAwMDAwMCwgNDA4NDEwMSwgNTE1MzYzMiwKICAgICAgNjQzNjM0MywgNzk2MjYyNCwgOTc2NTYyNSwgMTE4ODEzNzYsIDE0MzQ4OTA3LCAxNzIxMDM2OCwgMjA1MTExNDksCiAgICAgIDI0MzAwMDAwLCAyODYyOTE1MSwgMzM1NTQ0MzIsIDM5MTM1MzkzLCA0NTQzNTQyNCwgNTI1MjE4NzUsIDYwNDY2MTc2CiAgICBdOwoKICAgIEJOLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nIChiYXNlLCBwYWRkaW5nKSB7CiAgICAgIGJhc2UgPSBiYXNlIHx8IDEwOwogICAgICBwYWRkaW5nID0gcGFkZGluZyB8IDAgfHwgMTsKCiAgICAgIHZhciBvdXQ7CiAgICAgIGlmIChiYXNlID09PSAxNiB8fCBiYXNlID09PSAnaGV4JykgewogICAgICAgIG91dCA9ICcnOwogICAgICAgIHZhciBvZmYgPSAwOwogICAgICAgIHZhciBjYXJyeSA9IDA7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB2YXIgdyA9IHRoaXMud29yZHNbaV07CiAgICAgICAgICB2YXIgd29yZCA9ICgoKHcgPDwgb2ZmKSB8IGNhcnJ5KSAmIDB4ZmZmZmZmKS50b1N0cmluZygxNik7CiAgICAgICAgICBjYXJyeSA9ICh3ID4+PiAoMjQgLSBvZmYpKSAmIDB4ZmZmZmZmOwogICAgICAgICAgaWYgKGNhcnJ5ICE9PSAwIHx8IGkgIT09IHRoaXMubGVuZ3RoIC0gMSkgewogICAgICAgICAgICBvdXQgPSB6ZXJvc1s2IC0gd29yZC5sZW5ndGhdICsgd29yZCArIG91dDsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG91dCA9IHdvcmQgKyBvdXQ7CiAgICAgICAgICB9CiAgICAgICAgICBvZmYgKz0gMjsKICAgICAgICAgIGlmIChvZmYgPj0gMjYpIHsKICAgICAgICAgICAgb2ZmIC09IDI2OwogICAgICAgICAgICBpLS07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChjYXJyeSAhPT0gMCkgewogICAgICAgICAgb3V0ID0gY2FycnkudG9TdHJpbmcoMTYpICsgb3V0OwogICAgICAgIH0KICAgICAgICB3aGlsZSAob3V0Lmxlbmd0aCAlIHBhZGRpbmcgIT09IDApIHsKICAgICAgICAgIG91dCA9ICcwJyArIG91dDsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMubmVnYXRpdmUgIT09IDApIHsKICAgICAgICAgIG91dCA9ICctJyArIG91dDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG91dDsKICAgICAgfQoKICAgICAgaWYgKGJhc2UgPT09IChiYXNlIHwgMCkgJiYgYmFzZSA+PSAyICYmIGJhc2UgPD0gMzYpIHsKICAgICAgICAvLyB2YXIgZ3JvdXBTaXplID0gTWF0aC5mbG9vcihCTi53b3JkU2l6ZSAqIE1hdGguTE4yIC8gTWF0aC5sb2coYmFzZSkpOwogICAgICAgIHZhciBncm91cFNpemUgPSBncm91cFNpemVzW2Jhc2VdOwogICAgICAgIC8vIHZhciBncm91cEJhc2UgPSBNYXRoLnBvdyhiYXNlLCBncm91cFNpemUpOwogICAgICAgIHZhciBncm91cEJhc2UgPSBncm91cEJhc2VzW2Jhc2VdOwogICAgICAgIG91dCA9ICcnOwogICAgICAgIHZhciBjID0gdGhpcy5jbG9uZSgpOwogICAgICAgIGMubmVnYXRpdmUgPSAwOwogICAgICAgIHdoaWxlICghYy5pc1plcm8oKSkgewogICAgICAgICAgdmFyIHIgPSBjLm1vZG4oZ3JvdXBCYXNlKS50b1N0cmluZyhiYXNlKTsKICAgICAgICAgIGMgPSBjLmlkaXZuKGdyb3VwQmFzZSk7CgogICAgICAgICAgaWYgKCFjLmlzWmVybygpKSB7CiAgICAgICAgICAgIG91dCA9IHplcm9zW2dyb3VwU2l6ZSAtIHIubGVuZ3RoXSArIHIgKyBvdXQ7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBvdXQgPSByICsgb3V0OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAodGhpcy5pc1plcm8oKSkgewogICAgICAgICAgb3V0ID0gJzAnICsgb3V0OwogICAgICAgIH0KICAgICAgICB3aGlsZSAob3V0Lmxlbmd0aCAlIHBhZGRpbmcgIT09IDApIHsKICAgICAgICAgIG91dCA9ICcwJyArIG91dDsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMubmVnYXRpdmUgIT09IDApIHsKICAgICAgICAgIG91dCA9ICctJyArIG91dDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG91dDsKICAgICAgfQoKICAgICAgYXNzZXJ0KGZhbHNlLCAnQmFzZSBzaG91bGQgYmUgYmV0d2VlbiAyIGFuZCAzNicpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUudG9OdW1iZXIgPSBmdW5jdGlvbiB0b051bWJlciAoKSB7CiAgICAgIHZhciByZXQgPSB0aGlzLndvcmRzWzBdOwogICAgICBpZiAodGhpcy5sZW5ndGggPT09IDIpIHsKICAgICAgICByZXQgKz0gdGhpcy53b3Jkc1sxXSAqIDB4NDAwMDAwMDsKICAgICAgfSBlbHNlIGlmICh0aGlzLmxlbmd0aCA9PT0gMyAmJiB0aGlzLndvcmRzWzJdID09PSAweDAxKSB7CiAgICAgICAgLy8gTk9URTogYXQgdGhpcyBzdGFnZSBpdCBpcyBrbm93biB0aGF0IHRoZSB0b3AgYml0IGlzIHNldAogICAgICAgIHJldCArPSAweDEwMDAwMDAwMDAwMDAwICsgKHRoaXMud29yZHNbMV0gKiAweDQwMDAwMDApOwogICAgICB9IGVsc2UgaWYgKHRoaXMubGVuZ3RoID4gMikgewogICAgICAgIGFzc2VydChmYWxzZSwgJ051bWJlciBjYW4gb25seSBzYWZlbHkgc3RvcmUgdXAgdG8gNTMgYml0cycpOwogICAgICB9CiAgICAgIHJldHVybiAodGhpcy5uZWdhdGl2ZSAhPT0gMCkgPyAtcmV0IDogcmV0OwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OICgpIHsKICAgICAgcmV0dXJuIHRoaXMudG9TdHJpbmcoMTYpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUudG9CdWZmZXIgPSBmdW5jdGlvbiB0b0J1ZmZlciAoZW5kaWFuLCBsZW5ndGgpIHsKICAgICAgYXNzZXJ0KHR5cGVvZiBCdWZmZXIgIT09ICd1bmRlZmluZWQnKTsKICAgICAgcmV0dXJuIHRoaXMudG9BcnJheUxpa2UoQnVmZmVyLCBlbmRpYW4sIGxlbmd0aCk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS50b0FycmF5ID0gZnVuY3Rpb24gdG9BcnJheSAoZW5kaWFuLCBsZW5ndGgpIHsKICAgICAgcmV0dXJuIHRoaXMudG9BcnJheUxpa2UoQXJyYXksIGVuZGlhbiwgbGVuZ3RoKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLnRvQXJyYXlMaWtlID0gZnVuY3Rpb24gdG9BcnJheUxpa2UgKEFycmF5VHlwZSwgZW5kaWFuLCBsZW5ndGgpIHsKICAgICAgdmFyIGJ5dGVMZW5ndGggPSB0aGlzLmJ5dGVMZW5ndGgoKTsKICAgICAgdmFyIHJlcUxlbmd0aCA9IGxlbmd0aCB8fCBNYXRoLm1heCgxLCBieXRlTGVuZ3RoKTsKICAgICAgYXNzZXJ0KGJ5dGVMZW5ndGggPD0gcmVxTGVuZ3RoLCAnYnl0ZSBhcnJheSBsb25nZXIgdGhhbiBkZXNpcmVkIGxlbmd0aCcpOwogICAgICBhc3NlcnQocmVxTGVuZ3RoID4gMCwgJ1JlcXVlc3RlZCBhcnJheSBsZW5ndGggPD0gMCcpOwoKICAgICAgdGhpcy5zdHJpcCgpOwogICAgICB2YXIgbGl0dGxlRW5kaWFuID0gZW5kaWFuID09PSAnbGUnOwogICAgICB2YXIgcmVzID0gbmV3IEFycmF5VHlwZShyZXFMZW5ndGgpOwoKICAgICAgdmFyIGIsIGk7CiAgICAgIHZhciBxID0gdGhpcy5jbG9uZSgpOwogICAgICBpZiAoIWxpdHRsZUVuZGlhbikgewogICAgICAgIC8vIEFzc3VtZSBiaWctZW5kaWFuCiAgICAgICAgZm9yIChpID0gMDsgaSA8IHJlcUxlbmd0aCAtIGJ5dGVMZW5ndGg7IGkrKykgewogICAgICAgICAgcmVzW2ldID0gMDsKICAgICAgICB9CgogICAgICAgIGZvciAoaSA9IDA7ICFxLmlzWmVybygpOyBpKyspIHsKICAgICAgICAgIGIgPSBxLmFuZGxuKDB4ZmYpOwogICAgICAgICAgcS5pdXNocm4oOCk7CgogICAgICAgICAgcmVzW3JlcUxlbmd0aCAtIGkgLSAxXSA9IGI7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGZvciAoaSA9IDA7ICFxLmlzWmVybygpOyBpKyspIHsKICAgICAgICAgIGIgPSBxLmFuZGxuKDB4ZmYpOwogICAgICAgICAgcS5pdXNocm4oOCk7CgogICAgICAgICAgcmVzW2ldID0gYjsKICAgICAgICB9CgogICAgICAgIGZvciAoOyBpIDwgcmVxTGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHJlc1tpXSA9IDA7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gcmVzOwogICAgfTsKCiAgICBpZiAoTWF0aC5jbHozMikgewogICAgICBCTi5wcm90b3R5cGUuX2NvdW50Qml0cyA9IGZ1bmN0aW9uIF9jb3VudEJpdHMgKHcpIHsKICAgICAgICByZXR1cm4gMzIgLSBNYXRoLmNsejMyKHcpOwogICAgICB9OwogICAgfSBlbHNlIHsKICAgICAgQk4ucHJvdG90eXBlLl9jb3VudEJpdHMgPSBmdW5jdGlvbiBfY291bnRCaXRzICh3KSB7CiAgICAgICAgdmFyIHQgPSB3OwogICAgICAgIHZhciByID0gMDsKICAgICAgICBpZiAodCA+PSAweDEwMDApIHsKICAgICAgICAgIHIgKz0gMTM7CiAgICAgICAgICB0ID4+Pj0gMTM7CiAgICAgICAgfQogICAgICAgIGlmICh0ID49IDB4NDApIHsKICAgICAgICAgIHIgKz0gNzsKICAgICAgICAgIHQgPj4+PSA3OwogICAgICAgIH0KICAgICAgICBpZiAodCA+PSAweDgpIHsKICAgICAgICAgIHIgKz0gNDsKICAgICAgICAgIHQgPj4+PSA0OwogICAgICAgIH0KICAgICAgICBpZiAodCA+PSAweDAyKSB7CiAgICAgICAgICByICs9IDI7CiAgICAgICAgICB0ID4+Pj0gMjsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHIgKyB0OwogICAgICB9OwogICAgfQoKICAgIEJOLnByb3RvdHlwZS5femVyb0JpdHMgPSBmdW5jdGlvbiBfemVyb0JpdHMgKHcpIHsKICAgICAgLy8gU2hvcnQtY3V0CiAgICAgIGlmICh3ID09PSAwKSByZXR1cm4gMjY7CgogICAgICB2YXIgdCA9IHc7CiAgICAgIHZhciByID0gMDsKICAgICAgaWYgKCh0ICYgMHgxZmZmKSA9PT0gMCkgewogICAgICAgIHIgKz0gMTM7CiAgICAgICAgdCA+Pj49IDEzOwogICAgICB9CiAgICAgIGlmICgodCAmIDB4N2YpID09PSAwKSB7CiAgICAgICAgciArPSA3OwogICAgICAgIHQgPj4+PSA3OwogICAgICB9CiAgICAgIGlmICgodCAmIDB4ZikgPT09IDApIHsKICAgICAgICByICs9IDQ7CiAgICAgICAgdCA+Pj49IDQ7CiAgICAgIH0KICAgICAgaWYgKCh0ICYgMHgzKSA9PT0gMCkgewogICAgICAgIHIgKz0gMjsKICAgICAgICB0ID4+Pj0gMjsKICAgICAgfQogICAgICBpZiAoKHQgJiAweDEpID09PSAwKSB7CiAgICAgICAgcisrOwogICAgICB9CiAgICAgIHJldHVybiByOwogICAgfTsKCiAgICAvLyBSZXR1cm4gbnVtYmVyIG9mIHVzZWQgYml0cyBpbiBhIEJOCiAgICBCTi5wcm90b3R5cGUuYml0TGVuZ3RoID0gZnVuY3Rpb24gYml0TGVuZ3RoICgpIHsKICAgICAgdmFyIHcgPSB0aGlzLndvcmRzW3RoaXMubGVuZ3RoIC0gMV07CiAgICAgIHZhciBoaSA9IHRoaXMuX2NvdW50Qml0cyh3KTsKICAgICAgcmV0dXJuICh0aGlzLmxlbmd0aCAtIDEpICogMjYgKyBoaTsKICAgIH07CgogICAgZnVuY3Rpb24gdG9CaXRBcnJheSAobnVtKSB7CiAgICAgIHZhciB3ID0gbmV3IEFycmF5KG51bS5iaXRMZW5ndGgoKSk7CgogICAgICBmb3IgKHZhciBiaXQgPSAwOyBiaXQgPCB3Lmxlbmd0aDsgYml0KyspIHsKICAgICAgICB2YXIgb2ZmID0gKGJpdCAvIDI2KSB8IDA7CiAgICAgICAgdmFyIHdiaXQgPSBiaXQgJSAyNjsKCiAgICAgICAgd1tiaXRdID0gKG51bS53b3Jkc1tvZmZdICYgKDEgPDwgd2JpdCkpID4+PiB3Yml0OwogICAgICB9CgogICAgICByZXR1cm4gdzsKICAgIH0KCiAgICAvLyBOdW1iZXIgb2YgdHJhaWxpbmcgemVybyBiaXRzCiAgICBCTi5wcm90b3R5cGUuemVyb0JpdHMgPSBmdW5jdGlvbiB6ZXJvQml0cyAoKSB7CiAgICAgIGlmICh0aGlzLmlzWmVybygpKSByZXR1cm4gMDsKCiAgICAgIHZhciByID0gMDsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIGIgPSB0aGlzLl96ZXJvQml0cyh0aGlzLndvcmRzW2ldKTsKICAgICAgICByICs9IGI7CiAgICAgICAgaWYgKGIgIT09IDI2KSBicmVhazsKICAgICAgfQogICAgICByZXR1cm4gcjsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmJ5dGVMZW5ndGggPSBmdW5jdGlvbiBieXRlTGVuZ3RoICgpIHsKICAgICAgcmV0dXJuIE1hdGguY2VpbCh0aGlzLmJpdExlbmd0aCgpIC8gOCk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS50b1R3b3MgPSBmdW5jdGlvbiB0b1R3b3MgKHdpZHRoKSB7CiAgICAgIGlmICh0aGlzLm5lZ2F0aXZlICE9PSAwKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuYWJzKCkuaW5vdG4od2lkdGgpLmlhZGRuKDEpOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLmNsb25lKCk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5mcm9tVHdvcyA9IGZ1bmN0aW9uIGZyb21Ud29zICh3aWR0aCkgewogICAgICBpZiAodGhpcy50ZXN0bih3aWR0aCAtIDEpKSB7CiAgICAgICAgcmV0dXJuIHRoaXMubm90bih3aWR0aCkuaWFkZG4oMSkuaW5lZygpOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLmNsb25lKCk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5pc05lZyA9IGZ1bmN0aW9uIGlzTmVnICgpIHsKICAgICAgcmV0dXJuIHRoaXMubmVnYXRpdmUgIT09IDA7CiAgICB9OwoKICAgIC8vIFJldHVybiBuZWdhdGl2ZSBjbG9uZSBvZiBgdGhpc2AKICAgIEJOLnByb3RvdHlwZS5uZWcgPSBmdW5jdGlvbiBuZWcgKCkgewogICAgICByZXR1cm4gdGhpcy5jbG9uZSgpLmluZWcoKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmluZWcgPSBmdW5jdGlvbiBpbmVnICgpIHsKICAgICAgaWYgKCF0aGlzLmlzWmVybygpKSB7CiAgICAgICAgdGhpcy5uZWdhdGl2ZSBePSAxOwogICAgICB9CgogICAgICByZXR1cm4gdGhpczsKICAgIH07CgogICAgLy8gT3IgYG51bWAgd2l0aCBgdGhpc2AgaW4tcGxhY2UKICAgIEJOLnByb3RvdHlwZS5pdW9yID0gZnVuY3Rpb24gaXVvciAobnVtKSB7CiAgICAgIHdoaWxlICh0aGlzLmxlbmd0aCA8IG51bS5sZW5ndGgpIHsKICAgICAgICB0aGlzLndvcmRzW3RoaXMubGVuZ3RoKytdID0gMDsKICAgICAgfQoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW0ubGVuZ3RoOyBpKyspIHsKICAgICAgICB0aGlzLndvcmRzW2ldID0gdGhpcy53b3Jkc1tpXSB8IG51bS53b3Jkc1tpXTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMuc3RyaXAoKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmlvciA9IGZ1bmN0aW9uIGlvciAobnVtKSB7CiAgICAgIGFzc2VydCgodGhpcy5uZWdhdGl2ZSB8IG51bS5uZWdhdGl2ZSkgPT09IDApOwogICAgICByZXR1cm4gdGhpcy5pdW9yKG51bSk7CiAgICB9OwoKICAgIC8vIE9yIGBudW1gIHdpdGggYHRoaXNgCiAgICBCTi5wcm90b3R5cGUub3IgPSBmdW5jdGlvbiBvciAobnVtKSB7CiAgICAgIGlmICh0aGlzLmxlbmd0aCA+IG51bS5sZW5ndGgpIHJldHVybiB0aGlzLmNsb25lKCkuaW9yKG51bSk7CiAgICAgIHJldHVybiBudW0uY2xvbmUoKS5pb3IodGhpcyk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS51b3IgPSBmdW5jdGlvbiB1b3IgKG51bSkgewogICAgICBpZiAodGhpcy5sZW5ndGggPiBudW0ubGVuZ3RoKSByZXR1cm4gdGhpcy5jbG9uZSgpLml1b3IobnVtKTsKICAgICAgcmV0dXJuIG51bS5jbG9uZSgpLml1b3IodGhpcyk7CiAgICB9OwoKICAgIC8vIEFuZCBgbnVtYCB3aXRoIGB0aGlzYCBpbi1wbGFjZQogICAgQk4ucHJvdG90eXBlLml1YW5kID0gZnVuY3Rpb24gaXVhbmQgKG51bSkgewogICAgICAvLyBiID0gbWluLWxlbmd0aChudW0sIHRoaXMpCiAgICAgIHZhciBiOwogICAgICBpZiAodGhpcy5sZW5ndGggPiBudW0ubGVuZ3RoKSB7CiAgICAgICAgYiA9IG51bTsKICAgICAgfSBlbHNlIHsKICAgICAgICBiID0gdGhpczsKICAgICAgfQoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy53b3Jkc1tpXSA9IHRoaXMud29yZHNbaV0gJiBudW0ud29yZHNbaV07CiAgICAgIH0KCiAgICAgIHRoaXMubGVuZ3RoID0gYi5sZW5ndGg7CgogICAgICByZXR1cm4gdGhpcy5zdHJpcCgpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuaWFuZCA9IGZ1bmN0aW9uIGlhbmQgKG51bSkgewogICAgICBhc3NlcnQoKHRoaXMubmVnYXRpdmUgfCBudW0ubmVnYXRpdmUpID09PSAwKTsKICAgICAgcmV0dXJuIHRoaXMuaXVhbmQobnVtKTsKICAgIH07CgogICAgLy8gQW5kIGBudW1gIHdpdGggYHRoaXNgCiAgICBCTi5wcm90b3R5cGUuYW5kID0gZnVuY3Rpb24gYW5kIChudW0pIHsKICAgICAgaWYgKHRoaXMubGVuZ3RoID4gbnVtLmxlbmd0aCkgcmV0dXJuIHRoaXMuY2xvbmUoKS5pYW5kKG51bSk7CiAgICAgIHJldHVybiBudW0uY2xvbmUoKS5pYW5kKHRoaXMpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUudWFuZCA9IGZ1bmN0aW9uIHVhbmQgKG51bSkgewogICAgICBpZiAodGhpcy5sZW5ndGggPiBudW0ubGVuZ3RoKSByZXR1cm4gdGhpcy5jbG9uZSgpLml1YW5kKG51bSk7CiAgICAgIHJldHVybiBudW0uY2xvbmUoKS5pdWFuZCh0aGlzKTsKICAgIH07CgogICAgLy8gWG9yIGBudW1gIHdpdGggYHRoaXNgIGluLXBsYWNlCiAgICBCTi5wcm90b3R5cGUuaXV4b3IgPSBmdW5jdGlvbiBpdXhvciAobnVtKSB7CiAgICAgIC8vIGEubGVuZ3RoID4gYi5sZW5ndGgKICAgICAgdmFyIGE7CiAgICAgIHZhciBiOwogICAgICBpZiAodGhpcy5sZW5ndGggPiBudW0ubGVuZ3RoKSB7CiAgICAgICAgYSA9IHRoaXM7CiAgICAgICAgYiA9IG51bTsKICAgICAgfSBlbHNlIHsKICAgICAgICBhID0gbnVtOwogICAgICAgIGIgPSB0aGlzOwogICAgICB9CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGIubGVuZ3RoOyBpKyspIHsKICAgICAgICB0aGlzLndvcmRzW2ldID0gYS53b3Jkc1tpXSBeIGIud29yZHNbaV07CiAgICAgIH0KCiAgICAgIGlmICh0aGlzICE9PSBhKSB7CiAgICAgICAgZm9yICg7IGkgPCBhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB0aGlzLndvcmRzW2ldID0gYS53b3Jkc1tpXTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMubGVuZ3RoID0gYS5sZW5ndGg7CgogICAgICByZXR1cm4gdGhpcy5zdHJpcCgpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuaXhvciA9IGZ1bmN0aW9uIGl4b3IgKG51bSkgewogICAgICBhc3NlcnQoKHRoaXMubmVnYXRpdmUgfCBudW0ubmVnYXRpdmUpID09PSAwKTsKICAgICAgcmV0dXJuIHRoaXMuaXV4b3IobnVtKTsKICAgIH07CgogICAgLy8gWG9yIGBudW1gIHdpdGggYHRoaXNgCiAgICBCTi5wcm90b3R5cGUueG9yID0gZnVuY3Rpb24geG9yIChudW0pIHsKICAgICAgaWYgKHRoaXMubGVuZ3RoID4gbnVtLmxlbmd0aCkgcmV0dXJuIHRoaXMuY2xvbmUoKS5peG9yKG51bSk7CiAgICAgIHJldHVybiBudW0uY2xvbmUoKS5peG9yKHRoaXMpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUudXhvciA9IGZ1bmN0aW9uIHV4b3IgKG51bSkgewogICAgICBpZiAodGhpcy5sZW5ndGggPiBudW0ubGVuZ3RoKSByZXR1cm4gdGhpcy5jbG9uZSgpLml1eG9yKG51bSk7CiAgICAgIHJldHVybiBudW0uY2xvbmUoKS5pdXhvcih0aGlzKTsKICAgIH07CgogICAgLy8gTm90IGBgdGhpc2BgIHdpdGggYGB3aWR0aGBgIGJpdHdpZHRoCiAgICBCTi5wcm90b3R5cGUuaW5vdG4gPSBmdW5jdGlvbiBpbm90biAod2lkdGgpIHsKICAgICAgYXNzZXJ0KHR5cGVvZiB3aWR0aCA9PT0gJ251bWJlcicgJiYgd2lkdGggPj0gMCk7CgogICAgICB2YXIgYnl0ZXNOZWVkZWQgPSBNYXRoLmNlaWwod2lkdGggLyAyNikgfCAwOwogICAgICB2YXIgYml0c0xlZnQgPSB3aWR0aCAlIDI2OwoKICAgICAgLy8gRXh0ZW5kIHRoZSBidWZmZXIgd2l0aCBsZWFkaW5nIHplcm9lcwogICAgICB0aGlzLl9leHBhbmQoYnl0ZXNOZWVkZWQpOwoKICAgICAgaWYgKGJpdHNMZWZ0ID4gMCkgewogICAgICAgIGJ5dGVzTmVlZGVkLS07CiAgICAgIH0KCiAgICAgIC8vIEhhbmRsZSBjb21wbGV0ZSB3b3JkcwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJ5dGVzTmVlZGVkOyBpKyspIHsKICAgICAgICB0aGlzLndvcmRzW2ldID0gfnRoaXMud29yZHNbaV0gJiAweDNmZmZmZmY7CiAgICAgIH0KCiAgICAgIC8vIEhhbmRsZSB0aGUgcmVzaWR1ZQogICAgICBpZiAoYml0c0xlZnQgPiAwKSB7CiAgICAgICAgdGhpcy53b3Jkc1tpXSA9IH50aGlzLndvcmRzW2ldICYgKDB4M2ZmZmZmZiA+PiAoMjYgLSBiaXRzTGVmdCkpOwogICAgICB9CgogICAgICAvLyBBbmQgcmVtb3ZlIGxlYWRpbmcgemVyb2VzCiAgICAgIHJldHVybiB0aGlzLnN0cmlwKCk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5ub3RuID0gZnVuY3Rpb24gbm90biAod2lkdGgpIHsKICAgICAgcmV0dXJuIHRoaXMuY2xvbmUoKS5pbm90bih3aWR0aCk7CiAgICB9OwoKICAgIC8vIFNldCBgYml0YCBvZiBgdGhpc2AKICAgIEJOLnByb3RvdHlwZS5zZXRuID0gZnVuY3Rpb24gc2V0biAoYml0LCB2YWwpIHsKICAgICAgYXNzZXJ0KHR5cGVvZiBiaXQgPT09ICdudW1iZXInICYmIGJpdCA+PSAwKTsKCiAgICAgIHZhciBvZmYgPSAoYml0IC8gMjYpIHwgMDsKICAgICAgdmFyIHdiaXQgPSBiaXQgJSAyNjsKCiAgICAgIHRoaXMuX2V4cGFuZChvZmYgKyAxKTsKCiAgICAgIGlmICh2YWwpIHsKICAgICAgICB0aGlzLndvcmRzW29mZl0gPSB0aGlzLndvcmRzW29mZl0gfCAoMSA8PCB3Yml0KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLndvcmRzW29mZl0gPSB0aGlzLndvcmRzW29mZl0gJiB+KDEgPDwgd2JpdCk7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLnN0cmlwKCk7CiAgICB9OwoKICAgIC8vIEFkZCBgbnVtYCB0byBgdGhpc2AgaW4tcGxhY2UKICAgIEJOLnByb3RvdHlwZS5pYWRkID0gZnVuY3Rpb24gaWFkZCAobnVtKSB7CiAgICAgIHZhciByOwoKICAgICAgLy8gbmVnYXRpdmUgKyBwb3NpdGl2ZQogICAgICBpZiAodGhpcy5uZWdhdGl2ZSAhPT0gMCAmJiBudW0ubmVnYXRpdmUgPT09IDApIHsKICAgICAgICB0aGlzLm5lZ2F0aXZlID0gMDsKICAgICAgICByID0gdGhpcy5pc3ViKG51bSk7CiAgICAgICAgdGhpcy5uZWdhdGl2ZSBePSAxOwogICAgICAgIHJldHVybiB0aGlzLl9ub3JtU2lnbigpOwoKICAgICAgLy8gcG9zaXRpdmUgKyBuZWdhdGl2ZQogICAgICB9IGVsc2UgaWYgKHRoaXMubmVnYXRpdmUgPT09IDAgJiYgbnVtLm5lZ2F0aXZlICE9PSAwKSB7CiAgICAgICAgbnVtLm5lZ2F0aXZlID0gMDsKICAgICAgICByID0gdGhpcy5pc3ViKG51bSk7CiAgICAgICAgbnVtLm5lZ2F0aXZlID0gMTsKICAgICAgICByZXR1cm4gci5fbm9ybVNpZ24oKTsKICAgICAgfQoKICAgICAgLy8gYS5sZW5ndGggPiBiLmxlbmd0aAogICAgICB2YXIgYSwgYjsKICAgICAgaWYgKHRoaXMubGVuZ3RoID4gbnVtLmxlbmd0aCkgewogICAgICAgIGEgPSB0aGlzOwogICAgICAgIGIgPSBudW07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYSA9IG51bTsKICAgICAgICBiID0gdGhpczsKICAgICAgfQoKICAgICAgdmFyIGNhcnJ5ID0gMDsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgciA9IChhLndvcmRzW2ldIHwgMCkgKyAoYi53b3Jkc1tpXSB8IDApICsgY2Fycnk7CiAgICAgICAgdGhpcy53b3Jkc1tpXSA9IHIgJiAweDNmZmZmZmY7CiAgICAgICAgY2FycnkgPSByID4+PiAyNjsKICAgICAgfQogICAgICBmb3IgKDsgY2FycnkgIT09IDAgJiYgaSA8IGEubGVuZ3RoOyBpKyspIHsKICAgICAgICByID0gKGEud29yZHNbaV0gfCAwKSArIGNhcnJ5OwogICAgICAgIHRoaXMud29yZHNbaV0gPSByICYgMHgzZmZmZmZmOwogICAgICAgIGNhcnJ5ID0gciA+Pj4gMjY7CiAgICAgIH0KCiAgICAgIHRoaXMubGVuZ3RoID0gYS5sZW5ndGg7CiAgICAgIGlmIChjYXJyeSAhPT0gMCkgewogICAgICAgIHRoaXMud29yZHNbdGhpcy5sZW5ndGhdID0gY2Fycnk7CiAgICAgICAgdGhpcy5sZW5ndGgrKzsKICAgICAgLy8gQ29weSB0aGUgcmVzdCBvZiB0aGUgd29yZHMKICAgICAgfSBlbHNlIGlmIChhICE9PSB0aGlzKSB7CiAgICAgICAgZm9yICg7IGkgPCBhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB0aGlzLndvcmRzW2ldID0gYS53b3Jkc1tpXTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzOwogICAgfTsKCiAgICAvLyBBZGQgYG51bWAgdG8gYHRoaXNgCiAgICBCTi5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gYWRkIChudW0pIHsKICAgICAgdmFyIHJlczsKICAgICAgaWYgKG51bS5uZWdhdGl2ZSAhPT0gMCAmJiB0aGlzLm5lZ2F0aXZlID09PSAwKSB7CiAgICAgICAgbnVtLm5lZ2F0aXZlID0gMDsKICAgICAgICByZXMgPSB0aGlzLnN1YihudW0pOwogICAgICAgIG51bS5uZWdhdGl2ZSBePSAxOwogICAgICAgIHJldHVybiByZXM7CiAgICAgIH0gZWxzZSBpZiAobnVtLm5lZ2F0aXZlID09PSAwICYmIHRoaXMubmVnYXRpdmUgIT09IDApIHsKICAgICAgICB0aGlzLm5lZ2F0aXZlID0gMDsKICAgICAgICByZXMgPSBudW0uc3ViKHRoaXMpOwogICAgICAgIHRoaXMubmVnYXRpdmUgPSAxOwogICAgICAgIHJldHVybiByZXM7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmxlbmd0aCA+IG51bS5sZW5ndGgpIHJldHVybiB0aGlzLmNsb25lKCkuaWFkZChudW0pOwoKICAgICAgcmV0dXJuIG51bS5jbG9uZSgpLmlhZGQodGhpcyk7CiAgICB9OwoKICAgIC8vIFN1YnRyYWN0IGBudW1gIGZyb20gYHRoaXNgIGluLXBsYWNlCiAgICBCTi5wcm90b3R5cGUuaXN1YiA9IGZ1bmN0aW9uIGlzdWIgKG51bSkgewogICAgICAvLyB0aGlzIC0gKC1udW0pID0gdGhpcyArIG51bQogICAgICBpZiAobnVtLm5lZ2F0aXZlICE9PSAwKSB7CiAgICAgICAgbnVtLm5lZ2F0aXZlID0gMDsKICAgICAgICB2YXIgciA9IHRoaXMuaWFkZChudW0pOwogICAgICAgIG51bS5uZWdhdGl2ZSA9IDE7CiAgICAgICAgcmV0dXJuIHIuX25vcm1TaWduKCk7CgogICAgICAvLyAtdGhpcyAtIG51bSA9IC0odGhpcyArIG51bSkKICAgICAgfSBlbHNlIGlmICh0aGlzLm5lZ2F0aXZlICE9PSAwKSB7CiAgICAgICAgdGhpcy5uZWdhdGl2ZSA9IDA7CiAgICAgICAgdGhpcy5pYWRkKG51bSk7CiAgICAgICAgdGhpcy5uZWdhdGl2ZSA9IDE7CiAgICAgICAgcmV0dXJuIHRoaXMuX25vcm1TaWduKCk7CiAgICAgIH0KCiAgICAgIC8vIEF0IHRoaXMgcG9pbnQgYm90aCBudW1iZXJzIGFyZSBwb3NpdGl2ZQogICAgICB2YXIgY21wID0gdGhpcy5jbXAobnVtKTsKCiAgICAgIC8vIE9wdGltaXphdGlvbiAtIHplcm9pZnkKICAgICAgaWYgKGNtcCA9PT0gMCkgewogICAgICAgIHRoaXMubmVnYXRpdmUgPSAwOwogICAgICAgIHRoaXMubGVuZ3RoID0gMTsKICAgICAgICB0aGlzLndvcmRzWzBdID0gMDsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfQoKICAgICAgLy8gYSA+IGIKICAgICAgdmFyIGEsIGI7CiAgICAgIGlmIChjbXAgPiAwKSB7CiAgICAgICAgYSA9IHRoaXM7CiAgICAgICAgYiA9IG51bTsKICAgICAgfSBlbHNlIHsKICAgICAgICBhID0gbnVtOwogICAgICAgIGIgPSB0aGlzOwogICAgICB9CgogICAgICB2YXIgY2FycnkgPSAwOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGIubGVuZ3RoOyBpKyspIHsKICAgICAgICByID0gKGEud29yZHNbaV0gfCAwKSAtIChiLndvcmRzW2ldIHwgMCkgKyBjYXJyeTsKICAgICAgICBjYXJyeSA9IHIgPj4gMjY7CiAgICAgICAgdGhpcy53b3Jkc1tpXSA9IHIgJiAweDNmZmZmZmY7CiAgICAgIH0KICAgICAgZm9yICg7IGNhcnJ5ICE9PSAwICYmIGkgPCBhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgciA9IChhLndvcmRzW2ldIHwgMCkgKyBjYXJyeTsKICAgICAgICBjYXJyeSA9IHIgPj4gMjY7CiAgICAgICAgdGhpcy53b3Jkc1tpXSA9IHIgJiAweDNmZmZmZmY7CiAgICAgIH0KCiAgICAgIC8vIENvcHkgcmVzdCBvZiB0aGUgd29yZHMKICAgICAgaWYgKGNhcnJ5ID09PSAwICYmIGkgPCBhLmxlbmd0aCAmJiBhICE9PSB0aGlzKSB7CiAgICAgICAgZm9yICg7IGkgPCBhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB0aGlzLndvcmRzW2ldID0gYS53b3Jkc1tpXTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMubGVuZ3RoID0gTWF0aC5tYXgodGhpcy5sZW5ndGgsIGkpOwoKICAgICAgaWYgKGEgIT09IHRoaXMpIHsKICAgICAgICB0aGlzLm5lZ2F0aXZlID0gMTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMuc3RyaXAoKTsKICAgIH07CgogICAgLy8gU3VidHJhY3QgYG51bWAgZnJvbSBgdGhpc2AKICAgIEJOLnByb3RvdHlwZS5zdWIgPSBmdW5jdGlvbiBzdWIgKG51bSkgewogICAgICByZXR1cm4gdGhpcy5jbG9uZSgpLmlzdWIobnVtKTsKICAgIH07CgogICAgZnVuY3Rpb24gc21hbGxNdWxUbyAoc2VsZiwgbnVtLCBvdXQpIHsKICAgICAgb3V0Lm5lZ2F0aXZlID0gbnVtLm5lZ2F0aXZlIF4gc2VsZi5uZWdhdGl2ZTsKICAgICAgdmFyIGxlbiA9IChzZWxmLmxlbmd0aCArIG51bS5sZW5ndGgpIHwgMDsKICAgICAgb3V0Lmxlbmd0aCA9IGxlbjsKICAgICAgbGVuID0gKGxlbiAtIDEpIHwgMDsKCiAgICAgIC8vIFBlZWwgb25lIGl0ZXJhdGlvbiAoY29tcGlsZXIgY2FuJ3QgZG8gaXQsIGJlY2F1c2Ugb2YgY29kZSBjb21wbGV4aXR5KQogICAgICB2YXIgYSA9IHNlbGYud29yZHNbMF0gfCAwOwogICAgICB2YXIgYiA9IG51bS53b3Jkc1swXSB8IDA7CiAgICAgIHZhciByID0gYSAqIGI7CgogICAgICB2YXIgbG8gPSByICYgMHgzZmZmZmZmOwogICAgICB2YXIgY2FycnkgPSAociAvIDB4NDAwMDAwMCkgfCAwOwogICAgICBvdXQud29yZHNbMF0gPSBsbzsKCiAgICAgIGZvciAodmFyIGsgPSAxOyBrIDwgbGVuOyBrKyspIHsKICAgICAgICAvLyBTdW0gYWxsIHdvcmRzIHdpdGggdGhlIHNhbWUgYGkgKyBqID0ga2AgYW5kIGFjY3VtdWxhdGUgYG5jYXJyeWAsCiAgICAgICAgLy8gbm90ZSB0aGF0IG5jYXJyeSBjb3VsZCBiZSA+PSAweDNmZmZmZmYKICAgICAgICB2YXIgbmNhcnJ5ID0gY2FycnkgPj4+IDI2OwogICAgICAgIHZhciByd29yZCA9IGNhcnJ5ICYgMHgzZmZmZmZmOwogICAgICAgIHZhciBtYXhKID0gTWF0aC5taW4oaywgbnVtLmxlbmd0aCAtIDEpOwogICAgICAgIGZvciAodmFyIGogPSBNYXRoLm1heCgwLCBrIC0gc2VsZi5sZW5ndGggKyAxKTsgaiA8PSBtYXhKOyBqKyspIHsKICAgICAgICAgIHZhciBpID0gKGsgLSBqKSB8IDA7CiAgICAgICAgICBhID0gc2VsZi53b3Jkc1tpXSB8IDA7CiAgICAgICAgICBiID0gbnVtLndvcmRzW2pdIHwgMDsKICAgICAgICAgIHIgPSBhICogYiArIHJ3b3JkOwogICAgICAgICAgbmNhcnJ5ICs9IChyIC8gMHg0MDAwMDAwKSB8IDA7CiAgICAgICAgICByd29yZCA9IHIgJiAweDNmZmZmZmY7CiAgICAgICAgfQogICAgICAgIG91dC53b3Jkc1trXSA9IHJ3b3JkIHwgMDsKICAgICAgICBjYXJyeSA9IG5jYXJyeSB8IDA7CiAgICAgIH0KICAgICAgaWYgKGNhcnJ5ICE9PSAwKSB7CiAgICAgICAgb3V0LndvcmRzW2tdID0gY2FycnkgfCAwOwogICAgICB9IGVsc2UgewogICAgICAgIG91dC5sZW5ndGgtLTsKICAgICAgfQoKICAgICAgcmV0dXJuIG91dC5zdHJpcCgpOwogICAgfQoKICAgIC8vIFRPRE8oaW5kdXRueSk6IGl0IG1heSBiZSByZWFzb25hYmxlIHRvIG9taXQgaXQgZm9yIHVzZXJzIHdobyBkb24ndCBuZWVkCiAgICAvLyB0byB3b3JrIHdpdGggMjU2LWJpdCBudW1iZXJzLCBvdGhlcndpc2UgaXQgZ2l2ZXMgMjAlIGltcHJvdmVtZW50IGZvciAyNTYtYml0CiAgICAvLyBtdWx0aXBsaWNhdGlvbiAobGlrZSBlbGxpcHRpYyBzZWNwMjU2azEpLgogICAgdmFyIGNvbWIxME11bFRvID0gZnVuY3Rpb24gY29tYjEwTXVsVG8gKHNlbGYsIG51bSwgb3V0KSB7CiAgICAgIHZhciBhID0gc2VsZi53b3JkczsKICAgICAgdmFyIGIgPSBudW0ud29yZHM7CiAgICAgIHZhciBvID0gb3V0LndvcmRzOwogICAgICB2YXIgYyA9IDA7CiAgICAgIHZhciBsbzsKICAgICAgdmFyIG1pZDsKICAgICAgdmFyIGhpOwogICAgICB2YXIgYTAgPSBhWzBdIHwgMDsKICAgICAgdmFyIGFsMCA9IGEwICYgMHgxZmZmOwogICAgICB2YXIgYWgwID0gYTAgPj4+IDEzOwogICAgICB2YXIgYTEgPSBhWzFdIHwgMDsKICAgICAgdmFyIGFsMSA9IGExICYgMHgxZmZmOwogICAgICB2YXIgYWgxID0gYTEgPj4+IDEzOwogICAgICB2YXIgYTIgPSBhWzJdIHwgMDsKICAgICAgdmFyIGFsMiA9IGEyICYgMHgxZmZmOwogICAgICB2YXIgYWgyID0gYTIgPj4+IDEzOwogICAgICB2YXIgYTMgPSBhWzNdIHwgMDsKICAgICAgdmFyIGFsMyA9IGEzICYgMHgxZmZmOwogICAgICB2YXIgYWgzID0gYTMgPj4+IDEzOwogICAgICB2YXIgYTQgPSBhWzRdIHwgMDsKICAgICAgdmFyIGFsNCA9IGE0ICYgMHgxZmZmOwogICAgICB2YXIgYWg0ID0gYTQgPj4+IDEzOwogICAgICB2YXIgYTUgPSBhWzVdIHwgMDsKICAgICAgdmFyIGFsNSA9IGE1ICYgMHgxZmZmOwogICAgICB2YXIgYWg1ID0gYTUgPj4+IDEzOwogICAgICB2YXIgYTYgPSBhWzZdIHwgMDsKICAgICAgdmFyIGFsNiA9IGE2ICYgMHgxZmZmOwogICAgICB2YXIgYWg2ID0gYTYgPj4+IDEzOwogICAgICB2YXIgYTcgPSBhWzddIHwgMDsKICAgICAgdmFyIGFsNyA9IGE3ICYgMHgxZmZmOwogICAgICB2YXIgYWg3ID0gYTcgPj4+IDEzOwogICAgICB2YXIgYTggPSBhWzhdIHwgMDsKICAgICAgdmFyIGFsOCA9IGE4ICYgMHgxZmZmOwogICAgICB2YXIgYWg4ID0gYTggPj4+IDEzOwogICAgICB2YXIgYTkgPSBhWzldIHwgMDsKICAgICAgdmFyIGFsOSA9IGE5ICYgMHgxZmZmOwogICAgICB2YXIgYWg5ID0gYTkgPj4+IDEzOwogICAgICB2YXIgYjAgPSBiWzBdIHwgMDsKICAgICAgdmFyIGJsMCA9IGIwICYgMHgxZmZmOwogICAgICB2YXIgYmgwID0gYjAgPj4+IDEzOwogICAgICB2YXIgYjEgPSBiWzFdIHwgMDsKICAgICAgdmFyIGJsMSA9IGIxICYgMHgxZmZmOwogICAgICB2YXIgYmgxID0gYjEgPj4+IDEzOwogICAgICB2YXIgYjIgPSBiWzJdIHwgMDsKICAgICAgdmFyIGJsMiA9IGIyICYgMHgxZmZmOwogICAgICB2YXIgYmgyID0gYjIgPj4+IDEzOwogICAgICB2YXIgYjMgPSBiWzNdIHwgMDsKICAgICAgdmFyIGJsMyA9IGIzICYgMHgxZmZmOwogICAgICB2YXIgYmgzID0gYjMgPj4+IDEzOwogICAgICB2YXIgYjQgPSBiWzRdIHwgMDsKICAgICAgdmFyIGJsNCA9IGI0ICYgMHgxZmZmOwogICAgICB2YXIgYmg0ID0gYjQgPj4+IDEzOwogICAgICB2YXIgYjUgPSBiWzVdIHwgMDsKICAgICAgdmFyIGJsNSA9IGI1ICYgMHgxZmZmOwogICAgICB2YXIgYmg1ID0gYjUgPj4+IDEzOwogICAgICB2YXIgYjYgPSBiWzZdIHwgMDsKICAgICAgdmFyIGJsNiA9IGI2ICYgMHgxZmZmOwogICAgICB2YXIgYmg2ID0gYjYgPj4+IDEzOwogICAgICB2YXIgYjcgPSBiWzddIHwgMDsKICAgICAgdmFyIGJsNyA9IGI3ICYgMHgxZmZmOwogICAgICB2YXIgYmg3ID0gYjcgPj4+IDEzOwogICAgICB2YXIgYjggPSBiWzhdIHwgMDsKICAgICAgdmFyIGJsOCA9IGI4ICYgMHgxZmZmOwogICAgICB2YXIgYmg4ID0gYjggPj4+IDEzOwogICAgICB2YXIgYjkgPSBiWzldIHwgMDsKICAgICAgdmFyIGJsOSA9IGI5ICYgMHgxZmZmOwogICAgICB2YXIgYmg5ID0gYjkgPj4+IDEzOwoKICAgICAgb3V0Lm5lZ2F0aXZlID0gc2VsZi5uZWdhdGl2ZSBeIG51bS5uZWdhdGl2ZTsKICAgICAgb3V0Lmxlbmd0aCA9IDE5OwogICAgICAvKiBrID0gMCAqLwogICAgICBsbyA9IE1hdGguaW11bChhbDAsIGJsMCk7CiAgICAgIG1pZCA9IE1hdGguaW11bChhbDAsIGJoMCk7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgwLCBibDApKSB8IDA7CiAgICAgIGhpID0gTWF0aC5pbXVsKGFoMCwgYmgwKTsKICAgICAgdmFyIHcwID0gKCgoYyArIGxvKSB8IDApICsgKChtaWQgJiAweDFmZmYpIDw8IDEzKSkgfCAwOwogICAgICBjID0gKCgoaGkgKyAobWlkID4+PiAxMykpIHwgMCkgKyAodzAgPj4+IDI2KSkgfCAwOwogICAgICB3MCAmPSAweDNmZmZmZmY7CiAgICAgIC8qIGsgPSAxICovCiAgICAgIGxvID0gTWF0aC5pbXVsKGFsMSwgYmwwKTsKICAgICAgbWlkID0gTWF0aC5pbXVsKGFsMSwgYmgwKTsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDEsIGJsMCkpIHwgMDsKICAgICAgaGkgPSBNYXRoLmltdWwoYWgxLCBiaDApOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDAsIGJsMSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDAsIGJoMSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDAsIGJsMSkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgwLCBiaDEpKSB8IDA7CiAgICAgIHZhciB3MSA9ICgoKGMgKyBsbykgfCAwKSArICgobWlkICYgMHgxZmZmKSA8PCAxMykpIHwgMDsKICAgICAgYyA9ICgoKGhpICsgKG1pZCA+Pj4gMTMpKSB8IDApICsgKHcxID4+PiAyNikpIHwgMDsKICAgICAgdzEgJj0gMHgzZmZmZmZmOwogICAgICAvKiBrID0gMiAqLwogICAgICBsbyA9IE1hdGguaW11bChhbDIsIGJsMCk7CiAgICAgIG1pZCA9IE1hdGguaW11bChhbDIsIGJoMCk7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgyLCBibDApKSB8IDA7CiAgICAgIGhpID0gTWF0aC5pbXVsKGFoMiwgYmgwKTsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwxLCBibDEpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwxLCBiaDEpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgxLCBibDEpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMSwgYmgxKSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDAsIGJsMikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDAsIGJoMikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDAsIGJsMikpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgwLCBiaDIpKSB8IDA7CiAgICAgIHZhciB3MiA9ICgoKGMgKyBsbykgfCAwKSArICgobWlkICYgMHgxZmZmKSA8PCAxMykpIHwgMDsKICAgICAgYyA9ICgoKGhpICsgKG1pZCA+Pj4gMTMpKSB8IDApICsgKHcyID4+PiAyNikpIHwgMDsKICAgICAgdzIgJj0gMHgzZmZmZmZmOwogICAgICAvKiBrID0gMyAqLwogICAgICBsbyA9IE1hdGguaW11bChhbDMsIGJsMCk7CiAgICAgIG1pZCA9IE1hdGguaW11bChhbDMsIGJoMCk7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgzLCBibDApKSB8IDA7CiAgICAgIGhpID0gTWF0aC5pbXVsKGFoMywgYmgwKTsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwyLCBibDEpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwyLCBiaDEpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgyLCBibDEpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMiwgYmgxKSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDEsIGJsMikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDEsIGJoMikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDEsIGJsMikpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgxLCBiaDIpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMCwgYmwzKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMCwgYmgzKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMCwgYmwzKSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDAsIGJoMykpIHwgMDsKICAgICAgdmFyIHczID0gKCgoYyArIGxvKSB8IDApICsgKChtaWQgJiAweDFmZmYpIDw8IDEzKSkgfCAwOwogICAgICBjID0gKCgoaGkgKyAobWlkID4+PiAxMykpIHwgMCkgKyAodzMgPj4+IDI2KSkgfCAwOwogICAgICB3MyAmPSAweDNmZmZmZmY7CiAgICAgIC8qIGsgPSA0ICovCiAgICAgIGxvID0gTWF0aC5pbXVsKGFsNCwgYmwwKTsKICAgICAgbWlkID0gTWF0aC5pbXVsKGFsNCwgYmgwKTsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDQsIGJsMCkpIHwgMDsKICAgICAgaGkgPSBNYXRoLmltdWwoYWg0LCBiaDApOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDMsIGJsMSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDMsIGJoMSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDMsIGJsMSkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgzLCBiaDEpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMiwgYmwyKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMiwgYmgyKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMiwgYmwyKSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDIsIGJoMikpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwxLCBibDMpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwxLCBiaDMpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgxLCBibDMpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMSwgYmgzKSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDAsIGJsNCkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDAsIGJoNCkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDAsIGJsNCkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgwLCBiaDQpKSB8IDA7CiAgICAgIHZhciB3NCA9ICgoKGMgKyBsbykgfCAwKSArICgobWlkICYgMHgxZmZmKSA8PCAxMykpIHwgMDsKICAgICAgYyA9ICgoKGhpICsgKG1pZCA+Pj4gMTMpKSB8IDApICsgKHc0ID4+PiAyNikpIHwgMDsKICAgICAgdzQgJj0gMHgzZmZmZmZmOwogICAgICAvKiBrID0gNSAqLwogICAgICBsbyA9IE1hdGguaW11bChhbDUsIGJsMCk7CiAgICAgIG1pZCA9IE1hdGguaW11bChhbDUsIGJoMCk7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg1LCBibDApKSB8IDA7CiAgICAgIGhpID0gTWF0aC5pbXVsKGFoNSwgYmgwKTsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw0LCBibDEpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw0LCBiaDEpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg0LCBibDEpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNCwgYmgxKSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDMsIGJsMikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDMsIGJoMikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDMsIGJsMikpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgzLCBiaDIpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMiwgYmwzKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMiwgYmgzKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMiwgYmwzKSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDIsIGJoMykpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwxLCBibDQpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwxLCBiaDQpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgxLCBibDQpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMSwgYmg0KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDAsIGJsNSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDAsIGJoNSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDAsIGJsNSkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgwLCBiaDUpKSB8IDA7CiAgICAgIHZhciB3NSA9ICgoKGMgKyBsbykgfCAwKSArICgobWlkICYgMHgxZmZmKSA8PCAxMykpIHwgMDsKICAgICAgYyA9ICgoKGhpICsgKG1pZCA+Pj4gMTMpKSB8IDApICsgKHc1ID4+PiAyNikpIHwgMDsKICAgICAgdzUgJj0gMHgzZmZmZmZmOwogICAgICAvKiBrID0gNiAqLwogICAgICBsbyA9IE1hdGguaW11bChhbDYsIGJsMCk7CiAgICAgIG1pZCA9IE1hdGguaW11bChhbDYsIGJoMCk7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg2LCBibDApKSB8IDA7CiAgICAgIGhpID0gTWF0aC5pbXVsKGFoNiwgYmgwKTsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw1LCBibDEpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw1LCBiaDEpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg1LCBibDEpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNSwgYmgxKSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDQsIGJsMikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDQsIGJoMikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDQsIGJsMikpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg0LCBiaDIpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMywgYmwzKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMywgYmgzKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMywgYmwzKSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDMsIGJoMykpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwyLCBibDQpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwyLCBiaDQpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgyLCBibDQpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMiwgYmg0KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDEsIGJsNSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDEsIGJoNSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDEsIGJsNSkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgxLCBiaDUpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMCwgYmw2KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMCwgYmg2KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMCwgYmw2KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDAsIGJoNikpIHwgMDsKICAgICAgdmFyIHc2ID0gKCgoYyArIGxvKSB8IDApICsgKChtaWQgJiAweDFmZmYpIDw8IDEzKSkgfCAwOwogICAgICBjID0gKCgoaGkgKyAobWlkID4+PiAxMykpIHwgMCkgKyAodzYgPj4+IDI2KSkgfCAwOwogICAgICB3NiAmPSAweDNmZmZmZmY7CiAgICAgIC8qIGsgPSA3ICovCiAgICAgIGxvID0gTWF0aC5pbXVsKGFsNywgYmwwKTsKICAgICAgbWlkID0gTWF0aC5pbXVsKGFsNywgYmgwKTsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDcsIGJsMCkpIHwgMDsKICAgICAgaGkgPSBNYXRoLmltdWwoYWg3LCBiaDApOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDYsIGJsMSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDYsIGJoMSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDYsIGJsMSkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg2LCBiaDEpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNSwgYmwyKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNSwgYmgyKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNSwgYmwyKSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDUsIGJoMikpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw0LCBibDMpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw0LCBiaDMpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg0LCBibDMpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNCwgYmgzKSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDMsIGJsNCkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDMsIGJoNCkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDMsIGJsNCkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgzLCBiaDQpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMiwgYmw1KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMiwgYmg1KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMiwgYmw1KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDIsIGJoNSkpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwxLCBibDYpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwxLCBiaDYpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgxLCBibDYpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMSwgYmg2KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDAsIGJsNykpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDAsIGJoNykpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDAsIGJsNykpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgwLCBiaDcpKSB8IDA7CiAgICAgIHZhciB3NyA9ICgoKGMgKyBsbykgfCAwKSArICgobWlkICYgMHgxZmZmKSA8PCAxMykpIHwgMDsKICAgICAgYyA9ICgoKGhpICsgKG1pZCA+Pj4gMTMpKSB8IDApICsgKHc3ID4+PiAyNikpIHwgMDsKICAgICAgdzcgJj0gMHgzZmZmZmZmOwogICAgICAvKiBrID0gOCAqLwogICAgICBsbyA9IE1hdGguaW11bChhbDgsIGJsMCk7CiAgICAgIG1pZCA9IE1hdGguaW11bChhbDgsIGJoMCk7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg4LCBibDApKSB8IDA7CiAgICAgIGhpID0gTWF0aC5pbXVsKGFoOCwgYmgwKTsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw3LCBibDEpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw3LCBiaDEpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg3LCBibDEpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNywgYmgxKSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDYsIGJsMikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDYsIGJoMikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDYsIGJsMikpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg2LCBiaDIpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNSwgYmwzKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNSwgYmgzKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNSwgYmwzKSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDUsIGJoMykpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw0LCBibDQpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw0LCBiaDQpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg0LCBibDQpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNCwgYmg0KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDMsIGJsNSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDMsIGJoNSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDMsIGJsNSkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgzLCBiaDUpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMiwgYmw2KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMiwgYmg2KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMiwgYmw2KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDIsIGJoNikpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwxLCBibDcpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwxLCBiaDcpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgxLCBibDcpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMSwgYmg3KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDAsIGJsOCkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDAsIGJoOCkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDAsIGJsOCkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgwLCBiaDgpKSB8IDA7CiAgICAgIHZhciB3OCA9ICgoKGMgKyBsbykgfCAwKSArICgobWlkICYgMHgxZmZmKSA8PCAxMykpIHwgMDsKICAgICAgYyA9ICgoKGhpICsgKG1pZCA+Pj4gMTMpKSB8IDApICsgKHc4ID4+PiAyNikpIHwgMDsKICAgICAgdzggJj0gMHgzZmZmZmZmOwogICAgICAvKiBrID0gOSAqLwogICAgICBsbyA9IE1hdGguaW11bChhbDksIGJsMCk7CiAgICAgIG1pZCA9IE1hdGguaW11bChhbDksIGJoMCk7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg5LCBibDApKSB8IDA7CiAgICAgIGhpID0gTWF0aC5pbXVsKGFoOSwgYmgwKTsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw4LCBibDEpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw4LCBiaDEpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg4LCBibDEpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoOCwgYmgxKSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDcsIGJsMikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDcsIGJoMikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDcsIGJsMikpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg3LCBiaDIpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNiwgYmwzKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNiwgYmgzKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNiwgYmwzKSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDYsIGJoMykpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw1LCBibDQpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw1LCBiaDQpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg1LCBibDQpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNSwgYmg0KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDQsIGJsNSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDQsIGJoNSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDQsIGJsNSkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg0LCBiaDUpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMywgYmw2KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMywgYmg2KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMywgYmw2KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDMsIGJoNikpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwyLCBibDcpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwyLCBiaDcpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgyLCBibDcpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMiwgYmg3KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDEsIGJsOCkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDEsIGJoOCkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDEsIGJsOCkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgxLCBiaDgpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMCwgYmw5KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMCwgYmg5KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMCwgYmw5KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDAsIGJoOSkpIHwgMDsKICAgICAgdmFyIHc5ID0gKCgoYyArIGxvKSB8IDApICsgKChtaWQgJiAweDFmZmYpIDw8IDEzKSkgfCAwOwogICAgICBjID0gKCgoaGkgKyAobWlkID4+PiAxMykpIHwgMCkgKyAodzkgPj4+IDI2KSkgfCAwOwogICAgICB3OSAmPSAweDNmZmZmZmY7CiAgICAgIC8qIGsgPSAxMCAqLwogICAgICBsbyA9IE1hdGguaW11bChhbDksIGJsMSk7CiAgICAgIG1pZCA9IE1hdGguaW11bChhbDksIGJoMSk7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg5LCBibDEpKSB8IDA7CiAgICAgIGhpID0gTWF0aC5pbXVsKGFoOSwgYmgxKTsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw4LCBibDIpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw4LCBiaDIpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg4LCBibDIpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoOCwgYmgyKSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDcsIGJsMykpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDcsIGJoMykpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDcsIGJsMykpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg3LCBiaDMpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNiwgYmw0KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNiwgYmg0KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNiwgYmw0KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDYsIGJoNCkpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw1LCBibDUpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw1LCBiaDUpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg1LCBibDUpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNSwgYmg1KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDQsIGJsNikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDQsIGJoNikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDQsIGJsNikpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg0LCBiaDYpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMywgYmw3KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMywgYmg3KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMywgYmw3KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDMsIGJoNykpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwyLCBibDgpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwyLCBiaDgpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgyLCBibDgpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMiwgYmg4KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDEsIGJsOSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDEsIGJoOSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDEsIGJsOSkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgxLCBiaDkpKSB8IDA7CiAgICAgIHZhciB3MTAgPSAoKChjICsgbG8pIHwgMCkgKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpKSB8IDA7CiAgICAgIGMgPSAoKChoaSArIChtaWQgPj4+IDEzKSkgfCAwKSArICh3MTAgPj4+IDI2KSkgfCAwOwogICAgICB3MTAgJj0gMHgzZmZmZmZmOwogICAgICAvKiBrID0gMTEgKi8KICAgICAgbG8gPSBNYXRoLmltdWwoYWw5LCBibDIpOwogICAgICBtaWQgPSBNYXRoLmltdWwoYWw5LCBiaDIpOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoOSwgYmwyKSkgfCAwOwogICAgICBoaSA9IE1hdGguaW11bChhaDksIGJoMik7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsOCwgYmwzKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsOCwgYmgzKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoOCwgYmwzKSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDgsIGJoMykpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw3LCBibDQpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw3LCBiaDQpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg3LCBibDQpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNywgYmg0KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDYsIGJsNSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDYsIGJoNSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDYsIGJsNSkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg2LCBiaDUpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNSwgYmw2KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNSwgYmg2KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNSwgYmw2KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDUsIGJoNikpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw0LCBibDcpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw0LCBiaDcpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg0LCBibDcpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNCwgYmg3KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDMsIGJsOCkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDMsIGJoOCkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDMsIGJsOCkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgzLCBiaDgpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMiwgYmw5KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMiwgYmg5KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMiwgYmw5KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDIsIGJoOSkpIHwgMDsKICAgICAgdmFyIHcxMSA9ICgoKGMgKyBsbykgfCAwKSArICgobWlkICYgMHgxZmZmKSA8PCAxMykpIHwgMDsKICAgICAgYyA9ICgoKGhpICsgKG1pZCA+Pj4gMTMpKSB8IDApICsgKHcxMSA+Pj4gMjYpKSB8IDA7CiAgICAgIHcxMSAmPSAweDNmZmZmZmY7CiAgICAgIC8qIGsgPSAxMiAqLwogICAgICBsbyA9IE1hdGguaW11bChhbDksIGJsMyk7CiAgICAgIG1pZCA9IE1hdGguaW11bChhbDksIGJoMyk7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg5LCBibDMpKSB8IDA7CiAgICAgIGhpID0gTWF0aC5pbXVsKGFoOSwgYmgzKTsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw4LCBibDQpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw4LCBiaDQpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg4LCBibDQpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoOCwgYmg0KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDcsIGJsNSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDcsIGJoNSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDcsIGJsNSkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg3LCBiaDUpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNiwgYmw2KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNiwgYmg2KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNiwgYmw2KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDYsIGJoNikpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw1LCBibDcpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw1LCBiaDcpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg1LCBibDcpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNSwgYmg3KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDQsIGJsOCkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDQsIGJoOCkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDQsIGJsOCkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg0LCBiaDgpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMywgYmw5KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMywgYmg5KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMywgYmw5KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDMsIGJoOSkpIHwgMDsKICAgICAgdmFyIHcxMiA9ICgoKGMgKyBsbykgfCAwKSArICgobWlkICYgMHgxZmZmKSA8PCAxMykpIHwgMDsKICAgICAgYyA9ICgoKGhpICsgKG1pZCA+Pj4gMTMpKSB8IDApICsgKHcxMiA+Pj4gMjYpKSB8IDA7CiAgICAgIHcxMiAmPSAweDNmZmZmZmY7CiAgICAgIC8qIGsgPSAxMyAqLwogICAgICBsbyA9IE1hdGguaW11bChhbDksIGJsNCk7CiAgICAgIG1pZCA9IE1hdGguaW11bChhbDksIGJoNCk7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg5LCBibDQpKSB8IDA7CiAgICAgIGhpID0gTWF0aC5pbXVsKGFoOSwgYmg0KTsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw4LCBibDUpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw4LCBiaDUpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg4LCBibDUpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoOCwgYmg1KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDcsIGJsNikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDcsIGJoNikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDcsIGJsNikpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg3LCBiaDYpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNiwgYmw3KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNiwgYmg3KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNiwgYmw3KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDYsIGJoNykpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw1LCBibDgpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw1LCBiaDgpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg1LCBibDgpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNSwgYmg4KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDQsIGJsOSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDQsIGJoOSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDQsIGJsOSkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg0LCBiaDkpKSB8IDA7CiAgICAgIHZhciB3MTMgPSAoKChjICsgbG8pIHwgMCkgKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpKSB8IDA7CiAgICAgIGMgPSAoKChoaSArIChtaWQgPj4+IDEzKSkgfCAwKSArICh3MTMgPj4+IDI2KSkgfCAwOwogICAgICB3MTMgJj0gMHgzZmZmZmZmOwogICAgICAvKiBrID0gMTQgKi8KICAgICAgbG8gPSBNYXRoLmltdWwoYWw5LCBibDUpOwogICAgICBtaWQgPSBNYXRoLmltdWwoYWw5LCBiaDUpOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoOSwgYmw1KSkgfCAwOwogICAgICBoaSA9IE1hdGguaW11bChhaDksIGJoNSk7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsOCwgYmw2KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsOCwgYmg2KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoOCwgYmw2KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDgsIGJoNikpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw3LCBibDcpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw3LCBiaDcpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg3LCBibDcpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNywgYmg3KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDYsIGJsOCkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDYsIGJoOCkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDYsIGJsOCkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg2LCBiaDgpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNSwgYmw5KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNSwgYmg5KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNSwgYmw5KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDUsIGJoOSkpIHwgMDsKICAgICAgdmFyIHcxNCA9ICgoKGMgKyBsbykgfCAwKSArICgobWlkICYgMHgxZmZmKSA8PCAxMykpIHwgMDsKICAgICAgYyA9ICgoKGhpICsgKG1pZCA+Pj4gMTMpKSB8IDApICsgKHcxNCA+Pj4gMjYpKSB8IDA7CiAgICAgIHcxNCAmPSAweDNmZmZmZmY7CiAgICAgIC8qIGsgPSAxNSAqLwogICAgICBsbyA9IE1hdGguaW11bChhbDksIGJsNik7CiAgICAgIG1pZCA9IE1hdGguaW11bChhbDksIGJoNik7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg5LCBibDYpKSB8IDA7CiAgICAgIGhpID0gTWF0aC5pbXVsKGFoOSwgYmg2KTsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw4LCBibDcpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw4LCBiaDcpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg4LCBibDcpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoOCwgYmg3KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDcsIGJsOCkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDcsIGJoOCkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDcsIGJsOCkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg3LCBiaDgpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNiwgYmw5KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNiwgYmg5KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNiwgYmw5KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDYsIGJoOSkpIHwgMDsKICAgICAgdmFyIHcxNSA9ICgoKGMgKyBsbykgfCAwKSArICgobWlkICYgMHgxZmZmKSA8PCAxMykpIHwgMDsKICAgICAgYyA9ICgoKGhpICsgKG1pZCA+Pj4gMTMpKSB8IDApICsgKHcxNSA+Pj4gMjYpKSB8IDA7CiAgICAgIHcxNSAmPSAweDNmZmZmZmY7CiAgICAgIC8qIGsgPSAxNiAqLwogICAgICBsbyA9IE1hdGguaW11bChhbDksIGJsNyk7CiAgICAgIG1pZCA9IE1hdGguaW11bChhbDksIGJoNyk7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg5LCBibDcpKSB8IDA7CiAgICAgIGhpID0gTWF0aC5pbXVsKGFoOSwgYmg3KTsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw4LCBibDgpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw4LCBiaDgpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg4LCBibDgpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoOCwgYmg4KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDcsIGJsOSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDcsIGJoOSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDcsIGJsOSkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg3LCBiaDkpKSB8IDA7CiAgICAgIHZhciB3MTYgPSAoKChjICsgbG8pIHwgMCkgKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpKSB8IDA7CiAgICAgIGMgPSAoKChoaSArIChtaWQgPj4+IDEzKSkgfCAwKSArICh3MTYgPj4+IDI2KSkgfCAwOwogICAgICB3MTYgJj0gMHgzZmZmZmZmOwogICAgICAvKiBrID0gMTcgKi8KICAgICAgbG8gPSBNYXRoLmltdWwoYWw5LCBibDgpOwogICAgICBtaWQgPSBNYXRoLmltdWwoYWw5LCBiaDgpOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoOSwgYmw4KSkgfCAwOwogICAgICBoaSA9IE1hdGguaW11bChhaDksIGJoOCk7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsOCwgYmw5KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsOCwgYmg5KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoOCwgYmw5KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDgsIGJoOSkpIHwgMDsKICAgICAgdmFyIHcxNyA9ICgoKGMgKyBsbykgfCAwKSArICgobWlkICYgMHgxZmZmKSA8PCAxMykpIHwgMDsKICAgICAgYyA9ICgoKGhpICsgKG1pZCA+Pj4gMTMpKSB8IDApICsgKHcxNyA+Pj4gMjYpKSB8IDA7CiAgICAgIHcxNyAmPSAweDNmZmZmZmY7CiAgICAgIC8qIGsgPSAxOCAqLwogICAgICBsbyA9IE1hdGguaW11bChhbDksIGJsOSk7CiAgICAgIG1pZCA9IE1hdGguaW11bChhbDksIGJoOSk7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg5LCBibDkpKSB8IDA7CiAgICAgIGhpID0gTWF0aC5pbXVsKGFoOSwgYmg5KTsKICAgICAgdmFyIHcxOCA9ICgoKGMgKyBsbykgfCAwKSArICgobWlkICYgMHgxZmZmKSA8PCAxMykpIHwgMDsKICAgICAgYyA9ICgoKGhpICsgKG1pZCA+Pj4gMTMpKSB8IDApICsgKHcxOCA+Pj4gMjYpKSB8IDA7CiAgICAgIHcxOCAmPSAweDNmZmZmZmY7CiAgICAgIG9bMF0gPSB3MDsKICAgICAgb1sxXSA9IHcxOwogICAgICBvWzJdID0gdzI7CiAgICAgIG9bM10gPSB3MzsKICAgICAgb1s0XSA9IHc0OwogICAgICBvWzVdID0gdzU7CiAgICAgIG9bNl0gPSB3NjsKICAgICAgb1s3XSA9IHc3OwogICAgICBvWzhdID0gdzg7CiAgICAgIG9bOV0gPSB3OTsKICAgICAgb1sxMF0gPSB3MTA7CiAgICAgIG9bMTFdID0gdzExOwogICAgICBvWzEyXSA9IHcxMjsKICAgICAgb1sxM10gPSB3MTM7CiAgICAgIG9bMTRdID0gdzE0OwogICAgICBvWzE1XSA9IHcxNTsKICAgICAgb1sxNl0gPSB3MTY7CiAgICAgIG9bMTddID0gdzE3OwogICAgICBvWzE4XSA9IHcxODsKICAgICAgaWYgKGMgIT09IDApIHsKICAgICAgICBvWzE5XSA9IGM7CiAgICAgICAgb3V0Lmxlbmd0aCsrOwogICAgICB9CiAgICAgIHJldHVybiBvdXQ7CiAgICB9OwoKICAgIC8vIFBvbHlmaWxsIGNvbWIKICAgIGlmICghTWF0aC5pbXVsKSB7CiAgICAgIGNvbWIxME11bFRvID0gc21hbGxNdWxUbzsKICAgIH0KCiAgICBmdW5jdGlvbiBiaWdNdWxUbyAoc2VsZiwgbnVtLCBvdXQpIHsKICAgICAgb3V0Lm5lZ2F0aXZlID0gbnVtLm5lZ2F0aXZlIF4gc2VsZi5uZWdhdGl2ZTsKICAgICAgb3V0Lmxlbmd0aCA9IHNlbGYubGVuZ3RoICsgbnVtLmxlbmd0aDsKCiAgICAgIHZhciBjYXJyeSA9IDA7CiAgICAgIHZhciBobmNhcnJ5ID0gMDsKICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBvdXQubGVuZ3RoIC0gMTsgaysrKSB7CiAgICAgICAgLy8gU3VtIGFsbCB3b3JkcyB3aXRoIHRoZSBzYW1lIGBpICsgaiA9IGtgIGFuZCBhY2N1bXVsYXRlIGBuY2FycnlgLAogICAgICAgIC8vIG5vdGUgdGhhdCBuY2FycnkgY291bGQgYmUgPj0gMHgzZmZmZmZmCiAgICAgICAgdmFyIG5jYXJyeSA9IGhuY2Fycnk7CiAgICAgICAgaG5jYXJyeSA9IDA7CiAgICAgICAgdmFyIHJ3b3JkID0gY2FycnkgJiAweDNmZmZmZmY7CiAgICAgICAgdmFyIG1heEogPSBNYXRoLm1pbihrLCBudW0ubGVuZ3RoIC0gMSk7CiAgICAgICAgZm9yICh2YXIgaiA9IE1hdGgubWF4KDAsIGsgLSBzZWxmLmxlbmd0aCArIDEpOyBqIDw9IG1heEo7IGorKykgewogICAgICAgICAgdmFyIGkgPSBrIC0gajsKICAgICAgICAgIHZhciBhID0gc2VsZi53b3Jkc1tpXSB8IDA7CiAgICAgICAgICB2YXIgYiA9IG51bS53b3Jkc1tqXSB8IDA7CiAgICAgICAgICB2YXIgciA9IGEgKiBiOwoKICAgICAgICAgIHZhciBsbyA9IHIgJiAweDNmZmZmZmY7CiAgICAgICAgICBuY2FycnkgPSAobmNhcnJ5ICsgKChyIC8gMHg0MDAwMDAwKSB8IDApKSB8IDA7CiAgICAgICAgICBsbyA9IChsbyArIHJ3b3JkKSB8IDA7CiAgICAgICAgICByd29yZCA9IGxvICYgMHgzZmZmZmZmOwogICAgICAgICAgbmNhcnJ5ID0gKG5jYXJyeSArIChsbyA+Pj4gMjYpKSB8IDA7CgogICAgICAgICAgaG5jYXJyeSArPSBuY2FycnkgPj4+IDI2OwogICAgICAgICAgbmNhcnJ5ICY9IDB4M2ZmZmZmZjsKICAgICAgICB9CiAgICAgICAgb3V0LndvcmRzW2tdID0gcndvcmQ7CiAgICAgICAgY2FycnkgPSBuY2Fycnk7CiAgICAgICAgbmNhcnJ5ID0gaG5jYXJyeTsKICAgICAgfQogICAgICBpZiAoY2FycnkgIT09IDApIHsKICAgICAgICBvdXQud29yZHNba10gPSBjYXJyeTsKICAgICAgfSBlbHNlIHsKICAgICAgICBvdXQubGVuZ3RoLS07CiAgICAgIH0KCiAgICAgIHJldHVybiBvdXQuc3RyaXAoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBqdW1ib011bFRvIChzZWxmLCBudW0sIG91dCkgewogICAgICB2YXIgZmZ0bSA9IG5ldyBGRlRNKCk7CiAgICAgIHJldHVybiBmZnRtLm11bHAoc2VsZiwgbnVtLCBvdXQpOwogICAgfQoKICAgIEJOLnByb3RvdHlwZS5tdWxUbyA9IGZ1bmN0aW9uIG11bFRvIChudW0sIG91dCkgewogICAgICB2YXIgcmVzOwogICAgICB2YXIgbGVuID0gdGhpcy5sZW5ndGggKyBudW0ubGVuZ3RoOwogICAgICBpZiAodGhpcy5sZW5ndGggPT09IDEwICYmIG51bS5sZW5ndGggPT09IDEwKSB7CiAgICAgICAgcmVzID0gY29tYjEwTXVsVG8odGhpcywgbnVtLCBvdXQpOwogICAgICB9IGVsc2UgaWYgKGxlbiA8IDYzKSB7CiAgICAgICAgcmVzID0gc21hbGxNdWxUbyh0aGlzLCBudW0sIG91dCk7CiAgICAgIH0gZWxzZSBpZiAobGVuIDwgMTAyNCkgewogICAgICAgIHJlcyA9IGJpZ011bFRvKHRoaXMsIG51bSwgb3V0KTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXMgPSBqdW1ib011bFRvKHRoaXMsIG51bSwgb3V0KTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlczsKICAgIH07CgogICAgLy8gQ29vbGV5LVR1a2V5IGFsZ29yaXRobSBmb3IgRkZUCiAgICAvLyBzbGlnaHRseSByZXZpc2l0ZWQgdG8gcmVseSBvbiBsb29waW5nIGluc3RlYWQgb2YgcmVjdXJzaW9uCgogICAgZnVuY3Rpb24gRkZUTSAoeCwgeSkgewogICAgICB0aGlzLnggPSB4OwogICAgICB0aGlzLnkgPSB5OwogICAgfQoKICAgIEZGVE0ucHJvdG90eXBlLm1ha2VSQlQgPSBmdW5jdGlvbiBtYWtlUkJUIChOKSB7CiAgICAgIHZhciB0ID0gbmV3IEFycmF5KE4pOwogICAgICB2YXIgbCA9IEJOLnByb3RvdHlwZS5fY291bnRCaXRzKE4pIC0gMTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBOOyBpKyspIHsKICAgICAgICB0W2ldID0gdGhpcy5yZXZCaW4oaSwgbCwgTik7CiAgICAgIH0KCiAgICAgIHJldHVybiB0OwogICAgfTsKCiAgICAvLyBSZXR1cm5zIGJpbmFyeS1yZXZlcnNlZCByZXByZXNlbnRhdGlvbiBvZiBgeGAKICAgIEZGVE0ucHJvdG90eXBlLnJldkJpbiA9IGZ1bmN0aW9uIHJldkJpbiAoeCwgbCwgTikgewogICAgICBpZiAoeCA9PT0gMCB8fCB4ID09PSBOIC0gMSkgcmV0dXJuIHg7CgogICAgICB2YXIgcmIgPSAwOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGw7IGkrKykgewogICAgICAgIHJiIHw9ICh4ICYgMSkgPDwgKGwgLSBpIC0gMSk7CiAgICAgICAgeCA+Pj0gMTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJiOwogICAgfTsKCiAgICAvLyBQZXJmb3JtcyAidHdlZWRsaW5nIiBwaGFzZSwgdGhlcmVmb3JlICdlbXVsYXRpbmcnCiAgICAvLyBiZWhhdmlvdXIgb2YgdGhlIHJlY3Vyc2l2ZSBhbGdvcml0aG0KICAgIEZGVE0ucHJvdG90eXBlLnBlcm11dGUgPSBmdW5jdGlvbiBwZXJtdXRlIChyYnQsIHJ3cywgaXdzLCBydHdzLCBpdHdzLCBOKSB7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgTjsgaSsrKSB7CiAgICAgICAgcnR3c1tpXSA9IHJ3c1tyYnRbaV1dOwogICAgICAgIGl0d3NbaV0gPSBpd3NbcmJ0W2ldXTsKICAgICAgfQogICAgfTsKCiAgICBGRlRNLnByb3RvdHlwZS50cmFuc2Zvcm0gPSBmdW5jdGlvbiB0cmFuc2Zvcm0gKHJ3cywgaXdzLCBydHdzLCBpdHdzLCBOLCByYnQpIHsKICAgICAgdGhpcy5wZXJtdXRlKHJidCwgcndzLCBpd3MsIHJ0d3MsIGl0d3MsIE4pOwoKICAgICAgZm9yICh2YXIgcyA9IDE7IHMgPCBOOyBzIDw8PSAxKSB7CiAgICAgICAgdmFyIGwgPSBzIDw8IDE7CgogICAgICAgIHZhciBydHdkZiA9IE1hdGguY29zKDIgKiBNYXRoLlBJIC8gbCk7CiAgICAgICAgdmFyIGl0d2RmID0gTWF0aC5zaW4oMiAqIE1hdGguUEkgLyBsKTsKCiAgICAgICAgZm9yICh2YXIgcCA9IDA7IHAgPCBOOyBwICs9IGwpIHsKICAgICAgICAgIHZhciBydHdkZl8gPSBydHdkZjsKICAgICAgICAgIHZhciBpdHdkZl8gPSBpdHdkZjsKCiAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHM7IGorKykgewogICAgICAgICAgICB2YXIgcmUgPSBydHdzW3AgKyBqXTsKICAgICAgICAgICAgdmFyIGllID0gaXR3c1twICsgal07CgogICAgICAgICAgICB2YXIgcm8gPSBydHdzW3AgKyBqICsgc107CiAgICAgICAgICAgIHZhciBpbyA9IGl0d3NbcCArIGogKyBzXTsKCiAgICAgICAgICAgIHZhciByeCA9IHJ0d2RmXyAqIHJvIC0gaXR3ZGZfICogaW87CgogICAgICAgICAgICBpbyA9IHJ0d2RmXyAqIGlvICsgaXR3ZGZfICogcm87CiAgICAgICAgICAgIHJvID0gcng7CgogICAgICAgICAgICBydHdzW3AgKyBqXSA9IHJlICsgcm87CiAgICAgICAgICAgIGl0d3NbcCArIGpdID0gaWUgKyBpbzsKCiAgICAgICAgICAgIHJ0d3NbcCArIGogKyBzXSA9IHJlIC0gcm87CiAgICAgICAgICAgIGl0d3NbcCArIGogKyBzXSA9IGllIC0gaW87CgogICAgICAgICAgICAvKiBqc2hpbnQgbWF4ZGVwdGggOiBmYWxzZSAqLwogICAgICAgICAgICBpZiAoaiAhPT0gbCkgewogICAgICAgICAgICAgIHJ4ID0gcnR3ZGYgKiBydHdkZl8gLSBpdHdkZiAqIGl0d2RmXzsKCiAgICAgICAgICAgICAgaXR3ZGZfID0gcnR3ZGYgKiBpdHdkZl8gKyBpdHdkZiAqIHJ0d2RmXzsKICAgICAgICAgICAgICBydHdkZl8gPSByeDsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfTsKCiAgICBGRlRNLnByb3RvdHlwZS5ndWVzc0xlbjEzYiA9IGZ1bmN0aW9uIGd1ZXNzTGVuMTNiIChuLCBtKSB7CiAgICAgIHZhciBOID0gTWF0aC5tYXgobSwgbikgfCAxOwogICAgICB2YXIgb2RkID0gTiAmIDE7CiAgICAgIHZhciBpID0gMDsKICAgICAgZm9yIChOID0gTiAvIDIgfCAwOyBOOyBOID0gTiA+Pj4gMSkgewogICAgICAgIGkrKzsKICAgICAgfQoKICAgICAgcmV0dXJuIDEgPDwgaSArIDEgKyBvZGQ7CiAgICB9OwoKICAgIEZGVE0ucHJvdG90eXBlLmNvbmp1Z2F0ZSA9IGZ1bmN0aW9uIGNvbmp1Z2F0ZSAocndzLCBpd3MsIE4pIHsKICAgICAgaWYgKE4gPD0gMSkgcmV0dXJuOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBOIC8gMjsgaSsrKSB7CiAgICAgICAgdmFyIHQgPSByd3NbaV07CgogICAgICAgIHJ3c1tpXSA9IHJ3c1tOIC0gaSAtIDFdOwogICAgICAgIHJ3c1tOIC0gaSAtIDFdID0gdDsKCiAgICAgICAgdCA9IGl3c1tpXTsKCiAgICAgICAgaXdzW2ldID0gLWl3c1tOIC0gaSAtIDFdOwogICAgICAgIGl3c1tOIC0gaSAtIDFdID0gLXQ7CiAgICAgIH0KICAgIH07CgogICAgRkZUTS5wcm90b3R5cGUubm9ybWFsaXplMTNiID0gZnVuY3Rpb24gbm9ybWFsaXplMTNiICh3cywgTikgewogICAgICB2YXIgY2FycnkgPSAwOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IE4gLyAyOyBpKyspIHsKICAgICAgICB2YXIgdyA9IE1hdGgucm91bmQod3NbMiAqIGkgKyAxXSAvIE4pICogMHgyMDAwICsKICAgICAgICAgIE1hdGgucm91bmQod3NbMiAqIGldIC8gTikgKwogICAgICAgICAgY2Fycnk7CgogICAgICAgIHdzW2ldID0gdyAmIDB4M2ZmZmZmZjsKCiAgICAgICAgaWYgKHcgPCAweDQwMDAwMDApIHsKICAgICAgICAgIGNhcnJ5ID0gMDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY2FycnkgPSB3IC8gMHg0MDAwMDAwIHwgMDsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiB3czsKICAgIH07CgogICAgRkZUTS5wcm90b3R5cGUuY29udmVydDEzYiA9IGZ1bmN0aW9uIGNvbnZlcnQxM2IgKHdzLCBsZW4sIHJ3cywgTikgewogICAgICB2YXIgY2FycnkgPSAwOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgY2FycnkgPSBjYXJyeSArICh3c1tpXSB8IDApOwoKICAgICAgICByd3NbMiAqIGldID0gY2FycnkgJiAweDFmZmY7IGNhcnJ5ID0gY2FycnkgPj4+IDEzOwogICAgICAgIHJ3c1syICogaSArIDFdID0gY2FycnkgJiAweDFmZmY7IGNhcnJ5ID0gY2FycnkgPj4+IDEzOwogICAgICB9CgogICAgICAvLyBQYWQgd2l0aCB6ZXJvZXMKICAgICAgZm9yIChpID0gMiAqIGxlbjsgaSA8IE47ICsraSkgewogICAgICAgIHJ3c1tpXSA9IDA7CiAgICAgIH0KCiAgICAgIGFzc2VydChjYXJyeSA9PT0gMCk7CiAgICAgIGFzc2VydCgoY2FycnkgJiB+MHgxZmZmKSA9PT0gMCk7CiAgICB9OwoKICAgIEZGVE0ucHJvdG90eXBlLnN0dWIgPSBmdW5jdGlvbiBzdHViIChOKSB7CiAgICAgIHZhciBwaCA9IG5ldyBBcnJheShOKTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBOOyBpKyspIHsKICAgICAgICBwaFtpXSA9IDA7CiAgICAgIH0KCiAgICAgIHJldHVybiBwaDsKICAgIH07CgogICAgRkZUTS5wcm90b3R5cGUubXVscCA9IGZ1bmN0aW9uIG11bHAgKHgsIHksIG91dCkgewogICAgICB2YXIgTiA9IDIgKiB0aGlzLmd1ZXNzTGVuMTNiKHgubGVuZ3RoLCB5Lmxlbmd0aCk7CgogICAgICB2YXIgcmJ0ID0gdGhpcy5tYWtlUkJUKE4pOwoKICAgICAgdmFyIF8gPSB0aGlzLnN0dWIoTik7CgogICAgICB2YXIgcndzID0gbmV3IEFycmF5KE4pOwogICAgICB2YXIgcndzdCA9IG5ldyBBcnJheShOKTsKICAgICAgdmFyIGl3c3QgPSBuZXcgQXJyYXkoTik7CgogICAgICB2YXIgbnJ3cyA9IG5ldyBBcnJheShOKTsKICAgICAgdmFyIG5yd3N0ID0gbmV3IEFycmF5KE4pOwogICAgICB2YXIgbml3c3QgPSBuZXcgQXJyYXkoTik7CgogICAgICB2YXIgcm13cyA9IG91dC53b3JkczsKICAgICAgcm13cy5sZW5ndGggPSBOOwoKICAgICAgdGhpcy5jb252ZXJ0MTNiKHgud29yZHMsIHgubGVuZ3RoLCByd3MsIE4pOwogICAgICB0aGlzLmNvbnZlcnQxM2IoeS53b3JkcywgeS5sZW5ndGgsIG5yd3MsIE4pOwoKICAgICAgdGhpcy50cmFuc2Zvcm0ocndzLCBfLCByd3N0LCBpd3N0LCBOLCByYnQpOwogICAgICB0aGlzLnRyYW5zZm9ybShucndzLCBfLCBucndzdCwgbml3c3QsIE4sIHJidCk7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IE47IGkrKykgewogICAgICAgIHZhciByeCA9IHJ3c3RbaV0gKiBucndzdFtpXSAtIGl3c3RbaV0gKiBuaXdzdFtpXTsKICAgICAgICBpd3N0W2ldID0gcndzdFtpXSAqIG5pd3N0W2ldICsgaXdzdFtpXSAqIG5yd3N0W2ldOwogICAgICAgIHJ3c3RbaV0gPSByeDsKICAgICAgfQoKICAgICAgdGhpcy5jb25qdWdhdGUocndzdCwgaXdzdCwgTik7CiAgICAgIHRoaXMudHJhbnNmb3JtKHJ3c3QsIGl3c3QsIHJtd3MsIF8sIE4sIHJidCk7CiAgICAgIHRoaXMuY29uanVnYXRlKHJtd3MsIF8sIE4pOwogICAgICB0aGlzLm5vcm1hbGl6ZTEzYihybXdzLCBOKTsKCiAgICAgIG91dC5uZWdhdGl2ZSA9IHgubmVnYXRpdmUgXiB5Lm5lZ2F0aXZlOwogICAgICBvdXQubGVuZ3RoID0geC5sZW5ndGggKyB5Lmxlbmd0aDsKICAgICAgcmV0dXJuIG91dC5zdHJpcCgpOwogICAgfTsKCiAgICAvLyBNdWx0aXBseSBgdGhpc2AgYnkgYG51bWAKICAgIEJOLnByb3RvdHlwZS5tdWwgPSBmdW5jdGlvbiBtdWwgKG51bSkgewogICAgICB2YXIgb3V0ID0gbmV3IEJOKG51bGwpOwogICAgICBvdXQud29yZHMgPSBuZXcgQXJyYXkodGhpcy5sZW5ndGggKyBudW0ubGVuZ3RoKTsKICAgICAgcmV0dXJuIHRoaXMubXVsVG8obnVtLCBvdXQpOwogICAgfTsKCiAgICAvLyBNdWx0aXBseSBlbXBsb3lpbmcgRkZUCiAgICBCTi5wcm90b3R5cGUubXVsZiA9IGZ1bmN0aW9uIG11bGYgKG51bSkgewogICAgICB2YXIgb3V0ID0gbmV3IEJOKG51bGwpOwogICAgICBvdXQud29yZHMgPSBuZXcgQXJyYXkodGhpcy5sZW5ndGggKyBudW0ubGVuZ3RoKTsKICAgICAgcmV0dXJuIGp1bWJvTXVsVG8odGhpcywgbnVtLCBvdXQpOwogICAgfTsKCiAgICAvLyBJbi1wbGFjZSBNdWx0aXBsaWNhdGlvbgogICAgQk4ucHJvdG90eXBlLmltdWwgPSBmdW5jdGlvbiBpbXVsIChudW0pIHsKICAgICAgcmV0dXJuIHRoaXMuY2xvbmUoKS5tdWxUbyhudW0sIHRoaXMpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuaW11bG4gPSBmdW5jdGlvbiBpbXVsbiAobnVtKSB7CiAgICAgIGFzc2VydCh0eXBlb2YgbnVtID09PSAnbnVtYmVyJyk7CiAgICAgIGFzc2VydChudW0gPCAweDQwMDAwMDApOwoKICAgICAgLy8gQ2FycnkKICAgICAgdmFyIGNhcnJ5ID0gMDsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIHcgPSAodGhpcy53b3Jkc1tpXSB8IDApICogbnVtOwogICAgICAgIHZhciBsbyA9ICh3ICYgMHgzZmZmZmZmKSArIChjYXJyeSAmIDB4M2ZmZmZmZik7CiAgICAgICAgY2FycnkgPj49IDI2OwogICAgICAgIGNhcnJ5ICs9ICh3IC8gMHg0MDAwMDAwKSB8IDA7CiAgICAgICAgLy8gTk9URTogbG8gaXMgMjdiaXQgbWF4aW11bQogICAgICAgIGNhcnJ5ICs9IGxvID4+PiAyNjsKICAgICAgICB0aGlzLndvcmRzW2ldID0gbG8gJiAweDNmZmZmZmY7CiAgICAgIH0KCiAgICAgIGlmIChjYXJyeSAhPT0gMCkgewogICAgICAgIHRoaXMud29yZHNbaV0gPSBjYXJyeTsKICAgICAgICB0aGlzLmxlbmd0aCsrOwogICAgICB9CgogICAgICByZXR1cm4gdGhpczsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLm11bG4gPSBmdW5jdGlvbiBtdWxuIChudW0pIHsKICAgICAgcmV0dXJuIHRoaXMuY2xvbmUoKS5pbXVsbihudW0pOwogICAgfTsKCiAgICAvLyBgdGhpc2AgKiBgdGhpc2AKICAgIEJOLnByb3RvdHlwZS5zcXIgPSBmdW5jdGlvbiBzcXIgKCkgewogICAgICByZXR1cm4gdGhpcy5tdWwodGhpcyk7CiAgICB9OwoKICAgIC8vIGB0aGlzYCAqIGB0aGlzYCBpbi1wbGFjZQogICAgQk4ucHJvdG90eXBlLmlzcXIgPSBmdW5jdGlvbiBpc3FyICgpIHsKICAgICAgcmV0dXJuIHRoaXMuaW11bCh0aGlzLmNsb25lKCkpOwogICAgfTsKCiAgICAvLyBNYXRoLnBvdyhgdGhpc2AsIGBudW1gKQogICAgQk4ucHJvdG90eXBlLnBvdyA9IGZ1bmN0aW9uIHBvdyAobnVtKSB7CiAgICAgIHZhciB3ID0gdG9CaXRBcnJheShudW0pOwogICAgICBpZiAody5sZW5ndGggPT09IDApIHJldHVybiBuZXcgQk4oMSk7CgogICAgICAvLyBTa2lwIGxlYWRpbmcgemVyb2VzCiAgICAgIHZhciByZXMgPSB0aGlzOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHcubGVuZ3RoOyBpKyssIHJlcyA9IHJlcy5zcXIoKSkgewogICAgICAgIGlmICh3W2ldICE9PSAwKSBicmVhazsKICAgICAgfQoKICAgICAgaWYgKCsraSA8IHcubGVuZ3RoKSB7CiAgICAgICAgZm9yICh2YXIgcSA9IHJlcy5zcXIoKTsgaSA8IHcubGVuZ3RoOyBpKyssIHEgPSBxLnNxcigpKSB7CiAgICAgICAgICBpZiAod1tpXSA9PT0gMCkgY29udGludWU7CgogICAgICAgICAgcmVzID0gcmVzLm11bChxKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiByZXM7CiAgICB9OwoKICAgIC8vIFNoaWZ0LWxlZnQgaW4tcGxhY2UKICAgIEJOLnByb3RvdHlwZS5pdXNobG4gPSBmdW5jdGlvbiBpdXNobG4gKGJpdHMpIHsKICAgICAgYXNzZXJ0KHR5cGVvZiBiaXRzID09PSAnbnVtYmVyJyAmJiBiaXRzID49IDApOwogICAgICB2YXIgciA9IGJpdHMgJSAyNjsKICAgICAgdmFyIHMgPSAoYml0cyAtIHIpIC8gMjY7CiAgICAgIHZhciBjYXJyeU1hc2sgPSAoMHgzZmZmZmZmID4+PiAoMjYgLSByKSkgPDwgKDI2IC0gcik7CiAgICAgIHZhciBpOwoKICAgICAgaWYgKHIgIT09IDApIHsKICAgICAgICB2YXIgY2FycnkgPSAwOwoKICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgdmFyIG5ld0NhcnJ5ID0gdGhpcy53b3Jkc1tpXSAmIGNhcnJ5TWFzazsKICAgICAgICAgIHZhciBjID0gKCh0aGlzLndvcmRzW2ldIHwgMCkgLSBuZXdDYXJyeSkgPDwgcjsKICAgICAgICAgIHRoaXMud29yZHNbaV0gPSBjIHwgY2Fycnk7CiAgICAgICAgICBjYXJyeSA9IG5ld0NhcnJ5ID4+PiAoMjYgLSByKTsKICAgICAgICB9CgogICAgICAgIGlmIChjYXJyeSkgewogICAgICAgICAgdGhpcy53b3Jkc1tpXSA9IGNhcnJ5OwogICAgICAgICAgdGhpcy5sZW5ndGgrKzsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChzICE9PSAwKSB7CiAgICAgICAgZm9yIChpID0gdGhpcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgICAgICAgdGhpcy53b3Jkc1tpICsgc10gPSB0aGlzLndvcmRzW2ldOwogICAgICAgIH0KCiAgICAgICAgZm9yIChpID0gMDsgaSA8IHM7IGkrKykgewogICAgICAgICAgdGhpcy53b3Jkc1tpXSA9IDA7CiAgICAgICAgfQoKICAgICAgICB0aGlzLmxlbmd0aCArPSBzOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5zdHJpcCgpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuaXNobG4gPSBmdW5jdGlvbiBpc2hsbiAoYml0cykgewogICAgICAvLyBUT0RPKGluZHV0bnkpOiBpbXBsZW1lbnQgbWUKICAgICAgYXNzZXJ0KHRoaXMubmVnYXRpdmUgPT09IDApOwogICAgICByZXR1cm4gdGhpcy5pdXNobG4oYml0cyk7CiAgICB9OwoKICAgIC8vIFNoaWZ0LXJpZ2h0IGluLXBsYWNlCiAgICAvLyBOT1RFOiBgaGludGAgaXMgYSBsb3dlc3QgYml0IGJlZm9yZSB0cmFpbGluZyB6ZXJvZXMKICAgIC8vIE5PVEU6IGlmIGBleHRlbmRlZGAgaXMgcHJlc2VudCAtIGl0IHdpbGwgYmUgZmlsbGVkIHdpdGggZGVzdHJveWVkIGJpdHMKICAgIEJOLnByb3RvdHlwZS5pdXNocm4gPSBmdW5jdGlvbiBpdXNocm4gKGJpdHMsIGhpbnQsIGV4dGVuZGVkKSB7CiAgICAgIGFzc2VydCh0eXBlb2YgYml0cyA9PT0gJ251bWJlcicgJiYgYml0cyA+PSAwKTsKICAgICAgdmFyIGg7CiAgICAgIGlmIChoaW50KSB7CiAgICAgICAgaCA9IChoaW50IC0gKGhpbnQgJSAyNikpIC8gMjY7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaCA9IDA7CiAgICAgIH0KCiAgICAgIHZhciByID0gYml0cyAlIDI2OwogICAgICB2YXIgcyA9IE1hdGgubWluKChiaXRzIC0gcikgLyAyNiwgdGhpcy5sZW5ndGgpOwogICAgICB2YXIgbWFzayA9IDB4M2ZmZmZmZiBeICgoMHgzZmZmZmZmID4+PiByKSA8PCByKTsKICAgICAgdmFyIG1hc2tlZFdvcmRzID0gZXh0ZW5kZWQ7CgogICAgICBoIC09IHM7CiAgICAgIGggPSBNYXRoLm1heCgwLCBoKTsKCiAgICAgIC8vIEV4dGVuZGVkIG1vZGUsIGNvcHkgbWFza2VkIHBhcnQKICAgICAgaWYgKG1hc2tlZFdvcmRzKSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzOyBpKyspIHsKICAgICAgICAgIG1hc2tlZFdvcmRzLndvcmRzW2ldID0gdGhpcy53b3Jkc1tpXTsKICAgICAgICB9CiAgICAgICAgbWFza2VkV29yZHMubGVuZ3RoID0gczsKICAgICAgfQoKICAgICAgaWYgKHMgPT09IDApIDsgZWxzZSBpZiAodGhpcy5sZW5ndGggPiBzKSB7CiAgICAgICAgdGhpcy5sZW5ndGggLT0gczsKICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgdGhpcy53b3Jkc1tpXSA9IHRoaXMud29yZHNbaSArIHNdOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLndvcmRzWzBdID0gMDsKICAgICAgICB0aGlzLmxlbmd0aCA9IDE7CiAgICAgIH0KCiAgICAgIHZhciBjYXJyeSA9IDA7CiAgICAgIGZvciAoaSA9IHRoaXMubGVuZ3RoIC0gMTsgaSA+PSAwICYmIChjYXJyeSAhPT0gMCB8fCBpID49IGgpOyBpLS0pIHsKICAgICAgICB2YXIgd29yZCA9IHRoaXMud29yZHNbaV0gfCAwOwogICAgICAgIHRoaXMud29yZHNbaV0gPSAoY2FycnkgPDwgKDI2IC0gcikpIHwgKHdvcmQgPj4+IHIpOwogICAgICAgIGNhcnJ5ID0gd29yZCAmIG1hc2s7CiAgICAgIH0KCiAgICAgIC8vIFB1c2ggY2FycmllZCBiaXRzIGFzIGEgbWFzawogICAgICBpZiAobWFza2VkV29yZHMgJiYgY2FycnkgIT09IDApIHsKICAgICAgICBtYXNrZWRXb3Jkcy53b3Jkc1ttYXNrZWRXb3Jkcy5sZW5ndGgrK10gPSBjYXJyeTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgdGhpcy53b3Jkc1swXSA9IDA7CiAgICAgICAgdGhpcy5sZW5ndGggPSAxOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5zdHJpcCgpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuaXNocm4gPSBmdW5jdGlvbiBpc2hybiAoYml0cywgaGludCwgZXh0ZW5kZWQpIHsKICAgICAgLy8gVE9ETyhpbmR1dG55KTogaW1wbGVtZW50IG1lCiAgICAgIGFzc2VydCh0aGlzLm5lZ2F0aXZlID09PSAwKTsKICAgICAgcmV0dXJuIHRoaXMuaXVzaHJuKGJpdHMsIGhpbnQsIGV4dGVuZGVkKTsKICAgIH07CgogICAgLy8gU2hpZnQtbGVmdAogICAgQk4ucHJvdG90eXBlLnNobG4gPSBmdW5jdGlvbiBzaGxuIChiaXRzKSB7CiAgICAgIHJldHVybiB0aGlzLmNsb25lKCkuaXNobG4oYml0cyk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS51c2hsbiA9IGZ1bmN0aW9uIHVzaGxuIChiaXRzKSB7CiAgICAgIHJldHVybiB0aGlzLmNsb25lKCkuaXVzaGxuKGJpdHMpOwogICAgfTsKCiAgICAvLyBTaGlmdC1yaWdodAogICAgQk4ucHJvdG90eXBlLnNocm4gPSBmdW5jdGlvbiBzaHJuIChiaXRzKSB7CiAgICAgIHJldHVybiB0aGlzLmNsb25lKCkuaXNocm4oYml0cyk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS51c2hybiA9IGZ1bmN0aW9uIHVzaHJuIChiaXRzKSB7CiAgICAgIHJldHVybiB0aGlzLmNsb25lKCkuaXVzaHJuKGJpdHMpOwogICAgfTsKCiAgICAvLyBUZXN0IGlmIG4gYml0IGlzIHNldAogICAgQk4ucHJvdG90eXBlLnRlc3RuID0gZnVuY3Rpb24gdGVzdG4gKGJpdCkgewogICAgICBhc3NlcnQodHlwZW9mIGJpdCA9PT0gJ251bWJlcicgJiYgYml0ID49IDApOwogICAgICB2YXIgciA9IGJpdCAlIDI2OwogICAgICB2YXIgcyA9IChiaXQgLSByKSAvIDI2OwogICAgICB2YXIgcSA9IDEgPDwgcjsKCiAgICAgIC8vIEZhc3QgY2FzZTogYml0IGlzIG11Y2ggaGlnaGVyIHRoYW4gYWxsIGV4aXN0aW5nIHdvcmRzCiAgICAgIGlmICh0aGlzLmxlbmd0aCA8PSBzKSByZXR1cm4gZmFsc2U7CgogICAgICAvLyBDaGVjayBiaXQgYW5kIHJldHVybgogICAgICB2YXIgdyA9IHRoaXMud29yZHNbc107CgogICAgICByZXR1cm4gISEodyAmIHEpOwogICAgfTsKCiAgICAvLyBSZXR1cm4gb25seSBsb3dlcnMgYml0cyBvZiBudW1iZXIgKGluLXBsYWNlKQogICAgQk4ucHJvdG90eXBlLmltYXNrbiA9IGZ1bmN0aW9uIGltYXNrbiAoYml0cykgewogICAgICBhc3NlcnQodHlwZW9mIGJpdHMgPT09ICdudW1iZXInICYmIGJpdHMgPj0gMCk7CiAgICAgIHZhciByID0gYml0cyAlIDI2OwogICAgICB2YXIgcyA9IChiaXRzIC0gcikgLyAyNjsKCiAgICAgIGFzc2VydCh0aGlzLm5lZ2F0aXZlID09PSAwLCAnaW1hc2tuIHdvcmtzIG9ubHkgd2l0aCBwb3NpdGl2ZSBudW1iZXJzJyk7CgogICAgICBpZiAodGhpcy5sZW5ndGggPD0gcykgewogICAgICAgIHJldHVybiB0aGlzOwogICAgICB9CgogICAgICBpZiAociAhPT0gMCkgewogICAgICAgIHMrKzsKICAgICAgfQogICAgICB0aGlzLmxlbmd0aCA9IE1hdGgubWluKHMsIHRoaXMubGVuZ3RoKTsKCiAgICAgIGlmIChyICE9PSAwKSB7CiAgICAgICAgdmFyIG1hc2sgPSAweDNmZmZmZmYgXiAoKDB4M2ZmZmZmZiA+Pj4gcikgPDwgcik7CiAgICAgICAgdGhpcy53b3Jkc1t0aGlzLmxlbmd0aCAtIDFdICY9IG1hc2s7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLnN0cmlwKCk7CiAgICB9OwoKICAgIC8vIFJldHVybiBvbmx5IGxvd2VycyBiaXRzIG9mIG51bWJlcgogICAgQk4ucHJvdG90eXBlLm1hc2tuID0gZnVuY3Rpb24gbWFza24gKGJpdHMpIHsKICAgICAgcmV0dXJuIHRoaXMuY2xvbmUoKS5pbWFza24oYml0cyk7CiAgICB9OwoKICAgIC8vIEFkZCBwbGFpbiBudW1iZXIgYG51bWAgdG8gYHRoaXNgCiAgICBCTi5wcm90b3R5cGUuaWFkZG4gPSBmdW5jdGlvbiBpYWRkbiAobnVtKSB7CiAgICAgIGFzc2VydCh0eXBlb2YgbnVtID09PSAnbnVtYmVyJyk7CiAgICAgIGFzc2VydChudW0gPCAweDQwMDAwMDApOwogICAgICBpZiAobnVtIDwgMCkgcmV0dXJuIHRoaXMuaXN1Ym4oLW51bSk7CgogICAgICAvLyBQb3NzaWJsZSBzaWduIGNoYW5nZQogICAgICBpZiAodGhpcy5uZWdhdGl2ZSAhPT0gMCkgewogICAgICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMSAmJiAodGhpcy53b3Jkc1swXSB8IDApIDwgbnVtKSB7CiAgICAgICAgICB0aGlzLndvcmRzWzBdID0gbnVtIC0gKHRoaXMud29yZHNbMF0gfCAwKTsKICAgICAgICAgIHRoaXMubmVnYXRpdmUgPSAwOwogICAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgICAgfQoKICAgICAgICB0aGlzLm5lZ2F0aXZlID0gMDsKICAgICAgICB0aGlzLmlzdWJuKG51bSk7CiAgICAgICAgdGhpcy5uZWdhdGl2ZSA9IDE7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0KCiAgICAgIC8vIEFkZCB3aXRob3V0IGNoZWNrcwogICAgICByZXR1cm4gdGhpcy5faWFkZG4obnVtKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLl9pYWRkbiA9IGZ1bmN0aW9uIF9pYWRkbiAobnVtKSB7CiAgICAgIHRoaXMud29yZHNbMF0gKz0gbnVtOwoKICAgICAgLy8gQ2FycnkKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aCAmJiB0aGlzLndvcmRzW2ldID49IDB4NDAwMDAwMDsgaSsrKSB7CiAgICAgICAgdGhpcy53b3Jkc1tpXSAtPSAweDQwMDAwMDA7CiAgICAgICAgaWYgKGkgPT09IHRoaXMubGVuZ3RoIC0gMSkgewogICAgICAgICAgdGhpcy53b3Jkc1tpICsgMV0gPSAxOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLndvcmRzW2kgKyAxXSsrOwogICAgICAgIH0KICAgICAgfQogICAgICB0aGlzLmxlbmd0aCA9IE1hdGgubWF4KHRoaXMubGVuZ3RoLCBpICsgMSk7CgogICAgICByZXR1cm4gdGhpczsKICAgIH07CgogICAgLy8gU3VidHJhY3QgcGxhaW4gbnVtYmVyIGBudW1gIGZyb20gYHRoaXNgCiAgICBCTi5wcm90b3R5cGUuaXN1Ym4gPSBmdW5jdGlvbiBpc3VibiAobnVtKSB7CiAgICAgIGFzc2VydCh0eXBlb2YgbnVtID09PSAnbnVtYmVyJyk7CiAgICAgIGFzc2VydChudW0gPCAweDQwMDAwMDApOwogICAgICBpZiAobnVtIDwgMCkgcmV0dXJuIHRoaXMuaWFkZG4oLW51bSk7CgogICAgICBpZiAodGhpcy5uZWdhdGl2ZSAhPT0gMCkgewogICAgICAgIHRoaXMubmVnYXRpdmUgPSAwOwogICAgICAgIHRoaXMuaWFkZG4obnVtKTsKICAgICAgICB0aGlzLm5lZ2F0aXZlID0gMTsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfQoKICAgICAgdGhpcy53b3Jkc1swXSAtPSBudW07CgogICAgICBpZiAodGhpcy5sZW5ndGggPT09IDEgJiYgdGhpcy53b3Jkc1swXSA8IDApIHsKICAgICAgICB0aGlzLndvcmRzWzBdID0gLXRoaXMud29yZHNbMF07CiAgICAgICAgdGhpcy5uZWdhdGl2ZSA9IDE7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gQ2FycnkKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoICYmIHRoaXMud29yZHNbaV0gPCAwOyBpKyspIHsKICAgICAgICAgIHRoaXMud29yZHNbaV0gKz0gMHg0MDAwMDAwOwogICAgICAgICAgdGhpcy53b3Jkc1tpICsgMV0gLT0gMTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLnN0cmlwKCk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5hZGRuID0gZnVuY3Rpb24gYWRkbiAobnVtKSB7CiAgICAgIHJldHVybiB0aGlzLmNsb25lKCkuaWFkZG4obnVtKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLnN1Ym4gPSBmdW5jdGlvbiBzdWJuIChudW0pIHsKICAgICAgcmV0dXJuIHRoaXMuY2xvbmUoKS5pc3VibihudW0pOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuaWFicyA9IGZ1bmN0aW9uIGlhYnMgKCkgewogICAgICB0aGlzLm5lZ2F0aXZlID0gMDsKCiAgICAgIHJldHVybiB0aGlzOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuYWJzID0gZnVuY3Rpb24gYWJzICgpIHsKICAgICAgcmV0dXJuIHRoaXMuY2xvbmUoKS5pYWJzKCk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5faXNobG5zdWJtdWwgPSBmdW5jdGlvbiBfaXNobG5zdWJtdWwgKG51bSwgbXVsLCBzaGlmdCkgewogICAgICB2YXIgbGVuID0gbnVtLmxlbmd0aCArIHNoaWZ0OwogICAgICB2YXIgaTsKCiAgICAgIHRoaXMuX2V4cGFuZChsZW4pOwoKICAgICAgdmFyIHc7CiAgICAgIHZhciBjYXJyeSA9IDA7CiAgICAgIGZvciAoaSA9IDA7IGkgPCBudW0ubGVuZ3RoOyBpKyspIHsKICAgICAgICB3ID0gKHRoaXMud29yZHNbaSArIHNoaWZ0XSB8IDApICsgY2Fycnk7CiAgICAgICAgdmFyIHJpZ2h0ID0gKG51bS53b3Jkc1tpXSB8IDApICogbXVsOwogICAgICAgIHcgLT0gcmlnaHQgJiAweDNmZmZmZmY7CiAgICAgICAgY2FycnkgPSAodyA+PiAyNikgLSAoKHJpZ2h0IC8gMHg0MDAwMDAwKSB8IDApOwogICAgICAgIHRoaXMud29yZHNbaSArIHNoaWZ0XSA9IHcgJiAweDNmZmZmZmY7CiAgICAgIH0KICAgICAgZm9yICg7IGkgPCB0aGlzLmxlbmd0aCAtIHNoaWZ0OyBpKyspIHsKICAgICAgICB3ID0gKHRoaXMud29yZHNbaSArIHNoaWZ0XSB8IDApICsgY2Fycnk7CiAgICAgICAgY2FycnkgPSB3ID4+IDI2OwogICAgICAgIHRoaXMud29yZHNbaSArIHNoaWZ0XSA9IHcgJiAweDNmZmZmZmY7CiAgICAgIH0KCiAgICAgIGlmIChjYXJyeSA9PT0gMCkgcmV0dXJuIHRoaXMuc3RyaXAoKTsKCiAgICAgIC8vIFN1YnRyYWN0aW9uIG92ZXJmbG93CiAgICAgIGFzc2VydChjYXJyeSA9PT0gLTEpOwogICAgICBjYXJyeSA9IDA7CiAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdyA9IC0odGhpcy53b3Jkc1tpXSB8IDApICsgY2Fycnk7CiAgICAgICAgY2FycnkgPSB3ID4+IDI2OwogICAgICAgIHRoaXMud29yZHNbaV0gPSB3ICYgMHgzZmZmZmZmOwogICAgICB9CiAgICAgIHRoaXMubmVnYXRpdmUgPSAxOwoKICAgICAgcmV0dXJuIHRoaXMuc3RyaXAoKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLl93b3JkRGl2ID0gZnVuY3Rpb24gX3dvcmREaXYgKG51bSwgbW9kZSkgewogICAgICB2YXIgc2hpZnQgPSB0aGlzLmxlbmd0aCAtIG51bS5sZW5ndGg7CgogICAgICB2YXIgYSA9IHRoaXMuY2xvbmUoKTsKICAgICAgdmFyIGIgPSBudW07CgogICAgICAvLyBOb3JtYWxpemUKICAgICAgdmFyIGJoaSA9IGIud29yZHNbYi5sZW5ndGggLSAxXSB8IDA7CiAgICAgIHZhciBiaGlCaXRzID0gdGhpcy5fY291bnRCaXRzKGJoaSk7CiAgICAgIHNoaWZ0ID0gMjYgLSBiaGlCaXRzOwogICAgICBpZiAoc2hpZnQgIT09IDApIHsKICAgICAgICBiID0gYi51c2hsbihzaGlmdCk7CiAgICAgICAgYS5pdXNobG4oc2hpZnQpOwogICAgICAgIGJoaSA9IGIud29yZHNbYi5sZW5ndGggLSAxXSB8IDA7CiAgICAgIH0KCiAgICAgIC8vIEluaXRpYWxpemUgcXVvdGllbnQKICAgICAgdmFyIG0gPSBhLmxlbmd0aCAtIGIubGVuZ3RoOwogICAgICB2YXIgcTsKCiAgICAgIGlmIChtb2RlICE9PSAnbW9kJykgewogICAgICAgIHEgPSBuZXcgQk4obnVsbCk7CiAgICAgICAgcS5sZW5ndGggPSBtICsgMTsKICAgICAgICBxLndvcmRzID0gbmV3IEFycmF5KHEubGVuZ3RoKTsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHEubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHEud29yZHNbaV0gPSAwOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdmFyIGRpZmYgPSBhLmNsb25lKCkuX2lzaGxuc3VibXVsKGIsIDEsIG0pOwogICAgICBpZiAoZGlmZi5uZWdhdGl2ZSA9PT0gMCkgewogICAgICAgIGEgPSBkaWZmOwogICAgICAgIGlmIChxKSB7CiAgICAgICAgICBxLndvcmRzW21dID0gMTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGZvciAodmFyIGogPSBtIC0gMTsgaiA+PSAwOyBqLS0pIHsKICAgICAgICB2YXIgcWogPSAoYS53b3Jkc1tiLmxlbmd0aCArIGpdIHwgMCkgKiAweDQwMDAwMDAgKwogICAgICAgICAgKGEud29yZHNbYi5sZW5ndGggKyBqIC0gMV0gfCAwKTsKCiAgICAgICAgLy8gTk9URTogKHFqIC8gYmhpKSBpcyAoMHgzZmZmZmZmICogMHg0MDAwMDAwICsgMHgzZmZmZmZmKSAvIDB4MjAwMDAwMCBtYXgKICAgICAgICAvLyAoMHg3ZmZmZmZmKQogICAgICAgIHFqID0gTWF0aC5taW4oKHFqIC8gYmhpKSB8IDAsIDB4M2ZmZmZmZik7CgogICAgICAgIGEuX2lzaGxuc3VibXVsKGIsIHFqLCBqKTsKICAgICAgICB3aGlsZSAoYS5uZWdhdGl2ZSAhPT0gMCkgewogICAgICAgICAgcWotLTsKICAgICAgICAgIGEubmVnYXRpdmUgPSAwOwogICAgICAgICAgYS5faXNobG5zdWJtdWwoYiwgMSwgaik7CiAgICAgICAgICBpZiAoIWEuaXNaZXJvKCkpIHsKICAgICAgICAgICAgYS5uZWdhdGl2ZSBePSAxOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAocSkgewogICAgICAgICAgcS53b3Jkc1tqXSA9IHFqOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAocSkgewogICAgICAgIHEuc3RyaXAoKTsKICAgICAgfQogICAgICBhLnN0cmlwKCk7CgogICAgICAvLyBEZW5vcm1hbGl6ZQogICAgICBpZiAobW9kZSAhPT0gJ2RpdicgJiYgc2hpZnQgIT09IDApIHsKICAgICAgICBhLml1c2hybihzaGlmdCk7CiAgICAgIH0KCiAgICAgIHJldHVybiB7CiAgICAgICAgZGl2OiBxIHx8IG51bGwsCiAgICAgICAgbW9kOiBhCiAgICAgIH07CiAgICB9OwoKICAgIC8vIE5PVEU6IDEpIGBtb2RlYCBjYW4gYmUgc2V0IHRvIGBtb2RgIHRvIHJlcXVlc3QgbW9kIG9ubHksCiAgICAvLyAgICAgICB0byBgZGl2YCB0byByZXF1ZXN0IGRpdiBvbmx5LCBvciBiZSBhYnNlbnQgdG8KICAgIC8vICAgICAgIHJlcXVlc3QgYm90aCBkaXYgJiBtb2QKICAgIC8vICAgICAgIDIpIGBwb3NpdGl2ZWAgaXMgdHJ1ZSBpZiB1bnNpZ25lZCBtb2QgaXMgcmVxdWVzdGVkCiAgICBCTi5wcm90b3R5cGUuZGl2bW9kID0gZnVuY3Rpb24gZGl2bW9kIChudW0sIG1vZGUsIHBvc2l0aXZlKSB7CiAgICAgIGFzc2VydCghbnVtLmlzWmVybygpKTsKCiAgICAgIGlmICh0aGlzLmlzWmVybygpKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGRpdjogbmV3IEJOKDApLAogICAgICAgICAgbW9kOiBuZXcgQk4oMCkKICAgICAgICB9OwogICAgICB9CgogICAgICB2YXIgZGl2LCBtb2QsIHJlczsKICAgICAgaWYgKHRoaXMubmVnYXRpdmUgIT09IDAgJiYgbnVtLm5lZ2F0aXZlID09PSAwKSB7CiAgICAgICAgcmVzID0gdGhpcy5uZWcoKS5kaXZtb2QobnVtLCBtb2RlKTsKCiAgICAgICAgaWYgKG1vZGUgIT09ICdtb2QnKSB7CiAgICAgICAgICBkaXYgPSByZXMuZGl2Lm5lZygpOwogICAgICAgIH0KCiAgICAgICAgaWYgKG1vZGUgIT09ICdkaXYnKSB7CiAgICAgICAgICBtb2QgPSByZXMubW9kLm5lZygpOwogICAgICAgICAgaWYgKHBvc2l0aXZlICYmIG1vZC5uZWdhdGl2ZSAhPT0gMCkgewogICAgICAgICAgICBtb2QuaWFkZChudW0pOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGRpdjogZGl2LAogICAgICAgICAgbW9kOiBtb2QKICAgICAgICB9OwogICAgICB9CgogICAgICBpZiAodGhpcy5uZWdhdGl2ZSA9PT0gMCAmJiBudW0ubmVnYXRpdmUgIT09IDApIHsKICAgICAgICByZXMgPSB0aGlzLmRpdm1vZChudW0ubmVnKCksIG1vZGUpOwoKICAgICAgICBpZiAobW9kZSAhPT0gJ21vZCcpIHsKICAgICAgICAgIGRpdiA9IHJlcy5kaXYubmVnKCk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gewogICAgICAgICAgZGl2OiBkaXYsCiAgICAgICAgICBtb2Q6IHJlcy5tb2QKICAgICAgICB9OwogICAgICB9CgogICAgICBpZiAoKHRoaXMubmVnYXRpdmUgJiBudW0ubmVnYXRpdmUpICE9PSAwKSB7CiAgICAgICAgcmVzID0gdGhpcy5uZWcoKS5kaXZtb2QobnVtLm5lZygpLCBtb2RlKTsKCiAgICAgICAgaWYgKG1vZGUgIT09ICdkaXYnKSB7CiAgICAgICAgICBtb2QgPSByZXMubW9kLm5lZygpOwogICAgICAgICAgaWYgKHBvc2l0aXZlICYmIG1vZC5uZWdhdGl2ZSAhPT0gMCkgewogICAgICAgICAgICBtb2QuaXN1YihudW0pOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGRpdjogcmVzLmRpdiwKICAgICAgICAgIG1vZDogbW9kCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgLy8gQm90aCBudW1iZXJzIGFyZSBwb3NpdGl2ZSBhdCB0aGlzIHBvaW50CgogICAgICAvLyBTdHJpcCBib3RoIG51bWJlcnMgdG8gYXBwcm94aW1hdGUgc2hpZnQgdmFsdWUKICAgICAgaWYgKG51bS5sZW5ndGggPiB0aGlzLmxlbmd0aCB8fCB0aGlzLmNtcChudW0pIDwgMCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBkaXY6IG5ldyBCTigwKSwKICAgICAgICAgIG1vZDogdGhpcwogICAgICAgIH07CiAgICAgIH0KCiAgICAgIC8vIFZlcnkgc2hvcnQgcmVkdWN0aW9uCiAgICAgIGlmIChudW0ubGVuZ3RoID09PSAxKSB7CiAgICAgICAgaWYgKG1vZGUgPT09ICdkaXYnKSB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBkaXY6IHRoaXMuZGl2bihudW0ud29yZHNbMF0pLAogICAgICAgICAgICBtb2Q6IG51bGwKICAgICAgICAgIH07CiAgICAgICAgfQoKICAgICAgICBpZiAobW9kZSA9PT0gJ21vZCcpIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGRpdjogbnVsbCwKICAgICAgICAgICAgbW9kOiBuZXcgQk4odGhpcy5tb2RuKG51bS53b3Jkc1swXSkpCiAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGRpdjogdGhpcy5kaXZuKG51bS53b3Jkc1swXSksCiAgICAgICAgICBtb2Q6IG5ldyBCTih0aGlzLm1vZG4obnVtLndvcmRzWzBdKSkKICAgICAgICB9OwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5fd29yZERpdihudW0sIG1vZGUpOwogICAgfTsKCiAgICAvLyBGaW5kIGB0aGlzYCAvIGBudW1gCiAgICBCTi5wcm90b3R5cGUuZGl2ID0gZnVuY3Rpb24gZGl2IChudW0pIHsKICAgICAgcmV0dXJuIHRoaXMuZGl2bW9kKG51bSwgJ2RpdicsIGZhbHNlKS5kaXY7CiAgICB9OwoKICAgIC8vIEZpbmQgYHRoaXNgICUgYG51bWAKICAgIEJOLnByb3RvdHlwZS5tb2QgPSBmdW5jdGlvbiBtb2QgKG51bSkgewogICAgICByZXR1cm4gdGhpcy5kaXZtb2QobnVtLCAnbW9kJywgZmFsc2UpLm1vZDsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLnVtb2QgPSBmdW5jdGlvbiB1bW9kIChudW0pIHsKICAgICAgcmV0dXJuIHRoaXMuZGl2bW9kKG51bSwgJ21vZCcsIHRydWUpLm1vZDsKICAgIH07CgogICAgLy8gRmluZCBSb3VuZChgdGhpc2AgLyBgbnVtYCkKICAgIEJOLnByb3RvdHlwZS5kaXZSb3VuZCA9IGZ1bmN0aW9uIGRpdlJvdW5kIChudW0pIHsKICAgICAgdmFyIGRtID0gdGhpcy5kaXZtb2QobnVtKTsKCiAgICAgIC8vIEZhc3QgY2FzZSAtIGV4YWN0IGRpdmlzaW9uCiAgICAgIGlmIChkbS5tb2QuaXNaZXJvKCkpIHJldHVybiBkbS5kaXY7CgogICAgICB2YXIgbW9kID0gZG0uZGl2Lm5lZ2F0aXZlICE9PSAwID8gZG0ubW9kLmlzdWIobnVtKSA6IGRtLm1vZDsKCiAgICAgIHZhciBoYWxmID0gbnVtLnVzaHJuKDEpOwogICAgICB2YXIgcjIgPSBudW0uYW5kbG4oMSk7CiAgICAgIHZhciBjbXAgPSBtb2QuY21wKGhhbGYpOwoKICAgICAgLy8gUm91bmQgZG93bgogICAgICBpZiAoY21wIDwgMCB8fCByMiA9PT0gMSAmJiBjbXAgPT09IDApIHJldHVybiBkbS5kaXY7CgogICAgICAvLyBSb3VuZCB1cAogICAgICByZXR1cm4gZG0uZGl2Lm5lZ2F0aXZlICE9PSAwID8gZG0uZGl2LmlzdWJuKDEpIDogZG0uZGl2LmlhZGRuKDEpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUubW9kbiA9IGZ1bmN0aW9uIG1vZG4gKG51bSkgewogICAgICBhc3NlcnQobnVtIDw9IDB4M2ZmZmZmZik7CiAgICAgIHZhciBwID0gKDEgPDwgMjYpICUgbnVtOwoKICAgICAgdmFyIGFjYyA9IDA7CiAgICAgIGZvciAodmFyIGkgPSB0aGlzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICAgICAgYWNjID0gKHAgKiBhY2MgKyAodGhpcy53b3Jkc1tpXSB8IDApKSAlIG51bTsKICAgICAgfQoKICAgICAgcmV0dXJuIGFjYzsKICAgIH07CgogICAgLy8gSW4tcGxhY2UgZGl2aXNpb24gYnkgbnVtYmVyCiAgICBCTi5wcm90b3R5cGUuaWRpdm4gPSBmdW5jdGlvbiBpZGl2biAobnVtKSB7CiAgICAgIGFzc2VydChudW0gPD0gMHgzZmZmZmZmKTsKCiAgICAgIHZhciBjYXJyeSA9IDA7CiAgICAgIGZvciAodmFyIGkgPSB0aGlzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICAgICAgdmFyIHcgPSAodGhpcy53b3Jkc1tpXSB8IDApICsgY2FycnkgKiAweDQwMDAwMDA7CiAgICAgICAgdGhpcy53b3Jkc1tpXSA9ICh3IC8gbnVtKSB8IDA7CiAgICAgICAgY2FycnkgPSB3ICUgbnVtOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5zdHJpcCgpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuZGl2biA9IGZ1bmN0aW9uIGRpdm4gKG51bSkgewogICAgICByZXR1cm4gdGhpcy5jbG9uZSgpLmlkaXZuKG51bSk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5lZ2NkID0gZnVuY3Rpb24gZWdjZCAocCkgewogICAgICBhc3NlcnQocC5uZWdhdGl2ZSA9PT0gMCk7CiAgICAgIGFzc2VydCghcC5pc1plcm8oKSk7CgogICAgICB2YXIgeCA9IHRoaXM7CiAgICAgIHZhciB5ID0gcC5jbG9uZSgpOwoKICAgICAgaWYgKHgubmVnYXRpdmUgIT09IDApIHsKICAgICAgICB4ID0geC51bW9kKHApOwogICAgICB9IGVsc2UgewogICAgICAgIHggPSB4LmNsb25lKCk7CiAgICAgIH0KCiAgICAgIC8vIEEgKiB4ICsgQiAqIHkgPSB4CiAgICAgIHZhciBBID0gbmV3IEJOKDEpOwogICAgICB2YXIgQiA9IG5ldyBCTigwKTsKCiAgICAgIC8vIEMgKiB4ICsgRCAqIHkgPSB5CiAgICAgIHZhciBDID0gbmV3IEJOKDApOwogICAgICB2YXIgRCA9IG5ldyBCTigxKTsKCiAgICAgIHZhciBnID0gMDsKCiAgICAgIHdoaWxlICh4LmlzRXZlbigpICYmIHkuaXNFdmVuKCkpIHsKICAgICAgICB4Lml1c2hybigxKTsKICAgICAgICB5Lml1c2hybigxKTsKICAgICAgICArK2c7CiAgICAgIH0KCiAgICAgIHZhciB5cCA9IHkuY2xvbmUoKTsKICAgICAgdmFyIHhwID0geC5jbG9uZSgpOwoKICAgICAgd2hpbGUgKCF4LmlzWmVybygpKSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGltID0gMTsgKHgud29yZHNbMF0gJiBpbSkgPT09IDAgJiYgaSA8IDI2OyArK2ksIGltIDw8PSAxKTsKICAgICAgICBpZiAoaSA+IDApIHsKICAgICAgICAgIHguaXVzaHJuKGkpOwogICAgICAgICAgd2hpbGUgKGktLSA+IDApIHsKICAgICAgICAgICAgaWYgKEEuaXNPZGQoKSB8fCBCLmlzT2RkKCkpIHsKICAgICAgICAgICAgICBBLmlhZGQoeXApOwogICAgICAgICAgICAgIEIuaXN1Yih4cCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIEEuaXVzaHJuKDEpOwogICAgICAgICAgICBCLml1c2hybigxKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZvciAodmFyIGogPSAwLCBqbSA9IDE7ICh5LndvcmRzWzBdICYgam0pID09PSAwICYmIGogPCAyNjsgKytqLCBqbSA8PD0gMSk7CiAgICAgICAgaWYgKGogPiAwKSB7CiAgICAgICAgICB5Lml1c2hybihqKTsKICAgICAgICAgIHdoaWxlIChqLS0gPiAwKSB7CiAgICAgICAgICAgIGlmIChDLmlzT2RkKCkgfHwgRC5pc09kZCgpKSB7CiAgICAgICAgICAgICAgQy5pYWRkKHlwKTsKICAgICAgICAgICAgICBELmlzdWIoeHApOwogICAgICAgICAgICB9CgogICAgICAgICAgICBDLml1c2hybigxKTsKICAgICAgICAgICAgRC5pdXNocm4oMSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoeC5jbXAoeSkgPj0gMCkgewogICAgICAgICAgeC5pc3ViKHkpOwogICAgICAgICAgQS5pc3ViKEMpOwogICAgICAgICAgQi5pc3ViKEQpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB5LmlzdWIoeCk7CiAgICAgICAgICBDLmlzdWIoQSk7CiAgICAgICAgICBELmlzdWIoQik7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gewogICAgICAgIGE6IEMsCiAgICAgICAgYjogRCwKICAgICAgICBnY2Q6IHkuaXVzaGxuKGcpCiAgICAgIH07CiAgICB9OwoKICAgIC8vIFRoaXMgaXMgcmVkdWNlZCBpbmNhcm5hdGlvbiBvZiB0aGUgYmluYXJ5IEVFQQogICAgLy8gYWJvdmUsIGRlc2lnbmF0ZWQgdG8gaW52ZXJ0IG1lbWJlcnMgb2YgdGhlCiAgICAvLyBfcHJpbWVfIGZpZWxkcyBGKHApIGF0IGEgbWF4aW1hbCBzcGVlZAogICAgQk4ucHJvdG90eXBlLl9pbnZtcCA9IGZ1bmN0aW9uIF9pbnZtcCAocCkgewogICAgICBhc3NlcnQocC5uZWdhdGl2ZSA9PT0gMCk7CiAgICAgIGFzc2VydCghcC5pc1plcm8oKSk7CgogICAgICB2YXIgYSA9IHRoaXM7CiAgICAgIHZhciBiID0gcC5jbG9uZSgpOwoKICAgICAgaWYgKGEubmVnYXRpdmUgIT09IDApIHsKICAgICAgICBhID0gYS51bW9kKHApOwogICAgICB9IGVsc2UgewogICAgICAgIGEgPSBhLmNsb25lKCk7CiAgICAgIH0KCiAgICAgIHZhciB4MSA9IG5ldyBCTigxKTsKICAgICAgdmFyIHgyID0gbmV3IEJOKDApOwoKICAgICAgdmFyIGRlbHRhID0gYi5jbG9uZSgpOwoKICAgICAgd2hpbGUgKGEuY21wbigxKSA+IDAgJiYgYi5jbXBuKDEpID4gMCkgewogICAgICAgIGZvciAodmFyIGkgPSAwLCBpbSA9IDE7IChhLndvcmRzWzBdICYgaW0pID09PSAwICYmIGkgPCAyNjsgKytpLCBpbSA8PD0gMSk7CiAgICAgICAgaWYgKGkgPiAwKSB7CiAgICAgICAgICBhLml1c2hybihpKTsKICAgICAgICAgIHdoaWxlIChpLS0gPiAwKSB7CiAgICAgICAgICAgIGlmICh4MS5pc09kZCgpKSB7CiAgICAgICAgICAgICAgeDEuaWFkZChkZWx0YSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHgxLml1c2hybigxKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZvciAodmFyIGogPSAwLCBqbSA9IDE7IChiLndvcmRzWzBdICYgam0pID09PSAwICYmIGogPCAyNjsgKytqLCBqbSA8PD0gMSk7CiAgICAgICAgaWYgKGogPiAwKSB7CiAgICAgICAgICBiLml1c2hybihqKTsKICAgICAgICAgIHdoaWxlIChqLS0gPiAwKSB7CiAgICAgICAgICAgIGlmICh4Mi5pc09kZCgpKSB7CiAgICAgICAgICAgICAgeDIuaWFkZChkZWx0YSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHgyLml1c2hybigxKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChhLmNtcChiKSA+PSAwKSB7CiAgICAgICAgICBhLmlzdWIoYik7CiAgICAgICAgICB4MS5pc3ViKHgyKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYi5pc3ViKGEpOwogICAgICAgICAgeDIuaXN1Yih4MSk7CiAgICAgICAgfQogICAgICB9CgogICAgICB2YXIgcmVzOwogICAgICBpZiAoYS5jbXBuKDEpID09PSAwKSB7CiAgICAgICAgcmVzID0geDE7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmVzID0geDI7CiAgICAgIH0KCiAgICAgIGlmIChyZXMuY21wbigwKSA8IDApIHsKICAgICAgICByZXMuaWFkZChwKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlczsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmdjZCA9IGZ1bmN0aW9uIGdjZCAobnVtKSB7CiAgICAgIGlmICh0aGlzLmlzWmVybygpKSByZXR1cm4gbnVtLmFicygpOwogICAgICBpZiAobnVtLmlzWmVybygpKSByZXR1cm4gdGhpcy5hYnMoKTsKCiAgICAgIHZhciBhID0gdGhpcy5jbG9uZSgpOwogICAgICB2YXIgYiA9IG51bS5jbG9uZSgpOwogICAgICBhLm5lZ2F0aXZlID0gMDsKICAgICAgYi5uZWdhdGl2ZSA9IDA7CgogICAgICAvLyBSZW1vdmUgY29tbW9uIGZhY3RvciBvZiB0d28KICAgICAgZm9yICh2YXIgc2hpZnQgPSAwOyBhLmlzRXZlbigpICYmIGIuaXNFdmVuKCk7IHNoaWZ0KyspIHsKICAgICAgICBhLml1c2hybigxKTsKICAgICAgICBiLml1c2hybigxKTsKICAgICAgfQoKICAgICAgZG8gewogICAgICAgIHdoaWxlIChhLmlzRXZlbigpKSB7CiAgICAgICAgICBhLml1c2hybigxKTsKICAgICAgICB9CiAgICAgICAgd2hpbGUgKGIuaXNFdmVuKCkpIHsKICAgICAgICAgIGIuaXVzaHJuKDEpOwogICAgICAgIH0KCiAgICAgICAgdmFyIHIgPSBhLmNtcChiKTsKICAgICAgICBpZiAociA8IDApIHsKICAgICAgICAgIC8vIFN3YXAgYGFgIGFuZCBgYmAgdG8gbWFrZSBgYWAgYWx3YXlzIGJpZ2dlciB0aGFuIGBiYAogICAgICAgICAgdmFyIHQgPSBhOwogICAgICAgICAgYSA9IGI7CiAgICAgICAgICBiID0gdDsKICAgICAgICB9IGVsc2UgaWYgKHIgPT09IDAgfHwgYi5jbXBuKDEpID09PSAwKSB7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICAgIGEuaXN1YihiKTsKICAgICAgfSB3aGlsZSAodHJ1ZSk7CgogICAgICByZXR1cm4gYi5pdXNobG4oc2hpZnQpOwogICAgfTsKCiAgICAvLyBJbnZlcnQgbnVtYmVyIGluIHRoZSBmaWVsZCBGKG51bSkKICAgIEJOLnByb3RvdHlwZS5pbnZtID0gZnVuY3Rpb24gaW52bSAobnVtKSB7CiAgICAgIHJldHVybiB0aGlzLmVnY2QobnVtKS5hLnVtb2QobnVtKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmlzRXZlbiA9IGZ1bmN0aW9uIGlzRXZlbiAoKSB7CiAgICAgIHJldHVybiAodGhpcy53b3Jkc1swXSAmIDEpID09PSAwOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuaXNPZGQgPSBmdW5jdGlvbiBpc09kZCAoKSB7CiAgICAgIHJldHVybiAodGhpcy53b3Jkc1swXSAmIDEpID09PSAxOwogICAgfTsKCiAgICAvLyBBbmQgZmlyc3Qgd29yZCBhbmQgbnVtCiAgICBCTi5wcm90b3R5cGUuYW5kbG4gPSBmdW5jdGlvbiBhbmRsbiAobnVtKSB7CiAgICAgIHJldHVybiB0aGlzLndvcmRzWzBdICYgbnVtOwogICAgfTsKCiAgICAvLyBJbmNyZW1lbnQgYXQgdGhlIGJpdCBwb3NpdGlvbiBpbi1saW5lCiAgICBCTi5wcm90b3R5cGUuYmluY24gPSBmdW5jdGlvbiBiaW5jbiAoYml0KSB7CiAgICAgIGFzc2VydCh0eXBlb2YgYml0ID09PSAnbnVtYmVyJyk7CiAgICAgIHZhciByID0gYml0ICUgMjY7CiAgICAgIHZhciBzID0gKGJpdCAtIHIpIC8gMjY7CiAgICAgIHZhciBxID0gMSA8PCByOwoKICAgICAgLy8gRmFzdCBjYXNlOiBiaXQgaXMgbXVjaCBoaWdoZXIgdGhhbiBhbGwgZXhpc3Rpbmcgd29yZHMKICAgICAgaWYgKHRoaXMubGVuZ3RoIDw9IHMpIHsKICAgICAgICB0aGlzLl9leHBhbmQocyArIDEpOwogICAgICAgIHRoaXMud29yZHNbc10gfD0gcTsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfQoKICAgICAgLy8gQWRkIGJpdCBhbmQgcHJvcGFnYXRlLCBpZiBuZWVkZWQKICAgICAgdmFyIGNhcnJ5ID0gcTsKICAgICAgZm9yICh2YXIgaSA9IHM7IGNhcnJ5ICE9PSAwICYmIGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIHcgPSB0aGlzLndvcmRzW2ldIHwgMDsKICAgICAgICB3ICs9IGNhcnJ5OwogICAgICAgIGNhcnJ5ID0gdyA+Pj4gMjY7CiAgICAgICAgdyAmPSAweDNmZmZmZmY7CiAgICAgICAgdGhpcy53b3Jkc1tpXSA9IHc7CiAgICAgIH0KICAgICAgaWYgKGNhcnJ5ICE9PSAwKSB7CiAgICAgICAgdGhpcy53b3Jkc1tpXSA9IGNhcnJ5OwogICAgICAgIHRoaXMubGVuZ3RoKys7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXM7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5pc1plcm8gPSBmdW5jdGlvbiBpc1plcm8gKCkgewogICAgICByZXR1cm4gdGhpcy5sZW5ndGggPT09IDEgJiYgdGhpcy53b3Jkc1swXSA9PT0gMDsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmNtcG4gPSBmdW5jdGlvbiBjbXBuIChudW0pIHsKICAgICAgdmFyIG5lZ2F0aXZlID0gbnVtIDwgMDsKCiAgICAgIGlmICh0aGlzLm5lZ2F0aXZlICE9PSAwICYmICFuZWdhdGl2ZSkgcmV0dXJuIC0xOwogICAgICBpZiAodGhpcy5uZWdhdGl2ZSA9PT0gMCAmJiBuZWdhdGl2ZSkgcmV0dXJuIDE7CgogICAgICB0aGlzLnN0cmlwKCk7CgogICAgICB2YXIgcmVzOwogICAgICBpZiAodGhpcy5sZW5ndGggPiAxKSB7CiAgICAgICAgcmVzID0gMTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAobmVnYXRpdmUpIHsKICAgICAgICAgIG51bSA9IC1udW07CiAgICAgICAgfQoKICAgICAgICBhc3NlcnQobnVtIDw9IDB4M2ZmZmZmZiwgJ051bWJlciBpcyB0b28gYmlnJyk7CgogICAgICAgIHZhciB3ID0gdGhpcy53b3Jkc1swXSB8IDA7CiAgICAgICAgcmVzID0gdyA9PT0gbnVtID8gMCA6IHcgPCBudW0gPyAtMSA6IDE7CiAgICAgIH0KICAgICAgaWYgKHRoaXMubmVnYXRpdmUgIT09IDApIHJldHVybiAtcmVzIHwgMDsKICAgICAgcmV0dXJuIHJlczsKICAgIH07CgogICAgLy8gQ29tcGFyZSB0d28gbnVtYmVycyBhbmQgcmV0dXJuOgogICAgLy8gMSAtIGlmIGB0aGlzYCA+IGBudW1gCiAgICAvLyAwIC0gaWYgYHRoaXNgID09IGBudW1gCiAgICAvLyAtMSAtIGlmIGB0aGlzYCA8IGBudW1gCiAgICBCTi5wcm90b3R5cGUuY21wID0gZnVuY3Rpb24gY21wIChudW0pIHsKICAgICAgaWYgKHRoaXMubmVnYXRpdmUgIT09IDAgJiYgbnVtLm5lZ2F0aXZlID09PSAwKSByZXR1cm4gLTE7CiAgICAgIGlmICh0aGlzLm5lZ2F0aXZlID09PSAwICYmIG51bS5uZWdhdGl2ZSAhPT0gMCkgcmV0dXJuIDE7CgogICAgICB2YXIgcmVzID0gdGhpcy51Y21wKG51bSk7CiAgICAgIGlmICh0aGlzLm5lZ2F0aXZlICE9PSAwKSByZXR1cm4gLXJlcyB8IDA7CiAgICAgIHJldHVybiByZXM7CiAgICB9OwoKICAgIC8vIFVuc2lnbmVkIGNvbXBhcmlzb24KICAgIEJOLnByb3RvdHlwZS51Y21wID0gZnVuY3Rpb24gdWNtcCAobnVtKSB7CiAgICAgIC8vIEF0IHRoaXMgcG9pbnQgYm90aCBudW1iZXJzIGhhdmUgdGhlIHNhbWUgc2lnbgogICAgICBpZiAodGhpcy5sZW5ndGggPiBudW0ubGVuZ3RoKSByZXR1cm4gMTsKICAgICAgaWYgKHRoaXMubGVuZ3RoIDwgbnVtLmxlbmd0aCkgcmV0dXJuIC0xOwoKICAgICAgdmFyIHJlcyA9IDA7CiAgICAgIGZvciAodmFyIGkgPSB0aGlzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICAgICAgdmFyIGEgPSB0aGlzLndvcmRzW2ldIHwgMDsKICAgICAgICB2YXIgYiA9IG51bS53b3Jkc1tpXSB8IDA7CgogICAgICAgIGlmIChhID09PSBiKSBjb250aW51ZTsKICAgICAgICBpZiAoYSA8IGIpIHsKICAgICAgICAgIHJlcyA9IC0xOwogICAgICAgIH0gZWxzZSBpZiAoYSA+IGIpIHsKICAgICAgICAgIHJlcyA9IDE7CiAgICAgICAgfQogICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIHJldHVybiByZXM7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5ndG4gPSBmdW5jdGlvbiBndG4gKG51bSkgewogICAgICByZXR1cm4gdGhpcy5jbXBuKG51bSkgPT09IDE7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5ndCA9IGZ1bmN0aW9uIGd0IChudW0pIHsKICAgICAgcmV0dXJuIHRoaXMuY21wKG51bSkgPT09IDE7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5ndGVuID0gZnVuY3Rpb24gZ3RlbiAobnVtKSB7CiAgICAgIHJldHVybiB0aGlzLmNtcG4obnVtKSA+PSAwOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuZ3RlID0gZnVuY3Rpb24gZ3RlIChudW0pIHsKICAgICAgcmV0dXJuIHRoaXMuY21wKG51bSkgPj0gMDsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmx0biA9IGZ1bmN0aW9uIGx0biAobnVtKSB7CiAgICAgIHJldHVybiB0aGlzLmNtcG4obnVtKSA9PT0gLTE7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5sdCA9IGZ1bmN0aW9uIGx0IChudW0pIHsKICAgICAgcmV0dXJuIHRoaXMuY21wKG51bSkgPT09IC0xOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUubHRlbiA9IGZ1bmN0aW9uIGx0ZW4gKG51bSkgewogICAgICByZXR1cm4gdGhpcy5jbXBuKG51bSkgPD0gMDsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmx0ZSA9IGZ1bmN0aW9uIGx0ZSAobnVtKSB7CiAgICAgIHJldHVybiB0aGlzLmNtcChudW0pIDw9IDA7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5lcW4gPSBmdW5jdGlvbiBlcW4gKG51bSkgewogICAgICByZXR1cm4gdGhpcy5jbXBuKG51bSkgPT09IDA7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5lcSA9IGZ1bmN0aW9uIGVxIChudW0pIHsKICAgICAgcmV0dXJuIHRoaXMuY21wKG51bSkgPT09IDA7CiAgICB9OwoKICAgIC8vCiAgICAvLyBBIHJlZHVjZSBjb250ZXh0LCBjb3VsZCBiZSB1c2luZyBtb250Z29tZXJ5IG9yIHNvbWV0aGluZyBiZXR0ZXIsIGRlcGVuZGluZwogICAgLy8gb24gdGhlIGBtYCBpdHNlbGYuCiAgICAvLwogICAgQk4ucmVkID0gZnVuY3Rpb24gcmVkIChudW0pIHsKICAgICAgcmV0dXJuIG5ldyBSZWQobnVtKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLnRvUmVkID0gZnVuY3Rpb24gdG9SZWQgKGN0eCkgewogICAgICBhc3NlcnQoIXRoaXMucmVkLCAnQWxyZWFkeSBhIG51bWJlciBpbiByZWR1Y3Rpb24gY29udGV4dCcpOwogICAgICBhc3NlcnQodGhpcy5uZWdhdGl2ZSA9PT0gMCwgJ3JlZCB3b3JrcyBvbmx5IHdpdGggcG9zaXRpdmVzJyk7CiAgICAgIHJldHVybiBjdHguY29udmVydFRvKHRoaXMpLl9mb3JjZVJlZChjdHgpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuZnJvbVJlZCA9IGZ1bmN0aW9uIGZyb21SZWQgKCkgewogICAgICBhc3NlcnQodGhpcy5yZWQsICdmcm9tUmVkIHdvcmtzIG9ubHkgd2l0aCBudW1iZXJzIGluIHJlZHVjdGlvbiBjb250ZXh0Jyk7CiAgICAgIHJldHVybiB0aGlzLnJlZC5jb252ZXJ0RnJvbSh0aGlzKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLl9mb3JjZVJlZCA9IGZ1bmN0aW9uIF9mb3JjZVJlZCAoY3R4KSB7CiAgICAgIHRoaXMucmVkID0gY3R4OwogICAgICByZXR1cm4gdGhpczsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmZvcmNlUmVkID0gZnVuY3Rpb24gZm9yY2VSZWQgKGN0eCkgewogICAgICBhc3NlcnQoIXRoaXMucmVkLCAnQWxyZWFkeSBhIG51bWJlciBpbiByZWR1Y3Rpb24gY29udGV4dCcpOwogICAgICByZXR1cm4gdGhpcy5fZm9yY2VSZWQoY3R4KTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLnJlZEFkZCA9IGZ1bmN0aW9uIHJlZEFkZCAobnVtKSB7CiAgICAgIGFzc2VydCh0aGlzLnJlZCwgJ3JlZEFkZCB3b3JrcyBvbmx5IHdpdGggcmVkIG51bWJlcnMnKTsKICAgICAgcmV0dXJuIHRoaXMucmVkLmFkZCh0aGlzLCBudW0pOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUucmVkSUFkZCA9IGZ1bmN0aW9uIHJlZElBZGQgKG51bSkgewogICAgICBhc3NlcnQodGhpcy5yZWQsICdyZWRJQWRkIHdvcmtzIG9ubHkgd2l0aCByZWQgbnVtYmVycycpOwogICAgICByZXR1cm4gdGhpcy5yZWQuaWFkZCh0aGlzLCBudW0pOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUucmVkU3ViID0gZnVuY3Rpb24gcmVkU3ViIChudW0pIHsKICAgICAgYXNzZXJ0KHRoaXMucmVkLCAncmVkU3ViIHdvcmtzIG9ubHkgd2l0aCByZWQgbnVtYmVycycpOwogICAgICByZXR1cm4gdGhpcy5yZWQuc3ViKHRoaXMsIG51bSk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5yZWRJU3ViID0gZnVuY3Rpb24gcmVkSVN1YiAobnVtKSB7CiAgICAgIGFzc2VydCh0aGlzLnJlZCwgJ3JlZElTdWIgd29ya3Mgb25seSB3aXRoIHJlZCBudW1iZXJzJyk7CiAgICAgIHJldHVybiB0aGlzLnJlZC5pc3ViKHRoaXMsIG51bSk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5yZWRTaGwgPSBmdW5jdGlvbiByZWRTaGwgKG51bSkgewogICAgICBhc3NlcnQodGhpcy5yZWQsICdyZWRTaGwgd29ya3Mgb25seSB3aXRoIHJlZCBudW1iZXJzJyk7CiAgICAgIHJldHVybiB0aGlzLnJlZC5zaGwodGhpcywgbnVtKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLnJlZE11bCA9IGZ1bmN0aW9uIHJlZE11bCAobnVtKSB7CiAgICAgIGFzc2VydCh0aGlzLnJlZCwgJ3JlZE11bCB3b3JrcyBvbmx5IHdpdGggcmVkIG51bWJlcnMnKTsKICAgICAgdGhpcy5yZWQuX3ZlcmlmeTIodGhpcywgbnVtKTsKICAgICAgcmV0dXJuIHRoaXMucmVkLm11bCh0aGlzLCBudW0pOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUucmVkSU11bCA9IGZ1bmN0aW9uIHJlZElNdWwgKG51bSkgewogICAgICBhc3NlcnQodGhpcy5yZWQsICdyZWRNdWwgd29ya3Mgb25seSB3aXRoIHJlZCBudW1iZXJzJyk7CiAgICAgIHRoaXMucmVkLl92ZXJpZnkyKHRoaXMsIG51bSk7CiAgICAgIHJldHVybiB0aGlzLnJlZC5pbXVsKHRoaXMsIG51bSk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5yZWRTcXIgPSBmdW5jdGlvbiByZWRTcXIgKCkgewogICAgICBhc3NlcnQodGhpcy5yZWQsICdyZWRTcXIgd29ya3Mgb25seSB3aXRoIHJlZCBudW1iZXJzJyk7CiAgICAgIHRoaXMucmVkLl92ZXJpZnkxKHRoaXMpOwogICAgICByZXR1cm4gdGhpcy5yZWQuc3FyKHRoaXMpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUucmVkSVNxciA9IGZ1bmN0aW9uIHJlZElTcXIgKCkgewogICAgICBhc3NlcnQodGhpcy5yZWQsICdyZWRJU3FyIHdvcmtzIG9ubHkgd2l0aCByZWQgbnVtYmVycycpOwogICAgICB0aGlzLnJlZC5fdmVyaWZ5MSh0aGlzKTsKICAgICAgcmV0dXJuIHRoaXMucmVkLmlzcXIodGhpcyk7CiAgICB9OwoKICAgIC8vIFNxdWFyZSByb290IG92ZXIgcAogICAgQk4ucHJvdG90eXBlLnJlZFNxcnQgPSBmdW5jdGlvbiByZWRTcXJ0ICgpIHsKICAgICAgYXNzZXJ0KHRoaXMucmVkLCAncmVkU3FydCB3b3JrcyBvbmx5IHdpdGggcmVkIG51bWJlcnMnKTsKICAgICAgdGhpcy5yZWQuX3ZlcmlmeTEodGhpcyk7CiAgICAgIHJldHVybiB0aGlzLnJlZC5zcXJ0KHRoaXMpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUucmVkSW52bSA9IGZ1bmN0aW9uIHJlZEludm0gKCkgewogICAgICBhc3NlcnQodGhpcy5yZWQsICdyZWRJbnZtIHdvcmtzIG9ubHkgd2l0aCByZWQgbnVtYmVycycpOwogICAgICB0aGlzLnJlZC5fdmVyaWZ5MSh0aGlzKTsKICAgICAgcmV0dXJuIHRoaXMucmVkLmludm0odGhpcyk7CiAgICB9OwoKICAgIC8vIFJldHVybiBuZWdhdGl2ZSBjbG9uZSBvZiBgdGhpc2AgJSBgcmVkIG1vZHVsb2AKICAgIEJOLnByb3RvdHlwZS5yZWROZWcgPSBmdW5jdGlvbiByZWROZWcgKCkgewogICAgICBhc3NlcnQodGhpcy5yZWQsICdyZWROZWcgd29ya3Mgb25seSB3aXRoIHJlZCBudW1iZXJzJyk7CiAgICAgIHRoaXMucmVkLl92ZXJpZnkxKHRoaXMpOwogICAgICByZXR1cm4gdGhpcy5yZWQubmVnKHRoaXMpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUucmVkUG93ID0gZnVuY3Rpb24gcmVkUG93IChudW0pIHsKICAgICAgYXNzZXJ0KHRoaXMucmVkICYmICFudW0ucmVkLCAncmVkUG93KG5vcm1hbE51bSknKTsKICAgICAgdGhpcy5yZWQuX3ZlcmlmeTEodGhpcyk7CiAgICAgIHJldHVybiB0aGlzLnJlZC5wb3codGhpcywgbnVtKTsKICAgIH07CgogICAgLy8gUHJpbWUgbnVtYmVycyB3aXRoIGVmZmljaWVudCByZWR1Y3Rpb24KICAgIHZhciBwcmltZXMgPSB7CiAgICAgIGsyNTY6IG51bGwsCiAgICAgIHAyMjQ6IG51bGwsCiAgICAgIHAxOTI6IG51bGwsCiAgICAgIHAyNTUxOTogbnVsbAogICAgfTsKCiAgICAvLyBQc2V1ZG8tTWVyc2VubmUgcHJpbWUKICAgIGZ1bmN0aW9uIE1QcmltZSAobmFtZSwgcCkgewogICAgICAvLyBQID0gMiBeIE4gLSBLCiAgICAgIHRoaXMubmFtZSA9IG5hbWU7CiAgICAgIHRoaXMucCA9IG5ldyBCTihwLCAxNik7CiAgICAgIHRoaXMubiA9IHRoaXMucC5iaXRMZW5ndGgoKTsKICAgICAgdGhpcy5rID0gbmV3IEJOKDEpLml1c2hsbih0aGlzLm4pLmlzdWIodGhpcy5wKTsKCiAgICAgIHRoaXMudG1wID0gdGhpcy5fdG1wKCk7CiAgICB9CgogICAgTVByaW1lLnByb3RvdHlwZS5fdG1wID0gZnVuY3Rpb24gX3RtcCAoKSB7CiAgICAgIHZhciB0bXAgPSBuZXcgQk4obnVsbCk7CiAgICAgIHRtcC53b3JkcyA9IG5ldyBBcnJheShNYXRoLmNlaWwodGhpcy5uIC8gMTMpKTsKICAgICAgcmV0dXJuIHRtcDsKICAgIH07CgogICAgTVByaW1lLnByb3RvdHlwZS5pcmVkdWNlID0gZnVuY3Rpb24gaXJlZHVjZSAobnVtKSB7CiAgICAgIC8vIEFzc3VtZXMgdGhhdCBgbnVtYCBpcyBsZXNzIHRoYW4gYFBeMmAKICAgICAgLy8gbnVtID0gSEkgKiAoMiBeIE4gLSBLKSArIEhJICogSyArIExPID0gSEkgKiBLICsgTE8gKG1vZCBQKQogICAgICB2YXIgciA9IG51bTsKICAgICAgdmFyIHJsZW47CgogICAgICBkbyB7CiAgICAgICAgdGhpcy5zcGxpdChyLCB0aGlzLnRtcCk7CiAgICAgICAgciA9IHRoaXMuaW11bEsocik7CiAgICAgICAgciA9IHIuaWFkZCh0aGlzLnRtcCk7CiAgICAgICAgcmxlbiA9IHIuYml0TGVuZ3RoKCk7CiAgICAgIH0gd2hpbGUgKHJsZW4gPiB0aGlzLm4pOwoKICAgICAgdmFyIGNtcCA9IHJsZW4gPCB0aGlzLm4gPyAtMSA6IHIudWNtcCh0aGlzLnApOwogICAgICBpZiAoY21wID09PSAwKSB7CiAgICAgICAgci53b3Jkc1swXSA9IDA7CiAgICAgICAgci5sZW5ndGggPSAxOwogICAgICB9IGVsc2UgaWYgKGNtcCA+IDApIHsKICAgICAgICByLmlzdWIodGhpcy5wKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoci5zdHJpcCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAvLyByIGlzIEJOIHY0IGluc3RhbmNlCiAgICAgICAgICByLnN0cmlwKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIHIgaXMgQk4gdjUgaW5zdGFuY2UKICAgICAgICAgIHIuX3N0cmlwKCk7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gcjsKICAgIH07CgogICAgTVByaW1lLnByb3RvdHlwZS5zcGxpdCA9IGZ1bmN0aW9uIHNwbGl0IChpbnB1dCwgb3V0KSB7CiAgICAgIGlucHV0Lml1c2hybih0aGlzLm4sIDAsIG91dCk7CiAgICB9OwoKICAgIE1QcmltZS5wcm90b3R5cGUuaW11bEsgPSBmdW5jdGlvbiBpbXVsSyAobnVtKSB7CiAgICAgIHJldHVybiBudW0uaW11bCh0aGlzLmspOwogICAgfTsKCiAgICBmdW5jdGlvbiBLMjU2ICgpIHsKICAgICAgTVByaW1lLmNhbGwoCiAgICAgICAgdGhpcywKICAgICAgICAnazI1NicsCiAgICAgICAgJ2ZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZlIGZmZmZmYzJmJyk7CiAgICB9CiAgICBpbmhlcml0cyhLMjU2LCBNUHJpbWUpOwoKICAgIEsyNTYucHJvdG90eXBlLnNwbGl0ID0gZnVuY3Rpb24gc3BsaXQgKGlucHV0LCBvdXRwdXQpIHsKICAgICAgLy8gMjU2ID0gOSAqIDI2ICsgMjIKICAgICAgdmFyIG1hc2sgPSAweDNmZmZmZjsKCiAgICAgIHZhciBvdXRMZW4gPSBNYXRoLm1pbihpbnB1dC5sZW5ndGgsIDkpOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG91dExlbjsgaSsrKSB7CiAgICAgICAgb3V0cHV0LndvcmRzW2ldID0gaW5wdXQud29yZHNbaV07CiAgICAgIH0KICAgICAgb3V0cHV0Lmxlbmd0aCA9IG91dExlbjsKCiAgICAgIGlmIChpbnB1dC5sZW5ndGggPD0gOSkgewogICAgICAgIGlucHV0LndvcmRzWzBdID0gMDsKICAgICAgICBpbnB1dC5sZW5ndGggPSAxOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgLy8gU2hpZnQgYnkgOSBsaW1icwogICAgICB2YXIgcHJldiA9IGlucHV0LndvcmRzWzldOwogICAgICBvdXRwdXQud29yZHNbb3V0cHV0Lmxlbmd0aCsrXSA9IHByZXYgJiBtYXNrOwoKICAgICAgZm9yIChpID0gMTA7IGkgPCBpbnB1dC5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBuZXh0ID0gaW5wdXQud29yZHNbaV0gfCAwOwogICAgICAgIGlucHV0LndvcmRzW2kgLSAxMF0gPSAoKG5leHQgJiBtYXNrKSA8PCA0KSB8IChwcmV2ID4+PiAyMik7CiAgICAgICAgcHJldiA9IG5leHQ7CiAgICAgIH0KICAgICAgcHJldiA+Pj49IDIyOwogICAgICBpbnB1dC53b3Jkc1tpIC0gMTBdID0gcHJldjsKICAgICAgaWYgKHByZXYgPT09IDAgJiYgaW5wdXQubGVuZ3RoID4gMTApIHsKICAgICAgICBpbnB1dC5sZW5ndGggLT0gMTA7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaW5wdXQubGVuZ3RoIC09IDk7CiAgICAgIH0KICAgIH07CgogICAgSzI1Ni5wcm90b3R5cGUuaW11bEsgPSBmdW5jdGlvbiBpbXVsSyAobnVtKSB7CiAgICAgIC8vIEsgPSAweDEwMDAwMDNkMSA9IFsgMHg0MCwgMHgzZDEgXQogICAgICBudW0ud29yZHNbbnVtLmxlbmd0aF0gPSAwOwogICAgICBudW0ud29yZHNbbnVtLmxlbmd0aCArIDFdID0gMDsKICAgICAgbnVtLmxlbmd0aCArPSAyOwoKICAgICAgLy8gYm91bmRlZCBhdDogMHg0MCAqIDB4M2ZmZmZmZiArIDB4M2QwID0gMHgxMDAwMDAzOTAKICAgICAgdmFyIGxvID0gMDsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW0ubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgdyA9IG51bS53b3Jkc1tpXSB8IDA7CiAgICAgICAgbG8gKz0gdyAqIDB4M2QxOwogICAgICAgIG51bS53b3Jkc1tpXSA9IGxvICYgMHgzZmZmZmZmOwogICAgICAgIGxvID0gdyAqIDB4NDAgKyAoKGxvIC8gMHg0MDAwMDAwKSB8IDApOwogICAgICB9CgogICAgICAvLyBGYXN0IGxlbmd0aCByZWR1Y3Rpb24KICAgICAgaWYgKG51bS53b3Jkc1tudW0ubGVuZ3RoIC0gMV0gPT09IDApIHsKICAgICAgICBudW0ubGVuZ3RoLS07CiAgICAgICAgaWYgKG51bS53b3Jkc1tudW0ubGVuZ3RoIC0gMV0gPT09IDApIHsKICAgICAgICAgIG51bS5sZW5ndGgtLTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIG51bTsKICAgIH07CgogICAgZnVuY3Rpb24gUDIyNCAoKSB7CiAgICAgIE1QcmltZS5jYWxsKAogICAgICAgIHRoaXMsCiAgICAgICAgJ3AyMjQnLAogICAgICAgICdmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiAwMDAwMDAwMCAwMDAwMDAwMCAwMDAwMDAwMScpOwogICAgfQogICAgaW5oZXJpdHMoUDIyNCwgTVByaW1lKTsKCiAgICBmdW5jdGlvbiBQMTkyICgpIHsKICAgICAgTVByaW1lLmNhbGwoCiAgICAgICAgdGhpcywKICAgICAgICAncDE5MicsCiAgICAgICAgJ2ZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZlIGZmZmZmZmZmIGZmZmZmZmZmJyk7CiAgICB9CiAgICBpbmhlcml0cyhQMTkyLCBNUHJpbWUpOwoKICAgIGZ1bmN0aW9uIFAyNTUxOSAoKSB7CiAgICAgIC8vIDIgXiAyNTUgLSAxOQogICAgICBNUHJpbWUuY2FsbCgKICAgICAgICB0aGlzLAogICAgICAgICcyNTUxOScsCiAgICAgICAgJzdmZmZmZmZmZmZmZmZmZmYgZmZmZmZmZmZmZmZmZmZmZiBmZmZmZmZmZmZmZmZmZmZmIGZmZmZmZmZmZmZmZmZmZWQnKTsKICAgIH0KICAgIGluaGVyaXRzKFAyNTUxOSwgTVByaW1lKTsKCiAgICBQMjU1MTkucHJvdG90eXBlLmltdWxLID0gZnVuY3Rpb24gaW11bEsgKG51bSkgewogICAgICAvLyBLID0gMHgxMwogICAgICB2YXIgY2FycnkgPSAwOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bS5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBoaSA9IChudW0ud29yZHNbaV0gfCAwKSAqIDB4MTMgKyBjYXJyeTsKICAgICAgICB2YXIgbG8gPSBoaSAmIDB4M2ZmZmZmZjsKICAgICAgICBoaSA+Pj49IDI2OwoKICAgICAgICBudW0ud29yZHNbaV0gPSBsbzsKICAgICAgICBjYXJyeSA9IGhpOwogICAgICB9CiAgICAgIGlmIChjYXJyeSAhPT0gMCkgewogICAgICAgIG51bS53b3Jkc1tudW0ubGVuZ3RoKytdID0gY2Fycnk7CiAgICAgIH0KICAgICAgcmV0dXJuIG51bTsKICAgIH07CgogICAgLy8gRXhwb3J0ZWQgbW9zdGx5IGZvciB0ZXN0aW5nIHB1cnBvc2VzLCB1c2UgcGxhaW4gbmFtZSBpbnN0ZWFkCiAgICBCTi5fcHJpbWUgPSBmdW5jdGlvbiBwcmltZSAobmFtZSkgewogICAgICAvLyBDYWNoZWQgdmVyc2lvbiBvZiBwcmltZQogICAgICBpZiAocHJpbWVzW25hbWVdKSByZXR1cm4gcHJpbWVzW25hbWVdOwoKICAgICAgdmFyIHByaW1lOwogICAgICBpZiAobmFtZSA9PT0gJ2syNTYnKSB7CiAgICAgICAgcHJpbWUgPSBuZXcgSzI1NigpOwogICAgICB9IGVsc2UgaWYgKG5hbWUgPT09ICdwMjI0JykgewogICAgICAgIHByaW1lID0gbmV3IFAyMjQoKTsKICAgICAgfSBlbHNlIGlmIChuYW1lID09PSAncDE5MicpIHsKICAgICAgICBwcmltZSA9IG5ldyBQMTkyKCk7CiAgICAgIH0gZWxzZSBpZiAobmFtZSA9PT0gJ3AyNTUxOScpIHsKICAgICAgICBwcmltZSA9IG5ldyBQMjU1MTkoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gcHJpbWUgJyArIG5hbWUpOwogICAgICB9CiAgICAgIHByaW1lc1tuYW1lXSA9IHByaW1lOwoKICAgICAgcmV0dXJuIHByaW1lOwogICAgfTsKCiAgICAvLwogICAgLy8gQmFzZSByZWR1Y3Rpb24gZW5naW5lCiAgICAvLwogICAgZnVuY3Rpb24gUmVkIChtKSB7CiAgICAgIGlmICh0eXBlb2YgbSA9PT0gJ3N0cmluZycpIHsKICAgICAgICB2YXIgcHJpbWUgPSBCTi5fcHJpbWUobSk7CiAgICAgICAgdGhpcy5tID0gcHJpbWUucDsKICAgICAgICB0aGlzLnByaW1lID0gcHJpbWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYXNzZXJ0KG0uZ3RuKDEpLCAnbW9kdWx1cyBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAxJyk7CiAgICAgICAgdGhpcy5tID0gbTsKICAgICAgICB0aGlzLnByaW1lID0gbnVsbDsKICAgICAgfQogICAgfQoKICAgIFJlZC5wcm90b3R5cGUuX3ZlcmlmeTEgPSBmdW5jdGlvbiBfdmVyaWZ5MSAoYSkgewogICAgICBhc3NlcnQoYS5uZWdhdGl2ZSA9PT0gMCwgJ3JlZCB3b3JrcyBvbmx5IHdpdGggcG9zaXRpdmVzJyk7CiAgICAgIGFzc2VydChhLnJlZCwgJ3JlZCB3b3JrcyBvbmx5IHdpdGggcmVkIG51bWJlcnMnKTsKICAgIH07CgogICAgUmVkLnByb3RvdHlwZS5fdmVyaWZ5MiA9IGZ1bmN0aW9uIF92ZXJpZnkyIChhLCBiKSB7CiAgICAgIGFzc2VydCgoYS5uZWdhdGl2ZSB8IGIubmVnYXRpdmUpID09PSAwLCAncmVkIHdvcmtzIG9ubHkgd2l0aCBwb3NpdGl2ZXMnKTsKICAgICAgYXNzZXJ0KGEucmVkICYmIGEucmVkID09PSBiLnJlZCwKICAgICAgICAncmVkIHdvcmtzIG9ubHkgd2l0aCByZWQgbnVtYmVycycpOwogICAgfTsKCiAgICBSZWQucHJvdG90eXBlLmltb2QgPSBmdW5jdGlvbiBpbW9kIChhKSB7CiAgICAgIGlmICh0aGlzLnByaW1lKSByZXR1cm4gdGhpcy5wcmltZS5pcmVkdWNlKGEpLl9mb3JjZVJlZCh0aGlzKTsKICAgICAgcmV0dXJuIGEudW1vZCh0aGlzLm0pLl9mb3JjZVJlZCh0aGlzKTsKICAgIH07CgogICAgUmVkLnByb3RvdHlwZS5uZWcgPSBmdW5jdGlvbiBuZWcgKGEpIHsKICAgICAgaWYgKGEuaXNaZXJvKCkpIHsKICAgICAgICByZXR1cm4gYS5jbG9uZSgpOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5tLnN1YihhKS5fZm9yY2VSZWQodGhpcyk7CiAgICB9OwoKICAgIFJlZC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gYWRkIChhLCBiKSB7CiAgICAgIHRoaXMuX3ZlcmlmeTIoYSwgYik7CgogICAgICB2YXIgcmVzID0gYS5hZGQoYik7CiAgICAgIGlmIChyZXMuY21wKHRoaXMubSkgPj0gMCkgewogICAgICAgIHJlcy5pc3ViKHRoaXMubSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlcy5fZm9yY2VSZWQodGhpcyk7CiAgICB9OwoKICAgIFJlZC5wcm90b3R5cGUuaWFkZCA9IGZ1bmN0aW9uIGlhZGQgKGEsIGIpIHsKICAgICAgdGhpcy5fdmVyaWZ5MihhLCBiKTsKCiAgICAgIHZhciByZXMgPSBhLmlhZGQoYik7CiAgICAgIGlmIChyZXMuY21wKHRoaXMubSkgPj0gMCkgewogICAgICAgIHJlcy5pc3ViKHRoaXMubSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlczsKICAgIH07CgogICAgUmVkLnByb3RvdHlwZS5zdWIgPSBmdW5jdGlvbiBzdWIgKGEsIGIpIHsKICAgICAgdGhpcy5fdmVyaWZ5MihhLCBiKTsKCiAgICAgIHZhciByZXMgPSBhLnN1YihiKTsKICAgICAgaWYgKHJlcy5jbXBuKDApIDwgMCkgewogICAgICAgIHJlcy5pYWRkKHRoaXMubSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlcy5fZm9yY2VSZWQodGhpcyk7CiAgICB9OwoKICAgIFJlZC5wcm90b3R5cGUuaXN1YiA9IGZ1bmN0aW9uIGlzdWIgKGEsIGIpIHsKICAgICAgdGhpcy5fdmVyaWZ5MihhLCBiKTsKCiAgICAgIHZhciByZXMgPSBhLmlzdWIoYik7CiAgICAgIGlmIChyZXMuY21wbigwKSA8IDApIHsKICAgICAgICByZXMuaWFkZCh0aGlzLm0pOwogICAgICB9CiAgICAgIHJldHVybiByZXM7CiAgICB9OwoKICAgIFJlZC5wcm90b3R5cGUuc2hsID0gZnVuY3Rpb24gc2hsIChhLCBudW0pIHsKICAgICAgdGhpcy5fdmVyaWZ5MShhKTsKICAgICAgcmV0dXJuIHRoaXMuaW1vZChhLnVzaGxuKG51bSkpOwogICAgfTsKCiAgICBSZWQucHJvdG90eXBlLmltdWwgPSBmdW5jdGlvbiBpbXVsIChhLCBiKSB7CiAgICAgIHRoaXMuX3ZlcmlmeTIoYSwgYik7CiAgICAgIHJldHVybiB0aGlzLmltb2QoYS5pbXVsKGIpKTsKICAgIH07CgogICAgUmVkLnByb3RvdHlwZS5tdWwgPSBmdW5jdGlvbiBtdWwgKGEsIGIpIHsKICAgICAgdGhpcy5fdmVyaWZ5MihhLCBiKTsKICAgICAgcmV0dXJuIHRoaXMuaW1vZChhLm11bChiKSk7CiAgICB9OwoKICAgIFJlZC5wcm90b3R5cGUuaXNxciA9IGZ1bmN0aW9uIGlzcXIgKGEpIHsKICAgICAgcmV0dXJuIHRoaXMuaW11bChhLCBhLmNsb25lKCkpOwogICAgfTsKCiAgICBSZWQucHJvdG90eXBlLnNxciA9IGZ1bmN0aW9uIHNxciAoYSkgewogICAgICByZXR1cm4gdGhpcy5tdWwoYSwgYSk7CiAgICB9OwoKICAgIFJlZC5wcm90b3R5cGUuc3FydCA9IGZ1bmN0aW9uIHNxcnQgKGEpIHsKICAgICAgaWYgKGEuaXNaZXJvKCkpIHJldHVybiBhLmNsb25lKCk7CgogICAgICB2YXIgbW9kMyA9IHRoaXMubS5hbmRsbigzKTsKICAgICAgYXNzZXJ0KG1vZDMgJSAyID09PSAxKTsKCiAgICAgIC8vIEZhc3QgY2FzZQogICAgICBpZiAobW9kMyA9PT0gMykgewogICAgICAgIHZhciBwb3cgPSB0aGlzLm0uYWRkKG5ldyBCTigxKSkuaXVzaHJuKDIpOwogICAgICAgIHJldHVybiB0aGlzLnBvdyhhLCBwb3cpOwogICAgICB9CgogICAgICAvLyBUb25lbGxpLVNoYW5rcyBhbGdvcml0aG0gKFRvdGFsbHkgdW5vcHRpbWl6ZWQgYW5kIHNsb3cpCiAgICAgIC8vCiAgICAgIC8vIEZpbmQgUSBhbmQgUywgdGhhdCBRICogMiBeIFMgPSAoUCAtIDEpCiAgICAgIHZhciBxID0gdGhpcy5tLnN1Ym4oMSk7CiAgICAgIHZhciBzID0gMDsKICAgICAgd2hpbGUgKCFxLmlzWmVybygpICYmIHEuYW5kbG4oMSkgPT09IDApIHsKICAgICAgICBzKys7CiAgICAgICAgcS5pdXNocm4oMSk7CiAgICAgIH0KICAgICAgYXNzZXJ0KCFxLmlzWmVybygpKTsKCiAgICAgIHZhciBvbmUgPSBuZXcgQk4oMSkudG9SZWQodGhpcyk7CiAgICAgIHZhciBuT25lID0gb25lLnJlZE5lZygpOwoKICAgICAgLy8gRmluZCBxdWFkcmF0aWMgbm9uLXJlc2lkdWUKICAgICAgLy8gTk9URTogTWF4IGlzIHN1Y2ggYmVjYXVzZSBvZiBnZW5lcmFsaXplZCBSaWVtYW5uIGh5cG90aGVzaXMuCiAgICAgIHZhciBscG93ID0gdGhpcy5tLnN1Ym4oMSkuaXVzaHJuKDEpOwogICAgICB2YXIgeiA9IHRoaXMubS5iaXRMZW5ndGgoKTsKICAgICAgeiA9IG5ldyBCTigyICogeiAqIHopLnRvUmVkKHRoaXMpOwoKICAgICAgd2hpbGUgKHRoaXMucG93KHosIGxwb3cpLmNtcChuT25lKSAhPT0gMCkgewogICAgICAgIHoucmVkSUFkZChuT25lKTsKICAgICAgfQoKICAgICAgdmFyIGMgPSB0aGlzLnBvdyh6LCBxKTsKICAgICAgdmFyIHIgPSB0aGlzLnBvdyhhLCBxLmFkZG4oMSkuaXVzaHJuKDEpKTsKICAgICAgdmFyIHQgPSB0aGlzLnBvdyhhLCBxKTsKICAgICAgdmFyIG0gPSBzOwogICAgICB3aGlsZSAodC5jbXAob25lKSAhPT0gMCkgewogICAgICAgIHZhciB0bXAgPSB0OwogICAgICAgIGZvciAodmFyIGkgPSAwOyB0bXAuY21wKG9uZSkgIT09IDA7IGkrKykgewogICAgICAgICAgdG1wID0gdG1wLnJlZFNxcigpOwogICAgICAgIH0KICAgICAgICBhc3NlcnQoaSA8IG0pOwogICAgICAgIHZhciBiID0gdGhpcy5wb3coYywgbmV3IEJOKDEpLml1c2hsbihtIC0gaSAtIDEpKTsKCiAgICAgICAgciA9IHIucmVkTXVsKGIpOwogICAgICAgIGMgPSBiLnJlZFNxcigpOwogICAgICAgIHQgPSB0LnJlZE11bChjKTsKICAgICAgICBtID0gaTsKICAgICAgfQoKICAgICAgcmV0dXJuIHI7CiAgICB9OwoKICAgIFJlZC5wcm90b3R5cGUuaW52bSA9IGZ1bmN0aW9uIGludm0gKGEpIHsKICAgICAgdmFyIGludiA9IGEuX2ludm1wKHRoaXMubSk7CiAgICAgIGlmIChpbnYubmVnYXRpdmUgIT09IDApIHsKICAgICAgICBpbnYubmVnYXRpdmUgPSAwOwogICAgICAgIHJldHVybiB0aGlzLmltb2QoaW52KS5yZWROZWcoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gdGhpcy5pbW9kKGludik7CiAgICAgIH0KICAgIH07CgogICAgUmVkLnByb3RvdHlwZS5wb3cgPSBmdW5jdGlvbiBwb3cgKGEsIG51bSkgewogICAgICBpZiAobnVtLmlzWmVybygpKSByZXR1cm4gbmV3IEJOKDEpLnRvUmVkKHRoaXMpOwogICAgICBpZiAobnVtLmNtcG4oMSkgPT09IDApIHJldHVybiBhLmNsb25lKCk7CgogICAgICB2YXIgd2luZG93U2l6ZSA9IDQ7CiAgICAgIHZhciB3bmQgPSBuZXcgQXJyYXkoMSA8PCB3aW5kb3dTaXplKTsKICAgICAgd25kWzBdID0gbmV3IEJOKDEpLnRvUmVkKHRoaXMpOwogICAgICB3bmRbMV0gPSBhOwogICAgICBmb3IgKHZhciBpID0gMjsgaSA8IHduZC5sZW5ndGg7IGkrKykgewogICAgICAgIHduZFtpXSA9IHRoaXMubXVsKHduZFtpIC0gMV0sIGEpOwogICAgICB9CgogICAgICB2YXIgcmVzID0gd25kWzBdOwogICAgICB2YXIgY3VycmVudCA9IDA7CiAgICAgIHZhciBjdXJyZW50TGVuID0gMDsKICAgICAgdmFyIHN0YXJ0ID0gbnVtLmJpdExlbmd0aCgpICUgMjY7CiAgICAgIGlmIChzdGFydCA9PT0gMCkgewogICAgICAgIHN0YXJ0ID0gMjY7CiAgICAgIH0KCiAgICAgIGZvciAoaSA9IG51bS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgICAgIHZhciB3b3JkID0gbnVtLndvcmRzW2ldOwogICAgICAgIGZvciAodmFyIGogPSBzdGFydCAtIDE7IGogPj0gMDsgai0tKSB7CiAgICAgICAgICB2YXIgYml0ID0gKHdvcmQgPj4gaikgJiAxOwogICAgICAgICAgaWYgKHJlcyAhPT0gd25kWzBdKSB7CiAgICAgICAgICAgIHJlcyA9IHRoaXMuc3FyKHJlcyk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGJpdCA9PT0gMCAmJiBjdXJyZW50ID09PSAwKSB7CiAgICAgICAgICAgIGN1cnJlbnRMZW4gPSAwOwogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0KCiAgICAgICAgICBjdXJyZW50IDw8PSAxOwogICAgICAgICAgY3VycmVudCB8PSBiaXQ7CiAgICAgICAgICBjdXJyZW50TGVuKys7CiAgICAgICAgICBpZiAoY3VycmVudExlbiAhPT0gd2luZG93U2l6ZSAmJiAoaSAhPT0gMCB8fCBqICE9PSAwKSkgY29udGludWU7CgogICAgICAgICAgcmVzID0gdGhpcy5tdWwocmVzLCB3bmRbY3VycmVudF0pOwogICAgICAgICAgY3VycmVudExlbiA9IDA7CiAgICAgICAgICBjdXJyZW50ID0gMDsKICAgICAgICB9CiAgICAgICAgc3RhcnQgPSAyNjsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlczsKICAgIH07CgogICAgUmVkLnByb3RvdHlwZS5jb252ZXJ0VG8gPSBmdW5jdGlvbiBjb252ZXJ0VG8gKG51bSkgewogICAgICB2YXIgciA9IG51bS51bW9kKHRoaXMubSk7CgogICAgICByZXR1cm4gciA9PT0gbnVtID8gci5jbG9uZSgpIDogcjsKICAgIH07CgogICAgUmVkLnByb3RvdHlwZS5jb252ZXJ0RnJvbSA9IGZ1bmN0aW9uIGNvbnZlcnRGcm9tIChudW0pIHsKICAgICAgdmFyIHJlcyA9IG51bS5jbG9uZSgpOwogICAgICByZXMucmVkID0gbnVsbDsKICAgICAgcmV0dXJuIHJlczsKICAgIH07CgogICAgLy8KICAgIC8vIE1vbnRnb21lcnkgbWV0aG9kIGVuZ2luZQogICAgLy8KCiAgICBCTi5tb250ID0gZnVuY3Rpb24gbW9udCAobnVtKSB7CiAgICAgIHJldHVybiBuZXcgTW9udChudW0pOwogICAgfTsKCiAgICBmdW5jdGlvbiBNb250IChtKSB7CiAgICAgIFJlZC5jYWxsKHRoaXMsIG0pOwoKICAgICAgdGhpcy5zaGlmdCA9IHRoaXMubS5iaXRMZW5ndGgoKTsKICAgICAgaWYgKHRoaXMuc2hpZnQgJSAyNiAhPT0gMCkgewogICAgICAgIHRoaXMuc2hpZnQgKz0gMjYgLSAodGhpcy5zaGlmdCAlIDI2KTsKICAgICAgfQoKICAgICAgdGhpcy5yID0gbmV3IEJOKDEpLml1c2hsbih0aGlzLnNoaWZ0KTsKICAgICAgdGhpcy5yMiA9IHRoaXMuaW1vZCh0aGlzLnIuc3FyKCkpOwogICAgICB0aGlzLnJpbnYgPSB0aGlzLnIuX2ludm1wKHRoaXMubSk7CgogICAgICB0aGlzLm1pbnYgPSB0aGlzLnJpbnYubXVsKHRoaXMucikuaXN1Ym4oMSkuZGl2KHRoaXMubSk7CiAgICAgIHRoaXMubWludiA9IHRoaXMubWludi51bW9kKHRoaXMucik7CiAgICAgIHRoaXMubWludiA9IHRoaXMuci5zdWIodGhpcy5taW52KTsKICAgIH0KICAgIGluaGVyaXRzKE1vbnQsIFJlZCk7CgogICAgTW9udC5wcm90b3R5cGUuY29udmVydFRvID0gZnVuY3Rpb24gY29udmVydFRvIChudW0pIHsKICAgICAgcmV0dXJuIHRoaXMuaW1vZChudW0udXNobG4odGhpcy5zaGlmdCkpOwogICAgfTsKCiAgICBNb250LnByb3RvdHlwZS5jb252ZXJ0RnJvbSA9IGZ1bmN0aW9uIGNvbnZlcnRGcm9tIChudW0pIHsKICAgICAgdmFyIHIgPSB0aGlzLmltb2QobnVtLm11bCh0aGlzLnJpbnYpKTsKICAgICAgci5yZWQgPSBudWxsOwogICAgICByZXR1cm4gcjsKICAgIH07CgogICAgTW9udC5wcm90b3R5cGUuaW11bCA9IGZ1bmN0aW9uIGltdWwgKGEsIGIpIHsKICAgICAgaWYgKGEuaXNaZXJvKCkgfHwgYi5pc1plcm8oKSkgewogICAgICAgIGEud29yZHNbMF0gPSAwOwogICAgICAgIGEubGVuZ3RoID0gMTsKICAgICAgICByZXR1cm4gYTsKICAgICAgfQoKICAgICAgdmFyIHQgPSBhLmltdWwoYik7CiAgICAgIHZhciBjID0gdC5tYXNrbih0aGlzLnNoaWZ0KS5tdWwodGhpcy5taW52KS5pbWFza24odGhpcy5zaGlmdCkubXVsKHRoaXMubSk7CiAgICAgIHZhciB1ID0gdC5pc3ViKGMpLml1c2hybih0aGlzLnNoaWZ0KTsKICAgICAgdmFyIHJlcyA9IHU7CgogICAgICBpZiAodS5jbXAodGhpcy5tKSA+PSAwKSB7CiAgICAgICAgcmVzID0gdS5pc3ViKHRoaXMubSk7CiAgICAgIH0gZWxzZSBpZiAodS5jbXBuKDApIDwgMCkgewogICAgICAgIHJlcyA9IHUuaWFkZCh0aGlzLm0pOwogICAgICB9CgogICAgICByZXR1cm4gcmVzLl9mb3JjZVJlZCh0aGlzKTsKICAgIH07CgogICAgTW9udC5wcm90b3R5cGUubXVsID0gZnVuY3Rpb24gbXVsIChhLCBiKSB7CiAgICAgIGlmIChhLmlzWmVybygpIHx8IGIuaXNaZXJvKCkpIHJldHVybiBuZXcgQk4oMCkuX2ZvcmNlUmVkKHRoaXMpOwoKICAgICAgdmFyIHQgPSBhLm11bChiKTsKICAgICAgdmFyIGMgPSB0Lm1hc2tuKHRoaXMuc2hpZnQpLm11bCh0aGlzLm1pbnYpLmltYXNrbih0aGlzLnNoaWZ0KS5tdWwodGhpcy5tKTsKICAgICAgdmFyIHUgPSB0LmlzdWIoYykuaXVzaHJuKHRoaXMuc2hpZnQpOwogICAgICB2YXIgcmVzID0gdTsKICAgICAgaWYgKHUuY21wKHRoaXMubSkgPj0gMCkgewogICAgICAgIHJlcyA9IHUuaXN1Yih0aGlzLm0pOwogICAgICB9IGVsc2UgaWYgKHUuY21wbigwKSA8IDApIHsKICAgICAgICByZXMgPSB1LmlhZGQodGhpcy5tKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlcy5fZm9yY2VSZWQodGhpcyk7CiAgICB9OwoKICAgIE1vbnQucHJvdG90eXBlLmludm0gPSBmdW5jdGlvbiBpbnZtIChhKSB7CiAgICAgIC8vIChBUileLTEgKiBSXjIgPSAoQV4tMSAqIFJeLTEpICogUl4yID0gQV4tMSAqIFIKICAgICAgdmFyIHJlcyA9IHRoaXMuaW1vZChhLl9pbnZtcCh0aGlzLm0pLm11bCh0aGlzLnIyKSk7CiAgICAgIHJldHVybiByZXMuX2ZvcmNlUmVkKHRoaXMpOwogICAgfTsKICB9KShtb2R1bGUsIGNvbW1vbmpzR2xvYmFsKTsKICB9KGJuJDEpKTsKCiAgdmFyIEJOJDMgPSBibiQxLmV4cG9ydHM7CiAgdmFyIEJ1ZmZlciQ0ID0gc2FmZUJ1ZmZlciQxLmV4cG9ydHMuQnVmZmVyOwoKICBmdW5jdGlvbiB3aXRoUHVibGljJDIgKHBhZGRlZE1zZywga2V5KSB7CiAgICByZXR1cm4gQnVmZmVyJDQuZnJvbShwYWRkZWRNc2cKICAgICAgLnRvUmVkKEJOJDMubW9udChrZXkubW9kdWx1cykpCiAgICAgIC5yZWRQb3cobmV3IEJOJDMoa2V5LnB1YmxpY0V4cG9uZW50KSkKICAgICAgLmZyb21SZWQoKQogICAgICAudG9BcnJheSgpKQogIH0KCiAgdmFyIHdpdGhQdWJsaWNfMSA9IHdpdGhQdWJsaWMkMjsKCiAgdmFyIGJuID0ge2V4cG9ydHM6IHt9fTsKCiAgKGZ1bmN0aW9uIChtb2R1bGUpIHsKICAoZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewoKICAgIC8vIFV0aWxzCiAgICBmdW5jdGlvbiBhc3NlcnQgKHZhbCwgbXNnKSB7CiAgICAgIGlmICghdmFsKSB0aHJvdyBuZXcgRXJyb3IobXNnIHx8ICdBc3NlcnRpb24gZmFpbGVkJyk7CiAgICB9CgogICAgLy8gQ291bGQgdXNlIGBpbmhlcml0c2AgbW9kdWxlLCBidXQgZG9uJ3Qgd2FudCB0byBtb3ZlIGZyb20gc2luZ2xlIGZpbGUKICAgIC8vIGFyY2hpdGVjdHVyZSB5ZXQuCiAgICBmdW5jdGlvbiBpbmhlcml0cyAoY3Rvciwgc3VwZXJDdG9yKSB7CiAgICAgIGN0b3Iuc3VwZXJfID0gc3VwZXJDdG9yOwogICAgICB2YXIgVGVtcEN0b3IgPSBmdW5jdGlvbiAoKSB7fTsKICAgICAgVGVtcEN0b3IucHJvdG90eXBlID0gc3VwZXJDdG9yLnByb3RvdHlwZTsKICAgICAgY3Rvci5wcm90b3R5cGUgPSBuZXcgVGVtcEN0b3IoKTsKICAgICAgY3Rvci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBjdG9yOwogICAgfQoKICAgIC8vIEJOCgogICAgZnVuY3Rpb24gQk4gKG51bWJlciwgYmFzZSwgZW5kaWFuKSB7CiAgICAgIGlmIChCTi5pc0JOKG51bWJlcikpIHsKICAgICAgICByZXR1cm4gbnVtYmVyOwogICAgICB9CgogICAgICB0aGlzLm5lZ2F0aXZlID0gMDsKICAgICAgdGhpcy53b3JkcyA9IG51bGw7CiAgICAgIHRoaXMubGVuZ3RoID0gMDsKCiAgICAgIC8vIFJlZHVjdGlvbiBjb250ZXh0CiAgICAgIHRoaXMucmVkID0gbnVsbDsKCiAgICAgIGlmIChudW1iZXIgIT09IG51bGwpIHsKICAgICAgICBpZiAoYmFzZSA9PT0gJ2xlJyB8fCBiYXNlID09PSAnYmUnKSB7CiAgICAgICAgICBlbmRpYW4gPSBiYXNlOwogICAgICAgICAgYmFzZSA9IDEwOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5faW5pdChudW1iZXIgfHwgMCwgYmFzZSB8fCAxMCwgZW5kaWFuIHx8ICdiZScpOwogICAgICB9CiAgICB9CiAgICBpZiAodHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpIHsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBCTjsKICAgIH0gZWxzZSB7CiAgICAgIGV4cG9ydHMuQk4gPSBCTjsKICAgIH0KCiAgICBCTi5CTiA9IEJOOwogICAgQk4ud29yZFNpemUgPSAyNjsKCiAgICB2YXIgQnVmZmVyOwogICAgdHJ5IHsKICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiB3aW5kb3cuQnVmZmVyICE9PSAndW5kZWZpbmVkJykgewogICAgICAgIEJ1ZmZlciA9IHdpbmRvdy5CdWZmZXI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgQnVmZmVyID0gcmVxdWlyZSgnYnVmZmVyJykuQnVmZmVyOwogICAgICB9CiAgICB9IGNhdGNoIChlKSB7CiAgICB9CgogICAgQk4uaXNCTiA9IGZ1bmN0aW9uIGlzQk4gKG51bSkgewogICAgICBpZiAobnVtIGluc3RhbmNlb2YgQk4pIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQoKICAgICAgcmV0dXJuIG51bSAhPT0gbnVsbCAmJiB0eXBlb2YgbnVtID09PSAnb2JqZWN0JyAmJgogICAgICAgIG51bS5jb25zdHJ1Y3Rvci53b3JkU2l6ZSA9PT0gQk4ud29yZFNpemUgJiYgQXJyYXkuaXNBcnJheShudW0ud29yZHMpOwogICAgfTsKCiAgICBCTi5tYXggPSBmdW5jdGlvbiBtYXggKGxlZnQsIHJpZ2h0KSB7CiAgICAgIGlmIChsZWZ0LmNtcChyaWdodCkgPiAwKSByZXR1cm4gbGVmdDsKICAgICAgcmV0dXJuIHJpZ2h0OwogICAgfTsKCiAgICBCTi5taW4gPSBmdW5jdGlvbiBtaW4gKGxlZnQsIHJpZ2h0KSB7CiAgICAgIGlmIChsZWZ0LmNtcChyaWdodCkgPCAwKSByZXR1cm4gbGVmdDsKICAgICAgcmV0dXJuIHJpZ2h0OwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuX2luaXQgPSBmdW5jdGlvbiBpbml0IChudW1iZXIsIGJhc2UsIGVuZGlhbikgewogICAgICBpZiAodHlwZW9mIG51bWJlciA9PT0gJ251bWJlcicpIHsKICAgICAgICByZXR1cm4gdGhpcy5faW5pdE51bWJlcihudW1iZXIsIGJhc2UsIGVuZGlhbik7CiAgICAgIH0KCiAgICAgIGlmICh0eXBlb2YgbnVtYmVyID09PSAnb2JqZWN0JykgewogICAgICAgIHJldHVybiB0aGlzLl9pbml0QXJyYXkobnVtYmVyLCBiYXNlLCBlbmRpYW4pOwogICAgICB9CgogICAgICBpZiAoYmFzZSA9PT0gJ2hleCcpIHsKICAgICAgICBiYXNlID0gMTY7CiAgICAgIH0KICAgICAgYXNzZXJ0KGJhc2UgPT09IChiYXNlIHwgMCkgJiYgYmFzZSA+PSAyICYmIGJhc2UgPD0gMzYpOwoKICAgICAgbnVtYmVyID0gbnVtYmVyLnRvU3RyaW5nKCkucmVwbGFjZSgvXHMrL2csICcnKTsKICAgICAgdmFyIHN0YXJ0ID0gMDsKICAgICAgaWYgKG51bWJlclswXSA9PT0gJy0nKSB7CiAgICAgICAgc3RhcnQrKzsKICAgICAgICB0aGlzLm5lZ2F0aXZlID0gMTsKICAgICAgfQoKICAgICAgaWYgKHN0YXJ0IDwgbnVtYmVyLmxlbmd0aCkgewogICAgICAgIGlmIChiYXNlID09PSAxNikgewogICAgICAgICAgdGhpcy5fcGFyc2VIZXgobnVtYmVyLCBzdGFydCwgZW5kaWFuKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5fcGFyc2VCYXNlKG51bWJlciwgYmFzZSwgc3RhcnQpOwogICAgICAgICAgaWYgKGVuZGlhbiA9PT0gJ2xlJykgewogICAgICAgICAgICB0aGlzLl9pbml0QXJyYXkodGhpcy50b0FycmF5KCksIGJhc2UsIGVuZGlhbik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5faW5pdE51bWJlciA9IGZ1bmN0aW9uIF9pbml0TnVtYmVyIChudW1iZXIsIGJhc2UsIGVuZGlhbikgewogICAgICBpZiAobnVtYmVyIDwgMCkgewogICAgICAgIHRoaXMubmVnYXRpdmUgPSAxOwogICAgICAgIG51bWJlciA9IC1udW1iZXI7CiAgICAgIH0KICAgICAgaWYgKG51bWJlciA8IDB4NDAwMDAwMCkgewogICAgICAgIHRoaXMud29yZHMgPSBbbnVtYmVyICYgMHgzZmZmZmZmXTsKICAgICAgICB0aGlzLmxlbmd0aCA9IDE7CiAgICAgIH0gZWxzZSBpZiAobnVtYmVyIDwgMHgxMDAwMDAwMDAwMDAwMCkgewogICAgICAgIHRoaXMud29yZHMgPSBbCiAgICAgICAgICBudW1iZXIgJiAweDNmZmZmZmYsCiAgICAgICAgICAobnVtYmVyIC8gMHg0MDAwMDAwKSAmIDB4M2ZmZmZmZgogICAgICAgIF07CiAgICAgICAgdGhpcy5sZW5ndGggPSAyOwogICAgICB9IGVsc2UgewogICAgICAgIGFzc2VydChudW1iZXIgPCAweDIwMDAwMDAwMDAwMDAwKTsgLy8gMiBeIDUzICh1bnNhZmUpCiAgICAgICAgdGhpcy53b3JkcyA9IFsKICAgICAgICAgIG51bWJlciAmIDB4M2ZmZmZmZiwKICAgICAgICAgIChudW1iZXIgLyAweDQwMDAwMDApICYgMHgzZmZmZmZmLAogICAgICAgICAgMQogICAgICAgIF07CiAgICAgICAgdGhpcy5sZW5ndGggPSAzOwogICAgICB9CgogICAgICBpZiAoZW5kaWFuICE9PSAnbGUnKSByZXR1cm47CgogICAgICAvLyBSZXZlcnNlIHRoZSBieXRlcwogICAgICB0aGlzLl9pbml0QXJyYXkodGhpcy50b0FycmF5KCksIGJhc2UsIGVuZGlhbik7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5faW5pdEFycmF5ID0gZnVuY3Rpb24gX2luaXRBcnJheSAobnVtYmVyLCBiYXNlLCBlbmRpYW4pIHsKICAgICAgLy8gUGVyaGFwcyBhIFVpbnQ4QXJyYXkKICAgICAgYXNzZXJ0KHR5cGVvZiBudW1iZXIubGVuZ3RoID09PSAnbnVtYmVyJyk7CiAgICAgIGlmIChudW1iZXIubGVuZ3RoIDw9IDApIHsKICAgICAgICB0aGlzLndvcmRzID0gWzBdOwogICAgICAgIHRoaXMubGVuZ3RoID0gMTsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfQoKICAgICAgdGhpcy5sZW5ndGggPSBNYXRoLmNlaWwobnVtYmVyLmxlbmd0aCAvIDMpOwogICAgICB0aGlzLndvcmRzID0gbmV3IEFycmF5KHRoaXMubGVuZ3RoKTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy53b3Jkc1tpXSA9IDA7CiAgICAgIH0KCiAgICAgIHZhciBqLCB3OwogICAgICB2YXIgb2ZmID0gMDsKICAgICAgaWYgKGVuZGlhbiA9PT0gJ2JlJykgewogICAgICAgIGZvciAoaSA9IG51bWJlci5sZW5ndGggLSAxLCBqID0gMDsgaSA+PSAwOyBpIC09IDMpIHsKICAgICAgICAgIHcgPSBudW1iZXJbaV0gfCAobnVtYmVyW2kgLSAxXSA8PCA4KSB8IChudW1iZXJbaSAtIDJdIDw8IDE2KTsKICAgICAgICAgIHRoaXMud29yZHNbal0gfD0gKHcgPDwgb2ZmKSAmIDB4M2ZmZmZmZjsKICAgICAgICAgIHRoaXMud29yZHNbaiArIDFdID0gKHcgPj4+ICgyNiAtIG9mZikpICYgMHgzZmZmZmZmOwogICAgICAgICAgb2ZmICs9IDI0OwogICAgICAgICAgaWYgKG9mZiA+PSAyNikgewogICAgICAgICAgICBvZmYgLT0gMjY7CiAgICAgICAgICAgIGorKzsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoZW5kaWFuID09PSAnbGUnKSB7CiAgICAgICAgZm9yIChpID0gMCwgaiA9IDA7IGkgPCBudW1iZXIubGVuZ3RoOyBpICs9IDMpIHsKICAgICAgICAgIHcgPSBudW1iZXJbaV0gfCAobnVtYmVyW2kgKyAxXSA8PCA4KSB8IChudW1iZXJbaSArIDJdIDw8IDE2KTsKICAgICAgICAgIHRoaXMud29yZHNbal0gfD0gKHcgPDwgb2ZmKSAmIDB4M2ZmZmZmZjsKICAgICAgICAgIHRoaXMud29yZHNbaiArIDFdID0gKHcgPj4+ICgyNiAtIG9mZikpICYgMHgzZmZmZmZmOwogICAgICAgICAgb2ZmICs9IDI0OwogICAgICAgICAgaWYgKG9mZiA+PSAyNikgewogICAgICAgICAgICBvZmYgLT0gMjY7CiAgICAgICAgICAgIGorKzsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMuX3N0cmlwKCk7CiAgICB9OwoKICAgIGZ1bmN0aW9uIHBhcnNlSGV4NEJpdHMgKHN0cmluZywgaW5kZXgpIHsKICAgICAgdmFyIGMgPSBzdHJpbmcuY2hhckNvZGVBdChpbmRleCk7CiAgICAgIC8vICcwJyAtICc5JwogICAgICBpZiAoYyA+PSA0OCAmJiBjIDw9IDU3KSB7CiAgICAgICAgcmV0dXJuIGMgLSA0ODsKICAgICAgLy8gJ0EnIC0gJ0YnCiAgICAgIH0gZWxzZSBpZiAoYyA+PSA2NSAmJiBjIDw9IDcwKSB7CiAgICAgICAgcmV0dXJuIGMgLSA1NTsKICAgICAgLy8gJ2EnIC0gJ2YnCiAgICAgIH0gZWxzZSBpZiAoYyA+PSA5NyAmJiBjIDw9IDEwMikgewogICAgICAgIHJldHVybiBjIC0gODc7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYXNzZXJ0KGZhbHNlLCAnSW52YWxpZCBjaGFyYWN0ZXIgaW4gJyArIHN0cmluZyk7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBwYXJzZUhleEJ5dGUgKHN0cmluZywgbG93ZXJCb3VuZCwgaW5kZXgpIHsKICAgICAgdmFyIHIgPSBwYXJzZUhleDRCaXRzKHN0cmluZywgaW5kZXgpOwogICAgICBpZiAoaW5kZXggLSAxID49IGxvd2VyQm91bmQpIHsKICAgICAgICByIHw9IHBhcnNlSGV4NEJpdHMoc3RyaW5nLCBpbmRleCAtIDEpIDw8IDQ7CiAgICAgIH0KICAgICAgcmV0dXJuIHI7CiAgICB9CgogICAgQk4ucHJvdG90eXBlLl9wYXJzZUhleCA9IGZ1bmN0aW9uIF9wYXJzZUhleCAobnVtYmVyLCBzdGFydCwgZW5kaWFuKSB7CiAgICAgIC8vIENyZWF0ZSBwb3NzaWJseSBiaWdnZXIgYXJyYXkgdG8gZW5zdXJlIHRoYXQgaXQgZml0cyB0aGUgbnVtYmVyCiAgICAgIHRoaXMubGVuZ3RoID0gTWF0aC5jZWlsKChudW1iZXIubGVuZ3RoIC0gc3RhcnQpIC8gNik7CiAgICAgIHRoaXMud29yZHMgPSBuZXcgQXJyYXkodGhpcy5sZW5ndGgpOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHsKICAgICAgICB0aGlzLndvcmRzW2ldID0gMDsKICAgICAgfQoKICAgICAgLy8gMjQtYml0cyBjaHVua3MKICAgICAgdmFyIG9mZiA9IDA7CiAgICAgIHZhciBqID0gMDsKCiAgICAgIHZhciB3OwogICAgICBpZiAoZW5kaWFuID09PSAnYmUnKSB7CiAgICAgICAgZm9yIChpID0gbnVtYmVyLmxlbmd0aCAtIDE7IGkgPj0gc3RhcnQ7IGkgLT0gMikgewogICAgICAgICAgdyA9IHBhcnNlSGV4Qnl0ZShudW1iZXIsIHN0YXJ0LCBpKSA8PCBvZmY7CiAgICAgICAgICB0aGlzLndvcmRzW2pdIHw9IHcgJiAweDNmZmZmZmY7CiAgICAgICAgICBpZiAob2ZmID49IDE4KSB7CiAgICAgICAgICAgIG9mZiAtPSAxODsKICAgICAgICAgICAgaiArPSAxOwogICAgICAgICAgICB0aGlzLndvcmRzW2pdIHw9IHcgPj4+IDI2OwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgb2ZmICs9IDg7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHZhciBwYXJzZUxlbmd0aCA9IG51bWJlci5sZW5ndGggLSBzdGFydDsKICAgICAgICBmb3IgKGkgPSBwYXJzZUxlbmd0aCAlIDIgPT09IDAgPyBzdGFydCArIDEgOiBzdGFydDsgaSA8IG51bWJlci5sZW5ndGg7IGkgKz0gMikgewogICAgICAgICAgdyA9IHBhcnNlSGV4Qnl0ZShudW1iZXIsIHN0YXJ0LCBpKSA8PCBvZmY7CiAgICAgICAgICB0aGlzLndvcmRzW2pdIHw9IHcgJiAweDNmZmZmZmY7CiAgICAgICAgICBpZiAob2ZmID49IDE4KSB7CiAgICAgICAgICAgIG9mZiAtPSAxODsKICAgICAgICAgICAgaiArPSAxOwogICAgICAgICAgICB0aGlzLndvcmRzW2pdIHw9IHcgPj4+IDI2OwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgb2ZmICs9IDg7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLl9zdHJpcCgpOwogICAgfTsKCiAgICBmdW5jdGlvbiBwYXJzZUJhc2UgKHN0ciwgc3RhcnQsIGVuZCwgbXVsKSB7CiAgICAgIHZhciByID0gMDsKICAgICAgdmFyIGIgPSAwOwogICAgICB2YXIgbGVuID0gTWF0aC5taW4oc3RyLmxlbmd0aCwgZW5kKTsKICAgICAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgbGVuOyBpKyspIHsKICAgICAgICB2YXIgYyA9IHN0ci5jaGFyQ29kZUF0KGkpIC0gNDg7CgogICAgICAgIHIgKj0gbXVsOwoKICAgICAgICAvLyAnYScKICAgICAgICBpZiAoYyA+PSA0OSkgewogICAgICAgICAgYiA9IGMgLSA0OSArIDB4YTsKCiAgICAgICAgLy8gJ0EnCiAgICAgICAgfSBlbHNlIGlmIChjID49IDE3KSB7CiAgICAgICAgICBiID0gYyAtIDE3ICsgMHhhOwoKICAgICAgICAvLyAnMCcgLSAnOScKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYiA9IGM7CiAgICAgICAgfQogICAgICAgIGFzc2VydChjID49IDAgJiYgYiA8IG11bCwgJ0ludmFsaWQgY2hhcmFjdGVyJyk7CiAgICAgICAgciArPSBiOwogICAgICB9CiAgICAgIHJldHVybiByOwogICAgfQoKICAgIEJOLnByb3RvdHlwZS5fcGFyc2VCYXNlID0gZnVuY3Rpb24gX3BhcnNlQmFzZSAobnVtYmVyLCBiYXNlLCBzdGFydCkgewogICAgICAvLyBJbml0aWFsaXplIGFzIHplcm8KICAgICAgdGhpcy53b3JkcyA9IFswXTsKICAgICAgdGhpcy5sZW5ndGggPSAxOwoKICAgICAgLy8gRmluZCBsZW5ndGggb2YgbGltYiBpbiBiYXNlCiAgICAgIGZvciAodmFyIGxpbWJMZW4gPSAwLCBsaW1iUG93ID0gMTsgbGltYlBvdyA8PSAweDNmZmZmZmY7IGxpbWJQb3cgKj0gYmFzZSkgewogICAgICAgIGxpbWJMZW4rKzsKICAgICAgfQogICAgICBsaW1iTGVuLS07CiAgICAgIGxpbWJQb3cgPSAobGltYlBvdyAvIGJhc2UpIHwgMDsKCiAgICAgIHZhciB0b3RhbCA9IG51bWJlci5sZW5ndGggLSBzdGFydDsKICAgICAgdmFyIG1vZCA9IHRvdGFsICUgbGltYkxlbjsKICAgICAgdmFyIGVuZCA9IE1hdGgubWluKHRvdGFsLCB0b3RhbCAtIG1vZCkgKyBzdGFydDsKCiAgICAgIHZhciB3b3JkID0gMDsKICAgICAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpICs9IGxpbWJMZW4pIHsKICAgICAgICB3b3JkID0gcGFyc2VCYXNlKG51bWJlciwgaSwgaSArIGxpbWJMZW4sIGJhc2UpOwoKICAgICAgICB0aGlzLmltdWxuKGxpbWJQb3cpOwogICAgICAgIGlmICh0aGlzLndvcmRzWzBdICsgd29yZCA8IDB4NDAwMDAwMCkgewogICAgICAgICAgdGhpcy53b3Jkc1swXSArPSB3b3JkOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLl9pYWRkbih3b3JkKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChtb2QgIT09IDApIHsKICAgICAgICB2YXIgcG93ID0gMTsKICAgICAgICB3b3JkID0gcGFyc2VCYXNlKG51bWJlciwgaSwgbnVtYmVyLmxlbmd0aCwgYmFzZSk7CgogICAgICAgIGZvciAoaSA9IDA7IGkgPCBtb2Q7IGkrKykgewogICAgICAgICAgcG93ICo9IGJhc2U7CiAgICAgICAgfQoKICAgICAgICB0aGlzLmltdWxuKHBvdyk7CiAgICAgICAgaWYgKHRoaXMud29yZHNbMF0gKyB3b3JkIDwgMHg0MDAwMDAwKSB7CiAgICAgICAgICB0aGlzLndvcmRzWzBdICs9IHdvcmQ7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuX2lhZGRuKHdvcmQpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5fc3RyaXAoKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmNvcHkgPSBmdW5jdGlvbiBjb3B5IChkZXN0KSB7CiAgICAgIGRlc3Qud29yZHMgPSBuZXcgQXJyYXkodGhpcy5sZW5ndGgpOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBkZXN0LndvcmRzW2ldID0gdGhpcy53b3Jkc1tpXTsKICAgICAgfQogICAgICBkZXN0Lmxlbmd0aCA9IHRoaXMubGVuZ3RoOwogICAgICBkZXN0Lm5lZ2F0aXZlID0gdGhpcy5uZWdhdGl2ZTsKICAgICAgZGVzdC5yZWQgPSB0aGlzLnJlZDsKICAgIH07CgogICAgZnVuY3Rpb24gbW92ZSAoZGVzdCwgc3JjKSB7CiAgICAgIGRlc3Qud29yZHMgPSBzcmMud29yZHM7CiAgICAgIGRlc3QubGVuZ3RoID0gc3JjLmxlbmd0aDsKICAgICAgZGVzdC5uZWdhdGl2ZSA9IHNyYy5uZWdhdGl2ZTsKICAgICAgZGVzdC5yZWQgPSBzcmMucmVkOwogICAgfQoKICAgIEJOLnByb3RvdHlwZS5fbW92ZSA9IGZ1bmN0aW9uIF9tb3ZlIChkZXN0KSB7CiAgICAgIG1vdmUoZGVzdCwgdGhpcyk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uIGNsb25lICgpIHsKICAgICAgdmFyIHIgPSBuZXcgQk4obnVsbCk7CiAgICAgIHRoaXMuY29weShyKTsKICAgICAgcmV0dXJuIHI7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5fZXhwYW5kID0gZnVuY3Rpb24gX2V4cGFuZCAoc2l6ZSkgewogICAgICB3aGlsZSAodGhpcy5sZW5ndGggPCBzaXplKSB7CiAgICAgICAgdGhpcy53b3Jkc1t0aGlzLmxlbmd0aCsrXSA9IDA7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXM7CiAgICB9OwoKICAgIC8vIFJlbW92ZSBsZWFkaW5nIGAwYCBmcm9tIGB0aGlzYAogICAgQk4ucHJvdG90eXBlLl9zdHJpcCA9IGZ1bmN0aW9uIHN0cmlwICgpIHsKICAgICAgd2hpbGUgKHRoaXMubGVuZ3RoID4gMSAmJiB0aGlzLndvcmRzW3RoaXMubGVuZ3RoIC0gMV0gPT09IDApIHsKICAgICAgICB0aGlzLmxlbmd0aC0tOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLl9ub3JtU2lnbigpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuX25vcm1TaWduID0gZnVuY3Rpb24gX25vcm1TaWduICgpIHsKICAgICAgLy8gLTAgPSAwCiAgICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMSAmJiB0aGlzLndvcmRzWzBdID09PSAwKSB7CiAgICAgICAgdGhpcy5uZWdhdGl2ZSA9IDA7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXM7CiAgICB9OwoKICAgIC8vIENoZWNrIFN5bWJvbC5mb3IgYmVjYXVzZSBub3QgZXZlcnl3aGVyZSB3aGVyZSBTeW1ib2wgZGVmaW5lZAogICAgLy8gU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL1N5bWJvbCNCcm93c2VyX2NvbXBhdGliaWxpdHkKICAgIGlmICh0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgU3ltYm9sLmZvciA9PT0gJ2Z1bmN0aW9uJykgewogICAgICB0cnkgewogICAgICAgIEJOLnByb3RvdHlwZVtTeW1ib2wuZm9yKCdub2RlanMudXRpbC5pbnNwZWN0LmN1c3RvbScpXSA9IGluc3BlY3Q7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBCTi5wcm90b3R5cGUuaW5zcGVjdCA9IGluc3BlY3Q7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIEJOLnByb3RvdHlwZS5pbnNwZWN0ID0gaW5zcGVjdDsKICAgIH0KCiAgICBmdW5jdGlvbiBpbnNwZWN0ICgpIHsKICAgICAgcmV0dXJuICh0aGlzLnJlZCA/ICc8Qk4tUjogJyA6ICc8Qk46ICcpICsgdGhpcy50b1N0cmluZygxNikgKyAnPic7CiAgICB9CgogICAgLyoKCiAgICB2YXIgemVyb3MgPSBbXTsKICAgIHZhciBncm91cFNpemVzID0gW107CiAgICB2YXIgZ3JvdXBCYXNlcyA9IFtdOwoKICAgIHZhciBzID0gJyc7CiAgICB2YXIgaSA9IC0xOwogICAgd2hpbGUgKCsraSA8IEJOLndvcmRTaXplKSB7CiAgICAgIHplcm9zW2ldID0gczsKICAgICAgcyArPSAnMCc7CiAgICB9CiAgICBncm91cFNpemVzWzBdID0gMDsKICAgIGdyb3VwU2l6ZXNbMV0gPSAwOwogICAgZ3JvdXBCYXNlc1swXSA9IDA7CiAgICBncm91cEJhc2VzWzFdID0gMDsKICAgIHZhciBiYXNlID0gMiAtIDE7CiAgICB3aGlsZSAoKytiYXNlIDwgMzYgKyAxKSB7CiAgICAgIHZhciBncm91cFNpemUgPSAwOwogICAgICB2YXIgZ3JvdXBCYXNlID0gMTsKICAgICAgd2hpbGUgKGdyb3VwQmFzZSA8ICgxIDw8IEJOLndvcmRTaXplKSAvIGJhc2UpIHsKICAgICAgICBncm91cEJhc2UgKj0gYmFzZTsKICAgICAgICBncm91cFNpemUgKz0gMTsKICAgICAgfQogICAgICBncm91cFNpemVzW2Jhc2VdID0gZ3JvdXBTaXplOwogICAgICBncm91cEJhc2VzW2Jhc2VdID0gZ3JvdXBCYXNlOwogICAgfQoKICAgICovCgogICAgdmFyIHplcm9zID0gWwogICAgICAnJywKICAgICAgJzAnLAogICAgICAnMDAnLAogICAgICAnMDAwJywKICAgICAgJzAwMDAnLAogICAgICAnMDAwMDAnLAogICAgICAnMDAwMDAwJywKICAgICAgJzAwMDAwMDAnLAogICAgICAnMDAwMDAwMDAnLAogICAgICAnMDAwMDAwMDAwJywKICAgICAgJzAwMDAwMDAwMDAnLAogICAgICAnMDAwMDAwMDAwMDAnLAogICAgICAnMDAwMDAwMDAwMDAwJywKICAgICAgJzAwMDAwMDAwMDAwMDAnLAogICAgICAnMDAwMDAwMDAwMDAwMDAnLAogICAgICAnMDAwMDAwMDAwMDAwMDAwJywKICAgICAgJzAwMDAwMDAwMDAwMDAwMDAnLAogICAgICAnMDAwMDAwMDAwMDAwMDAwMDAnLAogICAgICAnMDAwMDAwMDAwMDAwMDAwMDAwJywKICAgICAgJzAwMDAwMDAwMDAwMDAwMDAwMDAnLAogICAgICAnMDAwMDAwMDAwMDAwMDAwMDAwMDAnLAogICAgICAnMDAwMDAwMDAwMDAwMDAwMDAwMDAwJywKICAgICAgJzAwMDAwMDAwMDAwMDAwMDAwMDAwMDAnLAogICAgICAnMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAnLAogICAgICAnMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwJywKICAgICAgJzAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAnCiAgICBdOwoKICAgIHZhciBncm91cFNpemVzID0gWwogICAgICAwLCAwLAogICAgICAyNSwgMTYsIDEyLCAxMSwgMTAsIDksIDgsCiAgICAgIDgsIDcsIDcsIDcsIDcsIDYsIDYsCiAgICAgIDYsIDYsIDYsIDYsIDYsIDUsIDUsCiAgICAgIDUsIDUsIDUsIDUsIDUsIDUsIDUsCiAgICAgIDUsIDUsIDUsIDUsIDUsIDUsIDUKICAgIF07CgogICAgdmFyIGdyb3VwQmFzZXMgPSBbCiAgICAgIDAsIDAsCiAgICAgIDMzNTU0NDMyLCA0MzA0NjcyMSwgMTY3NzcyMTYsIDQ4ODI4MTI1LCA2MDQ2NjE3NiwgNDAzNTM2MDcsIDE2Nzc3MjE2LAogICAgICA0MzA0NjcyMSwgMTAwMDAwMDAsIDE5NDg3MTcxLCAzNTgzMTgwOCwgNjI3NDg1MTcsIDc1Mjk1MzYsIDExMzkwNjI1LAogICAgICAxNjc3NzIxNiwgMjQxMzc1NjksIDM0MDEyMjI0LCA0NzA0NTg4MSwgNjQwMDAwMDAsIDQwODQxMDEsIDUxNTM2MzIsCiAgICAgIDY0MzYzNDMsIDc5NjI2MjQsIDk3NjU2MjUsIDExODgxMzc2LCAxNDM0ODkwNywgMTcyMTAzNjgsIDIwNTExMTQ5LAogICAgICAyNDMwMDAwMCwgMjg2MjkxNTEsIDMzNTU0NDMyLCAzOTEzNTM5MywgNDU0MzU0MjQsIDUyNTIxODc1LCA2MDQ2NjE3NgogICAgXTsKCiAgICBCTi5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZyAoYmFzZSwgcGFkZGluZykgewogICAgICBiYXNlID0gYmFzZSB8fCAxMDsKICAgICAgcGFkZGluZyA9IHBhZGRpbmcgfCAwIHx8IDE7CgogICAgICB2YXIgb3V0OwogICAgICBpZiAoYmFzZSA9PT0gMTYgfHwgYmFzZSA9PT0gJ2hleCcpIHsKICAgICAgICBvdXQgPSAnJzsKICAgICAgICB2YXIgb2ZmID0gMDsKICAgICAgICB2YXIgY2FycnkgPSAwOwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgdmFyIHcgPSB0aGlzLndvcmRzW2ldOwogICAgICAgICAgdmFyIHdvcmQgPSAoKCh3IDw8IG9mZikgfCBjYXJyeSkgJiAweGZmZmZmZikudG9TdHJpbmcoMTYpOwogICAgICAgICAgY2FycnkgPSAodyA+Pj4gKDI0IC0gb2ZmKSkgJiAweGZmZmZmZjsKICAgICAgICAgIGlmIChjYXJyeSAhPT0gMCB8fCBpICE9PSB0aGlzLmxlbmd0aCAtIDEpIHsKICAgICAgICAgICAgb3V0ID0gemVyb3NbNiAtIHdvcmQubGVuZ3RoXSArIHdvcmQgKyBvdXQ7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBvdXQgPSB3b3JkICsgb3V0OwogICAgICAgICAgfQogICAgICAgICAgb2ZmICs9IDI7CiAgICAgICAgICBpZiAob2ZmID49IDI2KSB7CiAgICAgICAgICAgIG9mZiAtPSAyNjsKICAgICAgICAgICAgaS0tOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoY2FycnkgIT09IDApIHsKICAgICAgICAgIG91dCA9IGNhcnJ5LnRvU3RyaW5nKDE2KSArIG91dDsKICAgICAgICB9CiAgICAgICAgd2hpbGUgKG91dC5sZW5ndGggJSBwYWRkaW5nICE9PSAwKSB7CiAgICAgICAgICBvdXQgPSAnMCcgKyBvdXQ7CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLm5lZ2F0aXZlICE9PSAwKSB7CiAgICAgICAgICBvdXQgPSAnLScgKyBvdXQ7CiAgICAgICAgfQogICAgICAgIHJldHVybiBvdXQ7CiAgICAgIH0KCiAgICAgIGlmIChiYXNlID09PSAoYmFzZSB8IDApICYmIGJhc2UgPj0gMiAmJiBiYXNlIDw9IDM2KSB7CiAgICAgICAgLy8gdmFyIGdyb3VwU2l6ZSA9IE1hdGguZmxvb3IoQk4ud29yZFNpemUgKiBNYXRoLkxOMiAvIE1hdGgubG9nKGJhc2UpKTsKICAgICAgICB2YXIgZ3JvdXBTaXplID0gZ3JvdXBTaXplc1tiYXNlXTsKICAgICAgICAvLyB2YXIgZ3JvdXBCYXNlID0gTWF0aC5wb3coYmFzZSwgZ3JvdXBTaXplKTsKICAgICAgICB2YXIgZ3JvdXBCYXNlID0gZ3JvdXBCYXNlc1tiYXNlXTsKICAgICAgICBvdXQgPSAnJzsKICAgICAgICB2YXIgYyA9IHRoaXMuY2xvbmUoKTsKICAgICAgICBjLm5lZ2F0aXZlID0gMDsKICAgICAgICB3aGlsZSAoIWMuaXNaZXJvKCkpIHsKICAgICAgICAgIHZhciByID0gYy5tb2Rybihncm91cEJhc2UpLnRvU3RyaW5nKGJhc2UpOwogICAgICAgICAgYyA9IGMuaWRpdm4oZ3JvdXBCYXNlKTsKCiAgICAgICAgICBpZiAoIWMuaXNaZXJvKCkpIHsKICAgICAgICAgICAgb3V0ID0gemVyb3NbZ3JvdXBTaXplIC0gci5sZW5ndGhdICsgciArIG91dDsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG91dCA9IHIgKyBvdXQ7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLmlzWmVybygpKSB7CiAgICAgICAgICBvdXQgPSAnMCcgKyBvdXQ7CiAgICAgICAgfQogICAgICAgIHdoaWxlIChvdXQubGVuZ3RoICUgcGFkZGluZyAhPT0gMCkgewogICAgICAgICAgb3V0ID0gJzAnICsgb3V0OwogICAgICAgIH0KICAgICAgICBpZiAodGhpcy5uZWdhdGl2ZSAhPT0gMCkgewogICAgICAgICAgb3V0ID0gJy0nICsgb3V0OwogICAgICAgIH0KICAgICAgICByZXR1cm4gb3V0OwogICAgICB9CgogICAgICBhc3NlcnQoZmFsc2UsICdCYXNlIHNob3VsZCBiZSBiZXR3ZWVuIDIgYW5kIDM2Jyk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS50b051bWJlciA9IGZ1bmN0aW9uIHRvTnVtYmVyICgpIHsKICAgICAgdmFyIHJldCA9IHRoaXMud29yZHNbMF07CiAgICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMikgewogICAgICAgIHJldCArPSB0aGlzLndvcmRzWzFdICogMHg0MDAwMDAwOwogICAgICB9IGVsc2UgaWYgKHRoaXMubGVuZ3RoID09PSAzICYmIHRoaXMud29yZHNbMl0gPT09IDB4MDEpIHsKICAgICAgICAvLyBOT1RFOiBhdCB0aGlzIHN0YWdlIGl0IGlzIGtub3duIHRoYXQgdGhlIHRvcCBiaXQgaXMgc2V0CiAgICAgICAgcmV0ICs9IDB4MTAwMDAwMDAwMDAwMDAgKyAodGhpcy53b3Jkc1sxXSAqIDB4NDAwMDAwMCk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5sZW5ndGggPiAyKSB7CiAgICAgICAgYXNzZXJ0KGZhbHNlLCAnTnVtYmVyIGNhbiBvbmx5IHNhZmVseSBzdG9yZSB1cCB0byA1MyBiaXRzJyk7CiAgICAgIH0KICAgICAgcmV0dXJuICh0aGlzLm5lZ2F0aXZlICE9PSAwKSA/IC1yZXQgOiByZXQ7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04gKCkgewogICAgICByZXR1cm4gdGhpcy50b1N0cmluZygxNiwgMik7CiAgICB9OwoKICAgIGlmIChCdWZmZXIpIHsKICAgICAgQk4ucHJvdG90eXBlLnRvQnVmZmVyID0gZnVuY3Rpb24gdG9CdWZmZXIgKGVuZGlhbiwgbGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMudG9BcnJheUxpa2UoQnVmZmVyLCBlbmRpYW4sIGxlbmd0aCk7CiAgICAgIH07CiAgICB9CgogICAgQk4ucHJvdG90eXBlLnRvQXJyYXkgPSBmdW5jdGlvbiB0b0FycmF5IChlbmRpYW4sIGxlbmd0aCkgewogICAgICByZXR1cm4gdGhpcy50b0FycmF5TGlrZShBcnJheSwgZW5kaWFuLCBsZW5ndGgpOwogICAgfTsKCiAgICB2YXIgYWxsb2NhdGUgPSBmdW5jdGlvbiBhbGxvY2F0ZSAoQXJyYXlUeXBlLCBzaXplKSB7CiAgICAgIGlmIChBcnJheVR5cGUuYWxsb2NVbnNhZmUpIHsKICAgICAgICByZXR1cm4gQXJyYXlUeXBlLmFsbG9jVW5zYWZlKHNpemUpOwogICAgICB9CiAgICAgIHJldHVybiBuZXcgQXJyYXlUeXBlKHNpemUpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUudG9BcnJheUxpa2UgPSBmdW5jdGlvbiB0b0FycmF5TGlrZSAoQXJyYXlUeXBlLCBlbmRpYW4sIGxlbmd0aCkgewogICAgICB0aGlzLl9zdHJpcCgpOwoKICAgICAgdmFyIGJ5dGVMZW5ndGggPSB0aGlzLmJ5dGVMZW5ndGgoKTsKICAgICAgdmFyIHJlcUxlbmd0aCA9IGxlbmd0aCB8fCBNYXRoLm1heCgxLCBieXRlTGVuZ3RoKTsKICAgICAgYXNzZXJ0KGJ5dGVMZW5ndGggPD0gcmVxTGVuZ3RoLCAnYnl0ZSBhcnJheSBsb25nZXIgdGhhbiBkZXNpcmVkIGxlbmd0aCcpOwogICAgICBhc3NlcnQocmVxTGVuZ3RoID4gMCwgJ1JlcXVlc3RlZCBhcnJheSBsZW5ndGggPD0gMCcpOwoKICAgICAgdmFyIHJlcyA9IGFsbG9jYXRlKEFycmF5VHlwZSwgcmVxTGVuZ3RoKTsKICAgICAgdmFyIHBvc3RmaXggPSBlbmRpYW4gPT09ICdsZScgPyAnTEUnIDogJ0JFJzsKICAgICAgdGhpc1snX3RvQXJyYXlMaWtlJyArIHBvc3RmaXhdKHJlcywgYnl0ZUxlbmd0aCk7CiAgICAgIHJldHVybiByZXM7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5fdG9BcnJheUxpa2VMRSA9IGZ1bmN0aW9uIF90b0FycmF5TGlrZUxFIChyZXMsIGJ5dGVMZW5ndGgpIHsKICAgICAgdmFyIHBvc2l0aW9uID0gMDsKICAgICAgdmFyIGNhcnJ5ID0gMDsKCiAgICAgIGZvciAodmFyIGkgPSAwLCBzaGlmdCA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIHdvcmQgPSAodGhpcy53b3Jkc1tpXSA8PCBzaGlmdCkgfCBjYXJyeTsKCiAgICAgICAgcmVzW3Bvc2l0aW9uKytdID0gd29yZCAmIDB4ZmY7CiAgICAgICAgaWYgKHBvc2l0aW9uIDwgcmVzLmxlbmd0aCkgewogICAgICAgICAgcmVzW3Bvc2l0aW9uKytdID0gKHdvcmQgPj4gOCkgJiAweGZmOwogICAgICAgIH0KICAgICAgICBpZiAocG9zaXRpb24gPCByZXMubGVuZ3RoKSB7CiAgICAgICAgICByZXNbcG9zaXRpb24rK10gPSAod29yZCA+PiAxNikgJiAweGZmOwogICAgICAgIH0KCiAgICAgICAgaWYgKHNoaWZ0ID09PSA2KSB7CiAgICAgICAgICBpZiAocG9zaXRpb24gPCByZXMubGVuZ3RoKSB7CiAgICAgICAgICAgIHJlc1twb3NpdGlvbisrXSA9ICh3b3JkID4+IDI0KSAmIDB4ZmY7CiAgICAgICAgICB9CiAgICAgICAgICBjYXJyeSA9IDA7CiAgICAgICAgICBzaGlmdCA9IDA7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNhcnJ5ID0gd29yZCA+Pj4gMjQ7CiAgICAgICAgICBzaGlmdCArPSAyOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKHBvc2l0aW9uIDwgcmVzLmxlbmd0aCkgewogICAgICAgIHJlc1twb3NpdGlvbisrXSA9IGNhcnJ5OwoKICAgICAgICB3aGlsZSAocG9zaXRpb24gPCByZXMubGVuZ3RoKSB7CiAgICAgICAgICByZXNbcG9zaXRpb24rK10gPSAwOwogICAgICAgIH0KICAgICAgfQogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuX3RvQXJyYXlMaWtlQkUgPSBmdW5jdGlvbiBfdG9BcnJheUxpa2VCRSAocmVzLCBieXRlTGVuZ3RoKSB7CiAgICAgIHZhciBwb3NpdGlvbiA9IHJlcy5sZW5ndGggLSAxOwogICAgICB2YXIgY2FycnkgPSAwOwoKICAgICAgZm9yICh2YXIgaSA9IDAsIHNoaWZ0ID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgd29yZCA9ICh0aGlzLndvcmRzW2ldIDw8IHNoaWZ0KSB8IGNhcnJ5OwoKICAgICAgICByZXNbcG9zaXRpb24tLV0gPSB3b3JkICYgMHhmZjsKICAgICAgICBpZiAocG9zaXRpb24gPj0gMCkgewogICAgICAgICAgcmVzW3Bvc2l0aW9uLS1dID0gKHdvcmQgPj4gOCkgJiAweGZmOwogICAgICAgIH0KICAgICAgICBpZiAocG9zaXRpb24gPj0gMCkgewogICAgICAgICAgcmVzW3Bvc2l0aW9uLS1dID0gKHdvcmQgPj4gMTYpICYgMHhmZjsKICAgICAgICB9CgogICAgICAgIGlmIChzaGlmdCA9PT0gNikgewogICAgICAgICAgaWYgKHBvc2l0aW9uID49IDApIHsKICAgICAgICAgICAgcmVzW3Bvc2l0aW9uLS1dID0gKHdvcmQgPj4gMjQpICYgMHhmZjsKICAgICAgICAgIH0KICAgICAgICAgIGNhcnJ5ID0gMDsKICAgICAgICAgIHNoaWZ0ID0gMDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY2FycnkgPSB3b3JkID4+PiAyNDsKICAgICAgICAgIHNoaWZ0ICs9IDI7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAocG9zaXRpb24gPj0gMCkgewogICAgICAgIHJlc1twb3NpdGlvbi0tXSA9IGNhcnJ5OwoKICAgICAgICB3aGlsZSAocG9zaXRpb24gPj0gMCkgewogICAgICAgICAgcmVzW3Bvc2l0aW9uLS1dID0gMDsKICAgICAgICB9CiAgICAgIH0KICAgIH07CgogICAgaWYgKE1hdGguY2x6MzIpIHsKICAgICAgQk4ucHJvdG90eXBlLl9jb3VudEJpdHMgPSBmdW5jdGlvbiBfY291bnRCaXRzICh3KSB7CiAgICAgICAgcmV0dXJuIDMyIC0gTWF0aC5jbHozMih3KTsKICAgICAgfTsKICAgIH0gZWxzZSB7CiAgICAgIEJOLnByb3RvdHlwZS5fY291bnRCaXRzID0gZnVuY3Rpb24gX2NvdW50Qml0cyAodykgewogICAgICAgIHZhciB0ID0gdzsKICAgICAgICB2YXIgciA9IDA7CiAgICAgICAgaWYgKHQgPj0gMHgxMDAwKSB7CiAgICAgICAgICByICs9IDEzOwogICAgICAgICAgdCA+Pj49IDEzOwogICAgICAgIH0KICAgICAgICBpZiAodCA+PSAweDQwKSB7CiAgICAgICAgICByICs9IDc7CiAgICAgICAgICB0ID4+Pj0gNzsKICAgICAgICB9CiAgICAgICAgaWYgKHQgPj0gMHg4KSB7CiAgICAgICAgICByICs9IDQ7CiAgICAgICAgICB0ID4+Pj0gNDsKICAgICAgICB9CiAgICAgICAgaWYgKHQgPj0gMHgwMikgewogICAgICAgICAgciArPSAyOwogICAgICAgICAgdCA+Pj49IDI7CiAgICAgICAgfQogICAgICAgIHJldHVybiByICsgdDsKICAgICAgfTsKICAgIH0KCiAgICBCTi5wcm90b3R5cGUuX3plcm9CaXRzID0gZnVuY3Rpb24gX3plcm9CaXRzICh3KSB7CiAgICAgIC8vIFNob3J0LWN1dAogICAgICBpZiAodyA9PT0gMCkgcmV0dXJuIDI2OwoKICAgICAgdmFyIHQgPSB3OwogICAgICB2YXIgciA9IDA7CiAgICAgIGlmICgodCAmIDB4MWZmZikgPT09IDApIHsKICAgICAgICByICs9IDEzOwogICAgICAgIHQgPj4+PSAxMzsKICAgICAgfQogICAgICBpZiAoKHQgJiAweDdmKSA9PT0gMCkgewogICAgICAgIHIgKz0gNzsKICAgICAgICB0ID4+Pj0gNzsKICAgICAgfQogICAgICBpZiAoKHQgJiAweGYpID09PSAwKSB7CiAgICAgICAgciArPSA0OwogICAgICAgIHQgPj4+PSA0OwogICAgICB9CiAgICAgIGlmICgodCAmIDB4MykgPT09IDApIHsKICAgICAgICByICs9IDI7CiAgICAgICAgdCA+Pj49IDI7CiAgICAgIH0KICAgICAgaWYgKCh0ICYgMHgxKSA9PT0gMCkgewogICAgICAgIHIrKzsKICAgICAgfQogICAgICByZXR1cm4gcjsKICAgIH07CgogICAgLy8gUmV0dXJuIG51bWJlciBvZiB1c2VkIGJpdHMgaW4gYSBCTgogICAgQk4ucHJvdG90eXBlLmJpdExlbmd0aCA9IGZ1bmN0aW9uIGJpdExlbmd0aCAoKSB7CiAgICAgIHZhciB3ID0gdGhpcy53b3Jkc1t0aGlzLmxlbmd0aCAtIDFdOwogICAgICB2YXIgaGkgPSB0aGlzLl9jb3VudEJpdHModyk7CiAgICAgIHJldHVybiAodGhpcy5sZW5ndGggLSAxKSAqIDI2ICsgaGk7CiAgICB9OwoKICAgIGZ1bmN0aW9uIHRvQml0QXJyYXkgKG51bSkgewogICAgICB2YXIgdyA9IG5ldyBBcnJheShudW0uYml0TGVuZ3RoKCkpOwoKICAgICAgZm9yICh2YXIgYml0ID0gMDsgYml0IDwgdy5sZW5ndGg7IGJpdCsrKSB7CiAgICAgICAgdmFyIG9mZiA9IChiaXQgLyAyNikgfCAwOwogICAgICAgIHZhciB3Yml0ID0gYml0ICUgMjY7CgogICAgICAgIHdbYml0XSA9IChudW0ud29yZHNbb2ZmXSA+Pj4gd2JpdCkgJiAweDAxOwogICAgICB9CgogICAgICByZXR1cm4gdzsKICAgIH0KCiAgICAvLyBOdW1iZXIgb2YgdHJhaWxpbmcgemVybyBiaXRzCiAgICBCTi5wcm90b3R5cGUuemVyb0JpdHMgPSBmdW5jdGlvbiB6ZXJvQml0cyAoKSB7CiAgICAgIGlmICh0aGlzLmlzWmVybygpKSByZXR1cm4gMDsKCiAgICAgIHZhciByID0gMDsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIGIgPSB0aGlzLl96ZXJvQml0cyh0aGlzLndvcmRzW2ldKTsKICAgICAgICByICs9IGI7CiAgICAgICAgaWYgKGIgIT09IDI2KSBicmVhazsKICAgICAgfQogICAgICByZXR1cm4gcjsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmJ5dGVMZW5ndGggPSBmdW5jdGlvbiBieXRlTGVuZ3RoICgpIHsKICAgICAgcmV0dXJuIE1hdGguY2VpbCh0aGlzLmJpdExlbmd0aCgpIC8gOCk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS50b1R3b3MgPSBmdW5jdGlvbiB0b1R3b3MgKHdpZHRoKSB7CiAgICAgIGlmICh0aGlzLm5lZ2F0aXZlICE9PSAwKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuYWJzKCkuaW5vdG4od2lkdGgpLmlhZGRuKDEpOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLmNsb25lKCk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5mcm9tVHdvcyA9IGZ1bmN0aW9uIGZyb21Ud29zICh3aWR0aCkgewogICAgICBpZiAodGhpcy50ZXN0bih3aWR0aCAtIDEpKSB7CiAgICAgICAgcmV0dXJuIHRoaXMubm90bih3aWR0aCkuaWFkZG4oMSkuaW5lZygpOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLmNsb25lKCk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5pc05lZyA9IGZ1bmN0aW9uIGlzTmVnICgpIHsKICAgICAgcmV0dXJuIHRoaXMubmVnYXRpdmUgIT09IDA7CiAgICB9OwoKICAgIC8vIFJldHVybiBuZWdhdGl2ZSBjbG9uZSBvZiBgdGhpc2AKICAgIEJOLnByb3RvdHlwZS5uZWcgPSBmdW5jdGlvbiBuZWcgKCkgewogICAgICByZXR1cm4gdGhpcy5jbG9uZSgpLmluZWcoKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmluZWcgPSBmdW5jdGlvbiBpbmVnICgpIHsKICAgICAgaWYgKCF0aGlzLmlzWmVybygpKSB7CiAgICAgICAgdGhpcy5uZWdhdGl2ZSBePSAxOwogICAgICB9CgogICAgICByZXR1cm4gdGhpczsKICAgIH07CgogICAgLy8gT3IgYG51bWAgd2l0aCBgdGhpc2AgaW4tcGxhY2UKICAgIEJOLnByb3RvdHlwZS5pdW9yID0gZnVuY3Rpb24gaXVvciAobnVtKSB7CiAgICAgIHdoaWxlICh0aGlzLmxlbmd0aCA8IG51bS5sZW5ndGgpIHsKICAgICAgICB0aGlzLndvcmRzW3RoaXMubGVuZ3RoKytdID0gMDsKICAgICAgfQoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW0ubGVuZ3RoOyBpKyspIHsKICAgICAgICB0aGlzLndvcmRzW2ldID0gdGhpcy53b3Jkc1tpXSB8IG51bS53b3Jkc1tpXTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMuX3N0cmlwKCk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5pb3IgPSBmdW5jdGlvbiBpb3IgKG51bSkgewogICAgICBhc3NlcnQoKHRoaXMubmVnYXRpdmUgfCBudW0ubmVnYXRpdmUpID09PSAwKTsKICAgICAgcmV0dXJuIHRoaXMuaXVvcihudW0pOwogICAgfTsKCiAgICAvLyBPciBgbnVtYCB3aXRoIGB0aGlzYAogICAgQk4ucHJvdG90eXBlLm9yID0gZnVuY3Rpb24gb3IgKG51bSkgewogICAgICBpZiAodGhpcy5sZW5ndGggPiBudW0ubGVuZ3RoKSByZXR1cm4gdGhpcy5jbG9uZSgpLmlvcihudW0pOwogICAgICByZXR1cm4gbnVtLmNsb25lKCkuaW9yKHRoaXMpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUudW9yID0gZnVuY3Rpb24gdW9yIChudW0pIHsKICAgICAgaWYgKHRoaXMubGVuZ3RoID4gbnVtLmxlbmd0aCkgcmV0dXJuIHRoaXMuY2xvbmUoKS5pdW9yKG51bSk7CiAgICAgIHJldHVybiBudW0uY2xvbmUoKS5pdW9yKHRoaXMpOwogICAgfTsKCiAgICAvLyBBbmQgYG51bWAgd2l0aCBgdGhpc2AgaW4tcGxhY2UKICAgIEJOLnByb3RvdHlwZS5pdWFuZCA9IGZ1bmN0aW9uIGl1YW5kIChudW0pIHsKICAgICAgLy8gYiA9IG1pbi1sZW5ndGgobnVtLCB0aGlzKQogICAgICB2YXIgYjsKICAgICAgaWYgKHRoaXMubGVuZ3RoID4gbnVtLmxlbmd0aCkgewogICAgICAgIGIgPSBudW07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYiA9IHRoaXM7CiAgICAgIH0KCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYi5sZW5ndGg7IGkrKykgewogICAgICAgIHRoaXMud29yZHNbaV0gPSB0aGlzLndvcmRzW2ldICYgbnVtLndvcmRzW2ldOwogICAgICB9CgogICAgICB0aGlzLmxlbmd0aCA9IGIubGVuZ3RoOwoKICAgICAgcmV0dXJuIHRoaXMuX3N0cmlwKCk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5pYW5kID0gZnVuY3Rpb24gaWFuZCAobnVtKSB7CiAgICAgIGFzc2VydCgodGhpcy5uZWdhdGl2ZSB8IG51bS5uZWdhdGl2ZSkgPT09IDApOwogICAgICByZXR1cm4gdGhpcy5pdWFuZChudW0pOwogICAgfTsKCiAgICAvLyBBbmQgYG51bWAgd2l0aCBgdGhpc2AKICAgIEJOLnByb3RvdHlwZS5hbmQgPSBmdW5jdGlvbiBhbmQgKG51bSkgewogICAgICBpZiAodGhpcy5sZW5ndGggPiBudW0ubGVuZ3RoKSByZXR1cm4gdGhpcy5jbG9uZSgpLmlhbmQobnVtKTsKICAgICAgcmV0dXJuIG51bS5jbG9uZSgpLmlhbmQodGhpcyk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS51YW5kID0gZnVuY3Rpb24gdWFuZCAobnVtKSB7CiAgICAgIGlmICh0aGlzLmxlbmd0aCA+IG51bS5sZW5ndGgpIHJldHVybiB0aGlzLmNsb25lKCkuaXVhbmQobnVtKTsKICAgICAgcmV0dXJuIG51bS5jbG9uZSgpLml1YW5kKHRoaXMpOwogICAgfTsKCiAgICAvLyBYb3IgYG51bWAgd2l0aCBgdGhpc2AgaW4tcGxhY2UKICAgIEJOLnByb3RvdHlwZS5pdXhvciA9IGZ1bmN0aW9uIGl1eG9yIChudW0pIHsKICAgICAgLy8gYS5sZW5ndGggPiBiLmxlbmd0aAogICAgICB2YXIgYTsKICAgICAgdmFyIGI7CiAgICAgIGlmICh0aGlzLmxlbmd0aCA+IG51bS5sZW5ndGgpIHsKICAgICAgICBhID0gdGhpczsKICAgICAgICBiID0gbnVtOwogICAgICB9IGVsc2UgewogICAgICAgIGEgPSBudW07CiAgICAgICAgYiA9IHRoaXM7CiAgICAgIH0KCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYi5sZW5ndGg7IGkrKykgewogICAgICAgIHRoaXMud29yZHNbaV0gPSBhLndvcmRzW2ldIF4gYi53b3Jkc1tpXTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMgIT09IGEpIHsKICAgICAgICBmb3IgKDsgaSA8IGEubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHRoaXMud29yZHNbaV0gPSBhLndvcmRzW2ldOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5sZW5ndGggPSBhLmxlbmd0aDsKCiAgICAgIHJldHVybiB0aGlzLl9zdHJpcCgpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuaXhvciA9IGZ1bmN0aW9uIGl4b3IgKG51bSkgewogICAgICBhc3NlcnQoKHRoaXMubmVnYXRpdmUgfCBudW0ubmVnYXRpdmUpID09PSAwKTsKICAgICAgcmV0dXJuIHRoaXMuaXV4b3IobnVtKTsKICAgIH07CgogICAgLy8gWG9yIGBudW1gIHdpdGggYHRoaXNgCiAgICBCTi5wcm90b3R5cGUueG9yID0gZnVuY3Rpb24geG9yIChudW0pIHsKICAgICAgaWYgKHRoaXMubGVuZ3RoID4gbnVtLmxlbmd0aCkgcmV0dXJuIHRoaXMuY2xvbmUoKS5peG9yKG51bSk7CiAgICAgIHJldHVybiBudW0uY2xvbmUoKS5peG9yKHRoaXMpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUudXhvciA9IGZ1bmN0aW9uIHV4b3IgKG51bSkgewogICAgICBpZiAodGhpcy5sZW5ndGggPiBudW0ubGVuZ3RoKSByZXR1cm4gdGhpcy5jbG9uZSgpLml1eG9yKG51bSk7CiAgICAgIHJldHVybiBudW0uY2xvbmUoKS5pdXhvcih0aGlzKTsKICAgIH07CgogICAgLy8gTm90IGBgdGhpc2BgIHdpdGggYGB3aWR0aGBgIGJpdHdpZHRoCiAgICBCTi5wcm90b3R5cGUuaW5vdG4gPSBmdW5jdGlvbiBpbm90biAod2lkdGgpIHsKICAgICAgYXNzZXJ0KHR5cGVvZiB3aWR0aCA9PT0gJ251bWJlcicgJiYgd2lkdGggPj0gMCk7CgogICAgICB2YXIgYnl0ZXNOZWVkZWQgPSBNYXRoLmNlaWwod2lkdGggLyAyNikgfCAwOwogICAgICB2YXIgYml0c0xlZnQgPSB3aWR0aCAlIDI2OwoKICAgICAgLy8gRXh0ZW5kIHRoZSBidWZmZXIgd2l0aCBsZWFkaW5nIHplcm9lcwogICAgICB0aGlzLl9leHBhbmQoYnl0ZXNOZWVkZWQpOwoKICAgICAgaWYgKGJpdHNMZWZ0ID4gMCkgewogICAgICAgIGJ5dGVzTmVlZGVkLS07CiAgICAgIH0KCiAgICAgIC8vIEhhbmRsZSBjb21wbGV0ZSB3b3JkcwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJ5dGVzTmVlZGVkOyBpKyspIHsKICAgICAgICB0aGlzLndvcmRzW2ldID0gfnRoaXMud29yZHNbaV0gJiAweDNmZmZmZmY7CiAgICAgIH0KCiAgICAgIC8vIEhhbmRsZSB0aGUgcmVzaWR1ZQogICAgICBpZiAoYml0c0xlZnQgPiAwKSB7CiAgICAgICAgdGhpcy53b3Jkc1tpXSA9IH50aGlzLndvcmRzW2ldICYgKDB4M2ZmZmZmZiA+PiAoMjYgLSBiaXRzTGVmdCkpOwogICAgICB9CgogICAgICAvLyBBbmQgcmVtb3ZlIGxlYWRpbmcgemVyb2VzCiAgICAgIHJldHVybiB0aGlzLl9zdHJpcCgpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUubm90biA9IGZ1bmN0aW9uIG5vdG4gKHdpZHRoKSB7CiAgICAgIHJldHVybiB0aGlzLmNsb25lKCkuaW5vdG4od2lkdGgpOwogICAgfTsKCiAgICAvLyBTZXQgYGJpdGAgb2YgYHRoaXNgCiAgICBCTi5wcm90b3R5cGUuc2V0biA9IGZ1bmN0aW9uIHNldG4gKGJpdCwgdmFsKSB7CiAgICAgIGFzc2VydCh0eXBlb2YgYml0ID09PSAnbnVtYmVyJyAmJiBiaXQgPj0gMCk7CgogICAgICB2YXIgb2ZmID0gKGJpdCAvIDI2KSB8IDA7CiAgICAgIHZhciB3Yml0ID0gYml0ICUgMjY7CgogICAgICB0aGlzLl9leHBhbmQob2ZmICsgMSk7CgogICAgICBpZiAodmFsKSB7CiAgICAgICAgdGhpcy53b3Jkc1tvZmZdID0gdGhpcy53b3Jkc1tvZmZdIHwgKDEgPDwgd2JpdCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy53b3Jkc1tvZmZdID0gdGhpcy53b3Jkc1tvZmZdICYgfigxIDw8IHdiaXQpOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5fc3RyaXAoKTsKICAgIH07CgogICAgLy8gQWRkIGBudW1gIHRvIGB0aGlzYCBpbi1wbGFjZQogICAgQk4ucHJvdG90eXBlLmlhZGQgPSBmdW5jdGlvbiBpYWRkIChudW0pIHsKICAgICAgdmFyIHI7CgogICAgICAvLyBuZWdhdGl2ZSArIHBvc2l0aXZlCiAgICAgIGlmICh0aGlzLm5lZ2F0aXZlICE9PSAwICYmIG51bS5uZWdhdGl2ZSA9PT0gMCkgewogICAgICAgIHRoaXMubmVnYXRpdmUgPSAwOwogICAgICAgIHIgPSB0aGlzLmlzdWIobnVtKTsKICAgICAgICB0aGlzLm5lZ2F0aXZlIF49IDE7CiAgICAgICAgcmV0dXJuIHRoaXMuX25vcm1TaWduKCk7CgogICAgICAvLyBwb3NpdGl2ZSArIG5lZ2F0aXZlCiAgICAgIH0gZWxzZSBpZiAodGhpcy5uZWdhdGl2ZSA9PT0gMCAmJiBudW0ubmVnYXRpdmUgIT09IDApIHsKICAgICAgICBudW0ubmVnYXRpdmUgPSAwOwogICAgICAgIHIgPSB0aGlzLmlzdWIobnVtKTsKICAgICAgICBudW0ubmVnYXRpdmUgPSAxOwogICAgICAgIHJldHVybiByLl9ub3JtU2lnbigpOwogICAgICB9CgogICAgICAvLyBhLmxlbmd0aCA+IGIubGVuZ3RoCiAgICAgIHZhciBhLCBiOwogICAgICBpZiAodGhpcy5sZW5ndGggPiBudW0ubGVuZ3RoKSB7CiAgICAgICAgYSA9IHRoaXM7CiAgICAgICAgYiA9IG51bTsKICAgICAgfSBlbHNlIHsKICAgICAgICBhID0gbnVtOwogICAgICAgIGIgPSB0aGlzOwogICAgICB9CgogICAgICB2YXIgY2FycnkgPSAwOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGIubGVuZ3RoOyBpKyspIHsKICAgICAgICByID0gKGEud29yZHNbaV0gfCAwKSArIChiLndvcmRzW2ldIHwgMCkgKyBjYXJyeTsKICAgICAgICB0aGlzLndvcmRzW2ldID0gciAmIDB4M2ZmZmZmZjsKICAgICAgICBjYXJyeSA9IHIgPj4+IDI2OwogICAgICB9CiAgICAgIGZvciAoOyBjYXJyeSAhPT0gMCAmJiBpIDwgYS5sZW5ndGg7IGkrKykgewogICAgICAgIHIgPSAoYS53b3Jkc1tpXSB8IDApICsgY2Fycnk7CiAgICAgICAgdGhpcy53b3Jkc1tpXSA9IHIgJiAweDNmZmZmZmY7CiAgICAgICAgY2FycnkgPSByID4+PiAyNjsKICAgICAgfQoKICAgICAgdGhpcy5sZW5ndGggPSBhLmxlbmd0aDsKICAgICAgaWYgKGNhcnJ5ICE9PSAwKSB7CiAgICAgICAgdGhpcy53b3Jkc1t0aGlzLmxlbmd0aF0gPSBjYXJyeTsKICAgICAgICB0aGlzLmxlbmd0aCsrOwogICAgICAvLyBDb3B5IHRoZSByZXN0IG9mIHRoZSB3b3JkcwogICAgICB9IGVsc2UgaWYgKGEgIT09IHRoaXMpIHsKICAgICAgICBmb3IgKDsgaSA8IGEubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHRoaXMud29yZHNbaV0gPSBhLndvcmRzW2ldOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9OwoKICAgIC8vIEFkZCBgbnVtYCB0byBgdGhpc2AKICAgIEJOLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiBhZGQgKG51bSkgewogICAgICB2YXIgcmVzOwogICAgICBpZiAobnVtLm5lZ2F0aXZlICE9PSAwICYmIHRoaXMubmVnYXRpdmUgPT09IDApIHsKICAgICAgICBudW0ubmVnYXRpdmUgPSAwOwogICAgICAgIHJlcyA9IHRoaXMuc3ViKG51bSk7CiAgICAgICAgbnVtLm5lZ2F0aXZlIF49IDE7CiAgICAgICAgcmV0dXJuIHJlczsKICAgICAgfSBlbHNlIGlmIChudW0ubmVnYXRpdmUgPT09IDAgJiYgdGhpcy5uZWdhdGl2ZSAhPT0gMCkgewogICAgICAgIHRoaXMubmVnYXRpdmUgPSAwOwogICAgICAgIHJlcyA9IG51bS5zdWIodGhpcyk7CiAgICAgICAgdGhpcy5uZWdhdGl2ZSA9IDE7CiAgICAgICAgcmV0dXJuIHJlczsKICAgICAgfQoKICAgICAgaWYgKHRoaXMubGVuZ3RoID4gbnVtLmxlbmd0aCkgcmV0dXJuIHRoaXMuY2xvbmUoKS5pYWRkKG51bSk7CgogICAgICByZXR1cm4gbnVtLmNsb25lKCkuaWFkZCh0aGlzKTsKICAgIH07CgogICAgLy8gU3VidHJhY3QgYG51bWAgZnJvbSBgdGhpc2AgaW4tcGxhY2UKICAgIEJOLnByb3RvdHlwZS5pc3ViID0gZnVuY3Rpb24gaXN1YiAobnVtKSB7CiAgICAgIC8vIHRoaXMgLSAoLW51bSkgPSB0aGlzICsgbnVtCiAgICAgIGlmIChudW0ubmVnYXRpdmUgIT09IDApIHsKICAgICAgICBudW0ubmVnYXRpdmUgPSAwOwogICAgICAgIHZhciByID0gdGhpcy5pYWRkKG51bSk7CiAgICAgICAgbnVtLm5lZ2F0aXZlID0gMTsKICAgICAgICByZXR1cm4gci5fbm9ybVNpZ24oKTsKCiAgICAgIC8vIC10aGlzIC0gbnVtID0gLSh0aGlzICsgbnVtKQogICAgICB9IGVsc2UgaWYgKHRoaXMubmVnYXRpdmUgIT09IDApIHsKICAgICAgICB0aGlzLm5lZ2F0aXZlID0gMDsKICAgICAgICB0aGlzLmlhZGQobnVtKTsKICAgICAgICB0aGlzLm5lZ2F0aXZlID0gMTsKICAgICAgICByZXR1cm4gdGhpcy5fbm9ybVNpZ24oKTsKICAgICAgfQoKICAgICAgLy8gQXQgdGhpcyBwb2ludCBib3RoIG51bWJlcnMgYXJlIHBvc2l0aXZlCiAgICAgIHZhciBjbXAgPSB0aGlzLmNtcChudW0pOwoKICAgICAgLy8gT3B0aW1pemF0aW9uIC0gemVyb2lmeQogICAgICBpZiAoY21wID09PSAwKSB7CiAgICAgICAgdGhpcy5uZWdhdGl2ZSA9IDA7CiAgICAgICAgdGhpcy5sZW5ndGggPSAxOwogICAgICAgIHRoaXMud29yZHNbMF0gPSAwOwogICAgICAgIHJldHVybiB0aGlzOwogICAgICB9CgogICAgICAvLyBhID4gYgogICAgICB2YXIgYSwgYjsKICAgICAgaWYgKGNtcCA+IDApIHsKICAgICAgICBhID0gdGhpczsKICAgICAgICBiID0gbnVtOwogICAgICB9IGVsc2UgewogICAgICAgIGEgPSBudW07CiAgICAgICAgYiA9IHRoaXM7CiAgICAgIH0KCiAgICAgIHZhciBjYXJyeSA9IDA7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYi5sZW5ndGg7IGkrKykgewogICAgICAgIHIgPSAoYS53b3Jkc1tpXSB8IDApIC0gKGIud29yZHNbaV0gfCAwKSArIGNhcnJ5OwogICAgICAgIGNhcnJ5ID0gciA+PiAyNjsKICAgICAgICB0aGlzLndvcmRzW2ldID0gciAmIDB4M2ZmZmZmZjsKICAgICAgfQogICAgICBmb3IgKDsgY2FycnkgIT09IDAgJiYgaSA8IGEubGVuZ3RoOyBpKyspIHsKICAgICAgICByID0gKGEud29yZHNbaV0gfCAwKSArIGNhcnJ5OwogICAgICAgIGNhcnJ5ID0gciA+PiAyNjsKICAgICAgICB0aGlzLndvcmRzW2ldID0gciAmIDB4M2ZmZmZmZjsKICAgICAgfQoKICAgICAgLy8gQ29weSByZXN0IG9mIHRoZSB3b3JkcwogICAgICBpZiAoY2FycnkgPT09IDAgJiYgaSA8IGEubGVuZ3RoICYmIGEgIT09IHRoaXMpIHsKICAgICAgICBmb3IgKDsgaSA8IGEubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHRoaXMud29yZHNbaV0gPSBhLndvcmRzW2ldOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5sZW5ndGggPSBNYXRoLm1heCh0aGlzLmxlbmd0aCwgaSk7CgogICAgICBpZiAoYSAhPT0gdGhpcykgewogICAgICAgIHRoaXMubmVnYXRpdmUgPSAxOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5fc3RyaXAoKTsKICAgIH07CgogICAgLy8gU3VidHJhY3QgYG51bWAgZnJvbSBgdGhpc2AKICAgIEJOLnByb3RvdHlwZS5zdWIgPSBmdW5jdGlvbiBzdWIgKG51bSkgewogICAgICByZXR1cm4gdGhpcy5jbG9uZSgpLmlzdWIobnVtKTsKICAgIH07CgogICAgZnVuY3Rpb24gc21hbGxNdWxUbyAoc2VsZiwgbnVtLCBvdXQpIHsKICAgICAgb3V0Lm5lZ2F0aXZlID0gbnVtLm5lZ2F0aXZlIF4gc2VsZi5uZWdhdGl2ZTsKICAgICAgdmFyIGxlbiA9IChzZWxmLmxlbmd0aCArIG51bS5sZW5ndGgpIHwgMDsKICAgICAgb3V0Lmxlbmd0aCA9IGxlbjsKICAgICAgbGVuID0gKGxlbiAtIDEpIHwgMDsKCiAgICAgIC8vIFBlZWwgb25lIGl0ZXJhdGlvbiAoY29tcGlsZXIgY2FuJ3QgZG8gaXQsIGJlY2F1c2Ugb2YgY29kZSBjb21wbGV4aXR5KQogICAgICB2YXIgYSA9IHNlbGYud29yZHNbMF0gfCAwOwogICAgICB2YXIgYiA9IG51bS53b3Jkc1swXSB8IDA7CiAgICAgIHZhciByID0gYSAqIGI7CgogICAgICB2YXIgbG8gPSByICYgMHgzZmZmZmZmOwogICAgICB2YXIgY2FycnkgPSAociAvIDB4NDAwMDAwMCkgfCAwOwogICAgICBvdXQud29yZHNbMF0gPSBsbzsKCiAgICAgIGZvciAodmFyIGsgPSAxOyBrIDwgbGVuOyBrKyspIHsKICAgICAgICAvLyBTdW0gYWxsIHdvcmRzIHdpdGggdGhlIHNhbWUgYGkgKyBqID0ga2AgYW5kIGFjY3VtdWxhdGUgYG5jYXJyeWAsCiAgICAgICAgLy8gbm90ZSB0aGF0IG5jYXJyeSBjb3VsZCBiZSA+PSAweDNmZmZmZmYKICAgICAgICB2YXIgbmNhcnJ5ID0gY2FycnkgPj4+IDI2OwogICAgICAgIHZhciByd29yZCA9IGNhcnJ5ICYgMHgzZmZmZmZmOwogICAgICAgIHZhciBtYXhKID0gTWF0aC5taW4oaywgbnVtLmxlbmd0aCAtIDEpOwogICAgICAgIGZvciAodmFyIGogPSBNYXRoLm1heCgwLCBrIC0gc2VsZi5sZW5ndGggKyAxKTsgaiA8PSBtYXhKOyBqKyspIHsKICAgICAgICAgIHZhciBpID0gKGsgLSBqKSB8IDA7CiAgICAgICAgICBhID0gc2VsZi53b3Jkc1tpXSB8IDA7CiAgICAgICAgICBiID0gbnVtLndvcmRzW2pdIHwgMDsKICAgICAgICAgIHIgPSBhICogYiArIHJ3b3JkOwogICAgICAgICAgbmNhcnJ5ICs9IChyIC8gMHg0MDAwMDAwKSB8IDA7CiAgICAgICAgICByd29yZCA9IHIgJiAweDNmZmZmZmY7CiAgICAgICAgfQogICAgICAgIG91dC53b3Jkc1trXSA9IHJ3b3JkIHwgMDsKICAgICAgICBjYXJyeSA9IG5jYXJyeSB8IDA7CiAgICAgIH0KICAgICAgaWYgKGNhcnJ5ICE9PSAwKSB7CiAgICAgICAgb3V0LndvcmRzW2tdID0gY2FycnkgfCAwOwogICAgICB9IGVsc2UgewogICAgICAgIG91dC5sZW5ndGgtLTsKICAgICAgfQoKICAgICAgcmV0dXJuIG91dC5fc3RyaXAoKTsKICAgIH0KCiAgICAvLyBUT0RPKGluZHV0bnkpOiBpdCBtYXkgYmUgcmVhc29uYWJsZSB0byBvbWl0IGl0IGZvciB1c2VycyB3aG8gZG9uJ3QgbmVlZAogICAgLy8gdG8gd29yayB3aXRoIDI1Ni1iaXQgbnVtYmVycywgb3RoZXJ3aXNlIGl0IGdpdmVzIDIwJSBpbXByb3ZlbWVudCBmb3IgMjU2LWJpdAogICAgLy8gbXVsdGlwbGljYXRpb24gKGxpa2UgZWxsaXB0aWMgc2VjcDI1NmsxKS4KICAgIHZhciBjb21iMTBNdWxUbyA9IGZ1bmN0aW9uIGNvbWIxME11bFRvIChzZWxmLCBudW0sIG91dCkgewogICAgICB2YXIgYSA9IHNlbGYud29yZHM7CiAgICAgIHZhciBiID0gbnVtLndvcmRzOwogICAgICB2YXIgbyA9IG91dC53b3JkczsKICAgICAgdmFyIGMgPSAwOwogICAgICB2YXIgbG87CiAgICAgIHZhciBtaWQ7CiAgICAgIHZhciBoaTsKICAgICAgdmFyIGEwID0gYVswXSB8IDA7CiAgICAgIHZhciBhbDAgPSBhMCAmIDB4MWZmZjsKICAgICAgdmFyIGFoMCA9IGEwID4+PiAxMzsKICAgICAgdmFyIGExID0gYVsxXSB8IDA7CiAgICAgIHZhciBhbDEgPSBhMSAmIDB4MWZmZjsKICAgICAgdmFyIGFoMSA9IGExID4+PiAxMzsKICAgICAgdmFyIGEyID0gYVsyXSB8IDA7CiAgICAgIHZhciBhbDIgPSBhMiAmIDB4MWZmZjsKICAgICAgdmFyIGFoMiA9IGEyID4+PiAxMzsKICAgICAgdmFyIGEzID0gYVszXSB8IDA7CiAgICAgIHZhciBhbDMgPSBhMyAmIDB4MWZmZjsKICAgICAgdmFyIGFoMyA9IGEzID4+PiAxMzsKICAgICAgdmFyIGE0ID0gYVs0XSB8IDA7CiAgICAgIHZhciBhbDQgPSBhNCAmIDB4MWZmZjsKICAgICAgdmFyIGFoNCA9IGE0ID4+PiAxMzsKICAgICAgdmFyIGE1ID0gYVs1XSB8IDA7CiAgICAgIHZhciBhbDUgPSBhNSAmIDB4MWZmZjsKICAgICAgdmFyIGFoNSA9IGE1ID4+PiAxMzsKICAgICAgdmFyIGE2ID0gYVs2XSB8IDA7CiAgICAgIHZhciBhbDYgPSBhNiAmIDB4MWZmZjsKICAgICAgdmFyIGFoNiA9IGE2ID4+PiAxMzsKICAgICAgdmFyIGE3ID0gYVs3XSB8IDA7CiAgICAgIHZhciBhbDcgPSBhNyAmIDB4MWZmZjsKICAgICAgdmFyIGFoNyA9IGE3ID4+PiAxMzsKICAgICAgdmFyIGE4ID0gYVs4XSB8IDA7CiAgICAgIHZhciBhbDggPSBhOCAmIDB4MWZmZjsKICAgICAgdmFyIGFoOCA9IGE4ID4+PiAxMzsKICAgICAgdmFyIGE5ID0gYVs5XSB8IDA7CiAgICAgIHZhciBhbDkgPSBhOSAmIDB4MWZmZjsKICAgICAgdmFyIGFoOSA9IGE5ID4+PiAxMzsKICAgICAgdmFyIGIwID0gYlswXSB8IDA7CiAgICAgIHZhciBibDAgPSBiMCAmIDB4MWZmZjsKICAgICAgdmFyIGJoMCA9IGIwID4+PiAxMzsKICAgICAgdmFyIGIxID0gYlsxXSB8IDA7CiAgICAgIHZhciBibDEgPSBiMSAmIDB4MWZmZjsKICAgICAgdmFyIGJoMSA9IGIxID4+PiAxMzsKICAgICAgdmFyIGIyID0gYlsyXSB8IDA7CiAgICAgIHZhciBibDIgPSBiMiAmIDB4MWZmZjsKICAgICAgdmFyIGJoMiA9IGIyID4+PiAxMzsKICAgICAgdmFyIGIzID0gYlszXSB8IDA7CiAgICAgIHZhciBibDMgPSBiMyAmIDB4MWZmZjsKICAgICAgdmFyIGJoMyA9IGIzID4+PiAxMzsKICAgICAgdmFyIGI0ID0gYls0XSB8IDA7CiAgICAgIHZhciBibDQgPSBiNCAmIDB4MWZmZjsKICAgICAgdmFyIGJoNCA9IGI0ID4+PiAxMzsKICAgICAgdmFyIGI1ID0gYls1XSB8IDA7CiAgICAgIHZhciBibDUgPSBiNSAmIDB4MWZmZjsKICAgICAgdmFyIGJoNSA9IGI1ID4+PiAxMzsKICAgICAgdmFyIGI2ID0gYls2XSB8IDA7CiAgICAgIHZhciBibDYgPSBiNiAmIDB4MWZmZjsKICAgICAgdmFyIGJoNiA9IGI2ID4+PiAxMzsKICAgICAgdmFyIGI3ID0gYls3XSB8IDA7CiAgICAgIHZhciBibDcgPSBiNyAmIDB4MWZmZjsKICAgICAgdmFyIGJoNyA9IGI3ID4+PiAxMzsKICAgICAgdmFyIGI4ID0gYls4XSB8IDA7CiAgICAgIHZhciBibDggPSBiOCAmIDB4MWZmZjsKICAgICAgdmFyIGJoOCA9IGI4ID4+PiAxMzsKICAgICAgdmFyIGI5ID0gYls5XSB8IDA7CiAgICAgIHZhciBibDkgPSBiOSAmIDB4MWZmZjsKICAgICAgdmFyIGJoOSA9IGI5ID4+PiAxMzsKCiAgICAgIG91dC5uZWdhdGl2ZSA9IHNlbGYubmVnYXRpdmUgXiBudW0ubmVnYXRpdmU7CiAgICAgIG91dC5sZW5ndGggPSAxOTsKICAgICAgLyogayA9IDAgKi8KICAgICAgbG8gPSBNYXRoLmltdWwoYWwwLCBibDApOwogICAgICBtaWQgPSBNYXRoLmltdWwoYWwwLCBiaDApOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMCwgYmwwKSkgfCAwOwogICAgICBoaSA9IE1hdGguaW11bChhaDAsIGJoMCk7CiAgICAgIHZhciB3MCA9ICgoKGMgKyBsbykgfCAwKSArICgobWlkICYgMHgxZmZmKSA8PCAxMykpIHwgMDsKICAgICAgYyA9ICgoKGhpICsgKG1pZCA+Pj4gMTMpKSB8IDApICsgKHcwID4+PiAyNikpIHwgMDsKICAgICAgdzAgJj0gMHgzZmZmZmZmOwogICAgICAvKiBrID0gMSAqLwogICAgICBsbyA9IE1hdGguaW11bChhbDEsIGJsMCk7CiAgICAgIG1pZCA9IE1hdGguaW11bChhbDEsIGJoMCk7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgxLCBibDApKSB8IDA7CiAgICAgIGhpID0gTWF0aC5pbXVsKGFoMSwgYmgwKTsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwwLCBibDEpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwwLCBiaDEpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgwLCBibDEpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMCwgYmgxKSkgfCAwOwogICAgICB2YXIgdzEgPSAoKChjICsgbG8pIHwgMCkgKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpKSB8IDA7CiAgICAgIGMgPSAoKChoaSArIChtaWQgPj4+IDEzKSkgfCAwKSArICh3MSA+Pj4gMjYpKSB8IDA7CiAgICAgIHcxICY9IDB4M2ZmZmZmZjsKICAgICAgLyogayA9IDIgKi8KICAgICAgbG8gPSBNYXRoLmltdWwoYWwyLCBibDApOwogICAgICBtaWQgPSBNYXRoLmltdWwoYWwyLCBiaDApOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMiwgYmwwKSkgfCAwOwogICAgICBoaSA9IE1hdGguaW11bChhaDIsIGJoMCk7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMSwgYmwxKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMSwgYmgxKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMSwgYmwxKSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDEsIGJoMSkpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwwLCBibDIpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwwLCBiaDIpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgwLCBibDIpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMCwgYmgyKSkgfCAwOwogICAgICB2YXIgdzIgPSAoKChjICsgbG8pIHwgMCkgKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpKSB8IDA7CiAgICAgIGMgPSAoKChoaSArIChtaWQgPj4+IDEzKSkgfCAwKSArICh3MiA+Pj4gMjYpKSB8IDA7CiAgICAgIHcyICY9IDB4M2ZmZmZmZjsKICAgICAgLyogayA9IDMgKi8KICAgICAgbG8gPSBNYXRoLmltdWwoYWwzLCBibDApOwogICAgICBtaWQgPSBNYXRoLmltdWwoYWwzLCBiaDApOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMywgYmwwKSkgfCAwOwogICAgICBoaSA9IE1hdGguaW11bChhaDMsIGJoMCk7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMiwgYmwxKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMiwgYmgxKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMiwgYmwxKSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDIsIGJoMSkpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwxLCBibDIpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwxLCBiaDIpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgxLCBibDIpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMSwgYmgyKSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDAsIGJsMykpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDAsIGJoMykpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDAsIGJsMykpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgwLCBiaDMpKSB8IDA7CiAgICAgIHZhciB3MyA9ICgoKGMgKyBsbykgfCAwKSArICgobWlkICYgMHgxZmZmKSA8PCAxMykpIHwgMDsKICAgICAgYyA9ICgoKGhpICsgKG1pZCA+Pj4gMTMpKSB8IDApICsgKHczID4+PiAyNikpIHwgMDsKICAgICAgdzMgJj0gMHgzZmZmZmZmOwogICAgICAvKiBrID0gNCAqLwogICAgICBsbyA9IE1hdGguaW11bChhbDQsIGJsMCk7CiAgICAgIG1pZCA9IE1hdGguaW11bChhbDQsIGJoMCk7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg0LCBibDApKSB8IDA7CiAgICAgIGhpID0gTWF0aC5pbXVsKGFoNCwgYmgwKTsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwzLCBibDEpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwzLCBiaDEpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgzLCBibDEpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMywgYmgxKSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDIsIGJsMikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDIsIGJoMikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDIsIGJsMikpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgyLCBiaDIpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMSwgYmwzKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMSwgYmgzKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMSwgYmwzKSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDEsIGJoMykpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwwLCBibDQpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwwLCBiaDQpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgwLCBibDQpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMCwgYmg0KSkgfCAwOwogICAgICB2YXIgdzQgPSAoKChjICsgbG8pIHwgMCkgKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpKSB8IDA7CiAgICAgIGMgPSAoKChoaSArIChtaWQgPj4+IDEzKSkgfCAwKSArICh3NCA+Pj4gMjYpKSB8IDA7CiAgICAgIHc0ICY9IDB4M2ZmZmZmZjsKICAgICAgLyogayA9IDUgKi8KICAgICAgbG8gPSBNYXRoLmltdWwoYWw1LCBibDApOwogICAgICBtaWQgPSBNYXRoLmltdWwoYWw1LCBiaDApOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNSwgYmwwKSkgfCAwOwogICAgICBoaSA9IE1hdGguaW11bChhaDUsIGJoMCk7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNCwgYmwxKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNCwgYmgxKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNCwgYmwxKSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDQsIGJoMSkpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwzLCBibDIpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwzLCBiaDIpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgzLCBibDIpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMywgYmgyKSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDIsIGJsMykpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDIsIGJoMykpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDIsIGJsMykpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgyLCBiaDMpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMSwgYmw0KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMSwgYmg0KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMSwgYmw0KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDEsIGJoNCkpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwwLCBibDUpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwwLCBiaDUpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgwLCBibDUpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMCwgYmg1KSkgfCAwOwogICAgICB2YXIgdzUgPSAoKChjICsgbG8pIHwgMCkgKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpKSB8IDA7CiAgICAgIGMgPSAoKChoaSArIChtaWQgPj4+IDEzKSkgfCAwKSArICh3NSA+Pj4gMjYpKSB8IDA7CiAgICAgIHc1ICY9IDB4M2ZmZmZmZjsKICAgICAgLyogayA9IDYgKi8KICAgICAgbG8gPSBNYXRoLmltdWwoYWw2LCBibDApOwogICAgICBtaWQgPSBNYXRoLmltdWwoYWw2LCBiaDApOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNiwgYmwwKSkgfCAwOwogICAgICBoaSA9IE1hdGguaW11bChhaDYsIGJoMCk7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNSwgYmwxKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNSwgYmgxKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNSwgYmwxKSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDUsIGJoMSkpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw0LCBibDIpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw0LCBiaDIpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg0LCBibDIpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNCwgYmgyKSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDMsIGJsMykpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDMsIGJoMykpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDMsIGJsMykpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgzLCBiaDMpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMiwgYmw0KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMiwgYmg0KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMiwgYmw0KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDIsIGJoNCkpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwxLCBibDUpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwxLCBiaDUpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgxLCBibDUpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMSwgYmg1KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDAsIGJsNikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDAsIGJoNikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDAsIGJsNikpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgwLCBiaDYpKSB8IDA7CiAgICAgIHZhciB3NiA9ICgoKGMgKyBsbykgfCAwKSArICgobWlkICYgMHgxZmZmKSA8PCAxMykpIHwgMDsKICAgICAgYyA9ICgoKGhpICsgKG1pZCA+Pj4gMTMpKSB8IDApICsgKHc2ID4+PiAyNikpIHwgMDsKICAgICAgdzYgJj0gMHgzZmZmZmZmOwogICAgICAvKiBrID0gNyAqLwogICAgICBsbyA9IE1hdGguaW11bChhbDcsIGJsMCk7CiAgICAgIG1pZCA9IE1hdGguaW11bChhbDcsIGJoMCk7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg3LCBibDApKSB8IDA7CiAgICAgIGhpID0gTWF0aC5pbXVsKGFoNywgYmgwKTsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw2LCBibDEpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw2LCBiaDEpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg2LCBibDEpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNiwgYmgxKSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDUsIGJsMikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDUsIGJoMikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDUsIGJsMikpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg1LCBiaDIpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNCwgYmwzKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNCwgYmgzKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNCwgYmwzKSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDQsIGJoMykpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwzLCBibDQpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwzLCBiaDQpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgzLCBibDQpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMywgYmg0KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDIsIGJsNSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDIsIGJoNSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDIsIGJsNSkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgyLCBiaDUpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMSwgYmw2KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMSwgYmg2KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMSwgYmw2KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDEsIGJoNikpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwwLCBibDcpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwwLCBiaDcpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgwLCBibDcpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMCwgYmg3KSkgfCAwOwogICAgICB2YXIgdzcgPSAoKChjICsgbG8pIHwgMCkgKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpKSB8IDA7CiAgICAgIGMgPSAoKChoaSArIChtaWQgPj4+IDEzKSkgfCAwKSArICh3NyA+Pj4gMjYpKSB8IDA7CiAgICAgIHc3ICY9IDB4M2ZmZmZmZjsKICAgICAgLyogayA9IDggKi8KICAgICAgbG8gPSBNYXRoLmltdWwoYWw4LCBibDApOwogICAgICBtaWQgPSBNYXRoLmltdWwoYWw4LCBiaDApOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoOCwgYmwwKSkgfCAwOwogICAgICBoaSA9IE1hdGguaW11bChhaDgsIGJoMCk7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNywgYmwxKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNywgYmgxKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNywgYmwxKSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDcsIGJoMSkpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw2LCBibDIpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw2LCBiaDIpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg2LCBibDIpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNiwgYmgyKSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDUsIGJsMykpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDUsIGJoMykpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDUsIGJsMykpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg1LCBiaDMpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNCwgYmw0KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNCwgYmg0KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNCwgYmw0KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDQsIGJoNCkpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwzLCBibDUpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwzLCBiaDUpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgzLCBibDUpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMywgYmg1KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDIsIGJsNikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDIsIGJoNikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDIsIGJsNikpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgyLCBiaDYpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMSwgYmw3KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMSwgYmg3KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMSwgYmw3KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDEsIGJoNykpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwwLCBibDgpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwwLCBiaDgpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgwLCBibDgpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMCwgYmg4KSkgfCAwOwogICAgICB2YXIgdzggPSAoKChjICsgbG8pIHwgMCkgKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpKSB8IDA7CiAgICAgIGMgPSAoKChoaSArIChtaWQgPj4+IDEzKSkgfCAwKSArICh3OCA+Pj4gMjYpKSB8IDA7CiAgICAgIHc4ICY9IDB4M2ZmZmZmZjsKICAgICAgLyogayA9IDkgKi8KICAgICAgbG8gPSBNYXRoLmltdWwoYWw5LCBibDApOwogICAgICBtaWQgPSBNYXRoLmltdWwoYWw5LCBiaDApOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoOSwgYmwwKSkgfCAwOwogICAgICBoaSA9IE1hdGguaW11bChhaDksIGJoMCk7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsOCwgYmwxKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsOCwgYmgxKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoOCwgYmwxKSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDgsIGJoMSkpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw3LCBibDIpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw3LCBiaDIpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg3LCBibDIpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNywgYmgyKSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDYsIGJsMykpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDYsIGJoMykpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDYsIGJsMykpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg2LCBiaDMpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNSwgYmw0KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNSwgYmg0KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNSwgYmw0KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDUsIGJoNCkpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw0LCBibDUpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw0LCBiaDUpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg0LCBibDUpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNCwgYmg1KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDMsIGJsNikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDMsIGJoNikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDMsIGJsNikpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgzLCBiaDYpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMiwgYmw3KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMiwgYmg3KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMiwgYmw3KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDIsIGJoNykpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwxLCBibDgpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwxLCBiaDgpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgxLCBibDgpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMSwgYmg4KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDAsIGJsOSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDAsIGJoOSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDAsIGJsOSkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgwLCBiaDkpKSB8IDA7CiAgICAgIHZhciB3OSA9ICgoKGMgKyBsbykgfCAwKSArICgobWlkICYgMHgxZmZmKSA8PCAxMykpIHwgMDsKICAgICAgYyA9ICgoKGhpICsgKG1pZCA+Pj4gMTMpKSB8IDApICsgKHc5ID4+PiAyNikpIHwgMDsKICAgICAgdzkgJj0gMHgzZmZmZmZmOwogICAgICAvKiBrID0gMTAgKi8KICAgICAgbG8gPSBNYXRoLmltdWwoYWw5LCBibDEpOwogICAgICBtaWQgPSBNYXRoLmltdWwoYWw5LCBiaDEpOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoOSwgYmwxKSkgfCAwOwogICAgICBoaSA9IE1hdGguaW11bChhaDksIGJoMSk7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsOCwgYmwyKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsOCwgYmgyKSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoOCwgYmwyKSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDgsIGJoMikpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw3LCBibDMpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw3LCBiaDMpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg3LCBibDMpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNywgYmgzKSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDYsIGJsNCkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDYsIGJoNCkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDYsIGJsNCkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg2LCBiaDQpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNSwgYmw1KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNSwgYmg1KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNSwgYmw1KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDUsIGJoNSkpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw0LCBibDYpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw0LCBiaDYpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg0LCBibDYpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNCwgYmg2KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDMsIGJsNykpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDMsIGJoNykpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDMsIGJsNykpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgzLCBiaDcpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMiwgYmw4KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMiwgYmg4KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMiwgYmw4KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDIsIGJoOCkpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwxLCBibDkpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwxLCBiaDkpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgxLCBibDkpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMSwgYmg5KSkgfCAwOwogICAgICB2YXIgdzEwID0gKCgoYyArIGxvKSB8IDApICsgKChtaWQgJiAweDFmZmYpIDw8IDEzKSkgfCAwOwogICAgICBjID0gKCgoaGkgKyAobWlkID4+PiAxMykpIHwgMCkgKyAodzEwID4+PiAyNikpIHwgMDsKICAgICAgdzEwICY9IDB4M2ZmZmZmZjsKICAgICAgLyogayA9IDExICovCiAgICAgIGxvID0gTWF0aC5pbXVsKGFsOSwgYmwyKTsKICAgICAgbWlkID0gTWF0aC5pbXVsKGFsOSwgYmgyKTsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDksIGJsMikpIHwgMDsKICAgICAgaGkgPSBNYXRoLmltdWwoYWg5LCBiaDIpOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDgsIGJsMykpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDgsIGJoMykpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDgsIGJsMykpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg4LCBiaDMpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNywgYmw0KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNywgYmg0KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNywgYmw0KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDcsIGJoNCkpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw2LCBibDUpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw2LCBiaDUpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg2LCBibDUpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNiwgYmg1KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDUsIGJsNikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDUsIGJoNikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDUsIGJsNikpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg1LCBiaDYpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNCwgYmw3KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNCwgYmg3KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNCwgYmw3KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDQsIGJoNykpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwzLCBibDgpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwzLCBiaDgpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgzLCBibDgpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMywgYmg4KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDIsIGJsOSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDIsIGJoOSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDIsIGJsOSkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgyLCBiaDkpKSB8IDA7CiAgICAgIHZhciB3MTEgPSAoKChjICsgbG8pIHwgMCkgKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpKSB8IDA7CiAgICAgIGMgPSAoKChoaSArIChtaWQgPj4+IDEzKSkgfCAwKSArICh3MTEgPj4+IDI2KSkgfCAwOwogICAgICB3MTEgJj0gMHgzZmZmZmZmOwogICAgICAvKiBrID0gMTIgKi8KICAgICAgbG8gPSBNYXRoLmltdWwoYWw5LCBibDMpOwogICAgICBtaWQgPSBNYXRoLmltdWwoYWw5LCBiaDMpOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoOSwgYmwzKSkgfCAwOwogICAgICBoaSA9IE1hdGguaW11bChhaDksIGJoMyk7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsOCwgYmw0KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsOCwgYmg0KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoOCwgYmw0KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDgsIGJoNCkpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw3LCBibDUpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw3LCBiaDUpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg3LCBibDUpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNywgYmg1KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDYsIGJsNikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDYsIGJoNikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDYsIGJsNikpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg2LCBiaDYpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNSwgYmw3KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNSwgYmg3KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNSwgYmw3KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDUsIGJoNykpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw0LCBibDgpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw0LCBiaDgpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg0LCBibDgpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNCwgYmg4KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDMsIGJsOSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDMsIGJoOSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDMsIGJsOSkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgzLCBiaDkpKSB8IDA7CiAgICAgIHZhciB3MTIgPSAoKChjICsgbG8pIHwgMCkgKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpKSB8IDA7CiAgICAgIGMgPSAoKChoaSArIChtaWQgPj4+IDEzKSkgfCAwKSArICh3MTIgPj4+IDI2KSkgfCAwOwogICAgICB3MTIgJj0gMHgzZmZmZmZmOwogICAgICAvKiBrID0gMTMgKi8KICAgICAgbG8gPSBNYXRoLmltdWwoYWw5LCBibDQpOwogICAgICBtaWQgPSBNYXRoLmltdWwoYWw5LCBiaDQpOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoOSwgYmw0KSkgfCAwOwogICAgICBoaSA9IE1hdGguaW11bChhaDksIGJoNCk7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsOCwgYmw1KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsOCwgYmg1KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoOCwgYmw1KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDgsIGJoNSkpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw3LCBibDYpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw3LCBiaDYpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg3LCBibDYpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNywgYmg2KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDYsIGJsNykpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDYsIGJoNykpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDYsIGJsNykpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg2LCBiaDcpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNSwgYmw4KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNSwgYmg4KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNSwgYmw4KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDUsIGJoOCkpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw0LCBibDkpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw0LCBiaDkpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg0LCBibDkpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNCwgYmg5KSkgfCAwOwogICAgICB2YXIgdzEzID0gKCgoYyArIGxvKSB8IDApICsgKChtaWQgJiAweDFmZmYpIDw8IDEzKSkgfCAwOwogICAgICBjID0gKCgoaGkgKyAobWlkID4+PiAxMykpIHwgMCkgKyAodzEzID4+PiAyNikpIHwgMDsKICAgICAgdzEzICY9IDB4M2ZmZmZmZjsKICAgICAgLyogayA9IDE0ICovCiAgICAgIGxvID0gTWF0aC5pbXVsKGFsOSwgYmw1KTsKICAgICAgbWlkID0gTWF0aC5pbXVsKGFsOSwgYmg1KTsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDksIGJsNSkpIHwgMDsKICAgICAgaGkgPSBNYXRoLmltdWwoYWg5LCBiaDUpOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDgsIGJsNikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDgsIGJoNikpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDgsIGJsNikpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg4LCBiaDYpKSB8IDA7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNywgYmw3KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNywgYmg3KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNywgYmw3KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDcsIGJoNykpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw2LCBibDgpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw2LCBiaDgpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg2LCBibDgpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNiwgYmg4KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDUsIGJsOSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDUsIGJoOSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDUsIGJsOSkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg1LCBiaDkpKSB8IDA7CiAgICAgIHZhciB3MTQgPSAoKChjICsgbG8pIHwgMCkgKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpKSB8IDA7CiAgICAgIGMgPSAoKChoaSArIChtaWQgPj4+IDEzKSkgfCAwKSArICh3MTQgPj4+IDI2KSkgfCAwOwogICAgICB3MTQgJj0gMHgzZmZmZmZmOwogICAgICAvKiBrID0gMTUgKi8KICAgICAgbG8gPSBNYXRoLmltdWwoYWw5LCBibDYpOwogICAgICBtaWQgPSBNYXRoLmltdWwoYWw5LCBiaDYpOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoOSwgYmw2KSkgfCAwOwogICAgICBoaSA9IE1hdGguaW11bChhaDksIGJoNik7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsOCwgYmw3KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsOCwgYmg3KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoOCwgYmw3KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDgsIGJoNykpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw3LCBibDgpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw3LCBiaDgpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg3LCBibDgpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNywgYmg4KSkgfCAwOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDYsIGJsOSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDYsIGJoOSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDYsIGJsOSkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg2LCBiaDkpKSB8IDA7CiAgICAgIHZhciB3MTUgPSAoKChjICsgbG8pIHwgMCkgKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpKSB8IDA7CiAgICAgIGMgPSAoKChoaSArIChtaWQgPj4+IDEzKSkgfCAwKSArICh3MTUgPj4+IDI2KSkgfCAwOwogICAgICB3MTUgJj0gMHgzZmZmZmZmOwogICAgICAvKiBrID0gMTYgKi8KICAgICAgbG8gPSBNYXRoLmltdWwoYWw5LCBibDcpOwogICAgICBtaWQgPSBNYXRoLmltdWwoYWw5LCBiaDcpOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoOSwgYmw3KSkgfCAwOwogICAgICBoaSA9IE1hdGguaW11bChhaDksIGJoNyk7CiAgICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsOCwgYmw4KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsOCwgYmg4KSkgfCAwOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoOCwgYmw4KSkgfCAwOwogICAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDgsIGJoOCkpIHwgMDsKICAgICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw3LCBibDkpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw3LCBiaDkpKSB8IDA7CiAgICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg3LCBibDkpKSB8IDA7CiAgICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNywgYmg5KSkgfCAwOwogICAgICB2YXIgdzE2ID0gKCgoYyArIGxvKSB8IDApICsgKChtaWQgJiAweDFmZmYpIDw8IDEzKSkgfCAwOwogICAgICBjID0gKCgoaGkgKyAobWlkID4+PiAxMykpIHwgMCkgKyAodzE2ID4+PiAyNikpIHwgMDsKICAgICAgdzE2ICY9IDB4M2ZmZmZmZjsKICAgICAgLyogayA9IDE3ICovCiAgICAgIGxvID0gTWF0aC5pbXVsKGFsOSwgYmw4KTsKICAgICAgbWlkID0gTWF0aC5pbXVsKGFsOSwgYmg4KTsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDksIGJsOCkpIHwgMDsKICAgICAgaGkgPSBNYXRoLmltdWwoYWg5LCBiaDgpOwogICAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDgsIGJsOSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDgsIGJoOSkpIHwgMDsKICAgICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDgsIGJsOSkpIHwgMDsKICAgICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg4LCBiaDkpKSB8IDA7CiAgICAgIHZhciB3MTcgPSAoKChjICsgbG8pIHwgMCkgKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpKSB8IDA7CiAgICAgIGMgPSAoKChoaSArIChtaWQgPj4+IDEzKSkgfCAwKSArICh3MTcgPj4+IDI2KSkgfCAwOwogICAgICB3MTcgJj0gMHgzZmZmZmZmOwogICAgICAvKiBrID0gMTggKi8KICAgICAgbG8gPSBNYXRoLmltdWwoYWw5LCBibDkpOwogICAgICBtaWQgPSBNYXRoLmltdWwoYWw5LCBiaDkpOwogICAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoOSwgYmw5KSkgfCAwOwogICAgICBoaSA9IE1hdGguaW11bChhaDksIGJoOSk7CiAgICAgIHZhciB3MTggPSAoKChjICsgbG8pIHwgMCkgKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpKSB8IDA7CiAgICAgIGMgPSAoKChoaSArIChtaWQgPj4+IDEzKSkgfCAwKSArICh3MTggPj4+IDI2KSkgfCAwOwogICAgICB3MTggJj0gMHgzZmZmZmZmOwogICAgICBvWzBdID0gdzA7CiAgICAgIG9bMV0gPSB3MTsKICAgICAgb1syXSA9IHcyOwogICAgICBvWzNdID0gdzM7CiAgICAgIG9bNF0gPSB3NDsKICAgICAgb1s1XSA9IHc1OwogICAgICBvWzZdID0gdzY7CiAgICAgIG9bN10gPSB3NzsKICAgICAgb1s4XSA9IHc4OwogICAgICBvWzldID0gdzk7CiAgICAgIG9bMTBdID0gdzEwOwogICAgICBvWzExXSA9IHcxMTsKICAgICAgb1sxMl0gPSB3MTI7CiAgICAgIG9bMTNdID0gdzEzOwogICAgICBvWzE0XSA9IHcxNDsKICAgICAgb1sxNV0gPSB3MTU7CiAgICAgIG9bMTZdID0gdzE2OwogICAgICBvWzE3XSA9IHcxNzsKICAgICAgb1sxOF0gPSB3MTg7CiAgICAgIGlmIChjICE9PSAwKSB7CiAgICAgICAgb1sxOV0gPSBjOwogICAgICAgIG91dC5sZW5ndGgrKzsKICAgICAgfQogICAgICByZXR1cm4gb3V0OwogICAgfTsKCiAgICAvLyBQb2x5ZmlsbCBjb21iCiAgICBpZiAoIU1hdGguaW11bCkgewogICAgICBjb21iMTBNdWxUbyA9IHNtYWxsTXVsVG87CiAgICB9CgogICAgZnVuY3Rpb24gYmlnTXVsVG8gKHNlbGYsIG51bSwgb3V0KSB7CiAgICAgIG91dC5uZWdhdGl2ZSA9IG51bS5uZWdhdGl2ZSBeIHNlbGYubmVnYXRpdmU7CiAgICAgIG91dC5sZW5ndGggPSBzZWxmLmxlbmd0aCArIG51bS5sZW5ndGg7CgogICAgICB2YXIgY2FycnkgPSAwOwogICAgICB2YXIgaG5jYXJyeSA9IDA7CiAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgb3V0Lmxlbmd0aCAtIDE7IGsrKykgewogICAgICAgIC8vIFN1bSBhbGwgd29yZHMgd2l0aCB0aGUgc2FtZSBgaSArIGogPSBrYCBhbmQgYWNjdW11bGF0ZSBgbmNhcnJ5YCwKICAgICAgICAvLyBub3RlIHRoYXQgbmNhcnJ5IGNvdWxkIGJlID49IDB4M2ZmZmZmZgogICAgICAgIHZhciBuY2FycnkgPSBobmNhcnJ5OwogICAgICAgIGhuY2FycnkgPSAwOwogICAgICAgIHZhciByd29yZCA9IGNhcnJ5ICYgMHgzZmZmZmZmOwogICAgICAgIHZhciBtYXhKID0gTWF0aC5taW4oaywgbnVtLmxlbmd0aCAtIDEpOwogICAgICAgIGZvciAodmFyIGogPSBNYXRoLm1heCgwLCBrIC0gc2VsZi5sZW5ndGggKyAxKTsgaiA8PSBtYXhKOyBqKyspIHsKICAgICAgICAgIHZhciBpID0gayAtIGo7CiAgICAgICAgICB2YXIgYSA9IHNlbGYud29yZHNbaV0gfCAwOwogICAgICAgICAgdmFyIGIgPSBudW0ud29yZHNbal0gfCAwOwogICAgICAgICAgdmFyIHIgPSBhICogYjsKCiAgICAgICAgICB2YXIgbG8gPSByICYgMHgzZmZmZmZmOwogICAgICAgICAgbmNhcnJ5ID0gKG5jYXJyeSArICgociAvIDB4NDAwMDAwMCkgfCAwKSkgfCAwOwogICAgICAgICAgbG8gPSAobG8gKyByd29yZCkgfCAwOwogICAgICAgICAgcndvcmQgPSBsbyAmIDB4M2ZmZmZmZjsKICAgICAgICAgIG5jYXJyeSA9IChuY2FycnkgKyAobG8gPj4+IDI2KSkgfCAwOwoKICAgICAgICAgIGhuY2FycnkgKz0gbmNhcnJ5ID4+PiAyNjsKICAgICAgICAgIG5jYXJyeSAmPSAweDNmZmZmZmY7CiAgICAgICAgfQogICAgICAgIG91dC53b3Jkc1trXSA9IHJ3b3JkOwogICAgICAgIGNhcnJ5ID0gbmNhcnJ5OwogICAgICAgIG5jYXJyeSA9IGhuY2Fycnk7CiAgICAgIH0KICAgICAgaWYgKGNhcnJ5ICE9PSAwKSB7CiAgICAgICAgb3V0LndvcmRzW2tdID0gY2Fycnk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgb3V0Lmxlbmd0aC0tOwogICAgICB9CgogICAgICByZXR1cm4gb3V0Ll9zdHJpcCgpOwogICAgfQoKICAgIGZ1bmN0aW9uIGp1bWJvTXVsVG8gKHNlbGYsIG51bSwgb3V0KSB7CiAgICAgIC8vIFRlbXBvcmFyeSBkaXNhYmxlLCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2luZHV0bnkvYm4uanMvaXNzdWVzLzIxMQogICAgICAvLyB2YXIgZmZ0bSA9IG5ldyBGRlRNKCk7CiAgICAgIC8vIHJldHVybiBmZnRtLm11bHAoc2VsZiwgbnVtLCBvdXQpOwogICAgICByZXR1cm4gYmlnTXVsVG8oc2VsZiwgbnVtLCBvdXQpOwogICAgfQoKICAgIEJOLnByb3RvdHlwZS5tdWxUbyA9IGZ1bmN0aW9uIG11bFRvIChudW0sIG91dCkgewogICAgICB2YXIgcmVzOwogICAgICB2YXIgbGVuID0gdGhpcy5sZW5ndGggKyBudW0ubGVuZ3RoOwogICAgICBpZiAodGhpcy5sZW5ndGggPT09IDEwICYmIG51bS5sZW5ndGggPT09IDEwKSB7CiAgICAgICAgcmVzID0gY29tYjEwTXVsVG8odGhpcywgbnVtLCBvdXQpOwogICAgICB9IGVsc2UgaWYgKGxlbiA8IDYzKSB7CiAgICAgICAgcmVzID0gc21hbGxNdWxUbyh0aGlzLCBudW0sIG91dCk7CiAgICAgIH0gZWxzZSBpZiAobGVuIDwgMTAyNCkgewogICAgICAgIHJlcyA9IGJpZ011bFRvKHRoaXMsIG51bSwgb3V0KTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXMgPSBqdW1ib011bFRvKHRoaXMsIG51bSwgb3V0KTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlczsKICAgIH07CgogICAgLy8gTXVsdGlwbHkgYHRoaXNgIGJ5IGBudW1gCiAgICBCTi5wcm90b3R5cGUubXVsID0gZnVuY3Rpb24gbXVsIChudW0pIHsKICAgICAgdmFyIG91dCA9IG5ldyBCTihudWxsKTsKICAgICAgb3V0LndvcmRzID0gbmV3IEFycmF5KHRoaXMubGVuZ3RoICsgbnVtLmxlbmd0aCk7CiAgICAgIHJldHVybiB0aGlzLm11bFRvKG51bSwgb3V0KTsKICAgIH07CgogICAgLy8gTXVsdGlwbHkgZW1wbG95aW5nIEZGVAogICAgQk4ucHJvdG90eXBlLm11bGYgPSBmdW5jdGlvbiBtdWxmIChudW0pIHsKICAgICAgdmFyIG91dCA9IG5ldyBCTihudWxsKTsKICAgICAgb3V0LndvcmRzID0gbmV3IEFycmF5KHRoaXMubGVuZ3RoICsgbnVtLmxlbmd0aCk7CiAgICAgIHJldHVybiBqdW1ib011bFRvKHRoaXMsIG51bSwgb3V0KTsKICAgIH07CgogICAgLy8gSW4tcGxhY2UgTXVsdGlwbGljYXRpb24KICAgIEJOLnByb3RvdHlwZS5pbXVsID0gZnVuY3Rpb24gaW11bCAobnVtKSB7CiAgICAgIHJldHVybiB0aGlzLmNsb25lKCkubXVsVG8obnVtLCB0aGlzKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmltdWxuID0gZnVuY3Rpb24gaW11bG4gKG51bSkgewogICAgICB2YXIgaXNOZWdOdW0gPSBudW0gPCAwOwogICAgICBpZiAoaXNOZWdOdW0pIG51bSA9IC1udW07CgogICAgICBhc3NlcnQodHlwZW9mIG51bSA9PT0gJ251bWJlcicpOwogICAgICBhc3NlcnQobnVtIDwgMHg0MDAwMDAwKTsKCiAgICAgIC8vIENhcnJ5CiAgICAgIHZhciBjYXJyeSA9IDA7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciB3ID0gKHRoaXMud29yZHNbaV0gfCAwKSAqIG51bTsKICAgICAgICB2YXIgbG8gPSAodyAmIDB4M2ZmZmZmZikgKyAoY2FycnkgJiAweDNmZmZmZmYpOwogICAgICAgIGNhcnJ5ID4+PSAyNjsKICAgICAgICBjYXJyeSArPSAodyAvIDB4NDAwMDAwMCkgfCAwOwogICAgICAgIC8vIE5PVEU6IGxvIGlzIDI3Yml0IG1heGltdW0KICAgICAgICBjYXJyeSArPSBsbyA+Pj4gMjY7CiAgICAgICAgdGhpcy53b3Jkc1tpXSA9IGxvICYgMHgzZmZmZmZmOwogICAgICB9CgogICAgICBpZiAoY2FycnkgIT09IDApIHsKICAgICAgICB0aGlzLndvcmRzW2ldID0gY2Fycnk7CiAgICAgICAgdGhpcy5sZW5ndGgrKzsKICAgICAgfQoKICAgICAgcmV0dXJuIGlzTmVnTnVtID8gdGhpcy5pbmVnKCkgOiB0aGlzOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUubXVsbiA9IGZ1bmN0aW9uIG11bG4gKG51bSkgewogICAgICByZXR1cm4gdGhpcy5jbG9uZSgpLmltdWxuKG51bSk7CiAgICB9OwoKICAgIC8vIGB0aGlzYCAqIGB0aGlzYAogICAgQk4ucHJvdG90eXBlLnNxciA9IGZ1bmN0aW9uIHNxciAoKSB7CiAgICAgIHJldHVybiB0aGlzLm11bCh0aGlzKTsKICAgIH07CgogICAgLy8gYHRoaXNgICogYHRoaXNgIGluLXBsYWNlCiAgICBCTi5wcm90b3R5cGUuaXNxciA9IGZ1bmN0aW9uIGlzcXIgKCkgewogICAgICByZXR1cm4gdGhpcy5pbXVsKHRoaXMuY2xvbmUoKSk7CiAgICB9OwoKICAgIC8vIE1hdGgucG93KGB0aGlzYCwgYG51bWApCiAgICBCTi5wcm90b3R5cGUucG93ID0gZnVuY3Rpb24gcG93IChudW0pIHsKICAgICAgdmFyIHcgPSB0b0JpdEFycmF5KG51bSk7CiAgICAgIGlmICh3Lmxlbmd0aCA9PT0gMCkgcmV0dXJuIG5ldyBCTigxKTsKCiAgICAgIC8vIFNraXAgbGVhZGluZyB6ZXJvZXMKICAgICAgdmFyIHJlcyA9IHRoaXM7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdy5sZW5ndGg7IGkrKywgcmVzID0gcmVzLnNxcigpKSB7CiAgICAgICAgaWYgKHdbaV0gIT09IDApIGJyZWFrOwogICAgICB9CgogICAgICBpZiAoKytpIDwgdy5sZW5ndGgpIHsKICAgICAgICBmb3IgKHZhciBxID0gcmVzLnNxcigpOyBpIDwgdy5sZW5ndGg7IGkrKywgcSA9IHEuc3FyKCkpIHsKICAgICAgICAgIGlmICh3W2ldID09PSAwKSBjb250aW51ZTsKCiAgICAgICAgICByZXMgPSByZXMubXVsKHEpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHJlczsKICAgIH07CgogICAgLy8gU2hpZnQtbGVmdCBpbi1wbGFjZQogICAgQk4ucHJvdG90eXBlLml1c2hsbiA9IGZ1bmN0aW9uIGl1c2hsbiAoYml0cykgewogICAgICBhc3NlcnQodHlwZW9mIGJpdHMgPT09ICdudW1iZXInICYmIGJpdHMgPj0gMCk7CiAgICAgIHZhciByID0gYml0cyAlIDI2OwogICAgICB2YXIgcyA9IChiaXRzIC0gcikgLyAyNjsKICAgICAgdmFyIGNhcnJ5TWFzayA9ICgweDNmZmZmZmYgPj4+ICgyNiAtIHIpKSA8PCAoMjYgLSByKTsKICAgICAgdmFyIGk7CgogICAgICBpZiAociAhPT0gMCkgewogICAgICAgIHZhciBjYXJyeSA9IDA7CgogICAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB2YXIgbmV3Q2FycnkgPSB0aGlzLndvcmRzW2ldICYgY2FycnlNYXNrOwogICAgICAgICAgdmFyIGMgPSAoKHRoaXMud29yZHNbaV0gfCAwKSAtIG5ld0NhcnJ5KSA8PCByOwogICAgICAgICAgdGhpcy53b3Jkc1tpXSA9IGMgfCBjYXJyeTsKICAgICAgICAgIGNhcnJ5ID0gbmV3Q2FycnkgPj4+ICgyNiAtIHIpOwogICAgICAgIH0KCiAgICAgICAgaWYgKGNhcnJ5KSB7CiAgICAgICAgICB0aGlzLndvcmRzW2ldID0gY2Fycnk7CiAgICAgICAgICB0aGlzLmxlbmd0aCsrOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKHMgIT09IDApIHsKICAgICAgICBmb3IgKGkgPSB0aGlzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICAgICAgICB0aGlzLndvcmRzW2kgKyBzXSA9IHRoaXMud29yZHNbaV07CiAgICAgICAgfQoKICAgICAgICBmb3IgKGkgPSAwOyBpIDwgczsgaSsrKSB7CiAgICAgICAgICB0aGlzLndvcmRzW2ldID0gMDsKICAgICAgICB9CgogICAgICAgIHRoaXMubGVuZ3RoICs9IHM7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLl9zdHJpcCgpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuaXNobG4gPSBmdW5jdGlvbiBpc2hsbiAoYml0cykgewogICAgICAvLyBUT0RPKGluZHV0bnkpOiBpbXBsZW1lbnQgbWUKICAgICAgYXNzZXJ0KHRoaXMubmVnYXRpdmUgPT09IDApOwogICAgICByZXR1cm4gdGhpcy5pdXNobG4oYml0cyk7CiAgICB9OwoKICAgIC8vIFNoaWZ0LXJpZ2h0IGluLXBsYWNlCiAgICAvLyBOT1RFOiBgaGludGAgaXMgYSBsb3dlc3QgYml0IGJlZm9yZSB0cmFpbGluZyB6ZXJvZXMKICAgIC8vIE5PVEU6IGlmIGBleHRlbmRlZGAgaXMgcHJlc2VudCAtIGl0IHdpbGwgYmUgZmlsbGVkIHdpdGggZGVzdHJveWVkIGJpdHMKICAgIEJOLnByb3RvdHlwZS5pdXNocm4gPSBmdW5jdGlvbiBpdXNocm4gKGJpdHMsIGhpbnQsIGV4dGVuZGVkKSB7CiAgICAgIGFzc2VydCh0eXBlb2YgYml0cyA9PT0gJ251bWJlcicgJiYgYml0cyA+PSAwKTsKICAgICAgdmFyIGg7CiAgICAgIGlmIChoaW50KSB7CiAgICAgICAgaCA9IChoaW50IC0gKGhpbnQgJSAyNikpIC8gMjY7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaCA9IDA7CiAgICAgIH0KCiAgICAgIHZhciByID0gYml0cyAlIDI2OwogICAgICB2YXIgcyA9IE1hdGgubWluKChiaXRzIC0gcikgLyAyNiwgdGhpcy5sZW5ndGgpOwogICAgICB2YXIgbWFzayA9IDB4M2ZmZmZmZiBeICgoMHgzZmZmZmZmID4+PiByKSA8PCByKTsKICAgICAgdmFyIG1hc2tlZFdvcmRzID0gZXh0ZW5kZWQ7CgogICAgICBoIC09IHM7CiAgICAgIGggPSBNYXRoLm1heCgwLCBoKTsKCiAgICAgIC8vIEV4dGVuZGVkIG1vZGUsIGNvcHkgbWFza2VkIHBhcnQKICAgICAgaWYgKG1hc2tlZFdvcmRzKSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzOyBpKyspIHsKICAgICAgICAgIG1hc2tlZFdvcmRzLndvcmRzW2ldID0gdGhpcy53b3Jkc1tpXTsKICAgICAgICB9CiAgICAgICAgbWFza2VkV29yZHMubGVuZ3RoID0gczsKICAgICAgfQoKICAgICAgaWYgKHMgPT09IDApIDsgZWxzZSBpZiAodGhpcy5sZW5ndGggPiBzKSB7CiAgICAgICAgdGhpcy5sZW5ndGggLT0gczsKICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgdGhpcy53b3Jkc1tpXSA9IHRoaXMud29yZHNbaSArIHNdOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLndvcmRzWzBdID0gMDsKICAgICAgICB0aGlzLmxlbmd0aCA9IDE7CiAgICAgIH0KCiAgICAgIHZhciBjYXJyeSA9IDA7CiAgICAgIGZvciAoaSA9IHRoaXMubGVuZ3RoIC0gMTsgaSA+PSAwICYmIChjYXJyeSAhPT0gMCB8fCBpID49IGgpOyBpLS0pIHsKICAgICAgICB2YXIgd29yZCA9IHRoaXMud29yZHNbaV0gfCAwOwogICAgICAgIHRoaXMud29yZHNbaV0gPSAoY2FycnkgPDwgKDI2IC0gcikpIHwgKHdvcmQgPj4+IHIpOwogICAgICAgIGNhcnJ5ID0gd29yZCAmIG1hc2s7CiAgICAgIH0KCiAgICAgIC8vIFB1c2ggY2FycmllZCBiaXRzIGFzIGEgbWFzawogICAgICBpZiAobWFza2VkV29yZHMgJiYgY2FycnkgIT09IDApIHsKICAgICAgICBtYXNrZWRXb3Jkcy53b3Jkc1ttYXNrZWRXb3Jkcy5sZW5ndGgrK10gPSBjYXJyeTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgdGhpcy53b3Jkc1swXSA9IDA7CiAgICAgICAgdGhpcy5sZW5ndGggPSAxOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5fc3RyaXAoKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmlzaHJuID0gZnVuY3Rpb24gaXNocm4gKGJpdHMsIGhpbnQsIGV4dGVuZGVkKSB7CiAgICAgIC8vIFRPRE8oaW5kdXRueSk6IGltcGxlbWVudCBtZQogICAgICBhc3NlcnQodGhpcy5uZWdhdGl2ZSA9PT0gMCk7CiAgICAgIHJldHVybiB0aGlzLml1c2hybihiaXRzLCBoaW50LCBleHRlbmRlZCk7CiAgICB9OwoKICAgIC8vIFNoaWZ0LWxlZnQKICAgIEJOLnByb3RvdHlwZS5zaGxuID0gZnVuY3Rpb24gc2hsbiAoYml0cykgewogICAgICByZXR1cm4gdGhpcy5jbG9uZSgpLmlzaGxuKGJpdHMpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUudXNobG4gPSBmdW5jdGlvbiB1c2hsbiAoYml0cykgewogICAgICByZXR1cm4gdGhpcy5jbG9uZSgpLml1c2hsbihiaXRzKTsKICAgIH07CgogICAgLy8gU2hpZnQtcmlnaHQKICAgIEJOLnByb3RvdHlwZS5zaHJuID0gZnVuY3Rpb24gc2hybiAoYml0cykgewogICAgICByZXR1cm4gdGhpcy5jbG9uZSgpLmlzaHJuKGJpdHMpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUudXNocm4gPSBmdW5jdGlvbiB1c2hybiAoYml0cykgewogICAgICByZXR1cm4gdGhpcy5jbG9uZSgpLml1c2hybihiaXRzKTsKICAgIH07CgogICAgLy8gVGVzdCBpZiBuIGJpdCBpcyBzZXQKICAgIEJOLnByb3RvdHlwZS50ZXN0biA9IGZ1bmN0aW9uIHRlc3RuIChiaXQpIHsKICAgICAgYXNzZXJ0KHR5cGVvZiBiaXQgPT09ICdudW1iZXInICYmIGJpdCA+PSAwKTsKICAgICAgdmFyIHIgPSBiaXQgJSAyNjsKICAgICAgdmFyIHMgPSAoYml0IC0gcikgLyAyNjsKICAgICAgdmFyIHEgPSAxIDw8IHI7CgogICAgICAvLyBGYXN0IGNhc2U6IGJpdCBpcyBtdWNoIGhpZ2hlciB0aGFuIGFsbCBleGlzdGluZyB3b3JkcwogICAgICBpZiAodGhpcy5sZW5ndGggPD0gcykgcmV0dXJuIGZhbHNlOwoKICAgICAgLy8gQ2hlY2sgYml0IGFuZCByZXR1cm4KICAgICAgdmFyIHcgPSB0aGlzLndvcmRzW3NdOwoKICAgICAgcmV0dXJuICEhKHcgJiBxKTsKICAgIH07CgogICAgLy8gUmV0dXJuIG9ubHkgbG93ZXJzIGJpdHMgb2YgbnVtYmVyIChpbi1wbGFjZSkKICAgIEJOLnByb3RvdHlwZS5pbWFza24gPSBmdW5jdGlvbiBpbWFza24gKGJpdHMpIHsKICAgICAgYXNzZXJ0KHR5cGVvZiBiaXRzID09PSAnbnVtYmVyJyAmJiBiaXRzID49IDApOwogICAgICB2YXIgciA9IGJpdHMgJSAyNjsKICAgICAgdmFyIHMgPSAoYml0cyAtIHIpIC8gMjY7CgogICAgICBhc3NlcnQodGhpcy5uZWdhdGl2ZSA9PT0gMCwgJ2ltYXNrbiB3b3JrcyBvbmx5IHdpdGggcG9zaXRpdmUgbnVtYmVycycpOwoKICAgICAgaWYgKHRoaXMubGVuZ3RoIDw9IHMpIHsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfQoKICAgICAgaWYgKHIgIT09IDApIHsKICAgICAgICBzKys7CiAgICAgIH0KICAgICAgdGhpcy5sZW5ndGggPSBNYXRoLm1pbihzLCB0aGlzLmxlbmd0aCk7CgogICAgICBpZiAociAhPT0gMCkgewogICAgICAgIHZhciBtYXNrID0gMHgzZmZmZmZmIF4gKCgweDNmZmZmZmYgPj4+IHIpIDw8IHIpOwogICAgICAgIHRoaXMud29yZHNbdGhpcy5sZW5ndGggLSAxXSAmPSBtYXNrOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5fc3RyaXAoKTsKICAgIH07CgogICAgLy8gUmV0dXJuIG9ubHkgbG93ZXJzIGJpdHMgb2YgbnVtYmVyCiAgICBCTi5wcm90b3R5cGUubWFza24gPSBmdW5jdGlvbiBtYXNrbiAoYml0cykgewogICAgICByZXR1cm4gdGhpcy5jbG9uZSgpLmltYXNrbihiaXRzKTsKICAgIH07CgogICAgLy8gQWRkIHBsYWluIG51bWJlciBgbnVtYCB0byBgdGhpc2AKICAgIEJOLnByb3RvdHlwZS5pYWRkbiA9IGZ1bmN0aW9uIGlhZGRuIChudW0pIHsKICAgICAgYXNzZXJ0KHR5cGVvZiBudW0gPT09ICdudW1iZXInKTsKICAgICAgYXNzZXJ0KG51bSA8IDB4NDAwMDAwMCk7CiAgICAgIGlmIChudW0gPCAwKSByZXR1cm4gdGhpcy5pc3VibigtbnVtKTsKCiAgICAgIC8vIFBvc3NpYmxlIHNpZ24gY2hhbmdlCiAgICAgIGlmICh0aGlzLm5lZ2F0aXZlICE9PSAwKSB7CiAgICAgICAgaWYgKHRoaXMubGVuZ3RoID09PSAxICYmICh0aGlzLndvcmRzWzBdIHwgMCkgPD0gbnVtKSB7CiAgICAgICAgICB0aGlzLndvcmRzWzBdID0gbnVtIC0gKHRoaXMud29yZHNbMF0gfCAwKTsKICAgICAgICAgIHRoaXMubmVnYXRpdmUgPSAwOwogICAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgICAgfQoKICAgICAgICB0aGlzLm5lZ2F0aXZlID0gMDsKICAgICAgICB0aGlzLmlzdWJuKG51bSk7CiAgICAgICAgdGhpcy5uZWdhdGl2ZSA9IDE7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0KCiAgICAgIC8vIEFkZCB3aXRob3V0IGNoZWNrcwogICAgICByZXR1cm4gdGhpcy5faWFkZG4obnVtKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLl9pYWRkbiA9IGZ1bmN0aW9uIF9pYWRkbiAobnVtKSB7CiAgICAgIHRoaXMud29yZHNbMF0gKz0gbnVtOwoKICAgICAgLy8gQ2FycnkKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aCAmJiB0aGlzLndvcmRzW2ldID49IDB4NDAwMDAwMDsgaSsrKSB7CiAgICAgICAgdGhpcy53b3Jkc1tpXSAtPSAweDQwMDAwMDA7CiAgICAgICAgaWYgKGkgPT09IHRoaXMubGVuZ3RoIC0gMSkgewogICAgICAgICAgdGhpcy53b3Jkc1tpICsgMV0gPSAxOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLndvcmRzW2kgKyAxXSsrOwogICAgICAgIH0KICAgICAgfQogICAgICB0aGlzLmxlbmd0aCA9IE1hdGgubWF4KHRoaXMubGVuZ3RoLCBpICsgMSk7CgogICAgICByZXR1cm4gdGhpczsKICAgIH07CgogICAgLy8gU3VidHJhY3QgcGxhaW4gbnVtYmVyIGBudW1gIGZyb20gYHRoaXNgCiAgICBCTi5wcm90b3R5cGUuaXN1Ym4gPSBmdW5jdGlvbiBpc3VibiAobnVtKSB7CiAgICAgIGFzc2VydCh0eXBlb2YgbnVtID09PSAnbnVtYmVyJyk7CiAgICAgIGFzc2VydChudW0gPCAweDQwMDAwMDApOwogICAgICBpZiAobnVtIDwgMCkgcmV0dXJuIHRoaXMuaWFkZG4oLW51bSk7CgogICAgICBpZiAodGhpcy5uZWdhdGl2ZSAhPT0gMCkgewogICAgICAgIHRoaXMubmVnYXRpdmUgPSAwOwogICAgICAgIHRoaXMuaWFkZG4obnVtKTsKICAgICAgICB0aGlzLm5lZ2F0aXZlID0gMTsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfQoKICAgICAgdGhpcy53b3Jkc1swXSAtPSBudW07CgogICAgICBpZiAodGhpcy5sZW5ndGggPT09IDEgJiYgdGhpcy53b3Jkc1swXSA8IDApIHsKICAgICAgICB0aGlzLndvcmRzWzBdID0gLXRoaXMud29yZHNbMF07CiAgICAgICAgdGhpcy5uZWdhdGl2ZSA9IDE7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gQ2FycnkKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoICYmIHRoaXMud29yZHNbaV0gPCAwOyBpKyspIHsKICAgICAgICAgIHRoaXMud29yZHNbaV0gKz0gMHg0MDAwMDAwOwogICAgICAgICAgdGhpcy53b3Jkc1tpICsgMV0gLT0gMTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLl9zdHJpcCgpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuYWRkbiA9IGZ1bmN0aW9uIGFkZG4gKG51bSkgewogICAgICByZXR1cm4gdGhpcy5jbG9uZSgpLmlhZGRuKG51bSk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5zdWJuID0gZnVuY3Rpb24gc3VibiAobnVtKSB7CiAgICAgIHJldHVybiB0aGlzLmNsb25lKCkuaXN1Ym4obnVtKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmlhYnMgPSBmdW5jdGlvbiBpYWJzICgpIHsKICAgICAgdGhpcy5uZWdhdGl2ZSA9IDA7CgogICAgICByZXR1cm4gdGhpczsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmFicyA9IGZ1bmN0aW9uIGFicyAoKSB7CiAgICAgIHJldHVybiB0aGlzLmNsb25lKCkuaWFicygpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuX2lzaGxuc3VibXVsID0gZnVuY3Rpb24gX2lzaGxuc3VibXVsIChudW0sIG11bCwgc2hpZnQpIHsKICAgICAgdmFyIGxlbiA9IG51bS5sZW5ndGggKyBzaGlmdDsKICAgICAgdmFyIGk7CgogICAgICB0aGlzLl9leHBhbmQobGVuKTsKCiAgICAgIHZhciB3OwogICAgICB2YXIgY2FycnkgPSAwOwogICAgICBmb3IgKGkgPSAwOyBpIDwgbnVtLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdyA9ICh0aGlzLndvcmRzW2kgKyBzaGlmdF0gfCAwKSArIGNhcnJ5OwogICAgICAgIHZhciByaWdodCA9IChudW0ud29yZHNbaV0gfCAwKSAqIG11bDsKICAgICAgICB3IC09IHJpZ2h0ICYgMHgzZmZmZmZmOwogICAgICAgIGNhcnJ5ID0gKHcgPj4gMjYpIC0gKChyaWdodCAvIDB4NDAwMDAwMCkgfCAwKTsKICAgICAgICB0aGlzLndvcmRzW2kgKyBzaGlmdF0gPSB3ICYgMHgzZmZmZmZmOwogICAgICB9CiAgICAgIGZvciAoOyBpIDwgdGhpcy5sZW5ndGggLSBzaGlmdDsgaSsrKSB7CiAgICAgICAgdyA9ICh0aGlzLndvcmRzW2kgKyBzaGlmdF0gfCAwKSArIGNhcnJ5OwogICAgICAgIGNhcnJ5ID0gdyA+PiAyNjsKICAgICAgICB0aGlzLndvcmRzW2kgKyBzaGlmdF0gPSB3ICYgMHgzZmZmZmZmOwogICAgICB9CgogICAgICBpZiAoY2FycnkgPT09IDApIHJldHVybiB0aGlzLl9zdHJpcCgpOwoKICAgICAgLy8gU3VidHJhY3Rpb24gb3ZlcmZsb3cKICAgICAgYXNzZXJ0KGNhcnJ5ID09PSAtMSk7CiAgICAgIGNhcnJ5ID0gMDsKICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHsKICAgICAgICB3ID0gLSh0aGlzLndvcmRzW2ldIHwgMCkgKyBjYXJyeTsKICAgICAgICBjYXJyeSA9IHcgPj4gMjY7CiAgICAgICAgdGhpcy53b3Jkc1tpXSA9IHcgJiAweDNmZmZmZmY7CiAgICAgIH0KICAgICAgdGhpcy5uZWdhdGl2ZSA9IDE7CgogICAgICByZXR1cm4gdGhpcy5fc3RyaXAoKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLl93b3JkRGl2ID0gZnVuY3Rpb24gX3dvcmREaXYgKG51bSwgbW9kZSkgewogICAgICB2YXIgc2hpZnQgPSB0aGlzLmxlbmd0aCAtIG51bS5sZW5ndGg7CgogICAgICB2YXIgYSA9IHRoaXMuY2xvbmUoKTsKICAgICAgdmFyIGIgPSBudW07CgogICAgICAvLyBOb3JtYWxpemUKICAgICAgdmFyIGJoaSA9IGIud29yZHNbYi5sZW5ndGggLSAxXSB8IDA7CiAgICAgIHZhciBiaGlCaXRzID0gdGhpcy5fY291bnRCaXRzKGJoaSk7CiAgICAgIHNoaWZ0ID0gMjYgLSBiaGlCaXRzOwogICAgICBpZiAoc2hpZnQgIT09IDApIHsKICAgICAgICBiID0gYi51c2hsbihzaGlmdCk7CiAgICAgICAgYS5pdXNobG4oc2hpZnQpOwogICAgICAgIGJoaSA9IGIud29yZHNbYi5sZW5ndGggLSAxXSB8IDA7CiAgICAgIH0KCiAgICAgIC8vIEluaXRpYWxpemUgcXVvdGllbnQKICAgICAgdmFyIG0gPSBhLmxlbmd0aCAtIGIubGVuZ3RoOwogICAgICB2YXIgcTsKCiAgICAgIGlmIChtb2RlICE9PSAnbW9kJykgewogICAgICAgIHEgPSBuZXcgQk4obnVsbCk7CiAgICAgICAgcS5sZW5ndGggPSBtICsgMTsKICAgICAgICBxLndvcmRzID0gbmV3IEFycmF5KHEubGVuZ3RoKTsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHEubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHEud29yZHNbaV0gPSAwOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdmFyIGRpZmYgPSBhLmNsb25lKCkuX2lzaGxuc3VibXVsKGIsIDEsIG0pOwogICAgICBpZiAoZGlmZi5uZWdhdGl2ZSA9PT0gMCkgewogICAgICAgIGEgPSBkaWZmOwogICAgICAgIGlmIChxKSB7CiAgICAgICAgICBxLndvcmRzW21dID0gMTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGZvciAodmFyIGogPSBtIC0gMTsgaiA+PSAwOyBqLS0pIHsKICAgICAgICB2YXIgcWogPSAoYS53b3Jkc1tiLmxlbmd0aCArIGpdIHwgMCkgKiAweDQwMDAwMDAgKwogICAgICAgICAgKGEud29yZHNbYi5sZW5ndGggKyBqIC0gMV0gfCAwKTsKCiAgICAgICAgLy8gTk9URTogKHFqIC8gYmhpKSBpcyAoMHgzZmZmZmZmICogMHg0MDAwMDAwICsgMHgzZmZmZmZmKSAvIDB4MjAwMDAwMCBtYXgKICAgICAgICAvLyAoMHg3ZmZmZmZmKQogICAgICAgIHFqID0gTWF0aC5taW4oKHFqIC8gYmhpKSB8IDAsIDB4M2ZmZmZmZik7CgogICAgICAgIGEuX2lzaGxuc3VibXVsKGIsIHFqLCBqKTsKICAgICAgICB3aGlsZSAoYS5uZWdhdGl2ZSAhPT0gMCkgewogICAgICAgICAgcWotLTsKICAgICAgICAgIGEubmVnYXRpdmUgPSAwOwogICAgICAgICAgYS5faXNobG5zdWJtdWwoYiwgMSwgaik7CiAgICAgICAgICBpZiAoIWEuaXNaZXJvKCkpIHsKICAgICAgICAgICAgYS5uZWdhdGl2ZSBePSAxOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAocSkgewogICAgICAgICAgcS53b3Jkc1tqXSA9IHFqOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAocSkgewogICAgICAgIHEuX3N0cmlwKCk7CiAgICAgIH0KICAgICAgYS5fc3RyaXAoKTsKCiAgICAgIC8vIERlbm9ybWFsaXplCiAgICAgIGlmIChtb2RlICE9PSAnZGl2JyAmJiBzaGlmdCAhPT0gMCkgewogICAgICAgIGEuaXVzaHJuKHNoaWZ0KTsKICAgICAgfQoKICAgICAgcmV0dXJuIHsKICAgICAgICBkaXY6IHEgfHwgbnVsbCwKICAgICAgICBtb2Q6IGEKICAgICAgfTsKICAgIH07CgogICAgLy8gTk9URTogMSkgYG1vZGVgIGNhbiBiZSBzZXQgdG8gYG1vZGAgdG8gcmVxdWVzdCBtb2Qgb25seSwKICAgIC8vICAgICAgIHRvIGBkaXZgIHRvIHJlcXVlc3QgZGl2IG9ubHksIG9yIGJlIGFic2VudCB0bwogICAgLy8gICAgICAgcmVxdWVzdCBib3RoIGRpdiAmIG1vZAogICAgLy8gICAgICAgMikgYHBvc2l0aXZlYCBpcyB0cnVlIGlmIHVuc2lnbmVkIG1vZCBpcyByZXF1ZXN0ZWQKICAgIEJOLnByb3RvdHlwZS5kaXZtb2QgPSBmdW5jdGlvbiBkaXZtb2QgKG51bSwgbW9kZSwgcG9zaXRpdmUpIHsKICAgICAgYXNzZXJ0KCFudW0uaXNaZXJvKCkpOwoKICAgICAgaWYgKHRoaXMuaXNaZXJvKCkpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgZGl2OiBuZXcgQk4oMCksCiAgICAgICAgICBtb2Q6IG5ldyBCTigwKQogICAgICAgIH07CiAgICAgIH0KCiAgICAgIHZhciBkaXYsIG1vZCwgcmVzOwogICAgICBpZiAodGhpcy5uZWdhdGl2ZSAhPT0gMCAmJiBudW0ubmVnYXRpdmUgPT09IDApIHsKICAgICAgICByZXMgPSB0aGlzLm5lZygpLmRpdm1vZChudW0sIG1vZGUpOwoKICAgICAgICBpZiAobW9kZSAhPT0gJ21vZCcpIHsKICAgICAgICAgIGRpdiA9IHJlcy5kaXYubmVnKCk7CiAgICAgICAgfQoKICAgICAgICBpZiAobW9kZSAhPT0gJ2RpdicpIHsKICAgICAgICAgIG1vZCA9IHJlcy5tb2QubmVnKCk7CiAgICAgICAgICBpZiAocG9zaXRpdmUgJiYgbW9kLm5lZ2F0aXZlICE9PSAwKSB7CiAgICAgICAgICAgIG1vZC5pYWRkKG51bSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gewogICAgICAgICAgZGl2OiBkaXYsCiAgICAgICAgICBtb2Q6IG1vZAogICAgICAgIH07CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLm5lZ2F0aXZlID09PSAwICYmIG51bS5uZWdhdGl2ZSAhPT0gMCkgewogICAgICAgIHJlcyA9IHRoaXMuZGl2bW9kKG51bS5uZWcoKSwgbW9kZSk7CgogICAgICAgIGlmIChtb2RlICE9PSAnbW9kJykgewogICAgICAgICAgZGl2ID0gcmVzLmRpdi5uZWcoKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB7CiAgICAgICAgICBkaXY6IGRpdiwKICAgICAgICAgIG1vZDogcmVzLm1vZAogICAgICAgIH07CiAgICAgIH0KCiAgICAgIGlmICgodGhpcy5uZWdhdGl2ZSAmIG51bS5uZWdhdGl2ZSkgIT09IDApIHsKICAgICAgICByZXMgPSB0aGlzLm5lZygpLmRpdm1vZChudW0ubmVnKCksIG1vZGUpOwoKICAgICAgICBpZiAobW9kZSAhPT0gJ2RpdicpIHsKICAgICAgICAgIG1vZCA9IHJlcy5tb2QubmVnKCk7CiAgICAgICAgICBpZiAocG9zaXRpdmUgJiYgbW9kLm5lZ2F0aXZlICE9PSAwKSB7CiAgICAgICAgICAgIG1vZC5pc3ViKG51bSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gewogICAgICAgICAgZGl2OiByZXMuZGl2LAogICAgICAgICAgbW9kOiBtb2QKICAgICAgICB9OwogICAgICB9CgogICAgICAvLyBCb3RoIG51bWJlcnMgYXJlIHBvc2l0aXZlIGF0IHRoaXMgcG9pbnQKCiAgICAgIC8vIFN0cmlwIGJvdGggbnVtYmVycyB0byBhcHByb3hpbWF0ZSBzaGlmdCB2YWx1ZQogICAgICBpZiAobnVtLmxlbmd0aCA+IHRoaXMubGVuZ3RoIHx8IHRoaXMuY21wKG51bSkgPCAwKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGRpdjogbmV3IEJOKDApLAogICAgICAgICAgbW9kOiB0aGlzCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgLy8gVmVyeSBzaG9ydCByZWR1Y3Rpb24KICAgICAgaWYgKG51bS5sZW5ndGggPT09IDEpIHsKICAgICAgICBpZiAobW9kZSA9PT0gJ2RpdicpIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGRpdjogdGhpcy5kaXZuKG51bS53b3Jkc1swXSksCiAgICAgICAgICAgIG1vZDogbnVsbAogICAgICAgICAgfTsKICAgICAgICB9CgogICAgICAgIGlmIChtb2RlID09PSAnbW9kJykgewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgZGl2OiBudWxsLAogICAgICAgICAgICBtb2Q6IG5ldyBCTih0aGlzLm1vZHJuKG51bS53b3Jkc1swXSkpCiAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGRpdjogdGhpcy5kaXZuKG51bS53b3Jkc1swXSksCiAgICAgICAgICBtb2Q6IG5ldyBCTih0aGlzLm1vZHJuKG51bS53b3Jkc1swXSkpCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMuX3dvcmREaXYobnVtLCBtb2RlKTsKICAgIH07CgogICAgLy8gRmluZCBgdGhpc2AgLyBgbnVtYAogICAgQk4ucHJvdG90eXBlLmRpdiA9IGZ1bmN0aW9uIGRpdiAobnVtKSB7CiAgICAgIHJldHVybiB0aGlzLmRpdm1vZChudW0sICdkaXYnLCBmYWxzZSkuZGl2OwogICAgfTsKCiAgICAvLyBGaW5kIGB0aGlzYCAlIGBudW1gCiAgICBCTi5wcm90b3R5cGUubW9kID0gZnVuY3Rpb24gbW9kIChudW0pIHsKICAgICAgcmV0dXJuIHRoaXMuZGl2bW9kKG51bSwgJ21vZCcsIGZhbHNlKS5tb2Q7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS51bW9kID0gZnVuY3Rpb24gdW1vZCAobnVtKSB7CiAgICAgIHJldHVybiB0aGlzLmRpdm1vZChudW0sICdtb2QnLCB0cnVlKS5tb2Q7CiAgICB9OwoKICAgIC8vIEZpbmQgUm91bmQoYHRoaXNgIC8gYG51bWApCiAgICBCTi5wcm90b3R5cGUuZGl2Um91bmQgPSBmdW5jdGlvbiBkaXZSb3VuZCAobnVtKSB7CiAgICAgIHZhciBkbSA9IHRoaXMuZGl2bW9kKG51bSk7CgogICAgICAvLyBGYXN0IGNhc2UgLSBleGFjdCBkaXZpc2lvbgogICAgICBpZiAoZG0ubW9kLmlzWmVybygpKSByZXR1cm4gZG0uZGl2OwoKICAgICAgdmFyIG1vZCA9IGRtLmRpdi5uZWdhdGl2ZSAhPT0gMCA/IGRtLm1vZC5pc3ViKG51bSkgOiBkbS5tb2Q7CgogICAgICB2YXIgaGFsZiA9IG51bS51c2hybigxKTsKICAgICAgdmFyIHIyID0gbnVtLmFuZGxuKDEpOwogICAgICB2YXIgY21wID0gbW9kLmNtcChoYWxmKTsKCiAgICAgIC8vIFJvdW5kIGRvd24KICAgICAgaWYgKGNtcCA8IDAgfHwgKHIyID09PSAxICYmIGNtcCA9PT0gMCkpIHJldHVybiBkbS5kaXY7CgogICAgICAvLyBSb3VuZCB1cAogICAgICByZXR1cm4gZG0uZGl2Lm5lZ2F0aXZlICE9PSAwID8gZG0uZGl2LmlzdWJuKDEpIDogZG0uZGl2LmlhZGRuKDEpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUubW9kcm4gPSBmdW5jdGlvbiBtb2RybiAobnVtKSB7CiAgICAgIHZhciBpc05lZ051bSA9IG51bSA8IDA7CiAgICAgIGlmIChpc05lZ051bSkgbnVtID0gLW51bTsKCiAgICAgIGFzc2VydChudW0gPD0gMHgzZmZmZmZmKTsKICAgICAgdmFyIHAgPSAoMSA8PCAyNikgJSBudW07CgogICAgICB2YXIgYWNjID0gMDsKICAgICAgZm9yICh2YXIgaSA9IHRoaXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgICAgICBhY2MgPSAocCAqIGFjYyArICh0aGlzLndvcmRzW2ldIHwgMCkpICUgbnVtOwogICAgICB9CgogICAgICByZXR1cm4gaXNOZWdOdW0gPyAtYWNjIDogYWNjOwogICAgfTsKCiAgICAvLyBXQVJOSU5HOiBERVBSRUNBVEVECiAgICBCTi5wcm90b3R5cGUubW9kbiA9IGZ1bmN0aW9uIG1vZG4gKG51bSkgewogICAgICByZXR1cm4gdGhpcy5tb2RybihudW0pOwogICAgfTsKCiAgICAvLyBJbi1wbGFjZSBkaXZpc2lvbiBieSBudW1iZXIKICAgIEJOLnByb3RvdHlwZS5pZGl2biA9IGZ1bmN0aW9uIGlkaXZuIChudW0pIHsKICAgICAgdmFyIGlzTmVnTnVtID0gbnVtIDwgMDsKICAgICAgaWYgKGlzTmVnTnVtKSBudW0gPSAtbnVtOwoKICAgICAgYXNzZXJ0KG51bSA8PSAweDNmZmZmZmYpOwoKICAgICAgdmFyIGNhcnJ5ID0gMDsKICAgICAgZm9yICh2YXIgaSA9IHRoaXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgICAgICB2YXIgdyA9ICh0aGlzLndvcmRzW2ldIHwgMCkgKyBjYXJyeSAqIDB4NDAwMDAwMDsKICAgICAgICB0aGlzLndvcmRzW2ldID0gKHcgLyBudW0pIHwgMDsKICAgICAgICBjYXJyeSA9IHcgJSBudW07CiAgICAgIH0KCiAgICAgIHRoaXMuX3N0cmlwKCk7CiAgICAgIHJldHVybiBpc05lZ051bSA/IHRoaXMuaW5lZygpIDogdGhpczsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmRpdm4gPSBmdW5jdGlvbiBkaXZuIChudW0pIHsKICAgICAgcmV0dXJuIHRoaXMuY2xvbmUoKS5pZGl2bihudW0pOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuZWdjZCA9IGZ1bmN0aW9uIGVnY2QgKHApIHsKICAgICAgYXNzZXJ0KHAubmVnYXRpdmUgPT09IDApOwogICAgICBhc3NlcnQoIXAuaXNaZXJvKCkpOwoKICAgICAgdmFyIHggPSB0aGlzOwogICAgICB2YXIgeSA9IHAuY2xvbmUoKTsKCiAgICAgIGlmICh4Lm5lZ2F0aXZlICE9PSAwKSB7CiAgICAgICAgeCA9IHgudW1vZChwKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB4ID0geC5jbG9uZSgpOwogICAgICB9CgogICAgICAvLyBBICogeCArIEIgKiB5ID0geAogICAgICB2YXIgQSA9IG5ldyBCTigxKTsKICAgICAgdmFyIEIgPSBuZXcgQk4oMCk7CgogICAgICAvLyBDICogeCArIEQgKiB5ID0geQogICAgICB2YXIgQyA9IG5ldyBCTigwKTsKICAgICAgdmFyIEQgPSBuZXcgQk4oMSk7CgogICAgICB2YXIgZyA9IDA7CgogICAgICB3aGlsZSAoeC5pc0V2ZW4oKSAmJiB5LmlzRXZlbigpKSB7CiAgICAgICAgeC5pdXNocm4oMSk7CiAgICAgICAgeS5pdXNocm4oMSk7CiAgICAgICAgKytnOwogICAgICB9CgogICAgICB2YXIgeXAgPSB5LmNsb25lKCk7CiAgICAgIHZhciB4cCA9IHguY2xvbmUoKTsKCiAgICAgIHdoaWxlICgheC5pc1plcm8oKSkgewogICAgICAgIGZvciAodmFyIGkgPSAwLCBpbSA9IDE7ICh4LndvcmRzWzBdICYgaW0pID09PSAwICYmIGkgPCAyNjsgKytpLCBpbSA8PD0gMSk7CiAgICAgICAgaWYgKGkgPiAwKSB7CiAgICAgICAgICB4Lml1c2hybihpKTsKICAgICAgICAgIHdoaWxlIChpLS0gPiAwKSB7CiAgICAgICAgICAgIGlmIChBLmlzT2RkKCkgfHwgQi5pc09kZCgpKSB7CiAgICAgICAgICAgICAgQS5pYWRkKHlwKTsKICAgICAgICAgICAgICBCLmlzdWIoeHApOwogICAgICAgICAgICB9CgogICAgICAgICAgICBBLml1c2hybigxKTsKICAgICAgICAgICAgQi5pdXNocm4oMSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmb3IgKHZhciBqID0gMCwgam0gPSAxOyAoeS53b3Jkc1swXSAmIGptKSA9PT0gMCAmJiBqIDwgMjY7ICsraiwgam0gPDw9IDEpOwogICAgICAgIGlmIChqID4gMCkgewogICAgICAgICAgeS5pdXNocm4oaik7CiAgICAgICAgICB3aGlsZSAoai0tID4gMCkgewogICAgICAgICAgICBpZiAoQy5pc09kZCgpIHx8IEQuaXNPZGQoKSkgewogICAgICAgICAgICAgIEMuaWFkZCh5cCk7CiAgICAgICAgICAgICAgRC5pc3ViKHhwKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgQy5pdXNocm4oMSk7CiAgICAgICAgICAgIEQuaXVzaHJuKDEpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKHguY21wKHkpID49IDApIHsKICAgICAgICAgIHguaXN1Yih5KTsKICAgICAgICAgIEEuaXN1YihDKTsKICAgICAgICAgIEIuaXN1YihEKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgeS5pc3ViKHgpOwogICAgICAgICAgQy5pc3ViKEEpOwogICAgICAgICAgRC5pc3ViKEIpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHsKICAgICAgICBhOiBDLAogICAgICAgIGI6IEQsCiAgICAgICAgZ2NkOiB5Lml1c2hsbihnKQogICAgICB9OwogICAgfTsKCiAgICAvLyBUaGlzIGlzIHJlZHVjZWQgaW5jYXJuYXRpb24gb2YgdGhlIGJpbmFyeSBFRUEKICAgIC8vIGFib3ZlLCBkZXNpZ25hdGVkIHRvIGludmVydCBtZW1iZXJzIG9mIHRoZQogICAgLy8gX3ByaW1lXyBmaWVsZHMgRihwKSBhdCBhIG1heGltYWwgc3BlZWQKICAgIEJOLnByb3RvdHlwZS5faW52bXAgPSBmdW5jdGlvbiBfaW52bXAgKHApIHsKICAgICAgYXNzZXJ0KHAubmVnYXRpdmUgPT09IDApOwogICAgICBhc3NlcnQoIXAuaXNaZXJvKCkpOwoKICAgICAgdmFyIGEgPSB0aGlzOwogICAgICB2YXIgYiA9IHAuY2xvbmUoKTsKCiAgICAgIGlmIChhLm5lZ2F0aXZlICE9PSAwKSB7CiAgICAgICAgYSA9IGEudW1vZChwKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBhID0gYS5jbG9uZSgpOwogICAgICB9CgogICAgICB2YXIgeDEgPSBuZXcgQk4oMSk7CiAgICAgIHZhciB4MiA9IG5ldyBCTigwKTsKCiAgICAgIHZhciBkZWx0YSA9IGIuY2xvbmUoKTsKCiAgICAgIHdoaWxlIChhLmNtcG4oMSkgPiAwICYmIGIuY21wbigxKSA+IDApIHsKICAgICAgICBmb3IgKHZhciBpID0gMCwgaW0gPSAxOyAoYS53b3Jkc1swXSAmIGltKSA9PT0gMCAmJiBpIDwgMjY7ICsraSwgaW0gPDw9IDEpOwogICAgICAgIGlmIChpID4gMCkgewogICAgICAgICAgYS5pdXNocm4oaSk7CiAgICAgICAgICB3aGlsZSAoaS0tID4gMCkgewogICAgICAgICAgICBpZiAoeDEuaXNPZGQoKSkgewogICAgICAgICAgICAgIHgxLmlhZGQoZGVsdGEpOwogICAgICAgICAgICB9CgogICAgICAgICAgICB4MS5pdXNocm4oMSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmb3IgKHZhciBqID0gMCwgam0gPSAxOyAoYi53b3Jkc1swXSAmIGptKSA9PT0gMCAmJiBqIDwgMjY7ICsraiwgam0gPDw9IDEpOwogICAgICAgIGlmIChqID4gMCkgewogICAgICAgICAgYi5pdXNocm4oaik7CiAgICAgICAgICB3aGlsZSAoai0tID4gMCkgewogICAgICAgICAgICBpZiAoeDIuaXNPZGQoKSkgewogICAgICAgICAgICAgIHgyLmlhZGQoZGVsdGEpOwogICAgICAgICAgICB9CgogICAgICAgICAgICB4Mi5pdXNocm4oMSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoYS5jbXAoYikgPj0gMCkgewogICAgICAgICAgYS5pc3ViKGIpOwogICAgICAgICAgeDEuaXN1Yih4Mik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGIuaXN1YihhKTsKICAgICAgICAgIHgyLmlzdWIoeDEpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdmFyIHJlczsKICAgICAgaWYgKGEuY21wbigxKSA9PT0gMCkgewogICAgICAgIHJlcyA9IHgxOwogICAgICB9IGVsc2UgewogICAgICAgIHJlcyA9IHgyOwogICAgICB9CgogICAgICBpZiAocmVzLmNtcG4oMCkgPCAwKSB7CiAgICAgICAgcmVzLmlhZGQocCk7CiAgICAgIH0KCiAgICAgIHJldHVybiByZXM7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5nY2QgPSBmdW5jdGlvbiBnY2QgKG51bSkgewogICAgICBpZiAodGhpcy5pc1plcm8oKSkgcmV0dXJuIG51bS5hYnMoKTsKICAgICAgaWYgKG51bS5pc1plcm8oKSkgcmV0dXJuIHRoaXMuYWJzKCk7CgogICAgICB2YXIgYSA9IHRoaXMuY2xvbmUoKTsKICAgICAgdmFyIGIgPSBudW0uY2xvbmUoKTsKICAgICAgYS5uZWdhdGl2ZSA9IDA7CiAgICAgIGIubmVnYXRpdmUgPSAwOwoKICAgICAgLy8gUmVtb3ZlIGNvbW1vbiBmYWN0b3Igb2YgdHdvCiAgICAgIGZvciAodmFyIHNoaWZ0ID0gMDsgYS5pc0V2ZW4oKSAmJiBiLmlzRXZlbigpOyBzaGlmdCsrKSB7CiAgICAgICAgYS5pdXNocm4oMSk7CiAgICAgICAgYi5pdXNocm4oMSk7CiAgICAgIH0KCiAgICAgIGRvIHsKICAgICAgICB3aGlsZSAoYS5pc0V2ZW4oKSkgewogICAgICAgICAgYS5pdXNocm4oMSk7CiAgICAgICAgfQogICAgICAgIHdoaWxlIChiLmlzRXZlbigpKSB7CiAgICAgICAgICBiLml1c2hybigxKTsKICAgICAgICB9CgogICAgICAgIHZhciByID0gYS5jbXAoYik7CiAgICAgICAgaWYgKHIgPCAwKSB7CiAgICAgICAgICAvLyBTd2FwIGBhYCBhbmQgYGJgIHRvIG1ha2UgYGFgIGFsd2F5cyBiaWdnZXIgdGhhbiBgYmAKICAgICAgICAgIHZhciB0ID0gYTsKICAgICAgICAgIGEgPSBiOwogICAgICAgICAgYiA9IHQ7CiAgICAgICAgfSBlbHNlIGlmIChyID09PSAwIHx8IGIuY21wbigxKSA9PT0gMCkgewogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgICBhLmlzdWIoYik7CiAgICAgIH0gd2hpbGUgKHRydWUpOwoKICAgICAgcmV0dXJuIGIuaXVzaGxuKHNoaWZ0KTsKICAgIH07CgogICAgLy8gSW52ZXJ0IG51bWJlciBpbiB0aGUgZmllbGQgRihudW0pCiAgICBCTi5wcm90b3R5cGUuaW52bSA9IGZ1bmN0aW9uIGludm0gKG51bSkgewogICAgICByZXR1cm4gdGhpcy5lZ2NkKG51bSkuYS51bW9kKG51bSk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5pc0V2ZW4gPSBmdW5jdGlvbiBpc0V2ZW4gKCkgewogICAgICByZXR1cm4gKHRoaXMud29yZHNbMF0gJiAxKSA9PT0gMDsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmlzT2RkID0gZnVuY3Rpb24gaXNPZGQgKCkgewogICAgICByZXR1cm4gKHRoaXMud29yZHNbMF0gJiAxKSA9PT0gMTsKICAgIH07CgogICAgLy8gQW5kIGZpcnN0IHdvcmQgYW5kIG51bQogICAgQk4ucHJvdG90eXBlLmFuZGxuID0gZnVuY3Rpb24gYW5kbG4gKG51bSkgewogICAgICByZXR1cm4gdGhpcy53b3Jkc1swXSAmIG51bTsKICAgIH07CgogICAgLy8gSW5jcmVtZW50IGF0IHRoZSBiaXQgcG9zaXRpb24gaW4tbGluZQogICAgQk4ucHJvdG90eXBlLmJpbmNuID0gZnVuY3Rpb24gYmluY24gKGJpdCkgewogICAgICBhc3NlcnQodHlwZW9mIGJpdCA9PT0gJ251bWJlcicpOwogICAgICB2YXIgciA9IGJpdCAlIDI2OwogICAgICB2YXIgcyA9IChiaXQgLSByKSAvIDI2OwogICAgICB2YXIgcSA9IDEgPDwgcjsKCiAgICAgIC8vIEZhc3QgY2FzZTogYml0IGlzIG11Y2ggaGlnaGVyIHRoYW4gYWxsIGV4aXN0aW5nIHdvcmRzCiAgICAgIGlmICh0aGlzLmxlbmd0aCA8PSBzKSB7CiAgICAgICAgdGhpcy5fZXhwYW5kKHMgKyAxKTsKICAgICAgICB0aGlzLndvcmRzW3NdIHw9IHE7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0KCiAgICAgIC8vIEFkZCBiaXQgYW5kIHByb3BhZ2F0ZSwgaWYgbmVlZGVkCiAgICAgIHZhciBjYXJyeSA9IHE7CiAgICAgIGZvciAodmFyIGkgPSBzOyBjYXJyeSAhPT0gMCAmJiBpIDwgdGhpcy5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciB3ID0gdGhpcy53b3Jkc1tpXSB8IDA7CiAgICAgICAgdyArPSBjYXJyeTsKICAgICAgICBjYXJyeSA9IHcgPj4+IDI2OwogICAgICAgIHcgJj0gMHgzZmZmZmZmOwogICAgICAgIHRoaXMud29yZHNbaV0gPSB3OwogICAgICB9CiAgICAgIGlmIChjYXJyeSAhPT0gMCkgewogICAgICAgIHRoaXMud29yZHNbaV0gPSBjYXJyeTsKICAgICAgICB0aGlzLmxlbmd0aCsrOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuaXNaZXJvID0gZnVuY3Rpb24gaXNaZXJvICgpIHsKICAgICAgcmV0dXJuIHRoaXMubGVuZ3RoID09PSAxICYmIHRoaXMud29yZHNbMF0gPT09IDA7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5jbXBuID0gZnVuY3Rpb24gY21wbiAobnVtKSB7CiAgICAgIHZhciBuZWdhdGl2ZSA9IG51bSA8IDA7CgogICAgICBpZiAodGhpcy5uZWdhdGl2ZSAhPT0gMCAmJiAhbmVnYXRpdmUpIHJldHVybiAtMTsKICAgICAgaWYgKHRoaXMubmVnYXRpdmUgPT09IDAgJiYgbmVnYXRpdmUpIHJldHVybiAxOwoKICAgICAgdGhpcy5fc3RyaXAoKTsKCiAgICAgIHZhciByZXM7CiAgICAgIGlmICh0aGlzLmxlbmd0aCA+IDEpIHsKICAgICAgICByZXMgPSAxOwogICAgICB9IGVsc2UgewogICAgICAgIGlmIChuZWdhdGl2ZSkgewogICAgICAgICAgbnVtID0gLW51bTsKICAgICAgICB9CgogICAgICAgIGFzc2VydChudW0gPD0gMHgzZmZmZmZmLCAnTnVtYmVyIGlzIHRvbyBiaWcnKTsKCiAgICAgICAgdmFyIHcgPSB0aGlzLndvcmRzWzBdIHwgMDsKICAgICAgICByZXMgPSB3ID09PSBudW0gPyAwIDogdyA8IG51bSA/IC0xIDogMTsKICAgICAgfQogICAgICBpZiAodGhpcy5uZWdhdGl2ZSAhPT0gMCkgcmV0dXJuIC1yZXMgfCAwOwogICAgICByZXR1cm4gcmVzOwogICAgfTsKCiAgICAvLyBDb21wYXJlIHR3byBudW1iZXJzIGFuZCByZXR1cm46CiAgICAvLyAxIC0gaWYgYHRoaXNgID4gYG51bWAKICAgIC8vIDAgLSBpZiBgdGhpc2AgPT0gYG51bWAKICAgIC8vIC0xIC0gaWYgYHRoaXNgIDwgYG51bWAKICAgIEJOLnByb3RvdHlwZS5jbXAgPSBmdW5jdGlvbiBjbXAgKG51bSkgewogICAgICBpZiAodGhpcy5uZWdhdGl2ZSAhPT0gMCAmJiBudW0ubmVnYXRpdmUgPT09IDApIHJldHVybiAtMTsKICAgICAgaWYgKHRoaXMubmVnYXRpdmUgPT09IDAgJiYgbnVtLm5lZ2F0aXZlICE9PSAwKSByZXR1cm4gMTsKCiAgICAgIHZhciByZXMgPSB0aGlzLnVjbXAobnVtKTsKICAgICAgaWYgKHRoaXMubmVnYXRpdmUgIT09IDApIHJldHVybiAtcmVzIHwgMDsKICAgICAgcmV0dXJuIHJlczsKICAgIH07CgogICAgLy8gVW5zaWduZWQgY29tcGFyaXNvbgogICAgQk4ucHJvdG90eXBlLnVjbXAgPSBmdW5jdGlvbiB1Y21wIChudW0pIHsKICAgICAgLy8gQXQgdGhpcyBwb2ludCBib3RoIG51bWJlcnMgaGF2ZSB0aGUgc2FtZSBzaWduCiAgICAgIGlmICh0aGlzLmxlbmd0aCA+IG51bS5sZW5ndGgpIHJldHVybiAxOwogICAgICBpZiAodGhpcy5sZW5ndGggPCBudW0ubGVuZ3RoKSByZXR1cm4gLTE7CgogICAgICB2YXIgcmVzID0gMDsKICAgICAgZm9yICh2YXIgaSA9IHRoaXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgICAgICB2YXIgYSA9IHRoaXMud29yZHNbaV0gfCAwOwogICAgICAgIHZhciBiID0gbnVtLndvcmRzW2ldIHwgMDsKCiAgICAgICAgaWYgKGEgPT09IGIpIGNvbnRpbnVlOwogICAgICAgIGlmIChhIDwgYikgewogICAgICAgICAgcmVzID0gLTE7CiAgICAgICAgfSBlbHNlIGlmIChhID4gYikgewogICAgICAgICAgcmVzID0gMTsKICAgICAgICB9CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlczsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmd0biA9IGZ1bmN0aW9uIGd0biAobnVtKSB7CiAgICAgIHJldHVybiB0aGlzLmNtcG4obnVtKSA9PT0gMTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmd0ID0gZnVuY3Rpb24gZ3QgKG51bSkgewogICAgICByZXR1cm4gdGhpcy5jbXAobnVtKSA9PT0gMTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmd0ZW4gPSBmdW5jdGlvbiBndGVuIChudW0pIHsKICAgICAgcmV0dXJuIHRoaXMuY21wbihudW0pID49IDA7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5ndGUgPSBmdW5jdGlvbiBndGUgKG51bSkgewogICAgICByZXR1cm4gdGhpcy5jbXAobnVtKSA+PSAwOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUubHRuID0gZnVuY3Rpb24gbHRuIChudW0pIHsKICAgICAgcmV0dXJuIHRoaXMuY21wbihudW0pID09PSAtMTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmx0ID0gZnVuY3Rpb24gbHQgKG51bSkgewogICAgICByZXR1cm4gdGhpcy5jbXAobnVtKSA9PT0gLTE7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5sdGVuID0gZnVuY3Rpb24gbHRlbiAobnVtKSB7CiAgICAgIHJldHVybiB0aGlzLmNtcG4obnVtKSA8PSAwOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUubHRlID0gZnVuY3Rpb24gbHRlIChudW0pIHsKICAgICAgcmV0dXJuIHRoaXMuY21wKG51bSkgPD0gMDsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmVxbiA9IGZ1bmN0aW9uIGVxbiAobnVtKSB7CiAgICAgIHJldHVybiB0aGlzLmNtcG4obnVtKSA9PT0gMDsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLmVxID0gZnVuY3Rpb24gZXEgKG51bSkgewogICAgICByZXR1cm4gdGhpcy5jbXAobnVtKSA9PT0gMDsKICAgIH07CgogICAgLy8KICAgIC8vIEEgcmVkdWNlIGNvbnRleHQsIGNvdWxkIGJlIHVzaW5nIG1vbnRnb21lcnkgb3Igc29tZXRoaW5nIGJldHRlciwgZGVwZW5kaW5nCiAgICAvLyBvbiB0aGUgYG1gIGl0c2VsZi4KICAgIC8vCiAgICBCTi5yZWQgPSBmdW5jdGlvbiByZWQgKG51bSkgewogICAgICByZXR1cm4gbmV3IFJlZChudW0pOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUudG9SZWQgPSBmdW5jdGlvbiB0b1JlZCAoY3R4KSB7CiAgICAgIGFzc2VydCghdGhpcy5yZWQsICdBbHJlYWR5IGEgbnVtYmVyIGluIHJlZHVjdGlvbiBjb250ZXh0Jyk7CiAgICAgIGFzc2VydCh0aGlzLm5lZ2F0aXZlID09PSAwLCAncmVkIHdvcmtzIG9ubHkgd2l0aCBwb3NpdGl2ZXMnKTsKICAgICAgcmV0dXJuIGN0eC5jb252ZXJ0VG8odGhpcykuX2ZvcmNlUmVkKGN0eCk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5mcm9tUmVkID0gZnVuY3Rpb24gZnJvbVJlZCAoKSB7CiAgICAgIGFzc2VydCh0aGlzLnJlZCwgJ2Zyb21SZWQgd29ya3Mgb25seSB3aXRoIG51bWJlcnMgaW4gcmVkdWN0aW9uIGNvbnRleHQnKTsKICAgICAgcmV0dXJuIHRoaXMucmVkLmNvbnZlcnRGcm9tKHRoaXMpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuX2ZvcmNlUmVkID0gZnVuY3Rpb24gX2ZvcmNlUmVkIChjdHgpIHsKICAgICAgdGhpcy5yZWQgPSBjdHg7CiAgICAgIHJldHVybiB0aGlzOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUuZm9yY2VSZWQgPSBmdW5jdGlvbiBmb3JjZVJlZCAoY3R4KSB7CiAgICAgIGFzc2VydCghdGhpcy5yZWQsICdBbHJlYWR5IGEgbnVtYmVyIGluIHJlZHVjdGlvbiBjb250ZXh0Jyk7CiAgICAgIHJldHVybiB0aGlzLl9mb3JjZVJlZChjdHgpOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUucmVkQWRkID0gZnVuY3Rpb24gcmVkQWRkIChudW0pIHsKICAgICAgYXNzZXJ0KHRoaXMucmVkLCAncmVkQWRkIHdvcmtzIG9ubHkgd2l0aCByZWQgbnVtYmVycycpOwogICAgICByZXR1cm4gdGhpcy5yZWQuYWRkKHRoaXMsIG51bSk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5yZWRJQWRkID0gZnVuY3Rpb24gcmVkSUFkZCAobnVtKSB7CiAgICAgIGFzc2VydCh0aGlzLnJlZCwgJ3JlZElBZGQgd29ya3Mgb25seSB3aXRoIHJlZCBudW1iZXJzJyk7CiAgICAgIHJldHVybiB0aGlzLnJlZC5pYWRkKHRoaXMsIG51bSk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5yZWRTdWIgPSBmdW5jdGlvbiByZWRTdWIgKG51bSkgewogICAgICBhc3NlcnQodGhpcy5yZWQsICdyZWRTdWIgd29ya3Mgb25seSB3aXRoIHJlZCBudW1iZXJzJyk7CiAgICAgIHJldHVybiB0aGlzLnJlZC5zdWIodGhpcywgbnVtKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLnJlZElTdWIgPSBmdW5jdGlvbiByZWRJU3ViIChudW0pIHsKICAgICAgYXNzZXJ0KHRoaXMucmVkLCAncmVkSVN1YiB3b3JrcyBvbmx5IHdpdGggcmVkIG51bWJlcnMnKTsKICAgICAgcmV0dXJuIHRoaXMucmVkLmlzdWIodGhpcywgbnVtKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLnJlZFNobCA9IGZ1bmN0aW9uIHJlZFNobCAobnVtKSB7CiAgICAgIGFzc2VydCh0aGlzLnJlZCwgJ3JlZFNobCB3b3JrcyBvbmx5IHdpdGggcmVkIG51bWJlcnMnKTsKICAgICAgcmV0dXJuIHRoaXMucmVkLnNobCh0aGlzLCBudW0pOwogICAgfTsKCiAgICBCTi5wcm90b3R5cGUucmVkTXVsID0gZnVuY3Rpb24gcmVkTXVsIChudW0pIHsKICAgICAgYXNzZXJ0KHRoaXMucmVkLCAncmVkTXVsIHdvcmtzIG9ubHkgd2l0aCByZWQgbnVtYmVycycpOwogICAgICB0aGlzLnJlZC5fdmVyaWZ5Mih0aGlzLCBudW0pOwogICAgICByZXR1cm4gdGhpcy5yZWQubXVsKHRoaXMsIG51bSk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5yZWRJTXVsID0gZnVuY3Rpb24gcmVkSU11bCAobnVtKSB7CiAgICAgIGFzc2VydCh0aGlzLnJlZCwgJ3JlZE11bCB3b3JrcyBvbmx5IHdpdGggcmVkIG51bWJlcnMnKTsKICAgICAgdGhpcy5yZWQuX3ZlcmlmeTIodGhpcywgbnVtKTsKICAgICAgcmV0dXJuIHRoaXMucmVkLmltdWwodGhpcywgbnVtKTsKICAgIH07CgogICAgQk4ucHJvdG90eXBlLnJlZFNxciA9IGZ1bmN0aW9uIHJlZFNxciAoKSB7CiAgICAgIGFzc2VydCh0aGlzLnJlZCwgJ3JlZFNxciB3b3JrcyBvbmx5IHdpdGggcmVkIG51bWJlcnMnKTsKICAgICAgdGhpcy5yZWQuX3ZlcmlmeTEodGhpcyk7CiAgICAgIHJldHVybiB0aGlzLnJlZC5zcXIodGhpcyk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5yZWRJU3FyID0gZnVuY3Rpb24gcmVkSVNxciAoKSB7CiAgICAgIGFzc2VydCh0aGlzLnJlZCwgJ3JlZElTcXIgd29ya3Mgb25seSB3aXRoIHJlZCBudW1iZXJzJyk7CiAgICAgIHRoaXMucmVkLl92ZXJpZnkxKHRoaXMpOwogICAgICByZXR1cm4gdGhpcy5yZWQuaXNxcih0aGlzKTsKICAgIH07CgogICAgLy8gU3F1YXJlIHJvb3Qgb3ZlciBwCiAgICBCTi5wcm90b3R5cGUucmVkU3FydCA9IGZ1bmN0aW9uIHJlZFNxcnQgKCkgewogICAgICBhc3NlcnQodGhpcy5yZWQsICdyZWRTcXJ0IHdvcmtzIG9ubHkgd2l0aCByZWQgbnVtYmVycycpOwogICAgICB0aGlzLnJlZC5fdmVyaWZ5MSh0aGlzKTsKICAgICAgcmV0dXJuIHRoaXMucmVkLnNxcnQodGhpcyk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5yZWRJbnZtID0gZnVuY3Rpb24gcmVkSW52bSAoKSB7CiAgICAgIGFzc2VydCh0aGlzLnJlZCwgJ3JlZEludm0gd29ya3Mgb25seSB3aXRoIHJlZCBudW1iZXJzJyk7CiAgICAgIHRoaXMucmVkLl92ZXJpZnkxKHRoaXMpOwogICAgICByZXR1cm4gdGhpcy5yZWQuaW52bSh0aGlzKTsKICAgIH07CgogICAgLy8gUmV0dXJuIG5lZ2F0aXZlIGNsb25lIG9mIGB0aGlzYCAlIGByZWQgbW9kdWxvYAogICAgQk4ucHJvdG90eXBlLnJlZE5lZyA9IGZ1bmN0aW9uIHJlZE5lZyAoKSB7CiAgICAgIGFzc2VydCh0aGlzLnJlZCwgJ3JlZE5lZyB3b3JrcyBvbmx5IHdpdGggcmVkIG51bWJlcnMnKTsKICAgICAgdGhpcy5yZWQuX3ZlcmlmeTEodGhpcyk7CiAgICAgIHJldHVybiB0aGlzLnJlZC5uZWcodGhpcyk7CiAgICB9OwoKICAgIEJOLnByb3RvdHlwZS5yZWRQb3cgPSBmdW5jdGlvbiByZWRQb3cgKG51bSkgewogICAgICBhc3NlcnQodGhpcy5yZWQgJiYgIW51bS5yZWQsICdyZWRQb3cobm9ybWFsTnVtKScpOwogICAgICB0aGlzLnJlZC5fdmVyaWZ5MSh0aGlzKTsKICAgICAgcmV0dXJuIHRoaXMucmVkLnBvdyh0aGlzLCBudW0pOwogICAgfTsKCiAgICAvLyBQcmltZSBudW1iZXJzIHdpdGggZWZmaWNpZW50IHJlZHVjdGlvbgogICAgdmFyIHByaW1lcyA9IHsKICAgICAgazI1NjogbnVsbCwKICAgICAgcDIyNDogbnVsbCwKICAgICAgcDE5MjogbnVsbCwKICAgICAgcDI1NTE5OiBudWxsCiAgICB9OwoKICAgIC8vIFBzZXVkby1NZXJzZW5uZSBwcmltZQogICAgZnVuY3Rpb24gTVByaW1lIChuYW1lLCBwKSB7CiAgICAgIC8vIFAgPSAyIF4gTiAtIEsKICAgICAgdGhpcy5uYW1lID0gbmFtZTsKICAgICAgdGhpcy5wID0gbmV3IEJOKHAsIDE2KTsKICAgICAgdGhpcy5uID0gdGhpcy5wLmJpdExlbmd0aCgpOwogICAgICB0aGlzLmsgPSBuZXcgQk4oMSkuaXVzaGxuKHRoaXMubikuaXN1Yih0aGlzLnApOwoKICAgICAgdGhpcy50bXAgPSB0aGlzLl90bXAoKTsKICAgIH0KCiAgICBNUHJpbWUucHJvdG90eXBlLl90bXAgPSBmdW5jdGlvbiBfdG1wICgpIHsKICAgICAgdmFyIHRtcCA9IG5ldyBCTihudWxsKTsKICAgICAgdG1wLndvcmRzID0gbmV3IEFycmF5KE1hdGguY2VpbCh0aGlzLm4gLyAxMykpOwogICAgICByZXR1cm4gdG1wOwogICAgfTsKCiAgICBNUHJpbWUucHJvdG90eXBlLmlyZWR1Y2UgPSBmdW5jdGlvbiBpcmVkdWNlIChudW0pIHsKICAgICAgLy8gQXNzdW1lcyB0aGF0IGBudW1gIGlzIGxlc3MgdGhhbiBgUF4yYAogICAgICAvLyBudW0gPSBISSAqICgyIF4gTiAtIEspICsgSEkgKiBLICsgTE8gPSBISSAqIEsgKyBMTyAobW9kIFApCiAgICAgIHZhciByID0gbnVtOwogICAgICB2YXIgcmxlbjsKCiAgICAgIGRvIHsKICAgICAgICB0aGlzLnNwbGl0KHIsIHRoaXMudG1wKTsKICAgICAgICByID0gdGhpcy5pbXVsSyhyKTsKICAgICAgICByID0gci5pYWRkKHRoaXMudG1wKTsKICAgICAgICBybGVuID0gci5iaXRMZW5ndGgoKTsKICAgICAgfSB3aGlsZSAocmxlbiA+IHRoaXMubik7CgogICAgICB2YXIgY21wID0gcmxlbiA8IHRoaXMubiA/IC0xIDogci51Y21wKHRoaXMucCk7CiAgICAgIGlmIChjbXAgPT09IDApIHsKICAgICAgICByLndvcmRzWzBdID0gMDsKICAgICAgICByLmxlbmd0aCA9IDE7CiAgICAgIH0gZWxzZSBpZiAoY21wID4gMCkgewogICAgICAgIHIuaXN1Yih0aGlzLnApOwogICAgICB9IGVsc2UgewogICAgICAgIGlmIChyLnN0cmlwICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIC8vIHIgaXMgYSBCTiB2NCBpbnN0YW5jZQogICAgICAgICAgci5zdHJpcCgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyByIGlzIGEgQk4gdjUgaW5zdGFuY2UKICAgICAgICAgIHIuX3N0cmlwKCk7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gcjsKICAgIH07CgogICAgTVByaW1lLnByb3RvdHlwZS5zcGxpdCA9IGZ1bmN0aW9uIHNwbGl0IChpbnB1dCwgb3V0KSB7CiAgICAgIGlucHV0Lml1c2hybih0aGlzLm4sIDAsIG91dCk7CiAgICB9OwoKICAgIE1QcmltZS5wcm90b3R5cGUuaW11bEsgPSBmdW5jdGlvbiBpbXVsSyAobnVtKSB7CiAgICAgIHJldHVybiBudW0uaW11bCh0aGlzLmspOwogICAgfTsKCiAgICBmdW5jdGlvbiBLMjU2ICgpIHsKICAgICAgTVByaW1lLmNhbGwoCiAgICAgICAgdGhpcywKICAgICAgICAnazI1NicsCiAgICAgICAgJ2ZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZlIGZmZmZmYzJmJyk7CiAgICB9CiAgICBpbmhlcml0cyhLMjU2LCBNUHJpbWUpOwoKICAgIEsyNTYucHJvdG90eXBlLnNwbGl0ID0gZnVuY3Rpb24gc3BsaXQgKGlucHV0LCBvdXRwdXQpIHsKICAgICAgLy8gMjU2ID0gOSAqIDI2ICsgMjIKICAgICAgdmFyIG1hc2sgPSAweDNmZmZmZjsKCiAgICAgIHZhciBvdXRMZW4gPSBNYXRoLm1pbihpbnB1dC5sZW5ndGgsIDkpOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG91dExlbjsgaSsrKSB7CiAgICAgICAgb3V0cHV0LndvcmRzW2ldID0gaW5wdXQud29yZHNbaV07CiAgICAgIH0KICAgICAgb3V0cHV0Lmxlbmd0aCA9IG91dExlbjsKCiAgICAgIGlmIChpbnB1dC5sZW5ndGggPD0gOSkgewogICAgICAgIGlucHV0LndvcmRzWzBdID0gMDsKICAgICAgICBpbnB1dC5sZW5ndGggPSAxOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgLy8gU2hpZnQgYnkgOSBsaW1icwogICAgICB2YXIgcHJldiA9IGlucHV0LndvcmRzWzldOwogICAgICBvdXRwdXQud29yZHNbb3V0cHV0Lmxlbmd0aCsrXSA9IHByZXYgJiBtYXNrOwoKICAgICAgZm9yIChpID0gMTA7IGkgPCBpbnB1dC5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBuZXh0ID0gaW5wdXQud29yZHNbaV0gfCAwOwogICAgICAgIGlucHV0LndvcmRzW2kgLSAxMF0gPSAoKG5leHQgJiBtYXNrKSA8PCA0KSB8IChwcmV2ID4+PiAyMik7CiAgICAgICAgcHJldiA9IG5leHQ7CiAgICAgIH0KICAgICAgcHJldiA+Pj49IDIyOwogICAgICBpbnB1dC53b3Jkc1tpIC0gMTBdID0gcHJldjsKICAgICAgaWYgKHByZXYgPT09IDAgJiYgaW5wdXQubGVuZ3RoID4gMTApIHsKICAgICAgICBpbnB1dC5sZW5ndGggLT0gMTA7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaW5wdXQubGVuZ3RoIC09IDk7CiAgICAgIH0KICAgIH07CgogICAgSzI1Ni5wcm90b3R5cGUuaW11bEsgPSBmdW5jdGlvbiBpbXVsSyAobnVtKSB7CiAgICAgIC8vIEsgPSAweDEwMDAwMDNkMSA9IFsgMHg0MCwgMHgzZDEgXQogICAgICBudW0ud29yZHNbbnVtLmxlbmd0aF0gPSAwOwogICAgICBudW0ud29yZHNbbnVtLmxlbmd0aCArIDFdID0gMDsKICAgICAgbnVtLmxlbmd0aCArPSAyOwoKICAgICAgLy8gYm91bmRlZCBhdDogMHg0MCAqIDB4M2ZmZmZmZiArIDB4M2QwID0gMHgxMDAwMDAzOTAKICAgICAgdmFyIGxvID0gMDsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW0ubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgdyA9IG51bS53b3Jkc1tpXSB8IDA7CiAgICAgICAgbG8gKz0gdyAqIDB4M2QxOwogICAgICAgIG51bS53b3Jkc1tpXSA9IGxvICYgMHgzZmZmZmZmOwogICAgICAgIGxvID0gdyAqIDB4NDAgKyAoKGxvIC8gMHg0MDAwMDAwKSB8IDApOwogICAgICB9CgogICAgICAvLyBGYXN0IGxlbmd0aCByZWR1Y3Rpb24KICAgICAgaWYgKG51bS53b3Jkc1tudW0ubGVuZ3RoIC0gMV0gPT09IDApIHsKICAgICAgICBudW0ubGVuZ3RoLS07CiAgICAgICAgaWYgKG51bS53b3Jkc1tudW0ubGVuZ3RoIC0gMV0gPT09IDApIHsKICAgICAgICAgIG51bS5sZW5ndGgtLTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIG51bTsKICAgIH07CgogICAgZnVuY3Rpb24gUDIyNCAoKSB7CiAgICAgIE1QcmltZS5jYWxsKAogICAgICAgIHRoaXMsCiAgICAgICAgJ3AyMjQnLAogICAgICAgICdmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiAwMDAwMDAwMCAwMDAwMDAwMCAwMDAwMDAwMScpOwogICAgfQogICAgaW5oZXJpdHMoUDIyNCwgTVByaW1lKTsKCiAgICBmdW5jdGlvbiBQMTkyICgpIHsKICAgICAgTVByaW1lLmNhbGwoCiAgICAgICAgdGhpcywKICAgICAgICAncDE5MicsCiAgICAgICAgJ2ZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZlIGZmZmZmZmZmIGZmZmZmZmZmJyk7CiAgICB9CiAgICBpbmhlcml0cyhQMTkyLCBNUHJpbWUpOwoKICAgIGZ1bmN0aW9uIFAyNTUxOSAoKSB7CiAgICAgIC8vIDIgXiAyNTUgLSAxOQogICAgICBNUHJpbWUuY2FsbCgKICAgICAgICB0aGlzLAogICAgICAgICcyNTUxOScsCiAgICAgICAgJzdmZmZmZmZmZmZmZmZmZmYgZmZmZmZmZmZmZmZmZmZmZiBmZmZmZmZmZmZmZmZmZmZmIGZmZmZmZmZmZmZmZmZmZWQnKTsKICAgIH0KICAgIGluaGVyaXRzKFAyNTUxOSwgTVByaW1lKTsKCiAgICBQMjU1MTkucHJvdG90eXBlLmltdWxLID0gZnVuY3Rpb24gaW11bEsgKG51bSkgewogICAgICAvLyBLID0gMHgxMwogICAgICB2YXIgY2FycnkgPSAwOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bS5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBoaSA9IChudW0ud29yZHNbaV0gfCAwKSAqIDB4MTMgKyBjYXJyeTsKICAgICAgICB2YXIgbG8gPSBoaSAmIDB4M2ZmZmZmZjsKICAgICAgICBoaSA+Pj49IDI2OwoKICAgICAgICBudW0ud29yZHNbaV0gPSBsbzsKICAgICAgICBjYXJyeSA9IGhpOwogICAgICB9CiAgICAgIGlmIChjYXJyeSAhPT0gMCkgewogICAgICAgIG51bS53b3Jkc1tudW0ubGVuZ3RoKytdID0gY2Fycnk7CiAgICAgIH0KICAgICAgcmV0dXJuIG51bTsKICAgIH07CgogICAgLy8gRXhwb3J0ZWQgbW9zdGx5IGZvciB0ZXN0aW5nIHB1cnBvc2VzLCB1c2UgcGxhaW4gbmFtZSBpbnN0ZWFkCiAgICBCTi5fcHJpbWUgPSBmdW5jdGlvbiBwcmltZSAobmFtZSkgewogICAgICAvLyBDYWNoZWQgdmVyc2lvbiBvZiBwcmltZQogICAgICBpZiAocHJpbWVzW25hbWVdKSByZXR1cm4gcHJpbWVzW25hbWVdOwoKICAgICAgdmFyIHByaW1lOwogICAgICBpZiAobmFtZSA9PT0gJ2syNTYnKSB7CiAgICAgICAgcHJpbWUgPSBuZXcgSzI1NigpOwogICAgICB9IGVsc2UgaWYgKG5hbWUgPT09ICdwMjI0JykgewogICAgICAgIHByaW1lID0gbmV3IFAyMjQoKTsKICAgICAgfSBlbHNlIGlmIChuYW1lID09PSAncDE5MicpIHsKICAgICAgICBwcmltZSA9IG5ldyBQMTkyKCk7CiAgICAgIH0gZWxzZSBpZiAobmFtZSA9PT0gJ3AyNTUxOScpIHsKICAgICAgICBwcmltZSA9IG5ldyBQMjU1MTkoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gcHJpbWUgJyArIG5hbWUpOwogICAgICB9CiAgICAgIHByaW1lc1tuYW1lXSA9IHByaW1lOwoKICAgICAgcmV0dXJuIHByaW1lOwogICAgfTsKCiAgICAvLwogICAgLy8gQmFzZSByZWR1Y3Rpb24gZW5naW5lCiAgICAvLwogICAgZnVuY3Rpb24gUmVkIChtKSB7CiAgICAgIGlmICh0eXBlb2YgbSA9PT0gJ3N0cmluZycpIHsKICAgICAgICB2YXIgcHJpbWUgPSBCTi5fcHJpbWUobSk7CiAgICAgICAgdGhpcy5tID0gcHJpbWUucDsKICAgICAgICB0aGlzLnByaW1lID0gcHJpbWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYXNzZXJ0KG0uZ3RuKDEpLCAnbW9kdWx1cyBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAxJyk7CiAgICAgICAgdGhpcy5tID0gbTsKICAgICAgICB0aGlzLnByaW1lID0gbnVsbDsKICAgICAgfQogICAgfQoKICAgIFJlZC5wcm90b3R5cGUuX3ZlcmlmeTEgPSBmdW5jdGlvbiBfdmVyaWZ5MSAoYSkgewogICAgICBhc3NlcnQoYS5uZWdhdGl2ZSA9PT0gMCwgJ3JlZCB3b3JrcyBvbmx5IHdpdGggcG9zaXRpdmVzJyk7CiAgICAgIGFzc2VydChhLnJlZCwgJ3JlZCB3b3JrcyBvbmx5IHdpdGggcmVkIG51bWJlcnMnKTsKICAgIH07CgogICAgUmVkLnByb3RvdHlwZS5fdmVyaWZ5MiA9IGZ1bmN0aW9uIF92ZXJpZnkyIChhLCBiKSB7CiAgICAgIGFzc2VydCgoYS5uZWdhdGl2ZSB8IGIubmVnYXRpdmUpID09PSAwLCAncmVkIHdvcmtzIG9ubHkgd2l0aCBwb3NpdGl2ZXMnKTsKICAgICAgYXNzZXJ0KGEucmVkICYmIGEucmVkID09PSBiLnJlZCwKICAgICAgICAncmVkIHdvcmtzIG9ubHkgd2l0aCByZWQgbnVtYmVycycpOwogICAgfTsKCiAgICBSZWQucHJvdG90eXBlLmltb2QgPSBmdW5jdGlvbiBpbW9kIChhKSB7CiAgICAgIGlmICh0aGlzLnByaW1lKSByZXR1cm4gdGhpcy5wcmltZS5pcmVkdWNlKGEpLl9mb3JjZVJlZCh0aGlzKTsKCiAgICAgIG1vdmUoYSwgYS51bW9kKHRoaXMubSkuX2ZvcmNlUmVkKHRoaXMpKTsKICAgICAgcmV0dXJuIGE7CiAgICB9OwoKICAgIFJlZC5wcm90b3R5cGUubmVnID0gZnVuY3Rpb24gbmVnIChhKSB7CiAgICAgIGlmIChhLmlzWmVybygpKSB7CiAgICAgICAgcmV0dXJuIGEuY2xvbmUoKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMubS5zdWIoYSkuX2ZvcmNlUmVkKHRoaXMpOwogICAgfTsKCiAgICBSZWQucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIGFkZCAoYSwgYikgewogICAgICB0aGlzLl92ZXJpZnkyKGEsIGIpOwoKICAgICAgdmFyIHJlcyA9IGEuYWRkKGIpOwogICAgICBpZiAocmVzLmNtcCh0aGlzLm0pID49IDApIHsKICAgICAgICByZXMuaXN1Yih0aGlzLm0pOwogICAgICB9CiAgICAgIHJldHVybiByZXMuX2ZvcmNlUmVkKHRoaXMpOwogICAgfTsKCiAgICBSZWQucHJvdG90eXBlLmlhZGQgPSBmdW5jdGlvbiBpYWRkIChhLCBiKSB7CiAgICAgIHRoaXMuX3ZlcmlmeTIoYSwgYik7CgogICAgICB2YXIgcmVzID0gYS5pYWRkKGIpOwogICAgICBpZiAocmVzLmNtcCh0aGlzLm0pID49IDApIHsKICAgICAgICByZXMuaXN1Yih0aGlzLm0pOwogICAgICB9CiAgICAgIHJldHVybiByZXM7CiAgICB9OwoKICAgIFJlZC5wcm90b3R5cGUuc3ViID0gZnVuY3Rpb24gc3ViIChhLCBiKSB7CiAgICAgIHRoaXMuX3ZlcmlmeTIoYSwgYik7CgogICAgICB2YXIgcmVzID0gYS5zdWIoYik7CiAgICAgIGlmIChyZXMuY21wbigwKSA8IDApIHsKICAgICAgICByZXMuaWFkZCh0aGlzLm0pOwogICAgICB9CiAgICAgIHJldHVybiByZXMuX2ZvcmNlUmVkKHRoaXMpOwogICAgfTsKCiAgICBSZWQucHJvdG90eXBlLmlzdWIgPSBmdW5jdGlvbiBpc3ViIChhLCBiKSB7CiAgICAgIHRoaXMuX3ZlcmlmeTIoYSwgYik7CgogICAgICB2YXIgcmVzID0gYS5pc3ViKGIpOwogICAgICBpZiAocmVzLmNtcG4oMCkgPCAwKSB7CiAgICAgICAgcmVzLmlhZGQodGhpcy5tKTsKICAgICAgfQogICAgICByZXR1cm4gcmVzOwogICAgfTsKCiAgICBSZWQucHJvdG90eXBlLnNobCA9IGZ1bmN0aW9uIHNobCAoYSwgbnVtKSB7CiAgICAgIHRoaXMuX3ZlcmlmeTEoYSk7CiAgICAgIHJldHVybiB0aGlzLmltb2QoYS51c2hsbihudW0pKTsKICAgIH07CgogICAgUmVkLnByb3RvdHlwZS5pbXVsID0gZnVuY3Rpb24gaW11bCAoYSwgYikgewogICAgICB0aGlzLl92ZXJpZnkyKGEsIGIpOwogICAgICByZXR1cm4gdGhpcy5pbW9kKGEuaW11bChiKSk7CiAgICB9OwoKICAgIFJlZC5wcm90b3R5cGUubXVsID0gZnVuY3Rpb24gbXVsIChhLCBiKSB7CiAgICAgIHRoaXMuX3ZlcmlmeTIoYSwgYik7CiAgICAgIHJldHVybiB0aGlzLmltb2QoYS5tdWwoYikpOwogICAgfTsKCiAgICBSZWQucHJvdG90eXBlLmlzcXIgPSBmdW5jdGlvbiBpc3FyIChhKSB7CiAgICAgIHJldHVybiB0aGlzLmltdWwoYSwgYS5jbG9uZSgpKTsKICAgIH07CgogICAgUmVkLnByb3RvdHlwZS5zcXIgPSBmdW5jdGlvbiBzcXIgKGEpIHsKICAgICAgcmV0dXJuIHRoaXMubXVsKGEsIGEpOwogICAgfTsKCiAgICBSZWQucHJvdG90eXBlLnNxcnQgPSBmdW5jdGlvbiBzcXJ0IChhKSB7CiAgICAgIGlmIChhLmlzWmVybygpKSByZXR1cm4gYS5jbG9uZSgpOwoKICAgICAgdmFyIG1vZDMgPSB0aGlzLm0uYW5kbG4oMyk7CiAgICAgIGFzc2VydChtb2QzICUgMiA9PT0gMSk7CgogICAgICAvLyBGYXN0IGNhc2UKICAgICAgaWYgKG1vZDMgPT09IDMpIHsKICAgICAgICB2YXIgcG93ID0gdGhpcy5tLmFkZChuZXcgQk4oMSkpLml1c2hybigyKTsKICAgICAgICByZXR1cm4gdGhpcy5wb3coYSwgcG93KTsKICAgICAgfQoKICAgICAgLy8gVG9uZWxsaS1TaGFua3MgYWxnb3JpdGhtIChUb3RhbGx5IHVub3B0aW1pemVkIGFuZCBzbG93KQogICAgICAvLwogICAgICAvLyBGaW5kIFEgYW5kIFMsIHRoYXQgUSAqIDIgXiBTID0gKFAgLSAxKQogICAgICB2YXIgcSA9IHRoaXMubS5zdWJuKDEpOwogICAgICB2YXIgcyA9IDA7CiAgICAgIHdoaWxlICghcS5pc1plcm8oKSAmJiBxLmFuZGxuKDEpID09PSAwKSB7CiAgICAgICAgcysrOwogICAgICAgIHEuaXVzaHJuKDEpOwogICAgICB9CiAgICAgIGFzc2VydCghcS5pc1plcm8oKSk7CgogICAgICB2YXIgb25lID0gbmV3IEJOKDEpLnRvUmVkKHRoaXMpOwogICAgICB2YXIgbk9uZSA9IG9uZS5yZWROZWcoKTsKCiAgICAgIC8vIEZpbmQgcXVhZHJhdGljIG5vbi1yZXNpZHVlCiAgICAgIC8vIE5PVEU6IE1heCBpcyBzdWNoIGJlY2F1c2Ugb2YgZ2VuZXJhbGl6ZWQgUmllbWFubiBoeXBvdGhlc2lzLgogICAgICB2YXIgbHBvdyA9IHRoaXMubS5zdWJuKDEpLml1c2hybigxKTsKICAgICAgdmFyIHogPSB0aGlzLm0uYml0TGVuZ3RoKCk7CiAgICAgIHogPSBuZXcgQk4oMiAqIHogKiB6KS50b1JlZCh0aGlzKTsKCiAgICAgIHdoaWxlICh0aGlzLnBvdyh6LCBscG93KS5jbXAobk9uZSkgIT09IDApIHsKICAgICAgICB6LnJlZElBZGQobk9uZSk7CiAgICAgIH0KCiAgICAgIHZhciBjID0gdGhpcy5wb3coeiwgcSk7CiAgICAgIHZhciByID0gdGhpcy5wb3coYSwgcS5hZGRuKDEpLml1c2hybigxKSk7CiAgICAgIHZhciB0ID0gdGhpcy5wb3coYSwgcSk7CiAgICAgIHZhciBtID0gczsKICAgICAgd2hpbGUgKHQuY21wKG9uZSkgIT09IDApIHsKICAgICAgICB2YXIgdG1wID0gdDsKICAgICAgICBmb3IgKHZhciBpID0gMDsgdG1wLmNtcChvbmUpICE9PSAwOyBpKyspIHsKICAgICAgICAgIHRtcCA9IHRtcC5yZWRTcXIoKTsKICAgICAgICB9CiAgICAgICAgYXNzZXJ0KGkgPCBtKTsKICAgICAgICB2YXIgYiA9IHRoaXMucG93KGMsIG5ldyBCTigxKS5pdXNobG4obSAtIGkgLSAxKSk7CgogICAgICAgIHIgPSByLnJlZE11bChiKTsKICAgICAgICBjID0gYi5yZWRTcXIoKTsKICAgICAgICB0ID0gdC5yZWRNdWwoYyk7CiAgICAgICAgbSA9IGk7CiAgICAgIH0KCiAgICAgIHJldHVybiByOwogICAgfTsKCiAgICBSZWQucHJvdG90eXBlLmludm0gPSBmdW5jdGlvbiBpbnZtIChhKSB7CiAgICAgIHZhciBpbnYgPSBhLl9pbnZtcCh0aGlzLm0pOwogICAgICBpZiAoaW52Lm5lZ2F0aXZlICE9PSAwKSB7CiAgICAgICAgaW52Lm5lZ2F0aXZlID0gMDsKICAgICAgICByZXR1cm4gdGhpcy5pbW9kKGludikucmVkTmVnKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHRoaXMuaW1vZChpbnYpOwogICAgICB9CiAgICB9OwoKICAgIFJlZC5wcm90b3R5cGUucG93ID0gZnVuY3Rpb24gcG93IChhLCBudW0pIHsKICAgICAgaWYgKG51bS5pc1plcm8oKSkgcmV0dXJuIG5ldyBCTigxKS50b1JlZCh0aGlzKTsKICAgICAgaWYgKG51bS5jbXBuKDEpID09PSAwKSByZXR1cm4gYS5jbG9uZSgpOwoKICAgICAgdmFyIHdpbmRvd1NpemUgPSA0OwogICAgICB2YXIgd25kID0gbmV3IEFycmF5KDEgPDwgd2luZG93U2l6ZSk7CiAgICAgIHduZFswXSA9IG5ldyBCTigxKS50b1JlZCh0aGlzKTsKICAgICAgd25kWzFdID0gYTsKICAgICAgZm9yICh2YXIgaSA9IDI7IGkgPCB3bmQubGVuZ3RoOyBpKyspIHsKICAgICAgICB3bmRbaV0gPSB0aGlzLm11bCh3bmRbaSAtIDFdLCBhKTsKICAgICAgfQoKICAgICAgdmFyIHJlcyA9IHduZFswXTsKICAgICAgdmFyIGN1cnJlbnQgPSAwOwogICAgICB2YXIgY3VycmVudExlbiA9IDA7CiAgICAgIHZhciBzdGFydCA9IG51bS5iaXRMZW5ndGgoKSAlIDI2OwogICAgICBpZiAoc3RhcnQgPT09IDApIHsKICAgICAgICBzdGFydCA9IDI2OwogICAgICB9CgogICAgICBmb3IgKGkgPSBudW0ubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgICAgICB2YXIgd29yZCA9IG51bS53b3Jkc1tpXTsKICAgICAgICBmb3IgKHZhciBqID0gc3RhcnQgLSAxOyBqID49IDA7IGotLSkgewogICAgICAgICAgdmFyIGJpdCA9ICh3b3JkID4+IGopICYgMTsKICAgICAgICAgIGlmIChyZXMgIT09IHduZFswXSkgewogICAgICAgICAgICByZXMgPSB0aGlzLnNxcihyZXMpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChiaXQgPT09IDAgJiYgY3VycmVudCA9PT0gMCkgewogICAgICAgICAgICBjdXJyZW50TGVuID0gMDsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CgogICAgICAgICAgY3VycmVudCA8PD0gMTsKICAgICAgICAgIGN1cnJlbnQgfD0gYml0OwogICAgICAgICAgY3VycmVudExlbisrOwogICAgICAgICAgaWYgKGN1cnJlbnRMZW4gIT09IHdpbmRvd1NpemUgJiYgKGkgIT09IDAgfHwgaiAhPT0gMCkpIGNvbnRpbnVlOwoKICAgICAgICAgIHJlcyA9IHRoaXMubXVsKHJlcywgd25kW2N1cnJlbnRdKTsKICAgICAgICAgIGN1cnJlbnRMZW4gPSAwOwogICAgICAgICAgY3VycmVudCA9IDA7CiAgICAgICAgfQogICAgICAgIHN0YXJ0ID0gMjY7CiAgICAgIH0KCiAgICAgIHJldHVybiByZXM7CiAgICB9OwoKICAgIFJlZC5wcm90b3R5cGUuY29udmVydFRvID0gZnVuY3Rpb24gY29udmVydFRvIChudW0pIHsKICAgICAgdmFyIHIgPSBudW0udW1vZCh0aGlzLm0pOwoKICAgICAgcmV0dXJuIHIgPT09IG51bSA/IHIuY2xvbmUoKSA6IHI7CiAgICB9OwoKICAgIFJlZC5wcm90b3R5cGUuY29udmVydEZyb20gPSBmdW5jdGlvbiBjb252ZXJ0RnJvbSAobnVtKSB7CiAgICAgIHZhciByZXMgPSBudW0uY2xvbmUoKTsKICAgICAgcmVzLnJlZCA9IG51bGw7CiAgICAgIHJldHVybiByZXM7CiAgICB9OwoKICAgIC8vCiAgICAvLyBNb250Z29tZXJ5IG1ldGhvZCBlbmdpbmUKICAgIC8vCgogICAgQk4ubW9udCA9IGZ1bmN0aW9uIG1vbnQgKG51bSkgewogICAgICByZXR1cm4gbmV3IE1vbnQobnVtKTsKICAgIH07CgogICAgZnVuY3Rpb24gTW9udCAobSkgewogICAgICBSZWQuY2FsbCh0aGlzLCBtKTsKCiAgICAgIHRoaXMuc2hpZnQgPSB0aGlzLm0uYml0TGVuZ3RoKCk7CiAgICAgIGlmICh0aGlzLnNoaWZ0ICUgMjYgIT09IDApIHsKICAgICAgICB0aGlzLnNoaWZ0ICs9IDI2IC0gKHRoaXMuc2hpZnQgJSAyNik7CiAgICAgIH0KCiAgICAgIHRoaXMuciA9IG5ldyBCTigxKS5pdXNobG4odGhpcy5zaGlmdCk7CiAgICAgIHRoaXMucjIgPSB0aGlzLmltb2QodGhpcy5yLnNxcigpKTsKICAgICAgdGhpcy5yaW52ID0gdGhpcy5yLl9pbnZtcCh0aGlzLm0pOwoKICAgICAgdGhpcy5taW52ID0gdGhpcy5yaW52Lm11bCh0aGlzLnIpLmlzdWJuKDEpLmRpdih0aGlzLm0pOwogICAgICB0aGlzLm1pbnYgPSB0aGlzLm1pbnYudW1vZCh0aGlzLnIpOwogICAgICB0aGlzLm1pbnYgPSB0aGlzLnIuc3ViKHRoaXMubWludik7CiAgICB9CiAgICBpbmhlcml0cyhNb250LCBSZWQpOwoKICAgIE1vbnQucHJvdG90eXBlLmNvbnZlcnRUbyA9IGZ1bmN0aW9uIGNvbnZlcnRUbyAobnVtKSB7CiAgICAgIHJldHVybiB0aGlzLmltb2QobnVtLnVzaGxuKHRoaXMuc2hpZnQpKTsKICAgIH07CgogICAgTW9udC5wcm90b3R5cGUuY29udmVydEZyb20gPSBmdW5jdGlvbiBjb252ZXJ0RnJvbSAobnVtKSB7CiAgICAgIHZhciByID0gdGhpcy5pbW9kKG51bS5tdWwodGhpcy5yaW52KSk7CiAgICAgIHIucmVkID0gbnVsbDsKICAgICAgcmV0dXJuIHI7CiAgICB9OwoKICAgIE1vbnQucHJvdG90eXBlLmltdWwgPSBmdW5jdGlvbiBpbXVsIChhLCBiKSB7CiAgICAgIGlmIChhLmlzWmVybygpIHx8IGIuaXNaZXJvKCkpIHsKICAgICAgICBhLndvcmRzWzBdID0gMDsKICAgICAgICBhLmxlbmd0aCA9IDE7CiAgICAgICAgcmV0dXJuIGE7CiAgICAgIH0KCiAgICAgIHZhciB0ID0gYS5pbXVsKGIpOwogICAgICB2YXIgYyA9IHQubWFza24odGhpcy5zaGlmdCkubXVsKHRoaXMubWludikuaW1hc2tuKHRoaXMuc2hpZnQpLm11bCh0aGlzLm0pOwogICAgICB2YXIgdSA9IHQuaXN1YihjKS5pdXNocm4odGhpcy5zaGlmdCk7CiAgICAgIHZhciByZXMgPSB1OwoKICAgICAgaWYgKHUuY21wKHRoaXMubSkgPj0gMCkgewogICAgICAgIHJlcyA9IHUuaXN1Yih0aGlzLm0pOwogICAgICB9IGVsc2UgaWYgKHUuY21wbigwKSA8IDApIHsKICAgICAgICByZXMgPSB1LmlhZGQodGhpcy5tKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlcy5fZm9yY2VSZWQodGhpcyk7CiAgICB9OwoKICAgIE1vbnQucHJvdG90eXBlLm11bCA9IGZ1bmN0aW9uIG11bCAoYSwgYikgewogICAgICBpZiAoYS5pc1plcm8oKSB8fCBiLmlzWmVybygpKSByZXR1cm4gbmV3IEJOKDApLl9mb3JjZVJlZCh0aGlzKTsKCiAgICAgIHZhciB0ID0gYS5tdWwoYik7CiAgICAgIHZhciBjID0gdC5tYXNrbih0aGlzLnNoaWZ0KS5tdWwodGhpcy5taW52KS5pbWFza24odGhpcy5zaGlmdCkubXVsKHRoaXMubSk7CiAgICAgIHZhciB1ID0gdC5pc3ViKGMpLml1c2hybih0aGlzLnNoaWZ0KTsKICAgICAgdmFyIHJlcyA9IHU7CiAgICAgIGlmICh1LmNtcCh0aGlzLm0pID49IDApIHsKICAgICAgICByZXMgPSB1LmlzdWIodGhpcy5tKTsKICAgICAgfSBlbHNlIGlmICh1LmNtcG4oMCkgPCAwKSB7CiAgICAgICAgcmVzID0gdS5pYWRkKHRoaXMubSk7CiAgICAgIH0KCiAgICAgIHJldHVybiByZXMuX2ZvcmNlUmVkKHRoaXMpOwogICAgfTsKCiAgICBNb250LnByb3RvdHlwZS5pbnZtID0gZnVuY3Rpb24gaW52bSAoYSkgewogICAgICAvLyAoQVIpXi0xICogUl4yID0gKEFeLTEgKiBSXi0xKSAqIFJeMiA9IEFeLTEgKiBSCiAgICAgIHZhciByZXMgPSB0aGlzLmltb2QoYS5faW52bXAodGhpcy5tKS5tdWwodGhpcy5yMikpOwogICAgICByZXR1cm4gcmVzLl9mb3JjZVJlZCh0aGlzKTsKICAgIH07CiAgfSkobW9kdWxlLCBjb21tb25qc0dsb2JhbCk7CiAgfShibikpOwoKICB2YXIgQk4kMiA9IGJuLmV4cG9ydHM7CiAgdmFyIHJhbmRvbUJ5dGVzJDEgPSByYW5kb21ieXRlcyQxOwoKICBmdW5jdGlvbiBibGluZCAocHJpdikgewogICAgdmFyIHIgPSBnZXRyKHByaXYpOwogICAgdmFyIGJsaW5kZXIgPSByLnRvUmVkKEJOJDIubW9udChwcml2Lm1vZHVsdXMpKS5yZWRQb3cobmV3IEJOJDIocHJpdi5wdWJsaWNFeHBvbmVudCkpLmZyb21SZWQoKTsKICAgIHJldHVybiB7IGJsaW5kZXI6IGJsaW5kZXIsIHVuYmxpbmRlcjogci5pbnZtKHByaXYubW9kdWx1cykgfQogIH0KCiAgZnVuY3Rpb24gZ2V0ciAocHJpdikgewogICAgdmFyIGxlbiA9IHByaXYubW9kdWx1cy5ieXRlTGVuZ3RoKCk7CiAgICB2YXIgcjsKICAgIGRvIHsKICAgICAgciA9IG5ldyBCTiQyKHJhbmRvbUJ5dGVzJDEobGVuKSk7CiAgICB9IHdoaWxlIChyLmNtcChwcml2Lm1vZHVsdXMpID49IDAgfHwgIXIudW1vZChwcml2LnByaW1lMSkgfHwgIXIudW1vZChwcml2LnByaW1lMikpCiAgICByZXR1cm4gcgogIH0KCiAgZnVuY3Rpb24gY3J0JDIgKG1zZywgcHJpdikgewogICAgdmFyIGJsaW5kcyA9IGJsaW5kKHByaXYpOwogICAgdmFyIGxlbiA9IHByaXYubW9kdWx1cy5ieXRlTGVuZ3RoKCk7CiAgICB2YXIgYmxpbmRlZCA9IG5ldyBCTiQyKG1zZykubXVsKGJsaW5kcy5ibGluZGVyKS51bW9kKHByaXYubW9kdWx1cyk7CiAgICB2YXIgYzEgPSBibGluZGVkLnRvUmVkKEJOJDIubW9udChwcml2LnByaW1lMSkpOwogICAgdmFyIGMyID0gYmxpbmRlZC50b1JlZChCTiQyLm1vbnQocHJpdi5wcmltZTIpKTsKICAgIHZhciBxaW52ID0gcHJpdi5jb2VmZmljaWVudDsKICAgIHZhciBwID0gcHJpdi5wcmltZTE7CiAgICB2YXIgcSA9IHByaXYucHJpbWUyOwogICAgdmFyIG0xID0gYzEucmVkUG93KHByaXYuZXhwb25lbnQxKS5mcm9tUmVkKCk7CiAgICB2YXIgbTIgPSBjMi5yZWRQb3cocHJpdi5leHBvbmVudDIpLmZyb21SZWQoKTsKICAgIHZhciBoID0gbTEuaXN1YihtMikuaW11bChxaW52KS51bW9kKHApLmltdWwocSk7CiAgICByZXR1cm4gbTIuaWFkZChoKS5pbXVsKGJsaW5kcy51bmJsaW5kZXIpLnVtb2QocHJpdi5tb2R1bHVzKS50b0FycmF5TGlrZShCdWZmZXIsICdiZScsIGxlbikKICB9CiAgY3J0JDIuZ2V0ciA9IGdldHI7CgogIHZhciBicm93c2VyaWZ5UnNhID0gY3J0JDI7CgogIHZhciBwYXJzZUtleXMkMSA9IHBhcnNlQXNuMTsKICB2YXIgcmFuZG9tQnl0ZXMgPSByYW5kb21ieXRlcyQxOwogIHZhciBjcmVhdGVIYXNoJDEgPSBjcmVhdGVIYXNoJDM7CiAgdmFyIG1nZiQxID0gbWdmJDI7CiAgdmFyIHhvciQxID0geG9yJDI7CiAgdmFyIEJOJDEgPSBibiQxLmV4cG9ydHM7CiAgdmFyIHdpdGhQdWJsaWMkMSA9IHdpdGhQdWJsaWNfMTsKICB2YXIgY3J0JDEgPSBicm93c2VyaWZ5UnNhOwogIHZhciBCdWZmZXIkMyA9IHNhZmVCdWZmZXIkMS5leHBvcnRzLkJ1ZmZlcjsKCiAgdmFyIHB1YmxpY0VuY3J5cHQkMSA9IGZ1bmN0aW9uIHB1YmxpY0VuY3J5cHQgKHB1YmxpY0tleSwgbXNnLCByZXZlcnNlKSB7CiAgICB2YXIgcGFkZGluZzsKICAgIGlmIChwdWJsaWNLZXkucGFkZGluZykgewogICAgICBwYWRkaW5nID0gcHVibGljS2V5LnBhZGRpbmc7CiAgICB9IGVsc2UgaWYgKHJldmVyc2UpIHsKICAgICAgcGFkZGluZyA9IDE7CiAgICB9IGVsc2UgewogICAgICBwYWRkaW5nID0gNDsKICAgIH0KICAgIHZhciBrZXkgPSBwYXJzZUtleXMkMShwdWJsaWNLZXkpOwogICAgdmFyIHBhZGRlZE1zZzsKICAgIGlmIChwYWRkaW5nID09PSA0KSB7CiAgICAgIHBhZGRlZE1zZyA9IG9hZXAkMShrZXksIG1zZyk7CiAgICB9IGVsc2UgaWYgKHBhZGRpbmcgPT09IDEpIHsKICAgICAgcGFkZGVkTXNnID0gcGtjczEkMShrZXksIG1zZywgcmV2ZXJzZSk7CiAgICB9IGVsc2UgaWYgKHBhZGRpbmcgPT09IDMpIHsKICAgICAgcGFkZGVkTXNnID0gbmV3IEJOJDEobXNnKTsKICAgICAgaWYgKHBhZGRlZE1zZy5jbXAoa2V5Lm1vZHVsdXMpID49IDApIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2RhdGEgdG9vIGxvbmcgZm9yIG1vZHVsdXMnKQogICAgICB9CiAgICB9IGVsc2UgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ3Vua25vd24gcGFkZGluZycpCiAgICB9CiAgICBpZiAocmV2ZXJzZSkgewogICAgICByZXR1cm4gY3J0JDEocGFkZGVkTXNnLCBrZXkpCiAgICB9IGVsc2UgewogICAgICByZXR1cm4gd2l0aFB1YmxpYyQxKHBhZGRlZE1zZywga2V5KQogICAgfQogIH07CgogIGZ1bmN0aW9uIG9hZXAkMSAoa2V5LCBtc2cpIHsKICAgIHZhciBrID0ga2V5Lm1vZHVsdXMuYnl0ZUxlbmd0aCgpOwogICAgdmFyIG1MZW4gPSBtc2cubGVuZ3RoOwogICAgdmFyIGlIYXNoID0gY3JlYXRlSGFzaCQxKCdzaGExJykudXBkYXRlKEJ1ZmZlciQzLmFsbG9jKDApKS5kaWdlc3QoKTsKICAgIHZhciBoTGVuID0gaUhhc2gubGVuZ3RoOwogICAgdmFyIGhMZW4yID0gMiAqIGhMZW47CiAgICBpZiAobUxlbiA+IGsgLSBoTGVuMiAtIDIpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdtZXNzYWdlIHRvbyBsb25nJykKICAgIH0KICAgIHZhciBwcyA9IEJ1ZmZlciQzLmFsbG9jKGsgLSBtTGVuIC0gaExlbjIgLSAyKTsKICAgIHZhciBkYmxlbiA9IGsgLSBoTGVuIC0gMTsKICAgIHZhciBzZWVkID0gcmFuZG9tQnl0ZXMoaExlbik7CiAgICB2YXIgbWFza2VkRGIgPSB4b3IkMShCdWZmZXIkMy5jb25jYXQoW2lIYXNoLCBwcywgQnVmZmVyJDMuYWxsb2MoMSwgMSksIG1zZ10sIGRibGVuKSwgbWdmJDEoc2VlZCwgZGJsZW4pKTsKICAgIHZhciBtYXNrZWRTZWVkID0geG9yJDEoc2VlZCwgbWdmJDEobWFza2VkRGIsIGhMZW4pKTsKICAgIHJldHVybiBuZXcgQk4kMShCdWZmZXIkMy5jb25jYXQoW0J1ZmZlciQzLmFsbG9jKDEpLCBtYXNrZWRTZWVkLCBtYXNrZWREYl0sIGspKQogIH0KICBmdW5jdGlvbiBwa2NzMSQxIChrZXksIG1zZywgcmV2ZXJzZSkgewogICAgdmFyIG1MZW4gPSBtc2cubGVuZ3RoOwogICAgdmFyIGsgPSBrZXkubW9kdWx1cy5ieXRlTGVuZ3RoKCk7CiAgICBpZiAobUxlbiA+IGsgLSAxMSkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ21lc3NhZ2UgdG9vIGxvbmcnKQogICAgfQogICAgdmFyIHBzOwogICAgaWYgKHJldmVyc2UpIHsKICAgICAgcHMgPSBCdWZmZXIkMy5hbGxvYyhrIC0gbUxlbiAtIDMsIDB4ZmYpOwogICAgfSBlbHNlIHsKICAgICAgcHMgPSBub25aZXJvKGsgLSBtTGVuIC0gMyk7CiAgICB9CiAgICByZXR1cm4gbmV3IEJOJDEoQnVmZmVyJDMuY29uY2F0KFtCdWZmZXIkMy5mcm9tKFswLCByZXZlcnNlID8gMSA6IDJdKSwgcHMsIEJ1ZmZlciQzLmFsbG9jKDEpLCBtc2ddLCBrKSkKICB9CiAgZnVuY3Rpb24gbm9uWmVybyAobGVuKSB7CiAgICB2YXIgb3V0ID0gQnVmZmVyJDMuYWxsb2NVbnNhZmUobGVuKTsKICAgIHZhciBpID0gMDsKICAgIHZhciBjYWNoZSA9IHJhbmRvbUJ5dGVzKGxlbiAqIDIpOwogICAgdmFyIGN1ciA9IDA7CiAgICB2YXIgbnVtOwogICAgd2hpbGUgKGkgPCBsZW4pIHsKICAgICAgaWYgKGN1ciA9PT0gY2FjaGUubGVuZ3RoKSB7CiAgICAgICAgY2FjaGUgPSByYW5kb21CeXRlcyhsZW4gKiAyKTsKICAgICAgICBjdXIgPSAwOwogICAgICB9CiAgICAgIG51bSA9IGNhY2hlW2N1cisrXTsKICAgICAgaWYgKG51bSkgewogICAgICAgIG91dFtpKytdID0gbnVtOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gb3V0CiAgfQoKICB2YXIgcGFyc2VLZXlzID0gcGFyc2VBc24xOwogIHZhciBtZ2YgPSBtZ2YkMjsKICB2YXIgeG9yID0geG9yJDI7CiAgdmFyIEJOID0gYm4kMS5leHBvcnRzOwogIHZhciBjcnQgPSBicm93c2VyaWZ5UnNhOwogIHZhciBjcmVhdGVIYXNoID0gY3JlYXRlSGFzaCQzOwogIHZhciB3aXRoUHVibGljID0gd2l0aFB1YmxpY18xOwogIHZhciBCdWZmZXIkMiA9IHNhZmVCdWZmZXIkMS5leHBvcnRzLkJ1ZmZlcjsKCiAgdmFyIHByaXZhdGVEZWNyeXB0ID0gZnVuY3Rpb24gcHJpdmF0ZURlY3J5cHQgKHByaXZhdGVLZXksIGVuYywgcmV2ZXJzZSkgewogICAgdmFyIHBhZGRpbmc7CiAgICBpZiAocHJpdmF0ZUtleS5wYWRkaW5nKSB7CiAgICAgIHBhZGRpbmcgPSBwcml2YXRlS2V5LnBhZGRpbmc7CiAgICB9IGVsc2UgaWYgKHJldmVyc2UpIHsKICAgICAgcGFkZGluZyA9IDE7CiAgICB9IGVsc2UgewogICAgICBwYWRkaW5nID0gNDsKICAgIH0KCiAgICB2YXIga2V5ID0gcGFyc2VLZXlzKHByaXZhdGVLZXkpOwogICAgdmFyIGsgPSBrZXkubW9kdWx1cy5ieXRlTGVuZ3RoKCk7CiAgICBpZiAoZW5jLmxlbmd0aCA+IGsgfHwgbmV3IEJOKGVuYykuY21wKGtleS5tb2R1bHVzKSA+PSAwKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignZGVjcnlwdGlvbiBlcnJvcicpCiAgICB9CiAgICB2YXIgbXNnOwogICAgaWYgKHJldmVyc2UpIHsKICAgICAgbXNnID0gd2l0aFB1YmxpYyhuZXcgQk4oZW5jKSwga2V5KTsKICAgIH0gZWxzZSB7CiAgICAgIG1zZyA9IGNydChlbmMsIGtleSk7CiAgICB9CiAgICB2YXIgekJ1ZmZlciA9IEJ1ZmZlciQyLmFsbG9jKGsgLSBtc2cubGVuZ3RoKTsKICAgIG1zZyA9IEJ1ZmZlciQyLmNvbmNhdChbekJ1ZmZlciwgbXNnXSwgayk7CiAgICBpZiAocGFkZGluZyA9PT0gNCkgewogICAgICByZXR1cm4gb2FlcChrZXksIG1zZykKICAgIH0gZWxzZSBpZiAocGFkZGluZyA9PT0gMSkgewogICAgICByZXR1cm4gcGtjczEoa2V5LCBtc2csIHJldmVyc2UpCiAgICB9IGVsc2UgaWYgKHBhZGRpbmcgPT09IDMpIHsKICAgICAgcmV0dXJuIG1zZwogICAgfSBlbHNlIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCd1bmtub3duIHBhZGRpbmcnKQogICAgfQogIH07CgogIGZ1bmN0aW9uIG9hZXAgKGtleSwgbXNnKSB7CiAgICB2YXIgayA9IGtleS5tb2R1bHVzLmJ5dGVMZW5ndGgoKTsKICAgIHZhciBpSGFzaCA9IGNyZWF0ZUhhc2goJ3NoYTEnKS51cGRhdGUoQnVmZmVyJDIuYWxsb2MoMCkpLmRpZ2VzdCgpOwogICAgdmFyIGhMZW4gPSBpSGFzaC5sZW5ndGg7CiAgICBpZiAobXNnWzBdICE9PSAwKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignZGVjcnlwdGlvbiBlcnJvcicpCiAgICB9CiAgICB2YXIgbWFza2VkU2VlZCA9IG1zZy5zbGljZSgxLCBoTGVuICsgMSk7CiAgICB2YXIgbWFza2VkRGIgPSBtc2cuc2xpY2UoaExlbiArIDEpOwogICAgdmFyIHNlZWQgPSB4b3IobWFza2VkU2VlZCwgbWdmKG1hc2tlZERiLCBoTGVuKSk7CiAgICB2YXIgZGIgPSB4b3IobWFza2VkRGIsIG1nZihzZWVkLCBrIC0gaExlbiAtIDEpKTsKICAgIGlmIChjb21wYXJlKGlIYXNoLCBkYi5zbGljZSgwLCBoTGVuKSkpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdkZWNyeXB0aW9uIGVycm9yJykKICAgIH0KICAgIHZhciBpID0gaExlbjsKICAgIHdoaWxlIChkYltpXSA9PT0gMCkgewogICAgICBpKys7CiAgICB9CiAgICBpZiAoZGJbaSsrXSAhPT0gMSkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ2RlY3J5cHRpb24gZXJyb3InKQogICAgfQogICAgcmV0dXJuIGRiLnNsaWNlKGkpCiAgfQoKICBmdW5jdGlvbiBwa2NzMSAoa2V5LCBtc2csIHJldmVyc2UpIHsKICAgIHZhciBwMSA9IG1zZy5zbGljZSgwLCAyKTsKICAgIHZhciBpID0gMjsKICAgIHZhciBzdGF0dXMgPSAwOwogICAgd2hpbGUgKG1zZ1tpKytdICE9PSAwKSB7CiAgICAgIGlmIChpID49IG1zZy5sZW5ndGgpIHsKICAgICAgICBzdGF0dXMrKzsKICAgICAgICBicmVhawogICAgICB9CiAgICB9CiAgICB2YXIgcHMgPSBtc2cuc2xpY2UoMiwgaSAtIDEpOwoKICAgIGlmICgocDEudG9TdHJpbmcoJ2hleCcpICE9PSAnMDAwMicgJiYgIXJldmVyc2UpIHx8IChwMS50b1N0cmluZygnaGV4JykgIT09ICcwMDAxJyAmJiByZXZlcnNlKSkgewogICAgICBzdGF0dXMrKzsKICAgIH0KICAgIGlmIChwcy5sZW5ndGggPCA4KSB7CiAgICAgIHN0YXR1cysrOwogICAgfQogICAgaWYgKHN0YXR1cykgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ2RlY3J5cHRpb24gZXJyb3InKQogICAgfQogICAgcmV0dXJuIG1zZy5zbGljZShpKQogIH0KICBmdW5jdGlvbiBjb21wYXJlIChhLCBiKSB7CiAgICBhID0gQnVmZmVyJDIuZnJvbShhKTsKICAgIGIgPSBCdWZmZXIkMi5mcm9tKGIpOwogICAgdmFyIGRpZiA9IDA7CiAgICB2YXIgbGVuID0gYS5sZW5ndGg7CiAgICBpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKSB7CiAgICAgIGRpZisrOwogICAgICBsZW4gPSBNYXRoLm1pbihhLmxlbmd0aCwgYi5sZW5ndGgpOwogICAgfQogICAgdmFyIGkgPSAtMTsKICAgIHdoaWxlICgrK2kgPCBsZW4pIHsKICAgICAgZGlmICs9IChhW2ldIF4gYltpXSk7CiAgICB9CiAgICByZXR1cm4gZGlmCiAgfQoKICAoZnVuY3Rpb24gKGV4cG9ydHMpIHsKICBleHBvcnRzLnB1YmxpY0VuY3J5cHQgPSBwdWJsaWNFbmNyeXB0JDE7CiAgZXhwb3J0cy5wcml2YXRlRGVjcnlwdCA9IHByaXZhdGVEZWNyeXB0OwoKICBleHBvcnRzLnByaXZhdGVFbmNyeXB0ID0gZnVuY3Rpb24gcHJpdmF0ZUVuY3J5cHQgKGtleSwgYnVmKSB7CiAgICByZXR1cm4gZXhwb3J0cy5wdWJsaWNFbmNyeXB0KGtleSwgYnVmLCB0cnVlKQogIH07CgogIGV4cG9ydHMucHVibGljRGVjcnlwdCA9IGZ1bmN0aW9uIHB1YmxpY0RlY3J5cHQgKGtleSwgYnVmKSB7CiAgICByZXR1cm4gZXhwb3J0cy5wcml2YXRlRGVjcnlwdChrZXksIGJ1ZiwgdHJ1ZSkKICB9OwogIH0oYnJvd3NlciQxKSk7CgogIHZhciBjcnlwdG8kMSA9IGNyeXB0byQ3OwogIGlmICh0eXBlb2YgY3J5cHRvJDEucHVibGljRW5jcnlwdCAhPT0gJ2Z1bmN0aW9uJykgewogICAgY3J5cHRvJDEgPSBicm93c2VyJDE7CiAgfQogIHB1YmxpY0VuY3J5cHQkMi5wdWJsaWNFbmNyeXB0ID0gY3J5cHRvJDEucHVibGljRW5jcnlwdDsKICBwdWJsaWNFbmNyeXB0JDIucHJpdmF0ZURlY3J5cHQgPSBjcnlwdG8kMS5wcml2YXRlRGVjcnlwdDsKCiAgaWYgKHR5cGVvZiBjcnlwdG8kMS5wcml2YXRlRW5jcnlwdCAhPT0gJ2Z1bmN0aW9uJykgewogICAgcHVibGljRW5jcnlwdCQyLnByaXZhdGVFbmNyeXB0ID0gYnJvd3NlciQxLnByaXZhdGVFbmNyeXB0OwogIH0gZWxzZSB7CiAgICBwdWJsaWNFbmNyeXB0JDIucHJpdmF0ZUVuY3J5cHQgPSBjcnlwdG8kMS5wcml2YXRlRW5jcnlwdDsKICB9CgogIGlmICh0eXBlb2YgY3J5cHRvJDEucHVibGljRGVjcnlwdCAhPT0gJ2Z1bmN0aW9uJykgewogICAgcHVibGljRW5jcnlwdCQyLnB1YmxpY0RlY3J5cHQgPSBicm93c2VyJDEucHVibGljRGVjcnlwdDsKICB9IGVsc2UgewogICAgcHVibGljRW5jcnlwdCQyLnB1YmxpY0RlY3J5cHQgPSBjcnlwdG8kMS5wdWJsaWNEZWNyeXB0OwogIH0KCiAgY3J5cHRvJDcucmFuZG9tQnl0ZXMgPSBjcnlwdG8kNy5ybmcgPSBjcnlwdG8kNy5wc2V1ZG9SYW5kb21CeXRlcyA9IGNyeXB0byQ3LnBybmcgPSByYW5kb21ieXRlcyQxOwogIGNyeXB0byQ3LmNyZWF0ZUhhc2ggPSBjcnlwdG8kNy5IYXNoID0gY3JlYXRlSGFzaCQzOwogIGNyeXB0byQ3LmNyZWF0ZUhtYWMgPSBjcnlwdG8kNy5IbWFjID0gY3JlYXRlSG1hYyQxOwoKICB2YXIgYWxnb3MgPSBhbGdvcyQxOwogIHZhciBhbGdvS2V5cyA9IE9iamVjdC5rZXlzKGFsZ29zKTsKICB2YXIgaGFzaGVzID0gWydzaGExJywgJ3NoYTIyNCcsICdzaGEyNTYnLCAnc2hhMzg0JywgJ3NoYTUxMicsICdtZDUnLCAncm1kMTYwJ10uY29uY2F0KGFsZ29LZXlzKTsKICBjcnlwdG8kNy5nZXRIYXNoZXMgPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gaGFzaGVzCiAgfTsKCiAgdmFyIHAgPSBwYmtkZjIkMTsKICBjcnlwdG8kNy5wYmtkZjIgPSBwLnBia2RmMjsKICBjcnlwdG8kNy5wYmtkZjJTeW5jID0gcC5wYmtkZjJTeW5jOwoKICB2YXIgYWVzID0gYnJvd3NlcmlmeUNpcGhlcjsKCiAgY3J5cHRvJDcuQ2lwaGVyID0gYWVzLkNpcGhlcjsKICBjcnlwdG8kNy5jcmVhdGVDaXBoZXIgPSBhZXMuY3JlYXRlQ2lwaGVyOwogIGNyeXB0byQ3LkNpcGhlcml2ID0gYWVzLkNpcGhlcml2OwogIGNyeXB0byQ3LmNyZWF0ZUNpcGhlcml2ID0gYWVzLmNyZWF0ZUNpcGhlcml2OwogIGNyeXB0byQ3LkRlY2lwaGVyID0gYWVzLkRlY2lwaGVyOwogIGNyeXB0byQ3LmNyZWF0ZURlY2lwaGVyID0gYWVzLmNyZWF0ZURlY2lwaGVyOwogIGNyeXB0byQ3LkRlY2lwaGVyaXYgPSBhZXMuRGVjaXBoZXJpdjsKICBjcnlwdG8kNy5jcmVhdGVEZWNpcGhlcml2ID0gYWVzLmNyZWF0ZURlY2lwaGVyaXY7CiAgY3J5cHRvJDcuZ2V0Q2lwaGVycyA9IGFlcy5nZXRDaXBoZXJzOwogIGNyeXB0byQ3Lmxpc3RDaXBoZXJzID0gYWVzLmxpc3RDaXBoZXJzOwoKICB2YXIgZGggPSBkaWZmaWVIZWxsbWFuOwoKICBjcnlwdG8kNy5EaWZmaWVIZWxsbWFuR3JvdXAgPSBkaC5EaWZmaWVIZWxsbWFuR3JvdXA7CiAgY3J5cHRvJDcuY3JlYXRlRGlmZmllSGVsbG1hbkdyb3VwID0gZGguY3JlYXRlRGlmZmllSGVsbG1hbkdyb3VwOwogIGNyeXB0byQ3LmdldERpZmZpZUhlbGxtYW4gPSBkaC5nZXREaWZmaWVIZWxsbWFuOwogIGNyeXB0byQ3LmNyZWF0ZURpZmZpZUhlbGxtYW4gPSBkaC5jcmVhdGVEaWZmaWVIZWxsbWFuOwogIGNyeXB0byQ3LkRpZmZpZUhlbGxtYW4gPSBkaC5EaWZmaWVIZWxsbWFuOwoKICB2YXIgc2lnbiA9IGJyb3dzZXJpZnlTaWduOwoKICBjcnlwdG8kNy5jcmVhdGVTaWduID0gc2lnbi5jcmVhdGVTaWduOwogIGNyeXB0byQ3LlNpZ24gPSBzaWduLlNpZ247CiAgY3J5cHRvJDcuY3JlYXRlVmVyaWZ5ID0gc2lnbi5jcmVhdGVWZXJpZnk7CiAgY3J5cHRvJDcuVmVyaWZ5ID0gc2lnbi5WZXJpZnk7CgogIGNyeXB0byQ3LmNyZWF0ZUVDREggPSBjcmVhdGVFY2RoOwoKICB2YXIgcHVibGljRW5jcnlwdCA9IHB1YmxpY0VuY3J5cHQkMjsKCiAgY3J5cHRvJDcucHVibGljRW5jcnlwdCA9IHB1YmxpY0VuY3J5cHQucHVibGljRW5jcnlwdDsKICBjcnlwdG8kNy5wcml2YXRlRW5jcnlwdCA9IHB1YmxpY0VuY3J5cHQucHJpdmF0ZUVuY3J5cHQ7CiAgY3J5cHRvJDcucHVibGljRGVjcnlwdCA9IHB1YmxpY0VuY3J5cHQucHVibGljRGVjcnlwdDsKICBjcnlwdG8kNy5wcml2YXRlRGVjcnlwdCA9IHB1YmxpY0VuY3J5cHQucHJpdmF0ZURlY3J5cHQ7CgogIC8vIHRoZSBsZWFzdCBJIGNhbiBkbyBpcyBtYWtlIGVycm9yIG1lc3NhZ2VzIGZvciB0aGUgcmVzdCBvZiB0aGUgbm9kZS5qcy9jcnlwdG8gYXBpLgogIC8vIDtbCiAgLy8gICAnY3JlYXRlQ3JlZGVudGlhbHMnCiAgLy8gXS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7CiAgLy8gICBleHBvcnRzW25hbWVdID0gZnVuY3Rpb24gKCkgewogIC8vICAgICB0aHJvdyBuZXcgRXJyb3IoWwogIC8vICAgICAgICdzb3JyeSwgJyArIG5hbWUgKyAnIGlzIG5vdCBpbXBsZW1lbnRlZCB5ZXQnLAogIC8vICAgICAgICd3ZSBhY2NlcHQgcHVsbCByZXF1ZXN0cycsCiAgLy8gICAgICAgJ2h0dHBzOi8vZ2l0aHViLmNvbS9jcnlwdG8tYnJvd3NlcmlmeS9jcnlwdG8tYnJvd3NlcmlmeScKICAvLyAgICAgXS5qb2luKCdcbicpKQogIC8vICAgfQogIC8vIH0pCgogIHZhciByZiA9IHJhbmRvbWZpbGwuZXhwb3J0czsKCiAgY3J5cHRvJDcucmFuZG9tRmlsbCA9IHJmLnJhbmRvbUZpbGw7CiAgY3J5cHRvJDcucmFuZG9tRmlsbFN5bmMgPSByZi5yYW5kb21GaWxsU3luYzsKCiAgY3J5cHRvJDcuY3JlYXRlQ3JlZGVudGlhbHMgPSBmdW5jdGlvbiAoKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoWwogICAgICAnc29ycnksIGNyZWF0ZUNyZWRlbnRpYWxzIGlzIG5vdCBpbXBsZW1lbnRlZCB5ZXQnLAogICAgICAnd2UgYWNjZXB0IHB1bGwgcmVxdWVzdHMnLAogICAgICAnaHR0cHM6Ly9naXRodWIuY29tL2NyeXB0by1icm93c2VyaWZ5L2NyeXB0by1icm93c2VyaWZ5JwogICAgXS5qb2luKCdcbicpKQogIH07CgogIGNyeXB0byQ3LmNvbnN0YW50cyA9IHsKICAgICdESF9DSEVDS19QX05PVF9TQUZFX1BSSU1FJzogMiwKICAgICdESF9DSEVDS19QX05PVF9QUklNRSc6IDEsCiAgICAnREhfVU5BQkxFX1RPX0NIRUNLX0dFTkVSQVRPUic6IDQsCiAgICAnREhfTk9UX1NVSVRBQkxFX0dFTkVSQVRPUic6IDgsCiAgICAnTlBOX0VOQUJMRUQnOiAxLAogICAgJ0FMUE5fRU5BQkxFRCc6IDEsCiAgICAnUlNBX1BLQ1MxX1BBRERJTkcnOiAxLAogICAgJ1JTQV9TU0xWMjNfUEFERElORyc6IDIsCiAgICAnUlNBX05PX1BBRERJTkcnOiAzLAogICAgJ1JTQV9QS0NTMV9PQUVQX1BBRERJTkcnOiA0LAogICAgJ1JTQV9YOTMxX1BBRERJTkcnOiA1LAogICAgJ1JTQV9QS0NTMV9QU1NfUEFERElORyc6IDYsCiAgICAnUE9JTlRfQ09OVkVSU0lPTl9DT01QUkVTU0VEJzogMiwKICAgICdQT0lOVF9DT05WRVJTSU9OX1VOQ09NUFJFU1NFRCc6IDQsCiAgICAnUE9JTlRfQ09OVkVSU0lPTl9IWUJSSUQnOiA2CiAgfTsKCiAgdmFyIGJyb3dzZXIgPSB7fTsKCiAgZnVuY3Rpb24gb2xkQnJvd3NlciAoKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NlY3VyZSByYW5kb20gbnVtYmVyIGdlbmVyYXRpb24gbm90IHN1cHBvcnRlZCBieSB0aGlzIGJyb3dzZXJcbnVzZSBjaHJvbWUsIEZpcmVGb3ggb3IgSW50ZXJuZXQgRXhwbG9yZXIgMTEnKQogIH0KICB2YXIgc2FmZUJ1ZmZlciA9IHNhZmVCdWZmZXIkMS5leHBvcnRzOwogIHZhciBCdWZmZXIkMSA9IHNhZmVCdWZmZXIuQnVmZmVyOwogIHZhciBrQnVmZmVyTWF4TGVuZ3RoID0gc2FmZUJ1ZmZlci5rTWF4TGVuZ3RoOwogIHZhciBjcnlwdG8gPSBjb21tb25qc0dsb2JhbC5jcnlwdG8gfHwgY29tbW9uanNHbG9iYWwubXNDcnlwdG87CiAgdmFyIGtNYXhVaW50MzIgPSBNYXRoLnBvdygyLCAzMikgLSAxOwogIGZ1bmN0aW9uIGFzc2VydE9mZnNldCAob2Zmc2V0LCBsZW5ndGgpIHsKICAgIGlmICh0eXBlb2Ygb2Zmc2V0ICE9PSAnbnVtYmVyJyB8fCBvZmZzZXQgIT09IG9mZnNldCkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXNlbGYtY29tcGFyZQogICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdvZmZzZXQgbXVzdCBiZSBhIG51bWJlcicpCiAgICB9CgogICAgaWYgKG9mZnNldCA+IGtNYXhVaW50MzIgfHwgb2Zmc2V0IDwgMCkgewogICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdvZmZzZXQgbXVzdCBiZSBhIHVpbnQzMicpCiAgICB9CgogICAgaWYgKG9mZnNldCA+IGtCdWZmZXJNYXhMZW5ndGggfHwgb2Zmc2V0ID4gbGVuZ3RoKSB7CiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdvZmZzZXQgb3V0IG9mIHJhbmdlJykKICAgIH0KICB9CgogIGZ1bmN0aW9uIGFzc2VydFNpemUgKHNpemUsIG9mZnNldCwgbGVuZ3RoKSB7CiAgICBpZiAodHlwZW9mIHNpemUgIT09ICdudW1iZXInIHx8IHNpemUgIT09IHNpemUpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1zZWxmLWNvbXBhcmUKICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignc2l6ZSBtdXN0IGJlIGEgbnVtYmVyJykKICAgIH0KCiAgICBpZiAoc2l6ZSA+IGtNYXhVaW50MzIgfHwgc2l6ZSA8IDApIHsKICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignc2l6ZSBtdXN0IGJlIGEgdWludDMyJykKICAgIH0KCiAgICBpZiAoc2l6ZSArIG9mZnNldCA+IGxlbmd0aCB8fCBzaXplID4ga0J1ZmZlck1heExlbmd0aCkgewogICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignYnVmZmVyIHRvbyBzbWFsbCcpCiAgICB9CiAgfQogIGlmICgoY3J5cHRvICYmIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMpIHx8ICFicm93c2VyJDMpIHsKICAgIGJyb3dzZXIucmFuZG9tRmlsbCA9IHJhbmRvbUZpbGw7CiAgICBicm93c2VyLnJhbmRvbUZpbGxTeW5jID0gcmFuZG9tRmlsbFN5bmM7CiAgfSBlbHNlIHsKICAgIGJyb3dzZXIucmFuZG9tRmlsbCA9IG9sZEJyb3dzZXI7CiAgICBicm93c2VyLnJhbmRvbUZpbGxTeW5jID0gb2xkQnJvd3NlcjsKICB9CiAgZnVuY3Rpb24gcmFuZG9tRmlsbCAoYnVmLCBvZmZzZXQsIHNpemUsIGNiKSB7CiAgICBpZiAoIUJ1ZmZlciQxLmlzQnVmZmVyKGJ1ZikgJiYgIShidWYgaW5zdGFuY2VvZiBjb21tb25qc0dsb2JhbC5VaW50OEFycmF5KSkgewogICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCciYnVmIiBhcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyIG9yIFVpbnQ4QXJyYXknKQogICAgfQoKICAgIGlmICh0eXBlb2Ygb2Zmc2V0ID09PSAnZnVuY3Rpb24nKSB7CiAgICAgIGNiID0gb2Zmc2V0OwogICAgICBvZmZzZXQgPSAwOwogICAgICBzaXplID0gYnVmLmxlbmd0aDsKICAgIH0gZWxzZSBpZiAodHlwZW9mIHNpemUgPT09ICdmdW5jdGlvbicpIHsKICAgICAgY2IgPSBzaXplOwogICAgICBzaXplID0gYnVmLmxlbmd0aCAtIG9mZnNldDsKICAgIH0gZWxzZSBpZiAodHlwZW9mIGNiICE9PSAnZnVuY3Rpb24nKSB7CiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJyJjYiIgYXJndW1lbnQgbXVzdCBiZSBhIGZ1bmN0aW9uJykKICAgIH0KICAgIGFzc2VydE9mZnNldChvZmZzZXQsIGJ1Zi5sZW5ndGgpOwogICAgYXNzZXJ0U2l6ZShzaXplLCBvZmZzZXQsIGJ1Zi5sZW5ndGgpOwogICAgcmV0dXJuIGFjdHVhbEZpbGwoYnVmLCBvZmZzZXQsIHNpemUsIGNiKQogIH0KCiAgZnVuY3Rpb24gYWN0dWFsRmlsbCAoYnVmLCBvZmZzZXQsIHNpemUsIGNiKSB7CiAgICB7CiAgICAgIHZhciBvdXJCdWYgPSBidWYuYnVmZmVyOwogICAgICB2YXIgdWludCA9IG5ldyBVaW50OEFycmF5KG91ckJ1Ziwgb2Zmc2V0LCBzaXplKTsKICAgICAgY3J5cHRvLmdldFJhbmRvbVZhbHVlcyh1aW50KTsKICAgICAgaWYgKGNiKSB7CiAgICAgICAgbmV4dFRpY2skMShmdW5jdGlvbiAoKSB7CiAgICAgICAgICBjYihudWxsLCBidWYpOwogICAgICAgIH0pOwogICAgICAgIHJldHVybgogICAgICB9CiAgICAgIHJldHVybiBidWYKICAgIH0KICB9CiAgZnVuY3Rpb24gcmFuZG9tRmlsbFN5bmMgKGJ1Ziwgb2Zmc2V0LCBzaXplKSB7CiAgICBpZiAodHlwZW9mIG9mZnNldCA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgb2Zmc2V0ID0gMDsKICAgIH0KICAgIGlmICghQnVmZmVyJDEuaXNCdWZmZXIoYnVmKSAmJiAhKGJ1ZiBpbnN0YW5jZW9mIGNvbW1vbmpzR2xvYmFsLlVpbnQ4QXJyYXkpKSB7CiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJyJidWYiIGFyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXIgb3IgVWludDhBcnJheScpCiAgICB9CgogICAgYXNzZXJ0T2Zmc2V0KG9mZnNldCwgYnVmLmxlbmd0aCk7CgogICAgaWYgKHNpemUgPT09IHVuZGVmaW5lZCkgc2l6ZSA9IGJ1Zi5sZW5ndGggLSBvZmZzZXQ7CgogICAgYXNzZXJ0U2l6ZShzaXplLCBvZmZzZXQsIGJ1Zi5sZW5ndGgpOwoKICAgIHJldHVybiBhY3R1YWxGaWxsKGJ1Ziwgb2Zmc2V0LCBzaXplKQogIH0KCiAgKGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICB2YXIgY3J5cHRvID0gY3J5cHRvJDc7CiAgaWYgKHR5cGVvZiBjcnlwdG8ucmFuZG9tRmlsbCA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgY3J5cHRvLnJhbmRvbUZpbGxTeW5jID09PSAnZnVuY3Rpb24nKSB7CiAgICBleHBvcnRzLnJhbmRvbUZpbGwgPSBjcnlwdG8ucmFuZG9tRmlsbDsKICAgIGV4cG9ydHMucmFuZG9tRmlsbFN5bmMgPSBjcnlwdG8ucmFuZG9tRmlsbFN5bmM7CiAgfSBlbHNlIHsKICAgIG1vZHVsZS5leHBvcnRzID0gYnJvd3NlcjsKICB9CiAgfShyYW5kb21maWxsLCByYW5kb21maWxsLmV4cG9ydHMpKTsKCiAgLy8gaHJ0aW1lIHBvbHlmaWxsIGZvciB0aGUgYnJvd3NlcgogIGNvbnN0IGJhc2VOb3cgPSBNYXRoLmZsb29yKChEYXRlLm5vdygpIC0gcGVyZm9ybWFuY2Uubm93KCkpICogMWUtMyk7CiAgZnVuY3Rpb24gaHJ0aW1lKHByZXZpb3VzVGltZXN0YW1wKSB7CiAgICAgIC8vIGluaXRpbGFpemUgb3VyIHZhcmlhYmxlcwogICAgICBsZXQgY2xvY2t0aW1lID0gcGVyZm9ybWFuY2Uubm93KCkgKiAxZS0zOwogICAgICBsZXQgc2Vjb25kcyA9IE1hdGguZmxvb3IoY2xvY2t0aW1lKSArIGJhc2VOb3c7CiAgICAgIGxldCBuYW5vc2Vjb25kcyA9IE1hdGguZmxvb3IoKGNsb2NrdGltZSAlIDEpICogMWU5KTsKICAgICAgLy8gQ29tcGFyZSB0byB0aGUgcHJ2aW91cyB0aW1lc3RhbXAgaWYgd2UgaGF2ZSBvbmUKICAgICAgaWYgKHByZXZpb3VzVGltZXN0YW1wKSB7CiAgICAgICAgICBzZWNvbmRzID0gc2Vjb25kcyAtIHByZXZpb3VzVGltZXN0YW1wWzBdOwogICAgICAgICAgbmFub3NlY29uZHMgPSBuYW5vc2Vjb25kcyAtIHByZXZpb3VzVGltZXN0YW1wWzFdOwogICAgICAgICAgaWYgKG5hbm9zZWNvbmRzIDwgMCkgewogICAgICAgICAgICAgIHNlY29uZHMtLTsKICAgICAgICAgICAgICBuYW5vc2Vjb25kcyArPSAxZTk7CiAgICAgICAgICB9CiAgICAgIH0KICAgICAgLy8gUmV0dXJuIG91ciBzZWNvbmRzIHR1cGxlCiAgICAgIHJldHVybiBbc2Vjb25kcywgbmFub3NlY29uZHNdOwogIH0KCiAgY2xhc3MgV0FTSUVycm9yIGV4dGVuZHMgRXJyb3IgewogICAgICBjb25zdHJ1Y3RvcihlcnJubykgewogICAgICAgICAgc3VwZXIoKTsKICAgICAgICAgIHRoaXMuZXJybm8gPSBlcnJubzsKICAgICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBXQVNJRXJyb3IucHJvdG90eXBlKTsKICAgICAgfQogIH0KICBjbGFzcyBXQVNJRXhpdEVycm9yIGV4dGVuZHMgRXJyb3IgewogICAgICBjb25zdHJ1Y3Rvcihjb2RlKSB7CiAgICAgICAgICBzdXBlcihgV0FTSSBFeGl0IGVycm9yOiAke2NvZGV9YCk7CiAgICAgICAgICB0aGlzLmNvZGUgPSBjb2RlOwogICAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIFdBU0lFeGl0RXJyb3IucHJvdG90eXBlKTsKICAgICAgfQogIH0KICBjbGFzcyBXQVNJS2lsbEVycm9yIGV4dGVuZHMgRXJyb3IgewogICAgICBjb25zdHJ1Y3RvcihzaWduYWwpIHsKICAgICAgICAgIHN1cGVyKGBXQVNJIEtpbGwgc2lnbmFsOiAke3NpZ25hbH1gKTsKICAgICAgICAgIHRoaXMuc2lnbmFsID0gc2lnbmFsOwogICAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIFdBU0lLaWxsRXJyb3IucHJvdG90eXBlKTsKICAgICAgfQogIH0KCiAgLy8gU2ltcGx5IHBvbHlmaWxsIGZvciBocnRpbWUKICAvLyBodHRwczovL25vZGVqcy5vcmcvYXBpL3Byb2Nlc3MuaHRtbCNwcm9jZXNzX3Byb2Nlc3NfaHJ0aW1lX3RpbWUKICBjb25zdCBOU19QRVJfU0VDID0gMWU5OwogIGNvbnN0IGdldEJpZ0ludEhydGltZSA9IChuYXRpdmVIcnRpbWUpID0+IHsKICAgICAgcmV0dXJuICh0aW1lKSA9PiB7CiAgICAgICAgICBjb25zdCBkaWZmID0gbmF0aXZlSHJ0aW1lKHRpbWUpOwogICAgICAgICAgLy8gUmV0dXJuIHRoZSB0aW1lCiAgICAgICAgICByZXR1cm4gKGRpZmZbMF0gKiBOU19QRVJfU0VDICsgZGlmZlsxXSk7CiAgICAgIH07CiAgfTsKCiAgLy8gQHRzLWlnbm9yZQogIGNvbnN0IGJpbmRpbmdzID0gewogICAgICBocnRpbWU6IGdldEJpZ0ludEhydGltZShocnRpbWUpLAogICAgICBleGl0OiAoY29kZSkgPT4gewogICAgICAgICAgdGhyb3cgbmV3IFdBU0lFeGl0RXJyb3IoY29kZSk7CiAgICAgIH0sCiAgICAgIGtpbGw6IChzaWduYWwpID0+IHsKICAgICAgICAgIHRocm93IG5ldyBXQVNJS2lsbEVycm9yKHNpZ25hbCk7CiAgICAgIH0sCiAgICAgIC8vIEB0cy1pZ25vcmUKICAgICAgcmFuZG9tRmlsbFN5bmM6IHJhbmRvbWZpbGwuZXhwb3J0cy5yYW5kb21GaWxsU3luYywKICAgICAgaXNUVFk6ICgpID0+IHRydWUsCiAgICAgIHBhdGg6IHBhdGgsCiAgICAgIC8vIExldCB0aGUgdXNlciBhdHRhY2ggdGhlIGZzIGF0IHJ1bnRpbWUKICAgICAgZnM6IG51bGwsCiAgfTsKCiAgLyoKCiAgVGhpcyBwcm9qZWN0IGlzIGJhc2VkIGZyb20gdGhlIE5vZGUgaW1wbGVtZW50YXRpb24gbWFkZSBieSBHdXMgQ2FwbGFuCiAgaHR0cHM6Ly9naXRodWIuY29tL2RldnNuZWsvbm9kZS13YXNpCiAgSG93ZXZlciwgSmF2YVNjcmlwdCBXQVNJIGlzIGZvY3VzZWQgb246CiAgICogQnJpbmdpbmcgV0FTSSB0byB0aGUgQnJvd3NlcnMKICAgKiBNYWtlIGVhc3kgdG8gcGx1ZyBkaWZmZXJlbnQgZmlsZXN5c3RlbXMKICAgKiBQcm92aWRlIGEgdHlwZS1zYWZlIGFwaSB1c2luZyBUeXBlc2NyaXB0CgoKICBDb3B5cmlnaHQgMjAxOSBHdXMgQ2FwbGFuCgogIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHkKICBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSAiU29mdHdhcmUiKSwgdG8KICBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZQogIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vcgogIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzCiAgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczoKCiAgVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4KICBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4KCiAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1IKICBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSwKICBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUKICBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSCiAgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcKICBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTCiAgSU4gVEhFIFNPRlRXQVJFLgoKICAgKi8KICBjb25zdCBXQVNJX0VTVUNDRVNTID0gMDsKICBjb25zdCBXQVNJX0UyQklHID0gMTsKICBjb25zdCBXQVNJX0VBQ0NFUyA9IDI7CiAgY29uc3QgV0FTSV9FQUREUklOVVNFID0gMzsKICBjb25zdCBXQVNJX0VBRERSTk9UQVZBSUwgPSA0OwogIGNvbnN0IFdBU0lfRUFGTk9TVVBQT1JUID0gNTsKICBjb25zdCBXQVNJX0VBR0FJTiA9IDY7CiAgY29uc3QgV0FTSV9FQUxSRUFEWSA9IDc7CiAgY29uc3QgV0FTSV9FQkFERiA9IDg7CiAgY29uc3QgV0FTSV9FQkFETVNHID0gOTsKICBjb25zdCBXQVNJX0VCVVNZID0gMTA7CiAgY29uc3QgV0FTSV9FQ0FOQ0VMRUQgPSAxMTsKICBjb25zdCBXQVNJX0VDSElMRCA9IDEyOwogIGNvbnN0IFdBU0lfRUNPTk5BQk9SVEVEID0gMTM7CiAgY29uc3QgV0FTSV9FQ09OTlJFRlVTRUQgPSAxNDsKICBjb25zdCBXQVNJX0VDT05OUkVTRVQgPSAxNTsKICBjb25zdCBXQVNJX0VERUFETEsgPSAxNjsKICBjb25zdCBXQVNJX0VERVNUQUREUlJFUSA9IDE3OwogIGNvbnN0IFdBU0lfRURPTSA9IDE4OwogIGNvbnN0IFdBU0lfRURRVU9UID0gMTk7CiAgY29uc3QgV0FTSV9FRVhJU1QgPSAyMDsKICBjb25zdCBXQVNJX0VGQVVMVCA9IDIxOwogIGNvbnN0IFdBU0lfRUZCSUcgPSAyMjsKICBjb25zdCBXQVNJX0VIT1NUVU5SRUFDSCA9IDIzOwogIGNvbnN0IFdBU0lfRUlEUk0gPSAyNDsKICBjb25zdCBXQVNJX0VJTFNFUSA9IDI1OwogIGNvbnN0IFdBU0lfRUlOUFJPR1JFU1MgPSAyNjsKICBjb25zdCBXQVNJX0VJTlRSID0gMjc7CiAgY29uc3QgV0FTSV9FSU5WQUwgPSAyODsKICBjb25zdCBXQVNJX0VJTyA9IDI5OwogIGNvbnN0IFdBU0lfRUlTQ09OTiA9IDMwOwogIGNvbnN0IFdBU0lfRUlTRElSID0gMzE7CiAgY29uc3QgV0FTSV9FTE9PUCA9IDMyOwogIGNvbnN0IFdBU0lfRU1GSUxFID0gMzM7CiAgY29uc3QgV0FTSV9FTUxJTksgPSAzNDsKICBjb25zdCBXQVNJX0VNU0dTSVpFID0gMzU7CiAgY29uc3QgV0FTSV9FTVVMVElIT1AgPSAzNjsKICBjb25zdCBXQVNJX0VOQU1FVE9PTE9ORyA9IDM3OwogIGNvbnN0IFdBU0lfRU5FVERPV04gPSAzODsKICBjb25zdCBXQVNJX0VORVRSRVNFVCA9IDM5OwogIGNvbnN0IFdBU0lfRU5FVFVOUkVBQ0ggPSA0MDsKICBjb25zdCBXQVNJX0VORklMRSA9IDQxOwogIGNvbnN0IFdBU0lfRU5PQlVGUyA9IDQyOwogIGNvbnN0IFdBU0lfRU5PREVWID0gNDM7CiAgY29uc3QgV0FTSV9FTk9FTlQgPSA0NDsKICBjb25zdCBXQVNJX0VOT0VYRUMgPSA0NTsKICBjb25zdCBXQVNJX0VOT0xDSyA9IDQ2OwogIGNvbnN0IFdBU0lfRU5PTElOSyA9IDQ3OwogIGNvbnN0IFdBU0lfRU5PTUVNID0gNDg7CiAgY29uc3QgV0FTSV9FTk9NU0cgPSA0OTsKICBjb25zdCBXQVNJX0VOT1BST1RPT1BUID0gNTA7CiAgY29uc3QgV0FTSV9FTk9TUEMgPSA1MTsKICBjb25zdCBXQVNJX0VOT1NZUyA9IDUyOwogIGNvbnN0IFdBU0lfRU5PVENPTk4gPSA1MzsKICBjb25zdCBXQVNJX0VOT1RESVIgPSA1NDsKICBjb25zdCBXQVNJX0VOT1RFTVBUWSA9IDU1OwogIGNvbnN0IFdBU0lfRU5PVFJFQ09WRVJBQkxFID0gNTY7CiAgY29uc3QgV0FTSV9FTk9UU09DSyA9IDU3OwogIGNvbnN0IFdBU0lfRU5PVFRZID0gNTk7CiAgY29uc3QgV0FTSV9FTlhJTyA9IDYwOwogIGNvbnN0IFdBU0lfRU9WRVJGTE9XID0gNjE7CiAgY29uc3QgV0FTSV9FT1dORVJERUFEID0gNjI7CiAgY29uc3QgV0FTSV9FUEVSTSA9IDYzOwogIGNvbnN0IFdBU0lfRVBJUEUgPSA2NDsKICBjb25zdCBXQVNJX0VQUk9UTyA9IDY1OwogIGNvbnN0IFdBU0lfRVBST1RPTk9TVVBQT1JUID0gNjY7CiAgY29uc3QgV0FTSV9FUFJPVE9UWVBFID0gNjc7CiAgY29uc3QgV0FTSV9FUkFOR0UgPSA2ODsKICBjb25zdCBXQVNJX0VST0ZTID0gNjk7CiAgY29uc3QgV0FTSV9FU1BJUEUgPSA3MDsKICBjb25zdCBXQVNJX0VTUkNIID0gNzE7CiAgY29uc3QgV0FTSV9FU1RBTEUgPSA3MjsKICBjb25zdCBXQVNJX0VUSU1FRE9VVCA9IDczOwogIGNvbnN0IFdBU0lfRVRYVEJTWSA9IDc0OwogIGNvbnN0IFdBU0lfRVhERVYgPSA3NTsKICBjb25zdCBXQVNJX0VOT1RDQVBBQkxFID0gNzY7CiAgY29uc3QgV0FTSV9TSUdBQlJUID0gMDsKICBjb25zdCBXQVNJX1NJR0FMUk0gPSAxOwogIGNvbnN0IFdBU0lfU0lHQlVTID0gMjsKICBjb25zdCBXQVNJX1NJR0NITEQgPSAzOwogIGNvbnN0IFdBU0lfU0lHQ09OVCA9IDQ7CiAgY29uc3QgV0FTSV9TSUdGUEUgPSA1OwogIGNvbnN0IFdBU0lfU0lHSFVQID0gNjsKICBjb25zdCBXQVNJX1NJR0lMTCA9IDc7CiAgY29uc3QgV0FTSV9TSUdJTlQgPSA4OwogIGNvbnN0IFdBU0lfU0lHS0lMTCA9IDk7CiAgY29uc3QgV0FTSV9TSUdQSVBFID0gMTA7CiAgY29uc3QgV0FTSV9TSUdRVUlUID0gMTE7CiAgY29uc3QgV0FTSV9TSUdTRUdWID0gMTI7CiAgY29uc3QgV0FTSV9TSUdTVE9QID0gMTM7CiAgY29uc3QgV0FTSV9TSUdURVJNID0gMTQ7CiAgY29uc3QgV0FTSV9TSUdUUkFQID0gMTU7CiAgY29uc3QgV0FTSV9TSUdUU1RQID0gMTY7CiAgY29uc3QgV0FTSV9TSUdUVElOID0gMTc7CiAgY29uc3QgV0FTSV9TSUdUVE9VID0gMTg7CiAgY29uc3QgV0FTSV9TSUdVUkcgPSAxOTsKICBjb25zdCBXQVNJX1NJR1VTUjEgPSAyMDsKICBjb25zdCBXQVNJX1NJR1VTUjIgPSAyMTsKICBjb25zdCBXQVNJX1NJR1ZUQUxSTSA9IDIyOwogIGNvbnN0IFdBU0lfU0lHWENQVSA9IDIzOwogIGNvbnN0IFdBU0lfU0lHWEZTWiA9IDI0OwogIGNvbnN0IFdBU0lfRklMRVRZUEVfVU5LTk9XTiA9IDA7CiAgY29uc3QgV0FTSV9GSUxFVFlQRV9CTE9DS19ERVZJQ0UgPSAxOwogIGNvbnN0IFdBU0lfRklMRVRZUEVfQ0hBUkFDVEVSX0RFVklDRSA9IDI7CiAgY29uc3QgV0FTSV9GSUxFVFlQRV9ESVJFQ1RPUlkgPSAzOwogIGNvbnN0IFdBU0lfRklMRVRZUEVfUkVHVUxBUl9GSUxFID0gNDsKICBjb25zdCBXQVNJX0ZJTEVUWVBFX1NPQ0tFVF9TVFJFQU0gPSA2OwogIGNvbnN0IFdBU0lfRklMRVRZUEVfU1lNQk9MSUNfTElOSyA9IDc7CiAgY29uc3QgV0FTSV9GREZMQUdfQVBQRU5EID0gMHgwMDAxOwogIGNvbnN0IFdBU0lfRkRGTEFHX0RTWU5DID0gMHgwMDAyOwogIGNvbnN0IFdBU0lfRkRGTEFHX05PTkJMT0NLID0gMHgwMDA0OwogIGNvbnN0IFdBU0lfRkRGTEFHX1JTWU5DID0gMHgwMDA4OwogIGNvbnN0IFdBU0lfRkRGTEFHX1NZTkMgPSAweDAwMTA7CiAgY29uc3QgV0FTSV9SSUdIVF9GRF9EQVRBU1lOQyA9IEJpZ0ludFBvbHlmaWxsKDB4MDAwMDAwMDAwMDAwMDAwMSk7CiAgY29uc3QgV0FTSV9SSUdIVF9GRF9SRUFEID0gQmlnSW50UG9seWZpbGwoMHgwMDAwMDAwMDAwMDAwMDAyKTsKICBjb25zdCBXQVNJX1JJR0hUX0ZEX1NFRUsgPSBCaWdJbnRQb2x5ZmlsbCgweDAwMDAwMDAwMDAwMDAwMDQpOwogIGNvbnN0IFdBU0lfUklHSFRfRkRfRkRTVEFUX1NFVF9GTEFHUyA9IEJpZ0ludFBvbHlmaWxsKDB4MDAwMDAwMDAwMDAwMDAwOCk7CiAgY29uc3QgV0FTSV9SSUdIVF9GRF9TWU5DID0gQmlnSW50UG9seWZpbGwoMHgwMDAwMDAwMDAwMDAwMDEwKTsKICBjb25zdCBXQVNJX1JJR0hUX0ZEX1RFTEwgPSBCaWdJbnRQb2x5ZmlsbCgweDAwMDAwMDAwMDAwMDAwMjApOwogIGNvbnN0IFdBU0lfUklHSFRfRkRfV1JJVEUgPSBCaWdJbnRQb2x5ZmlsbCgweDAwMDAwMDAwMDAwMDAwNDApOwogIGNvbnN0IFdBU0lfUklHSFRfRkRfQURWSVNFID0gQmlnSW50UG9seWZpbGwoMHgwMDAwMDAwMDAwMDAwMDgwKTsKICBjb25zdCBXQVNJX1JJR0hUX0ZEX0FMTE9DQVRFID0gQmlnSW50UG9seWZpbGwoMHgwMDAwMDAwMDAwMDAwMTAwKTsKICBjb25zdCBXQVNJX1JJR0hUX1BBVEhfQ1JFQVRFX0RJUkVDVE9SWSA9IEJpZ0ludFBvbHlmaWxsKDB4MDAwMDAwMDAwMDAwMDIwMCk7CiAgY29uc3QgV0FTSV9SSUdIVF9QQVRIX0NSRUFURV9GSUxFID0gQmlnSW50UG9seWZpbGwoMHgwMDAwMDAwMDAwMDAwNDAwKTsKICBjb25zdCBXQVNJX1JJR0hUX1BBVEhfTElOS19TT1VSQ0UgPSBCaWdJbnRQb2x5ZmlsbCgweDAwMDAwMDAwMDAwMDA4MDApOwogIGNvbnN0IFdBU0lfUklHSFRfUEFUSF9MSU5LX1RBUkdFVCA9IEJpZ0ludFBvbHlmaWxsKDB4MDAwMDAwMDAwMDAwMTAwMCk7CiAgY29uc3QgV0FTSV9SSUdIVF9QQVRIX09QRU4gPSBCaWdJbnRQb2x5ZmlsbCgweDAwMDAwMDAwMDAwMDIwMDApOwogIGNvbnN0IFdBU0lfUklHSFRfRkRfUkVBRERJUiA9IEJpZ0ludFBvbHlmaWxsKDB4MDAwMDAwMDAwMDAwNDAwMCk7CiAgY29uc3QgV0FTSV9SSUdIVF9QQVRIX1JFQURMSU5LID0gQmlnSW50UG9seWZpbGwoMHgwMDAwMDAwMDAwMDA4MDAwKTsKICBjb25zdCBXQVNJX1JJR0hUX1BBVEhfUkVOQU1FX1NPVVJDRSA9IEJpZ0ludFBvbHlmaWxsKDB4MDAwMDAwMDAwMDAxMDAwMCk7CiAgY29uc3QgV0FTSV9SSUdIVF9QQVRIX1JFTkFNRV9UQVJHRVQgPSBCaWdJbnRQb2x5ZmlsbCgweDAwMDAwMDAwMDAwMjAwMDApOwogIGNvbnN0IFdBU0lfUklHSFRfUEFUSF9GSUxFU1RBVF9HRVQgPSBCaWdJbnRQb2x5ZmlsbCgweDAwMDAwMDAwMDAwNDAwMDApOwogIGNvbnN0IFdBU0lfUklHSFRfUEFUSF9GSUxFU1RBVF9TRVRfU0laRSA9IEJpZ0ludFBvbHlmaWxsKDB4MDAwMDAwMDAwMDA4MDAwMCk7CiAgY29uc3QgV0FTSV9SSUdIVF9QQVRIX0ZJTEVTVEFUX1NFVF9USU1FUyA9IEJpZ0ludFBvbHlmaWxsKDB4MDAwMDAwMDAwMDEwMDAwMCk7CiAgY29uc3QgV0FTSV9SSUdIVF9GRF9GSUxFU1RBVF9HRVQgPSBCaWdJbnRQb2x5ZmlsbCgweDAwMDAwMDAwMDAyMDAwMDApOwogIGNvbnN0IFdBU0lfUklHSFRfRkRfRklMRVNUQVRfU0VUX1NJWkUgPSBCaWdJbnRQb2x5ZmlsbCgweDAwMDAwMDAwMDA0MDAwMDApOwogIGNvbnN0IFdBU0lfUklHSFRfRkRfRklMRVNUQVRfU0VUX1RJTUVTID0gQmlnSW50UG9seWZpbGwoMHgwMDAwMDAwMDAwODAwMDAwKTsKICBjb25zdCBXQVNJX1JJR0hUX1BBVEhfU1lNTElOSyA9IEJpZ0ludFBvbHlmaWxsKDB4MDAwMDAwMDAwMTAwMDAwMCk7CiAgY29uc3QgV0FTSV9SSUdIVF9QQVRIX1JFTU9WRV9ESVJFQ1RPUlkgPSBCaWdJbnRQb2x5ZmlsbCgweDAwMDAwMDAwMDIwMDAwMDApOwogIGNvbnN0IFdBU0lfUklHSFRfUEFUSF9VTkxJTktfRklMRSA9IEJpZ0ludFBvbHlmaWxsKDB4MDAwMDAwMDAwNDAwMDAwMCk7CiAgY29uc3QgV0FTSV9SSUdIVF9QT0xMX0ZEX1JFQURXUklURSA9IEJpZ0ludFBvbHlmaWxsKDB4MDAwMDAwMDAwODAwMDAwMCk7CiAgY29uc3QgV0FTSV9SSUdIVF9TT0NLX1NIVVRET1dOID0gQmlnSW50UG9seWZpbGwoMHgwMDAwMDAwMDEwMDAwMDAwKTsKICBjb25zdCBSSUdIVFNfQUxMID0gV0FTSV9SSUdIVF9GRF9EQVRBU1lOQyB8CiAgICAgIFdBU0lfUklHSFRfRkRfUkVBRCB8CiAgICAgIFdBU0lfUklHSFRfRkRfU0VFSyB8CiAgICAgIFdBU0lfUklHSFRfRkRfRkRTVEFUX1NFVF9GTEFHUyB8CiAgICAgIFdBU0lfUklHSFRfRkRfU1lOQyB8CiAgICAgIFdBU0lfUklHSFRfRkRfVEVMTCB8CiAgICAgIFdBU0lfUklHSFRfRkRfV1JJVEUgfAogICAgICBXQVNJX1JJR0hUX0ZEX0FEVklTRSB8CiAgICAgIFdBU0lfUklHSFRfRkRfQUxMT0NBVEUgfAogICAgICBXQVNJX1JJR0hUX1BBVEhfQ1JFQVRFX0RJUkVDVE9SWSB8CiAgICAgIFdBU0lfUklHSFRfUEFUSF9DUkVBVEVfRklMRSB8CiAgICAgIFdBU0lfUklHSFRfUEFUSF9MSU5LX1NPVVJDRSB8CiAgICAgIFdBU0lfUklHSFRfUEFUSF9MSU5LX1RBUkdFVCB8CiAgICAgIFdBU0lfUklHSFRfUEFUSF9PUEVOIHwKICAgICAgV0FTSV9SSUdIVF9GRF9SRUFERElSIHwKICAgICAgV0FTSV9SSUdIVF9QQVRIX1JFQURMSU5LIHwKICAgICAgV0FTSV9SSUdIVF9QQVRIX1JFTkFNRV9TT1VSQ0UgfAogICAgICBXQVNJX1JJR0hUX1BBVEhfUkVOQU1FX1RBUkdFVCB8CiAgICAgIFdBU0lfUklHSFRfUEFUSF9GSUxFU1RBVF9HRVQgfAogICAgICBXQVNJX1JJR0hUX1BBVEhfRklMRVNUQVRfU0VUX1NJWkUgfAogICAgICBXQVNJX1JJR0hUX1BBVEhfRklMRVNUQVRfU0VUX1RJTUVTIHwKICAgICAgV0FTSV9SSUdIVF9GRF9GSUxFU1RBVF9HRVQgfAogICAgICBXQVNJX1JJR0hUX0ZEX0ZJTEVTVEFUX1NFVF9USU1FUyB8CiAgICAgIFdBU0lfUklHSFRfRkRfRklMRVNUQVRfU0VUX1NJWkUgfAogICAgICBXQVNJX1JJR0hUX1BBVEhfU1lNTElOSyB8CiAgICAgIFdBU0lfUklHSFRfUEFUSF9VTkxJTktfRklMRSB8CiAgICAgIFdBU0lfUklHSFRfUEFUSF9SRU1PVkVfRElSRUNUT1JZIHwKICAgICAgV0FTSV9SSUdIVF9QT0xMX0ZEX1JFQURXUklURSB8CiAgICAgIFdBU0lfUklHSFRfU09DS19TSFVURE9XTjsKICBjb25zdCBSSUdIVFNfQkxPQ0tfREVWSUNFX0JBU0UgPSBSSUdIVFNfQUxMOwogIGNvbnN0IFJJR0hUU19CTE9DS19ERVZJQ0VfSU5IRVJJVElORyA9IFJJR0hUU19BTEw7CiAgY29uc3QgUklHSFRTX0NIQVJBQ1RFUl9ERVZJQ0VfQkFTRSA9IFJJR0hUU19BTEw7CiAgY29uc3QgUklHSFRTX0NIQVJBQ1RFUl9ERVZJQ0VfSU5IRVJJVElORyA9IFJJR0hUU19BTEw7CiAgY29uc3QgUklHSFRTX1JFR1VMQVJfRklMRV9CQVNFID0gV0FTSV9SSUdIVF9GRF9EQVRBU1lOQyB8CiAgICAgIFdBU0lfUklHSFRfRkRfUkVBRCB8CiAgICAgIFdBU0lfUklHSFRfRkRfU0VFSyB8CiAgICAgIFdBU0lfUklHSFRfRkRfRkRTVEFUX1NFVF9GTEFHUyB8CiAgICAgIFdBU0lfUklHSFRfRkRfU1lOQyB8CiAgICAgIFdBU0lfUklHSFRfRkRfVEVMTCB8CiAgICAgIFdBU0lfUklHSFRfRkRfV1JJVEUgfAogICAgICBXQVNJX1JJR0hUX0ZEX0FEVklTRSB8CiAgICAgIFdBU0lfUklHSFRfRkRfQUxMT0NBVEUgfAogICAgICBXQVNJX1JJR0hUX0ZEX0ZJTEVTVEFUX0dFVCB8CiAgICAgIFdBU0lfUklHSFRfRkRfRklMRVNUQVRfU0VUX1NJWkUgfAogICAgICBXQVNJX1JJR0hUX0ZEX0ZJTEVTVEFUX1NFVF9USU1FUyB8CiAgICAgIFdBU0lfUklHSFRfUE9MTF9GRF9SRUFEV1JJVEU7CiAgY29uc3QgUklHSFRTX1JFR1VMQVJfRklMRV9JTkhFUklUSU5HID0gQmlnSW50UG9seWZpbGwoMCk7CiAgY29uc3QgUklHSFRTX0RJUkVDVE9SWV9CQVNFID0gV0FTSV9SSUdIVF9GRF9GRFNUQVRfU0VUX0ZMQUdTIHwKICAgICAgV0FTSV9SSUdIVF9GRF9TWU5DIHwKICAgICAgV0FTSV9SSUdIVF9GRF9BRFZJU0UgfAogICAgICBXQVNJX1JJR0hUX1BBVEhfQ1JFQVRFX0RJUkVDVE9SWSB8CiAgICAgIFdBU0lfUklHSFRfUEFUSF9DUkVBVEVfRklMRSB8CiAgICAgIFdBU0lfUklHSFRfUEFUSF9MSU5LX1NPVVJDRSB8CiAgICAgIFdBU0lfUklHSFRfUEFUSF9MSU5LX1RBUkdFVCB8CiAgICAgIFdBU0lfUklHSFRfUEFUSF9PUEVOIHwKICAgICAgV0FTSV9SSUdIVF9GRF9SRUFERElSIHwKICAgICAgV0FTSV9SSUdIVF9QQVRIX1JFQURMSU5LIHwKICAgICAgV0FTSV9SSUdIVF9QQVRIX1JFTkFNRV9TT1VSQ0UgfAogICAgICBXQVNJX1JJR0hUX1BBVEhfUkVOQU1FX1RBUkdFVCB8CiAgICAgIFdBU0lfUklHSFRfUEFUSF9GSUxFU1RBVF9HRVQgfAogICAgICBXQVNJX1JJR0hUX1BBVEhfRklMRVNUQVRfU0VUX1NJWkUgfAogICAgICBXQVNJX1JJR0hUX1BBVEhfRklMRVNUQVRfU0VUX1RJTUVTIHwKICAgICAgV0FTSV9SSUdIVF9GRF9GSUxFU1RBVF9HRVQgfAogICAgICBXQVNJX1JJR0hUX0ZEX0ZJTEVTVEFUX1NFVF9USU1FUyB8CiAgICAgIFdBU0lfUklHSFRfUEFUSF9TWU1MSU5LIHwKICAgICAgV0FTSV9SSUdIVF9QQVRIX1VOTElOS19GSUxFIHwKICAgICAgV0FTSV9SSUdIVF9QQVRIX1JFTU9WRV9ESVJFQ1RPUlkgfAogICAgICBXQVNJX1JJR0hUX1BPTExfRkRfUkVBRFdSSVRFOwogIGNvbnN0IFJJR0hUU19ESVJFQ1RPUllfSU5IRVJJVElORyA9IFJJR0hUU19ESVJFQ1RPUllfQkFTRSB8IFJJR0hUU19SRUdVTEFSX0ZJTEVfQkFTRTsKICBjb25zdCBSSUdIVFNfU09DS0VUX0JBU0UgPSBXQVNJX1JJR0hUX0ZEX1JFQUQgfAogICAgICBXQVNJX1JJR0hUX0ZEX0ZEU1RBVF9TRVRfRkxBR1MgfAogICAgICBXQVNJX1JJR0hUX0ZEX1dSSVRFIHwKICAgICAgV0FTSV9SSUdIVF9GRF9GSUxFU1RBVF9HRVQgfAogICAgICBXQVNJX1JJR0hUX1BPTExfRkRfUkVBRFdSSVRFIHwKICAgICAgV0FTSV9SSUdIVF9TT0NLX1NIVVRET1dOOwogIGNvbnN0IFJJR0hUU19TT0NLRVRfSU5IRVJJVElORyA9IFJJR0hUU19BTEw7CiAgY29uc3QgUklHSFRTX1RUWV9CQVNFID0gV0FTSV9SSUdIVF9GRF9SRUFEIHwKICAgICAgV0FTSV9SSUdIVF9GRF9GRFNUQVRfU0VUX0ZMQUdTIHwKICAgICAgV0FTSV9SSUdIVF9GRF9XUklURSB8CiAgICAgIFdBU0lfUklHSFRfRkRfRklMRVNUQVRfR0VUIHwKICAgICAgV0FTSV9SSUdIVF9QT0xMX0ZEX1JFQURXUklURTsKICBjb25zdCBSSUdIVFNfVFRZX0lOSEVSSVRJTkcgPSBCaWdJbnRQb2x5ZmlsbCgwKTsKICBjb25zdCBXQVNJX0NMT0NLX01PTk9UT05JQyA9IDA7CiAgY29uc3QgV0FTSV9DTE9DS19QUk9DRVNTX0NQVVRJTUVfSUQgPSAxOwogIGNvbnN0IFdBU0lfQ0xPQ0tfUkVBTFRJTUUgPSAyOwogIGNvbnN0IFdBU0lfQ0xPQ0tfVEhSRUFEX0NQVVRJTUVfSUQgPSAzOwogIGNvbnN0IFdBU0lfRVZFTlRUWVBFX0NMT0NLID0gMDsKICBjb25zdCBXQVNJX0VWRU5UVFlQRV9GRF9SRUFEID0gMTsKICBjb25zdCBXQVNJX0VWRU5UVFlQRV9GRF9XUklURSA9IDI7CiAgY29uc3QgV0FTSV9GSUxFU1RBVF9TRVRfQVRJTV9OT1cgPSAxIDw8IDE7CiAgY29uc3QgV0FTSV9GSUxFU1RBVF9TRVRfTVRJTV9OT1cgPSAxIDw8IDM7CiAgY29uc3QgV0FTSV9PX0NSRUFUID0gMSA8PCAwOwogIGNvbnN0IFdBU0lfT19ESVJFQ1RPUlkgPSAxIDw8IDE7CiAgY29uc3QgV0FTSV9PX0VYQ0wgPSAxIDw8IDI7CiAgY29uc3QgV0FTSV9PX1RSVU5DID0gMSA8PCAzOwogIGNvbnN0IFdBU0lfUFJFT1BFTlRZUEVfRElSID0gMDsKICBjb25zdCBXQVNJX1NURElOX0ZJTEVOTyA9IDA7CiAgY29uc3QgV0FTSV9TVERPVVRfRklMRU5PID0gMTsKICBjb25zdCBXQVNJX1NUREVSUl9GSUxFTk8gPSAyOwogIGNvbnN0IFdBU0lfV0hFTkNFX0NVUiA9IDA7CiAgY29uc3QgV0FTSV9XSEVOQ0VfRU5EID0gMTsKICBjb25zdCBXQVNJX1dIRU5DRV9TRVQgPSAyOwogIC8vIGh0dHA6Ly9tYW43Lm9yZy9saW51eC9tYW4tcGFnZXMvbWFuMy9lcnJuby4zLmh0bWwKICBjb25zdCBFUlJPUl9NQVAgPSB7CiAgICAgIEUyQklHOiBXQVNJX0UyQklHLAogICAgICBFQUNDRVM6IFdBU0lfRUFDQ0VTLAogICAgICBFQUREUklOVVNFOiBXQVNJX0VBRERSSU5VU0UsCiAgICAgIEVBRERSTk9UQVZBSUw6IFdBU0lfRUFERFJOT1RBVkFJTCwKICAgICAgRUFGTk9TVVBQT1JUOiBXQVNJX0VBRk5PU1VQUE9SVCwKICAgICAgRUFMUkVBRFk6IFdBU0lfRUFMUkVBRFksCiAgICAgIEVBR0FJTjogV0FTSV9FQUdBSU4sCiAgICAgIC8vIEVCQURFOiBXQVNJX0VCQURFLAogICAgICBFQkFERjogV0FTSV9FQkFERiwKICAgICAgLy8gRUJBREZEOiBXQVNJX0VCQURGRCwKICAgICAgRUJBRE1TRzogV0FTSV9FQkFETVNHLAogICAgICAvLyBFQkFEUjogV0FTSV9FQkFEUiwKICAgICAgLy8gRUJBRFJRQzogV0FTSV9FQkFEUlFDLAogICAgICAvLyBFQkFEU0xUOiBXQVNJX0VCQURTTFQsCiAgICAgIEVCVVNZOiBXQVNJX0VCVVNZLAogICAgICBFQ0FOQ0VMRUQ6IFdBU0lfRUNBTkNFTEVELAogICAgICBFQ0hJTEQ6IFdBU0lfRUNISUxELAogICAgICAvLyBFQ0hSTkc6IFdBU0lfRUNIUk5HLAogICAgICAvLyBFQ09NTTogV0FTSV9FQ09NTSwKICAgICAgRUNPTk5BQk9SVEVEOiBXQVNJX0VDT05OQUJPUlRFRCwKICAgICAgRUNPTk5SRUZVU0VEOiBXQVNJX0VDT05OUkVGVVNFRCwKICAgICAgRUNPTk5SRVNFVDogV0FTSV9FQ09OTlJFU0VULAogICAgICBFREVBRExPQ0s6IFdBU0lfRURFQURMSywKICAgICAgRURFU1RBRERSUkVROiBXQVNJX0VERVNUQUREUlJFUSwKICAgICAgRURPTTogV0FTSV9FRE9NLAogICAgICBFRFFVT1Q6IFdBU0lfRURRVU9ULAogICAgICBFRVhJU1Q6IFdBU0lfRUVYSVNULAogICAgICBFRkFVTFQ6IFdBU0lfRUZBVUxULAogICAgICBFRkJJRzogV0FTSV9FRkJJRywKICAgICAgRUhPU1RET1dOOiBXQVNJX0VIT1NUVU5SRUFDSCwKICAgICAgRUhPU1RVTlJFQUNIOiBXQVNJX0VIT1NUVU5SRUFDSCwKICAgICAgLy8gRUhXUE9JU09OOiBXQVNJX0VIV1BPSVNPTiwKICAgICAgRUlEUk06IFdBU0lfRUlEUk0sCiAgICAgIEVJTFNFUTogV0FTSV9FSUxTRVEsCiAgICAgIEVJTlBST0dSRVNTOiBXQVNJX0VJTlBST0dSRVNTLAogICAgICBFSU5UUjogV0FTSV9FSU5UUiwKICAgICAgRUlOVkFMOiBXQVNJX0VJTlZBTCwKICAgICAgRUlPOiBXQVNJX0VJTywKICAgICAgRUlTQ09OTjogV0FTSV9FSVNDT05OLAogICAgICBFSVNESVI6IFdBU0lfRUlTRElSLAogICAgICBFTE9PUDogV0FTSV9FTE9PUCwKICAgICAgRU1GSUxFOiBXQVNJX0VNRklMRSwKICAgICAgRU1MSU5LOiBXQVNJX0VNTElOSywKICAgICAgRU1TR1NJWkU6IFdBU0lfRU1TR1NJWkUsCiAgICAgIEVNVUxUSUhPUDogV0FTSV9FTVVMVElIT1AsCiAgICAgIEVOQU1FVE9PTE9ORzogV0FTSV9FTkFNRVRPT0xPTkcsCiAgICAgIEVORVRET1dOOiBXQVNJX0VORVRET1dOLAogICAgICBFTkVUUkVTRVQ6IFdBU0lfRU5FVFJFU0VULAogICAgICBFTkVUVU5SRUFDSDogV0FTSV9FTkVUVU5SRUFDSCwKICAgICAgRU5GSUxFOiBXQVNJX0VORklMRSwKICAgICAgRU5PQlVGUzogV0FTSV9FTk9CVUZTLAogICAgICBFTk9ERVY6IFdBU0lfRU5PREVWLAogICAgICBFTk9FTlQ6IFdBU0lfRU5PRU5ULAogICAgICBFTk9FWEVDOiBXQVNJX0VOT0VYRUMsCiAgICAgIEVOT0xDSzogV0FTSV9FTk9MQ0ssCiAgICAgIEVOT0xJTks6IFdBU0lfRU5PTElOSywKICAgICAgRU5PTUVNOiBXQVNJX0VOT01FTSwKICAgICAgRU5PTVNHOiBXQVNJX0VOT01TRywKICAgICAgRU5PUFJPVE9PUFQ6IFdBU0lfRU5PUFJPVE9PUFQsCiAgICAgIEVOT1NQQzogV0FTSV9FTk9TUEMsCiAgICAgIEVOT1NZUzogV0FTSV9FTk9TWVMsCiAgICAgIEVOT1RDT05OOiBXQVNJX0VOT1RDT05OLAogICAgICBFTk9URElSOiBXQVNJX0VOT1RESVIsCiAgICAgIEVOT1RFTVBUWTogV0FTSV9FTk9URU1QVFksCiAgICAgIEVOT1RSRUNPVkVSQUJMRTogV0FTSV9FTk9UUkVDT1ZFUkFCTEUsCiAgICAgIEVOT1RTT0NLOiBXQVNJX0VOT1RTT0NLLAogICAgICBFTk9UVFk6IFdBU0lfRU5PVFRZLAogICAgICBFTlhJTzogV0FTSV9FTlhJTywKICAgICAgRU9WRVJGTE9XOiBXQVNJX0VPVkVSRkxPVywKICAgICAgRU9XTkVSREVBRDogV0FTSV9FT1dORVJERUFELAogICAgICBFUEVSTTogV0FTSV9FUEVSTSwKICAgICAgRVBJUEU6IFdBU0lfRVBJUEUsCiAgICAgIEVQUk9UTzogV0FTSV9FUFJPVE8sCiAgICAgIEVQUk9UT05PU1VQUE9SVDogV0FTSV9FUFJPVE9OT1NVUFBPUlQsCiAgICAgIEVQUk9UT1RZUEU6IFdBU0lfRVBST1RPVFlQRSwKICAgICAgRVJBTkdFOiBXQVNJX0VSQU5HRSwKICAgICAgRVJPRlM6IFdBU0lfRVJPRlMsCiAgICAgIEVTUElQRTogV0FTSV9FU1BJUEUsCiAgICAgIEVTUkNIOiBXQVNJX0VTUkNILAogICAgICBFU1RBTEU6IFdBU0lfRVNUQUxFLAogICAgICBFVElNRURPVVQ6IFdBU0lfRVRJTUVET1VULAogICAgICBFVFhUQlNZOiBXQVNJX0VUWFRCU1ksCiAgICAgIEVYREVWOiBXQVNJX0VYREVWLAogIH07CiAgY29uc3QgU0lHTkFMX01BUCA9IHsKICAgICAgW1dBU0lfU0lHSFVQXTogIlNJR0hVUCIsCiAgICAgIFtXQVNJX1NJR0lOVF06ICJTSUdJTlQiLAogICAgICBbV0FTSV9TSUdRVUlUXTogIlNJR1FVSVQiLAogICAgICBbV0FTSV9TSUdJTExdOiAiU0lHSUxMIiwKICAgICAgW1dBU0lfU0lHVFJBUF06ICJTSUdUUkFQIiwKICAgICAgW1dBU0lfU0lHQUJSVF06ICJTSUdBQlJUIiwKICAgICAgW1dBU0lfU0lHQlVTXTogIlNJR0JVUyIsCiAgICAgIFtXQVNJX1NJR0ZQRV06ICJTSUdGUEUiLAogICAgICBbV0FTSV9TSUdLSUxMXTogIlNJR0tJTEwiLAogICAgICBbV0FTSV9TSUdVU1IxXTogIlNJR1VTUjEiLAogICAgICBbV0FTSV9TSUdTRUdWXTogIlNJR1NFR1YiLAogICAgICBbV0FTSV9TSUdVU1IyXTogIlNJR1VTUjIiLAogICAgICBbV0FTSV9TSUdQSVBFXTogIlNJR1BJUEUiLAogICAgICBbV0FTSV9TSUdBTFJNXTogIlNJR0FMUk0iLAogICAgICBbV0FTSV9TSUdURVJNXTogIlNJR1RFUk0iLAogICAgICBbV0FTSV9TSUdDSExEXTogIlNJR0NITEQiLAogICAgICBbV0FTSV9TSUdDT05UXTogIlNJR0NPTlQiLAogICAgICBbV0FTSV9TSUdTVE9QXTogIlNJR1NUT1AiLAogICAgICBbV0FTSV9TSUdUU1RQXTogIlNJR1RTVFAiLAogICAgICBbV0FTSV9TSUdUVElOXTogIlNJR1RUSU4iLAogICAgICBbV0FTSV9TSUdUVE9VXTogIlNJR1RUT1UiLAogICAgICBbV0FTSV9TSUdVUkddOiAiU0lHVVJHIiwKICAgICAgW1dBU0lfU0lHWENQVV06ICJTSUdYQ1BVIiwKICAgICAgW1dBU0lfU0lHWEZTWl06ICJTSUdYRlNaIiwKICAgICAgW1dBU0lfU0lHVlRBTFJNXTogIlNJR1ZUQUxSTSIsCiAgfTsKCiAgY29uc3QgU1RESU5fREVGQVVMVF9SSUdIVFMgPSBXQVNJX1JJR0hUX0ZEX0RBVEFTWU5DIHwKICAgICAgV0FTSV9SSUdIVF9GRF9SRUFEIHwKICAgICAgV0FTSV9SSUdIVF9GRF9TWU5DIHwKICAgICAgV0FTSV9SSUdIVF9GRF9BRFZJU0UgfAogICAgICBXQVNJX1JJR0hUX0ZEX0ZJTEVTVEFUX0dFVCB8CiAgICAgIFdBU0lfUklHSFRfUE9MTF9GRF9SRUFEV1JJVEU7CiAgY29uc3QgU1RET1VUX0RFRkFVTFRfUklHSFRTID0gV0FTSV9SSUdIVF9GRF9EQVRBU1lOQyB8CiAgICAgIFdBU0lfUklHSFRfRkRfV1JJVEUgfAogICAgICBXQVNJX1JJR0hUX0ZEX1NZTkMgfAogICAgICBXQVNJX1JJR0hUX0ZEX0FEVklTRSB8CiAgICAgIFdBU0lfUklHSFRfRkRfRklMRVNUQVRfR0VUIHwKICAgICAgV0FTSV9SSUdIVF9QT0xMX0ZEX1JFQURXUklURTsKICBjb25zdCBTVERFUlJfREVGQVVMVF9SSUdIVFMgPSBTVERPVVRfREVGQVVMVF9SSUdIVFM7CiAgY29uc3QgbXNUb05zID0gKG1zKSA9PiB7CiAgICAgIGNvbnN0IG1zSW50ID0gTWF0aC50cnVuYyhtcyk7CiAgICAgIGNvbnN0IGRlY2ltYWwgPSBCaWdJbnRQb2x5ZmlsbChNYXRoLnJvdW5kKChtcyAtIG1zSW50KSAqIDEwMDApKTsKICAgICAgY29uc3QgbnMgPSBCaWdJbnRQb2x5ZmlsbChtc0ludCkgKiBCaWdJbnRQb2x5ZmlsbCgxMDAwKTsKICAgICAgcmV0dXJuIG5zICsgZGVjaW1hbDsKICB9OwogIGNvbnN0IHdyYXAgPSAoZikgPT4gKC4uLmFyZ3MpID0+IHsKICAgICAgdHJ5IHsKICAgICAgICAgIHJldHVybiBmKC4uLmFyZ3MpOwogICAgICB9CiAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICBjb25zdCBlcnJvciA9IGU7CiAgICAgICAgICAvLyBJZiBpdCdzIGFuIGVycm9yIGZyb20gdGhlIGZzCiAgICAgICAgICBpZiAoZXJyb3IgJiYgZXJyb3IuY29kZSAmJiB0eXBlb2YgZXJyb3IuY29kZSA9PT0gInN0cmluZyIpIHsKICAgICAgICAgICAgICByZXR1cm4gRVJST1JfTUFQW2Vycm9yLmNvZGVdIHx8IFdBU0lfRUlOVkFMOwogICAgICAgICAgfQogICAgICAgICAgLy8gSWYgaXQncyBhIFdBU0kgZXJyb3IsIHdlIHJldHVybiBpdCBkaXJlY3RseQogICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBXQVNJRXJyb3IpIHsKICAgICAgICAgICAgICByZXR1cm4gZS5lcnJubzsKICAgICAgICAgIH0KICAgICAgICAgIC8vIE90aGVyd2lzZSB3ZSBsZXQgdGhlIGVycm9yIGJ1YmJsZSB1cAogICAgICAgICAgdGhyb3cgZTsKICAgICAgfQogIH07CiAgY29uc3Qgc3RhdCA9ICh3YXNpLCBmZCkgPT4gewogICAgICBjb25zdCBlbnRyeSA9IHdhc2kuRkRfTUFQLmdldChmZCk7CiAgICAgIGlmICghZW50cnkpIHsKICAgICAgICAgIHRocm93IG5ldyBXQVNJRXJyb3IoV0FTSV9FQkFERik7CiAgICAgIH0KICAgICAgaWYgKGVudHJ5LmZpbGV0eXBlID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgIGNvbnN0IHN0YXRzID0gd2FzaS5iaW5kaW5ncy5mcy5mc3RhdFN5bmMoZW50cnkucmVhbCk7CiAgICAgICAgICBjb25zdCB7IGZpbGV0eXBlLCByaWdodHNCYXNlLCByaWdodHNJbmhlcml0aW5nIH0gPSB0cmFuc2xhdGVGaWxlQXR0cmlidXRlcyh3YXNpLCBmZCwgc3RhdHMpOwogICAgICAgICAgZW50cnkuZmlsZXR5cGUgPSBmaWxldHlwZTsKICAgICAgICAgIGlmICghZW50cnkucmlnaHRzKSB7CiAgICAgICAgICAgICAgZW50cnkucmlnaHRzID0gewogICAgICAgICAgICAgICAgICBiYXNlOiByaWdodHNCYXNlLAogICAgICAgICAgICAgICAgICBpbmhlcml0aW5nOiByaWdodHNJbmhlcml0aW5nLAogICAgICAgICAgICAgIH07CiAgICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIGVudHJ5OwogIH07CiAgY29uc3QgdHJhbnNsYXRlRmlsZUF0dHJpYnV0ZXMgPSAod2FzaSwgZmQsIHN0YXRzKSA9PiB7CiAgICAgIHN3aXRjaCAodHJ1ZSkgewogICAgICAgICAgY2FzZSBzdGF0cy5pc0Jsb2NrRGV2aWNlKCk6CiAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgZmlsZXR5cGU6IFdBU0lfRklMRVRZUEVfQkxPQ0tfREVWSUNFLAogICAgICAgICAgICAgICAgICByaWdodHNCYXNlOiBSSUdIVFNfQkxPQ0tfREVWSUNFX0JBU0UsCiAgICAgICAgICAgICAgICAgIHJpZ2h0c0luaGVyaXRpbmc6IFJJR0hUU19CTE9DS19ERVZJQ0VfSU5IRVJJVElORywKICAgICAgICAgICAgICB9OwogICAgICAgICAgY2FzZSBzdGF0cy5pc0NoYXJhY3RlckRldmljZSgpOiB7CiAgICAgICAgICAgICAgY29uc3QgZmlsZXR5cGUgPSBXQVNJX0ZJTEVUWVBFX0NIQVJBQ1RFUl9ERVZJQ0U7CiAgICAgICAgICAgICAgaWYgKGZkICE9PSB1bmRlZmluZWQgJiYgd2FzaS5iaW5kaW5ncy5pc1RUWShmZCkpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgIGZpbGV0eXBlLAogICAgICAgICAgICAgICAgICAgICAgcmlnaHRzQmFzZTogUklHSFRTX1RUWV9CQVNFLAogICAgICAgICAgICAgICAgICAgICAgcmlnaHRzSW5oZXJpdGluZzogUklHSFRTX1RUWV9JTkhFUklUSU5HLAogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICBmaWxldHlwZSwKICAgICAgICAgICAgICAgICAgcmlnaHRzQmFzZTogUklHSFRTX0NIQVJBQ1RFUl9ERVZJQ0VfQkFTRSwKICAgICAgICAgICAgICAgICAgcmlnaHRzSW5oZXJpdGluZzogUklHSFRTX0NIQVJBQ1RFUl9ERVZJQ0VfSU5IRVJJVElORywKICAgICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgY2FzZSBzdGF0cy5pc0RpcmVjdG9yeSgpOgogICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgIGZpbGV0eXBlOiBXQVNJX0ZJTEVUWVBFX0RJUkVDVE9SWSwKICAgICAgICAgICAgICAgICAgcmlnaHRzQmFzZTogUklHSFRTX0RJUkVDVE9SWV9CQVNFLAogICAgICAgICAgICAgICAgICByaWdodHNJbmhlcml0aW5nOiBSSUdIVFNfRElSRUNUT1JZX0lOSEVSSVRJTkcsCiAgICAgICAgICAgICAgfTsKICAgICAgICAgIGNhc2Ugc3RhdHMuaXNGSUZPKCk6CiAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgZmlsZXR5cGU6IFdBU0lfRklMRVRZUEVfU09DS0VUX1NUUkVBTSwKICAgICAgICAgICAgICAgICAgcmlnaHRzQmFzZTogUklHSFRTX1NPQ0tFVF9CQVNFLAogICAgICAgICAgICAgICAgICByaWdodHNJbmhlcml0aW5nOiBSSUdIVFNfU09DS0VUX0lOSEVSSVRJTkcsCiAgICAgICAgICAgICAgfTsKICAgICAgICAgIGNhc2Ugc3RhdHMuaXNGaWxlKCk6CiAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgZmlsZXR5cGU6IFdBU0lfRklMRVRZUEVfUkVHVUxBUl9GSUxFLAogICAgICAgICAgICAgICAgICByaWdodHNCYXNlOiBSSUdIVFNfUkVHVUxBUl9GSUxFX0JBU0UsCiAgICAgICAgICAgICAgICAgIHJpZ2h0c0luaGVyaXRpbmc6IFJJR0hUU19SRUdVTEFSX0ZJTEVfSU5IRVJJVElORywKICAgICAgICAgICAgICB9OwogICAgICAgICAgY2FzZSBzdGF0cy5pc1NvY2tldCgpOgogICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgIGZpbGV0eXBlOiBXQVNJX0ZJTEVUWVBFX1NPQ0tFVF9TVFJFQU0sCiAgICAgICAgICAgICAgICAgIHJpZ2h0c0Jhc2U6IFJJR0hUU19TT0NLRVRfQkFTRSwKICAgICAgICAgICAgICAgICAgcmlnaHRzSW5oZXJpdGluZzogUklHSFRTX1NPQ0tFVF9JTkhFUklUSU5HLAogICAgICAgICAgICAgIH07CiAgICAgICAgICBjYXNlIHN0YXRzLmlzU3ltYm9saWNMaW5rKCk6CiAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgZmlsZXR5cGU6IFdBU0lfRklMRVRZUEVfU1lNQk9MSUNfTElOSywKICAgICAgICAgICAgICAgICAgcmlnaHRzQmFzZTogQmlnSW50UG9seWZpbGwoMCksCiAgICAgICAgICAgICAgICAgIHJpZ2h0c0luaGVyaXRpbmc6IEJpZ0ludFBvbHlmaWxsKDApLAogICAgICAgICAgICAgIH07CiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgIGZpbGV0eXBlOiBXQVNJX0ZJTEVUWVBFX1VOS05PV04sCiAgICAgICAgICAgICAgICAgIHJpZ2h0c0Jhc2U6IEJpZ0ludFBvbHlmaWxsKDApLAogICAgICAgICAgICAgICAgICByaWdodHNJbmhlcml0aW5nOiBCaWdJbnRQb2x5ZmlsbCgwKSwKICAgICAgICAgICAgICB9OwogICAgICB9CiAgfTsKICBjbGFzcyBXQVNJRGVmYXVsdCB7CiAgICAgIGNvbnN0cnVjdG9yKHdhc2lDb25maWcpIHsKICAgICAgICAgIC8vIERlc3RydWN0dXJlIG91ciB3YXNpQ29uZmlnCiAgICAgICAgICBsZXQgcHJlb3BlbnMgPSB7fTsKICAgICAgICAgIGlmICh3YXNpQ29uZmlnICYmIHdhc2lDb25maWcucHJlb3BlbnMpIHsKICAgICAgICAgICAgICBwcmVvcGVucyA9IHdhc2lDb25maWcucHJlb3BlbnM7CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIGlmICh3YXNpQ29uZmlnICYmIHdhc2lDb25maWcucHJlb3BlbkRpcmVjdG9yaWVzKSB7CiAgICAgICAgICAgICAgcHJlb3BlbnMgPSB3YXNpQ29uZmlnCiAgICAgICAgICAgICAgICAgIC5wcmVvcGVuRGlyZWN0b3JpZXM7CiAgICAgICAgICB9CiAgICAgICAgICBsZXQgZW52ID0ge307CiAgICAgICAgICBpZiAod2FzaUNvbmZpZyAmJiB3YXNpQ29uZmlnLmVudikgewogICAgICAgICAgICAgIGVudiA9IHdhc2lDb25maWcuZW52OwogICAgICAgICAgfQogICAgICAgICAgbGV0IGFyZ3MgPSBbXTsKICAgICAgICAgIGlmICh3YXNpQ29uZmlnICYmIHdhc2lDb25maWcuYXJncykgewogICAgICAgICAgICAgIGFyZ3MgPSB3YXNpQ29uZmlnLmFyZ3M7CiAgICAgICAgICB9CiAgICAgICAgICBsZXQgYmluZGluZ3MkMSA9IGJpbmRpbmdzOwogICAgICAgICAgaWYgKHdhc2lDb25maWcgJiYgd2FzaUNvbmZpZy5iaW5kaW5ncykgewogICAgICAgICAgICAgIGJpbmRpbmdzJDEgPSB3YXNpQ29uZmlnLmJpbmRpbmdzOwogICAgICAgICAgfQogICAgICAgICAgLy8gQHRzLWlnbm9yZQogICAgICAgICAgdGhpcy5tZW1vcnkgPSB1bmRlZmluZWQ7CiAgICAgICAgICAvLyBAdHMtaWdub3JlCiAgICAgICAgICB0aGlzLnZpZXcgPSB1bmRlZmluZWQ7CiAgICAgICAgICB0aGlzLmJpbmRpbmdzID0gYmluZGluZ3MkMTsKICAgICAgICAgIHRoaXMuRkRfTUFQID0gbmV3IE1hcChbCiAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICBXQVNJX1NURElOX0ZJTEVOTywKICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgcmVhbDogMCwKICAgICAgICAgICAgICAgICAgICAgIGZpbGV0eXBlOiBXQVNJX0ZJTEVUWVBFX0NIQVJBQ1RFUl9ERVZJQ0UsCiAgICAgICAgICAgICAgICAgICAgICAvLyBvZmZzZXQ6IEJpZ0ludCgwKSwKICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0czogewogICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2U6IFNURElOX0RFRkFVTFRfUklHSFRTLAogICAgICAgICAgICAgICAgICAgICAgICAgIGluaGVyaXRpbmc6IEJpZ0ludFBvbHlmaWxsKDApLAogICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IHVuZGVmaW5lZCwKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgV0FTSV9TVERPVVRfRklMRU5PLAogICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICByZWFsOiAxLAogICAgICAgICAgICAgICAgICAgICAgZmlsZXR5cGU6IFdBU0lfRklMRVRZUEVfQ0hBUkFDVEVSX0RFVklDRSwKICAgICAgICAgICAgICAgICAgICAgIC8vIG9mZnNldDogQmlnSW50KDApLAogICAgICAgICAgICAgICAgICAgICAgcmlnaHRzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZTogU1RET1VUX0RFRkFVTFRfUklHSFRTLAogICAgICAgICAgICAgICAgICAgICAgICAgIGluaGVyaXRpbmc6IEJpZ0ludFBvbHlmaWxsKDApLAogICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IHVuZGVmaW5lZCwKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgV0FTSV9TVERFUlJfRklMRU5PLAogICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICByZWFsOiAyLAogICAgICAgICAgICAgICAgICAgICAgZmlsZXR5cGU6IFdBU0lfRklMRVRZUEVfQ0hBUkFDVEVSX0RFVklDRSwKICAgICAgICAgICAgICAgICAgICAgIC8vIG9mZnNldDogQmlnSW50KDApLAogICAgICAgICAgICAgICAgICAgICAgcmlnaHRzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZTogU1RERVJSX0RFRkFVTFRfUklHSFRTLAogICAgICAgICAgICAgICAgICAgICAgICAgIGluaGVyaXRpbmc6IEJpZ0ludFBvbHlmaWxsKDApLAogICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IHVuZGVmaW5lZCwKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBdLAogICAgICAgICAgXSk7CiAgICAgICAgICBsZXQgZnMgPSB0aGlzLmJpbmRpbmdzLmZzOwogICAgICAgICAgbGV0IHBhdGgkMSA9IHRoaXMuYmluZGluZ3MucGF0aDsKICAgICAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKHByZW9wZW5zKSkgewogICAgICAgICAgICAgIGNvbnN0IHJlYWwgPSBmcy5vcGVuU3luYyh2LCBmcy5jb25zdGFudHMuT19SRE9OTFkpOwogICAgICAgICAgICAgIGNvbnN0IG5ld2ZkID0gWy4uLnRoaXMuRkRfTUFQLmtleXMoKV0ucmV2ZXJzZSgpWzBdICsgMTsKICAgICAgICAgICAgICB0aGlzLkZEX01BUC5zZXQobmV3ZmQsIHsKICAgICAgICAgICAgICAgICAgcmVhbCwKICAgICAgICAgICAgICAgICAgZmlsZXR5cGU6IFdBU0lfRklMRVRZUEVfRElSRUNUT1JZLAogICAgICAgICAgICAgICAgICAvLyBvZmZzZXQ6IEJpZ0ludCgwKSwKICAgICAgICAgICAgICAgICAgcmlnaHRzOiB7CiAgICAgICAgICAgICAgICAgICAgICBiYXNlOiBSSUdIVFNfRElSRUNUT1JZX0JBU0UsCiAgICAgICAgICAgICAgICAgICAgICBpbmhlcml0aW5nOiBSSUdIVFNfRElSRUNUT1JZX0lOSEVSSVRJTkcsCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGZha2VQYXRoOiBrLAogICAgICAgICAgICAgICAgICBwYXRoOiB2LAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgY29uc3QgZ2V0aW92cyA9IChpb3ZzLCBpb3ZzTGVuKSA9PiB7CiAgICAgICAgICAgICAgLy8gaW92cyogLT4gW2lvdiwgaW92LCAuLi5dCiAgICAgICAgICAgICAgLy8gX193YXNpX2Npb3ZlY190IHsKICAgICAgICAgICAgICAvLyAgIHZvaWQqIGJ1ZiwKICAgICAgICAgICAgICAvLyAgIHNpemVfdCBidWZfbGVuLAogICAgICAgICAgICAgIC8vIH0KICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hNZW1vcnkoKTsKICAgICAgICAgICAgICBjb25zdCBidWZmZXJzID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogaW92c0xlbiB9LCAoXywgaSkgPT4gewogICAgICAgICAgICAgICAgICBjb25zdCBwdHIgPSBpb3ZzICsgaSAqIDg7CiAgICAgICAgICAgICAgICAgIGNvbnN0IGJ1ZiA9IHRoaXMudmlldy5nZXRVaW50MzIocHRyLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgY29uc3QgYnVmTGVuID0gdGhpcy52aWV3LmdldFVpbnQzMihwdHIgKyA0LCB0cnVlKTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KHRoaXMubWVtb3J5LmJ1ZmZlciwgYnVmLCBidWZMZW4pOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIHJldHVybiBidWZmZXJzOwogICAgICAgICAgfTsKICAgICAgICAgIGNvbnN0IENIRUNLX0ZEID0gKGZkLCByaWdodHMpID0+IHsKICAgICAgICAgICAgICBjb25zdCBzdGF0cyA9IHN0YXQodGhpcywgZmQpOwogICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGBDSEVDS19GRDogc3RhdHMucmVhbDogJHtzdGF0cy5yZWFsfSwgc3RhdHMucGF0aDpgLCBzdGF0cy5wYXRoKTsKICAgICAgICAgICAgICBpZiAocmlnaHRzICE9PSBCaWdJbnRQb2x5ZmlsbCgwKSAmJiAoc3RhdHMucmlnaHRzLmJhc2UgJiByaWdodHMpID09PSBCaWdJbnRQb2x5ZmlsbCgwKSkgewogICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgV0FTSUVycm9yKFdBU0lfRVBFUk0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZXR1cm4gc3RhdHM7CiAgICAgICAgICB9OwogICAgICAgICAgY29uc3QgQ1BVVElNRV9TVEFSVCA9IGJpbmRpbmdzJDEuaHJ0aW1lKCk7CiAgICAgICAgICBjb25zdCBub3cgPSAoY2xvY2tJZCkgPT4gewogICAgICAgICAgICAgIHN3aXRjaCAoY2xvY2tJZCkgewogICAgICAgICAgICAgICAgICBjYXNlIFdBU0lfQ0xPQ0tfTU9OT1RPTklDOgogICAgICAgICAgICAgICAgICBjYXNlIFdBU0lfQ0xPQ0tfUkVBTFRJTUU6CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYmluZGluZ3MkMS5ocnRpbWUoKTsKICAgICAgICAgICAgICAgICAgY2FzZSBXQVNJX0NMT0NLX1BST0NFU1NfQ1BVVElNRV9JRDoKICAgICAgICAgICAgICAgICAgY2FzZSBXQVNJX0NMT0NLX1RIUkVBRF9DUFVUSU1FX0lEOgogICAgICAgICAgICAgICAgICAgICAgLy8gcmV0dXJuIGJpbmRpbmdzLmhydGltZShDUFVUSU1FX1NUQVJUKQogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJpbmRpbmdzJDEuaHJ0aW1lKCkgLSBDUFVUSU1FX1NUQVJUOwogICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfTsKICAgICAgICAgIHRoaXMud2FzaUltcG9ydCA9IHsKICAgICAgICAgICAgICBhcmdzX2dldDogKGFyZ3YsIGFyZ3ZCdWYpID0+IHsKICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoTWVtb3J5KCk7CiAgICAgICAgICAgICAgICAgIGxldCBjb2Zmc2V0ID0gYXJndjsKICAgICAgICAgICAgICAgICAgbGV0IG9mZnNldCA9IGFyZ3ZCdWY7CiAgICAgICAgICAgICAgICAgIGFyZ3MuZm9yRWFjaCgoYSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgdGhpcy52aWV3LnNldFVpbnQzMihjb2Zmc2V0LCBvZmZzZXQsIHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgY29mZnNldCArPSA0OwogICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IGJ1ZmZlciQyLkJ1ZmZlci5mcm9tKHRoaXMubWVtb3J5LmJ1ZmZlcikud3JpdGUoYCR7YX1cMGAsIG9mZnNldCk7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICByZXR1cm4gV0FTSV9FU1VDQ0VTUzsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGFyZ3Nfc2l6ZXNfZ2V0OiAoYXJnYywgYXJndkJ1ZlNpemUpID0+IHsKICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoTWVtb3J5KCk7CiAgICAgICAgICAgICAgICAgIHRoaXMudmlldy5zZXRVaW50MzIoYXJnYywgYXJncy5sZW5ndGgsIHRydWUpOwogICAgICAgICAgICAgICAgICBjb25zdCBzaXplID0gYXJncy5yZWR1Y2UoKGFjYywgYSkgPT4gYWNjICsgYnVmZmVyJDIuQnVmZmVyLmJ5dGVMZW5ndGgoYSkgKyAxLCAwKTsKICAgICAgICAgICAgICAgICAgdGhpcy52aWV3LnNldFVpbnQzMihhcmd2QnVmU2l6ZSwgc2l6ZSwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgIHJldHVybiBXQVNJX0VTVUNDRVNTOwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgZW52aXJvbl9nZXQ6IChlbnZpcm9uLCBlbnZpcm9uQnVmKSA9PiB7CiAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaE1lbW9yeSgpOwogICAgICAgICAgICAgICAgICBsZXQgY29mZnNldCA9IGVudmlyb247CiAgICAgICAgICAgICAgICAgIGxldCBvZmZzZXQgPSBlbnZpcm9uQnVmOwogICAgICAgICAgICAgICAgICBPYmplY3QuZW50cmllcyhlbnYpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgdGhpcy52aWV3LnNldFVpbnQzMihjb2Zmc2V0LCBvZmZzZXQsIHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgY29mZnNldCArPSA0OwogICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IGJ1ZmZlciQyLkJ1ZmZlci5mcm9tKHRoaXMubWVtb3J5LmJ1ZmZlcikud3JpdGUoYCR7a2V5fT0ke3ZhbHVlfVwwYCwgb2Zmc2V0KTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIHJldHVybiBXQVNJX0VTVUNDRVNTOwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgZW52aXJvbl9zaXplc19nZXQ6IChlbnZpcm9uQ291bnQsIGVudmlyb25CdWZTaXplKSA9PiB7CiAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaE1lbW9yeSgpOwogICAgICAgICAgICAgICAgICBjb25zdCBlbnZQcm9jZXNzZWQgPSBPYmplY3QuZW50cmllcyhlbnYpLm1hcCgoW2tleSwgdmFsdWVdKSA9PiBgJHtrZXl9PSR7dmFsdWV9XDBgKTsKICAgICAgICAgICAgICAgICAgY29uc3Qgc2l6ZSA9IGVudlByb2Nlc3NlZC5yZWR1Y2UoKGFjYywgZSkgPT4gYWNjICsgYnVmZmVyJDIuQnVmZmVyLmJ5dGVMZW5ndGgoZSksIDApOwogICAgICAgICAgICAgICAgICB0aGlzLnZpZXcuc2V0VWludDMyKGVudmlyb25Db3VudCwgZW52UHJvY2Vzc2VkLmxlbmd0aCwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgIHRoaXMudmlldy5zZXRVaW50MzIoZW52aXJvbkJ1ZlNpemUsIHNpemUsIHRydWUpOwogICAgICAgICAgICAgICAgICByZXR1cm4gV0FTSV9FU1VDQ0VTUzsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGNsb2NrX3Jlc19nZXQ6IChjbG9ja0lkLCByZXNvbHV0aW9uKSA9PiB7CiAgICAgICAgICAgICAgICAgIHRoaXMudmlldy5zZXRCaWdVaW50NjQocmVzb2x1dGlvbiwgQmlnSW50UG9seWZpbGwoMCkpOwogICAgICAgICAgICAgICAgICByZXR1cm4gV0FTSV9FU1VDQ0VTUzsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGNsb2NrX3RpbWVfZ2V0OiAoY2xvY2tJZCwgcHJlY2lzaW9uLCB0aW1lKSA9PiB7CiAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaE1lbW9yeSgpOwogICAgICAgICAgICAgICAgICBjb25zdCBuID0gbm93KGNsb2NrSWQpOwogICAgICAgICAgICAgICAgICBpZiAobiA9PT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFdBU0lfRUlOVkFMOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHRoaXMudmlldy5zZXRCaWdVaW50NjQodGltZSwgQmlnSW50UG9seWZpbGwobiksIHRydWUpOwogICAgICAgICAgICAgICAgICByZXR1cm4gV0FTSV9FU1VDQ0VTUzsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGZkX2FkdmlzZTogd3JhcCgoZmQsIG9mZnNldCwgbGVuLCBhZHZpY2UpID0+IHsKICAgICAgICAgICAgICAgICAgQ0hFQ0tfRkQoZmQsIFdBU0lfUklHSFRfRkRfQURWSVNFKTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIFdBU0lfRU5PU1lTOwogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgIGZkX2FsbG9jYXRlOiB3cmFwKChmZCwgb2Zmc2V0LCBsZW4pID0+IHsKICAgICAgICAgICAgICAgICAgQ0hFQ0tfRkQoZmQsIFdBU0lfUklHSFRfRkRfQUxMT0NBVEUpOwogICAgICAgICAgICAgICAgICByZXR1cm4gV0FTSV9FTk9TWVM7CiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgZmRfY2xvc2U6IHdyYXAoKGZkKSA9PiB7CiAgICAgICAgICAgICAgICAgIGNvbnN0IHN0YXRzID0gQ0hFQ0tfRkQoZmQsIEJpZ0ludFBvbHlmaWxsKDApKTsKICAgICAgICAgICAgICAgICAgZnMuY2xvc2VTeW5jKHN0YXRzLnJlYWwpOwogICAgICAgICAgICAgICAgICB0aGlzLkZEX01BUC5kZWxldGUoZmQpOwogICAgICAgICAgICAgICAgICByZXR1cm4gV0FTSV9FU1VDQ0VTUzsKICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICBmZF9kYXRhc3luYzogKGZkKSA9PiB7CiAgICAgICAgICAgICAgICAgIGNvbnN0IHN0YXRzID0gQ0hFQ0tfRkQoZmQsIFdBU0lfUklHSFRfRkRfREFUQVNZTkMpOwogICAgICAgICAgICAgICAgICBmcy5mZGF0YXN5bmNTeW5jKHN0YXRzLnJlYWwpOwogICAgICAgICAgICAgICAgICByZXR1cm4gV0FTSV9FU1VDQ0VTUzsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGZkX2Zkc3RhdF9nZXQ6IHdyYXAoKGZkLCBidWZQdHIpID0+IHsKICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhdHMgPSBDSEVDS19GRChmZCwgQmlnSW50UG9seWZpbGwoMCkpOwogICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hNZW1vcnkoKTsKICAgICAgICAgICAgICAgICAgdGhpcy52aWV3LnNldFVpbnQ4KGJ1ZlB0ciwgc3RhdHMuZmlsZXR5cGUpOyAvLyBGSUxFVFlQRSB1OAogICAgICAgICAgICAgICAgICB0aGlzLnZpZXcuc2V0VWludDE2KGJ1ZlB0ciArIDIsIDAsIHRydWUpOyAvLyBGREZMQUcgdTE2CiAgICAgICAgICAgICAgICAgIHRoaXMudmlldy5zZXRVaW50MTYoYnVmUHRyICsgNCwgMCwgdHJ1ZSk7IC8vIEZERkxBRyB1MTYKICAgICAgICAgICAgICAgICAgdGhpcy52aWV3LnNldEJpZ1VpbnQ2NChidWZQdHIgKyA4LCBCaWdJbnRQb2x5ZmlsbChzdGF0cy5yaWdodHMuYmFzZSksIHRydWUpOyAvLyB1NjQKICAgICAgICAgICAgICAgICAgdGhpcy52aWV3LnNldEJpZ1VpbnQ2NChidWZQdHIgKyA4ICsgOCwgQmlnSW50UG9seWZpbGwoc3RhdHMucmlnaHRzLmluaGVyaXRpbmcpLCB0cnVlKTsgLy8gdTY0CiAgICAgICAgICAgICAgICAgIHJldHVybiBXQVNJX0VTVUNDRVNTOwogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgIGZkX2Zkc3RhdF9zZXRfZmxhZ3M6IHdyYXAoKGZkLCBmbGFncykgPT4gewogICAgICAgICAgICAgICAgICBDSEVDS19GRChmZCwgV0FTSV9SSUdIVF9GRF9GRFNUQVRfU0VUX0ZMQUdTKTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIFdBU0lfRU5PU1lTOwogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgIGZkX2Zkc3RhdF9zZXRfcmlnaHRzOiB3cmFwKChmZCwgZnNSaWdodHNCYXNlLCBmc1JpZ2h0c0luaGVyaXRpbmcpID0+IHsKICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhdHMgPSBDSEVDS19GRChmZCwgQmlnSW50UG9seWZpbGwoMCkpOwogICAgICAgICAgICAgICAgICBjb25zdCBucmIgPSBzdGF0cy5yaWdodHMuYmFzZSB8IGZzUmlnaHRzQmFzZTsKICAgICAgICAgICAgICAgICAgaWYgKG5yYiA+IHN0YXRzLnJpZ2h0cy5iYXNlKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gV0FTSV9FUEVSTTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBjb25zdCBucmkgPSBzdGF0cy5yaWdodHMuaW5oZXJpdGluZyB8IGZzUmlnaHRzSW5oZXJpdGluZzsKICAgICAgICAgICAgICAgICAgaWYgKG5yaSA+IHN0YXRzLnJpZ2h0cy5pbmhlcml0aW5nKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gV0FTSV9FUEVSTTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBzdGF0cy5yaWdodHMuYmFzZSA9IG5yYjsKICAgICAgICAgICAgICAgICAgc3RhdHMucmlnaHRzLmluaGVyaXRpbmcgPSBucmk7CiAgICAgICAgICAgICAgICAgIHJldHVybiBXQVNJX0VTVUNDRVNTOwogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgIGZkX2ZpbGVzdGF0X2dldDogd3JhcCgoZmQsIGJ1ZlB0cikgPT4gewogICAgICAgICAgICAgICAgICBjb25zdCBzdGF0cyA9IENIRUNLX0ZEKGZkLCBXQVNJX1JJR0hUX0ZEX0ZJTEVTVEFUX0dFVCk7CiAgICAgICAgICAgICAgICAgIGNvbnN0IHJzdGF0cyA9IGZzLmZzdGF0U3luYyhzdGF0cy5yZWFsKTsKICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoTWVtb3J5KCk7CiAgICAgICAgICAgICAgICAgIHRoaXMudmlldy5zZXRCaWdVaW50NjQoYnVmUHRyLCBCaWdJbnRQb2x5ZmlsbChyc3RhdHMuZGV2KSwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgIGJ1ZlB0ciArPSA4OwogICAgICAgICAgICAgICAgICB0aGlzLnZpZXcuc2V0QmlnVWludDY0KGJ1ZlB0ciwgQmlnSW50UG9seWZpbGwocnN0YXRzLmlubyksIHRydWUpOwogICAgICAgICAgICAgICAgICBidWZQdHIgKz0gODsKICAgICAgICAgICAgICAgICAgdGhpcy52aWV3LnNldFVpbnQ4KGJ1ZlB0ciwgc3RhdHMuZmlsZXR5cGUpOwogICAgICAgICAgICAgICAgICBidWZQdHIgKz0gNDsKICAgICAgICAgICAgICAgICAgdGhpcy52aWV3LnNldFVpbnQzMihidWZQdHIsIE51bWJlcihyc3RhdHMubmxpbmspLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgYnVmUHRyICs9IDQ7CiAgICAgICAgICAgICAgICAgIHRoaXMudmlldy5zZXRCaWdVaW50NjQoYnVmUHRyLCBCaWdJbnRQb2x5ZmlsbChyc3RhdHMuc2l6ZSksIHRydWUpOwogICAgICAgICAgICAgICAgICBidWZQdHIgKz0gODsKICAgICAgICAgICAgICAgICAgdGhpcy52aWV3LnNldEJpZ1VpbnQ2NChidWZQdHIsIG1zVG9Ocyhyc3RhdHMuYXRpbWVNcyksIHRydWUpOwogICAgICAgICAgICAgICAgICBidWZQdHIgKz0gODsKICAgICAgICAgICAgICAgICAgdGhpcy52aWV3LnNldEJpZ1VpbnQ2NChidWZQdHIsIG1zVG9Ocyhyc3RhdHMubXRpbWVNcyksIHRydWUpOwogICAgICAgICAgICAgICAgICBidWZQdHIgKz0gODsKICAgICAgICAgICAgICAgICAgdGhpcy52aWV3LnNldEJpZ1VpbnQ2NChidWZQdHIsIG1zVG9Ocyhyc3RhdHMuY3RpbWVNcyksIHRydWUpOwogICAgICAgICAgICAgICAgICBidWZQdHIgKz0gODsKICAgICAgICAgICAgICAgICAgcmV0dXJuIFdBU0lfRVNVQ0NFU1M7CiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgZmRfZmlsZXN0YXRfc2V0X3NpemU6IHdyYXAoKGZkLCBzdFNpemUpID0+IHsKICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhdHMgPSBDSEVDS19GRChmZCwgV0FTSV9SSUdIVF9GRF9GSUxFU1RBVF9TRVRfU0laRSk7CiAgICAgICAgICAgICAgICAgIGZzLmZ0cnVuY2F0ZShzdGF0cy5yZWFsLCBOdW1iZXIoc3RTaXplKSk7CiAgICAgICAgICAgICAgICAgIHJldHVybiBXQVNJX0VTVUNDRVNTOwogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgIGZkX2ZpbGVzdGF0X3NldF90aW1lczogd3JhcCgoZmQsIHN0QXRpbSwgc3RNdGltLCBmc3RmbGFncykgPT4gewogICAgICAgICAgICAgICAgICBjb25zdCBzdGF0cyA9IENIRUNLX0ZEKGZkLCBXQVNJX1JJR0hUX0ZEX0ZJTEVTVEFUX1NFVF9USU1FUyk7CiAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBub3coV0FTSV9DTE9DS19SRUFMVElNRSk7CiAgICAgICAgICAgICAgICAgIGNvbnN0IGF0aW1Ob3cgPSAoZnN0ZmxhZ3MgJiBXQVNJX0ZJTEVTVEFUX1NFVF9BVElNX05PVykgPT09CiAgICAgICAgICAgICAgICAgICAgICBXQVNJX0ZJTEVTVEFUX1NFVF9BVElNX05PVzsKICAgICAgICAgICAgICAgICAgY29uc3QgbXRpbU5vdyA9IChmc3RmbGFncyAmIFdBU0lfRklMRVNUQVRfU0VUX01USU1fTk9XKSA9PT0KICAgICAgICAgICAgICAgICAgICAgIFdBU0lfRklMRVNUQVRfU0VUX01USU1fTk9XOwogICAgICAgICAgICAgICAgICBmcy5mdXRpbWVzU3luYyhzdGF0cy5yZWFsLCBhdGltTm93ID8gbiA6IHN0QXRpbSwgbXRpbU5vdyA/IG4gOiBzdE10aW0pOwogICAgICAgICAgICAgICAgICByZXR1cm4gV0FTSV9FU1VDQ0VTUzsKICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICBmZF9wcmVzdGF0X2dldDogd3JhcCgoZmQsIGJ1ZlB0cikgPT4gewogICAgICAgICAgICAgICAgICBjb25zdCBzdGF0cyA9IENIRUNLX0ZEKGZkLCBCaWdJbnRQb2x5ZmlsbCgwKSk7CiAgICAgICAgICAgICAgICAgIGlmICghc3RhdHMucGF0aCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFdBU0lfRUlOVkFMOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaE1lbW9yeSgpOwogICAgICAgICAgICAgICAgICB0aGlzLnZpZXcuc2V0VWludDgoYnVmUHRyLCBXQVNJX1BSRU9QRU5UWVBFX0RJUik7CiAgICAgICAgICAgICAgICAgIHRoaXMudmlldy5zZXRVaW50MzIoYnVmUHRyICsgNCwgYnVmZmVyJDIuQnVmZmVyLmJ5dGVMZW5ndGgoc3RhdHMuZmFrZVBhdGgpLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIFdBU0lfRVNVQ0NFU1M7CiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgZmRfcHJlc3RhdF9kaXJfbmFtZTogd3JhcCgoZmQsIHBhdGhQdHIsIHBhdGhMZW4pID0+IHsKICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhdHMgPSBDSEVDS19GRChmZCwgQmlnSW50UG9seWZpbGwoMCkpOwogICAgICAgICAgICAgICAgICBpZiAoIXN0YXRzLnBhdGgpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBXQVNJX0VJTlZBTDsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hNZW1vcnkoKTsKICAgICAgICAgICAgICAgICAgYnVmZmVyJDIuQnVmZmVyLmZyb20odGhpcy5tZW1vcnkuYnVmZmVyKS53cml0ZShzdGF0cy5mYWtlUGF0aCwgcGF0aFB0ciwgcGF0aExlbiwgInV0ZjgiKTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIFdBU0lfRVNVQ0NFU1M7CiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgZmRfcHdyaXRlOiB3cmFwKChmZCwgaW92cywgaW92c0xlbiwgb2Zmc2V0LCBud3JpdHRlbikgPT4gewogICAgICAgICAgICAgICAgICBjb25zdCBzdGF0cyA9IENIRUNLX0ZEKGZkLCBXQVNJX1JJR0hUX0ZEX1dSSVRFIHwgV0FTSV9SSUdIVF9GRF9TRUVLKTsKICAgICAgICAgICAgICAgICAgbGV0IHdyaXR0ZW4gPSAwOwogICAgICAgICAgICAgICAgICBnZXRpb3ZzKGlvdnMsIGlvdnNMZW4pLmZvckVhY2goKGlvdikgPT4gewogICAgICAgICAgICAgICAgICAgICAgbGV0IHcgPSAwOwogICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHcgPCBpb3YuYnl0ZUxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHcgKz0gZnMud3JpdGVTeW5jKHN0YXRzLnJlYWwsIGlvdiwgdywgaW92LmJ5dGVMZW5ndGggLSB3LCBvZmZzZXQgKyB3cml0dGVuICsgdyk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB3cml0dGVuICs9IHc7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB0aGlzLnZpZXcuc2V0VWludDMyKG53cml0dGVuLCB3cml0dGVuLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIFdBU0lfRVNVQ0NFU1M7CiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgZmRfd3JpdGU6IHdyYXAoKGZkLCBpb3ZzLCBpb3ZzTGVuLCBud3JpdHRlbikgPT4gewogICAgICAgICAgICAgICAgICBjb25zdCBzdGF0cyA9IENIRUNLX0ZEKGZkLCBXQVNJX1JJR0hUX0ZEX1dSSVRFKTsKICAgICAgICAgICAgICAgICAgbGV0IHdyaXR0ZW4gPSAwOwogICAgICAgICAgICAgICAgICBnZXRpb3ZzKGlvdnMsIGlvdnNMZW4pLmZvckVhY2goKGlvdikgPT4gewogICAgICAgICAgICAgICAgICAgICAgbGV0IHcgPSAwOwogICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHcgPCBpb3YuYnl0ZUxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGkgPSBmcy53cml0ZVN5bmMoc3RhdHMucmVhbCwgaW92LCB3LCBpb3YuYnl0ZUxlbmd0aCAtIHcsIHN0YXRzLm9mZnNldCA/IE51bWJlcihzdGF0cy5vZmZzZXQpIDogbnVsbCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRzLm9mZnNldCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHMub2Zmc2V0ICs9IEJpZ0ludFBvbHlmaWxsKGkpOwogICAgICAgICAgICAgICAgICAgICAgICAgIHcgKz0gaTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIHdyaXR0ZW4gKz0gdzsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIHRoaXMudmlldy5zZXRVaW50MzIobndyaXR0ZW4sIHdyaXR0ZW4sIHRydWUpOwogICAgICAgICAgICAgICAgICByZXR1cm4gV0FTSV9FU1VDQ0VTUzsKICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICBmZF9wcmVhZDogd3JhcCgoZmQsIGlvdnMsIGlvdnNMZW4sIG9mZnNldCwgbnJlYWQpID0+IHsKICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhdHMgPSBDSEVDS19GRChmZCwgV0FTSV9SSUdIVF9GRF9SRUFEIHwgV0FTSV9SSUdIVF9GRF9TRUVLKTsKICAgICAgICAgICAgICAgICAgbGV0IHJlYWQgPSAwOwogICAgICAgICAgICAgICAgICBnZXRpb3ZzKGlvdnMsIGlvdnNMZW4pLmZvckVhY2goKGlvdikgPT4gewogICAgICAgICAgICAgICAgICAgICAgbGV0IHIgPSAwOwogICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHIgPCBpb3YuYnl0ZUxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHIgKz0gZnMucmVhZFN5bmMoc3RhdHMucmVhbCwgaW92LCByLCBpb3YuYnl0ZUxlbmd0aCAtIHIsIE51bWJlcihvZmZzZXQpICsgcmVhZCArIHIpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgcmVhZCArPSByOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgdGhpcy52aWV3LnNldFVpbnQzMihucmVhZCwgcmVhZCwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgIHJldHVybiBXQVNJX0VTVUNDRVNTOwogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgIGZkX3JlYWQ6IHdyYXAoKGZkLCBpb3ZzLCBpb3ZzTGVuLCBucmVhZCkgPT4gewogICAgICAgICAgICAgICAgICBjb25zdCBzdGF0cyA9IENIRUNLX0ZEKGZkLCBXQVNJX1JJR0hUX0ZEX1JFQUQpOwogICAgICAgICAgICAgICAgICBjb25zdCBJU19TVERJTiA9IHN0YXRzLnJlYWwgPT09IDA7CiAgICAgICAgICAgICAgICAgIGxldCByZWFkID0gMDsKICAgICAgICAgICAgICAgICAgb3V0ZXI6IGZvciAoY29uc3QgaW92IG9mIGdldGlvdnMoaW92cywgaW92c0xlbikpIHsKICAgICAgICAgICAgICAgICAgICAgIGxldCByID0gMDsKICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChyIDwgaW92LmJ5dGVMZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbGVuZ3RoID0gaW92LmJ5dGVMZW5ndGggLSByOwogICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwb3NpdGlvbiA9IElTX1NURElOIHx8IHN0YXRzLm9mZnNldCA9PT0gdW5kZWZpbmVkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gbnVsbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IE51bWJlcihzdGF0cy5vZmZzZXQpOwogICAgICAgICAgICAgICAgICAgICAgICAgIGxldCByciA9IGZzLnJlYWRTeW5jKHN0YXRzLnJlYWwsIC8vIGZkCiAgICAgICAgICAgICAgICAgICAgICAgICAgaW92LCAvLyBidWZmZXIKICAgICAgICAgICAgICAgICAgICAgICAgICByLCAvLyBvZmZzZXQKICAgICAgICAgICAgICAgICAgICAgICAgICBsZW5ndGgsIC8vIGxlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uIC8vIHBvc2l0aW9uCiAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIUlTX1NURElOKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRzLm9mZnNldCA9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoc3RhdHMub2Zmc2V0ID8gc3RhdHMub2Zmc2V0IDogQmlnSW50UG9seWZpbGwoMCkpICsgQmlnSW50UG9seWZpbGwocnIpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICByICs9IHJyOwogICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWQgKz0gcnI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgd2UgZG9uJ3QgcmVhZCBhbnl0aGluZywgb3Igd2UgcmVjZWl2ZSBsZXNzIHRoYW4gcmVxdWVzdGVkCiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJyID09PSAwIHx8IHJyIDwgbGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIG91dGVyOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAvLyBXZSBzaG91bGQgbm90IG1vZGlmeSB0aGUgb2Zmc2V0IG9mIHN0ZGluCiAgICAgICAgICAgICAgICAgIHRoaXMudmlldy5zZXRVaW50MzIobnJlYWQsIHJlYWQsIHRydWUpOwogICAgICAgICAgICAgICAgICByZXR1cm4gV0FTSV9FU1VDQ0VTUzsKICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICBmZF9yZWFkZGlyOiB3cmFwKChmZCwgYnVmUHRyLCBidWZMZW4sIGNvb2tpZSwgYnVmdXNlZFB0cikgPT4gewogICAgICAgICAgICAgICAgICBjb25zdCBzdGF0cyA9IENIRUNLX0ZEKGZkLCBXQVNJX1JJR0hUX0ZEX1JFQURESVIpOwogICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hNZW1vcnkoKTsKICAgICAgICAgICAgICAgICAgY29uc3QgZW50cmllcyA9IGZzLnJlYWRkaXJTeW5jKHN0YXRzLnBhdGgsIHsgd2l0aEZpbGVUeXBlczogdHJ1ZSB9KTsKICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhcnRQdHIgPSBidWZQdHI7CiAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSBOdW1iZXIoY29va2llKTsgaSA8IGVudHJpZXMubGVuZ3RoOyBpICs9IDEpIHsKICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVudHJ5ID0gZW50cmllc1tpXTsKICAgICAgICAgICAgICAgICAgICAgIGxldCBuYW1lTGVuZ3RoID0gYnVmZmVyJDIuQnVmZmVyLmJ5dGVMZW5ndGgoZW50cnkubmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoYnVmUHRyIC0gc3RhcnRQdHIgPiBidWZMZW4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmlldy5zZXRCaWdVaW50NjQoYnVmUHRyLCBCaWdJbnRQb2x5ZmlsbChpICsgMSksIHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgYnVmUHRyICs9IDg7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoYnVmUHRyIC0gc3RhcnRQdHIgPiBidWZMZW4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJzdGF0cyA9IGZzLnN0YXRTeW5jKHBhdGgkMS5yZXNvbHZlKHN0YXRzLnBhdGgsIGVudHJ5Lm5hbWUpKTsKICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmlldy5zZXRCaWdVaW50NjQoYnVmUHRyLCBCaWdJbnRQb2x5ZmlsbChyc3RhdHMuaW5vKSwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICBidWZQdHIgKz0gODsKICAgICAgICAgICAgICAgICAgICAgIGlmIChidWZQdHIgLSBzdGFydFB0ciA+IGJ1ZkxlbikgewogICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgdGhpcy52aWV3LnNldFVpbnQzMihidWZQdHIsIG5hbWVMZW5ndGgsIHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgYnVmUHRyICs9IDQ7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoYnVmUHRyIC0gc3RhcnRQdHIgPiBidWZMZW4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIGxldCBmaWxldHlwZTsKICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodHJ1ZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgcnN0YXRzLmlzQmxvY2tEZXZpY2UoKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZXR5cGUgPSBXQVNJX0ZJTEVUWVBFX0JMT0NLX0RFVklDRTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSByc3RhdHMuaXNDaGFyYWN0ZXJEZXZpY2UoKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZXR5cGUgPSBXQVNJX0ZJTEVUWVBFX0NIQVJBQ1RFUl9ERVZJQ0U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgcnN0YXRzLmlzRGlyZWN0b3J5KCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGV0eXBlID0gV0FTSV9GSUxFVFlQRV9ESVJFQ1RPUlk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgcnN0YXRzLmlzRklGTygpOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxldHlwZSA9IFdBU0lfRklMRVRZUEVfU09DS0VUX1NUUkVBTTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSByc3RhdHMuaXNGaWxlKCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGV0eXBlID0gV0FTSV9GSUxFVFlQRV9SRUdVTEFSX0ZJTEU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgcnN0YXRzLmlzU29ja2V0KCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGV0eXBlID0gV0FTSV9GSUxFVFlQRV9TT0NLRVRfU1RSRUFNOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIHJzdGF0cy5pc1N5bWJvbGljTGluaygpOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxldHlwZSA9IFdBU0lfRklMRVRZUEVfU1lNQk9MSUNfTElOSzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZXR5cGUgPSBXQVNJX0ZJTEVUWVBFX1VOS05PV047CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgdGhpcy52aWV3LnNldFVpbnQ4KGJ1ZlB0ciwgZmlsZXR5cGUpOwogICAgICAgICAgICAgICAgICAgICAgYnVmUHRyICs9IDE7CiAgICAgICAgICAgICAgICAgICAgICBidWZQdHIgKz0gMzsgLy8gcGFkZGluZwogICAgICAgICAgICAgICAgICAgICAgaWYgKGJ1ZlB0ciArIG5hbWVMZW5ndGggPj0gc3RhcnRQdHIgKyBidWZMZW4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJdCBkb2Vzbid0IGZpdCBpbiB0aGUgYnVmZmVyCiAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICBsZXQgbWVtb3J5X2J1ZmZlciA9IGJ1ZmZlciQyLkJ1ZmZlci5mcm9tKHRoaXMubWVtb3J5LmJ1ZmZlcik7CiAgICAgICAgICAgICAgICAgICAgICBtZW1vcnlfYnVmZmVyLndyaXRlKGVudHJ5Lm5hbWUsIGJ1ZlB0cik7CiAgICAgICAgICAgICAgICAgICAgICBidWZQdHIgKz0gbmFtZUxlbmd0aDsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBjb25zdCBidWZ1c2VkID0gYnVmUHRyIC0gc3RhcnRQdHI7CiAgICAgICAgICAgICAgICAgIHRoaXMudmlldy5zZXRVaW50MzIoYnVmdXNlZFB0ciwgTWF0aC5taW4oYnVmdXNlZCwgYnVmTGVuKSwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgIHJldHVybiBXQVNJX0VTVUNDRVNTOwogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgIGZkX3JlbnVtYmVyOiB3cmFwKChmcm9tLCB0bykgPT4gewogICAgICAgICAgICAgICAgICBDSEVDS19GRChmcm9tLCBCaWdJbnRQb2x5ZmlsbCgwKSk7CiAgICAgICAgICAgICAgICAgIENIRUNLX0ZEKHRvLCBCaWdJbnRQb2x5ZmlsbCgwKSk7CiAgICAgICAgICAgICAgICAgIGZzLmNsb3NlU3luYyh0aGlzLkZEX01BUC5nZXQoZnJvbSkucmVhbCk7CiAgICAgICAgICAgICAgICAgIHRoaXMuRkRfTUFQLnNldChmcm9tLCB0aGlzLkZEX01BUC5nZXQodG8pKTsKICAgICAgICAgICAgICAgICAgdGhpcy5GRF9NQVAuZGVsZXRlKHRvKTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIFdBU0lfRVNVQ0NFU1M7CiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgZmRfc2Vlazogd3JhcCgoZmQsIG9mZnNldCwgd2hlbmNlLCBuZXdPZmZzZXRQdHIpID0+IHsKICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhdHMgPSBDSEVDS19GRChmZCwgV0FTSV9SSUdIVF9GRF9TRUVLKTsKICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoTWVtb3J5KCk7CiAgICAgICAgICAgICAgICAgIHN3aXRjaCAod2hlbmNlKSB7CiAgICAgICAgICAgICAgICAgICAgICBjYXNlIFdBU0lfV0hFTkNFX0NVUjoKICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0cy5vZmZzZXQgPQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoc3RhdHMub2Zmc2V0ID8gc3RhdHMub2Zmc2V0IDogQmlnSW50UG9seWZpbGwoMCkpICsgQmlnSW50UG9seWZpbGwob2Zmc2V0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgV0FTSV9XSEVOQ0VfRU5EOgogICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgc2l6ZSB9ID0gZnMuZnN0YXRTeW5jKHN0YXRzLnJlYWwpOwogICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRzLm9mZnNldCA9IEJpZ0ludFBvbHlmaWxsKHNpemUpICsgQmlnSW50UG9seWZpbGwob2Zmc2V0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgV0FTSV9XSEVOQ0VfU0VUOgogICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRzLm9mZnNldCA9IEJpZ0ludFBvbHlmaWxsKG9mZnNldCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgdGhpcy52aWV3LnNldEJpZ1VpbnQ2NChuZXdPZmZzZXRQdHIsIHN0YXRzLm9mZnNldCwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgIHJldHVybiBXQVNJX0VTVUNDRVNTOwogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgIGZkX3RlbGw6IHdyYXAoKGZkLCBvZmZzZXRQdHIpID0+IHsKICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhdHMgPSBDSEVDS19GRChmZCwgV0FTSV9SSUdIVF9GRF9URUxMKTsKICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoTWVtb3J5KCk7CiAgICAgICAgICAgICAgICAgIGlmICghc3RhdHMub2Zmc2V0KSB7CiAgICAgICAgICAgICAgICAgICAgICBzdGF0cy5vZmZzZXQgPSBCaWdJbnRQb2x5ZmlsbCgwKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB0aGlzLnZpZXcuc2V0QmlnVWludDY0KG9mZnNldFB0ciwgc3RhdHMub2Zmc2V0LCB0cnVlKTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIFdBU0lfRVNVQ0NFU1M7CiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgZmRfc3luYzogd3JhcCgoZmQpID0+IHsKICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhdHMgPSBDSEVDS19GRChmZCwgV0FTSV9SSUdIVF9GRF9TWU5DKTsKICAgICAgICAgICAgICAgICAgZnMuZnN5bmNTeW5jKHN0YXRzLnJlYWwpOwogICAgICAgICAgICAgICAgICByZXR1cm4gV0FTSV9FU1VDQ0VTUzsKICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICBwYXRoX2NyZWF0ZV9kaXJlY3Rvcnk6IHdyYXAoKGZkLCBwYXRoUHRyLCBwYXRoTGVuKSA9PiB7CiAgICAgICAgICAgICAgICAgIGNvbnN0IHN0YXRzID0gQ0hFQ0tfRkQoZmQsIFdBU0lfUklHSFRfUEFUSF9DUkVBVEVfRElSRUNUT1JZKTsKICAgICAgICAgICAgICAgICAgaWYgKCFzdGF0cy5wYXRoKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gV0FTSV9FSU5WQUw7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoTWVtb3J5KCk7CiAgICAgICAgICAgICAgICAgIGNvbnN0IHAgPSBidWZmZXIkMi5CdWZmZXIuZnJvbSh0aGlzLm1lbW9yeS5idWZmZXIsIHBhdGhQdHIsIHBhdGhMZW4pLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICAgIGZzLm1rZGlyU3luYyhwYXRoJDEucmVzb2x2ZShzdGF0cy5wYXRoLCBwKSk7CiAgICAgICAgICAgICAgICAgIHJldHVybiBXQVNJX0VTVUNDRVNTOwogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgIHBhdGhfZmlsZXN0YXRfZ2V0OiB3cmFwKChmZCwgZmxhZ3MsIHBhdGhQdHIsIHBhdGhMZW4sIGJ1ZlB0cikgPT4gewogICAgICAgICAgICAgICAgICBjb25zdCBzdGF0cyA9IENIRUNLX0ZEKGZkLCBXQVNJX1JJR0hUX1BBVEhfRklMRVNUQVRfR0VUKTsKICAgICAgICAgICAgICAgICAgaWYgKCFzdGF0cy5wYXRoKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gV0FTSV9FSU5WQUw7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoTWVtb3J5KCk7CiAgICAgICAgICAgICAgICAgIGNvbnN0IHAgPSBidWZmZXIkMi5CdWZmZXIuZnJvbSh0aGlzLm1lbW9yeS5idWZmZXIsIHBhdGhQdHIsIHBhdGhMZW4pLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICAgIGNvbnN0IHJzdGF0cyA9IGZzLnN0YXRTeW5jKHBhdGhCcm93c2VyaWZ5LnJlc29sdmUoc3RhdHMucGF0aCwgcCkpOwogICAgICAgICAgICAgICAgICB0aGlzLnZpZXcuc2V0QmlnVWludDY0KGJ1ZlB0ciwgQmlnSW50UG9seWZpbGwocnN0YXRzLmRldiksIHRydWUpOwogICAgICAgICAgICAgICAgICBidWZQdHIgKz0gODsKICAgICAgICAgICAgICAgICAgdGhpcy52aWV3LnNldEJpZ1VpbnQ2NChidWZQdHIsIEJpZ0ludFBvbHlmaWxsKHJzdGF0cy5pbm8pLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgYnVmUHRyICs9IDg7CiAgICAgICAgICAgICAgICAgIHRoaXMudmlldy5zZXRVaW50OChidWZQdHIsIHRyYW5zbGF0ZUZpbGVBdHRyaWJ1dGVzKHRoaXMsIHVuZGVmaW5lZCwgcnN0YXRzKS5maWxldHlwZSk7CiAgICAgICAgICAgICAgICAgIGJ1ZlB0ciArPSA0OwogICAgICAgICAgICAgICAgICB0aGlzLnZpZXcuc2V0VWludDMyKGJ1ZlB0ciwgTnVtYmVyKHJzdGF0cy5ubGluayksIHRydWUpOwogICAgICAgICAgICAgICAgICBidWZQdHIgKz0gNDsKICAgICAgICAgICAgICAgICAgdGhpcy52aWV3LnNldEJpZ1VpbnQ2NChidWZQdHIsIEJpZ0ludFBvbHlmaWxsKHJzdGF0cy5zaXplKSwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgIGJ1ZlB0ciArPSA4OwogICAgICAgICAgICAgICAgICB0aGlzLnZpZXcuc2V0QmlnVWludDY0KGJ1ZlB0ciwgbXNUb05zKHJzdGF0cy5hdGltZU1zKSwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgIGJ1ZlB0ciArPSA4OwogICAgICAgICAgICAgICAgICB0aGlzLnZpZXcuc2V0QmlnVWludDY0KGJ1ZlB0ciwgbXNUb05zKHJzdGF0cy5tdGltZU1zKSwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgIGJ1ZlB0ciArPSA4OwogICAgICAgICAgICAgICAgICB0aGlzLnZpZXcuc2V0QmlnVWludDY0KGJ1ZlB0ciwgbXNUb05zKHJzdGF0cy5jdGltZU1zKSwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgIGJ1ZlB0ciArPSA4OwogICAgICAgICAgICAgICAgICByZXR1cm4gV0FTSV9FU1VDQ0VTUzsKICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICBwYXRoX2ZpbGVzdGF0X3NldF90aW1lczogd3JhcCgoZmQsIGZzdGZsYWdzLCBwYXRoUHRyLCBwYXRoTGVuLCBzdEF0aW0sIHN0TXRpbSkgPT4gewogICAgICAgICAgICAgICAgICBjb25zdCBzdGF0cyA9IENIRUNLX0ZEKGZkLCBXQVNJX1JJR0hUX1BBVEhfRklMRVNUQVRfU0VUX1RJTUVTKTsKICAgICAgICAgICAgICAgICAgaWYgKCFzdGF0cy5wYXRoKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gV0FTSV9FSU5WQUw7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoTWVtb3J5KCk7CiAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBub3coV0FTSV9DTE9DS19SRUFMVElNRSk7CiAgICAgICAgICAgICAgICAgIGNvbnN0IGF0aW1Ob3cgPSAoZnN0ZmxhZ3MgJiBXQVNJX0ZJTEVTVEFUX1NFVF9BVElNX05PVykgPT09CiAgICAgICAgICAgICAgICAgICAgICBXQVNJX0ZJTEVTVEFUX1NFVF9BVElNX05PVzsKICAgICAgICAgICAgICAgICAgY29uc3QgbXRpbU5vdyA9IChmc3RmbGFncyAmIFdBU0lfRklMRVNUQVRfU0VUX01USU1fTk9XKSA9PT0KICAgICAgICAgICAgICAgICAgICAgIFdBU0lfRklMRVNUQVRfU0VUX01USU1fTk9XOwogICAgICAgICAgICAgICAgICBjb25zdCBwID0gYnVmZmVyJDIuQnVmZmVyLmZyb20odGhpcy5tZW1vcnkuYnVmZmVyLCBwYXRoUHRyLCBwYXRoTGVuKS50b1N0cmluZygpOwogICAgICAgICAgICAgICAgICBmcy51dGltZXNTeW5jKHBhdGgkMS5yZXNvbHZlKHN0YXRzLnBhdGgsIHApLCBhdGltTm93ID8gbiA6IHN0QXRpbSwgbXRpbU5vdyA/IG4gOiBzdE10aW0pOwogICAgICAgICAgICAgICAgICByZXR1cm4gV0FTSV9FU1VDQ0VTUzsKICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICBwYXRoX2xpbms6IHdyYXAoKG9sZEZkLCBvbGRGbGFncywgb2xkUGF0aCwgb2xkUGF0aExlbiwgbmV3RmQsIG5ld1BhdGgsIG5ld1BhdGhMZW4pID0+IHsKICAgICAgICAgICAgICAgICAgY29uc3Qgb3N0YXRzID0gQ0hFQ0tfRkQob2xkRmQsIFdBU0lfUklHSFRfUEFUSF9MSU5LX1NPVVJDRSk7CiAgICAgICAgICAgICAgICAgIGNvbnN0IG5zdGF0cyA9IENIRUNLX0ZEKG5ld0ZkLCBXQVNJX1JJR0hUX1BBVEhfTElOS19UQVJHRVQpOwogICAgICAgICAgICAgICAgICBpZiAoIW9zdGF0cy5wYXRoIHx8ICFuc3RhdHMucGF0aCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFdBU0lfRUlOVkFMOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaE1lbW9yeSgpOwogICAgICAgICAgICAgICAgICBjb25zdCBvcCA9IGJ1ZmZlciQyLkJ1ZmZlci5mcm9tKHRoaXMubWVtb3J5LmJ1ZmZlciwgb2xkUGF0aCwgb2xkUGF0aExlbikudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgY29uc3QgbnAgPSBidWZmZXIkMi5CdWZmZXIuZnJvbSh0aGlzLm1lbW9yeS5idWZmZXIsIG5ld1BhdGgsIG5ld1BhdGhMZW4pLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICAgIGZzLmxpbmtTeW5jKHBhdGgkMS5yZXNvbHZlKG9zdGF0cy5wYXRoLCBvcCksIHBhdGgkMS5yZXNvbHZlKG5zdGF0cy5wYXRoLCBucCkpOwogICAgICAgICAgICAgICAgICByZXR1cm4gV0FTSV9FU1VDQ0VTUzsKICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICBwYXRoX29wZW46IHdyYXAoKGRpcmZkLCBkaXJmbGFncywgcGF0aFB0ciwgcGF0aExlbiwgb2ZsYWdzLCBmc1JpZ2h0c0Jhc2UsIGZzUmlnaHRzSW5oZXJpdGluZywgZnNGbGFncywgZmQpID0+IHsKICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhdHMgPSBDSEVDS19GRChkaXJmZCwgV0FTSV9SSUdIVF9QQVRIX09QRU4pOwogICAgICAgICAgICAgICAgICBmc1JpZ2h0c0Jhc2UgPSBCaWdJbnRQb2x5ZmlsbChmc1JpZ2h0c0Jhc2UpOwogICAgICAgICAgICAgICAgICBmc1JpZ2h0c0luaGVyaXRpbmcgPSBCaWdJbnRQb2x5ZmlsbChmc1JpZ2h0c0luaGVyaXRpbmcpOwogICAgICAgICAgICAgICAgICBjb25zdCByZWFkID0gKGZzUmlnaHRzQmFzZSAmIChXQVNJX1JJR0hUX0ZEX1JFQUQgfCBXQVNJX1JJR0hUX0ZEX1JFQURESVIpKSAhPT0KICAgICAgICAgICAgICAgICAgICAgIEJpZ0ludFBvbHlmaWxsKDApOwogICAgICAgICAgICAgICAgICBjb25zdCB3cml0ZSA9IChmc1JpZ2h0c0Jhc2UgJgogICAgICAgICAgICAgICAgICAgICAgKFdBU0lfUklHSFRfRkRfREFUQVNZTkMgfAogICAgICAgICAgICAgICAgICAgICAgICAgIFdBU0lfUklHSFRfRkRfV1JJVEUgfAogICAgICAgICAgICAgICAgICAgICAgICAgIFdBU0lfUklHSFRfRkRfQUxMT0NBVEUgfAogICAgICAgICAgICAgICAgICAgICAgICAgIFdBU0lfUklHSFRfRkRfRklMRVNUQVRfU0VUX1NJWkUpKSAhPT0KICAgICAgICAgICAgICAgICAgICAgIEJpZ0ludFBvbHlmaWxsKDApOwogICAgICAgICAgICAgICAgICBsZXQgbm9mbGFnczsKICAgICAgICAgICAgICAgICAgaWYgKHdyaXRlICYmIHJlYWQpIHsKICAgICAgICAgICAgICAgICAgICAgIG5vZmxhZ3MgPSBmcy5jb25zdGFudHMuT19SRFdSOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlYWQpIHsKICAgICAgICAgICAgICAgICAgICAgIG5vZmxhZ3MgPSBmcy5jb25zdGFudHMuT19SRE9OTFk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgZWxzZSBpZiAod3JpdGUpIHsKICAgICAgICAgICAgICAgICAgICAgIG5vZmxhZ3MgPSBmcy5jb25zdGFudHMuT19XUk9OTFk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgLy8gZnNSaWdodHNCYXNlIGlzIG5lZWRlZCBoZXJlIGJ1dCBwZXJoYXBzIHdlIHNob3VsZCBkbyBpdCBpbiBuZWVkZWRJbmhlcml0aW5nCiAgICAgICAgICAgICAgICAgIGxldCBuZWVkZWRCYXNlID0gZnNSaWdodHNCYXNlIHwgV0FTSV9SSUdIVF9QQVRIX09QRU47CiAgICAgICAgICAgICAgICAgIGxldCBuZWVkZWRJbmhlcml0aW5nID0gZnNSaWdodHNCYXNlIHwgZnNSaWdodHNJbmhlcml0aW5nOwogICAgICAgICAgICAgICAgICBpZiAoKG9mbGFncyAmIFdBU0lfT19DUkVBVCkgIT09IDApIHsKICAgICAgICAgICAgICAgICAgICAgIG5vZmxhZ3MgfD0gZnMuY29uc3RhbnRzLk9fQ1JFQVQ7CiAgICAgICAgICAgICAgICAgICAgICBuZWVkZWRCYXNlIHw9IFdBU0lfUklHSFRfUEFUSF9DUkVBVEVfRklMRTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBpZiAoKG9mbGFncyAmIFdBU0lfT19ESVJFQ1RPUlkpICE9PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICBub2ZsYWdzIHw9IGZzLmNvbnN0YW50cy5PX0RJUkVDVE9SWTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBpZiAoKG9mbGFncyAmIFdBU0lfT19FWENMKSAhPT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgbm9mbGFncyB8PSBmcy5jb25zdGFudHMuT19FWENMOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGlmICgob2ZsYWdzICYgV0FTSV9PX1RSVU5DKSAhPT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgbm9mbGFncyB8PSBmcy5jb25zdGFudHMuT19UUlVOQzsKICAgICAgICAgICAgICAgICAgICAgIG5lZWRlZEJhc2UgfD0gV0FTSV9SSUdIVF9QQVRIX0ZJTEVTVEFUX1NFVF9TSVpFOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIC8vIENvbnZlcnQgZmlsZSBkZXNjcmlwdG9yIGZsYWdzLgogICAgICAgICAgICAgICAgICBpZiAoKGZzRmxhZ3MgJiBXQVNJX0ZERkxBR19BUFBFTkQpICE9PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICBub2ZsYWdzIHw9IGZzLmNvbnN0YW50cy5PX0FQUEVORDsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBpZiAoKGZzRmxhZ3MgJiBXQVNJX0ZERkxBR19EU1lOQykgIT09IDApIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChmcy5jb25zdGFudHMuT19EU1lOQykgewogICAgICAgICAgICAgICAgICAgICAgICAgIG5vZmxhZ3MgfD0gZnMuY29uc3RhbnRzLk9fRFNZTkM7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBub2ZsYWdzIHw9IGZzLmNvbnN0YW50cy5PX1NZTkM7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICBuZWVkZWRJbmhlcml0aW5nIHw9IFdBU0lfUklHSFRfRkRfREFUQVNZTkM7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgaWYgKChmc0ZsYWdzICYgV0FTSV9GREZMQUdfTk9OQkxPQ0spICE9PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICBub2ZsYWdzIHw9IGZzLmNvbnN0YW50cy5PX05PTkJMT0NLOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGlmICgoZnNGbGFncyAmIFdBU0lfRkRGTEFHX1JTWU5DKSAhPT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgaWYgKGZzLmNvbnN0YW50cy5PX1JTWU5DKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgbm9mbGFncyB8PSBmcy5jb25zdGFudHMuT19SU1lOQzsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgIG5vZmxhZ3MgfD0gZnMuY29uc3RhbnRzLk9fU1lOQzsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIG5lZWRlZEluaGVyaXRpbmcgfD0gV0FTSV9SSUdIVF9GRF9TWU5DOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGlmICgoZnNGbGFncyAmIFdBU0lfRkRGTEFHX1NZTkMpICE9PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICBub2ZsYWdzIHw9IGZzLmNvbnN0YW50cy5PX1NZTkM7CiAgICAgICAgICAgICAgICAgICAgICBuZWVkZWRJbmhlcml0aW5nIHw9IFdBU0lfUklHSFRfRkRfU1lOQzsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBpZiAod3JpdGUgJiYKICAgICAgICAgICAgICAgICAgICAgIChub2ZsYWdzICYgKGZzLmNvbnN0YW50cy5PX0FQUEVORCB8IGZzLmNvbnN0YW50cy5PX1RSVU5DKSkgPT09IDApIHsKICAgICAgICAgICAgICAgICAgICAgIG5lZWRlZEluaGVyaXRpbmcgfD0gV0FTSV9SSUdIVF9GRF9TRUVLOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaE1lbW9yeSgpOwogICAgICAgICAgICAgICAgICBjb25zdCBwID0gYnVmZmVyJDIuQnVmZmVyLmZyb20odGhpcy5tZW1vcnkuYnVmZmVyLCBwYXRoUHRyLCBwYXRoTGVuKS50b1N0cmluZygpOwogICAgICAgICAgICAgICAgICBjb25zdCBmdWxsVW5yZXNvbHZlZCA9IHBhdGgkMS5yZXNvbHZlKHN0YXRzLnBhdGgsIHApOwogICAgICAgICAgICAgICAgICBpZiAocGF0aCQxLnJlbGF0aXZlKHN0YXRzLnBhdGgsIGZ1bGxVbnJlc29sdmVkKS5zdGFydHNXaXRoKCIuLiIpKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gV0FTSV9FTk9UQ0FQQUJMRTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBsZXQgZnVsbDsKICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgIGZ1bGwgPSBmcy5yZWFscGF0aFN5bmMoZnVsbFVucmVzb2x2ZWQpOwogICAgICAgICAgICAgICAgICAgICAgaWYgKHBhdGgkMS5yZWxhdGl2ZShzdGF0cy5wYXRoLCBmdWxsKS5zdGFydHNXaXRoKCIuLiIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFdBU0lfRU5PVENBUEFCTEU7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yID0gZTsKICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvciAmJiBlcnJvci5jb2RlICYmIGVycm9yLmNvZGUgPT09ICJFTk9FTlQiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgZnVsbCA9IGZ1bGxVbnJlc29sdmVkOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBjb25zdCByZWFsZmQgPSBmcy5vcGVuU3luYyhmdWxsLCBub2ZsYWdzKTsKICAgICAgICAgICAgICAgICAgY29uc3QgbmV3ZmQgPSBbLi4udGhpcy5GRF9NQVAua2V5cygpXS5yZXZlcnNlKClbMF0gKyAxOwogICAgICAgICAgICAgICAgICB0aGlzLkZEX01BUC5zZXQobmV3ZmQsIHsKICAgICAgICAgICAgICAgICAgICAgIHJlYWw6IHJlYWxmZCwKICAgICAgICAgICAgICAgICAgICAgIGZpbGV0eXBlOiB1bmRlZmluZWQsCiAgICAgICAgICAgICAgICAgICAgICAvLyBvZmZzZXQ6IEJpZ0ludCgwKSwKICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0czogewogICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2U6IG5lZWRlZEJhc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgaW5oZXJpdGluZzogbmVlZGVkSW5oZXJpdGluZywKICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBmdWxsLAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgc3RhdCh0aGlzLCBuZXdmZCk7CiAgICAgICAgICAgICAgICAgIHRoaXMudmlldy5zZXRVaW50MzIoZmQsIG5ld2ZkLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIFdBU0lfRVNVQ0NFU1M7CiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgcGF0aF9yZWFkbGluazogd3JhcCgoZmQsIHBhdGhQdHIsIHBhdGhMZW4sIGJ1ZiwgYnVmTGVuLCBidWZ1c2VkKSA9PiB7CiAgICAgICAgICAgICAgICAgIGNvbnN0IHN0YXRzID0gQ0hFQ0tfRkQoZmQsIFdBU0lfUklHSFRfUEFUSF9SRUFETElOSyk7CiAgICAgICAgICAgICAgICAgIGlmICghc3RhdHMucGF0aCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFdBU0lfRUlOVkFMOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaE1lbW9yeSgpOwogICAgICAgICAgICAgICAgICBjb25zdCBwID0gYnVmZmVyJDIuQnVmZmVyLmZyb20odGhpcy5tZW1vcnkuYnVmZmVyLCBwYXRoUHRyLCBwYXRoTGVuKS50b1N0cmluZygpOwogICAgICAgICAgICAgICAgICBjb25zdCBmdWxsID0gcGF0aCQxLnJlc29sdmUoc3RhdHMucGF0aCwgcCk7CiAgICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBmcy5yZWFkbGlua1N5bmMoZnVsbCk7CiAgICAgICAgICAgICAgICAgIGNvbnN0IHVzZWQgPSBidWZmZXIkMi5CdWZmZXIuZnJvbSh0aGlzLm1lbW9yeS5idWZmZXIpLndyaXRlKHIsIGJ1ZiwgYnVmTGVuKTsKICAgICAgICAgICAgICAgICAgdGhpcy52aWV3LnNldFVpbnQzMihidWZ1c2VkLCB1c2VkLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIFdBU0lfRVNVQ0NFU1M7CiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgcGF0aF9yZW1vdmVfZGlyZWN0b3J5OiB3cmFwKChmZCwgcGF0aFB0ciwgcGF0aExlbikgPT4gewogICAgICAgICAgICAgICAgICBjb25zdCBzdGF0cyA9IENIRUNLX0ZEKGZkLCBXQVNJX1JJR0hUX1BBVEhfUkVNT1ZFX0RJUkVDVE9SWSk7CiAgICAgICAgICAgICAgICAgIGlmICghc3RhdHMucGF0aCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFdBU0lfRUlOVkFMOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaE1lbW9yeSgpOwogICAgICAgICAgICAgICAgICBjb25zdCBwID0gYnVmZmVyJDIuQnVmZmVyLmZyb20odGhpcy5tZW1vcnkuYnVmZmVyLCBwYXRoUHRyLCBwYXRoTGVuKS50b1N0cmluZygpOwogICAgICAgICAgICAgICAgICBmcy5ybWRpclN5bmMocGF0aCQxLnJlc29sdmUoc3RhdHMucGF0aCwgcCkpOwogICAgICAgICAgICAgICAgICByZXR1cm4gV0FTSV9FU1VDQ0VTUzsKICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICBwYXRoX3JlbmFtZTogd3JhcCgob2xkRmQsIG9sZFBhdGgsIG9sZFBhdGhMZW4sIG5ld0ZkLCBuZXdQYXRoLCBuZXdQYXRoTGVuKSA9PiB7CiAgICAgICAgICAgICAgICAgIGNvbnN0IG9zdGF0cyA9IENIRUNLX0ZEKG9sZEZkLCBXQVNJX1JJR0hUX1BBVEhfUkVOQU1FX1NPVVJDRSk7CiAgICAgICAgICAgICAgICAgIGNvbnN0IG5zdGF0cyA9IENIRUNLX0ZEKG5ld0ZkLCBXQVNJX1JJR0hUX1BBVEhfUkVOQU1FX1RBUkdFVCk7CiAgICAgICAgICAgICAgICAgIGlmICghb3N0YXRzLnBhdGggfHwgIW5zdGF0cy5wYXRoKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gV0FTSV9FSU5WQUw7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoTWVtb3J5KCk7CiAgICAgICAgICAgICAgICAgIGNvbnN0IG9wID0gYnVmZmVyJDIuQnVmZmVyLmZyb20odGhpcy5tZW1vcnkuYnVmZmVyLCBvbGRQYXRoLCBvbGRQYXRoTGVuKS50b1N0cmluZygpOwogICAgICAgICAgICAgICAgICBjb25zdCBucCA9IGJ1ZmZlciQyLkJ1ZmZlci5mcm9tKHRoaXMubWVtb3J5LmJ1ZmZlciwgbmV3UGF0aCwgbmV3UGF0aExlbikudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgZnMucmVuYW1lU3luYyhwYXRoJDEucmVzb2x2ZShvc3RhdHMucGF0aCwgb3ApLCBwYXRoJDEucmVzb2x2ZShuc3RhdHMucGF0aCwgbnApKTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIFdBU0lfRVNVQ0NFU1M7CiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgcGF0aF9zeW1saW5rOiB3cmFwKChvbGRQYXRoLCBvbGRQYXRoTGVuLCBmZCwgbmV3UGF0aCwgbmV3UGF0aExlbikgPT4gewogICAgICAgICAgICAgICAgICBjb25zdCBzdGF0cyA9IENIRUNLX0ZEKGZkLCBXQVNJX1JJR0hUX1BBVEhfU1lNTElOSyk7CiAgICAgICAgICAgICAgICAgIGlmICghc3RhdHMucGF0aCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFdBU0lfRUlOVkFMOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaE1lbW9yeSgpOwogICAgICAgICAgICAgICAgICBjb25zdCBvcCA9IGJ1ZmZlciQyLkJ1ZmZlci5mcm9tKHRoaXMubWVtb3J5LmJ1ZmZlciwgb2xkUGF0aCwgb2xkUGF0aExlbikudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgY29uc3QgbnAgPSBidWZmZXIkMi5CdWZmZXIuZnJvbSh0aGlzLm1lbW9yeS5idWZmZXIsIG5ld1BhdGgsIG5ld1BhdGhMZW4pLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICAgIGZzLnN5bWxpbmtTeW5jKG9wLCBwYXRoJDEucmVzb2x2ZShzdGF0cy5wYXRoLCBucCkpOwogICAgICAgICAgICAgICAgICByZXR1cm4gV0FTSV9FU1VDQ0VTUzsKICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICBwYXRoX3VubGlua19maWxlOiB3cmFwKChmZCwgcGF0aFB0ciwgcGF0aExlbikgPT4gewogICAgICAgICAgICAgICAgICBjb25zdCBzdGF0cyA9IENIRUNLX0ZEKGZkLCBXQVNJX1JJR0hUX1BBVEhfVU5MSU5LX0ZJTEUpOwogICAgICAgICAgICAgICAgICBpZiAoIXN0YXRzLnBhdGgpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBXQVNJX0VJTlZBTDsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hNZW1vcnkoKTsKICAgICAgICAgICAgICAgICAgY29uc3QgcCA9IGJ1ZmZlciQyLkJ1ZmZlci5mcm9tKHRoaXMubWVtb3J5LmJ1ZmZlciwgcGF0aFB0ciwgcGF0aExlbikudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgZnMudW5saW5rU3luYyhwYXRoJDEucmVzb2x2ZShzdGF0cy5wYXRoLCBwKSk7CiAgICAgICAgICAgICAgICAgIHJldHVybiBXQVNJX0VTVUNDRVNTOwogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgIHBvbGxfb25lb2ZmOiAoc2luLCBzb3V0LCBuc3Vic2NyaXB0aW9ucywgbmV2ZW50cykgPT4gewogICAgICAgICAgICAgICAgICBsZXQgZXZlbnRjID0gMDsKICAgICAgICAgICAgICAgICAgbGV0IHdhaXRFbmQgPSAwOwogICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hNZW1vcnkoKTsKICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuc3Vic2NyaXB0aW9uczsgaSArPSAxKSB7CiAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1c2VyZGF0YSA9IHRoaXMudmlldy5nZXRCaWdVaW50NjQoc2luLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgIHNpbiArPSA4OwogICAgICAgICAgICAgICAgICAgICAgY29uc3QgdHlwZSA9IHRoaXMudmlldy5nZXRVaW50OChzaW4pOwogICAgICAgICAgICAgICAgICAgICAgc2luICs9IDE7CiAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFdBU0lfRVZFTlRUWVBFX0NMT0NLOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpbiArPSA3OyAvLyBwYWRkaW5nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IFVudXNlZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zdCBpZGVudGlmaWVyID0gdGhpcy52aWV3LmdldEJpZ1VpbnQ2NChzaW4sIHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaW4gKz0gODsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2xvY2tpZCA9IHRoaXMudmlldy5nZXRVaW50MzIoc2luLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2luICs9IDQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpbiArPSA0OyAvLyBwYWRkaW5nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IHRoaXMudmlldy5nZXRCaWdVaW50NjQoc2luLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2luICs9IDg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IFVudXNlZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zdCBwcmVjaXNpb24gPSB0aGlzLnZpZXcuZ2V0QmlnVWludDY0KHNpbiwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpbiArPSA4OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdWJjbG9ja2ZsYWdzID0gdGhpcy52aWV3LmdldFVpbnQxNihzaW4sIHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaW4gKz0gMjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2luICs9IDY7IC8vIHBhZGRpbmcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWJzb2x1dGUgPSBzdWJjbG9ja2ZsYWdzID09PSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZSA9IFdBU0lfRVNVQ0NFU1M7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5fbm93ID0gbm93KGNsb2NraWQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gbl9ub3cgJiYgQmlnSW50UG9seWZpbGwobl9ub3cpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobiA9PT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZSA9IFdBU0lfRUlOVkFMOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZW5kID0gYWJzb2x1dGUgPyB0aW1lc3RhbXAgOiBuICsgdGltZXN0YW1wOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdEVuZCA9IGVuZCA+IHdhaXRFbmQgPyBlbmQgOiB3YWl0RW5kOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmlldy5zZXRCaWdVaW50NjQoc291dCwgdXNlcmRhdGEsIHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3V0ICs9IDg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmlldy5zZXRVaW50MTYoc291dCwgZSwgdHJ1ZSk7IC8vIGVycm9yCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXQgKz0gMjsgLy8gcGFkIG9mZnNldCAyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmlldy5zZXRVaW50OChzb3V0LCBXQVNJX0VWRU5UVFlQRV9DTE9DSyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXQgKz0gMTsgLy8gcGFkIG9mZnNldCAzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXQgKz0gNTsgLy8gcGFkZGluZyB0byA4CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50YyArPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBXQVNJX0VWRU5UVFlQRV9GRF9SRUFEOgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgV0FTSV9FVkVOVFRZUEVfRkRfV1JJVEU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2luICs9IDM7IC8vIHBhZGRpbmcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogVW51c2VkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnN0IGZkID0gdGhpcy52aWV3LmdldFVpbnQzMihzaW4sIHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaW4gKz0gNDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52aWV3LnNldEJpZ1VpbnQ2NChzb3V0LCB1c2VyZGF0YSwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXQgKz0gODsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52aWV3LnNldFVpbnQxNihzb3V0LCBXQVNJX0VOT1NZUywgdHJ1ZSk7IC8vIGVycm9yCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXQgKz0gMjsgLy8gcGFkIG9mZnNldCAyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmlldy5zZXRVaW50OChzb3V0LCB0eXBlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc291dCArPSAxOyAvLyBwYWQgb2Zmc2V0IDMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc291dCArPSA1OyAvLyBwYWRkaW5nIHRvIDgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRjICs9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gV0FTSV9FSU5WQUw7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgdGhpcy52aWV3LnNldFVpbnQzMihuZXZlbnRzLCBldmVudGMsIHRydWUpOwogICAgICAgICAgICAgICAgICB3aGlsZSAoYmluZGluZ3MkMS5ocnRpbWUoKSA8IHdhaXRFbmQpIHsKICAgICAgICAgICAgICAgICAgICAgIC8vIG5vdGhpbmcKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICByZXR1cm4gV0FTSV9FU1VDQ0VTUzsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHByb2NfZXhpdDogKHJ2YWwpID0+IHsKICAgICAgICAgICAgICAgICAgYmluZGluZ3MkMS5leGl0KHJ2YWwpOwogICAgICAgICAgICAgICAgICByZXR1cm4gV0FTSV9FU1VDQ0VTUzsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHByb2NfcmFpc2U6IChzaWcpID0+IHsKICAgICAgICAgICAgICAgICAgaWYgKCEoc2lnIGluIFNJR05BTF9NQVApKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gV0FTSV9FSU5WQUw7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgYmluZGluZ3MkMS5raWxsKFNJR05BTF9NQVBbc2lnXSk7CiAgICAgICAgICAgICAgICAgIHJldHVybiBXQVNJX0VTVUNDRVNTOwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgcmFuZG9tX2dldDogKGJ1ZlB0ciwgYnVmTGVuKSA9PiB7CiAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaE1lbW9yeSgpOwogICAgICAgICAgICAgICAgICBiaW5kaW5ncyQxLnJhbmRvbUZpbGxTeW5jKG5ldyBVaW50OEFycmF5KHRoaXMubWVtb3J5LmJ1ZmZlciksIGJ1ZlB0ciwgYnVmTGVuKTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIFdBU0lfRVNVQ0NFU1M7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBzY2hlZF95aWVsZCgpIHsKICAgICAgICAgICAgICAgICAgLy8gU2luZ2xlIHRocmVhZGVkIGVudmlyb25tZW50CiAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgYSBuby1vcCBpbiBKUwogICAgICAgICAgICAgICAgICByZXR1cm4gV0FTSV9FU1VDQ0VTUzsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHNvY2tfcmVjdigpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIFdBU0lfRU5PU1lTOwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgc29ja19zZW5kKCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gV0FTSV9FTk9TWVM7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBzb2NrX3NodXRkb3duKCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gV0FTSV9FTk9TWVM7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgIH07CiAgICAgICAgICAvLyBXcmFwIGVhY2ggb2YgdGhlIGltcG9ydHMgdG8gc2hvdyB0aGUgY2FsbHMgaW4gdGhlIGNvbnNvbGUKICAgICAgICAgIC8vIE9iamVjdC5rZXlzKHRoaXMud2FzaUltcG9ydCkuZm9yRWFjaCgoa2V5OiBzdHJpbmcpID0+IHsKICAgICAgICAgIC8vICAgY29uc3QgcHJldkltcG9ydCA9IHRoaXMud2FzaUltcG9ydFtrZXldOwogICAgICAgICAgLy8gICB0aGlzLndhc2lJbXBvcnRba2V5XSA9IGZ1bmN0aW9uKC4uLmFyZ3M6IGFueVtdKSB7CiAgICAgICAgICAvLyAgICAgY29uc29sZS5sb2coYFdBU0k6IHdhc2lJbXBvcnQgY2FsbGVkOiAke2tleX0gKCR7YXJnc30pYCk7CiAgICAgICAgICAvLyAgICAgdHJ5IHsKICAgICAgICAgIC8vICAgICAgIGxldCByZXN1bHQgPSBwcmV2SW1wb3J0KC4uLmFyZ3MpOwogICAgICAgICAgLy8gICAgICAgY29uc29sZS5sb2coYFdBU0k6ICA9PiAke3Jlc3VsdH1gKTsKICAgICAgICAgIC8vICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgICAvLyAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgLy8gICAgICAgY29uc29sZS5sb2coYENhdGNoZWQgZXJyb3I6ICR7ZX1gKTsKICAgICAgICAgIC8vICAgICAgIHRocm93IGU7CiAgICAgICAgICAvLyAgICAgfQogICAgICAgICAgLy8gICB9OwogICAgICAgICAgLy8gfSk7CiAgICAgIH0KICAgICAgcmVmcmVzaE1lbW9yeSgpIHsKICAgICAgICAgIC8vIEB0cy1pZ25vcmUKICAgICAgICAgIGlmICghdGhpcy52aWV3IHx8IHRoaXMudmlldy5idWZmZXIuYnl0ZUxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgIHRoaXMudmlldyA9IG5ldyBEYXRhVmlld1BvbHlmaWxsKHRoaXMubWVtb3J5LmJ1ZmZlcik7CiAgICAgICAgICB9CiAgICAgIH0KICAgICAgc2V0TWVtb3J5KG1lbW9yeSkgewogICAgICAgICAgdGhpcy5tZW1vcnkgPSBtZW1vcnk7CiAgICAgIH0KICAgICAgc3RhcnQoaW5zdGFuY2UpIHsKICAgICAgICAgIGNvbnN0IGV4cG9ydHMgPSBpbnN0YW5jZS5leHBvcnRzOwogICAgICAgICAgaWYgKGV4cG9ydHMgPT09IG51bGwgfHwgdHlwZW9mIGV4cG9ydHMgIT09ICJvYmplY3QiKSB7CiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBpbnN0YW5jZS5leHBvcnRzIG11c3QgYmUgYW4gT2JqZWN0LiBSZWNlaXZlZCAke2V4cG9ydHN9LmApOwogICAgICAgICAgfQogICAgICAgICAgY29uc3QgeyBtZW1vcnkgfSA9IGV4cG9ydHM7CiAgICAgICAgICBpZiAoIShtZW1vcnkgaW5zdGFuY2VvZiBXZWJBc3NlbWJseS5NZW1vcnkpKSB7CiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBpbnN0YW5jZS5leHBvcnRzLm1lbW9yeSBtdXN0IGJlIGEgV2ViQXNzZW1ibHkuTWVtb3J5LiBSZWNjZWl2ZWQgJHttZW1vcnl9LmApOwogICAgICAgICAgfQogICAgICAgICAgdGhpcy5zZXRNZW1vcnkobWVtb3J5KTsKICAgICAgICAgIGlmIChleHBvcnRzLl9zdGFydCkgewogICAgICAgICAgICAgIGV4cG9ydHMuX3N0YXJ0KCk7CiAgICAgICAgICB9CiAgICAgIH0KICAgICAgZ2V0SW1wb3J0TmFtZXNwYWNlKG1vZHVsZSkgewogICAgICAgICAgbGV0IG5hbWVzcGFjZSA9IG51bGw7CiAgICAgICAgICBmb3IgKGxldCBpbXAgb2YgV2ViQXNzZW1ibHkuTW9kdWxlLmltcG9ydHMobW9kdWxlKSkgewogICAgICAgICAgICAgIC8vIFdlIG9ubHkgY2hlY2sgZm9yIHRoZSBmdW5jdGlvbnMKICAgICAgICAgICAgICBpZiAoaW1wLmtpbmQgIT09ICJmdW5jdGlvbiIpIHsKICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIC8vIFdlIGFsbG93IGZ1bmN0aW9ucyBpbiBvdGhlciBuYW1lc3BhY2VzIG90aGVyIHRoYW4gd2FzaQogICAgICAgICAgICAgIGlmICghaW1wLm1vZHVsZS5zdGFydHNXaXRoKCJ3YXNpXyIpKSB7CiAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoIW5hbWVzcGFjZSkgewogICAgICAgICAgICAgICAgICBuYW1lc3BhY2UgPSBpbXAubW9kdWxlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgaWYgKG5hbWVzcGFjZSAhPT0gaW1wLm1vZHVsZSkgewogICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJNdWx0aXBsZSBuYW1lc3BhY2VzIGRldGVjdGVkLiIpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIG5hbWVzcGFjZTsKICAgICAgfQogICAgICBnZXRJbXBvcnRzKG1vZHVsZSkgewogICAgICAgICAgbGV0IG5hbWVzcGFjZSA9IHRoaXMuZ2V0SW1wb3J0TmFtZXNwYWNlKG1vZHVsZSk7CiAgICAgICAgICBzd2l0Y2ggKG5hbWVzcGFjZSkgewogICAgICAgICAgICAgIGNhc2UgIndhc2lfdW5zdGFibGUiOgogICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgd2FzaV91bnN0YWJsZTogdGhpcy53YXNpSW1wb3J0LAogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIGNhc2UgIndhc2lfc25hcHNob3RfcHJldmlldzEiOgogICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgd2FzaV9zbmFwc2hvdF9wcmV2aWV3MTogdGhpcy53YXNpSW1wb3J0LAogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiQ2FuJ3QgZGV0ZWN0IGEgV0FTSSBuYW1lc3BhY2UgZm9yIHRoZSBXZWJBc3NlbWJseSBNb2R1bGUiKTsKICAgICAgICAgIH0KICAgICAgfQogIH0KICBXQVNJRGVmYXVsdC5kZWZhdWx0QmluZGluZ3MgPSBiaW5kaW5nczsKICAvLyBBbHNvIGV4cG9ydCBpdCBhcyBhIGZpZWxkIGluIHRoZSBleHBvcnQgb2JqZWN0CiAgY29uc3QgV0FTSSA9IFdBU0lEZWZhdWx0OwoKICBjbGFzcyBDb21tYW5kIHsNCiAgICAgIG9wdGlvbnM7DQogICAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7DQogICAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9uczsNCiAgICAgIH0NCiAgICAgIC8vIEB0cy1pZ25vcmUgLSB3YXNtRnMgaXMgbmVlZGVkIGJ5IHN1YmNsYXNzZXMNCiAgICAgIGFzeW5jIHJ1bih3YXNtRnMpIHsNCiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoInJ1biBub3QgaW1wbGVtZW50ZWQgYnkgdGhlIENvbW1hbmQgc3ViY2xhc3MiKTsNCiAgICAgIH0NCiAgfQoKICAvLyBUaGUgY2xhc3MgZm9yIFdBU0kgQ29tbWFuZHMNCiAgY2xhc3MgV0FTSUNvbW1hbmQgZXh0ZW5kcyBDb21tYW5kIHsNCiAgICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHsNCiAgICAgICAgICBzdXBlcihvcHRpb25zKTsNCiAgICAgICAgICBpZiAoIW9wdGlvbnMubW9kdWxlKSB7DQogICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiRGlkIG5vdCBmaW5kIGEgV2ViQXNzZW1ibHkuTW9kdWxlIGZvciB0aGUgV0FTSSBDb21tYW5kIik7DQogICAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgYXN5bmMgcnVuKHdhc21Gcykgew0KICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7DQogICAgICAgICAgICAgIHByZW9wZW5zOiB7DQogICAgICAgICAgICAgICAgICAiLiI6ICIuIiwNCiAgICAgICAgICAgICAgICAgICIvIjogIi8iLA0KICAgICAgICAgICAgICAgICAgLi4uKHRoaXMub3B0aW9ucy5wcmVvcGVucyB8fCB7fSksDQogICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgIGVudjogdGhpcy5vcHRpb25zLmVudiwNCiAgICAgICAgICAgICAgYXJnczogdGhpcy5vcHRpb25zLmFyZ3MsDQogICAgICAgICAgICAgIGJpbmRpbmdzOiB7DQogICAgICAgICAgICAgICAgICAuLi5XQVNJLmRlZmF1bHRCaW5kaW5ncywNCiAgICAgICAgICAgICAgICAgIGZzOiB3YXNtRnMuZnMsDQogICAgICAgICAgICAgIH0sDQogICAgICAgICAgfTsNCiAgICAgICAgICBjb25zdCB3YXNpID0gbmV3IFdBU0kob3B0aW9ucyk7DQogICAgICAgICAgbGV0IHdhc21Nb2R1bGUgPSB0aGlzLm9wdGlvbnMubW9kdWxlOw0KICAgICAgICAgIGxldCBpbnN0YW5jZSA9IGF3YWl0IFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlKHdhc21Nb2R1bGUsIHsNCiAgICAgICAgICAgICAgLi4ud2FzaS5nZXRJbXBvcnRzKHdhc21Nb2R1bGUpLA0KICAgICAgICAgIH0pOw0KICAgICAgICAgIHdhc2kuc3RhcnQoaW5zdGFuY2UpOw0KICAgICAgfQ0KICB9CgogIC8vIFRoZSBjbGFzcyBmb3IgV0FTSSBDb21tYW5kcw0KICBjbGFzcyBDYWxsYmFja0NvbW1hbmQgZXh0ZW5kcyBDb21tYW5kIHsNCiAgICAgIGNhbGxiYWNrOw0KICAgICAgc3Rkb3V0Q2FsbGJhY2s7DQogICAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7DQogICAgICAgICAgc3VwZXIob3B0aW9ucyk7DQogICAgICAgICAgaWYgKCFvcHRpb25zLmNhbGxiYWNrKSB7DQogICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiVGhlIENvbW1hbmQgT3B0aW9ucyBwcm92aWRlZCBhcmUgbm90IGZvciBhIENhbGxiYWNrIENvbW1hbmQiKTsNCiAgICAgICAgICB9DQogICAgICAgICAgdGhpcy5jYWxsYmFjayA9IG9wdGlvbnMuY2FsbGJhY2s7DQogICAgICB9DQogICAgICBhc3luYyBydW4od2FzbUZzKSB7DQogICAgICAgICAgLy8gbGV0IG15QXJyID0gbmV3IFVpbnQ4QXJyYXkoMTAyNCk7DQogICAgICAgICAgLy8gbGV0IHBpcGVkU3RkaW5EYXRhID0gdGhpcy53YXNtRnMuZnMucmVhZFN5bmMoMCwgbXlBcnIsIDAsIDEwMjQsIDApOw0KICAgICAgICAgIGxldCBzdHIgPSBhd2FpdCBQcm9taXNlLnJlc29sdmUodGhpcy5jYWxsYmFjayh0aGlzLm9wdGlvbnMsIHdhc21GcykpOw0KICAgICAgICAgIGlmICh0eXBlb2Ygc3RyID09ICJzdHJpbmciKSB7DQogICAgICAgICAgICAgIHdhc21Gcy5mcy53cml0ZUZpbGVTeW5jKCIvZGV2L3N0ZG91dCIsIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzdHIgKyAiXG4iKSk7DQogICAgICAgICAgfQ0KICAgICAgfQ0KICB9CgogIC8qKg0KCiAgIFRoaXMgZnVuY3Rpb24gcmVtb3ZlcyB0aGUgYW5zaSBlc2NhcGUgY2hhcmFjdGVycw0KICAgKG5vcm1hbGx5IHVzZWQgZm9yIHByaW50aW5nIGNvbG9ycyBhbmQgc28pDQogICBJbnNwaXJlZCBieTogaHR0cHM6Ly9naXRodWIuY29tL2NoYWxrL2Fuc2ktcmVnZXgvYmxvYi9tYXN0ZXIvaW5kZXguanMNCgogIE1JVCBMaWNlbnNlDQoKICBDb3B5cmlnaHQgKGMpIFNpbmRyZSBTb3JodXMgPHNpbmRyZXNvcmh1c0BnbWFpbC5jb20+IChzaW5kcmVzb3JodXMuY29tKQ0KCiAgUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSAiU29mdHdhcmUiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6DQoKICBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4NCgogIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS4NCiAgKi8NCiAgY29uc3QgY2xlYW5TdGRvdXQgPSAoc3Rkb3V0KSA9PiB7DQogICAgICBjb25zdCBwYXR0ZXJuID0gWw0KICAgICAgICAgICJbXFx1MDAxQlxcdTAwOUJdW1tcXF0oKSM7P10qKD86KD86KD86W2EtekEtWlxcZF0qKD86O1stYS16QS1aXFxkXFwvIyYuOj0/JUB+X10qKSopP1xcdTAwMDcpIiwNCiAgICAgICAgICAiKD86KD86XFxkezEsNH0oPzo7XFxkezAsNH0pKik/W1xcZEEtUFItVFpjZi1udHFyeT0+PH5dKSkiLA0KICAgICAgXS5qb2luKCJ8Iik7DQogICAgICBjb25zdCByZWdleFBhdHRlcm4gPSBuZXcgUmVnRXhwKHBhdHRlcm4sICJnIik7DQogICAgICByZXR1cm4gc3Rkb3V0LnJlcGxhY2UocmVnZXhQYXR0ZXJuLCAiIik7DQogIH07DQogIC8qKg0KICAgKiBUaGlzIGlzIGEgc3VwZXIgd2lsZCB3YXkgb2YgZ2V0dGluZyBtZXNzYWdlcyBzeW5jaHJvbm91c2x5IGZyb20gb3V0c3RpZGUgdGhlDQogICAqIHdvcmtlci4gQmVjYXVzZSB0aGUgV0FTSSBmdW5jdGlvbnMgYXJlIGV4cGVjdGVkIHRvIGJsb2NrIHdlIG5lZWQgdG8gcmV0cmlldmUNCiAgICogZGF0YSBzeW5jaHJvbm91c2x5Lg0KICAgKg0KICAgKiBXZSBkbyB0aGlzIGJ5IHByb21wdGluZyB0aGUgc2VydmVyIHRoYXQgd2UgbmVlZCBkYXRhIChlLmcuIGJ5IHBvc3RNZXNzYWdlKQ0KICAgKiB0aGVuIHdlIHdhaXQgYW5kIHVzZSBgaW1wb3J0U2NyaXB0c2AgdG8gc3luY2hyb25vdXNseSBsb2FkIHRoZSBkYXRhLiBPbiB0aGUNCiAgICogaG9zdC9tYWluIHRocmVhZCBzaWRlIHRoZXJlIGlzIGEgc2VydmljZSB3b3JrZXIgdGhhdCBpbnRlcmNlcHRzIHRoZSBjYWxscyB0bw0KICAgKiBpbXBvcnRTY3JpcHRzLg0KICAgKg0KICAgKiBAcGFyYW0gaWQNCiAgICogQHJldHVybnMgYW55DQogICAqLw0KICBmdW5jdGlvbiB3YWl0Rm9yTWVzc2FnZShiYXNlVVJMLCBpZCkgew0KICAgICAgbGV0IHN0YXJ0ZWRXYWl0aW5nID0gcGVyZm9ybWFuY2Uubm93KCk7DQogICAgICB3aGlsZSAodHJ1ZSkgew0KICAgICAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpOw0KICAgICAgICAgIGxldCBjdXJyZW50VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpOw0KICAgICAgICAgIHdoaWxlIChjdXJyZW50VGltZSAtIHN0YXJ0VGltZSA8IDI1MCkgew0KICAgICAgICAgICAgICBjdXJyZW50VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpOw0KICAgICAgICAgIH0NCiAgICAgICAgICBzZWxmLmltcG9ydFNjcmlwdHMoYCR7YmFzZVVSTH0vcnVubm8tbWVzc2FnZT9pZD0ke2lkfWApOw0KICAgICAgICAgIGlmIChzZWxmW2lkXSAhPT0gbnVsbCkgew0KICAgICAgICAgICAgICBjb25zdCByZXQgPSBzZWxmW2lkXTsNCiAgICAgICAgICAgICAgZGVsZXRlIHNlbGZbaWRdOw0KICAgICAgICAgICAgICByZXR1cm4gcmV0Ow0KICAgICAgICAgIH0NCiAgICAgICAgICAvLyB3YWl0ZWQgZm9yIDUgbWludXRlcw0KICAgICAgICAgIGlmIChjdXJyZW50VGltZSAtIHN0YXJ0ZWRXYWl0aW5nID4gNSAqIDYwICogMTAwMCkgew0KICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIlRpbWVvdXQgd2FpdGluZyIpOw0KICAgICAgICAgIH0NCiAgICAgIH0NCiAgfQ0KICBjbGFzcyBVc2VyRXJyb3IgZXh0ZW5kcyBFcnJvciB7DQogICAgICB1c2VyID0gdHJ1ZTsNCiAgfQ0KICBjbGFzcyBQcm9jZXNzIHsNCiAgICAgIGNvbW1hbmRPcHRpb25zOw0KICAgICAgd2FzbUZzOw0KICAgICAgb3JpZ2luYWxXYXNtRnNKc29uOw0KICAgICAgc3Rkb3V0Q2FsbGJhY2s7DQogICAgICBzdGRlcnJDYWxsYmFjazsNCiAgICAgIGVuZENhbGxiYWNrOw0KICAgICAgZXJyb3JDYWxsYmFjazsNCiAgICAgIHNoYXJlZFN0ZGluOw0KICAgICAgc3RhcnRTdGRpblJlYWRDYWxsYmFjazsNCiAgICAgIHNlcnZpY2VXb3JrZXJCYXNlVVJMOw0KICAgICAgcGlwZWRTdGRpbjsNCiAgICAgIHN0ZGluUHJvbXB0ID0gIiI7DQogICAgICByZWFkU3RkaW5Db3VudGVyOw0KICAgICAgY29tbWFuZDsNCiAgICAgIGNvbnN0cnVjdG9yKGNvbW1hbmRPcHRpb25zLCB3YXNtRnNKc29uLCBzdGRvdXRDYWxsYmFjaywgc3RkZXJyQ2FsbGJhY2ssIGVuZENhbGxiYWNrLCBlcnJvckNhbGxiYWNrLCBzdGFydFN0ZGluUmVhZENhbGxiYWNrLCBzaGFyZWRTdGRpbkJ1ZmZlciwgc2VydmljZVdvcmtlckJhc2VVUkwpIHsNCiAgICAgICAgICB0aGlzLmNvbW1hbmRPcHRpb25zID0gY29tbWFuZE9wdGlvbnM7DQogICAgICAgICAgdGhpcy53YXNtRnMgPSBuZXcgV2FzbUZzKCk7DQogICAgICAgICAgdGhpcy53YXNtRnMuZnJvbUpTT04od2FzbUZzSnNvbik7DQogICAgICAgICAgdGhpcy5vcmlnaW5hbFdhc21Gc0pzb24gPSB3YXNtRnNKc29uOw0KICAgICAgICAgIHRoaXMuc3Rkb3V0Q2FsbGJhY2sgPSBzdGRvdXRDYWxsYmFjazsNCiAgICAgICAgICB0aGlzLnN0ZGVyckNhbGxiYWNrID0gc3RkZXJyQ2FsbGJhY2s7DQogICAgICAgICAgdGhpcy5lbmRDYWxsYmFjayA9IGVuZENhbGxiYWNrOw0KICAgICAgICAgIHRoaXMuZXJyb3JDYWxsYmFjayA9IGVycm9yQ2FsbGJhY2s7DQogICAgICAgICAgbGV0IHNoYXJlZFN0ZGluID0gdW5kZWZpbmVkOw0KICAgICAgICAgIGlmIChzaGFyZWRTdGRpbkJ1ZmZlcikgew0KICAgICAgICAgICAgICBzaGFyZWRTdGRpbiA9IG5ldyBJbnQzMkFycmF5KHNoYXJlZFN0ZGluQnVmZmVyKTsNCiAgICAgICAgICB9DQogICAgICAgICAgaWYgKGNvbW1hbmRPcHRpb25zLm1vZHVsZSkgew0KICAgICAgICAgICAgICB0aGlzLmNvbW1hbmQgPSBuZXcgV0FTSUNvbW1hbmQoY29tbWFuZE9wdGlvbnMpOw0KICAgICAgICAgIH0NCiAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgdGhpcy5jb21tYW5kID0gbmV3IENhbGxiYWNrQ29tbWFuZChjb21tYW5kT3B0aW9ucyk7DQogICAgICAgICAgfQ0KICAgICAgICAgIHRoaXMud2FzbUZzLnZvbHVtZS5mZHNbMF0ubm9kZS5yZWFkID0gdGhpcy5zdGRpblJlYWQuYmluZCh0aGlzKTsNCiAgICAgICAgICB0aGlzLndhc21Gcy52b2x1bWUuZmRzWzFdLm5vZGUud3JpdGUgPSB0aGlzLnN0ZG91dFdyaXRlLmJpbmQodGhpcyk7DQogICAgICAgICAgdGhpcy53YXNtRnMudm9sdW1lLmZkc1syXS5ub2RlLndyaXRlID0gdGhpcy5zdGRlcnJXcml0ZS5iaW5kKHRoaXMpOw0KICAgICAgICAgIGNvbnN0IHR0eUZkID0gdGhpcy53YXNtRnMudm9sdW1lLm9wZW5TeW5jKCIvZGV2L3R0eSIsICJ3KyIpOw0KICAgICAgICAgIHRoaXMud2FzbUZzLnZvbHVtZS5mZHNbdHR5RmRdLm5vZGUucmVhZCA9IHRoaXMuc3RkaW5SZWFkLmJpbmQodGhpcyk7DQogICAgICAgICAgdGhpcy53YXNtRnMudm9sdW1lLmZkc1t0dHlGZF0ubm9kZS53cml0ZSA9IHRoaXMuc3Rkb3V0V3JpdGUuYmluZCh0aGlzKTsNCiAgICAgICAgICB0aGlzLnNoYXJlZFN0ZGluID0gc2hhcmVkU3RkaW47DQogICAgICAgICAgdGhpcy5zdGFydFN0ZGluUmVhZENhbGxiYWNrID0gc3RhcnRTdGRpblJlYWRDYWxsYmFjazsNCiAgICAgICAgICB0aGlzLnNlcnZpY2VXb3JrZXJCYXNlVVJMID0gc2VydmljZVdvcmtlckJhc2VVUkw7DQogICAgICAgICAgdGhpcy5yZWFkU3RkaW5Db3VudGVyID0gMDsNCiAgICAgICAgICB0aGlzLnBpcGVkU3RkaW4gPSAiIjsNCiAgICAgIH0NCiAgICAgIGFzeW5jIHN0YXJ0KHBpcGVkU3RkaW5EYXRhKSB7DQogICAgICAgICAgY29uc3QgZW5kID0gKGV4aXRTdGF0dXMpID0+IHsNCiAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgICAgICAgICB0aGlzLmVuZENhbGxiYWNrKHRoaXMud2FzbUZzLnRvSlNPTigpLCBleGl0U3RhdHVzKTsNCiAgICAgICAgICAgICAgfSwgNTApOw0KICAgICAgICAgIH07DQogICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgaWYgKHBpcGVkU3RkaW5EYXRhKSB7DQogICAgICAgICAgICAgICAgICB0aGlzLnBpcGVkU3RkaW4gPSBuZXcgVGV4dERlY29kZXIoInV0Zi04IikuZGVjb2RlKHBpcGVkU3RkaW5EYXRhKTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICBhd2FpdCB0aGlzLmNvbW1hbmQucnVuKHRoaXMud2FzbUZzKTsNCiAgICAgICAgICAgICAgZW5kKDApOw0KICAgICAgICAgIH0NCiAgICAgICAgICBjYXRjaCAoZSkgew0KICAgICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIFdBU0lFeGl0RXJyb3IpIHsNCiAgICAgICAgICAgICAgICAgIGVuZChlLmNvZGUgfHwgMCk7DQogICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgZWxzZSBpZiAoZSBpbnN0YW5jZW9mIFVzZXJFcnJvcikgew0KICAgICAgICAgICAgICAgICAgLy8gRG9uJ3QgRXJyb3IsIGp1c3QgZW5kIHRoZSBwcm9jZXNzDQogICAgICAgICAgICAgICAgICAvLyBUT0RPOiBGaWd1cmUgb3V0IGNvcnJlY3Qgc2VtYW50aWNzDQogICAgICAgICAgICAgICAgICBlbmQoMCk7DQogICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgZWxzZSBpZiAoZSBpbnN0YW5jZW9mIFdBU0lLaWxsRXJyb3IpIHsNCiAgICAgICAgICAgICAgICAgIHRoaXMuZXJyb3JDYWxsYmFjayhgS2lsbGVkIHdpdGggc2lnbmFsOiAke2Uuc2lnbmFsfWAsIHRoaXMud2FzbUZzLnRvSlNPTigpLCBmYWxzZSk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICB0aGlzLmVycm9yQ2FsbGJhY2soZS50b1N0cmluZygpLCB0aGlzLndhc21Gcy50b0pTT04oKSwgZmFsc2UpOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgc3Rkb3V0V3JpdGUoc3Rkb3V0QnVmZmVyDQogICAgICAvLyBvZmZzZXQ6IG51bWJlciA9IDAsDQogICAgICAvLyBsZW5ndGg6IG51bWJlciA9IHN0ZG91dEJ1ZmZlci5ieXRlTGVuZ3RoLA0KICAgICAgLy8gcG9zaXRpb24/OiBudW1iZXINCiAgICAgICkgew0KICAgICAgICAgIGlmICh0aGlzLnN0ZG91dENhbGxiYWNrKSB7DQogICAgICAgICAgICAgIHRoaXMuc3Rkb3V0Q2FsbGJhY2soc3Rkb3V0QnVmZmVyKTsNCiAgICAgICAgICB9DQogICAgICAgICAgbGV0IGRhdGFMaW5lcyA9IG5ldyBUZXh0RGVjb2RlcigidXRmLTgiKS5kZWNvZGUoc3Rkb3V0QnVmZmVyKS5zcGxpdCgiXG4iKTsNCiAgICAgICAgICBpZiAoZGF0YUxpbmVzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgdGhpcy5zdGRpblByb21wdCA9IGNsZWFuU3Rkb3V0KGRhdGFMaW5lc1tkYXRhTGluZXMubGVuZ3RoIC0gMV0pOw0KICAgICAgICAgIH0NCiAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgdGhpcy5zdGRpblByb21wdCA9ICIiOw0KICAgICAgICAgIH0NCiAgICAgICAgICByZXR1cm4gc3Rkb3V0QnVmZmVyLmxlbmd0aDsNCiAgICAgIH0NCiAgICAgIHN0ZGVycldyaXRlKHN0ZGVyckJ1ZmZlcg0KICAgICAgLy8gb2Zmc2V0OiBudW1iZXIgPSAwLA0KICAgICAgLy8gbGVuZ3RoOiBudW1iZXIgPSBzdGRlcnJCdWZmZXIuYnl0ZUxlbmd0aCwNCiAgICAgIC8vIHBvc2l0aW9uPzogbnVtYmVyDQogICAgICApIHsNCiAgICAgICAgICBpZiAodGhpcy5zdGRlcnJDYWxsYmFjaykgew0KICAgICAgICAgICAgICB0aGlzLnN0ZGVyckNhbGxiYWNrKHN0ZGVyckJ1ZmZlcik7DQogICAgICAgICAgfQ0KICAgICAgICAgIC8vbGV0IGRhdGFMaW5lcyA9IG5ldyBUZXh0RGVjb2RlcigidXRmLTgiKS5kZWNvZGUoc3RkZXJyQnVmZmVyKS5zcGxpdCgiXG4iKTsNCiAgICAgICAgICByZXR1cm4gc3RkZXJyQnVmZmVyLmxlbmd0aDsNCiAgICAgIH0NCiAgICAgIC8vIEhhbmRsZSByZWFkIG9mIHN0ZGluLCBzaW1pbGFyIHRvIEMgcmVhZA0KICAgICAgLy8gaHR0cHM6Ly9saW51eC5kaWUubmV0L21hbi8yL3JlYWQNCiAgICAgIC8vIFRoaXMgaXMgdGhlIGJvdHRvbSBvZiB0aGUgImxheWVycyBzdGFjayIuIFRoaXMgaXMgdGhlIG91dGVyIGJpbmRpbmcuDQogICAgICAvLyBUaGlzIGlzIHRoZSB0aGUgdGhpbmcgdGhhdCByZXR1cm5zIC0xIGJlY2F1c2UgaXQgaXMgdGhlIGFjdHVhbCBmaWxlIHN5c3RlbSwNCiAgICAgIC8vIGJ1dCBpdCBpcyB1cCB0byBXQVNJIGxpYiAgKHdhc2kudHMpIHRvIGZpbmQgb3V0IHdoeSB0aGlzIGVycm9yJ2QNCiAgICAgIHN0ZGluUmVhZChzdGRpbkJ1ZmZlcg0KICAgICAgLy8gb2Zmc2V0OiBudW1iZXIgPSAwLA0KICAgICAgLy8gbGVuZ3RoOiBudW1iZXIgPSBzdGRpbkJ1ZmZlci5ieXRlTGVuZ3RoLA0KICAgICAgLy8gcG9zaXRpb24/OiBudW1iZXINCiAgICAgICkgew0KICAgICAgICAgIGlmICh0aGlzLnJlYWRTdGRpbkNvdW50ZXIgJSAyICE9PSAwKSB7DQogICAgICAgICAgICAgIHRoaXMucmVhZFN0ZGluQ291bnRlcisrOw0KICAgICAgICAgICAgICByZXR1cm4gMDsNCiAgICAgICAgICB9DQogICAgICAgICAgbGV0IHJlc3BvbnNlU3RkaW4gPSBudWxsOw0KICAgICAgICAgIGlmICh0aGlzLnBpcGVkU3RkaW4pIHsNCiAgICAgICAgICAgICAgcmVzcG9uc2VTdGRpbiA9IHRoaXMucGlwZWRTdGRpbjsNCiAgICAgICAgICAgICAgdGhpcy5waXBlZFN0ZGluID0gIiI7DQogICAgICAgICAgICAgIHRoaXMucmVhZFN0ZGluQ291bnRlcisrOw0KICAgICAgICAgIH0NCiAgICAgICAgICBlbHNlIGlmICh0aGlzLnNoYXJlZFN0ZGluICYmIHRoaXMuc3RhcnRTdGRpblJlYWRDYWxsYmFjaykgew0KICAgICAgICAgICAgICB0aGlzLnN0YXJ0U3RkaW5SZWFkQ2FsbGJhY2soKTsNCiAgICAgICAgICAgICAgQXRvbWljcy53YWl0KHRoaXMuc2hhcmVkU3RkaW4sIDAsIC0xKTsNCiAgICAgICAgICAgICAgLy8gR3JhYiB0aGUgb2YgZWxlbWVudHMNCiAgICAgICAgICAgICAgY29uc3QgbnVtYmVyT2ZFbGVtZW50cyA9IHRoaXMuc2hhcmVkU3RkaW5bMF07DQogICAgICAgICAgICAgIHRoaXMuc2hhcmVkU3RkaW5bMF0gPSAtMTsNCiAgICAgICAgICAgICAgY29uc3QgbmV3U3RkaW5EYXRhID0gbmV3IFVpbnQ4QXJyYXkobnVtYmVyT2ZFbGVtZW50cyk7DQogICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtYmVyT2ZFbGVtZW50czsgaSsrKSB7DQogICAgICAgICAgICAgICAgICBuZXdTdGRpbkRhdGFbaV0gPSB0aGlzLnNoYXJlZFN0ZGluWzEgKyBpXTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICByZXNwb25zZVN0ZGluID0gbmV3IFRleHREZWNvZGVyKCJ1dGYtOCIpLmRlY29kZShuZXdTdGRpbkRhdGEpOw0KICAgICAgICAgIH0NCiAgICAgICAgICBlbHNlIGlmICh0aGlzLnNlcnZpY2VXb3JrZXJCYXNlVVJMICYmIHRoaXMuc3RhcnRTdGRpblJlYWRDYWxsYmFjaykgew0KICAgICAgICAgICAgICB0aGlzLnN0YXJ0U3RkaW5SZWFkQ2FsbGJhY2soKTsNCiAgICAgICAgICAgICAgcmVzcG9uc2VTdGRpbiA9IHdhaXRGb3JNZXNzYWdlKHRoaXMuc2VydmljZVdvcmtlckJhc2VVUkwsICJzdGRpbiIpOw0KICAgICAgICAgIH0NCiAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgcmVzcG9uc2VTdGRpbiA9IHByb21wdCh0aGlzLnN0ZGluUHJvbXB0KTsNCiAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlU3RkaW4gPT09IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0ZG91dENhbGxiYWNrKSB7DQogICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGRvdXRDYWxsYmFjayhuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoIlxuIikpOw0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgY29uc3QgdXNlckVycm9yID0gbmV3IFVzZXJFcnJvcigiUHJvY2VzcyBraWxsZWQgYnkgdXNlciIpOw0KICAgICAgICAgICAgICAgICAgdGhyb3cgdXNlckVycm9yOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIHJlc3BvbnNlU3RkaW4gKz0gIlxuIjsNCiAgICAgICAgICAgICAgaWYgKHRoaXMuc3Rkb3V0Q2FsbGJhY2spIHsNCiAgICAgICAgICAgICAgICAgIHRoaXMuc3Rkb3V0Q2FsbGJhY2sobmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKHJlc3BvbnNlU3RkaW4pKTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgICAvLyBGaXJzdCBjaGVjayBmb3IgZXJyb3JzDQogICAgICAgICAgaWYgKCFyZXNwb25zZVN0ZGluKSB7DQogICAgICAgICAgICAgIHJldHVybiAwOw0KICAgICAgICAgIH0NCiAgICAgICAgICBjb25zdCBidWZmZXIgPSBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUocmVzcG9uc2VTdGRpbik7DQogICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCBidWZmZXIubGVuZ3RoOyArK3gpIHsNCiAgICAgICAgICAgICAgc3RkaW5CdWZmZXJbeF0gPSBidWZmZXJbeF07DQogICAgICAgICAgfQ0KICAgICAgICAgIC8vIFJldHVybiB0aGUgY3VycmVudCBzdGRpbg0KICAgICAgICAgIHJldHVybiBidWZmZXIubGVuZ3RoOw0KICAgICAgfQ0KICB9CgogIC8vIEV4cG9wcnQgcHJvY2VzcyBhcyBhIHdvcmtlcg0KICBleHBvc2UoUHJvY2Vzcyk7Cgp9KSgpOwo=",Lu="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Tu(g){if(g.__esModule)return g;var I=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(g).forEach((function(A){var C=Object.getOwnPropertyDescriptor(g,A);Object.defineProperty(I,A,C.get?C:{enumerable:!0,get:function(){return g[A]}})})),I}var zu={exports:{}},Pu={},Uu={};Object.defineProperty(Uu,"__esModule",{value:!0}),Uu.constants=void 0,Uu.constants={O_RDONLY:0,O_WRONLY:1,O_RDWR:2,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:64,O_EXCL:128,O_NOCTTY:256,O_TRUNC:512,O_APPEND:1024,O_DIRECTORY:65536,O_NOATIME:262144,O_NOFOLLOW:131072,O_SYNC:1052672,O_DIRECT:16384,O_NONBLOCK:2048,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_FS_SYMLINK_DIR:1,UV_FS_SYMLINK_JUNCTION:2,UV_FS_COPYFILE_EXCL:1,UV_FS_COPYFILE_FICLONE:2,UV_FS_COPYFILE_FICLONE_FORCE:4,COPYFILE_EXCL:1,COPYFILE_FICLONE:2,COPYFILE_FICLONE_FORCE:4};var xu={};"function"==typeof BigInt?xu.default=BigInt:xu.default=function(){throw new Error("BigInt is not supported in this environment.")},Object.defineProperty(Pu,"__esModule",{value:!0}),Pu.Stats=void 0;var ju=Uu,_u=xu,$u=ju.constants.S_IFMT,qu=ju.constants.S_IFDIR,gG=ju.constants.S_IFREG,IG=ju.constants.S_IFBLK,AG=ju.constants.S_IFCHR,CG=ju.constants.S_IFLNK,tG=ju.constants.S_IFIFO,iG=ju.constants.S_IFSOCK,eG=function(){function g(){}return g.build=function(I,A){void 0===A&&(A=!1);var C=new g,t=I.uid,i=I.gid,e=I.atime,o=I.mtime,n=I.ctime,s=A?_u.default:function(g){return g};C.uid=s(t),C.gid=s(i),C.rdev=s(0),C.blksize=s(4096),C.ino=s(I.ino),C.size=s(I.getSize()),C.blocks=s(1),C.atime=e,C.mtime=o,C.ctime=n,C.birthtime=n,C.atimeMs=s(e.getTime()),C.mtimeMs=s(o.getTime());var l=s(n.getTime());return C.ctimeMs=l,C.birthtimeMs=l,C.dev=s(0),C.mode=s(I.mode),C.nlink=s(I.nlink),C},g.prototype._checkModeProperty=function(g){return(Number(this.mode)&$u)===g},g.prototype.isDirectory=function(){return this._checkModeProperty(qu)},g.prototype.isFile=function(){return this._checkModeProperty(gG)},g.prototype.isBlockDevice=function(){return this._checkModeProperty(IG)},g.prototype.isCharacterDevice=function(){return this._checkModeProperty(AG)},g.prototype.isSymbolicLink=function(){return this._checkModeProperty(CG)},g.prototype.isFIFO=function(){return this._checkModeProperty(tG)},g.prototype.isSocket=function(){return this._checkModeProperty(iG)},g}();Pu.Stats=eG,Pu.default=eG;for(var oG={},nG={},sG={},lG={},rG={byteLength:function(g){var I=uG(g),A=I[0],C=I[1];return 3*(A+C)/4-C},toByteArray:function(g){var I,A,C=uG(g),t=C[0],i=C[1],e=new dG(function(g,I,A){return 3*(I+A)/4-A}(0,t,i)),o=0,n=i>0?t-4:t;for(A=0;A<n;A+=4)I=aG[g.charCodeAt(A)]<<18|aG[g.charCodeAt(A+1)]<<12|aG[g.charCodeAt(A+2)]<<6|aG[g.charCodeAt(A+3)],e[o++]=I>>16&255,e[o++]=I>>8&255,e[o++]=255&I;2===i&&(I=aG[g.charCodeAt(A)]<<2|aG[g.charCodeAt(A+1)]>>4,e[o++]=255&I);1===i&&(I=aG[g.charCodeAt(A)]<<10|aG[g.charCodeAt(A+1)]<<4|aG[g.charCodeAt(A+2)]>>2,e[o++]=I>>8&255,e[o++]=255&I);return e},fromByteArray:function(g){for(var I,A=g.length,C=A%3,t=[],i=16383,e=0,o=A-C;e<o;e+=i)t.push(GG(g,e,e+i>o?o:e+i));1===C?(I=g[A-1],t.push(cG[I>>2]+cG[I<<4&63]+"==")):2===C&&(I=(g[A-2]<<8)+g[A-1],t.push(cG[I>>10]+cG[I>>4&63]+cG[I<<2&63]+"="));return t.join("")}},cG=[],aG=[],dG="undefined"!=typeof Uint8Array?Uint8Array:Array,hG="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",mG=0,ZG=hG.length;mG<ZG;++mG)cG[mG]=hG[mG],aG[hG.charCodeAt(mG)]=mG;function uG(g){var I=g.length;if(I%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var A=g.indexOf("=");return-1===A&&(A=I),[A,A===I?0:4-A%4]}function GG(g,I,A){for(var C,t,i=[],e=I;e<A;e+=3)C=(g[e]<<16&16711680)+(g[e+1]<<8&65280)+(255&g[e+2]),i.push(cG[(t=C)>>18&63]+cG[t>>12&63]+cG[t>>6&63]+cG[63&t]);return i.join("")}aG["-".charCodeAt(0)]=62,aG["_".charCodeAt(0)]=63;var bG={
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
read:function(g,I,A,C,t){var i,e,o=8*t-C-1,n=(1<<o)-1,s=n>>1,l=-7,r=A?t-1:0,c=A?-1:1,a=g[I+r];for(r+=c,i=a&(1<<-l)-1,a>>=-l,l+=o;l>0;i=256*i+g[I+r],r+=c,l-=8);for(e=i&(1<<-l)-1,i>>=-l,l+=C;l>0;e=256*e+g[I+r],r+=c,l-=8);if(0===i)i=1-s;else{if(i===n)return e?NaN:1/0*(a?-1:1);e+=Math.pow(2,C),i-=s}return(a?-1:1)*e*Math.pow(2,i-C)},write:function(g,I,A,C,t,i){var e,o,n,s=8*i-t-1,l=(1<<s)-1,r=l>>1,c=23===t?Math.pow(2,-24)-Math.pow(2,-77):0,a=C?0:i-1,d=C?1:-1,h=I<0||0===I&&1/I<0?1:0;for(I=Math.abs(I),isNaN(I)||I===1/0?(o=isNaN(I)?1:0,e=l):(e=Math.floor(Math.log(I)/Math.LN2),I*(n=Math.pow(2,-e))<1&&(e--,n*=2),(I+=e+r>=1?c/n:c*Math.pow(2,1-r))*n>=2&&(e++,n/=2),e+r>=l?(o=0,e=l):e+r>=1?(o=(I*n-1)*Math.pow(2,t),e+=r):(o=I*Math.pow(2,r-1)*Math.pow(2,t),e=0));t>=8;g[A+a]=255&o,a+=d,o/=256,t-=8);for(e=e<<t|o,s+=t;s>0;g[A+a]=255&e,a+=d,e/=256,s-=8);g[A+a-d]|=128*h}};
/*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   */
(function(g){const I=rG,A=bG,C="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;g.Buffer=e,g.SlowBuffer=function(g){+g!=g&&(g=0);return e.alloc(+g)},g.INSPECT_MAX_BYTES=50;const t=2147483647;function i(g){if(g>t)throw new RangeError('The value "'+g+'" is invalid for option "size"');const I=new Uint8Array(g);return Object.setPrototypeOf(I,e.prototype),I}function e(g,I,A){if("number"==typeof g){if("string"==typeof I)throw new TypeError('The "string" argument must be of type string. Received type number');return s(g)}return o(g,I,A)}function o(g,I,A){if("string"==typeof g)return function(g,I){"string"==typeof I&&""!==I||(I="utf8");if(!e.isEncoding(I))throw new TypeError("Unknown encoding: "+I);const A=0|a(g,I);let C=i(A);const t=C.write(g,I);t!==A&&(C=C.slice(0,t));return C}(g,I);if(ArrayBuffer.isView(g))return function(g){if(P(g,Uint8Array)){const I=new Uint8Array(g);return r(I.buffer,I.byteOffset,I.byteLength)}return l(g)}(g);if(null==g)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g);if(P(g,ArrayBuffer)||g&&P(g.buffer,ArrayBuffer))return r(g,I,A);if("undefined"!=typeof SharedArrayBuffer&&(P(g,SharedArrayBuffer)||g&&P(g.buffer,SharedArrayBuffer)))return r(g,I,A);if("number"==typeof g)throw new TypeError('The "value" argument must not be of type number. Received type number');const C=g.valueOf&&g.valueOf();if(null!=C&&C!==g)return e.from(C,I,A);const t=function(g){if(e.isBuffer(g)){const I=0|c(g.length),A=i(I);return 0===A.length||g.copy(A,0,0,I),A}if(void 0!==g.length)return"number"!=typeof g.length||U(g.length)?i(0):l(g);if("Buffer"===g.type&&Array.isArray(g.data))return l(g.data)}(g);if(t)return t;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof g[Symbol.toPrimitive])return e.from(g[Symbol.toPrimitive]("string"),I,A);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g)}function n(g){if("number"!=typeof g)throw new TypeError('"size" argument must be of type number');if(g<0)throw new RangeError('The value "'+g+'" is invalid for option "size"')}function s(g){return n(g),i(g<0?0:0|c(g))}function l(g){const I=g.length<0?0:0|c(g.length),A=i(I);for(let C=0;C<I;C+=1)A[C]=255&g[C];return A}function r(g,I,A){if(I<0||g.byteLength<I)throw new RangeError('"offset" is outside of buffer bounds');if(g.byteLength<I+(A||0))throw new RangeError('"length" is outside of buffer bounds');let C;return C=void 0===I&&void 0===A?new Uint8Array(g):void 0===A?new Uint8Array(g,I):new Uint8Array(g,I,A),Object.setPrototypeOf(C,e.prototype),C}function c(g){if(g>=t)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+t.toString(16)+" bytes");return 0|g}function a(g,I){if(e.isBuffer(g))return g.length;if(ArrayBuffer.isView(g)||P(g,ArrayBuffer))return g.byteLength;if("string"!=typeof g)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof g);const A=g.length,C=arguments.length>2&&!0===arguments[2];if(!C&&0===A)return 0;let t=!1;for(;;)switch(I){case"ascii":case"latin1":case"binary":return A;case"utf8":case"utf-8":return L(g).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*A;case"hex":return A>>>1;case"base64":return T(g).length;default:if(t)return C?-1:L(g).length;I=(""+I).toLowerCase(),t=!0}}function d(g,I,A){let C=!1;if((void 0===I||I<0)&&(I=0),I>this.length)return"";if((void 0===A||A>this.length)&&(A=this.length),A<=0)return"";if((A>>>=0)<=(I>>>=0))return"";for(g||(g="utf8");;)switch(g){case"hex":return f(this,I,A);case"utf8":case"utf-8":return w(this,I,A);case"ascii":return S(this,I,A);case"latin1":case"binary":return K(this,I,A);case"base64":return y(this,I,A);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Y(this,I,A);default:if(C)throw new TypeError("Unknown encoding: "+g);g=(g+"").toLowerCase(),C=!0}}function h(g,I,A){const C=g[I];g[I]=g[A],g[A]=C}function m(g,I,A,C,t){if(0===g.length)return-1;if("string"==typeof A?(C=A,A=0):A>2147483647?A=2147483647:A<-2147483648&&(A=-2147483648),U(A=+A)&&(A=t?0:g.length-1),A<0&&(A=g.length+A),A>=g.length){if(t)return-1;A=g.length-1}else if(A<0){if(!t)return-1;A=0}if("string"==typeof I&&(I=e.from(I,C)),e.isBuffer(I))return 0===I.length?-1:Z(g,I,A,C,t);if("number"==typeof I)return I&=255,"function"==typeof Uint8Array.prototype.indexOf?t?Uint8Array.prototype.indexOf.call(g,I,A):Uint8Array.prototype.lastIndexOf.call(g,I,A):Z(g,[I],A,C,t);throw new TypeError("val must be string, number or Buffer")}function Z(g,I,A,C,t){let i,e=1,o=g.length,n=I.length;if(void 0!==C&&("ucs2"===(C=String(C).toLowerCase())||"ucs-2"===C||"utf16le"===C||"utf-16le"===C)){if(g.length<2||I.length<2)return-1;e=2,o/=2,n/=2,A/=2}function s(g,I){return 1===e?g[I]:g.readUInt16BE(I*e)}if(t){let C=-1;for(i=A;i<o;i++)if(s(g,i)===s(I,-1===C?0:i-C)){if(-1===C&&(C=i),i-C+1===n)return C*e}else-1!==C&&(i-=i-C),C=-1}else for(A+n>o&&(A=o-n),i=A;i>=0;i--){let A=!0;for(let C=0;C<n;C++)if(s(g,i+C)!==s(I,C)){A=!1;break}if(A)return i}return-1}function u(g,I,A,C){A=Number(A)||0;const t=g.length-A;C?(C=Number(C))>t&&(C=t):C=t;const i=I.length;let e;for(C>i/2&&(C=i/2),e=0;e<C;++e){const C=parseInt(I.substr(2*e,2),16);if(U(C))return e;g[A+e]=C}return e}function G(g,I,A,C){return z(L(I,g.length-A),g,A,C)}function b(g,I,A,C){return z(function(g){const I=[];for(let A=0;A<g.length;++A)I.push(255&g.charCodeAt(A));return I}(I),g,A,C)}function p(g,I,A,C){return z(T(I),g,A,C)}function B(g,I,A,C){return z(function(g,I){let A,C,t;const i=[];for(let e=0;e<g.length&&!((I-=2)<0);++e)A=g.charCodeAt(e),C=A>>8,t=A%256,i.push(t),i.push(C);return i}(I,g.length-A),g,A,C)}function y(g,A,C){return 0===A&&C===g.length?I.fromByteArray(g):I.fromByteArray(g.slice(A,C))}function w(g,I,A){A=Math.min(g.length,A);const C=[];let t=I;for(;t<A;){const I=g[t];let i=null,e=I>239?4:I>223?3:I>191?2:1;if(t+e<=A){let A,C,o,n;switch(e){case 1:I<128&&(i=I);break;case 2:A=g[t+1],128==(192&A)&&(n=(31&I)<<6|63&A,n>127&&(i=n));break;case 3:A=g[t+1],C=g[t+2],128==(192&A)&&128==(192&C)&&(n=(15&I)<<12|(63&A)<<6|63&C,n>2047&&(n<55296||n>57343)&&(i=n));break;case 4:A=g[t+1],C=g[t+2],o=g[t+3],128==(192&A)&&128==(192&C)&&128==(192&o)&&(n=(15&I)<<18|(63&A)<<12|(63&C)<<6|63&o,n>65535&&n<1114112&&(i=n))}}null===i?(i=65533,e=1):i>65535&&(i-=65536,C.push(i>>>10&1023|55296),i=56320|1023&i),C.push(i),t+=e}return function(g){const I=g.length;if(I<=W)return String.fromCharCode.apply(String,g);let A="",C=0;for(;C<I;)A+=String.fromCharCode.apply(String,g.slice(C,C+=W));return A}(C)}g.kMaxLength=t,e.TYPED_ARRAY_SUPPORT=function(){try{const g=new Uint8Array(1),I={foo:function(){return 42}};return Object.setPrototypeOf(I,Uint8Array.prototype),Object.setPrototypeOf(g,I),42===g.foo()}catch(dD){return!1}}(),e.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(e.prototype,"parent",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.buffer}}),Object.defineProperty(e.prototype,"offset",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.byteOffset}}),e.poolSize=8192,e.from=function(g,I,A){return o(g,I,A)},Object.setPrototypeOf(e.prototype,Uint8Array.prototype),Object.setPrototypeOf(e,Uint8Array),e.alloc=function(g,I,A){return function(g,I,A){return n(g),g<=0?i(g):void 0!==I?"string"==typeof A?i(g).fill(I,A):i(g).fill(I):i(g)}(g,I,A)},e.allocUnsafe=function(g){return s(g)},e.allocUnsafeSlow=function(g){return s(g)},e.isBuffer=function(g){return null!=g&&!0===g._isBuffer&&g!==e.prototype},e.compare=function(g,I){if(P(g,Uint8Array)&&(g=e.from(g,g.offset,g.byteLength)),P(I,Uint8Array)&&(I=e.from(I,I.offset,I.byteLength)),!e.isBuffer(g)||!e.isBuffer(I))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(g===I)return 0;let A=g.length,C=I.length;for(let t=0,i=Math.min(A,C);t<i;++t)if(g[t]!==I[t]){A=g[t],C=I[t];break}return A<C?-1:C<A?1:0},e.isEncoding=function(g){switch(String(g).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(g,I){if(!Array.isArray(g))throw new TypeError('"list" argument must be an Array of Buffers');if(0===g.length)return e.alloc(0);let A;if(void 0===I)for(I=0,A=0;A<g.length;++A)I+=g[A].length;const C=e.allocUnsafe(I);let t=0;for(A=0;A<g.length;++A){let I=g[A];if(P(I,Uint8Array))t+I.length>C.length?(e.isBuffer(I)||(I=e.from(I)),I.copy(C,t)):Uint8Array.prototype.set.call(C,I,t);else{if(!e.isBuffer(I))throw new TypeError('"list" argument must be an Array of Buffers');I.copy(C,t)}t+=I.length}return C},e.byteLength=a,e.prototype._isBuffer=!0,e.prototype.swap16=function(){const g=this.length;if(g%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let I=0;I<g;I+=2)h(this,I,I+1);return this},e.prototype.swap32=function(){const g=this.length;if(g%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let I=0;I<g;I+=4)h(this,I,I+3),h(this,I+1,I+2);return this},e.prototype.swap64=function(){const g=this.length;if(g%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let I=0;I<g;I+=8)h(this,I,I+7),h(this,I+1,I+6),h(this,I+2,I+5),h(this,I+3,I+4);return this},e.prototype.toString=function(){const g=this.length;return 0===g?"":0===arguments.length?w(this,0,g):d.apply(this,arguments)},e.prototype.toLocaleString=e.prototype.toString,e.prototype.equals=function(g){if(!e.isBuffer(g))throw new TypeError("Argument must be a Buffer");return this===g||0===e.compare(this,g)},e.prototype.inspect=function(){let I="";const A=g.INSPECT_MAX_BYTES;return I=this.toString("hex",0,A).replace(/(.{2})/g,"$1 ").trim(),this.length>A&&(I+=" ... "),"<Buffer "+I+">"},C&&(e.prototype[C]=e.prototype.inspect),e.prototype.compare=function(g,I,A,C,t){if(P(g,Uint8Array)&&(g=e.from(g,g.offset,g.byteLength)),!e.isBuffer(g))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof g);if(void 0===I&&(I=0),void 0===A&&(A=g?g.length:0),void 0===C&&(C=0),void 0===t&&(t=this.length),I<0||A>g.length||C<0||t>this.length)throw new RangeError("out of range index");if(C>=t&&I>=A)return 0;if(C>=t)return-1;if(I>=A)return 1;if(this===g)return 0;let i=(t>>>=0)-(C>>>=0),o=(A>>>=0)-(I>>>=0);const n=Math.min(i,o),s=this.slice(C,t),l=g.slice(I,A);for(let e=0;e<n;++e)if(s[e]!==l[e]){i=s[e],o=l[e];break}return i<o?-1:o<i?1:0},e.prototype.includes=function(g,I,A){return-1!==this.indexOf(g,I,A)},e.prototype.indexOf=function(g,I,A){return m(this,g,I,A,!0)},e.prototype.lastIndexOf=function(g,I,A){return m(this,g,I,A,!1)},e.prototype.write=function(g,I,A,C){if(void 0===I)C="utf8",A=this.length,I=0;else if(void 0===A&&"string"==typeof I)C=I,A=this.length,I=0;else{if(!isFinite(I))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");I>>>=0,isFinite(A)?(A>>>=0,void 0===C&&(C="utf8")):(C=A,A=void 0)}const t=this.length-I;if((void 0===A||A>t)&&(A=t),g.length>0&&(A<0||I<0)||I>this.length)throw new RangeError("Attempt to write outside buffer bounds");C||(C="utf8");let i=!1;for(;;)switch(C){case"hex":return u(this,g,I,A);case"utf8":case"utf-8":return G(this,g,I,A);case"ascii":case"latin1":case"binary":return b(this,g,I,A);case"base64":return p(this,g,I,A);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,g,I,A);default:if(i)throw new TypeError("Unknown encoding: "+C);C=(""+C).toLowerCase(),i=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const W=4096;function S(g,I,A){let C="";A=Math.min(g.length,A);for(let t=I;t<A;++t)C+=String.fromCharCode(127&g[t]);return C}function K(g,I,A){let C="";A=Math.min(g.length,A);for(let t=I;t<A;++t)C+=String.fromCharCode(g[t]);return C}function f(g,I,A){const C=g.length;(!I||I<0)&&(I=0),(!A||A<0||A>C)&&(A=C);let t="";for(let i=I;i<A;++i)t+=x[g[i]];return t}function Y(g,I,A){const C=g.slice(I,A);let t="";for(let i=0;i<C.length-1;i+=2)t+=String.fromCharCode(C[i]+256*C[i+1]);return t}function X(g,I,A){if(g%1!=0||g<0)throw new RangeError("offset is not uint");if(g+I>A)throw new RangeError("Trying to access beyond buffer length")}function V(g,I,A,C,t,i){if(!e.isBuffer(g))throw new TypeError('"buffer" argument must be a Buffer instance');if(I>t||I<i)throw new RangeError('"value" argument is out of bounds');if(A+C>g.length)throw new RangeError("Index out of range")}function O(g,I,A,C,t){M(I,C,t,g,A,7);let i=Number(I&BigInt(4294967295));g[A++]=i,i>>=8,g[A++]=i,i>>=8,g[A++]=i,i>>=8,g[A++]=i;let e=Number(I>>BigInt(32)&BigInt(4294967295));return g[A++]=e,e>>=8,g[A++]=e,e>>=8,g[A++]=e,e>>=8,g[A++]=e,A}function R(g,I,A,C,t){M(I,C,t,g,A,7);let i=Number(I&BigInt(4294967295));g[A+7]=i,i>>=8,g[A+6]=i,i>>=8,g[A+5]=i,i>>=8,g[A+4]=i;let e=Number(I>>BigInt(32)&BigInt(4294967295));return g[A+3]=e,e>>=8,g[A+2]=e,e>>=8,g[A+1]=e,e>>=8,g[A]=e,A+8}function Q(g,I,A,C,t,i){if(A+C>g.length)throw new RangeError("Index out of range");if(A<0)throw new RangeError("Index out of range")}function H(g,I,C,t,i){return I=+I,C>>>=0,i||Q(g,0,C,4),A.write(g,I,C,t,23,4),C+4}function k(g,I,C,t,i){return I=+I,C>>>=0,i||Q(g,0,C,8),A.write(g,I,C,t,52,8),C+8}e.prototype.slice=function(g,I){const A=this.length;(g=~~g)<0?(g+=A)<0&&(g=0):g>A&&(g=A),(I=void 0===I?A:~~I)<0?(I+=A)<0&&(I=0):I>A&&(I=A),I<g&&(I=g);const C=this.subarray(g,I);return Object.setPrototypeOf(C,e.prototype),C},e.prototype.readUintLE=e.prototype.readUIntLE=function(g,I,A){g>>>=0,I>>>=0,A||X(g,I,this.length);let C=this[g],t=1,i=0;for(;++i<I&&(t*=256);)C+=this[g+i]*t;return C},e.prototype.readUintBE=e.prototype.readUIntBE=function(g,I,A){g>>>=0,I>>>=0,A||X(g,I,this.length);let C=this[g+--I],t=1;for(;I>0&&(t*=256);)C+=this[g+--I]*t;return C},e.prototype.readUint8=e.prototype.readUInt8=function(g,I){return g>>>=0,I||X(g,1,this.length),this[g]},e.prototype.readUint16LE=e.prototype.readUInt16LE=function(g,I){return g>>>=0,I||X(g,2,this.length),this[g]|this[g+1]<<8},e.prototype.readUint16BE=e.prototype.readUInt16BE=function(g,I){return g>>>=0,I||X(g,2,this.length),this[g]<<8|this[g+1]},e.prototype.readUint32LE=e.prototype.readUInt32LE=function(g,I){return g>>>=0,I||X(g,4,this.length),(this[g]|this[g+1]<<8|this[g+2]<<16)+16777216*this[g+3]},e.prototype.readUint32BE=e.prototype.readUInt32BE=function(g,I){return g>>>=0,I||X(g,4,this.length),16777216*this[g]+(this[g+1]<<16|this[g+2]<<8|this[g+3])},e.prototype.readBigUInt64LE=j((function(g){N(g>>>=0,"offset");const I=this[g],A=this[g+7];void 0!==I&&void 0!==A||E(g,this.length-8);const C=I+256*this[++g]+65536*this[++g]+this[++g]*2**24,t=this[++g]+256*this[++g]+65536*this[++g]+A*2**24;return BigInt(C)+(BigInt(t)<<BigInt(32))})),e.prototype.readBigUInt64BE=j((function(g){N(g>>>=0,"offset");const I=this[g],A=this[g+7];void 0!==I&&void 0!==A||E(g,this.length-8);const C=I*2**24+65536*this[++g]+256*this[++g]+this[++g],t=this[++g]*2**24+65536*this[++g]+256*this[++g]+A;return(BigInt(C)<<BigInt(32))+BigInt(t)})),e.prototype.readIntLE=function(g,I,A){g>>>=0,I>>>=0,A||X(g,I,this.length);let C=this[g],t=1,i=0;for(;++i<I&&(t*=256);)C+=this[g+i]*t;return t*=128,C>=t&&(C-=Math.pow(2,8*I)),C},e.prototype.readIntBE=function(g,I,A){g>>>=0,I>>>=0,A||X(g,I,this.length);let C=I,t=1,i=this[g+--C];for(;C>0&&(t*=256);)i+=this[g+--C]*t;return t*=128,i>=t&&(i-=Math.pow(2,8*I)),i},e.prototype.readInt8=function(g,I){return g>>>=0,I||X(g,1,this.length),128&this[g]?-1*(255-this[g]+1):this[g]},e.prototype.readInt16LE=function(g,I){g>>>=0,I||X(g,2,this.length);const A=this[g]|this[g+1]<<8;return 32768&A?4294901760|A:A},e.prototype.readInt16BE=function(g,I){g>>>=0,I||X(g,2,this.length);const A=this[g+1]|this[g]<<8;return 32768&A?4294901760|A:A},e.prototype.readInt32LE=function(g,I){return g>>>=0,I||X(g,4,this.length),this[g]|this[g+1]<<8|this[g+2]<<16|this[g+3]<<24},e.prototype.readInt32BE=function(g,I){return g>>>=0,I||X(g,4,this.length),this[g]<<24|this[g+1]<<16|this[g+2]<<8|this[g+3]},e.prototype.readBigInt64LE=j((function(g){N(g>>>=0,"offset");const I=this[g],A=this[g+7];void 0!==I&&void 0!==A||E(g,this.length-8);const C=this[g+4]+256*this[g+5]+65536*this[g+6]+(A<<24);return(BigInt(C)<<BigInt(32))+BigInt(I+256*this[++g]+65536*this[++g]+this[++g]*2**24)})),e.prototype.readBigInt64BE=j((function(g){N(g>>>=0,"offset");const I=this[g],A=this[g+7];void 0!==I&&void 0!==A||E(g,this.length-8);const C=(I<<24)+65536*this[++g]+256*this[++g]+this[++g];return(BigInt(C)<<BigInt(32))+BigInt(this[++g]*2**24+65536*this[++g]+256*this[++g]+A)})),e.prototype.readFloatLE=function(g,I){return g>>>=0,I||X(g,4,this.length),A.read(this,g,!0,23,4)},e.prototype.readFloatBE=function(g,I){return g>>>=0,I||X(g,4,this.length),A.read(this,g,!1,23,4)},e.prototype.readDoubleLE=function(g,I){return g>>>=0,I||X(g,8,this.length),A.read(this,g,!0,52,8)},e.prototype.readDoubleBE=function(g,I){return g>>>=0,I||X(g,8,this.length),A.read(this,g,!1,52,8)},e.prototype.writeUintLE=e.prototype.writeUIntLE=function(g,I,A,C){if(g=+g,I>>>=0,A>>>=0,!C){V(this,g,I,A,Math.pow(2,8*A)-1,0)}let t=1,i=0;for(this[I]=255&g;++i<A&&(t*=256);)this[I+i]=g/t&255;return I+A},e.prototype.writeUintBE=e.prototype.writeUIntBE=function(g,I,A,C){if(g=+g,I>>>=0,A>>>=0,!C){V(this,g,I,A,Math.pow(2,8*A)-1,0)}let t=A-1,i=1;for(this[I+t]=255&g;--t>=0&&(i*=256);)this[I+t]=g/i&255;return I+A},e.prototype.writeUint8=e.prototype.writeUInt8=function(g,I,A){return g=+g,I>>>=0,A||V(this,g,I,1,255,0),this[I]=255&g,I+1},e.prototype.writeUint16LE=e.prototype.writeUInt16LE=function(g,I,A){return g=+g,I>>>=0,A||V(this,g,I,2,65535,0),this[I]=255&g,this[I+1]=g>>>8,I+2},e.prototype.writeUint16BE=e.prototype.writeUInt16BE=function(g,I,A){return g=+g,I>>>=0,A||V(this,g,I,2,65535,0),this[I]=g>>>8,this[I+1]=255&g,I+2},e.prototype.writeUint32LE=e.prototype.writeUInt32LE=function(g,I,A){return g=+g,I>>>=0,A||V(this,g,I,4,4294967295,0),this[I+3]=g>>>24,this[I+2]=g>>>16,this[I+1]=g>>>8,this[I]=255&g,I+4},e.prototype.writeUint32BE=e.prototype.writeUInt32BE=function(g,I,A){return g=+g,I>>>=0,A||V(this,g,I,4,4294967295,0),this[I]=g>>>24,this[I+1]=g>>>16,this[I+2]=g>>>8,this[I+3]=255&g,I+4},e.prototype.writeBigUInt64LE=j((function(g,I=0){return O(this,g,I,BigInt(0),BigInt("0xffffffffffffffff"))})),e.prototype.writeBigUInt64BE=j((function(g,I=0){return R(this,g,I,BigInt(0),BigInt("0xffffffffffffffff"))})),e.prototype.writeIntLE=function(g,I,A,C){if(g=+g,I>>>=0,!C){const C=Math.pow(2,8*A-1);V(this,g,I,A,C-1,-C)}let t=0,i=1,e=0;for(this[I]=255&g;++t<A&&(i*=256);)g<0&&0===e&&0!==this[I+t-1]&&(e=1),this[I+t]=(g/i>>0)-e&255;return I+A},e.prototype.writeIntBE=function(g,I,A,C){if(g=+g,I>>>=0,!C){const C=Math.pow(2,8*A-1);V(this,g,I,A,C-1,-C)}let t=A-1,i=1,e=0;for(this[I+t]=255&g;--t>=0&&(i*=256);)g<0&&0===e&&0!==this[I+t+1]&&(e=1),this[I+t]=(g/i>>0)-e&255;return I+A},e.prototype.writeInt8=function(g,I,A){return g=+g,I>>>=0,A||V(this,g,I,1,127,-128),g<0&&(g=255+g+1),this[I]=255&g,I+1},e.prototype.writeInt16LE=function(g,I,A){return g=+g,I>>>=0,A||V(this,g,I,2,32767,-32768),this[I]=255&g,this[I+1]=g>>>8,I+2},e.prototype.writeInt16BE=function(g,I,A){return g=+g,I>>>=0,A||V(this,g,I,2,32767,-32768),this[I]=g>>>8,this[I+1]=255&g,I+2},e.prototype.writeInt32LE=function(g,I,A){return g=+g,I>>>=0,A||V(this,g,I,4,2147483647,-2147483648),this[I]=255&g,this[I+1]=g>>>8,this[I+2]=g>>>16,this[I+3]=g>>>24,I+4},e.prototype.writeInt32BE=function(g,I,A){return g=+g,I>>>=0,A||V(this,g,I,4,2147483647,-2147483648),g<0&&(g=4294967295+g+1),this[I]=g>>>24,this[I+1]=g>>>16,this[I+2]=g>>>8,this[I+3]=255&g,I+4},e.prototype.writeBigInt64LE=j((function(g,I=0){return O(this,g,I,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),e.prototype.writeBigInt64BE=j((function(g,I=0){return R(this,g,I,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),e.prototype.writeFloatLE=function(g,I,A){return H(this,g,I,!0,A)},e.prototype.writeFloatBE=function(g,I,A){return H(this,g,I,!1,A)},e.prototype.writeDoubleLE=function(g,I,A){return k(this,g,I,!0,A)},e.prototype.writeDoubleBE=function(g,I,A){return k(this,g,I,!1,A)},e.prototype.copy=function(g,I,A,C){if(!e.isBuffer(g))throw new TypeError("argument should be a Buffer");if(A||(A=0),C||0===C||(C=this.length),I>=g.length&&(I=g.length),I||(I=0),C>0&&C<A&&(C=A),C===A)return 0;if(0===g.length||0===this.length)return 0;if(I<0)throw new RangeError("targetStart out of bounds");if(A<0||A>=this.length)throw new RangeError("Index out of range");if(C<0)throw new RangeError("sourceEnd out of bounds");C>this.length&&(C=this.length),g.length-I<C-A&&(C=g.length-I+A);const t=C-A;return this===g&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(I,A,C):Uint8Array.prototype.set.call(g,this.subarray(A,C),I),t},e.prototype.fill=function(g,I,A,C){if("string"==typeof g){if("string"==typeof I?(C=I,I=0,A=this.length):"string"==typeof A&&(C=A,A=this.length),void 0!==C&&"string"!=typeof C)throw new TypeError("encoding must be a string");if("string"==typeof C&&!e.isEncoding(C))throw new TypeError("Unknown encoding: "+C);if(1===g.length){const I=g.charCodeAt(0);("utf8"===C&&I<128||"latin1"===C)&&(g=I)}}else"number"==typeof g?g&=255:"boolean"==typeof g&&(g=Number(g));if(I<0||this.length<I||this.length<A)throw new RangeError("Out of range index");if(A<=I)return this;let t;if(I>>>=0,A=void 0===A?this.length:A>>>0,g||(g=0),"number"==typeof g)for(t=I;t<A;++t)this[t]=g;else{const i=e.isBuffer(g)?g:e.from(g,C),o=i.length;if(0===o)throw new TypeError('The value "'+g+'" is invalid for argument "value"');for(t=0;t<A-I;++t)this[t+I]=i[t%o]}return this};const J={};function v(g,I,A){J[g]=class extends A{constructor(){super(),Object.defineProperty(this,"message",{value:I.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${g}]`,this.stack,delete this.name}get code(){return g}set code(g){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:g,writable:!0})}toString(){return`${this.name} [${g}]: ${this.message}`}}}function D(g){let I="",A=g.length;const C="-"===g[0]?1:0;for(;A>=C+4;A-=3)I=`_${g.slice(A-3,A)}${I}`;return`${g.slice(0,A)}${I}`}function M(g,I,A,C,t,i){if(g>A||g<I){const C="bigint"==typeof I?"n":"";let t;throw t=i>3?0===I||I===BigInt(0)?`>= 0${C} and < 2${C} ** ${8*(i+1)}${C}`:`>= -(2${C} ** ${8*(i+1)-1}${C}) and < 2 ** ${8*(i+1)-1}${C}`:`>= ${I}${C} and <= ${A}${C}`,new J.ERR_OUT_OF_RANGE("value",t,g)}!function(g,I,A){N(I,"offset"),void 0!==g[I]&&void 0!==g[I+A]||E(I,g.length-(A+1))}(C,t,i)}function N(g,I){if("number"!=typeof g)throw new J.ERR_INVALID_ARG_TYPE(I,"number",g)}function E(g,I,A){if(Math.floor(g)!==g)throw N(g,A),new J.ERR_OUT_OF_RANGE(A||"offset","an integer",g);if(I<0)throw new J.ERR_BUFFER_OUT_OF_BOUNDS;throw new J.ERR_OUT_OF_RANGE(A||"offset",`>= ${A?1:0} and <= ${I}`,g)}v("ERR_BUFFER_OUT_OF_BOUNDS",(function(g){return g?`${g} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),v("ERR_INVALID_ARG_TYPE",(function(g,I){return`The "${g}" argument must be of type number. Received type ${typeof I}`}),TypeError),v("ERR_OUT_OF_RANGE",(function(g,I,A){let C=`The value of "${g}" is out of range.`,t=A;return Number.isInteger(A)&&Math.abs(A)>2**32?t=D(String(A)):"bigint"==typeof A&&(t=String(A),(A>BigInt(2)**BigInt(32)||A<-(BigInt(2)**BigInt(32)))&&(t=D(t)),t+="n"),C+=` It must be ${I}. Received ${t}`,C}),RangeError);const F=/[^+/0-9A-Za-z-_]/g;function L(g,I){let A;I=I||1/0;const C=g.length;let t=null;const i=[];for(let e=0;e<C;++e){if(A=g.charCodeAt(e),A>55295&&A<57344){if(!t){if(A>56319){(I-=3)>-1&&i.push(239,191,189);continue}if(e+1===C){(I-=3)>-1&&i.push(239,191,189);continue}t=A;continue}if(A<56320){(I-=3)>-1&&i.push(239,191,189),t=A;continue}A=65536+(t-55296<<10|A-56320)}else t&&(I-=3)>-1&&i.push(239,191,189);if(t=null,A<128){if((I-=1)<0)break;i.push(A)}else if(A<2048){if((I-=2)<0)break;i.push(A>>6|192,63&A|128)}else if(A<65536){if((I-=3)<0)break;i.push(A>>12|224,A>>6&63|128,63&A|128)}else{if(!(A<1114112))throw new Error("Invalid code point");if((I-=4)<0)break;i.push(A>>18|240,A>>12&63|128,A>>6&63|128,63&A|128)}}return i}function T(g){return I.toByteArray(function(g){if((g=(g=g.split("=")[0]).trim().replace(F,"")).length<2)return"";for(;g.length%4!=0;)g+="=";return g}(g))}function z(g,I,A,C){let t;for(t=0;t<C&&!(t+A>=I.length||t>=g.length);++t)I[t+A]=g[t];return t}function P(g,I){return g instanceof I||null!=g&&null!=g.constructor&&null!=g.constructor.name&&g.constructor.name===I.name}function U(g){return g!=g}const x=function(){const g="0123456789abcdef",I=new Array(256);for(let A=0;A<16;++A){const C=16*A;for(let t=0;t<16;++t)I[C+t]=g[A]+g[t]}return I}();function j(g){return"undefined"==typeof BigInt?_:g}function _(){throw new Error("BigInt not supported")}})(lG),function(g){var I=Lu&&Lu.__spreadArray||function(g,I,A){if(A||2===arguments.length)for(var C,t=0,i=I.length;t<i;t++)!C&&t in I||(C||(C=Array.prototype.slice.call(I,0,t)),C[t]=I[t]);return g.concat(C||Array.prototype.slice.call(I))};Object.defineProperty(g,"__esModule",{value:!0}),g.bufferFrom=g.bufferAllocUnsafe=g.Buffer=void 0;var A=lG;function C(g){for(var C=[],t=1;t<arguments.length;t++)C[t-1]=arguments[t];return new(A.Buffer.bind.apply(A.Buffer,I([void 0,g],C,!1)))}Object.defineProperty(g,"Buffer",{enumerable:!0,get:function(){return A.Buffer}});var t=A.Buffer.allocUnsafe||C;g.bufferAllocUnsafe=t;var i=A.Buffer.from||C;g.bufferFrom=i}(sG);var pG,BG={},yG=Tu(Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:{}})),wG={},WG={},SG="undefined"!=typeof Symbol&&Symbol,KG=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var g={},I=Symbol("test"),A=Object(I);if("string"==typeof I)return!1;if("[object Symbol]"!==Object.prototype.toString.call(I))return!1;if("[object Symbol]"!==Object.prototype.toString.call(A))return!1;for(I in g[I]=42,g)return!1;if("function"==typeof Object.keys&&0!==Object.keys(g).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(g).length)return!1;var C=Object.getOwnPropertySymbols(g);if(1!==C.length||C[0]!==I)return!1;if(!Object.prototype.propertyIsEnumerable.call(g,I))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var t=Object.getOwnPropertyDescriptor(g,I);if(42!==t.value||!0!==t.enumerable)return!1}return!0},fG=function(){return"function"==typeof SG&&("function"==typeof Symbol&&("symbol"==typeof SG("foo")&&("symbol"==typeof Symbol("bar")&&KG())))},YG="Function.prototype.bind called on incompatible ",XG=Array.prototype.slice,VG=Object.prototype.toString,OG="[object Function]",RG=function(g){var I=this;if("function"!=typeof I||VG.call(I)!==OG)throw new TypeError(YG+I);for(var A,C=XG.call(arguments,1),t=function(){if(this instanceof A){var t=I.apply(this,C.concat(XG.call(arguments)));return Object(t)===t?t:this}return I.apply(g,C.concat(XG.call(arguments)))},i=Math.max(0,I.length-C.length),e=[],o=0;o<i;o++)e.push("$"+o);if(A=Function("binder","return function ("+e.join(",")+"){ return binder.apply(this,arguments); }")(t),I.prototype){var n=function(){};n.prototype=I.prototype,A.prototype=new n,n.prototype=null}return A},QG=Function.prototype.bind||RG,HG=QG.call(Function.call,Object.prototype.hasOwnProperty),kG=SyntaxError,JG=Function,vG=TypeError,DG=function(g){try{return JG('"use strict"; return ('+g+").constructor;")()}catch(dD){}},MG=Object.getOwnPropertyDescriptor;if(MG)try{MG({},"")}catch(dD){MG=null}var NG=function(){throw new vG},EG=MG?function(){try{return NG}catch(g){try{return MG(arguments,"callee").get}catch(I){return NG}}}():NG,FG=fG(),LG=Object.getPrototypeOf||function(g){return g.__proto__},TG={},zG="undefined"==typeof Uint8Array?pG:LG(Uint8Array),PG={"%AggregateError%":"undefined"==typeof AggregateError?pG:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?pG:ArrayBuffer,"%ArrayIteratorPrototype%":FG?LG([][Symbol.iterator]()):pG,"%AsyncFromSyncIteratorPrototype%":pG,"%AsyncFunction%":TG,"%AsyncGenerator%":TG,"%AsyncGeneratorFunction%":TG,"%AsyncIteratorPrototype%":TG,"%Atomics%":"undefined"==typeof Atomics?pG:Atomics,"%BigInt%":"undefined"==typeof BigInt?pG:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?pG:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?pG:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?pG:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?pG:FinalizationRegistry,"%Function%":JG,"%GeneratorFunction%":TG,"%Int8Array%":"undefined"==typeof Int8Array?pG:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?pG:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?pG:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":FG?LG(LG([][Symbol.iterator]())):pG,"%JSON%":"object"==typeof JSON?JSON:pG,"%Map%":"undefined"==typeof Map?pG:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&FG?LG((new Map)[Symbol.iterator]()):pG,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?pG:Promise,"%Proxy%":"undefined"==typeof Proxy?pG:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?pG:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?pG:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&FG?LG((new Set)[Symbol.iterator]()):pG,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?pG:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":FG?LG(""[Symbol.iterator]()):pG,"%Symbol%":FG?Symbol:pG,"%SyntaxError%":kG,"%ThrowTypeError%":EG,"%TypedArray%":zG,"%TypeError%":vG,"%Uint8Array%":"undefined"==typeof Uint8Array?pG:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?pG:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?pG:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?pG:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?pG:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?pG:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?pG:WeakSet},UG=function g(I){var A;if("%AsyncFunction%"===I)A=DG("async function () {}");else if("%GeneratorFunction%"===I)A=DG("function* () {}");else if("%AsyncGeneratorFunction%"===I)A=DG("async function* () {}");else if("%AsyncGenerator%"===I){var C=g("%AsyncGeneratorFunction%");C&&(A=C.prototype)}else if("%AsyncIteratorPrototype%"===I){var t=g("%AsyncGenerator%");t&&(A=LG(t.prototype))}return PG[I]=A,A},xG={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},jG=QG,_G=HG,$G=jG.call(Function.call,Array.prototype.concat),qG=jG.call(Function.apply,Array.prototype.splice),gb=jG.call(Function.call,String.prototype.replace),Ib=jG.call(Function.call,String.prototype.slice),Ab=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Cb=/\\(\\)?/g,tb=function(g){var I=Ib(g,0,1),A=Ib(g,-1);if("%"===I&&"%"!==A)throw new kG("invalid intrinsic syntax, expected closing `%`");if("%"===A&&"%"!==I)throw new kG("invalid intrinsic syntax, expected opening `%`");var C=[];return gb(g,Ab,(function(g,I,A,t){C[C.length]=A?gb(t,Cb,"$1"):I||g})),C},ib=function(g,I){var A,C=g;if(_G(xG,C)&&(C="%"+(A=xG[C])[0]+"%"),_G(PG,C)){var t=PG[C];if(t===TG&&(t=UG(C)),void 0===t&&!I)throw new vG("intrinsic "+g+" exists, but is not available. Please file an issue!");return{alias:A,name:C,value:t}}throw new kG("intrinsic "+g+" does not exist!")},eb=function(g,I){if("string"!=typeof g||0===g.length)throw new vG("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof I)throw new vG('"allowMissing" argument must be a boolean');var A=tb(g),C=A.length>0?A[0]:"",t=ib("%"+C+"%",I),i=t.name,e=t.value,o=!1,n=t.alias;n&&(C=n[0],qG(A,$G([0,1],n)));for(var s=1,l=!0;s<A.length;s+=1){var r=A[s],c=Ib(r,0,1),a=Ib(r,-1);if(('"'===c||"'"===c||"`"===c||'"'===a||"'"===a||"`"===a)&&c!==a)throw new kG("property names with quotes must have matching quotes");if("constructor"!==r&&l||(o=!0),_G(PG,i="%"+(C+="."+r)+"%"))e=PG[i];else if(null!=e){if(!(r in e)){if(!I)throw new vG("base intrinsic for "+g+" exists, but the property is not available.");return}if(MG&&s+1>=A.length){var d=MG(e,r);e=(l=!!d)&&"get"in d&&!("originalValue"in d.get)?d.get:e[r]}else l=_G(e,r),e=e[r];l&&!o&&(PG[i]=e)}}return e},ob={exports:{}};!function(g){var I=QG,A=eb,C=A("%Function.prototype.apply%"),t=A("%Function.prototype.call%"),i=A("%Reflect.apply%",!0)||I.call(t,C),e=A("%Object.getOwnPropertyDescriptor%",!0),o=A("%Object.defineProperty%",!0),n=A("%Math.max%");if(o)try{o({},"a",{value:1})}catch(dD){o=null}g.exports=function(g){var A=i(I,t,arguments);if(e&&o){var C=e(A,"length");C.configurable&&o(A,"length",{value:1+n(0,g.length-(arguments.length-1))})}return A};var s=function(){return i(I,C,arguments)};o?o(g.exports,"apply",{value:s}):g.exports.apply=s}(ob);var nb=eb,sb=ob.exports,lb=sb(nb("String.prototype.indexOf")),rb=function(g,I){var A=nb(g,!!I);return"function"==typeof A&&lb(g,".prototype.")>-1?sb(A):A},cb="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,ab=rb("Object.prototype.toString"),db=function(g){return!(cb&&g&&"object"==typeof g&&Symbol.toStringTag in g)&&"[object Arguments]"===ab(g)},hb=function(g){return!!db(g)||null!==g&&"object"==typeof g&&"number"==typeof g.length&&g.length>=0&&"[object Array]"!==ab(g)&&"[object Function]"===ab(g.callee)},mb=function(){return db(arguments)}();db.isLegacyArguments=hb;var Zb,ub=mb?db:hb,Gb=Object.prototype.toString,bb=Function.prototype.toString,pb=/^\s*(?:function)?\*/,Bb="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,yb=Object.getPrototypeOf,wb=function(g){if("function"!=typeof g)return!1;if(pb.test(bb.call(g)))return!0;if(!Bb)return"[object GeneratorFunction]"===Gb.call(g);if(!yb)return!1;if(void 0===Zb){var I=function(){if(!Bb)return!1;try{return Function("return function*() {}")()}catch(dD){}}();Zb=!!I&&yb(I)}return yb(g)===Zb},Wb=Object.prototype.hasOwnProperty,Sb=Object.prototype.toString,Kb=function(g,I,A){if("[object Function]"!==Sb.call(I))throw new TypeError("iterator must be a function");var C=g.length;if(C===+C)for(var t=0;t<C;t++)I.call(A,g[t],t,g);else for(var i in g)Wb.call(g,i)&&I.call(A,g[i],i,g)},fb=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],Yb=function(){for(var g=[],I=0;I<fb.length;I++)"function"==typeof Lu[fb[I]]&&(g[g.length]=fb[I]);return g},Xb=eb("%Object.getOwnPropertyDescriptor%");if(Xb)try{Xb([],"length")}catch(dD){Xb=null}var Vb=Xb,Ob=Kb,Rb=Yb,Qb=rb,Hb=Qb("Object.prototype.toString"),kb=fG()&&"symbol"==typeof Symbol.toStringTag,Jb=Rb(),vb=Qb("Array.prototype.indexOf",!0)||function(g,I){for(var A=0;A<g.length;A+=1)if(g[A]===I)return A;return-1},Db=Qb("String.prototype.slice"),Mb={},Nb=Vb,Eb=Object.getPrototypeOf;kb&&Nb&&Eb&&Ob(Jb,(function(g){var I=new Lu[g];if(!(Symbol.toStringTag in I))throw new EvalError("this engine has support for Symbol.toStringTag, but "+g+" does not have the property! Please report this.");var A=Eb(I),C=Nb(A,Symbol.toStringTag);if(!C){var t=Eb(A);C=Nb(t,Symbol.toStringTag)}Mb[g]=C.get}));var Fb=function(g){if(!g||"object"!=typeof g)return!1;if(!kb){var I=Db(Hb(g),8,-1);return vb(Jb,I)>-1}return!!Nb&&function(g){var I=!1;return Ob(Mb,(function(A,C){if(!I)try{I=A.call(g)===C}catch(dD){}})),I}(g)},Lb=Kb,Tb=Yb,zb=rb,Pb=zb("Object.prototype.toString"),Ub=fG()&&"symbol"==typeof Symbol.toStringTag,xb=Tb(),jb=zb("String.prototype.slice"),_b={},$b=Vb,qb=Object.getPrototypeOf;Ub&&$b&&qb&&Lb(xb,(function(g){if("function"==typeof Lu[g]){var I=new Lu[g];if(!(Symbol.toStringTag in I))throw new EvalError("this engine has support for Symbol.toStringTag, but "+g+" does not have the property! Please report this.");var A=qb(I),C=$b(A,Symbol.toStringTag);if(!C){var t=qb(A);C=$b(t,Symbol.toStringTag)}_b[g]=C.get}}));var gp=Fb,Ip=function(g){return!!gp(g)&&(Ub?function(g){var I=!1;return Lb(_b,(function(A,C){if(!I)try{var t=A.call(g);t===C&&(I=t)}catch(dD){}})),I}(g):jb(Pb(g),8,-1))};!function(g){var I=ub,A=wb,C=Ip,t=Fb;function i(g){return g.call.bind(g)}var e="undefined"!=typeof BigInt,o="undefined"!=typeof Symbol,n=i(Object.prototype.toString),s=i(Number.prototype.valueOf),l=i(String.prototype.valueOf),r=i(Boolean.prototype.valueOf);if(e)var c=i(BigInt.prototype.valueOf);if(o)var a=i(Symbol.prototype.valueOf);function d(g,I){if("object"!=typeof g)return!1;try{return I(g),!0}catch(dD){return!1}}function h(g){return"[object Map]"===n(g)}function m(g){return"[object Set]"===n(g)}function Z(g){return"[object WeakMap]"===n(g)}function u(g){return"[object WeakSet]"===n(g)}function G(g){return"[object ArrayBuffer]"===n(g)}function b(g){return"undefined"!=typeof ArrayBuffer&&(G.working?G(g):g instanceof ArrayBuffer)}function p(g){return"[object DataView]"===n(g)}function B(g){return"undefined"!=typeof DataView&&(p.working?p(g):g instanceof DataView)}g.isArgumentsObject=I,g.isGeneratorFunction=A,g.isTypedArray=t,g.isPromise=function(g){return"undefined"!=typeof Promise&&g instanceof Promise||null!==g&&"object"==typeof g&&"function"==typeof g.then&&"function"==typeof g.catch},g.isArrayBufferView=function(g){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(g):t(g)||B(g)},g.isUint8Array=function(g){return"Uint8Array"===C(g)},g.isUint8ClampedArray=function(g){return"Uint8ClampedArray"===C(g)},g.isUint16Array=function(g){return"Uint16Array"===C(g)},g.isUint32Array=function(g){return"Uint32Array"===C(g)},g.isInt8Array=function(g){return"Int8Array"===C(g)},g.isInt16Array=function(g){return"Int16Array"===C(g)},g.isInt32Array=function(g){return"Int32Array"===C(g)},g.isFloat32Array=function(g){return"Float32Array"===C(g)},g.isFloat64Array=function(g){return"Float64Array"===C(g)},g.isBigInt64Array=function(g){return"BigInt64Array"===C(g)},g.isBigUint64Array=function(g){return"BigUint64Array"===C(g)},h.working="undefined"!=typeof Map&&h(new Map),g.isMap=function(g){return"undefined"!=typeof Map&&(h.working?h(g):g instanceof Map)},m.working="undefined"!=typeof Set&&m(new Set),g.isSet=function(g){return"undefined"!=typeof Set&&(m.working?m(g):g instanceof Set)},Z.working="undefined"!=typeof WeakMap&&Z(new WeakMap),g.isWeakMap=function(g){return"undefined"!=typeof WeakMap&&(Z.working?Z(g):g instanceof WeakMap)},u.working="undefined"!=typeof WeakSet&&u(new WeakSet),g.isWeakSet=function(g){return u(g)},G.working="undefined"!=typeof ArrayBuffer&&G(new ArrayBuffer),g.isArrayBuffer=b,p.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&p(new DataView(new ArrayBuffer(1),0,1)),g.isDataView=B;var y="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function w(g){return"[object SharedArrayBuffer]"===n(g)}function W(g){return void 0!==y&&(void 0===w.working&&(w.working=w(new y)),w.working?w(g):g instanceof y)}function S(g){return d(g,s)}function K(g){return d(g,l)}function f(g){return d(g,r)}function Y(g){return e&&d(g,c)}function X(g){return o&&d(g,a)}g.isSharedArrayBuffer=W,g.isAsyncFunction=function(g){return"[object AsyncFunction]"===n(g)},g.isMapIterator=function(g){return"[object Map Iterator]"===n(g)},g.isSetIterator=function(g){return"[object Set Iterator]"===n(g)},g.isGeneratorObject=function(g){return"[object Generator]"===n(g)},g.isWebAssemblyCompiledModule=function(g){return"[object WebAssembly.Module]"===n(g)},g.isNumberObject=S,g.isStringObject=K,g.isBooleanObject=f,g.isBigIntObject=Y,g.isSymbolObject=X,g.isBoxedPrimitive=function(g){return S(g)||K(g)||f(g)||Y(g)||X(g)},g.isAnyArrayBuffer=function(g){return"undefined"!=typeof Uint8Array&&(b(g)||W(g))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(I){Object.defineProperty(g,I,{enumerable:!1,value:function(){throw new Error(I+" is not supported in userland")}})}))}(WG);var Ap=function(g){return g&&"object"==typeof g&&"function"==typeof g.copy&&"function"==typeof g.fill&&"function"==typeof g.readUInt8},Cp={exports:{}};"function"==typeof Object.create?Cp.exports=function(g,I){I&&(g.super_=I,g.prototype=Object.create(I.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}))}:Cp.exports=function(g,I){if(I){g.super_=I;var A=function(){};A.prototype=I.prototype,g.prototype=new A,g.prototype.constructor=g}},function(g){var I=Object.getOwnPropertyDescriptors||function(g){for(var I=Object.keys(g),A={},C=0;C<I.length;C++)A[I[C]]=Object.getOwnPropertyDescriptor(g,I[C]);return A},A=/%[sdj%]/g;g.format=function(g){if(!h(g)){for(var I=[],C=0;C<arguments.length;C++)I.push(i(arguments[C]));return I.join(" ")}C=1;for(var t=arguments,e=t.length,o=String(g).replace(A,(function(g){if("%%"===g)return"%";if(C>=e)return g;switch(g){case"%s":return String(t[C++]);case"%d":return Number(t[C++]);case"%j":try{return JSON.stringify(t[C++])}catch(I){return"[Circular]"}default:return g}})),n=t[C];C<e;n=t[++C])a(n)||!u(n)?o+=" "+n:o+=" "+i(n);return o},g.deprecate=function(I,A){if("undefined"!=typeof process&&!0===process.noDeprecation)return I;if("undefined"==typeof process)return function(){return g.deprecate(I,A).apply(this,arguments)};var C=!1;return function(){if(!C){if(process.throwDeprecation)throw new Error(A);process.traceDeprecation?console.trace(A):console.error(A),C=!0}return I.apply(this,arguments)}};var C={},t=/^$/;function i(I,A){var C={seen:[],stylize:o};return arguments.length>=3&&(C.depth=arguments[2]),arguments.length>=4&&(C.colors=arguments[3]),c(A)?C.showHidden=A:A&&g._extend(C,A),m(C.showHidden)&&(C.showHidden=!1),m(C.depth)&&(C.depth=2),m(C.colors)&&(C.colors=!1),m(C.customInspect)&&(C.customInspect=!0),C.colors&&(C.stylize=e),n(C,I,C.depth)}function e(g,I){var A=i.styles[I];return A?"["+i.colors[A][0]+"m"+g+"["+i.colors[A][1]+"m":g}function o(g,I){return g}function n(I,A,C){if(I.customInspect&&A&&p(A.inspect)&&A.inspect!==g.inspect&&(!A.constructor||A.constructor.prototype!==A)){var t=A.inspect(C,I);return h(t)||(t=n(I,t,C)),t}var i=function(g,I){if(m(I))return g.stylize("undefined","undefined");if(h(I)){var A="'"+JSON.stringify(I).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return g.stylize(A,"string")}if(d(I))return g.stylize(""+I,"number");if(c(I))return g.stylize(""+I,"boolean");if(a(I))return g.stylize("null","null")}(I,A);if(i)return i;var e=Object.keys(A),o=function(g){var I={};return g.forEach((function(g,A){I[g]=!0})),I}(e);if(I.showHidden&&(e=Object.getOwnPropertyNames(A)),b(A)&&(e.indexOf("message")>=0||e.indexOf("description")>=0))return s(A);if(0===e.length){if(p(A)){var u=A.name?": "+A.name:"";return I.stylize("[Function"+u+"]","special")}if(Z(A))return I.stylize(RegExp.prototype.toString.call(A),"regexp");if(G(A))return I.stylize(Date.prototype.toString.call(A),"date");if(b(A))return s(A)}var B,y="",w=!1,W=["{","}"];(r(A)&&(w=!0,W=["[","]"]),p(A))&&(y=" [Function"+(A.name?": "+A.name:"")+"]");return Z(A)&&(y=" "+RegExp.prototype.toString.call(A)),G(A)&&(y=" "+Date.prototype.toUTCString.call(A)),b(A)&&(y=" "+s(A)),0!==e.length||w&&0!=A.length?C<0?Z(A)?I.stylize(RegExp.prototype.toString.call(A),"regexp"):I.stylize("[Object]","special"):(I.seen.push(A),B=w?function(g,I,A,C,t){for(var i=[],e=0,o=I.length;e<o;++e)S(I,String(e))?i.push(l(g,I,A,C,String(e),!0)):i.push("");return t.forEach((function(t){t.match(/^\d+$/)||i.push(l(g,I,A,C,t,!0))})),i}(I,A,C,o,e):e.map((function(g){return l(I,A,C,o,g,w)})),I.seen.pop(),function(g,I,A){if(g.reduce((function(g,I){return I.indexOf("\n"),g+I.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return A[0]+(""===I?"":I+"\n ")+" "+g.join(",\n  ")+" "+A[1];return A[0]+I+" "+g.join(", ")+" "+A[1]}(B,y,W)):W[0]+y+W[1]}function s(g){return"["+Error.prototype.toString.call(g)+"]"}function l(g,I,A,C,t,i){var e,o,s;if((s=Object.getOwnPropertyDescriptor(I,t)||{value:I[t]}).get?o=s.set?g.stylize("[Getter/Setter]","special"):g.stylize("[Getter]","special"):s.set&&(o=g.stylize("[Setter]","special")),S(C,t)||(e="["+t+"]"),o||(g.seen.indexOf(s.value)<0?(o=a(A)?n(g,s.value,null):n(g,s.value,A-1)).indexOf("\n")>-1&&(o=i?o.split("\n").map((function(g){return"  "+g})).join("\n").substr(2):"\n"+o.split("\n").map((function(g){return"   "+g})).join("\n")):o=g.stylize("[Circular]","special")),m(e)){if(i&&t.match(/^\d+$/))return o;(e=JSON.stringify(""+t)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(e=e.substr(1,e.length-2),e=g.stylize(e,"name")):(e=e.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),e=g.stylize(e,"string"))}return e+": "+o}function r(g){return Array.isArray(g)}function c(g){return"boolean"==typeof g}function a(g){return null===g}function d(g){return"number"==typeof g}function h(g){return"string"==typeof g}function m(g){return void 0===g}function Z(g){return u(g)&&"[object RegExp]"===B(g)}function u(g){return"object"==typeof g&&null!==g}function G(g){return u(g)&&"[object Date]"===B(g)}function b(g){return u(g)&&("[object Error]"===B(g)||g instanceof Error)}function p(g){return"function"==typeof g}function B(g){return Object.prototype.toString.call(g)}function y(g){return g<10?"0"+g.toString(10):g.toString(10)}g.debuglog=function(I){if(I=I.toUpperCase(),!C[I])if(t.test(I)){var A=process.pid;C[I]=function(){var C=g.format.apply(g,arguments);console.error("%s %d: %s",I,A,C)}}else C[I]=function(){};return C[I]},g.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},g.types=WG,g.isArray=r,g.isBoolean=c,g.isNull=a,g.isNullOrUndefined=function(g){return null==g},g.isNumber=d,g.isString=h,g.isSymbol=function(g){return"symbol"==typeof g},g.isUndefined=m,g.isRegExp=Z,g.types.isRegExp=Z,g.isObject=u,g.isDate=G,g.types.isDate=G,g.isError=b,g.types.isNativeError=b,g.isFunction=p,g.isPrimitive=function(g){return null===g||"boolean"==typeof g||"number"==typeof g||"string"==typeof g||"symbol"==typeof g||void 0===g},g.isBuffer=Ap;var w=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function W(){var g=new Date,I=[y(g.getHours()),y(g.getMinutes()),y(g.getSeconds())].join(":");return[g.getDate(),w[g.getMonth()],I].join(" ")}function S(g,I){return Object.prototype.hasOwnProperty.call(g,I)}g.log=function(){console.log("%s - %s",W(),g.format.apply(g,arguments))},g.inherits=Cp.exports,g._extend=function(g,I){if(!I||!u(I))return g;for(var A=Object.keys(I),C=A.length;C--;)g[A[C]]=I[A[C]];return g};var K="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function f(g,I){if(!g){var A=new Error("Promise was rejected with a falsy value");A.reason=g,g=A}return I(g)}g.promisify=function(g){if("function"!=typeof g)throw new TypeError('The "original" argument must be of type Function');if(K&&g[K]){var A;if("function"!=typeof(A=g[K]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(A,K,{value:A,enumerable:!1,writable:!1,configurable:!0}),A}function A(){for(var I,A,C=new Promise((function(g,C){I=g,A=C})),t=[],i=0;i<arguments.length;i++)t.push(arguments[i]);t.push((function(g,C){g?A(g):I(C)}));try{g.apply(this,t)}catch(e){A(e)}return C}return Object.setPrototypeOf(A,Object.getPrototypeOf(g)),K&&Object.defineProperty(A,K,{value:A,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(A,I(g))},g.promisify.custom=K,g.callbackify=function(g){if("function"!=typeof g)throw new TypeError('The "original" argument must be of type Function');function A(){for(var I=[],A=0;A<arguments.length;A++)I.push(arguments[A]);var C=I.pop();if("function"!=typeof C)throw new TypeError("The last argument must be of type Function");var t=this,i=function(){return C.apply(t,arguments)};g.apply(this,I).then((function(g){process.nextTick(i.bind(null,null,g))}),(function(g){process.nextTick(f.bind(null,g,i))}))}return Object.setPrototypeOf(A,Object.getPrototypeOf(g)),Object.defineProperties(A,I(g)),A}}(wG),function(g){var I,A=Lu&&Lu.__extends||(I=function(g,A){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,I){g.__proto__=I}||function(g,I){for(var A in I)Object.prototype.hasOwnProperty.call(I,A)&&(g[A]=I[A])})(g,A)},function(g,A){if("function"!=typeof A&&null!==A)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");function C(){this.constructor=g}I(g,A),g.prototype=null===A?Object.create(A):(C.prototype=A.prototype,new C)});Object.defineProperty(g,"__esModule",{value:!0}),g.E=g.AssertionError=g.message=g.RangeError=g.TypeError=g.Error=void 0;var C=yG,t=wG,i="undefined"==typeof Symbol?"_kCode":Symbol("code"),e={};function o(g){return function(g){function I(I){for(var A=[],C=1;C<arguments.length;C++)A[C-1]=arguments[C];var t=g.call(this,l(I,A))||this;return t.code=I,t[i]=I,t.name=g.prototype.name+" ["+t[i]+"]",t}return A(I,g),I}(g)}var n="undefined"!=typeof globalThis?globalThis:Lu,s=function(I){function C(A){var C=this;if("object"!=typeof A||null===A)throw new g.TypeError("ERR_INVALID_ARG_TYPE","options","object");return(C=A.message?I.call(this,A.message)||this:I.call(this,t.inspect(A.actual).slice(0,128)+" "+A.operator+" "+t.inspect(A.expected).slice(0,128))||this).generatedMessage=!A.message,C.name="AssertionError [ERR_ASSERTION]",C.code="ERR_ASSERTION",C.actual=A.actual,C.expected=A.expected,C.operator=A.operator,g.Error.captureStackTrace(C,A.stackStartFunction),C}return A(C,I),C}(n.Error);function l(g,I){C.strictEqual(typeof g,"string");var A,i=e[g];if(C(i,"An invalid error message key was used: "+g+"."),"function"==typeof i)A=i;else{if(A=t.format,void 0===I||0===I.length)return i;I.unshift(i)}return String(A.apply(null,I))}function r(g,I){e[g]="function"==typeof I?I:String(I)}function c(g,I){if(C(g,"expected is required"),C("string"==typeof I,"thing is required"),Array.isArray(g)){var A=g.length;return C(A>0,"At least one expected value needs to be specified"),g=g.map((function(g){return String(g)})),A>2?"one of "+I+" "+g.slice(0,A-1).join(", ")+", or "+g[A-1]:2===A?"one of "+I+" "+g[0]+" or "+g[1]:"of "+I+" "+g[0]}return"of "+I+" "+String(g)}g.AssertionError=s,g.message=l,g.E=r,g.Error=o(n.Error),g.TypeError=o(n.TypeError),g.RangeError=o(n.RangeError),r("ERR_ARG_NOT_ITERABLE","%s must be iterable"),r("ERR_ASSERTION","%s"),r("ERR_BUFFER_OUT_OF_BOUNDS",(function(g,I){return I?"Attempt to write outside buffer bounds":'"'+g+'" is outside of buffer bounds'})),r("ERR_CHILD_CLOSED_BEFORE_REPLY","Child closed before reply received"),r("ERR_CONSOLE_WRITABLE_STREAM","Console expects a writable stream instance for %s"),r("ERR_CPU_USAGE","Unable to obtain cpu usage %s"),r("ERR_DNS_SET_SERVERS_FAILED",(function(g,I){return'c-ares failed to set servers: "'+g+'" ['+I+"]"})),r("ERR_FALSY_VALUE_REJECTION","Promise was rejected with falsy value"),r("ERR_ENCODING_NOT_SUPPORTED",(function(g){return'The "'+g+'" encoding is not supported'})),r("ERR_ENCODING_INVALID_ENCODED_DATA",(function(g){return"The encoded data was not valid for encoding "+g})),r("ERR_HTTP_HEADERS_SENT","Cannot render headers after they are sent to the client"),r("ERR_HTTP_INVALID_STATUS_CODE","Invalid status code: %s"),r("ERR_HTTP_TRAILER_INVALID","Trailers are invalid with this transfer encoding"),r("ERR_INDEX_OUT_OF_RANGE","Index out of range"),r("ERR_INVALID_ARG_TYPE",(function(g,I,A){var t,i;C(g,"name is required"),I.includes("not ")?(t="must not be",I=I.split("not ")[1]):t="must be";if(Array.isArray(g)){var e=g.map((function(g){return'"'+g+'"'})).join(", ");i="The "+e+" arguments "+t+" "+c(I,"type")}else if(g.includes(" argument"))i="The "+g+" "+t+" "+c(I,"type");else{var o=g.includes(".")?"property":"argument";i='The "'+g+'" '+o+" "+t+" "+c(I,"type")}arguments.length>=3&&(i+=". Received type "+(null!==A?typeof A:"null"));return i})),r("ERR_INVALID_ARRAY_LENGTH",(function(g,I,A){return C.strictEqual(typeof A,"number"),'The array "'+g+'" (length '+A+") must be of length "+I+"."})),r("ERR_INVALID_BUFFER_SIZE","Buffer size must be a multiple of %s"),r("ERR_INVALID_CALLBACK","Callback must be a function"),r("ERR_INVALID_CHAR","Invalid character in %s"),r("ERR_INVALID_CURSOR_POS","Cannot set cursor row without setting its column"),r("ERR_INVALID_FD",'"fd" must be a positive integer: %s'),r("ERR_INVALID_FILE_URL_HOST",'File URL host must be "localhost" or empty on %s'),r("ERR_INVALID_FILE_URL_PATH","File URL path %s"),r("ERR_INVALID_HANDLE_TYPE","This handle type cannot be sent"),r("ERR_INVALID_IP_ADDRESS","Invalid IP address: %s"),r("ERR_INVALID_OPT_VALUE",(function(g,I){return'The value "'+String(I)+'" is invalid for option "'+g+'"'})),r("ERR_INVALID_OPT_VALUE_ENCODING",(function(g){return'The value "'+String(g)+'" is invalid for option "encoding"'})),r("ERR_INVALID_REPL_EVAL_CONFIG",'Cannot specify both "breakEvalOnSigint" and "eval" for REPL'),r("ERR_INVALID_SYNC_FORK_INPUT","Asynchronous forks do not support Buffer, Uint8Array or string input: %s"),r("ERR_INVALID_THIS",'Value of "this" must be of type %s'),r("ERR_INVALID_TUPLE","%s must be an iterable %s tuple"),r("ERR_INVALID_URL","Invalid URL: %s"),r("ERR_INVALID_URL_SCHEME",(function(g){return"The URL must be "+c(g,"scheme")})),r("ERR_IPC_CHANNEL_CLOSED","Channel closed"),r("ERR_IPC_DISCONNECTED","IPC channel is already disconnected"),r("ERR_IPC_ONE_PIPE","Child process can have only one IPC pipe"),r("ERR_IPC_SYNC_FORK","IPC cannot be used with synchronous forks"),r("ERR_MISSING_ARGS",(function(){for(var g=[],I=0;I<arguments.length;I++)g[I]=arguments[I];C(g.length>0,"At least one arg needs to be specified");var A="The ",t=g.length;switch(g=g.map((function(g){return'"'+g+'"'})),t){case 1:A+=g[0]+" argument";break;case 2:A+=g[0]+" and "+g[1]+" arguments";break;default:A+=g.slice(0,t-1).join(", "),A+=", and "+g[t-1]+" arguments"}return A+" must be specified"})),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_NAPI_CONS_FUNCTION","Constructor must be a function"),r("ERR_NAPI_CONS_PROTOTYPE_OBJECT","Constructor.prototype must be an object"),r("ERR_NO_CRYPTO","Node.js is not compiled with OpenSSL crypto support"),r("ERR_NO_LONGER_SUPPORTED","%s is no longer supported"),r("ERR_PARSE_HISTORY_DATA","Could not parse history data in %s"),r("ERR_SOCKET_ALREADY_BOUND","Socket is already bound"),r("ERR_SOCKET_BAD_PORT","Port should be > 0 and < 65536"),r("ERR_SOCKET_BAD_TYPE","Bad socket type specified. Valid types are: udp4, udp6"),r("ERR_SOCKET_CANNOT_SEND","Unable to send data"),r("ERR_SOCKET_CLOSED","Socket is closed"),r("ERR_SOCKET_DGRAM_NOT_RUNNING","Not running"),r("ERR_STDERR_CLOSE","process.stderr cannot be closed"),r("ERR_STDOUT_CLOSE","process.stdout cannot be closed"),r("ERR_STREAM_WRAP","Stream has StringDecoder set or is in objectMode"),r("ERR_TLS_CERT_ALTNAME_INVALID","Hostname/IP does not match certificate's altnames: %s"),r("ERR_TLS_DH_PARAM_SIZE",(function(g){return"DH parameter size "+g+" is less than 2048"})),r("ERR_TLS_HANDSHAKE_TIMEOUT","TLS handshake timeout"),r("ERR_TLS_RENEGOTIATION_FAILED","Failed to renegotiate"),r("ERR_TLS_REQUIRED_SERVER_NAME",'"servername" is required parameter for Server.addContext'),r("ERR_TLS_SESSION_ATTACK","TSL session renegotiation attack detected"),r("ERR_TRANSFORM_ALREADY_TRANSFORMING","Calling transform done when still transforming"),r("ERR_TRANSFORM_WITH_LENGTH_0","Calling transform done when writableState.length != 0"),r("ERR_UNKNOWN_ENCODING","Unknown encoding: %s"),r("ERR_UNKNOWN_SIGNAL","Unknown signal: %s"),r("ERR_UNKNOWN_STDIN_TYPE","Unknown stdin file type"),r("ERR_UNKNOWN_STREAM_TYPE","Unknown stream file type"),r("ERR_V8BREAKITERATOR","Full ICU data not installed. See https://github.com/nodejs/node/wiki/Intl")}(BG),function(g){Object.defineProperty(g,"__esModule",{value:!0}),g.strToEncoding=g.assertEncoding=g.ENCODING_UTF8=void 0;var I=sG,A=BG;g.ENCODING_UTF8="utf8",g.assertEncoding=function(g){if(g&&!I.Buffer.isEncoding(g))throw new A.TypeError("ERR_INVALID_OPT_VALUE_ENCODING",g)},g.strToEncoding=function(A,C){return C&&C!==g.ENCODING_UTF8?"buffer"===C?new I.Buffer(A):new I.Buffer(A).toString(C):A}}(nG),Object.defineProperty(oG,"__esModule",{value:!0}),oG.Dirent=void 0;var tp=Uu,ip=nG,ep=tp.constants.S_IFMT,op=tp.constants.S_IFDIR,np=tp.constants.S_IFREG,sp=tp.constants.S_IFBLK,lp=tp.constants.S_IFCHR,rp=tp.constants.S_IFLNK,cp=tp.constants.S_IFIFO,ap=tp.constants.S_IFSOCK,dp=function(){function g(){this.name="",this.mode=0}return g.build=function(I,A){var C=new g,t=I.getNode().mode;return C.name=(0,ip.strToEncoding)(I.getName(),A),C.mode=t,C},g.prototype._checkModeProperty=function(g){return(this.mode&ep)===g},g.prototype.isDirectory=function(){return this._checkModeProperty(op)},g.prototype.isFile=function(){return this._checkModeProperty(np)},g.prototype.isBlockDevice=function(){return this._checkModeProperty(sp)},g.prototype.isCharacterDevice=function(){return this._checkModeProperty(lp)},g.prototype.isSymbolicLink=function(){return this._checkModeProperty(rp)},g.prototype.isFIFO=function(){return this._checkModeProperty(cp)},g.prototype.isSocket=function(){return this._checkModeProperty(ap)},g}();oG.Dirent=dp,oG.default=dp;var hp={},mp={exports:{}},Zp={},up=function(g){return g&&"object"==typeof g&&"function"==typeof g.copy&&"function"==typeof g.fill&&"function"==typeof g.readUInt8},Gp={exports:{}};"function"==typeof Object.create?Gp.exports=function(g,I){g.super_=I,g.prototype=Object.create(I.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}})}:Gp.exports=function(g,I){g.super_=I;var A=function(){};A.prototype=I.prototype,g.prototype=new A,g.prototype.constructor=g},function(g){var I=/%[sdj%]/g;g.format=function(g){if(!d(g)){for(var A=[],C=0;C<arguments.length;C++)A.push(t(arguments[C]));return A.join(" ")}C=1;for(var i=arguments,e=i.length,o=String(g).replace(I,(function(g){if("%%"===g)return"%";if(C>=e)return g;switch(g){case"%s":return String(i[C++]);case"%d":return Number(i[C++]);case"%j":try{return JSON.stringify(i[C++])}catch(I){return"[Circular]"}default:return g}})),n=i[C];C<e;n=i[++C])c(n)||!Z(n)?o+=" "+n:o+=" "+t(n);return o},g.deprecate=function(I,A){if(h(Lu.process))return function(){return g.deprecate(I,A).apply(this,arguments)};if(!0===process.noDeprecation)return I;var C=!1;return function(){if(!C){if(process.throwDeprecation)throw new Error(A);process.traceDeprecation?console.trace(A):console.error(A),C=!0}return I.apply(this,arguments)}};var A,C={};function t(I,A){var C={seen:[],stylize:e};return arguments.length>=3&&(C.depth=arguments[2]),arguments.length>=4&&(C.colors=arguments[3]),r(A)?C.showHidden=A:A&&g._extend(C,A),h(C.showHidden)&&(C.showHidden=!1),h(C.depth)&&(C.depth=2),h(C.colors)&&(C.colors=!1),h(C.customInspect)&&(C.customInspect=!0),C.colors&&(C.stylize=i),o(C,I,C.depth)}function i(g,I){var A=t.styles[I];return A?"["+t.colors[A][0]+"m"+g+"["+t.colors[A][1]+"m":g}function e(g,I){return g}function o(I,A,C){if(I.customInspect&&A&&b(A.inspect)&&A.inspect!==g.inspect&&(!A.constructor||A.constructor.prototype!==A)){var t=A.inspect(C,I);return d(t)||(t=o(I,t,C)),t}var i=function(g,I){if(h(I))return g.stylize("undefined","undefined");if(d(I)){var A="'"+JSON.stringify(I).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return g.stylize(A,"string")}if(a(I))return g.stylize(""+I,"number");if(r(I))return g.stylize(""+I,"boolean");if(c(I))return g.stylize("null","null")}(I,A);if(i)return i;var e=Object.keys(A),Z=function(g){var I={};return g.forEach((function(g,A){I[g]=!0})),I}(e);if(I.showHidden&&(e=Object.getOwnPropertyNames(A)),G(A)&&(e.indexOf("message")>=0||e.indexOf("description")>=0))return n(A);if(0===e.length){if(b(A)){var p=A.name?": "+A.name:"";return I.stylize("[Function"+p+"]","special")}if(m(A))return I.stylize(RegExp.prototype.toString.call(A),"regexp");if(u(A))return I.stylize(Date.prototype.toString.call(A),"date");if(G(A))return n(A)}var B,y="",w=!1,S=["{","}"];(l(A)&&(w=!0,S=["[","]"]),b(A))&&(y=" [Function"+(A.name?": "+A.name:"")+"]");return m(A)&&(y=" "+RegExp.prototype.toString.call(A)),u(A)&&(y=" "+Date.prototype.toUTCString.call(A)),G(A)&&(y=" "+n(A)),0!==e.length||w&&0!=A.length?C<0?m(A)?I.stylize(RegExp.prototype.toString.call(A),"regexp"):I.stylize("[Object]","special"):(I.seen.push(A),B=w?function(g,I,A,C,t){for(var i=[],e=0,o=I.length;e<o;++e)W(I,String(e))?i.push(s(g,I,A,C,String(e),!0)):i.push("");return t.forEach((function(t){t.match(/^\d+$/)||i.push(s(g,I,A,C,t,!0))})),i}(I,A,C,Z,e):e.map((function(g){return s(I,A,C,Z,g,w)})),I.seen.pop(),function(g,I,A){if(g.reduce((function(g,I){return I.indexOf("\n"),g+I.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return A[0]+(""===I?"":I+"\n ")+" "+g.join(",\n  ")+" "+A[1];return A[0]+I+" "+g.join(", ")+" "+A[1]}(B,y,S)):S[0]+y+S[1]}function n(g){return"["+Error.prototype.toString.call(g)+"]"}function s(g,I,A,C,t,i){var e,n,s;if((s=Object.getOwnPropertyDescriptor(I,t)||{value:I[t]}).get?n=s.set?g.stylize("[Getter/Setter]","special"):g.stylize("[Getter]","special"):s.set&&(n=g.stylize("[Setter]","special")),W(C,t)||(e="["+t+"]"),n||(g.seen.indexOf(s.value)<0?(n=c(A)?o(g,s.value,null):o(g,s.value,A-1)).indexOf("\n")>-1&&(n=i?n.split("\n").map((function(g){return"  "+g})).join("\n").substr(2):"\n"+n.split("\n").map((function(g){return"   "+g})).join("\n")):n=g.stylize("[Circular]","special")),h(e)){if(i&&t.match(/^\d+$/))return n;(e=JSON.stringify(""+t)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(e=e.substr(1,e.length-2),e=g.stylize(e,"name")):(e=e.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),e=g.stylize(e,"string"))}return e+": "+n}function l(g){return Array.isArray(g)}function r(g){return"boolean"==typeof g}function c(g){return null===g}function a(g){return"number"==typeof g}function d(g){return"string"==typeof g}function h(g){return void 0===g}function m(g){return Z(g)&&"[object RegExp]"===p(g)}function Z(g){return"object"==typeof g&&null!==g}function u(g){return Z(g)&&"[object Date]"===p(g)}function G(g){return Z(g)&&("[object Error]"===p(g)||g instanceof Error)}function b(g){return"function"==typeof g}function p(g){return Object.prototype.toString.call(g)}function B(g){return g<10?"0"+g.toString(10):g.toString(10)}g.debuglog=function(I){if(h(A)&&(A=""),I=I.toUpperCase(),!C[I])if(new RegExp("\\b"+I+"\\b","i").test(A)){var t=process.pid;C[I]=function(){var A=g.format.apply(g,arguments);console.error("%s %d: %s",I,t,A)}}else C[I]=function(){};return C[I]},g.inspect=t,t.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},t.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},g.isArray=l,g.isBoolean=r,g.isNull=c,g.isNullOrUndefined=function(g){return null==g},g.isNumber=a,g.isString=d,g.isSymbol=function(g){return"symbol"==typeof g},g.isUndefined=h,g.isRegExp=m,g.isObject=Z,g.isDate=u,g.isError=G,g.isFunction=b,g.isPrimitive=function(g){return null===g||"boolean"==typeof g||"number"==typeof g||"string"==typeof g||"symbol"==typeof g||void 0===g},g.isBuffer=up;var y=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function w(){var g=new Date,I=[B(g.getHours()),B(g.getMinutes()),B(g.getSeconds())].join(":");return[g.getDate(),y[g.getMonth()],I].join(" ")}function W(g,I){return Object.prototype.hasOwnProperty.call(g,I)}g.log=function(){console.log("%s - %s",w(),g.format.apply(g,arguments))},g.inherits=Gp.exports,g._extend=function(g,I){if(!I||!Z(I))return g;for(var A=Object.keys(I),C=A.length;C--;)g[A[C]]=I[A[C]];return g}}(Zp);var bp=Zp;function pp(g,I){for(var A=[],C=0;C<g.length;C++){var t=g[C];t&&"."!==t&&(".."===t?A.length&&".."!==A[A.length-1]?A.pop():I&&A.push(".."):A.push(t))}return A}function Bp(g){for(var I=g.length-1,A=0;A<=I&&!g[A];A++);for(var C=I;C>=0&&!g[C];C--);return 0===A&&C===I?g:A>C?[]:g.slice(A,C+1)}var yp=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,wp=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,Wp={};function Sp(g){var I=yp.exec(g),A=(I[1]||"")+(I[2]||""),C=I[3]||"",t=wp.exec(C);return[A,t[1],t[2],t[3]]}function Kp(g){var I=yp.exec(g),A=I[1]||"",C=!!A&&":"!==A[1];return{device:A,isUnc:C,isAbsolute:C||!!I[2],tail:I[3]}}function fp(g){return"\\\\"+g.replace(/^[\\\/]+/,"").replace(/[\\\/]+/g,"\\")}Wp.resolve=function(){for(var g="",I="",A=!1,C=arguments.length-1;C>=-1;C--){var t;if(C>=0?t=arguments[C]:g?(t=process.env["="+g])&&t.substr(0,3).toLowerCase()===g.toLowerCase()+"\\"||(t=g+"\\"):t=process.cwd(),!bp.isString(t))throw new TypeError("Arguments to path.resolve must be strings");if(t){var i=Kp(t),e=i.device,o=i.isUnc,n=i.isAbsolute,s=i.tail;if((!e||!g||e.toLowerCase()===g.toLowerCase())&&(g||(g=e),A||(I=s+"\\"+I,A=n),g&&A))break}}return o&&(g=fp(g)),g+(A?"\\":"")+(I=pp(I.split(/[\\\/]+/),!A).join("\\"))||"."},Wp.normalize=function(g){var I=Kp(g),A=I.device,C=I.isUnc,t=I.isAbsolute,i=I.tail,e=/[\\\/]$/.test(i);return(i=pp(i.split(/[\\\/]+/),!t).join("\\"))||t||(i="."),i&&e&&(i+="\\"),C&&(A=fp(A)),A+(t?"\\":"")+i},Wp.isAbsolute=function(g){return Kp(g).isAbsolute},Wp.join=function(){for(var g=[],I=0;I<arguments.length;I++){var A=arguments[I];if(!bp.isString(A))throw new TypeError("Arguments to path.join must be strings");A&&g.push(A)}var C=g.join("\\");return/^[\\\/]{2}[^\\\/]/.test(g[0])||(C=C.replace(/^[\\\/]{2,}/,"\\")),Wp.normalize(C)},Wp.relative=function(g,I){g=Wp.resolve(g),I=Wp.resolve(I);for(var A=g.toLowerCase(),C=I.toLowerCase(),t=Bp(I.split("\\")),i=Bp(A.split("\\")),e=Bp(C.split("\\")),o=Math.min(i.length,e.length),n=o,s=0;s<o;s++)if(i[s]!==e[s]){n=s;break}if(0==n)return I;var l=[];for(s=n;s<i.length;s++)l.push("..");return(l=l.concat(t.slice(n))).join("\\")},Wp._makeLong=function(g){if(!bp.isString(g))return g;if(!g)return"";var I=Wp.resolve(g);return/^[a-zA-Z]\:\\/.test(I)?"\\\\?\\"+I:/^\\\\[^?.]/.test(I)?"\\\\?\\UNC\\"+I.substring(2):g},Wp.dirname=function(g){var I=Sp(g),A=I[0],C=I[1];return A||C?(C&&(C=C.substr(0,C.length-1)),A+C):"."},Wp.basename=function(g,I){var A=Sp(g)[2];return I&&A.substr(-1*I.length)===I&&(A=A.substr(0,A.length-I.length)),A},Wp.extname=function(g){return Sp(g)[3]},Wp.format=function(g){if(!bp.isObject(g))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof g);var I=g.root||"";if(!bp.isString(I))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof g.root);var A=g.dir,C=g.base||"";return A?A[A.length-1]===Wp.sep?A+C:A+Wp.sep+C:C},Wp.parse=function(g){if(!bp.isString(g))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof g);var I=Sp(g);if(!I||4!==I.length)throw new TypeError("Invalid path '"+g+"'");return{root:I[0],dir:I[0]+I[1].slice(0,-1),base:I[2],ext:I[3],name:I[2].slice(0,I[2].length-I[3].length)}},Wp.sep="\\",Wp.delimiter=";";var Yp=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,Xp={};function Vp(g){return Yp.exec(g).slice(1)}Xp.resolve=function(){for(var g="",I=!1,A=arguments.length-1;A>=-1&&!I;A--){var C=A>=0?arguments[A]:process.cwd();if(!bp.isString(C))throw new TypeError("Arguments to path.resolve must be strings");C&&(g=C+"/"+g,I="/"===C[0])}return(I?"/":"")+(g=pp(g.split("/"),!I).join("/"))||"."},Xp.normalize=function(g){var I=Xp.isAbsolute(g),A=g&&"/"===g[g.length-1];return(g=pp(g.split("/"),!I).join("/"))||I||(g="."),g&&A&&(g+="/"),(I?"/":"")+g},Xp.isAbsolute=function(g){return"/"===g.charAt(0)},Xp.join=function(){for(var g="",I=0;I<arguments.length;I++){var A=arguments[I];if(!bp.isString(A))throw new TypeError("Arguments to path.join must be strings");A&&(g+=g?"/"+A:A)}return Xp.normalize(g)},Xp.relative=function(g,I){g=Xp.resolve(g).substr(1),I=Xp.resolve(I).substr(1);for(var A=Bp(g.split("/")),C=Bp(I.split("/")),t=Math.min(A.length,C.length),i=t,e=0;e<t;e++)if(A[e]!==C[e]){i=e;break}var o=[];for(e=i;e<A.length;e++)o.push("..");return(o=o.concat(C.slice(i))).join("/")},Xp._makeLong=function(g){return g},Xp.dirname=function(g){var I=Vp(g),A=I[0],C=I[1];return A||C?(C&&(C=C.substr(0,C.length-1)),A+C):"."},Xp.basename=function(g,I){var A=Vp(g)[2];return I&&A.substr(-1*I.length)===I&&(A=A.substr(0,A.length-I.length)),A},Xp.extname=function(g){return Vp(g)[3]},Xp.format=function(g){if(!bp.isObject(g))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof g);var I=g.root||"";if(!bp.isString(I))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof g.root);return(g.dir?g.dir+Xp.sep:"")+(g.base||"")},Xp.parse=function(g){if(!bp.isString(g))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof g);var I=Vp(g);if(!I||4!==I.length)throw new TypeError("Invalid path '"+g+"'");return I[1]=I[1]||"",I[2]=I[2]||"",I[3]=I[3]||"",{root:I[0],dir:I[0]+I[1].slice(0,-1),base:I[2],ext:I[3],name:I[2].slice(0,I[2].length-I[3].length)}},Xp.sep="/",Xp.delimiter=":",mp.exports=Xp,mp.exports.posix=Xp,mp.exports.win32=Wp;var Op,Rp,Qp={},Hp={},kp={exports:{}},Jp=kp.exports={};function vp(){throw new Error("setTimeout has not been defined")}function Dp(){throw new Error("clearTimeout has not been defined")}function Mp(g){if(Op===setTimeout)return setTimeout(g,0);if((Op===vp||!Op)&&setTimeout)return Op=setTimeout,setTimeout(g,0);try{return Op(g,0)}catch(dD){try{return Op.call(null,g,0)}catch(I){return Op.call(this,g,0)}}}!function(){try{Op="function"==typeof setTimeout?setTimeout:vp}catch(dD){Op=vp}try{Rp="function"==typeof clearTimeout?clearTimeout:Dp}catch(dD){Rp=Dp}}();var Np,Ep=[],Fp=!1,Lp=-1;function Tp(){Fp&&Np&&(Fp=!1,Np.length?Ep=Np.concat(Ep):Lp=-1,Ep.length&&zp())}function zp(){if(!Fp){var g=Mp(Tp);Fp=!0;for(var I=Ep.length;I;){for(Np=Ep,Ep=[];++Lp<I;)Np&&Np[Lp].run();Lp=-1,I=Ep.length}Np=null,Fp=!1,function(g){if(Rp===clearTimeout)return clearTimeout(g);if((Rp===Dp||!Rp)&&clearTimeout)return Rp=clearTimeout,clearTimeout(g);try{Rp(g)}catch(dD){try{return Rp.call(null,g)}catch(I){return Rp.call(this,g)}}}(g)}}function Pp(g,I){this.fun=g,this.array=I}function Up(){}Jp.nextTick=function(g){var I=new Array(arguments.length-1);if(arguments.length>1)for(var A=1;A<arguments.length;A++)I[A-1]=arguments[A];Ep.push(new Pp(g,I)),1!==Ep.length||Fp||Mp(zp)},Pp.prototype.run=function(){this.fun.apply(null,this.array)},Jp.title="browser",Jp.browser=!0,Jp.env={},Jp.argv=[],Jp.version="",Jp.versions={},Jp.on=Up,Jp.addListener=Up,Jp.once=Up,Jp.off=Up,Jp.removeListener=Up,Jp.removeAllListeners=Up,Jp.emit=Up,Jp.prependListener=Up,Jp.prependOnceListener=Up,Jp.listeners=function(g){return[]},Jp.binding=function(g){throw new Error("process.binding is not supported")},Jp.cwd=function(){return"/"},Jp.chdir=function(g){throw new Error("process.chdir is not supported")},Jp.umask=function(){return 0};var xp,jp={};Object.defineProperty(jp,"__esModule",{value:!0}),xp="function"==typeof setImmediate?setImmediate.bind("undefined"!=typeof globalThis?globalThis:Lu):setTimeout.bind("undefined"!=typeof globalThis?globalThis:Lu),jp.default=xp,Object.defineProperty(Hp,"__esModule",{value:!0}),Hp.createProcess=void 0;function _p(){var g=function(){if("undefined"!=typeof process)return process;try{return kp.exports}catch(g){return}}()||{};return g.getuid||(g.getuid=function(){return 0}),g.getgid||(g.getgid=function(){return 0}),g.cwd||(g.cwd=function(){return"/"}),g.nextTick||(g.nextTick=jp.default),g.emitWarning||(g.emitWarning=function(g,I){console.warn(I+(I?": ":"")+g)}),g.env||(g.env={}),g}Hp.createProcess=_p,Hp.default=_p();var $p,qp={exports:{}},gB="object"==typeof Reflect?Reflect:null,IB=gB&&"function"==typeof gB.apply?gB.apply:function(g,I,A){return Function.prototype.apply.call(g,I,A)};$p=gB&&"function"==typeof gB.ownKeys?gB.ownKeys:Object.getOwnPropertySymbols?function(g){return Object.getOwnPropertyNames(g).concat(Object.getOwnPropertySymbols(g))}:function(g){return Object.getOwnPropertyNames(g)};var AB=Number.isNaN||function(g){return g!=g};function CB(){CB.init.call(this)}qp.exports=CB,qp.exports.once=function(g,I){return new Promise((function(A,C){function t(A){g.removeListener(I,i),C(A)}function i(){"function"==typeof g.removeListener&&g.removeListener("error",t),A([].slice.call(arguments))}aB(g,I,i,{once:!0}),"error"!==I&&function(g,I,A){"function"==typeof g.on&&aB(g,"error",I,A)}(g,t,{once:!0})}))},CB.EventEmitter=CB,CB.prototype._events=void 0,CB.prototype._eventsCount=0,CB.prototype._maxListeners=void 0;var tB=10;function iB(g){if("function"!=typeof g)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof g)}function eB(g){return void 0===g._maxListeners?CB.defaultMaxListeners:g._maxListeners}function oB(g,I,A,C){var t,i,e,o;if(iB(A),void 0===(i=g._events)?(i=g._events=Object.create(null),g._eventsCount=0):(void 0!==i.newListener&&(g.emit("newListener",I,A.listener?A.listener:A),i=g._events),e=i[I]),void 0===e)e=i[I]=A,++g._eventsCount;else if("function"==typeof e?e=i[I]=C?[A,e]:[e,A]:C?e.unshift(A):e.push(A),(t=eB(g))>0&&e.length>t&&!e.warned){e.warned=!0;var n=new Error("Possible EventEmitter memory leak detected. "+e.length+" "+String(I)+" listeners added. Use emitter.setMaxListeners() to increase limit");n.name="MaxListenersExceededWarning",n.emitter=g,n.type=I,n.count=e.length,o=n,console&&console.warn&&console.warn(o)}return g}function nB(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function sB(g,I,A){var C={fired:!1,wrapFn:void 0,target:g,type:I,listener:A},t=nB.bind(C);return t.listener=A,C.wrapFn=t,t}function lB(g,I,A){var C=g._events;if(void 0===C)return[];var t=C[I];return void 0===t?[]:"function"==typeof t?A?[t.listener||t]:[t]:A?function(g){for(var I=new Array(g.length),A=0;A<I.length;++A)I[A]=g[A].listener||g[A];return I}(t):cB(t,t.length)}function rB(g){var I=this._events;if(void 0!==I){var A=I[g];if("function"==typeof A)return 1;if(void 0!==A)return A.length}return 0}function cB(g,I){for(var A=new Array(I),C=0;C<I;++C)A[C]=g[C];return A}function aB(g,I,A,C){if("function"==typeof g.on)C.once?g.once(I,A):g.on(I,A);else{if("function"!=typeof g.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof g);g.addEventListener(I,(function t(i){C.once&&g.removeEventListener(I,t),A(i)}))}}Object.defineProperty(CB,"defaultMaxListeners",{enumerable:!0,get:function(){return tB},set:function(g){if("number"!=typeof g||g<0||AB(g))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+g+".");tB=g}}),CB.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},CB.prototype.setMaxListeners=function(g){if("number"!=typeof g||g<0||AB(g))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+g+".");return this._maxListeners=g,this},CB.prototype.getMaxListeners=function(){return eB(this)},CB.prototype.emit=function(g){for(var I=[],A=1;A<arguments.length;A++)I.push(arguments[A]);var C="error"===g,t=this._events;if(void 0!==t)C=C&&void 0===t.error;else if(!C)return!1;if(C){var i;if(I.length>0&&(i=I[0]),i instanceof Error)throw i;var e=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw e.context=i,e}var o=t[g];if(void 0===o)return!1;if("function"==typeof o)IB(o,this,I);else{var n=o.length,s=cB(o,n);for(A=0;A<n;++A)IB(s[A],this,I)}return!0},CB.prototype.addListener=function(g,I){return oB(this,g,I,!1)},CB.prototype.on=CB.prototype.addListener,CB.prototype.prependListener=function(g,I){return oB(this,g,I,!0)},CB.prototype.once=function(g,I){return iB(I),this.on(g,sB(this,g,I)),this},CB.prototype.prependOnceListener=function(g,I){return iB(I),this.prependListener(g,sB(this,g,I)),this},CB.prototype.removeListener=function(g,I){var A,C,t,i,e;if(iB(I),void 0===(C=this._events))return this;if(void 0===(A=C[g]))return this;if(A===I||A.listener===I)0==--this._eventsCount?this._events=Object.create(null):(delete C[g],C.removeListener&&this.emit("removeListener",g,A.listener||I));else if("function"!=typeof A){for(t=-1,i=A.length-1;i>=0;i--)if(A[i]===I||A[i].listener===I){e=A[i].listener,t=i;break}if(t<0)return this;0===t?A.shift():function(g,I){for(;I+1<g.length;I++)g[I]=g[I+1];g.pop()}(A,t),1===A.length&&(C[g]=A[0]),void 0!==C.removeListener&&this.emit("removeListener",g,e||I)}return this},CB.prototype.off=CB.prototype.removeListener,CB.prototype.removeAllListeners=function(g){var I,A,C;if(void 0===(A=this._events))return this;if(void 0===A.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==A[g]&&(0==--this._eventsCount?this._events=Object.create(null):delete A[g]),this;if(0===arguments.length){var t,i=Object.keys(A);for(C=0;C<i.length;++C)"removeListener"!==(t=i[C])&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(I=A[g]))this.removeListener(g,I);else if(void 0!==I)for(C=I.length-1;C>=0;C--)this.removeListener(g,I[C]);return this},CB.prototype.listeners=function(g){return lB(this,g,!0)},CB.prototype.rawListeners=function(g){return lB(this,g,!1)},CB.listenerCount=function(g,I){return"function"==typeof g.listenerCount?g.listenerCount(I):rB.call(g,I)},CB.prototype.listenerCount=rB,CB.prototype.eventNames=function(){return this._eventsCount>0?$p(this._events):[]},function(g){var I,A=Lu&&Lu.__extends||(I=function(g,A){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,I){g.__proto__=I}||function(g,I){for(var A in I)Object.prototype.hasOwnProperty.call(I,A)&&(g[A]=I[A])})(g,A)},function(g,A){if("function"!=typeof A&&null!==A)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");function C(){this.constructor=g}I(g,A),g.prototype=null===A?Object.create(A):(C.prototype=A.prototype,new C)});Object.defineProperty(g,"__esModule",{value:!0}),g.File=g.Link=g.Node=g.SEP=void 0;var C=Hp,t=sG,i=Uu,e=qp.exports,o=Pu,n=i.constants.S_IFMT,s=i.constants.S_IFDIR,l=i.constants.S_IFREG,r=i.constants.S_IFLNK,c=i.constants.O_APPEND;g.SEP="/";var a=function(g){function I(I,A){void 0===A&&(A=438);var t=g.call(this)||this;return t.uid=C.default.getuid(),t.gid=C.default.getgid(),t.atime=new Date,t.mtime=new Date,t.ctime=new Date,t.perm=438,t.mode=l,t.nlink=1,t.perm=A,t.mode|=A,t.ino=I,t}return A(I,g),I.prototype.getString=function(g){return void 0===g&&(g="utf8"),this.getBuffer().toString(g)},I.prototype.setString=function(g){this.buf=(0,t.bufferFrom)(g,"utf8"),this.touch()},I.prototype.getBuffer=function(){return this.buf||this.setBuffer((0,t.bufferAllocUnsafe)(0)),(0,t.bufferFrom)(this.buf)},I.prototype.setBuffer=function(g){this.buf=(0,t.bufferFrom)(g),this.touch()},I.prototype.getSize=function(){return this.buf?this.buf.length:0},I.prototype.setModeProperty=function(g){this.mode=this.mode&~n|g},I.prototype.setIsFile=function(){this.setModeProperty(l)},I.prototype.setIsDirectory=function(){this.setModeProperty(s)},I.prototype.setIsSymlink=function(){this.setModeProperty(r)},I.prototype.isFile=function(){return(this.mode&n)===l},I.prototype.isDirectory=function(){return(this.mode&n)===s},I.prototype.isSymlink=function(){return(this.mode&n)===r},I.prototype.makeSymlink=function(g){this.symlink=g,this.setIsSymlink()},I.prototype.write=function(g,I,A,C){if(void 0===I&&(I=0),void 0===A&&(A=g.length),void 0===C&&(C=0),this.buf||(this.buf=(0,t.bufferAllocUnsafe)(0)),C+A>this.buf.length){var i=(0,t.bufferAllocUnsafe)(C+A);this.buf.copy(i,0,0,this.buf.length),this.buf=i}return g.copy(this.buf,C,I,I+A),this.touch(),A},I.prototype.read=function(g,I,A,C){void 0===I&&(I=0),void 0===A&&(A=g.byteLength),void 0===C&&(C=0),this.buf||(this.buf=(0,t.bufferAllocUnsafe)(0));var i=A;return i>g.byteLength&&(i=g.byteLength),i+C>this.buf.length&&(i=this.buf.length-C),this.buf.copy(g,I,C,C+i),i},I.prototype.truncate=function(g){if(void 0===g&&(g=0),g)if(this.buf||(this.buf=(0,t.bufferAllocUnsafe)(0)),g<=this.buf.length)this.buf=this.buf.slice(0,g);else{var I=(0,t.bufferAllocUnsafe)(0);this.buf.copy(I),I.fill(0,g)}else this.buf=(0,t.bufferAllocUnsafe)(0);this.touch()},I.prototype.chmod=function(g){this.perm=g,this.mode=-512&this.mode|g,this.touch()},I.prototype.chown=function(g,I){this.uid=g,this.gid=I,this.touch()},I.prototype.touch=function(){this.mtime=new Date,this.emit("change",this)},I.prototype.canRead=function(g,I){return void 0===g&&(g=C.default.getuid()),void 0===I&&(I=C.default.getgid()),!!(4&this.perm)||(!!(I===this.gid&&32&this.perm)||!!(g===this.uid&&256&this.perm))},I.prototype.canWrite=function(g,I){return void 0===g&&(g=C.default.getuid()),void 0===I&&(I=C.default.getgid()),!!(2&this.perm)||(!!(I===this.gid&&16&this.perm)||!!(g===this.uid&&128&this.perm))},I.prototype.del=function(){this.emit("delete",this)},I.prototype.toJSON=function(){return{ino:this.ino,uid:this.uid,gid:this.gid,atime:this.atime.getTime(),mtime:this.mtime.getTime(),ctime:this.ctime.getTime(),perm:this.perm,mode:this.mode,nlink:this.nlink,symlink:this.symlink,data:this.getString()}},I}(e.EventEmitter);g.Node=a;var d=function(I){function C(g,A,C){var t=I.call(this)||this;return t.children={},t.steps=[],t.ino=0,t.length=0,t.vol=g,t.parent=A,t.steps=A?A.steps.concat([C]):[C],t}return A(C,I),C.prototype.setNode=function(g){this.node=g,this.ino=g.ino},C.prototype.getNode=function(){return this.node},C.prototype.createChild=function(g,I){void 0===I&&(I=this.vol.createNode());var A=new C(this.vol,this,g);return A.setNode(I),I.isDirectory(),this.setChild(g,A),A},C.prototype.setChild=function(g,I){return void 0===I&&(I=new C(this.vol,this,g)),this.children[g]=I,I.parent=this,this.length++,this.emit("child:add",I,this),I},C.prototype.deleteChild=function(g){delete this.children[g.getName()],this.length--,this.emit("child:delete",g,this)},C.prototype.getChild=function(g){if(Object.hasOwnProperty.call(this.children,g))return this.children[g]},C.prototype.getPath=function(){return this.steps.join(g.SEP)},C.prototype.getName=function(){return this.steps[this.steps.length-1]},C.prototype.walk=function(g,I,A){if(void 0===I&&(I=g.length),void 0===A&&(A=0),A>=g.length)return this;if(A>=I)return this;var C=g[A],t=this.getChild(C);return t?t.walk(g,I,A+1):null},C.prototype.toJSON=function(){return{steps:this.steps,ino:this.ino,children:Object.keys(this.children)}},C}(e.EventEmitter);g.Link=d;var h=function(){function g(g,I,A,C){this.position=0,this.link=g,this.node=I,this.flags=A,this.fd=C}return g.prototype.getString=function(g){return this.node.getString()},g.prototype.setString=function(g){this.node.setString(g)},g.prototype.getBuffer=function(){return this.node.getBuffer()},g.prototype.setBuffer=function(g){this.node.setBuffer(g)},g.prototype.getSize=function(){return this.node.getSize()},g.prototype.truncate=function(g){this.node.truncate(g)},g.prototype.seekTo=function(g){this.position=g},g.prototype.stats=function(){return o.default.build(this.node)},g.prototype.write=function(g,I,A,C){void 0===I&&(I=0),void 0===A&&(A=g.length),"number"!=typeof C&&(C=this.position),this.flags&c&&(C=this.getSize());var t=this.node.write(g,I,A,C);return this.position=C+t,t},g.prototype.read=function(g,I,A,C){void 0===I&&(I=0),void 0===A&&(A=g.byteLength),"number"!=typeof C&&(C=this.position);var t=this.node.read(g,I,A,C);return this.position=C+t,t},g.prototype.chmod=function(g){this.node.chmod(g)},g.prototype.chown=function(g,I){this.node.chown(g,I)},g}();g.File=h}(Qp);var dB={};Object.defineProperty(dB,"__esModule",{value:!0}),dB.default=function(g,I,A){var C=setTimeout.apply("undefined"!=typeof globalThis?globalThis:Lu,arguments);return C&&"object"==typeof C&&"function"==typeof C.unref&&C.unref(),C};var hB={},mB=Lu&&Lu.__spreadArray||function(g,I,A){if(A||2===arguments.length)for(var C,t=0,i=I.length;t<i;t++)!C&&t in I||(C||(C=Array.prototype.slice.call(I,0,t)),C[t]=I[t]);return g.concat(C||Array.prototype.slice.call(I))};function ZB(g,I,A){return void 0===A&&(A=function(g){return g}),function(){for(var C=[],t=0;t<arguments.length;t++)C[t]=arguments[t];return new Promise((function(t,i){g[I].bind(g).apply(void 0,mB(mB([],C,!1),[function(g,I){return g?i(g):t(A(I))}],!1))}))}}Object.defineProperty(hB,"__esModule",{value:!0}),hB.FileHandle=void 0;var uB=function(){function g(g,I){this.vol=g,this.fd=I}return g.prototype.appendFile=function(g,I){return ZB(this.vol,"appendFile")(this.fd,g,I)},g.prototype.chmod=function(g){return ZB(this.vol,"fchmod")(this.fd,g)},g.prototype.chown=function(g,I){return ZB(this.vol,"fchown")(this.fd,g,I)},g.prototype.close=function(){return ZB(this.vol,"close")(this.fd)},g.prototype.datasync=function(){return ZB(this.vol,"fdatasync")(this.fd)},g.prototype.read=function(g,I,A,C){return ZB(this.vol,"read",(function(I){return{bytesRead:I,buffer:g}}))(this.fd,g,I,A,C)},g.prototype.readFile=function(g){return ZB(this.vol,"readFile")(this.fd,g)},g.prototype.stat=function(g){return ZB(this.vol,"fstat")(this.fd,g)},g.prototype.sync=function(){return ZB(this.vol,"fsync")(this.fd)},g.prototype.truncate=function(g){return ZB(this.vol,"ftruncate")(this.fd,g)},g.prototype.utimes=function(g,I){return ZB(this.vol,"futimes")(this.fd,g,I)},g.prototype.write=function(g,I,A,C){return ZB(this.vol,"write",(function(I){return{bytesWritten:I,buffer:g}}))(this.fd,g,I,A,C)},g.prototype.writeFile=function(g,I){return ZB(this.vol,"writeFile")(this.fd,g,I)},g}();hB.FileHandle=uB,hB.default=function(g){return"undefined"==typeof Promise?null:{FileHandle:uB,access:function(I,A){return ZB(g,"access")(I,A)},appendFile:function(I,A,C){return ZB(g,"appendFile")(I instanceof uB?I.fd:I,A,C)},chmod:function(I,A){return ZB(g,"chmod")(I,A)},chown:function(I,A,C){return ZB(g,"chown")(I,A,C)},copyFile:function(I,A,C){return ZB(g,"copyFile")(I,A,C)},lchmod:function(I,A){return ZB(g,"lchmod")(I,A)},lchown:function(I,A,C){return ZB(g,"lchown")(I,A,C)},link:function(I,A){return ZB(g,"link")(I,A)},lstat:function(I,A){return ZB(g,"lstat")(I,A)},mkdir:function(I,A){return ZB(g,"mkdir")(I,A)},mkdtemp:function(I,A){return ZB(g,"mkdtemp")(I,A)},open:function(I,A,C){return ZB(g,"open",(function(I){return new uB(g,I)}))(I,A,C)},readdir:function(I,A){return ZB(g,"readdir")(I,A)},readFile:function(I,A){return ZB(g,"readFile")(I instanceof uB?I.fd:I,A)},readlink:function(I,A){return ZB(g,"readlink")(I,A)},realpath:function(I,A){return ZB(g,"realpath")(I,A)},rename:function(I,A){return ZB(g,"rename")(I,A)},rmdir:function(I){return ZB(g,"rmdir")(I)},rm:function(I,A){return ZB(g,"rm")(I,A)},stat:function(I,A){return ZB(g,"stat")(I,A)},symlink:function(I,A,C){return ZB(g,"symlink")(I,A,C)},truncate:function(I,A){return ZB(g,"truncate")(I,A)},unlink:function(I){return ZB(g,"unlink")(I)},utimes:function(I,A,C){return ZB(g,"utimes")(I,A,C)},writeFile:function(I,A,C){return ZB(g,"writeFile")(I instanceof uB?I.fd:I,A,C)}}};var GB={};function bB(g){return g}Object.defineProperty(GB,"__esModule",{value:!0}),GB.unixify=bB,GB.correctPath=function(g){return g.replace(/^\\\\\?\\.:\\/,"\\")},function(g){var I,A=Lu&&Lu.__extends||(I=function(g,A){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,I){g.__proto__=I}||function(g,I){for(var A in I)Object.prototype.hasOwnProperty.call(I,A)&&(g[A]=I[A])})(g,A)},function(g,A){if("function"!=typeof A&&null!==A)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");function C(){this.constructor=g}I(g,A),g.prototype=null===A?Object.create(A):(C.prototype=A.prototype,new C)}),C=Lu&&Lu.__spreadArray||function(g,I,A){if(A||2===arguments.length)for(var C,t=0,i=I.length;t<i;t++)!C&&t in I||(C||(C=Array.prototype.slice.call(I,0,t)),C[t]=I[t]);return g.concat(C||Array.prototype.slice.call(I))};Object.defineProperty(g,"__esModule",{value:!0}),g.FSWatcher=g.StatWatcher=g.Volume=g.toUnixTimestamp=g.bufferToEncoding=g.dataToBuffer=g.dataToStr=g.pathToSteps=g.filenameToSteps=g.pathToFilename=g.flagsToNumber=g.FLAGS=void 0;var t,i,e=mp.exports,o=Qp,n=Pu,s=oG,l=sG,r=jp,c=Hp,a=dB,d=yG,h=Uu,m=qp.exports,Z=nG,u=BG,G=wG,b=hB,p=e.resolve,B=h.constants.O_RDONLY,y=h.constants.O_WRONLY,w=h.constants.O_RDWR,W=h.constants.O_CREAT,S=h.constants.O_EXCL,K=h.constants.O_TRUNC,f=h.constants.O_APPEND,Y=h.constants.O_SYNC,X=h.constants.O_DIRECTORY,V=h.constants.F_OK,O=h.constants.COPYFILE_EXCL,R=h.constants.COPYFILE_FICLONE_FORCE,Q=e.posix?e.posix:e,H=Q.sep,k=Q.relative,J=Q.join,v=Q.dirname,D="win32"===c.default.platform,M="path must be a string or Buffer",N="fd must be a file descriptor",E="mode must be an int",F="callback must be a function",L="uid must be an unsigned int",T="gid must be an unsigned int",z="ENOENT",P="EBADF",U="EINVAL",x="EEXIST",j="ENOTDIR",_="EMFILE",$="EACCES",q="EISDIR",gg="ENOTEMPTY",Ig="ENOSYS",Ag="ERR_FS_EISDIR";function Cg(g,I,A,C,t){void 0===I&&(I=""),void 0===A&&(A=""),void 0===C&&(C=""),void 0===t&&(t=Error);var i=new t(function(g,I,A,C){void 0===I&&(I=""),void 0===A&&(A=""),void 0===C&&(C="");var t="";switch(A&&(t=" '"+A+"'"),C&&(t+=" -> '"+C+"'"),g){case z:return"ENOENT: no such file or directory, "+I+t;case P:return"EBADF: bad file descriptor, "+I+t;case U:return"EINVAL: invalid argument, "+I+t;case"EPERM":return"EPERM: operation not permitted, "+I+t;case"EPROTO":return"EPROTO: protocol error, "+I+t;case x:return"EEXIST: file already exists, "+I+t;case j:return"ENOTDIR: not a directory, "+I+t;case q:return"EISDIR: illegal operation on a directory, "+I+t;case $:return"EACCES: permission denied, "+I+t;case gg:return"ENOTEMPTY: directory not empty, "+I+t;case _:return"EMFILE: too many open files, "+I+t;case Ig:return"ENOSYS: function not implemented, "+I+t;case Ag:return"[ERR_FS_EISDIR]: Path is a directory: "+I+" returned EISDIR (is a directory) "+A;default:return g+": error occurred, "+I+t}}(g,I,A,C));return i.code=g,i}function tg(g){if("number"==typeof g)return g;if("string"==typeof g){var I=t[g];if(void 0!==I)return I}throw new u.TypeError("ERR_INVALID_OPT_VALUE","flags",g)}function ig(g,I){var A;if(!I)return g;var C=typeof I;switch(C){case"string":A=Object.assign({},g,{encoding:I});break;case"object":A=Object.assign({},g,I);break;default:throw TypeError(function(g){return"Expected options to be either an object or a string, but got "+g+" instead"}(C))}return"buffer"!==A.encoding&&(0,Z.assertEncoding)(A.encoding),A}function eg(g){return function(I){return ig(g,I)}}function og(g){if("function"!=typeof g)throw TypeError(F);return g}function ng(g){return function(I,A){return"function"==typeof I?[g(),I]:[g(I),og(A)]}}(i=t=g.FLAGS||(g.FLAGS={}))[i.r=B]="r",i[i["r+"]=w]="r+",i[i.rs=B|Y]="rs",i[i.sr=i.rs]="sr",i[i["rs+"]=w|Y]="rs+",i[i["sr+"]=i["rs+"]]="sr+",i[i.w=y|W|K]="w",i[i.wx=y|W|K|S]="wx",i[i.xw=i.wx]="xw",i[i["w+"]=w|W|K]="w+",i[i["wx+"]=w|W|K|S]="wx+",i[i["xw+"]=i["wx+"]]="xw+",i[i.a=y|f|W]="a",i[i.ax=y|f|W|S]="ax",i[i.xa=i.ax]="xa",i[i["a+"]=w|f|W]="a+",i[i["ax+"]=w|f|W|S]="ax+",i[i["xa+"]=i["ax+"]]="xa+",g.flagsToNumber=tg;var sg={encoding:"utf8"},lg=eg(sg),rg=ng(lg),cg=eg({flag:"r"}),ag={encoding:"utf8",mode:438,flag:t[t.w]},dg=eg(ag),hg={encoding:"utf8",mode:438,flag:t[t.a]},mg=eg(hg),Zg=ng(mg),ug=eg(sg),Gg=ng(ug),bg={mode:511,recursive:!1},pg=function(g){return"number"==typeof g?Object.assign({},bg,{mode:g}):Object.assign({},bg,g)},Bg={recursive:!1},yg=function(g){return Object.assign({},Bg,g)},wg=ng(eg(sg)),Wg=eg({encoding:"utf8",withFileTypes:!1}),Sg=ng(Wg),Kg={bigint:!1},fg=function(g){return void 0===g&&(g={}),Object.assign({},Kg,g)},Yg=function(g,I){return"function"==typeof g?[fg(),g]:[fg(g),og(I)]};function Xg(g){if("string"!=typeof g&&!l.Buffer.isBuffer(g)){try{if(!(g instanceof yG.URL))throw new TypeError(M)}catch(A){throw new TypeError(M)}g=function(g){if(""!==g.hostname)throw new u.TypeError("ERR_INVALID_FILE_URL_HOST",c.default.platform);for(var I=g.pathname,A=0;A<I.length;A++)if("%"===I[A]){var C=32|I.codePointAt(A+2);if("2"===I[A+1]&&102===C)throw new u.TypeError("ERR_INVALID_FILE_URL_PATH","must not include encoded / characters")}return decodeURIComponent(I)}(g)}var I=String(g);return Jg(I),I}g.pathToFilename=Xg;var Vg=function(g,I){return void 0===I&&(I=c.default.cwd()),p(I,g)};if(D){var Og=Vg,Rg=GB.unixify;Vg=function(g,I){return Rg(Og(g,I))}}function Qg(g,I){var A=Vg(g,I).substr(1);return A?A.split(H):[]}function Hg(g,I){return void 0===I&&(I=Z.ENCODING_UTF8),l.Buffer.isBuffer(g)?g:g instanceof Uint8Array?(0,l.bufferFrom)(g):(0,l.bufferFrom)(String(g),I)}function kg(g,I){return I&&"buffer"!==I?g.toString(I):g}function Jg(g,I){if(-1!==(""+g).indexOf("\0")){var A=new Error("Path must be a string without null bytes");if(A.code=z,"function"!=typeof I)throw A;return c.default.nextTick(I,A),!1}return!0}function vg(g,I){var A=function(g,I){return"number"==typeof g?g:"string"==typeof g?parseInt(g,8):I?vg(I):void 0}(g,I);if("number"!=typeof A||isNaN(A))throw new TypeError(E);return A}function Dg(g){return g>>>0===g}function Mg(g){if(!Dg(g))throw TypeError(N)}function Ng(g){if("string"==typeof g&&+g==g)return+g;if(g instanceof Date)return g.getTime()/1e3;if(isFinite(g))return g<0?Date.now()/1e3:g;throw new Error("Cannot parse time: "+g)}function Eg(g){if("number"!=typeof g)throw TypeError(L)}function Fg(g){if("number"!=typeof g)throw TypeError(T)}g.filenameToSteps=Qg,g.pathToSteps=function(g){return Qg(Xg(g))},g.dataToStr=function(g,I){return void 0===I&&(I=Z.ENCODING_UTF8),l.Buffer.isBuffer(g)?g.toString(I):g instanceof Uint8Array?(0,l.bufferFrom)(g).toString(I):String(g)},g.dataToBuffer=Hg,g.bufferToEncoding=kg,g.toUnixTimestamp=Ng;var Lg=function(){function g(g){void 0===g&&(g={}),this.ino=0,this.inodes={},this.releasedInos=[],this.fds={},this.releasedFds=[],this.maxFiles=1e4,this.openFiles=0,this.promisesApi=(0,b.default)(this),this.statWatchers={},this.props=Object.assign({Node:o.Node,Link:o.Link,File:o.File},g);var I=this.createLink();I.setNode(this.createNode(!0));var t=this;this.StatWatcher=function(g){function I(){return g.call(this,t)||this}return A(I,g),I}(Pg);var i=Ug;this.ReadStream=function(g){function I(){for(var I=[],A=0;A<arguments.length;A++)I[A]=arguments[A];return g.apply(this,C([t],I,!1))||this}return A(I,g),I}(i);var e=jg;this.WriteStream=function(g){function I(){for(var I=[],A=0;A<arguments.length;A++)I[A]=arguments[A];return g.apply(this,C([t],I,!1))||this}return A(I,g),I}(e),this.FSWatcher=function(g){function I(){return g.call(this,t)||this}return A(I,g),I}(_g),this.root=I}return g.fromJSON=function(I,A){var C=new g;return C.fromJSON(I,A),C},g.fromNestedJSON=function(I,A){var C=new g;return C.fromNestedJSON(I,A),C},Object.defineProperty(g.prototype,"promises",{get:function(){if(null===this.promisesApi)throw new Error("Promise is not supported in this environment.");return this.promisesApi},enumerable:!1,configurable:!0}),g.prototype.createLink=function(g,I,A,C){if(void 0===A&&(A=!1),!g)return new this.props.Link(this,null,"");if(!I)throw new Error("createLink: name cannot be empty");return g.createChild(I,this.createNode(A,C))},g.prototype.deleteLink=function(g){var I=g.parent;return!!I&&(I.deleteChild(g),!0)},g.prototype.newInoNumber=function(){var g=this.releasedInos.pop();return g||(this.ino=(this.ino+1)%4294967295,this.ino)},g.prototype.newFdNumber=function(){var I=this.releasedFds.pop();return"number"==typeof I?I:g.fd--},g.prototype.createNode=function(g,I){void 0===g&&(g=!1);var A=new this.props.Node(this.newInoNumber(),I);return g&&A.setIsDirectory(),this.inodes[A.ino]=A,A},g.prototype.getNode=function(g){return this.inodes[g]},g.prototype.deleteNode=function(g){g.del(),delete this.inodes[g.ino],this.releasedInos.push(g.ino)},g.prototype.genRndStr=function(){var g=(Math.random()+1).toString(36).substr(2,6);return 6===g.length?g:this.genRndStr()},g.prototype.getLink=function(g){return this.root.walk(g)},g.prototype.getLinkOrThrow=function(g,I){var A=Qg(g),C=this.getLink(A);if(!C)throw Cg(z,I,g);return C},g.prototype.getResolvedLink=function(g){for(var I="string"==typeof g?Qg(g):g,A=this.root,C=0;C<I.length;){var t=I[C];if(!(A=A.getChild(t)))return null;var i=A.getNode();i.isSymlink()?(I=i.symlink.concat(I.slice(C+1)),A=this.root,C=0):C++}return A},g.prototype.getResolvedLinkOrThrow=function(g,I){var A=this.getResolvedLink(g);if(!A)throw Cg(z,I,g);return A},g.prototype.resolveSymlinks=function(g){return this.getResolvedLink(g.steps.slice(1))},g.prototype.getLinkAsDirOrThrow=function(g,I){var A=this.getLinkOrThrow(g,I);if(!A.getNode().isDirectory())throw Cg(j,I,g);return A},g.prototype.getLinkParent=function(g){return this.root.walk(g,g.length-1)},g.prototype.getLinkParentAsDirOrThrow=function(g,I){var A=g instanceof Array?g:Qg(g),C=this.getLinkParent(A);if(!C)throw Cg(z,I,H+A.join(H));if(!C.getNode().isDirectory())throw Cg(j,I,H+A.join(H));return C},g.prototype.getFileByFd=function(g){return this.fds[String(g)]},g.prototype.getFileByFdOrThrow=function(g,I){if(!Dg(g))throw TypeError(N);var A=this.getFileByFd(g);if(!A)throw Cg(P,I);return A},g.prototype.wrapAsync=function(g,I,A){var C=this;og(A),(0,r.default)((function(){var t;try{t=g.apply(C,I)}catch(i){return void A(i)}A(null,t)}))},g.prototype._toJSON=function(g,I,A){var C;void 0===g&&(g=this.root),void 0===I&&(I={});var t=!0,i=g.children;for(var e in g.getNode().isFile()&&((C={})[g.getName()]=g.parent.getChild(g.getName()),i=C,g=g.parent),i){t=!1;var o=g.getChild(e);if(!o)throw new Error("_toJSON: unexpected undefined");var n=o.getNode();if(n.isFile()){var s=o.getPath();A&&(s=k(A,s)),I[s]=n.getString()}else n.isDirectory()&&this._toJSON(o,I,A)}var l=g.getPath();return A&&(l=k(A,l)),l&&t&&(I[l]=null),I},g.prototype.toJSON=function(g,I,A){void 0===I&&(I={}),void 0===A&&(A=!1);var C=[];if(g){g instanceof Array||(g=[g]);for(var t=0,i=g;t<i.length;t++){var e=Xg(i[t]);(s=this.getResolvedLink(e))&&C.push(s)}}else C.push(this.root);if(!C.length)return I;for(var o=0,n=C;o<n.length;o++){var s=n[o];this._toJSON(s,I,A?s.getPath():"")}return I},g.prototype.fromJSON=function(g,I){for(var A in void 0===I&&(I=c.default.cwd()),g){var C=g[A];if(A=Vg(A,I),"string"==typeof C){var t=v(A);this.mkdirpBase(t,511),this.writeFileSync(A,C)}else this.mkdirpBase(A,511)}},g.prototype.fromNestedJSON=function(g,I){var A;this.fromJSON((A={},function g(I,C){for(var t in C){var i=C[t],e=J(I,t);"string"==typeof i?A[e]=i:"object"==typeof i&&null!==i&&Object.keys(i).length>0?g(e,i):A[e]=null}}("",g),A),I)},g.prototype.reset=function(){this.ino=0,this.inodes={},this.releasedInos=[],this.fds={},this.releasedFds=[],this.openFiles=0,this.root=this.createLink(),this.root.setNode(this.createNode(!0))},g.prototype.mountSync=function(g,I){this.fromJSON(I,g)},g.prototype.openLink=function(g,I,A){if(void 0===A&&(A=!0),this.openFiles>=this.maxFiles)throw Cg(_,"open",g.getPath());var C=g;if(A&&(C=this.resolveSymlinks(g)),!C)throw Cg(z,"open",g.getPath());var t=C.getNode();if(t.isDirectory()){if((I&(B|w|y))!==B)throw Cg(q,"open",g.getPath())}else if(I&X)throw Cg(j,"open",g.getPath());if(!(I&y||t.canRead()))throw Cg($,"open",g.getPath());var i=new this.props.File(g,t,I,this.newFdNumber());return this.fds[i.fd]=i,this.openFiles++,I&K&&i.truncate(),i},g.prototype.openFile=function(g,I,A,C){void 0===C&&(C=!0);var t=Qg(g),i=C?this.getResolvedLink(t):this.getLink(t);if(!i&&I&W){var e=this.getResolvedLink(t.slice(0,t.length-1));if(!e)throw Cg(z,"open",H+t.join(H));I&W&&"number"==typeof A&&(i=this.createLink(e,t[t.length-1],!1,A))}if(i)return this.openLink(i,I,C);throw Cg(z,"open",g)},g.prototype.openBase=function(g,I,A,C){void 0===C&&(C=!0);var t=this.openFile(g,I,A,C);if(!t)throw Cg(z,"open",g);return t.fd},g.prototype.openSync=function(g,I,A){void 0===A&&(A=438);var C=vg(A),t=Xg(g),i=tg(I);return this.openBase(t,i,C)},g.prototype.open=function(g,I,A,C){var t=A,i=C;"function"==typeof A&&(t=438,i=A);var e=vg(t=t||438),o=Xg(g),n=tg(I);this.wrapAsync(this.openBase,[o,n,e],i)},g.prototype.closeFile=function(g){this.fds[g.fd]&&(this.openFiles--,delete this.fds[g.fd],this.releasedFds.push(g.fd))},g.prototype.closeSync=function(g){Mg(g);var I=this.getFileByFdOrThrow(g,"close");this.closeFile(I)},g.prototype.close=function(g,I){Mg(g),this.wrapAsync(this.closeSync,[g],I)},g.prototype.openFileOrGetById=function(g,I,A){if("number"==typeof g){var C=this.fds[g];if(!C)throw Cg(z);return C}return this.openFile(Xg(g),I,A)},g.prototype.readBase=function(g,I,A,C,t){return this.getFileByFdOrThrow(g).read(I,Number(A),Number(C),t)},g.prototype.readSync=function(g,I,A,C,t){return Mg(g),this.readBase(g,I,A,C,t)},g.prototype.read=function(g,I,A,C,t,i){var e=this;if(og(i),0===C)return c.default.nextTick((function(){i&&i(null,0,I)}));(0,r.default)((function(){try{var o=e.readBase(g,I,A,C,t);i(null,o,I)}catch(n){i(n)}}))},g.prototype.readFileBase=function(g,I,A){var C,t,i="number"==typeof g&&Dg(g);if(i)t=g;else{var e=Qg(Xg(g)),o=this.getResolvedLink(e);if(o)if(o.getNode().isDirectory())throw Cg(q,"open",o.getPath());t=this.openSync(g,I)}try{C=kg(this.getFileByFdOrThrow(t).getBuffer(),A)}finally{i||this.closeSync(t)}return C},g.prototype.readFileSync=function(g,I){var A=cg(I),C=tg(A.flag);return this.readFileBase(g,C,A.encoding)},g.prototype.readFile=function(g,I,A){var C=ng(cg)(I,A),t=C[0],i=C[1],e=tg(t.flag);this.wrapAsync(this.readFileBase,[g,e,t.encoding],i)},g.prototype.writeBase=function(g,I,A,C,t){return this.getFileByFdOrThrow(g,"write").write(I,A,C,t)},g.prototype.writeSync=function(g,I,A,C,t){var i,e,o,n;Mg(g);var s="string"!=typeof I;s?(e=0|(A||0),o=C,n=t):(n=A,i=C);var l=Hg(I,i);return s?void 0===o&&(o=l.length):(e=0,o=l.length),this.writeBase(g,l,e,o,n)},g.prototype.write=function(g,I,A,C,t,i){var e,o,n,s,l,c=this;Mg(g);var a=typeof I,d=typeof A,h=typeof C,m=typeof t;"string"!==a?"function"===d?l=A:"function"===h?(e=0|A,l=C):"function"===m?(e=0|A,o=C,l=t):(e=0|A,o=C,n=t,l=i):"function"===d?l=A:"function"===h?(n=A,l=C):"function"===m&&(n=A,s=C,l=t);var Z=Hg(I,s);"string"!==a?void 0===o&&(o=Z.length):(e=0,o=Z.length);var u=og(l);(0,r.default)((function(){try{var A=c.writeBase(g,Z,e,o,n);u(null,A,"string"!==a?Z:I)}catch(C){u(C)}}))},g.prototype.writeFileBase=function(g,I,A,C){var t,i="number"==typeof g;t=i?g:this.openBase(Xg(g),A,C);var e=0,o=I.length,n=A&f?void 0:0;try{for(;o>0;){var s=this.writeSync(t,I,e,o,n);e+=s,o-=s,void 0!==n&&(n+=s)}}finally{i||this.closeSync(t)}},g.prototype.writeFileSync=function(g,I,A){var C=dg(A),t=tg(C.flag),i=vg(C.mode),e=Hg(I,C.encoding);this.writeFileBase(g,e,t,i)},g.prototype.writeFile=function(g,I,A,C){var t=A,i=C;"function"==typeof A&&(t=ag,i=A);var e=og(i),o=dg(t),n=tg(o.flag),s=vg(o.mode),l=Hg(I,o.encoding);this.wrapAsync(this.writeFileBase,[g,l,n,s],e)},g.prototype.linkBase=function(g,I){var A=Qg(g),C=this.getLink(A);if(!C)throw Cg(z,"link",g,I);var t=Qg(I),i=this.getLinkParent(t);if(!i)throw Cg(z,"link",g,I);var e=t[t.length-1];if(i.getChild(e))throw Cg(x,"link",g,I);var o=C.getNode();o.nlink++,i.createChild(e,o)},g.prototype.copyFileBase=function(g,I,A){var C=this.readFileSync(g);if(A&O&&this.existsSync(I))throw Cg(x,"copyFile",g,I);if(A&R)throw Cg(Ig,"copyFile",g,I);this.writeFileBase(I,C,t.w,438)},g.prototype.copyFileSync=function(g,I,A){var C=Xg(g),t=Xg(I);return this.copyFileBase(C,t,0|(A||0))},g.prototype.copyFile=function(g,I,A,C){var t,i,e=Xg(g),o=Xg(I);"function"==typeof A?(t=0,i=A):(t=A,i=C),og(i),this.wrapAsync(this.copyFileBase,[e,o,t],i)},g.prototype.linkSync=function(g,I){var A=Xg(g),C=Xg(I);this.linkBase(A,C)},g.prototype.link=function(g,I,A){var C=Xg(g),t=Xg(I);this.wrapAsync(this.linkBase,[C,t],A)},g.prototype.unlinkBase=function(g){var I=Qg(g),A=this.getLink(I);if(!A)throw Cg(z,"unlink",g);if(A.length)throw Error("Dir not empty...");this.deleteLink(A);var C=A.getNode();C.nlink--,C.nlink<=0&&this.deleteNode(C)},g.prototype.unlinkSync=function(g){var I=Xg(g);this.unlinkBase(I)},g.prototype.unlink=function(g,I){var A=Xg(g);this.wrapAsync(this.unlinkBase,[A],I)},g.prototype.symlinkBase=function(g,I){var A=Qg(I),C=this.getLinkParent(A);if(!C)throw Cg(z,"symlink",g,I);var t=A[A.length-1];if(C.getChild(t))throw Cg(x,"symlink",g,I);var i=C.createChild(t);return i.getNode().makeSymlink(Qg(g)),i},g.prototype.symlinkSync=function(g,I,A){var C=Xg(g),t=Xg(I);this.symlinkBase(C,t)},g.prototype.symlink=function(g,I,A,C){var t=og("function"==typeof A?A:C),i=Xg(g),e=Xg(I);this.wrapAsync(this.symlinkBase,[i,e],t)},g.prototype.realpathBase=function(g,I){var A=Qg(g),C=this.getResolvedLink(A);if(!C)throw Cg(z,"realpath",g);return(0,Z.strToEncoding)(C.getPath(),I)},g.prototype.realpathSync=function(g,I){return this.realpathBase(Xg(g),ug(I).encoding)},g.prototype.realpath=function(g,I,A){var C=Gg(I,A),t=C[0],i=C[1],e=Xg(g);this.wrapAsync(this.realpathBase,[e,t.encoding],i)},g.prototype.lstatBase=function(g,I){void 0===I&&(I=!1);var A=this.getLink(Qg(g));if(!A)throw Cg(z,"lstat",g);return n.default.build(A.getNode(),I)},g.prototype.lstatSync=function(g,I){return this.lstatBase(Xg(g),fg(I).bigint)},g.prototype.lstat=function(g,I,A){var C=Yg(I,A),t=C[0],i=C[1];this.wrapAsync(this.lstatBase,[Xg(g),t.bigint],i)},g.prototype.statBase=function(g,I){void 0===I&&(I=!1);var A=this.getResolvedLink(Qg(g));if(!A)throw Cg(z,"stat",g);return n.default.build(A.getNode(),I)},g.prototype.statSync=function(g,I){return this.statBase(Xg(g),fg(I).bigint)},g.prototype.stat=function(g,I,A){var C=Yg(I,A),t=C[0],i=C[1];this.wrapAsync(this.statBase,[Xg(g),t.bigint],i)},g.prototype.fstatBase=function(g,I){void 0===I&&(I=!1);var A=this.getFileByFd(g);if(!A)throw Cg(P,"fstat");return n.default.build(A.node,I)},g.prototype.fstatSync=function(g,I){return this.fstatBase(g,fg(I).bigint)},g.prototype.fstat=function(g,I,A){var C=Yg(I,A),t=C[0],i=C[1];this.wrapAsync(this.fstatBase,[g,t.bigint],i)},g.prototype.renameBase=function(g,I){var A=this.getLink(Qg(g));if(!A)throw Cg(z,"rename",g,I);var t=Qg(I),i=this.getLinkParent(t);if(!i)throw Cg(z,"rename",g,I);var e=A.parent;e&&e.deleteChild(A);var o=t[t.length-1];A.steps=C(C([],i.steps,!0),[o],!1),i.setChild(A.getName(),A)},g.prototype.renameSync=function(g,I){var A=Xg(g),C=Xg(I);this.renameBase(A,C)},g.prototype.rename=function(g,I,A){var C=Xg(g),t=Xg(I);this.wrapAsync(this.renameBase,[C,t],A)},g.prototype.existsBase=function(g){return!!this.statBase(g)},g.prototype.existsSync=function(g){try{return this.existsBase(Xg(g))}catch(I){return!1}},g.prototype.exists=function(g,I){var A=this,C=Xg(g);if("function"!=typeof I)throw Error(F);(0,r.default)((function(){try{I(A.existsBase(C))}catch(g){I(!1)}}))},g.prototype.accessBase=function(g,I){this.getLinkOrThrow(g,"access")},g.prototype.accessSync=function(g,I){void 0===I&&(I=V);var A=Xg(g);I|=0,this.accessBase(A,I)},g.prototype.access=function(g,I,A){var C,t=V;"function"!=typeof I?(t=0|I,C=og(A)):C=I;var i=Xg(g);this.wrapAsync(this.accessBase,[i,t],C)},g.prototype.appendFileSync=function(g,I,A){void 0===A&&(A=hg);var C=mg(A);C.flag&&!Dg(g)||(C.flag="a"),this.writeFileSync(g,I,C)},g.prototype.appendFile=function(g,I,A,C){var t=Zg(A,C),i=t[0],e=t[1];i.flag&&!Dg(g)||(i.flag="a"),this.writeFile(g,I,i,e)},g.prototype.readdirBase=function(g,I){var A=Qg(g),C=this.getResolvedLink(A);if(!C)throw Cg(z,"readdir",g);if(!C.getNode().isDirectory())throw Cg(j,"scandir",g);if(I.withFileTypes){var t=[];for(var i in C.children){var e=C.getChild(i);e&&t.push(s.default.build(e,I.encoding))}return D||"buffer"===I.encoding||t.sort((function(g,I){return g.name<I.name?-1:g.name>I.name?1:0})),t}var o=[];for(var n in C.children)o.push((0,Z.strToEncoding)(n,I.encoding));return D||"buffer"===I.encoding||o.sort(),o},g.prototype.readdirSync=function(g,I){var A=Wg(I),C=Xg(g);return this.readdirBase(C,A)},g.prototype.readdir=function(g,I,A){var C=Sg(I,A),t=C[0],i=C[1],e=Xg(g);this.wrapAsync(this.readdirBase,[e,t],i)},g.prototype.readlinkBase=function(g,I){var A=this.getLinkOrThrow(g,"readlink").getNode();if(!A.isSymlink())throw Cg(U,"readlink",g);var C=H+A.symlink.join(H);return(0,Z.strToEncoding)(C,I)},g.prototype.readlinkSync=function(g,I){var A=lg(I),C=Xg(g);return this.readlinkBase(C,A.encoding)},g.prototype.readlink=function(g,I,A){var C=rg(I,A),t=C[0],i=C[1],e=Xg(g);this.wrapAsync(this.readlinkBase,[e,t.encoding],i)},g.prototype.fsyncBase=function(g){this.getFileByFdOrThrow(g,"fsync")},g.prototype.fsyncSync=function(g){this.fsyncBase(g)},g.prototype.fsync=function(g,I){this.wrapAsync(this.fsyncBase,[g],I)},g.prototype.fdatasyncBase=function(g){this.getFileByFdOrThrow(g,"fdatasync")},g.prototype.fdatasyncSync=function(g){this.fdatasyncBase(g)},g.prototype.fdatasync=function(g,I){this.wrapAsync(this.fdatasyncBase,[g],I)},g.prototype.ftruncateBase=function(g,I){this.getFileByFdOrThrow(g,"ftruncate").truncate(I)},g.prototype.ftruncateSync=function(g,I){this.ftruncateBase(g,I)},g.prototype.ftruncate=function(g,I,A){var C="number"==typeof I?I:0,t=og("number"==typeof I?A:I);this.wrapAsync(this.ftruncateBase,[g,C],t)},g.prototype.truncateBase=function(g,I){var A=this.openSync(g,"r+");try{this.ftruncateSync(A,I)}finally{this.closeSync(A)}},g.prototype.truncateSync=function(g,I){if(Dg(g))return this.ftruncateSync(g,I);this.truncateBase(g,I)},g.prototype.truncate=function(g,I,A){var C="number"==typeof I?I:0,t=og("number"==typeof I?A:I);if(Dg(g))return this.ftruncate(g,C,t);this.wrapAsync(this.truncateBase,[g,C],t)},g.prototype.futimesBase=function(g,I,A){var C=this.getFileByFdOrThrow(g,"futimes").node;C.atime=new Date(1e3*I),C.mtime=new Date(1e3*A)},g.prototype.futimesSync=function(g,I,A){this.futimesBase(g,Ng(I),Ng(A))},g.prototype.futimes=function(g,I,A,C){this.wrapAsync(this.futimesBase,[g,Ng(I),Ng(A)],C)},g.prototype.utimesBase=function(g,I,A){var C=this.openSync(g,"r+");try{this.futimesBase(C,I,A)}finally{this.closeSync(C)}},g.prototype.utimesSync=function(g,I,A){this.utimesBase(Xg(g),Ng(I),Ng(A))},g.prototype.utimes=function(g,I,A,C){this.wrapAsync(this.utimesBase,[Xg(g),Ng(I),Ng(A)],C)},g.prototype.mkdirBase=function(g,I){var A=Qg(g);if(!A.length)throw Cg(x,"mkdir",g);var C=this.getLinkParentAsDirOrThrow(g,"mkdir"),t=A[A.length-1];if(C.getChild(t))throw Cg(x,"mkdir",g);C.createChild(t,this.createNode(!0,I))},g.prototype.mkdirpBase=function(g,I){for(var A=Qg(g),C=this.root,t=0;t<A.length;t++){var i=A[t];if(!C.getNode().isDirectory())throw Cg(j,"mkdir",C.getPath());var e=C.getChild(i);if(e){if(!e.getNode().isDirectory())throw Cg(j,"mkdir",e.getPath());C=e}else C=C.createChild(i,this.createNode(!0,I))}},g.prototype.mkdirSync=function(g,I){var A=pg(I),C=vg(A.mode,511),t=Xg(g);A.recursive?this.mkdirpBase(t,C):this.mkdirBase(t,C)},g.prototype.mkdir=function(g,I,A){var C=pg(I),t=og("function"==typeof I?I:A),i=vg(C.mode,511),e=Xg(g);C.recursive?this.wrapAsync(this.mkdirpBase,[e,i],t):this.wrapAsync(this.mkdirBase,[e,i],t)},g.prototype.mkdirpSync=function(g,I){this.mkdirSync(g,{mode:I,recursive:!0})},g.prototype.mkdirp=function(g,I,A){var C="function"==typeof I?void 0:I,t=og("function"==typeof I?I:A);this.mkdir(g,{mode:C,recursive:!0},t)},g.prototype.mkdtempBase=function(g,I,A){void 0===A&&(A=5);var C=g+this.genRndStr();try{return this.mkdirBase(C,511),(0,Z.strToEncoding)(C,I)}catch(t){if(t.code===x){if(A>1)return this.mkdtempBase(g,I,A-1);throw Error("Could not create temp dir.")}throw t}},g.prototype.mkdtempSync=function(g,I){var A=lg(I).encoding;if(!g||"string"!=typeof g)throw new TypeError("filename prefix is required");return Jg(g),this.mkdtempBase(g,A)},g.prototype.mkdtemp=function(g,I,A){var C=rg(I,A),t=C[0].encoding,i=C[1];if(!g||"string"!=typeof g)throw new TypeError("filename prefix is required");Jg(g)&&this.wrapAsync(this.mkdtempBase,[g,t],i)},g.prototype.rmdirBase=function(g,I){var A=yg(I),C=this.getLinkAsDirOrThrow(g,"rmdir");if(C.length&&!A.recursive)throw Cg(gg,"rmdir",g);this.deleteLink(C)},g.prototype.rmdirSync=function(g,I){this.rmdirBase(Xg(g),I)},g.prototype.rmdir=function(g,I,A){var C=yg(I),t=og("function"==typeof I?I:A);this.wrapAsync(this.rmdirBase,[Xg(g),C],t)},g.prototype.rmBase=function(g,I){void 0===I&&(I={});var A=this.getResolvedLink(g);if(A){if(A.getNode().isDirectory()&&!I.recursive)throw Cg(Ag,"rm",g);this.deleteLink(A)}else if(!I.force)throw Cg(z,"stat",g)},g.prototype.rmSync=function(g,I){this.rmBase(Xg(g),I)},g.prototype.rm=function(g,I,A){var C=wg(I,A),t=C[0],i=C[1];this.wrapAsync(this.rmBase,[Xg(g),t],i)},g.prototype.fchmodBase=function(g,I){this.getFileByFdOrThrow(g,"fchmod").chmod(I)},g.prototype.fchmodSync=function(g,I){this.fchmodBase(g,vg(I))},g.prototype.fchmod=function(g,I,A){this.wrapAsync(this.fchmodBase,[g,vg(I)],A)},g.prototype.chmodBase=function(g,I){var A=this.openSync(g,"r+");try{this.fchmodBase(A,I)}finally{this.closeSync(A)}},g.prototype.chmodSync=function(g,I){var A=vg(I),C=Xg(g);this.chmodBase(C,A)},g.prototype.chmod=function(g,I,A){var C=vg(I),t=Xg(g);this.wrapAsync(this.chmodBase,[t,C],A)},g.prototype.lchmodBase=function(g,I){var A=this.openBase(g,w,0,!1);try{this.fchmodBase(A,I)}finally{this.closeSync(A)}},g.prototype.lchmodSync=function(g,I){var A=vg(I),C=Xg(g);this.lchmodBase(C,A)},g.prototype.lchmod=function(g,I,A){var C=vg(I),t=Xg(g);this.wrapAsync(this.lchmodBase,[t,C],A)},g.prototype.fchownBase=function(g,I,A){this.getFileByFdOrThrow(g,"fchown").chown(I,A)},g.prototype.fchownSync=function(g,I,A){Eg(I),Fg(A),this.fchownBase(g,I,A)},g.prototype.fchown=function(g,I,A,C){Eg(I),Fg(A),this.wrapAsync(this.fchownBase,[g,I,A],C)},g.prototype.chownBase=function(g,I,A){this.getResolvedLinkOrThrow(g,"chown").getNode().chown(I,A)},g.prototype.chownSync=function(g,I,A){Eg(I),Fg(A),this.chownBase(Xg(g),I,A)},g.prototype.chown=function(g,I,A,C){Eg(I),Fg(A),this.wrapAsync(this.chownBase,[Xg(g),I,A],C)},g.prototype.lchownBase=function(g,I,A){this.getLinkOrThrow(g,"lchown").getNode().chown(I,A)},g.prototype.lchownSync=function(g,I,A){Eg(I),Fg(A),this.lchownBase(Xg(g),I,A)},g.prototype.lchown=function(g,I,A,C){Eg(I),Fg(A),this.wrapAsync(this.lchownBase,[Xg(g),I,A],C)},g.prototype.watchFile=function(g,I,A){var C=Xg(g),t=I,i=A;if("function"==typeof t&&(i=I,t=null),"function"!=typeof i)throw Error('"watchFile()" requires a listener function');var e=5007,o=!0;t&&"object"==typeof t&&("number"==typeof t.interval&&(e=t.interval),"boolean"==typeof t.persistent&&(o=t.persistent));var n=this.statWatchers[C];return n||((n=new this.StatWatcher).start(C,o,e),this.statWatchers[C]=n),n.addListener("change",i),n},g.prototype.unwatchFile=function(g,I){var A=Xg(g),C=this.statWatchers[A];C&&("function"==typeof I?C.removeListener("change",I):C.removeAllListeners("change"),0===C.listenerCount("change")&&(C.stop(),delete this.statWatchers[A]))},g.prototype.createReadStream=function(g,I){return new this.ReadStream(g,I)},g.prototype.createWriteStream=function(g,I){return new this.WriteStream(g,I)},g.prototype.watch=function(g,I,A){var C=Xg(g),t=I;"function"==typeof I&&(A=I,t=null);var i=lg(t),e=i.persistent,o=i.recursive,n=i.encoding;void 0===e&&(e=!0),void 0===o&&(o=!1);var s=new this.FSWatcher;return s.start(C,e,o,n),A&&s.addListener("change",A),s},g.fd=2147483647,g}();function Tg(g){g.emit("stop")}g.Volume=Lg;var zg,Pg=function(g){function I(I){var A=g.call(this)||this;return A.onInterval=function(){try{var g=A.vol.statSync(A.filename);A.hasChanged(g)&&(A.emit("change",g,A.prev),A.prev=g)}finally{A.loop()}},A.vol=I,A}return A(I,g),I.prototype.loop=function(){this.timeoutRef=this.setTimeout(this.onInterval,this.interval)},I.prototype.hasChanged=function(g){return g.mtimeMs>this.prev.mtimeMs||g.nlink!==this.prev.nlink},I.prototype.start=function(g,I,A){void 0===I&&(I=!0),void 0===A&&(A=5007),this.filename=Xg(g),this.setTimeout=I?setTimeout.bind("undefined"!=typeof globalThis?globalThis:Lu):a.default,this.interval=A,this.prev=this.vol.statSync(this.filename),this.loop()},I.prototype.stop=function(){clearTimeout(this.timeoutRef),c.default.nextTick(Tg,this)},I}(m.EventEmitter);function Ug(g,I,A){if(!(this instanceof Ug))return new Ug(g,I,A);if(this._vol=g,void 0===(A=Object.assign({},ig(A,{}))).highWaterMark&&(A.highWaterMark=65536),d.Readable.call(this,A),this.path=Xg(I),this.fd=void 0===A.fd?null:A.fd,this.flags=void 0===A.flags?"r":A.flags,this.mode=void 0===A.mode?438:A.mode,this.start=A.start,this.end=A.end,this.autoClose=void 0===A.autoClose||A.autoClose,this.pos=void 0,this.bytesRead=0,void 0!==this.start){if("number"!=typeof this.start)throw new TypeError('"start" option must be a Number');if(void 0===this.end)this.end=1/0;else if("number"!=typeof this.end)throw new TypeError('"end" option must be a Number');if(this.start>this.end)throw new Error('"start" option must be <= "end" option');this.pos=this.start}"number"!=typeof this.fd&&this.open(),this.on("end",(function(){this.autoClose&&this.destroy&&this.destroy()}))}function xg(g){this.close()}function jg(g,I,A){if(!(this instanceof jg))return new jg(g,I,A);if(this._vol=g,A=Object.assign({},ig(A,{})),d.Writable.call(this,A),this.path=Xg(I),this.fd=void 0===A.fd?null:A.fd,this.flags=void 0===A.flags?"w":A.flags,this.mode=void 0===A.mode?438:A.mode,this.start=A.start,this.autoClose=void 0===A.autoClose||!!A.autoClose,this.pos=void 0,this.bytesWritten=0,void 0!==this.start){if("number"!=typeof this.start)throw new TypeError('"start" option must be a Number');if(this.start<0)throw new Error('"start" must be >= zero');this.pos=this.start}A.encoding&&this.setDefaultEncoding(A.encoding),"number"!=typeof this.fd&&this.open(),this.once("finish",(function(){this.autoClose&&this.close()}))}g.StatWatcher=Pg,G.inherits(Ug,d.Readable),g.ReadStream=Ug,Ug.prototype.open=function(){var g=this;this._vol.open(this.path,this.flags,this.mode,(function(I,A){if(I)return g.autoClose&&g.destroy&&g.destroy(),void g.emit("error",I);g.fd=A,g.emit("open",A),g.read()}))},Ug.prototype._read=function(g){if("number"!=typeof this.fd)return this.once("open",(function(){this._read(g)}));if(!this.destroyed){var I;(!zg||zg.length-zg.used<128)&&(I=this._readableState.highWaterMark,(zg=(0,l.bufferAllocUnsafe)(I)).used=0);var A=zg,C=Math.min(zg.length-zg.used,g),t=zg.used;if(void 0!==this.pos&&(C=Math.min(this.end-this.pos+1,C)),C<=0)return this.push(null);var i=this;this._vol.read(this.fd,zg,zg.used,C,this.pos,(function(g,I){if(g)i.autoClose&&i.destroy&&i.destroy(),i.emit("error",g);else{var C=null;I>0&&(i.bytesRead+=I,C=A.slice(t,t+I)),i.push(C)}})),void 0!==this.pos&&(this.pos+=C),zg.used+=C}},Ug.prototype._destroy=function(g,I){this.close((function(A){I(g||A)}))},Ug.prototype.close=function(g){var I=this;if(g&&this.once("close",g),this.closed||"number"!=typeof this.fd)return"number"!=typeof this.fd?void this.once("open",xg):c.default.nextTick((function(){return I.emit("close")}));this.closed=!0,this._vol.close(this.fd,(function(g){g?I.emit("error",g):I.emit("close")})),this.fd=null},G.inherits(jg,d.Writable),g.WriteStream=jg,jg.prototype.open=function(){this._vol.open(this.path,this.flags,this.mode,function(g,I){if(g)return this.autoClose&&this.destroy&&this.destroy(),void this.emit("error",g);this.fd=I,this.emit("open",I)}.bind(this))},jg.prototype._write=function(g,I,A){if(!(g instanceof l.Buffer))return this.emit("error",new Error("Invalid data"));if("number"!=typeof this.fd)return this.once("open",(function(){this._write(g,I,A)}));var C=this;this._vol.write(this.fd,g,0,g.length,this.pos,(function(g,I){if(g)return C.autoClose&&C.destroy&&C.destroy(),A(g);C.bytesWritten+=I,A()})),void 0!==this.pos&&(this.pos+=g.length)},jg.prototype._writev=function(g,I){if("number"!=typeof this.fd)return this.once("open",(function(){this._writev(g,I)}));for(var A=this,C=g.length,t=new Array(C),i=0,e=0;e<C;e++){var o=g[e].chunk;t[e]=o,i+=o.length}var n=l.Buffer.concat(t);this._vol.write(this.fd,n,0,n.length,this.pos,(function(g,C){if(g)return A.destroy&&A.destroy(),I(g);A.bytesWritten+=C,I()})),void 0!==this.pos&&(this.pos+=i)},jg.prototype._destroy=Ug.prototype._destroy,jg.prototype.close=Ug.prototype.close,jg.prototype.destroySoon=jg.prototype.end;var _g=function(g){function I(I){var A=g.call(this)||this;return A._filename="",A._filenameEncoded="",A._recursive=!1,A._encoding=Z.ENCODING_UTF8,A._onNodeChange=function(){A._emit("change")},A._onParentChild=function(g){g.getName()===A._getName()&&A._emit("rename")},A._emit=function(g){A.emit("change",g,A._filenameEncoded)},A._persist=function(){A._timer=setTimeout(A._persist,1e6)},A._vol=I,A}return A(I,g),I.prototype._getName=function(){return this._steps[this._steps.length-1]},I.prototype.start=function(g,I,A,C){void 0===I&&(I=!0),void 0===A&&(A=!1),void 0===C&&(C=Z.ENCODING_UTF8),this._filename=Xg(g),this._steps=Qg(this._filename),this._filenameEncoded=(0,Z.strToEncoding)(this._filename),this._recursive=A,this._encoding=C;try{this._link=this._vol.getLinkOrThrow(this._filename,"FSWatcher")}catch(e){var t=new Error("watch "+this._filename+" "+e.code);throw t.code=e.code,t.errno=e.code,t}this._link.getNode().on("change",this._onNodeChange),this._link.on("child:add",this._onNodeChange),this._link.on("child:delete",this._onNodeChange);var i=this._link.parent;i&&(i.setMaxListeners(i.getMaxListeners()+1),i.on("child:delete",this._onParentChild)),I&&this._persist()},I.prototype.close=function(){clearTimeout(this._timer),this._link.getNode().removeListener("change",this._onNodeChange);var g=this._link.parent;g&&g.removeListener("child:delete",this._onParentChild)},I}(m.EventEmitter);g.FSWatcher=_g}(hp);var pB={};Object.defineProperty(pB,"__esModule",{value:!0}),pB.fsAsyncMethods=pB.fsSyncMethods=pB.fsProps=void 0;pB.fsProps=["constants","F_OK","R_OK","W_OK","X_OK","Stats"];pB.fsSyncMethods=["renameSync","ftruncateSync","truncateSync","chownSync","fchownSync","lchownSync","chmodSync","fchmodSync","lchmodSync","statSync","lstatSync","fstatSync","linkSync","symlinkSync","readlinkSync","realpathSync","unlinkSync","rmdirSync","mkdirSync","mkdirpSync","readdirSync","closeSync","openSync","utimesSync","futimesSync","fsyncSync","writeSync","readSync","readFileSync","writeFileSync","appendFileSync","existsSync","accessSync","fdatasyncSync","mkdtempSync","copyFileSync","createReadStream","createWriteStream"];function BB(g){if("string"!=typeof g)throw new TypeError("Path must be a string. Received "+JSON.stringify(g))}function yB(g,I){for(var A,C="",t=0,i=-1,e=0,o=0;o<=g.length;++o){if(o<g.length)A=g.charCodeAt(o);else{if(47===A)break;A=47}if(47===A){if(i===o-1||1===e);else if(i!==o-1&&2===e){if(C.length<2||2!==t||46!==C.charCodeAt(C.length-1)||46!==C.charCodeAt(C.length-2))if(C.length>2){var n=C.lastIndexOf("/");if(n!==C.length-1){-1===n?(C="",t=0):t=(C=C.slice(0,n)).length-1-C.lastIndexOf("/"),i=o,e=0;continue}}else if(2===C.length||1===C.length){C="",t=0,i=o,e=0;continue}I&&(C.length>0?C+="/..":C="..",t=2)}else C.length>0?C+="/"+g.slice(i+1,o):C=g.slice(i+1,o),t=o-i-1;i=o,e=0}else 46===A&&-1!==e?++e:e=-1}return C}pB.fsAsyncMethods=["rename","ftruncate","truncate","chown","fchown","lchown","chmod","fchmod","lchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","mkdirp","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","exists","access","fdatasync","mkdtemp","copyFile","watchFile","unwatchFile","watch"],function(g,I){var A=Lu&&Lu.__assign||function(){return(A=Object.assign||function(g){for(var I,A=1,C=arguments.length;A<C;A++)for(var t in I=arguments[A])Object.prototype.hasOwnProperty.call(I,t)&&(g[t]=I[t]);return g}).apply(this,arguments)};Object.defineProperty(I,"__esModule",{value:!0}),I.fs=I.createFsFromVolume=I.vol=I.Volume=void 0;var C=Pu,t=oG,i=hp,e=pB,o=e.fsSyncMethods,n=e.fsAsyncMethods,s=Uu,l=s.constants.F_OK,r=s.constants.R_OK,c=s.constants.W_OK,a=s.constants.X_OK;function d(g){for(var I={F_OK:l,R_OK:r,W_OK:c,X_OK:a,constants:s.constants,Stats:C.default,Dirent:t.default},A=0,e=o;A<e.length;A++){"function"==typeof g[m=e[A]]&&(I[m]=g[m].bind(g))}for(var d=0,h=n;d<h.length;d++){var m;"function"==typeof g[m=h[d]]&&(I[m]=g[m].bind(g))}return I.StatWatcher=g.StatWatcher,I.FSWatcher=g.FSWatcher,I.WriteStream=g.WriteStream,I.ReadStream=g.ReadStream,I.promises=g.promises,I._toUnixTimestamp=i.toUnixTimestamp,I}I.Volume=i.Volume,I.vol=new i.Volume,I.createFsFromVolume=d,I.fs=d(I.vol),g.exports=A(A({},g.exports),I.fs),g.exports.semantic=!0}(zu,zu.exports);var wB={resolve:function(){for(var g,I="",A=!1,C=arguments.length-1;C>=-1&&!A;C--){var t;C>=0?t=arguments[C]:(void 0===g&&(g=process.cwd()),t=g),BB(t),0!==t.length&&(I=t+"/"+I,A=47===t.charCodeAt(0))}return I=yB(I,!A),A?I.length>0?"/"+I:"/":I.length>0?I:"."},normalize:function(g){if(BB(g),0===g.length)return".";var I=47===g.charCodeAt(0),A=47===g.charCodeAt(g.length-1);return 0!==(g=yB(g,!I)).length||I||(g="."),g.length>0&&A&&(g+="/"),I?"/"+g:g},isAbsolute:function(g){return BB(g),g.length>0&&47===g.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var g,I=0;I<arguments.length;++I){var A=arguments[I];BB(A),A.length>0&&(void 0===g?g=A:g+="/"+A)}return void 0===g?".":wB.normalize(g)},relative:function(g,I){if(BB(g),BB(I),g===I)return"";if((g=wB.resolve(g))===(I=wB.resolve(I)))return"";for(var A=1;A<g.length&&47===g.charCodeAt(A);++A);for(var C=g.length,t=C-A,i=1;i<I.length&&47===I.charCodeAt(i);++i);for(var e=I.length-i,o=t<e?t:e,n=-1,s=0;s<=o;++s){if(s===o){if(e>o){if(47===I.charCodeAt(i+s))return I.slice(i+s+1);if(0===s)return I.slice(i+s)}else t>o&&(47===g.charCodeAt(A+s)?n=s:0===s&&(n=0));break}var l=g.charCodeAt(A+s);if(l!==I.charCodeAt(i+s))break;47===l&&(n=s)}var r="";for(s=A+n+1;s<=C;++s)s!==C&&47!==g.charCodeAt(s)||(0===r.length?r+="..":r+="/..");return r.length>0?r+I.slice(i+n):(i+=n,47===I.charCodeAt(i)&&++i,I.slice(i))},_makeLong:function(g){return g},dirname:function(g){if(BB(g),0===g.length)return".";for(var I=g.charCodeAt(0),A=47===I,C=-1,t=!0,i=g.length-1;i>=1;--i)if(47===(I=g.charCodeAt(i))){if(!t){C=i;break}}else t=!1;return-1===C?A?"/":".":A&&1===C?"//":g.slice(0,C)},basename:function(g,I){if(void 0!==I&&"string"!=typeof I)throw new TypeError('"ext" argument must be a string');BB(g);var A,C=0,t=-1,i=!0;if(void 0!==I&&I.length>0&&I.length<=g.length){if(I.length===g.length&&I===g)return"";var e=I.length-1,o=-1;for(A=g.length-1;A>=0;--A){var n=g.charCodeAt(A);if(47===n){if(!i){C=A+1;break}}else-1===o&&(i=!1,o=A+1),e>=0&&(n===I.charCodeAt(e)?-1==--e&&(t=A):(e=-1,t=o))}return C===t?t=o:-1===t&&(t=g.length),g.slice(C,t)}for(A=g.length-1;A>=0;--A)if(47===g.charCodeAt(A)){if(!i){C=A+1;break}}else-1===t&&(i=!1,t=A+1);return-1===t?"":g.slice(C,t)},extname:function(g){BB(g);for(var I=-1,A=0,C=-1,t=!0,i=0,e=g.length-1;e>=0;--e){var o=g.charCodeAt(e);if(47!==o)-1===C&&(t=!1,C=e+1),46===o?-1===I?I=e:1!==i&&(i=1):-1!==I&&(i=-1);else if(!t){A=e+1;break}}return-1===I||-1===C||0===i||1===i&&I===C-1&&I===A+1?"":g.slice(I,C)},format:function(g){if(null===g||"object"!=typeof g)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof g);return function(g,I){var A=I.dir||I.root,C=I.base||(I.name||"")+(I.ext||"");return A?A===I.root?A+C:A+g+C:C}("/",g)},parse:function(g){BB(g);var I={root:"",dir:"",base:"",ext:"",name:""};if(0===g.length)return I;var A,C=g.charCodeAt(0),t=47===C;t?(I.root="/",A=1):A=0;for(var i=-1,e=0,o=-1,n=!0,s=g.length-1,l=0;s>=A;--s)if(47!==(C=g.charCodeAt(s)))-1===o&&(n=!1,o=s+1),46===C?-1===i?i=s:1!==l&&(l=1):-1!==i&&(l=-1);else if(!n){e=s+1;break}return-1===i||-1===o||0===l||1===l&&i===o-1&&i===e+1?-1!==o&&(I.base=I.name=0===e&&t?g.slice(1,o):g.slice(e,o)):(0===e&&t?(I.name=g.slice(1,i),I.base=g.slice(1,o)):(I.name=g.slice(e,i),I.base=g.slice(e,o)),I.ext=g.slice(i,o)),e>0?I.dir=g.slice(0,e-1):t&&(I.dir="/"),I},sep:"/",delimiter:":",win32:null,posix:null};wB.posix=wB;var WB=wB;Qp.Node.prototype.emit=function(g,...I){const A=this.listeners(g);for(let C of A)try{C(...I)}catch(dD){console.error(dD)}return A.length>0};const SB=(g,I)=>{if(!g)throw new Error(I)};const KB=class{constructor(){this.volume=new hp.Volume,this.fs=zu.exports.createFsFromVolume(this.volume),this.fromJSON({"/dev/stdin":"","/dev/stdout":"","/dev/stderr":""})}_toJSON(g,I={},A){let C=!0;for(const i in g.children){C=!1;const t=g.getChild(i);if(t){const g=t.getNode();if(g&&g.isFile()){let C=t.getPath();A&&(C=WB.relative(A,C)),I[C]=g.getBuffer()}else g&&g.isDirectory()&&this._toJSON(t,I,A)}}let t=g.getPath();return A&&(t=WB.relative(A,t)),t&&C&&(I[t]=null),I}toJSON(g,I={},A=!1){const C=[];if(g){g instanceof Array||(g=[g]);for(const I of g){const g=hp.pathToFilename(I),A=this.volume.getResolvedLink(g);A&&C.push(A)}}else C.push(this.volume.root);if(!C.length)return I;for(const t of C)this._toJSON(t,I,A?t.getPath():"");return I}fromJSONFixed(g,I){for(let A in I){const C=I[A];if(C?null===Object.getPrototypeOf(C):null===C)g.mkdirpBase(A,511);else{const I=hp.filenameToSteps(A);if(I.length>1){const A="/"+I.slice(0,I.length-1).join("/");g.mkdirpBase(A,511)}g.writeFileSync(A,C||"")}}}fromJSON(g){this.volume=new hp.Volume,this.fromJSONFixed(this.volume,g),this.fs=zu.exports.createFsFromVolume(this.volume),this.volume.releasedFds=[0,1,2];const I=this.volume.openSync("/dev/stderr","w"),A=this.volume.openSync("/dev/stdout","w"),C=this.volume.openSync("/dev/stdin","r");SB(2===I,`invalid handle for stderr: ${I}`),SB(1===A,`invalid handle for stdout: ${A}`),SB(0===C,`invalid handle for stdin: ${C}`)}async getStdOut(){return new Promise((g=>{g(this.fs.readFileSync("/dev/stdout","utf8"))}))}};var fB=function(g,I){I||(I={});var A=void 0===I.hsep?"  ":I.hsep,C=I.align||[],t=I.stringLength||function(g){return String(g).length},i=XB(g,(function(g,I){return VB(I,(function(I,A){var C=YB(I);(!g[A]||C>g[A])&&(g[A]=C)})),g}),[]),e=OB(g,(function(g){return OB(g,(function(g,I){var A=String(g);if("."===C[I]){var e=YB(A),o=i[I]+(/\./.test(A)?1:2)-(t(A)-e);return A+Array(o).join(" ")}return A}))})),o=XB(e,(function(g,I){return VB(I,(function(I,A){var C=t(I);(!g[A]||C>g[A])&&(g[A]=C)})),g}),[]);return OB(e,(function(g){return OB(g,(function(g,I){var A=o[I]-t(g)||0,i=Array(Math.max(A+1,1)).join(" ");return"r"===C[I]||"."===C[I]?i+g:"c"===C[I]?Array(Math.ceil(A/2+1)).join(" ")+g+Array(Math.floor(A/2+1)).join(" "):g+i})).join(A).replace(/\s+$/,"")})).join("\n")};function YB(g){var I=/\.[^.]*$/.exec(g);return I?I.index+1:g.length}function XB(g,I,A){if(g.reduce)return g.reduce(I,A);for(var C=0,t=arguments.length>=3?A:g[C++];C<g.length;C++)I(t,g[C],C);return t}function VB(g,I){if(g.forEach)return g.forEach(I);for(var A=0;A<g.length;A++)I.call(g,g[A],A)}function OB(g,I){if(g.map)return g.map(I);for(var A=[],C=0;C<g.length;C++)A.push(I.call(g,g[C],C));return A}const RB=async({args:g})=>{const I=g[0],A=await(async g=>{const I=await fetch("https://registry.wapm.io/graphql",{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({operationName:"shellGetCommandQuery",query:"query shellGetCommandQuery($command: String!) {\n  command: getCommand(name: $command) {\n    command\n    module {\n      name\n      abi\n      source\n    }\n    packageVersion {\n      version\n      package {\n        name\n        displayName\n      }\n      filesystem {\n        wasm\n        host\n      }\n      distribution {\n        downloadUrl\n      }\n      modules {\n        name\n        publicUrl\n        abi\n      }\n      commands {\n        command\n        module {\n          name\n          abi\n          source\n        }\n      }\n    }\n  }\n}",variables:{command:g}})}),A=await I.json();if(A&&A.data&&A.data.command)return A.data.command;throw new Error(`command not found ${g}`)})(I);if("wasi"!==A.module.abi)throw new Error(`Only WASI modules are supported. The "${I}" command is using the "${A.module.abi}" ABI.`);return A};var QB={exports:{}};!function(g,I){g.exports=function(){function g(g){function I(g){for(var I=0,t=A.length;I<t;++I)A[I](g);C.push(g)}if("function"!=typeof Promise)throw new Error("Promise implementation not available in this environment.");var A=[],C=[],t=new Promise((function(A,C){g(A,C,I)}));t.progress=function(g){if("function"!=typeof g)throw new Error("cb is not a function.");for(var I=0,i=C.length;I<i;++I)g(C[I]);return A.push(g),t};var i=t.then;return t.then=function(g,I,A){return i.call(t,g,I),void 0!==A&&t.progress(A),t},t}function I(I){if(!(I instanceof ArrayBuffer))throw new TypeError("arrayBuffer is not an instance of ArrayBuffer.");if(!t.Worker)throw new Error("Worker implementation is not available in this environment.");return new g((function(g,t,i){var e=new Worker(C),o=[];e.onerror=function(g){t(g)},e.onmessage=function(I){switch((I=I.data).type){case"log":console[I.data.level]("Worker: "+I.data.msg);break;case"extract":var C=A(I.data);o.push(C),i(C);break;case"complete":e.terminate(),g(o);break;case"error":e.terminate(),t(new Error(I.data.message));break;default:e.terminate(),t(new Error("Unknown message from worker: "+I.type))}},e.postMessage({type:"extract",buffer:I},[I])}))}function A(g){return Object.defineProperties(g,e),g}var C,t=window||this,i=t.URL||t.webkitURL,e={blob:{get:function(){return this._blob||(this._blob=new Blob([this.buffer]))}},getBlobUrl:{value:function(){return this._blobUrl||(this._blobUrl=i.createObjectURL(this.blob))}},readAsString:{value:function(){for(var g=this.buffer,I=g.byteLength,A=1,C=new DataView(g),t=[],i=0;i<I;++i){var e=C.getUint8(i*A,!0);t.push(e)}return this._string=String.fromCharCode.apply(null,t)}},readAsJSON:{value:function(){return JSON.parse(this.readAsString())}}};return C=(window||this).URL.createObjectURL(new Blob(['"use strict";function UntarWorker(){}function decodeUTF8(e){for(var r="",t=0;t<e.length;){var a=e[t++];if(a>127){if(a>191&&a<224){if(t>=e.length)throw"UTF-8 decode: incomplete 2-byte sequence";a=(31&a)<<6|63&e[t]}else if(a>223&&a<240){if(t+1>=e.length)throw"UTF-8 decode: incomplete 3-byte sequence";a=(15&a)<<12|(63&e[t])<<6|63&e[++t]}else{if(!(a>239&&a<248))throw"UTF-8 decode: unknown multibyte start 0x"+a.toString(16)+" at index "+(t-1);if(t+2>=e.length)throw"UTF-8 decode: incomplete 4-byte sequence";a=(7&a)<<18|(63&e[t])<<12|(63&e[++t])<<6|63&e[++t]}++t}if(a<=65535)r+=String.fromCharCode(a);else{if(!(a<=1114111))throw"UTF-8 decode: code point 0x"+a.toString(16)+" exceeds UTF-16 reach";a-=65536,r+=String.fromCharCode(a>>10|55296),r+=String.fromCharCode(1023&a|56320)}}return r}function PaxHeader(e){this._fields=e}function TarFile(){}function UntarStream(e){this._bufferView=new DataView(e),this._position=0}function UntarFileStream(e){this._stream=new UntarStream(e),this._globalPaxHeader=null}if(UntarWorker.prototype={onmessage:function(e){try{if("extract"!==e.data.type)throw new Error("Unknown message type: "+e.data.type);this.untarBuffer(e.data.buffer)}catch(r){this.postError(r)}},postError:function(e){this.postMessage({type:"error",data:{message:e.message}})},postLog:function(e,r){this.postMessage({type:"log",data:{level:e,msg:r}})},untarBuffer:function(e){try{for(var r=new UntarFileStream(e);r.hasNext();){var t=r.next();this.postMessage({type:"extract",data:t},[t.buffer])}this.postMessage({type:"complete"})}catch(a){this.postError(a)}},postMessage:function(e,r){self.postMessage(e,r)}},"undefined"!=typeof self){var worker=new UntarWorker;self.onmessage=function(e){worker.onmessage(e)}}PaxHeader.parse=function(e){for(var r=new Uint8Array(e),t=[];r.length>0;){var a=parseInt(decodeUTF8(r.subarray(0,r.indexOf(32)))),n=decodeUTF8(r.subarray(0,a)),i=n.match(/^\\d+ ([^=]+)=(.*)\\n$/);if(null===i)throw new Error("Invalid PAX header data format.");var s=i[1],o=i[2];0===o.length?o=null:null!==o.match(/^\\d+$/)&&(o=parseInt(o));var f={name:s,value:o};t.push(f),r=r.subarray(a)}return new PaxHeader(t)},PaxHeader.prototype={applyHeader:function(e){this._fields.forEach(function(r){var t=r.name,a=r.value;"path"===t?(t="name",void 0!==e.prefix&&delete e.prefix):"linkpath"===t&&(t="linkname"),null===a?delete e[t]:e[t]=a})}},UntarStream.prototype={readString:function(e){for(var r=1,t=e*r,a=[],n=0;n<e;++n){var i=this._bufferView.getUint8(this.position()+n*r,!0);if(0===i)break;a.push(i)}return this.seek(t),String.fromCharCode.apply(null,a)},readBuffer:function(e){var r;if("function"==typeof ArrayBuffer.prototype.slice)r=this._bufferView.buffer.slice(this.position(),this.position()+e);else{r=new ArrayBuffer(e);var t=new Uint8Array(r),a=new Uint8Array(this._bufferView.buffer,this.position(),e);t.set(a)}return this.seek(e),r},seek:function(e){this._position+=e},peekUint32:function(){return this._bufferView.getUint32(this.position(),!0)},position:function(e){return void 0===e?this._position:void(this._position=e)},size:function(){return this._bufferView.byteLength}},UntarFileStream.prototype={hasNext:function(){return this._stream.position()+4<this._stream.size()&&0!==this._stream.peekUint32()},next:function(){return this._readNextFile()},_readNextFile:function(){var e=this._stream,r=new TarFile,t=!1,a=null,n=e.position(),i=n+512;switch(r.name=e.readString(100),r.mode=e.readString(8),r.uid=parseInt(e.readString(8)),r.gid=parseInt(e.readString(8)),r.size=parseInt(e.readString(12),8),r.mtime=parseInt(e.readString(12),8),r.checksum=parseInt(e.readString(8)),r.type=e.readString(1),r.linkname=e.readString(100),r.ustarFormat=e.readString(6),r.ustarFormat.indexOf("ustar")>-1&&(r.version=e.readString(2),r.uname=e.readString(32),r.gname=e.readString(32),r.devmajor=parseInt(e.readString(8)),r.devminor=parseInt(e.readString(8)),r.namePrefix=e.readString(155),r.namePrefix.length>0&&(r.name=r.namePrefix+"/"+r.name)),e.position(i),r.type){case"0":case"":r.buffer=e.readBuffer(r.size);break;case"1":break;case"2":break;case"3":break;case"4":break;case"5":break;case"6":break;case"7":break;case"g":t=!0,this._globalPaxHeader=PaxHeader.parse(e.readBuffer(r.size));break;case"x":t=!0,a=PaxHeader.parse(e.readBuffer(r.size))}void 0===r.buffer&&(r.buffer=new ArrayBuffer(0));var s=i+r.size;return r.size%512!==0&&(s+=512-r.size%512),e.position(s),t&&(r=this._readNextFile()),null!==this._globalPaxHeader&&this._globalPaxHeader.applyHeader(r),null!==a&&a.applyHeader(r),r}};'])),I}()}(QB);var HB=QB.exports,kB={exports:{}};!function(g,I){g.exports=function g(I,A,C){function t(e,o){if(!A[e]){if(!I[e]){var n="function"==typeof require&&require;if(!o&&n)return n(e,!0);if(i)return i(e,!0);var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}var l=A[e]={exports:{}};I[e][0].call(l.exports,(function(g){return t(I[e][1][g]||g)}),l,l.exports,g,I,A,C)}return A[e].exports}for(var i="function"==typeof require&&require,e=0;e<C.length;e++)t(C[e]);return t}({1:[function(g,I,A){var C="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;A.assign=function(g){for(var I,A,C=Array.prototype.slice.call(arguments,1);C.length;){var t=C.shift();if(t){if("object"!=typeof t)throw new TypeError(t+"must be non-object");for(var i in t)I=t,A=i,Object.prototype.hasOwnProperty.call(I,A)&&(g[i]=t[i])}}return g},A.shrinkBuf=function(g,I){return g.length===I?g:g.subarray?g.subarray(0,I):(g.length=I,g)};var t={arraySet:function(g,I,A,C,t){if(I.subarray&&g.subarray)g.set(I.subarray(A,A+C),t);else for(var i=0;i<C;i++)g[t+i]=I[A+i]},flattenChunks:function(g){var I,A,C,t,i,e;for(I=C=0,A=g.length;I<A;I++)C+=g[I].length;for(e=new Uint8Array(C),I=t=0,A=g.length;I<A;I++)i=g[I],e.set(i,t),t+=i.length;return e}},i={arraySet:function(g,I,A,C,t){for(var i=0;i<C;i++)g[t+i]=I[A+i]},flattenChunks:function(g){return[].concat.apply([],g)}};A.setTyped=function(g){g?(A.Buf8=Uint8Array,A.Buf16=Uint16Array,A.Buf32=Int32Array,A.assign(A,t)):(A.Buf8=Array,A.Buf16=Array,A.Buf32=Array,A.assign(A,i))},A.setTyped(C)},{}],2:[function(g,I,A){var C=g("./common"),t=!0,i=!0;try{String.fromCharCode.apply(null,[0])}catch(s){t=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(s){i=!1}for(var e=new C.Buf8(256),o=0;o<256;o++)e[o]=252<=o?6:248<=o?5:240<=o?4:224<=o?3:192<=o?2:1;function n(g,I){if(I<65534&&(g.subarray&&i||!g.subarray&&t))return String.fromCharCode.apply(null,C.shrinkBuf(g,I));for(var A="",e=0;e<I;e++)A+=String.fromCharCode(g[e]);return A}e[254]=e[254]=1,A.string2buf=function(g){var I,A,t,i,e,o=g.length,n=0;for(i=0;i<o;i++)55296==(64512&(A=g.charCodeAt(i)))&&i+1<o&&56320==(64512&(t=g.charCodeAt(i+1)))&&(A=65536+(A-55296<<10)+(t-56320),i++),n+=A<128?1:A<2048?2:A<65536?3:4;for(I=new C.Buf8(n),i=e=0;e<n;i++)55296==(64512&(A=g.charCodeAt(i)))&&i+1<o&&56320==(64512&(t=g.charCodeAt(i+1)))&&(A=65536+(A-55296<<10)+(t-56320),i++),A<128?I[e++]=A:(A<2048?I[e++]=192|A>>>6:(A<65536?I[e++]=224|A>>>12:(I[e++]=240|A>>>18,I[e++]=128|A>>>12&63),I[e++]=128|A>>>6&63),I[e++]=128|63&A);return I},A.buf2binstring=function(g){return n(g,g.length)},A.binstring2buf=function(g){for(var I=new C.Buf8(g.length),A=0,t=I.length;A<t;A++)I[A]=g.charCodeAt(A);return I},A.buf2string=function(g,I){var A,C,t,i,o=I||g.length,s=new Array(2*o);for(A=C=0;A<o;)if((t=g[A++])<128)s[C++]=t;else if(4<(i=e[t]))s[C++]=65533,A+=i-1;else{for(t&=2===i?31:3===i?15:7;1<i&&A<o;)t=t<<6|63&g[A++],i--;1<i?s[C++]=65533:t<65536?s[C++]=t:(t-=65536,s[C++]=55296|t>>10&1023,s[C++]=56320|1023&t)}return n(s,C)},A.utf8border=function(g,I){var A;for((I=I||g.length)>g.length&&(I=g.length),A=I-1;0<=A&&128==(192&g[A]);)A--;return A<0||0===A?I:A+e[g[A]]>I?A:I}},{"./common":1}],3:[function(g,I,A){I.exports=function(g,I,A,C){for(var t=65535&g|0,i=g>>>16&65535|0,e=0;0!==A;){for(A-=e=2e3<A?2e3:A;i=i+(t=t+I[C++]|0)|0,--e;);t%=65521,i%=65521}return t|i<<16|0}},{}],4:[function(g,I,A){I.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],5:[function(g,I,A){var C=function(){for(var g,I=[],A=0;A<256;A++){g=A;for(var C=0;C<8;C++)g=1&g?3988292384^g>>>1:g>>>1;I[A]=g}return I}();I.exports=function(g,I,A,t){var i=C,e=t+A;g^=-1;for(var o=t;o<e;o++)g=g>>>8^i[255&(g^I[o])];return-1^g}},{}],6:[function(g,I,A){I.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],7:[function(g,I,A){I.exports=function(g,I){var A,C,t,i,e,o,n,s,l,r,c,a,d,h,m,Z,u,G,b,p,B,y,w,W,S;A=g.state,C=g.next_in,W=g.input,t=C+(g.avail_in-5),i=g.next_out,S=g.output,e=i-(I-g.avail_out),o=i+(g.avail_out-257),n=A.dmax,s=A.wsize,l=A.whave,r=A.wnext,c=A.window,a=A.hold,d=A.bits,h=A.lencode,m=A.distcode,Z=(1<<A.lenbits)-1,u=(1<<A.distbits)-1;g:do{d<15&&(a+=W[C++]<<d,d+=8,a+=W[C++]<<d,d+=8),G=h[a&Z];I:for(;;){if(a>>>=b=G>>>24,d-=b,0==(b=G>>>16&255))S[i++]=65535&G;else{if(!(16&b)){if(0==(64&b)){G=h[(65535&G)+(a&(1<<b)-1)];continue I}if(32&b){A.mode=12;break g}g.msg="invalid literal/length code",A.mode=30;break g}p=65535&G,(b&=15)&&(d<b&&(a+=W[C++]<<d,d+=8),p+=a&(1<<b)-1,a>>>=b,d-=b),d<15&&(a+=W[C++]<<d,d+=8,a+=W[C++]<<d,d+=8),G=m[a&u];A:for(;;){if(a>>>=b=G>>>24,d-=b,!(16&(b=G>>>16&255))){if(0==(64&b)){G=m[(65535&G)+(a&(1<<b)-1)];continue A}g.msg="invalid distance code",A.mode=30;break g}if(B=65535&G,d<(b&=15)&&(a+=W[C++]<<d,(d+=8)<b&&(a+=W[C++]<<d,d+=8)),n<(B+=a&(1<<b)-1)){g.msg="invalid distance too far back",A.mode=30;break g}if(a>>>=b,d-=b,(b=i-e)<B){if(l<(b=B-b)&&A.sane){g.msg="invalid distance too far back",A.mode=30;break g}if(w=c,(y=0)===r){if(y+=s-b,b<p){for(p-=b;S[i++]=c[y++],--b;);y=i-B,w=S}}else if(r<b){if(y+=s+r-b,(b-=r)<p){for(p-=b;S[i++]=c[y++],--b;);if(y=0,r<p){for(p-=b=r;S[i++]=c[y++],--b;);y=i-B,w=S}}}else if(y+=r-b,b<p){for(p-=b;S[i++]=c[y++],--b;);y=i-B,w=S}for(;2<p;)S[i++]=w[y++],S[i++]=w[y++],S[i++]=w[y++],p-=3;p&&(S[i++]=w[y++],1<p&&(S[i++]=w[y++]))}else{for(y=i-B;S[i++]=S[y++],S[i++]=S[y++],S[i++]=S[y++],2<(p-=3););p&&(S[i++]=S[y++],1<p&&(S[i++]=S[y++]))}break}}break}}while(C<t&&i<o);C-=p=d>>3,a&=(1<<(d-=p<<3))-1,g.next_in=C,g.next_out=i,g.avail_in=C<t?t-C+5:5-(C-t),g.avail_out=i<o?o-i+257:257-(i-o),A.hold=a,A.bits=d}},{}],8:[function(g,I,A){var C=g("../utils/common"),t=g("./adler32"),i=g("./crc32"),e=g("./inffast"),o=g("./inftrees"),n=1,s=2,l=0,r=-2,c=1,a=852,d=592;function h(g){return(g>>>24&255)+(g>>>8&65280)+((65280&g)<<8)+((255&g)<<24)}function m(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new C.Buf16(320),this.work=new C.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Z(g){var I;return g&&g.state?(I=g.state,g.total_in=g.total_out=I.total=0,g.msg="",I.wrap&&(g.adler=1&I.wrap),I.mode=c,I.last=0,I.havedict=0,I.dmax=32768,I.head=null,I.hold=0,I.bits=0,I.lencode=I.lendyn=new C.Buf32(a),I.distcode=I.distdyn=new C.Buf32(d),I.sane=1,I.back=-1,l):r}function u(g){var I;return g&&g.state?((I=g.state).wsize=0,I.whave=0,I.wnext=0,Z(g)):r}function G(g,I){var A,C;return g&&g.state?(C=g.state,I<0?(A=0,I=-I):(A=1+(I>>4),I<48&&(I&=15)),I&&(I<8||15<I)?r:(null!==C.window&&C.wbits!==I&&(C.window=null),C.wrap=A,C.wbits=I,u(g))):r}function b(g,I){var A,C;return g?(C=new m,(g.state=C).window=null,(A=G(g,I))!==l&&(g.state=null),A):r}var p,B,y=!0;function w(g){if(y){var I;for(p=new C.Buf32(512),B=new C.Buf32(32),I=0;I<144;)g.lens[I++]=8;for(;I<256;)g.lens[I++]=9;for(;I<280;)g.lens[I++]=7;for(;I<288;)g.lens[I++]=8;for(o(n,g.lens,0,288,p,0,g.work,{bits:9}),I=0;I<32;)g.lens[I++]=5;o(s,g.lens,0,32,B,0,g.work,{bits:5}),y=!1}g.lencode=p,g.lenbits=9,g.distcode=B,g.distbits=5}function W(g,I,A,t){var i,e=g.state;return null===e.window&&(e.wsize=1<<e.wbits,e.wnext=0,e.whave=0,e.window=new C.Buf8(e.wsize)),t>=e.wsize?(C.arraySet(e.window,I,A-e.wsize,e.wsize,0),e.wnext=0,e.whave=e.wsize):(t<(i=e.wsize-e.wnext)&&(i=t),C.arraySet(e.window,I,A-t,i,e.wnext),(t-=i)?(C.arraySet(e.window,I,A-t,t,0),e.wnext=t,e.whave=e.wsize):(e.wnext+=i,e.wnext===e.wsize&&(e.wnext=0),e.whave<e.wsize&&(e.whave+=i))),0}A.inflateReset=u,A.inflateReset2=G,A.inflateResetKeep=Z,A.inflateInit=function(g){return b(g,15)},A.inflateInit2=b,A.inflate=function(g,I){var A,a,d,m,Z,u,G,b,p,B,y,S,K,f,Y,X,V,O,R,Q,H,k,J,v,D=0,M=new C.Buf8(4),N=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!g||!g.state||!g.output||!g.input&&0!==g.avail_in)return r;12===(A=g.state).mode&&(A.mode=13),Z=g.next_out,d=g.output,G=g.avail_out,m=g.next_in,a=g.input,u=g.avail_in,b=A.hold,p=A.bits,B=u,y=G,k=l;g:for(;;)switch(A.mode){case c:if(0===A.wrap){A.mode=13;break}for(;p<16;){if(0===u)break g;u--,b+=a[m++]<<p,p+=8}if(2&A.wrap&&35615===b){M[A.check=0]=255&b,M[1]=b>>>8&255,A.check=i(A.check,M,2,0),p=b=0,A.mode=2;break}if(A.flags=0,A.head&&(A.head.done=!1),!(1&A.wrap)||(((255&b)<<8)+(b>>8))%31){g.msg="incorrect header check",A.mode=30;break}if(8!=(15&b)){g.msg="unknown compression method",A.mode=30;break}if(p-=4,H=8+(15&(b>>>=4)),0===A.wbits)A.wbits=H;else if(H>A.wbits){g.msg="invalid window size",A.mode=30;break}A.dmax=1<<H,g.adler=A.check=1,A.mode=512&b?10:12,p=b=0;break;case 2:for(;p<16;){if(0===u)break g;u--,b+=a[m++]<<p,p+=8}if(A.flags=b,8!=(255&A.flags)){g.msg="unknown compression method",A.mode=30;break}if(57344&A.flags){g.msg="unknown header flags set",A.mode=30;break}A.head&&(A.head.text=b>>8&1),512&A.flags&&(M[0]=255&b,M[1]=b>>>8&255,A.check=i(A.check,M,2,0)),p=b=0,A.mode=3;case 3:for(;p<32;){if(0===u)break g;u--,b+=a[m++]<<p,p+=8}A.head&&(A.head.time=b),512&A.flags&&(M[0]=255&b,M[1]=b>>>8&255,M[2]=b>>>16&255,M[3]=b>>>24&255,A.check=i(A.check,M,4,0)),p=b=0,A.mode=4;case 4:for(;p<16;){if(0===u)break g;u--,b+=a[m++]<<p,p+=8}A.head&&(A.head.xflags=255&b,A.head.os=b>>8),512&A.flags&&(M[0]=255&b,M[1]=b>>>8&255,A.check=i(A.check,M,2,0)),p=b=0,A.mode=5;case 5:if(1024&A.flags){for(;p<16;){if(0===u)break g;u--,b+=a[m++]<<p,p+=8}A.length=b,A.head&&(A.head.extra_len=b),512&A.flags&&(M[0]=255&b,M[1]=b>>>8&255,A.check=i(A.check,M,2,0)),p=b=0}else A.head&&(A.head.extra=null);A.mode=6;case 6:if(1024&A.flags&&(u<(S=A.length)&&(S=u),S&&(A.head&&(H=A.head.extra_len-A.length,A.head.extra||(A.head.extra=new Array(A.head.extra_len)),C.arraySet(A.head.extra,a,m,S,H)),512&A.flags&&(A.check=i(A.check,a,S,m)),u-=S,m+=S,A.length-=S),A.length))break g;A.length=0,A.mode=7;case 7:if(2048&A.flags){if(0===u)break g;for(S=0;H=a[m+S++],A.head&&H&&A.length<65536&&(A.head.name+=String.fromCharCode(H)),H&&S<u;);if(512&A.flags&&(A.check=i(A.check,a,S,m)),u-=S,m+=S,H)break g}else A.head&&(A.head.name=null);A.length=0,A.mode=8;case 8:if(4096&A.flags){if(0===u)break g;for(S=0;H=a[m+S++],A.head&&H&&A.length<65536&&(A.head.comment+=String.fromCharCode(H)),H&&S<u;);if(512&A.flags&&(A.check=i(A.check,a,S,m)),u-=S,m+=S,H)break g}else A.head&&(A.head.comment=null);A.mode=9;case 9:if(512&A.flags){for(;p<16;){if(0===u)break g;u--,b+=a[m++]<<p,p+=8}if(b!==(65535&A.check)){g.msg="header crc mismatch",A.mode=30;break}p=b=0}A.head&&(A.head.hcrc=A.flags>>9&1,A.head.done=!0),g.adler=A.check=0,A.mode=12;break;case 10:for(;p<32;){if(0===u)break g;u--,b+=a[m++]<<p,p+=8}g.adler=A.check=h(b),p=b=0,A.mode=11;case 11:if(0===A.havedict)return g.next_out=Z,g.avail_out=G,g.next_in=m,g.avail_in=u,A.hold=b,A.bits=p,2;g.adler=A.check=1,A.mode=12;case 12:if(5===I||6===I)break g;case 13:if(A.last){b>>>=7&p,p-=7&p,A.mode=27;break}for(;p<3;){if(0===u)break g;u--,b+=a[m++]<<p,p+=8}switch(A.last=1&b,p-=1,3&(b>>>=1)){case 0:A.mode=14;break;case 1:if(w(A),A.mode=20,6!==I)break;b>>>=2,p-=2;break g;case 2:A.mode=17;break;case 3:g.msg="invalid block type",A.mode=30}b>>>=2,p-=2;break;case 14:for(b>>>=7&p,p-=7&p;p<32;){if(0===u)break g;u--,b+=a[m++]<<p,p+=8}if((65535&b)!=(b>>>16^65535)){g.msg="invalid stored block lengths",A.mode=30;break}if(A.length=65535&b,p=b=0,A.mode=15,6===I)break g;case 15:A.mode=16;case 16:if(S=A.length){if(u<S&&(S=u),G<S&&(S=G),0===S)break g;C.arraySet(d,a,m,S,Z),u-=S,m+=S,G-=S,Z+=S,A.length-=S;break}A.mode=12;break;case 17:for(;p<14;){if(0===u)break g;u--,b+=a[m++]<<p,p+=8}if(A.nlen=257+(31&b),b>>>=5,p-=5,A.ndist=1+(31&b),b>>>=5,p-=5,A.ncode=4+(15&b),b>>>=4,p-=4,286<A.nlen||30<A.ndist){g.msg="too many length or distance symbols",A.mode=30;break}A.have=0,A.mode=18;case 18:for(;A.have<A.ncode;){for(;p<3;){if(0===u)break g;u--,b+=a[m++]<<p,p+=8}A.lens[N[A.have++]]=7&b,b>>>=3,p-=3}for(;A.have<19;)A.lens[N[A.have++]]=0;if(A.lencode=A.lendyn,A.lenbits=7,J={bits:A.lenbits},k=o(0,A.lens,0,19,A.lencode,0,A.work,J),A.lenbits=J.bits,k){g.msg="invalid code lengths set",A.mode=30;break}A.have=0,A.mode=19;case 19:for(;A.have<A.nlen+A.ndist;){for(;X=(D=A.lencode[b&(1<<A.lenbits)-1])>>>16&255,V=65535&D,!((Y=D>>>24)<=p);){if(0===u)break g;u--,b+=a[m++]<<p,p+=8}if(V<16)b>>>=Y,p-=Y,A.lens[A.have++]=V;else{if(16===V){for(v=Y+2;p<v;){if(0===u)break g;u--,b+=a[m++]<<p,p+=8}if(b>>>=Y,p-=Y,0===A.have){g.msg="invalid bit length repeat",A.mode=30;break}H=A.lens[A.have-1],S=3+(3&b),b>>>=2,p-=2}else if(17===V){for(v=Y+3;p<v;){if(0===u)break g;u--,b+=a[m++]<<p,p+=8}p-=Y,H=0,S=3+(7&(b>>>=Y)),b>>>=3,p-=3}else{for(v=Y+7;p<v;){if(0===u)break g;u--,b+=a[m++]<<p,p+=8}p-=Y,H=0,S=11+(127&(b>>>=Y)),b>>>=7,p-=7}if(A.have+S>A.nlen+A.ndist){g.msg="invalid bit length repeat",A.mode=30;break}for(;S--;)A.lens[A.have++]=H}}if(30===A.mode)break;if(0===A.lens[256]){g.msg="invalid code -- missing end-of-block",A.mode=30;break}if(A.lenbits=9,J={bits:A.lenbits},k=o(n,A.lens,0,A.nlen,A.lencode,0,A.work,J),A.lenbits=J.bits,k){g.msg="invalid literal/lengths set",A.mode=30;break}if(A.distbits=6,A.distcode=A.distdyn,J={bits:A.distbits},k=o(s,A.lens,A.nlen,A.ndist,A.distcode,0,A.work,J),A.distbits=J.bits,k){g.msg="invalid distances set",A.mode=30;break}if(A.mode=20,6===I)break g;case 20:A.mode=21;case 21:if(6<=u&&258<=G){g.next_out=Z,g.avail_out=G,g.next_in=m,g.avail_in=u,A.hold=b,A.bits=p,e(g,y),Z=g.next_out,d=g.output,G=g.avail_out,m=g.next_in,a=g.input,u=g.avail_in,b=A.hold,p=A.bits,12===A.mode&&(A.back=-1);break}for(A.back=0;X=(D=A.lencode[b&(1<<A.lenbits)-1])>>>16&255,V=65535&D,!((Y=D>>>24)<=p);){if(0===u)break g;u--,b+=a[m++]<<p,p+=8}if(X&&0==(240&X)){for(O=Y,R=X,Q=V;X=(D=A.lencode[Q+((b&(1<<O+R)-1)>>O)])>>>16&255,V=65535&D,!(O+(Y=D>>>24)<=p);){if(0===u)break g;u--,b+=a[m++]<<p,p+=8}b>>>=O,p-=O,A.back+=O}if(b>>>=Y,p-=Y,A.back+=Y,A.length=V,0===X){A.mode=26;break}if(32&X){A.back=-1,A.mode=12;break}if(64&X){g.msg="invalid literal/length code",A.mode=30;break}A.extra=15&X,A.mode=22;case 22:if(A.extra){for(v=A.extra;p<v;){if(0===u)break g;u--,b+=a[m++]<<p,p+=8}A.length+=b&(1<<A.extra)-1,b>>>=A.extra,p-=A.extra,A.back+=A.extra}A.was=A.length,A.mode=23;case 23:for(;X=(D=A.distcode[b&(1<<A.distbits)-1])>>>16&255,V=65535&D,!((Y=D>>>24)<=p);){if(0===u)break g;u--,b+=a[m++]<<p,p+=8}if(0==(240&X)){for(O=Y,R=X,Q=V;X=(D=A.distcode[Q+((b&(1<<O+R)-1)>>O)])>>>16&255,V=65535&D,!(O+(Y=D>>>24)<=p);){if(0===u)break g;u--,b+=a[m++]<<p,p+=8}b>>>=O,p-=O,A.back+=O}if(b>>>=Y,p-=Y,A.back+=Y,64&X){g.msg="invalid distance code",A.mode=30;break}A.offset=V,A.extra=15&X,A.mode=24;case 24:if(A.extra){for(v=A.extra;p<v;){if(0===u)break g;u--,b+=a[m++]<<p,p+=8}A.offset+=b&(1<<A.extra)-1,b>>>=A.extra,p-=A.extra,A.back+=A.extra}if(A.offset>A.dmax){g.msg="invalid distance too far back",A.mode=30;break}A.mode=25;case 25:if(0===G)break g;if(S=y-G,A.offset>S){if((S=A.offset-S)>A.whave&&A.sane){g.msg="invalid distance too far back",A.mode=30;break}S>A.wnext?(S-=A.wnext,K=A.wsize-S):K=A.wnext-S,S>A.length&&(S=A.length),f=A.window}else f=d,K=Z-A.offset,S=A.length;for(G<S&&(S=G),G-=S,A.length-=S;d[Z++]=f[K++],--S;);0===A.length&&(A.mode=21);break;case 26:if(0===G)break g;d[Z++]=A.length,G--,A.mode=21;break;case 27:if(A.wrap){for(;p<32;){if(0===u)break g;u--,b|=a[m++]<<p,p+=8}if(y-=G,g.total_out+=y,A.total+=y,y&&(g.adler=A.check=A.flags?i(A.check,d,y,Z-y):t(A.check,d,y,Z-y)),y=G,(A.flags?b:h(b))!==A.check){g.msg="incorrect data check",A.mode=30;break}p=b=0}A.mode=28;case 28:if(A.wrap&&A.flags){for(;p<32;){if(0===u)break g;u--,b+=a[m++]<<p,p+=8}if(b!==(4294967295&A.total)){g.msg="incorrect length check",A.mode=30;break}p=b=0}A.mode=29;case 29:k=1;break g;case 30:k=-3;break g;case 31:return-4;case 32:default:return r}return g.next_out=Z,g.avail_out=G,g.next_in=m,g.avail_in=u,A.hold=b,A.bits=p,(A.wsize||y!==g.avail_out&&A.mode<30&&(A.mode<27||4!==I))&&W(g,g.output,g.next_out,y-g.avail_out)?(A.mode=31,-4):(B-=g.avail_in,y-=g.avail_out,g.total_in+=B,g.total_out+=y,A.total+=y,A.wrap&&y&&(g.adler=A.check=A.flags?i(A.check,d,y,g.next_out-y):t(A.check,d,y,g.next_out-y)),g.data_type=A.bits+(A.last?64:0)+(12===A.mode?128:0)+(20===A.mode||15===A.mode?256:0),(0===B&&0===y||4===I)&&k===l&&(k=-5),k)},A.inflateEnd=function(g){if(!g||!g.state)return r;var I=g.state;return I.window&&(I.window=null),g.state=null,l},A.inflateGetHeader=function(g,I){var A;return g&&g.state?0==(2&(A=g.state).wrap)?r:((A.head=I).done=!1,l):r},A.inflateSetDictionary=function(g,I){var A,C=I.length;return g&&g.state?0!==(A=g.state).wrap&&11!==A.mode?r:11===A.mode&&t(1,I,C,0)!==A.check?-3:W(g,I,C,C)?(A.mode=31,-4):(A.havedict=1,l):r},A.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":1,"./adler32":3,"./crc32":5,"./inffast":7,"./inftrees":9}],9:[function(g,I,A){var C=g("../utils/common"),t=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],e=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],o=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];I.exports=function(g,I,A,n,s,l,r,c){var a,d,h,m,Z,u,G,b,p,B=c.bits,y=0,w=0,W=0,S=0,K=0,f=0,Y=0,X=0,V=0,O=0,R=null,Q=0,H=new C.Buf16(16),k=new C.Buf16(16),J=null,v=0;for(y=0;y<=15;y++)H[y]=0;for(w=0;w<n;w++)H[I[A+w]]++;for(K=B,S=15;1<=S&&0===H[S];S--);if(S<K&&(K=S),0===S)return s[l++]=20971520,s[l++]=20971520,c.bits=1,0;for(W=1;W<S&&0===H[W];W++);for(K<W&&(K=W),y=X=1;y<=15;y++)if(X<<=1,(X-=H[y])<0)return-1;if(0<X&&(0===g||1!==S))return-1;for(k[1]=0,y=1;y<15;y++)k[y+1]=k[y]+H[y];for(w=0;w<n;w++)0!==I[A+w]&&(r[k[I[A+w]]++]=w);if(0===g?(R=J=r,u=19):1===g?(R=t,Q-=257,J=i,v-=257,u=256):(R=e,J=o,u=-1),y=W,Z=l,Y=w=O=0,h=-1,m=(V=1<<(f=K))-1,1===g&&852<V||2===g&&592<V)return 1;for(;;){for(G=y-Y,r[w]<u?(b=0,p=r[w]):r[w]>u?(b=J[v+r[w]],p=R[Q+r[w]]):(b=96,p=0),a=1<<y-Y,W=d=1<<f;s[Z+(O>>Y)+(d-=a)]=G<<24|b<<16|p|0,0!==d;);for(a=1<<y-1;O&a;)a>>=1;if(0!==a?(O&=a-1,O+=a):O=0,w++,0==--H[y]){if(y===S)break;y=I[A+r[w]]}if(K<y&&(O&m)!==h){for(0===Y&&(Y=K),Z+=W,X=1<<(f=y-Y);f+Y<S&&!((X-=H[f+Y])<=0);)f++,X<<=1;if(V+=1<<f,1===g&&852<V||2===g&&592<V)return 1;s[h=O&m]=K<<24|f<<16|Z-l|0}}return 0!==O&&(s[Z+O]=y-Y<<24|64<<16|0),c.bits=K,0}},{"../utils/common":1}],10:[function(g,I,A){I.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],11:[function(g,I,A){I.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],"/lib/inflate.js":[function(g,I,A){var C=g("./zlib/inflate"),t=g("./utils/common"),i=g("./utils/strings"),e=g("./zlib/constants"),o=g("./zlib/messages"),n=g("./zlib/zstream"),s=g("./zlib/gzheader"),l=Object.prototype.toString;function r(g){if(!(this instanceof r))return new r(g);this.options=t.assign({chunkSize:16384,windowBits:0,to:""},g||{});var I=this.options;I.raw&&0<=I.windowBits&&I.windowBits<16&&(I.windowBits=-I.windowBits,0===I.windowBits&&(I.windowBits=-15)),!(0<=I.windowBits&&I.windowBits<16)||g&&g.windowBits||(I.windowBits+=32),15<I.windowBits&&I.windowBits<48&&0==(15&I.windowBits)&&(I.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new n,this.strm.avail_out=0;var A=C.inflateInit2(this.strm,I.windowBits);if(A!==e.Z_OK)throw new Error(o[A]);if(this.header=new s,C.inflateGetHeader(this.strm,this.header),I.dictionary&&("string"==typeof I.dictionary?I.dictionary=i.string2buf(I.dictionary):"[object ArrayBuffer]"===l.call(I.dictionary)&&(I.dictionary=new Uint8Array(I.dictionary)),I.raw&&(A=C.inflateSetDictionary(this.strm,I.dictionary))!==e.Z_OK))throw new Error(o[A])}function c(g,I){var A=new r(I);if(A.push(g,!0),A.err)throw A.msg||o[A.err];return A.result}r.prototype.push=function(g,I){var A,o,n,s,r,c=this.strm,a=this.options.chunkSize,d=this.options.dictionary,h=!1;if(this.ended)return!1;o=I===~~I?I:!0===I?e.Z_FINISH:e.Z_NO_FLUSH,"string"==typeof g?c.input=i.binstring2buf(g):"[object ArrayBuffer]"===l.call(g)?c.input=new Uint8Array(g):c.input=g,c.next_in=0,c.avail_in=c.input.length;do{if(0===c.avail_out&&(c.output=new t.Buf8(a),c.next_out=0,c.avail_out=a),(A=C.inflate(c,e.Z_NO_FLUSH))===e.Z_NEED_DICT&&d&&(A=C.inflateSetDictionary(this.strm,d)),A===e.Z_BUF_ERROR&&!0===h&&(A=e.Z_OK,h=!1),A!==e.Z_STREAM_END&&A!==e.Z_OK)return this.onEnd(A),!(this.ended=!0);c.next_out&&(0!==c.avail_out&&A!==e.Z_STREAM_END&&(0!==c.avail_in||o!==e.Z_FINISH&&o!==e.Z_SYNC_FLUSH)||("string"===this.options.to?(n=i.utf8border(c.output,c.next_out),s=c.next_out-n,r=i.buf2string(c.output,n),c.next_out=s,c.avail_out=a-s,s&&t.arraySet(c.output,c.output,n,s,0),this.onData(r)):this.onData(t.shrinkBuf(c.output,c.next_out)))),0===c.avail_in&&0===c.avail_out&&(h=!0)}while((0<c.avail_in||0===c.avail_out)&&A!==e.Z_STREAM_END);return A===e.Z_STREAM_END&&(o=e.Z_FINISH),o===e.Z_FINISH?(A=C.inflateEnd(this.strm),this.onEnd(A),this.ended=!0,A===e.Z_OK):o!==e.Z_SYNC_FLUSH||(this.onEnd(e.Z_OK),!(c.avail_out=0))},r.prototype.onData=function(g){this.chunks.push(g)},r.prototype.onEnd=function(g){g===e.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=t.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},A.Inflate=r,A.inflate=c,A.inflateRaw=function(g,I){return(I=I||{}).raw=!0,c(g,I)},A.ungzip=c},{"./utils/common":1,"./utils/strings":2,"./zlib/constants":4,"./zlib/gzheader":6,"./zlib/inflate":8,"./zlib/messages":10,"./zlib/zstream":11}]},{},[])("/lib/inflate.js")}(kB);function JB(g,I){var A,C,t,i,e={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(A)throw new TypeError("Generator is already executing.");for(;e;)try{if(A=1,C&&(t=2&i[0]?C.return:i[0]?C.throw||((t=C.return)&&t.call(C),0):C.next)&&!(t=t.call(C,i[1])).done)return t;switch(C=0,t&&(i=[2&i[0],t.value]),i[0]){case 0:case 1:t=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,C=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(!(t=e.trys,(t=t.length>0&&t[t.length-1])||6!==i[0]&&2!==i[0])){e=0;continue}if(3===i[0]&&(!t||i[1]>t[0]&&i[1]<t[3])){e.label=i[1];break}if(6===i[0]&&e.label<t[1]){e.label=t[1],t=i;break}if(t&&e.label<t[2]){e.label=t[2],e.ops.push(i);break}t[2]&&e.ops.pop(),e.trys.pop();continue}i=I.call(g,e)}catch(dD){i=[6,dD],C=0}finally{A=t=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}}let vB,DB=null;let MB=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}),NB=null;function EB(){return null!==NB&&NB.buffer===vB.memory.buffer||(NB=new Uint8Array(vB.memory.buffer)),NB}let FB=0;function LB(g){vB.lowerI64Imports(8,function(g){const I=vB.__wbindgen_malloc(1*g.length);return EB().set(g,I/1),FB=g.length,I}(g),FB);const I=(null!==DB&&DB.buffer===vB.memory.buffer||(DB=new Int32Array(vB.memory.buffer)),DB),A=(C=I[2],t=I[3],EB().subarray(C/1,C/1+t)).slice();var C,t;return vB.__wbindgen_free(I[2],1*I[3]),A}const TB=async()=>(async g=>{try{const I=BigInt(0);return(await WebAssembly.instantiate(g)).instance.exports.b(I)===I}catch(I){return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,1,126,1,126,3,2,1,0,7,5,1,1,98,0,0,10,6,1,4,0,32,0,11]));var zB=function g(I){let A;const C={wbg:{}};if(C.wbg.__wbindgen_throw=function(g,I){throw new Error((A=g,C=I,MB.decode(EB().subarray(A,A+C))));var A,C},"function"==typeof URL&&I instanceof URL||"string"==typeof I||"function"==typeof Request&&I instanceof Request){const g=fetch(I);A="function"==typeof WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(g,C).catch((I=>g.then((g=>{if("application/wasm"!=g.headers.get("Content-Type"))return console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",I),g.arrayBuffer();throw I})).then((g=>WebAssembly.instantiate(g,C))))):g.then((g=>g.arrayBuffer())).then((g=>WebAssembly.instantiate(g,C)))}else A=WebAssembly.instantiate(I,C).then((g=>g instanceof WebAssembly.Instance?{instance:g,module:I}:g));return A.then((({instance:I,module:A})=>(vB=I.exports,g.__wbindgen_wasm_module=A,vB)))}("data:application/wasm;base64,AGFzbQEAAAABkYGAgAAVYAAAYAABf2ABfwBgAX8Bf2ABfwF+YAJ/fwBgAn9/AX9gA39/fwBgA39/fwF/YAR/f39/AGAEf39/fwF/YAV/f39/fwBgBX9/f39/AX9gBn9/f39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gBX9/fX9/AGAFf398f38AYAR/fX9/AGAEf3x/fwBgA35/fwF/ApiAgIAAAQN3YmcQX193YmluZGdlbl90aHJvdwAFA+CCgIAA3gIFBQMGAwkICAUFBwgFCA4FBwMFCQcDBQYDBQkCBwgPAwUDDQ0FAg0NDQ0HFAcGBQMGBQUDBQUFAwYFBw0NCQ0DAw0NBwUFBQUDAwkFBQ0NBQUCBQMDBQUFBQUJBQUFBQMJBQMDBQUFBwcDBgYLBwYGBwcJCQcFBQkJCQkJAwkJCQkJCQkFBQUFBQUFDQYFBQIFBQUJBQcHCAcHAggHBQkCAwIGBQMFBwcFBQYFBQYKBQUHBwcHBgUHBQIFBQcHBwcHBwcHBwcHBwcFCAoCBQYFBQUCAgYHCAIDAgcGBgUFBQUFBQUFBQUFBQgCAgICAgICBQgHAgUOCwsLDAsQCwsLEQsMCwkJAQYCCAIFCwICAgUJAwMKBQUFBQUGBgYGBwcGBgcHBwcHBgMDBwcFBQAGBgYFBQUIBwMDAAAAAAAAAAAAAAADAwMDAwQEBAADAwQCAgIAAAICAAICAgIFAgSFgICAAAFwATU1BYOAgIAAAQARBomAgIAAAX8BQYCAwAALB8+AgIAABQZtZW1vcnkCAAd2ZXJzaW9uAJABD2xvd2VySTY0SW1wb3J0cwBoEV9fd2JpbmRnZW5fbWFsbG9jANkBD19fd2JpbmRnZW5fZnJlZQCaAgnqgICAAAEAQQELNNwBsALRAqEC0gKrAdMChwLZArsBjALaAsoC3QGiAt0C3ALqAS6uAdsCywL1ATVWkALMAqgCowEYsgKcAt4C0AKKAoYChQL/AfoBggL8AYwBgwL+AfkB+wGBAvgB/QGAAoQC9wEKw52FgADeAvFrAgh/A34jAEEgayICJAAgAkEQaiABELkBIAIpAxAiCkIgiCELAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAqnQQFGDQACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgC6dB/wFxIgNB/wFGDQBBACEEQgAhCyADDv8B8wG5AQECAwQAAAAAAAUGBwgJCgsAAAAAAAAAAAwNDgAAAA8QERITFBUAFhcYGRobHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaW1xdXl9gYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXp7fH1+f4ABgQGCAYMBhAGFAYYBhwGIAYkBigGLAYwBjQGOAY8BkAGRAZIBkwGUAZUBlgGXAZgBmQGaAZsBnAGdAZ4BnwGgAaEBogGjAaQBpQGmAacBqAGpAaoBqwGsAa0BrgGvAbABsQGyAQAAAAAAAAAAAAAAswG0AbUBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC2AbcBuAHzAQtBkprAAEEOIAEoAgwgASgCCGpBf2oQnAEhASAAQQE2AgAgACABNgIEDPQBCyACQRBqIAEQWSACKAIUIQUgAigCEEEBRg28ASACQRhqKAIAIQZBAiEEDLoBCyACQRBqIAEQWSACKAIUIQUgAigCEEEBRg28ASACQRhqKAIAIQZBAyEEDLkBCyACQRBqIAEQWSACKAIUIQUgAigCEEEBRg28ASACQRhqKAIAIQZBBCEEDLgBC0EFIQQMtQELQQYhBAy0AQsgAkEQaiABEEYgAigCFCEFIAIoAhBBAUYNugFBByEEDLUBCyACQRBqIAEQRiACKAIUIQUgAigCEEEBRg26AUEIIQQMtAELIAJBEGogARBGIAIpAxAiCkIgiKchBQJAAkAgCqdBAUcNACAFIQYMAQsCQCAFQYCACEsNACABKAIIIQcCQCAFRQ0AA0AgARChASIGDQMgBUF/aiIFDQALCyABEKEBIgYNASABKAIIIgUgB0kN6QEgASgCBCIGIAVPDbwBIAUgBhCpAQALQdKXwABBHSABKAIMIAEoAghqQX9qEJwBIQYLIABBATYCACAAIAY2AgQM7AELQQohBAywAQsgAkEQaiABEEYgAigCFCEFIAIoAhBBAUYNuQFBCyEEDLEBCyACQRBqIAEQRiACKAIUIQUgAigCEEEBRg25ASACQRBqIAEQRiACKAIUIQYgAigCEEEBRg26AUEMIQQMsAELQQ0hBAytAQtBDiEEDKwBCyACQRBqIAEQRiACKAIUIQUgAigCEEEBRg24AQJAAkACQCAFQQFHDQAgAkEQaiABEDIgAiACKQMQIgo3AwggCqdB/wFxIgFBAUsNASABDgICvAECC0GgmsAAQRUgASgCCBCcASEBIABBATYCACAAIAE2AgQM6AELIAJBCGpBBHIQ7gELIApCCIinIQdBDyEEDOQBCyACQRBqIAEQRiACKAIUIQUgAigCEEEBRg25AUEQIQQMrAELIAJBEGogARBGIAIoAhQhBSACKAIQQQFGDbkBQREhBAyrAQsgAkEQaiABEEYgAigCFCEFIAIoAhBBAUYNuQFBEiEEDKoBCyACQRBqIAEQRiACKAIUIQUgAigCEEEBRg25AUETIQQMqQELIAJBEGogARBGIAIoAhQhBSACKAIQQQFGDbkBQRQhBAyoAQsgAkEQaiABEEYgAigCFCEFIAIoAhBBAUYNuQFBxQEhBAynAQsgAkEQaiABEEYgAigCFCEFIAIoAhBBAUYNuQFBxgEhBAymAQsgAkEQaiABEI4BIAIoAhQhBSACKAIQQQFGDbkBIAJBGGooAgAhBkEVIQQMpQELIAJBEGogARCOASACKAIUIQUgAigCEEEBRg25ASACQRhqKAIAIQZBFiEEDKQBCyACQRBqIAEQjgEgAigCFCEFIAIoAhBBAUYNuQEgAkEYaigCACEGQRchBAyjAQsgAkEQaiABEI4BIAIoAhQhBSACKAIQQQFGDbkBIAJBGGooAgAhBkEYIQQMogELIAJBEGogARCOASACKAIUIQUgAigCEEEBRg25ASACQRhqKAIAIQZBGSEEDKEBCyACQRBqIAEQjgEgAigCFCEFIAIoAhBBAUYNuQEgAkEYaigCACEGQRohBAygAQsgAkEQaiABEI4BIAIoAhQhBSACKAIQQQFGDbkBIAJBGGooAgAhBkEbIQQMnwELIAJBEGogARCOASACKAIUIQUgAigCEEEBRg25ASACQRhqKAIAIQZBHCEEDJ4BCyACQRBqIAEQjgEgAigCFCEFIAIoAhBBAUYNuQEgAkEYaigCACEGQR0hBAydAQsgAkEQaiABEI4BIAIoAhQhBSACKAIQQQFGDbkBIAJBGGooAgAhBkEeIQQMnAELIAJBEGogARCOASACKAIUIQUgAigCEEEBRg25ASACQRhqKAIAIQZBHyEEDJsBCyACQRBqIAEQjgEgAigCFCEFIAIoAhBBAUYNuQEgAkEYaigCACEGQSAhBAyaAQsgAkEQaiABEI4BIAIoAhQhBSACKAIQQQFGDbkBIAJBGGooAgAhBkEhIQQMmQELIAJBEGogARCOASACKAIUIQUgAigCEEEBRg25ASACQRhqKAIAIQZBIiEEDJgBCyACQRBqIAEQjgEgAigCFCEFIAIoAhBBAUYNuQEgAkEYaigCACEGQSMhBAyXAQsgAkEQaiABEI4BIAIoAhQhBSACKAIQQQFGDbkBIAJBGGooAgAhBkEkIQQMlgELIAJBEGogARCOASACKAIUIQUgAigCEEEBRg25ASACQRhqKAIAIQZBJSEEDJUBCyACQRBqIAEQjgEgAigCFCEFIAIoAhBBAUYNuQEgAkEYaigCACEGQSYhBAyUAQsgAkEQaiABEI4BIAIoAhQhBSACKAIQQQFGDbkBIAJBGGooAgAhBkEnIQQMkwELIAJBEGogARCOASACKAIUIQUgAigCEEEBRg25ASACQRhqKAIAIQZBKCEEDJIBCyACQRBqIAEQjgEgAigCFCEFIAIoAhBBAUYNuQEgAkEYaigCACEGQSkhBAyRAQsgAkEQaiABEI4BIAIoAhQhBSACKAIQQQFGDbkBIAJBGGooAgAhBkEqIQQMkAELIAJBEGogARCOASACKAIUIQUgAigCEEEBRg25ASACQRhqKAIAIQZBKyEEDI8BCyACQRBqIAEQkQEgAigCFCEFIAIoAhBBAUYNuQFBLCEEDI4BCyACQRBqIAEQkQEgAigCFCEFIAIoAhBBAUYNuQFBLSEEDI0BCyACQRBqIAEQJSACKAIUIQUgAigCEEEBRg25AUEuIQQMjAELIAJBEGogARBHIAIoAhBBAUYNuQEgAikDGCIKQoCAgIBwgyELIAqnIQZBLyEEDIoBCyACQRBqIAEQpAEgAigCFCEFIAIoAhBBAUYNuQFBMCEEDIoBCyACQRBqIAEQngEgAigCEEEBRg25ASACKQMYIgpCgICAgHCDIQsgCqchBkExIQQMiAELQTUhBAyGAQtBNiEEDIUBC0E3IQQMhAELQTghBAyDAQtBOSEEDIIBC0E6IQQMgQELQTshBAyAAQtBPCEEDH8LQT0hBAx+C0E+IQQMfQtBPyEEDHwLQcAAIQQMewtBwQAhBAx6C0HCACEEDHkLQcMAIQQMeAtBxAAhBAx3C0HFACEEDHYLQcYAIQQMdQtBxwAhBAx0C0HIACEEDHMLQckAIQQMcgtBygAhBAxxC0HLACEEDHALQcwAIQQMbwtBzQAhBAxuC0HOACEEDG0LQc8AIQQMbAtB0AAhBAxrC0HRACEEDGoLQdIAIQQMaQtB0wAhBAxoC0HUACEEDGcLQdUAIQQMnwELQdYAIQQMngELQdcAIQQMnQELQdgAIQQMnAELQdkAIQQMmwELQdoAIQQMmgELQdsAIQQMmQELQdwAIQQMmAELQd0AIQQMlwELQd4AIQQMlgELQd8AIQQMlQELQeAAIQQMlAELQeEAIQQMkwELQeIAIQQMkgELQeMAIQQMkQELQeQAIQQMkAELQeUAIQQMjwELQeYAIQQMjgELQecAIQQMjQELQegAIQQMjAELQekAIQQMiwELQeoAIQQMigELQesAIQQMiQELQewAIQQMiAELQe0AIQQMhwELQe4AIQQMhgELQe8AIQQMhQELQfAAIQQMhAELQfEAIQQMgwELQfIAIQQMggELQfMAIQQMgQELQfQAIQQMgAELQfUAIQQMfwtB9gAhBAx+C0H3ACEEDH0LQfgAIQQMfAtB+QAhBAx7C0H6ACEEDHoLQfsAIQQMeQtB/AAhBAx4C0H9ACEEDHcLQf4AIQQMdgtB/wAhBAx1C0GAASEEDHQLQYEBIQQMcwtBggEhBAxyC0GDASEEDHELQYQBIQQMcAtBhQEhBAxvC0GGASEEDG4LQYcBIQQMbQtBiAEhBAxsC0GJASEEDGsLQYoBIQQMagtBiwEhBAxpC0GMASEEDGgLQY0BIQQMZwtBjgEhBAxmC0GPASEEDGULQZABIQQMZAtBkQEhBAxjC0GSASEEDGILQZMBIQQMYQtBlAEhBAxgC0GVASEEDF8LQZYBIQQMXgtBlwEhBAxdC0GYASEEDFwLQZkBIQQMWwtBmgEhBAxaC0GbASEEDFkLQZwBIQQMWAtBnQEhBAxXC0GeASEEDFYLQZ8BIQQMVQtBoAEhBAxUC0GhASEEDFMLQaIBIQQMUgtBowEhBAxRC0GkASEEDFALQaUBIQQMTwtBpgEhBAxOC0GnASEEDE0LQagBIQQMTAtBqQEhBAxLC0GqASEEDEoLQasBIQQMSQtBrAEhBAxIC0GtASEEDEcLQa4BIQQMRgtBrwEhBAxFC0GwASEEDEQLQbEBIQQMQwtBsgEhBAxCC0GzASEEDEELQbQBIQQMQAtBMiEEDD8LQTMhBAw+CyACQRBqIAEQRiACKAIUIQUgAigCEEEBRg03QTQhBAw9CyACQRBqIAEQuQEgAikDECIKQiCIIQwCQAJAAkAgCqdBAUYNAAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCAMpyIIQf8BcSIDQRFLDQBBtQEhBCADDhJRAQIDBAUGBwgJCgsMDQ4PEBFRC0G1msAAQRMgASgCDCABKAIIakF/ahCcASEFDFELQQAhCEG2ASEEDE8LQQAhCEG3ASEEDE4LQQAhCEG4ASEEDE0LQQAhCEG5ASEEDEwLQQAhCEG6ASEEDEsLQQAhCEG7ASEEDEoLQQAhCEG8ASEEDEkLIAJBEGogARBGIAIoAhQhBSACKAIQQQFGDUkgAkEQaiABELkBIAIoAhQhBiACKAIQQQFGDQoCQCAGDQBBACEIQb0BIQQMSQtByJrAAEEaIAEoAgwgASgCCGpBf2oQnAEhBQxJCyACQRBqIAEQRiACKAIUIQUgAigCEEEBRg1IQQAhCEG+ASEEDEcLIAJBEGogARC5ASACKAIUIQUgAigCEEEBRg1HIAUNRCACQRBqIAEQuQEgAigCFCEFIAIoAhBBAUYNRwJAIAUNAEEAIQhBvwEhBAxHC0HImsAAQRogASgCDCABKAIIakF/ahCcASEFDEcLIAJBEGogARC5ASACKAIUIQUgAigCEEEBRg1GAkAgBQ0AQQAhCEHAASEEDEYLQciawABBGiABKAIMIAEoAghqQX9qEJwBIQUMRgsgAkEQaiABEEYgAigCFCEFIAIoAhBBAUYNRSACQRBqIAEQRiACKAIUIQYgAigCEEEBRg0HQQAhCEHBASEEDEQLIAJBEGogARBGIAIoAhQhBSACKAIQQQFGDURBACEIQcIBIQQMQwsgAkEQaiABEEYgAigCFCEFIAIoAhBBAUYNQyACQRBqIAEQRiACKAIUIQYgAigCEEEBRg0FQQAhCEHDASEEDEILIAJBEGogARBGIAIoAhQhBSACKAIQQQFGDUJBACEIQccBIQQMQQsgAkEQaiABEEYgAigCFCEFIAIoAhBBAUYNQUEAIQhByAEhBAxACyACQRBqIAEQRiACKAIUIQUgAigCEEEBRg1AQQAhCEHEASEEDD8LIAynIQUMPwsgBiEFDD4LIAYhBQw9CyACQRBqIAEQWiACKQMQIgpCIIghCwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCAKp0EBRg0AAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgC6dB/wFxIglB2gFLDQBBjwIhBCAJDtsBAQIDmAH7AQQFBvoBBwgJCgsMDQ4PEBESExQVFhcYGRobHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzAAAAAAAAAAAAADQ1Njc4OTo7PD0+P0BBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG0AAG4AAG9wcXJzdHV2d3h5egAAewAAfAAAAAB9fn8AAIABgQGCAYMBhAGFAYYBhwGIAQAAiQGKAYsBjAGNAY4BjwGQAZEBkgGTAZQBlQGWAQAAAAAAAAAAAAAAAACXAZgBmQGaAZsBnAGdAZ4BnwGgAaEBogGjAaQBpQGmAacBqAGpAaoBqwGsAa0BrgGvAbABsQEBC0H0msAAQRMgASgCDCABKAIIakF/ahCcASEBDMIBCyACQRBqIAEQjgEgAigCEEEBRg3AASACQRhqKAIAIQYgAigCFCEFQYwCIQQM+QELIAJBEGogARCOASACKAIQQQFGDb8BIAJBGGooAgAhBiACKAIUIQVBjQIhBAz4AQsgAkEQaiABQRAQnQFBASEFAkACQCACKAIQQQFGDQAgAkEYaigCAEEQRw38ASACKAIUIgUzAA4hCiAFKAAKIQMgBSgAAyEBIAUtAAIhBiAFLQABIQggBS0AACEHIAIgBS8ABzsBECACIAVBCWotAAA6ABJBACEFDAELIAIoAhQhAUIAIQoLIAIgATYACSACIAY6AAggAiACLwEQOwANIAIgAi0AEjoADyAFDb8BIAIoAgwhBiACKAIIIQVBjgIhBAz3AQsgAkEQaiABQRAQdSACIAIpAxAiCjcDCAJAAkAgCqdB/wFxIgFBAUsNACABDgIBsAEBCyACQQhqQQRyEO4BCyAKQgiIpyEHQZACIQQM9gELIAJBEGogAUEQEHUgAiACKQMQIgo3AwgCQAJAIAqnQf8BcSIBQQFLDQAgAQ4CAbABAQsgAkEIakEEchDuAQsgCkIIiKchB0GRAiEEDPUBCyACQRBqIAFBEBB1IAIgAikDECIKNwMIAkACQCAKp0H/AXEiAUEBSw0AIAEOAgGwAQELIAJBCGpBBHIQ7gELIApCCIinIQdBkgIhBAz0AQsgAkEQaiABQQgQdSACIAIpAxAiCjcDCAJAAkAgCqdB/wFxIgFBAUsNACABDgIBsAEBCyACQQhqQQRyEO4BCyAKQgiIpyEHQZQCIQQM8wELIAJBEGogAUEIEHUgAiACKQMQIgo3AwgCQAJAIAqnQf8BcSIBQQFLDQAgAQ4CAbABAQsgAkEIakEEchDuAQsgCkIIiKchB0GVAiEEDPIBCyACQRBqIAFBCBB1IAIgAikDECIKNwMIAkACQCAKp0H/AXEiAUEBSw0AIAEOAgGwAQELIAJBCGpBBHIQ7gELIApCCIinIQdBlgIhBAzxAQtBlwIhBAzwAQsgAkEQaiABQQQQdSACIAIpAxAiCjcDCAJAAkAgCqdB/wFxIgFBAUsNACABDgIBrwEBCyACQQhqQQRyEO4BCyAKQgiIpyEHQZgCIQQM7wELIAJBEGogAUEEEHUgAiACKQMQIgo3AwgCQAJAIAqnQf8BcSIBQQFLDQAgAQ4CAa8BAQsgAkEIakEEchDuAQsgCkIIiKchB0GZAiEEDO4BC0GaAiEEDO0BCyACQRBqIAFBAhB1IAIgAikDECIKNwMIAkACQCAKp0H/AXEiAUEBSw0AIAEOAgGuAQELIAJBCGpBBHIQ7gELIApCCIinIQdBmwIhBAzsAQsgAkEQaiABQQIQdSACIAIpAxAiCjcDCAJAAkAgCqdB/wFxIgFBAUsNACABDgIBrgEBCyACQQhqQQRyEO4BCyAKQgiIpyEHQZwCIQQM6wELQZ0CIQQM6gELIAJBEGogAUEEEHUgAiACKQMQIgo3AwgCQAJAIAqnQf8BcSIBQQFLDQAgAQ4CAa0BAQsgAkEIakEEchDuAQsgCkIIiKchB0GeAiEEDOkBCyACQRBqIAFBBBB1IAIgAikDECIKNwMIAkACQCAKp0H/AXEiAUEBSw0AIAEOAgGtAQELIAJBCGpBBHIQ7gELIApCCIinIQdBnwIhBAzoAQtBoAIhBAznAQsgAkEQaiABQQIQdSACIAIpAxAiCjcDCAJAAkAgCqdB/wFxIgFBAUsNACABDgIBrAEBCyACQQhqQQRyEO4BCyAKQgiIpyEHQaECIQQM5gELIAJBEGogAUECEHUgAiACKQMQIgo3AwgCQAJAIAqnQf8BcSIBQQFLDQAgAQ4CAawBAQsgAkEIakEEchDuAQsgCkIIiKchB0GiAiEEDOUBC0GjAiEEDOQBC0GkAiEEDOMBC0GlAiEEDOIBC0GmAiEEDOEBC0GnAiEEDOABC0GoAiEEDN8BC0GpAiEEDN4BC0GqAiEEDN0BC0GrAiEEDNwBC0GsAiEEDNsBC0GtAiEEDNoBC0GuAiEEDNkBC0GvAiEEDNgBC0GwAiEEDNcBC0GxAiEEDNYBC0GyAiEEDNUBC0GzAiEEDNQBC0G0AiEEDNMBC0G1AiEEDNIBC0G2AiEEDNEBC0G3AiEEDNABC0G4AiEEDM8BC0G5AiEEDM4BC0G6AiEEDM0BC0G7AiEEDMwBC0G8AiEEDMsBC0G9AiEEDMoBC0G+AiEEDMkBC0G/AiEEDMgBC0HAAiEEDMcBC0HBAiEEDMYBC0HCAiEEDMUBC0HDAiEEDMQBC0HEAiEEDMMBC0HFAiEEDMIBC0HGAiEEDMEBC0HHAiEEDMABC0HIAiEEDL8BC0HJAiEEDL4BC0HKAiEEDL0BC0HLAiEEDLwBC0HMAiEEDLsBC0HNAiEEDLoBC0HOAiEEDLkBC0HQAiEEDLgBC0HRAiEEDLcBC0HSAiEEDLYBC0HTAiEEDLUBC0HUAiEEDLQBC0HVAiEEDLMBC0HWAiEEDLIBC0HXAiEEDLEBC0HYAiEEDLABC0HZAiEEDK8BC0HaAiEEDK4BC0HbAiEEDK0BC0HcAiEEDKwBC0HdAiEEDKsBC0HeAiEEDKoBC0HjAiEEDKkBC0HfAiEEDKgBC0HgAiEEDKcBC0HhAiEEDKYBC0HiAiEEDKUBC0HkAiEEDKQBC0HlAiEEDKMBC0HmAiEEDKIBC0HnAiEEDKEBC0HoAiEEDKABC0HpAiEEDJ8BC0HqAiEEDJ4BC0HrAiEEDJ0BC0HsAiEEDJwBC0HtAiEEDJsBC0HuAiEEDJoBC0HvAiEEDJkBC0HwAiEEDJgBC0HxAiEEDJcBC0HyAiEEDJYBC0HzAiEEDJUBC0H0AiEEDJQBC0H1AiEEDJMBC0H2AiEEDJIBC0H3AiEEDJEBC0H4AiEEDJABC0H5AiEEDI8BC0H6AiEEDI4BC0H7AiEEDI0BC0H8AiEEDIwBC0H9AiEEDIsBC0H+AiEEDIoBC0H/AiEEDIkBC0GAAyEEDIgBC0GBAyEEDIcBC0GCAyEEDIYBC0GDAyEEDIUBC0GEAyEEDIQBC0GFAyEEDIMBC0GGAyEEDIIBC0GHAyEEDIEBC0GIAyEEDIABC0GJAyEEDH8LQYoDIQQMfgtBiwMhBAx9C0GMAyEEDHwLQY0DIQQMewtBjgMhBAx6C0GPAyEEDHkLQZADIQQMeAtBkQMhBAx3C0GSAyEEDHYLQZMDIQQMdQtBlAMhBAx0C0GVAyEEDHMLQZYDIQQMcgtBlwMhBAxxC0GYAyEEDHALQZkDIQQMbwtBmgMhBAxuC0GbAyEEDG0LQZwDIQQMbAtBnQMhBAxrC0GeAyEEDGoLQZ8DIQQMaQtBoAMhBAxoC0GhAyEEDGcLQaIDIQQMZgtBowMhBAxlC0GkAyEEDGQLQaUDIQQMYwsgAkEYakIANwMAIAJCADcDECACQQRyIQhBACEFA0AgAkEIaiABQSAQdSACIAIpAwgiCjcDACAKp0H/AXEiBkEBRg0pIAJBEGogBWogCkIIiDwAAAJAIAZFDQAgCBDuAQsgBUEBaiIFQRBHDQALIAIzAR4hCiACKAEaIQMgAigBFiEGIAIoARIhBSACLQARIQggAi0AECEHQaYDIQQMYgsgAkEQaiABQQAQcSACKAIQQQFGDSggAkEYaigCACEGIAIoAhQhBUGnAyEEDGELIAJBEGogAUEBEHEgAigCEEEBRg0nIAJBGGooAgAhBiACKAIUIQVBqAMhBAxgCyACQRBqIAFBAhBxIAIoAhBBAUYNJiACQRhqKAIAIQYgAigCFCEFQakDIQQMXwsgAkEQaiABQQMQcSACKAIQQQFGDSUgAkEYaigCACEGIAIoAhQhBUGqAyEEDF4LQasDIQQMXQtBrAMhBAxcC0GtAyEEDFsLQa4DIQQMWgtBrwMhBAxZC0GwAyEEDFgLQbEDIQQMVwtBsgMhBAxWC0GzAyEEDFULQbQDIQQMVAtBtQMhBAxTC0G2AyEEDFILIAJBEGogAUEDEHEgAigCEEEBRg0YIAJBGGooAgAhBiACKAIUIQVBtwMhBAxRCyACQRBqIAFBAxBxIAIoAhBBAUYNFyACQRhqKAIAIQYgAigCFCEFQbgDIQQMUAsgAkEQaiABQQMQcSACKAIQQQFGDRYgAkEYaigCACEGIAIoAhQhBUG5AyEEDE8LIAJBEGogAUEDEHEgAigCEEEBRg0VIAJBGGooAgAhBiACKAIUIQVBugMhBAxOCyACQRBqIAFBAxBxIAIoAhBBAUYNFCACQRhqKAIAIQYgAigCFCEFQbsDIQQMTQsgAkEQaiABQQMQcSACKAIQQQFGDRMgAkEYaigCACEGIAIoAhQhBUG8AyEEDEwLQc8CIQQMSwtBvQMhBAxKC0G+AyEEDEkLIAunIQEMEAsgCkIgiKchAQwPCyAKQiCIpyEBDA4LIApCIIinIQEMDQsgCkIgiKchAQwMCyAKQiCIpyEBDAsLIApCIIinIQEMCgsgCkIgiKchAQwJCyAKQiCIpyEBDAgLIApCIIinIQEMBwsgCkIgiKchAQwGCyAKQiCIpyEBDAULIApCIIinIQEMBAsgCkIgiKchAQwDCyAKQiCIpyEBDAILIApCIIinIQEMAQsgAigCFCEBCyAAQQE2AgAgACABNgIEDD0LIAJBEGogARC5ASACKQMQIgpCIIghDAJAAkACQAJAIAqnQQFGDQACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAynQf8BcSIFQc4ASw0AIAUOTwECAwQAAAAAAAAAAAAAAAAFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHh8gISIjJCUmJygpKissLS4vMDEyMzQ1Njc4OTo7PD0+P0BBQkMBC0HqmcAAQRMgASgCDCABKAIIakF/ahCcASEBDEYLIAJBEGogAUECEHEgAigCEEEBRg1EIAJBGGooAgAhBiACKAIUIQVByQEhBAyAAQsgAkEQaiABQQIQcSACKAIQQQFGDUMgAkEYaigCACEGIAIoAhQhBUHKASEEDH8LIAJBEGogAUEDEHEgAigCEEEBRg1CIAJBGGooAgAhBiACKAIUIQVBywEhBAx+CyACQRBqIAEQuQEgAikDECIKQiCIIQwgCqdBAUYNQCAMpyEHQcwBIQQMfQsgAkEQaiABQQIQcSACKAIQQQFGDUAgAkEYaigCACEGIAIoAhQhBUHNASEEDHwLIAJBEGogAUEDEHEgAigCEEEBRg0/IAJBGGooAgAhBiACKAIUIQVBzgEhBAx7CyACQRBqIAFBABBxIAIoAhBBAUYNPiACQRhqKAIAIQYgAigCFCEFQc8BIQQMegsgAkEQaiABQQEQcSACKAIQQQFGDT0gAkEYaigCACEGIAIoAhQhBUHQASEEDHkLIAJBEGogAUEAEHEgAigCEEEBRg08IAJBGGooAgAhBiACKAIUIQVB0QEhBAx4CyACQRBqIAFBARBxIAIoAhBBAUYNOyACQRhqKAIAIQYgAigCFCEFQdIBIQQMdwsgAkEQaiABQQIQcSACKAIQQQFGDTogAkEYaigCACEGIAIoAhQhBUHTASEEDHYLIAJBEGogAUECEHEgAigCEEEBRg05IAJBGGooAgAhBiACKAIUIQVB1AEhBAx1CyACQRBqIAFBAxBxIAIoAhBBAUYNOCACQRhqKAIAIQYgAigCFCEFQdUBIQQMdAsgAkEQaiABQQAQcSACKAIQQQFGDTcgAkEYaigCACEGIAIoAhQhBUHWASEEDHMLIAJBEGogAUEBEHEgAigCEEEBRg02IAJBGGooAgAhBiACKAIUIQVB1wEhBAxyCyACQRBqIAFBABBxIAIoAhBBAUYNNSACQRhqKAIAIQYgAigCFCEFQdgBIQQMcQsgAkEQaiABQQEQcSACKAIQQQFGDTQgAkEYaigCACEGIAIoAhQhBUHZASEEDHALIAJBEGogAUECEHEgAigCEEEBRg0zIAJBGGooAgAhBiACKAIUIQVB2gEhBAxvCyACQRBqIAFBAhBxIAIoAhBBAUYNMiACQRhqKAIAIQYgAigCFCEFQdsBIQQMbgsgAkEQaiABQQMQcSACKAIQQQFGDTEgAkEYaigCACEGIAIoAhQhBUHcASEEDG0LIAJBEGogAUEAEHEgAigCEEEBRg0wIAJBGGooAgAhBiACKAIUIQVB3QEhBAxsCyACQRBqIAFBARBxIAIoAhBBAUYNLyACQRhqKAIAIQYgAigCFCEFQd4BIQQMawsgAkEQaiABQQAQcSACKAIQQQFGDS4gAkEYaigCACEGIAIoAhQhBUHfASEEDGoLIAJBEGogAUEBEHEgAigCEEEBRg0tIAJBGGooAgAhBiACKAIUIQVB4AEhBAxpCyACQRBqIAFBAhBxIAIoAhBBAUYNLCACQRhqKAIAIQYgAigCFCEFQeEBIQQMaAsgAkEQaiABQQIQcSACKAIQQQFGDSsgAkEYaigCACEGIAIoAhQhBUHiASEEDGcLIAJBEGogAUEDEHEgAigCEEEBRg0qIAJBGGooAgAhBiACKAIUIQVB4wEhBAxmCyACQRBqIAFBABBxIAIoAhBBAUYNKSACQRhqKAIAIQYgAigCFCEFQeQBIQQMZQsgAkEQaiABQQEQcSACKAIQQQFGDSggAkEYaigCACEGIAIoAhQhBUHlASEEDGQLIAJBEGogAUEAEHEgAigCEEEBRg0nIAJBGGooAgAhBiACKAIUIQVB5gEhBAxjCyACQRBqIAFBARBxIAIoAhBBAUYNJiACQRhqKAIAIQYgAigCFCEFQecBIQQMYgsgAkEQaiABQQIQcSACKAIQQQFGDSUgAkEYaigCACEGIAIoAhQhBUHoASEEDGELIAJBEGogAUECEHEgAigCEEEBRg0kIAJBGGooAgAhBiACKAIUIQVB6QEhBAxgCyACQRBqIAFBAxBxIAIoAhBBAUYNIyACQRhqKAIAIQYgAigCFCEFQeoBIQQMXwsgAkEQaiABQQAQcSACKAIQQQFGDSIgAkEYaigCACEGIAIoAhQhBUHrASEEDF4LIAJBEGogAUEBEHEgAigCEEEBRg0hIAJBGGooAgAhBiACKAIUIQVB7AEhBAxdCyACQRBqIAFBABBxIAIoAhBBAUYNICACQRhqKAIAIQYgAigCFCEFQe0BIQQMXAsgAkEQaiABQQEQcSACKAIQQQFGDR8gAkEYaigCACEGIAIoAhQhBUHuASEEDFsLIAJBEGogAUECEHEgAigCEEEBRg0eIAJBGGooAgAhBiACKAIUIQVB7wEhBAxaCyACQRBqIAFBAhBxIAIoAhBBAUYNHSACQRhqKAIAIQYgAigCFCEFQfABIQQMWQsgAkEQaiABQQMQcSACKAIQQQFGDRwgAkEYaigCACEGIAIoAhQhBUHxASEEDFgLIAJBEGogAUEAEHEgAigCEEEBRg0bIAJBGGooAgAhBiACKAIUIQVB8gEhBAxXCyACQRBqIAFBARBxIAIoAhBBAUYNGiACQRhqKAIAIQYgAigCFCEFQfMBIQQMVgsgAkEQaiABQQAQcSACKAIQQQFGDRkgAkEYaigCACEGIAIoAhQhBUH0ASEEDFULIAJBEGogAUEBEHEgAigCEEEBRg0YIAJBGGooAgAhBiACKAIUIQVB9QEhBAxUCyACQRBqIAFBAhBxIAIoAhBBAUYNFyACQRhqKAIAIQYgAigCFCEFQfYBIQQMUwsgAkEQaiABQQIQcSACKAIQQQFGDRYgAkEYaigCACEGIAIoAhQhBUH3ASEEDFILIAJBEGogAUEDEHEgAigCEEEBRg0VIAJBGGooAgAhBiACKAIUIQVB+AEhBAxRCyACQRBqIAFBABBxIAIoAhBBAUYNFCACQRhqKAIAIQYgAigCFCEFQfkBIQQMUAsgAkEQaiABQQEQcSACKAIQQQFGDRMgAkEYaigCACEGIAIoAhQhBUH6ASEEDE8LIAJBEGogAUEAEHEgAigCEEEBRg0SIAJBGGooAgAhBiACKAIUIQVB+wEhBAxOCyACQRBqIAFBARBxIAIoAhBBAUYNESACQRhqKAIAIQYgAigCFCEFQfwBIQQMTQsgAkEQaiABQQIQcSACKAIQQQFGDRAgAkEYaigCACEGIAIoAhQhBUH9ASEEDEwLIAJBEGogAUECEHEgAigCEEEBRg0PIAJBGGooAgAhBiACKAIUIQVB/gEhBAxLCyACQRBqIAFBAxBxIAIoAhBBAUYNDiACQRhqKAIAIQYgAigCFCEFQf8BIQQMSgsgAkEQaiABQQAQcSACKAIQQQFGDQ0gAkEYaigCACEGIAIoAhQhBUGAAiEEDEkLIAJBEGogAUEBEHEgAigCEEEBRg0MIAJBGGooAgAhBiACKAIUIQVBgQIhBAxICyACQRBqIAFBABBxIAIoAhBBAUYNCyACQRhqKAIAIQYgAigCFCEFQYICIQQMRwsgAkEQaiABQQEQcSACKAIQQQFGDQogAkEYaigCACEGIAIoAhQhBUGDAiEEDEYLIAJBEGogAUECEHEgAigCEEEBRg0JIAJBGGooAgAhBiACKAIUIQVBhAIhBAxFCyACQRBqIAFBAhBxIAIoAhBBAUYNCCACQRhqKAIAIQYgAigCFCEFQYUCIQQMRAsgAkEQaiABQQMQcSACKAIQQQFGDQcgAkEYaigCACEGIAIoAhQhBUGGAiEEDEMLIAJBEGogAUEAEHEgAigCEEEBRg0GIAJBGGooAgAhBiACKAIUIQVBhwIhBAxCCyACQRBqIAFBARBxIAIoAhBBAUYNBSACQRhqKAIAIQYgAigCFCEFQYgCIQQMQQsgAkEQaiABQQAQcSACKAIQQQFGDQQgAkEYaigCACEGIAIoAhQhBUGJAiEEDEALIAJBEGogAUEBEHEgAigCEEEBRg0DIAJBGGooAgAhBiACKAIUIQVBigIhBAw/CyACQRBqIAFBAhBxIAIoAhBBAUYNAiACQRhqKAIAIQYgAigCFCEFQYsCIQQMPgsgDKchAQwCCyAMpyEBDAELIAIoAhQhAQsgAEEBNgIAIAAgATYCBAw8C0EBIQQLCwsMNgsgAEEBNgIAIAAgCz4CBAw3CyAAQQE2AgAgACAFNgIEDDYLIABBATYCACAAIAU2AgQMNQsgAEEBNgIAIAAgBTYCBAw0CyAAQQE2AgAgACAFNgIEDDMLIABBATYCACAAIAU2AgQMMgsgCkKAgICAcIMhCyAFIAdrIQYgASgCACAHaiEFQQkhBAwvCyAAQQE2AgAgACAFNgIEDDALIABBATYCACAAIAU2AgQMLwsgAEEBNgIAIAAgBjYCBAwuCyAAQQE2AgAgACAFNgIEDC0LIABBATYCACAAIApCIIg+AgQMLAsgAEEBNgIAIAAgBTYCBAwrCyAAQQE2AgAgACAFNgIEDCoLIABBATYCACAAIAU2AgQMKQsgAEEBNgIAIAAgBTYCBAwoCyAAQQE2AgAgACAFNgIEDCcLIABBATYCACAAIAU2AgQMJgsgAEEBNgIAIAAgBTYCBAwlCyAAQQE2AgAgACAFNgIEDCQLIABBATYCACAAIAU2AgQMIwsgAEEBNgIAIAAgBTYCBAwiCyAAQQE2AgAgACAFNgIEDCELIABBATYCACAAIAU2AgQMIAsgAEEBNgIAIAAgBTYCBAwfCyAAQQE2AgAgACAFNgIEDB4LIABBATYCACAAIAU2AgQMHQsgAEEBNgIAIAAgBTYCBAwcCyAAQQE2AgAgACAFNgIEDBsLIABBATYCACAAIAU2AgQMGgsgAEEBNgIAIAAgBTYCBAwZCyAAQQE2AgAgACAFNgIEDBgLIABBATYCACAAIAU2AgQMFwsgAEEBNgIAIAAgBTYCBAwWCyAAQQE2AgAgACAFNgIEDBULIABBATYCACAAIAU2AgQMFAsgAEEBNgIAIAAgBTYCBAwTCyAAQQE2AgAgACAFNgIEDBILIABBATYCACAAIAU2AgQMEQsgAEEBNgIAIAAgBTYCBAwQCyAAQQE2AgAgACAFNgIEDA8LIABBATYCACAAIAU2AgQMDgsgAEEBNgIAIAAgBTYCBAwNCyAAQQE2AgAgACAFNgIEDAwLIABBATYCACAAIAU2AgQMCwsgACACKAIUNgIEIABBATYCAAwKCyAAQQE2AgAgACAFNgIEDAkLIAIoAhQhASAAQQE2AgAgACABNgIEDAgLIABBATYCACAAIAU2AgQMBwtBkwIhBAsgA61CIIYhCwwDCyAHIAUQqgEAC0HImsAAQRogASgCDCABKAIIakF/ahCcASEFDAILQZSTwABBNEGslMAAENYBAAsgACAIOgALIABBADYCACAAQRhqIAo3AwAgAEEMaiAFNgIAIABBCmogBzoAACAAQQhqIAQ7AQAgAEEQaiALIAathDcDAAwBCyAAQQE2AgAgACAFNgIECyACQSBqJAALojwCKH8DfiMAQZAGayICJAAgAkGIAmogARCXAiACQZACaiACKAKIAiACKAKMAhCnASACQQA2AoAEIAJCATcD+AMgAkEANgKQBCACQgQ3A4gEIAJBADYCoAQgAkIENwOYBCACQQA2ArAEIAJCBDcDqAQgAkEANgLABCACQgQ3A7gEIAJBADYC0AQgAkIENwPIBCACQQA2AuAEIAJCBDcD2AQgAkEANgLwBCACQgQ3A+gEIAJBiAVqQQhqIQNBBCEEQQQhBUEEIQZBBCEHQQQhCEEEIQlBACEKQQAhC0EAIQxBACENQQAhDkEAIQ9BACEQQQAhEUEBIRJBACETQQAhFEEAIRVBACEWA0AgAkGQAmoQGSEXIAJBkAJqEAMiGC0AACIZQQVGDQACQAJAAkACQAJAAkACQAJAAkAgGUF9aiIaQQhNDQAgGUFqaiIZQQJLDQkCQAJAIBkOAwELAAELIBhBCGovAQBBC0cNCiAYQQxqKAIAIhkgC08NCiAHIBlBA3RqIhkoAgBBAUcNCiATQQFHDQIgF0EBaiEYIBkoAgQhFyAqQiCIpyEaICqnIRsCQCANIAIoAuwERw0AIAJB6ARqIA1BARC9ASACKALoBCEEIAIoAvAEIQ0LIAQgDUEEdGoiGSAbNgIIIBkgFzYCBCAZIBg2AgAgGUEMaiAaNgIAQQEhEyACIA1BAWoiDTYC8AQMCgsgGEEIajUCACErAkACQCASQQFxDQAgE0EBRw0EICpCIIinIRkMAQsgDkEBRw0EIB0gHGohGQsgAkGAAmogARCXAiACKAKEAiIYIBlJDQQgAkHwBWogAigCgAIgGWogGCAZaxBEICtCIIYgGa2EISpBASETQQAhEgwJCyAaDgkEBQgICAgIBgcEC0GAgMAAQStB9IDAABDWAQALQYCAwABBK0H0gMAAENYBAAtBgIDAAEErQfSAwAAQ1gEACyAZIBgQqgEACwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIBBBAUcNACARQQFHDQAgDkEBRw0AIA9BAUcNACACQZABaiABEJcCIAIoApQBIhkgHkEBaiIRSQ0CIAJB8AVqIAIoApABIBFqIBkgEWsQRCACKALwBUEBRg0DIAJB+AVqKAIAIRkgAigC9AUhEiACQYgBaiABEJcCIAIoAowBIhggGSARaiIQSQ0EIAJB8AVqIAIoAogBIBBqIBggEGsQRCACKALwBUEBRg0FIAIoAvQFIR8gAkHwBWogARCwASACQYgFakEIaiACQfAFakEIaiIJKAIANgIAIAJCADcClAUgAiACKQPwBTcDiAUgAkEANgKoBSACQgQ3A6AFIAwNARDUAkEEIQtBACEJQQEhFUEEIRlBBCEbQQAhGEEEIRdBACEaDAsLIAAgAikD+AM3AgQgAEEANgIAIABBDGogAkGABGooAgA2AgACQCACKALsBCIZRQ0AIAQgGUEEdEEEEKsCCwJAIAIoAtwEIhlFDQAgCCAZQQN0QQQQqwILAkAgAigCzAQiGUUNACAGIBlBDGxBBBCrAgsgAkG4BGoQ1gIgAkG4BGoQiwICQCACKAKsBCIZRQ0AIAcgGUEDdEEEEKsCCyACQYgEahCgASACKAKMBCIZRQ0LIAIoAogEIBlBBXRBBBCrAgwLCyAMQQxsIRZBBCEbIAJB+ARqQQhqIRVBACEYIAYhGQNAIAIoApAEIhogGSgCACIXTQ0FAkACQCACKAKIBCAXQQV0ai0AFEUNACACKAKoBSAfaiEXAkAgGCACKAKcBEcNACACQZgEaiAYQQEQwAEgAigCmAQhGyACKAKgBCEYCyAbIBhBA3RqIhogFzYCBCAaQQE2AgAgAiAYQQFqIhg2AqAEIAIoApAEIhogGSgCACIXTQ0IIAIoAogEIBdBBXRqIhooAhghFyAaQRxqKAIAIRogAkGAAWogARCXAiAaIBdJDQkgAigChAEiCyAaSQ0KIAIoAoABIQsgAkH4AGogGiAXayIaQQAQtAEgAkEANgL4BSACIAIpA3g3A/AFIAJB8AVqIAsgF2ogGhCnAiAVIAIoAvgFNgIAIAIgAikD8AU3A/gEIAJB8AVqIAJB+ARqEBMCQCACKAKoBSIXIAIoAqQFRw0AIAJBoAVqIBdBARDBASACKAKoBSEXCyACKAKgBSAXQQxsaiIXIAIpA/AFNwIAIBdBCGogCSgCADYCACACIAIoAqgFQQFqNgKoBSACQfgEahDXAiACQfgEahCPAgwBCwJAIBggAigCnARHDQAgAkGYBGogGEEBEMABIAIoApgEIRsgAigCoAQhGAsgGyAYQQN0akEANgIAIAIgGEEBaiIYNgKgBAsgGUEMaiEZIBZBdGoiFkUNCQwACwsgESAZEKoBAAsgAiACKQL0BTcDiAVBhIHAAEErIAJBiAVqQbCBwAAQlAEACyAQIBgQqgEACyACIAIpAvQFNwOIBUGEgcAAQSsgAkGIBWpBsIHAABCUAQALQYiCwAAgFyAaEKgBAAtBiILAACAXIBoQqAEACyAXIBoQqgEACyAaIAsQqQEACyACKAKgBSIZIAIoAqgFIglBDGwiFmohCxDUAgJAIAkNAEEAIQlBASEVIBshF0EAIRoMAQsgCUUhFUEAIRdBACEaA0AgGSAXakEIaigCACAaaiEaIBYgF0EMaiIXRw0ACyAbIRcLIAJBiAVqIBogEmogERArIAJBiAVqIAkgH2ogEBArAkAgFQ0AIAJBgAVqIR8DQCACQfAAaiAZEJcCIAIoAnAhGiACQegAaiACKAJ0IhZBABC0ASACQQA2AvgFIAIgAikDaDcD8AUgAkHwBWogGiAWEKcCIB8gAigC+AU2AgAgAiACKQPwBTcD+AQgAkGIBWogAkH4BGogIBA7IAsgGUEMaiIZRw0ACwsQ1AIgAkHgAGogARCXAgJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCACKAJkIhkgIUEBaiIJSQ0AIAJB8AVqIAIoAmAgCWogGSAJaxBEIAIoAvAFQQFGDQEgG0F4aiERIAYgDEEMbGohCyACKAL0BSESIAJBgAZqIRBBACEaIAYhGUEAIRUCQANAIBEgGkEDdGohFiACKAKIBCEgIAIoApAEIR8CQANAAkAgCyAZRw0AENQCIAJBiAVqIBUgEmogCRArAkAgDEUNACAMQQxsIRpBACEZA0AgAigCkAQiGyAGKAIAIhZNDRACQCACKAKIBCAWQQV0ai0AFEUNACAYIBlNDRIgFygCAEUNEyACQYgFaiAXQQRqKAIAIAZBCGooAgBBf2oQKwsgGUEBaiEZIAZBDGohBiAXQQhqIRcgGkF0aiIaDQALCxDUAiACQdgAaiABEJcCIAIoAlwiGSAiQQFqIgZJDQogAkHwBWogAigCWCAGaiAZIAZrEEQgAigC8AVBAUYNCyACQfgFaigCACEZIAIoAvQFIQsgAkHQAGogARCXAiACKAJUIhggGSAGaiIbSQ0MIAJB8AVqIAIoAlAgG2ogGCAbaxBEIAIoAvAFQQFGDQ0gAigC9AUhIEEAIRggAkEANgL4BSACQgQ3A/AFIAJB8AVqIAUgBSAKQQN0aiIfEG4gAkGwBWpBCGogAigC+AUiFjYCACACIAIpA/AFIio3A7AFIBZFDQIgFkEMbCEXICqnIhpBCGohGQNAIBkoAgAgGGohGCAZQQxqIRkgF0F0aiIXDQALIAJBiAVqIBggC2ogBhArIAJBiAVqIBYgIGogGxArIBZFDQQgFkEMbCEZIAJBgAVqIQYDQCACQcgAaiAaEJcCIAIoAkghGCACQcAAaiACKAJMIhdBABC0ASACQQA2AvgFIAIgAikDQDcD8AUgAkHwBWogGCAXEKcCIAYgAigC+AU2AgAgAiACKQPwBTcD+AQgAkGIBWogAkH4BGogIxA7IBpBDGohGiAZQXRqIhkNAAwFCwsgHyAZKAIAIhtNDQYgGkEBaiEaIBlBDGohGSAWQQhqIRYgICAbQQV0ai0AFEUNAAsgGCAaQX9qTQ0GIBYoAgBFDQcgAkHwBWogAkGIBWogFkEEaigCACAZQXxqKAIAQX9qEBsgAigC+AUhFiACKAKIBiEbIBAQ1wIgEBCPAiAbIBVqIBZrIRUMAQsLIAJBiAVqIAsgBhArIAJBiAVqIBYgIGogGxArCxDUAiACQThqIAEQlwIgAigCPCIZIB1JDQwgAkHwBWogAigCOCAdaiAZIB1rEEQgAigC8AVBAUYNDSACQfgFaigCACEZIAIoAvQFISMgAkEwaiABEJcCIAIoAjQiGCAZIB1qIglJDQ4gAkHwBWogAigCMCAJaiAYIAlrEEQgAigC8AVBAUYNDyACKAL0BSEVQQAhFyACQQA2AoAFIAJCBDcD+AQgAiAfNgL0BSACIAU2AvAFIAIgAkGIBGo2AvgFIAJB+ARqIAJB8AVqEI8BIAJBwAVqQQhqIAIoAoAFIhk2AgAgAiACKQP4BCIqNwPABUEAIRoCQCAZRQ0AIBlBDGwhGCAqp0EIaiEZQQAhGgNAIBkoAgAgGmohGiAZQQxqIRkgGEF0aiIYDQALCyACQQA2AtgFIAJCBDcD0AUgAkEANgLoBSACQgQ3A+AFAkAgDQ0AQQQhIAwWCyANQQR0IQYgAkHwBWpBEGohFkEAIRtBACEXA0ACQCAEQQhqIhgoAgAiGSAbRg0AIAJBKGogARCXAiACKAIsIhsgGUkNEiACQfAFaiACKAIoIBlqIBsgGWsQRCACKALwBUEBRg0TIAIoAvgFISAgAigC9AUhCyAEQQxqKAIAIR8gGCgCACEMAkAgAigC2AUiGSACKALUBUcNACACQdAFaiAZQQEQvQEgAigC2AUhGQsgAigC0AUgGUEEdGoiGyAMNgIIIBsgIDYCBCAbIAs2AgAgG0EMaiAfNgIAIAIgGUEBajYC2AUCQCACKALoBSACKALkBUcNACACQeAFakEBEK0CCyACQeAFahC4AiACKALoBUECdGogCzYCACACIAIoAugFQQFqNgLoBQsgAkHwBWogAkGIBWogBEEEaigCACAEKAIAEBsgAigC+AUhGyACKAKIBiELIAIoAugFIRkgAkEgaiACQeAFahCWAiACKAIkIiAgGUF/aiIZTQ0TIAIoAiAgGUECdCIgaigCACEfIAJBGGogAkHgBWoQmAIgAigCHCIMIBlNDRQgBEEQaiEEIAsgG2siGSAXaiEXIAIoAhggIGogHyAZajYCACAYKAIAIRsgFhDXAiAWEI8CIAZBcGoiBkUNFQwACwsgCSAZEKoBAAsgAiACKQL0BTcD+ARBhIHAAEErIAJB+ARqQbCBwAAQlAEAC0GIgsAAIBsgHxCoAQALQYiCwAAgGkF/aiAYEKgBAAtBgIDAAEErQfSAwAAQ1gEACyAGIBkQqgEACyACIAIpAvQFNwP4BEGEgcAAQSsgAkH4BGpBsIHAABCUAQALIBsgGBCqAQALIAIgAikC9AU3A/gEQYSBwABBKyACQfgEakGwgcAAEJQBAAtBiILAACAWIBsQqAEAC0GIgsAAIBkgGBCoAQALQYCAwABBK0H0gMAAENYBAAsgHSAZEKoBAAsgAiACKQL0BTcD+ARBhIHAAEErIAJB+ARqQbCBwAAQlAEACyAJIBgQqgEACyACIAIpAvQFNwP4BEGEgcAAQSsgAkH4BGpBsIHAABCUAQALIBkgGxCqAQALIAIgAikC9AU3A/gEQYSBwABBKyACQfgEakGwgcAAEJQBAAtBiILAACAZICAQqAEAC0GYgsAAIBkgDBCoAQALIAIoAtAFISAgAigC2AUiGQ0BC0EAIQYMAQsgGUEEdCEWICBBCGohGSACQfAFakEQaiEbQQAhGEEAIQZBACEEAkADQCACQRBqIAJB4AVqEJYCIAIoAhQiASAETQ0BIAJB8AVqIAJBiAVqIAIoAhAgGGooAgAgGSgCABAbIAIoAvgFIQEgAigCiAYhCyAbENcCIBsQjwIgGUEQaiEZIBhBBGohGCAEQQFqIQQgCyAGaiABayEGIBZBcGoiFkUNAgwACwtBiILAACAEIAEQqAEACxDUAiACQYgFaiAaICNqIBdqIAZqIB0QKyACQYgFaiAVIApqIAkQKyACKALoBCEGAkAgAigC8AQiGUUNACAZQQR0IRhBACEXIAYhGQNAAkAgGUEIaiIaKAIAIgQgF0YNACACQYgFaiACQeAFakEAELYBIAQQKwsgAkGIBWogGUEEaigCACAZKAIAECsgGigCACEXIBlBEGohGSAYQXBqIhgNAAsLAkAgAigCyAUiGEUNACACKALABSEZIBhBDGwhGCACQYAFaiEEA0AgAkEIaiAZEJcCIAIoAgghFyACIAIoAgwiGkEAELQBIAJBADYC+AUgAiACKQMANwPwBSACQfAFaiAXIBoQpwIgBCACKAL4BTYCACACIAIpA/AFNwP4BCACQYgFaiACQfgEaiAkEDsgGUEMaiEZIBhBdGoiGA0ACwsgACACKQOIBTcCBCAAQQA2AgAgAEEMaiACQZAFaigCADYCACACQeAFahDWAiACQeAFahCLAgJAIAIoAtQFIhlFDQAgICAZQQR0QQQQqwILIAJBwAVqENQBAkAgAigCxAUiGUUNACACKALABSAZQQxsQQQQqwILIAJBsAVqENQBAkAgAigCtAUiGUUNACACKAKwBSAZQQxsQQQQqwILIAJBoAVqENQBAkAgAigCpAUiGUUNACACKAKgBSAZQQxsQQQQqwILAkAgAigC7AQiGUUNACAGIBlBBHRBBBCrAgsCQCACKALcBCIZRQ0AIAIoAtgEIBlBA3RBBBCrAgsCQCACKALMBCIZRQ0AIAIoAsgEIBlBDGxBBBCrAgsgAkG4BGoQ1gIgAkG4BGoQiwICQCACKAKsBCIZRQ0AIAIoAqgEIBlBA3RBBBCrAgsCQCACKAKcBCIZRQ0AIAIoApgEIBlBA3RBBBCrAgsgAkGIBGoQoAECQCACKAKMBCIZRQ0AIAIoAogEIBlBBXRBBBCrAgsgAkH4A2oQ1wIgAkH4A2oQjwILIAJBkAJqECYgAkGQBmokAA8LIBhBFGooAgAhJQJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgGEEMai0AAEF6akH/AXEiGUEBakEAIBlBDEkbQX9qIhlBCUsNAAJAAkACQAJAIBkOCgABAgQEBAQEBAMACwJAIBFBAUYNACACQaABaiABEJcCIAIoAqQBIhggF0EBaiIZSQ0FIAJB8AVqIAIoAqABIBlqIBggGWsQRCACKALwBUEBRg0GIAIoAvgFIRggAkGYAWogARCXAiACKAKcASIaIBggGWoiGUkNByACQfAFaiACKAKYASAZaiAaIBlrEEQgAigC8AVBAUYNCEEBIREgGCACKAL4BWpBAWohJiAlISAgFyEeDAQLQbCDwABBIEGgg8AAEPQBAAsgAkGwAWogARCXAiACKAK0ASIYIBdBAWoiGUkNByACQfAFaiACKAKwASAZaiAYIBlrEEQgAigC8AVBAUYNCCACKAL4BSEYIAJBqAFqIAEQlwIgAigCrAEiGiAYIBlqIhlJDQkgAkHwBWogAigCqAEgGWogGiAZaxBEIAIoAvAFQQFGDQoCQCAQQQFGDQBBASEQIBggAigC+AVqQQFqIScgFyEhDAMLQeCDwABBIkHQg8AAEPQBAAsgAkHAAWogARCXAiACKALEASIYIBdBAWoiGUkNCiACQfAFaiACKALAASAZaiAYIBlrEEQgAigC8AVBAUYNCyACKAL4BSEYIAJBuAFqIAEQlwIgAigCvAEiGiAYIBlqIhlJDQwgAkHwBWogAigCuAEgGWogGiAZaxBEIAIoAvAFQQFGDQ0gD0EBRg0UAkAgDEUNACAMQQxsIRYgDCACKAL0BWohI0EAIRggByEaIAYhGQNAIAIoApAEIh8gGSgCACIbTQ0QAkAgAigCiAQgG0EFdGotABRFDQAgCyAYTQ0SIBpBATYCACAaQQRqICMgCmo2AgAgGSgCACEbAkAgCiACKALcBEcNACACQdgEaiAKQQEQvwEgAigC4AQhCiACKALYBCIFIQggBSEJCyAJIApBA3RqIh8gGzYCBCAfIBg2AgAgAiAKQQFqIgo2AuAECyAYQQFqIRggGUEMaiEZIBpBCGohGiAWQXRqIhYNAAsLENQCQQEhDyAlISMgFyEiDAELAkACQCAOQQFGDQAgFkEBRw0RIAJB0AFqIAEQlwIgAigC1AEiGSAsQiCIp0EBaiIdSQ0SIAJB8AVqIAIoAtABIB1qIBkgHWsQRCACKALwBUEBRg0TIAIoAvgFIRkgAkHIAWogARCXAiACKALMASIXIBkgHWoiGEkNFCACQfAFaiACKALIASAYaiAXIBhrEEQgAigC8AVBAUcNASACIAIpAvQFNwOIBUGEgcAAQSsgAkGIBWpBsIHAABCUAQALQciEwABBKkG4hMAAEPQBAAsgAigC+AUgGWohHEEBIQ4gJSEkCyAlrUIghiEsQQEhFgwVCyAZIBgQqgEACyACIAIpAvQFNwOIBUGEgcAAQSsgAkGIBWpBsIHAABCUAQALIBkgGhCqAQALIAIgAikC9AU3A4gFQYSBwABBKyACQYgFakGwgcAAEJQBAAsgGSAYEKoBAAsgAiACKQL0BTcDiAVBhIHAAEErIAJBiAVqQbCBwAAQlAEACyAZIBoQqgEACyACIAIpAvQFNwOIBUGEgcAAQSsgAkGIBWpBsIHAABCUAQALIBkgGBCqAQALIAIgAikC9AU3A4gFQYSBwABBKyACQYgFakGwgcAAEJQBAAsgGSAaEKoBAAsgAiACKQL0BTcDiAVBhIHAAEErIAJBiAVqQbCBwAAQlAEAC0GIgsAAIBsgHxCoAQALQZiCwAAgGCALEKgBAAtB8oTAAEEYELcBAAsgHSAZEKoBAAsgAiACKQL0BTcDiAVBhIHAAEErIAJBiAVqQbCBwAAQlAEACyAYIBcQqgEAC0GUhMAAQSRBhITAABD0AQALIBhBFGotAAAhGyACQfgBaiAYQQRqEJUBIAIoAvgBIRogAigC/AEhGSACQfABaiAYQQxqEJUBIAIgGzoAmAUgAiAZNgKMBSACIBo2AogFIAIgAikD8AE3A5AFIBcgHiAmaiAVQQFxGyAXIBFBAUYiGBshFyAYIBVyIRUCQANAAkAgGQ0AQQAhGAwCCyAZQX9qIRkgGi0AACEYIBpBAWohGiAYQQFHDQALENUCQQEhGAsgAkGQAmoQGSEaIAItAJgFIRsgAkHoAWogAkGIBWoQlQEgAigC7AEhHyACKALoASElIAJB4AFqIAMQlQEgAigC5AEhKCACKALgASEpAkAgAigCkAQiGSACKAKMBEcNACACQYgEaiAZQQEQvgEgAigCkAQhGQsgAigCiAQgGUEFdGoiGSAbOgAQIBkgKTYCCCAZIB82AgQgGSAlNgIAIBkgAi8A8AU7ABEgGSAYOgAUIBkgAi8A+AQ7ABUgGSAXNgIYIBlBDGogKDYCACAZQRNqIAJB8AVqQQJqLQAAOgAAIBlBF2ogAkH4BGpBAmotAAA6AAAgGUEcaiAaNgIAIAIgAigCkARBAWo2ApAEIAJB2AFqIAEQlwICQCACKALcASIZIBdNDQACQCACKALYASAXaiIZLQAAQeAARw0AIAJBiAVqENgBDAMLIAJBhAVqQQE2AgAgAkGEBmpBAjYCACACIBk2AtAFIAJCAzcC9AUgAkHkgsAANgLwBSACQQE2AvwEIAJBqILAADYC4AUgAiACQfgEajYCgAYgAiACQeAFajYCgAUgAiACQdAFajYC+AQgAkHwBWpBkIPAABDOAQALQYiCwAAgFyAZEKgBAAsgGEEUai0AAA0AAkAgAigCkAQiGSAYQRhqKAIAIhhLDQBBiILAACAYIBkQqAEACyAXICEgJ2ogFEEBcRsgFyAQQQFGIhobIRcgAkGQAmoQGSEbAkAgDCACKALMBEcNACACQcgEaiAMQQEQwgEgAigCyAQhBiACKALQBCEMCyAGIAxBDGxqIhkgFzYCBCAZIBg2AgAgGUEIaiAbNgIAIAIgDEEBaiIMNgLQBAJAIAsgAigCrARHDQAgAkGoBGogC0EBEMABIAIoAqgEIQcgAigCsAQhCwsgGiAUciEUIAcgC0EDdGpBADYCACACIAtBAWoiCzYCsAQMAAsLzSYCCX8FfiMAQfAAayIBJAACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCAALQAAIgIOKgIDBgEEBgUXGRlQTUo4R0EpEhMICAsMDQ07DgARPgkKNQ8PEAdEFRYkFAILIABBBGooAgBBAkcNGSAAEBwgAEEBOgDgASAAQRM6AAAMUwtBmK3AAEETQYitwAAQ9AEAC0G8rcAAQRVBrK3AABD0AQALIAFBIGogACgCKCAAQSxqKAIAEHIgASgCIEEBRg1OIAFBEGpBCGogAUEgakEEciICQQhqKQIAIgo3AwAgAUHQAGpBCGogAUHAAGopAwAiCzcDACABQeAAaiABQcgAaikDACIMNwMAIAEgAikCACINNwMQIAEgAUE4aikDACIONwNQIAFBNGooAgAhAiAAQThqIAo3AwAgACANNwMwIABBwABqIAI2AgAgAEHEAGogDjcCACAAQcwAaiALNwIAIABB1ABqIAw3AgAgABAcIABBBGogAjYCACAAQQI6AAAMUAsgAkEERw0sIABBDGotAABBempB/wFxIgJBAWpBACACQQxJGyICQQxLDSwgAg4NE0pHRDJBPjsuODUvLRMLIABBADYCvAEgAEHkAGpBEjoAACAAEBwgAEEFOgAACyAAECAiAg1MDE0LIAAQHCAAQQA6AOABIABBEzoAAAxMCyAAKALMAUUNEiABQSBqIABBzAFqEAEgASgCIEEBRg1JIAFB0ABqQQhqIgIgAUEgakESaikBADcDACABQd4AaiIDIAFBIGpBGGopAQA3AQAgASABQSBqQQpqKQEANwNQIAEvASgiBEEGRg0TIAAQHCAAQQhqIAQ7AAAgAEEUOgAAIABBCmogASkDUDcAACAAQRJqIAIpAwA3AAAgAEEYaiADKQEANwAADEsLIAAQ2gEMSgsgABAcIABBAjoA4AEgAEETOgAADEkLIAAtAOABIgJBA0YNEQJAIAIOAyQjACQLIAAQ2gEMJAsgAEGsAWooAgBFDREgAUEgaiAAQagBaiIFEIoBIAEoAiBBAUYNRSABQdAAakEQaiABQSBqQQRyIgJBEGooAgAiBDYCACABQdAAakEIaiACQQhqKQIANwMAIAEgAikCADcDUAJAAkACQCAEQdCGA0sNAEEAIQIgAUEIaiAEQQAQmgEgAUEANgIYIAEgASgCDDYCFCABIAEoAggiBjYCEAJAIARFDQBBACEDA0AgAUEgaiABQdAAahBlAkAgASgCIEEBRw0AIAEoAiQhAiABQRBqIQMMJgsgAyABKAIkIgdqIgggA0kNAyAIQdCGA0sNJCABLQAoIQMCQCACIAEoAhRHDQAgAUEQaiACQQEQxgEgASgCGCECIAEoAhAhBgsgBiACQQN0aiIJIAM6AAQgCSAHNgIAIAEgAkEBaiICNgIYIAghAyAEQX9qIgQNAAsLIAFBIGogBRBTIAEoAiBBAUcNAiABKAIkIQIgAUEQaiEDDCMLQZGpwABBHCABKAJcIAEoAlhqQX9qEJwBIQIMSAtBranAAEEdIAEoAlwgASgCWGpBf2oQnAEhAiABQRBqIQMMIQsgACABQSBqQQRyIgIpAgA3AswBIABB1AFqIAJBCGopAgA3AgAgAUEgakEIaiABQRBqQQhqKAIAIgI2AgAgASABKQMQNwMgAkAgAiABKAIkIgNGDQAgAUEgaiACEIkBIAEoAiQhAwsgASgCICECIAAQHCAAQQhqIAM2AgAgAEEEaiACNgIAIABBFzoAAAxHCyAAKALMAUUNEQJAIABB1AFqKAIAIgMgAEHQAWooAgBPDQAgAUEgaiAAQcwBahABIAEoAiBBAUYNRSABQdAAakEQaiABQSBqQRhqKQMAIgo3AwAgAUHQAGpBCGogAUEgakEQaiICKQMAIgs3AwAgASABKQMoIgw3A1AgAUE3aiIDIAo3AAAgAUEvaiALNwAAIAEgDDcAJyAAEBwgAEEYOgAAIAAgASkAIDcAASAAQQlqIAFBIGpBCGopAAA3AAAgAEERaiACKQAANwAAIABBGGogAykAADcAAAxHCyACQRhHDR0gAEEIai8BAEEGRw0dIAAQHCAAQQA2AswBIABBGToAACAAQawBakEANgIADEYLIABBrAFqQQA2AgAMLAsgACgCtAEiA0UNEAJAIABBuAFqKAIAIgJFDQAgACACIAJBoI0GIAJBoI0GSRsiBGs2ArgBIAAgAyAEajYCtAEgABAcIABBCGogBDYCACAAQQRqIAM2AgAgAEEiOgAADEULIAAQHCAAQQA2ArQBIABBIzoAAAxECyAAEBwgAEEgOgAADEMLIAAQHCAAQR06AAAMQgsgAEEANgK8ASAAQeQAakESOgAAIAAQHCAAQQU6AAAMQQsgAEEANgK8ASAAQeQAakESOgAAIAAQHCAAQQU6AAAMQAsgAEEANgK8ASAAQeQAakESOgAAIAAQHCAAQQU6AAAMPwsgAEHkAGotAABBEkYNCyABQQA2AiggASAAQegAaigCADYCLCABIABB7ABqKQIANwMgIAFB0ABqIAFBIGoQRiABKAJUIQIgASgCUEEBRg09IAAgAjYC3AEgACABKQMgNwK8ASAAQcQBaiABQShqKQMANwIACyAAEFQiAg08DD0LIAJBB0cNCiAALQABIgJBBUsNCiACDgYAEAAPDgsACyAAENMBCyAAEGAiAg05DDoLIAAQFiICRQ05DDgLQcinwABBDxC3AQALIABBADYCzAEgABAcIABBFToAAAw3C0GcrMAAQShB+KzAABD0AQALQYSpwABBDRC3AQALQcinwABBDxC3AQALQeSswABBBBC3AQALQa+rwABBBxC3AQALQZyswABBKEHErMAAEPQBAAsgAEHkAGotAABBEkYNASABQSBqIABB3ABqENABIAEoAiBBAUYNLiABQdAAakEIaiABQSBqQQRyIgJBCGopAgAiCjcDACABIAIpAgAiCzcDUCABQTRqKAIAIQIgAEEMNgJ0IAAgAjYC3AEgAEH4AGogCzcCACAAQYABaiAKNwIAIABBiAFqIAI2AgALIAAQZCICDS4MLwtBr6vAAEEHELcBAAsCQCAAQeQAai0AAEESRg0AIAFBIGogAEHcAGoQ0QEgASgCIEEBRg0sIAFB0ABqQRhqIAFBIGpBBHIiAkEYaigCACIDNgIAIAFB0ABqQRBqIAJBEGopAgAiCjcDACABQdAAakEIaiACQQhqKQIAIgs3AwAgASACKQIAIgw3A1AgAUHAAGooAgAhAiAAQQ02AnQgACACNgLcASAAQfgAaiAMNwIAIABBgAFqIAs3AgAgAEGIAWoiBCAKNwIAIABBkAFqIgggAzYCACAAQZQBaiACNgIAIAFBK2ogCCgAADYAACABIAQpAAA3ACMgABAcIABBJjoAACAAQQFqIgIgASkAIDcAACACQQdqIAFBIGpBB2opAAA3AAAMLgtBr6vAAEEHELcBAAsCQCAAQeQAai0AAEESRg0AIAFBIGogAEHcAGoQ0gEgASgCIEEBRg0rIAEpAiQhCiAAEBwgAEEEaiAKNwIAIABBKToAAAwtC0Gvq8AAQQcQtwEACyAAQeQAai0AAEESRg0BIAFBIGogAEHcAGoQvAEgASgCIEEBRg0pIAFB0ABqQQhqIAFBIGpBBHIiAkEIaikCACIKNwMAIAEgAikCACILNwNQIABBCzYCdCAAQfgAaiALNwIAIABBgAFqIAo3AgALIAAQBSICDSkMKgtBr6vAAEEHELcBAAtByqnAAEEfIABB2AFqKAIAIANqEJwBIQIMJwtBranAAEEdIAEoAlwgASgCWGpBf2oQnAEhAiABQRBqIQMLIAMoAgQiBEUNJSADKAIAIARBA3RBBBCrAgwlCyAAEBYiAkUNAQwkCyAAEBwgAEElOgAACyAAQQM6AOABDCMLQZyswABBKEGMrMAAEPQBAAsCQCAAQeQAai0AAEESRg0AIAFBIGogAEHcAGoQ6QEgASgCJCECIAEoAiBBAUYNISAAEBwgAEEEaiACNgIAIABBEjoAAAwiC0Gvq8AAQQcQtwEACwJAIABB5ABqLQAAQRJGDQAgAUEgaiAAQdwAahDoASABKAIkIQIgASgCIEEBRg0gIAAQHCAAQQRqIAI2AgAgAEEROgAADCELQa+rwABBBxC3AQALIABB5ABqLQAAQRJGDQEgAUEgaiAAQdwAahDlASABKAIgQQFGDR0gAUHQAGpBCGogAUEgakEEciICQQhqKQIAIgo3AwAgASACKQIAIgs3A1AgAUE0aigCACECIABBAjYCdCAAIAI2AtwBIABB+ABqIAs3AgAgAEGAAWogCjcCACAAQYgBaiACNgIACyAAEDQiAg0dDB4LQa+rwABBBxC3AQALIABB5ABqLQAAQRJGDQEgAUEgaiAAQdwAahDmASABKAIgQQFGDRogAUHQAGpBCGogAUEgakEEciICQQhqKQIAIgo3AwAgASACKQIAIgs3A1AgAUE0aigCACECIABBCTYCdCAAIAI2AtwBIABB+ABqIAs3AgAgAEGAAWogCjcCACAAQYgBaiACNgIACyAAEEEiAg0aDBsLQa+rwABBBxC3AQALIABB5ABqLQAAQRJGDQEgAUEgaiAAQdwAahDgASABKAIgQQFGDRcgAUHQAGpBCGogAUEgakEEciICQQhqKQIAIgo3AwAgASACKQIAIgs3A1AgAUE0aigCACECIABBATYCdCAAIAI2AtwBIABB+ABqIAs3AgAgAEGAAWogCjcCACAAQYgBaiACNgIACyAAEEoiAg0XDBgLQa+rwABBBxC3AQALIABB5ABqLQAAQRJGDQEgAUEgaiAAQdwAahDnASABKAIgQQFGDRQgAUHQAGpBCGogAUEgakEEciICQQhqKQIAIgo3AwAgASACKQIAIgs3A1AgAUE0aigCACECIABBAzYCdCAAIAI2AtwBIABB+ABqIAs3AgAgAEGAAWogCjcCACAAQYgBaiACNgIACyAAECIiAg0UDBULQa+rwABBBxC3AQALIABB5ABqLQAAQRJGDQEgAUEgaiAAQdwAahDhASABKAIgQQFGDREgAUHQAGpBCGogAUEgakEEciICQQhqKQIAIgo3AwAgASACKQIAIgs3A1AgAUE0aigCACECIABBBDYCdCAAIAI2AtwBIABB+ABqIAs3AgAgAEGAAWogCjcCACAAQYgBaiACNgIACyAAEFUiAg0RDBILQa+rwABBBxC3AQALIABB5ABqLQAAQRJGDQEgAUEgaiAAQdwAahDjASABKAIgQQFGDQ4gAUHQAGpBCGogAUEgakEEciICQQhqKQIAIgo3AwAgASACKQIAIgs3A1AgAUE0aigCACECIABBBjYCdCAAIAI2AtwBIABB+ABqIAs3AgAgAEGAAWogCjcCACAAQYgBaiACNgIACyAAEEkiAg0ODA8LQa+rwABBBxC3AQALIABB5ABqLQAAQRJGDQEgAUEgaiAAQdwAahDkASABKAIgQQFGDQsgAUHQAGpBCGogAUEgakEEciICQQhqKQIAIgo3AwAgASACKQIAIgs3A1AgAUE0aigCACECIABBCDYCdCAAIAI2AtwBIABB+ABqIAs3AgAgAEGAAWogCjcCACAAQYgBaiACNgIACyAAEEAiAg0LDAwLQa+rwABBBxC3AQALIABB5ABqLQAAQRJGDQEgAUEgaiAAQdwAahDfASABKAIgQQFGDQggAUHQAGpBCGogAUEgakEEciICQQhqKQIAIgo3AwAgASACKQIAIgs3A1AgAUE0aigCACECIABBBTYCdCAAIAI2AtwBIABB+ABqIAs3AgAgAEGAAWogCjcCACAAQYgBaiACNgIACyAAEGMiAg0IDAkLQa+rwABBBxC3AQALIABB5ABqLQAAQRJGDQEgAUEgaiAAQdwAahDiASABKAIgQQFGDQUgAUHQAGpBCGogAUEgakEEciICQQhqKQIAIgo3AwAgASACKQIAIgs3A1AgAUE0aigCACECIABBBzYCdCAAIAI2AtwBIABB+ABqIAs3AgAgAEGAAWogCjcCACAAQYgBaiACNgIACyAAEDAiAg0FDAYLQa+rwABBBxC3AQALIABB5ABqLQAAQRJGDQEgAUEgaiAAQdwAahDeASABKAIgQQFGDQIgAUHQAGpBCGogAUEgakEEciICQQhqKQIAIgo3AwAgASACKQIAIgs3A1AgAUE0aigCACECIABBCjYCdCAAIAI2AtwBIABB+ABqIAs3AgAgAEGAAWogCjcCACAAQYgBaiACNgIACyAAEDgiAg0CDAMLQa+rwABBBxC3AQALIAEoAiQhAgsgABAcIABBBGogAjYCACAAQQA6AAALIAFB8ABqJAAgAAvPGAIIfwF+AkACQAJAIAFB9QFJDQBBACECIAFBzf97Tw0CIAFBC2oiAUF4cSEDIAAoAgQiBEUNAUEAIQUCQCABQQh2IgFFDQBBHyEFIANB////B0sNACADQQYgAWciAWtBH3F2QQFxIAFBAXRrQT5qIQULQQAgA2shAgJAAkACQCAAIAVBAnRqQZACaigCACIBRQ0AQQAhBiADQQBBGSAFQQF2a0EfcSAFQR9GG3QhB0EAIQgDQAJAIAEoAgRBeHEiCSADSQ0AIAkgA2siCSACTw0AIAkhAiABIQggCQ0AQQAhAiABIQgMAwsgAUEUaigCACIJIAYgCSABIAdBHXZBBHFqQRBqKAIAIgFHGyAGIAkbIQYgB0EBdCEHIAENAAsCQCAGRQ0AIAYhAQwCCyAIDQILQQAhCEECIAVBH3F0IgFBACABa3IgBHEiAUUNAyAAIAFBACABa3FoQQJ0akGQAmooAgAiAUUNAwsDQCABKAIEQXhxIgYgA08gBiADayIJIAJJcSEHAkAgASgCECIGDQAgAUEUaigCACEGCyABIAggBxshCCAJIAIgBxshAiAGIQEgBg0ACyAIRQ0CCwJAIAAoApADIgEgA0kNACACIAEgA2tPDQILIAAgCBA3AkACQCACQRBJDQAgCCADQQNyNgIEIAggA2oiASACQQFyNgIEIAEgAmogAjYCAAJAIAJBgAJJDQAgACABIAIQLQwCCyAAIAJBA3YiAkEDdGpBCGohAwJAAkAgACgCACIGQQEgAkEfcXQiAnFFDQAgAygCCCECDAELIAAgBiACcjYCACADIQILIAMgATYCCCACIAE2AgwgASADNgIMIAEgAjYCCAwBCyAIIAIgA2oiAUEDcjYCBCAIIAFqIgEgASgCBEEBcjYCBAsgCEEIag8LAkACQAJAIAAoAgAiCEEQIAFBC2pBeHEgAUELSRsiA0EDdiICQR9xIgZ2IgFBA3ENACADIAAoApADTQ0DIAENASAAKAIEIgFFDQMgACABQQAgAWtxaEECdGpBkAJqKAIAIgYoAgRBeHEgA2shAiAGIQcDQAJAIAYoAhAiAQ0AIAZBFGooAgAiAUUNBAsgASgCBEF4cSADayIGIAIgBiACSSIGGyECIAEgByAGGyEHIAEhBgwACwsgACABQX9zQQFxIAJqIgNBA3RqIgdBEGooAgAiAUEIaiECAkACQCABKAIIIgYgB0EIaiIHRg0AIAYgBzYCDCAHIAY2AggMAQsgACAIQX4gA3dxNgIACyABIANBA3QiA0EDcjYCBCABIANqIgEgASgCBEEBcjYCBAwDCwJAAkAgACABIAZ0QQIgBnQiAUEAIAFrcnEiAUEAIAFrcWgiAkEDdGoiB0EQaigCACIBKAIIIgYgB0EIaiIHRg0AIAYgBzYCDCAHIAY2AggMAQsgACAIQX4gAndxNgIACyABQQhqIQYgASADQQNyNgIEIAEgA2oiByACQQN0IgIgA2siA0EBcjYCBCABIAJqIAM2AgACQCAAKAKQAyIBRQ0AIAAgAUEDdiIIQQN0akEIaiECIAAoApgDIQECQAJAIAAoAgAiCUEBIAhBH3F0IghxRQ0AIAIoAgghCAwBCyAAIAkgCHI2AgAgAiEICyACIAE2AgggCCABNgIMIAEgAjYCDCABIAg2AggLIAAgBzYCmAMgACADNgKQAyAGDwsgACAHEDcCQAJAIAJBEEkNACAHIANBA3I2AgQgByADaiIDIAJBAXI2AgQgAyACaiACNgIAAkAgACgCkAMiAUUNACAAIAFBA3YiCEEDdGpBCGohBiAAKAKYAyEBAkACQCAAKAIAIglBASAIQR9xdCIIcUUNACAGKAIIIQgMAQsgACAJIAhyNgIAIAYhCAsgBiABNgIIIAggATYCDCABIAY2AgwgASAINgIICyAAIAM2ApgDIAAgAjYCkAMMAQsgByACIANqIgFBA3I2AgQgByABaiIBIAEoAgRBAXI2AgQLIAdBCGoPCwJAAkACQAJAAkACQCAAKAKQAyICIANPDQAgACgClAMiASADSw0DQQAhAiADQa+ABGoiBkEQdkAAIgFBf0YNBiABQRB0IghFDQYgACAAKAKgAyAGQYCAfHEiBWoiATYCoAMgACAAKAKkAyIGIAEgBiABSxs2AqQDIAAoApwDIgZFDQEgAEGoA2oiBCEBA0AgASgCACIHIAEoAgQiCWogCEYNAyABKAIIIgENAAwFCwsgACgCmAMhAQJAAkAgAiADayIGQQ9LDQAgAEEANgKYAyAAQQA2ApADIAEgAkEDcjYCBCABIAJqIgJBBGohAyACKAIEQQFyIQIMAQsgACAGNgKQAyAAIAEgA2oiBzYCmAMgByAGQQFyNgIEIAEgAmogBjYCACADQQNyIQIgAUEEaiEDCyADIAI2AgAgAUEIag8LAkACQCAAKAK8AyIBRQ0AIAEgCE0NAQsgACAINgK8AwsgAEH/HzYCwAMgACAINgKoA0EAIQEgAEG0A2pBADYCACAAQawDaiAFNgIAA0AgACABaiIGQRBqIAZBCGoiBzYCACAGQRRqIAc2AgAgAUEIaiIBQYACRw0ACyAAIAg2ApwDIAAgBUFYaiIBNgKUAyAIIAFBAXI2AgQgCCABakEoNgIEIABBgICAATYCuAMMAwsgASgCDA0BIAggBk0NASAHIAZLDQEgASAJIAVqNgIEIAAgACgCnAMiAUEPakF4cSIGQXhqNgKcAyAAIAEgBmsgACgClAMgBWoiB2pBCGoiCDYClAMgBkF8aiAIQQFyNgIAIAEgB2pBKDYCBCAAQYCAgAE2ArgDDAILIAAgASADayICNgKUAyAAIAAoApwDIgEgA2oiBjYCnAMgBiACQQFyNgIEIAEgA0EDcjYCBCABQQhqDwsgACAAKAK8AyIBIAggASAISRs2ArwDIAggBWohByAEIQECQAJAA0AgASgCACAHRg0BIAEoAggiAQ0ADAILCyABKAIMDQAgASAINgIAIAEgASgCBCAFajYCBCAIIANBA3I2AgQgCCADaiEBIAcgCGsgA2shAwJAAkACQCAAKAKcAyAHRg0AIAAoApgDIAdGDQECQCAHKAIEIgJBA3FBAUcNAAJAAkAgAkF4cSIGQYACSQ0AIAAgBxA3DAELAkAgBygCDCIJIAcoAggiBUYNACAFIAk2AgwgCSAFNgIIDAELIAAgACgCAEF+IAJBA3Z3cTYCAAsgBiADaiEDIAcgBmohBwsgByAHKAIEQX5xNgIEIAEgA0EBcjYCBCABIANqIAM2AgACQCADQYACSQ0AIAAgASADEC0MAwsgACADQQN2IgJBA3RqQQhqIQMCQAJAIAAoAgAiBkEBIAJBH3F0IgJxRQ0AIAMoAgghAgwBCyAAIAYgAnI2AgAgAyECCyADIAE2AgggAiABNgIMIAEgAzYCDCABIAI2AggMAgsgACABNgKcAyAAIAAoApQDIANqIgM2ApQDIAEgA0EBcjYCBAwBCyAAIAE2ApgDIAAgACgCkAMgA2oiAzYCkAMgASADQQFyNgIEIAEgA2ogAzYCAAsgCEEIag8LIAQhAQJAA0ACQCABKAIAIgcgBksNACAHIAEoAgRqIgcgBksNAgsgASgCCCEBDAALCyAAIAg2ApwDIAAgBUFYaiIBNgKUAyAIIAFBAXI2AgQgCCABakEoNgIEIABBgICAATYCuAMgBiAHQWBqQXhxQXhqIgEgASAGQRBqSRsiCUEbNgIEIAQpAgAhCiAJQRBqIARBCGopAgA3AgAgCSAKNwIIIABBtANqQQA2AgAgAEGsA2ogBTYCACAAIAg2AqgDIABBsANqIAlBCGo2AgAgCUEcaiEBA0AgAUEHNgIAIAcgAUEEaiIBSw0ACyAJIAZGDQAgCSAJKAIEQX5xNgIEIAYgCSAGayIBQQFyNgIEIAkgATYCAAJAIAFBgAJJDQAgACAGIAEQLQwBCyAAIAFBA3YiB0EDdGpBCGohAQJAAkAgACgCACIIQQEgB0EfcXQiB3FFDQAgASgCCCEHDAELIAAgCCAHcjYCACABIQcLIAEgBjYCCCAHIAY2AgwgBiABNgIMIAYgBzYCCAsgACgClAMiASADTQ0AIAAgASADayICNgKUAyAAIAAoApwDIgEgA2oiBjYCnAMgBiACQQFyNgIEIAEgA0EDcjYCBCABQQhqDwsgAgu7CQEJfyMAQaABayIBJAACQAJAAkACQAJAAkAgACgCdEELRw0AAkAgAEGAAWooAgAgAEH8AGooAgBJDQBBACECIABBADYCvAEgAEHkAGpBEjoAACAAEBwgAEEFOgAADAYLIAFBEGogAEH4AGoQOgJAIAEoAhAiAkEBRw0AIAEoAhQhAgwGCyABQSBqKAIAIQMgAUEcaigCACEEIAFBGGooAgAhBQJAAkACQAJAAkACQCABKAIUIgYOAwABAgALIAEgAzYClAFBACEDIAFBADYCkAEgASAENgKMASABIAU2AogBIAFB8ABqIAFBiAFqEFcgASgCcEEBRg0CIAFB+ABqKAIAIQQgASgCdCEFDAYLIAFBiAFqIAUgBCADEH4gASgCiAFBAUcNAgwGCyABIAM2AjAgASAENgIsIAEgBTYCKCABQYgBaiABQShqEHcgASgCiAFBAUYNBSABQThqQRBqIAFBiAFqQQRyIgRBEGooAgAiAzYCACABQThqQQhqIARBCGopAgA3AwAgASAEKQIANwM4IANBwIQ9Sw0CIAFBCGogA0EAEJcBIAFBADYCWCABIAEpAwg3A1ACQCADRQ0AIAFBiAFqQQRyIQQDQCABQYgBaiABQThqEEUCQAJAIAEoAogBQQFGDQAgASgCjAEhByABQYgBaiABKAKQASABKAKUASABKAKYARB+IAEoAogBQQFHDQELIAEoAowBIQIMCgsgAUHwAGpBEGogBEEQaigCADYCACABQfAAakEIaiAEQQhqKQIANwMAIAEgBCkCADcDcCABQeAAaiABQfAAakHQhgMQHSABKAJgQQFGDQggASgCaCEIIAEoAmQhCQJAIAEoAlgiBSABKAJURw0AIAFB0ABqIAVBARDEASABKAJYIQULIAEoAlAgBUEMbGoiBSAJNgIEIAUgBzYCACAFQQhqIAg2AgAgASABKAJYQQFqNgJYIANBf2oiAw0ACwsgAUGIAWpBCGogAUHQAGpBCGooAgAiAzYCACABIAEpA1A3A4gBAkAgAyABKAKMASIERg0AIAFBiAFqIAMQiAEgASgCjAEhBAsgASgCiAEhBUECIQMgAkUNBAJAIAYoAgQiAkUNACAGKAIAIAJBARCrAgsgBkEQQQQQqwIMBAsgASgCdCECDAcLIAFB8ABqQRBqIAFBiAFqQQRyIgJBEGooAgA2AgAgAUHwAGpBCGogAkEIaikCADcDACABIAIpAgA3A3AgAUE4aiABQfAAakHAhD0QHQJAIAEoAjhBAUcNACABKAI8IQIMBwsgAUE4akEIaigCACEEIAEoAjwhBUEBIQMMAgtBkKvAAEEfIAEoAkQgASgCQGpBf2oQnAEhAgwFCyABQZwBakEBNgIAIAFCAjcCjAEgAUH0pMAANgKIASABQQ82AnQgAUH4qsAANgJwIAEgAUHwAGo2ApgBIAFBiAFqQYCrwAAQzgEACyAAEBwgAEEMaiAENgAAIABBCGogBTYAACAAQQRqIAM2AAAgAEEQOgAAQQAhAgwDCyABKAKMASECDAILIAEoAmQhAgsgAUHQAGoQugEgASgCVCIARQ0AIAEoAlAgAEEMbEEEEKsCCyABQaABaiQAIAIL2AgBBn8jAEHwAGsiBCQAIAQgAzYCDCAEIAI2AghBASEFIAEhBgJAIAFBgQJJDQBBACABayEHQYACIQgDQAJAIAggAU8NACAAIAhqLAAAQb9/TA0AQQAhBSAIIQYMAgsgCEF/aiEGQQAhBSAIQQFGDQEgByAIaiEJIAYhCCAJQQFHDQALCyAEIAY2AhQgBCAANgIQIARBAEEFIAUbNgIcIARB3LHAAEGat8AAIAUbNgIYAkACQAJAAkAgAiABSyIIDQAgAyABSw0AIAIgA0sNAQJAAkAgAkUNACABIAJGDQAgASACTQ0BIAAgAmosAABBQEgNAQsgAyECCyAEIAI2AiAgAkUNAiACIAFGDQIgAUEBaiEJA0ACQCACIAFPDQAgACACaiwAAEFATg0ECyACQX9qIQggAkEBRg0EIAkgAkYhBiAIIQIgBkUNAAwECwsgBCACIAMgCBs2AiggBEEwakEUakEDNgIAIARByABqQRRqQRw2AgAgBEHUAGpBHDYCACAEQgM3AjQgBEHAt8AANgIwIARBAjYCTCAEIARByABqNgJAIAQgBEEYajYCWCAEIARBEGo2AlAgBCAEQShqNgJIIARBMGpB2LfAABDyAQALIARB5ABqQRw2AgAgBEHIAGpBFGpBHDYCACAEQdQAakECNgIAIARBMGpBFGpBBDYCACAEQgQ3AjQgBEGMuMAANgIwIARBAjYCTCAEIARByABqNgJAIAQgBEEYajYCYCAEIARBEGo2AlggBCAEQQxqNgJQIAQgBEEIajYCSCAEQTBqQay4wAAQ8gEACyACIQgLAkAgCCABRg0AQQEhBgJAAkACQAJAIAAgCGoiCSwAACICQX9KDQBBACEFIAAgAWoiBiEBAkAgCUEBaiAGRg0AIAlBAmohASAJLQABQT9xIQULIAJBH3EhCSACQf8BcUHfAUsNASAFIAlBBnRyIQEMAgsgBCACQf8BcTYCJCAEQShqIQIMAgtBACEAIAYhBwJAIAEgBkYNACABQQFqIQcgAS0AAEE/cSEACyAAIAVBBnRyIQECQCACQf8BcUHwAU8NACABIAlBDHRyIQEMAQtBACECAkAgByAGRg0AIActAABBP3EhAgsgAUEGdCAJQRJ0QYCA8ABxciACciIBQYCAxABGDQILIAQgATYCJEEBIQYgBEEoaiECIAFBgAFJDQBBAiEGIAFBgBBJDQBBA0EEIAFBgIAESRshBgsgBCAINgIoIAQgBiAIajYCLCAEQTBqQRRqQQU2AgAgBEHsAGpBHDYCACAEQeQAakEcNgIAIARByABqQRRqQR02AgAgBEHUAGpBHjYCACAEQgU3AjQgBEHwuMAANgIwIAQgAjYCWCAEQQI2AkwgBCAEQcgAajYCQCAEIARBGGo2AmggBCAEQRBqNgJgIAQgBEEkajYCUCAEIARBIGo2AkggBEEwakGYucAAEPIBAAtBvLLAAEErQfyywAAQ1gEAC6EJAgx/AX4jAEEgayIDJABBASEEAkACQCACKAIYQSIgAkEcaigCACgCEBEGAA0AAkACQCABDQBBACEFDAELIAAgAWohBkEAIQUgACEHIAAhCEEAIQkCQANAIAdBAWohCgJAAkACQCAHLAAAIgtBf0oNAAJAAkAgCiAGRw0AQQAhDCAGIQcMAQsgBy0AAUE/cSEMIAdBAmoiCiEHCyALQR9xIQQCQCALQf8BcSILQd8BSw0AIAwgBEEGdHIhDAwCCwJAAkAgByAGRw0AQQAhDSAGIQ4MAQsgBy0AAEE/cSENIAdBAWoiCiEOCyANIAxBBnRyIQwCQCALQfABTw0AIAwgBEEMdHIhDAwCCwJAAkAgDiAGRw0AQQAhCyAKIQcMAQsgDkEBaiEHIA4tAABBP3EhCwsgDEEGdCAEQRJ0QYCA8ABxciALciIMQYCAxABHDQIMBAsgC0H/AXEhDAsgCiEHC0ECIQoCQAJAAkACQAJAAkAgDEF3aiILQR5NDQAgDEHcAEcNAQwCC0H0ACEOAkACQCALDh8FAQICAAICAgICAgICAgICAgICAgICAgICAwICAgIDBQtB8gAhDgwEC0HuACEODAMLAkBB8NLAACAMEDkNACAMEGoNBAsgDEEBcmdBAnZBB3OtQoCAgIDQAIQhD0EDIQoMAQsLIAwhDgsgAyABNgIEIAMgADYCACADIAU2AgggAyAJNgIMAkACQCAJIAVJDQACQCAFRQ0AIAUgAUYNACAFIAFPDQEgACAFaiwAAEG/f0wNAQsCQCAJRQ0AIAkgAUYNACAJIAFPDQEgACAJaiwAAEG/f0wNAQsgAigCGCAAIAVqIAkgBWsgAigCHCgCDBEIAEUNAUEBIQQMBgsgAyADQQxqNgIYIAMgA0EIajYCFCADIAM2AhAgA0EQahCJAgALA0AgCiELQQEhBEHcACEFQQEhCgJAAkACQAJAAkACQCALDgQCAQUAAgsCQAJAAkACQCAPQiCIp0H/AXEOBgUDAgEABgULIA9C/////49gg0KAgICAMIQhD0EDIQpB9QAhBQwHCyAPQv////+PYINCgICAgCCEIQ9BAyEKQfsAIQUMBgsgDiAPpyILQQJ0QRxxdkEPcSIKQTByIApB1wBqIApBCkkbIQUCQCALRQ0AIA9Cf3xC/////w+DIA9CgICAgHCDhCEPDAULIA9C/////49gg0KAgICAEIQhDwwECyAPQv////+PYIMhD0EDIQpB/QAhBQwEC0EAIQogDiEFDAMLQQEhCgJAIAxBgAFJDQBBAiEKIAxBgBBJDQBBA0EEIAxBgIAESRshCgsgCiAJaiEFDAQLIA9C/////49gg0KAgICAwACEIQ8LQQMhCgsgAigCGCAFIAIoAhwoAhARBgANBQwACwsgCSAIayAHaiEJIAchCCAGIAdHDQALCyAFRQ0AIAUgAUYNACAFIAFPDQIgACAFaiwAAEG/f0wNAgtBASEEIAIoAhggACAFaiABIAVrIAIoAhwoAgwRCAANACACKAIYQSIgAigCHCgCEBEGACEECyADQSBqJAAgBA8LIAAgASAFIAEQBgALyAgBCH8jAEHAAGsiAyQAIANBJGogATYCACADQTRqIAJBFGooAgAiBDYCACADQQM6ADggA0EsaiACKAIQIgUgBEEDdGo2AgAgA0KAgICAgAQ3AwggAyAANgIgQQAhBiADQQA2AhggA0EANgIQIAMgBTYCMCADIAU2AigCQAJAAkACQAJAIAIoAggiBw0AIAIoAgAhCCACKAIEIgkgBCAEIAlLGyIKRQ0BQQEhBCAAIAgoAgAgCCgCBCABKAIMEQgADQQgCEEMaiECQQEhBgNAAkAgBSgCACADQQhqIAVBBGooAgARBgBFDQBBASEEDAYLIAYgCk8NAiACQXxqIQAgAigCACEBIAJBCGohAiAFQQhqIQVBASEEIAZBAWohBiADKAIgIAAoAgAgASADKAIkKAIMEQgARQ0ADAULCyACKAIAIQggAigCBCIJIAJBDGooAgAiBSAFIAlLGyIKRQ0AQQEhBCAAIAgoAgAgCCgCBCABKAIMEQgADQMgCEEMaiECIAdBEGohBUEBIQYDQCADIAVBeGooAgA2AgwgAyAFQRBqLQAAOgA4IAMgBUF8aigCADYCCEEAIQFBACEAAkACQAJAAkAgBUEIaigCAA4EAAECAwALIAVBDGooAgAhBEEBIQAMAgsCQCAFQQxqKAIAIgcgAygCNCIETw0AQQAhACADKAIwIAdBA3RqIgcoAgRBH0cNAiAHKAIAKAIAIQRBASEADAILQZi7wAAgByAEEKgBAAtBACEAIAMoAigiByADKAIsRg0AIAMgB0EIajYCKEEAIQAgBygCBEEfRw0AIAcoAgAoAgAhBEEBIQALIAMgBDYCFCADIAA2AhACQAJAAkACQAJAAkACQCAFKAIADgQEAQAGBAsgAygCKCIAIAMoAixHDQEMBQsgBUEEaigCACIAIAMoAjQiBE8NASADKAIwIABBA3RqIgAoAgRBH0cNBCAAKAIAKAIAIQQMAwsgAyAAQQhqNgIoIAAoAgRBH0cNAyAAKAIAKAIAIQQMAgtBmLvAACAAIAQQqAEACyAFQQRqKAIAIQQLQQEhAQsgAyAENgIcIAMgATYCGAJAAkAgBUFwaigCAEEBRg0AIAMoAigiBCADKAIsRg0EIAMgBEEIajYCKAwBCyAFQXRqKAIAIgQgAygCNCIATw0EIAMoAjAgBEEDdGohBAsCQCAEKAIAIANBCGogBEEEaigCABEGAEUNAEEBIQQMBQsgBiAKTw0BIAJBfGohACACKAIAIQEgAkEIaiECIAVBJGohBUEBIQQgBkEBaiEGIAMoAiAgACgCACABIAMoAiQoAgwRCABFDQAMBAsLAkAgCSAGTQ0AQQEhBCADKAIgIAggBkEDdGoiBSgCACAFKAIEIAMoAiQoAgwRCAANAwtBACEEDAILQbyywABBK0H8ssAAENYBAAtBiLvAACAEIAAQqAEACyADQcAAaiQAIAQL5QcCB38CfiMAQdAAayICJAAgAkHAAGogARAyIAIgAikDQCIJNwMoAkACQAJAAkACQAJAAkACQAJAAkAgCadB/wFxIgNBAUsNACADDgIBAgELIAJBKGpBBHIQ7gELIAJBwABqIAEQRiACKAJEIQQgAigCQEEBRg0BIARB6AdLDQVBACEDIAJBEGogBEEAELUBIAJBADYCICACIAIoAhQ2AhwgAiACKAIQIgU2AhgCQCAERQ0AIAJBKGpBBHIhBgNAIAJBwABqIAEQMiACIAIpA0AiCjcDKCAKp0H/AXEiB0EBRg0EIApCCIinIQgCQCADIAIoAhxHDQAgAkEYaiADQQEQyAEgAigCICEDIAIoAhghBQsgBSADaiAIOgAAIAIgA0EBaiIDNgIgAkAgB0UNACAGEO4BCyAEQX9qIgQNAAsLIAJBwABqIAEQRiACKAJEIQQgAigCQEEBRg0DAkAgBEHoB00NAEHLlsAAQSUgASgCDCABKAIIakF/ahCcASEDIABBATYCACAAIAM2AgQMBwtBACEDIAJBCGogBEEAELUBIAJBADYCMCACIAIoAgw2AiwgAiACKAIIIgU2AigCQCAERQ0AIAJBOGpBBHIhBgNAIAJBwABqIAEQMiACIAIpA0AiCjcDOCAKp0H/AXEiB0EBRg0GIApCCIinIQgCQCADIAIoAixHDQAgAkEoaiADQQEQyAEgAigCMCEDIAIoAighBQsgBSADaiAIOgAAIAIgA0EBaiIDNgIwAkAgB0UNACAGEO4BCyAEQX9qIgQNAAsLIAlCCIghCiACQcAAakEIaiIEIAJBGGpBCGooAgAiAzYCACACIAIpAxg3A0ACQCADIAIoAkQiAUYNACACQcAAaiADEJMBIAIoAkQhAQsgCqchByACKAJAIQggBCACQShqQQhqKAIAIgM2AgAgAiACKQMoNwNAAkAgAyACKAJEIgRGDQAgAkHAAGogAxCTASACKAJEIQQLIAIoAkAhAyAAQRRqIAc6AAAgAEEQaiAENgIAIABBDGogAzYCACAAQQhqIAE2AgAgACAINgIEIABBADYCAAwHCyAAQQE2AgAgACAJQiCIPgIEDAYLIABBATYCACAAIAQ2AgQMBQsgAEEBNgIAIAAgCkIgiD4CBAwDCyAAQQE2AgAgACAENgIEDAILIABBATYCACAAIApCIIg+AgQgAigCLCIDRQ0BIAIoAiggA0EBEKsCDAELQaeWwABBJCABKAIMIAEoAghqQX9qEJwBIQMgAEEBNgIAIAAgAzYCBAwBCyACKAIcIgNFDQAgAigCGCADQQEQqwILIAJB0ABqJAALswcCC38BfiMAQRBrIgIkACACQQhqIAEQRiACKAIMIQMCQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAigCCEEBRg0AAkACQAJAIANBB0sNACADQQJxIQQgA0EBcUUNAQwCC0G1kcAAQSUgASgCDCABKAIIakF/ahCcASEBIABBATYCACAAIAE2AgQMCwtBACEFAkAgBEUNACACQQhqIAEQRiACKAIMIQUgAigCCEEBRg0DCyABKAIIIQQCQCABEKUBIgZFDQAgAEEBNgIAIAAgBjYCBAwLCyABKAIIIgYgBEkNBiABKAIEIgcgBkkNByABKAIAIARqIQggBiAEayEJIAEoAgwgBGohCkEBIQQLIANBBHEhBgJAAkAgA0EDcQ0AQQUhCwwBCwJAAkAgBg0AIAJBCGogARBiIAIgAikDCCINNwMAIA2nIgNB/wFxQQFHDQEgAEEBNgIAIAAgDUIgiD4CBAwMCyACQQhqIAEQMiACIAIpAwgiDTcDACANQgiIpyELAkAgDadB/wFxIgNBAUsNACADDgICBQILIAJBBHIQ7QEMAQsgDUKA/gODQgBSDQRBBSELIANB/wFxRQ0AIAJBBHIQ7QELIAEoAgghDCACQQhqIAEQRiACKAIMIQMgAigCCEEBRg0EIAYNByADRQ0IA0ACQCABEKEBIgdFDQAgAEEBNgIAIAAgBzYCBAwLCyADQX9qIgMNAAwJCwsgAEEBNgIAIAAgAzYCBAwICyAAQQE2AgAgACAFNgIEDAcLIABBATYCACAAIA1CIIg+AgQMBgtB2pHAAEE8IAEoAgwgASgCCGpBf2oQnAEhASAAQQE2AgAgACABNgIEIANB/wFxRQ0FIAJBBHIQ7QEMBQsgAEEBNgIAIAAgAzYCBAwECyAEIAYQqgEACyAGIAcQqQEACyADRQ0AA0ACQCABEKUBIgdFDQAgAEEBNgIAIAAgBzYCBAwDCyADQX9qIgMNAAsLIAEoAggiAyAMSQ0BIAEoAgQiByADSQ0CIAEoAgwhByABKAIAIQEgACAENgIEIAAgAi8ACDsAJSAAQQA2AgAgAEEkaiAGQQJ2OgAAIABBIGogAyAMazYCACAAQRxqIAEgDGo2AgAgAEEYaiAHIAxqNgIAIABBFGogCTYCACAAQRBqIAg2AgAgAEEMaiAKNgIAIABBCGogBTYCACAAQShqIAs6AAAgAEEnaiACQQhqQQJqLQAAOgAACyACQRBqJAAPCyAMIAMQqgEACyADIAcQqQEAC6QHAQZ/AkACQAJAIAJFDQBBACABa0EAIAFBA3EbIQMgAkF5akEAIAJBB0sbIQRBACEFA0ACQAJAAkACQAJAIAEgBWotAAAiBkEYdEEYdSIHQX9KDQACQAJAAkACQCAGQZq1wABqLQAAQX5qIghBAksNACAIDgMBAgMBCyAAQYECOwEEIAAgBTYCAA8LAkAgBUEBaiIGIAJJDQAgAEEAOgAEIAAgBTYCAA8LIAEgBmotAABBwAFxQYABRg0DIABBgQI7AQQgACAFNgIADwsCQCAFQQFqIgggAkkNACAAQQA6AAQgACAFNgIADwsgASAIai0AACEIAkACQCAGQaB+aiIGQQ1LDQACQAJAIAYODgACAgICAgICAgICAgIBAAsgCEHgAXFBoAFHDQwMAgsgCEEYdEEYdUF/Sg0LIAhB/wFxQaABSQ0BDAsLAkAgB0EfakH/AXFBC0sNACAIQRh0QRh1QX9KDQsgCEH/AXFBwAFPDQsMAQsgCEH/AXFBvwFLDQogB0H+AXFB7gFHDQogCEEYdEEYdUF/Sg0KCwJAIAVBAmoiBiACSQ0AIABBADoABCAAIAU2AgAPCyABIAZqLQAAQcABcUGAAUYNAiAAQYEEOwEEIAAgBTYCAA8LAkAgBUEBaiIIIAJJDQAgAEEAOgAEIAAgBTYCAA8LIAEgCGotAAAhCAJAAkAgBkGQfmoiBkEESw0AAkACQCAGDgUAAgICAQALIAhB8ABqQf8BcUEwTw0KDAILIAhBGHRBGHVBf0oNCSAIQf8BcUGQAUkNAQwJCyAIQf8BcUG/AUsNCCAHQQ9qQf8BcUECSw0IIAhBGHRBGHVBf0oNCAsCQCAFQQJqIgYgAkkNACAAQQA6AAQgACAFNgIADwsgASAGai0AAEHAAXFBgAFHDQICQCAFQQNqIgYgAkkNACAAQQA6AAQgACAFNgIADwsgASAGai0AAEHAAXFBgAFGDQEgAEGBBjsBBCAAIAU2AgAPCyADIAVrQQNxDQICQCAFIARPDQADQCABIAVqIgZBBGooAgAgBigCAHJBgIGChHhxDQEgBUEIaiIFIARJDQALCyAFIAJPDQMDQCABIAVqLAAAQQBIDQQgAiAFQQFqIgVHDQAMBgsLIAZBAWohBQwCCyAAQYEEOwEEIAAgBTYCAA8LIAVBAWohBQsgBSACSQ0ACwsgAEECOgAEDwsgAEGBAjsBBCAAIAU2AgAPCyAAQYECOwEEIAAgBTYCAAuFBwEMfyAAKAIQIQMCQAJAAkACQCAAKAIIIgRBAUYNACADDQEgACgCGCABIAIgAEEcaigCACgCDBEIACEDDAMLIANFDQELAkACQCACDQBBACECDAELIAEgAmohBSAAQRRqKAIAQQFqIQZBACEHIAEhAyABIQgDQCADQQFqIQkCQAJAAkAgAywAACIKQX9KDQACQAJAIAkgBUcNAEEAIQsgBSEDDAELIAMtAAFBP3EhCyADQQJqIgkhAwsgCkEfcSEMAkAgCkH/AXEiCkHfAUsNACALIAxBBnRyIQoMAgsCQAJAIAMgBUcNAEEAIQ0gBSEODAELIAMtAABBP3EhDSADQQFqIgkhDgsgDSALQQZ0ciELAkAgCkHwAU8NACALIAxBDHRyIQoMAgsCQAJAIA4gBUcNAEEAIQogCSEDDAELIA5BAWohAyAOLQAAQT9xIQoLIAtBBnQgDEESdEGAgPAAcXIgCnIiCkGAgMQARw0CDAQLIApB/wFxIQoLIAkhAwsCQCAGQX9qIgZFDQAgByAIayADaiEHIAMhCCAFIANHDQEMAgsLIApBgIDEAEYNAAJAAkAgB0UNACAHIAJGDQBBACEDIAcgAk8NASABIAdqLAAAQUBIDQELIAEhAwsgByACIAMbIQIgAyABIAMbIQELIAQNACAAKAIYIAEgAiAAQRxqKAIAKAIMEQgADwtBACEJAkAgAkUNACACIQogASEDA0AgCSADLQAAQcABcUGAAUZqIQkgA0EBaiEDIApBf2oiCg0ACwsCQCACIAlrIAAoAgwiBkkNACAAKAIYIAEgAiAAQRxqKAIAKAIMEQgADwtBACEHQQAhCQJAIAJFDQBBACEJIAIhCiABIQMDQCAJIAMtAABBwAFxQYABRmohCSADQQFqIQMgCkF/aiIKDQALCyAJIAJrIAZqIgkhCgJAAkACQEEAIAAtADAiAyADQQNGGw4EAgEAAQILIAlBAXYhByAJQQFqQQF2IQoMAQtBACEKIAkhBwsgB0EBaiEDAkADQCADQX9qIgNFDQEgACgCGCAAKAIEIAAoAhwoAhARBgBFDQALQQEPCyAAKAIEIQlBASEDIAAoAhggASACIAAoAhwoAgwRCAANACAKQQFqIQMgACgCHCEKIAAoAhghAANAAkAgA0F/aiIDDQBBAA8LIAAgCSAKKAIQEQYARQ0AC0EBDwsgAwuOBwEFfyABQXhqIgIgAUF8aigCACIDQXhxIgFqIQQCQAJAAkACQCADQQFxDQAgA0EDcUUNASACKAIAIgMgAWohAQJAIAAoApgDIAIgA2siAkcNACAEKAIEQQNxQQNHDQEgACABNgKQAyAEIAQoAgRBfnE2AgQgAiABQQFyNgIEIAIgAWogATYCAA8LAkAgA0GAAkkNACAAIAIQNwwBCwJAIAIoAgwiBSACKAIIIgZGDQAgBiAFNgIMIAUgBjYCCAwBCyAAIAAoAgBBfiADQQN2d3E2AgALAkACQCAEKAIEIgNBAnFFDQAgBCADQX5xNgIEIAIgAUEBcjYCBCACIAFqIAE2AgAMAQsCQAJAIAAoApwDIARGDQAgACgCmAMgBEcNASAAIAI2ApgDIAAgACgCkAMgAWoiATYCkAMgAiABQQFyNgIEIAIgAWogATYCAA8LIAAgAjYCnAMgACAAKAKUAyABaiIBNgKUAyACIAFBAXI2AgQCQCACIAAoApgDRw0AIABBADYCkAMgAEEANgKYAwsgACgCuAMiAyABTw0CIAAoApwDIgFFDQICQCAAKAKUAyIFQSlJDQAgAEGoA2ohAgNAAkAgAigCACIEIAFLDQAgBCACKAIEaiABSw0CCyACKAIIIgINAAsLAkACQCAAQbADaigCACIBDQBB/x8hAgwBC0EAIQIDQCACQQFqIQIgASgCCCIBDQALIAJB/x8gAkH/H0sbIQILIAAgAjYCwAMgBSADTQ0CIABBfzYCuAMPCyADQXhxIgUgAWohAQJAAkAgBUGAAkkNACAAIAQQNwwBCwJAIAQoAgwiBSAEKAIIIgRGDQAgBCAFNgIMIAUgBDYCCAwBCyAAIAAoAgBBfiADQQN2d3E2AgALIAIgAUEBcjYCBCACIAFqIAE2AgAgAiAAKAKYA0cNACAAIAE2ApADDAELIAFBgAJJDQEgACACIAEQLSAAIAAoAsADQX9qIgI2AsADIAINACAAQbADaigCACIBDQIgAEH/HzYCwAMPCw8LIAAgAUEDdiIEQQN0akEIaiEBAkACQCAAKAIAIgNBASAEQR9xdCIEcUUNACABKAIIIQAMAQsgACADIARyNgIAIAEhAAsgASACNgIIIAAgAjYCDCACIAE2AgwgAiAANgIIDwtBACECA0AgAkEBaiECIAEoAggiAQ0ACyAAIAJB/x8gAkH/H0sbNgLAAwvhBQEIf0EAIQMCQCACQcz/e0sNAEEQIAJBC2pBeHEgAkELSRshBCABQXxqIgUoAgAiBkF4cSEHAkACQAJAAkACQAJAAkAgBkEDcUUNACABQXhqIgggB2ohCSAHIARPDQEgACgCnAMgCUYNAiAAKAKYAyAJRg0DIAkoAgQiBkECcQ0GIAZBeHEiCiAHaiIHIARPDQQMBgsgBEGAAkkNBSAHIARBBHJJDQUgByAEa0GBgAhPDQUMBAsgByAEayICQRBJDQMgBSAEIAZBAXFyQQJyNgIAIAggBGoiAyACQQNyNgIEIAkgCSgCBEEBcjYCBCAAIAMgAhARDAMLIAAoApQDIAdqIgcgBE0NAyAFIAQgBkEBcXJBAnI2AgAgCCAEaiICIAcgBGsiA0EBcjYCBCAAIAM2ApQDIAAgAjYCnAMMAgsgACgCkAMgB2oiByAESQ0CAkACQCAHIARrIgJBD0sNACAFIAZBAXEgB3JBAnI2AgAgCCAHaiICIAIoAgRBAXI2AgRBACECQQAhAwwBCyAFIAQgBkEBcXJBAnI2AgAgCCAEaiIDIAJBAXI2AgQgCCAHaiIEIAI2AgAgBCAEKAIEQX5xNgIECyAAIAM2ApgDIAAgAjYCkAMMAQsgByAEayECAkACQCAKQYACSQ0AIAAgCRA3DAELAkAgCSgCDCIDIAkoAggiCUYNACAJIAM2AgwgAyAJNgIIDAELIAAgACgCAEF+IAZBA3Z3cTYCAAsCQCACQRBJDQAgBSAEIAUoAgBBAXFyQQJyNgIAIAggBGoiAyACQQNyNgIEIAggB2oiBCAEKAIEQQFyNgIEIAAgAyACEBEMAQsgBSAHIAUoAgBBAXFyQQJyNgIAIAggB2oiAiACKAIEQQFyNgIECyABIQMMAQsgACACEAQiBEUNACAEIAEgAiAFKAIAIgNBeHFBBEEIIANBA3EbayIDIAMgAksbENcBIQIgACABEA0gAg8LIAML6AUBBX8CQAJAIAFFDQBBK0GAgMQAIAAoAgAiBkEBcSIBGyEHIAEgBWohCAwBCyAFQQFqIQggACgCACEGQS0hBwsCQAJAIAZBBHENAEEAIQIMAQtBACEJAkAgA0UNACADIQogAiEBA0AgCSABLQAAQcABcUGAAUZqIQkgAUEBaiEBIApBf2oiCg0ACwsgCCADaiAJayEIC0EBIQECQAJAIAAoAghBAUYNACAAIAcgAiADEMwBDQEgACgCGCAEIAUgAEEcaigCACgCDBEIAA8LAkAgAEEMaigCACIJIAhLDQAgACAHIAIgAxDMAQ0BIAAoAhggBCAFIABBHGooAgAoAgwRCAAPCwJAAkAgBkEIcQ0AQQAhASAJIAhrIgkhCAJAAkACQEEBIAAtADAiCiAKQQNGGw4EAgEAAQILIAlBAXYhASAJQQFqQQF2IQgMAQtBACEIIAkhAQsgAUEBaiEBA0AgAUF/aiIBRQ0CIAAoAhggACgCBCAAKAIcKAIQEQYARQ0AC0EBDwtBASEBIABBAToAMCAAQTA2AgQgACAHIAIgAxDMAQ0BQQAhASAJIAhrIgohAwJAAkACQEEBIAAtADAiCSAJQQNGGw4EAgEAAQILIApBAXYhASAKQQFqQQF2IQMMAQtBACEDIAohAQsgAUEBaiEBAkADQCABQX9qIgFFDQEgACgCGCAAKAIEIAAoAhwoAhARBgBFDQALQQEPCyAAKAIEIQpBASEBIAAoAhggBCAFIAAoAhwoAgwRCAANASADQQFqIQkgACgCHCEDIAAoAhghAANAAkAgCUF/aiIJDQBBAA8LQQEhASAAIAogAygCEBEGAEUNAAwCCwsgACgCBCEKQQEhASAAIAcgAiADEMwBDQAgACgCGCAEIAUgACgCHCgCDBEIAA0AIAhBAWohCSAAKAIcIQMgACgCGCEAA0ACQCAJQX9qIgkNAEEADwtBASEBIAAgCiADKAIQEQYARQ0ACwsgAQujBQIIfwF+IwBBMGsiAiQAIAJBEGogARBXIAIoAhQhAwJAAkACQAJAAkACQAJAAkAgAigCEEEBRg0AIAJBGGoiBCgCACEFIAJBEGogARBXIAIoAhQhBiACKAIQQQFGDQEgBCgCACEHIAJBEGogARBiIAIgAikDECIKNwMAAkACQCAKp0H/AXEiBEEBSw0AIAQOAgEEAQsgAkEEchDwAQsCQAJAAkACQAJAAkACQCAKQgiIp0H/AXEOBAECAwABCyACQRBqIAEQXCACIAIpAxAiCjcDKCAKp0H/AXEiAUEBSw0DIAEOAgQMBAsgAkEQaiABEEYgAigCFCEBIAIoAhBBAUYNCEEAIQQMBAsgAkEQaiABEDNBASEEIAIoAhQhASACKAIQQQFGDQggAkEIaiACQSBqKAIANgIAIAIgAkEQakEIaikDADcDAAwDCyACQRBqIAEQTSACKAIUIQEgAigCEEEBRg0IIAJBCGogAkEgaigCADYCACACIAJBEGpBCGopAwA3AwBBAiEEDAILIAJBKGpBBHIQ8AELIApCEIinIQggCkIIiKchCUEDIQQLIAAgAzYCBCAAQQA2AgAgAEEYaiABNgIAIABBFmogCDoAACAAQRVqIAk6AAAgAEEUaiAEOgAAIABBEGogBzYCACAAQQxqIAY2AgAgAEEIaiAFNgIAIABBHGogAikDADcCACAAQSRqIAJBCGooAgA2AgAMBwsgAEEBNgIAIAAgAzYCBAwGCyAAQQE2AgAgACAGNgIEDAULIABBATYCACAAIApCIIg+AgQMBAsgAEEBNgIAIAAgATYCBAwDCyAAQQE2AgAgACABNgIEDAILIABBATYCACAAIAE2AgQMAQsgAEEBNgIAIAAgCkIgiD4CBAsgAkEwaiQAC/MEAQR/IAEgAmohAwJAAkACQCABKAIEIgRBAXENACAEQQNxRQ0BIAEoAgAiBCACaiECAkAgACgCmAMgASAEayIBRw0AIAMoAgRBA3FBA0cNASAAIAI2ApADIAMgAygCBEF+cTYCBCABIAJBAXI2AgQgAyACNgIADwsCQCAEQYACSQ0AIAAgARA3DAELAkAgASgCDCIFIAEoAggiBkYNACAGIAU2AgwgBSAGNgIIDAELIAAgACgCAEF+IARBA3Z3cTYCAAsCQCADKAIEIgRBAnFFDQAgAyAEQX5xNgIEIAEgAkEBcjYCBCABIAJqIAI2AgAMAgsCQAJAIAAoApwDIANGDQAgACgCmAMgA0cNASAAIAE2ApgDIAAgACgCkAMgAmoiAjYCkAMgASACQQFyNgIEIAEgAmogAjYCAA8LIAAgATYCnAMgACAAKAKUAyACaiICNgKUAyABIAJBAXI2AgQgASAAKAKYA0cNASAAQQA2ApADIABBADYCmAMPCyAEQXhxIgUgAmohAgJAAkAgBUGAAkkNACAAIAMQNwwBCwJAIAMoAgwiBSADKAIIIgNGDQAgAyAFNgIMIAUgAzYCCAwBCyAAIAAoAgBBfiAEQQN2d3E2AgALIAEgAkEBcjYCBCABIAJqIAI2AgAgASAAKAKYA0cNASAAIAI2ApADCw8LAkAgAkGAAkkNACAAIAEgAhAtDwsgACACQQN2IgNBA3RqQQhqIQICQAJAIAAoAgAiBEEBIANBH3F0IgNxRQ0AIAIoAgghAAwBCyAAIAQgA3I2AgAgAiEACyACIAE2AgggACABNgIMIAEgAjYCDCABIAA2AggLpwUBAX8CQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAAoAnRBf2oiAUEMSw0AIAEODQECAwQFBgcICQoACwwBC0GcrMAAQShB1KzAABD0AQALIABBgAFqKAIAIgEgAEH8AGooAgBPDQtBp6/AAEEpIABBhAFqKAIAIAFqEJwBDwsgAEGAAWooAgAiASAAQfwAaigCAE8NCkHOkMAAQSkgAEGEAWooAgAgAWoQnAEPCyAAQYABaigCACIBIABB/ABqKAIATw0JQZaSwABBKSAAQYQBaigCACABahCcAQ8LIABBgAFqKAIAIgEgAEH8AGooAgBPDQhB9I7AAEEpIABBhAFqKAIAIAFqEJwBDwsgAEGAAWooAgAiASAAQfwAaigCAE8NB0HMrsAAQSkgAEGEAWooAgAgAWoQnAEPCyAAQYABaigCACIBIABB/ABqKAIATw0GQc6QwABBKSAAQYQBaigCACABahCcAQ8LIABBgAFqKAIAIgEgAEH8AGooAgBPDQVBzK7AAEEpIABBhAFqKAIAIAFqEJwBDwsgAEGAAWooAgAiASAAQfwAaigCAE8NBEHMrsAAQSkgAEGEAWooAgAgAWoQnAEPCyAAQYABaigCACIBIABB/ABqKAIATw0DQcyuwABBKSAAQYQBaigCACABahCcAQ8LIABBgAFqKAIAIgEgAEH8AGooAgBPDQJBzK7AAEEpIABBhAFqKAIAIAFqEJwBDwsgAEGAAWooAgAiASAAQfwAaigCAE8NAUG8lMAAQSkgAEGEAWooAgAgAWoQnAEPCyAAQYABaigCACIBIABB/ABqKAIATw0AQbyUwABBKSAAQYQBaigCACABahCcAQ8LIABBADYCvAEgAEHkAGpBEjoAACAAEBwgAEEFOgAAQQALlwUBBn8jAEGgAWsiAiQAIAJBOGogARCXAiACKAI4IQMgAkEwaiACKAI8IgRBABC0ASACQQA2ApABIAIgAikDMDcDiAEgAkGIAWogAyAEEKcCIAJByABqIAIoApABNgIAIAIgAikDiAE3A0AgAkEoaiABEJcCAkACQAJAAkACQAJAIAIoAixFDQAgAigCKCIDLQAAQeAARw0DIAJBGGogARCXAiACKAIcIgNFDQEgAkGIAWogAigCGEEBaiADQX9qEEQgAigCiAFBAUYNAiACQRBqIAJBiAFqQQhqKAIAQQFqIgMgAyACKAKMAWoQpQICQCACKAIQIgMgAigCFCIFTw0AA0AgA0EBEMkCaiIEIANJDQEgAkEIaiABEJcCIAIoAgwiBiADTQ0GIAIoAgggA2otAAAhBiACIAJBwABqEJkCIAIoAgQiByADTQ0HIAIoAgAgA2pB/wAgBiAGQf8BcUH+AEYbOgAAIAQhAyAEIAVJDQALCyAAIAIpA0A3AgAgAEEIaiACQcAAakEIaigCADYCACACQaABaiQADwtB4IfAAEEAQQAQqAEAC0EBQQAQqgEACyACIAIpAowBNwNoQd2GwABBKyACQegAakGIh8AAEJQBAAsgAiADNgKAASACQYCIwAA2AoQBIAJCBDcDmAEgAkIBNwKMASACQfyIwAA2AogBIAJBIGogAkGIAWpBBhCkAiACQfQAakEBNgIAIAJB5ABqQQM2AgAgAkEBNgJsIAJCAzcCVCACQcCIwAA2AlAgAiACKQMgNwN4IAIgAkGEAWo2AnAgAiACQYABajYCaCACIAJB6ABqNgJgIAJB0ABqQZCJwAAQzgEAC0Hgh8AAIAMgBhCoAQALQfCHwAAgAyAHEKgBAAuIBQEBfyMAQRBrIgQkAAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCACQQxLDQAgAg4NDQECAwQFBgcICQoLDA0LQZSXwABBFCADEJwBIQIgAEEBNgIAIAAgAjYCBAwNCyAAQQA2AgAgAEEMakEGOgAADAwLIABBADYCACAAQQxqQQc6AAAMCwsgAEEANgIAIABBDGpBCDoAAAwKCyAAQQA2AgAgAEEMakEJOgAADAkLIABBADYCACAAQQxqQQo6AAAMCAsgAEEANgIAIABBDGpBCzoAAAwHCyAAQQA2AgAgAEEMakEMOgAADAYLIABBADYCACAAQQxqQQ06AAAMBQsgAEEANgIAIABBDGpBDjoAAAwECyAAQQA2AgAgAEEMakEPOgAADAMLIABBADYCACAAQQxqQRA6AAAMAgsgAEEANgIAIABBDGpBEToAAAwBCyAEIAEQVwJAIAQoAgBBAUcNACAAIAQoAgQ2AgQgAEEBNgIADAELIAQoAgQhAgJAAkACQAJAAkAgBEEIaigCACIBQRBGDQACQCABQQlGDQAgAUEERw0CQQEhAyACQaiXwABGDQUgAigAAEHuwrWrBkYNBQwEC0ECIQMgAkGsl8AARg0EIAJBrJfAAEEJEMsBDQIMBAtBAyEDIAJBtZfAAEYNAyACQbWXwABBEBDLAQ0BDAMLIAFBBkkNAQtBBCEDIAJBxZfAAEYNAUHFl8AAIAJBBhDLAUUNASABQQdHDQACQCACQcuXwABGDQBBACEDIAJBy5fAAEEHEMsBDQILQQUhAwwBC0EAIQMLIAAgAjYCBCAAQQA2AgAgAEEMaiADOgAAIABBCGogATYCAAsgBEEQaiQAC7QEAQd/IwBBEGsiAyQAQQAhBCADQQA2AgggA0IBNwMAIANBARCuAiADELkCIAMoAghqQQA6AAAgAyADKAIIQQFqIgU2AggCQCABKAIEIgZFDQAgASgCACEHA0ACQCAFIAMoAgRHDQAgA0EBEK4CCyAHIARqIQggAxC5AiADKAIIakEgOgAAIAMgAygCCEEBaiIFNgIIAkAgBSADKAIERw0AIANBARCuAgsgBEEBaiEJIAMQuQIgAygCCGogBDoAACADIAMoAghBAWoiBTYCCAJAIAgtAABBAUcNAAJAIAUgAygCBEcNACADQQEQrgILIAMQuQIgAygCCGpBpwE6AAAgAyADKAIIQQFqIgU2AggLIAkhBCAGIAlHDQALCxDUAgJAIAFBDGooAgBBAUcNACABKAIILQAAQQFHDQACQCADKAIIIAMoAgRHDQAgA0EBEK4CCyADELkCIAMoAghqQacBOgAAIAMgAygCCEEBajYCCAsCQCADKAIIIAMoAgRHDQAgA0EBEK4CCyADELkCIAMoAghqQRA6AAAgAyADKAIIQQFqIgQ2AggCQCAEIAMoAgRHDQAgA0EBEK4CCyADELkCIAMoAghqIAI6AAAgAyADKAIIQQFqIgQ2AggCQCAEIAMoAgRHDQAgA0EBEK4CCyADELkCIAMoAghqQQs6AAAgAyADKAIIQQFqIgQ2AgggA0EAIAQQswEgAEEIaiADKAIINgIAIAAgAykDADcCACADQRBqJAALmAQCB38BfiMAQdAAayIBJAAgAEGkAWoiAi0AACEDIAJBAjoAAAJAAkACQCADQQJGDQAgAUEgaiAAQZwBaigCACAAQaABaigCACAAKAKYASADQQBHEG0CQCABKAIgQQFHDQAgASgCJCEDDAMLIAFBCGpBEGogAUEgakEEciIDQRBqKQIAIgg3AwAgAUEIakEIaiADQQhqKQIANwMAIAEgAykCADcDCCAIpyICQYCt4gRNDQFBvajAAEEdQQAQnAEhAwwCC0GwqMAAQQ0QtwEAC0EAIQMgASACQQAQmQEgAUEANgJIIAEgASgCBDYCRCABIAEoAgAiBDYCQAJAIAJFDQADQCABQSBqIAFBCGoQNgJAIAEoAiBBAUcNACABKAIkIQMgASgCRCICRQ0DIAEoAkAgAkEDdEEEEKsCDAMLIAEoAighBSABKAIkIQYCQCADIAEoAkRHDQAgAUHAAGogA0EBEMcBIAEoAkghAyABKAJAIQQLIAQgA0EDdGoiByAFNgIEIAcgBjYCACABIANBAWoiAzYCSCACQX9qIgINAAsLIAFBIGpBCGogAUHAAGpBCGooAgAiAzYCACABIAEpA0A3AyACQCADIAEoAiQiAkYNACABQSBqIAMQhwEgASgCJCECCyABKAIgIQMgABAcIABBCGogAjYCACAAQQRqIAM2AgAgAEEcOgAAQQAhAwsgAUHQAGokACADC+sDAgZ/AX4jAEEwayICJAAgAUEgaiIDLQAAIQQgA0ESOgAAIAJBDGpBAmoiAyABQSNqLQAAOgAAIAIgAUEhai8AADsBDAJAAkACQAJAIARBEkcNACACQRBqIAEQUSACKAIQQQFHDQEgACACKAIUNgIEIABBATYCAAwDCyABQRhqKQIAIQggAkEIakECaiADLQAAOgAAIAIgAi8BDDsBCCABQSRqKAAAIQMgAUEoaigAACEFDAELIAJBCmogAkEfai0AADoAACACIAIvAB07AQggAkEcai0AACEEIAJBIGooAgAhAyACQSRqKAIAIQUgAikCFCEICyACQQRqQQJqIAJBCGpBAmotAAA6AAAgAiACLwEIOwEEAkAgASADIAVqIgMQ1QEiBUUNACAAQQE2AgAgACAFNgIEDAELAkAgAyABKAIIIgVJDQAgASgCBCADSQ0AIAEgAzYCCCACQRBqQQJqIAJBBGpBAmotAAAiBjoAACACIAIvAQQiBzsBECABKAIAIQEgAEEMaiAEOgAAIAAgCDcCBCAAIAc7AA0gAEEPaiAGOgAAIABBGGogAyAFazYCACAAQRRqIAEgBWo2AgAgAEEQaiAFNgIAIABBADYCAAwBC0HImMAAQTZBuJjAABD0AQALIAJBMGokAAu3BAIEfwF+QQEhAgJAIAEoAhhBJyABQRxqKAIAKAIQEQYADQBBAiEDAkACQAJAAkACQCAAKAIAIgBBd2oiBEEeTQ0AIABB3ABHDQEMAgtB9AAhBQJAAkAgBA4fBQECAgACAgICAgICAgICAgICAgICAgICAgMCAgICAwULQfIAIQUMBAtB7gAhBQwDCwJAAkACQEHw0sAAIAAQOQ0AIAAQakUNAUEBIQMMBAsgAEEBcmdBAnZBB3OtQoCAgIDQAIQhBgwBCyAAQQFyZ0ECdkEHc61CgICAgNAAhCEGC0EDIQMMAQsLIAAhBQsDQCADIQRB3AAhAEEBIQJBASEDAkACQAJAAkAgBA4EAQIDAAELAkACQAJAAkACQCAGQiCIp0H/AXEOBgUEAwIBAAULIAZC/////49gg0KAgICAwACEIQZBAyEDDAYLIAZC/////49gg0KAgICAMIQhBkH1ACEAQQMhAwwFCyAGQv////+PYINCgICAgCCEIQZB+wAhAEEDIQMMBAsgBSAGpyIEQQJ0QRxxdkEPcSIDQTByIANB1wBqIANBCkkbIQACQCAERQ0AIAZCf3xC/////w+DIAZCgICAgHCDhCEGQQMhAwwECyAGQv////+PYINCgICAgBCEIQZBAyEDDAMLIAZC/////49ggyEGQf0AIQBBAyEDDAILIAEoAhhBJyABKAIcKAIQEQYADwtBACEDIAUhAAsgASgCGCAAIAEoAhwoAhARBgBFDQALCyACC9kDAQF/QQAhAQJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAC0AAEEBRg0AAkAgACgCvAENACAAKALMAQ0CIAAoAnRBf2oiAUEMSw0DIAEODQQFBgcICQoLDA0ODxAECyAAQcQBaigCACAAQcgBaigCAGohAQsgAQ8LIABB1AFqKAIAIABB2AFqKAIAag8LIABB0ABqLQAAIgFBE0YNDSAAQThqIABBxABqIAFBEkYbKAIADwsgAEGAAWooAgAgAEGEAWooAgBqDwsgAEGAAWooAgAgAEGEAWooAgBqDwsgAEGAAWooAgAgAEGEAWooAgBqDwsgAEGAAWooAgAgAEGEAWooAgBqDwsgAEGAAWooAgAgAEGEAWooAgBqDwsgAEGAAWooAgAgAEGEAWooAgBqDwsgAEGAAWooAgAgAEGEAWooAgBqDwsgAEGAAWooAgAgAEGEAWooAgBqDwsgAEGAAWooAgAgAEGEAWooAgBqDwsgAEGAAWooAgAgAEGEAWooAgBqDwsgAEGAAWooAgAgAEGEAWooAgBqDwsgAEGAAWooAgAgAEGEAWooAgBqDwsgAEGAAWooAgAgAEGEAWooAgBqDwtBx6TAAEENELcBAAvQAwEJfyMAQRBrIgIkACACQQhqIAEQRkEBIQMgAigCDCEEAkACQAJAAkACQAJAIAIoAghBAUYNAAJAAkACQAJAIARBAksNAEEAIQUgBA4DAgMBAgsgAEGskMAAQSIgASgCDCABKAIIakF/ahCcATYCBEEBIQMMCAsgAkEIaiABEEZBASEDIAIoAgwhBCACKAIIQQFGDQILIAEoAgghAwJAIAEQpQEiBUUNACAAIAU2AgRBASEDDAcLIAEoAggiBiADSQ0DIAEoAgQiBSAGSQ0EIAEoAgAgA2ohBSAGIANrIQYgASgCDCADaiEHCyACQQhqIAEQRkEBIQMgAigCDCEIIAIoAghBAUYNAQJAIAEoAgQiCSABKAIIIgMgCGoiCk8NACAAQfuPwABBMSABKAIMIAlqEJwBNgIEQQEhAwwGCyAKIANJDQQgASAKNgIIIAAgBDYCBCAAQRhqIAg2AgAgAEEQaiAGNgIAIABBDGogBTYCACAAQQhqIAc2AgAgAEEUaiABKAIAIANqNgIAQQAhAwwFCyAAIAQ2AgQMBAsgACAINgIEDAMLIAMgBhCqAQALIAYgBRCpAQALIAMgChCqAQALIAAgAzYCACACQRBqJAALugMCBH8BfiMAQeAAayIEJAAgBCADNgIsAkACQAJAAkACQCABKAIMIANLDQAgBEHIAGogAhBdIAEoAhAhAyAEKAIsIQUgBEEgaiABEJcCIAQoAiQiBiADIAVqIgNJDQEgBEEwaiAEKAIgIANqIAYgA2sQRCAEKAIwQQFGDQIgBEE4aigCACEDIAQoAjQhBSABKAIQIQYgBCgCLCEHIARBGGogARCXAiADIAYgB2oiAWoiBiABSQ0DIAQoAhwiByAGSQ0EIAQoAhghBiAAIAI2AgwgACAFNgIAIAAgBCkDSDcCECAAQQhqIAM2AgAgACAGIAFqNgIEIABBGGogBEHIAGpBCGooAgA2AgAgBEHgAGokAA8LIARBEGogBEEsakECEKMCIAQpAxAhCCAEQQhqIAFBDGpBAhCjAiAEQcQAakECNgIAIAQgCDcDSCAEQgI3AjQgBEHEhcAANgIwIAQgBCkDCDcDUCAEIARByABqNgJAIARBMGpB1IXAABDOAQALIAMgBhCqAQALIAQgBCkCNDcDWEGEgcAAQSsgBEHYAGpBsIHAABCUAQALIAEgBhCqAQALIAYgBxCpAQALnAMBA38CQAJAAkACQAJAAkAgAC0AACIBQQ9KDQAgAUUNASABQQpHDQUCQCAAQQhqKAIAIgFFDQAgAEEEaigCACABQQEQqwILIABBEGooAgAiAUUNBSAAQQxqKAIAIAFBARCrAg8LIAFBEEYNASABQRdGDQIgAUEcRg0DDAQLAkAgAEEEaigCACIBKAIEIgJFDQAgASgCACACQQEQqwIgACgCBCEBCyABQRBBBBCrAg8LAkAgAEEEaigCACIBQQFLDQACQCABDgIEAAQLIABBDGooAgBBDGwiAUUNAyAAQQhqKAIAIAFBBBCrAg8LIABBDGooAgAiAUUNAiABQQxsIQIgAEEIaigCAEEEaiEBA0ACQCABQQRqKAIAQQxsIgNFDQAgASgCACADQQQQqwILIAFBDGohASACQXRqIgINAAsgACgCDEEMbCIBRQ0CIAAoAgggAUEEEKsCDwsgAEEIaigCAEEDdCIBRQ0BIABBBGooAgAgAUEEEKsCDwsgAEEIaigCAEEDdCIBRQ0AIABBBGooAgAgAUEEEKsCDwsLsQMBBn8jAEHAAGsiAyQAAkACQAJAIAEoAhAiBCACSw0AQQAhAiADQQhqIARBABCWASADQQA2AhggAyADKAIMNgIUIAMgAygCCCIFNgIQAkAgBEUNACADQTBqQQRyIQYDQCADQTBqIAEQdiADKAIwQQFGDQMgA0EgakEIaiIHIAZBCGooAgA2AgAgAyAGKQIANwMgAkAgAiADKAIURw0AIANBEGogAkEBEMUBIAMoAhghAiADKAIQIQULIAUgAkEMbGoiCCADKQMgNwIAIAhBCGogBygCADYCACADIAJBAWoiAjYCGCAEQX9qIgQNAAsLIANBMGpBCGogA0EQakEIaigCACICNgIAIAMgAykDEDcDMAJAIAIgAygCNCIERg0AIANBMGogAhCGASADKAI0IQQLIAMoAjAhAiAAQQhqIAQ2AgAgACACNgIEIABBADYCAAwCC0HKqsAAQR0gASgCDCABKAIIakF/ahCcASECIABBATYCACAAIAI2AgQMAQsgACADKAI0NgIEIABBATYCACADKAIUIgJFDQAgAygCECACQQxsQQQQqwILIANBwABqJAAL8AIBBX9BACEDAkBBzf97IAFBECABQRBLGyIBayACTQ0AIAAgAUEQIAJBC2pBeHEgAkELSRsiBGpBDGoQBCICRQ0AIAJBeGohAwJAAkAgAUF/aiIFIAJxDQAgAyEBDAELIAJBfGoiBigCACIHQXhxIAUgAmpBACABa3FBeGoiAiACIAFqIAIgA2tBEEsbIgEgA2siAmshBQJAIAdBA3FFDQAgASAFIAEoAgRBAXFyQQJyNgIEIAEgBWoiBSAFKAIEQQFyNgIEIAYgAiAGKAIAQQFxckECcjYCACABIAEoAgRBAXI2AgQgACADIAIQEQwBCyADKAIAIQMgASAFNgIEIAEgAyACajYCAAsCQCABKAIEIgJBA3FFDQAgAkF4cSIDIARBEGpNDQAgASAEIAJBAXFyQQJyNgIEIAEgBGoiAiADIARrIgRBA3I2AgQgASADaiIDIAMoAgRBAXI2AgQgACACIAQQEQsgAUEIaiEDCyADC/ECAQd/QQEhBwJAAkAgAkUNACABIAJBAXRqIQggAEGA/gNxQQh2IQlBACEKIABB/wFxIQsCQANAIAFBAmohDCAKIAEtAAEiAmohDQJAIAEtAAAiASAJRg0AIAEgCUsNAyANIQogDCEBIAwgCEcNAQwDCwJAIA0gCkkNACANIARLDQIgAyAKaiEBAkADQCACRQ0BIAJBf2ohAiABLQAAIQogAUEBaiEBIAogC0cNAAtBACEHDAULIA0hCiAMIQEgDCAIRw0BDAMLCyAKIA0QqgEACyANIAQQqQEACyAGRQ0AIAUgBmohCyAAQf//A3EhAUEBIQcCQANAIAVBAWohCgJAAkAgBS0AACICQRh0QRh1Ig1BAEgNACAKIQUMAQsgCiALRg0CIA1B/wBxQQh0IAUtAAFyIQIgBUECaiEFCyABIAJrIgFBAEgNAiAHQQFzIQcgBSALRw0ADAILC0G8ssAAQStB/LLAABDWAQALIAdBAXEL+wICBX8BfiMAQcAAayIBJAACQAJAAkAgAEHQAGotAAAiAkETRg0AAkAgAkESRw0AIABBOGooAgAgAEE0aigCAE8NAgsgAUEQaiAAQTBqEBcCQCABKAIQQQFHDQAgASgCFCEADAMLIAFBCGogAUEQakEEciIDQQhqKAIAIgI2AgAgASADKQIAIgY3AwAgAUEQakEQaigCACEDIAFBEGpBFGooAgAhBCABQShqKAIAIQUgAUEwakEIaiACNgIAIAAgBjcCXCAAQeQAaiACNgIAIABB8ABqIAU2AgAgAEHsAGogBDYCACAAQegAaiADNgIAIAEgBjcDMCABQRtqIAI2AAAgASAGNwATIAAQHCAAQQQ6AAAgAEEUaiAFIANqNgIAIABBEGogAzYCACAAIAEpABA3AAEgAEEIaiABQRdqKQAANwAAQQAhAAwCC0HorMAAQQ0QtwEACyAAQeQAakESOgAAIAAQHCAAQQM6AABBACEACyABQcAAaiQAIAAL4QICA38EfiMAQRBrIgIkACACQQhqIAEQuQFBASEDIAIpAwgiBUIgiCIGpyEEAkACQAJAAkACQCAFp0EBRg0AIARBgAFxRQ0CIAZC/wCDIQZCRyEFAkADQCACQQhqIAEQuQEgAikDCCIHQiCIIginIQMgB6dBAUYNAyAIQv8AgyAFQsAAfCIHhiAGhCEGIAdCGFYNASAFQgd8IQUgA0GAAXENAAsgAEEIaiAGQgAgBX0iBYYgBYc3AwBBACEDDAULAkAgA0GAAXENAAJAIANBGXRBGHVBASAFQsAAfKdrQQdxdSIDQX9GDQAgA0H/AXENAQsgAEEIaiAGNwMAQQAhAwwFCyAAQY2ZwABBDyABKAIMIAEoAghqQX9qEJwBNgIEDAMLIAAgBDYCBAwDCyAAIAM2AgQMAQsgAEEIaiAEQRl0QRl1rDcDAEEAIQMMAQtBASEDCyAAIAM2AgAgAkEQaiQAC5MDAQh/IwBB0ABrIgEkAAJAAkACQCAAKALcAUUNACAAKAJ0QQNGDQEgAUHEAGpBATYCACABQgI3AjQgAUH0pMAANgIwIAFBDzYCTCABQZiowAA2AkggASABQcgAajYCQCABQTBqQaCowAAQzgEACyAAEBIhAAwBCyABIABB+ABqEAoCQCABKAIAQQFHDQAgASgCBCEADAELIAFBFGooAgAhAiABQRBqKAIAIQMgAUEMaigCACEEIAFBKGotAAAhBSABQQhqKAIAIQYgASgCBCEHIAFBMGpBCGoiCCABQSBqKQMANwMAIAEgAUEYaikDADcDMAJAAkACQCAHDgMCAAECCyAAIAM2AswBIABB2AFqIAQ2AgAgAEHUAWpBADYCACAAQdABaiACNgIAQQIhBwwBC0EBIQcLIAAQHCAAQQhqIAY2AgAgAEEEaiAHNgIAIAAgBToAASAAQRs6AAAgACABKQMwNwKYASAAQaABaiAIKQMANwIAIAAgACgC3AFBf2o2AtwBQQAhAAsgAUHQAGokACAAC+MCAgN/AX4jAEEwayIGJABBACEHAkAgASgCBCIIIAJrIANPDQAgAiADaiIDIAJJIQICQAJAAkACQCAFRQ0AIAJFDQEgBkEQaiADQQAQoAIgBkEIaiAGKAIQIAYoAhQQoAIgACAGKQMINwIEDAMLIAJFDQEgBkEoaiADQQAQoAIgACAGKQMoNwIEDAILIAhBAXQiAiADIAIgA0sbIQMLAkAgA61CDH4iCUIgiKdFDQAQ2AIgBkEYaiAGQQAQoAIgACAGKQMYNwIEDAELAkAgCaciAkF/Sg0AIAZBIGogBkEAEKACIAAgBikDIDcCBAwBCwJAAkAgCA0AIAJBBBCdAiEFDAELIAEoAgAgCEEMbEEEIAIQlQIhBQsCQAJAIAUNACAERQ0BIAJBBBC0AgALIAEgAzYCBCABIAU2AgAMAgsgACACNgIEIABBCGpBBDYCAAtBASEHCyAAIAc2AgAgBkEwaiQAC+MCAgN/AX4jAEEwayIGJABBACEHAkAgASgCBCIIIAJrIANPDQAgAiADaiIDIAJJIQICQAJAAkACQCAFRQ0AIAJFDQEgBkEQaiADQQAQoAIgBkEIaiAGKAIQIAYoAhQQoAIgACAGKQMINwIEDAMLIAJFDQEgBkEoaiADQQAQoAIgACAGKQMoNwIEDAILIAhBAXQiAiADIAIgA0sbIQMLAkAgA61CDH4iCUIgiKdFDQAQ2AIgBkEYaiAGQQAQoAIgACAGKQMYNwIEDAELAkAgCaciAkF/Sg0AIAZBIGogBkEAEKACIAAgBikDIDcCBAwBCwJAAkAgCA0AIAJBBBCdAiEFDAELIAEoAgAgCEEMbEEEIAIQlQIhBQsCQAJAIAUNACAERQ0BIAJBBBC0AgALIAEgAzYCBCABIAU2AgAMAgsgACACNgIEIABBCGpBBDYCAAtBASEHCyAAIAc2AgAgBkEwaiQAC9MCAgV/AX4jAEEQayICJAAgAkEIaiABELkBQQEhAyACKQMIIgdCIIinIQQCQAJAAkACQAJAIAenQQFGDQAgBEGAAXFFDQIgBEH/AHEhBUFnIQYCQANAIAJBCGogARC5ASACKQMIIgdCIIinIQQgB6dBAUYNAyAEQf8AcSAGQSBqIgN0IAVyIQUgA0EYSw0BIAZBB2ohBiAEQYABcQ0AC0EAIQMgACAFQQAgBmtBH3EiBHQgBHU2AgQMBQsCQCAEQYABcQ0AQQAhAwJAIARBGXRBGHVBACAGQSBqa0EHcXUiBEF/Rg0AIARB/wFxDQELIAAgBTYCBAwFCyAAQf6YwABBDyABKAIMIAEoAghqQX9qEJwBNgIEDAMLIAAgBDYCBAwDCyAAIAQ2AgQMAQsgACAEQRl0QRl1NgIEQQAhAwwBC0EBIQMLIAAgAzYCACACQRBqJAAL0gIBA38CQAJAAkACQAJAIAAtAAAiAUEPSg0AIAFFDQEgAUEKRw0EIABBBGoQ2AEPCyABQRBGDQEgAUEXRg0CIAFBHEcNAyAAQQhqKAIAQQN0IgFFDQMgAEEEaigCACABQQQQqwIPCyAAQQRqIgEoAgAiABDXAiAAEI8CIAEoAgBBEEEEEKsCDwsCQCAAQQRqKAIAIgFBAUsNAAJAIAEOAgMAAwsgAEEMaigCAEEMbCIBRQ0CIABBCGooAgAgAUEEEKsCDwsgAEEMaigCACIBRQ0BIAFBDGwhAiAAQQhqKAIAQQRqIQEDQAJAIAFBBGooAgBBDGwiA0UNACABKAIAIANBBBCrAgsgAUEMaiEBIAJBdGoiAg0ACyAAKAIMQQxsIgFFDQEgACgCCCABQQQQqwIPCyAAQQhqKAIAQQN0IgFFDQAgAEEEaigCACABQQQQqwILC+ICAQN/IwBBMGsiBiQAQQAhBwJAIAEoAgQiCCACayADTw0AIAIgA2oiAyACSSECAkACQAJAAkAgBUUNACACRQ0BIAZBEGogA0EAEKACIAZBCGogBigCECAGKAIUEKACIAAgBikDCDcCBAwDCyACRQ0BIAZBKGogA0EAEKACIAAgBikDKDcCBAwCCyAIQQF0IgIgAyACIANLGyEDCwJAIANB/////wFxIANGDQAQ2AIgBkEYaiAGQQAQoAIgACAGKQMYNwIEDAELAkAgA0EDdCICQX9KDQAgBkEgaiAGQQAQoAIgACAGKQMgNwIEDAELAkACQCAIDQAgAkEEEJ0CIQUMAQsgASgCACAIQQN0QQQgAhCVAiEFCwJAAkAgBQ0AIARFDQEgAkEEELQCAAsgASADNgIEIAEgBTYCAAwCCyAAIAI2AgQgAEEIakEENgIAC0EBIQcLIAAgBzYCACAGQTBqJAAL4QIBA38jAEEwayIGJABBACEHAkAgASgCBCIIIAJrIANPDQAgAiADaiIDIAJJIQICQAJAAkACQCAFRQ0AIAJFDQEgBkEQaiADQQAQoAIgBkEIaiAGKAIQIAYoAhQQoAIgACAGKQMINwIEDAMLIAJFDQEgBkEoaiADQQAQoAIgACAGKQMoNwIEDAILIAhBAXQiAiADIAIgA0sbIQMLAkAgA0H///8/cSADRg0AENgCIAZBGGogBkEAEKACIAAgBikDGDcCBAwBCwJAIANBBXQiAkF/Sg0AIAZBIGogBkEAEKACIAAgBikDIDcCBAwBCwJAAkAgCA0AIAJBBBCdAiEFDAELIAEoAgAgCEEFdEEEIAIQlQIhBQsCQAJAIAUNACAERQ0BIAJBBBC0AgALIAEgAzYCBCABIAU2AgAMAgsgACACNgIEIABBCGpBBDYCAAtBASEHCyAAIAc2AgAgBkEwaiQAC+ICAQN/IwBBMGsiBiQAQQAhBwJAIAEoAgQiCCACayADTw0AIAIgA2oiAyACSSECAkACQAJAAkAgBUUNACACRQ0BIAZBEGogA0EAEKACIAZBCGogBigCECAGKAIUEKACIAAgBikDCDcCBAwDCyACRQ0BIAZBKGogA0EAEKACIAAgBikDKDcCBAwCCyAIQQF0IgIgAyACIANLGyEDCwJAIANB/////wFxIANGDQAQ2AIgBkEYaiAGQQAQoAIgACAGKQMYNwIEDAELAkAgA0EDdCICQX9KDQAgBkEgaiAGQQAQoAIgACAGKQMgNwIEDAELAkACQCAIDQAgAkEEEJ0CIQUMAQsgASgCACAIQQN0QQQgAhCVAiEFCwJAAkAgBQ0AIARFDQEgAkEEELQCAAsgASADNgIEIAEgBTYCAAwCCyAAIAI2AgQgAEEIakEENgIAC0EBIQcLIAAgBzYCACAGQTBqJAAL4gIBA38jAEEwayIGJABBACEHAkAgASgCBCIIIAJrIANPDQAgAiADaiIDIAJJIQICQAJAAkACQCAFRQ0AIAJFDQEgBkEQaiADQQAQoAIgBkEIaiAGKAIQIAYoAhQQoAIgACAGKQMINwIEDAMLIAJFDQEgBkEoaiADQQAQoAIgACAGKQMoNwIEDAILIAhBAXQiAiADIAIgA0sbIQMLAkAgA0H/////AHEgA0YNABDYAiAGQRhqIAZBABCgAiAAIAYpAxg3AgQMAQsCQCADQQR0IgJBf0oNACAGQSBqIAZBABCgAiAAIAYpAyA3AgQMAQsCQAJAIAgNACACQQQQnQIhBQwBCyABKAIAIAhBBHRBBCACEJUCIQULAkACQCAFDQAgBEUNASACQQQQtAIACyABIAM2AgQgASAFNgIADAILIAAgAjYCBCAAQQhqQQQ2AgALQQEhBwsgACAHNgIAIAZBMGokAAvfAgIEfwF+IwBB8ABrIgMkACADIAI2AmACQCAAKAIMIAJNDQAgA0EQaiADQeAAakECEKMCIAMpAxAhByADQQhqIABBDGpBAhCjAiADQcwAakECNgIAIAMgBzcDGCADQgI3AjwgA0H8hcAANgI4IAMgAykDCDcDICADIANBGGo2AkggA0E4akGMhsAAEM4BAAsgA0EYaiAAIAEgAhAbIANBGGpBGGoiASgCACEEIANBOGogACAAKAIQIAJqIgUgBSADQRhqQQhqKAIAIgZqEJ8BIANB4ABqQQhqIgUgASgCADYCACADIAMpAyg3A2AgA0HUAGogA0HgAGoQuQIiATYCACADQThqQRhqIAMoAmQ2AgAgA0HYAGogASAFKAIAajYCACADIAE2AkwgA0E4ahBSIANBOGoQmwEgA0HMAGoQzQEgACACNgIMIAAgBCAGayAAKAIQajYCECADQfAAaiQAC9ICAgV/AX4jAEEwayIDJABBJyEEAkACQCAAQpDOAFoNACAAIQgMAQtBJyEEA0AgA0EJaiAEaiIFQXxqIAAgAEKQzgCAIghCkM4Afn2nIgZB//8DcUHkAG4iB0EBdEGqucAAai8AADsAACAFQX5qIAYgB0HkAGxrQf//A3FBAXRBqrnAAGovAAA7AAAgBEF8aiEEIABC/8HXL1YhBSAIIQAgBQ0ACwsCQCAIpyIFQeMATA0AIANBCWogBEF+aiIEaiAIpyIFIAVB//8DcUHkAG4iBUHkAGxrQf//A3FBAXRBqrnAAGovAAA7AAALAkACQCAFQQpIDQAgA0EJaiAEQX5qIgRqIAVBAXRBqrnAAGovAAA7AAAMAQsgA0EJaiAEQX9qIgRqIAVBMGo6AAALIAIgAUHcscAAQQAgA0EJaiAEakEnIARrEA8hBCADQTBqJAAgBAvFAgEEfwJAAkAgAkEIdiIDDQBBACEEDAELQR8hBCACQf///wdLDQAgAkEGIANnIgRrQR9xdkEBcSAEQQF0a0E+aiEECyABQgA3AhAgASAENgIcIAAgBEECdGpBkAJqIQMCQAJAAkACQAJAIAAoAgQiBUEBIARBH3F0IgZxRQ0AIAMoAgAiAygCBEF4cSACRw0BIAMhBAwCCyAAIAUgBnI2AgQgAyABNgIAIAEgAzYCGAwDCyACQQBBGSAEQQF2a0EfcSAEQR9GG3QhAANAIAMgAEEddkEEcWpBEGoiBSgCACIERQ0CIABBAXQhACAEIQMgBCgCBEF4cSACRw0ACwsgBCgCCCIAIAE2AgwgBCABNgIIIAFBADYCGCABIAQ2AgwgASAANgIIDwsgBSABNgIAIAEgAzYCGAsgASABNgIMIAEgATYCCAvOAgECfyMAQRBrIgIkACAAKAIAIQACQAJAAkACQCABQYABSQ0AIAJBADYCDCABQYAQSQ0BAkAgAUGAgARPDQAgAiABQT9xQYABcjoADiACIAFBBnZBP3FBgAFyOgANIAIgAUEMdkEPcUHgAXI6AAxBAyEBDAMLIAIgAUE/cUGAAXI6AA8gAiABQRJ2QfABcjoADCACIAFBBnZBP3FBgAFyOgAOIAIgAUEMdkE/cUGAAXI6AA1BBCEBDAILAkAgACgCCCIDIAAoAgRHDQAgAEEBEIsBIAAoAgghAwsgACgCACADaiABOgAAIAAgACgCCEEBajYCCAwCCyACIAFBP3FBgAFyOgANIAIgAUEGdkEfcUHAAXI6AAxBAiEBCyAAIAEQiwEgACAAKAIIIgMgAWo2AgggAyAAKAIAaiACQQxqIAEQ1wEaCyACQRBqJABBAAvOAgIHfwF+IwBBEGsiAiQAIAJBCGogARBYAkACQAJAAkACQAJAAkACQCACKQMIIgmnQf8BcSIDQQFLDQAgAw4CAQIBCwJAIAIoAgwiAygCBCIERQ0AIAMoAgAgBEEBEKsCCyADQRBBBBCrAgsgAkEIaiABEEZBASEDIAIoAgwhBCACKAIIQQFGDQEgAkEIaiABEEYgAigCDCEFIAIoAghBAUYNAkEAIQNBACEGAkAgCUIIiKciB0H/AXFBfWpBAksNACACQQhqIAEQRkEBIQYgAigCDCEIIAIoAghBAUYNBAsgACAENgIEIABBFGogBzoAACAAQRBqIAg2AgAgAEEMaiAGNgIAIABBCGogBTYCAAwFCyAAIAlCIIg+AgQMAwsgACAENgIEDAMLIAAgBTYCBAwBCyAAIAg2AgQLQQEhAwsgACADNgIAIAJBEGokAAvPAgIDfwJ+IwBB0ABrIgEkAAJAAkACQCAAKALcAUUNACAAKAJ0QQdGDQEgAUHEAGpBATYCACABQgI3AjQgAUH0pMAANgIwIAFBDzYCTCABQaimwAA2AkggASABQcgAajYCQCABQTBqQbCmwAAQzgEACyAAEBIhAAwBCyABQQhqIABB+ABqEBACQCABKAIIQQFGDQAgAUEIakEMaikCACEEIAEpAgwhBSABQcAAaiICIAFBCGpBJGooAgA2AgAgAUE4aiIDIAFBCGpBHGopAgA3AwAgASABQQhqQRRqKQIANwMwIAAQHCAAQQxqIAQ3AgAgAEEEaiAFNwIAIABBCzoAACAAQRRqIAEpAzA3AgAgAEEcaiADKQMANwIAIABBJGogAigCADYCACAAIAAoAtwBQX9qNgLcAUEAIQAMAQsgASgCDCEACyABQdAAaiQAIAALsQIBA38jAEGAAWsiAiQAAkACQAJAAkACQCABKAIAIgNBEHENACAAKAIAIQQgA0EgcQ0BIAStQQEgARAsIQAMAgsgACgCACEEQQAhAANAIAIgAGpB/wBqIARBD3EiA0EwciADQdcAaiADQQpJGzoAACAAQX9qIQAgBEEEdiIEDQALIABBgAFqIgRBgQFPDQIgAUEBQai5wABBAiACIABqQYABakEAIABrEA8hAAwBC0EAIQADQCACIABqQf8AaiAEQQ9xIgNBMHIgA0E3aiADQQpJGzoAACAAQX9qIQAgBEEEdiIEDQALIABBgAFqIgRBgQFPDQIgAUEBQai5wABBAiACIABqQYABakEAIABrEA8hAAsgAkGAAWokACAADwsgBEGAARCqAQALIARBgAEQqgEAC9sCAgN/AX4jAEEQayICJAAgAkEIaiABELkBIAIpAwgiBUIgiKchAwJAAkACQCAFp0EBRg0AIANBgAFxRQ0BQeqVwABBDiABKAIMIAEoAghqQX9qEJwBIQMLIABBBGogAzYCAEEBIQMMAQsCQAJAAkACQCADQRl0QRl1IgRBEmoiA0ERTQ0AAkAgBEFARg0AIARBYEcNBCAAQQg6AAEMAgsgAEEJOgABDAELAkACQAJAAkACQAJAAkAgAw4SAAECCQkJCQkJCQkJCQMEBQYIAAsgAEEHOgABDAYLIABBBjoAAQwFCyAAQQU6AAEMBAsgAEEEOgABDAMLIABBAzoAAQwCCyAAQQI6AAEMAQsgAEEBOgABC0EAIQMMAgtBACEDIABBADoAAQwBCyAAQQRqQYaWwABBDCABKAIMIAEoAghqQX9qEJwBNgIAQQEhAwsgACADOgAAIAJBEGokAAvCAgICfwJ+IwBBIGsiAiQAIAJBEGogARAyIAIgAikDECIENwMAAkACQAJAAkACQAJAAkAgBKdB/wFxIgNBAUsNACADDgIBAgELIAJBBHIQ7gELIAJBEGogARBGIAIoAhQhAyACKAIQQQFGDQEgA0EBSw0DIAJBEGogASADQQFxEGkgAigCEEEBRg0CIAJBCGogAkEQakEEciIBQQhqKAIAIgM2AgAgAiABKQIAIgU3AwAgAEEMaiADNgIAIAAgBTcCBCAAQRBqIARCCIinOgAAIABBADYCAAwECyAAQQE2AgAgACAEQiCIPgIEDAMLIABBATYCACAAIAM2AgQMAgsgACACKAIUNgIEIABBATYCAAwBC0HwlsAAQSQgASgCDCABKAIIakF/ahCcASEBIABBATYCACAAIAE2AgQLIAJBIGokAAvSAgEHfyMAQcAAayIBJAACQAJAAkAgACgC3AFFDQAgACgCdEECRg0BIAFBNGpBATYCACABQgI3AiQgAUH0pMAANgIgIAFBDzYCPCABQaiqwAA2AjggASABQThqNgIwIAFBIGpBsKrAABDOAQALIAAQEiEADAELIAEgAEH4AGoQGgJAIAEoAgBBAUYNACABQRhqKAIAIQIgAUEUaigCACEDAkACQCABQQxqKAIAIgQNACAAEBwgAEEeOgAADAELIAFBEGooAgAhBSABQQhqKAIAIQYgASgCBCEHIAAQHCAAQdgBaiAGNgIAIABB1AFqQQA2AgAgAEHQAWogBTYCACAAIAQ2AswBIABBBGogBzYCACAAQR86AAALIAAgAzYCtAEgAEG4AWogAjYCACAAIAAoAtwBQX9qNgLcAUEAIQAMAQsgASgCBCEACyABQcAAaiQAIAALxwIBBX8jAEHAAGsiAiQAAkAgASgCBCIDDQAgAUEEaiEDIAEoAgAhBCACQQA2AiAgAkIBNwMYIAIgAkEYajYCJCACQShqQRBqIARBEGopAgA3AwAgAkEoakEIaiAEQQhqKQIANwMAIAIgBCkCADcDKCACQSRqQdCvwAAgAkEoahAIGiACQQhqQQhqIgQgAigCIDYCACACIAIpAxg3AwgCQCABKAIEIgVFDQAgAUEIaigCACIGRQ0AIAUgBkEBEKsCCyADIAIpAwg3AgAgA0EIaiAEKAIANgIAIAMoAgAhAwsgAUEBNgIEIAFBDGooAgAhBCABQQhqIgEoAgAhBSABQgA3AgACQEEMQQQQnQIiAQ0AQQxBBBC0AgALIAEgBDYCCCABIAU2AgQgASADNgIAIABBlLHAADYCBCAAIAE2AgAgAkHAAGokAAvRAgEFfyMAQSBrIgIkAAJAAkAgAS0AFA0AIAIgARBGQQEhASACKAIEIQMCQAJAIAIoAgBBAUcNACAAQQRqIQQMAQsgAEEBNgIEIABBCGohBEEAIQELIAAgATYCACAEIAM2AgAMAQsgASgCCCEDIAEoAgwhBCACIAEQAQJAAkACQAJAIAIoAgBBAUcNACAAIAIoAgQ2AgQMAQsgAyAEaiEEAkAgAi8BCEFOaiIDQQJLDQAgAkEMaigCACEFQQAhBiADDgMDAAIDCyAAQZ6RwABBFyAEEJwBNgIECyAAQQE2AgAMAgtBASEGCyACIAEQAQJAAkACQCACKAIAQQFHDQAgACACKAIENgIEDAELIAIvAQhBBkYNASAAQZ6RwABBFyAEEJwBNgIECyAAQQE2AgAMAQsgACAGNgIEIABBADYCACAAQQhqIAU2AgALIAJBIGokAAu3AgEFfyABKAIYIQICQAJAAkAgASgCDCIDIAFHDQAgAUEUQRAgAUEUaiIDKAIAIgQbaigCACIFDQFBACEDDAILIAEoAggiBSADNgIMIAMgBTYCCAwBCyADIAFBEGogBBshBANAIAQhBgJAIAUiA0EUaiIEKAIAIgUNACADQRBqIQQgAygCECEFCyAFDQALIAZBADYCAAsCQCACRQ0AAkACQCAAIAEoAhxBAnRqQZACaiIFKAIAIAFGDQAgAkEQQRQgAigCECABRhtqIAM2AgAgAw0BDAILIAUgAzYCACADDQAgACAAKAIEQX4gASgCHHdxNgIEDwsgAyACNgIYAkAgASgCECIFRQ0AIAMgBTYCECAFIAM2AhgLIAFBFGooAgAiBUUNACADQRRqIAU2AgAgBSADNgIYDwsLxgICA38CfiMAQdAAayIBJAACQAJAAkAgACgC3AFFDQAgACgCdEEKRg0BIAFBxABqQQE2AgAgAUICNwI0IAFB9KTAADYCMCABQQ82AkwgAUGYpcAANgJIIAEgAUHIAGo2AkAgAUEwakGEpsAAEM4BAAsgABASIQAMAQsgAUEYaiAAQfgAahAJAkAgASgCGEEBRw0AIAEoAhwhAAwBCyABQRBqIAFBGGpBBHIiAkEQaigCACIDNgIAIAFBCGogAkEIaikCACIENwMAIAEgAikCACIFNwMAIAFBwwBqIAM2AAAgAUE7aiAENwAAIAEgBTcAMyAAEBwgAEEKOgAAIAAgASkAMDcAASAAQQlqIAFBMGpBCGopAAA3AAAgAEEQaiABQT9qKQAANwAAIAAgACgC3AFBf2o2AtwBQQAhAAsgAUHQAGokACAAC7MCAQJ/AkACQCABQYAQSQ0AAkACQAJAAkACQAJAIAFBgIAESQ0AIAFBDHZBcGoiAkGAAkkNAUHou8AAIAJBgAIQqAEACyABQQZ2QWBqIgJB3wdLDQEgAEGEAmooAgAiAyAAIAJqQZgCai0AACICTQ0CIAAoAoACIAJBA3RqIQAMBgsgACACakH4CWotAABBBnQgAUEGdkE/cXIiAiAAQYwCaigCACIDTw0CIABBlAJqKAIAIgMgACgCiAIgAmotAAAiAk0NAyAAKAKQAiACQQN0aiEADAULQci7wAAgAkHgBxCoAQALQdi7wAAgAiADEKgBAAtB+LvAACACIAMQqAEAC0GIvMAAIAIgAxCoAQALIAAgAUEDdkH4////AXFqIQALIAApAwBCASABQT9xrYaDQgBSC60CAgZ/AX4jAEEQayICJAAgAkEIaiABEGYgAiACKQMIIgg3AwACQAJAAkACQAJAAkAgCKdB/wFxIgNBAUsNACADDgIBAgELIAJBBHIQ7wELIAJBCGogARBGIAIoAgwhAyACKAIIQQFGDQEgASgCDCEEAkAgASgCBCIFIAEoAggiBiADaiIHTw0AQeSbwABBLyAEIAVqEJwBIQEgAEEBNgIAIAAgATYCBAwECyAHIAZJDQIgASAHNgIIIABBADYCACAAQRBqIAQgBmo2AgAgAEEMaiADNgIAIAAgCEIIiKdB/wFxNgIEIABBCGogASgCACAGajYCAAwDCyAAQQE2AgAgACAIQiCIPgIEDAILIABBATYCACAAIAM2AgQMAQsgBiAHEKoBAAsgAkEQaiQAC68CAgN/AX4jAEHQAGsiAyQAIAMgAjYCPAJAIAAoAgwgAk0NACADQRBqIANBPGpBAhCjAiADKQMQIQYgA0EIaiAAQQxqQQIQowIgA0EsakECNgIAIAMgBjcDQCADQgI3AhwgA0H8hcAANgIYIAMgAykDCDcDSCADIANBwABqNgIoIANBGGpBjIbAABDOAQALIAEoAgghBCADQRhqIAAgACgCECACaiIFIAUQnwEgA0HIAGoiBSABKAIINgIAIAMgASkCADcDQCADQTRqIANBwABqELkCIgE2AgAgA0EwaiADKAJENgIAIANBOGogASAFKAIAajYCACADIAE2AiwgA0EYahBSIANBGGoQmwEgA0EsahDNASAAIAI2AgwgACAEIAAoAhBqNgIQIANB0ABqJAALnAICAn8BfkEAIQYCQCABKAIEIgcgAmsgA08NACACIANqIgMgAkkhAgJAAkACQAJAIAVFDQAgAkUNASAAIAM2AgQgAEEIakEANgIADAMLIAJFDQEgACADNgIEIABBCGpBADYCAAwCCyAHQQF0IgIgAyACIANLGyEDCwJAIAOtQgx+IghCIIinRQ0AIABBCGpBADYCAAwBCwJAIAinIgJBf0oNACAAQQhqQQA2AgAMAQsCQAJAIAcNACACQQQQnQIhBQwBCyABKAIAIAdBDGxBBCACEJUCIQULAkACQCAFDQAgBEUNASACQQQQtAIACyABIAM2AgQgASAFNgIADAILIAAgAjYCBCAAQQhqQQQ2AgALQQEhBgsgACAGNgIAC5wCAgJ/AX5BACEGAkAgASgCBCIHIAJrIANPDQAgAiADaiIDIAJJIQICQAJAAkACQCAFRQ0AIAJFDQEgACADNgIEIABBCGpBADYCAAwDCyACRQ0BIAAgAzYCBCAAQQhqQQA2AgAMAgsgB0EBdCICIAMgAiADSxshAwsCQCADrUIMfiIIQiCIp0UNACAAQQhqQQA2AgAMAQsCQCAIpyICQX9KDQAgAEEIakEANgIADAELAkACQCAHDQAgAkEEEJ0CIQUMAQsgASgCACAHQQxsQQQgAhCVAiEFCwJAAkAgBQ0AIARFDQEgAkEEELQCAAsgASADNgIEIAEgBTYCAAwCCyAAIAI2AgQgAEEIakEENgIAC0EBIQYLIAAgBjYCAAupAgEBfyMAQdAAayIEJAAgBCADNgIMIARBADYCCCAEIAI2AgQgBCABNgIAIARBIGogBBCSASAEKAIkIQECQAJAAkACQCAEKAIgQQFGDQAgBEEgaiAEIAFBABAUIAQoAiBBAUYNASAEQRBqQQhqIgIgBEEgakEEciIBQQhqKAIANgIAIAQgASkCADcDECAEQSBqIAQQRiAEKAIkIQEgBCgCIEEBRg0CIAAgBCkDADcCBCAAQQA2AgAgAEEUaiAEKQMQNwIAIABBIGogATYCACAAQQxqIARBCGopAwA3AgAgAEEcaiACKAIANgIADAMLIABBATYCACAAIAE2AgQMAgsgACAEKAIkNgIEIABBATYCAAwBCyAAQQE2AgAgACABNgIECyAEQdAAaiQAC5sCAQJ/QQAhBgJAIAEoAgQiByACayADTw0AIAIgA2oiAyACSSECAkACQAJAAkAgBUUNACACRQ0BIAAgAzYCBCAAQQhqQQA2AgAMAwsgAkUNASAAIAM2AgQgAEEIakEANgIADAILIAdBAXQiAiADIAIgA0sbIQMLAkAgA0H/////A3EgA0YNACAAQQhqQQA2AgAMAQsCQCADQQJ0IgJBf0oNACAAQQhqQQA2AgAMAQsCQAJAIAcNACACQQQQnQIhBQwBCyABKAIAIAdBAnRBBCACEJUCIQULAkACQCAFDQAgBEUNASACQQQQtAIACyABIAM2AgQgASAFNgIADAILIAAgAjYCBCAAQQhqQQQ2AgALQQEhBgsgACAGNgIAC6wCAgJ/An4jAEHQAGsiASQAAkACQAJAIAAoAtwBRQ0AIAAoAnRBCEYNASABQcQAakEBNgIAIAFCAjcCNCABQfSkwAA2AjAgAUEPNgJMIAFBhKfAADYCSCABIAFByABqNgJAIAFBMGpBjKfAABDOAQALIAAQEiEADAELIAFBGGogAEH4AGoQTQJAIAEoAhhBAUYNACABQQhqQQhqIAFBGGpBBHIiAkEIaikCACIDNwMAIAEgAikCACIENwMIIAFBO2ogAzcAACABIAQ3ADMgABAcIABBDjoAACAAIAEpADA3AAEgAEEJaiABQTBqQQhqKQAANwAAIABBEGogAUE/aigAADYAACAAIAAoAtwBQX9qNgLcAUEAIQAMAQsgASgCHCEACyABQdAAaiQAIAALrAICAn8CfiMAQdAAayIBJAACQAJAAkAgACgC3AFFDQAgACgCdEEJRg0BIAFBxABqQQE2AgAgAUICNwI0IAFB9KTAADYCMCABQQ82AkwgAUH8qcAANgJIIAEgAUHIAGo2AkAgAUEwakGEqsAAEM4BAAsgABASIQAMAQsgAUEYaiAAQfgAahAzAkAgASgCGEEBRg0AIAFBCGpBCGogAUEYakEEciICQQhqKQIAIgM3AwAgASACKQIAIgQ3AwggAUE7aiADNwAAIAEgBDcAMyAAEBwgAEENOgAAIAAgASkAMDcAASAAQQlqIAFBMGpBCGopAAA3AAAgAEEQaiABQT9qKAAANgAAIAAgACgC3AFBf2o2AtwBQQAhAAwBCyABKAIcIQALIAFB0ABqJAAgAAubAgECf0EAIQYCQCABKAIEIgcgAmsgA08NACACIANqIgMgAkkhAgJAAkACQAJAIAVFDQAgAkUNASAAIAM2AgQgAEEIakEANgIADAMLIAJFDQEgACADNgIEIABBCGpBADYCAAwCCyAHQQF0IgIgAyACIANLGyEDCwJAIANB/////wFxIANGDQAgAEEIakEANgIADAELAkAgA0EDdCICQX9KDQAgAEEIakEANgIADAELAkACQCAHDQAgAkEEEJ0CIQUMAQsgASgCACAHQQN0QQQgAhCVAiEFCwJAAkAgBQ0AIARFDQEgAkEEELQCAAsgASADNgIEIAEgBTYCAAwCCyAAIAI2AgQgAEEIakEENgIAC0EBIQYLIAAgBjYCAAubAgECf0EAIQYCQCABKAIEIgcgAmsgA08NACACIANqIgMgAkkhAgJAAkACQAJAIAVFDQAgAkUNASAAIAM2AgQgAEEIakEANgIADAMLIAJFDQEgACADNgIEIABBCGpBADYCAAwCCyAHQQF0IgIgAyACIANLGyEDCwJAIANB/////wFxIANGDQAgAEEIakEANgIADAELAkAgA0EDdCICQX9KDQAgAEEIakEANgIADAELAkACQCAHDQAgAkEEEJ0CIQUMAQsgASgCACAHQQN0QQQgAhCVAiEFCwJAAkAgBQ0AIARFDQEgAkEEELQCAAsgASADNgIEIAEgBTYCAAwCCyAAIAI2AgQgAEEIakEENgIAC0EBIQYLIAAgBjYCAAuSAgEGfyMAQRBrIgMkAAJAAkAgAg0AIABBoInAADYCBEEBIQRBGSECDAELAkACQAJAAkAgASwAACIFQX9KDQAgAkECSQ0BIANBCGogASABIAJqEKYCQQAhBEEAIQFBACECIAMoAggiBiADKAIMIgVGDQMgBSAGayEHQQAhAkEAIQVBACEBA0AgBiAFIghqLAAAIgVB/wBxIAJBH3F0IAFyIQEgBUEATg0DIAJBB2ohAiAHIAhBAWoiBUcNAAwDCwsgACAFQf8BcTYCBEEAIQRBASECDAMLIABBuYnAADYCBEEBIQRBPiECDAILIAhBAWohAgsgACABNgIECyAAIAQ2AgAgAEEIaiACNgIAIANBEGokAAuRAgEFfyMAQRBrIgIkACACQQhqIAEQRkEBIQMgAigCDCEEAkACQAJAAkAgAigCCEEBRg0AIAEoAgghBSACQQhqIAEQRiACKAIMIQMCQAJAIAIoAghBAUYNAAJAIANFDQADQCABEKEBIgYNAyABEH0iBg0DIANBf2oiAw0ACwsgASgCCCIDIAVJDQMgASgCBCIGIANJDQQgASgCACEGIAAgBDYCBCAAQQxqIAMgBWs2AgAgAEEIaiAGIAVqNgIAIABBEGogASgCDCAFajYCAEEAIQMMBQsgAyEGCyAAIAY2AgRBASEDDAMLIAAgBDYCBAwCCyAFIAMQqgEACyADIAYQqQEACyAAIAM2AgAgAkEQaiQAC40CAQV/IwBBEGsiAiQAIAJBCGogARC5AUEBIQMgAigCDCEEAkACQAJAAkACQCACKAIIQQFGDQAgBEGAAXFFDQIgBEH/AHEhBUF5IQZBByEDAkADQCACQQhqIAEQuQEgAigCDCEEIAIoAghBAUYNAwJAIANBGUgNACAEIAZBH3F2DQILIARB/wBxIANBH3F0IAVyIQUgBkF5aiEGIANBB2ohAyAEQYABcQ0ACyAAIAU2AgRBACEDDAULIABB/ZfAAEEPIAEoAgwgASgCCGpBf2oQnAE2AgQMAwsgACAENgIEDAMLIAAgBDYCBAwBCyAAIAQ2AgRBACEDDAELQQEhAwsgACADNgIAIAJBEGokAAuBAgIDfwR+IwBBEGsiAiQAQgAhBUIAIQYCQAJAAkACQANAIAJBCGogARC5ASACKQMIIgdCIIgiCKchAyAHp0EBRg0CIAhC/wCDIAWGIAaEIQYgBUI4Vg0BIAVCB3whBSADQYABcQ0ACyAAQQhqIAZCwAAgBX1CP4MiBYYgBYc3AwBBACEEDAMLAkAgA0GAAXENAEEAIQQCQCADQRl0QRh1QQAgBadrQQdxdSIDQX9GDQAgA0H/AXENAQsgAEEIaiAGNwMADAMLIABBnJnAAEEPIAEoAgwgASgCCGpBf2oQnAE2AgQMAQsgACADNgIEC0EBIQQLIAAgBDYCACACQRBqJAALiwICBH8BfiMAQRBrIgIkACACQQhqIAEQXCACIAIpAwgiBjcDAAJAAkACQAJAAkACQCAGp0H/AXEiA0EBSw0AIAMOAgECAQsgAkEEchDsAQsgASgCCCEDAkAgARClASIERQ0AIABBATYCACAAIAQ2AgQMAgsgASgCCCIEIANJDQIgASgCBCIFIARJDQMgASgCACEFIABBADYCACAAQRFqIAZCEIinOgAAIABBEGogBkIIiKc6AAAgAEEMaiAEIANrNgIAIABBCGogBSADajYCACAAIAEoAgwgA2o2AgQMAQsgAEEBNgIAIAAgBkIgiD4CBAsgAkEQaiQADwsgAyAEEKoBAAsgBCAFEKkBAAuaAgIEfwF+IwBBwABrIgEkAAJAAkACQCAAKALcAUUNACAAKAJ0QQZGDQEgAUE0akEBNgIAIAFCAjcCJCABQfSkwAA2AiAgAUEPNgI8IAFBsKfAADYCOCABIAFBOGo2AjAgAUEgakG4p8AAEM4BAAsgABASIQIMAQsgAUEIaiAAQfgAahBIAkAgASgCCEEBRg0AIAFBGGotAAAhAyABQRlqLQAAIQQgAUEQaikDACEFIAEoAgwhAiAAEBwgAEHYAWogAjYCAEEAIQIgAEHUAWpBADYCACAAIAU3AswBIABBAmogBEEBcToAACAAIAM6AAEgAEEkOgAAIAAgACgC3AFBf2o2AtwBDAELIAEoAgwhAgsgAUHAAGokACACC5cCAQR/IwBBMGsiASQAAkACQAJAIAAoAtwBRQ0AIAAoAnRBAUYNASABQSRqQQE2AgAgAUICNwIUIAFB9KTAADYCECABQQ82AiwgAUHsqMAANgIoIAEgAUEoajYCICABQRBqQfSowAAQzgEACyAAQawBakEANgIAIAAQEiEADAELIAEgAEH4AGoQXwJAIAEoAgBBAUcNACABKAIEIQAMAQsgAUEIaigCACECIAFBDGooAgAhAyABKAIEIQQgABAcIABBsAFqIAM2AgAgAEGsAWogAjYCACAAIAQ2AqgBIABBCGogAyAEajYCACAAQQRqIAQ2AgAgAEEWOgAAIAAgACgC3AFBf2o2AtwBQQAhAAsgAUEwaiQAIAALowIBBX8jAEEwayIEJABBASEFIAMoAgwhBiADKAIIIQcgAygCBCEIIAMoAgAhAwJAAkACQAJAQQAoAojjQEEBRg0AQQBCgYCAgBA3A4jjQAwBC0EAQQAoAozjQEEBaiIFNgKM40AgBUECSw0BCyAEQRBqIAMgCCAHIAYQjQIgBCACNgIoIARBxLDAADYCJCAEQQE2AiBBACgCuN9AIQMgBCAEQRBqNgIsIANBf0wNAEEAIANBAWoiAzYCuN9AAkBBACgCwN9AIgJFDQBBACgCvN9AIQMgBEEIaiAAIAEoAhARBQAgBCAEKQMINwMgIAMgBEEgaiACKAIMEQUAQQAoArjfQCEDC0EAIANBf2o2ArjfQCAFQQFNDQELAAsgACABEPYBAAuBAgIEfwF+IwBBIGsiAiQAIAJBCGogARBXAkACQAJAAkAgAigCCEEBRg0AIAJBEGooAgAhAyACKAIMIQQgAkEIaiABEGIgAiACKQMIIgY3AxgCQAJAIAanQf8BcSIFQQFLDQAgBQ4CAQMBCyACQRhqQQRyEOsBCyACQQhqIAEQRiACKAIMIQEgAigCCEEBRg0CIAAgBDYCBCAAQQA2AgAgAEEQaiAGQgiIpzoAACAAQQxqIAE2AgAgAEEIaiADNgIADAMLIAAgAigCDDYCBCAAQQE2AgAMAgsgAEEBNgIAIAAgBkIgiD4CBAwBCyAAQQE2AgAgACABNgIECyACQSBqJAAL+wECAn8CfiMAQSBrIgIkACACQRBqIAEQRiACKQMQIgRCIIinIQMCQAJAAkACQCAEp0EBRg0AIANBA0sNAiACQRBqIAEgA0EBcRBpIAIoAhBBAUYNASACQQhqIAJBEGpBBHIiAUEIaigCACIDNgIAIAIgASkCACIFNwMAIABBDGogAzYCACAAIAU3AgQgAEEQaiAEQiGIp0EBcToAACAAQQA2AgAMAwsgAEEBNgIAIAAgAzYCBAwCCyAAIAIoAhQ2AgQgAEEBNgIADAELQfCWwABBJCABKAIMIAEoAghqQX9qEJwBIQEgAEEBNgIAIAAgATYCBAsgAkEgaiQAC/wBAQJ/QQAhBgJAIAEoAgQiByACayADTw0AIAIgA2oiAyACSSECAkACQAJAAkAgBUUNACACRQ0BIAAgAzYCBCAAQQhqQQA2AgAMAwsgAkUNASAAIAM2AgQgAEEIakEANgIADAILIAdBAXQiAiADIAIgA0sbIQMLAkAgA0F/Sg0AIABBCGpBADYCAAwBCwJAAkAgBw0AIANBARCdAiECDAELIAEoAgAgB0EBIAMQlQIhAgsCQAJAIAINACAERQ0BIANBARC0AgALIAEgAzYCBCABIAI2AgAMAgsgACADNgIEQQEhBiAAQQhqQQE2AgAMAQtBASEGCyAAIAY2AgAL/AEBAn9BACEGAkAgASgCBCIHIAJrIANPDQAgAiADaiIDIAJJIQICQAJAAkACQCAFRQ0AIAJFDQEgACADNgIEIABBCGpBADYCAAwDCyACRQ0BIAAgAzYCBCAAQQhqQQA2AgAMAgsgB0EBdCICIAMgAiADSxshAwsCQCADQX9KDQAgAEEIakEANgIADAELAkACQCAHDQAgA0EBEJ0CIQIMAQsgASgCACAHQQEgAxCVAiECCwJAAkAgAg0AIARFDQEgA0EBELQCAAsgASADNgIEIAEgAjYCAAwCCyAAIAM2AgRBASEGIABBCGpBATYCAAwBC0EBIQYLIAAgBjYCAAuRAgECfyMAQRBrIgIkACACIAFBBBCdAQJAAkACQCACKAIAQQFGDQACQAJAIAJBCGooAgBBBEcNAAJAIAIoAgQiA0GHm8AARg0AIAMoAABBgMLN6wZHDQELIAIgARCkASACKAIEIQMgAigCAEEBRg0DAkAgA0ENRg0AIANBAUcNAgsgAEEANgIAIAAgAzYCBAwEC0GLm8AAQRAgASgCDCABKAIIakF8ahCcASEBIABBATYCACAAIAE2AgQMAwtBm5vAAEESIAEoAgwgASgCCGpBfGoQnAEhASAAQQE2AgAgACABNgIEDAILIAAgAigCBDYCBCAAQQE2AgAMAQsgAEEBNgIAIAAgAzYCBAsgAkEQaiQAC4ECAgV/AX4jAEEgayICJAAgASgCCCEDIAJBEGogARCSASACKAIUIQQCQAJAAkACQCACKAIQQQFGDQAgAkEQaiABEEYgAigCFCEFIAIoAhBBAUYNASABKAIIIQYgAkEQaiABIAQgAxAUIAIoAhBBAUYNAiACQQhqIAJBEGpBBHIiAUEIaigCACIENgIAIAIgASkCACIHNwMAIABBDGogBDYCACAAIAc3AgQgAEEUaiAFNgIAIABBEGogBjYCACAAQQA2AgAMAwsgAEEBNgIAIAAgBDYCBAwCCyAAQQE2AgAgACAFNgIEDAELIAAgAigCFDYCBCAAQQE2AgALIAJBIGokAAv/AQEDfyMAQSBrIgEkAAJAIAAoAgggAEEMaigCACICRg0AIAAgAjYCCAsCQAJAIAAoAgRFDQAgACAAQRRqIgIQjQFFDQECQCAAQSBqKAIAIABBHGooAgBrIgNFDQAgACADEMoBIAAgAhCNAUUNAgsgAUEANgIIIAFCATcDACABIAIQrQEgAUEYaiIDIAEoAgg2AgAgASABKQMANwMQIAEgAUEQahC5AiICNgIIIAEgAjYCACABIAEoAhQ2AgQgASACIAMoAgAiA2o2AgwCQCADRQ0AIAAgAxDKASAAIAEQjQEaCyABEM0BDAELIAAoAhAgAEEUahCtAQsgAUEgaiQAC/UBAQV/IwBBIGsiAiQAIAJBADYCECACIAEoAgAiAzYCFCACIAEoAgQiBDYCCCACIAFBCGooAgAiBTYCDCACQRhqIAJBCGoQRiACKAIcIQECQAJAAkACQCACKAIYQQFGDQACQCABRQ0AA0AgAkEIahChASIGDQMgAkEIahChASIGDQMgAUF/aiIBDQALCyAFIAIoAhAiBk8NAiAGIAUQqgEACyABIQYLIAAgBjYCBEEBIQEMAQsgAEEQaiAGIANqNgIAQQAhASAAQQxqQQA2AgAgAEEIaiAFIAZrNgIAIAAgBCAGajYCBAsgACABNgIAIAJBIGokAAuCAgICfwJ+IwBBwABrIgEkAAJAAkACQCAAKALcAUUNACAAKAJ0QQ1GDQEgAUE0akEBNgIAIAFCAjcCJCABQfSkwAA2AiAgAUEPNgI8IAFByKvAADYCOCABIAFBOGo2AjAgAUEgakHQq8AAEM4BAAsgABASIQAMAQsgAUEIaiAAQfgAahAvAkAgASgCCEEBRg0AIAFBCGpBDGopAgAhAyABQQhqQRRqLQAAIQIgASkCDCEEIAAQHCAAQRRqIAI6AAAgAEEMaiADNwAAIABBBGogBDcAACAAQSc6AAAgACAAKALcAUF/ajYC3AFBACEADAELIAEoAgwhAAsgAUHAAGokACAAC/wBAgN/AX4jAEHAAGsiASQAAkACQAJAIAAoAtwBRQ0AIAAoAnRBBEYNASABQTRqQQE2AgAgAUICNwIkIAFB9KTAADYCICABQQ82AjwgAUHsp8AANgI4IAEgAUE4ajYCMCABQSBqQfSnwAAQzgEACyAAEBIhAAwBCyABQQhqIABB+ABqEEwCQCABKAIIQQFGDQAgAUEYai0AACECIAFBCGpBDGooAgAhAyABKQIMIQQgABAcIABBDGogAzYCACAAQQRqIAQ3AgAgACACOgABIABBDzoAACAAIAAoAtwBQX9qNgLcAUEAIQAMAQsgASgCDCEACyABQcAAaiQAIAAL7wEBBH8jAEHAAGsiAiQAIAFBBGohAwJAIAEoAgQNACABKAIAIQQgAkEANgIgIAJCATcDGCACIAJBGGo2AiQgAkEoakEQaiAEQRBqKQIANwMAIAJBKGpBCGogBEEIaikCADcDACACIAQpAgA3AyggAkEkakHQr8AAIAJBKGoQCBogAkEIakEIaiIEIAIoAiA2AgAgAiACKQMYNwMIAkAgASgCBCIFRQ0AIAFBCGooAgAiAUUNACAFIAFBARCrAgsgAyACKQMINwIAIANBCGogBCgCADYCAAsgAEGUscAANgIEIAAgAzYCACACQcAAaiQAC/oBAQJ/IwBBEGsiAiQAIAIgARBGIAIoAgQhAwJAAkACQAJAIAIoAgBBAUYNACADQaCNBksNAiACIAEgAxCdASACKAIAQQFGDQEgAiACKAIEIAJBCGooAgAQsgECQAJAIAIoAgBBAUYNACAAIAIpAgQ3AgRBACEBDAELIABBq5nAAEEWIAEoAgwgASgCCGpBf2oQnAE2AgRBASEBCyAAIAE2AgAMAwsgAEEBNgIAIAAgAzYCBAwCCyAAIAIoAgQ2AgQgAEEBNgIADAELQZqYwABBHCABKAIMIAEoAghqQX9qEJwBIQEgAEEBNgIAIAAgATYCBAsgAkEQaiQAC/IBAQN/IwBBEGsiAiQAIAJBCGogARCSAUEBIQMgAigCDCEEAkACQCACKAIIQQFGDQACQAJAAkACQAJAAkACQAJAAkACQCAEQQdLDQAgBA4IAQIDBAUGBwgBCyAAQQRqQdKbwABBEiABKAIMIAEoAghqQX9qEJwBNgIAQQEhAwwKC0EAIQMgAEEAOgABDAkLIABBAToAAQwGCyAAQQI6AAEMBQsgAEEDOgABDAQLIABBBDoAAQwDCyAAQQU6AAEMAgsgAEEGOgABDAELIABBBzoAAQtBACEDDAELIABBBGogBDYCAAsgACADOgAAIAJBEGokAAvjAQICfwF+IwBBIGsiAiQAIAEoAgghAyACQQhqIAEQMgJAAkACQAJAAkAgAi0ACEUNACABIAM2AgggAkEQaiABECEgAigCEEEBRw0BIAAgAigCFDYCBCAAQQE2AgAMAgsgAEEAOgAEIABBADYCACAAQQVqIAItAAk6AAAMAwsgAikDGCIEQoCAgIAQVA0BQf2ZwABBFSADEJwBIQEgAEEBNgIAIAAgATYCBAsgAkEIakEEchDuAQwBCyAAQQE6AAQgAEEANgIAIABBCGogBD4CACACQQhqQQRyEO4BCyACQSBqJAAL1wECA38CfiMAQRBrIgIkACACQQhqIAEQuQFBASEDIAIoAgwhBAJAAkACQAJAAkAgAigCCEEBRg0AIARBgAFxRQ0CIAJBCGogARC5ASACKQMIIgVCIIghBkEBIQMgBadBAUYNAQJAIARB/wBxIAanQQd0ciIDQf8BSw0AIAAgAzYCBAwECyAAQe+XwABBDiABKAIMIAEoAghqQX9qEJwBNgIEQQEhAwwECyAAIAQ2AgQMAwsgACAGPgIEDAILIAAgBDYCBAtBACEDCyAAIAM2AgAgAkEQaiQAC9oBAQF/IwBB4ABrIgQkACAEIAE2AgggBCADNgIMAkAgASADRw0AIAAgAiABENcBGiAEQeAAaiQADwsgBEEoakEUakEGNgIAIARBNGpBDjYCACAEQRBqQRRqQQM2AgAgBEIDNwIUIARB/JLAADYCECAEQQ42AiwgBCAEQQhqNgJAIAQgBEEMajYCRCAEQgQ3A1ggBEIBNwJMIARByJPAADYCSCAEIARBKGo2AiAgBCAEQcgAajYCOCAEIARBxABqNgIwIAQgBEHAAGo2AiggBEEQakGclMAAEPIBAAvHAQICfwF+IwBBEGsiAiQAIAJBCGogARAyIAIgAikDCCIENwMAAkACQAJAIASnIgNB/wFxQQFGDQAgAkEIaiABEJEBIAIoAgwhASACKAIIQQFGDQEgACAEQgiIpzoAASAAQQA6AAAgAEECaiABQQBHOgAAIANB/wFxRQ0CIAJBBHIQ7gEMAgsgAEEBOgAAIABBBGogBEIgiD4CAAwBCyAAQQE6AAAgAEEEaiABNgIAIANB/wFxRQ0AIAJBBHIQ7gELIAJBEGokAAvOAQEEfyMAQRBrIgIkAEEAIQMgAkEANgIIIAJCATcDAAJAAkAgAUUNAEEAIQQDQCABQYB/ciABQf8AcSABQQd2IgEbIQUCQCAEIANHDQAgAkEBEK4CCyACELkCIAIoAghqIAU6AAAgAiACKAIIQQFqIgQ2AgggAUUNAiACKAIEIQMgASEBDAALCyACQQEQrgIgAhC5AiACKAIIakEAOgAAIAIgAigCCEEBajYCCAsgACACKQMANwIAIABBCGogAkEIaigCADYCACACQRBqJAALwgEBB38jAEEQayICJAAgAUEIaigCACEDIAEoAgQhBAJAAkAgACgCACIFIAAoAgQiBkYNACAAKAIIIQAgASgCACEBA0AgACgCCCIHIAVBBGooAgAiCE0NAiACIAAoAgAgCEEFdGogBSgCABAVIAFBCGogAkEIaigCADYCACABIAIpAwA3AgAgA0EBaiEDIAFBDGohASAFQQhqIgghBSAGIAhHDQALCyAEIAM2AgAgAkEQaiQADwtBvIzAACAIIAcQqAEAC8wBAQV/IwBBEGsiAiQAIAJBCGogARBGQQEhAyACKAIMIQQCQAJAAkAgAigCCEEBRg0AAkAgASgCBCIFIAEoAggiAyAEaiIGTw0AIABB9a7AAEEyIAEoAgwgBWoQnAE2AgRBASEDDAMLIAMgBksNASABIAY2AgggAEEMaiAENgIAIABBCGogASgCACADajYCACAAIAEoAgwgA2o2AgRBACEDDAILIAAgBDYCBAwBC0HImMAAQTZBuJjAABD0AQALIAAgAzYCACACQRBqJAALvQECA38BfiMAQRBrIgEkAAJAAkAgACgCvAFFDQACQAJAIABBwAFqKAIAIgIgAEHEAWooAgAiA00NACABIABBvAFqIAIgA2siAkGgjQYgAkGgjQZJGxCdASABKAIAQQFGDQEgASkCBCEEIAAQHCAAQQRqIAQ3AgAgAEEJOgAAQQAhAgwDCyAAEBxBACECIABBADYCvAEgAEEFOgAADAILIAEoAgQhAgwBC0HUpMAAQQ0QtwEACyABQRBqJAAgAgu4AQEBfyMAQSBrIgQkACAEIAM2AgwgBEEANgIIIAQgAjYCBCAEIAE2AgAgBEEQaiAEEFcgBCgCFCEBAkACQCAEKAIQQQFGDQACQCAEKAIIIgIgBCgCBEkNACAEQRBqQQhqKAIAIQMgACABNgIEIABBADYCACAAQQhqIAM2AgAMAgtBnY/AAEEyIAIgA2oQnAEhAyAAQQE2AgAgACADNgIEDAELIABBATYCACAAIAE2AgQLIARBIGokAAu+AQEDfyMAQRBrIgIkACACQQhqIAEQuQFBASEDIAIoAgwhBAJAAkAgAigCCEEBRg0AAkACQAJAAkACQAJAIARBA0sNACAEDgQBAgMEAQsgAEEEakGSlsAAQRUgASgCDCABKAIIakF/ahCcATYCAEEBIQMMBgtBACEDIABBADoAAQwFCyAAQQE6AAEMAgsgAEECOgABDAELIABBAzoAAQtBACEDDAELIABBBGogBDYCAAsgACADOgAAIAJBEGokAAu+AQECfyMAQSBrIgEkAAJAAkACQCAAKALcAUUNACAAKAJ0QQVGDQEgAUEUakEBNgIAIAFCAjcCBCABQfSkwAA2AgAgAUEPNgIcIAFB2KbAADYCGCABIAFBGGo2AhAgAUHgpsAAEM4BAAsgABASIQIMAQsgASAAQfgAahBGIAEoAgQhAiABKAIAQQFGDQAgABAcIABBBGogAjYCACAAQQw6AAAgACAAKALcAUF/ajYC3AFBACECCyABQSBqJAAgAgu+AQECfyMAQSBrIgEkAAJAAkACQCAAKALcAUUNACAAKAJ0QQxGDQEgAUEUakEBNgIAIAFCAjcCBCABQfSkwAA2AgAgAUEPNgIcIAFB9KvAADYCGCABIAFBGGo2AhAgAUH8q8AAEM4BAAsgABASIQIMAQsgASAAQfgAahBnIAEoAgQhAiABKAIAQQFGDQAgABAcIABBBGogAjYCACAAQSg6AAAgACAAKALcAUF/ajYC3AFBACECCyABQSBqJAAgAguwAQICfwF+IwBBEGsiAiQAIAJBCGogARBGIAIoAgwhAwJAAkACQCACKAIIQQFGDQAgAkEIaiABEDIgAiACKQMIIgQ3AwACQAJAIASnQf8BcSIBQQFLDQAgAQ4CAQMBCyACQQRyEPEBCyAAIAM2AgQgAEEANgIAIABBCGogBEIIiKc6AAAMAgsgAEEBNgIAIAAgAzYCBAwBCyAAQQE2AgAgACAEQiCIPgIECyACQRBqJAALsQEBA38jAEEQayICJAAgAkEIaiABEJIBQQEhAyACKAIMIQQCQAJAIAIoAghBAUYNAAJAAkACQAJAAkAgBEECSw0AIAQOAwECAwELIABBBGpBrZvAAEERIAEoAgwgASgCCGpBf2oQnAE2AgBBASEDDAULQQAhAyAAQQA6AAEMBAsgAEEBOgABDAELIABBAjoAAQtBACEDDAELIABBBGogBDYCAAsgACADOgAAIAJBEGokAAuqAQEDfyMAQRBrIgIkACACQQhqIAEQRkEBIQMgAigCDCEEAkACQAJAIAIoAghBAUYNAAJAIARBAUYNACAAQb6bwABBFCABKAIMIAEoAghqQX9qEJwBNgIEQQEhAwwDCyACQQhqIAEQRkEBIQMgAigCDCEBIAIoAghBAUYNASAAIAE2AgRBACEDDAILIAAgBDYCBAwBCyAAIAE2AgQLIAAgAzYCACACQRBqJAALoAEBAX8jAEHAAGsiAyQAIANBMGogASACIAIQkgIgA0EIaiADQTBqELEBIANBIGogAygCCCADKAIMEKwCIANBMGpBCGoiAiADQSBqQQhqKAIANgIAIAMgAykDIDcDMCADQRBqIANBMGoQrAEgAiADQRBqQQhqKAIANgIAIAMgAykDEDcDMCADIANBMGoQsQEgACADKQMANwIAIANBwABqJAALoQEBBX8jAEEQayIDJAAgA0EIaiABEEZBASEEIAMoAgwhBQJAAkACQCADKAIIQQFGDQBBACEEQQAhBgJAIAJFDQAgA0EIaiABEEZBASEGIAMoAgwhByADKAIIQQFGDQILIAAgBTYCBCAAQQxqIAc2AgAgAEEIaiAGNgIADAILIAAgBTYCBAwBCyAAIAc2AgRBASEECyAAIAQ2AgAgA0EQaiQAC7kBAQF/AkAgAEGAgARJDQACQAJAIABBgIAISQ0AQQAhASAAQeKLdGpB4o0sSQ0BIABBn6h0akGfGEkNASAAQd7idGpBDkkNASAAQf7//wBxQZ7wCkYNASAAQamydWpBKUkNASAAQcuRdWpBC0kNASAAQZD8R2pBj/wLSw8LIABBycHAAEEjQY/CwABBpgFBtcPAAEGYAxAfIQELIAEPCyAAQZi8wABBKUHqvMAAQaUCQY+/wABBugIQHwuSAQEDfyMAQYABayICJAAgAC0AACEDQQAhAANAIAIgAGpB/wBqIANBD3EiBEEwciAEQdcAaiAEQQpJGzoAACAAQX9qIQAgA0EEdkEPcSIDDQALAkAgAEGAAWoiA0GBAUkNACADQYABEKoBAAsgAUEBQai5wABBAiACIABqQYABakEAIABrEA8hACACQYABaiQAIAALkQEBA38jAEGAAWsiAiQAIAAtAAAhA0EAIQADQCACIABqQf8AaiADQQ9xIgRBMHIgBEE3aiAEQQpJGzoAACAAQX9qIQAgA0EEdkEPcSIDDQALAkAgAEGAAWoiA0GBAUkNACADQYABEKoBAAsgAUEBQai5wABBAiACIABqQYABakEAIABrEA8hACACQYABaiQAIAALmQEBAX8jAEEgayIFJAAgBSADNgIUQQAhAyAFQQA2AhAgBSACNgIMIAUgATYCCCAFQRhqIAVBCGoQRiAFKAIcIQECQAJAIAUoAhhBAUYNACAAIAUpAwg3AgQgAEEYaiAEOgAAIABBFGogATYCACAAQQxqIAVBEGopAwA3AgAMAQsgACABNgIEQQEhAwsgACADNgIAIAVBIGokAAuOAQEDfyMAQRBrIgMkACAAIAAoAgggAiABa0EDdhDBASAAKAIIIQQCQCACIAFGDQAgACgCACAEQQxsaiEFA0AgAyABQQRqKAIAEF0gBUEIaiADQQhqKAIANgIAIAUgAykDADcCACAEQQFqIQQgBUEMaiEFIAIgAUEIaiIBRw0ACwsgACAENgIIIANBEGokAAuPAQEDfyMAQYABayICJAAgACgCACEDQQAhAANAIAIgAGpB/wBqIANBD3EiBEEwciAEQdcAaiAEQQpJGzoAACAAQX9qIQAgA0EEdiIDDQALAkAgAEGAAWoiA0GBAUkNACADQYABEKoBAAsgAUEBQai5wABBAiACIABqQYABakEAIABrEA8hACACQYABaiQAIAALjgEBA38jAEGAAWsiAiQAIAAoAgAhA0EAIQADQCACIABqQf8AaiADQQ9xIgRBMHIgBEE3aiAEQQpJGzoAACAAQX9qIQAgA0EEdiIDDQALAkAgAEGAAWoiA0GBAUkNACADQYABEKoBAAsgAUEBQai5wABBAiACIABqQYABakEAIABrEA8hACACQYABaiQAIAALmAEBAn8jAEEQayIDJAAgAyABEI4BIAMoAgQhBAJAAkAgAygCAEEBRg0AAkAgBCACSw0AIANBCGooAgAhASAAIAQ2AgQgAEEANgIAIABBCGogATYCAAwCC0HBmcAAQSkgASgCDCABKAIIakF/ahCcASEBIABBATYCACAAIAE2AgQMAQsgAEEBNgIAIAAgBDYCBAsgA0EQaiQAC5IBAQF/IwBBIGsiAyQAIANCADcDECADIAI2AgwgAyABNgIIIANBGGogA0EIahBQQQEhASADKAIcIQICQAJAIAMoAhhBAUYNACAAIAMpAwg3AgQgAEEkakESOgAAIABBFGogAjYCACAAQQxqIANBEGopAwA3AgBBACEBDAELIAAgAjYCBAsgACABNgIAIANBIGokAAuVAQEBfyMAQSBrIgQkACAEIAM2AhQgBEEANgIQIAQgAjYCDCAEIAE2AgggBEEYaiAEQQhqEEYgBCgCHCEBAkACQCAEKAIYQQFGDQACQCAEKAIQIgIgBCgCDEkNACAAIAE2AgRBACEDDAILQc+PwABBLCACIANqEJwBIQELIAAgATYCBEEBIQMLIAAgAzYCACAEQSBqJAALlQEBAX8jAEEgayIEJAAgBCADNgIUIARBADYCECAEIAI2AgwgBCABNgIIIARBGGogBEEIahBGIAQoAhwhAQJAAkAgBCgCGEEBRg0AAkAgBCgCECICIAQoAgxJDQAgACABNgIEQQAhAwwCC0H3kMAAQScgAiADahCcASEBCyAAIAE2AgRBASEDCyAAIAM2AgAgBEEgaiQAC48BAgN/An4jAEEQayIDJAAgA0EIaiABELkBQQEhBCADKQMIIgZCIIgiB6chBQJAAkAgBqdBAUYNAAJAIAUgAk8NACAAIAc8AAFBACEEDAILIABBBGpB4prAAEESIAEoAgwgASgCCGpBf2oQnAE2AgBBASEEDAELIABBBGogBTYCAAsgACAEOgAAIANBEGokAAuTAQECfyMAQRBrIgIkACACIAEQRiACKAIEIQMCQAJAAkAgAigCAEEBRg0AIAIgARBXIAIoAgQhASACKAIAQQFGDQEgAEEMaiACQQhqKAIANgIAIABBCGogATYCACAAIAM2AgQgAEEANgIADAILIABBATYCACAAIAM2AgQMAQsgAEEBNgIAIAAgATYCBAsgAkEQaiQAC5QBAgJ/AX4jAEEgayICJAAgASkCACEEIAIgASgCCDYCFEEAIQEgAkEANgIQIAIgBDcDCCACQRhqIAJBCGoQRiACKAIcIQMCQAJAIAIoAhhBAUYNACAAIAIpAwg3AgQgAEEUaiADNgIAIABBDGogAkEQaikDADcCAAwBCyAAIAM2AgRBASEBCyAAIAE2AgAgAkEgaiQAC48BAQF/IwBBIGsiBCQAIAQgAzYCFEEAIQMgBEEANgIQIAQgAjYCDCAEIAE2AgggBEEYaiAEQQhqEEYgBCgCHCEBAkACQCAEKAIYQQFGDQAgACAEKQMINwIEIABBFGogATYCACAAQQxqIARBEGopAwA3AgAMAQsgACABNgIEQQEhAwsgACADNgIAIARBIGokAAuPAQEBfyMAQSBrIgQkACAEIAM2AhRBACEDIARBADYCECAEIAI2AgwgBCABNgIIIARBGGogBEEIahBGIAQoAhwhAQJAAkAgBCgCGEEBRg0AIAAgBCkDCDcCBCAAQRRqIAE2AgAgAEEMaiAEQRBqKQMANwIADAELIAAgATYCBEEBIQMLIAAgAzYCACAEQSBqJAALjwEBAX8jAEEgayIEJAAgBCADNgIUQQAhAyAEQQA2AhAgBCACNgIMIAQgATYCCCAEQRhqIARBCGoQRiAEKAIcIQECQAJAIAQoAhhBAUYNACAAIAQpAwg3AgQgAEEUaiABNgIAIABBDGogBEEQaikDADcCAAwBCyAAIAE2AgRBASEDCyAAIAM2AgAgBEEgaiQAC48BAQF/IwBBIGsiBCQAIAQgAzYCFEEAIQMgBEEANgIQIAQgAjYCDCAEIAE2AgggBEEYaiAEQQhqEEYgBCgCHCEBAkACQCAEKAIYQQFGDQAgACAEKQMINwIEIABBFGogATYCACAAQQxqIARBEGopAwA3AgAMAQsgACABNgIEQQEhAwsgACADNgIAIARBIGokAAuPAQEBfyMAQSBrIgQkACAEIAM2AhRBACEDIARBADYCECAEIAI2AgwgBCABNgIIIARBGGogBEEIahBGIAQoAhwhAQJAAkAgBCgCGEEBRg0AIAAgBCkDCDcCBCAAQRRqIAE2AgAgAEEMaiAEQRBqKQMANwIADAELIAAgATYCBEEBIQMLIAAgAzYCACAEQSBqJAALkwEBA38jAEEQayIBJAAgAUEIaiAAEEYgASgCDCECAkAgASgCCEEBRg0AAkAgAkGgjQZLDQACQCAAKAIIIgMgAmoiAiAAKAIETQ0AQc6VwABBDiAAKAIMIANqEJwBIQIMAgsgACACNgIIQQAhAgwBC0GamMAAQRwgACgCDCAAKAIIakF/ahCcASECCyABQRBqJAAgAguPAQEBfyMAQSBrIgQkACAEIAM2AhRBACEDIARBADYCECAEIAI2AgwgBCABNgIIIARBGGogBEEIahBGIAQoAhwhAQJAAkAgBCgCGEEBRg0AIAAgBCkDCDcCBCAAQRRqIAE2AgAgAEEMaiAEQRBqKQMANwIADAELIAAgATYCBEEBIQMLIAAgAzYCACAEQSBqJAALjwEBAX8jAEEgayIEJAAgBCADNgIUQQAhAyAEQQA2AhAgBCACNgIMIAQgATYCCCAEQRhqIARBCGoQRiAEKAIcIQECQAJAIAQoAhhBAUYNACAAIAQpAwg3AgQgAEEUaiABNgIAIABBDGogBEEQaikDADcCAAwBCyAAIAE2AgRBASEDCyAAIAM2AgAgBEEgaiQAC48BAQF/IwBBIGsiBCQAIAQgAzYCFEEAIQMgBEEANgIQIAQgAjYCDCAEIAE2AgggBEEYaiAEQQhqEEYgBCgCHCEBAkACQCAEKAIYQQFGDQAgACAEKQMINwIEIABBFGogATYCACAAQQxqIARBEGopAwA3AgAMAQsgACABNgIEQQEhAwsgACADNgIAIARBIGokAAuPAQEBfyMAQSBrIgQkACAEIAM2AhRBACEDIARBADYCECAEIAI2AgwgBCABNgIIIARBGGogBEEIahBGIAQoAhwhAQJAAkAgBCgCGEEBRg0AIAAgBCkDCDcCBCAAQRRqIAE2AgAgAEEMaiAEQRBqKQMANwIADAELIAAgATYCBEEBIQMLIAAgAzYCACAEQSBqJAALjwEBAX8jAEEgayIEJAAgBCADNgIUQQAhAyAEQQA2AhAgBCACNgIMIAQgATYCCCAEQRhqIARBCGoQRiAEKAIcIQECQAJAIAQoAhhBAUYNACAAIAQpAwg3AgQgAEEUaiABNgIAIABBDGogBEEQaikDADcCAAwBCyAAIAE2AgRBASEDCyAAIAM2AgAgBEEgaiQAC48BAQF/IwBBIGsiBCQAIAQgAzYCFEEAIQMgBEEANgIQIAQgAjYCDCAEIAE2AgggBEEYaiAEQQhqEEYgBCgCHCEBAkACQCAEKAIYQQFGDQAgACAEKQMINwIEIABBFGogATYCACAAQQxqIARBEGopAwA3AgAMAQsgACABNgIEQQEhAwsgACADNgIAIARBIGokAAuPAQEBfyMAQSBrIgQkACAEIAM2AhRBACEDIARBADYCECAEIAI2AgwgBCABNgIIIARBGGogBEEIahBGIAQoAhwhAQJAAkAgBCgCGEEBRg0AIAAgBCkDCDcCBCAAQRRqIAE2AgAgAEEMaiAEQRBqKQMANwIADAELIAAgATYCBEEBIQMLIAAgAzYCACAEQSBqJAALkgEBAn8CQAJAAkACQAJAIAAoAgQiAiABSQ0AIAFFDQEgAiABRg0EIAAoAgAgAkECdEEEIAFBAnQiAxCVAiICRQ0CIAAgAjYCAAwDC0GgjcAAQSRB5I3AABDWAQALAkAgAkUNACAAKAIAIAJBAnRBBBCrAgsgAEEENgIAQQAhAQwBCyADQQQQtAIACyAAIAE2AgQLC5IBAQJ/AkACQAJAAkACQCAAKAIEIgIgAUkNACABRQ0BIAIgAUYNBCAAKAIAIAJBDGxBBCABQQxsIgMQlQIiAkUNAiAAIAI2AgAMAwtB0a3AAEEkQZSuwAAQ1gEACwJAIAJFDQAgACgCACACQQxsQQQQqwILIABBBDYCAEEAIQEMAQsgA0EEELQCAAsgACABNgIECwuSAQECfwJAAkACQAJAAkAgACgCBCICIAFJDQAgAUUNASACIAFGDQQgACgCACACQQN0QQQgAUEDdCIDEJUCIgJFDQIgACACNgIADAMLQdGtwABBJEGUrsAAENYBAAsCQCACRQ0AIAAoAgAgAkEDdEEEEKsCCyAAQQQ2AgBBACEBDAELIANBBBC0AgALIAAgATYCBAsLkgEBAn8CQAJAAkACQAJAIAAoAgQiAiABSQ0AIAFFDQEgAiABRg0EIAAoAgAgAkEMbEEEIAFBDGwiAxCVAiICRQ0CIAAgAjYCAAwDC0HRrcAAQSRBlK7AABDWAQALAkAgAkUNACAAKAIAIAJBDGxBBBCrAgsgAEEENgIAQQAhAQwBCyADQQQQtAIACyAAIAE2AgQLC5IBAQJ/AkACQAJAAkACQCAAKAIEIgIgAUkNACABRQ0BIAIgAUYNBCAAKAIAIAJBA3RBBCABQQN0IgMQlQIiAkUNAiAAIAI2AgAMAwtB0a3AAEEkQZSuwAAQ1gEACwJAIAJFDQAgACgCACACQQN0QQQQqwILIABBBDYCAEEAIQEMAQsgA0EEELQCAAsgACABNgIECwuOAQECfyMAQSBrIgIkAEEAIQMgAkEANgIQIAIgASgCADYCFCACIAEpAgQ3AwggAkEYaiACQQhqEEYgAigCHCEBAkACQCACKAIYQQFGDQAgACACKQMINwIEIABBFGogATYCACAAQQxqIAJBEGopAwA3AgAMAQsgACABNgIEQQEhAwsgACADNgIAIAJBIGokAAuIAQECfwJAAkACQCAAKAIEIgIgACgCCCIDayABTw0AIAMgAWoiASADSQ0CIAJBAXQiAyABIAMgAUsbIgFBAEgNAgJAAkAgAg0AIAFBARCdAiECDAELIAAoAgAgAkEBIAEQlQIhAgsgAkUNASAAIAE2AgQgACACNgIACw8LIAFBARC0AgALEK8CAAuOAQEBfyMAQSBrIgYkAAJAIAFFDQAgBiABIAMgBCAFIAIoAgwRCwAgBkEQakEIaiAGQQhqKAIAIgE2AgAgBiAGKQMANwMQAkAgASAGKAIUIgJGDQAgBkEQaiABEIUBIAYoAhQhAgsgBigCECEBIAAgAjYCBCAAIAE2AgAgBkEgaiQADwtB6N7AAEEwELMCAAuJAQEEfyAAKAIAIQIgACgCECIDKAIIIQQgAxC5AiEAQQEhBQJAIAIgBEYNACAAIARqIQAgAiAEayECA0ACQCABKAIIIgQgASgCDEcNAEEADwtBASEFIAEgBEEBajYCCCAAIAQtAAA6AAAgAyADKAIIQQFqNgIIIABBAWohACACQX9qIgINAAsLIAULhwEBA38jAEEQayICJAAgAkEIaiABEEZBASEDIAIoAgwhBAJAAkACQCACKAIIQQFGDQAgAkEIaiABEEYgAigCDCEBIAIoAghBAUYNASAAIAQ2AgQgAEEIaiABNgIAQQAhAwwCCyAAIAQ2AgQMAQsgACABNgIEQQEhAwsgACADNgIAIAJBEGokAAuBAQEDfyMAQSBrIgIkACAAIAAoAgggASgCBCABKAIAa0EDdhDBASAAKAIAIQMgACgCCCEEIAJBCGogAUEIaigCADYCACACIAEpAgA3AwAgAkEQakEIaiAENgIAIAIgAEEIajYCFCACIAMgBEEMbGo2AhAgAiACQRBqEF4gAkEgaiQAC4IBAQJ/IwBBwABrIgEkACABQRBqQdiGwABBBRC4ASABQSBqQQhqIgIgAUEQakEIaigCADYCACABIAEpAxA3AyAgAUEIaiABQSBqEJcCIAFBMGpBCGogAigCADYCACABIAEpAyA3AzAgASABQTBqELEBIAAgASkDADcCACABQcAAaiQAC4IBAQN/IwBBEGsiAiQAIAJBCGogARC5AUEBIQMgAigCDCEEAkACQCACKAIIQQFGDQACQCAEQf4BcQ0AIAAgBDYCBEEAIQMMAgsgAEHclcAAQQ4gASgCDCABKAIIakF/ahCcATYCBEEBIQMMAQsgACAENgIECyAAIAM2AgAgAkEQaiQAC4IBAQN/IwBBEGsiAiQAIAJBCGogARC5AUEBIQMgAigCDCEEAkACQCACKAIIQQFGDQACQCAEQYABcQ0AIAAgBDYCBEEAIQMMAgsgAEH4lcAAQQ4gASgCDCABKAIIakF/ahCcATYCBEEBIQMMAQsgACAENgIECyAAIAM2AgAgAkEQaiQAC4cBAQF/AkACQAJAAkACQCAAKAIEIgIgAUkNACABRQ0BIAIgAUYNBCAAKAIAIAJBASABEJUCIgJFDQIgACACNgIADAMLQdGtwABBJEGUrsAAENYBAAsCQCACRQ0AIAAoAgAgAkEBEKsCCyAAQQE2AgBBACEBDAELIAFBARC0AgALIAAgATYCBAsLggEBAX8jAEHAAGsiBCQAIAQgATYCDCAEIAA2AgggBCADNgIUIAQgAjYCECAEQSxqQQI2AgAgBEE8akEgNgIAIARCAjcCHCAEQaizwAA2AhggBEEcNgI0IAQgBEEwajYCKCAEIARBEGo2AjggBCAEQQhqNgIwIARBGGpB0LPAABDyAQALeAEFfyMAQRBrIgIkACACQQhqIAEoAgQiA0EAELUBIAIoAgwhBCACKAIIIQUCQCADRQ0AIAEoAgAhASAFIQYDQCAGIAEtAAA6AAAgBkEBaiEGIAFBAWohASADQX9qIgMNAAsLIAAgBDYCBCAAIAU2AgAgAkEQaiQAC3kCAX8BfgJAAkACQCABrUIMfiIEQiCIpw0AIASnIgNBf0wNAQJAAkAgAw0AQQQhAgwBCwJAAkAgAg0AIANBBBCdAiECDAELIANBBBCeAiECCyACRQ0DCyAAIAE2AgQgACACNgIADwsQvwIACxDAAgALIANBBBC0AgALeQIBfwF+AkACQAJAIAGtQgx+IgRCIIinDQAgBKciA0F/TA0BAkACQCADDQBBBCECDAELAkACQCACDQAgA0EEEJ0CIQIMAQsgA0EEEJ4CIQILIAJFDQMLIAAgATYCBCAAIAI2AgAPCxDDAgALEMQCAAsgA0EEELQCAAtxAQF/AkACQCABIABJDQAgAkUNASAAIQMDQCADIAEtAAA6AAAgAUEBaiEBIANBAWohAyACQX9qIgINAAwCCwsgAkUNACABQX9qIQEgAEF/aiEDA0AgAyACaiABIAJqLQAAOgAAIAJBf2oiAg0ACwsgAAt5AQF/AkACQAJAIAFB/////wFxIAFHDQAgAUEDdCIDQX9MDQECQAJAIAMNAEEEIQIMAQsCQAJAIAINACADQQQQnQIhAgwBCyADQQQQngIhAgsgAkUNAwsgACABNgIEIAAgAjYCAA8LELwCAAsQvQIACyADQQQQtAIAC3kBAX8CQAJAAkAgAUH/////AXEgAUcNACABQQN0IgNBf0wNAQJAAkAgAw0AQQQhAgwBCwJAAkAgAg0AIANBBBCdAiECDAELIANBBBCeAiECCyACRQ0DCyAAIAE2AgQgACACNgIADwsQwQIACxDCAgALIANBBBC0AgALdAEEfwJAIAAoAgggAEEMaigCACIBRg0AIAAgATYCCAsCQCAAKAIEIgFFDQACQCAAKAIAIgIgACgCECIDKAIIIgRGDQAgAxC5AiEBIAMQuQIgBGogASACaiAAKAIEEJgBGiAAKAIEIQELIAMgASAEajYCCAsLcgEBfyMAQSBrIgMkACADIAAgARC4ASADQRBqQQhqIgEgA0EIaigCADYCACADIAMpAwA3AxACQEEQQQQQnQIiAA0AQRBBBBC0AgALIAAgAykDEDcCACAAIAI2AgwgAEEIaiABKAIANgIAIANBIGokACAAC3YBAn8CQAJAIAEoAggiAyACaiIEIAEoAgRNDQAgAEHOlcAAQQ4gASgCDCADahCcATYCBEEBIQEMAQsgASAENgIIAkAgBCADTw0AIAMgBBCqAQALIABBCGogAjYCACAAIAEoAgAgA2o2AgRBACEBCyAAIAE2AgALeAICfwF+AkACQCABKAIIIgJBCGoiAyABKAIETQ0AIABBzpXAAEEOIAEoAgwgAmoQnAE2AgRBASEBDAELAkAgAkF4SQ0AIAIgAxCqAQALIAEoAgAgAmopAAAhBCABIAM2AgggAEEIaiAENwMAQQAhAQsgACABNgIAC3oBAn8CQAJAIAMgAkkNACABKAIIIgQgA08NAUHEisAAQRxBtIrAABDWAQALQfeJwABBHkG0isAAENYBAAsgASACNgIIIAEQuQIhBSAAIAE2AhAgACAEIANrNgIEIAAgAzYCACAAQQxqIAUgA2o2AgAgACAFIAJqNgIIC20BAn8CQCAAKAIIIgFFDQAgACgCACEAIAFBBXQhAQNAAkAgAEEEaigCACICRQ0AIAAoAgAgAkEBEKsCCwJAIABBDGooAgAiAkUNACAAQQhqKAIAIAJBARCrAgsgAEEgaiEAIAFBYGoiAQ0ACwsLbwEDfyMAQRBrIgEkAEEGIQICQANAAkAgAkF/aiICDQBBjJjAAEEOIAAoAgwgACgCCGpBf2oQnAEhAwwCCyABQQhqIAAQuQEgASgCDCEDIAEoAghBAUYNASADQYABcQ0AC0EAIQMLIAFBEGokACADC3gCBH8BfiMAQTBrIgEkACAAEMYCEJQCIQIgABDFAhCTAiEDIAFBCGogAhC1AiABKQMIIQUgAhDHAiEEIAEgAhDIAjYCHCABIAQ2AhggASAFNwMQIAFBADYCJCABIAM2AiAgAUEgakGAscAAIAAQxQIgAUEQahBLAAtsAQN/IwBBIGsiAiQAAkAgACABEDENACABQRxqKAIAIQMgASgCGCEEIAJCBDcDGCACQgE3AgwgAkHgscAANgIIIAQgAyACQQhqEAgNACAAQQRqIAEQMSEBIAJBIGokACABDwsgAkEgaiQAQQELcwECfwJAAkAgASgCCCICQQRqIgMgASgCBE0NACAAQc6VwABBDiABKAIMIAJqEJwBNgIEQQEhAQwBCwJAIAJBfEkNACACIAMQqgEACyABKAIAIAJqKAAAIQIgASADNgIIIAAgAjYCBEEAIQELIAAgATYCAAtsAQJ/IwBBIGsiASQAIAEgABABAkACQCABKAIAQQFGDQAgAUEIai8BACECA0ACQCACQf//A3FBBkcNAEEAIQIMAwsgASAAEAEgAS8BCCECIAEoAgBBAUcNAAsLIAEoAgQhAgsgAUEgaiQAIAILdQEBfwJAAkACQAJAIAAoAgQiAiABSQ0AAkAgAUUNACACIAFGDQQgACgCACACQQEgARCVAiICDQIgAUEBELQCAAsgABCOAiAAQQE2AgBBACEBDAILQcyMwABBJEGQjcAAENYBAAsgACACNgIACyAAIAE2AgQLC3UAIAAgATYCKCAAQQM6AOABIABBADYCdCAAQQE6AAAgAEEANgLcASAAQQA2AswBIABBADYCvAEgAEEANgK0ASAAQSxqIAI2AgAgAEGsAWpBADYCACAAQaQBakECOgAAIABB5ABqQRI6AAAgAEHQAGpBEzoAAAttAQF/IwBBMGsiAyQAIAMgAjYCBCADIAE2AgAgA0EcakECNgIAIANBLGpBAjYCACADQgI3AgwgA0GsssAANgIIIANBAjYCJCADIANBIGo2AhggAyADNgIoIAMgA0EEajYCICADQQhqIAAQ8gEAC3ABAX8jAEEwayICJAAgAiABNgIEIAIgADYCACACQRxqQQI2AgAgAkEsakECNgIAIAJCAjcCDCACQaC0wAA2AgggAkECNgIkIAIgAkEgajYCGCACIAJBBGo2AiggAiACNgIgIAJBCGpBsLTAABDyAQALcAEBfyMAQTBrIgIkACACIAE2AgQgAiAANgIAIAJBHGpBAjYCACACQSxqQQI2AgAgAkICNwIMIAJB5LTAADYCCCACQQI2AiQgAiACQSBqNgIYIAIgAkEEajYCKCACIAI2AiAgAkEIakH0tMAAEPIBAAtkAQJ/IwBBIGsiAiQAIAFBHGooAgAhAyABKAIYIQEgAkEIakEQaiAAQRBqKQIANwMAIAJBCGpBCGogAEEIaikCADcDACACIAApAgA3AwggASADIAJBCGoQCCEAIAJBIGokACAAC20BAX8jAEEgayICJAAgAkEIaiABEAICQCACKAIIQQFHDQAgAiACKQIMNwMYQZyGwABBKyACQRhqQciGwAAQlAEACyAAIAIpAgw3AgAgAEEIaiACQRRqKAIANgIAIAEQ1wIgARCPAiACQSBqJAALawEDfyAAIAEoAgwgASgCCGsQrgIgABC5AiECIAAoAgghAwJAIAEoAggiBCABKAIMRg0AA0AgASAEQQFqNgIIIAIgA2ogBC0AADoAACADQQFqIQMgASgCCCIEIAEoAgxHDQALCyAAIAM2AggLYwEBfyMAQSBrIgIkACACIAAoAgA2AgQgAkEIakEQaiABQRBqKQIANwMAIAJBCGpBCGogAUEIaikCADcDACACIAEpAgA3AwggAkEEakHQr8AAIAJBCGoQCCEBIAJBIGokACABC3MAAkACQEHE38AAEM8CIAJPDQACQAJAQcTfwAAQzwIgAk8NAEHE38AAIAIgAxAeIQIMAQtBxN/AACADEAQhAgsgAg0BQQAPC0HE38AAIAAgAxAODwsgAiAAIAMgASABIANLGxDXASECQcTfwAAgABANIAILZwECfyMAQSBrIgIkACACQQhqIAEQlwIgAigCCCEBIAIgAigCDCIDQQAQtAEgAkEANgIYIAIgAikDADcDECACQRBqIAEgAxCnAiAAQQhqIAIoAhg2AgAgACACKQMQNwIAIAJBIGokAAtmAQN/IwBBEGsiAiQAAkAgASgCBCIDIAEoAggiBEYNACABIAQQpgEgASgCBCEDCyABKAIAIQEgAiADNgIMIAIgATYCCCACQQhqELkCIQEgACACKAIMNgIEIAAgATYCACACQRBqJAALaAIBfwF+IwBBEGsiAyQAIANBCGogASACEAsCQAJAIAMpAwgiBEKAgICA8B+DQoCAgIAgUQ0AIAAgBDcCBEEBIQEMAQsgACABNgIEIABBCGogAjYCAEEAIQELIAAgATYCACADQRBqJAALYQECfwJAIAAoAggiAyABSQ0AAkAgAyAAKAIERw0AIABBARCuAgsgABC5AiABaiIEQQFqIAQgAyABaxCYARogBCACOgAAIAAgA0EBajYCCA8LQeCKwABBHkG0isAAENYBAAtdAAJAAkAgAUF/TA0AAkACQCABDQBBASECDAELAkACQCACDQAgAUEBEJ0CIQIMAQsgAUEBEJ4CIQILIAJFDQILIAAgATYCBCAAIAI2AgAPCxC7AgALIAFBARC0AgALXQACQAJAIAFBf0wNAAJAAkAgAQ0AQQEhAgwBCwJAAkAgAg0AIAFBARCdAiECDAELIAFBARCeAiECCyACRQ0CCyAAIAE2AgQgACACNgIADwsQvgIACyABQQEQtAIAC1gBA38CQCAAKAIIIgIgAU0NACAAELgCIAFBAnRqIgMoAgAhBCADIANBBGogAiABQX9zakECdBCYARogACACQX9qNgIIIAQPC0H+isAAQR1BtIrAABDWAQALXwEBfyMAQTBrIgIkACACIAE2AgwgAiAANgIIIAJBJGpBATYCACACQgE3AhQgAkGMs8AANgIQIAJBHDYCLCACIAJBKGo2AiAgAiACQQhqNgIoIAJBEGpBlLPAABDyAQALVwEBfyMAQSBrIgMkACADQQhqIAJBABC0ASADQQA2AhggAyADKQMINwMQIANBEGogASABIAJqENsBIABBCGogAygCGDYCACAAIAMpAxA3AgAgA0EgaiQAC18BAn8CQAJAIAEoAggiAiABKAIESQ0AIABBzpXAAEEOIAEoAgwgAmoQnAE2AgRBASEBDAELIAEoAgAgAmotAAAhAyABIAJBAWo2AgggACADNgIEQQAhAQsgACABNgIAC1QBAn8CQCAAKAIIIgFFDQAgAUEMbCEBIAAoAgBBBGohAANAAkAgAEEEaigCAEEMbCICRQ0AIAAoAgAgAkEEEKsCCyAAQQxqIQAgAUF0aiIBDQALCwtcAQJ/IAEoAgAhAiABQQA2AgACQAJAIAJFDQAgASgCBCEDQQhBBBCdAiIBRQ0BIAEgAzYCBCABIAI2AgAgAEHkjsAANgIEIAAgATYCAA8LEM0CAAtBCEEEELQCAAtaAQF/AkAgAS0ACCICQQFHDQAgAkF6akH/AXFBDEkNACAAQQA2AgAgAEEQaiABKAIMNgIAIABBDGpBADYCACAAIAEpAhA3AgQPC0HAocAAQSlBsKHAABD0AQALUgEBfyMAQRBrIgMkACADIAAgASACQQFBARAqAkACQCADKAIAQQFHDQAgA0EIaigCAEUNAUGbi8AAQShB5IvAABDWAQALIANBEGokAA8LEK8CAAtSAQF/IwBBEGsiAyQAIAMgACABIAJBAUEBECgCQAJAIAMoAgBBAUcNACADQQhqKAIARQ0BQZuLwABBKEHki8AAENYBAAsgA0EQaiQADwsQrwIAC1IBAX8jAEEQayIDJAAgAyAAIAEgAkEBQQEQJwJAAkAgAygCAEEBRw0AIANBCGooAgBFDQFBm4vAAEEoQeSLwAAQ1gEACyADQRBqJAAPCxCvAgALUgEBfyMAQRBrIgMkACADIAAgASACQQFBARApAkACQCADKAIAQQFHDQAgA0EIaigCAEUNAUGbi8AAQShB5IvAABDWAQALIANBEGokAA8LEK8CAAtSAQF/IwBBEGsiAyQAIAMgACABIAJBAUEBECMCQAJAIAMoAgBBAUcNACADQQhqKAIARQ0BQZuLwABBKEHki8AAENYBAAsgA0EQaiQADwsQrwIAC1IBAX8jAEEQayIDJAAgAyAAIAEgAkEBQQEQJAJAAkAgAygCAEEBRw0AIANBCGooAgBFDQFBm4vAAEEoQeSLwAAQ1gEACyADQRBqJAAPCxCvAgALUgEBfyMAQRBrIgMkACADIAAgASACQQFBARA/AkACQCADKAIAQQFHDQAgA0EIaigCAEUNAUH4jcAAQShBwI7AABDWAQALIANBEGokAA8LEK8CAAtSAQF/IwBBEGsiAyQAIAMgACABIAJBAUEBED0CQAJAIAMoAgBBAUcNACADQQhqKAIARQ0BQaSuwABBKEGUrsAAENYBAAsgA0EQaiQADwsQrwIAC1IBAX8jAEEQayIDJAAgAyAAIAEgAkEBQQEQPAJAAkAgAygCAEEBRw0AIANBCGooAgBFDQFBpK7AAEEoQZSuwAAQ1gEACyADQRBqJAAPCxCvAgALUgEBfyMAQRBrIgMkACADIAAgASACQQFBARBCAkACQCADKAIAQQFHDQAgA0EIaigCAEUNAUGkrsAAQShBlK7AABDWAQALIANBEGokAA8LEK8CAAtSAQF/IwBBEGsiAyQAIAMgACABIAJBAUEBEEMCQAJAIAMoAgBBAUcNACADQQhqKAIARQ0BQaSuwABBKEGUrsAAENYBAAsgA0EQaiQADwsQrwIAC1IBAX8jAEEQayIDJAAgAyAAIAEgAkEBQQEQTgJAAkAgAygCAEEBRw0AIANBCGooAgBFDQFBpK7AAEEoQZSuwAAQ1gEACyADQRBqJAAPCxCvAgALUgEBfyMAQRBrIgMkACADIAAgASACQQFBARBPAkACQCADKAIAQQFHDQAgA0EIaigCAEUNAUGkrsAAQShBlK7AABDWAQALIANBEGokAA8LEK8CAAtSAQR/IAAoAhAiAiAAKAIEIAAoAgBqIAEQyQEgACgCACEDIAIQuQIhBCAAKAIAIQUgAhC5AiADIAFqIgFqIAQgBWogACgCBBCYARogACABNgIAC0oBA39BACEDAkAgAkUNAAJAA0AgAC0AACIEIAEtAAAiBUcNASAAQQFqIQAgAUEBaiEBIAJBf2oiAkUNAgwACwsgBCAFayEDCyADC1QBAX8CQAJAIAFBgIDEAEYNAEEBIQQgACgCGCABIABBHGooAgAoAhARBgANAQsCQCACDQBBAA8LIAAoAhggAiADIABBHGooAgAoAgwRCAAhBAsgBAtOAQJ/IwBBEGsiASQAAkAgACgCCCAAKAIMIgJGDQAgACACNgIICyABIAAoAgAgACgCBBCfAiABIAEpAwA3AwggAUEIahCPAiABQRBqJAALTgEBfyMAQSBrIgIkACACIAEoAgAgASgCBCABKAIIIAEoAgwQjQIgAiAANgIYIAJBxLDAADYCFCACQQE2AhAgAiACNgIcIAJBEGoQogEAC1AAAkACQEHE38AAEM8CIAFPDQBBxN/AACABIAAQHiEBDAELQcTfwAAgABAEIQELAkAgAUUNAEHE38AAIAEQmwJFDQAgAUEAIAAQ8wEaCyABC0gBAX8CQCABLQAIIgJBBUcNACACQXpqQf8BcUEMSQ0AIAAgASgCECABQRRqKAIAIAEoAgwQfA8LQfyhwABBLEHsocAAEPQBAAtIAQF/AkAgAS0ACCICQQRHDQAgAkF6akH/AXFBDEkNACAAIAEoAhAgAUEUaigCACABKAIMED4PC0G4osAAQSpBqKLAABD0AQALSAEBfwJAIAEtAAgiAkEDRw0AIAJBempB/wFxQQxJDQAgACABKAIQIAFBFGooAgAgASgCDBBhDwtB9KLAAEErQeCjwAAQ9AEAC0oAAkAgAEHkAGotAABBEkcNAEGvq8AAQQcQtwEACyAAQcQBakEANgIAIABByAFqIABB6ABqKAIANgIAIAAgAEHsAGopAgA3ArwBCzwBAX8CQCAAKAIIIgFFDQAgACgCACEAIAFBDGwhAQNAIAAQ1wIgABCPAiAAQQxqIQAgAUF0aiIBDQALCwtBAQF/AkACQCAAKAIEIgIgAUkNAEEAIQIgACgCCCABTQ0BQZWkwABBMiABEJwBDwtB8KPAAEElIAIQnAEhAgsgAgs7AQF/IwBBIGsiAyQAIANCBDcDECADQgE3AgQgAyABNgIcIAMgADYCGCADIANBGGo2AgAgAyACEPIBAAs2AQF/AkAgAkUNACAAIQMDQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAALOQEBfwJAIAAoAgQiAUUNACAAKAIAIAFBARCrAgsCQCAAQQxqKAIAIgFFDQAgACgCCCABQQEQqwILCy8AAkAgAEF8Sw0AAkAgAA0AQQQPCyAAIABBfUlBAnQQnQIiAEUNACAADwsQugIACzoBAX8CQCAAKAK0AQ0AQcCqwABBChC3AQALIABBuAFqKAIAIQEgABAcIABBBGogATYCACAAQSE6AAALNAEBfyAAIAAoAgggAiABayICEMkBIAAgACgCCCIDIAJqNgIIIAMgACgCAGogAiABIAIQWwsyACAAKAIAIQACQCABEKkCDQACQCABEKoCDQAgACABELECDwsgACABEGwPCyAAIAEQawsyACAAKAIAIQACQCABEKkCDQACQCABEKoCDQAgACABELACDwsgACABEHAPCyAAIAEQbws2AAJAIAEtAAhBBkYNAEGQncAAQSlBgJ3AABD0AQALIAAgASgCECABQRRqKAIAIAEoAgwQgwELNQACQCABLQAIQQhGDQBBzJ3AAEEtQbydwAAQ9AEACyAAIAEoAhAgAUEUaigCACABKAIMEH8LNgACQCABLQAIQQ9GDQBBzJ3AAEEtQfydwAAQ9AEACyAAIAEoAhAgAUEUaigCACABKAIMEIQBCzUAAkAgAS0ACEEMRg0AQZyewABBK0GMnsAAEPQBAAsgACABKAIQIAFBFGooAgAgASgCDBB4CzYAAkAgAS0ACEEHRg0AQdiewABBK0HInsAAEPQBAAsgACABKAIQIAFBFGooAgAgASgCDBCAAQs1AAJAIAEtAAhBC0YNAEGUn8AAQStBhJ/AABD0AQALIAAgASgCECABQRRqKAIAIAEoAgwQegs2AAJAIAEtAAhBCkYNAEHQn8AAQStBwJ/AABD0AQALIAAgASgCECABQRRqKAIAIAEoAgwQgQELNQACQCABLQAIQRBGDQBBjKDAAEEpQfyfwAAQ9AEACyAAIAEoAhAgAUEUaigCACABKAIMEHkLNgACQCABLQAIQQlGDQBByKDAAEEqQbigwAAQ9AEACyAAIAEoAhAgAUEUaigCACABKAIMEIIBCzUAAkAgAS0ACEEORg0AQYShwABBLEH0oMAAEPQBAAsgACABKAIQIAFBFGooAgAgASgCDBB7CzUAAkAgAS0ACEENRg0AQfSiwABBK0HkosAAEPQBAAsgACABKAIQIAFBFGooAgAgASgCDBB0CzUAAkAgAS0ACEERRg0AQbCjwABBMEGgo8AAEPQBAAsgACABKAIQIAFBFGooAgAgASgCDBBzCzEBAX8gACgCACIAIAIQiwEgACAAKAIIIgMgAmo2AgggAyAAKAIAaiABIAIQ1wEaQQALMgECfwJAIAAoAgAiASgCBCICRQ0AIAEoAgAgAkEBEKsCIAAoAgAhAQsgAUEQQQQQqwILMgECfwJAIAAoAgAiASgCBCICRQ0AIAEoAgAgAkEBEKsCIAAoAgAhAQsgAUEQQQQQqwILMgECfwJAIAAoAgAiASgCBCICRQ0AIAEoAgAgAkEBEKsCIAAoAgAhAQsgAUEQQQQQqwILMgECfwJAIAAoAgAiASgCBCICRQ0AIAEoAgAgAkEBEKsCIAAoAgAhAQsgAUEQQQQQqwILMgECfwJAIAAoAgAiASgCBCICRQ0AIAEoAgAgAkEBEKsCIAAoAgAhAQsgAUEQQQQQqwILMgECfwJAIAAoAgAiASgCBCICRQ0AIAEoAgAgAkEBEKsCIAAoAgAhAQsgAUEQQQQQqwILMgECfwJAIAAoAgAiASgCBCICRQ0AIAEoAgAgAkEBEKsCIAAoAgAhAQsgAUEQQQQQqwILMgEBfyMAQRBrIgIkACACIAE2AgwgAiAANgIIIAJB6LHAADYCBCACQQE2AgAgAhCiAQALLAEBfwJAIAJFDQAgACEDA0AgAyABOgAAIANBAWohAyACQX9qIgINAAsLIAALLAEBfyMAQRBrIgMkACADIAE2AgwgAyAANgIIIANBCGpB0I7AAEEAIAIQSwALJwEBfwJAIAAoAgQiAUUNACAAQQhqKAIAIgBFDQAgASAAQQEQqwILCyUBAX8jAEEQayICJAAgAiABNgIMIAIgADYCCCACQQhqEM4CGgALKAACQCAARQ0AIAAgAiADIAQgBSABKAIMEQwADwtB6N7AAEEwELMCAAsmAAJAIABFDQAgACACIAMgBCABKAIMEQkADwtB6N7AAEEwELMCAAsmAAJAIABFDQAgACACIAMgBCABKAIMEQkADwtB6N7AAEEwELMCAAsmAAJAIABFDQAgACACIAMgBCABKAIMEQkADwtB6N7AAEEwELMCAAsmAAJAIABFDQAgACACIAMgBCABKAIMEQoADwtB6N7AAEEwELMCAAsmAAJAIABFDQAgACACIAMgBCABKAIMEQkADwtB6N7AAEEwELMCAAsmAAJAIABFDQAgACACIAMgBCABKAIMERIADwtB6N7AAEEwELMCAAsmAAJAIABFDQAgACACIAMgBCABKAIMEQkADwtB6N7AAEEwELMCAAsmAAJAIABFDQAgACACIAMgBCABKAIMEQkADwtB6N7AAEEwELMCAAsmAAJAIABFDQAgACACIAMgBCABKAIMEQkADwtB6N7AAEEwELMCAAsmAAJAIABFDQAgACACIAMgBCABKAIMERMADwtB6N7AAEEwELMCAAsmAAJAIABFDQAgACACIAMgBCABKAIMEQkADwtB6N7AAEEwELMCAAsmAAJAIABFDQAgACACIAMgBCABKAIMEQoADwtB6N7AAEEwELMCAAsmAAJAIABFDQAgACACIAMgBCABKAIMEQkADwtB6N7AAEEwELMCAAskAAJAIABFDQAgACACIAMgASgCDBEHAA8LQejewABBMBCzAgALJAACQCAARQ0AIAAgAiADIAEoAgwRBwAPC0Ho3sAAQTAQswIACy4AAkBBACgCmN9ADQBBAEIANwKc30BBAEEENgKY30BBAEIANwKk30ALQZjfwAALJwACQEHE38AAEM8CIAFPDQBBxN/AACABIAAQHg8LQcTfwAAgABAECyYBAX8gACgCACIBKAIAIAEoAgQgACgCBCgCACAAKAIIKAIAEAYACyIAAkAgAEUNACAAIAIgASgCDBEGAA8LQejewABBMBCzAgALIAEBfwJAIAAoAgQiAUUNACAAKAIAIAFBAnRBBBCrAgsLIQACQCABKAIADQAQzQIACyAAQeSOwAA2AgQgACABNgIACx4AIAAgBDYCDCAAIAM2AgggACACNgIEIAAgATYCAAsdAQF/AkAgACgCBCIBRQ0AIAAoAgAgAUEBEKsCCwsdAQF/AkAgACgCBCIBRQ0AIAAoAgAgAUEBEKsCCwsdAQF/AkAgACgCBCIBRQ0AIAAoAgAgAUEBEKsCCwsaAQF/IAAgAUEAKAK030AiAkEQIAIbEQUAAAsXACAAIAI2AgggACADNgIEIAAgATYCAAsbAAJAIAANAEHUsMAAQStBtLDAABDWAQALIAALGwACQCAADQBB1LDAAEErQbSwwAAQ1gEACyAACxQBAX8gACABIAIgAxCvASEEIAQPCxYAIAAgASgCCDYCBCAAIAEoAgA2AgALFgAgACABKAIINgIEIAAgASgCADYCAAsWACAAIAEoAgg2AgQgACABKAIANgIACxYAIAAgASgCCDYCBCAAIAEoAgA2AgALEwACQCABRQ0AIAAgAUEEEKsCCwsQACABQXxqLQAAQQNxQQBHCxQAIAAoAgAgASAAKAIEKAIMEQYACxABAX8gACABEIgCIQIgAg8LEAEBfyAAIAEQzwEhAiACDwsQACAAIAI2AgQgACABNgIACxAAIAAgAjYCBCAAIAE2AgALEAAgACgCACAAKAIEIAEQBwsRACAAKAIAIAAoAgQgARC2AgsQACAAIAI2AgQgACABNgIACxAAIAAgAjYCBCAAIAE2AgALEAAgACACNgIEIAAgATYCAAsQACAAIAI2AgQgACABNgIACw4AIAAgASABIAJqENsBCxAAIAEgACgCACAAKAIEEAwLDQAgAC0AAEEQcUEEdgsNACAALQAAQSBxQQV2CwwAIAAgASACELcCDwsNACAAIAEgAiACEJICCw4AIAAgACgCCCABEMMBCw4AIAAgACgCCCABEMkBCxIAQbuxwABBEUHMscAAENYBAAsNACAANQIAQQEgARAsCw0AIAAxAABBASABECwLDQAgADUCAEEBIAEQLAsJACAAIAEQAAALCgAgACABEJECAAsMACAAIAEpAgA3AgALCgAgAiAAIAEQDAsLAEHE38AAIAAQDQsHACAAKAIACwcAIAAoAgALBgAQzQIACwYAEK8CAAsGABCvAgALBgAQrwIACwYAEK8CAAsGABCvAgALBgAQrwIACwYAEK8CAAsGABCvAgALBgAQrwIACwYAEK8CAAsHACAAKAIICwcAIAAoAgwLBwAgACgCCAsHACAAKAIMCwQAIAALDABC5K7ChZebpYgRCwwAQoP/iNuy5NTdCgsNAELWyK+kn9/x4cUACwMAAAsDAAALBABBCAsMAEKD/4jbsuTU3QoLAgALAgALAgALAgALAgALAgALAgALAgALAgALAgALAgALAgALAgALAgALC6PjgIAAAgBBgIDAAAuYX2NhbGxlZCBgT3B0aW9uOjp1bndyYXAoKWAgb24gYSBgTm9uZWAgdmFsdWUvcnVzdGMvMTliZDkzNDY3NjE3YTQ0N2MyMmVjMzJjYzFjZjE0ZDQwY2I4NGNjZi9zcmMvbGliY29yZS9tYWNyb3MvbW9kLnJzKwAQAEkAAAAPAAAAKAAAAGNhbGxlZCBgUmVzdWx0Ojp1bndyYXAoKWAgb24gYW4gYEVycmAgdmFsdWUAAwAAAAgAAAAEAAAABAAAAC9ydXN0Yy8xOWJkOTM0Njc2MTdhNDQ3YzIyZWMzMmNjMWNmMTRkNDBjYjg0Y2NmL3NyYy9saWJjb3JlL3NsaWNlL21vZC5yc8AAEABIAAAA9goAAAoAAADAABAASAAAAPwKAAAOAAAAYGFzc2VydGlvbiBmYWlsZWQ6IGAobGVmdCA9PSByaWdodClgCiAgbGVmdDogYGAsCiByaWdodDogYAAAKQEQAC0AAABWARAADAAAACgBEAABAAAAc3JjL3RyYW5zZm9ybWVyLnJzAAB8ARAAEgAAAEIAAAARAAAAfAEQABIAAABHAAAAFQAAAE9ubHkgb25lIHNlY3Rpb24gdHlwZSBpcyBhbGxvd2VkfAEQABIAAABgAAAAFQAAAE9ubHkgb25lIHNlY3Rpb24gaW1wb3J0IGlzIGFsbG93ZWQAAHwBEAASAAAAdQAAABUAAABPbmx5IG9uZSBzZWN0aW9uIGZ1bmN0aW9uIGlzIGFsbG93ZWR8ARAAEgAAAJAAAAAVAAAAT25seSBvbmUgc2VjdGlvbiBjb2RlIGlzIHN1cHBvcnRlZCBmb3Igbm93Q2FuJ3QgZ2V0IGxhdGVzdCBzZWN0aW9uVGhlIG5ldyBwb3NpdGlvbiAgc2hvdWxkIGJlIGFoZWFkIG9mIHByZXZpb3VzIHBvc2l0aW9uIAAAAIoCEAARAAAAmwIQACYAAAB8ARAAEgAAAOkBAAAJAAAAVGhlIHByb3ZpZGVkIHBvc2l0aW9uIAAA5AIQABYAAACbAhAAJgAAAHwBEAASAAAA/AEAAAkAAABjYWxsZWQgYFJlc3VsdDo6dW53cmFwKClgIG9uIGFuIGBFcnJgIHZhbHVlAAUAAAAIAAAABAAAAAQAAAAwLjAuMWNhbGxlZCBgUmVzdWx0Ojp1bndyYXAoKWAgb24gYW4gYEVycmAgdmFsdWUHAAAACAAAAAQAAAAEAAAAL3J1c3RjLzE5YmQ5MzQ2NzYxN2E0NDdjMjJlYzMyY2MxY2YxNGQ0MGNiODRjY2Yvc3JjL2xpYmNvcmUvc2xpY2UvbW9kLnJzmAMQAEgAAAD2CgAACgAAAJgDEABIAAAA/AoAAA4AAABgYXNzZXJ0aW9uIGZhaWxlZDogYChsZWZ0ID09IHJpZ2h0KWAKICBsZWZ0OiBgYCwKIHJpZ2h0OiBgYDogAAAAAQQQAC0AAAAuBBAADAAAADoEEAADAAAAUHJvdmlkZWQgZnVuY3Rpb24gaXMgbm90IGEgZnVuY3Rpb24AWAQQACMAAABzcmMvdXRpbHMucnOEBBAADAAAABYAAAAFAAAARGlkIG5vdCBwYXNzIGVub3VnaCBieXRlc0Vycm9yIGRlY29kaW5nIHRoZSB2YXJ1aW50MzIsIHRoZSBoaWdoIGJpdCB3YXMgaW5jb3JyZWN0bHkgc2V0YXNzZXJ0aW9uIGZhaWxlZDogc3RhcnQgPD0gZW5kPDo6Y29yZTo6bWFjcm9zOjpwYW5pYyBtYWNyb3M+ABUFEAAeAAAAAwAAAAoAAABhc3NlcnRpb24gZmFpbGVkOiBlbmQgPD0gbGVuYXNzZXJ0aW9uIGZhaWxlZDogaW5kZXggPD0gbGVuYXNzZXJ0aW9uIGZhaWxlZDogaW5kZXggPCBsZW5pbnRlcm5hbCBlcnJvcjogZW50ZXJlZCB1bnJlYWNoYWJsZSBjb2RlPDo6Y29yZTo6bWFjcm9zOjpwYW5pYyBtYWNyb3M+AAAAwwUQAB4AAAADAAAACgAAAC9ydXN0Yy8xOWJkOTM0Njc2MTdhNDQ3YzIyZWMzMmNjMWNmMTRkNDBjYjg0Y2NmL3NyYy9saWJjb3JlL3NsaWNlL21vZC5yc/QFEABIAAAA9goAAAoAAABUcmllZCB0byBzaHJpbmsgdG8gYSBsYXJnZXIgY2FwYWNpdHk8Ojpjb3JlOjptYWNyb3M6OnBhbmljIG1hY3Jvcz4AAHAGEAAeAAAAAwAAAAoAAABUcmllZCB0byBzaHJpbmsgdG8gYSBsYXJnZXIgY2FwYWNpdHk8Ojpjb3JlOjptYWNyb3M6OnBhbmljIG1hY3Jvcz4AAMQGEAAeAAAAAwAAAAoAAAAIAAAAaW50ZXJuYWwgZXJyb3I6IGVudGVyZWQgdW5yZWFjaGFibGUgY29kZTw6OmNvcmU6Om1hY3Jvczo6cGFuaWMgbWFjcm9zPgAAIAcQAB4AAAADAAAACgAAAAkAAAAIAAAABAAAAAoAAAALAAAADAAAAAgAAAAEAAAADQAAAFVuZXhwZWN0ZWQgZGF0YSBhdCB0aGUgZW5kIG9mIHRoZSBzZWN0aW9uVW5leHBlY3RlZCBjb250ZW50IGluIHRoZSBzb3VyY2VNYXBwaW5nVVJMIHNlY3Rpb25VbmV4cGVjdGVkIGNvbnRlbnQgaW4gdGhlIGRhdGEgY291bnQgc2VjdGlvbkRhdGEgc2VnbWVudCBleHRlbmRzIHBhc3QgZW5kIG9mIHRoZSBkYXRhIHNlY3Rpb25pbnZhbGlkIGZsYWdzIGJ5dGUgaW4gZGF0YSBzZWdtZW50VW5leHBlY3RlZCBkYXRhIGF0IHRoZSBlbmQgb2YgdGhlIHNlY3Rpb25VbmV4cGVjdGVkIGNvbnRlbnQgaW4gdGhlIHN0YXJ0IHNlY3Rpb25pbnZhbGlkIHBhc3NpdmUgc2VnbWVudGludmFsaWQgZmxhZ3MgYnl0ZSBpbiBlbGVtZW50IHNlZ21lbnRvbmx5IHRoZSBmdW5jdGlvbiBleHRlcm5hbCB0eXBlIGlzIHN1cHBvcnRlZCBpbiBlbGVtIHNlZ21lbnRVbmV4cGVjdGVkIGRhdGEgYXQgdGhlIGVuZCBvZiB0aGUgc2VjdGlvbmFzc2VydGlvbiBmYWlsZWQ6IGAobGVmdCA9PSByaWdodClgCiAgbGVmdDogYGAsCiByaWdodDogYGA6IAA/CRAALQAAAGwJEAAMAAAAeAkQAAMAAABkZXN0aW5hdGlvbiBhbmQgc291cmNlIHNsaWNlcyBoYXZlIGRpZmZlcmVudCBsZW5ndGhzlAkQADQAAAAvcnVzdGMvMTliZDkzNDY3NjE3YTQ0N2MyMmVjMzJjYzFjZjE0ZDQwY2I4NGNjZi9zcmMvbGliY29yZS9tYWNyb3MvbW9kLnJzAAAA0AkQAEkAAAAXAAAADQAAANAJEABJAAAADwAAACgAAABVbmV4cGVjdGVkIGRhdGEgYXQgdGhlIGVuZCBvZiB0aGUgc2VjdGlvbi9Vc2Vycy9zeXJ1c2FrYmFyeS8uY2FyZ28vcmVnaXN0cnkvc3JjL2dpdGh1Yi5jb20tMWVjYzYyOTlkYjllYzgyMy93YXNtcGFyc2VyLTAuNTEuMy9zcmMvYmluYXJ5X3JlYWRlci5yc1VuZXhwZWN0ZWQgRU9GSW52YWxpZCB2YXJfdTFJbnZhbGlkIHZhcl9pN0ludmFsaWQgdmFyX3U3SW52YWxpZCB0eXBlSW52YWxpZCBleHRlcm5hbCBraW5kZnVuY3Rpb24gcGFyYW1zIHNpemUgaXMgb3V0IG9mIGJvdW5kZnVuY3Rpb24gcmV0dXJucyBzaXplIGlzIG91dCBvZiBib3VuZGludmFsaWQgdGFibGUgcmVzaXphYmxlIGxpbWl0cyBmbGFnc0ludmFsaWQgc2VjdGlvbiBjb2RlbmFtZXByb2R1Y2Vyc3NvdXJjZU1hcHBpbmdVUkxyZWxvYy5saW5raW5nYnJfdGFibGUgc2l6ZSBpcyBvdXQgb2YgYm91bmRJbnZhbGlkIHZhcl91OEludmFsaWQgdmFyX3UzMkludmFsaWQgdmFyXzMyc3RyaW5nIHNpemUgaW4gb3V0IG9mIGJvdW5kcwAAZQoQAGkAAAAqAgAACQAAAHNraXBfdG8gYWxsb3dlZCBvbmx5IGludG8gcmVnaW9uIHBhc3QgY3VycmVudCBwb3NpdGlvbkludmFsaWQgdmFyX2kzMkludmFsaWQgdmFyX3MzM0ludmFsaWQgdmFyX2k2NGludmFsaWQgVVRGLTggZW5jb2RpbmdhbGlnbm1lbnQgbXVzdCBub3QgYmUgbGFyZ2VyIHRoYW4gbmF0dXJhbFVua25vd24gMHhGRSBvcGNvZGVpbnZhbGlkIGZ1bmN0aW9uIHR5cGVVbmtub3duIG9wY29kZWJhZCBudW1iZXIgb2YgcmVzdWx0c1Vua25vd24gMHhmYyBvcGNvZGVyZXNlcnZlZCBieXRlIG11c3QgYmUgemVyb2ludmFsaWQgbGFuZSBpbmRleFVua25vd24gMHhmZCBvcGNvZGUAYXNtQmFkIG1hZ2ljIG51bWJlckJhZCB2ZXJzaW9uIG51bWJlckludmFsaWQgbmFtZSB0eXBlSW52YWxpZCBsaW5raW5nIHR5cGVJbnZhbGlkIHJlbG9jIHR5cGVOYW1lIGVudHJ5IGV4dGVuZHMgcGFzdCBlbmQgb2YgdGhlIGNvZGUgc2VjdGlvbi9Vc2Vycy9zeXJ1c2FrYmFyeS8uY2FyZ28vcmVnaXN0cnkvc3JjL2dpdGh1Yi5jb20tMWVjYzYyOTlkYjllYzgyMy93YXNtcGFyc2VyLTAuNTEuMy9zcmMvcmVhZGVycy9tb2R1bGUucnMAAAATDhAAagAAACwAAAASAAAASW52YWxpZCBzdGF0ZSBmb3IgZ2V0X3R5cGVfc2VjdGlvbl9yZWFkZXIAAAATDhAAagAAADgAAAASAAAASW52YWxpZCBzdGF0ZSBmb3IgZ2V0X2Z1bmN0aW9uX3NlY3Rpb25fcmVhZGVyAAAAEw4QAGoAAABEAAAAEgAAABMOEABqAAAAUAAAABIAAABJbnZhbGlkIHN0YXRlIGZvciBnZXRfZXhwb3J0X3NlY3Rpb25fcmVhZGVyABMOEABqAAAAXAAAABIAAABJbnZhbGlkIHN0YXRlIGZvciBnZXRfaW1wb3J0X3NlY3Rpb25fcmVhZGVyABMOEABqAAAAaAAAABIAAABJbnZhbGlkIHN0YXRlIGZvciBnZXRfZ2xvYmFsX3NlY3Rpb25fcmVhZGVyABMOEABqAAAAdAAAABIAAABJbnZhbGlkIHN0YXRlIGZvciBnZXRfbWVtb3J5X3NlY3Rpb25fcmVhZGVyABMOEABqAAAAgAAAABIAAABJbnZhbGlkIHN0YXRlIGZvciBnZXRfZGF0YV9zZWN0aW9uX3JlYWRlcgAAABMOEABqAAAAjAAAABIAAABJbnZhbGlkIHN0YXRlIGZvciBnZXRfdGFibGVfc2VjdGlvbl9yZWFkZXIAABMOEABqAAAAmAAAABIAAABJbnZhbGlkIHN0YXRlIGZvciBnZXRfZWxlbWVudF9zZWN0aW9uX3JlYWRlchMOEABqAAAApQAAABIAAABJbnZhbGlkIHN0YXRlIGZvciBnZXRfbmFtZV9zZWN0aW9uX3JlYWRlcgAAABMOEABqAAAAvwAAABIAAABJbnZhbGlkIHN0YXRlIGZvciBnZXRfbGlua2luZ19zZWN0aW9uX3JlYWRlchMOEABqAAAAzAAAABIAAABJbnZhbGlkIHN0YXRlIGZvciBnZXRfcmVsb2Nfc2VjdGlvbl9yZWFkZXIAABMOEABqAAAA0wAAABIAAABJbnZhbGlkIHN0YXRlIGZvciBnZXRfc3RhcnRfc2VjdGlvbl9jb250ZW50ABMOEABqAAAA2gAAABIAAABJbnZhbGlkIHN0YXRlIGZvciBnZXRfZGF0YV9jb3VudF9zZWN0aW9uX2NvbnRlbnQTDhAAagAAAOcAAAASAAAAU2VjdGlvbiBib2R5IGV4dGVuZHMgcGFzdCBlbmQgb2YgZmlsZVNlY3Rpb24gaGVhZGVyIGlzIHRvbyBiaWcgdG8gZml0IGludG8gc2VjdGlvbiBib2R5bW9kdWxlIHJlYWRlcmJpbmFyeSByZWFkZXJleHBlY3RlZCAgcmVhZGVyAAAAYRIQAAkAAABqEhAABwAAAFR5cGVTZWN0aW9uUmVhZGVyAAAAhBIQABEAAAAvVXNlcnMvc3lydXNha2JhcnkvLmNhcmdvL3JlZ2lzdHJ5L3NyYy9naXRodWIuY29tLTFlY2M2Mjk5ZGI5ZWM4MjMvd2FzbXBhcnNlci0wLjUxLjMvc3JjL3BhcnNlci5ycwAAoBIQAGIAAABgAQAAGgAAAEltcG9ydFNlY3Rpb25SZWFkZXIAFBMQABMAAACgEhAAYgAAAGoBAAAsAAAARnVuY3Rpb25TZWN0aW9uUmVhZGVyAAAAQBMQABUAAACgEhAAYgAAAHQBAAAZAAAATWVtb3J5U2VjdGlvblJlYWRlcgBwExAAEwAAAKASEABiAAAAfgEAABsAAABHbG9iYWxTZWN0aW9uUmVhZGVyAJwTEAATAAAAoBIQAGIAAACIAQAAKAAAAG9wZXJhdG9yIHJlYWRlckV4cG9ydFNlY3Rpb25SZWFkZXIAANcTEAATAAAAoBIQAGIAAACnAQAALQAAAEVsZW1lbnRTZWN0aW9uUmVhZGVyBBQQABQAAACgEhAAYgAAALEBAAArAAAAZWxlbWVudCBpdGVtc251bV9lbGVtZW50cyBpcyBvdXQgb2YgYm91bmRzQ29kZVNlY3Rpb25SZWFkZXIAWhQQABEAAACgEhAAYgAAAN0BAAAdAAAAZnVuY3Rpb24gYm9keWxvY2FsX2NvdW50IGlzIG91dCBvZiBib3VuZHNsb2NhbHNfdG90YWwgaXMgb3V0IG9mIGJvdW5kc0V4cGVjdGVkIGVuZCBvZiBmdW5jdGlvbiBtYXJrZXJUYWJsZVNlY3Rpb25SZWFkZXIA6RQQABIAAACgEhAAYgAAACUCAAAbAAAARGF0YVNlY3Rpb25SZWFkZXIAAAAUFRAAEQAAAKASEABiAAAALwIAACMAAABkYXRhIGVudHJ5bmFtZSBtYXAgc2l6ZSBpcyBvdXQgb2YgYm91bmROYW1lU2VjdGlvblJlYWRlcmcVEAARAAAAoBIQAGIAAABdAgAADAAAAGZ1bmN0aW9uIGNvdW50IGlzIG91dCBvZiBib3VuZHNzZWN0aW9uUmVsb2NTZWN0aW9uUmVhZGVythUQABIAAACgEhAAYgAAAJcCAAANAAAATGlua2luZ1NlY3Rpb25SZWFkZXLgFRAAFAAAAKASEABiAAAApgIAABUAAACgEhAAYgAAABEDAAASAAAAaW50ZXJuYWwgZXJyb3I6IGVudGVyZWQgdW5yZWFjaGFibGUgY29kZaASEABiAAAAOgMAABIAAACgEhAAYgAAAFQDAAASAAAAZGF0YW1vZHVsZV9yZWFkZXIAAACgEhAAYgAAALADAAAdAAAAoBIQAGIAAACIAwAAJQAAAFBhcnNlciBpbiBlbmQgc3RhdGUAoBIQAGIAAACJAwAAJgAAAFBhcnNlciBpbiBlcnJvciBzdGF0ZVRyaWVkIHRvIHNocmluayB0byBhIGxhcmdlciBjYXBhY2l0eTw6OmNvcmU6Om1hY3Jvczo6cGFuaWMgbWFjcm9zPgD1FhAAHgAAAAMAAAAKAAAAaW50ZXJuYWwgZXJyb3I6IGVudGVyZWQgdW5yZWFjaGFibGUgY29kZVVuZXhwZWN0ZWQgZGF0YSBhdCB0aGUgZW5kIG9mIHRoZSBzZWN0aW9uRnVuY3Rpb24gYm9keSBleHRlbmRzIHBhc3QgZW5kIG9mIHRoZSBjb2RlIHNlY3Rpb25VbmV4cGVjdGVkIGRhdGEgYXQgdGhlIGVuZCBvZiB0aGUgc2VjdGlvbhEAAAAEAAAABAAAABIAAAATAAAAFAAAAC9ydXN0Yy8xOWJkOTM0Njc2MTdhNDQ3YzIyZWMzMmNjMWNmMTRkNDBjYjg0Y2NmL3NyYy9saWJjb3JlL21hY3Jvcy9tb2QucnMAAADoFxAASQAAAA8AAAAoAAAAFQAAAAAAAAABAAAAFgAAAGNhbGxlZCBgT3B0aW9uOjp1bndyYXAoKWAgb24gYSBgTm9uZWAgdmFsdWUAFwAAABAAAAAEAAAAGAAAABkAAAAaAAAADAAAAAQAAAAbAAAAc3JjL2xpYmFsbG9jL3Jhd192ZWMucnNjYXBhY2l0eSBvdmVyZmxvd6QYEAAXAAAACQMAAAUAAABgLi4A3RgQAAIAAAAhAAAAAAAAAAEAAAAiAAAAaW5kZXggb3V0IG9mIGJvdW5kczogdGhlIGxlbiBpcyAgYnV0IHRoZSBpbmRleCBpcyAAAPgYEAAgAAAAGBkQABIAAABjYWxsZWQgYE9wdGlvbjo6dW53cmFwKClgIG9uIGEgYE5vbmVgIHZhbHVlc3JjL2xpYmNvcmUvb3B0aW9uLnJzZxkQABUAAAB9AQAAFQAAANwYEAAAAAAAZxkQABUAAACkBAAABQAAADogAADcGBAAAAAAAKQZEAACAAAAc3JjL2xpYmNvcmUvcmVzdWx0LnJzAAAAuBkQABUAAACkBAAABQAAAHNyYy9saWJjb3JlL3NsaWNlL21vZC5yc2luZGV4ICBvdXQgb2YgcmFuZ2UgZm9yIHNsaWNlIG9mIGxlbmd0aCD4GRAABgAAAP4ZEAAiAAAA4BkQABgAAAByCgAABQAAAHNsaWNlIGluZGV4IHN0YXJ0cyBhdCAgYnV0IGVuZHMgYXQgAEAaEAAWAAAAVhoQAA0AAADgGRAAGAAAAHgKAAAFAAAAc3JjL2xpYmNvcmUvc3RyL21vZC5ycwEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwMDAwMDAwMDAwMDAwMDAwQEBAQEAAAAAAAAAAAAAABbLi4uXWJ5dGUgaW5kZXggIGlzIG91dCBvZiBib3VuZHMgb2YgYJ8bEAALAAAAqhsQABYAAADcGBAAAQAAAIQaEAAWAAAABAgAAAkAAABiZWdpbiA8PSBlbmQgKCA8PSApIHdoZW4gc2xpY2luZyBgAADoGxAADgAAAPYbEAAEAAAA+hsQABAAAADcGBAAAQAAAIQaEAAWAAAACAgAAAUAAAAgaXMgbm90IGEgY2hhciBib3VuZGFyeTsgaXQgaXMgaW5zaWRlICAoYnl0ZXMgKSBvZiBgnxsQAAsAAAA8HBAAJgAAAGIcEAAIAAAAahwQAAYAAADcGBAAAQAAAIQaEAAWAAAAFQgAAAUAAAAweDAwMDEwMjAzMDQwNTA2MDcwODA5MTAxMTEyMTMxNDE1MTYxNzE4MTkyMDIxMjIyMzI0MjUyNjI3MjgyOTMwMzEzMjMzMzQzNTM2MzczODM5NDA0MTQyNDM0NDQ1NDY0NzQ4NDk1MDUxNTI1MzU0NTU1NjU3NTg1OTYwNjE2MjYzNjQ2NTY2Njc2ODY5NzA3MTcyNzM3NDc1NzY3Nzc4Nzk4MDgxODI4Mzg0ODU4Njg3ODg4OTkwOTE5MjkzOTQ5NTk2OTc5ODk5c3JjL2xpYmNvcmUvZm10L21vZC5yc3IdEAAWAAAAUwQAACgAAAByHRAAFgAAAF4EAAAoAAAAc3JjL2xpYmNvcmUvdW5pY29kZS9ib29sX3RyaWUucnOoHRAAIAAAACcAAAAZAAAAqB0QACAAAAAoAAAAIAAAAKgdEAAgAAAAKgAAABkAAACoHRAAIAAAACsAAAAYAAAAqB0QACAAAAAsAAAAIAAAAAABAwUFBgYDBwYICAkRChwLGQwUDRIODQ8EEAMSEhMJFgEXBRgCGQMaBxwCHQEfFiADKwQsAi0LLgEwAzECMgGnAqkCqgSrCPoC+wX9BP4D/wmteHmLjaIwV1iLjJAcHd0OD0tM+/wuLz9cXV+14oSNjpGSqbG6u8XGycre5OX/AAQREikxNDc6Oz1JSl2EjpKpsbS6u8bKzs/k5QAEDQ4REikxNDo7RUZJSl5kZYSRm53Jzs8NESlFSVdkZY2RqbS6u8XJ3+Tl8AQNEUVJZGWAgYSyvL6/1dfw8YOFi6Smvr/Fx87P2ttImL3Nxs7PSU5PV1leX4mOj7G2t7/BxsfXERYXW1z29/7/gA1tcd7fDg8fbm8cHV99fq6vu7z6FhceH0ZHTk9YWlxefn+1xdTV3PDx9XJzj3R1lpcvXyYuL6evt7/Hz9ffmkCXmDCPH8DBzv9OT1pbBwgPECcv7u9ubzc9P0JFkJH+/1NndcjJ0NHY2ef+/wAgXyKC3wSCRAgbBAYRgawOgKs1HhWA4AMZCAEELwQ0BAcDAQcGBxEKUA8SB1UIAgQcCgkDCAMHAwIDAwMMBAUDCwYBDhUFOgMRBwYFEAdXBwIHFQ1QBEMDLQMBBBEGDww6BB0lXyBtBGolgMgFgrADGgaC/QNZBxULFwkUDBQMagYKBhoGWQcrBUYKLAQMBAEDMQssBBoGCwOArAYKBh9BTAQtA3QIPAMPAzwHOAgrBYL/ERgILxEtAyAQIQ+AjASClxkLFYiUBS8FOwcCDhgJgLAwdAyA1hoMBYD/BYC2BSQMm8YK0jAQhI0DNwmBXBSAuAiAxzA1BAoGOAhGCAwGdAseA1oEWQmAgxgcChYJSAiAigarpAwXBDGhBIHaJgcMBQWApRGBbRB4KCoGTASAjQSAvgMbAw8NAAYBAQMBBAIICAkCCgULAhABEQQSBRMRFAIVAhcCGQQcBR0IJAFqA2sCvALRAtQM1QnWAtcC2gHgBeEC6ALuIPAE+Qb6AgwnOz5OT4+enp8GBwk2PT5W89DRBBQYNjdWV701zs/gEoeJjp4EDQ4REikxNDpFRklKTk9kZVpctrcbHKip2NkJN5CRqAcKOz5maY+Sb1/u71pimpsnKFWdoKGjpKeorbq8xAYLDBUdOj9FUaanzM2gBxkaIiU+P8XGBCAjJSYoMzg6SEpMUFNVVlhaXF5gY2Vma3N4fX+KpKqvsMDQDHKjpMvMbm9eInsFAwQtA2UEAS8ugIIdAzEPHAQkCR4FKwVEBA4qgKoGJAQkBCgINAsBgJCBNwkWCgiAmDkDYwgJMBYFIQMbBQFAOARLBS8ECgcJB0AgJwQMCTYDOgUaBwQMB1BJNzMNMwcuCAqBJh+AgSgIKoCGFwlOBB4PQw4ZBwoGRwknCXULP0EqBjsFCgZRBgEFEAMFgItgIEgICoCmXiJFCwoGDRM5Bwo2LAQQgMA8ZFMMAYCgRRtICFMdOYEHRgodA0dJNwMOCAoGOQcKgTYZgMcyDYObZnULgMSKvIQvj9GCR6G5gjkHKgQCYCYKRgooBROCsFtlSwQ5BxFABByX+AiC86UNgR8xAxEECIGMiQRrBQ0DCQcQk2CA9gpzCG4XRoCaFAxXCRmAh4FHA4VCDxWFUCuA1S0DGgQCgXA6BQGFAIDXKUwECgQCgxFETD2AwjwGAQRVBRs0AoEOLARkDFYKDQNdAz05HQ0sBAkHAg4GgJqD1goNAwsFdAxZBwwUDAQ4CAoGKAgeUncDMQOApgwUBAMFAw0GhWoAAAAAAMD77z4AAAAAAA4AAAAAAAAAAAAAAAAAAPj/+////wcAAAAAAAAU/iH+AAwAAAACAAAAAAAAUB4ggAAMAABABgAAAAAAABCGOQIAAAAjAL4hAAAMAAD8AgAAAAAAANAeIMAADAAAAAQAAAAAAABAASCAAAAAAAARAAAAAAAAwME9YAAMAAAAAgAAAAAAAJBEMGAADAAAAAMAAAAAAABYHiCAAAwAAAAAhFyAAAAAAAAAAAAAAPIHgH8AAAAAAAAAAAAAAADyHwA/AAAAAAAAAAAAAwAAoAIAAAAAAAD+f9/g//7///8fQAAAAAAAAAAAAAAAAOD9ZgAAAMMBAB4AZCAAIAAAAAAAAADgAAAAAAAAHAAAABwAAAAMAAAADAAAAAAAAACwP0D+DyAAAAAAADgAAAAAAABgAAAAAAIAAAAAAACHAQQOAACACQAAAAAAAEB/5R/4nwAAAAAAAP9/DwAAAAAA8BcEAAAAAPgPAAMAAAA8OwAAAAAAAECjAwAAAAAAAPDPAAAA9//9IRAD//////////sAEAAAAAAAAAAA/////wEAAAAAAACAAwAAAAAAAAAAgAAAAAD/////AAAAAAD8AAAAAAAGAAAAAAAAAAAAgPc/AAAAwAAAAAAAAAAAAAADAEQIAABgAAAAMAAAAP//A4AAAAAAwD8AAID/AwAAAAAABwAAAAAAyDMAAAAAIAAAAAAAAAAAfmYACBAAAAAAABAAAAAAAACdwQIAAAAAMEAAAAAAACAhAAAAAABAAAAAAP//AAD//wAAAAAAAAAAAAEAAAACAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAUAAAAAAAAAAAYAAAAAAAAAAAcAAAgJCgALDA0ODwAAEBESAAATFBUWAAAXGBkaGwAcAAAAHQAAAAAAAB4fICEAAAAAACIAIwAkJSYAAAAAJwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgpAAAAAAAAAAAAAAAAAAAAACorAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAAAAAAAAAAAC0uAAAvAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMDEyAAAAAAAAAAAAAAAAAAAAAAAAAAAAMwAAACkAAAAAAAA0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA1ADYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADc4AAA4ODg5AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAEAAAAAAAAAAADAB27wAAAAAACHAAAAAGAAAAAAAAAA8AAAAMD/AQAAAAAAAgAAAAAAAP9/AAAAAAAAgAMAAAAAAHgGBwAAAIDvHwAAAAAAAAAIAAMAAAAAAMB/AB4AAAAAAAAAAAAAAIDTQAAAAID4BwAAAwAAAAAAAFgBAIAAwB8fAAAAAAAAAAD/XAAAQAAAAAAAAAAAAAD5pQ0AAAAAAAAAAAAAAACAPLABAAAwAAAAAAAAAAAAAPinAQAAAAAAAAAAAAAAACi/AAAAAOC8DwAAAAAAAACA/wYAAPAMAQAAAP4HAAAAAPh5gAB+DgAAAAAA/H8DAAAAAAAAAAAAAH+/AAD8///8bQAAAAAAAAB+tL8AAAAAAAAAAACjAAAAAAAAAAAAAAAYAAAAAAAAAB8AAAAAAAAAfwAAgAAAAAAAAACABwAAAAAAAAAAYAAAAAAAAAAAoMMH+OcPAAAAPAAAHAAAAAAAAAD///////9/+P//////HyAAEAAA+P7/AAB////52wcAAAAAAAAA8AAAAAB/AAAAAADwBwAAAAAAAAAAAAD///////////////////////8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP//////////////////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPgDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD+/////7+2AAAAAAAAAAAA/wcAAAAAAPj//wAAAQAAAAAAAAAAAAAAwJ+fPQAAAAACAAAA////BwAAAAAAAAAAAADA/wEAAAAAAAD4DyBQIxAASgAAAKAlEAAAAgAAoCcQADoAAAAAAQIDBAUGBwgJCAoLDA0ODxAREhMUAhUWFxgZGhscHR4fIAICAgICAgICAgIhAgICAgICAgICAgICAgIiIyQlJgInAigCAgIpKisCLC0uLzACAjECAgIyAgICAgICAgIzAgI0AgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgI1AjYCNwICAgICAgICOAI5AgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgI6OzwCAgICPQICPj9AQUJDREVGAgICRwICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJIAgICAgICAgICAgJJAgICAgI7AgABAgICAgMCAgICBAIFBgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJjbG9zdXJlIGludm9rZWQgcmVjdXJzaXZlbHkgb3IgZGVzdHJveWVkIGFscmVhZHkAQZjfwAAL+AMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAyLGBgAAEbmFtZQG9sYGAAN8CABBfX3diaW5kZ2VuX3Rocm93AUl3YXNtcGFyc2VyOjpiaW5hcnlfcmVhZGVyOjpCaW5hcnlSZWFkZXI6OnJlYWRfb3BlcmF0b3I6Omg0YWFmNDM5N2Y5ZTk4ZTMzAkN3YXNtX3RyYW5zZm9ybWVyOjp0cmFuc2Zvcm1lcjo6bG93ZXJfaTY0X2ltcG9ydHM6Omg0MmJmNmY2YjgxNzBlMjViA1g8d2FzbXBhcnNlcjo6cGFyc2VyOjpQYXJzZXIgYXMgd2FzbXBhcnNlcjo6cGFyc2VyOjpXYXNtRGVjb2Rlcj46OnJlYWQ6Omg1OWM4YzA1OGRmMzkxNWU1BDdkbG1hbGxvYzo6ZGxtYWxsb2M6OkRsbWFsbG9jOjptYWxsb2M6OmhlMjNkNjZjNjYyNWQyYmZhBT53YXNtcGFyc2VyOjpwYXJzZXI6OlBhcnNlcjo6cmVhZF9uYW1lX2VudHJ5OjpoMmE3MGIxNWRjNTJlNGQ0NgYuY29yZTo6c3RyOjpzbGljZV9lcnJvcl9mYWlsOjpoZTY5NWViNGY1ZDNmYzFlYQcxPHN0ciBhcyBjb3JlOjpmbXQ6OkRlYnVnPjo6Zm10OjpoMmQ1NzAxY2FlZjBlNDIwMggjY29yZTo6Zm10Ojp3cml0ZTo6aDA0OGYwOGExMDk5NmQzYzQJSndhc21wYXJzZXI6OmJpbmFyeV9yZWFkZXI6OkJpbmFyeVJlYWRlcjo6cmVhZF9mdW5jX3R5cGU6OmgxYmE4NDk5YTY3NDQ1ZTY4ClN3YXNtcGFyc2VyOjpyZWFkZXJzOjplbGVtZW50X3NlY3Rpb246OkVsZW1lbnRTZWN0aW9uUmVhZGVyOjpyZWFkOjpoNjY5MWE0MWM2OTljMTJkNgsxY29yZTo6c3RyOjpydW5fdXRmOF92YWxpZGF0aW9uOjpoNGY1NTliZWFlYzdlZDdmYgwsY29yZTo6Zm10OjpGb3JtYXR0ZXI6OnBhZDo6aDdhNzkzM2E1ZDg4NGUyZWUNNWRsbWFsbG9jOjpkbG1hbGxvYzo6RGxtYWxsb2M6OmZyZWU6OmgzZTJlZThlOTIyNWMyOGQ0DjhkbG1hbGxvYzo6ZGxtYWxsb2M6OkRsbWFsbG9jOjpyZWFsbG9jOjpoYzk0NGNkNjA4OWUwOTU4Zg81Y29yZTo6Zm10OjpGb3JtYXR0ZXI6OnBhZF9pbnRlZ3JhbDo6aDU3ZTAzMDUyODljYzAzMmYQUXdhc21wYXJzZXI6OnJlYWRlcnM6OmltcG9ydF9zZWN0aW9uOjpJbXBvcnRTZWN0aW9uUmVhZGVyOjpyZWFkOjpoNTMxYTIyM2RjYzI4NjNkMRE+ZGxtYWxsb2M6OmRsbWFsbG9jOjpEbG1hbGxvYzo6ZGlzcG9zZV9jaHVuazo6aDI3ZWEwYjk1NTZlODRiMjQSQHdhc21wYXJzZXI6OnBhcnNlcjo6UGFyc2VyOjpjaGVja19zZWN0aW9uX2VuZDo6aGZkYWViYWY2ZDRkYjgyZDMTO3dhc21fdHJhbnNmb3JtZXI6OnV0aWxzOjpsb3dlcl9mdW5jX2JvZHk6Omg2MjBlZTRlNWMwOGMwMzU5FE13YXNtcGFyc2VyOjpiaW5hcnlfcmVhZGVyOjpCaW5hcnlSZWFkZXI6OnJlYWRfc2VjdGlvbl9jb2RlOjpoMzM2OTY2YWQzOGFjYjExZBVId2FzbV90cmFuc2Zvcm1lcjo6dXRpbHM6OmdlbmVyYXRlX3RyYW1wb2xpbmVfZnVuY3Rpb246Omg2NmUwZmMwODc2YTY1NWU3FkZ3YXNtcGFyc2VyOjpwYXJzZXI6OlBhcnNlcjo6cmVhZF9lbGVtZW50X2VudHJ5X2JvZHk6OmhkNTYwMjliNDlkOGM4Mzc0F0J3YXNtcGFyc2VyOjpyZWFkZXJzOjptb2R1bGU6Ok1vZHVsZVJlYWRlcjo6cmVhZDo6aGQzNDQxZDBhYTdiYjJhY2UYMjxjaGFyIGFzIGNvcmU6OmZtdDo6RGVidWc+OjpmbXQ6Omg0M2FiNGU4OTFkN2IwZWU4GT93YXNtcGFyc2VyOjpwYXJzZXI6OlBhcnNlcjo6Y3VycmVudF9wb3NpdGlvbjo6aDRmY2IxMzMwOWI1N2YyMWIaTXdhc21wYXJzZXI6OnJlYWRlcnM6OmRhdGFfc2VjdGlvbjo6RGF0YVNlY3Rpb25SZWFkZXI6OnJlYWQ6OmhjMTlkMzEyNWYxMjRhYmE2G093YXNtX3RyYW5zZm9ybWVyOjp0cmFuc2Zvcm1lcjo6UmVwbGFjZW1lbnRCdWY6OmdldF9zaXplX2RpZmY6Omg1Yjg1YjkyYTdhNTg2NDgyHDBjb3JlOjpwdHI6OnJlYWxfZHJvcF9pbl9wbGFjZTo6aDA5M2U1MzRlYzg1MjQyNDgdOndhc21wYXJzZXI6OnBhcnNlcjo6UGFyc2VyOjpyZWFkX25hbWluZzo6aGQ1NTI3MWQzYWI3YTU4ZTQeOWRsbWFsbG9jOjpkbG1hbGxvYzo6RGxtYWxsb2M6Om1lbWFsaWduOjpoMTZiOTI4ZGNlNThmN2RlNh8yY29yZTo6dW5pY29kZTo6cHJpbnRhYmxlOjpjaGVjazo6aDA0NzMzODY0YWVhMjhiMTMgQHdhc21wYXJzZXI6OnBhcnNlcjo6UGFyc2VyOjpyZWFkX25leHRfc2VjdGlvbjo6aDhkYjQ1ZWRlYzM2YTZhMzUhSHdhc21wYXJzZXI6OmJpbmFyeV9yZWFkZXI6OkJpbmFyeVJlYWRlcjo6cmVhZF92YXJfczMzOjpoMGQ2NDYwOTQzNzFjNWY2YSJBd2FzbXBhcnNlcjo6cGFyc2VyOjpQYXJzZXI6OnJlYWRfZWxlbWVudF9lbnRyeTo6aDUzOTk4Njg3NDRhNmEyYzMjQGFsbG9jOjpyYXdfdmVjOjpSYXdWZWM8VCxBPjo6cmVzZXJ2ZV9pbnRlcm5hbDo6aDJjYWFjYjgzNDZlYWE1YWYkQGFsbG9jOjpyYXdfdmVjOjpSYXdWZWM8VCxBPjo6cmVzZXJ2ZV9pbnRlcm5hbDo6aGViM2ZiNjIyNmE4MWYzZjUlSHdhc21wYXJzZXI6OmJpbmFyeV9yZWFkZXI6OkJpbmFyeVJlYWRlcjo6cmVhZF92YXJfaTMyOjpoZmU1MWIzOTY4NjE4Nzc2YyYwY29yZTo6cHRyOjpyZWFsX2Ryb3BfaW5fcGxhY2U6OmgyYzYzN2U3ZTk5MjM4NGMyJ0BhbGxvYzo6cmF3X3ZlYzo6UmF3VmVjPFQsQT46OnJlc2VydmVfaW50ZXJuYWw6OmgxNjM4YzFmMzM2NTdhNDA3KEBhbGxvYzo6cmF3X3ZlYzo6UmF3VmVjPFQsQT46OnJlc2VydmVfaW50ZXJuYWw6Omg0ODBlNjE1MjRkZjE1NTcxKUBhbGxvYzo6cmF3X3ZlYzo6UmF3VmVjPFQsQT46OnJlc2VydmVfaW50ZXJuYWw6Omg2N2Y2N2RkMzk2ZDVjNDUxKkBhbGxvYzo6cmF3X3ZlYzo6UmF3VmVjPFQsQT46OnJlc2VydmVfaW50ZXJuYWw6Omg5YjMxODQ1YzRiY2YzNGZiK113YXNtX3RyYW5zZm9ybWVyOjp0cmFuc2Zvcm1lcjo6UmVwbGFjZW1lbnRCdWY6OnJlcGxhY2VfdmFydWludF93aXRoX29mZnNldDo6aDFhYjBmYjI5NGY3NWM5ZmIsL2NvcmU6OmZtdDo6bnVtOjppbXA6OmZtdF91NjQ6Omg4MzhlZTFiNjAyYWE3M2NmLUNkbG1hbGxvYzo6ZGxtYWxsb2M6OkRsbWFsbG9jOjppbnNlcnRfbGFyZ2VfY2h1bms6OmhmOTBiYzU0N2M1MjlkNzQ5Ljs8Jm11dCBXIGFzIGNvcmU6OmZtdDo6V3JpdGU+Ojp3cml0ZV9jaGFyOjpoZjRiMDJmZTdjZTNjYjUyMi9Pd2FzbXBhcnNlcjo6cmVhZGVyczo6cmVsb2Nfc2VjdGlvbjo6UmVsb2NTZWN0aW9uUmVhZGVyOjpyZWFkOjpoYjJmMzA3N2FiZTRmMjZkYTBAd2FzbXBhcnNlcjo6cGFyc2VyOjpQYXJzZXI6OnJlYWRfaW1wb3J0X2VudHJ5OjpoOTc5NzhjZWIzZWE0ZmZmNjFJY29yZTo6Zm10OjpudW06OjxpbXBsIGNvcmU6OmZtdDo6RGVidWcgZm9yIHVzaXplPjo6Zm10OjpoOWU4ZWVkZWVmYjgxOWFlNzJFd2FzbXBhcnNlcjo6YmluYXJ5X3JlYWRlcjo6QmluYXJ5UmVhZGVyOjpyZWFkX3R5cGU6OmhjOTEzNWE0NWJlNTI3MTQ5M0t3YXNtcGFyc2VyOjpiaW5hcnlfcmVhZGVyOjpCaW5hcnlSZWFkZXI6OnJlYWRfdGFibGVfdHlwZTo6aGFhN2NiNTg2MTZhNDM5NWQ0Pndhc21wYXJzZXI6OnBhcnNlcjo6UGFyc2VyOjpyZWFkX2RhdGFfZW50cnk6OmgyNTcxYThjMWI4YTFjZGFiNWg8c3RkOjpwYW5pY2tpbmc6OmJlZ2luX3BhbmljX2hhbmRsZXI6OlBhbmljUGF5bG9hZCBhcyBjb3JlOjpwYW5pYzo6Qm94TWVVcD46OnRha2VfYm94OjpoZDJlODMxMTdhZTA5NzU3ZjZRd2FzbXBhcnNlcjo6cmVhZGVyczo6ZWxlbWVudF9zZWN0aW9uOjpFbGVtZW50SXRlbXNSZWFkZXI6OnJlYWQ6OmhmMTlmYmI5ZTk3NWNmMjNlN0NkbG1hbGxvYzo6ZGxtYWxsb2M6OkRsbWFsbG9jOjp1bmxpbmtfbGFyZ2VfY2h1bms6Omg1MGQ1ZTg4YmMwMmQ2MTEzOD53YXNtcGFyc2VyOjpwYXJzZXI6OlBhcnNlcjo6cmVhZF90eXBlX2VudHJ5OjpoMTI3YjNjNjdhZGUwNjQzZjk9Y29yZTo6dW5pY29kZTo6Ym9vbF90cmllOjpCb29sVHJpZTo6bG9va3VwOjpoMmNlZjYwYTE0YWIxZmNkZDpNd2FzbXBhcnNlcjo6cmVhZGVyczo6bmFtZV9zZWN0aW9uOjpOYW1lU2VjdGlvblJlYWRlcjo6cmVhZDo6aDEyMWViMWJiNGFmYTQzMzY7VHdhc21fdHJhbnNmb3JtZXI6OnRyYW5zZm9ybWVyOjpSZXBsYWNlbWVudEJ1Zjo6aW5zZXJ0X2luX3Bvc2l0aW9uOjpoZmFkNTIzOTM4YjEwNTY4YjxAYWxsb2M6OnJhd192ZWM6OlJhd1ZlYzxULEE+OjpyZXNlcnZlX2ludGVybmFsOjpoNzFhM2ViZDhmNzdkMDU2ZD1AYWxsb2M6OnJhd192ZWM6OlJhd1ZlYzxULEE+OjpyZXNlcnZlX2ludGVybmFsOjpoZTBjMTUzODRjMWEwZGQ0OT5Od2FzbXBhcnNlcjo6cmVhZGVyczo6cmVsb2Nfc2VjdGlvbjo6UmVsb2NTZWN0aW9uUmVhZGVyOjpuZXc6OmgwMWIwYTc0MzI4ZjIwZTUwP0BhbGxvYzo6cmF3X3ZlYzo6UmF3VmVjPFQsQT46OnJlc2VydmVfaW50ZXJuYWw6Omg2NmZiNjMxZWFmNjM4YjBiQEB3YXNtcGFyc2VyOjpwYXJzZXI6OlBhcnNlcjo6cmVhZF9tZW1vcnlfZW50cnk6Omg2MmI3M2ViMDYxY2RjYWQ4QT93YXNtcGFyc2VyOjpwYXJzZXI6OlBhcnNlcjo6cmVhZF90YWJsZV9lbnRyeTo6aDEzOGM0NDJkYzRkOThlOTdCQGFsbG9jOjpyYXdfdmVjOjpSYXdWZWM8VCxBPjo6cmVzZXJ2ZV9pbnRlcm5hbDo6aDFkMTZmN2JkNDllODg4NDFDQGFsbG9jOjpyYXdfdmVjOjpSYXdWZWM8VCxBPjo6cmVzZXJ2ZV9pbnRlcm5hbDo6aDI2MDQ1YTdhY2U5ZDEzYzREQXdhc21fdHJhbnNmb3JtZXI6OnV0aWxzOjpyZWFkX2J5dGVzX2FzX3ZhcnVuaXQ6OmhiZTUzOTcxODEwY2EyZTQyRU93YXNtcGFyc2VyOjpyZWFkZXJzOjpuYW1lX3NlY3Rpb246OkZ1bmN0aW9uTG9jYWxSZWFkZXI6OnJlYWQ6Omg2MzY3N2RhMDFmMzdlYzY1Rkh3YXNtcGFyc2VyOjpiaW5hcnlfcmVhZGVyOjpCaW5hcnlSZWFkZXI6OnJlYWRfdmFyX3UzMjo6aDFiNWVkMTIyM2UzYzcxODhHSHdhc21wYXJzZXI6OmJpbmFyeV9yZWFkZXI6OkJpbmFyeVJlYWRlcjo6cmVhZF92YXJfaTY0OjpoZDhlN2ZiMDc0ZTdhNGM4YUhRd2FzbXBhcnNlcjo6cmVhZGVyczo6Z2xvYmFsX3NlY3Rpb246Okdsb2JhbFNlY3Rpb25SZWFkZXI6OnJlYWQ6OmhmODkyMjNlMzU5MjU1NWMwSUB3YXNtcGFyc2VyOjpwYXJzZXI6OlBhcnNlcjo6cmVhZF9nbG9iYWxfZW50cnk6Omg5MmM0Zjg0YzkyZjBjNWZmSkF3YXNtcGFyc2VyOjpwYXJzZXI6OlBhcnNlcjo6cmVhZF9mdW5jdGlvbl9ib2R5OjpoMmZhOWEzM2FhNDM1NDdkN0s3c3RkOjpwYW5pY2tpbmc6OnJ1c3RfcGFuaWNfd2l0aF9ob29rOjpoZjNmYmRkM2JkYWVhZmY4NkxRd2FzbXBhcnNlcjo6cmVhZGVyczo6ZXhwb3J0X3NlY3Rpb246OkV4cG9ydFNlY3Rpb25SZWFkZXI6OnJlYWQ6OmhmNTg2ZGM2NjE0NGRlM2ExTUx3YXNtcGFyc2VyOjpiaW5hcnlfcmVhZGVyOjpCaW5hcnlSZWFkZXI6OnJlYWRfbWVtb3J5X3R5cGU6Omg3MTQ3YWQxMThjNGNlZmVjTkBhbGxvYzo6cmF3X3ZlYzo6UmF3VmVjPFQsQT46OnJlc2VydmVfaW50ZXJuYWw6OmgyNmJkZDM0NzMwZWNkZTFmT0BhbGxvYzo6cmF3X3ZlYzo6UmF3VmVjPFQsQT46OnJlc2VydmVfaW50ZXJuYWw6Omg3Njg5Yzg2YjczN2FiNTUxUEx3YXNtcGFyc2VyOjpiaW5hcnlfcmVhZGVyOjpCaW5hcnlSZWFkZXI6OnJlYWRfZmlsZV9oZWFkZXI6OmgxMzk3ODZiOTQ2MGJjYWFhUU93YXNtcGFyc2VyOjpiaW5hcnlfcmVhZGVyOjpCaW5hcnlSZWFkZXI6OnJlYWRfc2VjdGlvbl9oZWFkZXI6OmgyYTRmNzhjZjNhYzE4ZGEwUkk8YWxsb2M6OnZlYzo6U3BsaWNlPEk+IGFzIGNvcmU6Om9wczo6ZHJvcDo6RHJvcD46OmRyb3A6OmgzNThlYzVjOTgyNzc2OTM2U1h3YXNtcGFyc2VyOjpyZWFkZXJzOjpjb2RlX3NlY3Rpb246OkZ1bmN0aW9uQm9keTo6Z2V0X29wZXJhdG9yc19yZWFkZXI6OmgwMTlhMzEyNDM1ZDFiYWMzVD93YXNtcGFyc2VyOjpwYXJzZXI6OlBhcnNlcjo6cmVhZF9yZWxvY19lbnRyeTo6aGY1ODg3OGI5OTMwMGViZThVQHdhc21wYXJzZXI6OnBhcnNlcjo6UGFyc2VyOjpyZWFkX2V4cG9ydF9lbnRyeTo6aDFjMWQ1MTM4ZDI0YmY5MDJWYzxzdGQ6OnBhbmlja2luZzo6YmVnaW5fcGFuaWNfaGFuZGxlcjo6UGFuaWNQYXlsb2FkIGFzIGNvcmU6OnBhbmljOjpCb3hNZVVwPjo6Z2V0OjpoOTNiNTVhMTgzZTk0MDNkZldHd2FzbXBhcnNlcjo6YmluYXJ5X3JlYWRlcjo6QmluYXJ5UmVhZGVyOjpyZWFkX3N0cmluZzo6aGNmN2EzMWFmYTA3YTkxZTdYS3dhc21wYXJzZXI6OmJpbmFyeV9yZWFkZXI6OkJpbmFyeVJlYWRlcjo6cmVhZF9yZWxvY190eXBlOjpoOTkyYWZhYzllODEyMDc1Y1lKd2FzbXBhcnNlcjo6YmluYXJ5X3JlYWRlcjo6QmluYXJ5UmVhZGVyOjpyZWFkX2Jsb2NrdHlwZTo6aDE2NjgxM2U3MTAwZmExMzNaR3dhc21wYXJzZXI6OmJpbmFyeV9yZWFkZXI6OkJpbmFyeVJlYWRlcjo6cmVhZF92YXJfdTg6Omg1ODNiZmQ4MzBkODg4NWFjWztjb3JlOjpzbGljZTo6PGltcGwgW1RdPjo6Y29weV9mcm9tX3NsaWNlOjpoYjEyMGJmMTEzNTcyZmRjNFxMd2FzbXBhcnNlcjo6YmluYXJ5X3JlYWRlcjo6QmluYXJ5UmVhZGVyOjpyZWFkX2dsb2JhbF90eXBlOjpoNWQ5YTMxMjFjOGIyODJmN11Id2FzbV90cmFuc2Zvcm1lcjo6dXRpbHM6OmdldF91MzJfYXNfYnl0ZXNfZm9yX3ZhcnVuaXQ6OmhkMDNjNmQ5ZWJlMWM2OWEyXmM8Y29yZTo6aXRlcjo6YWRhcHRlcnM6Ok1hcDxJLEY+IGFzIGNvcmU6Oml0ZXI6OnRyYWl0czo6aXRlcmF0b3I6Okl0ZXJhdG9yPjo6Zm9sZDo6aDg2M2I1YzM3ZTJmMGE2NTVfTXdhc21wYXJzZXI6OnJlYWRlcnM6OmNvZGVfc2VjdGlvbjo6Q29kZVNlY3Rpb25SZWFkZXI6OnJlYWQ6OmhhYzRiMTQ5NGQwMTg2Y2YzYEZ3YXNtcGFyc2VyOjpwYXJzZXI6OlBhcnNlcjo6cmVhZF9zZWN0aW9uX2JvZHlfYnl0ZXM6OmhlYmRjNzc4NzhjYzM3ZWE0YWd3YXNtcGFyc2VyOjpyZWFkZXJzOjpzb3VyY2VtYXBwaW5ndXJsX3NlY3Rpb246OnJlYWRfc291cmNlbWFwcGluZ3VybF9zZWN0aW9uX2NvbnRlbnQ6Omg1OGFlM2RmMDEwN2UwMWRkYk53YXNtcGFyc2VyOjpiaW5hcnlfcmVhZGVyOjpCaW5hcnlSZWFkZXI6OnJlYWRfZXh0ZXJuYWxfa2luZDo6aDQ3NjEzOTk5Mjg1NzRkZmVjQndhc21wYXJzZXI6OnBhcnNlcjo6UGFyc2VyOjpyZWFkX2Z1bmN0aW9uX2VudHJ5OjpoYzc2YjBmOGJmMjBhMmMxYWRBd2FzbXBhcnNlcjo6cGFyc2VyOjpQYXJzZXI6OnJlYWRfbGlua2luZ19lbnRyeTo6aDk4YjY4NzVjYmQyNDBkMzNlSHdhc21wYXJzZXI6OnJlYWRlcnM6OmNvZGVfc2VjdGlvbjo6TG9jYWxzUmVhZGVyOjpyZWFkOjpoZmZjMzJiZDc4NGYzM2FiN2ZKd2FzbXBhcnNlcjo6YmluYXJ5X3JlYWRlcjo6QmluYXJ5UmVhZGVyOjpyZWFkX25hbWVfdHlwZTo6aDNhZTY0NzE4ZGY1MzgwMDZnTXdhc21wYXJzZXI6OmJpbmFyeV9yZWFkZXI6OkJpbmFyeVJlYWRlcjo6cmVhZF9saW5raW5nX3R5cGU6Omg0NzZhMDY0YmI1NWVkMzY2aA9sb3dlckk2NEltcG9ydHNpUXdhc21wYXJzZXI6OmJpbmFyeV9yZWFkZXI6OkJpbmFyeVJlYWRlcjo6cmVhZF9yZXNpemFibGVfbGltaXRzOjpoMDVkMmQyMTU2MjUwODkwOGo5Y29yZTo6dW5pY29kZTo6cHJpbnRhYmxlOjppc19wcmludGFibGU6Omg2MmJmNTk0YzI2MzI5NWNla0ljb3JlOjpmbXQ6Om51bTo6PGltcGwgY29yZTo6Zm10OjpMb3dlckhleCBmb3IgaTg+OjpmbXQ6OmgwMjY4OTA5MGE1ZDU0NTc4bEljb3JlOjpmbXQ6Om51bTo6PGltcGwgY29yZTo6Zm10OjpVcHBlckhleCBmb3IgaTg+OjpmbXQ6Omg3ZmZiZWI3OGY0NTFhZDAxbVB3YXNtcGFyc2VyOjpyZWFkZXJzOjplbGVtZW50X3NlY3Rpb246OkVsZW1lbnRJdGVtc1JlYWRlcjo6bmV3OjpoZGZhNWJkMzQ0ZDI1NDIwN25TPGFsbG9jOjp2ZWM6OlZlYzxUPiBhcyBhbGxvYzo6dmVjOjpTcGVjRXh0ZW5kPFQsST4+OjpzcGVjX2V4dGVuZDo6aDBiN2EwNTRiMzA4MmJjNGZvSmNvcmU6OmZtdDo6bnVtOjo8aW1wbCBjb3JlOjpmbXQ6Okxvd2VySGV4IGZvciBpMzI+OjpmbXQ6OmhlNmQyMzUxYWZiYzI5OTE0cEpjb3JlOjpmbXQ6Om51bTo6PGltcGwgY29yZTo6Zm10OjpVcHBlckhleCBmb3IgaTMyPjo6Zm10OjpoYzYyMjBjZjMzNDBlNzliN3FQd2FzbXBhcnNlcjo6YmluYXJ5X3JlYWRlcjo6QmluYXJ5UmVhZGVyOjpyZWFkX21lbWFyZ19vZl9hbGlnbjo6aDVjMWI3YmQ4MDc3OTY1NjZyQXdhc21wYXJzZXI6OnJlYWRlcnM6Om1vZHVsZTo6TW9kdWxlUmVhZGVyOjpuZXc6Omg0YjhmMzQ1OGI3MGIxMzMxc1t3YXNtcGFyc2VyOjpyZWFkZXJzOjpkYXRhX2NvdW50X3NlY3Rpb246OnJlYWRfZGF0YV9jb3VudF9zZWN0aW9uX2NvbnRlbnQ6OmhkYzFmZTJkNTY4NTRmZTA4dFF3YXNtcGFyc2VyOjpyZWFkZXJzOjpzdGFydF9zZWN0aW9uOjpyZWFkX3N0YXJ0X3NlY3Rpb25fY29udGVudDo6aGMxNjgyMjNiNDgzY2M3NTl1S3dhc21wYXJzZXI6OmJpbmFyeV9yZWFkZXI6OkJpbmFyeVJlYWRlcjo6cmVhZF9sYW5lX2luZGV4OjpoZjgyNjJjM2IwNWU1OGE1YnZId2FzbXBhcnNlcjo6cmVhZGVyczo6bmFtZV9zZWN0aW9uOjpOYW1pbmdSZWFkZXI6OnJlYWQ6OmhmYTE0MTg4MWMzYmVjMWExd1p3YXNtcGFyc2VyOjpyZWFkZXJzOjpuYW1lX3NlY3Rpb246OkxvY2FsTmFtZTo6Z2V0X2Z1bmN0aW9uX2xvY2FsX3JlYWRlcjo6aDVmMjBjZGFiMmY1NGY4ODB4UHdhc21wYXJzZXI6OnJlYWRlcnM6OmV4cG9ydF9zZWN0aW9uOjpFeHBvcnRTZWN0aW9uUmVhZGVyOjpuZXc6OmhlMzA1ZmVlNWE3YTNhZWU0eUx3YXNtcGFyc2VyOjpyZWFkZXJzOjpkYXRhX3NlY3Rpb246OkRhdGFTZWN0aW9uUmVhZGVyOjpuZXc6Omg3YTAwMmEyNzM5NTliMjZhelB3YXNtcGFyc2VyOjpyZWFkZXJzOjpnbG9iYWxfc2VjdGlvbjo6R2xvYmFsU2VjdGlvblJlYWRlcjo6bmV3OjpoZmY2YzA3YWJmNzBlNDliZHtSd2FzbXBhcnNlcjo6cmVhZGVyczo6ZWxlbWVudF9zZWN0aW9uOjpFbGVtZW50U2VjdGlvblJlYWRlcjo6bmV3OjpoOWRjMWU2YWRlNDg4NDEyN3xSd2FzbXBhcnNlcjo6cmVhZGVyczo6bGlua2luZ19zZWN0aW9uOjpMaW5raW5nU2VjdGlvblJlYWRlcjo6bmV3OjpoZWE3MmQ2YmEyZTFkYWFmMH1Hd2FzbXBhcnNlcjo6YmluYXJ5X3JlYWRlcjo6QmluYXJ5UmVhZGVyOjpza2lwX3N0cmluZzo6aDU0ZTFlMmExZGIxOTJhMTR+R3dhc21wYXJzZXI6OnJlYWRlcnM6Om5hbWVfc2VjdGlvbjo6TmFtaW5nUmVhZGVyOjpuZXc6Omg0ZjBlY2Q1MDEyM2E1MGJif1R3YXNtcGFyc2VyOjpyZWFkZXJzOjpmdW5jdGlvbl9zZWN0aW9uOjpGdW5jdGlvblNlY3Rpb25SZWFkZXI6Om5ldzo6aGVlODVkZTM1NWExZDkyMWWAAVB3YXNtcGFyc2VyOjpyZWFkZXJzOjppbXBvcnRfc2VjdGlvbjo6SW1wb3J0U2VjdGlvblJlYWRlcjo6bmV3OjpoMjE2NjA3NTMyMjJhMWQ4MoEBUHdhc21wYXJzZXI6OnJlYWRlcnM6Om1lbW9yeV9zZWN0aW9uOjpNZW1vcnlTZWN0aW9uUmVhZGVyOjpuZXc6Omg0MmJmNmQzNzhlNDRkODMzggFOd2FzbXBhcnNlcjo6cmVhZGVyczo6dGFibGVfc2VjdGlvbjo6VGFibGVTZWN0aW9uUmVhZGVyOjpuZXc6OmhkNjQwYzg1YjRjZTY1MmY1gwFMd2FzbXBhcnNlcjo6cmVhZGVyczo6dHlwZV9zZWN0aW9uOjpUeXBlU2VjdGlvblJlYWRlcjo6bmV3OjpoMGUwZWJlNTQ5YjkyNDRiMoQBTHdhc21wYXJzZXI6OnJlYWRlcnM6OmNvZGVfc2VjdGlvbjo6Q29kZVNlY3Rpb25SZWFkZXI6Om5ldzo6aGYwNzI4Y2ZjZDdhYTNhZTGFAT1hbGxvYzo6cmF3X3ZlYzo6UmF3VmVjPFQsQT46OnNocmlua190b19maXQ6OmhmZTdmMDZlZWNkZDVhMjNkhgE9YWxsb2M6OnJhd192ZWM6OlJhd1ZlYzxULEE+OjpzaHJpbmtfdG9fZml0OjpoOTQ1YWUzM2YyZjA0ZTE1MYcBPWFsbG9jOjpyYXdfdmVjOjpSYXdWZWM8VCxBPjo6c2hyaW5rX3RvX2ZpdDo6aDk2NmE5Y2I1YjUyMGY2OWKIAT1hbGxvYzo6cmF3X3ZlYzo6UmF3VmVjPFQsQT46OnNocmlua190b19maXQ6OmhhNWQwZDE4ZTg0ZjUwMTBliQE9YWxsb2M6OnJhd192ZWM6OlJhd1ZlYzxULEE+OjpzaHJpbmtfdG9fZml0OjpoYjhiOTBmNzE3MjdmNzgwMYoBVXdhc21wYXJzZXI6OnJlYWRlcnM6OmNvZGVfc2VjdGlvbjo6RnVuY3Rpb25Cb2R5OjpnZXRfbG9jYWxzX3JlYWRlcjo6aDUxMTYwZGFiOWRkMWYxOTaLAS5hbGxvYzo6dmVjOjpWZWM8VD46OnJlc2VydmU6OmhmMjAzZDk5ODY4MDhlMDEwjAE/d2FzbV9iaW5kZ2VuOjpjb252ZXJ0OjpjbG9zdXJlczo6aW52b2tlM19tdXQ6OmhhNTM3NWEwM2I5MjM2Y2Q5jQEtYWxsb2M6OnZlYzo6RHJhaW48VD46OmZpbGw6OmhmMGUxYjc3YjU0N2E5OTgyjgFHd2FzbXBhcnNlcjo6YmluYXJ5X3JlYWRlcjo6QmluYXJ5UmVhZGVyOjpyZWFkX21lbWFyZzo6aDkzNWJlMzcyOGQ4MzlhOTePAVM8YWxsb2M6OnZlYzo6VmVjPFQ+IGFzIGFsbG9jOjp2ZWM6OlNwZWNFeHRlbmQ8VCxJPj46OnNwZWNfZXh0ZW5kOjpoNmEwOWY0N2M2NTUzMWJlMJABB3ZlcnNpb26RAUd3YXNtcGFyc2VyOjpiaW5hcnlfcmVhZGVyOjpCaW5hcnlSZWFkZXI6OnJlYWRfdmFyX3UxOjpoMWY3ZmFlMjBmNDhiNjUzZpIBR3dhc21wYXJzZXI6OmJpbmFyeV9yZWFkZXI6OkJpbmFyeVJlYWRlcjo6cmVhZF92YXJfdTc6Omg2ZmYzYTZmNWI2NTlmNjVlkwE9YWxsb2M6OnJhd192ZWM6OlJhd1ZlYzxULEE+OjpzaHJpbmtfdG9fZml0OjpoMDVjNmJjNjdiZjFiMDk3ZZQBLmNvcmU6OnJlc3VsdDo6dW53cmFwX2ZhaWxlZDo6aDQyNmExZWE5MjYzYjkyNzKVAUg8YWxsb2M6OmJveGVkOjpCb3g8W1RdPiBhcyBjb3JlOjpjbG9uZTo6Q2xvbmU+OjpjbG9uZTo6aDM5YmQ1OGZkNTg4MzhiY2aWATthbGxvYzo6cmF3X3ZlYzo6UmF3VmVjPFQsQT46OmFsbG9jYXRlX2luOjpoOTZkYzc3YmQyZDc2ZGIyZpcBO2FsbG9jOjpyYXdfdmVjOjpSYXdWZWM8VCxBPjo6YWxsb2NhdGVfaW46OmhjZjk2MjZmYmNmNzI0Yzk3mAEHbWVtbW92ZZkBO2FsbG9jOjpyYXdfdmVjOjpSYXdWZWM8VCxBPjo6YWxsb2NhdGVfaW46OmgyNWU3YjVmNjMzOTI1YzIwmgE7YWxsb2M6OnJhd192ZWM6OlJhd1ZlYzxULEE+OjphbGxvY2F0ZV9pbjo6aGE2ZjJmYmZjMmRkOGQyY2SbAUg8YWxsb2M6OnZlYzo6RHJhaW48VD4gYXMgY29yZTo6b3BzOjpkcm9wOjpEcm9wPjo6ZHJvcDo6aDZkMmY0YzJmNTI4OGJhOGacAUF3YXNtcGFyc2VyOjpwcmltaXRpdmVzOjpCaW5hcnlSZWFkZXJFcnJvcjo6bmV3OjpoMWZlMmNjNTQxMWFlNDg1NJ0BRndhc21wYXJzZXI6OmJpbmFyeV9yZWFkZXI6OkJpbmFyeVJlYWRlcjo6cmVhZF9ieXRlczo6aDUyNjFjOTE1NDFlMjYxYzGeAUR3YXNtcGFyc2VyOjpiaW5hcnlfcmVhZGVyOjpCaW5hcnlSZWFkZXI6OnJlYWRfdTY0OjpoODgxY2QyZDg0NjFkYmUyYZ8BLGFsbG9jOjp2ZWM6OlZlYzxUPjo6ZHJhaW46Omg1YWZhYTJiZmJkYjE0OTY1oAFGPGFsbG9jOjp2ZWM6OlZlYzxUPiBhcyBjb3JlOjpvcHM6OmRyb3A6OkRyb3A+Ojpkcm9wOjpoZTE1N2YzNzg4YWI1MjQ2ZaEBR3dhc21wYXJzZXI6OmJpbmFyeV9yZWFkZXI6OkJpbmFyeVJlYWRlcjo6c2tpcF92YXJfMzI6Omg3ZDMxYWJkZWM3Zjg0NDM1ogERcnVzdF9iZWdpbl91bndpbmSjAUo8Y29yZTo6b3BzOjpyYW5nZTo6UmFuZ2U8SWR4PiBhcyBjb3JlOjpmbXQ6OkRlYnVnPjo6Zm10OjpoNWZmYzIzMzUyZGE2ZTg1MaQBRHdhc21wYXJzZXI6OmJpbmFyeV9yZWFkZXI6OkJpbmFyeVJlYWRlcjo6cmVhZF91MzI6OmhiZmNlZTZlNjViMzA0MjY3pQFKd2FzbXBhcnNlcjo6YmluYXJ5X3JlYWRlcjo6QmluYXJ5UmVhZGVyOjpza2lwX2luaXRfZXhwcjo6aGQ2YTgwYWRlM2U0MGFlOTSmAT1hbGxvYzo6cmF3X3ZlYzo6UmF3VmVjPFQsQT46OnNocmlua190b19maXQ6Omg0YmRhMDRjMDBlODU0YmNkpwEyd2FzbXBhcnNlcjo6cGFyc2VyOjpQYXJzZXI6Om5ldzo6aDg3N2U2ZmQ2ZDk4MGExNjKoATZjb3JlOjpwYW5pY2tpbmc6OnBhbmljX2JvdW5kc19jaGVjazo6aGU4MjczZTYwMGMzYzhmZDCpATRjb3JlOjpzbGljZTo6c2xpY2VfaW5kZXhfbGVuX2ZhaWw6Omg2OGQxNDRjMTQ4YzlkNWY4qgE2Y29yZTo6c2xpY2U6OnNsaWNlX2luZGV4X29yZGVyX2ZhaWw6OmhmYWZhMmQ2ZWNmZDQ4MzQ0qwFEPGNvcmU6OmZtdDo6QXJndW1lbnRzIGFzIGNvcmU6OmZtdDo6RGlzcGxheT46OmZtdDo6aGExZjIyMDg2ZDEwMDRmMzisATZ3YXNtX3RyYW5zZm9ybWVyOjpsb3dlcl9pNjRfaW1wb3J0czo6aGE3Y2JjMjIxYWRlMmFkMzGtAVM8YWxsb2M6OnZlYzo6VmVjPFQ+IGFzIGFsbG9jOjp2ZWM6OlNwZWNFeHRlbmQ8VCxJPj46OnNwZWNfZXh0ZW5kOjpoYzg1MTc3ZDUxOWQxMzYzOK4BOjwmbXV0IFcgYXMgY29yZTo6Zm10OjpXcml0ZT46OndyaXRlX2ZtdDo6aGE2MTVlMGVmMTdhNDM3MjOvAQ1fX3JkbF9yZWFsbG9jsAFEPGFsbG9jOjp2ZWM6OlZlYzxUPiBhcyBjb3JlOjpjbG9uZTo6Q2xvbmU+OjpjbG9uZTo6aDNjNmU2ZGQ3OGEzZjU0NDOxATdhbGxvYzo6dmVjOjpWZWM8VD46OmludG9fYm94ZWRfc2xpY2U6Omg5NjVjMTRmM2EzYjVmZTg2sgEnY29yZTo6c3RyOjpmcm9tX3V0Zjg6OmhlMjljOGU3ZjYzMDQ5MDE5swEtYWxsb2M6OnZlYzo6VmVjPFQ+OjppbnNlcnQ6OmhmMDRlMDMyMjhmMDYxMDE2tAE7YWxsb2M6OnJhd192ZWM6OlJhd1ZlYzxULEE+OjphbGxvY2F0ZV9pbjo6aDE1YzI5Y2FlYzFlYmQyZTa1ATthbGxvYzo6cmF3X3ZlYzo6UmF3VmVjPFQsQT46OmFsbG9jYXRlX2luOjpoMzdjM2I5ZjNlMGY5Y2RlZrYBLWFsbG9jOjp2ZWM6OlZlYzxUPjo6cmVtb3ZlOjpoYzZiMmMyMDMwODc3MGE4ZLcBLmNvcmU6Om9wdGlvbjo6ZXhwZWN0X2ZhaWxlZDo6aGFjMTVlMDdiMzU5MmUxZjC4AVBhbGxvYzo6c2xpY2U6OjxpbXBsIGFsbG9jOjpib3Jyb3c6OlRvT3duZWQgZm9yIFtUXT46OnRvX293bmVkOjpoODk1NmVmYzkzZDJjYTVmZLkBQ3dhc21wYXJzZXI6OmJpbmFyeV9yZWFkZXI6OkJpbmFyeVJlYWRlcjo6cmVhZF91ODo6aDUxNmU4ZTgyZjdiODAyY2O6AUY8YWxsb2M6OnZlYzo6VmVjPFQ+IGFzIGNvcmU6Om9wczo6ZHJvcDo6RHJvcD46OmRyb3A6OmgyZDU0N2ZjZDZhNTUyOTZluwFjPHN0ZDo6cGFuaWNraW5nOjpiZWdpbl9wYW5pYzo6UGFuaWNQYXlsb2FkPEE+IGFzIGNvcmU6OnBhbmljOjpCb3hNZVVwPjo6dGFrZV9ib3g6OmhmN2ZjMjBmYzlkNWQyNDEyvAFQd2FzbXBhcnNlcjo6cmVhZGVyczo6bW9kdWxlOjpTZWN0aW9uOjpnZXRfbmFtZV9zZWN0aW9uX3JlYWRlcjo6aDU2NWI0NGU2ZDM0NTUxNWS9ATdhbGxvYzo6cmF3X3ZlYzo6UmF3VmVjPFQsQT46OnJlc2VydmU6Omg0ZjNhNDNhNTcwN2QzMWY2vgE3YWxsb2M6OnJhd192ZWM6OlJhd1ZlYzxULEE+OjpyZXNlcnZlOjpoNTNmNDVlODQxZmMzM2QzMb8BN2FsbG9jOjpyYXdfdmVjOjpSYXdWZWM8VCxBPjo6cmVzZXJ2ZTo6aDU4NWIwNDZkOWQxOTRmYWbAATdhbGxvYzo6cmF3X3ZlYzo6UmF3VmVjPFQsQT46OnJlc2VydmU6Omg3MTgyNjI1M2ZjZTg3YWU2wQE3YWxsb2M6OnJhd192ZWM6OlJhd1ZlYzxULEE+OjpyZXNlcnZlOjpoZDE2NDJlOGFiZWNjNWFhZMIBN2FsbG9jOjpyYXdfdmVjOjpSYXdWZWM8VCxBPjo6cmVzZXJ2ZTo6aGRlOWY3N2UwMjAyM2E5YznDATdhbGxvYzo6cmF3X3ZlYzo6UmF3VmVjPFQsQT46OnJlc2VydmU6OmhhZGQ5ZWQ0NjhkZDRkYTUyxAE3YWxsb2M6OnJhd192ZWM6OlJhd1ZlYzxULEE+OjpyZXNlcnZlOjpoMWY4Y2JhMDExNjBhYzc3MMUBN2FsbG9jOjpyYXdfdmVjOjpSYXdWZWM8VCxBPjo6cmVzZXJ2ZTo6aDRhYzkwODMwYzBjNjg3N2bGATdhbGxvYzo6cmF3X3ZlYzo6UmF3VmVjPFQsQT46OnJlc2VydmU6Omg0YzI2ZTM0ZDljZDcyN2EwxwE3YWxsb2M6OnJhd192ZWM6OlJhd1ZlYzxULEE+OjpyZXNlcnZlOjpoNTFiNDQ5MzkzYjBiZjVlYsgBN2FsbG9jOjpyYXdfdmVjOjpSYXdWZWM8VCxBPjo6cmVzZXJ2ZTo6aDg4NTg1ZTNkNDM1NzM0YWHJATdhbGxvYzo6cmF3X3ZlYzo6UmF3VmVjPFQsQT46OnJlc2VydmU6OmhhNzRjNTRmNmQ0OWY1ZGVjygEyYWxsb2M6OnZlYzo6RHJhaW48VD46Om1vdmVfdGFpbDo6aDIwYjE2OGJiNDE1YTViYWXLAQRiY21wzAFDY29yZTo6Zm10OjpGb3JtYXR0ZXI6OnBhZF9pbnRlZ3JhbDo6d3JpdGVfcHJlZml4OjpoNjRkZGQ4YWNlMGU0Y2ZhNc0BSzxhbGxvYzo6dmVjOjpJbnRvSXRlcjxUPiBhcyBjb3JlOjpvcHM6OmRyb3A6OkRyb3A+Ojpkcm9wOjpoYTdjYzRmMTE2NmQ2OWU0ZM4BMnN0ZDo6cGFuaWNraW5nOjpiZWdpbl9wYW5pY19mbXQ6OmhjZGE4YjgzYzhhYTA4ZWUwzwESX19yZGxfYWxsb2NfemVyb2Vk0AFTd2FzbXBhcnNlcjo6cmVhZGVyczo6bW9kdWxlOjpTZWN0aW9uOjpnZXRfbGlua2luZ19zZWN0aW9uX3JlYWRlcjo6aGViZGI5Y2MxNjA4OTAzNWHRAVF3YXNtcGFyc2VyOjpyZWFkZXJzOjptb2R1bGU6OlNlY3Rpb246OmdldF9yZWxvY19zZWN0aW9uX3JlYWRlcjo6aDFhNjIyM2U2ZTNlMzA3YjDSAV13YXNtcGFyc2VyOjpyZWFkZXJzOjptb2R1bGU6OlNlY3Rpb246OmdldF9zb3VyY2VtYXBwaW5ndXJsX3NlY3Rpb25fY29udGVudDo6aGU0OTZlZTYzNWVmYTA1NGHTAVJ3YXNtcGFyc2VyOjpwYXJzZXI6OlBhcnNlcjo6Y3JlYXRlX2N1c3RvbV9zZWN0aW9uX2JpbmFyeV9yZWFkZXI6OmhkOWY3N2YyNTBiNTRiYTBm1AFGPGFsbG9jOjp2ZWM6OlZlYzxUPiBhcyBjb3JlOjpvcHM6OmRyb3A6OkRyb3A+Ojpkcm9wOjpoMmI3NzRiMjUyYzIyZjNlMtUBUHdhc21wYXJzZXI6OnJlYWRlcnM6Om1vZHVsZTo6TW9kdWxlUmVhZGVyOjp2ZXJpZnlfc2VjdGlvbl9lbmQ6OmhhNDBjMDQ0Y2I5NWViYjI01gEpY29yZTo6cGFuaWNraW5nOjpwYW5pYzo6aDA4ZDAyZWYyN2YwNDE3NGPXAQZtZW1jcHnYATBjb3JlOjpwdHI6OnJlYWxfZHJvcF9pbl9wbGFjZTo6aDkwYjAxMTgyN2U3YTFiMzjZARFfX3diaW5kZ2VuX21hbGxvY9oBQ3dhc21wYXJzZXI6OnBhcnNlcjo6UGFyc2VyOjpyZWFkX2RhdGFfZW50cnlfYm9keTo6aGFmOTg1ZTkwZmJiMjcxMDLbAWc8YWxsb2M6OnZlYzo6VmVjPFQ+IGFzIGFsbG9jOjp2ZWM6OlNwZWNFeHRlbmQ8JlQsY29yZTo6c2xpY2U6Okl0ZXI8VD4+Pjo6c3BlY19leHRlbmQ6OmgyYjhiM2ZmZjVjNjdiMWEx3AEwPCZUIGFzIGNvcmU6OmZtdDo6RGVidWc+OjpmbXQ6Omg0OTEyNTJjMjZmZTM2OWEy3QEwPCZUIGFzIGNvcmU6OmZtdDo6RGVidWc+OjpmbXQ6Omg4YThkN2YyYzA2MmZlZWFj3gFQd2FzbXBhcnNlcjo6cmVhZGVyczo6bW9kdWxlOjpTZWN0aW9uOjpnZXRfdHlwZV9zZWN0aW9uX3JlYWRlcjo6aDBmNjQ1MWE3YjkzMDQxMWPfAVR3YXNtcGFyc2VyOjpyZWFkZXJzOjptb2R1bGU6OlNlY3Rpb246OmdldF9mdW5jdGlvbl9zZWN0aW9uX3JlYWRlcjo6aDNiZjVlNzJkNzc1Njc0NGTgAVB3YXNtcGFyc2VyOjpyZWFkZXJzOjptb2R1bGU6OlNlY3Rpb246OmdldF9jb2RlX3NlY3Rpb25fcmVhZGVyOjpoZGMyNDA3ZTQ2ODIxMTMyZuEBUndhc21wYXJzZXI6OnJlYWRlcnM6Om1vZHVsZTo6U2VjdGlvbjo6Z2V0X2V4cG9ydF9zZWN0aW9uX3JlYWRlcjo6aDdjMmNiZTVmNDAwYzg4MWHiAVJ3YXNtcGFyc2VyOjpyZWFkZXJzOjptb2R1bGU6OlNlY3Rpb246OmdldF9pbXBvcnRfc2VjdGlvbl9yZWFkZXI6OmhkY2RhZWUyOGViMjUxMzQy4wFSd2FzbXBhcnNlcjo6cmVhZGVyczo6bW9kdWxlOjpTZWN0aW9uOjpnZXRfZ2xvYmFsX3NlY3Rpb25fcmVhZGVyOjpoMjg4NzM3NWY0OGJiNTY1M+QBUndhc21wYXJzZXI6OnJlYWRlcnM6Om1vZHVsZTo6U2VjdGlvbjo6Z2V0X21lbW9yeV9zZWN0aW9uX3JlYWRlcjo6aGMyNmRmMWYzYjY2OGQyNjTlAVB3YXNtcGFyc2VyOjpyZWFkZXJzOjptb2R1bGU6OlNlY3Rpb246OmdldF9kYXRhX3NlY3Rpb25fcmVhZGVyOjpoOTJhNDMyOWJhOGU1ZDBlM+YBUXdhc21wYXJzZXI6OnJlYWRlcnM6Om1vZHVsZTo6U2VjdGlvbjo6Z2V0X3RhYmxlX3NlY3Rpb25fcmVhZGVyOjpoMzhlOGU5OTRmYmUyYWU4NecBU3dhc21wYXJzZXI6OnJlYWRlcnM6Om1vZHVsZTo6U2VjdGlvbjo6Z2V0X2VsZW1lbnRfc2VjdGlvbl9yZWFkZXI6OmhjYTM0ZTY3MDQxNGVhNzZm6AFSd2FzbXBhcnNlcjo6cmVhZGVyczo6bW9kdWxlOjpTZWN0aW9uOjpnZXRfc3RhcnRfc2VjdGlvbl9jb250ZW50OjpoYjJmNzE4ZGQ1MDY0YTRiY+kBV3dhc21wYXJzZXI6OnJlYWRlcnM6Om1vZHVsZTo6U2VjdGlvbjo6Z2V0X2RhdGFfY291bnRfc2VjdGlvbl9jb250ZW50OjpoMTQ3ZDY3ZDNmNWQxN2M0YeoBOjwmbXV0IFcgYXMgY29yZTo6Zm10OjpXcml0ZT46OndyaXRlX3N0cjo6aGU2ZGMyMGIxNjUzM2U3MTTrATBjb3JlOjpwdHI6OnJlYWxfZHJvcF9pbl9wbGFjZTo6aDM1ZjE2NmUwNjBjODcwMzjsATBjb3JlOjpwdHI6OnJlYWxfZHJvcF9pbl9wbGFjZTo6aDM1ZjE2NmUwNjBjODcwMzjtATBjb3JlOjpwdHI6OnJlYWxfZHJvcF9pbl9wbGFjZTo6aDM1ZjE2NmUwNjBjODcwMzjuATBjb3JlOjpwdHI6OnJlYWxfZHJvcF9pbl9wbGFjZTo6aDM1ZjE2NmUwNjBjODcwMzjvATBjb3JlOjpwdHI6OnJlYWxfZHJvcF9pbl9wbGFjZTo6aDM1ZjE2NmUwNjBjODcwMzjwATBjb3JlOjpwdHI6OnJlYWxfZHJvcF9pbl9wbGFjZTo6aDM1ZjE2NmUwNjBjODcwMzjxATBjb3JlOjpwdHI6OnJlYWxfZHJvcF9pbl9wbGFjZTo6aDM1ZjE2NmUwNjBjODcwMzjyAS1jb3JlOjpwYW5pY2tpbmc6OnBhbmljX2ZtdDo6aDdiODBmZWQ3MjU2YmY2NmbzAQZtZW1zZXT0AS5zdGQ6OnBhbmlja2luZzo6YmVnaW5fcGFuaWM6OmgwZmZlYTZmNGQzYzc5MTM59QEwY29yZTo6cHRyOjpyZWFsX2Ryb3BfaW5fcGxhY2U6OmhkMzFiNDk3NmE0OTAwMjZk9gEKcnVzdF9wYW5pY/cBP3dhc21fYmluZGdlbjo6Y29udmVydDo6Y2xvc3VyZXM6Omludm9rZTRfbXV0OjpoZGY4ZGIyMTBlOWQ3NTQ1MPgBP3dhc21fYmluZGdlbjo6Y29udmVydDo6Y2xvc3VyZXM6Omludm9rZTNfbXV0OjpoMTZlNTUwZDBhZTNlYTliZfkBP3dhc21fYmluZGdlbjo6Y29udmVydDo6Y2xvc3VyZXM6Omludm9rZTNfbXV0OjpoMTlmYTU5Nzc2ZjJiYzdiYfoBP3dhc21fYmluZGdlbjo6Y29udmVydDo6Y2xvc3VyZXM6Omludm9rZTNfbXV0OjpoMWFjMjI5NjhkOTFlYzIzZPsBP3dhc21fYmluZGdlbjo6Y29udmVydDo6Y2xvc3VyZXM6Omludm9rZTNfbXV0OjpoMjEwNmQ2NDc1ODQwNGE1NfwBP3dhc21fYmluZGdlbjo6Y29udmVydDo6Y2xvc3VyZXM6Omludm9rZTNfbXV0OjpoNTQwNmZmZWY5M2VhMmQ2Zv0BP3dhc21fYmluZGdlbjo6Y29udmVydDo6Y2xvc3VyZXM6Omludm9rZTNfbXV0OjpoNzk0OTM3MmRiOGQ4NDNhOf4BP3dhc21fYmluZGdlbjo6Y29udmVydDo6Y2xvc3VyZXM6Omludm9rZTNfbXV0OjpoODM5ZDYyZTM2YzFhYzQwOP8BP3dhc21fYmluZGdlbjo6Y29udmVydDo6Y2xvc3VyZXM6Omludm9rZTNfbXV0OjpoYTVlMjdmZDBmNTU5NTRiNIACP3dhc21fYmluZGdlbjo6Y29udmVydDo6Y2xvc3VyZXM6Omludm9rZTNfbXV0OjpoYTlmMDM5MWU3MGM3YTQyN4ECP3dhc21fYmluZGdlbjo6Y29udmVydDo6Y2xvc3VyZXM6Omludm9rZTNfbXV0OjpoYWVjYWZjMTZjMmJjYzc5NYICP3dhc21fYmluZGdlbjo6Y29udmVydDo6Y2xvc3VyZXM6Omludm9rZTNfbXV0OjpoYjBhODQ2MmY5MWVhMjk5MYMCP3dhc21fYmluZGdlbjo6Y29udmVydDo6Y2xvc3VyZXM6Omludm9rZTNfbXV0OjpoYjcxOGIwODJjN2Q3ZjI2OIQCP3dhc21fYmluZGdlbjo6Y29udmVydDo6Y2xvc3VyZXM6Omludm9rZTNfbXV0OjpoYzQ2NTVjMzUwMWE5MzY3MIUCP3dhc21fYmluZGdlbjo6Y29udmVydDo6Y2xvc3VyZXM6Omludm9rZTJfbXV0OjpoN2I0ZDZmMjZkZDY0ZGU1Y4YCP3dhc21fYmluZGdlbjo6Y29udmVydDo6Y2xvc3VyZXM6Omludm9rZTJfbXV0OjpoZTM0MWEwNDRjMjZlYzRhZYcCO3dhc21fYmluZGdlbjo6YW55cmVmOjpIRUFQX1NMQUI6Ol9fZ2V0aXQ6Omg1NzljNTU5NGE5MDRkMTRkiAILX19yZGxfYWxsb2OJAoABY29yZTo6c3RyOjp0cmFpdHM6OjxpbXBsIGNvcmU6OnNsaWNlOjpTbGljZUluZGV4PHN0cj4gZm9yIGNvcmU6Om9wczo6cmFuZ2U6OlJhbmdlPHVzaXplPj46OmluZGV4Ojp7e2Nsb3N1cmV9fTo6aDJiYmM1NGU4ZWI3MzBmZTCKAj93YXNtX2JpbmRnZW46OmNvbnZlcnQ6OmNsb3N1cmVzOjppbnZva2UxX211dDo6aGUzZWNiYTY4NGMxZTcxNTCLAk88YWxsb2M6OnJhd192ZWM6OlJhd1ZlYzxULEE+IGFzIGNvcmU6Om9wczo6ZHJvcDo6RHJvcD46OmRyb3A6OmgwYjYzNWJiMjRiMjAyOTgzjAJePHN0ZDo6cGFuaWNraW5nOjpiZWdpbl9wYW5pYzo6UGFuaWNQYXlsb2FkPEE+IGFzIGNvcmU6OnBhbmljOjpCb3hNZVVwPjo6Z2V0OjpoNDUyZGEzZDNiYWQyNjVmMI0CPmNvcmU6OnBhbmljOjpMb2NhdGlvbjo6aW50ZXJuYWxfY29uc3RydWN0b3I6OmgzMzhlZmM1Y2NkYzcyMjkwjgI+YWxsb2M6OnJhd192ZWM6OlJhd1ZlYzxULEE+OjpkZWFsbG9jX2J1ZmZlcjo6aGE3MDBlMjhjNmRlODkwOWSPAk88YWxsb2M6OnJhd192ZWM6OlJhd1ZlYzxULEE+IGFzIGNvcmU6Om9wczo6ZHJvcDo6RHJvcD46OmRyb3A6OmgwY2UyZjg1YWI0Y2UxMjkykAIwY29yZTo6cHRyOjpyZWFsX2Ryb3BfaW5fcGxhY2U6OmgwNDhhOTJkNmI5NTVhMGQ3kQIIcnVzdF9vb22SAjVhbGxvYzo6dmVjOjpWZWM8VD46OmZyb21fcmF3X3BhcnRzOjpoOTdlZGFiOWZmZGExOWY5NJMCMmNvcmU6Om9wdGlvbjo6T3B0aW9uPFQ+Ojp1bndyYXA6Omg3NzEzMTE2ZDE4NzMyYjc5lAIyY29yZTo6b3B0aW9uOjpPcHRpb248VD46OnVud3JhcDo6aDlkYzIzYmIwMTUyZmZlN2WVAg5fX3J1c3RfcmVhbGxvY5YCSTxhbGxvYzo6dmVjOjpWZWM8VD4gYXMgY29yZTo6b3BzOjpkZXJlZjo6RGVyZWY+OjpkZXJlZjo6aDcyYTQ1MWY0NDcxNjQ2OWWXAkk8YWxsb2M6OnZlYzo6VmVjPFQ+IGFzIGNvcmU6Om9wczo6ZGVyZWY6OkRlcmVmPjo6ZGVyZWY6OmhhMmZiOWEzNTE0ZGMyNjYzmAJQPGFsbG9jOjp2ZWM6OlZlYzxUPiBhcyBjb3JlOjpvcHM6OmRlcmVmOjpEZXJlZk11dD46OmRlcmVmX211dDo6aDIzMmI4MzQ2YjBmN2I5NTaZAlA8YWxsb2M6OnZlYzo6VmVjPFQ+IGFzIGNvcmU6Om9wczo6ZGVyZWY6OkRlcmVmTXV0Pjo6ZGVyZWZfbXV0OjpoOGI3MTVlZTM3NzBmYzE3NpoCD19fd2JpbmRnZW5fZnJlZZsCQmRsbWFsbG9jOjpkbG1hbGxvYzo6RGxtYWxsb2M6OmNhbGxvY19tdXN0X2NsZWFyOjpoYmNhYzkzYWY4NWE1NzcwNZwCMDwmVCBhcyBjb3JlOjpmbXQ6OkRlYnVnPjo6Zm10OjpoNzhhYjhkZjFlODE5MGU1M50CDF9fcnVzdF9hbGxvY54CE19fcnVzdF9hbGxvY196ZXJvZWSfAjxhbGxvYzo6cmF3X3ZlYzo6UmF3VmVjPFQ+Ojpmcm9tX3Jhd19wYXJ0czo6aDg5NDlhOWRlYjkxNDI2ZGSgAjY8VCBhcyBjb3JlOjpjb252ZXJ0OjpGcm9tPFQ+Pjo6ZnJvbTo6aDZmZTY2NjUwZjYyNjNiMzihAjA8JlQgYXMgY29yZTo6Zm10OjpEZWJ1Zz46OmZtdDo6aDY0ZmVlMjIyNTA5ZWQ1MWOiAjI8JlQgYXMgY29yZTo6Zm10OjpEaXNwbGF5Pjo6Zm10OjpoYjllZjg3ZWMzY2IzMWU0OaMCLWNvcmU6OmZtdDo6QXJndW1lbnRWMTo6bmV3OjpoNzUwMzdhYTIwNjg4MDE0ZaQCLWNvcmU6OmZtdDo6QXJndW1lbnRWMTo6bmV3OjpoOTEwNDdjMmJlOTljOGExMqUCTjxJIGFzIGNvcmU6Oml0ZXI6OnRyYWl0czo6Y29sbGVjdDo6SW50b0l0ZXJhdG9yPjo6aW50b19pdGVyOjpoNmY4NjEyODJkOWI1MTMwYqYCTjxJIGFzIGNvcmU6Oml0ZXI6OnRyYWl0czo6Y29sbGVjdDo6SW50b0l0ZXJhdG9yPjo6aW50b19pdGVyOjpoOTQ4ZjYyZjk3YzIzZDc3NqcCOGFsbG9jOjp2ZWM6OlZlYzxUPjo6ZXh0ZW5kX2Zyb21fc2xpY2U6OmhmZWVjNTY3M2YzZjRkNTMzqAIyPCZUIGFzIGNvcmU6OmZtdDo6RGlzcGxheT46OmZtdDo6aGRjMDNiM2YxZjg2N2U0ZjOpAjhjb3JlOjpmbXQ6OkZvcm1hdHRlcjo6ZGVidWdfbG93ZXJfaGV4OjpoMDdmZGNlMTgwMzdmY2UxOaoCOGNvcmU6OmZtdDo6Rm9ybWF0dGVyOjpkZWJ1Z191cHBlcl9oZXg6Omg2OThmZmI2ZTlkYTk4MDI4qwIOX19ydXN0X2RlYWxsb2OsAjY8VCBhcyBjb3JlOjpjb252ZXJ0OjpJbnRvPFU+Pjo6aW50bzo6aDVkNWNkMmEwYjRjMWEyMTetAi5hbGxvYzo6dmVjOjpWZWM8VD46OnJlc2VydmU6Omg5NTAxMDE2NDE5ZDlhOGQzrgIuYWxsb2M6OnZlYzo6VmVjPFQ+OjpyZXNlcnZlOjpoZTAyOTJiZDgyM2QxMmJkOa8CNGFsbG9jOjpyYXdfdmVjOjpjYXBhY2l0eV9vdmVyZmxvdzo6aGI4ZjQzMzRjNjgxZmUzZTSwAk5jb3JlOjpmbXQ6Om51bTo6aW1wOjo8aW1wbCBjb3JlOjpmbXQ6OkRpc3BsYXkgZm9yIHUzMj46OmZtdDo6aDEwN2VlN2E4ODEwZDBjNTGxAk1jb3JlOjpmbXQ6Om51bTo6aW1wOjo8aW1wbCBjb3JlOjpmbXQ6OkRpc3BsYXkgZm9yIHU4Pjo6Zm10OjpoYjg4OTg5ZTI2MjY2NjFkZLICNGNvcmU6OmZtdDo6QXJndW1lbnRWMTo6c2hvd191c2l6ZTo6aDMyMDZjMjhhNDY1ZTY5NTazAip3YXNtX2JpbmRnZW46OnRocm93X3N0cjo6aDRhYTFhMjFkZGIyZjg3Mma0AjNhbGxvYzo6YWxsb2M6OmhhbmRsZV9hbGxvY19lcnJvcjo6aGUyOWM4MTI3YjE3NzZlYWS1Ai5jb3JlOjpwYW5pYzo6TG9jYXRpb246OmZpbGU6Omg3ZDQ3MWU2YTk4YmI4OWY5tgIzPHN0ciBhcyBjb3JlOjpmbXQ6OkRpc3BsYXk+OjpmbXQ6Omg0NWRlMDI1MWU2NDA4ODVltwINX19yZGxfZGVhbGxvY7gCM2FsbG9jOjpyYXdfdmVjOjpSYXdWZWM8VCxBPjo6cHRyOjpoZjViMGE0NzgxZDc3YmU2N7kCM2FsbG9jOjpyYXdfdmVjOjpSYXdWZWM8VCxBPjo6cHRyOjpoZmVjM2RkZjg5NGU2ZjEyYroCNXdhc21fYmluZGdlbjo6X19ydDo6bWFsbG9jX2ZhaWx1cmU6Omg3M2JhNDBlODA4M2QzMmUxuwJIYWxsb2M6OnJhd192ZWM6OlJhd1ZlYzxULEE+OjphbGxvY2F0ZV9pbjo6e3tjbG9zdXJlfX06OmgzYWFjZDE2ZTM3MDk2Y2RmvAJIYWxsb2M6OnJhd192ZWM6OlJhd1ZlYzxULEE+OjphbGxvY2F0ZV9pbjo6e3tjbG9zdXJlfX06OmhmMjFhZTY3NWMxOTAyY2Y4vQJIYWxsb2M6OnJhd192ZWM6OlJhd1ZlYzxULEE+OjphbGxvY2F0ZV9pbjo6e3tjbG9zdXJlfX06OmhhM2JiNzE1ZTQ5NDJkMTZlvgJIYWxsb2M6OnJhd192ZWM6OlJhd1ZlYzxULEE+OjphbGxvY2F0ZV9pbjo6e3tjbG9zdXJlfX06Omg2MjA1MzdiYTA5NTlkNGFlvwJIYWxsb2M6OnJhd192ZWM6OlJhd1ZlYzxULEE+OjphbGxvY2F0ZV9pbjo6e3tjbG9zdXJlfX06Omg2ZDUzMTI2OWUzMmI1ODNhwAJIYWxsb2M6OnJhd192ZWM6OlJhd1ZlYzxULEE+OjphbGxvY2F0ZV9pbjo6e3tjbG9zdXJlfX06OmhmNDFkOGI0YTZhZmU2ZjkxwQJIYWxsb2M6OnJhd192ZWM6OlJhd1ZlYzxULEE+OjphbGxvY2F0ZV9pbjo6e3tjbG9zdXJlfX06Omg0MjcyYmI3ODdmZDA4YzAywgJIYWxsb2M6OnJhd192ZWM6OlJhd1ZlYzxULEE+OjphbGxvY2F0ZV9pbjo6e3tjbG9zdXJlfX06Omg1ODdkMzZlOTY0MTIxZDBlwwJIYWxsb2M6OnJhd192ZWM6OlJhd1ZlYzxULEE+OjphbGxvY2F0ZV9pbjo6e3tjbG9zdXJlfX06OmhjOWY0MTY3YjgwYzhiYzA1xAJIYWxsb2M6OnJhd192ZWM6OlJhd1ZlYzxULEE+OjphbGxvY2F0ZV9pbjo6e3tjbG9zdXJlfX06Omg2Njg0MTBhNDdhMjI4OTExxQIyY29yZTo6cGFuaWM6OlBhbmljSW5mbzo6bWVzc2FnZTo6aDkzZGFkMDE4ZTA2YTc4NTfGAjNjb3JlOjpwYW5pYzo6UGFuaWNJbmZvOjpsb2NhdGlvbjo6aDg0OTQwNzg5MzhkOWJmZWTHAi5jb3JlOjpwYW5pYzo6TG9jYXRpb246OmxpbmU6Omg0MDA2NzdiODg5MzY3MjIyyAIwY29yZTo6cGFuaWM6OkxvY2F0aW9uOjpjb2x1bW46OmgwZmI3NGQ4ODRmYWY2Mzc5yQI9PFQgYXMgY29yZTo6Y29udmVydDo6VHJ5RnJvbTxVPj46OnRyeV9mcm9tOjpoODZjYTlmYTYxZThhMjUzZMoCMTxUIGFzIGNvcmU6OmFueTo6QW55Pjo6dHlwZV9pZDo6aGRjMGUwNjZhZmZhMDY5ZTDLAjE8VCBhcyBjb3JlOjphbnk6OkFueT46OnR5cGVfaWQ6OmhkNWU4MGFjZmUxOGU4ZDllzAIxPFQgYXMgY29yZTo6YW55OjpBbnk+Ojp0eXBlX2lkOjpoZTBiODg4OWNlZmZlMTQwNs0CJnN0ZDo6cHJvY2Vzczo6YWJvcnQ6OmgyY2Q3NTkxNzE3MDA4MzE2zgISX19ydXN0X3N0YXJ0X3BhbmljzwJBZGxtYWxsb2M6OmRsbWFsbG9jOjpEbG1hbGxvYzo6bWFsbG9jX2FsaWdubWVudDo6aDVjZTRlMjE1NGQ1MWE4ZGPQAjE8VCBhcyBjb3JlOjphbnk6OkFueT46OnR5cGVfaWQ6Omg5ZDcxMGJmNWI3MzkzMTc20QIwY29yZTo6cHRyOjpyZWFsX2Ryb3BfaW5fcGxhY2U6OmhlOGY1OTNlN2QxMjAyODQ10gIwY29yZTo6cHRyOjpyZWFsX2Ryb3BfaW5fcGxhY2U6OmhlOGY1OTNlN2QxMjAyODQ10wIwY29yZTo6cHRyOjpyZWFsX2Ryb3BfaW5fcGxhY2U6OmhlOGY1OTNlN2QxMjAyODQ11AI2PFQgYXMgY29yZTo6Y29udmVydDo6RnJvbTxUPj46OmZyb206OmgwMmM4M2M1ZDg2MWRjYjJm1QI2PFQgYXMgY29yZTo6Y29udmVydDo6RnJvbTxUPj46OmZyb206Omg1M2RhMTRmMDE5NWNhNTZm1gJGPGFsbG9jOjp2ZWM6OlZlYzxUPiBhcyBjb3JlOjpvcHM6OmRyb3A6OkRyb3A+Ojpkcm9wOjpoMjg3MTUxNWMxZmZmYWE4MdcCRjxhbGxvYzo6dmVjOjpWZWM8VD4gYXMgY29yZTo6b3BzOjpkcm9wOjpEcm9wPjo6ZHJvcDo6aDhjMDdmY2U0MGE5MDJmNzDYAjY8VCBhcyBjb3JlOjpjb252ZXJ0OjpGcm9tPFQ+Pjo6ZnJvbTo6aGE5MWJkYzkxMWYwZDA3ZWTZAjBjb3JlOjpwdHI6OnJlYWxfZHJvcF9pbl9wbGFjZTo6aDc5NmU4MjFmNTJjMWExZDbaAjBjb3JlOjpwdHI6OnJlYWxfZHJvcF9pbl9wbGFjZTo6aGUwYWRmYmNiODEwMmIzN2LbAjBjb3JlOjpwdHI6OnJlYWxfZHJvcF9pbl9wbGFjZTo6aDA0OWM5ODgwNTE5MmU3OTHcAlY8c3RkOjpzeXNfY29tbW9uOjp0aHJlYWRfbG9jYWw6OktleSBhcyBjb3JlOjpvcHM6OmRyb3A6OkRyb3A+Ojpkcm9wOjpoOWNlMzlhMTAyZDY1M2EyMN0CN3N0ZDo6YWxsb2M6OmRlZmF1bHRfYWxsb2NfZXJyb3JfaG9vazo6aDE4YzNjMmE5NmViYTQxYjHeAjBjb3JlOjpwdHI6OnJlYWxfZHJvcF9pbl9wbGFjZTo6aDhhMjNlY2I3NWZhMTdiZWMAg4GAgAAJcHJvZHVjZXJzAghsYW5ndWFnZQEEUnVzdAAMcHJvY2Vzc2VkLWJ5AwVydXN0YyUxLjQxLjAtbmlnaHRseSAoMTliZDkzNDY3IDIwMTktMTItMTgpBndhbHJ1cwYwLjEyLjAMd2FzbS1iaW5kZ2VuEjAuMi41MSAoNmQxZGM4MTNjKQ=="),PB=function(g){return I=void 0,A=void 0,t=function(){return JB(this,(function(I){switch(I.label){case 0:return[4,TB()];case 1:return I.sent()?[2,g]:[4,zB];case 2:return I.sent(),[2,LB(g)]}}))},new((C=void 0)||(C=Promise))((function(g,i){function e(g){try{n(t.next(g))}catch(dD){i(dD)}}function o(g){try{n(t.throw(g))}catch(dD){i(dD)}}function n(I){I.done?g(I.value):new C((function(g){g(I.value)})).then(e,o)}n((t=t.apply(I,A||[])).next())}));
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0
  
    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.
  
    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */
var I,A,C,t},UB={};const xB=async g=>{let I;if(g.indexOf("@")>-1){const A=g.split("@");g=A[0],I=A[1]}let A=await async function(g,I){const A=await fetch("https://registry.wapm.io/graphql",{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({query:g,variables:I})}),C=await A.json();if(C&&C.data)return C.data}("query shellGetPackageQuery($name: String!, $version: String) {\n  packageVersion: getPackageVersion(name: $name, version: $version) {\n    version\n    package {\n      name\n      displayName\n    }\n    filesystem {\n      wasm\n      host\n    }\n    distribution {\n      downloadUrl\n    }\n    modules {\n      name\n      publicUrl\n      abi\n    }\n    commands {\n      command\n      module {\n        name\n        abi\n        source\n        publicUrl\n      }\n    }\n  }\n}\n",{name:g,version:I});if(A&&A.packageVersion)return A.packageVersion;throw new Error(`Package not found in the registry ${g}`)};class jB{constructor(g,I){this.wasmTerminal=I,this.wapmInstalledPackages=[],this.wapmCommands={},this.uploadedCommands={},this.cachedModules={},this.wasmFs=g,this.callbackCommands={wapm:this._wapmCallbackCommand.bind(this)};const A=document.createElement("input");A.id="hidden-file-input",A.classList.add("hidden-file-input"),A.setAttribute("type","file"),A.setAttribute("accept",".wasm"),A.setAttribute("hidden","true"),A.addEventListener("change",this._onHiddenInputChange.bind(this)),document.body.appendChild(A),this._hiddenInput=A,this.currentInstallResolver=void 0}async regenerateWAPMCommands(){this.wapmCommands={};for(let g of this.wapmInstalledPackages)for(let I of g.commands)if("wasi"===I.module.abi){let g=I.module.publicUrl;this.wapmCommands[I.command]=await this.fetchBinary(g)}}async fetchBinary(g){return g in this.cachedModules||(this.cachedModules[g]=await(async g=>{const I=await fetch(g),A=await I.arrayBuffer();return new Uint8Array(A)})(g)),this.cachedModules[g]}isCommandCached(g){return void 0!==this._getCachedCommand(g)}async runCommand(g){let I=g.args[0];if("wasmer"==I?("run"==g.args[1]?g.args=g.args.slice(2):g.args=g.args.slice(1),I=g.args[0],-1==I.indexOf("/")&&(I=`./${I}`)):"wapm"==I&&"run"==g.args[1]?(g.args=g.args.slice(2),I=g.args[0]):"wax"==I&&(g.args=g.args.slice(1),I=g.args[0]),I.indexOf("/")>-1){let A=I;if(!this.wasmFs.fs.existsSync(A))throw new Error(`No such file or directory: ${A}`);let C=this.wasmFs.fs.readFileSync(A),t=await PB(C);return UB[A]=await WebAssembly.compile(t),{args:g.args,module:UB[A]}}const A=this._getCachedCommand(I);return A||await this._installFromWapmCommand(g,this.wasmFs)}async installWasmBinary(g,I){this.uploadedCommands[g]=I}_getCachedCommand(g){return this.callbackCommands[g]?this.callbackCommands[g]:this.uploadedCommands[g]?this.uploadedCommands[g]:void 0}async _wapmCallbackCommand(g,I){const A=g.args;if(1===A.length)return this._help();if("upload"===A[1]){const g=await this._installFromFile();return`Module ${g}.wasm installed successfully!\n‚Üí Installed commands: ${g}`.replace(/\n\n/g,"\n \n")}return"install"===A[1]&&3===A.length?await this._install(A[2],I):"uninstall"===A[1]&&3===A.length?await this._uninstall(A[2]):"list"===A[1]?this._list():this._help()}_help(){return"wapm-cli lite (adapted for WebAssembly.sh)\nThe Wasmer Engineering Team <engineering@wasmer.io>\nWebAssembly Package Manager CLI\n\nUSAGE:\n    wapm <SUBCOMMAND>\n\nSUBCOMMANDS:\n    list                           List the currently installed packages and their commands\n    install                        Install a package from Wapm\n    upload                         Install a local Wasm module\n    uninstall                      Uninstall a package".replace(/\n\n/g,"\n \n")}_list(){let g=[];for(const C of this.wapmInstalledPackages)for(const I of C.modules)g.push([C.package.displayName,C.version,I.name,I.abi]);let I=[["COMMAND","VERSION","MODULE","ABI"]].concat(g),A=[["COMMAND","TYPE"]].concat(Object.keys(this.wapmCommands).map((g=>[`${g}`,"WAPM"]))).concat(Object.keys(this.uploadedCommands).map((g=>[`${g}`,"uploaded by user"]))).concat(Object.keys(this.callbackCommands).map((g=>[`${g}`,"builtin"])));return`LOCAL PACKAGES:\n ${fB(I,{align:["l"],hsep:" | "}).replace(/\n/g,"\n ")}\n    \nLOCAL COMMANDS:\n ${fB(A,{align:["l"],hsep:" | "}).replace(/\n/g,"\n ")}\n\nAdditional commands can be installed by: \n    ‚Ä¢ Running a command from any WASI package in https://wapm.io\n    ‚Ä¢ Uploading a file with \`wapm upload\``.replace(/\n\n/g,"\n \n")}async _install(g,I){let A=await xB(g);if(!A)throw new Error(`Package not found in the registry: ${g}`);return await this._installWapmPackage(A,I)?(this.wapmInstalledPackages=this.wapmInstalledPackages.filter((g=>g.package.displayName!==A.package.displayName)),this.wapmInstalledPackages.push(A),await this.regenerateWAPMCommands(),`Package ${A.package.displayName}@${A.version} installed successfully!\n‚Üí Installed commands: ${A.commands.map((g=>g.command)).join(", ")}`):`Package ${g} already installed.`}async _uninstall(g){if(this.callbackCommands[g])return`Cannot remove the built-in command: \`${g}\`.`;if(this.uploadedCommands[g])return delete this.uploadedCommands[g],`Uploaded command "${g}" uninstalled successfully.`;const I=this.wapmInstalledPackages.filter((I=>I.package.displayName===g));if(I.length>0){const g=I[0];return this.wapmInstalledPackages=this.wapmInstalledPackages.filter((I=>I!==g)),await this.regenerateWAPMCommands(),`Package "${g.package.displayName}" uninstalled successfully.`}return`Package "${g}" is not installed.`}async _installWapmPackage(g,I){const A=g.distribution.downloadUrl;let C=await(async g=>{const I=await fetch(g),A=await I.arrayBuffer();return new Uint8Array(A)})(A);const t=`/_wasmer/wapm_packages/${g.package.name}@${g.version}`;if(I.fs.existsSync(t))return!1;I.fs.mkdirpSync(t),await((g,I,A)=>{const C=g.volume;C.mkdirpBase(A,511);const t=kB.exports.inflate(I);return HB(t.buffer).progress((function(g){const I=`${A}/${g.name}`,t=lG.Buffer.from(g.buffer);if("file"===g.type||"0"===g.type||0==g.type)try{C.writeFileSync(I,t)}catch(dD){let A=I.replace(/\\/g,"/").replace(/\/[^\/]*$/,"");C.mkdirpBase(A,511),C.writeFileSync(I,t)}else"directory"!==g.type&&"5"!==g.type&&5!==g.type||C.mkdirpBase(I,511)}))})(I,C,t),I.fs.mkdirpSync("/bin");for(let i of g.commands){const A=`/bin/${i.command}`,C=`${t}/${i.module.source}`,e=g.filesystem;let o={};e.forEach((({wasm:g,host:I})=>{o[g]=`${t}/${I}`}));const n=new Function(`// wasi\n  return function main(options) {\n  var preopens = ${JSON.stringify(o)};\n  return {\n  "args": options.args,\n  "env": options.env,\n  // We use the path for the lowered Wasm\n  "modulePath": ${JSON.stringify(C)},\n  "preopens": preopens,\n  };\n  }\n  `)();I.fs.writeFileSync(A,n.toString())}return!0}async _installFromWapmCommand({args:g,env:I},A){const C=`/bin/${g[0]}`;if(!A.fs.existsSync(C)){let I=await RB({args:g});await this._installWapmPackage(I.packageVersion,A)}let t=A.fs.readFileSync(C,"utf8"),i=new Function(`return ${t}`)()({args:g,env:I});if(!(i.modulePath in UB)){let g;try{g=A.fs.readFileSync(i.modulePath)}catch{throw new Error(`The module ${i.modulePath} doesn't exist`)}this.wasmTerminal&&(this.wasmTerminal.wasmTty.clearStatus(!0),this.wasmTerminal.wasmTty.printStatus("[INFO] Compiling module",!0));let I=await PB(g);UB[i.modulePath]=await WebAssembly.compile(I),this.wasmTerminal&&this.wasmTerminal.wasmTty.clearStatus(!0)}return i.module=UB[i.modulePath],i}async _installFromFile(){const g=new Promise((g=>{this.currentInstallResolver=g}));this._hiddenInput.click();const I=await g;if(!I)return"Cancelled opening wasm file.";const A=await I.arrayBuffer(),C=new Uint8Array(A),t=I.name.replace(".wasm","");return this.installWasmBinary(t,C),t}_onHiddenInputChange(g){this.currentInstallResolver&&this.currentInstallResolver(g.target.files[0])}}class _B extends HTMLElement{constructor(){super(),this.onResize=()=>{this.wasmTerminal.isOpen&&this.wasmTerminal.fit()},this.wasmFs=new KB,this.wasmTerminal=new Eu({processWorkerUrl:Fu,fetchCommand:this.fetchCommand.bind(this),wasmFs:this.wasmFs}),this.wapm=new jB(this.wasmFs,this.wasmTerminal),this.resizeObserver=new ResizeObserver(this.onResize),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML='\n    <style>\n      :host {\n        position: relative;\n      }\n\n      * {\n        box-sizing: border-box;\n      }\n\n      /**\n * Copyright (c) 2014 The xterm.js authors. All rights reserved.\n * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)\n * https://github.com/chjj/term.js\n * @license MIT\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the "Software"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n *\n * Originally forked from (with the author\'s permission):\n *   Fabrice Bellard\'s javascript vt100 for jslinux:\n *   http://bellard.org/jslinux/\n *   Copyright (c) 2011 Fabrice Bellard\n *   The original design remains. The terminal itself\n *   has been extended to include xterm CSI codes, among\n *   other features.\n */\n\n/**\n *  Default styles for xterm.js\n */\n\n.xterm {\n    position: relative;\n    user-select: none;\n    -ms-user-select: none;\n    -webkit-user-select: none;\n}\n\n.xterm.focus,\n.xterm:focus {\n    outline: none;\n}\n\n.xterm .xterm-helpers {\n    position: absolute;\n    top: 0;\n    /**\n     * The z-index of the helpers must be higher than the canvases in order for\n     * IMEs to appear on top.\n     */\n    z-index: 5;\n}\n\n.xterm .xterm-helper-textarea {\n    padding: 0;\n    border: 0;\n    margin: 0;\n    /* Move textarea out of the screen to the far left, so that the cursor is not visible */\n    position: absolute;\n    opacity: 0;\n    left: -9999em;\n    top: 0;\n    width: 0;\n    height: 0;\n    z-index: -5;\n    /** Prevent wrapping so the IME appears against the textarea at the correct position */\n    white-space: nowrap;\n    overflow: hidden;\n    resize: none;\n}\n\n.xterm .composition-view {\n    /* TODO: Composition position got messed up somewhere */\n    background: #000;\n    color: #FFF;\n    display: none;\n    position: absolute;\n    white-space: nowrap;\n    z-index: 1;\n}\n\n.xterm .composition-view.active {\n    display: block;\n}\n\n.xterm .xterm-viewport {\n    /* On OS X this is required in order for the scroll bar to appear fully opaque */\n    background-color: #000;\n    overflow-y: scroll;\n    cursor: default;\n    position: absolute;\n    right: 0;\n    left: 0;\n    top: 0;\n    bottom: 0;\n}\n\n.xterm .xterm-screen {\n    position: relative;\n}\n\n.xterm .xterm-screen canvas {\n    position: absolute;\n    left: 0;\n    top: 0;\n}\n\n.xterm .xterm-scroll-area {\n    visibility: hidden;\n}\n\n.xterm-char-measure-element {\n    display: inline-block;\n    visibility: hidden;\n    position: absolute;\n    top: 0;\n    left: -9999em;\n    line-height: normal;\n}\n\n.xterm {\n    cursor: text;\n}\n\n.xterm.enable-mouse-events {\n    /* When mouse events are enabled (eg. tmux), revert to the standard pointer cursor */\n    cursor: default;\n}\n\n.xterm.xterm-cursor-pointer {\n    cursor: pointer;\n}\n\n.xterm.column-select.focus {\n    /* Column selection mode */\n    cursor: crosshair;\n}\n\n.xterm .xterm-accessibility,\n.xterm .xterm-message {\n    position: absolute;\n    left: 0;\n    top: 0;\n    bottom: 0;\n    right: 0;\n    z-index: 10;\n    color: transparent;\n}\n\n.xterm .live-region {\n    position: absolute;\n    left: -9999px;\n    width: 1px;\n    height: 1px;\n    overflow: hidden;\n}\n\n.xterm-dim {\n    opacity: 0.5;\n}\n\n.xterm-underline {\n    text-decoration: underline;\n}\n\n.xterm-strikethrough {\n    text-decoration: line-through;\n}\n\n      \n      .xterm,\n      .xterm-viewport,\n      .xterm-screen {\n        width: 100%;\n        height: 100%;\n      }\n\n      #container {\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        padding: 0.5em;\n      }\n    </style>\n    <div id="container"></div>\n    '}connectedCallback(){var g;this.wasmTerminal.open(null==(g=this.shadowRoot)?void 0:g.getElementById("container")),window.addEventListener("resize",this.onResize),this.wasmTerminal.fit(),this.resizeObserver.observe(this)}disconnectedCallback(){window.removeEventListener("resize",this.onResize),this.resizeObserver.unobserve(this)}async fetchCommand(g){return await this.wapm.runCommand(g)}writeFile(g,I){this.wasmFs.volume.writeFileSync(g,I)}async runCommand(g){const I=await this.wasmTerminal.runCommandDirect(g),A={};for(const[C,t]of Object.entries(I.fs))A[C]={name:C,content:t};return I}stop(){return this.wasmTerminal.kill()}isReadyForCommand(){return this.wasmTerminal.isOpen&&this.wasmTerminal.wasmShell.isPrompting()}focus(){this.wasmTerminal.focus()}clear(){this.wasmTerminal.clear()}}let $B="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map((g=>g?parseInt(g,36):1));for(let mD=1;mD<$B.length;mD++)$B[mD]+=$B[mD-1];function qB(g){for(let I=1;I<$B.length;I+=2)if($B[I]>g)return $B[I-1]<=g;return!1}function gy(g){return g>=127462&&g<=127487}function Iy(g,I,A=!0){return(A?Ay:Cy)(g,I)}function Ay(g,I){if(I==g.length)return I;I&&ty(g.charCodeAt(I))&&iy(g.charCodeAt(I-1))&&I--;let A=ey(g,I);for(I+=ny(A);I<g.length;){let C=ey(g,I);if(8205==A||8205==C||qB(C))I+=ny(C),A=C;else{if(!gy(C))break;{let A=0,C=I-2;for(;C>=0&&gy(ey(g,C));)A++,C-=2;if(A%2==0)break;I+=2}}}return I}function Cy(g,I){for(;I>0;){let A=Ay(g,I-2);if(A<I)return A;I--}return 0}function ty(g){return g>=56320&&g<57344}function iy(g){return g>=55296&&g<56320}function ey(g,I){let A=g.charCodeAt(I);if(!iy(A)||I+1==g.length)return A;let C=g.charCodeAt(I+1);return ty(C)?C-56320+(A-55296<<10)+65536:A}function oy(g){return g<=65535?String.fromCharCode(g):(g-=65536,String.fromCharCode(55296+(g>>10),56320+(1023&g)))}function ny(g){return g<65536?1:2}function sy(g,I,A=g.length){let C=0;for(let t=0;t<A;)9==g.charCodeAt(t)?(C+=I-C%I,t++):(C++,t=Iy(g,t));return C}function ly(g,I,A){for(let C=0,t=0;C<g.length;){if(t>=I)return C;t+=9==g.charCodeAt(C)?A-t%A:1,C=Iy(g,C)}return g.length}class ry{constructor(){}lineAt(g){if(g<0||g>this.length)throw new RangeError(`Invalid position ${g} in document of length ${this.length}`);return this.lineInner(g,!1,1,0)}line(g){if(g<1||g>this.lines)throw new RangeError(`Invalid line number ${g} in ${this.lines}-line document`);return this.lineInner(g,!0,1,0)}replace(g,I,A){let C=[];return this.decompose(0,g,C,2),A.length&&A.decompose(0,A.length,C,3),this.decompose(I,this.length,C,1),ay.from(C,this.length-(I-g)+A.length)}append(g){return this.replace(this.length,this.length,g)}slice(g,I=this.length){let A=[];return this.decompose(g,I,A,0),ay.from(A,I-g)}eq(g){if(g==this)return!0;if(g.length!=this.length||g.lines!=this.lines)return!1;let I=new my(this),A=new my(g);for(;;){if(I.next(),A.next(),I.lineBreak!=A.lineBreak||I.done!=A.done||I.value!=A.value)return!1;if(I.done)return!0}}iter(g=1){return new my(this,g)}iterRange(g,I=this.length){return new Zy(this,g,I)}iterLines(g,I){let A;if(null==g)A=this.iter();else{null==I&&(I=this.lines+1);let C=this.line(g).from;A=this.iterRange(C,Math.max(C,I==this.lines+1?this.length:I<=1?0:this.line(I-1).to))}return new uy(A)}toString(){return this.sliceString(0)}toJSON(){let g=[];return this.flatten(g),g}static of(g){if(0==g.length)throw new RangeError("A document must have at least one line");return 1!=g.length||g[0]?g.length<=32?new cy(g):ay.from(cy.split(g,[])):ry.empty}}"undefined"!=typeof Symbol&&(ry.prototype[Symbol.iterator]=function(){return this.iter()});class cy extends ry{constructor(g,I=function(g){let I=-1;for(let A of g)I+=A.length+1;return I}(g)){super(),this.text=g,this.length=I}get lines(){return this.text.length}get children(){return null}lineInner(g,I,A,C){for(let t=0;;t++){let i=this.text[t],e=C+i.length;if((I?A:e)>=g)return new Gy(C,e,A,i);C=e+1,A++}}decompose(g,I,A,C){let t=g<=0&&I>=this.length?this:new cy(hy(this.text,g,I),Math.min(I,this.length)-Math.max(0,g));if(1&C){let g=A.pop(),I=dy(t.text,g.text.slice(),0,t.length);if(I.length<=32)A.push(new cy(I,g.length+t.length));else{let g=I.length>>1;A.push(new cy(I.slice(0,g)),new cy(I.slice(g)))}}else A.push(t)}replace(g,I,A){if(!(A instanceof cy))return super.replace(g,I,A);let C=dy(this.text,dy(A.text,hy(this.text,0,g)),I),t=this.length+A.length-(I-g);return C.length<=32?new cy(C,t):ay.from(cy.split(C,[]),t)}sliceString(g,I=this.length,A="\n"){let C="";for(let t=0,i=0;t<=I&&i<this.text.length;i++){let e=this.text[i],o=t+e.length;t>g&&i&&(C+=A),g<o&&I>t&&(C+=e.slice(Math.max(0,g-t),I-t)),t=o+1}return C}flatten(g){for(let I of this.text)g.push(I)}static split(g,I){let A=[],C=-1;for(let t of g)A.push(t),C+=t.length+1,32==A.length&&(I.push(new cy(A,C)),A=[],C=-1);return C>-1&&I.push(new cy(A,C)),I}}class ay extends ry{constructor(g,I){super(),this.children=g,this.length=I,this.lines=0;for(let A of g)this.lines+=A.lines}lineInner(g,I,A,C){for(let t=0;;t++){let i=this.children[t],e=C+i.length,o=A+i.lines-1;if((I?o:e)>=g)return i.lineInner(g,I,A,C);C=e+1,A=o+1}}decompose(g,I,A,C){for(let t=0,i=0;i<=I&&t<this.children.length;t++){let e=this.children[t],o=i+e.length;if(g<=o&&I>=i){let t=C&((i<=g?1:0)|(o>=I?2:0));i>=g&&o<=I&&!t?A.push(e):e.decompose(g-i,I-i,A,t)}i=o+1}}replace(g,I,A){if(A.lines<this.lines)for(let C=0,t=0;C<this.children.length;C++){let i=this.children[C],e=t+i.length;if(g>=t&&I<=e){let o=i.replace(g-t,I-t,A),n=this.lines-i.lines+o.lines;if(o.lines<n>>4&&o.lines>n>>6){let t=this.children.slice();return t[C]=o,new ay(t,this.length-(I-g)+A.length)}return super.replace(t,e,o)}t=e+1}return super.replace(g,I,A)}sliceString(g,I=this.length,A="\n"){let C="";for(let t=0,i=0;t<this.children.length&&i<=I;t++){let e=this.children[t],o=i+e.length;i>g&&t&&(C+=A),g<o&&I>i&&(C+=e.sliceString(g-i,I-i,A)),i=o+1}return C}flatten(g){for(let I of this.children)I.flatten(g)}static from(g,I=g.reduce(((g,I)=>g+I.length+1),-1)){let A=0;for(let c of g)A+=c.lines;if(A<32){let A=[];for(let I of g)I.flatten(A);return new cy(A,I)}let C=Math.max(32,A>>5),t=C<<1,i=C>>1,e=[],o=0,n=-1,s=[];function l(g){let I;if(g.lines>t&&g instanceof ay)for(let A of g.children)l(A);else g.lines>i&&(o>i||!o)?(r(),e.push(g)):g instanceof cy&&o&&(I=s[s.length-1])instanceof cy&&g.lines+I.lines<=32?(o+=g.lines,n+=g.length+1,s[s.length-1]=new cy(I.text.concat(g.text),I.length+1+g.length)):(o+g.lines>C&&r(),o+=g.lines,n+=g.length+1,s.push(g))}function r(){0!=o&&(e.push(1==s.length?s[0]:ay.from(s,n)),n=-1,o=s.length=0)}for(let c of g)l(c);return r(),1==e.length?e[0]:new ay(e,I)}}function dy(g,I,A=0,C=1e9){for(let t=0,i=0,e=!0;i<g.length&&t<=C;i++){let o=g[i],n=t+o.length;n>=A&&(n>C&&(o=o.slice(0,C-t)),t<A&&(o=o.slice(A-t)),e?(I[I.length-1]+=o,e=!1):I.push(o)),t=n+1}return I}function hy(g,I,A){return dy(g,[""],I,A)}ry.empty=new cy([""],0);class my{constructor(g,I=1){this.dir=I,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[g],this.offsets=[I>0?1:(g instanceof cy?g.text.length:g.children.length)<<1]}nextInner(g,I){for(this.done=this.lineBreak=!1;;){let A=this.nodes.length-1,C=this.nodes[A],t=this.offsets[A],i=t>>1,e=C instanceof cy?C.text.length:C.children.length;if(i==(I>0?e:0)){if(0==A)return this.done=!0,this.value="",this;I>0&&this.offsets[A-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&t)==(I>0?0:1)){if(this.offsets[A]+=I,0==g)return this.lineBreak=!0,this.value="\n",this;g--}else if(C instanceof cy){let t=C.text[i+(I<0?-1:0)];if(this.offsets[A]+=I,t.length>Math.max(0,g))return this.value=0==g?t:I>0?t.slice(g):t.slice(0,t.length-g),this;g-=t.length}else{let t=C.children[i+(I<0?-1:0)];g>t.length?(g-=t.length,this.offsets[A]+=I):(I<0&&this.offsets[A]--,this.nodes.push(t),this.offsets.push(I>0?1:(t instanceof cy?t.text.length:t.children.length)<<1))}}}next(g=0){return g<0&&(this.nextInner(-g,-this.dir),g=this.value.length),this.nextInner(g,this.dir)}}class Zy{constructor(g,I,A){this.value="",this.done=!1,this.cursor=new my(g,I>A?-1:1),this.pos=I>A?g.length:0,this.from=Math.min(I,A),this.to=Math.max(I,A)}nextInner(g,I){if(I<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;g+=Math.max(0,I<0?this.pos-this.to:this.from-this.pos);let A=I<0?this.pos-this.from:this.to-this.pos;g>A&&(g=A),A-=g;let{value:C}=this.cursor.next(g);return this.pos+=(C.length+g)*I,this.value=C.length<=A?C:I<0?C.slice(C.length-A):C.slice(0,A),this.done=!this.value,this}next(g=0){return g<0?g=Math.max(g,this.from-this.pos):g>0&&(g=Math.min(g,this.to-this.pos)),this.nextInner(g,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}}class uy{constructor(g){this.inner=g,this.afterBreak=!0,this.value="",this.done=!1}next(g=0){let{done:I,lineBreak:A,value:C}=this.inner.next(g);return I?(this.done=!0,this.value=""):A?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=C,this.afterBreak=!1),this}get lineBreak(){return!1}}class Gy{constructor(g,I,A,C){this.from=g,this.to=I,this.number=A,this.text=C}get length(){return this.to-this.from}}const by=/\r\n?|\n/;var py=function(g){return g[g.Simple=0]="Simple",g[g.TrackDel=1]="TrackDel",g[g.TrackBefore=2]="TrackBefore",g[g.TrackAfter=3]="TrackAfter",g}(py||(py={}));class By{constructor(g){this.sections=g}get length(){let g=0;for(let I=0;I<this.sections.length;I+=2)g+=this.sections[I];return g}get newLength(){let g=0;for(let I=0;I<this.sections.length;I+=2){let A=this.sections[I+1];g+=A<0?this.sections[I]:A}return g}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(g){for(let I=0,A=0,C=0;I<this.sections.length;){let t=this.sections[I++],i=this.sections[I++];i<0?(g(A,C,t),C+=t):C+=i,A+=t}}iterChangedRanges(g,I=!1){Sy(this,g,I)}get invertedDesc(){let g=[];for(let I=0;I<this.sections.length;){let A=this.sections[I++],C=this.sections[I++];C<0?g.push(A,C):g.push(C,A)}return new By(g)}composeDesc(g){return this.empty?g:g.empty?this:fy(this,g)}mapDesc(g,I=!1){return g.empty?this:Ky(this,g,I)}mapPos(g,I=-1,A=py.Simple){let C=0,t=0;for(let i=0;i<this.sections.length;){let e=this.sections[i++],o=this.sections[i++],n=C+e;if(o<0){if(n>g)return t+(g-C);t+=e}else{if(A!=py.Simple&&n>=g&&(A==py.TrackDel&&C<g&&n>g||A==py.TrackBefore&&C<g||A==py.TrackAfter&&n>g))return null;if(n>g||n==g&&I<0&&!e)return g==C||I<0?t:t+o;t+=o}C=n}if(g>C)throw new RangeError(`Position ${g} is out of range for changeset of length ${C}`);return t}touchesRange(g,I=g){for(let A=0,C=0;A<this.sections.length&&C<=I;){let t=C+this.sections[A++];if(this.sections[A++]>=0&&C<=I&&t>=g)return!(C<g&&t>I)||"cover";C=t}return!1}toString(){let g="";for(let I=0;I<this.sections.length;){let A=this.sections[I++],C=this.sections[I++];g+=(g?" ":"")+A+(C>=0?":"+C:"")}return g}toJSON(){return this.sections}static fromJSON(g){if(!Array.isArray(g)||g.length%2||g.some((g=>"number"!=typeof g)))throw new RangeError("Invalid JSON representation of ChangeDesc");return new By(g)}}class yy extends By{constructor(g,I){super(g),this.inserted=I}apply(g){if(this.length!=g.length)throw new RangeError("Applying change set to a document with the wrong length");return Sy(this,((I,A,C,t,i)=>g=g.replace(C,C+(A-I),i)),!1),g}mapDesc(g,I=!1){return Ky(this,g,I,!0)}invert(g){let I=this.sections.slice(),A=[];for(let C=0,t=0;C<I.length;C+=2){let i=I[C],e=I[C+1];if(e>=0){I[C]=e,I[C+1]=i;let o=C>>1;for(;A.length<o;)A.push(ry.empty);A.push(i?g.slice(t,t+i):ry.empty)}t+=i}return new yy(I,A)}compose(g){return this.empty?g:g.empty?this:fy(this,g,!0)}map(g,I=!1){return g.empty?this:Ky(this,g,I,!0)}iterChanges(g,I=!1){Sy(this,g,I)}get desc(){return new By(this.sections)}filter(g){let I=[],A=[],C=[],t=new Yy(this);g:for(let i=0,e=0;;){let o=i==g.length?1e9:g[i++];for(;e<o||e==o&&0==t.len;){if(t.done)break g;let g=Math.min(t.len,o-e);wy(C,g,-1);let i=-1==t.ins?-1:0==t.off?t.ins:0;wy(I,g,i),i>0&&Wy(A,I,t.text),t.forward(g),e+=g}let n=g[i++];for(;e<n;){if(t.done)break g;let g=Math.min(t.len,n-e);wy(I,g,-1),wy(C,g,-1==t.ins?-1:0==t.off?t.ins:0),t.forward(g),e+=g}}return{changes:new yy(I,A),filtered:new By(C)}}toJSON(){let g=[];for(let I=0;I<this.sections.length;I+=2){let A=this.sections[I],C=this.sections[I+1];C<0?g.push(A):0==C?g.push([A]):g.push([A].concat(this.inserted[I>>1].toJSON()))}return g}static of(g,I,A){let C=[],t=[],i=0,e=null;function o(g=!1){if(!g&&!C.length)return;i<I&&wy(C,I-i,-1);let A=new yy(C,t);e=e?e.compose(A.map(e)):A,C=[],t=[],i=0}return function g(n){if(Array.isArray(n))for(let I of n)g(I);else if(n instanceof yy){if(n.length!=I)throw new RangeError(`Mismatched change set length (got ${n.length}, expected ${I})`);o(),e=e?e.compose(n.map(e)):n}else{let{from:g,to:e=g,insert:s}=n;if(g>e||g<0||e>I)throw new RangeError(`Invalid change range ${g} to ${e} (in doc of length ${I})`);let l=s?"string"==typeof s?ry.of(s.split(A||by)):s:ry.empty,r=l.length;if(g==e&&0==r)return;g<i&&o(),g>i&&wy(C,g-i,-1),wy(C,e-g,r),Wy(t,C,l),i=e}}(g),o(!e),e}static empty(g){return new yy(g?[g,-1]:[],[])}static fromJSON(g){if(!Array.isArray(g))throw new RangeError("Invalid JSON representation of ChangeSet");let I=[],A=[];for(let C=0;C<g.length;C++){let t=g[C];if("number"==typeof t)I.push(t,-1);else{if(!Array.isArray(t)||"number"!=typeof t[0]||t.some(((g,I)=>I&&"string"!=typeof g)))throw new RangeError("Invalid JSON representation of ChangeSet");if(1==t.length)I.push(t[0],0);else{for(;A.length<C;)A.push(ry.empty);A[C]=ry.of(t.slice(1)),I.push(t[0],A[C].length)}}}return new yy(I,A)}}function wy(g,I,A,C=!1){if(0==I&&A<=0)return;let t=g.length-2;t>=0&&A<=0&&A==g[t+1]?g[t]+=I:0==I&&0==g[t]?g[t+1]+=A:C?(g[t]+=I,g[t+1]+=A):g.push(I,A)}function Wy(g,I,A){if(0==A.length)return;let C=I.length-2>>1;if(C<g.length)g[g.length-1]=g[g.length-1].append(A);else{for(;g.length<C;)g.push(ry.empty);g.push(A)}}function Sy(g,I,A){let C=g.inserted;for(let t=0,i=0,e=0;e<g.sections.length;){let o=g.sections[e++],n=g.sections[e++];if(n<0)t+=o,i+=o;else{let s=t,l=i,r=ry.empty;for(;s+=o,l+=n,n&&C&&(r=r.append(C[e-2>>1])),!(A||e==g.sections.length||g.sections[e+1]<0);)o=g.sections[e++],n=g.sections[e++];I(t,s,i,l,r),t=s,i=l}}}function Ky(g,I,A,C=!1){let t=[],i=C?[]:null,e=new Yy(g),o=new Yy(I);for(let n=0,s=0;;)if(-1==e.ins)n+=e.len,e.next();else if(-1==o.ins&&s<n){let g=Math.min(o.len,n-s);o.forward(g),wy(t,g,-1),s+=g}else if(o.ins>=0&&(e.done||s<n||s==n&&(o.len<e.len||o.len==e.len&&!A))){for(wy(t,o.ins,-1);n>s&&!e.done&&n+e.len<s+o.len;)n+=e.len,e.next();s+=o.len,o.next()}else{if(!(e.ins>=0)){if(e.done&&o.done)return i?new yy(t,i):new By(t);throw new Error("Mismatched change set lengths")}{let g=0,I=n+e.len;for(;;)if(o.ins>=0&&s>n&&s+o.len<I)g+=o.ins,s+=o.len,o.next();else{if(!(-1==o.ins&&s<I))break;{let A=Math.min(o.len,I-s);g+=A,o.forward(A),s+=A}}wy(t,g,e.ins),i&&Wy(i,t,e.text),n=I,e.next()}}}function fy(g,I,A=!1){let C=[],t=A?[]:null,i=new Yy(g),e=new Yy(I);for(let o=!1;;){if(i.done&&e.done)return t?new yy(C,t):new By(C);if(0==i.ins)wy(C,i.len,0,o),i.next();else if(0!=e.len||e.done){if(i.done||e.done)throw new Error("Mismatched change set lengths");{let g=Math.min(i.len2,e.len),I=C.length;if(-1==i.ins){let I=-1==e.ins?-1:e.off?0:e.ins;wy(C,g,I,o),t&&I&&Wy(t,C,e.text)}else-1==e.ins?(wy(C,i.off?0:i.len,g,o),t&&Wy(t,C,i.textBit(g))):(wy(C,i.off?0:i.len,e.off?0:e.ins,o),t&&!e.off&&Wy(t,C,e.text));o=(i.ins>g||e.ins>=0&&e.len>g)&&(o||C.length>I),i.forward2(g),e.forward(g)}}else wy(C,0,e.ins,o),t&&Wy(t,C,e.text),e.next()}}class Yy{constructor(g){this.set=g,this.i=0,this.next()}next(){let{sections:g}=this.set;this.i<g.length?(this.len=g[this.i++],this.ins=g[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return-2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:g}=this.set,I=this.i-2>>1;return I>=g.length?ry.empty:g[I]}textBit(g){let{inserted:I}=this.set,A=this.i-2>>1;return A>=I.length&&!g?ry.empty:I[A].slice(this.off,null==g?void 0:this.off+g)}forward(g){g==this.len?this.next():(this.len-=g,this.off+=g)}forward2(g){-1==this.ins?this.forward(g):g==this.ins?this.next():(this.ins-=g,this.off+=g)}}class Xy{constructor(g,I,A){this.from=g,this.to=I,this.flags=A}get anchor(){return 16&this.flags?this.to:this.from}get head(){return 16&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 4&this.flags?-1:8&this.flags?1:0}get bidiLevel(){let g=3&this.flags;return 3==g?null:g}get goalColumn(){let g=this.flags>>5;return 33554431==g?void 0:g}map(g,I=-1){let A=g.mapPos(this.from,I),C=g.mapPos(this.to,I);return A==this.from&&C==this.to?this:new Xy(A,C,this.flags)}extend(g,I=g){if(g<=this.anchor&&I>=this.anchor)return Vy.range(g,I);let A=Math.abs(g-this.anchor)>Math.abs(I-this.anchor)?g:I;return Vy.range(this.anchor,A)}eq(g){return this.anchor==g.anchor&&this.head==g.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(g){if(!g||"number"!=typeof g.anchor||"number"!=typeof g.head)throw new RangeError("Invalid JSON representation for SelectionRange");return Vy.range(g.anchor,g.head)}}class Vy{constructor(g,I=0){this.ranges=g,this.mainIndex=I}map(g,I=-1){return g.empty?this:Vy.create(this.ranges.map((A=>A.map(g,I))),this.mainIndex)}eq(g){if(this.ranges.length!=g.ranges.length||this.mainIndex!=g.mainIndex)return!1;for(let I=0;I<this.ranges.length;I++)if(!this.ranges[I].eq(g.ranges[I]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new Vy([this.main])}addRange(g,I=!0){return Vy.create([g].concat(this.ranges),I?0:this.mainIndex+1)}replaceRange(g,I=this.mainIndex){let A=this.ranges.slice();return A[I]=g,Vy.create(A,this.mainIndex)}toJSON(){return{ranges:this.ranges.map((g=>g.toJSON())),main:this.mainIndex}}static fromJSON(g){if(!g||!Array.isArray(g.ranges)||"number"!=typeof g.main||g.main>=g.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new Vy(g.ranges.map((g=>Xy.fromJSON(g))),g.main)}static single(g,I=g){return new Vy([Vy.range(g,I)],0)}static create(g,I=0){if(0==g.length)throw new RangeError("A selection needs at least one range");for(let A=0,C=0;C<g.length;C++){let t=g[C];if(t.empty?t.from<=A:t.from<A)return Oy(g.slice(),I);A=t.to}return new Vy(g,I)}static cursor(g,I=0,A,C){return new Xy(g,g,(0==I?0:I<0?4:8)|(null==A?3:Math.min(2,A))|(null!=C?C:33554431)<<5)}static range(g,I,A){let C=(null!=A?A:33554431)<<5;return I<g?new Xy(I,g,16|C):new Xy(g,I,C)}}function Oy(g,I=0){let A=g[I];g.sort(((g,I)=>g.from-I.from)),I=g.indexOf(A);for(let C=1;C<g.length;C++){let A=g[C],t=g[C-1];if(A.empty?A.from<=t.to:A.from<t.to){let i=t.from,e=Math.max(A.to,t.to);C<=I&&I--,g.splice(--C,2,A.anchor>A.head?Vy.range(e,i):Vy.range(i,e))}}return new Vy(g,I)}function Ry(g,I){for(let A of g.ranges)if(A.to>I)throw new RangeError("Selection points outside of document")}let Qy=0;class Hy{constructor(g,I,A,C,t){this.combine=g,this.compareInput=I,this.compare=A,this.isStatic=C,this.extensions=t,this.id=Qy++,this.default=g([])}static define(g={}){return new Hy(g.combine||(g=>g),g.compareInput||((g,I)=>g===I),g.compare||(g.combine?(g,I)=>g===I:ky),!!g.static,g.enables)}of(g){return new Jy([],this,0,g)}compute(g,I){if(this.isStatic)throw new Error("Can't compute a static facet");return new Jy(g,this,1,I)}computeN(g,I){if(this.isStatic)throw new Error("Can't compute a static facet");return new Jy(g,this,2,I)}from(g,I){return I||(I=g=>g),this.compute([g],(A=>I(A.field(g))))}}function ky(g,I){return g==I||g.length==I.length&&g.every(((g,A)=>g===I[A]))}class Jy{constructor(g,I,A,C){this.dependencies=g,this.facet=I,this.type=A,this.value=C,this.id=Qy++}dynamicSlot(g){var I;let A=this.value,C=this.facet.compareInput,t=g[this.id]>>1,i=2==this.type,e=!1,o=!1,n=[];for(let s of this.dependencies)"doc"==s?e=!0:"selection"==s?o=!0:0==(1&(null!==(I=g[s.id])&&void 0!==I?I:1))&&n.push(g[s.id]);return(g,I)=>{if(!I||I.reconfigured)return g.values[t]=A(g),1;{if(!(e&&I.docChanged||o&&(I.docChanged||I.selection)||n.some((I=>(1&_y(g,I))>0))))return 0;let s=A(g),l=I.startState.values[t];return(i?function(g,I,A){if(g.length!=I.length)return!1;for(let C=0;C<g.length;C++)if(!A(g[C],I[C]))return!1;return!0}(s,l,C):C(s,l))?0:(g.values[t]=s,1)}}}}function vy(g,I,A){let C=A.map((I=>g[I.id])),t=A.map((g=>g.type)),i=C.filter((g=>!(1&g))),e=g[I.id]>>1;return(g,A)=>{let o=A?A.reconfigured?A.startState.config.address[I.id]:e<<1:null,n=null==o;for(let I of i)1&_y(g,I)&&(n=!0);if(!n)return 0;let s=[];for(let I=0;I<C.length;I++){let A=$y(g,C[I]);if(2==t[I])for(let g of A)s.push(g);else s.push(A)}let l=I.combine(s);return null!=o&&I.compare(l,$y(A.startState,o))?0:(g.values[e]=l,1)}}function Dy(g,I){let A=g.config.address[I];return null==A?null:A>>1}const My=Hy.define({static:!0});class Ny{constructor(g,I,A,C,t){this.id=g,this.createF=I,this.updateF=A,this.compareF=C,this.spec=t,this.provides=void 0}static define(g){let I=new Ny(Qy++,g.create,g.update,g.compare||((g,I)=>g===I),g);return g.provide&&(I.provides=g.provide(I)),I}create(g){let I=g.facet(My).find((g=>g.field==this));return((null==I?void 0:I.create)||this.createF)(g)}slot(g){let I=g[this.id]>>1;return(g,A)=>{if(!A||A.reconfigured&&null==Dy(A.startState,this.id))return g.values[I]=this.create(g),1;let C,t=0;A.reconfigured?(C=A.startState.values[Dy(A.startState,this.id)],t=1):C=A.startState.values[I];let i=this.updateF(C,A);return t||this.compareF(C,i)||(t=1),t&&(g.values[I]=i),t}}init(g){return[this,My.of({field:this,create:g})]}get extension(){return this}}const Ey=2,Fy=1,Ly=0;function Ty(g){return I=>new Py(I,g)}const zy={fallback:Ty(3),default:Ty(Ey),extend:Ty(Fy),override:Ty(Ly)};class Py{constructor(g,I){this.inner=g,this.prec=I}}class Uy{of(g){return new xy(this,g)}reconfigure(g){return Uy.reconfigure.of({compartment:this,extension:g})}get(g){return g.config.compartments.get(this)}}class xy{constructor(g,I){this.compartment=g,this.inner=I}}class jy{constructor(g,I,A,C,t){for(this.base=g,this.compartments=I,this.dynamicSlots=A,this.address=C,this.staticValues=t,this.statusTemplate=[];this.statusTemplate.length<A.length;)this.statusTemplate.push(0)}staticFacet(g){let I=this.address[g.id];return null==I?g.default:this.staticValues[I>>1]}static resolve(g,I,A){let C=[],t=Object.create(null),i=new Map;for(let s of function(g,I,A){let C=[[],[],[],[]],t=new Map;function i(g,e){let o=t.get(g);if(null!=o){if(o>=e)return;let I=C[o].indexOf(g);I>-1&&C[o].splice(I,1),g instanceof xy&&A.delete(g.compartment)}if(t.set(g,e),Array.isArray(g))for(let I of g)i(I,e);else if(g instanceof xy){if(A.has(g.compartment))throw new RangeError("Duplicate use of compartment in extensions");let C=I.get(g.compartment)||g.inner;A.set(g.compartment,C),i(C,e)}else if(g instanceof Py)i(g.inner,g.prec);else if(g instanceof Ny)C[e].push(g),g.provides&&i(g.provides,e);else if(g instanceof Jy)C[e].push(g),g.facet.extensions&&i(g.facet.extensions,e);else{let I=g.extension;if(!I)throw new Error(`Unrecognized extension value in extension set (${g}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);i(I,e)}}return i(g,Ey),C.reduce(((g,I)=>g.concat(I)))}(g,I,i))s instanceof Ny?C.push(s):(t[s.facet.id]||(t[s.facet.id]=[])).push(s);let e=Object.create(null),o=[],n=[];for(let s of C)e[s.id]=n.length<<1,n.push((g=>s.slot(g)));for(let s in t){let g=t[s],I=g[0].facet;if(g.every((g=>0==g.type))){e[I.id]=o.length<<1|1;let C=I.combine(g.map((g=>g.value))),t=A?A.config.address[I.id]:null;if(null!=t){let g=$y(A,t);I.compare(C,g)&&(C=g)}o.push(C)}else{for(let I of g)0==I.type?(e[I.id]=o.length<<1|1,o.push(I.value)):(e[I.id]=n.length<<1,n.push((g=>I.dynamicSlot(g))));e[I.id]=n.length<<1,n.push((A=>vy(A,I,g)))}}return new jy(g,i,n.map((g=>g(e))),e,o)}}function _y(g,I){if(1&I)return 2;let A=I>>1,C=g.status[A];if(4==C)throw new Error("Cyclic dependency between fields and/or facets");if(2&C)return C;g.status[A]=4;let t=g.config.dynamicSlots[A](g,g.applying);return g.status[A]=2|t}function $y(g,I){return 1&I?g.config.staticValues[I>>1]:g.values[I>>1]}const qy=Hy.define(),gw=Hy.define({combine:g=>g.some((g=>g)),static:!0}),Iw=Hy.define({combine:g=>g.length?g[0]:void 0,static:!0}),Aw=Hy.define(),Cw=Hy.define(),tw=Hy.define(),iw=Hy.define({combine:g=>!!g.length&&g[0]});class ew{constructor(g,I){this.type=g,this.value=I}static define(){return new ow}}class ow{of(g){return new ew(this,g)}}class nw{constructor(g){this.map=g}of(g){return new sw(this,g)}}class sw{constructor(g,I){this.type=g,this.value=I}map(g){let I=this.type.map(this.value,g);return void 0===I?void 0:I==this.value?this:new sw(this.type,I)}is(g){return this.type==g}static define(g={}){return new nw(g.map||(g=>g))}static mapEffects(g,I){if(!g.length)return g;let A=[];for(let C of g){let g=C.map(I);g&&A.push(g)}return A}}sw.reconfigure=sw.define(),sw.appendConfig=sw.define();class lw{constructor(g,I,A,C,t,i){this.startState=g,this.changes=I,this.selection=A,this.effects=C,this.annotations=t,this.scrollIntoView=i,this._doc=null,this._state=null,A&&Ry(A,I.newLength),t.some((g=>g.type==lw.time))||(this.annotations=t.concat(lw.time.of(Date.now())))}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(g){for(let I of this.annotations)if(I.type==g)return I.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(g){let I=this.annotation(lw.userEvent);return I&&(I==g||I.length>g.length&&I.slice(0,g.length)==g&&"."==I[g.length])}}function rw(g,I){let A=[];for(let C=0,t=0;;){let i,e;if(C<g.length&&(t==I.length||I[t]>=g[C]))i=g[C++],e=g[C++];else{if(!(t<I.length))return A;i=I[t++],e=I[t++]}!A.length||A[A.length-1]<i?A.push(i,e):A[A.length-1]<e&&(A[A.length-1]=e)}}function cw(g,I,A){var C;let t,i,e;return A?(t=I.changes,i=yy.empty(I.changes.length),e=g.changes.compose(I.changes)):(t=I.changes.map(g.changes),i=g.changes.mapDesc(I.changes,!0),e=g.changes.compose(t)),{changes:e,selection:I.selection?I.selection.map(i):null===(C=g.selection)||void 0===C?void 0:C.map(t),effects:sw.mapEffects(g.effects,t).concat(sw.mapEffects(I.effects,i)),annotations:g.annotations.length?g.annotations.concat(I.annotations):I.annotations,scrollIntoView:g.scrollIntoView||I.scrollIntoView}}function aw(g,I,A){let C=I.selection,t=mw(I.annotations);return I.userEvent&&(t=t.concat(lw.userEvent.of(I.userEvent))),{changes:I.changes instanceof yy?I.changes:yy.of(I.changes||[],A,g.facet(Iw)),selection:C&&(C instanceof Vy?C:Vy.single(C.anchor,C.head)),effects:mw(I.effects),annotations:t,scrollIntoView:!!I.scrollIntoView}}function dw(g,I,A){let C=aw(g,I.length?I[0]:{},g.doc.length);I.length&&!1===I[0].filter&&(A=!1);for(let i=1;i<I.length;i++){!1===I[i].filter&&(A=!1);let t=!!I[i].sequential;C=cw(C,aw(g,I[i],t?C.changes.newLength:g.doc.length),t)}let t=new lw(g,C.changes,C.selection,C.effects,C.annotations,C.scrollIntoView);return function(g){let I=g.startState,A=I.facet(tw),C=g;for(let t=A.length-1;t>=0;t--){let i=A[t](g);i&&Object.keys(i).length&&(C=cw(g,aw(I,i,g.changes.newLength),!0))}return C==g?g:new lw(I,g.changes,g.selection,C.effects,C.annotations,C.scrollIntoView)}(A?function(g){let I=g.startState,A=!0;for(let t of I.facet(Aw)){let I=t(g);if(!1===I){A=!1;break}Array.isArray(I)&&(A=!0===A?I:rw(A,I))}if(!0!==A){let C,t;if(!1===A)t=g.changes.invertedDesc,C=yy.empty(I.doc.length);else{let I=g.changes.filter(A);C=I.changes,t=I.filtered.invertedDesc}g=new lw(I,C,g.selection&&g.selection.map(t),sw.mapEffects(g.effects,t),g.annotations,g.scrollIntoView)}let C=I.facet(Cw);for(let t=C.length-1;t>=0;t--){let A=C[t](g);g=A instanceof lw?A:Array.isArray(A)&&1==A.length&&A[0]instanceof lw?A[0]:dw(I,mw(A),!1)}return g}(t):t)}lw.time=ew.define(),lw.userEvent=ew.define(),lw.addToHistory=ew.define(),lw.remote=ew.define();const hw=[];function mw(g){return null==g?hw:Array.isArray(g)?g:[g]}var Zw=function(g){return g[g.Word=0]="Word",g[g.Space=1]="Space",g[g.Other=2]="Other",g}(Zw||(Zw={}));const uw=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Gw;try{Gw=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(hD){}function bw(g){return I=>{if(!/\S/.test(I))return Zw.Space;if(function(g){if(Gw)return Gw.test(g);for(let I=0;I<g.length;I++){let A=g[I];if(/\w/.test(A)||A>"¬Ä"&&(A.toUpperCase()!=A.toLowerCase()||uw.test(A)))return!0}return!1}(I))return Zw.Word;for(let A=0;A<g.length;A++)if(I.indexOf(g[A])>-1)return Zw.Word;return Zw.Other}}class pw{constructor(g,I,A,C=null){if(this.config=g,this.doc=I,this.selection=A,this.applying=null,this.status=g.statusTemplate.slice(),C&&C.startState.config==g)this.values=C.startState.values.slice();else if(this.values=g.dynamicSlots.map((g=>null)),C)for(let t in g.address){let I=g.address[t],A=C.startState.config.address[t];null!=A&&0==(1&I)&&(this.values[I>>1]=$y(C.startState,A))}this.applying=C,C&&(C._state=this);for(let t=0;t<this.config.dynamicSlots.length;t++)_y(this,t<<1);this.applying=null}field(g,I=!0){let A=this.config.address[g.id];if(null!=A)return _y(this,A),$y(this,A);if(I)throw new RangeError("Field is not present in this state")}update(...g){return dw(this,g,!0)}applyTransaction(g){let I=this.config,{base:A,compartments:C}=I;for(let t of g.effects)t.is(Uy.reconfigure)?(I&&(C=new Map,I.compartments.forEach(((g,I)=>C.set(I,g))),I=null),C.set(t.value.compartment,t.value.extension)):t.is(sw.reconfigure)?(I=null,A=t.value):t.is(sw.appendConfig)&&(I=null,A=mw(A).concat(t.value));new pw(I||jy.resolve(A,C,this),g.newDoc,g.newSelection,g)}replaceSelection(g){return"string"==typeof g&&(g=this.toText(g)),this.changeByRange((I=>({changes:{from:I.from,to:I.to,insert:g},range:Vy.cursor(I.from+g.length)})))}changeByRange(g){let I=this.selection,A=g(I.ranges[0]),C=this.changes(A.changes),t=[A.range],i=mw(A.effects);for(let e=1;e<I.ranges.length;e++){let A=g(I.ranges[e]),o=this.changes(A.changes),n=o.map(C);for(let g=0;g<e;g++)t[g]=t[g].map(n);let s=C.mapDesc(o,!0);t.push(A.range.map(s)),C=C.compose(n),i=sw.mapEffects(i,n).concat(sw.mapEffects(mw(A.effects),s))}return{changes:C,selection:Vy.create(t,I.mainIndex),effects:i}}changes(g=[]){return g instanceof yy?g:yy.of(g,this.doc.length,this.facet(pw.lineSeparator))}toText(g){return ry.of(g.split(this.facet(pw.lineSeparator)||by))}sliceDoc(g=0,I=this.doc.length){return this.doc.sliceString(g,I,this.lineBreak)}facet(g){let I=this.config.address[g.id];return null==I?g.default:(_y(this,I),$y(this,I))}toJSON(g){let I={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(g)for(let A in g){let C=g[A];C instanceof Ny&&(I[A]=C.spec.toJSON(this.field(g[A]),this))}return I}static fromJSON(g,I={},A){if(!g||"string"!=typeof g.doc)throw new RangeError("Invalid JSON representation for EditorState");let C=[];if(A)for(let t in A){let I=A[t],i=g[t];C.push(I.init((g=>I.spec.fromJSON(i,g))))}return pw.create({doc:g.doc,selection:Vy.fromJSON(g.selection),extensions:I.extensions?C.concat([I.extensions]):C})}static create(g={}){let I=jy.resolve(g.extensions||[],new Map),A=g.doc instanceof ry?g.doc:ry.of((g.doc||"").split(I.staticFacet(pw.lineSeparator)||by)),C=g.selection?g.selection instanceof Vy?g.selection:Vy.single(g.selection.anchor,g.selection.head):Vy.single(0);return Ry(C,A.length),I.staticFacet(gw)||(C=C.asSingle()),new pw(I,A,C)}get tabSize(){return this.facet(pw.tabSize)}get lineBreak(){return this.facet(pw.lineSeparator)||"\n"}get readOnly(){return this.facet(iw)}phrase(g){for(let I of this.facet(pw.phrases))if(Object.prototype.hasOwnProperty.call(I,g))return I[g];return g}languageDataAt(g,I,A=-1){let C=[];for(let t of this.facet(qy))for(let i of t(this,I,A))Object.prototype.hasOwnProperty.call(i,g)&&C.push(i[g]);return C}charCategorizer(g){return bw(this.languageDataAt("wordChars",g).join(""))}wordAt(g){let{text:I,from:A,length:C}=this.doc.lineAt(g),t=this.charCategorizer(g),i=g-A,e=g-A;for(;i>0;){let g=Iy(I,i,!1);if(t(I.slice(g,i))!=Zw.Word)break;i=g}for(;e<C;){let g=Iy(I,e);if(t(I.slice(e,g))!=Zw.Word)break;e=g}return i==e?null:Vy.range(i+A,e+A)}}function Bw(g,I,A={}){let C={};for(let t of g)for(let g of Object.keys(t)){let I=t[g],i=C[g];if(void 0===i)C[g]=I;else if(i===I||void 0===I);else{if(!Object.hasOwnProperty.call(A,g))throw new Error("Config merge conflict for field "+g);C[g]=A[g](i,I)}}for(let t in I)void 0===C[t]&&(C[t]=I[t]);return C}pw.allowMultipleSelections=gw,pw.tabSize=Hy.define({combine:g=>g.length?g[0]:4}),pw.lineSeparator=Iw,pw.readOnly=iw,pw.phrases=Hy.define(),pw.languageData=qy,pw.changeFilter=Aw,pw.transactionFilter=Cw,pw.transactionExtender=tw,Uy.reconfigure=sw.define();const yw="undefined"==typeof Symbol?"__Õº":Symbol.for("Õº"),ww="undefined"==typeof Symbol?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),Ww="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:{};class Sw{constructor(g,I){this.rules=[];let{finish:A}=I||{};function C(g){return/^@/.test(g)?[g]:g.split(/,\s*/)}function t(g,I,i,e){let o=[],n=/^@(\w+)\b/.exec(g[0]),s=n&&"keyframes"==n[1];if(n&&null==I)return i.push(g[0]+";");for(let A in I){let e=I[A];if(/&/.test(A))t(A.split(/,\s*/).map((I=>g.map((g=>I.replace(/&/,g))))).reduce(((g,I)=>g.concat(I))),e,i);else if(e&&"object"==typeof e){if(!n)throw new RangeError("The value of a property ("+A+") should be a primitive value.");t(C(A),e,o,s)}else null!=e&&o.push(A.replace(/_.*/,"").replace(/[A-Z]/g,(g=>"-"+g.toLowerCase()))+": "+e+";")}(o.length||s)&&i.push((!A||n||e?g:g.map(A)).join(", ")+" {"+o.join(" ")+"}")}for(let i in g)t(C(i),g[i],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let g=Ww[yw]||1;return Ww[yw]=g+1,"Õº"+g.toString(36)}static mount(g,I){(g[ww]||new fw(g)).mount(Array.isArray(I)?I:[I])}}let Kw=null;class fw{constructor(g){if(!g.head&&g.adoptedStyleSheets&&"undefined"!=typeof CSSStyleSheet){if(Kw)return g.adoptedStyleSheets=[Kw.sheet].concat(g.adoptedStyleSheets),g[ww]=Kw;this.sheet=new CSSStyleSheet,g.adoptedStyleSheets=[this.sheet].concat(g.adoptedStyleSheets),Kw=this}else{this.styleTag=(g.ownerDocument||g).createElement("style");let I=g.head||g;I.insertBefore(this.styleTag,I.firstChild)}this.modules=[],g[ww]=this}mount(g){let I=this.sheet,A=0,C=0;for(let t=0;t<g.length;t++){let i=g[t],e=this.modules.indexOf(i);if(e<C&&e>-1&&(this.modules.splice(e,1),C--,e=-1),-1==e){if(this.modules.splice(C++,0,i),I)for(let g=0;g<i.rules.length;g++)I.insertRule(i.rules[g],A++)}else{for(;C<e;)A+=this.modules[C++].rules.length;A+=i.rules.length,C++}}if(!I){let g="";for(let I=0;I<this.modules.length;I++)g+=this.modules[I].getRules()+"\n";this.styleTag.textContent=g}}}class Yw{eq(g){return this==g}range(g,I=g){return new Xw(g,I,this)}}Yw.prototype.startSide=Yw.prototype.endSide=0,Yw.prototype.point=!1,Yw.prototype.mapMode=py.TrackDel;class Xw{constructor(g,I,A){this.from=g,this.to=I,this.value=A}}function Vw(g,I){return g.from-I.from||g.value.startSide-I.value.startSide}class Ow{constructor(g,I,A,C){this.from=g,this.to=I,this.value=A,this.maxPoint=C}get length(){return this.to[this.to.length-1]}findIndex(g,I,A,C=0){let t=A?this.to:this.from;for(let i=C,e=t.length;;){if(i==e)return i;let C=i+e>>1,o=t[C]-g||(A?this.value[C].endSide:this.value[C].startSide)-I;if(C==i)return o>=0?i:e;o>=0?e=C:i=C+1}}between(g,I,A,C){for(let t=this.findIndex(I,-1e9,!0),i=this.findIndex(A,1e9,!1,t);t<i;t++)if(!1===C(this.from[t]+g,this.to[t]+g,this.value[t]))return!1}map(g,I){let A=[],C=[],t=[],i=-1,e=-1;for(let o=0;o<this.value.length;o++){let n,s,l=this.value[o],r=this.from[o]+g,c=this.to[o]+g;if(r==c){let g=I.mapPos(r,l.startSide,l.mapMode);if(null==g)continue;n=s=g}else if(n=I.mapPos(r,l.startSide),s=I.mapPos(c,l.endSide),n>s||n==s&&l.startSide>0&&l.endSide<=0)continue;(s-n||l.endSide-l.startSide)<0||(i<0&&(i=n),l.point&&(e=Math.max(e,s-n)),A.push(l),C.push(n-i),t.push(s-i))}return{mapped:A.length?new Ow(C,t,A,e):null,pos:i}}}class Rw{constructor(g,I,A=Rw.empty,C){this.chunkPos=g,this.chunk=I,this.nextLayer=A,this.maxPoint=C}get length(){let g=this.chunk.length-1;return g<0?0:Math.max(this.chunkEnd(g),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let g=this.nextLayer.size;for(let I of this.chunk)g+=I.value.length;return g}chunkEnd(g){return this.chunkPos[g]+this.chunk[g].length}update(g){let{add:I=[],sort:A=!1,filterFrom:C=0,filterTo:t=this.length}=g,i=g.filter;if(0==I.length&&!i)return this;if(A&&I.slice().sort(Vw),this.isEmpty)return I.length?Rw.of(I):this;let e=new kw(this,null,-1).goto(0),o=0,n=[],s=new Qw;for(;e.value||o<I.length;)if(o<I.length&&(e.from-I[o].from||e.startSide-I[o].value.startSide)>=0){let g=I[o++];s.addInner(g.from,g.to,g.value)||n.push(g)}else 1==e.rangeIndex&&e.chunkIndex<this.chunk.length&&(o==I.length||this.chunkEnd(e.chunkIndex)<I[o].from)&&(!i||C>this.chunkEnd(e.chunkIndex)||t<this.chunkPos[e.chunkIndex])&&s.addChunk(this.chunkPos[e.chunkIndex],this.chunk[e.chunkIndex])?e.nextChunk():((!i||C>e.to||t<e.from||i(e.from,e.to,e.value))&&(s.addInner(e.from,e.to,e.value)||n.push(new Xw(e.from,e.to,e.value))),e.next());return s.finishInner(this.nextLayer.isEmpty&&!n.length?Rw.empty:this.nextLayer.update({add:n,filter:i,filterFrom:C,filterTo:t}))}map(g){if(0==g.length||this.isEmpty)return this;let I=[],A=[],C=-1;for(let i=0;i<this.chunk.length;i++){let t=this.chunkPos[i],e=this.chunk[i],o=g.touchesRange(t,t+e.length);if(!1===o)C=Math.max(C,e.maxPoint),I.push(e),A.push(g.mapPos(t));else if(!0===o){let{mapped:i,pos:o}=e.map(t,g);i&&(C=Math.max(C,i.maxPoint),I.push(i),A.push(o))}}let t=this.nextLayer.map(g);return 0==I.length?t:new Rw(A,I,t,C)}between(g,I,A){if(!this.isEmpty){for(let C=0;C<this.chunk.length;C++){let t=this.chunkPos[C],i=this.chunk[C];if(I>=t&&g<=t+i.length&&!1===i.between(t,g-t,I-t,A))return}this.nextLayer.between(g,I,A)}}iter(g=0){return Jw.from([this]).goto(g)}get isEmpty(){return this.nextLayer==this}static iter(g,I=0){return Jw.from(g).goto(I)}static compare(g,I,A,C,t=-1){let i=g.filter((g=>g.maxPoint>=500||!g.isEmpty&&I.indexOf(g)<0&&g.maxPoint>=t)),e=I.filter((I=>I.maxPoint>=500||!I.isEmpty&&g.indexOf(I)<0&&I.maxPoint>=t)),o=Hw(i,e),n=new Dw(i,o,t),s=new Dw(e,o,t);A.iterGaps(((g,I,A)=>Mw(n,g,s,I,A,C))),A.empty&&0==A.length&&Mw(n,0,s,0,0,C)}static eq(g,I,A=0,C){null==C&&(C=1e9);let t=g.filter((g=>!g.isEmpty&&I.indexOf(g)<0)),i=I.filter((I=>!I.isEmpty&&g.indexOf(I)<0));if(t.length!=i.length)return!1;if(!t.length)return!0;let e=Hw(t,i),o=new Dw(t,e,0).goto(A),n=new Dw(i,e,0).goto(A);for(;;){if(o.to!=n.to||!Nw(o.active,n.active)||o.point&&(!n.point||!o.point.eq(n.point)))return!1;if(o.to>=C)return!0;o.next(),n.next()}}static spans(g,I,A,C,t=-1){let i=new Dw(g,null,t).goto(I),e=I,o=i.openStart;for(;;){let g=Math.min(i.to,A);if(i.point?(C.point(e,g,i.point,i.activeForPoint(i.to),o),o=i.openEnd(g)+(i.to>g?1:0)):g>e&&(C.span(e,g,i.active,o),o=i.openEnd(g)),i.to>A)break;e=i.to,i.next()}return o}static of(g,I=!1){let A=new Qw;for(let C of g instanceof Xw?[g]:I?function(g){if(g.length>1)for(let I=g[0],A=1;A<g.length;A++){let C=g[A];if(Vw(I,C)>0)return g.slice().sort(Vw);I=C}return g}(g):g)A.add(C.from,C.to,C.value);return A.finish()}}Rw.empty=new Rw([],[],null,-1),Rw.empty.nextLayer=Rw.empty;class Qw{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(g){this.chunks.push(new Ow(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,g&&(this.from=[],this.to=[],this.value=[])}add(g,I,A){this.addInner(g,I,A)||(this.nextLayer||(this.nextLayer=new Qw)).add(g,I,A)}addInner(g,I,A){let C=g-this.lastTo||A.startSide-this.last.endSide;if(C<=0&&(g-this.lastFrom||A.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(C<0)&&(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=g),this.from.push(g-this.chunkStart),this.to.push(I-this.chunkStart),this.last=A,this.lastFrom=g,this.lastTo=I,this.value.push(A),A.point&&(this.maxPoint=Math.max(this.maxPoint,I-g)),!0)}addChunk(g,I){if((g-this.lastTo||I.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,I.maxPoint),this.chunks.push(I),this.chunkPos.push(g);let A=I.value.length-1;return this.last=I.value[A],this.lastFrom=I.from[A]+g,this.lastTo=I.to[A]+g,!0}finish(){return this.finishInner(Rw.empty)}finishInner(g){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return g;let I=new Rw(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(g):g,this.setMaxPoint);return this.from=null,I}}function Hw(g,I){let A=new Map;for(let t of g)for(let g=0;g<t.chunk.length;g++)t.chunk[g].maxPoint<500&&A.set(t.chunk[g],t.chunkPos[g]);let C=new Set;for(let t of I)for(let g=0;g<t.chunk.length;g++)A.get(t.chunk[g])==t.chunkPos[g]&&C.add(t.chunk[g]);return C}class kw{constructor(g,I,A,C=0){this.layer=g,this.skip=I,this.minPoint=A,this.rank=C}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(g,I=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(g,I,!1),this}gotoInner(g,I,A){for(;this.chunkIndex<this.layer.chunk.length;){let I=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(I)||this.layer.chunkEnd(this.chunkIndex)<g||I.maxPoint<this.minPoint))break;this.chunkIndex++,A=!1}if(this.chunkIndex<this.layer.chunk.length){let C=this.layer.chunk[this.chunkIndex].findIndex(g-this.layer.chunkPos[this.chunkIndex],I,!0);(!A||this.rangeIndex<C)&&this.setRangeIndex(C)}this.next()}forward(g,I){(this.to-g||this.endSide-I)<0&&this.gotoInner(g,I,!0)}next(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}{let g=this.layer.chunkPos[this.chunkIndex],I=this.layer.chunk[this.chunkIndex],A=g+I.from[this.rangeIndex];if(this.from=A,this.to=g+I.to[this.rangeIndex],this.value=I.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}}setRangeIndex(g){if(g==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=g}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(g){return this.from-g.from||this.startSide-g.startSide||this.to-g.to||this.endSide-g.endSide}}class Jw{constructor(g){this.heap=g}static from(g,I=null,A=-1){let C=[];for(let t=0;t<g.length;t++)for(let i=g[t];!i.isEmpty;i=i.nextLayer)i.maxPoint>=A&&C.push(new kw(i,I,A,t));return 1==C.length?C[0]:new Jw(C)}get startSide(){return this.value?this.value.startSide:0}goto(g,I=-1e9){for(let A of this.heap)A.goto(g,I);for(let A=this.heap.length>>1;A>=0;A--)vw(this.heap,A);return this.next(),this}forward(g,I){for(let A of this.heap)A.forward(g,I);for(let A=this.heap.length>>1;A>=0;A--)vw(this.heap,A);(this.to-g||this.value.endSide-I)<0&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let g=this.heap[0];this.from=g.from,this.to=g.to,this.value=g.value,this.rank=g.rank,g.value&&g.next(),vw(this.heap,0)}}}function vw(g,I){for(let A=g[I];;){let C=1+(I<<1);if(C>=g.length)break;let t=g[C];if(C+1<g.length&&t.compare(g[C+1])>=0&&(t=g[C+1],C++),A.compare(t)<0)break;g[C]=A,g[I]=t,I=C}}class Dw{constructor(g,I,A){this.minPoint=A,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Jw.from(g,I,A)}goto(g,I=-1e9){return this.cursor.goto(g,I),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=g,this.endSide=I,this.openStart=-1,this.next(),this}forward(g,I){for(;this.minActive>-1&&(this.activeTo[this.minActive]-g||this.active[this.minActive].endSide-I)<0;)this.removeActive(this.minActive);this.cursor.forward(g,I)}removeActive(g){Ew(this.active,g),Ew(this.activeTo,g),Ew(this.activeRank,g),this.minActive=Lw(this.active,this.activeTo)}addActive(g){let I=0,{value:A,to:C,rank:t}=this.cursor;for(;I<this.activeRank.length&&this.activeRank[I]<=t;)I++;Fw(this.active,I,A),Fw(this.activeTo,I,C),Fw(this.activeRank,I,t),g&&Fw(g,I,this.cursor.from),this.minActive=Lw(this.active,this.activeTo)}next(){let g=this.to,I=this.point;this.point=null;let A=this.openStart<0?[]:null,C=0;for(;;){let t=this.minActive;if(t>-1&&(this.activeTo[t]-this.cursor.from||this.active[t].endSide-this.cursor.startSide)<0){if(this.activeTo[t]>g){this.to=this.activeTo[t],this.endSide=this.active[t].endSide;break}this.removeActive(t),A&&Ew(A,t)}else{if(!this.cursor.value){this.to=this.endSide=1e9;break}if(this.cursor.from>g){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}{let t=this.cursor.value;if(t.point){if(!(I&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to&&t.endSide==this.endSide)){this.point=t,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=t.endSide,this.cursor.from<g&&(C=1),this.cursor.next(),this.to>g&&this.forward(this.to,this.endSide);break}this.cursor.next()}else this.addActive(A),this.cursor.next()}}}if(A){let I=0;for(;I<A.length&&A[I]<g;)I++;this.openStart=I+C}}activeForPoint(g){if(!this.active.length)return this.active;let I=[];for(let A=this.active.length-1;A>=0&&!(this.activeRank[A]<this.pointRank);A--)(this.activeTo[A]>g||this.activeTo[A]==g&&this.active[A].endSide>=this.point.endSide)&&I.push(this.active[A]);return I.reverse()}openEnd(g){let I=0;for(let A=this.activeTo.length-1;A>=0&&this.activeTo[A]>g;A--)I++;return I}}function Mw(g,I,A,C,t,i){g.goto(I),A.goto(C);let e=C+t,o=C,n=C-I;for(;;){let I=g.to+n-A.to||g.endSide-A.endSide,C=I<0?g.to+n:A.to,t=Math.min(C,e);if(g.point||A.point?g.point&&A.point&&(g.point==A.point||g.point.eq(A.point))&&Nw(g.activeForPoint(g.to+n),A.activeForPoint(A.to))||i.comparePoint(o,t,g.point,A.point):t>o&&!Nw(g.active,A.active)&&i.compareRange(o,t,g.active,A.active),C>e)break;o=C,I<=0&&g.next(),I>=0&&A.next()}}function Nw(g,I){if(g.length!=I.length)return!1;for(let A=0;A<g.length;A++)if(g[A]!=I[A]&&!g[A].eq(I[A]))return!1;return!0}function Ew(g,I){for(let A=I,C=g.length-1;A<C;A++)g[A]=g[A+1];g.pop()}function Fw(g,I,A){for(let C=g.length-1;C>=I;C--)g[C+1]=g[C];g[I]=A}function Lw(g,I){let A=-1,C=1e9;for(let t=0;t<I.length;t++)(I[t]-C||g[t].endSide-g[A].endSide)<0&&(A=t,C=I[t]);return A}for(var Tw={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},zw={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},Pw="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),Uw="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),xw="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),jw="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),_w="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),$w=Pw&&(jw||+Pw[1]<57)||xw&&jw,qw=0;qw<10;qw++)Tw[48+qw]=Tw[96+qw]=String(qw);for(qw=1;qw<=24;qw++)Tw[qw+111]="F"+qw;for(qw=65;qw<=90;qw++)Tw[qw]=String.fromCharCode(qw+32),zw[qw]=String.fromCharCode(qw);for(var gW in Tw)zw.hasOwnProperty(gW)||(zw[gW]=Tw[gW]);function IW(g){return g.getSelection?g.getSelection():document.getSelection()}function AW(g,I){return!!I&&g.contains(1!=I.nodeType?I.parentNode:I)}function CW(g,I){if(!I.anchorNode)return!1;try{return AW(g,I.anchorNode)}catch(hD){return!1}}function tW(g){return 3==g.nodeType?mW(g,0,g.nodeValue.length).getClientRects():1==g.nodeType?g.getClientRects():[]}function iW(g,I,A,C){return!!A&&(oW(g,I,A,C,-1)||oW(g,I,A,C,1))}function eW(g){for(var I=0;;I++)if(!(g=g.previousSibling))return I}function oW(g,I,A,C,t){for(;;){if(g==A&&I==C)return!0;if(I==(t<0?0:nW(g))){if("DIV"==g.nodeName)return!1;let A=g.parentNode;if(!A||1!=A.nodeType)return!1;I=eW(g)+(t<0?0:1),g=A}else{if(1!=g.nodeType)return!1;if(1==(g=g.childNodes[I+(t<0?-1:0)]).nodeType&&"false"==g.contentEditable)return!1;I=t<0?nW(g):0}}}function nW(g){return 3==g.nodeType?g.nodeValue.length:g.childNodes.length}const sW={left:0,right:0,top:0,bottom:0};function lW(g,I){let A=I?g.left:g.right;return{left:A,right:A,top:g.top,bottom:g.bottom}}function rW(g){return{left:0,right:g.innerWidth,top:0,bottom:g.innerHeight}}class cW{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(g){return this.anchorNode==g.anchorNode&&this.anchorOffset==g.anchorOffset&&this.focusNode==g.focusNode&&this.focusOffset==g.focusOffset}set(g){this.anchorNode=g.anchorNode,this.anchorOffset=g.anchorOffset,this.focusNode=g.focusNode,this.focusOffset=g.focusOffset}}let aW,dW=null;function hW(g){if(g.setActive)return g.setActive();if(dW)return g.focus(dW);let I=[];for(let A=g;A&&(I.push(A,A.scrollTop,A.scrollLeft),A!=A.ownerDocument);A=A.parentNode);if(g.focus(null==dW?{get preventScroll(){return dW={preventScroll:!0},!0}}:void 0),!dW){dW=!1;for(let g=0;g<I.length;){let A=I[g++],C=I[g++],t=I[g++];A.scrollTop!=C&&(A.scrollTop=C),A.scrollLeft!=t&&(A.scrollLeft=t)}}}function mW(g,I,A=I){let C=aW||(aW=document.createRange());return C.setEnd(g,A),C.setStart(g,I),C}function ZW(g,I,A){let C={key:I,code:I,keyCode:A,which:A,cancelable:!0},t=new KeyboardEvent("keydown",C);t.synthetic=!0,g.dispatchEvent(t);let i=new KeyboardEvent("keyup",C);return i.synthetic=!0,g.dispatchEvent(i),t.defaultPrevented||i.defaultPrevented}let uW=null;function GW(){if(null==uW){uW=!1;let g=document.createElement("div");try{g.contentEditable="plaintext-only",uW="plaintext-only"==g.contentEditable}catch(hD){}}return uW}class bW{constructor(g,I,A=!0){this.node=g,this.offset=I,this.precise=A}static before(g,I){return new bW(g.parentNode,eW(g),I)}static after(g,I){return new bW(g.parentNode,eW(g)+1,I)}}const pW=[];class BW{constructor(){this.parent=null,this.dom=null,this.dirty=2}get editorView(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(g){let I=this.posAtStart;for(let A of this.children){if(A==g)return I;I+=A.length+A.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(g){return this.posBefore(g)+g.length}coordsAt(g,I){return null}sync(g){var I;if(2&this.dirty){let A=this.dom,C=null;for(let i of this.children){if(i.dirty){let t=C?C.nextSibling:A.firstChild;i.dom||!t||(null===(I=BW.get(t))||void 0===I?void 0:I.parent)||i.reuseDOM(t),i.sync(g),i.dirty=0}g&&g.node==A&&C!=i.dom&&(g.written=!0),wW(A,C,i.dom),C=i.dom}let t=C?C.nextSibling:A.firstChild;for(t&&g&&g.node==A&&(g.written=!0);t;)t=yW(t)}else if(1&this.dirty)for(let A of this.children)A.dirty&&(A.sync(g),A.dirty=0)}reuseDOM(g){return!1}localPosFromDOM(g,I){let A;if(g==this.dom)A=this.dom.childNodes[I];else{let C=0==nW(g)?0:0==I?-1:1;for(;;){let I=g.parentNode;if(I==this.dom)break;0==C&&I.firstChild!=I.lastChild&&(C=g==I.firstChild?-1:1),g=I}A=C<0?g:g.nextSibling}if(A==this.dom.firstChild)return 0;for(;A&&!BW.get(A);)A=A.nextSibling;if(!A)return this.length;for(let C=0,t=0;;C++){let g=this.children[C];if(g.dom==A)return t;t+=g.length+g.breakAfter}}domBoundsAround(g,I,A=0){let C=-1,t=-1,i=-1,e=-1;for(let o=0,n=A,s=A;o<this.children.length;o++){let A=this.children[o],l=n+A.length;if(n<g&&l>I)return A.domBoundsAround(g,I,n);if(l>=g&&-1==C&&(C=o,t=n),n>I&&A.dom.parentNode==this.dom){i=o,e=s;break}s=l,n=l+A.breakAfter}return{from:t,to:e<0?A+this.length:e,startDOM:(C?this.children[C-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:i<this.children.length&&i>=0?this.children[i].dom:null}}markDirty(g=!1){this.dirty|=2,this.markParentsDirty(g)}markParentsDirty(g){for(let I=this.parent;I;I=I.parent){if(g&&(I.dirty|=2),1&I.dirty)return;I.dirty|=1,g=!1}}setParent(g){this.parent!=g&&(this.parent=g,this.dirty&&this.markParentsDirty(!0))}setDOM(g){this.dom&&(this.dom.cmView=null),this.dom=g,g.cmView=this}get rootView(){for(let g=this;;){let I=g.parent;if(!I)return g;g=I}}replaceChildren(g,I,A=pW){this.markDirty();for(let C=g;C<I;C++){let g=this.children[C];g.parent==this&&(g.parent=null)}this.children.splice(g,I-g,...A);for(let C=0;C<A.length;C++)A[C].setParent(this)}ignoreMutation(g){return!1}ignoreEvent(g){return!1}childCursor(g=this.length){return new WW(this.children,g,this.children.length)}childPos(g,I=1){return this.childCursor().findPos(g,I)}toString(){let g=this.constructor.name.replace("View","");return g+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==g?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(g){return g.cmView}}function yW(g){let I=g.nextSibling;return g.parentNode.removeChild(g),I}function wW(g,I,A){let C=I?I.nextSibling:g.firstChild;if(A.parentNode==g)for(;C!=A;)C=yW(C);else g.insertBefore(A,C)}BW.prototype.breakAfter=0;class WW{constructor(g,I,A){this.children=g,this.pos=I,this.i=A,this.off=0}findPos(g,I=1){for(;;){if(g>this.pos||g==this.pos&&(I>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=g-this.pos,this;let A=this.children[--this.i];this.pos-=A.length+A.breakAfter}}}let[SW,KW]="undefined"!=typeof navigator?[navigator,document]:[{userAgent:"",vendor:"",platform:""},{documentElement:{style:{}}}];const fW=/Edge\/(\d+)/.exec(SW.userAgent),YW=/MSIE \d/.test(SW.userAgent),XW=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(SW.userAgent),VW=!!(YW||XW||fW),OW=!VW&&/gecko\/(\d+)/i.test(SW.userAgent),RW=!VW&&/Chrome\/(\d+)/.exec(SW.userAgent),QW="webkitFontSmoothing"in KW.documentElement.style,HW=!VW&&/Apple Computer/.test(SW.vendor);var kW={mac:/Mac/.test(SW.platform),ie:VW,ie_version:YW?KW.documentMode||6:XW?+XW[1]:fW?+fW[1]:0,gecko:OW,gecko_version:OW?+(/Firefox\/(\d+)/.exec(SW.userAgent)||[0,0])[1]:0,chrome:!!RW,chrome_version:RW?+RW[1]:0,ios:HW&&(/Mobile\/\w+/.test(SW.userAgent)||SW.maxTouchPoints>2),android:/Android\b/.test(SW.userAgent),webkit:QW,safari:HW,webkit_version:QW?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:null!=KW.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};const JW=[];class vW extends BW{become(g){return!1}getSide(){return 0}}vW.prototype.children=JW;class DW extends vW{constructor(g){super(),this.text=g}get length(){return this.text.length}createDOM(g){this.setDOM(g||document.createTextNode(this.text))}sync(g){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(g&&g.node==this.dom&&(g.written=!0),this.dom.nodeValue=this.text)}reuseDOM(g){return 3==g.nodeType&&(this.createDOM(g),!0)}merge(g,I,A){return(!A||A instanceof DW&&!(this.length-(I-g)+A.length>256))&&(this.text=this.text.slice(0,g)+(A?A.text:"")+this.text.slice(I),this.markDirty(),!0)}slice(g){let I=new DW(this.text.slice(g));return this.text=this.text.slice(0,g),I}localPosFromDOM(g,I){return g==this.dom?I:I?this.text.length:0}domAtPos(g){return new bW(this.dom,g)}domBoundsAround(g,I,A){return{from:A,to:A+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(g,I){return NW(this.dom,g,I)}}class MW extends vW{constructor(g,I=[],A=0){super(),this.mark=g,this.children=I,this.length=A;for(let C of I)C.setParent(this)}createDOM(){let g=document.createElement(this.mark.tagName);if(this.mark.class&&(g.className=this.mark.class),this.mark.attrs)for(let I in this.mark.attrs)g.setAttribute(I,this.mark.attrs[I]);this.setDOM(g)}sync(g){(!this.dom||4&this.dirty)&&this.createDOM(),super.sync(g)}merge(g,I,A,C,t){return(!A||!(!(A instanceof MW&&A.mark.eq(this.mark))||g&&C<=0||I<this.length&&t<=0))&&(LW(this,g,I,A?A.children:JW,C-1,t-1),this.markDirty(),!0)}slice(g){let I=[],A=0,C=-1,t=0;for(let e of this.children){let i=A+e.length;i>g&&I.push(A<g?e.slice(g-A):e),C<0&&A>=g&&(C=t),A=i,t++}let i=this.length-g;return this.length=g,C>-1&&this.replaceChildren(C,this.children.length),new MW(this.mark,I,i)}domAtPos(g){return TW(this.dom,this.children,g)}coordsAt(g,I){return PW(this,g,I)}}function NW(g,I,A){let C=g.nodeValue.length;I>C&&(I=C);let t=I,i=I,e=0;0==I&&A<0||I==C&&A>=0?kW.chrome||kW.gecko||(I?(t--,e=1):(i++,e=-1)):A<0?t--:i++;let o=mW(g,t,i).getClientRects();if(!o.length)return sW;let n=o[(e?e<0:A>=0)?0:o.length-1];return kW.safari&&!e&&0==n.width&&(n=Array.prototype.find.call(o,(g=>g.width))||n),e?lW(n,e<0):n}class EW extends vW{constructor(g,I,A){super(),this.widget=g,this.length=I,this.side=A}static create(g,I,A){return new(g.customView||EW)(g,I,A)}slice(g){let I=EW.create(this.widget,this.length-g,this.side);return this.length-=g,I}sync(){this.dom&&this.widget.updateDOM(this.dom)||(this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}getSide(){return this.side}merge(g,I,A,C,t){return!(A&&(!(A instanceof EW&&this.widget.compare(A.widget))||g>0&&C<=0||I<this.length&&t<=0))&&(this.length=g+(A?A.length:0)+(this.length-I),!0)}become(g){return g.length==this.length&&g instanceof EW&&g.side==this.side&&this.widget.constructor==g.widget.constructor&&(this.widget.eq(g.widget)||this.markDirty(!0),this.widget=g.widget,!0)}ignoreMutation(){return!0}ignoreEvent(g){return this.widget.ignoreEvent(g)}get overrideDOMText(){if(0==this.length)return ry.empty;let g=this;for(;g.parent;)g=g.parent;let I=g.editorView,A=I&&I.state.doc,C=this.posAtStart;return A?A.slice(C,C+this.length):ry.empty}domAtPos(g){return 0==g?bW.before(this.dom):bW.after(this.dom,g==this.length)}domBoundsAround(){return null}coordsAt(g,I){let A=this.dom.getClientRects(),C=null;if(!A.length)return sW;for(let t=g>0?A.length-1:0;C=A[t],!(g>0?0==t:t==A.length-1||C.top<C.bottom);t+=g>0?-1:1);return 0==g&&I>0||g==this.length&&I<=0?C:lW(C,0==g)}}class FW extends EW{domAtPos(g){return new bW(this.widget.text,g)}sync(){this.dom||this.setDOM(this.widget.toDOM())}localPosFromDOM(g,I){return I?3==g.nodeType?Math.min(I,this.length):this.length:0}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(g,I){return NW(this.widget.text,g,I)}}function LW(g,I,A,C,t,i){let e=g.childCursor(),{i:o,off:n}=e.findPos(A,1),{i:s,off:l}=e.findPos(I,-1),r=I-A;for(let a of C)r+=a.length;g.length+=r;let{children:c}=g;if(s==o&&l){let g=c[s];if(1==C.length&&g.merge(l,n,C[0],t,i))return;if(0==C.length)return void g.merge(l,n,null,t,i);let I=g.slice(n);I.merge(0,0,C[C.length-1],0,i)?C[C.length-1]=I:C.push(I),o++,i=n=0}if(n){let g=c[o];C.length&&g.merge(0,n,C[C.length-1],0,i)?(C.pop(),i=C.length?0:t):g.merge(0,n,null,0,0)}else o<c.length&&C.length&&c[o].merge(0,0,C[C.length-1],0,i)&&(C.pop(),i=C.length?0:t);if(l){let g=c[s];C.length&&g.merge(l,g.length,C[0],t,0)?(C.shift(),t=C.length?0:i):g.merge(l,g.length,null,0,0),s++}else if(s&&C.length){let g=c[s-1];g.merge(g.length,g.length,C[0],t,0)&&(C.shift(),t=C.length?0:i)}for(;s<o&&C.length&&c[o-1].become(C[C.length-1]);)C.pop(),o--,i=C.length?0:t;for(;s<o&&C.length&&c[s].become(C[0]);)C.shift(),s++,t=C.length?0:i;!C.length&&s&&o<c.length&&c[o].merge(0,0,c[s-1],t,i)&&s--,(C.length||s!=o)&&g.replaceChildren(s,o,C)}function TW(g,I,A){let C=0;for(let t=0;C<I.length;C++){let i=I[C],e=t+i.length;if(!(e==t&&i.getSide()<=0)){if(A>t&&A<e&&i.dom.parentNode==g)return i.domAtPos(A-t);if(A<=t)break;t=e}}for(;C>0;C--){let A=I[C-1].dom;if(A.parentNode==g)return bW.after(A)}return new bW(g,0)}function zW(g,I,A){let C,{children:t}=g;A>0&&I instanceof MW&&t.length&&(C=t[t.length-1])instanceof MW&&C.mark.eq(I.mark)?zW(C,I.children[0],A-1):(t.push(I),I.setParent(g)),g.length+=I.length}function PW(g,I,A){for(let i=0,e=0;e<g.children.length;e++){let C,t=g.children[e],o=i+t.length;if((A<=0||o==g.length||t.getSide()>0?o>=I:o>I)&&(I<o||e+1==g.children.length||(C=g.children[e+1]).length||C.getSide()>0)){let g=0;if(o==i){if(t.getSide()<=0)continue;g=A=-t.getSide()}let C=t.coordsAt(I-i,A);return g&&C?lW(C,A<0):C}i=o}let C=g.dom.lastChild;if(!C)return g.dom.getBoundingClientRect();let t=tW(C);return t[t.length-1]}function UW(g,I){for(let A in g)"class"==A&&I.class?I.class+=" "+g.class:"style"==A&&I.style?I.style+=";"+g.style:I[A]=g[A];return I}function xW(g,I){if(g==I)return!0;if(!g||!I)return!1;let A=Object.keys(g),C=Object.keys(I);if(A.length!=C.length)return!1;for(let t of A)if(-1==C.indexOf(t)||g[t]!==I[t])return!1;return!0}function jW(g,I,A){if(I)for(let C in I)A&&C in A||g.removeAttribute(C);if(A)for(let C in A)I&&I[C]==A[C]||g.setAttribute(C,A[C])}class _W{eq(g){return!1}updateDOM(g){return!1}compare(g){return this==g||this.constructor==g.constructor&&this.eq(g)}get estimatedHeight(){return-1}ignoreEvent(g){return!0}get customView(){return null}}var $W=function(g){return g[g.Text=0]="Text",g[g.WidgetBefore=1]="WidgetBefore",g[g.WidgetAfter=2]="WidgetAfter",g[g.WidgetRange=3]="WidgetRange",g}($W||($W={}));class qW extends Yw{constructor(g,I,A,C){super(),this.startSide=g,this.endSide=I,this.widget=A,this.spec=C}get heightRelevant(){return!1}static mark(g){return new gS(g)}static widget(g){let I=g.side||0;return g.block&&(I+=200000001*(I>0?1:-1)),new AS(g,I,I,!!g.block,g.widget||null,!1)}static replace(g){let I=!!g.block,{start:A,end:C}=CS(g);return new AS(g,I?-2e8*(A?2:1):1e8*(A?-1:1),I?2e8*(C?2:1):1e8*(C?1:-1),I,g.widget||null,!0)}static line(g){return new IS(g)}static set(g,I=!1){return Rw.of(g,I)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}qW.none=Rw.empty;class gS extends qW{constructor(g){let{start:I,end:A}=CS(g);super(1e8*(I?-1:1),1e8*(A?1:-1),null,g),this.tagName=g.tagName||"span",this.class=g.class||"",this.attrs=g.attributes||null}eq(g){return this==g||g instanceof gS&&this.tagName==g.tagName&&this.class==g.class&&xW(this.attrs,g.attrs)}range(g,I=g){if(g>=I)throw new RangeError("Mark decorations may not be empty");return super.range(g,I)}}gS.prototype.point=!1;class IS extends qW{constructor(g){super(-1e8,-1e8,null,g)}eq(g){return g instanceof IS&&xW(this.spec.attributes,g.spec.attributes)}range(g,I=g){if(I!=g)throw new RangeError("Line decoration ranges must be zero-length");return super.range(g,I)}}IS.prototype.mapMode=py.TrackBefore,IS.prototype.point=!0;class AS extends qW{constructor(g,I,A,C,t,i){super(I,A,t,g),this.block=C,this.isReplace=i,this.mapMode=C?I<0?py.TrackBefore:py.TrackAfter:py.TrackDel}get type(){return this.startSide<this.endSide?$W.WidgetRange:this.startSide<0?$W.WidgetBefore:$W.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(g){return g instanceof AS&&(I=this.widget,A=g.widget,I==A||!!(I&&A&&I.compare(A)))&&this.block==g.block&&this.startSide==g.startSide&&this.endSide==g.endSide;var I,A}range(g,I=g){if(this.isReplace&&(g>I||g==I&&this.startSide>0&&this.endSide<0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&I!=g)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(g,I)}}function CS(g){let{inclusiveStart:I,inclusiveEnd:A}=g;return null==I&&(I=g.inclusive),null==A&&(A=g.inclusive),{start:I||!1,end:A||!1}}function tS(g,I,A,C=0){let t=A.length-1;t>=0&&A[t]+C>g?A[t]=Math.max(A[t],I):A.push(g,I)}AS.prototype.point=!0;class iS extends BW{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(g,I,A,C,t,i){if(A){if(!(A instanceof iS))return!1;this.dom||A.transferDOM(this)}return C&&this.setDeco(A?A.attrs:null),LW(this,g,I,A?A.children:eS,t,i),!0}split(g){let I=new iS;if(I.breakAfter=this.breakAfter,0==this.length)return I;let{i:A,off:C}=this.childPos(g);C&&(I.append(this.children[A].slice(C),0),this.children[A].merge(C,this.children[A].length,null,0,0),A++);for(let t=A;t<this.children.length;t++)I.append(this.children[t],0);for(;A>0&&0==this.children[A-1].length;)this.children[A-1].parent=null,A--;return this.children.length=A,this.markDirty(),this.length=g,I}transferDOM(g){this.dom&&(g.setDOM(this.dom),g.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(g){xW(this.attrs,g)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=g)}append(g,I){zW(this,g,I)}addLineDeco(g){let I=g.spec.attributes;I&&(this.attrs=UW(I,this.attrs||{}))}domAtPos(g){return TW(this.dom,this.children,g)}sync(g){(!this.dom||4&this.dirty)&&(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(jW(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(g);let I=this.dom.lastChild;for(;I&&BW.get(I)instanceof MW;)I=I.lastChild;if(!I||"BR"!=I.nodeName&&BW.get(I)instanceof EW&&(!kW.ios||!this.children.some((g=>g instanceof DW)))){let g=document.createElement("BR");g.cmIgnore=!0,this.dom.appendChild(g)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let g=0;for(let I of this.children){if(!(I instanceof DW))return null;let A=tW(I.dom);if(1!=A.length)return null;g+=A[0].width}return{lineHeight:this.dom.getBoundingClientRect().height,charWidth:g/this.length}}coordsAt(g,I){return PW(this,g,I)}match(g){return!1}get type(){return $W.Text}static find(g,I){for(let A=0,C=0;;A++){let t=g.children[A],i=C+t.length;if(i>=I){if(t instanceof iS)return t;if(t.length)return null}C=i+t.breakAfter}}}const eS=[];class oS extends BW{constructor(g,I,A){super(),this.widget=g,this.length=I,this.type=A,this.breakAfter=0}merge(g,I,A,C,t,i){return!(A&&(!(A instanceof oS&&this.widget.compare(A.widget))||g>0&&t<=0||I<this.length&&i<=0))&&(this.length=g+(A?A.length:0)+(this.length-I),!0)}domAtPos(g){return 0==g?bW.before(this.dom):bW.after(this.dom,g==this.length)}split(g){let I=this.length-g;return this.length=g,new oS(this.widget,I,this.type)}get children(){return eS}sync(){this.dom&&this.widget.updateDOM(this.dom)||(this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):ry.empty}domBoundsAround(){return null}match(g){return g instanceof oS&&g.type==this.type&&g.widget.constructor==this.widget.constructor&&(g.widget.eq(this.widget)||this.markDirty(!0),this.widget=g.widget,this.length=g.length,this.breakAfter=g.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(g){return this.widget.ignoreEvent(g)}}class nS{constructor(g,I,A){this.doc=g,this.pos=I,this.end=A,this.content=[],this.curLine=null,this.breakAtStart=0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=g.iter(),this.skip=I}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let g=this.content[this.content.length-1];return!(g.breakAfter||g instanceof oS&&g.type==$W.WidgetBefore)}getLine(){return this.curLine||this.content.push(this.curLine=new iS),this.curLine}addWidget(g){this.curLine=null,this.content.push(g)}finish(){this.posCovered()||this.getLine()}wrapMarks(g,I){for(let A of I)g=new MW(A,[g],g.length);return g}buildText(g,I,A){for(;g>0;){if(this.textOff==this.text.length){let{value:I,lineBreak:A,done:C}=this.cursor.next(this.skip);if(this.skip=0,C)throw new Error("Ran out of text content when drawing inline views");if(A){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.curLine=null,g--;continue}this.text=I,this.textOff=0}let C=Math.min(this.text.length-this.textOff,g,512);this.getLine().append(this.wrapMarks(new DW(this.text.slice(this.textOff,this.textOff+C)),I),A),this.textOff+=C,g-=C,A=0}}span(g,I,A,C){this.buildText(I-g,A,C),this.pos=I,this.openStart<0&&(this.openStart=C)}point(g,I,A,C,t){let i=I-g;if(A instanceof AS)if(A.block){let{type:g}=A;g!=$W.WidgetAfter||this.posCovered()||this.getLine(),this.addWidget(new oS(A.widget||new sS("div"),i,g))}else{let g=this.wrapMarks(EW.create(A.widget||new sS("span"),i,A.startSide),C);this.getLine().append(g,t)}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(A);i&&(this.textOff+i<=this.text.length?this.textOff+=i:(this.skip+=i-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=I),this.openStart<0&&(this.openStart=t)}static build(g,I,A,C){let t=new nS(g,I,A);return t.openEnd=Rw.spans(C,I,A,t),t.openStart<0&&(t.openStart=t.openEnd),t.finish(),t}}class sS extends _W{constructor(g){super(),this.tag=g}eq(g){return g.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(g){return g.nodeName.toLowerCase()==this.tag}}const lS=[],rS=Hy.define(),cS=Hy.define(),aS=Hy.define(),dS=Hy.define(),hS=Hy.define(),mS=Hy.define(),ZS=sw.define({map:(g,I)=>g.map(I)});function uS(g,I,A){let C=g.facet(dS);C.length?C[0](I):window.onerror?window.onerror(String(I),A,void 0,void 0,I):A?console.error(A+":",I):console.error(I)}const GS=Hy.define({combine:g=>!g.length||g[0]});class bS{constructor(g,I){this.field=g,this.get=I}}class pS{from(g){return new bS(this,g)}static define(){return new pS}}pS.decorations=pS.define(),pS.atomicRanges=pS.define(),pS.scrollMargins=pS.define();let BS=0;const yS=Hy.define();class wS{constructor(g,I,A){this.id=g,this.create=I,this.fields=A,this.extension=yS.of(this)}static define(g,I){let{eventHandlers:A,provide:C,decorations:t}=I||{},i=[];if(C)for(let e of Array.isArray(C)?C:[C])i.push(e);return A&&i.push(WS.from((g=>({plugin:g,handlers:A})))),t&&i.push(pS.decorations.from(t)),new wS(BS++,g,i)}static fromClass(g,I){return wS.define((I=>new g(I)),I)}}const WS=pS.define();class SS{constructor(g){this.spec=g,this.mustUpdate=null,this.value=null}takeField(g,I){for(let{field:A,get:C}of this.spec.fields)A==g&&I.push(C(this.value))}update(g){if(this.value){if(this.mustUpdate){let g=this.mustUpdate;if(this.mustUpdate=null,!this.value.update)return this;try{this.value.update(g)}catch(dD){if(uS(g.state,dD,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(hD){}return SS.dummy}}}else try{this.value=this.spec.create(g)}catch(dD){return uS(g.state,dD,"CodeMirror plugin crashed"),SS.dummy}return this}destroy(g){var I;if(null===(I=this.value)||void 0===I?void 0:I.destroy)try{this.value.destroy()}catch(dD){uS(g.state,dD,"CodeMirror plugin crashed")}}}SS.dummy=new SS(wS.define((()=>({}))));const KS=Hy.define({combine:g=>g.reduce(((g,I)=>UW(I,g)),{})}),fS=Hy.define({combine:g=>g.reduce(((g,I)=>UW(I,g)),{})}),YS=Hy.define(),XS=Hy.define();class VS{constructor(g,I,A,C){this.fromA=g,this.toA=I,this.fromB=A,this.toB=C}join(g){return new VS(Math.min(this.fromA,g.fromA),Math.max(this.toA,g.toA),Math.min(this.fromB,g.fromB),Math.max(this.toB,g.toB))}addToSet(g){let I=g.length,A=this;for(;I>0;I--){let C=g[I-1];if(!(C.fromA>A.toA)){if(C.toA<A.fromA)break;A=A.join(C),g.splice(I-1,1)}}return g.splice(I,0,A),g}static extendWithRanges(g,I){if(0==I.length)return g;let A=[];for(let C=0,t=0,i=0,e=0;;C++){let o=C==g.length?null:g[C],n=i-e,s=o?o.fromB:1e9;for(;t<I.length&&I[t]<s;){let g=I[t],C=I[t+1],i=Math.max(e,g),o=Math.min(s,C);if(i<=o&&new VS(i+n,o+n,i,o).addToSet(A),C>s)break;t+=2}if(!o)return A;new VS(o.fromA,o.toA,o.fromB,o.toB).addToSet(A),i=o.toA,e=o.toB}}}class OS{constructor(g,I,A=lS){this.view=g,this.state=I,this.transactions=A,this.flags=0,this.startState=g.state,this.changes=yy.empty(this.startState.doc.length);for(let i of A)this.changes=this.changes.compose(i.changes);let C=[];this.changes.iterChangedRanges(((g,I,A,t)=>C.push(new VS(g,I,A,t)))),this.changedRanges=C;let t=g.hasFocus;t!=g.inputState.notifiedFocused&&(g.inputState.notifiedFocused=t,this.flags|=1),this.docChanged&&(this.flags|=2)}get viewportChanged(){return(4&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(18&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return this.transactions.some((g=>g.docChanged))}get selectionSet(){return this.transactions.some((g=>g.selection))}get empty(){return 0==this.flags&&0==this.transactions.length}}class RS extends BW{constructor(g){super(),this.view=g,this.compositionDeco=qW.none,this.decorations=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.setDOM(g.contentDOM),this.children=[new iS],this.children[0].setParent(this),this.updateInner([new VS(0,0,0,g.state.doc.length)],this.updateDeco(),0)}get root(){return this.view.root}get editorView(){return this.view}get length(){return this.view.state.doc.length}update(g){let I=g.changedRanges;this.minWidth>0&&I.length&&(I.every((({fromA:g,toA:I})=>I<this.minWidthFrom||g>this.minWidthTo))?(this.minWidthFrom=g.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=g.changes.mapPos(this.minWidthTo,1)):this.minWidth=0),this.view.inputState.composing<0?this.compositionDeco=qW.none:g.transactions.length&&(this.compositionDeco=function(g,I){let A=g.observer.selectionRange,C=A.focusNode&&kS(A.focusNode,A.focusOffset,0);if(!C)return qW.none;let t,i,e=g.docView.nearest(C),o=C;if(e instanceof vW){for(;e.parent instanceof vW;)e=e.parent;t=e.posAtStart,i=t+e.length,o=e.dom}else{if(!(e instanceof iS))return qW.none;{for(;o.parentNode!=e.dom;)o=o.parentNode;let g=o.previousSibling;for(;g&&!BW.get(g);)g=g.previousSibling;t=i=g?BW.get(g).posAtEnd:e.posAtStart}}let n=I.mapPos(t,1),s=Math.max(n,I.mapPos(i,-1)),l=C.nodeValue,{state:r}=g;if(s-n<l.length)if(r.sliceDoc(n,Math.min(r.doc.length,n+l.length))==l)s=n+l.length;else{if(r.sliceDoc(Math.max(0,s-l.length),s)!=l)return qW.none;n=s-l.length}else if(r.sliceDoc(n,s)!=l)return qW.none;return qW.set(qW.replace({widget:new HS(o,C)}).range(n,s))}(this.view,g.changes));let A=(kW.ie||kW.chrome)&&!this.compositionDeco.size&&g&&g.state.doc.lines!=g.startState.doc.lines,C=this.decorations,t=this.updateDeco(),i=function(g,I,A){let C=new JS;return Rw.compare(g,I,A,C),C.changes}(C,t,g.changes);I=VS.extendWithRanges(I,i);let e=g.transactions.some((g=>g.isUserEvent("select.pointer")));return 0==this.dirty&&0==I.length&&!(12&g.flags)&&g.state.selection.main.from>=this.view.viewport.from&&g.state.selection.main.to<=this.view.viewport.to?(this.updateSelection(A,e),!1):(this.updateInner(I,t,g.startState.doc.length,A,e),!0)}updateInner(g,I,A,C=!1,t=!1){this.updateChildren(g,I,A);let{observer:i}=this.view;i.ignore((()=>{this.dom.style.height=this.view.viewState.domHeight+"px",this.dom.style.minWidth=this.minWidth?this.minWidth+"px":"";let g=kW.chrome||kW.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(g),this.dirty=0,g&&(g.written||i.selectionRange.focusNode!=g.node)&&(C=!0),this.updateSelection(C,t),this.dom.style.height=""}))}updateChildren(g,I,A){let C=this.childCursor(A);for(let t=g.length-1;;t--){let A=t>=0?g[t]:null;if(!A)break;let{fromA:i,toA:e,fromB:o,toB:n}=A,{content:s,breakAtStart:l,openStart:r,openEnd:c}=nS.build(this.view.state.doc,o,n,I),{i:a,off:d}=C.findPos(e,1),{i:h,off:m}=C.findPos(i,-1);this.replaceRange(h,m,a,d,s,l,r,c)}}replaceRange(g,I,A,C,t,i,e,o){let n=this.children[g],s=t.length?t[t.length-1]:null,l=s?s.breakAfter:i;if(g==A&&!i&&!l&&t.length<2&&n.merge(I,C,t.length?s:null,0==I,e,o))return;let r=this.children[A];for(C<r.length?(g==A&&(r=r.split(C),C=0),!l&&s&&r.merge(0,C,s,!0,0,o)?t[t.length-1]=r:(C&&r.merge(0,C,null,!1,0,o),t.push(r))):r.breakAfter&&(s?s.breakAfter=1:i=1),A++,n.breakAfter=i,I>0&&(!i&&t.length&&n.merge(I,n.length,t[0],!1,e,0)?n.breakAfter=t.shift().breakAfter:(I<n.length||n.children.length&&0==n.children[n.children.length-1].length)&&n.merge(I,n.length,null,!1,e,0),g++);g<A&&t.length;)if(this.children[A-1].match(t[t.length-1]))A--,t.pop();else{if(!this.children[g].match(t[0]))break;g++,t.shift()}(g<A||t.length)&&this.replaceChildren(g,A,t)}updateSelection(g=!1,I=!1){if(!I&&!this.mayControlSelection()||kW.ios&&this.view.inputState.rapidCompositionStart)return;let A=this.view.state.selection.main,C=this.domAtPos(A.anchor),t=A.empty?C:this.domAtPos(A.head);if(kW.gecko&&A.empty&&(1==(i=C).node.nodeType&&i.node.firstChild&&(0==i.offset||"false"==i.node.childNodes[i.offset-1].contentEditable)&&(i.offset==i.node.childNodes.length||"false"==i.node.childNodes[i.offset].contentEditable))){let I=document.createTextNode("");this.view.observer.ignore((()=>C.node.insertBefore(I,C.node.childNodes[C.offset]||null))),C=t=new bW(I,0),g=!0}var i;let e=this.view.observer.selectionRange;!g&&e.focusNode&&iW(C.node,C.offset,e.anchorNode,e.anchorOffset)&&iW(t.node,t.offset,e.focusNode,e.focusOffset)||(this.view.observer.ignore((()=>{let g=IW(this.root);if(A.empty){if(kW.gecko){let g=(I=C.node,i=C.offset,1!=I.nodeType?0:(i&&"false"==I.childNodes[i-1].contentEditable?1:0)|(i<I.childNodes.length&&"false"==I.childNodes[i].contentEditable?2:0));if(g&&3!=g){let I=kS(C.node,C.offset,1==g?1:-1);I&&(C=new bW(I,1==g?0:I.nodeValue.length))}}g.collapse(C.node,C.offset),null!=A.bidiLevel&&null!=e.cursorBidiLevel&&(e.cursorBidiLevel=A.bidiLevel)}else if(g.extend)g.collapse(C.node,C.offset),g.extend(t.node,t.offset);else{let I=document.createRange();A.anchor>A.head&&([C,t]=[t,C]),I.setEnd(t.node,t.offset),I.setStart(C.node,C.offset),g.removeAllRanges(),g.addRange(I)}var I,i})),this.view.observer.setSelectionRange(C,t)),this.impreciseAnchor=C.precise?null:new bW(e.anchorNode,e.anchorOffset),this.impreciseHead=t.precise?null:new bW(e.focusNode,e.focusOffset)}enforceCursorAssoc(){if(this.view.composing)return;let g=this.view.state.selection.main,I=IW(this.root);if(!g.empty||!g.assoc||!I.modify)return;let A=iS.find(this,g.head);if(!A)return;let C=A.posAtStart;if(g.head==C||g.head==C+A.length)return;let t=this.coordsAt(g.head,-1),i=this.coordsAt(g.head,1);if(!t||!i||t.bottom>i.top)return;let e=this.domAtPos(g.head+g.assoc);I.collapse(e.node,e.offset),I.modify("move",g.assoc<0?"forward":"backward","lineboundary")}mayControlSelection(){return this.view.state.facet(GS)?this.root.activeElement==this.dom:CW(this.dom,this.view.observer.selectionRange)}nearest(g){for(let I=g;I;){let g=BW.get(I);if(g&&g.rootView==this)return g;I=I.parentNode}return null}posFromDOM(g,I){let A=this.nearest(g);if(!A)throw new RangeError("Trying to find position for a DOM position outside of the document");return A.localPosFromDOM(g,I)+A.posAtStart}domAtPos(g){let{i:I,off:A}=this.childCursor().findPos(g,-1);for(;I<this.children.length-1;){let g=this.children[I];if(A<g.length||g instanceof iS)break;I++,A=0}return this.children[I].domAtPos(A)}coordsAt(g,I){for(let A=this.length,C=this.children.length-1;;C--){let t=this.children[C],i=A-t.breakAfter-t.length;if(g>i||g==i&&t.type!=$W.WidgetBefore&&t.type!=$W.WidgetAfter&&(!C||2==I||this.children[C-1].breakAfter||this.children[C-1].type==$W.WidgetBefore&&I>-2))return t.coordsAt(g-i,I);A=i}}measureVisibleLineHeights(){let g=[],{from:I,to:A}=this.view.viewState.viewport,C=Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1;for(let t=0,i=0;i<this.children.length;i++){let e=this.children[i],o=t+e.length;if(o>A)break;if(t>=I){g.push(e.dom.getBoundingClientRect().height);let I=e.dom.scrollWidth;I>C&&(this.minWidth=C=I,this.minWidthFrom=t,this.minWidthTo=o)}t=o+e.breakAfter}return g}measureTextSize(){for(let C of this.children)if(C instanceof iS){let g=C.measureTextSize();if(g)return g}let g,I,A=document.createElement("div");return A.className="cm-line",A.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore((()=>{this.dom.appendChild(A);let C=tW(A.firstChild)[0];g=A.getBoundingClientRect().height,I=C?C.width/27:7,A.remove()})),{lineHeight:g,charWidth:I}}childCursor(g=this.length){let I=this.children.length;return I&&(g-=this.children[--I].length),new WW(this.children,g,I)}computeBlockGapDeco(){let g=[],I=this.view.viewState;for(let A=0,C=0;;C++){let t=C==I.viewports.length?null:I.viewports[C],i=t?t.from-1:this.length;if(i>A){let C=I.lineAt(i,0).bottom-I.lineAt(A,0).top;g.push(qW.replace({widget:new QS(C),block:!0,inclusive:!0}).range(A,i))}if(!t)break;A=t.to+1}return qW.set(g)}updateDeco(){return this.decorations=[...this.view.pluginField(pS.decorations),...this.view.state.facet(YS),this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollRangeIntoView(g){let I,A=this.coordsAt(g.head,g.empty?g.assoc:g.head>g.anchor?-1:1);if(!A)return;!g.empty&&(I=this.coordsAt(g.anchor,g.anchor>g.head?-1:1))&&(A={left:Math.min(A.left,I.left),top:Math.min(A.top,I.top),right:Math.max(A.right,I.right),bottom:Math.max(A.bottom,I.bottom)});let C=0,t=0,i=0,e=0;for(let o of this.view.pluginField(pS.scrollMargins))if(o){let{left:g,right:I,top:A,bottom:n}=o;null!=g&&(C=Math.max(C,g)),null!=I&&(t=Math.max(t,I)),null!=A&&(i=Math.max(i,A)),null!=n&&(e=Math.max(e,n))}!function(g,I,A){let C=g.ownerDocument,t=C.defaultView;for(let i=g.parentNode;i;)if(1==i.nodeType){let g,e=i==C.body;if(e)g=rW(t);else{if(i.scrollHeight<=i.clientHeight&&i.scrollWidth<=i.clientWidth){i=i.parentNode;continue}let I=i.getBoundingClientRect();g={left:I.left,right:I.left+i.clientWidth,top:I.top,bottom:I.top+i.clientHeight}}let o=0,n=0;if(I.top<g.top?(n=-(g.top-I.top+5),A>0&&I.bottom>g.bottom+n&&(n=I.bottom-g.bottom+n+5)):I.bottom>g.bottom&&(n=I.bottom-g.bottom+5,A<0&&I.top-n<g.top&&(n=-(g.top+n-I.top+5))),I.left<g.left?(o=-(g.left-I.left+5),A>0&&I.right>g.right+o&&(o=I.right-g.right+o+5)):I.right>g.right&&(o=I.right-g.right+5,A<0&&I.left<g.left+o&&(o=-(g.left+o-I.left+5))),o||n)if(e)t.scrollBy(o,n);else{if(n){let g=i.scrollTop;i.scrollTop+=n,n=i.scrollTop-g}if(o){let g=i.scrollLeft;i.scrollLeft+=o,o=i.scrollLeft-g}I={left:I.left-o,top:I.top-n,right:I.right-o,bottom:I.bottom-n}}if(e)break;i=i.assignedSlot||i.parentNode}else{if(11!=i.nodeType)break;i=i.host}}(this.dom,{left:A.left-C,top:A.top-i,right:A.right+t,bottom:A.bottom+e},g.head<g.anchor?-1:1)}}class QS extends _W{constructor(g){super(),this.height=g}toDOM(){let g=document.createElement("div");return this.updateDOM(g),g}eq(g){return g.height==this.height}updateDOM(g){return g.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}class HS extends _W{constructor(g,I){super(),this.top=g,this.text=I}eq(g){return this.top==g.top&&this.text==g.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return FW}}function kS(g,I,A){for(;;){if(3==g.nodeType)return g;if(1==g.nodeType&&I>0&&A<=0)I=nW(g=g.childNodes[I-1]);else{if(!(1==g.nodeType&&I<g.childNodes.length&&A>=0))return null;g=g.childNodes[I],I=0}}}class JS{constructor(){this.changes=[]}compareRange(g,I){tS(g,I,this.changes)}comparePoint(g,I){tS(g,I,this.changes)}}var vS=function(g){return g[g.LTR=0]="LTR",g[g.RTL=1]="RTL",g}(vS||(vS={}));const DS=vS.LTR,MS=vS.RTL;function NS(g){let I=[];for(let A=0;A<g.length;A++)I.push(1<<+g[A]);return I}const ES=NS("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),FS=NS("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),LS=Object.create(null),TS=[];for(let mD of["()","[]","{}"]){let g=mD.charCodeAt(0),I=mD.charCodeAt(1);LS[g]=I,LS[I]=-g}const zS=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;class PS{constructor(g,I,A){this.from=g,this.to=I,this.level=A}get dir(){return this.level%2?MS:DS}side(g,I){return this.dir==I==g?this.to:this.from}static find(g,I,A,C){let t=-1;for(let i=0;i<g.length;i++){let e=g[i];if(e.from<=I&&e.to>=I){if(e.level==A)return i;(t<0||(0!=C?C<0?e.from<I:e.to>I:g[t].level>e.level))&&(t=i)}}if(t<0)throw new RangeError("Index out of range");return t}}const US=[];function xS(g){return[new PS(0,g,0)]}let jS="";function _S(g,I,A,C,t){var i;let e=C.head-g.from,o=-1;if(0==e){if(!t||!g.length)return null;I[0].level!=A&&(e=I[0].side(!1,A),o=0)}else if(e==g.length){if(t)return null;let g=I[I.length-1];g.level!=A&&(e=g.side(!0,A),o=I.length-1)}o<0&&(o=PS.find(I,e,null!==(i=C.bidiLevel)&&void 0!==i?i:-1,C.assoc));let n=I[o];e==n.side(t,A)&&(n=I[o+=t?1:-1],e=n.side(!t,A));let s=t==(n.dir==A),l=Iy(g.text,e,s);if(jS=g.text.slice(Math.min(e,l),Math.max(e,l)),l!=n.side(t,A))return Vy.cursor(l+g.from,s?-1:1,n.level);let r=o==(t?I.length-1:0)?null:I[o+(t?1:-1)];return r||n.level==A?r&&r.level<n.level?Vy.cursor(r.side(!t,A)+g.from,t?1:-1,r.level):Vy.cursor(l+g.from,t?-1:1,n.level):Vy.cursor(t?g.to:g.from,t?-1:1,A)}function $S(g,I){return I.left>g?I.left-g:Math.max(0,g-I.right)}function qS(g,I){return I.top>g?I.top-g:Math.max(0,g-I.bottom)}function gK(g,I){return g.top<I.bottom-1&&g.bottom>I.top+1}function IK(g,I){return I<g.top?{top:I,left:g.left,right:g.right,bottom:g.bottom}:g}function AK(g,I){return I>g.bottom?{top:g.top,left:g.left,right:g.right,bottom:I}:g}function CK(g,I,A){let C,t,i,e,o,n,s,l;for(let c=g.firstChild;c;c=c.nextSibling){let g=tW(c);for(let r=0;r<g.length;r++){let a=g[r];t&&gK(t,a)&&(a=IK(AK(a,t.bottom),t.top));let d=$S(I,a),h=qS(A,a);if(0==d&&0==h)return 3==c.nodeType?tK(c,I,A):CK(c,I,A);(!C||e>h||e==h&&i>d)&&(C=c,t=a,i=d,e=h),0==d?A>a.bottom&&(!s||s.bottom<a.bottom)?(o=c,s=a):A<a.top&&(!l||l.top>a.top)&&(n=c,l=a):s&&gK(s,a)?s=AK(s,a.bottom):l&&gK(l,a)&&(l=IK(l,a.top))}}if(s&&s.bottom>=A?(C=o,t=s):l&&l.top<=A&&(C=n,t=l),!C)return{node:g,offset:0};let r=Math.max(t.left,Math.min(t.right,I));return 3==C.nodeType?tK(C,r,A):i||"true"!=C.contentEditable?{node:g,offset:Array.prototype.indexOf.call(g.childNodes,C)+(I>=(t.left+t.right)/2?1:0)}:CK(C,r,A)}function tK(g,I,A){let C=g.nodeValue.length,t=-1,i=1e9,e=0;for(let o=0;o<C;o++){let C=mW(g,o,o+1).getClientRects();for(let n=0;n<C.length;n++){let s=C[n];if(s.top==s.bottom)continue;e||(e=I-s.left);let l=(s.top>A?s.top-A:A-s.bottom)-1;if(s.left-1<=I&&s.right+1>=I&&l<i){let A=I>=(s.left+s.right)/2,C=A;if(kW.chrome||kW.gecko){mW(g,o).getBoundingClientRect().left==s.right&&(C=!A)}if(l<=0)return{node:g,offset:o+(C?1:0)};t=o+(C?1:0),i=l}}}return{node:g,offset:t>-1?t:e>0?g.nodeValue.length:0}}function iK(g,{x:I,y:A},C,t=-1){let i,e=g.contentDOM.getBoundingClientRect(),o=g.defaultLineHeight/2;for(let a=!1;;){if(i=g.blockAtHeight(A,e.top),i.top>A||i.bottom<A){if(t=i.top>A?-1:1,A=Math.min(i.bottom-o,Math.max(i.top+o,A)),a)return C?null:0;a=!0}if(i.type==$W.Text)break;A=t>0?i.bottom+o:i.top-o}let n=i.from;if(I=Math.max(e.left+1,Math.min(e.right-1,I)),n<g.viewport.from)return 0==g.viewport.from?0:eK(g,e,i,I,A);if(n>g.viewport.to)return g.viewport.to==g.state.doc.length?g.state.doc.length:eK(g,e,i,I,A);let s,l=g.root,r=l.elementFromPoint(I,A),c=-1;if(r&&g.contentDOM.contains(r)&&!(g.docView.nearest(r)instanceof EW))if(l.caretPositionFromPoint){let g=l.caretPositionFromPoint(I,A);g&&({offsetNode:s,offset:c}=g)}else if(l.caretRangeFromPoint){let g=l.caretRangeFromPoint(I,A);g&&(({startContainer:s,startOffset:c}=g),kW.safari&&function(g,I,A){let C;if(3!=g.nodeType||I!=(C=g.nodeValue.length))return!1;for(let t=g.nextSibling;t;t=t.nextSibling)if(1!=t.nodeType||"BR"!=t.nodeName)return!1;return mW(g,C-1,C).getBoundingClientRect().left>A}(s,c,I)&&(s=void 0))}if(!s||!g.docView.dom.contains(s)){let C=iS.find(g.docView,n);({node:s,offset:c}=CK(C.dom,I,A))}return g.docView.posFromDOM(s,c)}function eK(g,I,A,C,t){let i=Math.round((C-I.left)*g.defaultCharacterWidth);if(g.lineWrapping&&A.height>1.5*g.defaultLineHeight){i+=Math.floor((t-A.top)/g.defaultLineHeight)*g.viewState.heightOracle.lineLength}let e=g.state.sliceDoc(A.from,A.to);return A.from+ly(e,i,g.state.tabSize)}function oK(g,I,A,C){let t=g.state.doc.lineAt(I.head),i=g.bidiSpans(t);for(let e=I,o=null;;){let I=_S(t,i,g.textDirection,e,A),n=jS;if(!I){if(t.number==(A?g.state.doc.lines:1))return e;n="\n",t=g.state.doc.line(t.number+(A?1:-1)),i=g.bidiSpans(t),I=Vy.cursor(A?t.from:t.to)}if(o){if(!o(n))return e}else{if(!C)return I;o=C(n)}e=I}}function nK(g,I,A){let C=g.pluginField(pS.atomicRanges);for(;;){let g=!1;for(let t of C)t.between(A.from-1,A.from+1,((C,t,i)=>{A.from>C&&A.from<t&&(A=I.from>A.from?Vy.cursor(C,1):Vy.cursor(t,-1),g=!0)}));if(!g)return A}}class sK{constructor(g){this.lastKeyCode=0,this.lastKeyTime=0,this.pendingIOSKey=null,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.rapidCompositionStart=!1,this.mouseSelection=null;for(let I in aK){let A=aK[I];g.contentDOM.addEventListener(I,(C=>{"keydown"==I&&this.keydown(g,C)||cK(g,C)&&!this.ignoreDuringComposition(C)&&(this.mustFlushObserver(C)&&g.observer.forceFlush(),this.runCustomHandlers(I,g,C)?C.preventDefault():A(g,C))})),this.registeredEvents.push(I)}this.notifiedFocused=g.hasFocus,this.ensureHandlers(g),kW.safari&&g.contentDOM.addEventListener("input",(()=>null))}setSelectionOrigin(g){this.lastSelectionOrigin=g,this.lastSelectionTime=Date.now()}ensureHandlers(g){let I=this.customHandlers=g.pluginField(WS);for(let A of I)for(let I in A.handlers)this.registeredEvents.indexOf(I)<0&&"scroll"!=I&&(this.registeredEvents.push(I),g.contentDOM.addEventListener(I,(A=>{cK(g,A)&&this.runCustomHandlers(I,g,A)&&A.preventDefault()})))}runCustomHandlers(g,I,A){for(let C of this.customHandlers){let t=C.handlers[g],i=!1;if(t){try{i=t.call(C.plugin,A,I)}catch(dD){uS(I.state,dD)}if(i||A.defaultPrevented)return kW.android&&"keydown"==g&&13==A.keyCode&&I.observer.flushSoon(),!0}}return!1}runScrollHandlers(g,I){for(let A of this.customHandlers){let C=A.handlers.scroll;if(C)try{C.call(A.plugin,I,g)}catch(dD){uS(g.state,dD)}}}keydown(g,I){return this.lastKeyCode=I.keyCode,this.lastKeyTime=Date.now(),!!this.screenKeyEvent(g,I)||!(!kW.ios||13!=I.keyCode&&8!=I.keyCode||I.ctrlKey||I.altKey||I.metaKey||I.synthetic)&&(this.pendingIOSKey=13==I.keyCode?"enter":"backspace",setTimeout((()=>this.flushIOSKey(g)),250),!0)}flushIOSKey(g){if(!this.pendingIOSKey)return!1;let I=g.contentDOM,A=this.pendingIOSKey;return this.pendingIOSKey=null,"enter"==A?ZW(I,"Enter",13):ZW(I,"Backspace",8)}ignoreDuringComposition(g){return!!/^key/.test(g.type)&&(this.composing>0||!!(kW.safari&&Date.now()-this.compositionEndedAt<500)&&(this.compositionEndedAt=0,!0))}screenKeyEvent(g,I){let A=9==I.keyCode&&Date.now()<this.lastEscPress+2e3;return 27==I.keyCode?this.lastEscPress=Date.now():lK.indexOf(I.keyCode)<0&&(this.lastEscPress=0),A}mustFlushObserver(g){return"keydown"==g.type&&229!=g.keyCode||"compositionend"==g.type&&!kW.ios}startMouseSelection(g,I,A){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=new rK(this,g,I,A)}update(g){this.mouseSelection&&this.mouseSelection.update(g),g.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const lK=[16,17,18,20,91,92,224,225];class rK{constructor(g,I,A,C){this.inputState=g,this.view=I,this.style=C,this.lastEvent=A;let t=I.contentDOM.ownerDocument;t.addEventListener("mousemove",this.move=this.move.bind(this)),t.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=A.shiftKey,this.multiple=I.state.facet(pw.allowMultipleSelections)&&function(g,I){let A=g.state.facet(rS);return A.length?A[0](I):kW.mac?I.metaKey:I.ctrlKey}(I,A),this.dragMove=function(g,I){let A=g.state.facet(cS);return A.length?A[0](I):kW.mac?!I.altKey:!I.ctrlKey}(I,A),this.dragging=!!function(g,I){let{main:A}=g.state.selection;if(A.empty)return!1;let C=IW(g.root);if(0==C.rangeCount)return!0;let t=C.getRangeAt(0).getClientRects();for(let i=0;i<t.length;i++){let g=t[i];if(g.left<=I.clientX&&g.right>=I.clientX&&g.top<=I.clientY&&g.bottom>=I.clientY)return!0}return!1}(I,A)&&null,!1===this.dragging&&(A.preventDefault(),this.select(A))}move(g){if(0==g.buttons)return this.destroy();!1===this.dragging&&this.select(this.lastEvent=g)}up(g){null==this.dragging&&this.select(this.lastEvent),this.dragging||g.preventDefault(),this.destroy()}destroy(){let g=this.view.contentDOM.ownerDocument;g.removeEventListener("mousemove",this.move),g.removeEventListener("mouseup",this.up),this.inputState.mouseSelection=null}select(g){let I=this.style.get(g,this.extend,this.multiple);I.eq(this.view.state.selection)&&I.main.assoc==this.view.state.selection.main.assoc||this.view.dispatch({selection:I,userEvent:"select.pointer",scrollIntoView:!0})}update(g){g.docChanged&&this.dragging&&(this.dragging=this.dragging.map(g.changes)),this.style.update(g)&&setTimeout((()=>this.select(this.lastEvent)),20)}}function cK(g,I){if(!I.bubbles)return!0;if(I.defaultPrevented)return!1;for(let A,C=I.target;C!=g.contentDOM;C=C.parentNode)if(!C||11==C.nodeType||(A=BW.get(C))&&A.ignoreEvent(I))return!1;return!0}const aK=Object.create(null),dK=kW.ie&&kW.ie_version<15||kW.ios&&kW.webkit_version<604;function hK(g,I){let A,{state:C}=g,t=1,i=C.toText(I),e=i.lines==C.selection.ranges.length;if(KK&&C.selection.ranges.every((g=>g.empty))&&KK==i.toString()){let g=-1;A=C.changeByRange((A=>{let o=C.doc.lineAt(A.from);if(o.from==g)return{range:A};g=o.from;let n=C.toText((e?i.line(t++).text:I)+C.lineBreak);return{changes:{from:o.from,insert:n},range:Vy.cursor(A.from+n.length)}}))}else A=e?C.changeByRange((g=>{let I=i.line(t++);return{changes:{from:g.from,to:g.to,insert:I.text},range:Vy.cursor(g.from+I.length)}})):C.replaceSelection(i);g.dispatch(A,{userEvent:"input.paste",scrollIntoView:!0})}aK.keydown=(g,I)=>{g.inputState.setSelectionOrigin("select")};let mK=0;function ZK(g,I,A,C){if(1==C)return Vy.cursor(I,A);if(2==C)return function(g,I,A=1){let C=g.charCategorizer(I),t=g.doc.lineAt(I),i=I-t.from;if(0==t.length)return Vy.cursor(I);0==i?A=1:i==t.length&&(A=-1);let e=i,o=i;A<0?e=Iy(t.text,i,!1):o=Iy(t.text,i);let n=C(t.text.slice(e,o));for(;e>0;){let g=Iy(t.text,e,!1);if(C(t.text.slice(g,e))!=n)break;e=g}for(;o<t.length;){let g=Iy(t.text,o);if(C(t.text.slice(o,g))!=n)break;o=g}return Vy.range(e+t.from,o+t.from)}(g.state,I,A);{let A=iS.find(g.docView,I),C=g.state.doc.lineAt(A?A.posAtEnd:I),t=A?A.posAtStart:C.from,i=A?A.posAtEnd:C.to;return i<g.state.doc.length&&i==C.to&&i++,Vy.range(t,i)}}aK.touchstart=(g,I)=>{mK=Date.now(),g.inputState.setSelectionOrigin("select.pointer")},aK.touchmove=g=>{g.inputState.setSelectionOrigin("select.pointer")},aK.mousedown=(g,I)=>{if(g.observer.flush(),mK>Date.now()-2e3)return;let A=null;for(let C of g.state.facet(aS))if(A=C(g,I),A)break;A||0!=I.button||(A=function(g,I){let A=pK(g,I),C=function(g){if(!BK)return g.detail;let I=yK,A=WK;return yK=g,WK=Date.now(),wK=!I||A>Date.now()-400&&Math.abs(I.clientX-g.clientX)<2&&Math.abs(I.clientY-g.clientY)<2?(wK+1)%3:1}(I),t=g.state.selection,i=A,e=I;return{update(g){g.changes&&(A&&(A.pos=g.changes.mapPos(A.pos)),t=t.map(g.changes),e=null)},get(I,o,n){let s;if(e&&I.clientX==e.clientX&&I.clientY==e.clientY?s=i:(s=i=pK(g,I),e=I),!s||!A)return t;let l=ZK(g,s.pos,s.bias,C);if(A.pos!=s.pos&&!o){let I=ZK(g,A.pos,A.bias,C),t=Math.min(I.from,l.from),i=Math.max(I.to,l.to);l=t<l.from?Vy.range(t,i):Vy.range(i,t)}return o?t.replaceRange(t.main.extend(l.from,l.to)):n?t.addRange(l):Vy.create([l])}}}(g,I)),A&&(g.root.activeElement!=g.contentDOM&&g.observer.ignore((()=>hW(g.contentDOM))),g.inputState.startMouseSelection(g,I,A))};let uK=(g,I)=>g>=I.top&&g<=I.bottom,GK=(g,I,A)=>uK(I,A)&&g>=A.left&&g<=A.right;function bK(g,I,A,C){let t=iS.find(g.docView,I);if(!t)return 1;let i=I-t.posAtStart;if(0==i)return 1;if(i==t.length)return-1;let e=t.coordsAt(i,-1);if(e&&GK(A,C,e))return-1;let o=t.coordsAt(i,1);return o&&GK(A,C,o)?1:e&&uK(C,e)?-1:1}function pK(g,I){let A=g.posAtCoords({x:I.clientX,y:I.clientY},!1);return{pos:A,bias:bK(g,A,I.clientX,I.clientY)}}const BK=kW.ie&&kW.ie_version<=11;let yK=null,wK=0,WK=0;function SK(g,I,A,C){let t=g.posAtCoords({x:I.clientX,y:I.clientY});if(null==t||!A)return;I.preventDefault();let{mouseSelection:i}=g.inputState,e=C&&i&&i.dragging&&i.dragMove?{from:i.dragging.from,to:i.dragging.to}:null,o={from:t,insert:A},n=g.state.changes(e?[e,o]:o);g.focus(),g.dispatch({changes:n,selection:{anchor:n.mapPos(t,-1),head:n.mapPos(t,1)},userEvent:e?"move.drop":"input.drop"})}aK.dragstart=(g,I)=>{let{selection:{main:A}}=g.state,{mouseSelection:C}=g.inputState;C&&(C.dragging=A),I.dataTransfer&&(I.dataTransfer.setData("Text",g.state.sliceDoc(A.from,A.to)),I.dataTransfer.effectAllowed="copyMove")},aK.drop=(g,I)=>{if(!I.dataTransfer)return;if(g.state.readOnly)return I.preventDefault();let A=I.dataTransfer.files;if(A&&A.length){I.preventDefault();let C=Array(A.length),t=0,i=()=>{++t==A.length&&SK(g,I,C.filter((g=>null!=g)).join(g.state.lineBreak),!1)};for(let g=0;g<A.length;g++){let I=new FileReader;I.onerror=i,I.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(I.result)||(C[g]=I.result),i()},I.readAsText(A[g])}}else SK(g,I,I.dataTransfer.getData("Text"),!0)},aK.paste=(g,I)=>{if(g.state.readOnly)return I.preventDefault();g.observer.flush();let A=dK?null:I.clipboardData,C=A&&A.getData("text/plain");C?(hK(g,C),I.preventDefault()):function(g){let I=g.dom.parentNode;if(!I)return;let A=I.appendChild(document.createElement("textarea"));A.style.cssText="position: fixed; left: -10000px; top: 10px",A.focus(),setTimeout((()=>{g.focus(),A.remove(),hK(g,A.value)}),50)}(g)};let KK=null;function fK(g,I){if(g.docView.compositionDeco.size){g.inputState.rapidCompositionStart=I;try{g.update([])}finally{g.inputState.rapidCompositionStart=!1}}}aK.copy=aK.cut=(g,I)=>{let{text:A,ranges:C,linewise:t}=function(g){let I=[],A=[],C=!1;for(let t of g.selection.ranges)t.empty||(I.push(g.sliceDoc(t.from,t.to)),A.push(t));if(!I.length){let t=-1;for(let{from:C}of g.selection.ranges){let i=g.doc.lineAt(C);i.number>t&&(I.push(i.text),A.push({from:i.from,to:Math.min(g.doc.length,i.to+1)})),t=i.number}C=!0}return{text:I.join(g.lineBreak),ranges:A,linewise:C}}(g.state);if(!A)return;KK=t?A:null;let i=dK?null:I.clipboardData;i?(I.preventDefault(),i.clearData(),i.setData("text/plain",A)):function(g,I){let A=g.dom.parentNode;if(!A)return;let C=A.appendChild(document.createElement("textarea"));C.style.cssText="position: fixed; left: -10000px; top: 10px",C.value=I,C.focus(),C.selectionEnd=I.length,C.selectionStart=0,setTimeout((()=>{C.remove(),g.focus()}),50)}(g,A),"cut"!=I.type||g.state.readOnly||g.dispatch({changes:C,scrollIntoView:!0,userEvent:"delete.cut"})},aK.focus=aK.blur=g=>{setTimeout((()=>{g.hasFocus!=g.inputState.notifiedFocused&&g.update([])}),10)},aK.beforeprint=g=>{g.viewState.printing=!0,g.requestMeasure(),setTimeout((()=>{g.viewState.printing=!1,g.requestMeasure()}),2e3)},aK.compositionstart=aK.compositionupdate=g=>{null==g.inputState.compositionFirstChange&&(g.inputState.compositionFirstChange=!0),g.inputState.composing<0&&(g.docView.compositionDeco.size&&(g.observer.flush(),fK(g,!0)),g.inputState.composing=0)},aK.compositionend=g=>{g.inputState.composing=-1,g.inputState.compositionEndedAt=Date.now(),g.inputState.compositionFirstChange=null,setTimeout((()=>{g.inputState.composing<0&&fK(g,!1)}),50)},aK.contextmenu=g=>{g.inputState.lastContextMenu=Date.now()};const YK=["pre-wrap","normal","pre-line"];class XK{constructor(){this.doc=ry.empty,this.lineWrapping=!1,this.direction=vS.LTR,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(g,I){let A=this.doc.lineAt(I).number-this.doc.lineAt(g).number+1;return this.lineWrapping&&(A+=Math.ceil((I-g-A*this.lineLength*.5)/this.lineLength)),this.lineHeight*A}heightForLine(g){if(!this.lineWrapping)return this.lineHeight;return(1+Math.max(0,Math.ceil((g-this.lineLength)/(this.lineLength-5))))*this.lineHeight}setDoc(g){return this.doc=g,this}mustRefresh(g,I,A){let C=!1;for(let t=0;t<g.length;t++){let I=g[t];I<0?t++:this.heightSamples[Math.floor(10*I)]||(C=!0,this.heightSamples[Math.floor(10*I)]=!0)}return C||YK.indexOf(I)>-1!=this.lineWrapping||this.direction!=A}refresh(g,I,A,C,t,i){let e=YK.indexOf(g)>-1,o=Math.round(A)!=Math.round(this.lineHeight)||this.lineWrapping!=e||this.direction!=I;if(this.lineWrapping=e,this.direction=I,this.lineHeight=A,this.charWidth=C,this.lineLength=t,o){this.heightSamples={};for(let g=0;g<i.length;g++){let I=i[g];I<0?g++:this.heightSamples[Math.floor(10*I)]=!0}}return o}}class VK{constructor(g,I){this.from=g,this.heights=I,this.index=0}get more(){return this.index<this.heights.length}}class OK{constructor(g,I,A,C,t){this.from=g,this.length=I,this.top=A,this.height=C,this.type=t}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(g){let I=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(g.type)?g.type:[g]);return new OK(this.from,this.length+g.length,this.top,this.height+g.height,I)}}var RK=function(g){return g[g.ByPos=0]="ByPos",g[g.ByHeight=1]="ByHeight",g[g.ByPosNoHeight=2]="ByPosNoHeight",g}(RK||(RK={}));class QK{constructor(g,I,A=2){this.length=g,this.height=I,this.flags=A}get outdated(){return(2&this.flags)>0}set outdated(g){this.flags=(g?2:0)|-3&this.flags}setHeight(g,I){this.height!=I&&(Math.abs(this.height-I)>1e-4&&(g.heightChanged=!0),this.height=I)}replace(g,I,A){return QK.of(A)}decomposeLeft(g,I){I.push(this)}decomposeRight(g,I){I.push(this)}applyChanges(g,I,A,C){let t=this;for(let i=C.length-1;i>=0;i--){let{fromA:e,toA:o,fromB:n,toB:s}=C[i],l=t.lineAt(e,RK.ByPosNoHeight,I,0,0),r=l.to>=o?l:t.lineAt(o,RK.ByPosNoHeight,I,0,0);for(s+=r.to-o,o=r.to;i>0&&l.from<=C[i-1].toA;)e=C[i-1].fromA,n=C[i-1].fromB,i--,e<l.from&&(l=t.lineAt(e,RK.ByPosNoHeight,I,0,0));n+=l.from-e,e=l.from;let c=MK.build(A,g,n,s);t=t.replace(e,o,c)}return t.updateHeight(A,0)}static empty(){return new kK(0,0)}static of(g){if(1==g.length)return g[0];let I=0,A=g.length,C=0,t=0;for(;;)if(I==A)if(C>2*t){let t=g[I-1];t.break?g.splice(--I,1,t.left,null,t.right):g.splice(--I,1,t.left,t.right),A+=1+t.break,C-=t.size}else{if(!(t>2*C))break;{let I=g[A];I.break?g.splice(A,1,I.left,null,I.right):g.splice(A,1,I.left,I.right),A+=2+I.break,t-=I.size}}else if(C<t){let A=g[I++];A&&(C+=A.size)}else{let I=g[--A];I&&(t+=I.size)}let i=0;return null==g[I-1]?(i=1,I--):null==g[I]&&(i=1,A++),new vK(QK.of(g.slice(0,I)),i,QK.of(g.slice(A)))}}QK.prototype.size=1;class HK extends QK{constructor(g,I,A){super(g,I),this.type=A}blockAt(g,I,A,C){return new OK(C,this.length,A,this.height,this.type)}lineAt(g,I,A,C,t){return this.blockAt(0,A,C,t)}forEachLine(g,I,A,C,t,i){i(this.blockAt(0,A,C,t))}updateHeight(g,I=0,A=!1,C){return C&&C.from<=I&&C.more&&this.setHeight(g,C.heights[C.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class kK extends HK{constructor(g,I){super(g,I,$W.Text),this.collapsed=0,this.widgetHeight=0}replace(g,I,A){let C=A[0];return 1==A.length&&(C instanceof kK||C instanceof JK&&4&C.flags)&&Math.abs(this.length-C.length)<10?(C instanceof JK?C=new kK(C.length,this.height):C.height=this.height,this.outdated||(C.outdated=!1),C):QK.of(A)}updateHeight(g,I=0,A=!1,C){return C&&C.from<=I&&C.more?this.setHeight(g,C.heights[C.index++]):(A||this.outdated)&&this.setHeight(g,Math.max(this.widgetHeight,g.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class JK extends QK{constructor(g){super(g,0)}lines(g,I){let A=g.lineAt(I).number,C=g.lineAt(I+this.length).number;return{firstLine:A,lastLine:C,lineHeight:this.height/(C-A+1)}}blockAt(g,I,A,C){let{firstLine:t,lastLine:i,lineHeight:e}=this.lines(I,C),o=Math.max(0,Math.min(i-t,Math.floor((g-A)/e))),{from:n,length:s}=I.line(t+o);return new OK(n,s,A+e*o,e,$W.Text)}lineAt(g,I,A,C,t){if(I==RK.ByHeight)return this.blockAt(g,A,C,t);if(I==RK.ByPosNoHeight){let{from:I,to:C}=A.lineAt(g);return new OK(I,C-I,0,0,$W.Text)}let{firstLine:i,lineHeight:e}=this.lines(A,t),{from:o,length:n,number:s}=A.lineAt(g);return new OK(o,n,C+e*(s-i),e,$W.Text)}forEachLine(g,I,A,C,t,i){let{firstLine:e,lineHeight:o}=this.lines(A,t);for(let n=Math.max(g,t),s=Math.min(t+this.length,I);n<=s;){let I=A.lineAt(n);n==g&&(C+=o*(I.number-e)),i(new OK(I.from,I.length,C,o,$W.Text)),C+=o,n=I.to+1}}replace(g,I,A){let C=this.length-I;if(C>0){let g=A[A.length-1];g instanceof JK?A[A.length-1]=new JK(g.length+C):A.push(null,new JK(C-1))}if(g>0){let I=A[0];I instanceof JK?A[0]=new JK(g+I.length):A.unshift(new JK(g-1),null)}return QK.of(A)}decomposeLeft(g,I){I.push(new JK(g-1),null)}decomposeRight(g,I){I.push(null,new JK(this.length-g-1))}updateHeight(g,I=0,A=!1,C){let t=I+this.length;if(C&&C.from<=I+this.length&&C.more){let A=[],i=Math.max(I,C.from);for(C.from>I&&A.push(new JK(C.from-I-1).updateHeight(g,I));i<=t&&C.more;){let I=g.doc.lineAt(i).length;A.length&&A.push(null);let t=new kK(I,C.heights[C.index++]);t.outdated=!1,A.push(t),i+=I+1}return i<=t&&A.push(null,new JK(t-i).updateHeight(g,i)),g.heightChanged=!0,QK.of(A)}return(A||this.outdated)&&(this.setHeight(g,g.heightForGap(I,I+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class vK extends QK{constructor(g,I,A){super(g.length+I+A.length,g.height+A.height,I|(g.outdated||A.outdated?2:0)),this.left=g,this.right=A,this.size=g.size+A.size}get break(){return 1&this.flags}blockAt(g,I,A,C){let t=A+this.left.height;return g<t||0==this.right.height?this.left.blockAt(g,I,A,C):this.right.blockAt(g,I,t,C+this.left.length+this.break)}lineAt(g,I,A,C,t){let i=C+this.left.height,e=t+this.left.length+this.break,o=I==RK.ByHeight?g<i||0==this.right.height:g<e,n=o?this.left.lineAt(g,I,A,C,t):this.right.lineAt(g,I,A,i,e);if(this.break||(o?n.to<e:n.from>e))return n;let s=I==RK.ByPosNoHeight?RK.ByPosNoHeight:RK.ByPos;return o?n.join(this.right.lineAt(e,s,A,i,e)):this.left.lineAt(e,s,A,C,t).join(n)}forEachLine(g,I,A,C,t,i){let e=C+this.left.height,o=t+this.left.length+this.break;if(this.break)g<o&&this.left.forEachLine(g,I,A,C,t,i),I>=o&&this.right.forEachLine(g,I,A,e,o,i);else{let n=this.lineAt(o,RK.ByPos,A,C,t);g<n.from&&this.left.forEachLine(g,n.from-1,A,C,t,i),n.to>=g&&n.from<=I&&i(n),I>n.to&&this.right.forEachLine(n.to+1,I,A,e,o,i)}}replace(g,I,A){let C=this.left.length+this.break;if(I<C)return this.balanced(this.left.replace(g,I,A),this.right);if(g>this.left.length)return this.balanced(this.left,this.right.replace(g-C,I-C,A));let t=[];g>0&&this.decomposeLeft(g,t);let i=t.length;for(let e of A)t.push(e);if(g>0&&DK(t,i-1),I<this.length){let g=t.length;this.decomposeRight(I,t),DK(t,g)}return QK.of(t)}decomposeLeft(g,I){let A=this.left.length;if(g<=A)return this.left.decomposeLeft(g,I);I.push(this.left),this.break&&(A++,g>=A&&I.push(null)),g>A&&this.right.decomposeLeft(g-A,I)}decomposeRight(g,I){let A=this.left.length,C=A+this.break;if(g>=C)return this.right.decomposeRight(g-C,I);g<A&&this.left.decomposeRight(g,I),this.break&&g<C&&I.push(null),I.push(this.right)}balanced(g,I){return g.size>2*I.size||I.size>2*g.size?QK.of(this.break?[g,null,I]:[g,I]):(this.left=g,this.right=I,this.height=g.height+I.height,this.outdated=g.outdated||I.outdated,this.size=g.size+I.size,this.length=g.length+this.break+I.length,this)}updateHeight(g,I=0,A=!1,C){let{left:t,right:i}=this,e=I+t.length+this.break,o=null;return C&&C.from<=I+t.length&&C.more?o=t=t.updateHeight(g,I,A,C):t.updateHeight(g,I,A),C&&C.from<=e+i.length&&C.more?o=i=i.updateHeight(g,e,A,C):i.updateHeight(g,e,A),o?this.balanced(t,i):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function DK(g,I){let A,C;null==g[I]&&(A=g[I-1])instanceof JK&&(C=g[I+1])instanceof JK&&g.splice(I-1,3,new JK(A.length+1+C.length))}class MK{constructor(g,I){this.pos=g,this.oracle=I,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=g}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(g,I){if(this.lineStart>-1){let g=Math.min(I,this.lineEnd),A=this.nodes[this.nodes.length-1];A instanceof kK?A.length+=g-this.pos:(g>this.pos||!this.isCovered)&&this.nodes.push(new kK(g-this.pos,-1)),this.writtenTo=g,I>g&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=I}point(g,I,A){if(g<I||A.heightRelevant){let C=A.widget?Math.max(0,A.widget.estimatedHeight):0,t=I-g;A.block?this.addBlock(new HK(t,C,A.type)):(t||C>=5)&&this.addLineDeco(C,t)}else I>g&&this.span(g,I);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:g,to:I}=this.oracle.doc.lineAt(this.pos);this.lineStart=g,this.lineEnd=I,this.writtenTo<g&&((this.writtenTo<g-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,g-1)),this.nodes.push(null)),this.pos>g&&this.nodes.push(new kK(this.pos-g,-1)),this.writtenTo=this.pos}blankContent(g,I){let A=new JK(I-g);return this.oracle.doc.lineAt(g).to==I&&(A.flags|=4),A}ensureLine(){this.enterLine();let g=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(g instanceof kK)return g;let I=new kK(0,-1);return this.nodes.push(I),I}addBlock(g){this.enterLine(),g.type!=$W.WidgetAfter||this.isCovered||this.ensureLine(),this.nodes.push(g),this.writtenTo=this.pos=this.pos+g.length,g.type!=$W.WidgetBefore&&(this.covering=g)}addLineDeco(g,I){let A=this.ensureLine();A.length+=I,A.collapsed+=I,A.widgetHeight=Math.max(A.widgetHeight,g),this.writtenTo=this.pos=this.pos+I}finish(g){let I=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||I instanceof kK||this.isCovered?(this.writtenTo<this.pos||null==I)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new kK(0,-1));let A=g;for(let C of this.nodes)C instanceof kK&&C.updateHeight(this.oracle,A),A+=C?C.length:1;return this.nodes}static build(g,I,A,C){let t=new MK(A,g);return Rw.spans(I,A,C,t,0),t.finish(A)}}class NK{constructor(){this.changes=[]}compareRange(){}comparePoint(g,I,A,C){(g<I||A&&A.heightRelevant||C&&C.heightRelevant)&&tS(g,I,this.changes,5)}}class EK{constructor(g,I,A){this.from=g,this.to=I,this.size=A}static same(g,I){if(g.length!=I.length)return!1;for(let A=0;A<g.length;A++){let C=g[A],t=I[A];if(C.from!=t.from||C.to!=t.to||C.size!=t.size)return!1}return!0}draw(g){return qW.replace({widget:new FK(this.size,g)}).range(this.from,this.to)}}class FK extends _W{constructor(g,I){super(),this.size=g,this.vertical=I}eq(g){return g.size==this.size&&g.vertical==this.vertical}toDOM(){let g=document.createElement("div");return this.vertical?g.style.height=this.size+"px":(g.style.width=this.size+"px",g.style.height="2px",g.style.display="inline-block"),g}get estimatedHeight(){return this.vertical?this.size:-1}}class LK{constructor(g){this.state=g,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentWidth=0,this.heightOracle=new XK,this.scaler=xK,this.scrollTo=null,this.printing=!1,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1,this.heightMap=QK.empty().applyChanges(g.facet(YS),ry.empty,this.heightOracle.setDoc(g.doc),[new VS(0,0,0,g.doc.length)]),this.viewport=this.getViewport(0,null),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=qW.set(this.lineGaps.map((g=>g.draw(!1)))),this.computeVisibleRanges()}updateForViewport(){let g=[this.viewport],{main:I}=this.state.selection;for(let A=0;A<=1;A++){let C=A?I.head:I.anchor;if(!g.some((({from:g,to:I})=>C>=g&&C<=I))){let{from:I,to:A}=this.lineAt(C,0);g.push(new TK(I,A))}}this.viewports=g.sort(((g,I)=>g.from-I.from)),this.scaler=this.heightMap.height<=7e6?xK:new jK(this.heightOracle.doc,this.heightMap,this.viewports)}update(g,I=null){let A=this.state;this.state=g.state;let C=this.state.facet(YS),t=g.changedRanges,i=VS.extendWithRanges(t,function(g,I,A){let C=new NK;return Rw.compare(g,I,A,C,0),C.changes}(g.startState.facet(YS),C,g?g.changes:yy.empty(this.state.doc.length))),e=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(C,A.doc,this.heightOracle.setDoc(this.state.doc),i),this.heightMap.height!=e&&(g.flags|=2);let o=i.length?this.mapViewport(this.viewport,g.changes):this.viewport;(I&&(I.head<o.from||I.head>o.to)||!this.viewportIsAppropriate(o))&&(o=this.getViewport(0,I)),o.eq(this.viewport)||(this.viewport=o,g.flags|=4),this.updateForViewport(),(this.lineGaps.length||this.viewport.to-this.viewport.from>15e3)&&(g.flags|=this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,g.changes)))),this.computeVisibleRanges(),I&&(this.scrollTo=I),!this.mustEnforceCursorAssoc&&g.selectionSet&&g.view.lineWrapping&&g.state.selection.main.empty&&g.state.selection.main.assoc&&(this.mustEnforceCursorAssoc=!0)}measure(g,I){let A=g.dom,C="",t=vS.LTR;if(!I){let g=window.getComputedStyle(A);C=g.whiteSpace,t="rtl"==g.direction?vS.RTL:vS.LTR,this.paddingTop=parseInt(g.paddingTop)||0,this.paddingBottom=parseInt(g.paddingBottom)||0}let i=this.printing?{top:-1e8,bottom:1e8,left:-1e8,right:1e8}:function(g,I){let A=g.getBoundingClientRect(),C=Math.max(0,A.left),t=Math.min(innerWidth,A.right),i=Math.max(0,A.top),e=Math.min(innerHeight,A.bottom);for(let o=g.parentNode;o;)if(1==o.nodeType){let g=window.getComputedStyle(o);if((o.scrollHeight>o.clientHeight||o.scrollWidth>o.clientWidth)&&"visible"!=g.overflow){let g=o.getBoundingClientRect();C=Math.max(C,g.left),t=Math.min(t,g.right),i=Math.max(i,g.top),e=Math.min(e,g.bottom)}o="absolute"==g.position||"fixed"==g.position?o.offsetParent:o.parentNode}else{if(11!=o.nodeType)break;o=o.host}return{left:C-A.left,right:t-A.left,top:i-(A.top+I),bottom:e-(A.top+I)}}(A,this.paddingTop),e=i.top-this.pixelViewport.top,o=i.bottom-this.pixelViewport.bottom;if(this.pixelViewport=i,this.inView=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left,!this.inView)return 0;let n=g.measureVisibleLineHeights(),s=!1,l=0,r=0,c=this.heightOracle;if(!I){let I=g.dom.clientWidth;if(c.mustRefresh(n,C,t)||c.lineWrapping&&Math.abs(I-this.contentWidth)>c.charWidth){let{lineHeight:A,charWidth:i}=g.measureTextSize();s=c.refresh(C,t,A,i,I/i,n),s&&(g.minWidth=0,r|=16)}this.contentWidth!=I&&(this.contentWidth=I,r|=16),e>0&&o>0?l=Math.max(e,o):e<0&&o<0&&(l=Math.min(e,o))}if(c.heightChanged=!1,this.heightMap=this.heightMap.updateHeight(c,0,s,new VK(this.viewport.from,n)),c.heightChanged&&(r|=2),!this.viewportIsAppropriate(this.viewport,l)||this.scrollTo&&(this.scrollTo.head<this.viewport.from||this.scrollTo.head>this.viewport.to)){let g=this.getViewport(l,this.scrollTo);g.from==this.viewport.from&&g.to==this.viewport.to||(this.viewport=g,r|=4)}return this.updateForViewport(),(this.lineGaps.length||this.viewport.to-this.viewport.from>15e3)&&(r|=this.updateLineGaps(this.ensureLineGaps(s?[]:this.lineGaps))),this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,g.enforceCursorAssoc()),r}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top,0)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom,0)}getViewport(g,I){let A=.5-Math.max(-.5,Math.min(.5,g/1e3/2)),C=this.heightMap,t=this.state.doc,{visibleTop:i,visibleBottom:e}=this,o=new TK(C.lineAt(i-1e3*A,RK.ByHeight,t,0,0).from,C.lineAt(e+1e3*(1-A),RK.ByHeight,t,0,0).to);if(I)if(I.head<o.from){let{top:g}=C.lineAt(I.head,RK.ByPos,t,0,0);o=new TK(C.lineAt(g-500,RK.ByHeight,t,0,0).from,C.lineAt(g+(e-i)+500,RK.ByHeight,t,0,0).to)}else if(I.head>o.to){let{bottom:g}=C.lineAt(I.head,RK.ByPos,t,0,0);o=new TK(C.lineAt(g-(e-i)-500,RK.ByHeight,t,0,0).from,C.lineAt(g+500,RK.ByHeight,t,0,0).to)}return o}mapViewport(g,I){let A=I.mapPos(g.from,-1),C=I.mapPos(g.to,1);return new TK(this.heightMap.lineAt(A,RK.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(C,RK.ByPos,this.state.doc,0,0).to)}viewportIsAppropriate({from:g,to:I},A=0){let{top:C}=this.heightMap.lineAt(g,RK.ByPos,this.state.doc,0,0),{bottom:t}=this.heightMap.lineAt(I,RK.ByPos,this.state.doc,0,0),{visibleTop:i,visibleBottom:e}=this;return(0==g||C<=i-Math.max(10,Math.min(-A,250)))&&(I==this.state.doc.length||t>=e+Math.max(10,Math.min(A,250)))&&C>i-2e3&&t<e+2e3}mapLineGaps(g,I){if(!g.length||I.empty)return g;let A=[];for(let C of g)I.touchesRange(C.from,C.to)||A.push(new EK(I.mapPos(C.from),I.mapPos(C.to),C.size));return A}ensureLineGaps(g){let I=[];return this.heightOracle.direction!=vS.LTR||this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,(A=>{if(A.length<1e4)return;let C,t,i=function(g,I,A){let C=[],t=g,i=0;Rw.spans(A.facet(YS),g,I,{span(){},point(g,I){g>t&&(C.push({from:t,to:g}),i+=g-t),t=I}},20),t<I&&(C.push({from:t,to:I}),i+=I-t);return{total:i,ranges:C}}(A.from,A.to,this.state);if(i.total<1e4)return;if(this.heightOracle.lineWrapping)C=A.from!=this.viewport.from?A.from:zK(i,(this.visibleTop-A.top)/A.height),t=A.to!=this.viewport.to?A.to:zK(i,(this.visibleBottom-A.top)/A.height);else{let g=i.total*this.heightOracle.charWidth;C=zK(i,this.pixelViewport.left/g),t=zK(i,this.pixelViewport.right/g)}let e=this.state.selection.main;e.from<=C&&e.to>=A.from&&(C=e.from),e.from<=A.to&&e.to>=t&&(t=e.to);let o=C-1e4,n=t+1e4;o>A.from+5e3&&I.push(UK(g,(g=>g.from==A.from&&g.to>o-5e3&&g.to<o+5e3))||new EK(A.from,o,this.gapSize(A,o,!0,i))),n<A.to-5e3&&I.push(UK(g,(g=>g.to==A.to&&g.from>n-5e3&&g.from<n+5e3))||new EK(n,A.to,this.gapSize(A,n,!1,i)))})),I}gapSize(g,I,A,C){if(this.heightOracle.lineWrapping){let t=g.height*PK(C,I);return A?t:g.height-t}{let g=PK(C,I);return C.total*this.heightOracle.charWidth*(A?g:1-g)}}updateLineGaps(g){return EK.same(g,this.lineGaps)?0:(this.lineGaps=g,this.lineGapDeco=qW.set(g.map((g=>g.draw(this.heightOracle.lineWrapping)))),8)}computeVisibleRanges(){let g=this.state.facet(YS);this.lineGaps.length&&(g=g.concat(this.lineGapDeco));let I=[];Rw.spans(g,this.viewport.from,this.viewport.to,{span(g,A){I.push({from:g,to:A})},point(){}},20),this.visibleRanges=I}lineAt(g,I){return I+=this.paddingTop,_K(this.heightMap.lineAt(g,RK.ByPos,this.state.doc,I,0),this.scaler,I)}lineAtHeight(g,I){return I+=this.paddingTop,_K(this.heightMap.lineAt(this.scaler.fromDOM(g,I),RK.ByHeight,this.state.doc,I,0),this.scaler,I)}blockAtHeight(g,I){return I+=this.paddingTop,_K(this.heightMap.blockAt(this.scaler.fromDOM(g,I),this.state.doc,I,0),this.scaler,I)}forEachLine(g,I,A,C){return C+=this.paddingTop,this.heightMap.forEachLine(g,I,this.state.doc,C,0,1==this.scaler.scale?A:g=>A(_K(g,this.scaler,C)))}get contentHeight(){return this.domHeight+this.paddingTop+this.paddingBottom}get domHeight(){return this.scaler.toDOM(this.heightMap.height,this.paddingTop)}}class TK{constructor(g,I){this.from=g,this.to=I}eq(g){return this.from==g.from&&this.to==g.to}}function zK({total:g,ranges:I},A){if(A<=0)return I[0].from;if(A>=1)return I[I.length-1].to;let C=Math.floor(g*A);for(let t=0;;t++){let{from:g,to:A}=I[t],i=A-g;if(C<=i)return g+C;C-=i}}function PK(g,I){let A=0;for(let{from:C,to:t}of g.ranges){if(I<=t){A+=I-C;break}A+=t-C}return A/g.total}function UK(g,I){for(let A of g)if(I(A))return A}const xK={toDOM:g=>g,fromDOM:g=>g,scale:1};class jK{constructor(g,I,A){let C=0,t=0,i=0;this.viewports=A.map((({from:A,to:t})=>{let i=I.lineAt(A,RK.ByPos,g,0,0).top,e=I.lineAt(t,RK.ByPos,g,0,0).bottom;return C+=e-i,{from:A,to:t,top:i,bottom:e,domTop:0,domBottom:0}})),this.scale=(7e6-C)/(I.height-C);for(let e of this.viewports)e.domTop=i+(e.top-t)*this.scale,i=e.domBottom=e.domTop+(e.bottom-e.top),t=e.bottom}toDOM(g,I){g-=I;for(let A=0,C=0,t=0;;A++){let i=A<this.viewports.length?this.viewports[A]:null;if(!i||g<i.top)return t+(g-C)*this.scale+I;if(g<=i.bottom)return i.domTop+(g-i.top)+I;C=i.bottom,t=i.domBottom}}fromDOM(g,I){g-=I;for(let A=0,C=0,t=0;;A++){let i=A<this.viewports.length?this.viewports[A]:null;if(!i||g<i.domTop)return C+(g-t)/this.scale+I;if(g<=i.domBottom)return i.top+(g-i.domTop)+I;C=i.bottom,t=i.domBottom}}}function _K(g,I,A){if(1==I.scale)return g;let C=I.toDOM(g.top,A),t=I.toDOM(g.bottom,A);return new OK(g.from,g.length,C,t-C,Array.isArray(g.type)?g.type.map((g=>_K(g,I,A))):g.type)}const $K=Hy.define({combine:g=>g.join(" ")}),qK=Hy.define({combine:g=>g.indexOf(!0)>-1}),gf=Sw.newName(),If=Sw.newName(),Af=Sw.newName(),Cf={"&light":"."+If,"&dark":"."+Af};function tf(g,I,A){return new Sw(I,{finish:I=>/&/.test(I)?I.replace(/&\w*/,(I=>{if("&"==I)return g;if(!A||!A[I])throw new RangeError(`Unsupported selector: ${I}`);return A[I]})):g+" "+I})}const ef=tf("."+gf,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,minHeight:"100%",display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none"},".cm-lineWrapping":{whiteSpace:"pre-wrap",wordBreak:"break-word",overflowWrap:"anywhere"},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 4px"},".cm-selectionLayer":{zIndex:-1,contain:"size style"},".cm-selectionBackground":{position:"absolute"},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{zIndex:100,contain:"size style",pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},".cm-cursor":{position:"absolute",borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none",display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#f3f9ff"},"&dark .cm-activeLine":{backgroundColor:"#223039"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-placeholder":{color:"#888",display:"inline-block"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"3px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Cf),of={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},nf=kW.ie&&kW.ie_version<=11;class sf{constructor(g,I,A){this.view=g,this.onChange=I,this.onScrollChanged=A,this.active=!1,this.ignoreSelection=new cW,this.delayedFlush=-1,this.queue=[],this.lastFlush=0,this.scrollTargets=[],this.intersection=null,this.intersecting=!1,this._selectionRange=null,this.parentCheck=-1,this.dom=g.contentDOM,this.observer=new MutationObserver((I=>{for(let g of I)this.queue.push(g);this._selectionRange=null,(kW.ie&&kW.ie_version<=11||kW.ios&&g.composing)&&I.some((g=>"childList"==g.type&&g.removedNodes.length||"characterData"==g.type&&g.oldValue.length>g.target.nodeValue.length))?this.flushSoon():this.flush()})),nf&&(this.onCharData=g=>{this.queue.push({target:g.target,type:"characterData",oldValue:g.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.start(),this.onScroll=this.onScroll.bind(this),window.addEventListener("scroll",this.onScroll),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver((g=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),g[g.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))}),{}),this.intersection.observe(this.dom)),this.listenForScroll()}onScroll(g){this.intersecting&&this.flush(),this.onScrollChanged(g)}onSelectionChange(g){this.lastFlush<Date.now()-50&&(this._selectionRange=null);let{view:I}=this,A=this.selectionRange;if(I.state.facet(GS)?I.root.activeElement!=this.dom:!CW(I.dom,A))return;let C=A.anchorNode&&I.docView.nearest(A.anchorNode);C&&C.ignoreEvent(g)||(kW.ie&&kW.ie_version<=11&&!I.state.selection.main.empty&&A.focusNode&&iW(A.focusNode,A.focusOffset,A.anchorNode,A.anchorOffset)?this.flushSoon():this.flush())}get selectionRange(){if(!this._selectionRange){let{root:g}=this.view,I=IW(g);kW.safari&&11==g.nodeType&&function(){let g=document.activeElement;for(;g&&g.shadowRoot;)g=g.shadowRoot.activeElement;return g}()==this.view.contentDOM&&(I=function(g){let I=null;function A(g){g.preventDefault(),g.stopImmediatePropagation(),I=g.getTargetRanges()[0]}if(g.contentDOM.addEventListener("beforeinput",A,!0),document.execCommand("indent"),g.contentDOM.removeEventListener("beforeinput",A,!0),!I)return null;let C=I.startContainer,t=I.startOffset,i=I.endContainer,e=I.endOffset,o=g.docView.domAtPos(g.state.selection.main.anchor);iW(o.node,o.offset,i,e)&&([C,t,i,e]=[i,e,C,t]);return{anchorNode:C,anchorOffset:t,focusNode:i,focusOffset:e}}(this.view)||I),this._selectionRange=I}return this._selectionRange}setSelectionRange(g,I){var A;(null===(A=this._selectionRange)||void 0===A?void 0:A.type)||(this._selectionRange={anchorNode:g.node,anchorOffset:g.offset,focusNode:I.node,focusOffset:I.offset})}listenForScroll(){this.parentCheck=-1;let g=0,I=null;for(let A=this.dom;A;)if(1==A.nodeType)!I&&g<this.scrollTargets.length&&this.scrollTargets[g]==A?g++:I||(I=this.scrollTargets.slice(0,g)),I&&I.push(A),A=A.assignedSlot||A.parentNode;else{if(11!=A.nodeType)break;A=A.host}if(g<this.scrollTargets.length&&!I&&(I=this.scrollTargets.slice(0,g)),I){for(let g of this.scrollTargets)g.removeEventListener("scroll",this.onScroll);for(let g of this.scrollTargets=I)g.addEventListener("scroll",this.onScroll)}}ignore(g){if(!this.active)return g();try{return this.stop(),g()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,of),this.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange),nf&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),this.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange),nf&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clearSelection(){this.ignoreSelection.set(this.selectionRange)}clear(){this.observer.takeRecords(),this.queue.length=0,this.clearSelection()}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=window.setTimeout((()=>{this.delayedFlush=-1,this.flush()}),20))}forceFlush(){this.delayedFlush>=0&&(window.clearTimeout(this.delayedFlush),this.delayedFlush=-1,this.flush())}flush(){if(this.delayedFlush>=0)return;this.lastFlush=Date.now();let g=this.queue;for(let o of this.observer.takeRecords())g.push(o);g.length&&(this.queue=[]);let I=this.selectionRange,A=!this.ignoreSelection.eq(I)&&CW(this.dom,I);if(0==g.length&&!A)return;let C=-1,t=-1,i=!1;for(let o of g){let g=this.readMutation(o);g&&(g.typeOver&&(i=!0),-1==C?({from:C,to:t}=g):(C=Math.min(g.from,C),t=Math.max(g.to,t)))}let e=this.view.state;(C>-1||A)&&this.onChange(C,t,i),this.view.state==e&&(this.view.docView.dirty&&(this.ignore((()=>this.view.docView.sync())),this.view.docView.dirty=0),A&&this.view.docView.updateSelection()),this.clearSelection()}readMutation(g){let I=this.view.docView.nearest(g.target);if(!I||I.ignoreMutation(g))return null;if(I.markDirty("attributes"==g.type),"attributes"==g.type&&(I.dirty|=4),"childList"==g.type){let A=lf(I,g.previousSibling||g.target.previousSibling,-1),C=lf(I,g.nextSibling||g.target.nextSibling,1);return{from:A?I.posAfter(A):I.posAtStart,to:C?I.posBefore(C):I.posAtEnd,typeOver:!1}}return"characterData"==g.type?{from:I.posAtStart,to:I.posAtEnd,typeOver:g.target.nodeValue==g.oldValue}:null}destroy(){this.stop(),this.intersection&&this.intersection.disconnect();for(let g of this.scrollTargets)g.removeEventListener("scroll",this.onScroll);window.removeEventListener("scroll",this.onScroll),clearTimeout(this.parentCheck)}}function lf(g,I,A){for(;I;){let C=BW.get(I);if(C&&C.parent==g)return C;let t=I.parentNode;I=t!=g.dom?t:A>0?I.nextSibling:I.previousSibling}return null}function rf(g,I,A,C){let t,i,e,o=g.state.selection.main;if(I>-1&&!g.state.readOnly&&(e=g.docView.domBoundsAround(I,A,0))){let{from:I,to:A}=e,C=g.docView.impreciseHead||g.docView.impreciseAnchor?[]:function(g){let I=[];if(g.root.activeElement!=g.contentDOM)return I;let{anchorNode:A,anchorOffset:C,focusNode:t,focusOffset:i}=g.observer.selectionRange;A&&(I.push(new df(A,C)),t==A&&i==C||I.push(new df(t,i)));return I}(g),n=new cf(C,g);n.readRange(e.startDOM,e.endDOM),i=function(g,I){if(0==g.length)return null;let A=g[0].pos,C=2==g.length?g[1].pos:A;return A>-1&&C>-1?Vy.single(A+I,C+I):null}(C,I);let s=o.from,l=null;(8===g.inputState.lastKeyCode&&g.inputState.lastKeyTime>Date.now()-100||kW.android&&n.text.length<A-I)&&(s=o.to,l="end");let r=function(g,I,A,C){let t=Math.min(g.length,I.length),i=0;for(;i<t&&g.charCodeAt(i)==I.charCodeAt(i);)i++;if(i==t&&g.length==I.length)return null;let e=g.length,o=I.length;for(;e>0&&o>0&&g.charCodeAt(e-1)==I.charCodeAt(o-1);)e--,o--;if("end"==C){A-=e+Math.max(0,i-Math.min(e,o))-i}if(e<i&&g.length<I.length){i-=A<=i&&A>=e?i-A:0,o=i+(o-e),e=i}else if(o<i){i-=A<=i&&A>=o?i-A:0,e=i+(e-o),o=i}return{from:i,toA:e,toB:o}}(g.state.sliceDoc(I,A),n.text,s-I,l);r&&(t={from:I+r.from,to:I+r.toA,insert:g.state.toText(n.text.slice(r.from,r.toB))})}else if(g.hasFocus||!g.state.facet(GS)){let I=g.observer.selectionRange,{impreciseHead:A,impreciseAnchor:C}=g.docView,t=A&&A.node==I.focusNode&&A.offset==I.focusOffset||!AW(g.contentDOM,I.focusNode)?g.state.selection.main.head:g.docView.posFromDOM(I.focusNode,I.focusOffset),e=C&&C.node==I.anchorNode&&C.offset==I.anchorOffset||!AW(g.contentDOM,I.anchorNode)?g.state.selection.main.anchor:g.docView.posFromDOM(I.anchorNode,I.anchorOffset);t==o.head&&e==o.anchor||(i=Vy.single(e,t))}if(t||i)if(!t&&C&&!o.empty&&i&&i.main.empty?t={from:o.from,to:o.to,insert:g.state.doc.slice(o.from,o.to)}:t&&t.from>=o.from&&t.to<=o.to&&(t.from!=o.from||t.to!=o.to)&&o.to-o.from-(t.to-t.from)<=4&&(t={from:o.from,to:o.to,insert:g.state.doc.slice(o.from,t.from).append(t.insert).append(g.state.doc.slice(t.to,o.to))}),t){let I=g.state;if(kW.android&&(t.from==o.from&&t.to==o.to&&1==t.insert.length&&2==t.insert.lines&&ZW(g.contentDOM,"Enter",13)||t.from==o.from-1&&t.to==o.to&&0==t.insert.length&&ZW(g.contentDOM,"Backspace",8)||t.from==o.from&&t.to==o.to+1&&0==t.insert.length&&ZW(g.contentDOM,"Delete",46))||kW.ios&&g.inputState.flushIOSKey(g))return;let A,C=t.insert.toString();if(g.state.facet(mS).some((I=>I(g,t.from,t.to,C))))return;if(g.inputState.composing>=0&&g.inputState.composing++,t.from>=o.from&&t.to<=o.to&&t.to-t.from>=(o.to-o.from)/3&&(!i||i.main.empty&&i.main.from==t.from+t.insert.length)){let C=o.from<t.from?I.sliceDoc(o.from,t.from):"",i=o.to>t.to?I.sliceDoc(t.to,o.to):"";A=I.replaceSelection(g.state.toText(C+t.insert.sliceString(0,void 0,g.state.lineBreak)+i))}else{let g=I.changes(t);A={changes:g,selection:i&&!I.selection.main.eq(i.main)&&i.main.to<=g.newLength?I.selection.replaceRange(i.main):void 0}}let e="input.type";g.composing&&(e+=".compose",g.inputState.compositionFirstChange&&(e+=".start",g.inputState.compositionFirstChange=!1)),g.dispatch(A,{scrollIntoView:!0,userEvent:e})}else if(i&&!i.main.eq(o)){let I=!1,A="select";g.inputState.lastSelectionTime>Date.now()-50&&("select"==g.inputState.lastSelectionOrigin&&(I=!0),A=g.inputState.lastSelectionOrigin),g.dispatch({selection:i,scrollIntoView:I,userEvent:A})}}class cf{constructor(g,I){this.points=g,this.view=I,this.text="",this.lineBreak=I.state.lineBreak}readRange(g,I){if(!g)return;let A=g.parentNode;for(let C=g;;){this.findPointBefore(A,C),this.readNode(C);let g=C.nextSibling;if(g==I)break;let t=BW.get(C),i=BW.get(g);((t?t.breakAfter:af(C))||(i?i.breakAfter:af(g))&&("BR"!=C.nodeName||C.cmIgnore))&&(this.text+=this.lineBreak),C=g}this.findPointBefore(A,I)}readNode(g){if(g.cmIgnore)return;let I,A=BW.get(g),C=A&&A.overrideDOMText;null!=C?I=C.sliceString(0,void 0,this.lineBreak):3==g.nodeType?I=g.nodeValue:"BR"==g.nodeName?I=g.nextSibling?this.lineBreak:"":1==g.nodeType&&this.readRange(g.firstChild,null),null!=I&&(this.findPointIn(g,I.length),this.text+=I,kW.chrome&&13==this.view.inputState.lastKeyCode&&!g.nextSibling&&/\n\n$/.test(this.text)&&(this.text=this.text.slice(0,-1)))}findPointBefore(g,I){for(let A of this.points)A.node==g&&g.childNodes[A.offset]==I&&(A.pos=this.text.length)}findPointIn(g,I){for(let A of this.points)A.node==g&&(A.pos=this.text.length+Math.min(A.offset,I))}}function af(g){return 1==g.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(g.nodeName)}class df{constructor(g,I){this.node=g,this.offset=I,this.pos=-1}}class hf{constructor(g={}){this.plugins=[],this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: absolute; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=g.dispatch||(g=>this.update([g])),this.dispatch=this.dispatch.bind(this),this.root=g.root||document,this.viewState=new LK(g.state||pw.create()),this.plugins=this.state.facet(yS).map((g=>new SS(g).update(this))),this.observer=new sf(this,((g,I,A)=>{rf(this,g,I,A)}),(g=>{this.inputState.runScrollHandlers(this,g),this.observer.intersecting&&this.measure()})),this.inputState=new sK(this),this.docView=new RS(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,window.addEventListener("resize",(()=>{-1==uf&&(uf=setTimeout(Gf,50))})),this.requestMeasure(),g.parent&&g.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}dispatch(...g){this._dispatch(1==g.length&&g[0]instanceof lw?g[0]:this.state.update(...g))}update(g){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let I,A=!1,C=this.state;for(let i of g){if(i.startState!=C)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");C=i.state}if(C.facet(pw.phrases)!=this.state.facet(pw.phrases))return this.setState(C);I=new OS(this,C,g);let t=null;try{this.updateState=2;for(let I of g){if(t&&(t=t.map(I.changes)),I.scrollIntoView){let{main:g}=I.state.selection;t=g.empty?g:Vy.cursor(g.head,g.head>g.anchor?-1:1)}for(let g of I.effects)g.is(ZS)&&(t=g.value)}this.viewState.update(I,t),this.bidiCache=pf.update(this.bidiCache,I.changes),I.empty||(this.updatePlugins(I),this.inputState.update(I)),A=this.docView.update(I),this.state.facet(XS)!=this.styleModules&&this.mountStyles(),this.updateAttrs(),this.showAnnouncements(g)}finally{this.updateState=0}if((A||t||this.viewState.mustEnforceCursorAssoc)&&this.requestMeasure(),!I.empty)for(let i of this.state.facet(hS))i(I)}setState(g){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");this.updateState=2;try{for(let g of this.plugins)g.destroy(this);this.viewState=new LK(g),this.plugins=g.facet(yS).map((g=>new SS(g).update(this))),this.docView=new RS(this),this.inputState.ensureHandlers(this),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}this.requestMeasure()}updatePlugins(g){let I=g.startState.facet(yS),A=g.state.facet(yS);if(I!=A){let C=[];for(let t of A){let A=I.indexOf(t);if(A<0)C.push(new SS(t));else{let I=this.plugins[A];I.mustUpdate=g,C.push(I)}}for(let I of this.plugins)I.mustUpdate!=g&&I.destroy(this);this.plugins=C,this.inputState.ensureHandlers(this)}else for(let C of this.plugins)C.mustUpdate=g;for(let C=0;C<this.plugins.length;C++)this.plugins[C]=this.plugins[C].update(this)}measure(g=!0){this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=-1,g&&this.observer.flush();let I=null;try{for(let g=0;;g++){this.updateState=1;let A=this.viewState.measure(this.docView,g>0),C=this.measureRequests;if(!A&&!C.length&&null==this.viewState.scrollTo)break;if(this.measureRequests=[],g>5){console.warn("Viewport failed to stabilize");break}let t=C.map((g=>{try{return g.read(this)}catch(dD){return uS(this.state,dD),bf}})),i=new OS(this,this.state);i.flags|=A,I?I.flags|=A:I=i,this.updateState=2,i.empty||(this.updatePlugins(i),this.inputState.update(i)),this.updateAttrs(),A&&this.docView.update(i);for(let g=0;g<C.length;g++)if(t[g]!=bf)try{C[g].write(t[g],this)}catch(dD){uS(this.state,dD)}if(this.viewState.scrollTo&&(this.docView.scrollRangeIntoView(this.viewState.scrollTo),this.viewState.scrollTo=null),!(4&A)&&0==this.measureRequests.length)break}}finally{this.updateState=0}if(this.measureScheduled=-1,I&&!I.empty)for(let A of this.state.facet(hS))A(I)}get themeClasses(){return gf+" "+(this.state.facet(qK)?Af:If)+" "+this.state.facet($K)}updateAttrs(){let g=UW(this.state.facet(KS),{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses});jW(this.dom,this.editorAttrs,g),this.editorAttrs=g;let I={spellcheck:"false",autocorrect:"off",autocapitalize:"off",contenteditable:this.state.facet(GS)?GW()?"plaintext-only":"true":"false",class:"cm-content",style:`${kW.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(I["aria-readonly"]="true"),UW(this.state.facet(fS),I),jW(this.contentDOM,this.contentAttrs,I),this.contentAttrs=I}showAnnouncements(g){let I=!0;for(let A of g)for(let g of A.effects)if(g.is(hf.announce)){I&&(this.announceDOM.textContent=""),I=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=g.value}}mountStyles(){this.styleModules=this.state.facet(XS),Sw.mount(this.root,this.styleModules.concat(ef).reverse())}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(g){if(this.measureScheduled<0&&(this.measureScheduled=requestAnimationFrame((()=>this.measure()))),g){if(null!=g.key)for(let I=0;I<this.measureRequests.length;I++)if(this.measureRequests[I].key===g.key)return void(this.measureRequests[I]=g);this.measureRequests.push(g)}}pluginField(g){let I=[];for(let A of this.plugins)A.update(this).takeField(g,I);return I}plugin(g){for(let I of this.plugins)if(I.spec==g)return I.update(this).value;return null}blockAtHeight(g,I){return this.readMeasured(),this.viewState.blockAtHeight(g,Zf(I,this.contentDOM))}visualLineAtHeight(g,I){return this.readMeasured(),this.viewState.lineAtHeight(g,Zf(I,this.contentDOM))}viewportLines(g,I){let{from:A,to:C}=this.viewport;this.viewState.forEachLine(A,C,g,Zf(I,this.contentDOM))}visualLineAt(g,I=0){return this.viewState.lineAt(g,I)}get contentHeight(){return this.viewState.contentHeight}moveByChar(g,I,A){return nK(this,g,oK(this,g,I,A))}moveByGroup(g,I){return nK(this,g,oK(this,g,I,(I=>function(g,I,A){let C=g.state.charCategorizer(I),t=C(A);return g=>{let I=C(g);return t==Zw.Space&&(t=I),t==I}}(this,g.head,I))))}moveToLineBoundary(g,I,A=!0){return function(g,I,A,C){let t=g.state.doc.lineAt(I.head),i=C&&g.lineWrapping?g.coordsAtPos(I.assoc<0&&I.head>t.from?I.head-1:I.head):null;if(i){let I=g.dom.getBoundingClientRect(),C=g.posAtCoords({x:A==(g.textDirection==vS.LTR)?I.right-1:I.left+1,y:(i.top+i.bottom)/2});if(null!=C)return Vy.cursor(C,A?-1:1)}let e=iS.find(g.docView,I.head),o=e?A?e.posAtEnd:e.posAtStart:A?t.to:t.from;return Vy.cursor(o,A?-1:1)}(this,g,I,A)}moveVertically(g,I,A){return nK(this,g,function(g,I,A,C){let t=I.head,i=A?1:-1;if(t==(A?g.state.doc.length:0))return Vy.cursor(t);let e,o=I.goalColumn,n=g.contentDOM.getBoundingClientRect(),s=g.coordsAtPos(t);if(s)null==o&&(o=s.left-n.left),e=i<0?s.top:s.bottom;else{let I=g.viewState.lineAt(t,g.dom.getBoundingClientRect().top);null==o&&(o=Math.min(n.right-n.left,g.defaultCharacterWidth*(t-I.from))),e=i<0?I.top:I.bottom}let l=n.left+o,r=null!=C?C:g.defaultLineHeight>>1;for(let c=0;;c+=10){let I=e+(r+c)*i,A=iK(g,{x:l,y:I},!1,i);if(I<n.top||I>n.bottom||(i<0?A<t:A>t))return Vy.cursor(A,void 0,void 0,o)}}(this,g,I,A))}scrollPosIntoView(g){this.viewState.scrollTo=Vy.cursor(g),this.requestMeasure()}domAtPos(g){return this.docView.domAtPos(g)}posAtDOM(g,I=0){return this.docView.posFromDOM(g,I)}posAtCoords(g,I=!0){return this.readMeasured(),iK(this,g,I)}coordsAtPos(g,I=1){this.readMeasured();let A=this.docView.coordsAt(g,I);if(!A||A.left==A.right)return A;let C=this.state.doc.lineAt(g),t=this.bidiSpans(C);return lW(A,t[PS.find(t,g-C.from,-1,I)].dir==vS.LTR==I>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.heightOracle.direction}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(g){if(g.length>mf)return xS(g.length);let I=this.textDirection;for(let C of this.bidiCache)if(C.from==g.from&&C.dir==I)return C.order;let A=function(g,I){let A=g.length,C=I==DS?1:2,t=I==DS?2:1;if(!g||1==C&&!zS.test(g))return xS(A);for(let o=0,n=C,s=C;o<A;o++){let I=(i=g.charCodeAt(o))<=247?ES[i]:1424<=i&&i<=1524?2:1536<=i&&i<=1785?FS[i-1536]:1774<=i&&i<=2220?4:8192<=i&&i<=8203||8204==i?256:1;512==I?I=n:8==I&&4==s&&(I=16),US[o]=4==I?2:I,7&I&&(s=I),n=I}var i;for(let o=0,n=C,s=C;o<A;o++){let g=US[o];if(128==g)o<A-1&&n==US[o+1]&&24&n?g=US[o]=n:US[o]=256;else if(64==g){let g=o+1;for(;g<A&&64==US[g];)g++;let I=o&&8==n||g<A&&8==US[g]?1==s?1:8:256;for(let A=o;A<g;A++)US[A]=I;o=g-1}else 8==g&&1==s&&(US[o]=1);n=g,7&g&&(s=g)}for(let o,n,s,l=0,r=0,c=0;l<A;l++)if(n=LS[o=g.charCodeAt(l)])if(n<0){for(let g=r-3;g>=0;g-=3)if(TS[g+1]==-n){let I=TS[g+2],A=2&I?C:4&I?1&I?t:C:0;A&&(US[l]=US[TS[g]]=A),r=g;break}}else{if(189==TS.length)break;TS[r++]=l,TS[r++]=o,TS[r++]=c}else if(2==(s=US[l])||1==s){let g=s==C;c=g?0:1;for(let I=r-3;I>=0;I-=3){let A=TS[I+2];if(2&A)break;if(g)TS[I+2]|=2;else{if(4&A)break;TS[I+2]|=4}}}for(let o=0;o<A;o++)if(256==US[o]){let g=o+1;for(;g<A&&256==US[g];)g++;let I=1==(o?US[o-1]:C),t=I==(1==(g<A?US[g]:C))?I?1:2:C;for(let A=o;A<g;A++)US[A]=t;o=g-1}let e=[];if(1==C)for(let o=0;o<A;){let g=o,I=1!=US[o++];for(;o<A&&I==(1!=US[o]);)o++;if(I)for(let A=o;A>g;){let I=A,C=2!=US[--A];for(;A>g&&C==(2!=US[A-1]);)A--;e.push(new PS(A,I,C?2:1))}else e.push(new PS(g,o,0))}else for(let o=0;o<A;){let g=o,I=2==US[o++];for(;o<A&&I==(2==US[o]);)o++;e.push(new PS(g,o,I?1:2))}return e}(g.text,this.textDirection);return this.bidiCache.push(new pf(g.from,g.to,I,A)),A}get hasFocus(){var g;return(document.hasFocus()||kW.safari&&(null===(g=this.inputState)||void 0===g?void 0:g.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore((()=>{hW(this.contentDOM),this.docView.updateSelection()}))}destroy(){for(let g of this.plugins)g.destroy(this);this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled)}static domEventHandlers(g){return wS.define((()=>({})),{eventHandlers:g})}static theme(g,I){let A=Sw.newName(),C=[$K.of(A),XS.of(tf(`.${A}`,g))];return I&&I.dark&&C.push(qK.of(!0)),C}static baseTheme(g){return zy.fallback(XS.of(tf("."+gf,g,Cf)))}}hf.scrollTo=ZS,hf.styleModule=XS,hf.inputHandler=mS,hf.exceptionSink=dS,hf.updateListener=hS,hf.editable=GS,hf.mouseSelectionStyle=aS,hf.dragMovesSelection=cS,hf.clickAddsSelectionRange=rS,hf.decorations=YS,hf.contentAttributes=fS,hf.editorAttributes=KS,hf.lineWrapping=hf.contentAttributes.of({class:"cm-lineWrapping"}),hf.announce=sw.define();const mf=4096;function Zf(g,I){return null==g?I.getBoundingClientRect().top:g}let uf=-1;function Gf(){uf=-1;let g=document.querySelectorAll(".cm-content");for(let I=0;I<g.length;I++){let A=BW.get(g[I]);A&&A.editorView.requestMeasure()}}const bf={};class pf{constructor(g,I,A,C){this.from=g,this.to=I,this.dir=A,this.order=C}static update(g,I){if(I.empty)return g;let A=[],C=g.length?g[g.length-1].dir:vS.LTR;for(let t=Math.max(0,g.length-10);t<g.length;t++){let i=g[t];i.dir!=C||I.touchesRange(i.from,i.to)||A.push(new pf(I.mapPos(i.from,1),I.mapPos(i.to,-1),i.dir,i.order))}return A}}const Bf="undefined"==typeof navigator?"key":/Mac/.test(navigator.platform)?"mac":/Win/.test(navigator.platform)?"win":/Linux|X11/.test(navigator.platform)?"linux":"key";function yf(g,I,A){return I.altKey&&(g="Alt-"+g),I.ctrlKey&&(g="Ctrl-"+g),I.metaKey&&(g="Meta-"+g),!1!==A&&I.shiftKey&&(g="Shift-"+g),g}const wf=hf.domEventHandlers({keydown:(g,I)=>Yf(Kf(I.state),g,I,"editor")}),Wf=Hy.define({enables:wf}),Sf=new WeakMap;function Kf(g){let I=g.facet(Wf),A=Sf.get(I);return A||Sf.set(I,A=function(g,I=Bf){let A=Object.create(null),C=Object.create(null),t=(g,I)=>{let A=C[g];if(null==A)C[g]=I;else if(A!=I)throw new Error("Key binding "+g+" is used both as a regular binding and as a multi-stroke prefix")},i=(g,C,i,e)=>{let o=A[g]||(A[g]=Object.create(null)),n=C.split(/ (?!$)/).map((g=>function(g,I){const A=g.split(/-(?!$)/);let C,t,i,e,o=A[A.length-1];"Space"==o&&(o=" ");for(let n=0;n<A.length-1;++n){const g=A[n];if(/^(cmd|meta|m)$/i.test(g))e=!0;else if(/^a(lt)?$/i.test(g))C=!0;else if(/^(c|ctrl|control)$/i.test(g))t=!0;else if(/^s(hift)?$/i.test(g))i=!0;else{if(!/^mod$/i.test(g))throw new Error("Unrecognized modifier name: "+g);"mac"==I?e=!0:t=!0}}return C&&(o="Alt-"+o),t&&(o="Ctrl-"+o),e&&(o="Meta-"+o),i&&(o="Shift-"+o),o}(g,I)));for(let I=1;I<n.length;I++){let A=n.slice(0,I).join(" ");t(A,!0),o[A]||(o[A]={preventDefault:!0,commands:[I=>{let C=ff={view:I,prefix:A,scope:g};return setTimeout((()=>{ff==C&&(ff=null)}),4e3),!0}]})}let s=n.join(" ");t(s,!1);let l=o[s]||(o[s]={preventDefault:!1,commands:[]});l.commands.push(i),e&&(l.preventDefault=!0)};for(let e of g){let g=e[I]||e.key;if(g)for(let I of e.scope?e.scope.split(" "):["editor"])i(I,g,e.run,e.preventDefault),e.shift&&i(I,"Shift-"+g,e.shift,e.preventDefault)}return A}(I.reduce(((g,I)=>g.concat(I)),[]))),A}let ff=null;function Yf(g,I,A,C){let t=function(g){var I=!($w&&(g.ctrlKey||g.altKey||g.metaKey)||(Uw||_w)&&g.shiftKey&&g.key&&1==g.key.length)&&g.key||(g.shiftKey?zw:Tw)[g.keyCode]||g.key||"Unidentified";return"Esc"==I&&(I="Escape"),"Del"==I&&(I="Delete"),"Left"==I&&(I="ArrowLeft"),"Up"==I&&(I="ArrowUp"),"Right"==I&&(I="ArrowRight"),"Down"==I&&(I="ArrowDown"),I}(I),i=1==t.length&&" "!=t,e="",o=!1;ff&&ff.view==A&&ff.scope==C&&(e=ff.prefix+" ",(o=lK.indexOf(I.keyCode)<0)&&(ff=null));let n,s=g=>{if(g){for(let I of g.commands)if(I(A))return!0;g.preventDefault&&(o=!0)}return!1},l=g[C];if(l){if(s(l[e+yf(t,I,!i)]))return!0;if(i&&(I.shiftKey||I.altKey||I.metaKey)&&(n=Tw[I.keyCode])&&n!=t){if(s(l[e+yf(n,I,!0)]))return!0}else if(i&&I.shiftKey&&s(l[e+yf(t,I,!0)]))return!0}return o}const Xf=!kW.ios,Vf=Hy.define({combine:g=>Bw(g,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(g,I)=>Math.min(g,I),drawRangeCursor:(g,I)=>g||I})});function Of(g={}){return[Vf.of(g),Qf,kf]}class Rf{constructor(g,I,A,C,t){this.left=g,this.top=I,this.width=A,this.height=C,this.className=t}draw(){let g=document.createElement("div");return g.className=this.className,this.adjust(g),g}adjust(g){g.style.left=this.left+"px",g.style.top=this.top+"px",this.width>=0&&(g.style.width=this.width+"px"),g.style.height=this.height+"px"}eq(g){return this.left==g.left&&this.top==g.top&&this.width==g.width&&this.height==g.height&&this.className==g.className}}const Qf=wS.fromClass(class{constructor(g){this.view=g,this.rangePieces=[],this.cursors=[],this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)},this.selectionLayer=g.scrollDOM.appendChild(document.createElement("div")),this.selectionLayer.className="cm-selectionLayer",this.selectionLayer.setAttribute("aria-hidden","true"),this.cursorLayer=g.scrollDOM.appendChild(document.createElement("div")),this.cursorLayer.className="cm-cursorLayer",this.cursorLayer.setAttribute("aria-hidden","true"),g.requestMeasure(this.measureReq),this.setBlinkRate()}setBlinkRate(){this.cursorLayer.style.animationDuration=this.view.state.facet(Vf).cursorBlinkRate+"ms"}update(g){let I=g.startState.facet(Vf)!=g.state.facet(Vf);(I||g.selectionSet||g.geometryChanged||g.viewportChanged)&&this.view.requestMeasure(this.measureReq),g.transactions.some((g=>g.scrollIntoView))&&(this.cursorLayer.style.animationName="cm-blink"==this.cursorLayer.style.animationName?"cm-blink2":"cm-blink"),I&&this.setBlinkRate()}readPos(){let{state:g}=this.view,I=g.facet(Vf),A=g.selection.ranges.map((g=>g.empty?[]:function(g,I){if(I.to<=g.viewport.from||I.from>=g.viewport.to)return[];let A=Math.max(I.from,g.viewport.from),C=Math.min(I.to,g.viewport.to),t=g.textDirection==vS.LTR,i=g.contentDOM,e=i.getBoundingClientRect(),o=Jf(g),n=window.getComputedStyle(i.firstChild),s=e.left+parseInt(n.paddingLeft),l=e.right-parseInt(n.paddingRight),r=Df(g,A),c=Df(g,C),a=r.type==$W.Text?r:null,d=c.type==$W.Text?c:null;g.lineWrapping&&(a&&(a=vf(g,A,a)),d&&(d=vf(g,C,d)));if(a&&d&&a.from==d.from)return m(Z(I.from,I.to,a));{let A=a?Z(I.from,null,a):u(r,!1),C=d?Z(null,I.to,d):u(c,!0),t=[];return(a||r).to<(d||c).from-1?t.push(h(s,A.bottom,l,C.top)):A.bottom<C.top&&Df(g,(A.bottom+C.top)/2).type==$W.Text&&(A.bottom=C.top=(A.bottom+C.top)/2),m(A).concat(t).concat(m(C))}function h(g,I,A,C){return new Rf(g-o.left,I-o.top,A-g,C-I,"cm-selectionBackground")}function m({top:g,bottom:I,horizontal:A}){let C=[];for(let t=0;t<A.length;t+=2)C.push(h(A[t],g,A[t+1],I));return C}function Z(I,A,C){let i=1e9,e=-1e9,o=[];function n(I,A,n,r,c){let a=g.coordsAtPos(I,I==C.to?-2:2),d=g.coordsAtPos(n,n==C.from?2:-2);i=Math.min(a.top,d.top,i),e=Math.max(a.bottom,d.bottom,e),c==vS.LTR?o.push(t&&A?s:a.left,t&&r?l:d.right):o.push(!t&&r?s:d.left,!t&&A?l:a.right)}let r=null!=I?I:C.from,c=null!=A?A:C.to;for(let t of g.visibleRanges)if(t.to>r&&t.from<c)for(let C=Math.max(t.from,r),i=Math.min(t.to,c);;){let t=g.state.doc.lineAt(C);for(let e of g.bidiSpans(t)){let g=e.from+t.from,o=e.to+t.from;if(g>=i)break;o>C&&n(Math.max(g,C),null==I&&g<=r,Math.min(o,i),null==A&&o>=c,e.dir)}if(C=t.to+1,C>=i)break}return 0==o.length&&n(r,null==I,c,null==A,g.textDirection),{top:i,bottom:e,horizontal:o}}function u(g,I){let A=e.top+(I?g.top:g.bottom);return{top:A,bottom:A,horizontal:[]}}}(this.view,g))).reduce(((g,I)=>g.concat(I))),C=[];for(let t of g.selection.ranges){let A=t==g.selection.main;if(t.empty?!A||Xf:I.drawRangeCursor){let g=Mf(this.view,t,A);g&&C.push(g)}}return{rangePieces:A,cursors:C}}drawSel({rangePieces:g,cursors:I}){if(g.length!=this.rangePieces.length||g.some(((g,I)=>!g.eq(this.rangePieces[I])))){this.selectionLayer.textContent="";for(let I of g)this.selectionLayer.appendChild(I.draw());this.rangePieces=g}if(I.length!=this.cursors.length||I.some(((g,I)=>!g.eq(this.cursors[I])))){let g=this.cursorLayer.children;if(g.length!==I.length){this.cursorLayer.textContent="";for(const g of I)this.cursorLayer.appendChild(g.draw())}else I.forEach(((I,A)=>I.adjust(g[A])));this.cursors=I}}destroy(){this.selectionLayer.remove(),this.cursorLayer.remove()}}),Hf={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};Xf&&(Hf[".cm-line"].caretColor="transparent !important");const kf=zy.override(hf.theme(Hf));function Jf(g){let I=g.scrollDOM.getBoundingClientRect();return{left:(g.textDirection==vS.LTR?I.left:I.right-g.scrollDOM.clientWidth)-g.scrollDOM.scrollLeft,top:I.top-g.scrollDOM.scrollTop}}function vf(g,I,A){let C=Vy.cursor(I);return{from:Math.max(A.from,g.moveToLineBoundary(C,!1,!0).from),to:Math.min(A.to,g.moveToLineBoundary(C,!0,!0).from),type:$W.Text}}function Df(g,I){let A=g.visualLineAt(I);if(Array.isArray(A.type))for(let C of A.type)if(C.to>I||C.to==I&&(C.to==A.to||C.type==$W.Text))return C;return A}function Mf(g,I,A){let C=g.coordsAtPos(I.head,I.assoc||1);if(!C)return null;let t=Jf(g);return new Rf(C.left-t.left,C.top-t.top,-1,C.bottom-C.top,A?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary")}function Nf(g,I,A,C,t){I.lastIndex=0;for(let i,e=g.iterRange(A,C),o=A;!e.next().done;o+=e.value.length)if(!e.lineBreak)for(;i=I.exec(e.value);)t(o+i.index,o+i.index+i[0].length,i)}class Ef{constructor(g){let{regexp:I,decoration:A,boundary:C}=g;if(!I.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");this.regexp=I,this.getDeco="function"==typeof A?A:()=>A,this.boundary=C}createDeco(g){let I=new Qw;for(let{from:A,to:C}of g.visibleRanges)Nf(g.state.doc,this.regexp,A,C,((A,C,t)=>I.add(A,C,this.getDeco(t,g,A))));return I.finish()}updateDeco(g,I){let A=1e9,C=-1;return g.docChanged&&g.changes.iterChanges(((I,t,i,e)=>{e>g.view.viewport.from&&i<g.view.viewport.to&&(A=Math.min(i,A),C=Math.max(e,C))})),g.viewportChanged||C-A>1e3?this.createDeco(g.view):C>-1?this.updateRange(g.view,I.map(g.changes),A,C):I}updateRange(g,I,A,C){for(let t of g.visibleRanges){let i=Math.max(t.from,A),e=Math.min(t.to,C);if(e>i){let A=g.state.doc.lineAt(i),C=A.to<e?g.state.doc.lineAt(e):A,o=Math.max(t.from,A.from),n=Math.min(t.to,C.to);if(this.boundary){for(;i>A.from;i--)if(this.boundary.test(A.text[i-1-A.from])){o=i;break}for(;e<C.to;e++)if(this.boundary.test(C.text[e-C.from])){n=e;break}}let s,l=[];if(A==C)for(this.regexp.lastIndex=o-A.from;(s=this.regexp.exec(A.text))&&s.index<n-A.from;){let I=s.index+A.from;l.push(this.getDeco(s,g,I).range(I,I+s[0].length))}else Nf(g.state.doc,this.regexp,o,n,((I,A,C)=>l.push(this.getDeco(C,g,I).range(I,A))));I=I.update({filterFrom:o,filterTo:n,filter:(g,I)=>g<o||I>n,add:l})}}return I}}const Ff=null!=/x/.unicode?"gu":"g",Lf=new RegExp("[\0-\b\n--¬ü¬≠ÿú‚Äã‚Äé‚Äè\u2028\u2029\ufeffÔøπ-Ôøº]",Ff),Tf={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let zf=null;const Pf=Hy.define({combine(g){let I=Bw(g,{render:null,specialChars:Lf,addSpecialChars:null});return(I.replaceTabs=!function(){var g;if(null==zf&&"undefined"!=typeof document&&document.body){let I=document.body.style;zf=null!=(null!==(g=I.tabSize)&&void 0!==g?g:I.MozTabSize)}return zf||!1}())&&(I.specialChars=new RegExp("\t|"+I.specialChars.source,Ff)),I.addSpecialChars&&(I.specialChars=new RegExp(I.specialChars.source+"|"+I.addSpecialChars.source,Ff)),I}});function Uf(g={}){return[Pf.of(g),xf||(xf=wS.fromClass(class{constructor(g){this.view=g,this.decorations=qW.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(g.state.facet(Pf)),this.decorations=this.decorator.createDeco(g)}makeDecorator(g){return new Ef({regexp:g.specialChars,decoration:(I,A,C)=>{let{doc:t}=A.state,i=ey(I[0],0);if(9==i){let g=t.lineAt(C),I=A.state.tabSize,i=sy(g.text,I,C-g.from);return qW.replace({widget:new _f((I-i%I)*this.view.defaultCharacterWidth)})}return this.decorationCache[i]||(this.decorationCache[i]=qW.replace({widget:new jf(g,i)}))},boundary:g.replaceTabs?void 0:/[^]/})}update(g){let I=g.state.facet(Pf);g.startState.facet(Pf)!=I?(this.decorator=this.makeDecorator(I),this.decorations=this.decorator.createDeco(g.view)):this.decorations=this.decorator.updateDeco(g,this.decorations)}},{decorations:g=>g.decorations}))]}let xf=null;class jf extends _W{constructor(g,I){super(),this.options=g,this.code=I}eq(g){return g.code==this.code}toDOM(g){let I=(A=this.code)>=32?"‚Ä¢":10==A?"‚ê§":String.fromCharCode(9216+A);var A;let C=g.state.phrase("Control character")+" "+(Tf[this.code]||"0x"+this.code.toString(16)),t=this.options.render&&this.options.render(this.code,C,I);if(t)return t;let i=document.createElement("span");return i.textContent=I,i.title=C,i.setAttribute("aria-label",C),i.className="cm-specialChar",i}ignoreEvent(){return!1}}class _f extends _W{constructor(g){super(),this.width=g}eq(g){return g.width==this.width}toDOM(){let g=document.createElement("span");return g.textContent="\t",g.className="cm-tab",g.style.width=this.width+"px",g}ignoreEvent(){return!1}}function $f(){return gY}const qf=qW.line({attributes:{class:"cm-activeLine"}}),gY=wS.fromClass(class{constructor(g){this.decorations=this.getDeco(g)}update(g){(g.docChanged||g.selectionSet)&&(this.decorations=this.getDeco(g.view))}getDeco(g){let I=-1,A=[];for(let C of g.state.selection.ranges){if(!C.empty)return qW.none;let t=g.visualLineAt(C.head);t.from>I&&(A.push(qf.range(t.from)),I=t.from)}return qW.set(A)}},{decorations:g=>g.decorations}),IY=ew.define(),AY=ew.define(),CY=Hy.define(),tY=Hy.define({combine:g=>Bw(g,{minDepth:100,newGroupDelay:500},{minDepth:Math.max,newGroupDelay:Math.min})}),iY=Ny.define({create:()=>bY.empty,update(g,I){let A=I.state.facet(tY),C=I.annotation(IY);if(C){let t=cY.fromTransaction(I),i=C.side,e=0==i?g.undone:g.done;return e=t?aY(e,e.length,A.minDepth,t):mY(e,I.startState.selection),new bY(0==i?C.rest:e,0==i?e:C.rest)}let t=I.annotation(AY);if("full"!=t&&"before"!=t||(g=g.isolate()),!1===I.annotation(lw.addToHistory))return I.changes.empty?g:g.addMapping(I.changes.desc);let i=cY.fromTransaction(I),e=I.annotation(lw.time),o=I.annotation(lw.userEvent);return i?g=g.addChanges(i,e,o,A.newGroupDelay,A.minDepth):I.selection&&(g=g.addSelection(I.startState.selection,e,o,A.newGroupDelay)),"full"!=t&&"after"!=t||(g=g.isolate()),g},toJSON:g=>({done:g.done.map((g=>g.toJSON())),undone:g.undone.map((g=>g.toJSON()))}),fromJSON:g=>new bY(g.done.map(cY.fromJSON),g.undone.map(cY.fromJSON))});function eY(g={}){return[iY,tY.of(g),hf.domEventHandlers({beforeinput:(g,I)=>"historyUndo"==g.inputType?nY(I):"historyRedo"==g.inputType&&sY(I)})]}function oY(g,I){return function({state:A,dispatch:C}){let t=A.field(iY,!1);if(!t)return!1;let i=t.pop(g,A,I);return!!i&&(C(i),!0)}}const nY=oY(0,!1),sY=oY(1,!1),lY=oY(0,!0),rY=oY(1,!0);class cY{constructor(g,I,A,C,t){this.changes=g,this.effects=I,this.mapped=A,this.startSelection=C,this.selectionsAfter=t}setSelAfter(g){return new cY(this.changes,this.effects,this.mapped,this.startSelection,g)}toJSON(){var g,I,A;return{changes:null===(g=this.changes)||void 0===g?void 0:g.toJSON(),mapped:null===(I=this.mapped)||void 0===I?void 0:I.toJSON(),startSelection:null===(A=this.startSelection)||void 0===A?void 0:A.toJSON(),selectionsAfter:this.selectionsAfter.map((g=>g.toJSON()))}}static fromJSON(g){return new cY(g.changes&&yy.fromJSON(g.changes),[],g.mapped&&By.fromJSON(g.mapped),g.startSelection&&Vy.fromJSON(g.startSelection),g.selectionsAfter.map(Vy.fromJSON))}static fromTransaction(g){let I=hY;for(let A of g.startState.facet(CY)){let C=A(g);C.length&&(I=I.concat(C))}return!I.length&&g.changes.empty?null:new cY(g.changes.invert(g.startState.doc),I,void 0,g.startState.selection,hY)}static selection(g){return new cY(void 0,hY,void 0,void 0,g)}}function aY(g,I,A,C){let t=I+1>A+20?I-A-1:0,i=g.slice(t,I);return i.push(C),i}function dY(g,I){return g.length?I.length?g.concat(I):g:I}const hY=[];function mY(g,I){if(g.length){let A=g[g.length-1],C=A.selectionsAfter.slice(Math.max(0,A.selectionsAfter.length-200));return C.length&&C[C.length-1].eq(I)?g:(C.push(I),aY(g,g.length-1,1e9,A.setSelAfter(C)))}return[cY.selection([I])]}function ZY(g){let I=g[g.length-1],A=g.slice();return A[g.length-1]=I.setSelAfter(I.selectionsAfter.slice(0,I.selectionsAfter.length-1)),A}function uY(g,I){if(!g.length)return g;let A=g.length,C=hY;for(;A;){let t=GY(g[A-1],I,C);if(t.changes&&!t.changes.empty||t.effects.length){let I=g.slice(0,A);return I[A-1]=t,I}I=t.mapped,A--,C=t.selectionsAfter}return C.length?[cY.selection(C)]:hY}function GY(g,I,A){let C=dY(g.selectionsAfter.length?g.selectionsAfter.map((g=>g.map(I))):hY,A);if(!g.changes)return cY.selection(C);let t=g.changes.map(I),i=I.mapDesc(g.changes,!0),e=g.mapped?g.mapped.composeDesc(i):i;return new cY(t,sw.mapEffects(g.effects,I),e,g.startSelection.map(i),C)}class bY{constructor(g,I,A=0,C){this.done=g,this.undone=I,this.prevTime=A,this.prevUserEvent=C}isolate(){return this.prevTime?new bY(this.done,this.undone):this}addChanges(g,I,A,C,t){let i=this.done,e=i[i.length-1];return i=e&&e.changes&&!e.changes.empty&&g.changes&&(!e.selectionsAfter.length&&I-this.prevTime<C&&function(g,I){let A=[],C=!1;return g.iterChangedRanges(((g,I)=>A.push(g,I))),I.iterChangedRanges(((g,I,t,i)=>{for(let e=0;e<A.length;){let g=A[e++],I=A[e++];i>=g&&t<=I&&(C=!0)}})),C}(e.changes,g.changes)||"input.type.compose"==A)?aY(i,i.length-1,t,new cY(g.changes.compose(e.changes),dY(g.effects,e.effects),e.mapped,e.startSelection,hY)):aY(i,i.length,t,g),new bY(i,hY,I,A)}addSelection(g,I,A,C){let t=this.done.length?this.done[this.done.length-1].selectionsAfter:hY;return t.length>0&&I-this.prevTime<C&&A==this.prevUserEvent&&A&&/^select($|\.)/.test(A)&&(i=t[t.length-1],e=g,i.ranges.length==e.ranges.length&&0===i.ranges.filter(((g,I)=>g.empty!=e.ranges[I].empty)).length)?this:new bY(mY(this.done,g),this.undone,I,A);var i,e}addMapping(g){return new bY(uY(this.done,g),uY(this.undone,g),this.prevTime,this.prevUserEvent)}pop(g,I,A){let C=0==g?this.done:this.undone;if(0==C.length)return null;let t=C[C.length-1];if(A&&t.selectionsAfter.length)return I.update({selection:t.selectionsAfter[t.selectionsAfter.length-1],annotations:IY.of({side:g,rest:ZY(C)}),userEvent:0==g?"select.undo":"select.redo"});if(t.changes){let A=1==C.length?hY:C.slice(0,C.length-1);return t.mapped&&(A=uY(A,t.mapped)),I.update({changes:t.changes,selection:t.startSelection,effects:t.effects,annotations:IY.of({side:g,rest:A}),filter:!1,userEvent:0==g?"undo":"redo"})}return null}}bY.empty=new bY(hY,hY);const pY=[{key:"Mod-z",run:nY,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:sY,preventDefault:!0},{key:"Mod-u",run:lY,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:rY,preventDefault:!0}],BY=1024;let yY=0;class wY{constructor(g,I){this.from=g,this.to=I}}class WY{constructor(g={}){this.id=yY++,this.perNode=!!g.perNode,this.deserialize=g.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(g){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof g&&(g=KY.match(g)),I=>{let A=g(I);return void 0===A?null:[this,A]}}}WY.closedBy=new WY({deserialize:g=>g.split(" ")}),WY.openedBy=new WY({deserialize:g=>g.split(" ")}),WY.group=new WY({deserialize:g=>g.split(" ")}),WY.contextHash=new WY({perNode:!0}),WY.lookAhead=new WY({perNode:!0}),WY.mounted=new WY({perNode:!0});const SY=Object.create(null);class KY{constructor(g,I,A,C=0){this.name=g,this.props=I,this.id=A,this.flags=C}static define(g){let I=g.props&&g.props.length?Object.create(null):SY,A=(g.top?1:0)|(g.skipped?2:0)|(g.error?4:0)|(null==g.name?8:0),C=new KY(g.name||"",I,g.id,A);if(g.props)for(let t of g.props)if(Array.isArray(t)||(t=t(C)),t){if(t[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");I[t[0].id]=t[1]}return C}prop(g){return this.props[g.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(g){if("string"==typeof g){if(this.name==g)return!0;let I=this.prop(WY.group);return!!I&&I.indexOf(g)>-1}return this.id==g}static match(g){let I=Object.create(null);for(let A in g)for(let C of A.split(" "))I[C]=g[A];return g=>{for(let A=g.prop(WY.group),C=-1;C<(A?A.length:0);C++){let t=I[C<0?g.name:A[C]];if(t)return t}}}}KY.none=new KY("",Object.create(null),0,8);class fY{constructor(g){this.types=g;for(let I=0;I<g.length;I++)if(g[I].id!=I)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...g){let I=[];for(let A of this.types){let C=null;for(let I of g){let g=I(A);g&&(C||(C=Object.assign({},A.props)),C[g[0].id]=g[1])}I.push(C?new KY(A.name,C,A.id,A.flags):A)}return new fY(I)}}const YY=new WeakMap;class XY{constructor(g,I,A,C,t){if(this.type=g,this.children=I,this.positions=A,this.length=C,this.props=null,t&&t.length){this.props=Object.create(null);for(let[g,I]of t)this.props["number"==typeof g?g:g.id]=I}}toString(){let g=this.prop(WY.mounted);if(g&&!g.overlay)return g.tree.toString();let I="";for(let A of this.children){let g=A.toString();g&&(I&&(I+=","),I+=g)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(I.length?"("+I+")":""):I}cursor(g,I=0){let A=null!=g&&YY.get(this)||this.topNode,C=new DY(A);return null!=g&&(C.moveTo(g,I),YY.set(this,C._tree)),C}fullCursor(){return new DY(this.topNode,1)}get topNode(){return new HY(this,0,0,null)}resolve(g,I=0){return this.cursor(g,I).node}resolveInner(g,I=0){let A=this.topNode;for(;;){let C=A.enter(g,I);if(!C)return A;A=C}}iterate(g){let{enter:I,leave:A,from:C=0,to:t=this.length}=g;for(let i=this.cursor(),e=()=>i.node;;){let g=!1;if(i.from<=t&&i.to>=C&&(i.type.isAnonymous||!1!==I(i.type,i.from,i.to,e))){if(i.firstChild())continue;i.type.isAnonymous||(g=!0)}for(;g&&A&&A(i.type,i.from,i.to,e),g=i.type.isAnonymous,!i.nextSibling();){if(!i.parent())return;g=!0}}}prop(g){return g.perNode?this.props?this.props[g.id]:void 0:this.type.prop(g)}get propValues(){let g=[];if(this.props)for(let I in this.props)g.push([+I,this.props[I]]);return g}balance(g={}){return this.children.length<=8?this:FY(this.type,this.children,this.positions,0,this.children.length,0,this.length,((g,I,A)=>new XY(this.type,g,I,A,this.propValues)),g.makeTree||((g,I,A)=>new XY(KY.none,g,I,A)))}static build(g){return function(g){var I;let{buffer:A,nodeSet:C,maxBufferLength:t=BY,reused:i=[],minRepeatType:e=C.types.length}=g,o=Array.isArray(A)?new VY(A,A.length):A,n=C.types,s=0,l=0;function r(g,I,A,Z,u){let{id:G,start:b,end:p,size:B}=o,y=l;for(;B<0;){if(o.next(),-1==B){let I=i[G];return A.push(I),void Z.push(b-g)}if(-3==B)return void(s=G);if(-4==B)return void(l=G);throw new RangeError(`Unrecognized record size: ${B}`)}let w,W,S=n[G],K=b-g;if(p-b<=t&&(W=h(o.pos-I,u))){let I=new Uint16Array(W.size-W.skip),A=o.pos-W.size,t=I.length;for(;o.pos>A;)t=m(W.start,I,t);w=new OY(I,p-W.start,C),K=W.start-g}else{let g=o.pos-B;o.next();let I=[],A=[],C=G>=e?G:-1,i=0,n=p;for(;o.pos>g;)C>=0&&o.id==C&&o.size>=0?(o.end<=n-t&&(a(I,A,b,i,o.end,n,C,y),i=I.length,n=o.end),o.next()):r(b,g,I,A,C);if(C>=0&&i>0&&i<I.length&&a(I,A,b,i,b,n,C,y),I.reverse(),A.reverse(),C>-1&&i>0){let g=c(S);w=FY(S,I,A,0,I.length,0,p-b,g,g)}else w=d(S,I,A,p-b,y-p)}A.push(w),Z.push(K)}function c(g){return(I,A,C)=>{let t,i,e=0,o=I.length-1;if(o>=0&&(t=I[o])instanceof XY){if(!o&&t.type==g&&t.length==C)return t;(i=t.prop(WY.lookAhead))&&(e=A[o]+t.length+i)}return d(g,I,A,C,e)}}function a(g,I,A,t,i,e,o,n){let s=[],l=[];for(;g.length>t;)s.push(g.pop()),l.push(I.pop()+A-i);g.push(d(C.types[o],s,l,e-i,n-e)),I.push(i-A)}function d(g,I,A,C,t=0,i){if(s){let g=[WY.contextHash,s];i=i?[g].concat(i):[g]}if(t>25){let g=[WY.lookAhead,t];i=i?[g].concat(i):[g]}return new XY(g,I,A,C,i)}function h(g,I){let A=o.fork(),C=0,i=0,n=0,s=A.end-t,l={size:0,start:0,skip:0};g:for(let t=A.pos-g;A.pos>t;){let g=A.size;if(A.id==I&&g>=0){l.size=C,l.start=i,l.skip=n,n+=4,C+=4,A.next();continue}let o=A.pos-g;if(g<0||o<t||A.start<s)break;let r=A.id>=e?4:0,c=A.start;for(A.next();A.pos>o;){if(A.size<0){if(-3!=A.size)break g;r+=4}else A.id>=e&&(r+=4);A.next()}i=c,C+=g,n+=r}return(I<0||C==g)&&(l.size=C,l.start=i,l.skip=n),l.size>4?l:void 0}function m(g,I,A){let{id:C,start:t,end:i,size:n}=o;if(o.next(),n>=0&&C<e){let e=A;if(n>4){let C=o.pos-(n-4);for(;o.pos>C;)A=m(g,I,A)}I[--A]=e,I[--A]=i-g,I[--A]=t-g,I[--A]=C}else-3==n?s=C:-4==n&&(l=C);return A}let Z=[],u=[];for(;o.pos>0;)r(g.start||0,g.bufferStart||0,Z,u,-1);let G=null!==(I=g.length)&&void 0!==I?I:Z.length?u[0]+Z[0].length:0;return new XY(n[g.topID],Z.reverse(),u.reverse(),G)}(g)}}XY.empty=new XY(KY.none,[],[],0);class VY{constructor(g,I){this.buffer=g,this.index=I}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new VY(this.buffer,this.index)}}class OY{constructor(g,I,A){this.buffer=g,this.length=I,this.set=A}get type(){return KY.none}toString(){let g=[];for(let I=0;I<this.buffer.length;)g.push(this.childString(I)),I=this.buffer[I+3];return g.join(",")}childString(g){let I=this.buffer[g],A=this.buffer[g+3],C=this.set.types[I],t=C.name;if(/\W/.test(t)&&!C.isError&&(t=JSON.stringify(t)),A==(g+=4))return t;let i=[];for(;g<A;)i.push(this.childString(g)),g=this.buffer[g+3];return t+"("+i.join(",")+")"}findChild(g,I,A,C,t){let{buffer:i}=this,e=-1;for(let o=g;o!=I&&!(RY(t,C,i[o+1],i[o+2])&&(e=o,A>0));o=i[o+3]);return e}slice(g,I,A,C){let t=this.buffer,i=new Uint16Array(I-g);for(let e=g,o=0;e<I;)i[o++]=t[e++],i[o++]=t[e++]-A,i[o++]=t[e++]-A,i[o++]=t[e++]-g;return new OY(i,C-A,this.set)}}function RY(g,I,A,C){switch(g){case-2:return A<I;case-1:return C>=I&&A<I;case 0:return A<I&&C>I;case 1:return A<=I&&C>I;case 2:return C>I;case 4:return!0}}function QY(g,I){let A=g.childBefore(I);for(;A;){let I=A.lastChild;if(!I||I.to!=A.to)break;I.type.isError&&I.from==I.to?(g=A,A=I.prevSibling):A=I}return g}class HY{constructor(g,I,A,C){this.node=g,this._from=I,this.index=A,this._parent=C}get type(){return this.node.type}get name(){return this.node.type.name}get from(){return this._from}get to(){return this._from+this.node.length}nextChild(g,I,A,C,t=0){for(let i=this;;){for(let{children:e,positions:o}=i.node,n=I>0?e.length:-1;g!=n;g+=I){let n=e[g],s=o[g]+i._from;if(RY(C,A,s,s+n.length))if(n instanceof OY){if(2&t)continue;let e=n.findChild(0,n.buffer.length,I,A-s,C);if(e>-1)return new vY(new JY(i,n,g,s),null,e)}else if(1&t||!n.type.isAnonymous||MY(n)){let e;if(n.props&&(e=n.prop(WY.mounted))&&!e.overlay)return new HY(e.tree,s,g,i);let o=new HY(n,s,g,i);return 1&t||!o.type.isAnonymous?o:o.nextChild(I<0?n.children.length-1:0,I,A,C)}}if(1&t||!i.type.isAnonymous)return null;if(g=i.index>=0?i.index+I:I<0?-1:i._parent.node.children.length,i=i._parent,!i)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this.node.children.length-1,-1,0,4)}childAfter(g){return this.nextChild(0,1,g,2)}childBefore(g){return this.nextChild(this.node.children.length-1,-1,g,-2)}enter(g,I,A=!0,C=!0){let t;if(A&&(t=this.node.prop(WY.mounted))&&t.overlay){let A=g-this.from;for(let{from:g,to:C}of t.overlay)if((I>0?g<=A:g<A)&&(I<0?C>=A:C>A))return new HY(t.tree,t.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,g,I,C?0:2)}nextSignificantParent(){let g=this;for(;g.type.isAnonymous&&g._parent;)g=g._parent;return g}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get cursor(){return new DY(this)}get tree(){return this.node}toTree(){return this.node}resolve(g,I=0){return this.cursor.moveTo(g,I).node}enterUnfinishedNodesBefore(g){return QY(this,g)}getChild(g,I=null,A=null){let C=kY(this,g,I,A);return C.length?C[0]:null}getChildren(g,I=null,A=null){return kY(this,g,I,A)}toString(){return this.node.toString()}}function kY(g,I,A,C){let t=g.cursor,i=[];if(!t.firstChild())return i;if(null!=A)for(;!t.type.is(A);)if(!t.nextSibling())return i;for(;;){if(null!=C&&t.type.is(C))return i;if(t.type.is(I)&&i.push(t.node),!t.nextSibling())return null==C?i:[]}}class JY{constructor(g,I,A,C){this.parent=g,this.buffer=I,this.index=A,this.start=C}}class vY{constructor(g,I,A){this.context=g,this._parent=I,this.index=A,this.type=g.buffer.set.types[g.buffer.buffer[A]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(g,I,A){let{buffer:C}=this.context,t=C.findChild(this.index+4,C.buffer[this.index+3],g,I-this.context.start,A);return t<0?null:new vY(this.context,this,t)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(g){return this.child(1,g,2)}childBefore(g){return this.child(-1,g,-2)}enter(g,I,A,C=!0){if(!C)return null;let{buffer:t}=this.context,i=t.findChild(this.index+4,t.buffer[this.index+3],I>0?1:-1,g-this.context.start,I);return i<0?null:new vY(this.context,this,i)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(g){return this._parent?null:this.context.parent.nextChild(this.context.index+g,g,0,4)}get nextSibling(){let{buffer:g}=this.context,I=g.buffer[this.index+3];return I<(this._parent?g.buffer[this._parent.index+3]:g.buffer.length)?new vY(this.context,this._parent,I):this.externalSibling(1)}get prevSibling(){let{buffer:g}=this.context,I=this._parent?this._parent.index+4:0;return this.index==I?this.externalSibling(-1):new vY(this.context,this._parent,g.findChild(I,this.index,-1,0,4))}get cursor(){return new DY(this)}get tree(){return null}toTree(){let g=[],I=[],{buffer:A}=this.context,C=this.index+4,t=A.buffer[this.index+3];if(t>C){let i=A.buffer[this.index+1],e=A.buffer[this.index+2];g.push(A.slice(C,t,i,e)),I.push(0)}return new XY(this.type,g,I,this.to-this.from)}resolve(g,I=0){return this.cursor.moveTo(g,I).node}enterUnfinishedNodesBefore(g){return QY(this,g)}toString(){return this.context.buffer.childString(this.index)}getChild(g,I=null,A=null){let C=kY(this,g,I,A);return C.length?C[0]:null}getChildren(g,I=null,A=null){return kY(this,g,I,A)}}class DY{constructor(g,I=0){if(this.mode=I,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,g instanceof HY)this.yieldNode(g);else{this._tree=g.context.parent,this.buffer=g.context;for(let I=g._parent;I;I=I._parent)this.stack.unshift(I.index);this.bufferNode=g,this.yieldBuf(g.index)}}get name(){return this.type.name}yieldNode(g){return!!g&&(this._tree=g,this.type=g.type,this.from=g.from,this.to=g.to,!0)}yieldBuf(g,I){this.index=g;let{start:A,buffer:C}=this.buffer;return this.type=I||C.set.types[C.buffer[g]],this.from=A+C.buffer[g+1],this.to=A+C.buffer[g+2],!0}yield(g){return!!g&&(g instanceof HY?(this.buffer=null,this.yieldNode(g)):(this.buffer=g.context,this.yieldBuf(g.index,g.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(g,I,A){if(!this.buffer)return this.yield(this._tree.nextChild(g<0?this._tree.node.children.length-1:0,g,I,A,this.mode));let{buffer:C}=this.buffer,t=C.findChild(this.index+4,C.buffer[this.index+3],g,I-this.buffer.start,A);return!(t<0)&&(this.stack.push(this.index),this.yieldBuf(t))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(g){return this.enterChild(1,g,2)}childBefore(g){return this.enterChild(-1,g,-2)}enter(g,I,A=!0,C=!0){return this.buffer?!!C&&this.enterChild(1,g,I):this.yield(this._tree.enter(g,I,A,C))}parent(){if(!this.buffer)return this.yieldNode(1&this.mode?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let g=1&this.mode?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(g)}sibling(g){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+g,g,0,4,this.mode));let{buffer:I}=this.buffer,A=this.stack.length-1;if(g<0){let g=A<0?0:this.stack[A]+4;if(this.index!=g)return this.yieldBuf(I.findChild(g,this.index,-1,0,4))}else{let g=I.buffer[this.index+3];if(g<(A<0?I.buffer.length:I.buffer[this.stack[A]+3]))return this.yieldBuf(g)}return A<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+g,g,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(g){let I,A,{buffer:C}=this;if(C){if(g>0){if(this.index<C.buffer.buffer.length)return!1}else for(let g=0;g<this.index;g++)if(C.buffer.buffer[g+3]<this.index)return!1;({index:I,parent:A}=C)}else({index:I,_parent:A}=this._tree);for(;A;({index:I,_parent:A}=A))if(I>-1)for(let C=I+g,t=g<0?-1:A.node.children.length;C!=t;C+=g){let g=A.node.children[C];if(1&this.mode||g instanceof OY||!g.type.isAnonymous||MY(g))return!1}return!0}move(g,I){if(I&&this.enterChild(g,0,4))return!0;for(;;){if(this.sibling(g))return!0;if(this.atLastNode(g)||!this.parent())return!1}}next(g=!0){return this.move(1,g)}prev(g=!0){return this.move(-1,g)}moveTo(g,I=0){for(;(this.from==this.to||(I<1?this.from>=g:this.from>g)||(I>-1?this.to<=g:this.to<g))&&this.parent(););for(;this.enterChild(1,g,I););return this}get node(){if(!this.buffer)return this._tree;let g=this.bufferNode,I=null,A=0;if(g&&g.context==this.buffer)g:for(let C=this.index,t=this.stack.length;t>=0;){for(let i=g;i;i=i._parent)if(i.index==C){if(C==this.index)return i;I=i,A=t+1;break g}C=this.stack[--t]}for(let C=A;C<this.stack.length;C++)I=new vY(this.buffer,I,this.stack[C]);return this.bufferNode=new vY(this.buffer,I,this.index)}get tree(){return this.buffer?null:this._tree.node}}function MY(g){return g.children.some((g=>g instanceof OY||!g.type.isAnonymous||MY(g)))}const NY=new WeakMap;function EY(g,I){if(!g.isAnonymous||I instanceof OY||I.type!=g)return 1;let A=NY.get(I);return null==A&&(A=I.children.reduce(((I,A)=>I+EY(g,A)),1),NY.set(I,A)),A}function FY(g,I,A,C,t,i,e,o,n){let s=0;for(let a=C;a<t;a++)s+=EY(g,I[a]);let l=Math.ceil(1.5*s/8),r=[],c=[];return function I(A,C,t,e,o){for(let s=t;s<e;){let t=s,a=C[s],d=EY(g,A[s]);for(s++;s<e;s++){let I=EY(g,A[s]);if(d+I>=l)break;d+=I}if(s==t+1){if(d>l){let g=A[t];I(g.children,g.positions,0,g.children.length,C[t]+o);continue}r.push(A[t])}else{let I=C[s-1]+A[s-1].length-a;r.push(FY(g,A,C,t,s,a,I,null,n))}c.push(a+o-i)}}(I,A,C,t,0),(o||n)(r,c,e)}class LY{constructor(g,I,A,C,t=!1,i=!1){this.from=g,this.to=I,this.tree=A,this.offset=C,this.open=(t?1:0)|(i?2:0)}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(g,I=[],A=!1){let C=[new LY(0,g.length,g,0,!1,A)];for(let t of I)t.to>g.length&&C.push(t);return C}static applyChanges(g,I,A=128){if(!I.length)return g;let C=[],t=1,i=g.length?g[0]:null;for(let e=0,o=0,n=0;;e++){let s=e<I.length?I[e]:null,l=s?s.fromA:1e9;if(l-o>=A)for(;i&&i.from<l;){let I=i;if(o>=I.from||l<=I.to||n){let g=Math.max(I.from,o)-n,A=Math.min(I.to,l)-n;I=g>=A?null:new LY(g,A,I.tree,I.offset+n,e>0,!!s)}if(I&&C.push(I),i.to>l)break;i=t<g.length?g[t++]:null}if(!s)break;o=s.toA,n=s.toA-s.toB}return C}}class TY{startParse(g,I,A){return"string"==typeof g&&(g=new zY(g)),A=A?A.length?A.map((g=>new wY(g.from,g.to))):[new wY(0,0)]:[new wY(0,g.length)],this.createParse(g,I||[],A)}parse(g,I,A){let C=this.startParse(g,I,A);for(;;){let g=C.advance();if(g)return g}}}class zY{constructor(g){this.string=g}get length(){return this.string.length}chunk(g){return this.string.slice(g)}get lineChunks(){return!1}read(g,I){return this.string.slice(g,I)}}const PY=new WY;class UY{constructor(g,I,A,C=[]){this.data=g,this.topNode=A,pw.prototype.hasOwnProperty("tree")||Object.defineProperty(pw.prototype,"tree",{get(){return _Y(this)}}),this.parser=I,this.extension=[eX.of(this),pw.languageData.of(((g,I,A)=>g.facet(xY(g,I,A))))].concat(C)}isActiveAt(g,I,A=-1){return xY(g,I,A)==this.data}findRegions(g){let I=g.facet(eX);if((null==I?void 0:I.data)==this.data)return[{from:0,to:g.doc.length}];if(!I||!I.allowsNesting)return[];let A=[],C=(g,I)=>{if(g.prop(PY)==this.data)return void A.push({from:I,to:I+g.length});let t=g.prop(WY.mounted);if(t){if(t.tree.prop(PY)==this.data){if(t.overlay)for(let g of t.overlay)A.push({from:g.from+I,to:g.to+I});else A.push({from:I,to:I+g.length});return}if(t.overlay){let g=A.length;if(C(t.tree,t.overlay[0].from+I),A.length>g)return}}for(let A=0;A<g.children.length;A++){let t=g.children[A];t instanceof XY&&C(t,g.positions[A]+I)}};return C(_Y(g),0),A}get allowsNesting(){return!0}}function xY(g,I,A){let C=g.facet(eX);if(!C)return null;let t=C.data;if(C.allowsNesting)for(let i=_Y(g).topNode;i;i=i.enter(I,A,!0,!1))t=i.type.prop(PY)||t;return t}UY.setState=sw.define();class jY extends UY{constructor(g,I){super(g,I,I.topNode),this.parser=I}static define(g){let I=(A=g.languageData,Hy.define({combine:A?g=>g.concat(A):void 0}));var A;return new jY(I,g.parser.configure({props:[PY.add((g=>g.isTop?I:void 0))]}))}configure(g){return new jY(this.data,this.parser.configure(g))}get allowsNesting(){return this.parser.wrappers.length>0}}function _Y(g){let I=g.field(UY.state,!1);return I?I.tree:XY.empty}class $Y{constructor(g,I=g.length){this.doc=g,this.length=I,this.cursorPos=0,this.string="",this.cursor=g.iter()}syncTo(g){return this.string=this.cursor.next(g-this.cursorPos).value,this.cursorPos=g+this.string.length,this.cursorPos-this.string.length}chunk(g){return this.syncTo(g),this.string}get lineChunks(){return!0}read(g,I){let A=this.cursorPos-this.string.length;return g<A||I>=this.cursorPos?this.doc.sliceString(g,I):this.string.slice(g-A,I-A)}}let qY=null;class gX{constructor(g,I,A=[],C,t,i,e,o){this.parser=g,this.state=I,this.fragments=A,this.tree=C,this.treeLen=t,this.viewport=i,this.skipped=e,this.scheduleOn=o,this.parse=null,this.tempSkipped=[]}startParse(){return this.parser.startParse(new $Y(this.state.doc),this.fragments)}work(g,I){return null!=I&&I>=this.state.doc.length&&(I=void 0),this.tree!=XY.empty&&this.isDone(null!=I?I:this.state.doc.length)?(this.takeTree(),!0):this.withContext((()=>{var A;this.parse||(this.parse=this.startParse()),null!=I&&(null==this.parse.stoppedAt||this.parse.stoppedAt>I)&&I<this.state.doc.length&&this.parse.stopAt(I);let C=Date.now()+g;for(;;){let g=this.parse.advance();if(g){if(this.fragments=this.withoutTempSkipped(LY.addTree(g,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(A=this.parse.stoppedAt)&&void 0!==A?A:this.state.doc.length,this.tree=g,this.parse=null,!(this.treeLen<(null!=I?I:this.state.doc.length)))return!0;this.parse=this.startParse()}if(Date.now()>C)return!1}}))}takeTree(){let g,I;this.parse&&(g=this.parse.parsedPos)>this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>g)&&this.parse.stopAt(g),this.withContext((()=>{for(;!(I=this.parse.advance()););})),this.tree=I,this.fragments=this.withoutTempSkipped(LY.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(g){let I=qY;qY=this;try{return g()}finally{qY=I}}withoutTempSkipped(g){for(let I;I=this.tempSkipped.pop();)g=IX(g,I.from,I.to);return g}changes(g,I){let{fragments:A,tree:C,treeLen:t,viewport:i,skipped:e}=this;if(this.takeTree(),!g.empty){let I=[];if(g.iterChangedRanges(((g,A,C,t)=>I.push({fromA:g,toA:A,fromB:C,toB:t}))),A=LY.applyChanges(A,I),C=XY.empty,t=0,i={from:g.mapPos(i.from,-1),to:g.mapPos(i.to,1)},this.skipped.length){e=[];for(let I of this.skipped){let A=g.mapPos(I.from,1),C=g.mapPos(I.to,-1);A<C&&e.push({from:A,to:C})}}}return new gX(this.parser,I,A,C,t,i,e,this.scheduleOn)}updateViewport(g){if(this.viewport.from==g.from&&this.viewport.to==g.to)return!1;this.viewport=g;let I=this.skipped.length;for(let A=0;A<this.skipped.length;A++){let{from:I,to:C}=this.skipped[A];I<g.to&&C>g.from&&(this.fragments=IX(this.fragments,I,C),this.skipped.splice(A--,1))}return!(this.skipped.length>=I)&&(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(g,I){this.skipped.push({from:g,to:I})}static getSkippingParser(g){return new class extends TY{createParse(I,A,C){let t=C[0].from,i=C[C.length-1].to;return{parsedPos:t,advance(){let I=qY;if(I){for(let g of C)I.tempSkipped.push(g);g&&(I.scheduleOn=I.scheduleOn?Promise.all([I.scheduleOn,g]):g)}return this.parsedPos=i,new XY(KY.none,[],[],i-t)},stoppedAt:null,stopAt(){}}}}}movedPast(g){return this.treeLen<g&&this.parse&&this.parse.parsedPos>=g}isDone(g){let I=this.fragments;return this.treeLen>=g&&I.length&&0==I[0].from&&I[0].to>=g}static get(){return qY}}function IX(g,I,A){return LY.applyChanges(g,[{fromA:I,toA:A,fromB:I,toB:A}])}class AX{constructor(g){this.context=g,this.tree=g.tree}apply(g){if(!g.docChanged)return this;let I=this.context.changes(g.changes,g.state),A=this.context.treeLen==g.startState.doc.length?void 0:Math.max(g.changes.mapPos(this.context.treeLen),I.viewport.to);return I.work(25,A)||I.takeTree(),new AX(I)}static init(g){let I=new gX(g.facet(eX).parser,g,[],XY.empty,0,{from:0,to:g.doc.length},[],null);return I.work(25)||I.takeTree(),new AX(I)}}UY.state=Ny.define({create:AX.init,update(g,I){for(let A of I.effects)if(A.is(UY.setState))return A.value;return I.startState.facet(eX)!=I.state.facet(eX)?AX.init(I.state):g.apply(I)}});let CX="undefined"!=typeof window&&window.requestIdleCallback||((g,{timeout:I})=>setTimeout(g,I)),tX="undefined"!=typeof window&&window.cancelIdleCallback||clearTimeout;const iX=wS.fromClass(class{constructor(g){this.view=g,this.working=-1,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(g){let I=this.view.state.field(UY.state).context;(I.updateViewport(g.view.viewport)||this.view.viewport.to>I.treeLen)&&this.scheduleWork(),g.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(I)}scheduleWork(){if(this.working>-1)return;let{state:g}=this.view,I=g.field(UY.state);I.tree==I.context.tree&&I.context.isDone(g.doc.length)||(this.working=CX(this.work,{timeout:500}))}work(g){this.working=-1;let I=Date.now();if(this.chunkEnd<I&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=I+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:A,viewport:{to:C}}=this.view,t=A.field(UY.state);if(t.tree==t.context.tree&&t.context.treeLen>=C+1e6)return;let i=Math.min(this.chunkBudget,g?Math.max(25,g.timeRemaining()):100),e=t.context.work(i,C+1e6);this.chunkBudget-=Date.now()-I,(e||this.chunkBudget<=0||t.context.movedPast(C))&&(t.context.takeTree(),this.view.dispatch({effects:UY.setState.of(new AX(t.context))})),!e&&this.chunkBudget>0&&this.scheduleWork(),this.checkAsyncSchedule(t.context)}checkAsyncSchedule(g){g.scheduleOn&&(g.scheduleOn.then((()=>this.scheduleWork())),g.scheduleOn=null)}destroy(){this.working>=0&&tX(this.working)}},{eventHandlers:{focus(){this.scheduleWork()}}}),eX=Hy.define({combine:g=>g.length?g[0]:null,enables:[UY.state,iX]});class oX{constructor(g,I=[]){this.language=g,this.support=I,this.extension=[g,I]}}const nX=Hy.define(),sX=Hy.define({combine:g=>{if(!g.length)return"  ";if(!/^(?: +|\t+)$/.test(g[0]))throw new Error("Invalid indent unit: "+JSON.stringify(g[0]));return g[0]}});function lX(g){let I=g.facet(sX);return 9==I.charCodeAt(0)?g.tabSize*I.length:I.length}function rX(g,I){let A="",C=g.tabSize;if(9==g.facet(sX).charCodeAt(0))for(;I>=C;)A+="\t",I-=C;for(let t=0;t<I;t++)A+=" ";return A}function cX(g,I){g instanceof pw&&(g=new aX(g));for(let C of g.state.facet(nX)){let A=C(g,I);if(null!=A)return A}let A=_Y(g.state);return A?function(g,I,A){return mX(I.resolveInner(A).enterUnfinishedNodesBefore(A),A,g)}(g,A,I):null}class aX{constructor(g,I={}){this.state=g,this.options=I,this.unit=lX(g)}lineAt(g,I=1){let A=this.state.doc.lineAt(g),{simulateBreak:C}=this.options;return null!=C&&C>=A.from&&C<=A.to?(I<0?C<g:C<=g)?{text:A.text.slice(C-A.from),from:C}:{text:A.text.slice(0,C-A.from),from:A.from}:A}textAfterPos(g,I=1){if(this.options.simulateDoubleBreak&&g==this.options.simulateBreak)return"";let{text:A,from:C}=this.lineAt(g,I);return A.slice(g-C,Math.min(A.length,g+100-C))}column(g,I=1){let{text:A,from:C}=this.lineAt(g,I),t=this.countColumn(A,g-C),i=this.options.overrideIndentation?this.options.overrideIndentation(C):-1;return i>-1&&(t+=i-this.countColumn(A,A.search(/\S|$/))),t}countColumn(g,I=g.length){return sy(g,this.state.tabSize,I)}lineIndent(g,I=1){let{text:A,from:C}=this.lineAt(g,I),t=this.options.overrideIndentation;if(t){let g=t(C);if(g>-1)return g}return this.countColumn(A,A.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const dX=new WY;function hX(g){let I=g.type.prop(dX);if(I)return I;let A,C=g.firstChild;if(C&&(A=C.type.prop(WY.closedBy))){let I=g.lastChild,C=I&&A.indexOf(I.name)>-1;return g=>pX(g,!0,1,void 0,C&&!function(g){return g.pos==g.options.simulateBreak&&g.options.simulateDoubleBreak}(g)?I.from:void 0)}return null==g.parent?ZX:null}function mX(g,I,A){for(;g;g=g.parent){let C=hX(g);if(C)return C(new uX(A,I,g))}return null}function ZX(){return 0}class uX extends aX{constructor(g,I,A){super(g.state,g.options),this.base=g,this.pos=I,this.node=A}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let g=this.state.doc.lineAt(this.node.from);for(;;){let I=this.node.resolve(g.from);for(;I.parent&&I.parent.from==I.from;)I=I.parent;if(GX(I,this.node))break;g=this.state.doc.lineAt(I.from)}return this.lineIndent(g.from)}continue(){let g=this.node.parent;return g?mX(g,this.pos,this.base):0}}function GX(g,I){for(let A=I;A;A=A.parent)if(g==A)return!0;return!1}function bX({closing:g,align:I=!0,units:A=1}){return C=>pX(C,I,A,g)}function pX(g,I,A,C,t){let i=g.textAfter,e=i.match(/^\s*/)[0].length,o=C&&i.slice(e,e+C.length)==C||t==g.pos+e,n=I?function(g){let I=g.node,A=I.childAfter(I.from),C=I.lastChild;if(!A)return null;let t=g.options.simulateBreak,i=g.state.doc.lineAt(A.from),e=null==t||t<=i.from?i.to:Math.min(i.to,t);for(let o=A.to;;){let g=I.childAfter(o);if(!g||g==C)return null;if(!g.type.isSkipped)return g.from<e?A:null;o=g.to}}(g):null;return n?o?g.column(n.from):g.column(n.to):g.baseIndent+(o?0:g.unit*A)}const BX=g=>g.baseIndent;function yX({except:g,units:I=1}={}){return A=>{let C=g&&g.test(A.textAfter);return A.baseIndent+(C?0:I*A.unit)}}function wX(){return pw.transactionFilter.of((g=>{if(!g.docChanged||!g.isUserEvent("input.type"))return g;let I=g.startState.languageDataAt("indentOnInput",g.startState.selection.main.head);if(!I.length)return g;let A=g.newDoc,{head:C}=g.newSelection.main,t=A.lineAt(C);if(C>t.from+200)return g;let i=A.sliceString(t.from,C);if(!I.some((g=>g.test(i))))return g;let{state:e}=g,o=-1,n=[];for(let{head:s}of e.selection.ranges){let g=e.doc.lineAt(s);if(g.from==o)continue;o=g.from;let I=cX(e,g.from);if(null==I)continue;let A=/^\s*/.exec(g.text)[0],C=rX(e,I);A!=C&&n.push({from:g.from,to:g.from+A.length,insert:C})}return n.length?[g,{changes:n,sequential:!0}]:g}))}const WX=Hy.define(),SX=new WY;function KX(g){let I=g.firstChild,A=g.lastChild;return I&&I.to<A.from?{from:I.to,to:A.type.isError?g.to:A.from}:null}function fX(g,I,A){for(let C of g.facet(WX)){let t=C(g,I,A);if(t)return t}return function(g,I,A){let C=_Y(g);if(0==C.length)return null;let t=null;for(let i=C.resolveInner(A);i;i=i.parent){if(i.to<=A||i.from>A)continue;if(t&&i.from<I)break;let C=i.type.prop(SX);if(C){let e=C(i,g);e&&e.from<=A&&e.from>=I&&e.to>A&&(t=e)}}return t}(g,I,A)}class YX extends Yw{compare(g){return this==g||this.constructor==g.constructor&&this.eq(g)}eq(g){return!1}}YX.prototype.elementClass="",YX.prototype.toDOM=void 0,YX.prototype.mapMode=py.TrackBefore,YX.prototype.startSide=YX.prototype.endSide=-1,YX.prototype.point=!0;const XX=Hy.define(),VX={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Rw.empty,lineMarker:()=>null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},OX=Hy.define();function RX(g){return[kX(),OX.of(Object.assign(Object.assign({},VX),g))]}const QX=hf.baseTheme({".cm-gutters":{display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#999",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",height:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"}}),HX=Hy.define({combine:g=>g.some((g=>g))});function kX(g){let I=[JX,QX];return g&&!1===g.fixed&&I.push(HX.of(!0)),I}const JX=wS.fromClass(class{constructor(g){this.view=g,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.gutters=g.state.facet(OX).map((I=>new NX(g,I)));for(let I of this.gutters)this.dom.appendChild(I.dom);this.fixed=!g.state.facet(HX),this.fixed&&(this.dom.style.position="sticky"),g.scrollDOM.insertBefore(this.dom,g.contentDOM),this.syncGutters()}update(g){this.updateGutters(g)&&this.syncGutters()}syncGutters(){let g=Rw.iter(this.view.state.facet(XX),this.view.viewport.from),I=[],A=this.gutters.map((g=>new MX(g,this.view.viewport)));this.view.viewportLines((C=>{let t;if(Array.isArray(C.type)){for(let g of C.type)if(g.type==$W.Text){t=g;break}}else t=C.type==$W.Text?C:void 0;if(t){I.length&&(I=[]),DX(g,I,C.from);for(let g of A)g.line(this.view,t,I)}}),0);for(let C of A)C.finish();this.dom.style.minHeight=this.view.contentHeight+"px",this.view.state.facet(HX)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"")}updateGutters(g){let I=g.startState.facet(OX),A=g.state.facet(OX),C=g.docChanged||g.heightChanged||g.viewportChanged||!Rw.eq(g.startState.facet(XX),g.state.facet(XX),g.view.viewport.from,g.view.viewport.to);if(I==A)for(let t of this.gutters)t.update(g)&&(C=!0);else{C=!0;let t=[];for(let C of A){let A=I.indexOf(C);A<0?t.push(new NX(this.view,C)):(this.gutters[A].update(g),t.push(this.gutters[A]))}for(let g of this.gutters)g.dom.remove();for(let g of t)this.dom.appendChild(g.dom);this.gutters=t}return C}destroy(){this.dom.remove()}},{provide:pS.scrollMargins.from((g=>0!=g.gutters.length&&g.fixed?g.view.textDirection==vS.LTR?{left:g.dom.offsetWidth}:{right:g.dom.offsetWidth}:null))});function vX(g){return Array.isArray(g)?g:[g]}function DX(g,I,A){for(;g.value&&g.from<=A;)g.from==A&&I.push(g.value),g.next()}class MX{constructor(g,I){this.gutter=g,this.localMarkers=[],this.i=0,this.height=0,this.cursor=Rw.iter(g.markers,I.from)}line(g,I,A){this.localMarkers.length&&(this.localMarkers=[]),DX(this.cursor,this.localMarkers,I.from);let C=A.length?this.localMarkers.concat(A):this.localMarkers,t=this.gutter.config.lineMarker(g,I,C);t&&C.unshift(t);let i=this.gutter;if(0==C.length&&!i.config.renderEmptyElements)return;let e=I.top-this.height;if(this.i==i.elements.length){let A=new EX(g,I.height,e,C);i.elements.push(A),i.dom.appendChild(A.dom)}else{let A=i.elements[this.i];(function(g,I){if(g.length!=I.length)return!1;for(let A=0;A<g.length;A++)if(!g[A].compare(I[A]))return!1;return!0})(C,A.markers)&&(C=A.markers),A.update(g,I.height,e,C)}this.height=I.bottom,this.i++}finish(){let g=this.gutter;for(;g.elements.length>this.i;)g.dom.removeChild(g.elements.pop().dom)}}class NX{constructor(g,I){this.view=g,this.config=I,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let A in I.domEventHandlers)this.dom.addEventListener(A,(C=>{let t=g.visualLineAtHeight(C.clientY,g.contentDOM.getBoundingClientRect().top);I.domEventHandlers[A](g,t,C)&&C.preventDefault()}));this.markers=vX(I.markers(g)),I.initialSpacer&&(this.spacer=new EX(g,0,0,[I.initialSpacer(g)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(g){let I=this.markers;if(this.markers=vX(this.config.markers(g.view)),this.spacer&&this.config.updateSpacer){let I=this.config.updateSpacer(this.spacer.markers[0],g);I!=this.spacer.markers[0]&&this.spacer.update(g.view,0,0,[I])}let A=g.view.viewport;return!Rw.eq(this.markers,I,A.from,A.to)}}class EX{constructor(g,I,A,C){this.height=-1,this.above=0,this.dom=document.createElement("div"),this.update(g,I,A,C)}update(g,I,A,C){if(this.height!=I&&(this.dom.style.height=(this.height=I)+"px"),this.above!=A&&(this.dom.style.marginTop=(this.above=A)?A+"px":""),this.markers!=C){this.markers=C;for(let g;g=this.dom.lastChild;)g.remove();let I="cm-gutterElement";for(let A of C){A.toDOM&&this.dom.appendChild(A.toDOM(g));let C=A.elementClass;C&&(I+=" "+C)}this.dom.className=I}}}const FX=Hy.define(),LX=Hy.define({combine:g=>Bw(g,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(g,I){let A=Object.assign({},g);for(let C in I){let g=A[C],t=I[C];A[C]=g?(I,A,C)=>g(I,A,C)||t(I,A,C):t}return A}})});class TX extends YX{constructor(g){super(),this.number=g}eq(g){return this.number==g.number}toDOM(g){return document.createTextNode(this.number)}}function zX(g,I){return g.state.facet(LX).formatNumber(I,g.state)}const PX=OX.compute([LX],(g=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers:g=>g.state.facet(FX),lineMarker:(g,I,A)=>A.some((g=>g.toDOM))?null:new TX(zX(g,g.state.doc.lineAt(I.from).number)),initialSpacer:g=>new TX(zX(g,xX(g.state.doc.lines))),updateSpacer(g,I){let A=zX(I.view,xX(I.view.state.doc.lines));return A==g.number?g:new TX(A)},domEventHandlers:g.facet(LX).domEventHandlers})));function UX(g={}){return[LX.of(g),kX(),PX]}function xX(g){let I=9;for(;I<g;)I=10*I+9;return I}const jX=new class extends YX{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},_X=XX.compute(["selection"],(g=>{let I=[],A=-1;for(let C of g.selection.ranges)if(C.empty){let t=g.doc.lineAt(C.head).from;t>A&&(A=t,I.push(jX.range(t)))}return Rw.of(I)}));function $X(){return _X}function qX(g,I){let A=I.mapPos(g.from,1),C=I.mapPos(g.to,-1);return A>=C?void 0:{from:A,to:C}}const gV=sw.define({map:qX}),IV=sw.define({map:qX});function AV(g){let I=[];for(let{head:A}of g.state.selection.ranges)I.some((g=>g.from<=A&&g.to>=A))||I.push(g.visualLineAt(A));return I}const CV=Ny.define({create:()=>qW.none,update(g,I){g=g.map(I.changes);for(let A of I.effects)A.is(gV)&&!iV(g,A.value.from,A.value.to)?g=g.update({add:[cV.range(A.value.from,A.value.to)]}):A.is(IV)&&(g=g.update({filter:(g,I)=>A.value.from!=g||A.value.to!=I,filterFrom:A.value.from,filterTo:A.value.to}));if(I.selection){let A=!1,{head:C}=I.selection.main;g.between(C,C,((g,I)=>{g<C&&I>C&&(A=!0)})),A&&(g=g.update({filterFrom:C,filterTo:C,filter:(g,I)=>I<=C||g>=C}))}return g},provide:g=>hf.decorations.from(g)});function tV(g,I,A){var C;let t=null;return null===(C=g.field(CV,!1))||void 0===C||C.between(I,A,((g,I)=>{(!t||t.from>g)&&(t={from:g,to:I})})),t}function iV(g,I,A){let C=!1;return g.between(I,I,((g,t)=>{g==I&&t==A&&(C=!0)})),C}function eV(g,I){return g.field(CV,!1)?I:I.concat(sw.appendConfig.of(rV()))}function oV(g,I,A=!0){let C=g.state.doc.lineAt(I.from).number,t=g.state.doc.lineAt(I.to).number;return hf.announce.of(`${g.state.phrase(A?"Folded lines":"Unfolded lines")} ${C} ${g.state.phrase("to")} ${t}.`)}const nV=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:g=>{for(let I of AV(g)){let A=fX(g.state,I.from,I.to);if(A)return g.dispatch({effects:eV(g.state,[gV.of(A),oV(g,A)])}),!0}return!1}},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:g=>{if(!g.state.field(CV,!1))return!1;let I=[];for(let A of AV(g)){let C=tV(g.state,A.from,A.to);C&&I.push(IV.of(C),oV(g,C,!1))}return I.length&&g.dispatch({effects:I}),I.length>0}},{key:"Ctrl-Alt-[",run:g=>{let{state:I}=g,A=[];for(let C=0;C<I.doc.length;){let t=g.visualLineAt(C),i=fX(I,t.from,t.to);i&&A.push(gV.of(i)),C=(i?g.visualLineAt(i.to):t).to+1}return A.length&&g.dispatch({effects:eV(g.state,A)}),!!A.length}},{key:"Ctrl-Alt-]",run:g=>{let I=g.state.field(CV,!1);if(!I||!I.size)return!1;let A=[];return I.between(0,g.state.doc.length,((g,I)=>{A.push(IV.of({from:g,to:I}))})),g.dispatch({effects:A}),!0}}],sV={placeholderDOM:null,placeholderText:"‚Ä¶"},lV=Hy.define({combine:g=>Bw(g,sV)});function rV(g){let I=[CV,mV];return g&&I.push(lV.of(g)),I}const cV=qW.replace({widget:new class extends _W{ignoreEvents(){return!1}toDOM(g){let{state:I}=g,A=I.facet(lV);if(A.placeholderDOM)return A.placeholderDOM();let C=document.createElement("span");return C.textContent=A.placeholderText,C.setAttribute("aria-label",I.phrase("folded code")),C.title=I.phrase("unfold"),C.className="cm-foldPlaceholder",C.onclick=I=>{let A=g.visualLineAt(g.posAtDOM(I.target)),C=tV(g.state,A.from,A.to);C&&g.dispatch({effects:IV.of(C)}),I.preventDefault()},C}}}),aV={openText:"‚åÑ",closedText:"‚Ä∫",markerDOM:null};class dV extends YX{constructor(g,I){super(),this.config=g,this.open=I}eq(g){return this.config==g.config&&this.open==g.open}toDOM(g){if(this.config.markerDOM)return this.config.markerDOM(this.open);let I=document.createElement("span");return I.textContent=this.open?this.config.openText:this.config.closedText,I.title=g.state.phrase(this.open?"Fold line":"Unfold line"),I}}function hV(g={}){let I=Object.assign(Object.assign({},aV),g),A=new dV(I,!0),C=new dV(I,!1),t=wS.fromClass(class{constructor(g){this.from=g.viewport.from,this.markers=this.buildMarkers(g)}update(g){(g.docChanged||g.viewportChanged||g.startState.facet(eX)!=g.state.facet(eX)||g.startState.field(CV,!1)!=g.state.field(CV,!1))&&(this.markers=this.buildMarkers(g.view))}buildMarkers(g){let I=new Qw;return g.viewportLines((t=>{let i=tV(g.state,t.from,t.to)?C:fX(g.state,t.from,t.to)?A:null;i&&I.add(t.from,t.from,i)})),I.finish()}});return[t,RX({class:"cm-foldGutter",markers(g){var I;return(null===(I=g.plugin(t))||void 0===I?void 0:I.markers)||Rw.empty},initialSpacer:()=>new dV(I,!1),domEventHandlers:{click:(g,I)=>{let A=tV(g.state,I.from,I.to);if(A)return g.dispatch({effects:IV.of(A)}),!0;let C=fX(g.state,I.from,I.to);return!!C&&(g.dispatch({effects:gV.of(C)}),!0)}}}),rV()]}const mV=hf.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter .cm-gutterElement":{padding:"0 1px",cursor:"pointer"}}),ZV=hf.baseTheme({".cm-matchingBracket":{color:"#0b0"},".cm-nonmatchingBracket":{color:"#a22"}}),uV="()[]{}",GV=Hy.define({combine:g=>Bw(g,{afterCursor:!0,brackets:uV,maxScanDistance:1e4})}),bV=qW.mark({class:"cm-matchingBracket"}),pV=qW.mark({class:"cm-nonmatchingBracket"}),BV=[Ny.define({create:()=>qW.none,update(g,I){if(!I.docChanged&&!I.selection)return g;let A=[],C=I.state.facet(GV);for(let t of I.state.selection.ranges){if(!t.empty)continue;let g=WV(I.state,t.head,-1,C)||t.head>0&&WV(I.state,t.head-1,1,C)||C.afterCursor&&(WV(I.state,t.head,1,C)||t.head<I.state.doc.length&&WV(I.state,t.head+1,-1,C));if(!g)continue;let i=g.matched?bV:pV;A.push(i.range(g.start.from,g.start.to)),g.end&&A.push(i.range(g.end.from,g.end.to))}return qW.set(A,!0)},provide:g=>hf.decorations.from(g)}),ZV];function yV(g={}){return[GV.of(g),BV]}function wV(g,I,A){let C=g.prop(I<0?WY.openedBy:WY.closedBy);if(C)return C;if(1==g.name.length){let C=A.indexOf(g.name);if(C>-1&&C%2==(I<0?1:0))return[A[C+I]]}return null}function WV(g,I,A,C={}){let t,i=C.maxScanDistance||1e4,e=C.brackets||uV,o=_Y(g),n=o.resolve(I,A);return(t=wV(n.type,A,e))?function(g,I,A,C,t,i){let e=C.parent,o={from:C.from,to:C.to},n=0,s=null==e?void 0:e.cursor;if(s&&(A<0?s.childBefore(C.from):s.childAfter(C.to)))do{if(A<0?s.to<=C.from:s.from>=C.to){if(0==n&&t.indexOf(s.type.name)>-1)return{start:o,end:{from:s.from,to:s.to},matched:!0};if(wV(s.type,A,i))n++;else if(wV(s.type,-A,i)&&(n--,0==n))return{start:o,end:{from:s.from,to:s.to},matched:!1}}}while(A<0?s.prevSibling():s.nextSibling());return{start:o,matched:!1}}(0,0,A,n,t,e):function(g,I,A,C,t,i,e){let o=A<0?g.sliceDoc(I-1,I):g.sliceDoc(I,I+1),n=e.indexOf(o);if(n<0||n%2==0!=A>0)return null;let s={from:A<0?I-1:I,to:A>0?I+1:I},l=g.doc.iterRange(I,A>0?g.doc.length:0),r=0;for(let c=0;!l.next().done&&c<=i;){let g=l.value;A<0&&(c+=g.length);let i=I+c*A;for(let I=A>0?0:g.length-1,o=A>0?g.length:-1;I!=o;I+=A){let o=e.indexOf(g[I]);if(!(o<0||C.resolve(i+I,1).type!=t))if(o%2==0==A>0)r++;else{if(1==r)return{start:s,end:{from:i+I,to:i+I+1},matched:o>>1==n>>1};r--}}A>0&&(c+=g.length)}return l.done?{start:s,matched:!1}:null}(g,I,A,o,n.type,i,e)}function SV(g,I){return Vy.create(g.ranges.map(I),g.mainIndex)}function KV(g,I){return g.update({selection:I,scrollIntoView:!0,userEvent:"select"})}function fV({state:g,dispatch:I},A){let C=SV(g.selection,A);return!C.eq(g.selection)&&(I(KV(g,C)),!0)}function YV(g,I){return Vy.cursor(I?g.to:g.from)}function XV(g,I){return fV(g,(A=>A.empty?g.moveByChar(A,I):YV(A,I)))}const VV=g=>XV(g,g.textDirection!=vS.LTR),OV=g=>XV(g,g.textDirection==vS.LTR);function RV(g,I){return fV(g,(A=>A.empty?g.moveByGroup(A,I):YV(A,I)))}function QV(g,I,A){if(I.type.prop(A))return!0;let C=I.to-I.from;return C&&(C>2||/[^\s,.;:]/.test(g.sliceDoc(I.from,I.to)))||I.firstChild}function HV(g,I,A){let C,t,i=_Y(g).resolveInner(I.head),e=A?WY.closedBy:WY.openedBy;for(let o=I.head;;){let I=A?i.childAfter(o):i.childBefore(o);if(!I)break;QV(g,I,e)?i=I:o=A?I.to:I.from}return t=i.type.prop(e)&&(C=A?WV(g,i.from,1):WV(g,i.to,-1))&&C.matched?A?C.end.to:C.end.from:A?i.to:i.from,Vy.cursor(t,A?-1:1)}function kV(g,I){return fV(g,(A=>{if(!A.empty)return YV(A,I);let C=g.moveVertically(A,I);return C.head!=A.head?C:g.moveToLineBoundary(A,I)}))}const JV=g=>kV(g,!1),vV=g=>kV(g,!0);function DV(g,I){return fV(g,(A=>A.empty?g.moveVertically(A,I,g.dom.clientHeight):YV(A,I)))}const MV=g=>DV(g,!1),NV=g=>DV(g,!0);function EV(g,I,A){let C=g.visualLineAt(I.head),t=g.moveToLineBoundary(I,A);if(t.head==I.head&&t.head!=(A?C.to:C.from)&&(t=g.moveToLineBoundary(I,A,!1)),!A&&t.head==C.from&&C.length){let A=/^\s*/.exec(g.state.sliceDoc(C.from,Math.min(C.from+100,C.to)))[0].length;A&&I.head!=C.from+A&&(t=Vy.cursor(C.from+A))}return t}const FV=g=>fV(g,(I=>EV(g,I,!0))),LV=g=>fV(g,(I=>EV(g,I,!1)));function TV(g,I){let A=SV(g.state.selection,(g=>{let A=I(g);return Vy.range(g.anchor,A.head,A.goalColumn)}));return!A.eq(g.state.selection)&&(g.dispatch(KV(g.state,A)),!0)}function zV(g,I){return TV(g,(A=>g.moveByChar(A,I)))}const PV=g=>zV(g,g.textDirection!=vS.LTR),UV=g=>zV(g,g.textDirection==vS.LTR);function xV(g,I){return TV(g,(A=>g.moveByGroup(A,I)))}function jV(g,I){return TV(g,(A=>g.moveVertically(A,I)))}const _V=g=>jV(g,!1),$V=g=>jV(g,!0);function qV(g,I){return TV(g,(A=>g.moveVertically(A,I,g.dom.clientHeight)))}const gO=g=>qV(g,!1),IO=g=>qV(g,!0),AO=g=>TV(g,(I=>EV(g,I,!0))),CO=g=>TV(g,(I=>EV(g,I,!1))),tO=({state:g,dispatch:I})=>(I(KV(g,{anchor:0})),!0),iO=({state:g,dispatch:I})=>(I(KV(g,{anchor:g.doc.length})),!0),eO=({state:g,dispatch:I})=>(I(KV(g,{anchor:g.selection.main.anchor,head:0})),!0),oO=({state:g,dispatch:I})=>(I(KV(g,{anchor:g.selection.main.anchor,head:g.doc.length})),!0);function nO({state:g,dispatch:I},A){if(g.readOnly)return!1;let C="delete.selection",t=g.changeByRange((g=>{let{from:I,to:t}=g;if(I==t){let g=A(I);g<I?C="delete.backward":g>I&&(C="delete.forward"),I=Math.min(I,g),t=Math.max(t,g)}return I==t?{range:g}:{changes:{from:I,to:t},range:Vy.cursor(I)}}));return!t.changes.empty&&(I(g.update(t,{scrollIntoView:!0,userEvent:C})),!0)}function sO(g,I,A){if(g instanceof hf)for(let C of g.pluginField(pS.atomicRanges))C.between(I,I,((g,C)=>{g<I&&C>I&&(I=A?C:g)}));return I}const lO=(g,I)=>nO(g,(A=>{let C,t,{state:i}=g,e=i.doc.lineAt(A);if(!I&&A>e.from&&A<e.from+200&&!/[^ \t]/.test(C=e.text.slice(0,A-e.from))){if("\t"==C[C.length-1])return A-1;let g=sy(C,i.tabSize)%lX(i)||lX(i);for(let I=0;I<g&&" "==C[C.length-1-I];I++)A--;t=A}else t=Iy(e.text,A-e.from,I)+e.from,t==A&&e.number!=(I?i.doc.lines:1)&&(t+=I?1:-1);return sO(g,t,I)})),rO=g=>lO(g,!1),cO=g=>lO(g,!0),aO=(g,I)=>nO(g,(A=>{let C=A,{state:t}=g,i=t.doc.lineAt(C),e=t.charCategorizer(C);for(let g=null;;){if(C==(I?i.to:i.from)){C==A&&i.number!=(I?t.doc.lines:1)&&(C+=I?1:-1);break}let o=Iy(i.text,C-i.from,I)+i.from,n=i.text.slice(Math.min(C,o)-i.from,Math.max(C,o)-i.from),s=e(n);if(null!=g&&s!=g)break;" "==n&&C==A||(g=s),C=o}return sO(g,C,I)})),dO=g=>aO(g,!1),hO=g=>nO(g,(I=>{let A=g.visualLineAt(I).to;return sO(g,I<A?A:Math.min(g.state.doc.length,I+1),!0)}));function mO(g){let I=[],A=-1;for(let C of g.selection.ranges){let t=g.doc.lineAt(C.from),i=g.doc.lineAt(C.to);if(C.empty||C.to!=i.from||(i=g.doc.lineAt(C.to-1)),A>=t.number){let g=I[I.length-1];g.to=i.to,g.ranges.push(C)}else I.push({from:t.from,to:i.to,ranges:[C]});A=i.number+1}return I}function ZO(g,I,A){if(g.readOnly)return!1;let C=[],t=[];for(let i of mO(g)){if(A?i.to==g.doc.length:0==i.from)continue;let I=g.doc.lineAt(A?i.to+1:i.from-1),e=I.length+1;if(A){C.push({from:i.to,to:I.to},{from:i.from,insert:I.text+g.lineBreak});for(let I of i.ranges)t.push(Vy.range(Math.min(g.doc.length,I.anchor+e),Math.min(g.doc.length,I.head+e)))}else{C.push({from:I.from,to:i.from},{from:i.to,insert:g.lineBreak+I.text});for(let g of i.ranges)t.push(Vy.range(g.anchor-e,g.head-e))}}return!!C.length&&(I(g.update({changes:C,scrollIntoView:!0,selection:Vy.create(t,g.selection.mainIndex),userEvent:"move.line"})),!0)}function uO(g,I,A){if(g.readOnly)return!1;let C=[];for(let t of mO(g))A?C.push({from:t.from,insert:g.doc.slice(t.from,t.to)+g.lineBreak}):C.push({from:t.to,insert:g.lineBreak+g.doc.slice(t.from,t.to)});return I(g.update({changes:C,scrollIntoView:!0,userEvent:"input.copyline"})),!0}function GO(g,I){let A=-1;return g.changeByRange((C=>{let t=[];for(let e=C.from;e<=C.to;){let i=g.doc.lineAt(e);i.number>A&&(C.empty||C.to>i.from)&&(I(i,t,C),A=i.number),e=i.to+1}let i=g.changes(t);return{changes:t,range:Vy.range(i.mapPos(C.anchor,1),i.mapPos(C.head,1))}}))}const bO=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:g=>fV(g,(I=>HV(g.state,I,g.textDirection!=vS.LTR))),shift:g=>TV(g,(I=>HV(g.state,I,g.textDirection!=vS.LTR)))},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:g=>fV(g,(I=>HV(g.state,I,g.textDirection==vS.LTR))),shift:g=>TV(g,(I=>HV(g.state,I,g.textDirection==vS.LTR)))},{key:"Alt-ArrowUp",run:({state:g,dispatch:I})=>ZO(g,I,!1)},{key:"Shift-Alt-ArrowUp",run:({state:g,dispatch:I})=>uO(g,I,!1)},{key:"Alt-ArrowDown",run:({state:g,dispatch:I})=>ZO(g,I,!0)},{key:"Shift-Alt-ArrowDown",run:({state:g,dispatch:I})=>uO(g,I,!0)},{key:"Escape",run:({state:g,dispatch:I})=>{let A=g.selection,C=null;return A.ranges.length>1?C=Vy.create([A.main]):A.main.empty||(C=Vy.create([Vy.cursor(A.main.head)])),!!C&&(I(KV(g,C)),!0)}},{key:"Alt-l",mac:"Ctrl-l",run:({state:g,dispatch:I})=>{let A=mO(g).map((({from:I,to:A})=>Vy.range(I,Math.min(A+1,g.doc.length))));return I(g.update({selection:Vy.create(A),userEvent:"select"})),!0}},{key:"Mod-i",run:({state:g,dispatch:I})=>{let A=SV(g.selection,(I=>{var A;let C=_Y(g).resolveInner(I.head,1);for(;!(C.from<I.from&&C.to>=I.to||C.to>I.to&&C.from<=I.from)&&(null===(A=C.parent)||void 0===A?void 0:A.parent);)C=C.parent;return Vy.range(C.to,C.from)}));return I(KV(g,A)),!0},preventDefault:!0},{key:"Mod-[",run:({state:g,dispatch:I})=>!g.readOnly&&(I(g.update(GO(g,((I,A)=>{let C=/^\s*/.exec(I.text)[0];if(!C)return;let t=sy(C,g.tabSize),i=0,e=rX(g,Math.max(0,t-lX(g)));for(;i<C.length&&i<e.length&&C.charCodeAt(i)==e.charCodeAt(i);)i++;A.push({from:I.from+i,to:I.from+C.length,insert:e.slice(i)})})),{userEvent:"delete.dedent"})),!0)},{key:"Mod-]",run:({state:g,dispatch:I})=>!g.readOnly&&(I(g.update(GO(g,((I,A)=>{A.push({from:I.from,insert:g.facet(sX)})})),{userEvent:"input.indent"})),!0)},{key:"Mod-Alt-\\",run:({state:g,dispatch:I})=>{if(g.readOnly)return!1;let A=Object.create(null),C=new aX(g,{overrideIndentation:g=>{let I=A[g];return null==I?-1:I}}),t=GO(g,((I,t,i)=>{let e=cX(C,I.from);if(null==e)return;/\S/.test(I.text)||(e=0);let o=/^\s*/.exec(I.text)[0],n=rX(g,e);(o!=n||i.from<I.from+o.length)&&(A[I.from]=e,t.push({from:I.from,to:I.from+o.length,insert:n}))}));return t.changes.empty||I(g.update(t,{userEvent:"indent"})),!0}},{key:"Shift-Mod-k",run:g=>{if(g.state.readOnly)return!1;let{state:I}=g,A=I.changes(mO(I).map((({from:g,to:A})=>(g>0?g--:A<I.doc.length&&A++,{from:g,to:A})))),C=SV(I.selection,(I=>g.moveVertically(I,!0))).map(A);return g.dispatch({changes:A,selection:C,scrollIntoView:!0,userEvent:"delete.line"}),!0}},{key:"Shift-Mod-\\",run:({state:g,dispatch:I})=>function(g,I,A){let C=!1,t=SV(g.selection,(I=>{let t=WV(g,I.head,-1)||WV(g,I.head,1)||I.head>0&&WV(g,I.head-1,1)||I.head<g.doc.length&&WV(g,I.head+1,-1);if(!t||!t.end)return I;C=!0;let i=t.start.from==I.head?t.end.to:t.end.from;return A?Vy.range(I.anchor,i):Vy.cursor(i)}));return!!C&&(I(KV(g,t)),!0)}(g,I,!1)}].concat([{key:"ArrowLeft",run:VV,shift:PV,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:g=>RV(g,g.textDirection!=vS.LTR),shift:g=>xV(g,g.textDirection!=vS.LTR)},{mac:"Cmd-ArrowLeft",run:LV,shift:CO},{key:"ArrowRight",run:OV,shift:UV,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:g=>RV(g,g.textDirection==vS.LTR),shift:g=>xV(g,g.textDirection==vS.LTR)},{mac:"Cmd-ArrowRight",run:FV,shift:AO},{key:"ArrowUp",run:JV,shift:_V,preventDefault:!0},{mac:"Cmd-ArrowUp",run:tO,shift:eO},{mac:"Ctrl-ArrowUp",run:MV,shift:gO},{key:"ArrowDown",run:vV,shift:$V,preventDefault:!0},{mac:"Cmd-ArrowDown",run:iO,shift:oO},{mac:"Ctrl-ArrowDown",run:NV,shift:IO},{key:"PageUp",run:MV,shift:gO},{key:"PageDown",run:NV,shift:IO},{key:"Home",run:LV,shift:CO},{key:"Mod-Home",run:tO,shift:eO},{key:"End",run:FV,shift:AO},{key:"Mod-End",run:iO,shift:oO},{key:"Enter",run:({state:g,dispatch:I})=>{if(g.readOnly)return!1;let A=g.changeByRange((({from:I,to:A})=>{let C=I==A&&function(g,I){if(/\(\)|\[\]|\{\}/.test(g.sliceDoc(I-1,I+1)))return{from:I,to:I};let A,C=_Y(g).resolveInner(I),t=C.childBefore(I),i=C.childAfter(I);return t&&i&&t.to<=I&&i.from>=I&&(A=t.type.prop(WY.closedBy))&&A.indexOf(i.name)>-1&&g.doc.lineAt(t.to).from==g.doc.lineAt(i.from).from?{from:t.to,to:i.from}:null}(g,I),t=new aX(g,{simulateBreak:I,simulateDoubleBreak:!!C}),i=cX(t,I);null==i&&(i=/^\s*/.exec(g.doc.lineAt(I).text)[0].length);let e=g.doc.lineAt(I);for(;A<e.to&&/\s/.test(e.text[A-e.from]);)A++;C?({from:I,to:A}=C):I>e.from&&I<e.from+100&&!/\S/.test(e.text.slice(0,I))&&(I=e.from);let o=["",rX(g,i)];return C&&o.push(rX(g,t.lineIndent(e.from,-1))),{changes:{from:I,to:A,insert:ry.of(o)},range:Vy.cursor(I+1+o[1].length)}}));return I(g.update(A,{scrollIntoView:!0,userEvent:"input"})),!0}},{key:"Mod-a",run:({state:g,dispatch:I})=>(I(g.update({selection:{anchor:0,head:g.doc.length},userEvent:"select"})),!0)},{key:"Backspace",run:rO,shift:rO},{key:"Delete",run:cO,shift:cO},{key:"Mod-Backspace",mac:"Alt-Backspace",run:dO},{key:"Mod-Delete",mac:"Alt-Delete",run:g=>aO(g,!0)},{mac:"Mod-Backspace",run:g=>nO(g,(I=>{let A=g.visualLineAt(I).from;return sO(g,I>A?A:Math.max(0,I-1),!1)}))},{mac:"Mod-Delete",run:hO}].concat([{key:"Ctrl-b",run:VV,shift:PV,preventDefault:!0},{key:"Ctrl-f",run:OV,shift:UV},{key:"Ctrl-p",run:JV,shift:_V},{key:"Ctrl-n",run:vV,shift:$V},{key:"Ctrl-a",run:g=>fV(g,(I=>Vy.cursor(g.visualLineAt(I.head).from,1))),shift:g=>TV(g,(I=>Vy.cursor(g.visualLineAt(I.head).from)))},{key:"Ctrl-e",run:g=>fV(g,(I=>Vy.cursor(g.visualLineAt(I.head).to,-1))),shift:g=>TV(g,(I=>Vy.cursor(g.visualLineAt(I.head).to)))},{key:"Ctrl-d",run:cO},{key:"Ctrl-h",run:rO},{key:"Ctrl-k",run:hO},{key:"Ctrl-Alt-h",run:dO},{key:"Ctrl-o",run:({state:g,dispatch:I})=>{if(g.readOnly)return!1;let A=g.changeByRange((g=>({changes:{from:g.from,to:g.to,insert:ry.of(["",""])},range:Vy.cursor(g.from)})));return I(g.update(A,{scrollIntoView:!0,userEvent:"input"})),!0}},{key:"Ctrl-t",run:({state:g,dispatch:I})=>{if(g.readOnly)return!1;let A=g.changeByRange((I=>{if(!I.empty||0==I.from||I.from==g.doc.length)return{range:I};let A=I.from,C=g.doc.lineAt(A),t=A==C.from?A-1:Iy(C.text,A-C.from,!1)+C.from,i=A==C.to?A+1:Iy(C.text,A-C.from,!0)+C.from;return{changes:{from:t,to:i,insert:g.doc.slice(A,i).append(g.doc.slice(t,A))},range:Vy.cursor(i)}}));return!A.changes.empty&&(I(g.update(A,{scrollIntoView:!0,userEvent:"move.character"})),!0)}},{key:"Alt-<",run:tO},{key:"Alt->",run:iO},{key:"Ctrl-v",run:NV},{key:"Alt-v",run:MV}].map((g=>({mac:g.key,run:g.run,shift:g.shift}))))),pO={brackets:["(","[","{","'",'"'],before:")]}'\":;>"},BO=sw.define({map(g,I){let A=I.mapPos(g,-1,py.TrackAfter);return null==A?void 0:A}}),yO=sw.define({map:(g,I)=>I.mapPos(g)}),wO=new class extends Yw{};wO.startSide=1,wO.endSide=-1;const WO=Ny.define({create:()=>Rw.empty,update(g,I){if(I.selection){let A=I.state.doc.lineAt(I.selection.main.head).from,C=I.startState.doc.lineAt(I.startState.selection.main.head).from;A!=I.changes.mapPos(C,-1)&&(g=Rw.empty)}g=g.map(I.changes);for(let A of I.effects)A.is(BO)?g=g.update({add:[wO.range(A.value,A.value+1)]}):A.is(yO)&&(g=g.update({filter:g=>g!=A.value}));return g}});function SO(){return[hf.inputHandler.of(XO),WO]}const KO="()[]{}<>";function fO(g){for(let I=0;I<KO.length;I+=2)if(KO.charCodeAt(I)==g)return KO.charAt(I+1);return oy(g<128?g:g+1)}function YO(g,I){return g.languageDataAt("closeBrackets",I)[0]||pO}function XO(g,I,A,C){if(g.composing)return!1;let t=g.state.selection.main;if(C.length>2||2==C.length&&1==ny(ey(C,0))||I!=t.from||A!=t.to)return!1;let i=function(g,I){let A=YO(g,g.selection.main.head),C=A.brackets||pO.brackets;for(let t of C){let i=fO(ey(t,0));if(I==t)return i==t?kO(g,t,C.indexOf(t+t+t)>-1):QO(g,t,i,A.before||pO.before);if(I==i&&OO(g,g.selection.main.from))return HO(g,t,i)}return null}(g.state,C);return!!i&&(g.dispatch(i),!0)}const VO=[{key:"Backspace",run:({state:g,dispatch:I})=>{let A=YO(g,g.selection.main.head).brackets||pO.brackets,C=null,t=g.changeByRange((I=>{if(I.empty){let C=function(g,I){let A=g.sliceString(I-2,I);return ny(ey(A,0))==A.length?A:A.slice(1)}(g.doc,I.head);for(let t of A)if(t==C&&RO(g.doc,I.head)==fO(ey(t,0)))return{changes:{from:I.head-t.length,to:I.head+t.length},range:Vy.cursor(I.head-t.length),userEvent:"delete.backward"}}return{range:C=I}}));return C||I(g.update(t,{scrollIntoView:!0})),!C}}];function OO(g,I){let A=!1;return g.field(WO).between(0,g.doc.length,(g=>{g==I&&(A=!0)})),A}function RO(g,I){let A=g.sliceString(I,I+2);return A.slice(0,ny(ey(A,0)))}function QO(g,I,A,C){let t=null,i=g.changeByRange((i=>{if(!i.empty)return{changes:[{insert:I,from:i.from},{insert:A,from:i.to}],effects:BO.of(i.to+I.length),range:Vy.range(i.anchor+I.length,i.head+I.length)};let e=RO(g.doc,i.head);return!e||/\s/.test(e)||C.indexOf(e)>-1?{changes:{insert:I+A,from:i.head},effects:BO.of(i.head+I.length),range:Vy.cursor(i.head+I.length)}:{range:t=i}}));return t?null:g.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function HO(g,I,A){let C=null,t=g.selection.ranges.map((I=>I.empty&&RO(g.doc,I.head)==A?Vy.cursor(I.head+A.length):C=I));return C?null:g.update({selection:Vy.create(t,g.selection.mainIndex),scrollIntoView:!0,effects:g.selection.ranges.map((({from:g})=>yO.of(g)))})}function kO(g,I,A){let C=null,t=g.changeByRange((t=>{if(!t.empty)return{changes:[{insert:I,from:t.from},{insert:I,from:t.to}],effects:BO.of(t.to+I.length),range:Vy.range(t.anchor+I.length,t.head+I.length)};let i=t.head,e=RO(g.doc,i);if(e==I){if(JO(g,i))return{changes:{insert:I+I,from:i},effects:BO.of(i+I.length),range:Vy.cursor(i+I.length)};if(OO(g,i)){let C=A&&g.sliceDoc(i,i+3*I.length)==I+I+I;return{range:Vy.cursor(i+I.length*(C?3:1)),effects:yO.of(i)}}}else{if(A&&g.sliceDoc(i-2*I.length,i)==I+I&&JO(g,i-2*I.length))return{changes:{insert:I+I+I+I,from:i},effects:BO.of(i+I.length),range:Vy.cursor(i+I.length)};if(g.charCategorizer(i)(e)!=Zw.Word){let A=g.sliceDoc(i-1,i);if(A!=I&&g.charCategorizer(i)(A)!=Zw.Word)return{changes:{insert:I+I,from:i},effects:BO.of(i+I.length),range:Vy.cursor(i+I.length)}}}return{range:C=t}}));return C?null:g.update(t,{scrollIntoView:!0,userEvent:"input.type"})}function JO(g,I){let A=_Y(g).resolveInner(I+1);return A.parent&&A.from==I}const vO=Hy.define({combine(g){let I,A;for(let C of g)I=I||C.topContainer,A=A||C.bottomContainer;return{topContainer:I,bottomContainer:A}}});function DO(g,I){let A=g.plugin(MO),C=A?A.specs.indexOf(I):-1;return C>-1?A.panels[C]:null}const MO=wS.fromClass(class{constructor(g){this.input=g.state.facet(LO),this.specs=this.input.filter((g=>g)),this.panels=this.specs.map((I=>I(g)));let I=g.state.facet(vO);this.top=new NO(g,!0,I.topContainer),this.bottom=new NO(g,!1,I.bottomContainer),this.top.sync(this.panels.filter((g=>g.top))),this.bottom.sync(this.panels.filter((g=>!g.top)));for(let A of this.panels)A.dom.classList.add("cm-panel"),A.mount&&A.mount()}update(g){let I=g.state.facet(vO);this.top.container!=I.topContainer&&(this.top.sync([]),this.top=new NO(g.view,!0,I.topContainer)),this.bottom.container!=I.bottomContainer&&(this.bottom.sync([]),this.bottom=new NO(g.view,!1,I.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let A=g.state.facet(LO);if(A!=this.input){let I=A.filter((g=>g)),C=[],t=[],i=[],e=[];for(let A of I){let I,o=this.specs.indexOf(A);o<0?(I=A(g.view),e.push(I)):(I=this.panels[o],I.update&&I.update(g)),C.push(I),(I.top?t:i).push(I)}this.specs=I,this.panels=C,this.top.sync(t),this.bottom.sync(i);for(let g of e)g.dom.classList.add("cm-panel"),g.mount&&g.mount()}else for(let C of this.panels)C.update&&C.update(g)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:pS.scrollMargins.from((g=>({top:g.top.scrollMargin(),bottom:g.bottom.scrollMargin()})))});class NO{constructor(g,I,A){this.view=g,this.top=I,this.container=A,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(g){this.panels=g,this.syncDOM()}syncDOM(){if(0==this.panels.length)return void(this.dom&&(this.dom.remove(),this.dom=void 0));if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let g=this.container||this.view.dom;g.insertBefore(this.dom,this.top?g.firstChild:null)}let g=this.dom.firstChild;for(let I of this.panels)if(I.dom.parentNode==this.dom){for(;g!=I.dom;)g=EO(g);g=g.nextSibling}else this.dom.insertBefore(I.dom,g);for(;g;)g=EO(g)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(this.container&&this.classes!=this.view.themeClasses){for(let g of this.classes.split(" "))g&&this.container.classList.remove(g);for(let g of(this.classes=this.view.themeClasses).split(" "))g&&this.container.classList.add(g)}}}function EO(g){let I=g.nextSibling;return g.remove(),I}const FO=hf.baseTheme({".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"}}),LO=Hy.define({enables:[MO,FO]});function TO(){var g=arguments[0];"string"==typeof g&&(g=document.createElement(g));var I=1,A=arguments[1];if(A&&"object"==typeof A&&null==A.nodeType&&!Array.isArray(A)){for(var C in A)if(Object.prototype.hasOwnProperty.call(A,C)){var t=A[C];"string"==typeof t?g.setAttribute(C,t):null!=t&&(g[C]=t)}I++}for(;I<arguments.length;I++)zO(g,arguments[I]);return g}function zO(g,I){if("string"==typeof I)g.appendChild(document.createTextNode(I));else if(null==I);else if(null!=I.nodeType)g.appendChild(I);else{if(!Array.isArray(I))throw new RangeError("Unsupported child node: "+I);for(var A=0;A<I.length;A++)zO(g,I[A])}}const PO="function"==typeof String.prototype.normalize?g=>g.normalize("NFKD"):g=>g;class UO{constructor(g,I,A=0,C=g.length,t){this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=g.iterRange(A,C),this.bufferStart=A,this.normalize=t?g=>t(PO(g)):PO,this.query=this.normalize(I)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return ey(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let g=this.peek();if(g<0)return this.done=!0,this;let I=oy(g),A=this.bufferStart+this.bufferPos;this.bufferPos+=ny(g);let C=this.normalize(I);for(let t=0,i=A;;t++){let g=C.charCodeAt(t),e=this.match(g,i);if(e)return this.value=e,this;if(t==C.length-1)break;i==A&&t<I.length&&I.charCodeAt(t)==g&&i++}}}match(g,I){let A=null;for(let C=0;C<this.matches.length;C+=2){let t=this.matches[C],i=!1;this.query.charCodeAt(t)==g&&(t==this.query.length-1?A={from:this.matches[C+1],to:I+1}:(this.matches[C]++,i=!0)),i||(this.matches.splice(C,2),C-=2)}return this.query.charCodeAt(0)==g&&(1==this.query.length?A={from:I,to:I+1}:this.matches.push(1,I)),A}}const xO={from:-1,to:-1,match:/.*/.exec("")},jO="gm"+(null==/x/.unicode?"":"u");class _O{constructor(g,I,A,C=0,t=g.length){if(this.to=t,this.curLine="",this.done=!1,this.value=xO,/\\[sWDnr]|\n|\r|\[\^/.test(I))return new gR(g,I,A,C,t);this.re=new RegExp(I,jO+((null==A?void 0:A.ignoreCase)?"i":"")),this.iter=g.iter();let i=g.lineAt(C);this.curLineStart=i.from,this.matchPos=C,this.getLine(this.curLineStart)}getLine(g){this.iter.next(g),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let g=this.matchPos-this.curLineStart;;){this.re.lastIndex=g;let I=this.matchPos<=this.to&&this.re.exec(this.curLine);if(I){let A=this.curLineStart+I.index,C=A+I[0].length;if(this.matchPos=C+(A==C?1:0),A==this.curLine.length&&this.nextLine(),A<C||A>this.value.to)return this.value={from:A,to:C,match:I},this;g=this.matchPos-this.curLineStart}else{if(!(this.curLineStart+this.curLine.length<this.to))return this.done=!0,this;this.nextLine(),g=0}}}}const $O=new WeakMap;class qO{constructor(g,I){this.from=g,this.text=I}get to(){return this.from+this.text.length}static get(g,I,A){let C=$O.get(g);if(!C||C.from>=A||C.to<=I){let C=new qO(I,g.sliceString(I,A));return $O.set(g,C),C}if(C.from==I&&C.to==A)return C;let{text:t,from:i}=C;return i>I&&(t=g.sliceString(I,i)+t,i=I),C.to<A&&(t+=g.sliceString(C.to,A)),$O.set(g,new qO(i,t)),new qO(I,t.slice(I-i,A-i))}}class gR{constructor(g,I,A,C,t){this.text=g,this.to=t,this.done=!1,this.value=xO,this.matchPos=C,this.re=new RegExp(I,jO+((null==A?void 0:A.ignoreCase)?"i":"")),this.flat=qO.get(g,C,this.chunkEnd(C+5e3))}chunkEnd(g){return g>=this.to?this.to:this.text.lineAt(g).to}next(){for(;;){let g=this.re.lastIndex=this.matchPos-this.flat.from,I=this.re.exec(this.flat.text);if(I&&!I[0]&&I.index==g&&(this.re.lastIndex=g+1,I=this.re.exec(this.flat.text)),I&&this.flat.to<this.to&&I.index+I[0].length>this.flat.text.length-10&&(I=null),I){let g=this.flat.from+I.index,A=g+I[0].length;return this.value={from:g,to:A,match:I},this.matchPos=A+(g==A?1:0),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=qO.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+2*this.flat.text.length))}}}function IR(g){let I=TO("input",{class:"cm-textfield",name:"line"});function A(){let A=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(I.value);if(!A)return;let{state:C}=g,t=C.doc.lineAt(C.selection.main.head),[,i,e,o,n]=A,s=o?+o.slice(1):0,l=e?+e:t.number;if(e&&n){let g=l/100;i&&(g=g*("-"==i?-1:1)+t.number/C.doc.lines),l=Math.round(C.doc.lines*g)}else e&&i&&(l=l*("-"==i?-1:1)+t.number);let r=C.doc.line(Math.max(1,Math.min(C.doc.lines,l)));g.dispatch({effects:AR.of(!1),selection:Vy.cursor(r.from+Math.max(0,Math.min(s,r.length))),scrollIntoView:!0}),g.focus()}return{dom:TO("form",{class:"cm-gotoLine",onkeydown:I=>{27==I.keyCode?(I.preventDefault(),g.dispatch({effects:AR.of(!1)}),g.focus()):13==I.keyCode&&(I.preventDefault(),A())},onsubmit:g=>{g.preventDefault(),A()}},TO("label",g.state.phrase("Go to line"),": ",I)," ",TO("button",{class:"cm-button",type:"submit"},g.state.phrase("go"))),pos:-10}}const AR=sw.define(),CR=Ny.define({create:()=>!0,update(g,I){for(let A of I.effects)A.is(AR)&&(g=A.value);return g},provide:g=>LO.from(g,(g=>g?IR:null))}),tR=hf.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),iR={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100},eR=Hy.define({combine:g=>Bw(g,iR,{highlightWordAroundCursor:(g,I)=>g||I,minSelectionLength:Math.min,maxMatches:Math.min})});function oR(g){let I=[rR,lR];return g&&I.push(eR.of(g)),I}const nR=qW.mark({class:"cm-selectionMatch"}),sR=qW.mark({class:"cm-selectionMatch cm-selectionMatch-main"}),lR=wS.fromClass(class{constructor(g){this.decorations=this.getDeco(g)}update(g){(g.selectionSet||g.docChanged||g.viewportChanged)&&(this.decorations=this.getDeco(g.view))}getDeco(g){let I=g.state.facet(eR),{state:A}=g,C=A.selection;if(C.ranges.length>1)return qW.none;let t,i=C.main,e=null;if(i.empty){if(!I.highlightWordAroundCursor)return qW.none;let g=A.wordAt(i.head);if(!g)return qW.none;e=A.charCategorizer(i.head),t=A.sliceDoc(g.from,g.to)}else{let g=i.to-i.from;if(g<I.minSelectionLength||g>200)return qW.none;if(t=A.sliceDoc(i.from,i.to).trim(),!t)return qW.none}let o=[];for(let n of g.visibleRanges){let g=new UO(A.doc,t,n.from,n.to);for(;!g.next().done;){let{from:C,to:t}=g.value;if((!e||(0==C||e(A.sliceDoc(C-1,C))!=Zw.Word)&&(t==A.doc.length||e(A.sliceDoc(t,t+1))!=Zw.Word))&&(e&&C<=i.from&&t>=i.to?o.push(sR.range(C,t)):(C>=i.to||t<=i.from)&&o.push(nR.range(C,t)),o.length>I.maxMatches))return qW.none}}return qW.set(o)}},{decorations:g=>g.decorations}),rR=hf.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}});const cR=Hy.define({combine(g){let I=g.some((g=>g.matchCase));return{top:g.some((g=>g.top)),matchCase:void 0===I||I}}});class aR{constructor(g,I,A){this.search=g,this.replace=I,this.caseInsensitive=A}eq(g){return this.search==g.search&&this.replace==g.replace&&this.caseInsensitive==g.caseInsensitive&&this.constructor==g.constructor}}class dR extends aR{constructor(g,I,A){super(g,I,A),this.unquoted=g.replace(/\\([nrt\\])/g,((g,I)=>"n"==I?"\n":"r"==I?"\r":"t"==I?"\t":"\\"))}cursor(g,I=0,A=g.length){return new UO(g,this.unquoted,I,A,this.caseInsensitive?g=>g.toLowerCase():void 0)}nextMatch(g,I,A){let C=this.cursor(g,A).nextOverlapping();return C.done&&(C=this.cursor(g,0,I).nextOverlapping()),C.done?null:C.value}prevMatchInRange(g,I,A){for(let C=A;;){let A=Math.max(I,C-1e4-this.unquoted.length),t=this.cursor(g,A,C),i=null;for(;!t.nextOverlapping().done;)i=t.value;if(i)return i;if(A==I)return null;C-=1e4}}prevMatch(g,I,A){return this.prevMatchInRange(g,0,I)||this.prevMatchInRange(g,A,g.length)}getReplacement(g){return this.replace}matchAll(g,I){let A=this.cursor(g),C=[];for(;!A.next().done;){if(C.length>=I)return null;C.push(A.value)}return C}highlight(g,I,A,C){let t=this.cursor(g,Math.max(0,I-this.unquoted.length),Math.min(A+this.unquoted.length,g.length));for(;!t.next().done;)C(t.value.from,t.value.to)}get valid(){return!!this.search}}class hR extends aR{constructor(g,I,A){super(g,I,A),this.valid=!!g&&function(g){try{return new RegExp(g,jO),!0}catch(I){return!1}}(g)}cursor(g,I=0,A=g.length){return new _O(g,this.search,this.caseInsensitive?{ignoreCase:!0}:void 0,I,A)}nextMatch(g,I,A){let C=this.cursor(g,A).next();return C.done&&(C=this.cursor(g,0,I).next()),C.done?null:C.value}prevMatchInRange(g,I,A){for(let C=1;;C++){let t=Math.max(I,A-1e4*C),i=this.cursor(g,t,A),e=null;for(;!i.next().done;)e=i.value;if(e&&(t==I||e.from>t+10))return e;if(t==I)return null}}prevMatch(g,I,A){return this.prevMatchInRange(g,0,I)||this.prevMatchInRange(g,A,g.length)}getReplacement(g){return this.replace.replace(/\$([$&\d+])/g,((I,A)=>"$"==A?"$":"&"==A?g.match[0]:"0"!=A&&+A<g.match.length?g.match[A]:I))}matchAll(g,I){let A=this.cursor(g),C=[];for(;!A.next().done;){if(C.length>=I)return null;C.push(A.value)}return C}highlight(g,I,A,C){let t=this.cursor(g,Math.max(0,I-250),Math.min(A+250,g.length));for(;!t.next().done;)C(t.value.from,t.value.to)}}const mR=sw.define(),ZR=sw.define(),uR=Ny.define({create:g=>new GR(XR(g),YR),update(g,I){for(let A of I.effects)A.is(mR)?g=new GR(A.value,g.panel):A.is(ZR)&&(g=new GR(g.query,A.value?YR:null));return g},provide:g=>LO.from(g,(g=>g.panel))});class GR{constructor(g,I){this.query=g,this.panel=I}}const bR=qW.mark({class:"cm-searchMatch"}),pR=qW.mark({class:"cm-searchMatch cm-searchMatch-selected"}),BR=wS.fromClass(class{constructor(g){this.view=g,this.decorations=this.highlight(g.state.field(uR))}update(g){let I=g.state.field(uR);(I!=g.startState.field(uR)||g.docChanged||g.selectionSet)&&(this.decorations=this.highlight(I))}highlight({query:g,panel:I}){if(!I||!g.valid)return qW.none;let{view:A}=this,C=new Qw;for(let t=0,i=A.visibleRanges,e=i.length;t<e;t++){let{from:I,to:o}=i[t];for(;t<e-1&&o>i[t+1].from-500;)o=i[++t].to;g.highlight(A.state.doc,I,o,((g,I)=>{let t=A.state.selection.ranges.some((A=>A.from==g&&A.to==I));C.add(g,I,t?pR:bR)}))}return C.finish()}},{decorations:g=>g.decorations});function yR(g){return I=>{let A=I.state.field(uR,!1);return A&&A.query.valid?g(I,A):VR(I)}}const wR=yR(((g,{query:I})=>{let{from:A,to:C}=g.state.selection.main,t=I.nextMatch(g.state.doc,A,C);return!(!t||t.from==A&&t.to==C)&&(g.dispatch({selection:{anchor:t.from,head:t.to},scrollIntoView:!0,effects:kR(g,t)}),!0)})),WR=yR(((g,{query:I})=>{let{state:A}=g,{from:C,to:t}=A.selection.main,i=I.prevMatch(A.doc,C,t);return!!i&&(g.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:kR(g,i)}),!0)})),SR=yR(((g,{query:I})=>{let A=I.matchAll(g.state.doc,1e3);return!(!A||!A.length)&&(g.dispatch({selection:Vy.create(A.map((g=>Vy.range(g.from,g.to))))}),!0)})),KR=yR(((g,{query:I})=>{let{state:A}=g,{from:C,to:t}=A.selection.main;if(A.readOnly)return!1;let i=I.nextMatch(A.doc,C,C);if(!i)return!1;let e,o,n=[];if(i.from==C&&i.to==t&&(o=A.toText(I.getReplacement(i)),n.push({from:i.from,to:i.to,insert:o}),i=I.nextMatch(A.doc,i.from,i.to)),i){let g=0==n.length||n[0].from>=i.to?0:i.to-i.from-o.length;e={anchor:i.from-g,head:i.to-g}}return g.dispatch({changes:n,selection:e,scrollIntoView:!!e,effects:i?kR(g,i):void 0}),!0})),fR=yR(((g,{query:I})=>{if(g.state.readOnly)return!1;let A=I.matchAll(g.state.doc,1e9).map((g=>{let{from:A,to:C}=g;return{from:A,to:C,insert:I.getReplacement(g)}}));return!!A.length&&(g.dispatch({changes:A}),!0)}));function YR(g){let{query:I}=g.state.field(uR);return{dom:QR({view:g,query:I,updateQuery(A){I.eq(A)||(I=A,g.dispatch({effects:mR.of(I)}))}}),mount(){this.dom.querySelector("[name=search]").select()},pos:80,top:g.state.facet(cR).top}}function XR(g,I){var A;let C=g.selection.main,t=C.empty||C.to>C.from+100?"":g.sliceDoc(C.from,C.to),i=null!==(A=null==I?void 0:I.caseInsensitive)&&void 0!==A?A:!g.facet(cR).matchCase;return I&&!t?I:new dR(t.replace(/\n/g,"\\n"),"",i)}const VR=g=>{let I=g.state.field(uR,!1);if(I&&I.panel){let I=DO(g,YR);if(!I)return!1;let A=I.dom.querySelector("[name=search]");A.focus(),A.select()}else g.dispatch({effects:[ZR.of(!0),I?mR.of(XR(g.state,I.query)):sw.appendConfig.of(vR)]});return!0},OR=g=>{let I=g.state.field(uR,!1);if(!I||!I.panel)return!1;let A=DO(g,YR);return A&&A.dom.contains(g.root.activeElement)&&g.focus(),g.dispatch({effects:ZR.of(!1)}),!0},RR=[{key:"Mod-f",run:VR,scope:"editor search-panel"},{key:"F3",run:wR,shift:WR,scope:"editor search-panel"},{key:"Mod-g",run:wR,shift:WR,scope:"editor search-panel"},{key:"Escape",run:OR,scope:"editor search-panel"},{key:"Mod-Shift-l",run:({state:g,dispatch:I})=>{let A=g.selection;if(A.ranges.length>1||A.main.empty)return!1;let{from:C,to:t}=A.main,i=[],e=0;for(let o=new UO(g.doc,g.sliceDoc(C,t));!o.next().done;){if(i.length>1e3)return!1;o.value.from==C&&(e=i.length),i.push(Vy.range(o.value.from,o.value.to))}return I(g.update({selection:Vy.create(i,e)})),!0}},{key:"Alt-g",run:g=>{let I=DO(g,IR);if(!I){let A=[AR.of(!0)];null==g.state.field(CR,!1)&&A.push(sw.appendConfig.of([CR,tR])),g.dispatch({effects:A}),I=DO(g,IR)}return I&&I.dom.querySelector("input").focus(),!0}},{key:"Mod-d",run:({state:g,dispatch:I})=>{let{ranges:A}=g.selection;if(A.some((g=>g.from===g.to)))return(({state:g,dispatch:I})=>{let{selection:A}=g,C=Vy.create(A.ranges.map((I=>g.wordAt(I.head)||Vy.cursor(I.head))),A.mainIndex);return!C.eq(A)&&(I(g.update({selection:C})),!0)})({state:g,dispatch:I});let C=g.sliceDoc(A[0].from,A[0].to);if(g.selection.ranges.some((I=>g.sliceDoc(I.from,I.to)!=C)))return!1;let t=function(g,I){let{main:A,ranges:C}=g.selection,t=g.wordAt(A.head),i=t&&t.from==A.from&&t.to==A.to;for(let e=!1,o=new UO(g.doc,I,C[C.length-1].to);;){if(o.next(),!o.done){if(e&&C.some((g=>g.from==o.value.from)))continue;if(i){let I=g.wordAt(o.value.from);if(!I||I.from!=o.value.from||I.to!=o.value.to)continue}return o.value}if(e)return null;o=new UO(g.doc,I,0,Math.max(0,C[C.length-1].from-1)),e=!0}}(g,C);return!!t&&(I(g.update({selection:g.selection.addRange(Vy.range(t.from,t.to),!1),scrollIntoView:!0})),!0)},preventDefault:!0}];function QR(g){function I(I){return g.view.state.phrase(I)}let A=TO("input",{value:g.query.search,placeholder:I("Find"),"aria-label":I("Find"),class:"cm-textfield",name:"search",onchange:e,onkeyup:e}),C=TO("input",{value:g.query.replace,placeholder:I("Replace"),"aria-label":I("Replace"),class:"cm-textfield",name:"replace",onchange:e,onkeyup:e}),t=TO("input",{type:"checkbox",name:"case",checked:!g.query.caseInsensitive,onchange:e}),i=TO("input",{type:"checkbox",name:"re",checked:g.query instanceof hR,onchange:e});function e(){g.updateQuery(new(i.checked?hR:dR)(A.value,C.value,!t.checked))}function o(g,I,A){return TO("button",{class:"cm-button",name:g,onclick:I,type:"button"},A)}return TO("div",{onkeydown:function(I){var t,i,e;t=g.view,i=I,e="search-panel",Yf(Kf(t.state),i,t,e)?I.preventDefault():13==I.keyCode&&I.target==A?(I.preventDefault(),(I.shiftKey?WR:wR)(g.view)):13==I.keyCode&&I.target==C&&(I.preventDefault(),KR(g.view))},class:"cm-search"},[A,o("next",(()=>wR(g.view)),[I("next")]),o("prev",(()=>WR(g.view)),[I("previous")]),o("select",(()=>SR(g.view)),[I("all")]),TO("label",null,[t,I("match case")]),TO("label",null,[i,I("regexp")]),TO("br"),C,o("replace",(()=>KR(g.view)),[I("replace")]),o("replaceAll",(()=>fR(g.view)),[I("replace all")]),TO("button",{name:"close",onclick:()=>OR(g.view),"aria-label":I("close"),type:"button"},["√ó"])])}const HR=/[\s\.,:;?!]/;function kR(g,{from:I,to:A}){let C=g.state.doc.lineAt(I).from,t=g.state.doc.lineAt(A).to,i=Math.max(C,I-30),e=Math.min(t,A+30),o=g.state.sliceDoc(i,e);if(i!=C)for(let n=0;n<30;n++)if(!HR.test(o[n+1])&&HR.test(o[n])){o=o.slice(n);break}if(e!=t)for(let n=o.length-1;n>o.length-30;n--)if(!HR.test(o[n-1])&&HR.test(o[n])){o=o.slice(0,n);break}return hf.announce.of(`${g.state.phrase("current match")}. ${o} ${g.state.phrase("on line")} ${g.state.doc.lineAt(I).number}`)}const JR=hf.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),vR=[uR,zy.fallback(BR),JR],DR="undefined"!=typeof navigator&&!/Edge\/(\d+)/.exec(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)&&(/Mobile\/\w+/.test(navigator.userAgent)||navigator.maxTouchPoints>2),MR="-10000px";class NR{constructor(g,I,A){this.facet=I,this.createTooltipView=A,this.input=g.state.facet(I),this.tooltips=this.input.filter((g=>g)),this.tooltipViews=this.tooltips.map(A)}update(g){let I=g.state.facet(this.facet),A=I.filter((g=>g));if(I===this.input){for(let I of this.tooltipViews)I.update&&I.update(g);return{shouldMeasure:!1}}let C=[];for(let t=0;t<A.length;t++){let I=A[t],i=-1;if(I){for(let g=0;g<this.tooltips.length;g++){let A=this.tooltips[g];A&&A.create==I.create&&(i=g)}if(i<0)C[t]=this.createTooltipView(I);else{let I=C[t]=this.tooltipViews[i];I.update&&I.update(g)}}}for(let t of this.tooltipViews)C.indexOf(t)<0&&t.dom.remove();return this.input=I,this.tooltips=A,this.tooltipViews=C,{shouldMeasure:!0}}}const ER=Hy.define({combine:g=>DR?"absolute":g.length?g[0]:"fixed"}),FR=wS.fromClass(class{constructor(g){this.view=g,this.inView=!0,this.position=g.state.facet(ER),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new NR(g,TR,(g=>this.createTooltip(g)))}update(g){let{shouldMeasure:I}=this.manager.update(g),A=g.state.facet(ER);if(A!=this.position){this.position=A;for(let g of this.manager.tooltipViews)g.dom.style.position=A;I=!0}I&&this.maybeMeasure()}createTooltip(g){let I=g.create(this.view);return I.dom.classList.add("cm-tooltip"),I.dom.style.position=this.position,I.dom.style.top=MR,this.view.dom.appendChild(I.dom),I.mount&&I.mount(this.view),I}destroy(){for(let{dom:g}of this.manager.tooltipViews)g.remove()}readMeasure(){return{editor:this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((g=>this.view.coordsAtPos(g.pos))),size:this.manager.tooltipViews.map((({dom:g})=>g.getBoundingClientRect())),innerWidth:window.innerWidth,innerHeight:window.innerHeight}}writeMeasure(g){let{editor:I}=g,A=[];for(let C=0;C<this.manager.tooltips.length;C++){let t=this.manager.tooltips[C],i=this.manager.tooltipViews[C],{dom:e}=i,o=g.pos[C],n=g.size[C];if(!o||o.bottom<=I.top||o.top>=I.bottom||o.right<=I.left||o.left>=I.right){e.style.top=MR;continue}let s=n.right-n.left,l=n.bottom-n.top,r=this.view.textDirection==vS.LTR?Math.min(o.left,g.innerWidth-s):Math.max(0,o.left-s),c=!!t.above;!t.strictSide&&(c?o.top-(n.bottom-n.top)<0:o.bottom+(n.bottom-n.top)>g.innerHeight)&&(c=!c);let a=c?o.top-l:o.bottom,d=r+s;for(let g of A)g.left<d&&g.right>r&&g.top<a+l&&g.bottom>a&&(a=c?g.top-l:g.bottom);"absolute"==this.position?(e.style.top=a-I.top+"px",e.style.left=r-I.left+"px"):(e.style.top=a+"px",e.style.left=r+"px"),A.push({left:r,top:a,right:d,bottom:a+l}),e.classList.toggle("cm-tooltip-above",c),e.classList.toggle("cm-tooltip-below",!c),i.positioned&&i.positioned()}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let g of this.manager.tooltipViews)g.dom.style.top=MR}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),LR=hf.baseTheme({".cm-tooltip":{zIndex:100},"&light .cm-tooltip":{border:"1px solid #ddd",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #ddd"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"}}),TR=Hy.define({enables:[FR,LR]}),zR=Hy.define();class PR{constructor(g){this.view=g,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new NR(g,zR,(g=>this.createHostedView(g)))}static create(g){return new PR(g)}createHostedView(g){let I=g.create(this.view);return I.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(I.dom),this.mounted&&I.mount&&I.mount(this.view),I}mount(g){for(let I of this.manager.tooltipViews)I.mount&&I.mount(g);this.mounted=!0}positioned(){for(let g of this.manager.tooltipViews)g.positioned&&g.positioned()}update(g){this.manager.update(g)}}const UR=TR.compute([zR],(g=>{let I=g.facet(zR).filter((g=>g));return 0===I.length?null:{pos:Math.min(...I.map((g=>g.pos))),end:Math.max(...I.filter((g=>null!=g.end)).map((g=>g.end))),create:PR.create,above:I[0].above}}));class xR{constructor(g,I,A,C,t){this.view=g,this.source=I,this.field=A,this.setHover=C,this.hoverTime=t,this.lastMouseMove=null,this.lastMoveTime=0,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.checkHover=this.checkHover.bind(this),g.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),g.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout((()=>this.startHover()),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let g=Date.now()-this.lastMoveTime;g<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-g):this.startHover()}startHover(){var g;clearTimeout(this.restartTimeout);let I=this.lastMouseMove,A={x:I.clientX,y:I.clientY},C=this.view.contentDOM.contains(I.target)?this.view.posAtCoords(A):null;if(null==C)return;let t=this.view.coordsAtPos(C);if(null==t||A.y<t.top||A.y>t.bottom||A.x<t.left-this.view.defaultCharacterWidth||A.x>t.right+this.view.defaultCharacterWidth)return;let i=this.view.bidiSpans(this.view.state.doc.lineAt(C)).find((g=>g.from<=C&&g.to>=C)),e=i&&i.dir==vS.RTL?-1:1,o=this.source(this.view,C,A.x<t.left?-e:e);if(null===(g=o)||void 0===g?void 0:g.then){let g=this.pending={pos:C};o.then((I=>{this.pending==g&&(this.pending=null,I&&this.view.dispatch({effects:this.setHover.of(I)}))}),(g=>uS(this.view.state,g,"hover tooltip")))}else o&&this.view.dispatch({effects:this.setHover.of(o)})}mousemove(g){var I;this.lastMouseMove=g,this.lastMoveTime=Date.now(),this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let A=this.active;if(A&&!function(g){for(let I=g;I;I=I.parentNode)if(1==I.nodeType&&I.classList.contains("cm-tooltip"))return!0;return!1}(g.target)||this.pending){let{pos:C}=A||this.pending,t=null!==(I=null==A?void 0:A.end)&&void 0!==I?I:C;(C==t?this.view.posAtCoords({x:g.clientX,y:g.clientY})==C:function(g,I,A,C,t,i){let e=document.createRange(),o=g.domAtPos(I),n=g.domAtPos(A);e.setEnd(n.node,n.offset),e.setStart(o.node,o.offset);let s=e.getClientRects();e.detach();for(let l=0;l<s.length;l++){let g=s[l];if(Math.max(g.top-t,t-g.bottom,g.left-C,C-g.right)<=i)return!0}return!1}(this.view,C,t,g.clientX,g.clientY,6))||(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function jR(g,I={}){let A=sw.define(),C=Ny.define({create:()=>null,update(g,C){if(g&&I.hideOnChange&&(C.docChanged||C.selection))return null;for(let I of C.effects)if(I.is(A))return I.value;if(g&&C.docChanged){let I=C.changes.mapPos(g.pos,-1,py.TrackDel);if(null==I)return null;let A=Object.assign(Object.create(null),g);return A.pos=I,null!=g.end&&(A.end=C.changes.mapPos(g.end)),A}return g},provide:g=>zR.from(g)}),t=I.hoverTime||750;return[C,wS.define((I=>new xR(I,g,C,A,t))),UR]}class _R{constructor(g,I,A){this.state=g,this.pos=I,this.explicit=A,this.abortListeners=[]}tokenBefore(g){let I=_Y(this.state).resolveInner(this.pos,-1);for(;I&&g.indexOf(I.name)<0;)I=I.parent;return I?{from:I.from,to:this.pos,text:this.state.sliceDoc(I.from,this.pos),type:I.type}:null}matchBefore(g){let I=this.state.doc.lineAt(this.pos),A=Math.max(I.from,this.pos-250),C=I.text.slice(A-I.from,this.pos-I.from),t=C.search(CQ(g,!1));return t<0?null:{from:A+t,to:this.pos,text:C.slice(t)}}get aborted(){return null==this.abortListeners}addEventListener(g,I){"abort"==g&&this.abortListeners&&this.abortListeners.push(I)}}function $R(g){let I=Object.keys(g).join(""),A=/\w/.test(I);return A&&(I=I.replace(/\w/g,"")),`[${A?"\\w":""}${I.replace(/[^\w\s]/g,"\\$&")}]`}function qR(g){let I=g.map((g=>"string"==typeof g?{label:g}:g)),[A,C]=I.every((g=>/^\w+$/.test(g.label)))?[/\w*$/,/\w+$/]:function(g){let I=Object.create(null),A=Object.create(null);for(let{label:t}of g){I[t[0]]=!0;for(let g=1;g<t.length;g++)A[t[g]]=!0}let C=$R(I)+$R(A)+"*$";return[new RegExp("^"+C),new RegExp(C)]}(I);return g=>{let t=g.matchBefore(C);return t||g.explicit?{from:t?t.from:g.pos,options:I,span:A}:null}}function gQ(g,I){return A=>{for(let I=_Y(A.state).resolveInner(A.pos,-1);I;I=I.parent)if(g.indexOf(I.name)>-1)return null;return I(A)}}class IQ{constructor(g,I,A){this.completion=g,this.source=I,this.match=A}}function AQ(g){return g.selection.main.head}function CQ(g,I){var A;let{source:C}=g,t=I&&"^"!=C[0],i="$"!=C[C.length-1];return t||i?new RegExp(`${t?"^":""}(?:${C})${i?"$":""}`,null!==(A=g.flags)&&void 0!==A?A:g.ignoreCase?"i":""):g}function tQ(g,I){let A=I.completion.apply||I.completion.label,C=I.source;"string"==typeof A?g.dispatch({changes:{from:C.from,to:C.to,insert:A},selection:{anchor:C.from+A.length},userEvent:"input.complete"}):A(g,I.completion,C.from,C.to)}const iQ=new WeakMap;function eQ(g){if(!Array.isArray(g))return g;let I=iQ.get(g);return I||iQ.set(g,I=qR(g)),I}class oQ{constructor(g){this.pattern=g,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let I=0;I<g.length;){let A=ey(g,I),C=ny(A);this.chars.push(A);let t=g.slice(I,I+C),i=t.toUpperCase();this.folded.push(ey(i==t?t.toLowerCase():i,0)),I+=C}this.astral=g.length!=this.chars.length}match(g){if(0==this.pattern.length)return[0];if(g.length<this.pattern.length)return null;let{chars:I,folded:A,any:C,precise:t,byWord:i}=this;if(1==I.length){let C=ey(g,0);return C==I[0]?[0,0,ny(C)]:C==A[0]?[-200,0,ny(C)]:null}let e=g.indexOf(this.pattern);if(0==e)return[0,0,this.pattern.length];let o=I.length,n=0;if(e<0){for(let t=0,i=Math.min(g.length,200);t<i&&n<o;){let i=ey(g,t);i!=I[n]&&i!=A[n]||(C[n++]=t),t+=ny(i)}if(n<o)return null}let s=0,l=0,r=!1,c=0,a=-1,d=-1,h=/[a-z]/.test(g);for(let m=0,Z=Math.min(g.length,200),u=0;m<Z&&l<o;){let C=ey(g,m);e<0&&(s<o&&C==I[s]&&(t[s++]=m),c<o&&(C==I[c]||C==A[c]?(0==c&&(a=m),d=m,c++):c=0));let n,Z=C<255?C>=48&&C<=57||C>=97&&C<=122?2:C>=65&&C<=90?1:0:(n=oy(C))!=n.toLowerCase()?1:n!=n.toUpperCase()?2:0;(1==Z&&h||0==u&&0!=Z)&&(I[l]==C||A[l]==C&&(r=!0))&&(i[l++]=m),u=Z,m+=ny(C)}return l==o&&0==i[0]?this.result((r?-200:0)-100,i,g):c==o&&0==a?[-200,0,d]:e>-1?[-700,e,e+this.pattern.length]:c==o?[-900,a,d]:l==o?this.result((r?-200:0)-100-700,i,g):2==I.length?null:this.result((C[0]?-700:0)-200-1100,C,g)}result(g,I,A){let C=[g],t=1;for(let i of I){let g=i+(this.astral?ny(ey(A,i)):1);t>1&&C[t-1]==i?C[t-1]=g:(C[t++]=i,C[t++]=g)}return C}}const nQ=Hy.define({combine:g=>Bw(g,{activateOnTyping:!0,override:null,maxRenderedOptions:100,defaultKeymap:!0,optionClass:()=>"",icons:!0,addToOptions:[]},{defaultKeymap:(g,I)=>g&&I,icons:(g,I)=>g&&I,optionClass:(g,I)=>A=>function(g,I){return g?I?g+" "+I:g:I}(g(A),I(A)),addToOptions:(g,I)=>g.concat(I)})});const sQ=hf.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",maxHeight:"10em",listStyle:"none",margin:0,padding:0,"& > li":{cursor:"pointer",padding:"1px 1em 1px 3px",lineHeight:1.2},"& > li[aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"}}},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"¬∑¬∑¬∑"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"300px"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'∆í'"}},".cm-completionIcon-class":{"&:after":{content:"'‚óã'"}},".cm-completionIcon-interface":{"&:after":{content:"'‚óå'"}},".cm-completionIcon-variable":{"&:after":{content:"'ùë•'"}},".cm-completionIcon-constant":{"&:after":{content:"'ùê∂'"}},".cm-completionIcon-type":{"&:after":{content:"'ùë°'"}},".cm-completionIcon-enum":{"&:after":{content:"'‚à™'"}},".cm-completionIcon-property":{"&:after":{content:"'‚ñ°'"}},".cm-completionIcon-keyword":{"&:after":{content:"'üîëÔ∏é'"}},".cm-completionIcon-namespace":{"&:after":{content:"'‚ñ¢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});function lQ(g,I,A){if(g<=A)return{from:0,to:g};if(I<=g>>1){let g=Math.floor(I/A);return{from:g*A,to:(g+1)*A}}let C=Math.floor((g-I)/A);return{from:g-(C+1)*A,to:g-C*A}}class rQ{constructor(g,I){this.view=g,this.stateField=I,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:g=>this.positionInfo(g),key:this};let A=g.state.field(I),{options:C,selected:t}=A.open,i=g.state.facet(nQ);this.optionContent=function(g){let I=g.addToOptions.slice();return g.icons&&I.push({render(g){let I=document.createElement("div");return I.classList.add("cm-completionIcon"),g.type&&I.classList.add(...g.type.split(/\s+/g).map((g=>"cm-completionIcon-"+g))),I.setAttribute("aria-hidden","true"),I},position:20}),I.push({render(g,I,A){let C=document.createElement("span");C.className="cm-completionLabel";let{label:t}=g,i=0;for(let e=1;e<A.length;){let g=A[e++],I=A[e++];g>i&&C.appendChild(document.createTextNode(t.slice(i,g)));let o=C.appendChild(document.createElement("span"));o.appendChild(document.createTextNode(t.slice(g,I))),o.className="cm-completionMatchedText",i=I}return i<t.length&&C.appendChild(document.createTextNode(t.slice(i))),C},position:50},{render(g){if(!g.detail)return null;let I=document.createElement("span");return I.className="cm-completionDetail",I.textContent=g.detail,I},position:80}),I.sort(((g,I)=>g.position-I.position)).map((g=>g.render))}(i),this.optionClass=i.optionClass,this.range=lQ(C.length,t,i.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.dom.addEventListener("mousedown",(I=>{for(let A,t=I.target;t&&t!=this.dom;t=t.parentNode)if("LI"==t.nodeName&&(A=/-(\d+)$/.exec(t.id))&&+A[1]<C.length)return tQ(g,C[+A[1]]),void I.preventDefault()})),this.list=this.dom.appendChild(this.createListBox(C,A.id,this.range)),this.list.addEventListener("scroll",(()=>{this.info&&this.view.requestMeasure(this.placeInfo)}))}mount(){this.updateSel()}update(g){g.state.field(this.stateField)!=g.startState.field(this.stateField)&&this.updateSel()}positioned(){this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let g=this.view.state.field(this.stateField),I=g.open;if((I.selected<this.range.from||I.selected>=this.range.to)&&(this.range=lQ(I.options.length,I.selected,this.view.state.facet(nQ).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(I.options,g.id,this.range)),this.list.addEventListener("scroll",(()=>{this.info&&this.view.requestMeasure(this.placeInfo)}))),this.updateSelectedOption(I.selected)){this.info&&(this.info.remove(),this.info=null);let g=I.options[I.selected];g.completion.info&&(this.info=this.dom.appendChild(function(g,I){let A=document.createElement("div");A.className="cm-tooltip cm-completionInfo";let{info:C}=g.completion;if("string"==typeof C)A.textContent=C;else{let t=C(g.completion);t.then?t.then((g=>A.appendChild(g)),(g=>uS(I.state,g,"completion info"))):A.appendChild(t)}return A}(g,this.view)),this.view.requestMeasure(this.placeInfo))}}updateSelectedOption(g){let I=null;for(let A=this.list.firstChild,C=this.range.from;A;A=A.nextSibling,C++)C==g?A.hasAttribute("aria-selected")||(A.setAttribute("aria-selected","true"),I=A):A.hasAttribute("aria-selected")&&A.removeAttribute("aria-selected");return I&&function(g,I){let A=g.getBoundingClientRect(),C=I.getBoundingClientRect();C.top<A.top?g.scrollTop-=A.top-C.top:C.bottom>A.bottom&&(g.scrollTop+=C.bottom-A.bottom)}(this.list,I),I}measureInfo(){let g=this.dom.querySelector("[aria-selected]");if(!g)return null;let I=this.dom.getBoundingClientRect(),A=g.getBoundingClientRect().top-I.top;if(A<0||A>this.list.clientHeight-10)return null;let C=this.view.textDirection==vS.RTL,t=I.left,i=innerWidth-I.right;return C&&t<Math.min(300,i)?C=!1:!C&&i<Math.min(300,t)&&(C=!0),{top:A,left:C}}positionInfo(g){this.info&&g&&(this.info.style.top=g.top+"px",this.info.classList.toggle("cm-completionInfo-left",g.left),this.info.classList.toggle("cm-completionInfo-right",!g.left))}createListBox(g,I,A){const C=document.createElement("ul");C.id=I,C.setAttribute("role","listbox");for(let t=A.from;t<A.to;t++){let{completion:A,match:i}=g[t];const e=C.appendChild(document.createElement("li"));e.id=I+"-"+t,e.setAttribute("role","option");let o=this.optionClass(A);o&&(e.className=o);for(let g of this.optionContent){let I=g(A,this.view.state,i);I&&e.appendChild(I)}}return A.from&&C.classList.add("cm-completionListIncompleteTop"),A.to<g.length&&C.classList.add("cm-completionListIncompleteBottom"),C}}function cQ(g){return 100*(g.boost||0)+(g.apply?10:0)+(g.info?5:0)+(g.type?1:0)}class aQ{constructor(g,I,A,C,t){this.options=g,this.attrs=I,this.tooltip=A,this.timestamp=C,this.selected=t}setSelected(g,I){return g==this.selected||g>=this.options.length?this:new aQ(this.options,mQ(I,g),this.tooltip,this.timestamp,g)}static build(g,I,A,C){let t=function(g,I){let A=[],C=0;for(let e of g)if(e.hasResult())if(!1===e.result.filter)for(let g of e.result.options)A.push(new IQ(g,e,[1e9-C++]));else{let g,C=new oQ(I.sliceDoc(e.from,e.to));for(let I of e.result.options)(g=C.match(I.label))&&(null!=I.boost&&(g[0]+=I.boost),A.push(new IQ(I,e,g)))}A.sort(uQ);let t=[],i=null;for(let e of A.sort(uQ)){if(300==t.length)break;i&&i.label==e.completion.label&&i.detail==e.completion.detail?cQ(e.completion)>cQ(i)&&(t[t.length-1]=e):t.push(e),i=e.completion}return t}(g,I);if(!t.length)return null;let i=0;if(C&&C.selected){let g=C.options[C.selected].completion;for(let I=0;I<t.length&&!i;I++)t[I].completion==g&&(i=I)}return new aQ(t,mQ(A,i),{pos:g.reduce(((g,I)=>I.hasResult()?Math.min(g,I.from):g),1e8),create:(e=SQ,g=>new rQ(g,e))},C?C.timestamp:Date.now(),i);var e}map(g){return new aQ(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:g.mapPos(this.tooltip.pos)}),this.timestamp,this.selected)}}class dQ{constructor(g,I,A){this.active=g,this.id=I,this.open=A}static start(){return new dQ(ZQ,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}update(g){let{state:I}=g,A=I.facet(nQ),C=(A.override||I.languageDataAt("autocomplete",AQ(I)).map(eQ)).map((I=>(this.active.find((g=>g.source==I))||new bQ(I,this.active.some((g=>0!=g.state))?1:0)).update(g,A)));C.length==this.active.length&&C.every(((g,I)=>g==this.active[I]))&&(C=this.active);let t=g.selection||C.some((I=>I.hasResult()&&g.changes.touchesRange(I.from,I.to)))||!function(g,I){if(g==I)return!0;for(let A=0,C=0;;){for(;A<g.length&&!g[A].hasResult;)A++;for(;C<I.length&&!I[C].hasResult;)C++;let t=A==g.length,i=C==I.length;if(t||i)return t==i;if(g[A++].result!=I[C++].result)return!1}}(C,this.active)?aQ.build(C,I,this.id,this.open):this.open&&g.docChanged?this.open.map(g.changes):this.open;!t&&C.every((g=>1!=g.state))&&C.some((g=>g.hasResult()))&&(C=C.map((g=>g.hasResult()?new bQ(g.source,0):g)));for(let i of g.effects)i.is(WQ)&&(t=t&&t.setSelected(i.value,this.id));return C==this.active&&t==this.open?this:new dQ(C,this.id,t)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:hQ}}const hQ={"aria-autocomplete":"list","aria-expanded":"false"};function mQ(g,I){return{"aria-autocomplete":"list","aria-expanded":"true","aria-activedescendant":g+"-"+I,"aria-controls":g}}const ZQ=[];function uQ(g,I){let A=I.match[0]-g.match[0];return A||g.completion.label.localeCompare(I.completion.label)}function GQ(g){return g.isUserEvent("input.type")?"input":g.isUserEvent("delete.backward")?"delete":null}class bQ{constructor(g,I,A=-1){this.source=g,this.state=I,this.explicitPos=A}hasResult(){return!1}update(g,I){let A=GQ(g),C=this;A?C=C.handleUserEvent(g,A,I):g.docChanged?C=C.handleChange(g):g.selection&&0!=C.state&&(C=new bQ(C.source,0));for(let t of g.effects)if(t.is(BQ))C=new bQ(C.source,1,t.value?AQ(g.state):-1);else if(t.is(yQ))C=new bQ(C.source,0);else if(t.is(wQ))for(let g of t.value)g.source==C.source&&(C=g);return C}handleUserEvent(g,I,A){return"delete"!=I&&A.activateOnTyping?new bQ(this.source,1):this.map(g.changes)}handleChange(g){return g.changes.touchesRange(AQ(g.startState))?new bQ(this.source,0):this.map(g.changes)}map(g){return g.empty||this.explicitPos<0?this:new bQ(this.source,this.state,g.mapPos(this.explicitPos))}}class pQ extends bQ{constructor(g,I,A,C,t,i){super(g,2,I),this.result=A,this.from=C,this.to=t,this.span=i}hasResult(){return!0}handleUserEvent(g,I,A){let C=g.changes.mapPos(this.from),t=g.changes.mapPos(this.to,1),i=AQ(g.state);if((this.explicitPos>-1?i<C:i<=C)||i>t)return new bQ(this.source,"input"==I&&A.activateOnTyping?1:0);let e=this.explicitPos<0?-1:g.changes.mapPos(this.explicitPos);return this.span&&(C==t||this.span.test(g.state.sliceDoc(C,t)))?new pQ(this.source,e,this.result,C,t,this.span):new bQ(this.source,1,e)}handleChange(g){return g.changes.touchesRange(this.from,this.to)?new bQ(this.source,0):this.map(g.changes)}map(g){return g.empty?this:new pQ(this.source,this.explicitPos<0?-1:g.mapPos(this.explicitPos),this.result,g.mapPos(this.from),g.mapPos(this.to,1),this.span)}}const BQ=sw.define(),yQ=sw.define(),wQ=sw.define({map:(g,I)=>g.map((g=>g.map(I)))}),WQ=sw.define(),SQ=Ny.define({create:()=>dQ.start(),update:(g,I)=>g.update(I),provide:g=>[TR.from(g,(g=>g.tooltip)),hf.contentAttributes.from(g,(g=>g.attrs))]});function KQ(g,I="option"){return A=>{let C=A.state.field(SQ,!1);if(!C||!C.open||Date.now()-C.open.timestamp<75)return!1;let t,i=1;"page"==I&&(t=A.dom.querySelector(".cm-tooltip-autocomplete"))&&(i=Math.max(2,Math.floor(t.offsetHeight/t.firstChild.offsetHeight)));let e=C.open.selected+i*(g?1:-1),{length:o}=C.open.options;return e<0?e="page"==I?0:o-1:e>=o&&(e="page"==I?o-1:0),A.dispatch({effects:WQ.of(e)}),!0}}class fQ{constructor(g,I){this.active=g,this.context=I,this.time=Date.now(),this.updates=[],this.done=void 0}}const YQ=wS.fromClass(class{constructor(g){this.view=g,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let I of g.state.field(SQ).active)1==I.state&&this.startQuery(I)}update(g){let I=g.state.field(SQ);if(!g.selectionSet&&!g.docChanged&&g.startState.field(SQ)==I)return;let A=g.transactions.some((g=>(g.selection||g.docChanged)&&!GQ(g)));for(let C=0;C<this.running.length;C++){let I=this.running[C];if(A||I.updates.length+g.transactions.length>50&&I.time-Date.now()>1e3){for(let g of I.context.abortListeners)try{g()}catch(dD){uS(this.view.state,dD)}I.context.abortListeners=null,this.running.splice(C--,1)}else I.updates.push(...g.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=I.active.some((g=>1==g.state&&!this.running.some((I=>I.active.source==g.source))))?setTimeout((()=>this.startUpdate()),50):-1,0!=this.composing)for(let C of g.transactions)"input"==GQ(C)?this.composing=2:2==this.composing&&C.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:g}=this.view,I=g.field(SQ);for(let A of I.active)1!=A.state||this.running.some((g=>g.active.source==A.source))||this.startQuery(A)}startQuery(g){let{state:I}=this.view,A=AQ(I),C=new _R(I,A,g.explicitPos==A),t=new fQ(g,C);this.running.push(t),Promise.resolve(g.source(C)).then((g=>{t.context.aborted||(t.done=g||null,this.scheduleAccept())}),(g=>{this.view.dispatch({effects:yQ.of(null)}),uS(this.view.state,g)}))}scheduleAccept(){this.running.every((g=>void 0!==g.done))?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout((()=>this.accept()),50))}accept(){var g;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let I=[],A=this.view.state.facet(nQ);for(let C=0;C<this.running.length;C++){let t=this.running[C];if(void 0===t.done)continue;if(this.running.splice(C--,1),t.done){let C=new pQ(t.active.source,t.active.explicitPos,t.done,t.done.from,null!==(g=t.done.to)&&void 0!==g?g:AQ(t.updates.length?t.updates[0].startState:this.view.state),t.done.span&&!1!==t.done.filter?CQ(t.done.span,!0):null);for(let g of t.updates)C=C.update(g,A);if(C.hasResult()){I.push(C);continue}}let i=this.view.state.field(SQ).active.find((g=>g.source==t.active.source));if(i&&1==i.state)if(null==t.done){let g=new bQ(t.active.source,0);for(let I of t.updates)g=g.update(I,A);1!=g.state&&I.push(g)}else this.startQuery(i)}I.length&&this.view.dispatch({effects:wQ.of(I)})}},{eventHandlers:{compositionstart(){this.composing=1},compositionend(){3==this.composing&&setTimeout((()=>this.view.dispatch({effects:BQ.of(!1)})),20),this.composing=0}}});class XQ{constructor(g,I,A,C){this.field=g,this.line=I,this.from=A,this.to=C}}class VQ{constructor(g,I,A){this.field=g,this.from=I,this.to=A}map(g){return new VQ(this.field,g.mapPos(this.from,-1),g.mapPos(this.to,1))}}class OQ{constructor(g,I){this.lines=g,this.fieldPositions=I}instantiate(g,I){let A=[],C=[I],t=g.doc.lineAt(I),i=/^\s*/.exec(t.text)[0];for(let e of this.lines){if(A.length){let A=i,t=/^\t*/.exec(e)[0].length;for(let I=0;I<t;I++)A+=g.facet(sX);C.push(I+A.length-t),e=A+e.slice(t)}A.push(e),I+=e.length+1}return{text:A,ranges:this.fieldPositions.map((g=>new VQ(g.field,C[g.line]+g.from,C[g.line]+g.to)))}}static parse(g){let I,A=[],C=[],t=[];for(let i of g.split(/\r\n?|\n/)){for(;I=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(i);){let g=I[1]?+I[1]:null,e=I[2]||I[3],o=-1;for(let I=0;I<A.length;I++)(null!=g?A[I].seq==g:e&&A[I].name==e)&&(o=I);if(o<0){let I=0;for(;I<A.length&&(null==g||null!=A[I].seq&&A[I].seq<g);)I++;A.splice(I,0,{seq:g,name:e||null}),o=I;for(let g of t)g.field>=o&&g.field++}t.push(new XQ(o,C.length,I.index,I.index+e.length)),i=i.slice(0,I.index)+e+i.slice(I.index+I[0].length)}C.push(i)}return new OQ(C,t)}}let RQ=qW.widget({widget:new class extends _W{toDOM(){let g=document.createElement("span");return g.className="cm-snippetFieldPosition",g}ignoreEvent(){return!1}}}),QQ=qW.mark({class:"cm-snippetField"});class HQ{constructor(g,I){this.ranges=g,this.active=I,this.deco=qW.set(g.map((g=>(g.from==g.to?RQ:QQ).range(g.from,g.to))))}map(g){return new HQ(this.ranges.map((I=>I.map(g))),this.active)}selectionInsideField(g){return g.ranges.every((g=>this.ranges.some((I=>I.field==this.active&&I.from<=g.from&&I.to>=g.to))))}}const kQ=sw.define({map:(g,I)=>g&&g.map(I)}),JQ=sw.define(),vQ=Ny.define({create:()=>null,update(g,I){for(let A of I.effects){if(A.is(kQ))return A.value;if(A.is(JQ)&&g)return new HQ(g.ranges,A.value)}return g&&I.docChanged&&(g=g.map(I.changes)),g&&I.selection&&!g.selectionInsideField(I.selection)&&(g=null),g},provide:g=>hf.decorations.from(g,(g=>g?g.deco:qW.none))});function DQ(g,I){return Vy.create(g.filter((g=>g.field==I)).map((g=>Vy.range(g.from,g.to))))}function MQ(g){let I=OQ.parse(g);return(g,A,C,t)=>{let{text:i,ranges:e}=I.instantiate(g.state,C),o={changes:{from:C,to:t,insert:ry.of(i)}};if(e.length&&(o.selection=DQ(e,0)),e.length>1){let I=new HQ(e,0),A=o.effects=[kQ.of(I)];void 0===g.state.field(vQ,!1)&&A.push(sw.appendConfig.of([vQ.init((()=>I)),LQ,zQ,sQ]))}g.dispatch(g.state.update(o))}}function NQ(g){return({state:I,dispatch:A})=>{let C=I.field(vQ,!1);if(!C||g<0&&0==C.active)return!1;let t=C.active+g,i=g>0&&!C.ranges.some((I=>I.field==t+g));return A(I.update({selection:DQ(C.ranges,t),effects:kQ.of(i?null:new HQ(C.ranges,t))})),!0}}const EQ=[{key:"Tab",run:NQ(1),shift:NQ(-1)},{key:"Escape",run:({state:g,dispatch:I})=>!!g.field(vQ,!1)&&(I(g.update({effects:kQ.of(null)})),!0)}],FQ=Hy.define({combine:g=>g.length?g[0]:EQ}),LQ=zy.override(Wf.compute([FQ],(g=>g.facet(FQ))));function TQ(g,I){return Object.assign(Object.assign({},I),{apply:MQ(g)})}const zQ=hf.domEventHandlers({mousedown(g,I){let A,C=I.state.field(vQ,!1);if(!C||null==(A=I.posAtCoords({x:g.clientX,y:g.clientY})))return!1;let t=C.ranges.find((g=>g.from<=A&&g.to>=A));return!(!t||t.field==C.active)&&(I.dispatch({selection:DQ(C.ranges,t.field),effects:kQ.of(C.ranges.some((g=>g.field>t.field))?new HQ(C.ranges,t.field):null)}),!0)}});function PQ(g={}){return[SQ,nQ.of(g),YQ,xQ,sQ]}const UQ=[{key:"Ctrl-Space",run:g=>!!g.state.field(SQ,!1)&&(g.dispatch({effects:BQ.of(!0)}),!0)},{key:"Escape",run:g=>{let I=g.state.field(SQ,!1);return!(!I||!I.active.some((g=>0!=g.state)))&&(g.dispatch({effects:yQ.of(null)}),!0)}},{key:"ArrowDown",run:KQ(!0)},{key:"ArrowUp",run:KQ(!1)},{key:"PageDown",run:KQ(!0,"page")},{key:"PageUp",run:KQ(!1,"page")},{key:"Enter",run:g=>{let I=g.state.field(SQ,!1);return!(!I||!I.open||Date.now()-I.open.timestamp<75)&&(tQ(g,I.open.options[I.open.selected]),!0)}}],xQ=zy.override(Wf.computeN([nQ],(g=>g.facet(nQ).defaultKeymap?[UQ]:[])));function jQ(g,I){return({state:A,dispatch:C})=>{let t=g(I,A.selection.ranges,A);return!!t&&(C(A.update(t)),!0)}}const _Q=jQ(AH,0),$Q=jQ(IH,0),qQ=[{key:"Mod-/",run:g=>{let I=gH(g.state);return I.line?_Q(g):!!I.block&&$Q(g)}},{key:"Alt-A",run:$Q}];function gH(g,I=g.selection.main.head){let A=g.languageDataAt("commentTokens",I);return A.length?A[0]:{}}function IH(g,I,A){let C=I.map((g=>gH(A,g.from).block));if(!C.every((g=>g)))return null;let t=I.map(((g,I)=>function(g,{open:I,close:A},C,t){let i,e,o=g.sliceDoc(C-50,C),n=g.sliceDoc(t,t+50),s=/\s*$/.exec(o)[0].length,l=/^\s*/.exec(n)[0].length,r=o.length-s;if(o.slice(r-I.length,r)==I&&n.slice(l,l+A.length)==A)return{open:{pos:C-s,margin:s&&1},close:{pos:t+l,margin:l&&1}};t-C<=100?i=e=g.sliceDoc(C,t):(i=g.sliceDoc(C,C+50),e=g.sliceDoc(t-50,t));let c=/^\s*/.exec(i)[0].length,a=/\s*$/.exec(e)[0].length,d=e.length-a-A.length;return i.slice(c,c+I.length)==I&&e.slice(d,d+A.length)==A?{open:{pos:C+c+I.length,margin:/\s/.test(i.charAt(c+I.length))?1:0},close:{pos:t-a-A.length,margin:/\s/.test(e.charAt(d-1))?1:0}}:null}(A,C[I],g.from,g.to)));if(2!=g&&!t.every((g=>g))){let g=0;return A.changeByRange((I=>{let{open:A,close:i}=C[g++];if(t[g])return{range:I};let e=A.length+1;return{changes:[{from:I.from,insert:A+" "},{from:I.to,insert:" "+i}],range:Vy.range(I.anchor+e,I.head+e)}}))}if(1!=g&&t.some((g=>g))){let g=[];for(let I,A=0;A<t.length;A++)if(I=t[A]){let t=C[A],{open:i,close:e}=I;g.push({from:i.pos-t.open.length,to:i.pos+i.margin},{from:e.pos-e.margin,to:e.pos+t.close.length})}return{changes:g}}return null}function AH(g,I,A){let C=[],t=-1;for(let{from:i,to:e}of I){let g=C.length,I=1e9;for(let o=i;o<=e;){let g=A.doc.lineAt(o);if(g.from>t&&(i==e||e>g.from)){t=g.from;let i=gH(A,o).line;if(!i)continue;let e=/^\s*/.exec(g.text)[0].length,n=e==g.length,s=g.text.slice(e,e+i.length)==i?e:-1;e<g.text.length&&e<I&&(I=e),C.push({line:g,comment:s,token:i,indent:e,empty:n,single:!1})}o=g.to+1}if(I<1e9)for(let A=g;A<C.length;A++)C[A].indent<C[A].line.text.length&&(C[A].indent=I);C.length==g+1&&(C[g].single=!0)}if(2!=g&&C.some((g=>g.comment<0&&(!g.empty||g.single)))){let g=[];for(let{line:A,token:t,indent:i,empty:e,single:o}of C)!o&&e||g.push({from:A.from+i,insert:t+" "});let I=A.changes(g);return{changes:I,selection:A.selection.map(I,1)}}if(1!=g&&C.some((g=>g.comment>=0))){let g=[];for(let{line:I,comment:A,token:t}of C)if(A>=0){let C=I.from+A,i=C+t.length;" "==I.text[i-I.from]&&i++,g.push({from:C,to:i})}return{changes:g}}return null}const CH=2e3;function tH(g,I){let A=g.posAtCoords({x:I.clientX,y:I.clientY},!1),C=g.state.doc.lineAt(A),t=A-C.from,i=t>CH?-1:t==C.length?function(g,I){let A=g.coordsAtPos(g.viewport.from);return A?Math.round(Math.abs((A.left-I)/g.defaultCharacterWidth)):-1}(g,I.clientX):sy(C.text,g.state.tabSize,A-C.from);return{line:C.number,col:i,off:t}}function iH(g,I){let A=tH(g,I),C=g.state.selection;return A?{update(g){if(g.docChanged){let I=g.changes.mapPos(g.startState.doc.line(A.line).from),t=g.state.doc.lineAt(I);A={line:t.number,col:A.col,off:Math.min(A.off,t.length)},C=C.map(g.changes)}},get(I,t,i){let e=tH(g,I);if(!e)return C;let o=function(g,I,A){let C=Math.min(I.line,A.line),t=Math.max(I.line,A.line),i=[];if(I.off>CH||A.off>CH||I.col<0||A.col<0){let e=Math.min(I.off,A.off),o=Math.max(I.off,A.off);for(let I=C;I<=t;I++){let A=g.doc.line(I);A.length<=o&&i.push(Vy.range(A.from+e,A.to+o))}}else{let e=Math.min(I.col,A.col),o=Math.max(I.col,A.col);for(let I=C;I<=t;I++){let A=g.doc.line(I),C=ly(A.text,e,g.tabSize),t=ly(A.text,o,g.tabSize);C<t&&i.push(Vy.range(A.from+C,A.from+t))}}return i}(g.state,A,e);return o.length?i?Vy.create(o.concat(C.ranges)):Vy.create(o):C}}:null}function eH(g){let I=(null==g?void 0:g.eventFilter)||(g=>g.altKey&&0==g.button);return hf.mouseSelectionStyle.of(((g,A)=>I(A)?iH(g,A):null))}let oH=0;class nH{constructor(g,I,A){this.set=g,this.base=I,this.modified=A,this.id=oH++}static define(g){if(null==g?void 0:g.base)throw new Error("Can not derive from a modified tag");let I=new nH([],null,[]);if(I.set.push(I),g)for(let A of g.set)I.set.push(A);return I}static defineModifier(){let g=new lH;return I=>I.modified.indexOf(g)>-1?I:lH.get(I.base||I,I.modified.concat(g).sort(((g,I)=>g.id-I.id)))}}let sH=0;class lH{constructor(){this.instances=[],this.id=sH++}static get(g,I){if(!I.length)return g;let A=I[0].instances.find((A=>{return A.base==g&&(C=I,t=A.modified,C.length==t.length&&C.every(((g,I)=>g==t[I])));var C,t}));if(A)return A;let C=[],t=new nH(C,g,I);for(let e of I)e.instances.push(t);let i=rH(I);for(let e of g.set)for(let g of i)C.push(lH.get(e,g));return t}}function rH(g){let I=[g];for(let A=0;A<g.length;A++)for(let C of rH(g.slice(0,A).concat(g.slice(A+1))))I.push(C);return I}function cH(g){let I=Object.create(null);for(let A in g){let C=g[A];Array.isArray(C)||(C=[C]);for(let g of A.split(" "))if(g){let A=[],t=2,i=g;for(let I=0;;){if("..."==i&&I>0&&I+3==g.length){t=1;break}let C=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(i);if(!C)throw new RangeError("Invalid path: "+g);if(A.push("*"==C[0]?null:'"'==C[0][0]?JSON.parse(C[0]):C[0]),I+=C[0].length,I==g.length)break;let e=g[I++];if(I==g.length&&"!"==e){t=0;break}if("/"!=e)throw new RangeError("Invalid path: "+g);i=g.slice(I)}let e=A.length-1,o=A[e];if(!o)throw new RangeError("Invalid path: "+g);let n=new ZH(C,t,e>0?A.slice(0,e):null);I[o]=n.sort(I[o])}}return aH.add(I)}const aH=new WY,dH=Hy.define({combine:g=>g.length?uH.combinedMatch(g):null}),hH=Hy.define({combine:g=>g.length?g[0].match:null});function mH(g){return g.facet(dH)||g.facet(hH)}class ZH{constructor(g,I,A,C){this.tags=g,this.mode=I,this.context=A,this.next=C}sort(g){return!g||g.depth<this.depth?(this.next=g,this):(g.next=this.sort(g.next),g)}get depth(){return this.context?this.context.length:0}}class uH{constructor(g,I){let A;function C(g){let I=Sw.newName();return(A||(A=Object.create(null)))["."+I]=g,I}this.map=Object.create(null),this.all="string"==typeof I.all?I.all:I.all?C(I.all):null;for(let i of g){let g=(i.class||C(Object.assign({},i,{tag:null})))+(this.all?" "+this.all:""),I=i.tag;if(Array.isArray(I))for(let A of I)this.map[A.id]=g;else this.map[I.id]=g}this.module=A?new Sw(A):null,this.scope=I.scope||null,this.match=this.match.bind(this);let t=[bH];this.module&&t.push(hf.styleModule.of(this.module)),this.extension=t.concat(dH.of(this)),this.fallback=t.concat(hH.of(this))}match(g,I){if(this.scope&&I!=this.scope)return null;for(let A of g.set){let I=this.map[A.id];if(void 0!==I)return A!=g&&(this.map[g.id]=I),I}return this.map[g.id]=this.all}static combinedMatch(g){if(1==g.length)return g[0].match;let I=g.some((g=>g.scope))?void 0:Object.create(null);return(A,C)=>{let t=I&&I[A.id];if(void 0!==t)return t;let i=null;for(let I of g){let g=I.match(A,C);g&&(i=i?i+" "+g:g)}return I&&(I[A.id]=i),i}}static define(g,I){return new uH(g,I||{})}static get(g,I,A){let C=mH(g);return C&&C(I,A||KY.none)}}class GH{constructor(g){this.markCache=Object.create(null),this.tree=_Y(g.state),this.decorations=this.buildDeco(g,mH(g.state))}update(g){let I=_Y(g.state),A=mH(g.state),C=A!=g.startState.facet(dH);I.length<g.view.viewport.to&&!C&&I.type==this.tree.type?this.decorations=this.decorations.map(g.changes):(I!=this.tree||g.viewportChanged||C)&&(this.tree=I,this.decorations=this.buildDeco(g.view,A))}buildDeco(g,I){if(!I||!this.tree.length)return qW.none;let A=new Qw;for(let{from:C,to:t}of g.visibleRanges)yH(this.tree,C,t,I,((g,I,C)=>{A.add(g,I,this.markCache[C]||(this.markCache[C]=qW.mark({class:C})))}));return A.finish()}}const bH=zy.extend(wS.fromClass(GH,{decorations:g=>g.decorations})),pH=[""];class BH{constructor(g,I,A){this.at=g,this.style=I,this.span=A,this.class=""}startSpan(g,I){I!=this.class&&(this.flush(g),g>this.at&&(this.at=g),this.class=I)}flush(g){g>this.at&&this.class&&this.span(this.at,g,this.class)}highlightRange(g,I,A,C,t,i){let{type:e,from:o,to:n}=g;if(o>=A||n<=I)return;pH[t]=e.name,e.isTop&&(i=e);let s=C,l=e.prop(aH),r=!1;for(;l;){if(!l.context||wH(l.context,pH,t)){for(let g of l.tags){let I=this.style(g,i);I&&(s&&(s+=" "),s+=I,1==l.mode?C+=(C?" ":"")+I:0==l.mode&&(r=!0))}break}l=l.next}if(this.startSpan(g.from,s),r)return;let c=g.tree&&g.tree.prop(WY.mounted);if(c&&c.overlay){let e=g.node.enter(c.overlay[0].from+o,1),l=g.firstChild();for(let r=0,a=o;;r++){let d=r<c.overlay.length?c.overlay[r]:null,h=d?d.from+o:n,m=Math.max(I,a),Z=Math.min(A,h);if(m<Z&&l)for(;g.from<Z&&(this.highlightRange(g,m,Z,C,t+1,i),this.startSpan(Math.min(A,g.to),s),!(g.to>=h)&&g.nextSibling()););if(!d||h>A)break;a=d.to+o,a>I&&(this.highlightRange(e.cursor,Math.max(I,d.from+o),Math.min(A,a),C,t,c.tree.type),this.startSpan(a,s))}l&&g.parent()}else if(g.firstChild()){do{if(!(g.to<=I)){if(g.from>=A)break;this.highlightRange(g,I,A,C,t+1,i),this.startSpan(Math.min(A,g.to),s)}}while(g.nextSibling());g.parent()}}}function yH(g,I,A,C,t){let i=new BH(I,C,t);i.highlightRange(g.cursor(),I,A,"",0,g.type),i.flush(A)}function wH(g,I,A){if(g.length>A-1)return!1;for(let C=A-1,t=g.length-1;t>=0;t--,C--){let A=g[t];if(A&&A!=I[C])return!1}return!0}const WH=nH.define,SH=WH(),KH=WH(),fH=WH(KH),YH=WH(KH),XH=WH(),VH=WH(XH),OH=WH(XH),RH=WH(),QH=WH(RH),HH=WH(),kH=WH(),JH=WH(),vH=WH(JH),DH=WH(),MH={comment:SH,lineComment:WH(SH),blockComment:WH(SH),docComment:WH(SH),name:KH,variableName:WH(KH),typeName:fH,tagName:WH(fH),propertyName:YH,attributeName:WH(YH),className:WH(KH),labelName:WH(KH),namespace:WH(KH),macroName:WH(KH),literal:XH,string:VH,docString:WH(VH),character:WH(VH),attributeValue:WH(VH),number:OH,integer:WH(OH),float:WH(OH),bool:WH(XH),regexp:WH(XH),escape:WH(XH),color:WH(XH),url:WH(XH),keyword:HH,self:WH(HH),null:WH(HH),atom:WH(HH),unit:WH(HH),modifier:WH(HH),operatorKeyword:WH(HH),controlKeyword:WH(HH),definitionKeyword:WH(HH),operator:kH,derefOperator:WH(kH),arithmeticOperator:WH(kH),logicOperator:WH(kH),bitwiseOperator:WH(kH),compareOperator:WH(kH),updateOperator:WH(kH),definitionOperator:WH(kH),typeOperator:WH(kH),controlOperator:WH(kH),punctuation:JH,separator:WH(JH),bracket:vH,angleBracket:WH(vH),squareBracket:WH(vH),paren:WH(vH),brace:WH(vH),content:RH,heading:QH,heading1:WH(QH),heading2:WH(QH),heading3:WH(QH),heading4:WH(QH),heading5:WH(QH),heading6:WH(QH),contentSeparator:WH(RH),list:WH(RH),quote:WH(RH),emphasis:WH(RH),strong:WH(RH),link:WH(RH),monospace:WH(RH),strikethrough:WH(RH),inserted:WH(),deleted:WH(),changed:WH(),invalid:WH(),meta:DH,documentMeta:WH(DH),annotation:WH(DH),processingInstruction:WH(DH),definition:nH.defineModifier(),constant:nH.defineModifier(),function:nH.defineModifier(),standard:nH.defineModifier(),local:nH.defineModifier(),special:nH.defineModifier()},NH=uH.define([{tag:MH.link,textDecoration:"underline"},{tag:MH.heading,textDecoration:"underline",fontWeight:"bold"},{tag:MH.emphasis,fontStyle:"italic"},{tag:MH.strong,fontWeight:"bold"},{tag:MH.strikethrough,textDecoration:"line-through"},{tag:MH.keyword,color:"#708"},{tag:[MH.atom,MH.bool,MH.url,MH.contentSeparator,MH.labelName],color:"#219"},{tag:[MH.literal,MH.inserted],color:"#164"},{tag:[MH.string,MH.deleted],color:"#a11"},{tag:[MH.regexp,MH.escape,MH.special(MH.string)],color:"#e40"},{tag:MH.definition(MH.variableName),color:"#00f"},{tag:MH.local(MH.variableName),color:"#30a"},{tag:[MH.typeName,MH.namespace],color:"#085"},{tag:MH.className,color:"#167"},{tag:[MH.special(MH.variableName),MH.macroName],color:"#256"},{tag:MH.definition(MH.propertyName),color:"#00c"},{tag:MH.comment,color:"#940"},{tag:MH.meta,color:"#7a757a"},{tag:MH.invalid,color:"#f00"}]);class EH{constructor(g,I,A){this.from=g,this.to=I,this.diagnostic=A}}class FH{constructor(g,I,A){this.diagnostics=g,this.panel=I,this.selected=A}static init(g,I){let A=qW.set(g.map((g=>g.from<g.to?qW.mark({attributes:{class:"cm-lintRange cm-lintRange-"+g.severity},diagnostic:g}).range(g.from,g.to):qW.widget({widget:new Ik(g),diagnostic:g}).range(g.from))),!0);return new FH(A,I,LH(A))}}function LH(g,I=null,A=0){let C=null;return g.between(A,1e9,((g,A,{spec:t})=>{if(!I||t.diagnostic==I)return C=new EH(g,A,t.diagnostic),!1})),C}const TH=sw.define(),zH=sw.define(),PH=sw.define(),UH=Ny.define({create:()=>new FH(qW.none,null,null),update(g,I){if(I.docChanged){let A=g.diagnostics.map(I.changes),C=null;if(g.selected){let t=I.changes.mapPos(g.selected.from,1);C=LH(A,g.selected.diagnostic,t)||LH(A,null,t)}g=new FH(A,g.panel,C)}for(let A of I.effects)A.is(TH)?g=FH.init(A.value,g.panel):A.is(zH)?g=new FH(g.diagnostics,A.value?Ck.open:null,g.selected):A.is(PH)&&(g=new FH(g.diagnostics,g.panel,A.value));return g},provide:g=>[LO.from(g,(g=>g.panel)),hf.decorations.from(g,(g=>g.diagnostics))]}),xH=qW.mark({class:"cm-lintRange cm-lintRange-active"});function jH(g,I,A){let{diagnostics:C}=g.state.field(UH),t=[],i=2e8,e=0;return C.between(I-(A<0?1:0),I+(A>0?1:0),((g,C,{spec:o})=>{I>=g&&I<=C&&(g==C||(I>g||A>0)&&(I<C||A<0))&&(t.push(o.diagnostic),i=Math.min(g,i),e=Math.max(C,e))})),t.length?{pos:i,end:e,above:g.state.doc.lineAt(i).to<e,create:()=>({dom:TO("ul",{class:"cm-tooltip-lint"},t.map((I=>gk(g,I,!1))))})}:null}const _H=g=>{let I=g.state.field(UH,!1);return!(!I||!I.panel)&&(g.dispatch({effects:zH.of(!1)}),!0)},$H=[{key:"Mod-Shift-m",run:g=>{let I=g.state.field(UH,!1);var A,C,t;I&&I.panel||g.dispatch({effects:(A=g.state,C=[zH.of(!0)],t=()=>FH.init([],Ck.open),A.field(UH,!1)?C:C.concat(sw.appendConfig.of([UH.init(t),hf.decorations.compute([UH],(g=>{let{selected:I,panel:A}=g.field(UH);return I&&A&&I.from!=I.to?qW.set([xH.range(I.from,I.to)]):qW.none})),jR(jH),ik])))});let i=DO(g,Ck.open);return i&&i.dom.querySelector(".cm-panel-lint ul").focus(),!0}},{key:"F8",run:g=>{let I=g.state.field(UH,!1);if(!I)return!1;let A=g.state.selection.main,C=I.diagnostics.iter(A.to+1);return!(!C.value&&(C=I.diagnostics.iter(0),!C.value||C.from==A.from&&C.to==A.to))&&(g.dispatch({selection:{anchor:C.from,head:C.to},scrollIntoView:!0}),!0)}}];function qH(g){let I=[];if(g)g:for(let{name:A}of g){for(let g=0;g<A.length;g++){let C=A[g];if(/[a-zA-Z]/.test(C)&&!I.some((g=>g.toLowerCase()==C.toLowerCase()))){I.push(C);continue g}}I.push("")}return I}function gk(g,I,A){var C;let t=A?qH(I.actions):[];return TO("li",{class:"cm-diagnostic cm-diagnostic-"+I.severity},TO("span",{class:"cm-diagnosticText"},I.message),null===(C=I.actions)||void 0===C?void 0:C.map(((A,C)=>{let i=C=>{C.preventDefault();let t=LH(g.state.field(UH).diagnostics,I);t&&A.apply(g,t.from,t.to)},{name:e}=A,o=t[C]?e.indexOf(t[C]):-1,n=o<0?e:[e.slice(0,o),TO("u",e.slice(o,o+1)),e.slice(o+1)];return TO("button",{class:"cm-diagnosticAction",onclick:i,onmousedown:i,"aria-label":` Action: ${e}${o<0?"":` (access key "${t[C]})"`}.`},n)})),I.source&&TO("div",{class:"cm-diagnosticSource"},I.source))}class Ik extends _W{constructor(g){super(),this.diagnostic=g}eq(g){return g.diagnostic==this.diagnostic}toDOM(){return TO("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class Ak{constructor(g,I){this.diagnostic=I,this.id="item_"+Math.floor(4294967295*Math.random()).toString(16),this.dom=gk(g,I,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Ck{constructor(g){this.view=g,this.items=[];this.list=TO("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:I=>{if(27==I.keyCode)_H(this.view),this.view.focus();else if(38==I.keyCode||33==I.keyCode)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(40==I.keyCode||34==I.keyCode)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(36==I.keyCode)this.moveSelection(0);else if(35==I.keyCode)this.moveSelection(this.items.length-1);else if(13==I.keyCode)this.view.focus();else{if(!(I.keyCode>=65&&I.keyCode<=90&&this.selectedIndex>=0))return;{let{diagnostic:A}=this.items[this.selectedIndex],C=qH(A.actions);for(let t=0;t<C.length;t++)if(C[t].toUpperCase().charCodeAt(0)==I.keyCode){let I=LH(this.view.state.field(UH).diagnostics,A);I&&A.actions[t].apply(g,I.from,I.to)}}}I.preventDefault()},onclick:g=>{for(let I=0;I<this.items.length;I++)this.items[I].dom.contains(g.target)&&this.moveSelection(I)}}),this.dom=TO("div",{class:"cm-panel-lint"},this.list,TO("button",{name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>_H(this.view)},"√ó")),this.update()}get selectedIndex(){let g=this.view.state.field(UH).selected;if(!g)return-1;for(let I=0;I<this.items.length;I++)if(this.items[I].diagnostic==g.diagnostic)return I;return-1}update(){let{diagnostics:g,selected:I}=this.view.state.field(UH),A=0,C=!1,t=null;for(g.between(0,this.view.state.doc.length,((g,i,{spec:e})=>{let o,n=-1;for(let I=A;I<this.items.length;I++)if(this.items[I].diagnostic==e.diagnostic){n=I;break}n<0?(o=new Ak(this.view,e.diagnostic),this.items.splice(A,0,o),C=!0):(o=this.items[n],n>A&&(this.items.splice(A,n-A),C=!0)),I&&o.diagnostic==I.diagnostic?o.dom.hasAttribute("aria-selected")||(o.dom.setAttribute("aria-selected","true"),t=o):o.dom.hasAttribute("aria-selected")&&o.dom.removeAttribute("aria-selected"),A++}));A<this.items.length&&!(1==this.items.length&&this.items[0].diagnostic.from<0);)C=!0,this.items.pop();0==this.items.length&&(this.items.push(new Ak(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),C=!0),t?(this.list.setAttribute("aria-activedescendant",t.id),this.view.requestMeasure({key:this,read:()=>({sel:t.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:g,panel:I})=>{g.top<I.top?this.list.scrollTop-=I.top-g.top:g.bottom>I.bottom&&(this.list.scrollTop+=g.bottom-I.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),C&&this.sync()}sync(){let g=this.list.firstChild;function I(){let I=g;g=I.nextSibling,I.remove()}for(let A of this.items)if(A.dom.parentNode==this.list){for(;g!=A.dom;)I();g=A.dom.nextSibling}else this.list.insertBefore(A.dom,g);for(;g;)I()}moveSelection(g){if(this.selectedIndex<0)return;let I=LH(this.view.state.field(UH).diagnostics,this.items[g].diagnostic);I&&this.view.dispatch({selection:{anchor:I.from,head:I.to},scrollIntoView:!0,effects:PH.of(I)})}static open(g){return new Ck(g)}}function tk(g){if("function"!=typeof btoa)return"none";return`url('data:image/svg+xml;base64,${btoa(`<svg xmlns="http://www.w3.org/2000/svg" width="6" height="3">\n    <path d="m0 3 l2 -2 l1 0 l2 2 l1 0" stroke="${g}" fill="none" stroke-width=".7"/>\n  </svg>`)}')`}const ik=hf.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x"},".cm-lintRange-error":{backgroundImage:tk("#d11")},".cm-lintRange-warning":{backgroundImage:tk("orange")},".cm-lintRange-info":{backgroundImage:tk("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),ek=[UX(),$X(),Uf(),eY(),hV(),Of(),pw.allowMultipleSelections.of(!0),wX(),NH.fallback,yV(),SO(),PQ(),eH(),$f(),oR(),Wf.of([...VO,...bO,...RR,...pY,...nV,...qQ,...UQ,...$H])];class ok{constructor(g,I,A,C,t,i,e,o,n,s=0,l){this.p=g,this.stack=I,this.state=A,this.reducePos=C,this.pos=t,this.score=i,this.buffer=e,this.bufferBase=o,this.curContext=n,this.lookAhead=s,this.parent=l}toString(){return`[${this.stack.filter(((g,I)=>I%3==0)).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(g,I,A=0){let C=g.parser.context;return new ok(g,[],I,A,A,0,[],0,C?new nk(C,C.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(g,I){this.stack.push(this.state,I,this.bufferBase+this.buffer.length),this.state=g}reduce(g){let I=g>>19,A=65535&g,{parser:C}=this.p,t=C.dynamicPrecedence(A);if(t&&(this.score+=t),0==I)return A<C.minRepeatTerm&&this.storeNode(A,this.reducePos,this.reducePos,4,!0),this.pushState(C.getGoto(this.state,A,!0),this.reducePos),void this.reduceContext(A,this.reducePos);let i=this.stack.length-3*(I-1)-(262144&g?6:0),e=this.stack[i-2],o=this.stack[i-1],n=this.bufferBase+this.buffer.length-o;if(A<C.minRepeatTerm||131072&g){let g=C.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(A,e,g,n+4,!0)}if(262144&g)this.state=this.stack[i];else{let g=this.stack[i-3];this.state=C.getGoto(g,A,!0)}for(;this.stack.length>i;)this.stack.pop();this.reduceContext(A,e)}storeNode(g,I,A,C=4,t=!1){if(0==g){let g=this,C=this.buffer.length;if(0==C&&g.parent&&(C=g.bufferBase-g.parent.bufferBase,g=g.parent),C>0&&0==g.buffer[C-4]&&g.buffer[C-1]>-1){if(I==A)return;if(g.buffer[C-2]>=I)return void(g.buffer[C-2]=A)}}if(t&&this.pos!=A){let t=this.buffer.length;if(t>0&&0!=this.buffer[t-4])for(;t>0&&this.buffer[t-2]>A;)this.buffer[t]=this.buffer[t-4],this.buffer[t+1]=this.buffer[t-3],this.buffer[t+2]=this.buffer[t-2],this.buffer[t+3]=this.buffer[t-1],t-=4,C>4&&(C-=4);this.buffer[t]=g,this.buffer[t+1]=I,this.buffer[t+2]=A,this.buffer[t+3]=C}else this.buffer.push(g,I,A,C)}shift(g,I,A){let C=this.pos;if(131072&g)this.pushState(65535&g,this.pos);else if(0==(262144&g)){let t=g,{parser:i}=this.p;(A>this.pos||I<=i.maxNode)&&(this.pos=A,i.stateFlag(t,1)||(this.reducePos=A)),this.pushState(t,C),this.shiftContext(I,C),I<=i.maxNode&&this.buffer.push(I,C,A,4)}else this.pos=A,this.shiftContext(I,C),I<=this.p.parser.maxNode&&this.buffer.push(I,C,A,4)}apply(g,I,A){65536&g?this.reduce(g):this.shift(g,I,A)}useNode(g,I){let A=this.p.reused.length-1;(A<0||this.p.reused[A]!=g)&&(this.p.reused.push(g),A++);let C=this.pos;this.reducePos=this.pos=C+g.length,this.pushState(I,C),this.buffer.push(A,C,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,g,this,this.p.stream.reset(this.pos-g.length)))}split(){let g=this,I=g.buffer.length;for(;I>0&&g.buffer[I-2]>g.reducePos;)I-=4;let A=g.buffer.slice(I),C=g.bufferBase+I;for(;g&&C==g.bufferBase;)g=g.parent;return new ok(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,A,C,this.curContext,this.lookAhead,g)}recoverByDelete(g,I){let A=g<=this.p.parser.maxNode;A&&this.storeNode(g,this.pos,I,4),this.storeNode(0,this.pos,I,A?8:4),this.pos=this.reducePos=I,this.score-=190}canShift(g){for(let I=new rk(this);;){let A=this.p.parser.stateSlot(I.state,4)||this.p.parser.hasAction(I.state,g);if(0==(65536&A))return!0;if(0==A)return!1;I.reduce(A)}}recoverByInsert(g){if(this.stack.length>=300)return[];let I=this.p.parser.nextStates(this.state);if(I.length>8||this.stack.length>=120){let A=[];for(let C,t=0;t<I.length;t+=2)(C=I[t+1])!=this.state&&this.p.parser.hasAction(C,g)&&A.push(I[t],C);if(this.stack.length<120)for(let g=0;A.length<8&&g<I.length;g+=2){let C=I[g+1];A.some(((g,I)=>1&I&&g==C))||A.push(I[g],C)}I=A}let A=[];for(let C=0;C<I.length&&A.length<4;C+=2){let g=I[C+1];if(g==this.state)continue;let t=this.split();t.storeNode(0,t.pos,t.pos,4,!0),t.pushState(g,this.pos),t.shiftContext(I[C],this.pos),t.score-=200,A.push(t)}return A}forceReduce(){let g=this.p.parser.stateSlot(this.state,5);return 0!=(65536&g)&&(this.p.parser.validAction(this.state,g)||(this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100),this.reduce(g),!0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2)&&this.forceReduce(););return this}get deadEnd(){if(3!=this.stack.length)return!1;let{parser:g}=this.p;return 65535==g.data[g.stateSlot(this.state,1)]&&!g.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(g){if(this.state!=g.state||this.stack.length!=g.stack.length)return!1;for(let I=0;I<this.stack.length;I+=3)if(this.stack[I]!=g.stack[I])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(g){return this.p.parser.dialect.flags[g]}shiftContext(g,I){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,g,this,this.p.stream.reset(I)))}reduceContext(g,I){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,g,this,this.p.stream.reset(I)))}emitContext(){let g=this.buffer.length-1;(g<0||-3!=this.buffer[g])&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let g=this.buffer.length-1;(g<0||-4!=this.buffer[g])&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(g){if(g!=this.curContext.context){let I=new nk(this.curContext.tracker,g);I.hash!=this.curContext.hash&&this.emitContext(),this.curContext=I}}setLookAhead(g){g>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=g)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class nk{constructor(g,I){this.tracker=g,this.context=I,this.hash=g.strict?g.hash(I):0}}var sk,lk;(lk=sk||(sk={}))[lk.Insert=200]="Insert",lk[lk.Delete=190]="Delete",lk[lk.Reduce=100]="Reduce",lk[lk.MaxNext=4]="MaxNext",lk[lk.MaxInsertStackDepth=300]="MaxInsertStackDepth",lk[lk.DampenInsertStackDepth=120]="DampenInsertStackDepth";class rk{constructor(g){this.start=g,this.state=g.state,this.stack=g.stack,this.base=this.stack.length}reduce(g){let I=65535&g,A=g>>19;0==A?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=3*(A-1);let C=this.start.p.parser.getGoto(this.stack[this.base-3],I,!0);this.state=C}}class ck{constructor(g,I,A){this.stack=g,this.pos=I,this.index=A,this.buffer=g.buffer,0==this.index&&this.maybeNext()}static create(g,I=g.bufferBase+g.buffer.length){return new ck(g,I,I-g.bufferBase)}maybeNext(){let g=this.stack.parent;null!=g&&(this.index=this.stack.bufferBase-g.bufferBase,this.stack=g,this.buffer=g.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()}fork(){return new ck(this.stack,this.pos,this.index)}}class ak{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const dk=new ak;class hk{constructor(g,I){this.input=g,this.ranges=I,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=dk,this.rangeIndex=0,this.pos=this.chunkPos=I[0].from,this.range=I[0],this.end=I[I.length-1].to,this.readNext()}resolveOffset(g,I){let A=this.range,C=this.rangeIndex,t=this.pos+g;for(;t<A.from;){if(!C)return null;let g=this.ranges[--C];t-=A.from-g.to,A=g}for(;I<0?t>A.to:t>=A.to;){if(C==this.ranges.length-1)return null;let g=this.ranges[++C];t+=g.from-A.to,A=g}return t}peek(g){let I,A,C=this.chunkOff+g;if(C>=0&&C<this.chunk.length)I=this.pos+g,A=this.chunk.charCodeAt(C);else{let C=this.resolveOffset(g,1);if(null==C)return-1;if(I=C,I>=this.chunk2Pos&&I<this.chunk2Pos+this.chunk2.length)A=this.chunk2.charCodeAt(I-this.chunk2Pos);else{let g=this.rangeIndex,C=this.range;for(;C.to<=I;)C=this.ranges[++g];this.chunk2=this.input.chunk(this.chunk2Pos=I),I+this.chunk2.length>C.to&&(this.chunk2=this.chunk2.slice(0,C.to-I)),A=this.chunk2.charCodeAt(0)}}return I>this.token.lookAhead&&(this.token.lookAhead=I),A}acceptToken(g,I=0){let A=I?this.resolveOffset(I,-1):this.pos;if(null==A||A<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=g,this.token.end=A}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:g,chunkPos:I}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=g,this.chunk2Pos=I,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let g=this.input.chunk(this.pos),I=this.pos+g.length;this.chunk=I>this.range.to?g.slice(0,this.range.to-this.pos):g,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(g=1){for(this.chunkOff+=g;this.pos+g>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();g-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=g,this.pos>this.token.lookAhead&&(this.token.lookAhead=this.pos),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(g,I){if(I?(this.token=I,I.start=I.lookAhead=g,I.value=I.extended=-1):this.token=dk,this.pos!=g){if(this.pos=g,g==this.end)return this.setDone(),this;for(;g<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;g>=this.range.to;)this.range=this.ranges[++this.rangeIndex];g>=this.chunkPos&&g<this.chunkPos+this.chunk.length?this.chunkOff=g-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(g,I){if(g>=this.chunkPos&&I<=this.chunkPos+this.chunk.length)return this.chunk.slice(g-this.chunkPos,I-this.chunkPos);if(g>=this.range.from&&I<=this.range.to)return this.input.read(g,I);let A="";for(let C of this.ranges){if(C.from>=I)break;C.to>g&&(A+=this.input.read(Math.max(C.from,g),Math.min(C.to,I)))}return A}}class mk{constructor(g,I){this.data=g,this.id=I}token(g,I){!function(g,I,A,C){let t=0,i=1<<C,{parser:e}=A.p,{dialect:o}=e;g:for(;0!=(i&g[t]);){let A=g[t+1];for(let C=t+3;C<A;C+=2)if((g[C+1]&i)>0){let A=g[C];if(o.allows(A)&&(-1==I.token.value||I.token.value==A||e.overrides(A,I.token.value))){I.acceptToken(A);break}}for(let C=I.next,i=0,e=g[t+2];i<e;){let o=i+e>>1,n=A+o+(o<<1),s=g[n],l=g[n+1];if(C<s)e=o;else{if(!(C>=l)){t=g[n+2],I.advance();continue g}i=o+1}}break}}(this.data,g,I,this.id)}}mk.prototype.contextual=mk.prototype.fallback=mk.prototype.extend=!1;class Zk{constructor(g,I={}){this.token=g,this.contextual=!!I.contextual,this.fallback=!!I.fallback,this.extend=!!I.extend}}function uk(g,I=Uint16Array){if("string"!=typeof g)return g;let A=null;for(let C=0,t=0;C<g.length;){let i=0;for(;;){let I=g.charCodeAt(C++),A=!1;if(126==I){i=65535;break}I>=92&&I--,I>=34&&I--;let t=I-32;if(t>=46&&(t-=46,A=!0),i+=t,A)break;i*=46}A?A[t++]=i:A=new I(i)}return A}const Gk="undefined"!=typeof process&&/\bparse\b/.test({}.LOG);let bk=null;var pk,Bk,yk,wk;function Wk(g,I,A){let C=g.fullCursor();for(C.moveTo(I);;)if(!(A<0?C.childBefore(I):C.childAfter(I)))for(;;){if((A<0?C.to<I:C.from>I)&&!C.type.isError)return A<0?Math.max(0,Math.min(C.to-1,I-25)):Math.min(g.length,Math.max(C.from+1,I+25));if(A<0?C.prevSibling():C.nextSibling())break;if(!C.parent())return A<0?0:g.length}}(Bk=pk||(pk={}))[Bk.Margin=25]="Margin";class Sk{constructor(g,I){this.fragments=g,this.nodeSet=I,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let g=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(g){for(this.safeFrom=g.openStart?Wk(g.tree,g.from+g.offset,1)-g.offset:g.from,this.safeTo=g.openEnd?Wk(g.tree,g.to+g.offset,-1)-g.offset:g.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(g.tree),this.start.push(-g.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(g){if(g<this.nextStart)return null;for(;this.fragment&&this.safeTo<=g;)this.nextFragment();if(!this.fragment)return null;for(;;){let I=this.trees.length-1;if(I<0)return this.nextFragment(),null;let A=this.trees[I],C=this.index[I];if(C==A.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let t=A.children[C],i=this.start[I]+A.positions[C];if(i>g)return this.nextStart=i,null;if(t instanceof XY){if(i==g){if(i<this.safeFrom)return null;let g=i+t.length;if(g<=this.safeTo){let I=t.prop(WY.lookAhead);if(!I||g+I<this.fragment.to)return t}}this.index[I]++,i+t.length>=Math.max(this.safeFrom,g)&&(this.trees.push(t),this.start.push(i),this.index.push(0))}else this.index[I]++,this.nextStart=i+t.length}}}class Kk{constructor(g,I){this.stream=I,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=g.tokenizers.map((g=>new ak))}getActions(g){let I=0,A=null,{parser:C}=g.p,{tokenizers:t}=C,i=C.stateSlot(g.state,3),e=g.curContext?g.curContext.hash:0,o=0;for(let n=0;n<t.length;n++){if(0==(1<<n&i))continue;let C=t[n],s=this.tokens[n];if((!A||C.fallback)&&((C.contextual||s.start!=g.pos||s.mask!=i||s.context!=e)&&(this.updateCachedToken(s,C,g),s.mask=i,s.context=e),s.lookAhead>s.end+25&&(o=Math.max(s.lookAhead,o)),0!=s.value)){let t=I;if(s.extended>-1&&(I=this.addActions(g,s.extended,s.end,I)),I=this.addActions(g,s.value,s.end,I),!C.extend&&(A=s,I>t))break}}for(;this.actions.length>I;)this.actions.pop();return o&&g.setLookAhead(o),A||g.pos!=this.stream.end||(A=new ak,A.value=g.p.parser.eofTerm,A.start=A.end=g.pos,I=this.addActions(g,A.value,A.end,I)),this.mainToken=A,this.actions}getMainToken(g){if(this.mainToken)return this.mainToken;let I=new ak,{pos:A,p:C}=g;return I.start=A,I.end=Math.min(A+1,C.stream.end),I.value=A==C.stream.end?C.parser.eofTerm:0,I}updateCachedToken(g,I,A){if(I.token(this.stream.reset(A.pos,g),A),g.value>-1){let{parser:I}=A.p;for(let C=0;C<I.specialized.length;C++)if(I.specialized[C]==g.value){let t=I.specializers[C](this.stream.read(g.start,g.end),A);if(t>=0&&A.p.parser.dialect.allows(t>>1)){0==(1&t)?g.value=t>>1:g.extended=t>>1;break}}}else g.value=0,g.end=Math.min(A.p.stream.end,A.pos+1)}putAction(g,I,A,C){for(let t=0;t<C;t+=3)if(this.actions[t]==g)return C;return this.actions[C++]=g,this.actions[C++]=I,this.actions[C++]=A,C}addActions(g,I,A,C){let{state:t}=g,{parser:i}=g.p,{data:e}=i;for(let o=0;o<2;o++)for(let g=i.stateSlot(t,o?2:1);;g+=3){if(65535==e[g]){if(1!=e[g+1]){0==C&&2==e[g+1]&&(C=this.putAction(Qk(e,g+1),I,A,C));break}g=Qk(e,g+2)}e[g]==I&&(C=this.putAction(Qk(e,g+1),I,A,C))}return C}}(wk=yk||(yk={}))[wk.Distance=5]="Distance",wk[wk.MaxRemainingPerStep=3]="MaxRemainingPerStep",wk[wk.MinBufferLengthPrune=200]="MinBufferLengthPrune",wk[wk.ForceReduceLimit=10]="ForceReduceLimit";class fk{constructor(g,I,A,C){this.parser=g,this.input=I,this.ranges=C,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.stream=new hk(I,C),this.tokens=new Kk(g,this.stream),this.topTerm=g.top[1];let{from:t}=C[0];this.stacks=[ok.start(this,g.top[0],t)],this.fragments=A.length&&this.stream.end-t>4*g.bufferLength?new Sk(A,g.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let g,I,A=this.stacks,C=this.minStackPos,t=this.stacks=[];for(let i=0;i<A.length;i++){let e=A[i];for(;;){if(this.tokens.mainToken=null,e.pos>C)t.push(e);else{if(this.advanceStack(e,t,A))continue;{g||(g=[],I=[]),g.push(e);let A=this.tokens.getMainToken(e);I.push(A.value,A.end)}}break}}if(!t.length){let I=g&&function(g){let I=null;for(let A of g){let g=A.p.stoppedAt;(A.pos==A.p.stream.end||null!=g&&A.pos>g)&&A.p.parser.stateFlag(A.state,2)&&(!I||I.score<A.score)&&(I=A)}return I}(g);if(I)return this.stackToTree(I);if(this.parser.strict)throw Gk&&g&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+C);this.recovering||(this.recovering=5)}if(this.recovering&&g){let A=this.runRecovery(g,I,t);if(A)return this.stackToTree(A.forceAll())}if(this.recovering){let g=1==this.recovering?1:3*this.recovering;if(t.length>g)for(t.sort(((g,I)=>I.score-g.score));t.length>g;)t.pop();t.some((g=>g.reducePos>C))&&this.recovering--}else if(t.length>1)g:for(let i=0;i<t.length-1;i++){let g=t[i];for(let I=i+1;I<t.length;I++){let A=t[I];if(g.sameState(A)||g.buffer.length>200&&A.buffer.length>200){if(!((g.score-A.score||g.buffer.length-A.buffer.length)>0)){t.splice(i--,1);continue g}t.splice(I--,1)}}}this.minStackPos=t[0].pos;for(let i=1;i<t.length;i++)t[i].pos<this.minStackPos&&(this.minStackPos=t[i].pos);return null}stopAt(g){if(null!=this.stoppedAt&&this.stoppedAt<g)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=g}advanceStack(g,I,A){let C=g.pos,{parser:t}=this,i=Gk?this.stackID(g)+" -> ":"";if(null!=this.stoppedAt&&C>this.stoppedAt)return g.forceReduce()?g:null;if(this.fragments){let I=g.curContext&&g.curContext.tracker.strict,A=I?g.curContext.hash:0;for(let e=this.fragments.nodeAt(C);e;){let C=this.parser.nodeSet.types[e.type.id]==e.type?t.getGoto(g.state,e.type.id):-1;if(C>-1&&e.length&&(!I||(e.prop(WY.contextHash)||0)==A))return g.useNode(e,C),Gk&&console.log(i+this.stackID(g)+` (via reuse of ${t.getName(e.type.id)})`),!0;if(!(e instanceof XY)||0==e.children.length||e.positions[0]>0)break;let o=e.children[0];if(!(o instanceof XY&&0==e.positions[0]))break;e=o}}let e=t.stateSlot(g.state,4);if(e>0)return g.reduce(e),Gk&&console.log(i+this.stackID(g)+` (via always-reduce ${t.getName(65535&e)})`),!0;let o=this.tokens.getActions(g);for(let n=0;n<o.length;){let e=o[n++],s=o[n++],l=o[n++],r=n==o.length||!A,c=r?g:g.split();if(c.apply(e,s,l),Gk&&console.log(i+this.stackID(c)+` (via ${0==(65536&e)?"shift":`reduce of ${t.getName(65535&e)}`} for ${t.getName(s)} @ ${C}${c==g?"":", split"})`),r)return!0;c.pos>C?I.push(c):A.push(c)}return!1}advanceFully(g,I){let A=g.pos;for(;;){if(!this.advanceStack(g,null,null))return!1;if(g.pos>A)return Yk(g,I),!0}}runRecovery(g,I,A){let C=null,t=!1;for(let i=0;i<g.length;i++){let e=g[i],o=I[i<<1],n=I[1+(i<<1)],s=Gk?this.stackID(e)+" -> ":"";if(e.deadEnd){if(t)continue;if(t=!0,e.restart(),Gk&&console.log(s+this.stackID(e)+" (restarted)"),this.advanceFully(e,A))continue}let l=e.split(),r=s;for(let g=0;l.forceReduce()&&g<10;g++){if(Gk&&console.log(r+this.stackID(l)+" (via force-reduce)"),this.advanceFully(l,A))break;Gk&&(r=this.stackID(l)+" -> ")}for(let g of e.recoverByInsert(o))Gk&&console.log(s+this.stackID(g)+" (via recover-insert)"),this.advanceFully(g,A);this.stream.end>e.pos?(n==e.pos&&(n++,o=0),e.recoverByDelete(o,n),Gk&&console.log(s+this.stackID(e)+` (via recover-delete ${this.parser.getName(o)})`),Yk(e,A)):(!C||C.score<e.score)&&(C=e)}return C}stackToTree(g){return g.close(),XY.build({buffer:ck.create(g),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:g.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(g){let I=(bk||(bk=new WeakMap)).get(g);return I||bk.set(g,I=String.fromCodePoint(this.nextStackID++)),I+g}}function Yk(g,I){for(let A=0;A<I.length;A++){let C=I[A];if(C.pos==g.pos&&C.sameState(g))return void(I[A].score<g.score&&(I[A]=g))}I.push(g)}class Xk{constructor(g,I,A){this.source=g,this.flags=I,this.disabled=A}allows(g){return!this.disabled||0==this.disabled[g]}}const Vk=g=>g;class Ok{constructor(g){this.start=g.start,this.shift=g.shift||Vk,this.reduce=g.reduce||Vk,this.reuse=g.reuse||Vk,this.hash=g.hash||(()=>0),this.strict=!1!==g.strict}}class Rk extends TY{constructor(g){if(super(),this.wrappers=[],13!=g.version)throw new RangeError(`Parser version (${g.version}) doesn't match runtime version (13)`);let I=g.nodeNames.split(" ");this.minRepeatTerm=I.length;for(let e=0;e<g.repeatNodeCount;e++)I.push("");let A=Object.keys(g.topRules).map((I=>g.topRules[I][1])),C=[];for(let e=0;e<I.length;e++)C.push([]);function t(g,I,A){C[g].push([I,I.deserialize(String(A))])}if(g.nodeProps)for(let e of g.nodeProps){let g=e[0];for(let I=1;I<e.length;){let A=e[I++];if(A>=0)t(A,g,e[I++]);else{let C=e[I+-A];for(let i=-A;i>0;i--)t(e[I++],g,C);I++}}}this.nodeSet=new fY(I.map(((I,t)=>KY.define({name:t>=this.minRepeatTerm?void 0:I,id:t,props:C[t],top:A.indexOf(t)>-1,error:0==t,skipped:g.skippedNodes&&g.skippedNodes.indexOf(t)>-1})))),this.strict=!1,this.bufferLength=BY;let i=uk(g.tokenData);if(this.context=g.context,this.specialized=new Uint16Array(g.specialized?g.specialized.length:0),this.specializers=[],g.specialized)for(let e=0;e<g.specialized.length;e++)this.specialized[e]=g.specialized[e].term,this.specializers[e]=g.specialized[e].get;this.states=uk(g.states,Uint32Array),this.data=uk(g.stateData),this.goto=uk(g.goto),this.maxTerm=g.maxTerm,this.tokenizers=g.tokenizers.map((g=>"number"==typeof g?new mk(i,g):g)),this.topRules=g.topRules,this.dialects=g.dialects||{},this.dynamicPrecedences=g.dynamicPrecedences||null,this.tokenPrecTable=g.tokenPrec,this.termNames=g.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(g,I,A){let C=new fk(this,g,I,A);for(let t of this.wrappers)C=t(C,g,I,A);return C}getGoto(g,I,A=!1){let C=this.goto;if(I>=C[0])return-1;for(let t=C[I+1];;){let I=C[t++],i=1&I,e=C[t++];if(i&&A)return e;for(let A=t+(I>>1);t<A;t++)if(C[t]==g)return e;if(i)return-1}}hasAction(g,I){let A=this.data;for(let C=0;C<2;C++)for(let t,i=this.stateSlot(g,C?2:1);;i+=3){if(65535==(t=A[i])){if(1!=A[i+1]){if(2==A[i+1])return Qk(A,i+2);break}t=A[i=Qk(A,i+2)]}if(t==I||0==t)return Qk(A,i+1)}return 0}stateSlot(g,I){return this.states[6*g+I]}stateFlag(g,I){return(this.stateSlot(g,0)&I)>0}validAction(g,I){if(I==this.stateSlot(g,4))return!0;for(let A=this.stateSlot(g,1);;A+=3){if(65535==this.data[A]){if(1!=this.data[A+1])return!1;A=Qk(this.data,A+2)}if(I==Qk(this.data,A+1))return!0}}nextStates(g){let I=[];for(let A=this.stateSlot(g,1);;A+=3){if(65535==this.data[A]){if(1!=this.data[A+1])break;A=Qk(this.data,A+2)}if(0==(1&this.data[A+2])){let g=this.data[A+1];I.some(((I,A)=>1&A&&I==g))||I.push(this.data[A],g)}}return I}overrides(g,I){let A=Hk(this.data,this.tokenPrecTable,I);return A<0||Hk(this.data,this.tokenPrecTable,g)<A}configure(g){let I=Object.assign(Object.create(Rk.prototype),this);if(g.props&&(I.nodeSet=this.nodeSet.extend(...g.props)),g.top){let A=this.topRules[g.top];if(!A)throw new RangeError(`Invalid top rule name ${g.top}`);I.top=A}return g.tokenizers&&(I.tokenizers=this.tokenizers.map((I=>{let A=g.tokenizers.find((g=>g.from==I));return A?A.to:I}))),g.contextTracker&&(I.context=g.contextTracker),g.dialect&&(I.dialect=this.parseDialect(g.dialect)),null!=g.strict&&(I.strict=g.strict),g.wrap&&(I.wrappers=I.wrappers.concat(g.wrap)),null!=g.bufferLength&&(I.bufferLength=g.bufferLength),I}getName(g){return this.termNames?this.termNames[g]:String(g<=this.maxNode&&this.nodeSet.types[g].name||g)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(g){let I=this.dynamicPrecedences;return null==I?0:I[g]||0}parseDialect(g){let I=Object.keys(this.dialects),A=I.map((()=>!1));if(g)for(let t of g.split(" ")){let g=I.indexOf(t);g>=0&&(A[g]=!0)}let C=null;for(let t=0;t<I.length;t++)if(!A[t])for(let g,A=this.dialects[I[t]];65535!=(g=this.data[A++]);)(C||(C=new Uint8Array(this.maxTerm+1)))[g]=1;return new Xk(g,A,C)}static deserialize(g){return new Rk(g)}}function Qk(g,I){return g[I]|g[I+1]<<16}function Hk(g,I,A){for(let C,t=I;65535!=(C=g[t]);t++)if(C==A)return t-I;return-1}const kk=272,Jk=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],vk=new Ok({start:!1,shift:(g,I)=>4==I||5==I||277==I?g:278==I,strict:!1}),Dk=new Zk(((g,I)=>{let{next:A}=g;(125==A||-1==A||I.context)&&I.canShift(275)&&g.acceptToken(275)}),{contextual:!0,fallback:!0}),Mk=new Zk(((g,I)=>{let A,{next:C}=g;Jk.indexOf(C)>-1||(47!=C||47!=(A=g.peek(1))&&42!=A)&&125!=C&&59!=C&&-1!=C&&!I.context&&I.canShift(271)&&g.acceptToken(271)}),{contextual:!0}),Nk=new Zk(((g,I)=>{let{next:A}=g;if((43==A||45==A)&&(g.advance(),A==g.next)){g.advance();let A=!I.context&&I.canShift(1);g.acceptToken(A?1:2)}}),{contextual:!0}),Ek=new Zk((g=>{for(let I=!1,A=0;;A++){let{next:C}=g;if(C<0){A&&g.acceptToken(kk);break}if(96==C){A?g.acceptToken(kk):g.acceptToken(274,1);break}if(123==C&&I){1==A?g.acceptToken(273,1):g.acceptToken(kk,-1);break}if(10==C&&A){g.advance(),g.acceptToken(kk);break}92==C&&g.advance(),I=36==C,g.advance()}}));const Fk={__proto__:null,export:16,as:21,from:25,default:30,async:35,function:36,this:46,true:54,false:54,void:60,typeof:64,null:78,super:80,new:114,await:131,yield:133,delete:134,class:144,extends:146,public:183,private:183,protected:183,readonly:185,in:204,instanceof:206,const:208,import:240,keyof:291,unique:295,infer:301,is:335,abstract:355,implements:357,type:359,let:362,var:364,interface:371,enum:375,namespace:381,module:383,declare:387,global:391,for:412,of:421,while:424,with:428,do:432,if:436,else:438,switch:442,case:448,try:454,catch:456,finally:458,return:462,throw:466,break:470,continue:474,debugger:478},Lk={__proto__:null,async:101,get:103,set:105,public:153,private:153,protected:153,static:155,abstract:157,readonly:161,new:339},Tk={__proto__:null,"<":121},zk=Rk.deserialize({version:13,states:"$-tO`QYOOO&}Q!LdO'#CgO'UOSO'#DSO)^QYO'#DXO)nQYO'#DdO)uQYO'#DnO-lQYO'#DtOOQO'#EU'#EUO.PQWO'#ETO.UQWO'#ETO0TQ!LdO'#ImO2kQ!LdO'#InO3XQWO'#ErO3^QpO'#FXOOQ!LS'#Ez'#EzO3fO!bO'#EzO3tQWO'#F`O5RQWO'#F_OOQ!LS'#In'#InOOQ!LQ'#Im'#ImOOQQ'#JV'#JVO5WQWO'#HfO5]Q!LYO'#HgOOQQ'#I_'#I_OOQQ'#Hh'#HhQ`QYOOO)uQYO'#DfO5eQWO'#GSO5jQ#tO'#ClO5xQWO'#ESO6TQ#tO'#EyO6oQWO'#GSO6tQWO'#GWO7PQWO'#GWO7_QWO'#GZO7_QWO'#G[O7_QWO'#G^O5eQWO'#GaO8OQWO'#GdO9^QWO'#CcO9nQWO'#GqO9vQWO'#GwO9vQWO'#GyO`QYO'#G{O9vQWO'#G}O9vQWO'#HQO9{QWO'#HWO:QQ!LZO'#H[O)uQYO'#H^O:]Q!LZO'#H`O:hQ!LZO'#HbO5]Q!LYO'#HdO)uQYO'#IoOOOS'#Hj'#HjO:sOSO,59nOOQ!LS,59n,59nO=UQbO'#CgO=`QYO'#HkO=mQWO'#IpO?lQbO'#IpO'aQYO'#IpO?sQWO,59sO@ZQ&jO'#D^OASQWO'#EUOAaQWO'#IzOAlQWO'#IyOAtQWO,5:rOAyQWO'#IxOBQQWO'#DuO5jQ#tO'#ESOB`QWO'#ESOBkQ`O'#EyOOQ!LS,5:O,5:OOBsQYO,5:OODqQ!LdO,5:YOE_QWO,5:`OExQ!LYO'#IwO6tQWO'#IvOFPQWO'#IvOFXQWO,5:qOF^QWO'#IvOFlQYO,5:oOHiQWO'#EQOIsQWO,5:oOKSQWO'#DhOKZQYO'#DmOKeQ&jO,5:xO)uQYO,5:xOOQQ'#Ej'#EjOOQQ'#El'#ElO)uQYO,5:yO)uQYO,5:yO)uQYO,5:yO)uQYO,5:yO)uQYO,5:yO)uQYO,5:yO)uQYO,5:yO)uQYO,5:yO)uQYO,5:yO)uQYO,5:yO)uQYO,5:yOOQQ'#Ep'#EpOKjQYO,5;ZOOQ!LS,5;`,5;`OOQ!LS,5;a,5;aOMgQWO,5;aOOQ!LS,5;b,5;bO)uQYO'#HuOMlQ!LYO,5;{ONWQWO,5:yO)uQYO,5;^ONpQpO'#JOON_QpO'#JOONwQpO'#JOO! YQpO,5;iOOQO,5;s,5;sO! hQYO'#FZOOOO'#Ht'#HtO3fO!bO,5;fO! oQpO'#F]OOQ!LS,5;f,5;fO!!]Q,UO'#CqOOQ!LS'#Ct'#CtO!!pQWO'#CtO!!uOSO'#CxO!#cQ#tO,5;xO!#jQWO,5;zO!$vQWO'#FjO!%TQWO'#FkO!%YQWO'#FoO!&[Q&jO'#FsO!&}Q,UO'#IhOOQ!LS'#Ih'#IhO!'XQWO'#IgO!'gQWO'#IfOOQ!LS'#Cr'#CrOOQ!LS'#Cy'#CyO!'oQWO'#C{OIxQWO'#FbOIxQWO'#FdO!'tQWO'#FfO!'yQWO'#FgO!(OQWO'#FmOIxQWO'#FrO!(TQWO'#EVO!(lQWO,5;yO`QYO,5>QOOQQ'#Ib'#IbOOQQ,5>R,5>ROOQQ-E;f-E;fO!*hQ!LdO,5:QOOQ!LQ'#Co'#CoO!+XQ#tO,5<nOOQO'#Ce'#CeO!+jQWO'#CpO!+rQ!LYO'#IcO5RQWO'#IcO9{QWO,59WO!,QQpO,59WO!,YQ#tO,59WO5jQ#tO,59WO!,eQWO,5:oO!,mQWO'#GpO!,uQWO'#JZO)uQYO,5;cOKeQ&jO,5;eO!,}QWO,5=ZO!-SQWO,5=ZO!-XQWO,5=ZO5]Q!LYO,5=ZO5eQWO,5<nO!-gQWO'#EWO!-xQ&jO'#EXOOQ!LQ'#Ix'#IxO!.ZQ!LYO'#JWO5]Q!LYO,5<rO7_QWO,5<xOOQO'#Cq'#CqO!.fQpO,5<uO!.nQ#tO,5<vO!.yQWO,5<xO!/OQ`O,5<{O9{QWO'#GfO5eQWO'#GhO!/WQWO'#GhO5jQ#tO'#GkO!/]QWO'#GkOOQQ,5=O,5=OO!/bQWO'#GlO!/jQWO'#ClO!/oQWO,58}O!/yQWO,58}O!1xQYO,58}OOQQ,58},58}O!2VQ!LYO,58}O)uQYO,58}O!2bQYO'#GsOOQQ'#Gt'#GtOOQQ'#Gu'#GuO`QYO,5=]O!2rQWO,5=]O)uQYO'#DtO`QYO,5=cO`QYO,5=eO!2wQWO,5=gO`QYO,5=iO!2|QWO,5=lO!3RQYO,5=rOOQQ,5=v,5=vO)uQYO,5=vO5]Q!LYO,5=xOOQQ,5=z,5=zO!7PQWO,5=zOOQQ,5=|,5=|O!7PQWO,5=|OOQQ,5>O,5>OO!7UQ`O,5?ZOOOS-E;h-E;hOOQ!LS1G/Y1G/YO!7ZQbO,5>VO)uQYO,5>VOOQO-E;i-E;iO!7eQWO,5?[O!7mQbO,5?[O!7tQWO,5?eOOQ!LS1G/_1G/_O!7|QpO'#DQOOQO'#Ir'#IrO)uQYO'#IrO!8kQpO'#IrO!9YQpO'#D_O!9kQ&jO'#D_O!;sQYO'#D_O!;zQWO'#IqO!<SQWO,59xO!<XQWO'#EYO!<gQWO'#I{O!<oQWO,5:sO!=VQ&jO'#D_O)uQYO,5?fO!=aQWO'#HpO!7tQWO,5?eOOQ!LQ1G0^1G0^O!>gQ&jO'#DxOOQ!LS,5:a,5:aO)uQYO,5:aOHiQWO,5:aO!>nQWO,5:aO9{QWO,5:nO!,QQpO,5:nO!,YQ#tO,5:nO5jQ#tO,5:nOOQ!LS1G/j1G/jOOQ!LS1G/z1G/zOOQ!LQ'#EP'#EPO)uQYO,5?cO!>yQ!LYO,5?cO!?[Q!LYO,5?cO!?cQWO,5?bO!?kQWO'#HrO!?cQWO,5?bOOQ!LQ1G0]1G0]O6tQWO,5?bOOQ!LS1G0Z1G0ZO!@VQ!LdO1G0ZO!@vQ!LbO,5:lOOQ!LS'#Fi'#FiO!AdQ!LdO'#IhOFlQYO1G0ZO!CcQ#tO'#IsO!CmQWO,5:SO!CrQbO'#ItO)uQYO'#ItO!C|QWO,5:XOOQ!LS'#DQ'#DQOOQ!LS1G0d1G0dO!DRQWO1G0dO!FdQ!LdO1G0eO!FkQ!LdO1G0eO!IOQ!LdO1G0eO!IVQ!LdO1G0eO!K^Q!LdO1G0eO!KqQ!LdO1G0eO!NbQ!LdO1G0eO!NiQ!LdO1G0eO#!|Q!LdO1G0eO##TQ!LdO1G0eO#$xQ!LdO1G0eO#'rQ7^O'#CgO#)mQ7^O1G0uO#+hQ7^O'#InOOQ!LS1G0{1G0{O#+{Q!LdO,5>aOOQ!LQ-E;s-E;sO#,lQ!LdO1G0eOOQ!LS1G0e1G0eO#.nQ!LdO1G0xO#/_QpO,5;kO#/dQpO,5;lO#/iQpO'#FSO#/}QWO'#FROOQO'#JP'#JPOOQO'#Hs'#HsO#0SQpO1G1TOOQ!LS1G1T1G1TOOQO1G1^1G1^O#0bQ7^O'#ImO#0lQWO,5;uOKjQYO,5;uOOOO-E;r-E;rOOQ!LS1G1Q1G1QOOQ!LS,5;w,5;wO#0qQpO,5;wOOQ!LS,59`,59`OHiQWO'#IjOOOS'#Hi'#HiO#0vOSO,59dOOQ!LS,59d,59dO)uQYO1G1dOKeQ&jO'#HwO#1RQWO,5<]OOQ!LS,5<Y,5<YOOQO'#F}'#F}OIxQWO,5<hOOQO'#GP'#GPOIxQWO,5<jOIxQWO,5<lOOQO1G1f1G1fO#1^Q`O'#CoO#1qQ`O,5<UO#1xQWO'#JSO5eQWO'#JSO#2WQWO,5<WOIxQWO,5<VO#2]Q`O'#FiO#2jQ`O'#JTO#2tQWO'#JTOHiQWO'#JTO#2yQWO,5<ZOOQ!LQ'#Dc'#DcO#3OQWO'#FlO#3ZQpO'#FtO!&VQ&jO'#FtO!&VQ&jO'#FvO#3lQWO'#FwO!(OQWO'#FzOOQO'#Hy'#HyO#3qQ&jO,5<_OOQ!LS,5<_,5<_O#3xQ&jO'#FtO#4WQ&jO'#FuO#4`Q&jO'#FuOOQ!LS,5<m,5<mOIxQWO,5?ROIxQWO,5?RO#4eQWO'#HzO#4pQWO,5?QOOQ!LS'#Cg'#CgO#5dQ#tO,59gOOQ!LS,59g,59gO#6VQ#tO,5;|O#6xQ#tO,5<OO#7SQWO,5<QOOQ!LS,5<R,5<RO#7XQWO,5<XO#7^Q#tO,5<^OFlQYO1G1eO#7nQWO1G1eOOQQ1G3l1G3lOOQ!LS1G/l1G/lOMgQWO1G/lOOQQ1G2Y1G2YOHiQWO1G2YO)uQYO1G2YOHiQWO1G2YO#7sQWO1G2YO#8RQWO,59[O#9[QWO'#EQOOQ!LQ,5>},5>}O#9fQ!LYO,5>}OOQQ1G.r1G.rO9{QWO1G.rO!,QQpO1G.rO!,YQ#tO1G.rO#9tQWO1G0ZO#9yQWO'#CgO#:UQWO'#J[O#:^QWO,5=[O#:cQWO'#J[O#:hQWO'#ISO#:vQWO,5?uO#;OQbO1G0}OOQ!LS1G1P1G1PO5eQWO1G2uO#;VQWO1G2uO#;[QWO1G2uO#;aQWO1G2uOOQQ1G2u1G2uO#;fQ#tO1G2YO6tQWO'#IyO6tQWO'#EYO6tQWO'#H|O#;wQ!LYO,5?rOOQQ1G2^1G2^O!.yQWO1G2dOHiQWO1G2aO#<SQWO1G2aOOQQ1G2b1G2bOHiQWO1G2bO#<XQWO1G2bO#<aQ&jO'#G`OOQQ1G2d1G2dO!&VQ&jO'#IOO!/OQ`O1G2gOOQQ1G2g1G2gOOQQ,5=Q,5=QO#<iQ#tO,5=SO5eQWO,5=SO#3lQWO,5=VO5RQWO,5=VO!,QQpO,5=VO!,YQ#tO,5=VO5jQ#tO,5=VO#<zQWO'#JYO#=VQWO,5=WOOQQ1G.i1G.iO#=[Q!LYO1G.iO#=gQWO1G.iO!'oQWO1G.iO5]Q!LYO1G.iO#=lQbO,5?wO#=vQWO,5?wO#>RQYO,5=_O#>YQWO,5=_O6tQWO,5?wOOQQ1G2w1G2wO`QYO1G2wOOQQ1G2}1G2}OOQQ1G3P1G3PO9vQWO1G3RO#>_QYO1G3TO#BVQYO'#HSOOQQ1G3W1G3WO9{QWO1G3^O#BdQWO1G3^O5]Q!LYO1G3bOOQQ1G3d1G3dOOQ!LQ'#Fp'#FpO5]Q!LYO1G3fO5]Q!LYO1G3hOOOS1G4u1G4uO#BlQ`O,5;{O#BtQbO1G3qO#COQWO1G4vO#CWQWO1G5PO#C`QWO,5?^OKjQYO,5:tO6tQWO,5:tO9{QWO,59yOKjQYO,59yO!,QQpO,59yO#CeQ7^O,59yOOQO,5:t,5:tO#CoQ&jO'#HlO#DVQWO,5?]OOQ!LS1G/d1G/dO#D_Q&jO'#HqO#DsQWO,5?gOOQ!LQ1G0_1G0_O!9kQ&jO,59yO#D{QbO1G5QOOQO,5>[,5>[O6tQWO,5>[OOQO-E;n-E;nO#EVQ!LrO'#D}O!&VQ&jO'#DyOOQO'#Ho'#HoO#EqQ&jO,5:dOOQ!LS,5:d,5:dO#ExQ&jO'#DyO#FWQ&jO'#D}O#FlQ&jO'#D}O!&VQ&jO'#D}O#FvQWO1G/{O#F{Q`O1G/{OOQ!LS1G/{1G/{O)uQYO1G/{OHiQWO1G/{OOQ!LS1G0Y1G0YO9{QWO1G0YO!,QQpO1G0YO!,YQ#tO1G0YO#GSQ!LdO1G4}O)uQYO1G4}O#GdQ!LYO1G4}O#GuQWO1G4|O6tQWO,5>^OOQO,5>^,5>^O#G}QWO,5>^OOQO-E;p-E;pO#GuQWO1G4|O#H]Q!LdO,59gO#J[Q!LdO,5;|O#L^Q!LdO,5<OO#N`Q!LdO,5<^OOQ!LS7+%u7+%uO$!hQ!LdO7+%uO$#XQWO'#HmO$#cQWO,5?_OOQ!LS1G/n1G/nO$#kQYO'#HnO$#xQWO,5?`O$$QQbO,5?`OOQ!LS1G/s1G/sOOQ!LS7+&O7+&OO$$[Q7^O,5:YO)uQYO7+&aO$$fQ7^O,5:QOOQO1G1V1G1VOOQO1G1W1G1WO$$sQMhO,5;nOKjQYO,5;mOOQO-E;q-E;qOOQ!LS7+&o7+&oOOQO7+&x7+&xOOOO1G1a1G1aO$%OQWO1G1aOOQ!LS1G1c1G1cO$%TQ`O,5?UOOOS-E;g-E;gOOQ!LS1G/O1G/OO$%[Q!LdO7+'OOOQ!LS,5>c,5>cO$%{QWO,5>cOOQ!LS1G1w1G1wP$&QQWO'#HwPOQ!LS-E;u-E;uO$&qQ#tO1G2SO$'dQ#tO1G2UO$'nQ#tO1G2WOOQ!LS1G1p1G1pO$'uQWO'#HvO$(TQWO,5?nO$(TQWO,5?nO$(]QWO,5?nO$(hQWO,5?nOOQO1G1r1G1rO$(vQ#tO1G1qO$)WQWO'#HxO$)hQWO,5?oOHiQWO,5?oO$)pQ`O,5?oOOQ!LS1G1u1G1uO5]Q!LYO,5<`O5]Q!LYO,5<aO$)zQWO,5<aO#3gQWO,5<aO!,QQpO,5<`O$*PQWO,5<bO5]Q!LYO,5<cO$)zQWO,5<fOOQO-E;w-E;wOOQ!LS1G1y1G1yO!&VQ&jO,5<`O$*XQWO,5<aO!&VQ&jO,5<bO!&VQ&jO,5<aO$*dQ#tO1G4mO$*nQ#tO1G4mOOQO,5>f,5>fOOQO-E;x-E;xOKeQ&jO,59iO)uQYO,59iO$*{QWO1G1lOIxQWO1G1sO$+QQ!LdO7+'POOQ!LS7+'P7+'POFlQYO7+'POOQ!LS7+%W7+%WO$+qQ`O'#JUO#FvQWO7+'tO$+{QWO7+'tO$,TQ`O7+'tOOQQ7+'t7+'tOHiQWO7+'tO)uQYO7+'tOHiQWO7+'tOOQO1G.v1G.vO$,_Q!LbO'#CgO$,oQ!LbO,5<dO$-^QWO,5<dOOQ!LQ1G4i1G4iOOQQ7+$^7+$^O9{QWO7+$^O!,QQpO7+$^OFlQYO7+%uO$-cQWO'#IRO$-nQWO,5?vOOQO1G2v1G2vO5eQWO,5?vOOQO,5>n,5>nOOQO-E<Q-E<QOOQ!LS7+&i7+&iO$-vQWO7+(aO5]Q!LYO7+(aO5eQWO7+(aO$-{QWO7+(aO$.QQWO7+'tOOQ!LQ,5>h,5>hOOQ!LQ-E;z-E;zOOQQ7+(O7+(OO$.`Q!LbO7+'{OHiQWO7+'{O$.jQ`O7+'|OOQQ7+'|7+'|OHiQWO7+'|O$.qQWO'#JXO$.|QWO,5<zOOQO,5>j,5>jOOQO-E;|-E;|OOQQ7+(R7+(RO$/sQ&jO'#GiOOQQ1G2n1G2nOHiQWO1G2nO)uQYO1G2nOHiQWO1G2nO$/zQWO1G2nO$0YQ#tO1G2nO5]Q!LYO1G2qO#3lQWO1G2qO5RQWO1G2qO!,QQpO1G2qO!,YQ#tO1G2qO$0kQWO'#IQO$0vQWO,5?tO$1OQ&jO,5?tOOQ!LQ1G2r1G2rOOQQ7+$T7+$TO$1TQWO7+$TO5]Q!LYO7+$TO$1YQWO7+$TO)uQYO1G5cO)uQYO1G5dO$1_QYO1G2yO$1fQWO1G2yO$1kQYO1G2yO$1rQ!LYO1G5cOOQQ7+(c7+(cO5]Q!LYO7+(mO`QYO7+(oOOQQ'#J_'#J_OOQQ'#IT'#ITO$1|QYO,5=nOOQQ,5=n,5=nO)uQYO'#HTO$2ZQWO'#HVOOQQ7+(x7+(xO$2`QYO7+(xO6tQWO7+(xOOQQ7+(|7+(|OOQQ7+)Q7+)QOOQQ7+)S7+)SOOQO1G4x1G4xO$6ZQ7^O1G0`O$6eQWO1G0`OOQO1G/e1G/eO$6pQ7^O1G/eO9{QWO1G/eOKjQYO'#D_OOQO,5>W,5>WOOQO-E;j-E;jOOQO,5>],5>]OOQO-E;o-E;oO!,QQpO1G/eOOQO1G3v1G3vO9{QWO,5:eOOQO,5:i,5:iO)uQYO,5:iO$6zQ!LYO,5:iO$7VQ!LYO,5:iO!,QQpO,5:eOOQO-E;m-E;mOOQ!LS1G0O1G0OO!&VQ&jO,5:eO$7eQ!LrO,5:iO$8PQ&jO,5:eO!&VQ&jO,5:iO$8_Q&jO,5:iO$8sQ!LYO,5:iOOQ!LS7+%g7+%gO#FvQWO7+%gO#F{Q`O7+%gOOQ!LS7+%t7+%tO9{QWO7+%tO!,QQpO7+%tO$9XQ!LdO7+*iO)uQYO7+*iOOQO1G3x1G3xO6tQWO1G3xO$9iQWO7+*hO$9qQ!LdO1G2SO$;sQ!LdO1G2UO$=uQ!LdO1G1qO$?}Q#tO,5>XOOQO-E;k-E;kO$@XQbO,5>YO)uQYO,5>YOOQO-E;l-E;lO$@cQWO1G4zO$@kQ7^O1G0ZO$BrQ7^O1G0eO$ByQ7^O1G0eO$DzQ7^O1G0eO$ERQ7^O1G0eO$FvQ7^O1G0eO$GZQ7^O1G0eO$IhQ7^O1G0eO$IoQ7^O1G0eO$KpQ7^O1G0eO$KwQ7^O1G0eO$MlQ7^O1G0eO$NPQ!LdO<<I{O$NpQ7^O1G0eO%!`Q7^O'#IhO%$]Q7^O1G0xOKjQYO'#FUOOQO'#JQ'#JQOOQO1G1Y1G1YO%$jQWO1G1XO%$oQ7^O,5>aOOOO7+&{7+&{OOOS1G4p1G4pOOQ!LS1G3}1G3}OIxQWO7+'rO%$yQWO,5>bO5eQWO,5>bOOQO-E;t-E;tO%%XQWO1G5YO%%XQWO1G5YO%%aQWO1G5YO%%lQ`O,5>dO%%vQWO,5>dOHiQWO,5>dOOQO-E;v-E;vO%%{Q`O1G5ZO%&VQWO1G5ZOOQO1G1z1G1zOOQO1G1{1G1{O5]Q!LYO1G1{O$)zQWO1G1{O5]Q!LYO1G1zO%&_QWO1G1|OHiQWO1G1|OOQO1G1}1G1}O5]Q!LYO1G2QO!,QQpO1G1zO#3gQWO1G1{O%&dQWO1G1|O%&lQWO1G1{OIxQWO7+*XOOQ!LS1G/T1G/TO%&wQWO1G/TOOQ!LS7+'W7+'WO%&|Q#tO7+'_O%'^Q!LdO<<JkOOQ!LS<<Jk<<JkOHiQWO'#H{O%'}QWO,5?pOOQQ<<K`<<K`OHiQWO<<K`O#FvQWO<<K`O%(VQWO<<K`O%(_Q`O<<K`OHiQWO1G2OOOQQ<<Gx<<GxO9{QWO<<GxO%(iQ!LdO<<IaOOQ!LS<<Ia<<IaOOQO,5>m,5>mO%)YQWO,5>mOOQO-E<P-E<PO%)_QWO1G5bO%)gQWO<<K{OOQQ<<K{<<K{O%)lQWO<<K{O5]Q!LYO<<K{O)uQYO<<K`OHiQWO<<K`OOQQ<<Kg<<KgO$.`Q!LbO<<KgOOQQ<<Kh<<KhO$.jQ`O<<KhO%)qQ&jO'#H}O%)|QWO,5?sOKjQYO,5?sOOQQ1G2f1G2fO#EVQ!LrO'#D}O!&VQ&jO'#GjOOQO'#IP'#IPO%*UQ&jO,5=TOOQQ,5=T,5=TO#4WQ&jO'#D}O%*]Q&jO'#D}O%*qQ&jO'#D}O%*{Q&jO'#GjO%+ZQWO7+(YO%+`QWO7+(YO%+hQ`O7+(YOOQQ7+(Y7+(YOHiQWO7+(YO)uQYO7+(YOHiQWO7+(YO%+rQWO7+(YOOQQ7+(]7+(]O5]Q!LYO7+(]O#3lQWO7+(]O5RQWO7+(]O!,QQpO7+(]O%,QQWO,5>lOOQO-E<O-E<OOOQO'#Gm'#GmO%,]QWO1G5`O5]Q!LYO<<GoOOQQ<<Go<<GoO%,eQWO<<GoO%,jQWO7+*}O%,oQWO7++OOOQQ7+(e7+(eO%,tQWO7+(eO%,yQYO7+(eO%-QQWO7+(eO)uQYO7+*}O)uQYO7++OOOQQ<<LX<<LXOOQQ<<LZ<<LZOOQQ-E<R-E<ROOQQ1G3Y1G3YO%-VQWO,5=oOOQQ,5=q,5=qO9{QWO<<LdO%-[QWO<<LdOKjQYO7+%zOOQO7+%P7+%PO%-aQ7^O1G5QO9{QWO7+%POOQO1G0P1G0PO%-kQ!LdO1G0TOOQO1G0T1G0TO)uQYO1G0TO%-uQ!LYO1G0TO9{QWO1G0PO!,QQpO1G0PO%.QQ!LYO1G0TO!&VQ&jO1G0PO%.`Q!LYO1G0TO%.tQ!LrO1G0TO%/OQ&jO1G0PO!&VQ&jO1G0TOOQ!LS<<IR<<IROOQ!LS<<I`<<I`O9{QWO<<I`O%/^Q!LdO<<NTOOQO7+)d7+)dO%/nQ!LdO7+'_O%1vQbO1G3tO%2QQ7^O7+%uO%2_Q7^O,59gO%4[Q7^O,5;|O%6XQ7^O,5<OO%8UQ7^O,5<^O%9tQ7^O7+'OO%:RQ7^O7+'PO%:`QWO,5;pOOQO7+&s7+&sO%:eQ#tO<<K^OOQO1G3|1G3|O%:uQWO1G3|O%;QQWO1G3|O%;`QWO7+*tO%;`QWO7+*tOHiQWO1G4OO%;hQ`O1G4OO%;rQWO7+*uOOQO7+'g7+'gO5]Q!LYO7+'gOOQO7+'f7+'fO$)zQWO7+'hO%;zQ`O7+'hOOQO7+'l7+'lO5]Q!LYO7+'fO$)zQWO7+'gO%<RQWO7+'hOHiQWO7+'hO#3gQWO7+'gO%<WQ#tO<<MsOOQ!LS7+$o7+$oO%<bQ`O,5>gOOQO-E;y-E;yO#FvQWOAN@zOOQQAN@zAN@zOHiQWOAN@zO%<lQ!LbO7+'jOOQQAN=dAN=dO5eQWO1G4XO%<yQWO7+*|O5]Q!LYOANAgO%=RQWOANAgOOQQANAgANAgO%=WQWOAN@zO%=`Q`OAN@zOOQQANARANAROOQQANASANASO%=jQWO,5>iOOQO-E;{-E;{O%=uQ7^O1G5_O#3lQWO,5=UO5RQWO,5=UO!,QQpO,5=UOOQO-E;}-E;}OOQQ1G2o1G2oO$7eQ!LrO,5:iO!&VQ&jO,5=UO%>PQ&jO,5=UO%>_Q&jO,5:iOOQQ<<Kt<<KtOHiQWO<<KtO%+ZQWO<<KtO%>sQWO<<KtO%>{Q`O<<KtO)uQYO<<KtOHiQWO<<KtOOQQ<<Kw<<KwO5]Q!LYO<<KwO#3lQWO<<KwO5RQWO<<KwO%?VQ&jO1G4WO%?[QWO7+*zOOQQAN=ZAN=ZO5]Q!LYOAN=ZOOQQ<<Ni<<NiOOQQ<<Nj<<NjOOQQ<<LP<<LPO%?dQWO<<LPO%?iQYO<<LPO%?pQWO<<NiO%?uQWO<<NjOOQQ1G3Z1G3ZOOQQANBOANBOO9{QWOANBOO%?zQ7^O<<IfOOQO<<Hk<<HkOOQO7+%o7+%oO%-kQ!LdO7+%oO)uQYO7+%oOOQO7+%k7+%kO9{QWO7+%kO%@UQ!LYO7+%oO!,QQpO7+%kO%@aQ!LYO7+%oO!&VQ&jO7+%kO%@oQ!LYO7+%oOOQ!LSAN>zAN>zO%ATQ!LdO<<K^O%C]Q7^O<<I{O%CjQ7^O1G1qO%EYQ7^O1G2SO%GVQ7^O1G2UO%ISQ7^O<<JkO%IaQ7^O<<IaOOQO1G1[1G1[OOQO7+)h7+)hO%InQWO7+)hO%IyQWO<<N`O%JRQ`O7+)jOOQO<<KR<<KRO5]Q!LYO<<KSO$)zQWO<<KSOOQO<<KQ<<KQO5]Q!LYO<<KRO%J]Q`O<<KSO$)zQWO<<KROOQQG26fG26fO#FvQWOG26fOOQO7+)s7+)sOOQQG27RG27RO5]Q!LYOG27ROHiQWOG26fOKjQYO1G4TO%JdQWO7+*yO5]Q!LYO1G2pO#3lQWO1G2pO5RQWO1G2pO!,QQpO1G2pO!&VQ&jO1G2pO%.tQ!LrO1G0TO%JlQ&jO1G2pO%+ZQWOANA`OOQQANA`ANA`OHiQWOANA`O%JzQWOANA`O%KSQ`OANA`OOQQANAcANAcO5]Q!LYOANAcO#3lQWOANAcOOQO'#Gn'#GnOOQO7+)r7+)rOOQQG22uG22uOOQQANAkANAkO%K^QWOANAkOOQQANDTANDTOOQQANDUANDUO%KcQYOG27jOOQO<<IZ<<IZO%-kQ!LdO<<IZOOQO<<IV<<IVO)uQYO<<IZO9{QWO<<IVO& ^Q!LYO<<IZO!,QQpO<<IVO& iQ!LYO<<IZO& wQ7^O7+'_OOQO<<MS<<MSOOQOAN@nAN@nO5]Q!LYOAN@nOOQOAN@mAN@mO$)zQWOAN@nO5]Q!LYOAN@mOOQQLD,QLD,QOOQQLD,mLD,mO#FvQWOLD,QO&#gQ7^O7+)oOOQO7+([7+([O5]Q!LYO7+([O#3lQWO7+([O5RQWO7+([O!,QQpO7+([O!&VQ&jO7+([OOQQG26zG26zO%+ZQWOG26zOHiQWOG26zOOQQG26}G26}O5]Q!LYOG26}OOQQG27VG27VO9{QWOLD-UOOQOAN>uAN>uO%-kQ!LdOAN>uOOQOAN>qAN>qO)uQYOAN>uO9{QWOAN>qO&#qQ!LYOAN>uO&#|Q7^O<<K^OOQOG26YG26YO5]Q!LYOG26YOOQOG26XG26XOOQQ!$( l!$( lOOQO<<Kv<<KvO5]Q!LYO<<KvO#3lQWO<<KvO5RQWO<<KvO!,QQpO<<KvOOQQLD,fLD,fO%+ZQWOLD,fOOQQLD,iLD,iOOQQ!$(!p!$(!pOOQOG24aG24aO%-kQ!LdOG24aOOQOG24]G24]O)uQYOG24aOOQOLD+tLD+tOOQOANAbANAbO5]Q!LYOANAbO#3lQWOANAbO5RQWOANAbOOQQ!$(!Q!$(!QOOQOLD){LD){O%-kQ!LdOLD){OOQOG26|G26|O5]Q!LYOG26|O#3lQWOG26|OOQO!$'Mg!$'MgOOQOLD,hLD,hO5]Q!LYOLD,hOOQO!$(!S!$(!SOKjQYO'#DnO&%lQbO'#ImOKjQYO'#DfO&%sQ!LdO'#CgO&&^QbO'#CgO&&nQYO,5:oOKjQYO,5:yOKjQYO,5:yOKjQYO,5:yOKjQYO,5:yOKjQYO,5:yOKjQYO,5:yOKjQYO,5:yOKjQYO,5:yOKjQYO,5:yOKjQYO,5:yOKjQYO,5:yOKjQYO'#HuO&(kQWO,5;{O&)}QWO,5:yOKjQYO,5;^O!'oQWO'#C{O!'oQWO'#C{OHiQWO'#FbO&(sQWO'#FbOHiQWO'#FdO&(sQWO'#FdOHiQWO'#FrO&(sQWO'#FrOKjQYO,5?fO&&nQYO1G0ZO&*UQ7^O'#CgOKjQYO1G1dOHiQWO,5<hO&(sQWO,5<hOHiQWO,5<jO&(sQWO,5<jOHiQWO,5<VO&(sQWO,5<VO&&nQYO1G1eOKjQYO7+&aOHiQWO1G1sO&(sQWO1G1sO&&nQYO7+'PO&&nQYO7+%uOHiQWO7+'rO&(sQWO7+'rO&*`QWO'#ETO&*eQWO'#ETO&*mQWO'#ErO&*rQWO'#IzO&*}QWO'#IxO&+YQWO,5:oO&+_Q#tO,5;xO&+fQWO'#FkO&+kQWO'#FkO&+pQWO,5;yO&+xQWO,5:oO&,QQ7^O1G0uO&,XQWO,5<XO&,^QWO,5<XO&,cQWO1G1eO&,hQWO1G0ZO&,mQ#tO1G2WO&,tQ#tO1G2WO3tQWO'#F`O5RQWO'#F_OB`QWO'#ESOKjQYO,5;ZO!(OQWO'#FmO!(OQWO'#FmOIxQWO,5<lOIxQWO,5<l",stateData:"&-p~O'POS'QOSSOSTOS~OPTOQTOWwO]bO^gOamOblOgbOiTOjbOkbOnTOpTOuROwbOxbOybO!PSO!ZjO!`UO!cTO!dTO!eTO!fTO!gTO!jkO#[qO#lnO#p]O$woO$yrO${pO$|pO%PsO%RtO%UuO%VuO%XvO%fxO%lyO%nzO%p{O%r|O%u}O%{!OO&P!PO&R!QO&T!RO&V!SO&X!TO'SPO']QO'u`O~OPZXYZX^ZXiZXrZXsZXuZX}ZX!]ZX!^ZX!`ZX!fZX!uZX#PcX#SZX#TZX#UZX#VZX#WZX#XZX#YZX#ZZX#]ZX#_ZX#aZX#bZX#gZX&}ZX']ZX'iZX'pZX'qZX~O!X$dX~P$wO&z!VO&{!UO&|!XO~OPTOQTO]bOa!hOb!gOgbOiTOjbOkbOnTOpTOuROwbOxbOybO!P!`O!ZjO!`UO!cTO!dTO!eTO!fTO!gTO!j!fO#l!iO#p]O'S!YO']QO'u`O~O|!^O}!ZOz'dPz'mP~P'aO!O!jO~P`OPTOQTO]bOa!hOb!gOgbOiTOjbOkbOnTOpTOuROwbOxbOybO!P!`O!ZjO!`UO!cTO!dTO!eTO!fTO!gTO!j!fO#l!iO#p]O'S8lO']QO'u`O~OPTOQTO]bOa!hOb!gOgbOiTOjbOkbOnTOpTOuROwbOxbOybO!P!`O!ZjO!`UO!cTO!dTO!eTO!fTO!gTO!j!fO#l!iO#p]O']QO'u`O~O|!oO!}!rO#O!oO'S8mO!_'jP~P+rO#P!sO~O!X!tO#P!sO~OP#ZOY#aOi#OOr!xOs!xOu!yO}#_O!]#QO!^!vO!`!wO!f#ZO#S!|O#T!}O#U!}O#V!}O#W#PO#X#QO#Y#QO#Z#QO#]#RO#_#TO#a#VO#b#WO']QO'i#XO'p!zO'q!{O~O^'aX&}'aX!_'aXz'aX!P'aX$x'aX!X'aX~P.^O!u#bO#g#bOP'bXY'bX^'bXi'bXr'bXs'bXu'bX}'bX!]'bX!^'bX!`'bX!f'bX#S'bX#T'bX#U'bX#V'bX#W'bX#X'bX#Z'bX#]'bX#_'bX#a'bX#b'bX']'bX'i'bX'p'bX'q'bX~O#Y'bX&}'bXz'bX!_'bX'_'bX!P'bX$x'bX!X'bX~P0nO!u#bO~O#r#cO#y#gO~O!P#hO#p]O#|#iO$O#kO~O]#nOg#{Oi#oOj#nOk#nOn#|Op#}Ou#uO!P#vO!Z$SO!`#sO#O$TO#l$QO$V$OO$X$PO$[$RO'S#mO']#pO'W'YP~O!`$UO~O!X$WO~O^$XO&}$XO~O'S$]O~O!`$UO'S$]O'T$_O'X$`O~Ob$fO!`$UO'S$]O~O]$oOr$kO!P$hO!`$jO$y$nO'S$]O'T$_O['}P~O!j$pO~Ou$qO!P$rO'S$]O~Ou$qO!P$rO%R$vO'S$]O~O'S$wO~O#[qO$yrO${pO$|pO%PsO%RtO%UuO%VuO~Oa%QOb%PO!j$}O$w%OO%Z$|O~P7dOa%TOblO!P%SO!jkO#[qO$woO${pO$|pO%PsO%RtO%UuO%VuO%XvO~O_%WO!u%ZO$y%UO'T$_O~P8cO!`%[O!c%`O~O!`%aO~O!PSO~O^$XO&y%iO&}$XO~O^$XO&y%lO&}$XO~O^$XO&y%nO&}$XO~O&z!VO&{!UO&|%rO~OPZXYZXiZXrZXsZXuZX}ZX}cX!]ZX!^ZX!`ZX!fZX!uZX!ucX#PcX#SZX#TZX#UZX#VZX#WZX#XZX#YZX#ZZX#]ZX#_ZX#aZX#bZX#gZX']ZX'iZX'pZX'qZX~OzZXzcX~P;OO|%tOz&_X}&_X~P)uO}!ZOz'dX~OP#ZOY#aOi#OOr!xOs!xOu!yO}!ZO!]#QO!^!vO!`!wO!f#ZO#S!|O#T!}O#U!}O#V!}O#W#PO#X#QO#Y#QO#Z#QO#]#RO#_#TO#a#VO#b#WO']QO'i#XO'p!zO'q!{O~Oz'dX~P=uOz%yO~Ou%|O!S&WO!T&PO!U&PO'T$_O~O]%}Oj%}O|&QO'`%zO!O'eP!O'oP~P?xOz'lX}'lX!X'lX!_'lX'i'lX~O!u'lX#P!xX!O'lX~P@qO!u&XOz'nX}'nX~O}&YOz'mX~Oz&[O~O!u#bO~P@qOR&`O!P&]O!k&_O'S$]O~Ob&eO!`$UO'S$]O~Or$kO!`$jO~O!O&fO~P`Or!xOs!xOu!yO!^!vO!`!wO']QOP!baY!bai!ba}!ba!]!ba!f!ba#S!ba#T!ba#U!ba#V!ba#W!ba#X!ba#Y!ba#Z!ba#]!ba#_!ba#a!ba#b!ba'i!ba'p!ba'q!ba~O^!ba&}!baz!ba!_!ba'_!ba!P!ba$x!ba!X!ba~PBzO!_&gO~O!X!tO!u&iO'i&hO}'kX^'kX&}'kX~O!_'kX~PEdO}&mO!_'jX~O!_&oO~Ou$qO!P$rO#O&pO'S$]O~OPTOQTO]bOa!hOb!gOgbOiTOjbOkbOnTOpTOuROwbOxbOybO!PSO!ZjO!`UO!cTO!dTO!eTO!fTO!gTO!j!fO#l!iO#p]O'S8lO']QO'u`O~O]#nOg#{Oi#oOj#nOk#nOn#|Op9OOu#uO!P#vO!Z:QO!`#sO#O9UO#l$QO$V9QO$X9SO$[$RO'S&tO']#pO~O#P&vO~O]#nOg#{Oi#oOj#nOk#nOn#|Op#}Ou#uO!P#vO!Z$SO!`#sO#O$TO#l$QO$V$OO$X$PO$[$RO'S&tO']#pO~O'W'gP~PIxO|&zO!_'hP~P)uO'`&|O~OP8iOQ8iO]bOa:OOb!gOgbOi8iOjbOkbOn8iOp8iOuROwbOxbOybO!P!`O!Z8kO!`UO!c8iO!d8iO!e8iO!f8iO!g8iO!j!fO#l!iO#p]O'S'[O']QO'u9|O~O!`!wO~O}#_O^$Ta&}$Ta!_$Taz$Ta!P$Ta$x$Ta!X$Ta~O#['cO~PHiO!X'eO!P'rX#o'rX#r'rX#y'rX~Or'fO~PN_Or'fO!P'rX#o'rX#r'rX#y'rX~O!P'hO#o'lO#r'gO#y'mO~O|'pO~PKjO#r#cO#y'sO~Or$]Xu$]X!^$]X'i$]X'p$]X'q$]X~OReX}eX!ueX'WeX'W$]X~P! wOj'uO~O&z'wO&{'vO&|'yO~Or'{Ou'|O'i#XO'p(OO'q(QO~O'W'zO~P!#QO'W(TO~O]#nOg#{Oi#oOj#nOk#nOn#|Op9OOu#uO!P#vO!Z:QO!`#sO#O9UO#l$QO$V9QO$X9SO$[$RO']#pO~O|(XO'S(UO!_'vP~P!#oO#P(ZO~O|(_O'S([Oz'wP~P!#oO^(hOi(mOu(eO!S(kO!T(dO!U(dO!`(bO!r(lO$o(gO'T$_O'`(aO~O!O(jO~P!%gO!^!vOr'[Xu'[X'i'[X'p'[X'q'[X}'[X!u'[X~O'W'[X#e'[X~P!&cOR(pO!u(oO}'ZX'W'ZX~O}(qO'W'YX~O'S(sO~O!`(xO~O'S&tO~O!`(bO~Ou$qO|!oO!P$rO!}!rO#O!oO'S$]O!_'jP~O!X!tO#P(|O~OP#ZOY#aOi#OOr!xOs!xOu!yO!]#QO!^!vO!`!wO!f#ZO#S!|O#T!}O#U!}O#V!}O#W#PO#X#QO#Y#QO#Z#QO#]#RO#_#TO#a#VO#b#WO']QO'i#XO'p!zO'q!{O~O^!Ya}!Ya&}!Yaz!Ya!_!Ya'_!Ya!P!Ya$x!Ya!X!Ya~P!(tOR)UO!P&]O!k)TO$x)SO'X$`O~O'S$wO'W'YP~O!X)XO!P'VX^'VX&}'VX~O!`$UO'X$`O~O!`$UO'S$]O'X$`O~O!X!tO#P&vO~O'S)aO!O(OP~O})eO['}X~OY)iO~O[)jO~O!P$hO'S$]O'T$_O['}P~Ou$qO|)oO!P$rO'S$]Oz'mP~O]&TOj&TO|)pO'`&|O!O'oP~O})qO^'zX&}'zX~O!u)uO'X$`O~OR)xO!P#vO'X$`O~O!P)zO~Or)|O!PSO~O!j*RO~Ob*WO~O'S(sO!O'|P~Ob$fO~O$yrO'S$wO~P8cOY*^O[*]O~OPTOQTO]bOamOblOgbOiTOjbOkbOnTOpTOuROwbOxbOybO!ZjO!`UO!cTO!dTO!eTO!fTO!gTO!jkO#p]O$woO']QO'u`O~O!P!`O#l!iO'S8lO~P!0RO[*]O^$XO&}$XO~O^*bO#[*dO${*dO$|*dO~P)uO!`%[O~O%l*iO~O!P*kO~O%|*nO%}*mOP%zaQ%zaW%za]%za^%zaa%zab%zag%zai%zaj%zak%zan%zap%zau%zaw%zax%zay%za!P%za!Z%za!`%za!c%za!d%za!e%za!f%za!g%za!j%za#[%za#l%za#p%za$w%za$y%za${%za$|%za%P%za%R%za%U%za%V%za%X%za%f%za%l%za%n%za%p%za%r%za%u%za%{%za&P%za&R%za&T%za&V%za&X%za&x%za'S%za']%za'u%za!O%za%s%za_%za%x%za~O'S*qO~O'_*tO~Oz&_a}&_a~P!(tO}!ZOz'da~Oz'da~P=uO}&YOz'ma~O}tX}!VX!OtX!O!VX!XtX!X!VX!`!VX!utX'X!VX~O!X*{O!u*zO}!|X}'fX!O!|X!O'fX!X'fX!`'fX'X'fX~O!X*}O!`$UO'X$`O}!RX!O!RX~O]%{Oj%{Ou%|O'`(aO~OP8iOQ8iO]bOa:OOb!gOgbOi8iOjbOkbOn8iOp8iOuROwbOxbOybO!P!`O!Z8kO!`UO!c8iO!d8iO!e8iO!f8iO!g8iO!j!fO#l!iO#p]O']QO'u9|O~O'S9YO~P!9yO}+RO!O'eX~O!O+TO~O!X*{O!u*zO}!|X!O!|X~O}+UO!O'oX~O!O+WO~O]%{Oj%{Ou%|O'T$_O'`(aO~O!T+XO!U+XO~P!<tOu$qO|+[O!P$rO'S$]Oz&dX}&dX~O^+`O!S+cO!T+_O!U+_O!n+eO!o+dO!p+dO!r+fO'T$_O'`(aO~O!O+bO~P!=uOR+kO!P&]O!k+jO~O!u+qO}'ka!_'ka^'ka&}'ka~O!X!tO~P!>yO}&mO!_'ja~Ou$qO|+tO!P$rO!}+vO#O+tO'S$]O}&fX!_&fX~O^!wi}!wi&}!wiz!wi!_!wi'_!wi!P!wi$x!wi!X!wi~P!(tO#P!ta}!ta!_!ta!u!ta!P!ta^!ta&}!taz!ta~P!#QO#P'[XP'[XY'[X^'[Xi'[Xs'[X!]'[X!`'[X!f'[X#S'[X#T'[X#U'[X#V'[X#W'[X#X'[X#Y'[X#Z'[X#]'[X#_'[X#a'[X#b'[X&}'[X']'[X!_'[Xz'[X!P'[X'_'[X$x'[X!X'[X~P!&cO},PO'W'gX~P!#QO'W,RO~O},SO!_'hX~P!(tO!_,VO~Oz,WO~OP#ZOr!xOs!xOu!yO!^!vO!`!wO!f#ZO']QOY#Ri^#Rii#Ri}#Ri!]#Ri#T#Ri#U#Ri#V#Ri#W#Ri#X#Ri#Y#Ri#Z#Ri#]#Ri#_#Ri#a#Ri#b#Ri&}#Ri'i#Ri'p#Ri'q#Riz#Ri!_#Ri'_#Ri!P#Ri$x#Ri!X#Ri~O#S#Ri~P!DWO#S!|O~P!DWOP#ZOr!xOs!xOu!yO!^!vO!`!wO!f#ZO#S!|O#T!}O#U!}O#V!}O']QOY#Ri^#Ri}#Ri!]#Ri#W#Ri#X#Ri#Y#Ri#Z#Ri#]#Ri#_#Ri#a#Ri#b#Ri&}#Ri'i#Ri'p#Ri'q#Riz#Ri!_#Ri'_#Ri!P#Ri$x#Ri!X#Ri~Oi#Ri~P!FrOi#OO~P!FrOP#ZOi#OOr!xOs!xOu!yO!^!vO!`!wO!f#ZO#S!|O#T!}O#U!}O#V!}O#W#PO']QO^#Ri}#Ri#]#Ri#_#Ri#a#Ri#b#Ri&}#Ri'i#Ri'p#Ri'q#Riz#Ri!_#Ri'_#Ri!P#Ri$x#Ri!X#Ri~OY#Ri!]#Ri#X#Ri#Y#Ri#Z#Ri~P!I^OY#aO!]#QO#X#QO#Y#QO#Z#QO~P!I^OP#ZOY#aOi#OOr!xOs!xOu!yO!]#QO!^!vO!`!wO!f#ZO#S!|O#T!}O#U!}O#V!}O#W#PO#X#QO#Y#QO#Z#QO#]#RO']QO^#Ri}#Ri#_#Ri#a#Ri#b#Ri&}#Ri'i#Ri'q#Riz#Ri!_#Ri'_#Ri!P#Ri$x#Ri!X#Ri~O'p#Ri~P!LUO'p!zO~P!LUOP#ZOY#aOi#OOr!xOs!xOu!yO!]#QO!^!vO!`!wO!f#ZO#S!|O#T!}O#U!}O#V!}O#W#PO#X#QO#Y#QO#Z#QO#]#RO#_#TO']QO'p!zO^#Ri}#Ri#a#Ri#b#Ri&}#Ri'i#Riz#Ri!_#Ri'_#Ri!P#Ri$x#Ri!X#Ri~O'q#Ri~P!NpO'q!{O~P!NpOP#ZOY#aOi#OOr!xOs!xOu!yO!]#QO!^!vO!`!wO!f#ZO#S!|O#T!}O#U!}O#V!}O#W#PO#X#QO#Y#QO#Z#QO#]#RO#_#TO#a#VO']QO'p!zO'q!{O~O^#Ri}#Ri#b#Ri&}#Ri'i#Riz#Ri!_#Ri'_#Ri!P#Ri$x#Ri!X#Ri~P##[OPZXYZXiZXrZXsZXuZX!]ZX!^ZX!`ZX!fZX!uZX#PcX#SZX#TZX#UZX#VZX#WZX#XZX#YZX#ZZX#]ZX#_ZX#aZX#bZX#gZX']ZX'iZX'pZX'qZX}ZX!OZX~O#eZX~P#%oOP#ZOY8|Oi8qOr!xOs!xOu!yO!]8sO!^!vO!`!wO!f#ZO#S8oO#T8pO#U8pO#V8pO#W8rO#X8sO#Y8sO#Z8sO#]8tO#_8vO#a8xO#b8yO']QO'i#XO'p!zO'q!{O~O#e,YO~P#'yOP'bXY'bXi'bXr'bXs'bXu'bX!]'bX!^'bX!`'bX!f'bX#S'bX#T'bX#U'bX#V'bX#W'bX#X'bX#Z'bX#]'bX#_'bX#a'bX#b'bX']'bX'i'bX'p'bX'q'bX}'bX~O!u8}O#g8}O#Y'bX#e'bX!O'bX~P#)tO^&ia}&ia&}&ia!_&ia'_&iaz&ia!P&ia$x&ia!X&ia~P!(tOP#RiY#Ri^#Rii#Ris#Ri}#Ri!]#Ri!^#Ri!`#Ri!f#Ri#S#Ri#T#Ri#U#Ri#V#Ri#W#Ri#X#Ri#Y#Ri#Z#Ri#]#Ri#_#Ri#a#Ri#b#Ri&}#Ri']#Riz#Ri!_#Ri'_#Ri!P#Ri$x#Ri!X#Ri~P!#QO^#fi}#fi&}#fiz#fi!_#fi'_#fi!P#fi$x#fi!X#fi~P!(tO#r,[O~O#r,]O~O!X'eO!u,^O!P#vX#o#vX#r#vX#y#vX~O|,_O~O!P'hO#o,aO#r'gO#y,bO~O}8zO!O'aX~P#'yO!O,cO~O#y,eO~O&z'wO&{'vO&|,hO~O],kOj,kOz,lO~O}cX!XcX!_cX!_$]X'icX~P! wO!_,rO~P!#QO},sO!X!tO'i&hO!_'vX~O!_,xO~Oz$]X}$]X!X$dX~P! wO},zOz'wX~P!#QO!X,|O~Oz-OO~O|(XO'S$]O!_'vP~Oi-SO!X!tO!`$UO'X$`O'i&hO~O!X)XO~O!O-YO~P!%gO!T-ZO!U-ZO'T$_O'`(aO~Ou-]O'`(aO~O!r-^O~O'S$wO}&nX'W&nX~O}(qO'W'Ya~Or-cOs-cOu-dO'ioa'poa'qoa}oa!uoa~O'Woa#eoa~P#4xOr'{Ou'|O'i$Ua'p$Ua'q$Ua}$Ua!u$Ua~O'W$Ua#e$Ua~P#5nOr'{Ou'|O'i$Wa'p$Wa'q$Wa}$Wa!u$Wa~O'W$Wa#e$Wa~P#6aO]-eO~O#P-fO~O'W$fa}$fa#e$fa!u$fa~P!#QO#P-iO~OR-rO!P&]O!k-qO$x-pO~O'W-sO~O]#nOi#oOj#nOk#nOn#|Op9OOu#uO!P#vO!Z:QO!`#sO#O9UO#l$QO$V9QO$X9SO$[$RO']#pO~Og-uO'S-tO~P#8WO!X)XO!P'Va^'Va&}'Va~O#P-{O~OYZX}cX!OcX~O}-|O!O(OX~O!O.OO~OY.PO~O!P$hO'S$]O[&vX}&vX~O})eO['}a~O!_.SO~P!(tO].UO~OY.VO~O[.WO~OR-rO!P&]O!k-qO$x-pO'X$`O~O})qO^'za&}'za~O!u.^O~OR.aO!P#vO~O'`&|O!O'{P~OR.kO!P.gO!k.jO$x.iO'X$`O~OY.uO}.sO!O'|X~O!O.vO~O[.xO^$XO&}$XO~O].yO~O#Y.{O%j.|O~P0nO!u#bO#Y.{O%j.|O~O^.}O~P)uO^/PO~O%s/TOP%qiQ%qiW%qi]%qi^%qia%qib%qig%qii%qij%qik%qin%qip%qiu%qiw%qix%qiy%qi!P%qi!Z%qi!`%qi!c%qi!d%qi!e%qi!f%qi!g%qi!j%qi#[%qi#l%qi#p%qi$w%qi$y%qi${%qi$|%qi%P%qi%R%qi%U%qi%V%qi%X%qi%f%qi%l%qi%n%qi%p%qi%r%qi%u%qi%{%qi&P%qi&R%qi&T%qi&V%qi&X%qi&x%qi'S%qi']%qi'u%qi!O%qi_%qi%x%qi~O_/ZO!O/XO%x/YO~P`O!PSO!`/^O~O}#_O'_$Ta~Oz&_i}&_i~P!(tO}!ZOz'di~O}&YOz'mi~Oz/bO~O}!Ra!O!Ra~P#'yO]%{Oj%{O|/hO'`(aO}&`X!O&`X~P?xO}+RO!O'ea~O]&TOj&TO|)pO'`&|O}&eX!O&eX~O}+UO!O'oa~Oz'ni}'ni~P!(tO^$XO!X!tO!`$UO!f/sO!u/qO&}$XO'X$`O'i&hO~O!O/vO~P!=uO!T/wO!U/wO'T$_O'`(aO~O!S/yO!T/wO!U/wO!r/zO'T$_O'`(aO~O!o/{O!p/{O~P#FWO!P&]O~O!P&]O~P!#QO}'ki!_'ki^'ki&}'ki~P!(tO!u0UO}'ki!_'ki^'ki&}'ki~O}&mO!_'ji~Ou$qO!P$rO#O0WO'S$]O~O#PoaPoaYoa^oaioa!]oa!^oa!`oa!foa#Soa#Toa#Uoa#Voa#Woa#Xoa#Yoa#Zoa#]oa#_oa#aoa#boa&}oa']oa!_oazoa!Poa'_oa$xoa!Xoa~P#4xO#P$UaP$UaY$Ua^$Uai$Uas$Ua!]$Ua!^$Ua!`$Ua!f$Ua#S$Ua#T$Ua#U$Ua#V$Ua#W$Ua#X$Ua#Y$Ua#Z$Ua#]$Ua#_$Ua#a$Ua#b$Ua&}$Ua']$Ua!_$Uaz$Ua!P$Ua'_$Ua$x$Ua!X$Ua~P#5nO#P$WaP$WaY$Wa^$Wai$Was$Wa!]$Wa!^$Wa!`$Wa!f$Wa#S$Wa#T$Wa#U$Wa#V$Wa#W$Wa#X$Wa#Y$Wa#Z$Wa#]$Wa#_$Wa#a$Wa#b$Wa&}$Wa']$Wa!_$Waz$Wa!P$Wa'_$Wa$x$Wa!X$Wa~P#6aO#P$faP$faY$fa^$fai$fas$fa}$fa!]$fa!^$fa!`$fa!f$fa#S$fa#T$fa#U$fa#V$fa#W$fa#X$fa#Y$fa#Z$fa#]$fa#_$fa#a$fa#b$fa&}$fa']$fa!_$faz$fa!P$fa!u$fa'_$fa$x$fa!X$fa~P!#QO^!wq}!wq&}!wqz!wq!_!wq'_!wq!P!wq$x!wq!X!wq~P!(tO}&aX'W&aX~PIxO},PO'W'ga~O|0`O}&bX!_&bX~P)uO},SO!_'ha~O},SO!_'ha~P!(tO#e!ba!O!ba~PBzO#e!Ya}!Ya!O!Ya~P#'yO!P0sO#p]O#w0tO~O!O0xO~O'_0yO~P!#QO^$Qq}$Qq&}$Qqz$Qq!_$Qq'_$Qq!P$Qq$x$Qq!X$Qq~P!(tOz0zO~O],kOj,kO~Or'{Ou'|O'q(QO'i$pi'p$pi}$pi!u$pi~O'W$pi#e$pi~P$&YOr'{Ou'|O'i$ri'p$ri'q$ri}$ri!u$ri~O'W$ri#e$ri~P$&{O#e0{O~P!#QO|0}O'S$]O}&jX!_&jX~O},sO!_'va~O},sO!X!tO!_'va~O},sO!X!tO'i&hO!_'va~O'W$_i}$_i#e$_i!u$_i~P!#QO|1UO'S([Oz&lX}&lX~P!#oO},zOz'wa~O},zOz'wa~P!#QO!X!tO~O!X!tO#Y1`O~Oi1dO!X!tO'i&hO~O}'Zi'W'Zi~P!#QO!u1gO}'Zi'W'Zi~P!#QO!_1jO~O^$Rq}$Rq&}$Rqz$Rq!_$Rq'_$Rq!P$Rq$x$Rq!X$Rq~P!(tO}1nO!P'xX~P!#QO!P&]O$x1qO~O!P&]O$x1qO~P!#QO!P$]X$mZX^$]X&}$]X~P! wO$m1uOrfXufX!PfX'ifX'pfX'qfX^fX&}fX~O$m1uO~O'S)aO}&uX!O&uX~O}-|O!O(Oa~O[2OO~O]2RO~OR2TO!P&]O!k2SO$x1qO~O^$XO&}$XO~P!#QO!P#vO~P!#QO}2YO!u2[O!O'{X~O!O2]O~Ou(eO!S2fO!T2_O!U2_O!n2eO!o2dO!p2dO!r2cO'T$_O'`(aO~O!O2bO~P$/ROR2mO!P.gO!k2lO$x2kO~OR2mO!P.gO!k2lO$x2kO'X$`O~O'S(sO}&tX!O&tX~O}.sO!O'|a~O'`2vO~O]2xO~O[2zO~O!_2}O~P)uO^3PO~O^3PO~P)uO#Y3RO%j3SO~PEdO_/ZO!O3WO%x/YO~P`O!X3YO~O%}3ZOP%zqQ%zqW%zq]%zq^%zqa%zqb%zqg%zqi%zqj%zqk%zqn%zqp%zqu%zqw%zqx%zqy%zq!P%zq!Z%zq!`%zq!c%zq!d%zq!e%zq!f%zq!g%zq!j%zq#[%zq#l%zq#p%zq$w%zq$y%zq${%zq$|%zq%P%zq%R%zq%U%zq%V%zq%X%zq%f%zq%l%zq%n%zq%p%zq%r%zq%u%zq%{%zq&P%zq&R%zq&T%zq&V%zq&X%zq&x%zq'S%zq']%zq'u%zq!O%zq%s%zq_%zq%x%zq~O}!|i!O!|i~P#'yO!u3]O}!|i!O!|i~O}!Ri!O!Ri~P#'yO^$XO!u3dO&}$XO~O^$XO!X!tO!u3dO&}$XO~O^$XO!X!tO!`$UO!f3hO!u3dO&}$XO'X$`O'i&hO~O!T3iO!U3iO'T$_O'`(aO~O!S3lO!T3iO!U3iO!r3mO'T$_O'`(aO~O^$XO!X!tO!f3hO!u3dO&}$XO'i&hO~O}'kq!_'kq^'kq&}'kq~P!(tO}&mO!_'jq~O#P$piP$piY$pi^$pii$pis$pi!]$pi!^$pi!`$pi!f$pi#S$pi#T$pi#U$pi#V$pi#W$pi#X$pi#Y$pi#Z$pi#]$pi#_$pi#a$pi#b$pi&}$pi']$pi!_$piz$pi!P$pi'_$pi$x$pi!X$pi~P$&YO#P$riP$riY$ri^$rii$ris$ri!]$ri!^$ri!`$ri!f$ri#S$ri#T$ri#U$ri#V$ri#W$ri#X$ri#Y$ri#Z$ri#]$ri#_$ri#a$ri#b$ri&}$ri']$ri!_$riz$ri!P$ri'_$ri$x$ri!X$ri~P$&{O#P$_iP$_iY$_i^$_ii$_is$_i}$_i!]$_i!^$_i!`$_i!f$_i#S$_i#T$_i#U$_i#V$_i#W$_i#X$_i#Y$_i#Z$_i#]$_i#_$_i#a$_i#b$_i&}$_i']$_i!_$_iz$_i!P$_i!u$_i'_$_i$x$_i!X$_i~P!#QO}&aa'W&aa~P!#QO}&ba!_&ba~P!(tO},SO!_'hi~O#e!wi}!wi!O!wi~P#'yOP#ZOr!xOs!xOu!yO!^!vO!`!wO!f#ZO']QOY#Rii#Ri!]#Ri#T#Ri#U#Ri#V#Ri#W#Ri#X#Ri#Y#Ri#Z#Ri#]#Ri#_#Ri#a#Ri#b#Ri#e#Ri'i#Ri'p#Ri'q#Ri}#Ri!O#Ri~O#S#Ri~P$@xO#S8oO~P$@xOP#ZOr!xOs!xOu!yO!^!vO!`!wO!f#ZO#S8oO#T8pO#U8pO#V8pO']QOY#Ri!]#Ri#W#Ri#X#Ri#Y#Ri#Z#Ri#]#Ri#_#Ri#a#Ri#b#Ri#e#Ri'i#Ri'p#Ri'q#Ri}#Ri!O#Ri~Oi#Ri~P$CQOi8qO~P$CQOP#ZOi8qOr!xOs!xOu!yO!^!vO!`!wO!f#ZO#S8oO#T8pO#U8pO#V8pO#W8rO']QO#]#Ri#_#Ri#a#Ri#b#Ri#e#Ri'i#Ri'p#Ri'q#Ri}#Ri!O#Ri~OY#Ri!]#Ri#X#Ri#Y#Ri#Z#Ri~P$EYOY8|O!]8sO#X8sO#Y8sO#Z8sO~P$EYOP#ZOY8|Oi8qOr!xOs!xOu!yO!]8sO!^!vO!`!wO!f#ZO#S8oO#T8pO#U8pO#V8pO#W8rO#X8sO#Y8sO#Z8sO#]8tO']QO#_#Ri#a#Ri#b#Ri#e#Ri'i#Ri'q#Ri}#Ri!O#Ri~O'p#Ri~P$GnO'p!zO~P$GnOP#ZOY8|Oi8qOr!xOs!xOu!yO!]8sO!^!vO!`!wO!f#ZO#S8oO#T8pO#U8pO#V8pO#W8rO#X8sO#Y8sO#Z8sO#]8tO#_8vO']QO'p!zO#a#Ri#b#Ri#e#Ri'i#Ri}#Ri!O#Ri~O'q#Ri~P$IvO'q!{O~P$IvOP#ZOY8|Oi8qOr!xOs!xOu!yO!]8sO!^!vO!`!wO!f#ZO#S8oO#T8pO#U8pO#V8pO#W8rO#X8sO#Y8sO#Z8sO#]8tO#_8vO#a8xO']QO'p!zO'q!{O~O#b#Ri#e#Ri'i#Ri}#Ri!O#Ri~P$LOO^#cy}#cy&}#cyz#cy!_#cy'_#cy!P#cy$x#cy!X#cy~P!(tOP#RiY#Rii#Ris#Ri!]#Ri!^#Ri!`#Ri!f#Ri#S#Ri#T#Ri#U#Ri#V#Ri#W#Ri#X#Ri#Y#Ri#Z#Ri#]#Ri#_#Ri#a#Ri#b#Ri#e#Ri']#Ri}#Ri!O#Ri~P!#QO!^!vOP'[XY'[Xi'[Xr'[Xs'[Xu'[X!]'[X!`'[X!f'[X#S'[X#T'[X#U'[X#V'[X#W'[X#X'[X#Y'[X#Z'[X#]'[X#_'[X#a'[X#b'[X#e'[X']'[X'i'[X'p'[X'q'[X}'[X!O'[X~O#e#fi}#fi!O#fi~P#'yO!O3}O~O}&ia!O&ia~P#'yO!X!tO'i&hO}&ja!_&ja~O},sO!_'vi~O},sO!X!tO!_'vi~Oz&la}&la~P!#QO!X4UO~O},zOz'wi~P!#QO},zOz'wi~Oz4[O~O!X!tO#Y4bO~Oi4cO!X!tO'i&hO~Oz4eO~O'W$aq}$aq#e$aq!u$aq~P!#QO^$Ry}$Ry&}$Ryz$Ry!_$Ry'_$Ry!P$Ry$x$Ry!X$Ry~P!(tO}1nO!P'xa~O!P&]O$x4jO~O!P&]O$x4jO~P!#QO^!wy}!wy&}!wyz!wy!_!wy'_!wy!P!wy$x!wy!X!wy~P!(tOY4mO~O}-|O!O(Oi~O]4oO~O[4pO~O'`&|O}&qX!O&qX~O}2YO!O'{a~O!O4}O~P$/RO!S5QO!T5PO!U5PO!r/zO'T$_O'`(aO~O!o5RO!p5RO~P%*]O!T5PO!U5PO'T$_O'`(aO~O!P.gO~O!P.gO$x5TO~O!P.gO$x5TO~P!#QOR5YO!P.gO!k5XO$x5TO~OY5_O}&ta!O&ta~O}.sO!O'|i~O]5bO~O!_5cO~O!_5dO~O!_5eO~O!_5eO~P)uO^5gO~O!X5jO~O!_5lO~O}'ni!O'ni~P#'yO^$XO&}$XO~P!(tO^$XO!u5qO&}$XO~O^$XO!X!tO!u5qO&}$XO~O^$XO!X!tO!f5vO!u5qO&}$XO'i&hO~O!`$UO'X$`O~P%.`O!T5wO!U5wO'T$_O'`(aO~O}'ky!_'ky^'ky&}'ky~P!(tO#P$aqP$aqY$aq^$aqi$aqs$aq}$aq!]$aq!^$aq!`$aq!f$aq#S$aq#T$aq#U$aq#V$aq#W$aq#X$aq#Y$aq#Z$aq#]$aq#_$aq#a$aq#b$aq&}$aq']$aq!_$aqz$aq!P$aq!u$aq'_$aq$x$aq!X$aq~P!#QO}&bi!_&bi~P!(tO#e!wq}!wq!O!wq~P#'yOr-cOs-cOu-dOPoaYoaioa!]oa!^oa!`oa!foa#Soa#Toa#Uoa#Voa#Woa#Xoa#Yoa#Zoa#]oa#_oa#aoa#boa#eoa']oa'ioa'poa'qoa}oa!Ooa~Or'{Ou'|OP$UaY$Uai$Uas$Ua!]$Ua!^$Ua!`$Ua!f$Ua#S$Ua#T$Ua#U$Ua#V$Ua#W$Ua#X$Ua#Y$Ua#Z$Ua#]$Ua#_$Ua#a$Ua#b$Ua#e$Ua']$Ua'i$Ua'p$Ua'q$Ua}$Ua!O$Ua~Or'{Ou'|OP$WaY$Wai$Was$Wa!]$Wa!^$Wa!`$Wa!f$Wa#S$Wa#T$Wa#U$Wa#V$Wa#W$Wa#X$Wa#Y$Wa#Z$Wa#]$Wa#_$Wa#a$Wa#b$Wa#e$Wa']$Wa'i$Wa'p$Wa'q$Wa}$Wa!O$Wa~OP$faY$fai$fas$fa!]$fa!^$fa!`$fa!f$fa#S$fa#T$fa#U$fa#V$fa#W$fa#X$fa#Y$fa#Z$fa#]$fa#_$fa#a$fa#b$fa#e$fa']$fa}$fa!O$fa~P!#QO#e$Qq}$Qq!O$Qq~P#'yO#e$Rq}$Rq!O$Rq~P#'yO!O6RO~O'W$ty}$ty#e$ty!u$ty~P!#QO!X!tO}&ji!_&ji~O!X!tO'i&hO}&ji!_&ji~O},sO!_'vq~Oz&li}&li~P!#QO},zOz'wq~Oz6YO~P!#QOz6YO~O}'Zy'W'Zy~P!#QO}&oa!P&oa~P!#QO!P$lq^$lq&}$lq~P!#QO}-|O!O(Oq~O]6cO~O!P&]O$x6dO~O!P&]O$x6dO~P!#QO!u6eO}&qa!O&qa~O}2YO!O'{i~P#'yO!T6kO!U6kO'T$_O'`(aO~O!S6mO!T6kO!U6kO!r3mO'T$_O'`(aO~O!P.gO$x6pO~O!P.gO$x6pO~P!#QO'`6vO~O}.sO!O'|q~O!_6yO~O!_6yO~P)uO!_6{O~O!_6|O~O}!|y!O!|y~P#'yO^$XO!u7RO&}$XO~O^$XO!X!tO!u7RO&}$XO~O^$XO!X!tO!f7VO!u7RO&}$XO'i&hO~O#P$tyP$tyY$ty^$tyi$tys$ty}$ty!]$ty!^$ty!`$ty!f$ty#S$ty#T$ty#U$ty#V$ty#W$ty#X$ty#Y$ty#Z$ty#]$ty#_$ty#a$ty#b$ty&}$ty']$ty!_$tyz$ty!P$ty!u$ty'_$ty$x$ty!X$ty~P!#QO#e#cy}#cy!O#cy~P#'yOP$_iY$_ii$_is$_i!]$_i!^$_i!`$_i!f$_i#S$_i#T$_i#U$_i#V$_i#W$_i#X$_i#Y$_i#Z$_i#]$_i#_$_i#a$_i#b$_i#e$_i']$_i}$_i!O$_i~P!#QOr'{Ou'|O'q(QOP$piY$pii$pis$pi!]$pi!^$pi!`$pi!f$pi#S$pi#T$pi#U$pi#V$pi#W$pi#X$pi#Y$pi#Z$pi#]$pi#_$pi#a$pi#b$pi#e$pi']$pi'i$pi'p$pi}$pi!O$pi~Or'{Ou'|OP$riY$rii$ris$ri!]$ri!^$ri!`$ri!f$ri#S$ri#T$ri#U$ri#V$ri#W$ri#X$ri#Y$ri#Z$ri#]$ri#_$ri#a$ri#b$ri#e$ri']$ri'i$ri'p$ri'q$ri}$ri!O$ri~O#e$Ry}$Ry!O$Ry~P#'yO#e!wy}!wy!O!wy~P#'yO!X!tO}&jq!_&jq~O},sO!_'vy~Oz&lq}&lq~P!#QOz7]O~P!#QO}2YO!O'{q~O!T7hO!U7hO'T$_O'`(aO~O!P.gO$x7kO~O!P.gO$x7kO~P!#QO!_7nO~O%}7oOP%z!ZQ%z!ZW%z!Z]%z!Z^%z!Za%z!Zb%z!Zg%z!Zi%z!Zj%z!Zk%z!Zn%z!Zp%z!Zu%z!Zw%z!Zx%z!Zy%z!Z!P%z!Z!Z%z!Z!`%z!Z!c%z!Z!d%z!Z!e%z!Z!f%z!Z!g%z!Z!j%z!Z#[%z!Z#l%z!Z#p%z!Z$w%z!Z$y%z!Z${%z!Z$|%z!Z%P%z!Z%R%z!Z%U%z!Z%V%z!Z%X%z!Z%f%z!Z%l%z!Z%n%z!Z%p%z!Z%r%z!Z%u%z!Z%{%z!Z&P%z!Z&R%z!Z&T%z!Z&V%z!Z&X%z!Z&x%z!Z'S%z!Z']%z!Z'u%z!Z!O%z!Z%s%z!Z_%z!Z%x%z!Z~O^$XO!u7sO&}$XO~O^$XO!X!tO!u7sO&}$XO~OP$aqY$aqi$aqs$aq!]$aq!^$aq!`$aq!f$aq#S$aq#T$aq#U$aq#V$aq#W$aq#X$aq#Y$aq#Z$aq#]$aq#_$aq#a$aq#b$aq#e$aq']$aq}$aq!O$aq~P!#QO}&qq!O&qq~P#'yO^$XO!u8XO&}$XO~OP$tyY$tyi$tys$ty!]$ty!^$ty!`$ty!f$ty#S$ty#T$ty#U$ty#V$ty#W$ty#X$ty#Y$ty#Z$ty#]$ty#_$ty#a$ty#b$ty#e$ty']$ty}$ty!O$ty~P!#QO'_'aX~P.^O'_ZXzZX!_ZX%jZX!PZX$xZX!XZX~P$wO!XcX!_ZX!_cX'icX~P;OOP8iOQ8iO]bOa:OOb!gOgbOi8iOjbOkbOn8iOp8iOuROwbOxbOybO!PSO!Z8kO!`UO!c8iO!d8iO!e8iO!f8iO!g8iO!j!fO#l!iO#p]O'S'[O']QO'u9|O~O}8zO!O$Ta~O]#nOg#{Oi#oOj#nOk#nOn#|Op9POu#uO!P#vO!Z:RO!`#sO#O9VO#l$QO$V9RO$X9TO$[$RO'S&tO']#pO~O#['cO~P&(sO!OZX!OcX~P;OO#P8nO~O!X!tO#P8nO~O!u8}O~O!u9WO}'nX!O'nX~O!u8}O}'lX!O'lX~O#P9XO~O'W9ZO~P!#QO#P9`O~O#P9aO~O!X!tO#P9bO~O!X!tO#P9XO~O#e9cO~P#'yO#P9dO~O#P9eO~O#P9fO~O#P9gO~O#e9hO~P!#QO#e9iO~P!#QO#p~!^!n!p!}#O'u$V$X$[$m$w$x$y%P%R%U%V%X%Z~TS#p'u#Ty'P'Q#r'P'S'`~",goto:"#=a(SPPPPPPP(TP(eP*QPPPP-aPP-v2z4m5QP5QPPP5Q5QP5QP6nPP6sP7[PPPP;kPPPP;k>ZPPP>a@dP;kPBwPPPPDo;kPPPPPFh;kPPIgJdPPPJhPJpKqP;k;kNx!#q!(a!(a!+nPPP!+u;kPPPPPPPPPP!.iP!/zPP;k!1XP;kP;k;k;k;kP;k!3lPP!6cP!9U!9^!9b!9bP!6`P!9f!9fP!<XP!<];k;k!<c!?T5QP5QP5Q5QP!@W5Q5Q!A{5Q5Q5Q!C}5Q5Q!Dk!Fe!Fe!Fi!Fe!FqP!FeP5Q!Gm5Q!Hw5Q5Q-aPPP!JUPP!Jn!JnP!JnP!KT!JnPP!KZP!KQP!KQ!KmJl!KQ!L[!Lb!Le(T!Lh(TP!Lo!Lo!LoP(TP(TP(TP(TPP(TP!Lu!LxP!Lx(TPPP(TP(TP(TP(TP(TP(T(T!L|!MW!M^!Md!Mr!Mx!NO!NY!N`!Nj!Np# O# U# [# j#!P##c##q##w##}#$T#$Z#$e#$k#$q#${#%V#%]PPPPPPPPP#%cPP#&V#*TPP#+h#+o#+wP#0TPP#0X#2l#8f#8j#8m#8p#8{#9OP#9R#9V#9t#:i#:m#;PPP#;T#;Z#;_P#;b#;f#;i#<X#<o#<t#<w#<z#=Q#=T#=X#=]mgOSi{!k$W%_%b%c%e*f*k/T/WQ$elQ$lnQ%VwS&P!`+RQ&d!gS(d#v(iQ)_$fQ)k$nQ*V%PQ+X&WS+_&]+aQ+o&eQ-Z(kQ.r*WU/w+c+d+eS2_.g2aS3i/y/{U5P2d2e2fQ5w3lS6k5Q5RR7h6m$lZORSTUij{!Q!U!Z!^!k!s!w!y!|!}#O#P#Q#R#S#T#U#V#W#_#b$W$j%W%Z%_%a%b%c%e%i%t%|&X&_&i&v&z'z(|)T*b*f*k+j+q,S,Y-d-i-q-{.j.{.|.}/P/T/W/Y/q0U0`2S2l3P3R3S3d5X5g5q7R7s8X!j'^#Y#h&Q'p*z*},_/h0s2[3]6e8i8k8n8o8p8q8r8s8t8u8v8w8x8y8z8}9W9X9Z9b9c9f9g:PQ(t#}Q)d$hQ*X%SQ*`%[Q+y9OQ-v)XQ.z*^Q1{-|Q2t.sR3v9PpdOSiw{!k$W%U%_%b%c%e*f*k/T/WR*Z%W&WVOSTijm{!Q!U!Z!h!k!s!w!y!|!}#O#P#Q#R#S#T#U#V#W#Y#_#b#h$W$j%W%Z%[%_%a%b%c%e%i%t%|&X&_&i&v&z'p'z(|)T*b*f*k*z*}+j+q,S,Y,_-d-i-q-{.j.{.|.}/P/T/W/Y/h/q0U0`0s2S2[2l3P3R3S3]3d5X5g5q6e7R7s8X8i8k8n8o8p8q8r8s8t8u8v8w8x8y8z8}9W9X9Z9b9c9f9g:O:PW!aRU!^&QQ$^kQ$dlS$in$nv$spq!o!r$U$q&Y&m&p)o)p)q*d*{+[+t+v/^0WQ${uQ&a!fQ&c!gS(W#s(bS)^$e$fQ)b$hQ)n$pQ*Q$}Q*U%PS+n&d&eQ,w(XQ-z)_Q.Q)eQ.T)iQ.m*RS.q*V*WQ0S+oQ0|,sQ1z-|Q1}.PQ2Q.VQ2s.rQ4R0}R6a4m!W$bl!g$d$e$f&O&c&d&e(c)^)_+O+^+n+o-T-z/m/t/x0S1c3g3k5u7UQ)V$^Q)v$xQ)y$yQ*T%PQ.X)nQ.l*QU.p*U*V*WQ2n.mS2r.q.rQ4z2^Q5^2sS6i4{5OS7f6j6lQ8O7gR8^8PW#y`$`(q9|S$xr%UQ$ysQ$ztR)t$v$V#x`!t!v#a#s#u$O$P$T&`'v(P(R(S(Z(_(o(p)S)U)X)u)x+k,P,z,|-f-p-r.^.a.i.k0{1U1`1g1n1q1u2T2k2m4U4b4j5T5Y6d6p7k8|9Q9R9S9T9U9V9[9]9^9_9`9a9d9e9h9i9|:S:TV(u#}9O9PU&T!`$r+UQ&}!xQ)h$kQ,j'{Q.b)zQ1h-cR4v2Y&YbORSTUij{!Q!U!Z!^!k!s!w!y!|!}#O#P#Q#R#S#T#U#V#W#Y#_#b#h$W$j%W%Z%[%_%a%b%c%e%i%t%|&Q&X&_&i&v&z'p'z(|)T*b*f*k*z*}+j+q,S,Y,_-d-i-q-{.j.{.|.}/P/T/W/Y/h/q0U0`0s2S2[2l3P3R3S3]3d5X5g5q6e7R7s8X8i8k8n8o8p8q8r8s8t8u8v8w8x8y8z8}9W9X9Z9b9c9f9g:P$]#^Y!]!l$[%s%w&r&y'P'Q'R'S'T'U'V'W'X'Y'Z']'`'d'n)g*v+P+Y+p,O,U,X,Z,i-g/c/f0T0_0c0d0e0f0g0h0i0j0k0l0m0n0o0r0w1l1x3_3b3q3t3u3z3{4x5m5p5{6P6Q7P7b7q8V8a8j9u&ZbORSTUij{!Q!U!Z!^!k!s!w!y!|!}#O#P#Q#R#S#T#U#V#W#Y#_#b#h$W$j%W%Z%[%_%a%b%c%e%i%t%|&Q&X&_&i&v&z'p'z(|)T*b*f*k*z*}+j+q,S,Y,_-d-i-q-{.j.{.|.}/P/T/W/Y/h/q0U0`0s2S2[2l3P3R3S3]3d5X5g5q6e7R7s8X8i8k8n8o8p8q8r8s8t8u8v8w8x8y8z8}9W9X9Z9b9c9f9g:PQ&R!`R/i+RY%{!`&P&W+R+XS(c#v(iS+^&]+aS-T(d(kQ-U(eQ-[(lQ.d)|S/t+_+cS/x+d+eS/|+f2cQ1c-ZQ1e-]Q1f-^S2^.g2aS3g/w/yQ3j/zQ3k/{S4{2_2fS5O2d2eS5u3i3lQ5x3mS6j5P5QQ6l5RQ7U5wS7g6k6mR8P7hlgOSi{!k$W%_%b%c%e*f*k/T/WQ%g!OS&q!s8nQ)[$cQ*O${Q*P$|Q+l&bS+}&v9XS-h(|9bQ-x)]Q.f)}Q/[*mQ/]*nQ/e*|Q0Q+mS1m-i9fQ1v-yS1y-{9gQ3^/gQ3a/oQ3o0RQ4l1wQ5k3ZQ5n3`Q5r3fQ5y3pQ6}5lQ7Q5sQ7r7SQ8T7oR8W7t$W#]Y!]!l%s%w&r&y'P'Q'R'S'T'U'V'W'X'Y'Z']'`'d'n)g*v+P+Y+p,O,U,X,i-g/c/f0T0_0c0d0e0f0g0h0i0j0k0l0m0n0o0r0w1l1x3_3b3q3t3u3z3{4x5m5p5{6P6Q7P7b7q8V8a8j9uU(n#w&u0qT)Q$[,Z$W#[Y!]!l%s%w&r&y'P'Q'R'S'T'U'V'W'X'Y'Z']'`'d'n)g*v+P+Y+p,O,U,X,i-g/c/f0T0_0c0d0e0f0g0h0i0j0k0l0m0n0o0r0w1l1x3_3b3q3t3u3z3{4x5m5p5{6P6Q7P7b7q8V8a8j9uQ'_#]S)P$[,ZR-j)Q&YbORSTUij{!Q!U!Z!^!k!s!w!y!|!}#O#P#Q#R#S#T#U#V#W#Y#_#b#h$W$j%W%Z%[%_%a%b%c%e%i%t%|&Q&X&_&i&v&z'p'z(|)T*b*f*k*z*}+j+q,S,Y,_-d-i-q-{.j.{.|.}/P/T/W/Y/h/q0U0`0s2S2[2l3P3R3S3]3d5X5g5q6e7R7s8X8i8k8n8o8p8q8r8s8t8u8v8w8x8y8z8}9W9X9Z9b9c9f9g:PQ%byQ%czQ%e|Q%f}R/S*iQ&^!fQ)R$^Q+i&aS-o)V)nS/}+g+hW1p-l-m-n.XS3n0O0PU4i1r1s1tU6_4h4r4sQ7_6`R7z7aT+`&]+aS+`&]+aT2`.g2aS&k!n/QQ,v(WQ-R(cS/s+^2^Q1R,wS1]-S-[U3h/x/|5OQ4Q0|S4`1d1fU5v3j3k6lQ6T4RQ6^4cR7V5xQ!uXS&j!n/QQ(}$VQ)Y$aQ)`$gQ+r&kQ,u(WQ-Q(cQ-V(fQ-w)ZQ.n*SS/r+^2^S1Q,v,wS1[-R-[Q1_-UQ1b-WQ2p.oW3e/s/x/|5OQ4P0|Q4T1RS4Y1]1fQ4a1eQ5[2qW5t3h3j3k6lS6S4Q4RQ6X4[Q6[4`Q6g4yQ6t5]S7T5v5xQ7X6TQ7Z6YQ7^6^Q7d6hQ7m6uQ7u7VQ7x7]Q7|7eQ8[7}Q8c8]Q8g8dQ9o9kQ9x9sR9y9t$nWORSTUij{!Q!U!Z!^!k!s!w!y!|!}#O#P#Q#R#S#T#U#V#W#_#b$W$j%W%Z%[%_%a%b%c%e%i%t%|&X&_&i&v&z'z(|)T*b*f*k+j+q,S,Y-d-i-q-{.j.{.|.}/P/T/W/Y/q0U0`2S2l3P3R3S3d5X5g5q7R7s8XS!um!h!j9j#Y#h&Q'p*z*},_/h0s2[3]6e8i8k8n8o8p8q8r8s8t8u8v8w8x8y8z8}9W9X9Z9b9c9f9g:PR9o:O$nXORSTUij{!Q!U!Z!^!k!s!w!y!|!}#O#P#Q#R#S#T#U#V#W#_#b$W$j%W%Z%[%_%a%b%c%e%i%t%|&X&_&i&v&z'z(|)T*b*f*k+j+q,S,Y-d-i-q-{.j.{.|.}/P/T/W/Y/q0U0`2S2l3P3R3S3d5X5g5q7R7s8XQ$Va!W$al!g$d$e$f&O&c&d&e(c)^)_+O+^+n+o-T-z/m/t/x0S1c3g3k5u7US$gm!hQ)Z$bQ*S%PW.o*T*U*V*WU2q.p.q.rQ4y2^S5]2r2sU6h4z4{5OQ6u5^U7e6i6j6lS7}7f7gS8]8O8PQ8d8^!j9k#Y#h&Q'p*z*},_/h0s2[3]6e8i8k8n8o8p8q8r8s8t8u8v8w8x8y8z8}9W9X9Z9b9c9f9g:PQ9s9}R9t:O$f[OSTij{!Q!U!Z!k!s!w!y!|!}#O#P#Q#R#S#T#U#V#W#_#b$W$j%W%Z%_%a%b%c%e%i%t%|&X&_&i&v&z'z(|)T*b*f*k+j+q,S,Y-d-i-q-{.j.{.|.}/P/T/W/Y/q0U0`2S2l3P3R3S3d5X5g5q7R7s8XU!eRU!^v$spq!o!r$U$q&Y&m&p)o)p)q*d*{+[+t+v/^0WQ*a%[!h9l#Y#h'p*z*},_/h0s2[3]6e8i8k8n8o8p8q8r8s8t8u8v8w8x8y8z8}9W9X9Z9b9c9f9g:PR9n&QS&U!`$rR/k+U$lZORSTUij{!Q!U!Z!^!k!s!w!y!|!}#O#P#Q#R#S#T#U#V#W#_#b$W$j%W%Z%_%a%b%c%e%i%t%|&X&_&i&v&z'z(|)T*b*f*k+j+q,S,Y-d-i-q-{.j.{.|.}/P/T/W/Y/q0U0`2S2l3P3R3S3d5X5g5q7R7s8X!j'^#Y#h&Q'p*z*},_/h0s2[3]6e8i8k8n8o8p8q8r8s8t8u8v8w8x8y8z8}9W9X9Z9b9c9f9g:PR*`%[!h#SY!]$[%s%w&r&y'W'X'Y'Z'`'d)g*v+Y+p,O,U,i-g0T0_0o1l1x3b3q3t5p7P7q8V8a8j!R8u']'n+P,Z/c/f0c0k0l0m0n0r0w3_3u3z3{4x5m5{6P6Q7b9u!d#UY!]$[%s%w&r&y'Y'Z'`'d)g*v+Y+p,O,U,i-g0T0_0o1l1x3b3q3t5p7P7q8V8a8j}8w']'n+P,Z/c/f0c0m0n0r0w3_3u3z3{4x5m5{6P6Q7b9u!`#YY!]$[%s%w&r&y'`'d)g*v+Y+p,O,U,i-g0T0_0o1l1x3b3q3t5p7P7q8V8a8jl(S#q&w({,q,y-_-`0]1k4O4d9p9z9{x:P']'n+P,Z/c/f0c0r0w3_3u3z3{4x5m5{6P6Q7b9u!`:S&s'b(V(]+h+|,f,}-k-n.]._0P0[1S1W1t2V2X2i3s4V4]4f4k4s5W5z6V6]6rZ:T0p3y5|7W7v&YbORSTUij{!Q!U!Z!^!k!s!w!y!|!}#O#P#Q#R#S#T#U#V#W#Y#_#b#h$W$j%W%Z%[%_%a%b%c%e%i%t%|&Q&X&_&i&v&z'p'z(|)T*b*f*k*z*}+j+q,S,Y,_-d-i-q-{.j.{.|.}/P/T/W/Y/h/q0U0`0s2S2[2l3P3R3S3]3d5X5g5q6e7R7s8X8i8k8n8o8p8q8r8s8t8u8v8w8x8y8z8}9W9X9Z9b9c9f9g:PS#i_#jR0t,^&a^ORSTU_ij{!Q!U!Z!^!k!s!w!y!|!}#O#P#Q#R#S#T#U#V#W#Y#_#b#h#j$W$j%W%Z%[%_%a%b%c%e%i%t%|&Q&X&_&i&v&z'p'z(|)T*b*f*k*z*}+j+q,S,Y,^,_-d-i-q-{.j.{.|.}/P/T/W/Y/h/q0U0`0s2S2[2l3P3R3S3]3d5X5g5q6e7R7s8X8i8k8n8o8p8q8r8s8t8u8v8w8x8y8z8}9W9X9Z9b9c9f9g:PS#d]#kT'g#f'kT#e]#kT'i#f'k&a_ORSTU_ij{!Q!U!Z!^!k!s!w!y!|!}#O#P#Q#R#S#T#U#V#W#Y#_#b#h#j$W$j%W%Z%[%_%a%b%c%e%i%t%|&Q&X&_&i&v&z'p'z(|)T*b*f*k*z*}+j+q,S,Y,^,_-d-i-q-{.j.{.|.}/P/T/W/Y/h/q0U0`0s2S2[2l3P3R3S3]3d5X5g5q6e7R7s8X8i8k8n8o8p8q8r8s8t8u8v8w8x8y8z8}9W9X9Z9b9c9f9g:PT#i_#jQ#l_R'r#j$naORSTUij{!Q!U!Z!^!k!s!w!y!|!}#O#P#Q#R#S#T#U#V#W#_#b$W$j%W%Z%[%_%a%b%c%e%i%t%|&X&_&i&v&z'z(|)T*b*f*k+j+q,S,Y-d-i-q-{.j.{.|.}/P/T/W/Y/q0U0`2S2l3P3R3S3d5X5g5q7R7s8X!k9}#Y#h&Q'p*z*},_/h0s2[3]6e8i8k8n8o8p8q8r8s8t8u8v8w8x8y8z8}9W9X9Z9b9c9f9g:P#RcOSUi{!Q!U!k!y#h$W%W%Z%[%_%a%b%c%e%i%|&_'p)T*b*f*k+j,_-d-q.j.{.|.}/P/T/W/Y0s2S2l3P3R3S5X5gt#w`!v$O$P$T(P(R(S(Z(o(p,P-f0{1g9|:S:T!|&u!t#a#s#u&`'v(_)S)U)X)u)x+k,z,|-p-r.^.a.i.k1U1`1n1q1u2T2k2m4U4b4j5T5Y6d6p7k9Q9S9U9[9^9`9d9hQ(y$Rc0q8|9R9T9V9]9_9a9e9it#t`!v$O$P$T(P(R(S(Z(o(p,P-f0{1g9|:S:TS(f#v(iQ(z$SQ-W(g!|9q!t#a#s#u&`'v(_)S)U)X)u)x+k,z,|-p-r.^.a.i.k1U1`1n1q1u2T2k2m4U4b4j5T5Y6d6p7k9Q9S9U9[9^9`9d9hb9r8|9R9T9V9]9_9a9e9iQ9v:QR9w:RleOSi{!k$W%_%b%c%e*f*k/T/WQ(^#uQ*r%lQ*s%nR1T,z$U#x`!t!v#a#s#u$O$P$T&`'v(P(R(S(Z(_(o(p)S)U)X)u)x+k,P,z,|-f-p-r.^.a.i.k0{1U1`1g1n1q1u2T2k2m4U4b4j5T5Y6d6p7k8|9Q9R9S9T9U9V9[9]9^9_9`9a9d9e9h9i9|:S:TQ)w$yQ.`)yQ2W._R4u2XT(h#v(iS(h#v(iT2`.g2aQ)Y$aQ-V(fQ-w)ZQ.n*SQ2p.oQ5[2qQ6g4yQ6t5]Q7d6hQ7m6uQ7|7eQ8[7}Q8c8]R8g8dl(P#q&w({,q,y-_-`0]1k4O4d9p9z9{!`9[&s'b(V(]+h+|,f,}-k-n.]._0P0[1S1W1t2V2X2i3s4V4]4f4k4s5W5z6V6]6rZ9]0p3y5|7W7vn(R#q&w({,o,q,y-_-`0]1k4O4d9p9z9{!b9^&s'b(V(]+h+|,f,}-k-n.]._0P0Y0[1S1W1t2V2X2i3s4V4]4f4k4s5W5z6V6]6r]9_0p3y5|5}7W7vpdOSiw{!k$W%U%_%b%c%e*f*k/T/WQ%RvR*b%[pdOSiw{!k$W%U%_%b%c%e*f*k/T/WR%RvQ){$zR.[)tqdOSiw{!k$W%U%_%b%c%e*f*k/T/WQ.h*QS2j.l.mW5S2g2h2i2nU6o5U5V5WU7i6n6q6rQ8Q7jR8_8RQ%YwR*[%UR2w.uR6w5_S$in$nR.Q)eQ%_xR*f%`R*l%fT/U*k/WQiOQ!kST$Zi!kQ'x#pR,g'xQ!WQR%q!WQ![RU%u![%v*wQ%v!]R*w%wQ+S&RR/j+SQ,Q&wR0^,QQ,T&yS0a,T0bR0b,UQ+a&]R/u+aQ&Z!cQ*x%xT+]&Z*xQ+V&UR/l+VQ&n!pQ+s&lU+w&n+s0XR0X+xQ'k#fR,`'kQ#j_R'q#jQ#`YU'a#`*u8{Q*u8jR8{'nQ,t(WW1O,t1P4S6UU1P,u,v,wS4S1Q1RR6U4T#q'}#q&s&w'b(V(](v(w({+h+z+{+|,f,o,p,q,y,}-_-`-k-n.]._0P0Y0Z0[0]0p1S1W1k1t2V2X2i3s3w3x3y4O4V4]4d4f4k4s5W5z5|5}6O6V6]6r7W7v9p9z9{Q,{(]U1V,{1X4WQ1X,}R4W1WQ(i#vR-X(iQ(r#zR-b(rQ1o-kR4g1oQ)r$tR.Z)rQ2Z.bS4w2Z6fR6f4xQ)}${R.e)}Q2a.gR4|2aQ.t*XS2u.t5`R5`2wQ-})bS1|-}4nR4n1}Q)f$iR.R)fQ/W*kR3V/WWhOSi!kQ%d{Q)O$WQ*e%_Q*g%bQ*h%cQ*j%eQ/R*fS/U*k/WR3U/TQ$YfQ%h!PQ%k!RQ%m!SQ%o!TQ)m$oQ)s$uQ*Z%YQ*p%jS.w*[*_Q/_*oQ/`*rQ/a*sS/p+^2^Q1Y-PQ1Z-QQ1a-VQ2P.UQ2U.]Q2o.nQ2y.yQ3T/SY3c/r/s/x/|5OQ4X1[Q4Z1^Q4^1bQ4q2RQ4t2VQ5Z2pQ5a2x[5o3b3e3h3j3k6lQ6W4YQ6Z4_Q6b4oQ6s5[Q6x5bW7O5p5t5v5xQ7Y6XQ7[6[Q7`6cQ7c6gQ7l6tU7p7P7T7VQ7w7ZQ7y7^Q7{7dQ8S7mS8U7q7uQ8Y7xQ8Z7|Q8`8VQ8b8[Q8e8aQ8f8cR8h8gQ$clQ&b!gU)]$d$e$fQ*|&OU+m&c&d&eQ-P(cS-y)^)_Q/g+OQ/o+^S0R+n+oQ1^-TQ1w-zQ3`/mS3f/t/xQ3p0SQ4_1cS5s3g3kQ7S5uR7t7US#r`9|R)W$`U#z`$`9|R-a(qQ#q`S&s!t)XQ&w!vQ'b#aQ(V#sQ(]#uQ(v$OQ(w$PQ({$TQ+h&`Q+z9QQ+{9SQ+|9UQ,f'vQ,o(PQ,p(RQ,q(SQ,y(ZQ,}(_Q-_(oQ-`(pd-k)S-p.i1q2k4j5T6d6p7kQ-n)UQ.])uQ._)xQ0P+kQ0Y9[Q0Z9^Q0[9`Q0],PQ0p8|Q1S,zQ1W,|Q1k-fQ1t-rQ2V.^Q2X.aQ2i.kQ3s9dQ3w9RQ3x9TQ3y9VQ4O0{Q4V1UQ4]1`Q4d1gQ4f1nQ4k1uQ4s2TQ5W2mQ5z9hQ5|9aQ5}9]Q6O9_Q6V4UQ6]4bQ6r5YQ7W9eQ7v9iQ9p9|Q9z:SR9{:TT'w#p'xlfOSi{!k$W%_%b%c%e*f*k/T/WS!mU%aQ%j!QQ%p!UQ'O!yQ'o#hS*_%W%ZQ*c%[Q*o%iQ*y%|Q+g&_Q,d'pQ-m)TQ/O*bQ0O+jQ0v,_Q1i-dQ1s-qQ2h.jQ2{.{Q2|.|Q3O.}Q3Q/PQ3X/YQ3|0sQ4r2SQ5V2lQ5f3PQ5h3RQ5i3SQ6q5XR6z5g!vYOSUi{!Q!k!y$W%W%Z%[%_%a%b%c%e%i%|&_)T*b*f*k+j-d-q.j.{.|.}/P/T/W/Y2S2l3P3R3S5X5gQ!]RQ!lTQ$[jQ%s!ZQ%w!^Q&r!sQ&y!wQ'P!|Q'Q!}Q'R#OQ'S#PQ'T#QQ'U#RQ'V#SQ'W#TQ'X#UQ'Y#VQ'Z#WQ']#YQ'`#_Q'd#bW'n#h'p,_0sQ)g$jQ*v%tS+P&Q/hQ+Y&XQ+p&iQ,O&vQ,U&zQ,X8iQ,Z8kQ,i'zQ-g(|Q/c*zQ/f*}Q0T+qQ0_,SQ0c8nQ0d8oQ0e8pQ0f8qQ0g8rQ0h8sQ0i8tQ0j8uQ0k8vQ0l8wQ0m8xQ0n8yQ0o,YQ0r8}Q0w8zQ1l-iQ1x-{Q3_9WQ3b/qQ3q0UQ3t0`Q3u9XQ3z9ZQ3{9bQ4x2[Q5m3]Q5p3dQ5{9cQ6P9fQ6Q9gQ7P5qQ7b6eQ7q7RQ8V7sQ8a8XQ8j!UR9u:PT!VQ!WR!_RR&S!`S&O!`+RS+O&P&WR/m+XR&x!vR&{!wT!qU$US!pU$UU$tpq*dS&l!o!rQ+u&mQ+x&pQ.Y)qS0V+t+vR3r0W[!bR!^$q&Y)o+[h!nUpq!o!r$U&m&p)q+t+v0WQ/Q*dQ/d*{Q3[/^T9m&Q)pT!dR$qS!cR$qS%x!^)oS+Q&Q)pQ+Z&YR/n+[T&V!`$rQ#f]R't#kT'j#f'kR0u,^T(Y#s(bR(`#uQ-l)SQ1r-pQ2g.iQ4h1qQ5U2kQ6`4jQ6n5TQ7a6dQ7j6pR8R7klgOSi{!k$W%_%b%c%e*f*k/T/WQ%XwR*Z%UV$upq*dR.c)zR*Y%SQ$mnR)l$nR)c$hT%]x%`T%^x%`T/V*k/W",nodeNames:"‚ö† ArithOp ArithOp extends LineComment BlockComment Script ExportDeclaration export Star as VariableName from String ; default FunctionDeclaration async function VariableDefinition TypeParamList TypeDefinition ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType VoidType void TypeofType typeof MemberExpression . ?. PropertyName [ TemplateString null super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyNameDefinition Block : NewExpression new TypeArgList CompareOp < ) ( ArgList UnaryExpression await yield delete LogicOp BitOp ParenthesizedExpression ClassExpression class extends ClassBody MethodDeclaration Privacy static abstract PropertyDeclaration readonly Optional TypeAnnotation Equals FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp in instanceof const CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression TaggedTemplatExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXStartTag JSXSelfClosingTag JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast ArrowFunction TypeParamList SequenceExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature CallSignature TypePredicate is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody MethodDeclaration AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try catch finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement",maxTerm:325,context:vk,nodeProps:[[WY.group,-26,7,14,16,54,176,180,183,184,186,189,192,203,205,211,213,215,217,220,226,230,232,234,236,238,240,241,"Statement",-30,11,13,23,26,27,38,39,40,41,43,48,56,64,70,71,84,85,94,95,111,114,116,117,118,119,121,122,140,141,143,"Expression",-22,22,24,28,29,31,144,146,148,149,151,152,153,155,156,157,159,160,161,170,172,174,175,"Type",-2,75,79,"ClassItem"],[WY.closedBy,37,"]",47,"}",62,")",124,"JSXSelfCloseEndTag JSXEndTag",138,"JSXEndTag"],[WY.openedBy,42,"[",46,"{",61,"(",123,"JSXStartTag",133,"JSXStartTag JSXStartCloseTag"]],skippedNodes:[0,4,5],repeatNodeCount:28,tokenData:"!As~R!`OX%TXY%cYZ'RZ[%c[]%T]^'R^p%Tpq%cqr'crs(kst%Ttu0huv2xvw3mwx4kxy;Ryz;cz{;s{|<s|}=W}!O<s!O!P=h!P!QAt!Q!R!.d!R![!/y![!]!5i!]!^!5{!^!_!6]!_!`!7Y!`!a!8Q!a!b!9w!b!c%T!c!}0h!}#O!;Y#O#P%T#P#Q!;j#Q#R!;z#R#S0h#S#T!<_#T#o0h#o#p!<o#p#q!<t#q#r!=[#r#s!=n#s$f%T$f$g%c$g#BY0h#BY#BZ!>O#BZ$IS0h$IS$I_!>O$I_$I|0h$I|$I}!@g$I}$JO!@g$JO$JT0h$JT$JU!>O$JU$KV0h$KV$KW!>O$KW&FU0h&FU&FV!>O&FV?HT0h?HT?HU!>O?HU~0hW%YR#|WO!^%T!_#o%T#p~%T,T%jg#|W'P+{OX%TXY%cYZ%TZ[%c[p%Tpq%cq!^%T!_#o%T#p$f%T$f$g%c$g#BY%T#BY#BZ%c#BZ$IS%T$IS$I_%c$I_$JT%T$JT$JU%c$JU$KV%T$KV$KW%c$KW&FU%T&FU&FV%c&FV?HT%T?HT?HU%c?HU~%T,T'YR#|W'Q+{O!^%T!_#o%T#p~%T$T'jS#|W!f#{O!^%T!_!`'v!`#o%T#p~%T$O'}S#]#v#|WO!^%T!_!`(Z!`#o%T#p~%T$O(bR#]#v#|WO!^%T!_#o%T#p~%T'u(rZ#|W]!ROY(kYZ)eZr(krs*rs!^(k!^!_+U!_#O(k#O#P-b#P#o(k#o#p+U#p~(k&r)jV#|WOr)ers*Ps!^)e!^!_*a!_#o)e#o#p*a#p~)e&r*WR#w&j#|WO!^%T!_#o%T#p~%T&j*dROr*ars*ms~*a&j*rO#w&j'u*{R#w&j#|W]!RO!^%T!_#o%T#p~%T'm+ZV]!ROY+UYZ*aZr+Urs+ps#O+U#O#P+w#P~+U'm+wO#w&j]!R'm+zROr+Urs,Ts~+U'm,[U#w&j]!ROY,nZr,nrs-Vs#O,n#O#P-[#P~,n!R,sU]!ROY,nZr,nrs-Vs#O,n#O#P-[#P~,n!R-[O]!R!R-_PO~,n'u-gV#|WOr(krs-|s!^(k!^!_+U!_#o(k#o#p+U#p~(k'u.VZ#w&j#|W]!ROY.xYZ%TZr.xrs/rs!^.x!^!_,n!_#O.x#O#P0S#P#o.x#o#p,n#p~.x!Z/PZ#|W]!ROY.xYZ%TZr.xrs/rs!^.x!^!_,n!_#O.x#O#P0S#P#o.x#o#p,n#p~.x!Z/yR#|W]!RO!^%T!_#o%T#p~%T!Z0XT#|WO!^.x!^!_,n!_#o.x#o#p,n#p~.x&i0s_#|W#rS'S%k'`pOt%Ttu0hu}%T}!O1r!O!Q%T!Q![0h![!^%T!_!c%T!c!}0h!}#R%T#R#S0h#S#T%T#T#o0h#p$g%T$g~0h[1y_#|W#rSOt%Ttu1ru}%T}!O1r!O!Q%T!Q![1r![!^%T!_!c%T!c!}1r!}#R%T#R#S1r#S#T%T#T#o1r#p$g%T$g~1r$O3PS#U#v#|WO!^%T!_!`3]!`#o%T#p~%T$O3dR#|W#g#vO!^%T!_#o%T#p~%T%r3tU'q%j#|WOv%Tvw4Ww!^%T!_!`3]!`#o%T#p~%T$O4_S#|W#a#vO!^%T!_!`3]!`#o%T#p~%T'u4rZ#|W]!ROY4kYZ5eZw4kwx*rx!^4k!^!_6]!_#O4k#O#P8]#P#o4k#o#p6]#p~4k&r5jV#|WOw5ewx*Px!^5e!^!_6P!_#o5e#o#p6P#p~5e&j6SROw6Pwx*mx~6P'm6bV]!ROY6]YZ6PZw6]wx+px#O6]#O#P6w#P~6]'m6zROw6]wx7Tx~6]'m7[U#w&j]!ROY7nZw7nwx-Vx#O7n#O#P8V#P~7n!R7sU]!ROY7nZw7nwx-Vx#O7n#O#P8V#P~7n!R8YPO~7n'u8bV#|WOw4kwx8wx!^4k!^!_6]!_#o4k#o#p6]#p~4k'u9QZ#w&j#|W]!ROY9sYZ%TZw9swx/rx!^9s!^!_7n!_#O9s#O#P:m#P#o9s#o#p7n#p~9s!Z9zZ#|W]!ROY9sYZ%TZw9swx/rx!^9s!^!_7n!_#O9s#O#P:m#P#o9s#o#p7n#p~9s!Z:rT#|WO!^9s!^!_7n!_#o9s#o#p7n#p~9s%V;YR!`$}#|WO!^%T!_#o%T#p~%TZ;jR!_R#|WO!^%T!_#o%T#p~%T%R;|U'T!R#V#v#|WOz%Tz{<`{!^%T!_!`3]!`#o%T#p~%T$O<gS#S#v#|WO!^%T!_!`3]!`#o%T#p~%T$u<zSi$m#|WO!^%T!_!`3]!`#o%T#p~%T&i=_R}&a#|WO!^%T!_#o%T#p~%T&i=oVr%n#|WO!O%T!O!P>U!P!Q%T!Q![>z![!^%T!_#o%T#p~%Ty>ZT#|WO!O%T!O!P>j!P!^%T!_#o%T#p~%Ty>qR|q#|WO!^%T!_#o%T#p~%Ty?RZ#|WjqO!Q%T!Q![>z![!^%T!_!g%T!g!h?t!h#R%T#R#S>z#S#X%T#X#Y?t#Y#o%T#p~%Ty?yZ#|WO{%T{|@l|}%T}!O@l!O!Q%T!Q![AW![!^%T!_#R%T#R#SAW#S#o%T#p~%Ty@qV#|WO!Q%T!Q![AW![!^%T!_#R%T#R#SAW#S#o%T#p~%TyA_V#|WjqO!Q%T!Q![AW![!^%T!_#R%T#R#SAW#S#o%T#p~%T,TA{`#|W#T#vOYB}YZ%TZzB}z{Ht{!PB}!P!Q!+m!Q!^B}!^!_EQ!_!`!,f!`!a!-e!a!}B}!}#OFy#O#PHY#P#oB}#o#pEQ#p~B}XCU[#|WyPOYB}YZ%TZ!PB}!P!QCz!Q!^B}!^!_EQ!_!}B}!}#OFy#O#PHY#P#oB}#o#pEQ#p~B}XDR_#|WyPO!^%T!_#Z%T#Z#[Cz#[#]%T#]#^Cz#^#a%T#a#bCz#b#g%T#g#hCz#h#i%T#i#jCz#j#m%T#m#nCz#n#o%T#p~%TPEVVyPOYEQZ!PEQ!P!QEl!Q!}EQ!}#OFT#O#PFp#P~EQPEqUyP#Z#[El#]#^El#a#bEl#g#hEl#i#jEl#m#nElPFWTOYFTZ#OFT#O#PFg#P#QEQ#Q~FTPFjQOYFTZ~FTPFsQOYEQZ~EQXGOY#|WOYFyYZ%TZ!^Fy!^!_FT!_#OFy#O#PGn#P#QB}#Q#oFy#o#pFT#p~FyXGsV#|WOYFyYZ%TZ!^Fy!^!_FT!_#oFy#o#pFT#p~FyXH_V#|WOYB}YZ%TZ!^B}!^!_EQ!_#oB}#o#pEQ#p~B},TH{^#|WyPOYHtYZIwZzHtz{LY{!PHt!P!Q!*Z!Q!^Ht!^!_Ne!_!}Ht!}#O!&U#O#P!)i#P#oHt#o#pNe#p~Ht,TI|V#|WOzIwz{Jc{!^Iw!^!_Ke!_#oIw#o#pKe#p~Iw,TJhX#|WOzIwz{Jc{!PIw!P!QKT!Q!^Iw!^!_Ke!_#oIw#o#pKe#p~Iw,TK[R#|WT+{O!^%T!_#o%T#p~%T+{KhROzKez{Kq{~Ke+{KtTOzKez{Kq{!PKe!P!QLT!Q~Ke+{LYOT+{,TLa^#|WyPOYHtYZIwZzHtz{LY{!PHt!P!QM]!Q!^Ht!^!_Ne!_!}Ht!}#O!&U#O#P!)i#P#oHt#o#pNe#p~Ht,TMf_#|WT+{yPO!^%T!_#Z%T#Z#[Cz#[#]%T#]#^Cz#^#a%T#a#bCz#b#g%T#g#hCz#h#i%T#i#jCz#j#m%T#m#nCz#n#o%T#p~%T+{NjYyPOYNeYZKeZzNez{! Y{!PNe!P!Q!%Q!Q!}Ne!}#O!!h#O#P!$n#P~Ne+{! _YyPOYNeYZKeZzNez{! Y{!PNe!P!Q! }!Q!}Ne!}#O!!h#O#P!$n#P~Ne+{!!UUT+{yP#Z#[El#]#^El#a#bEl#g#hEl#i#jEl#m#nEl+{!!kWOY!!hYZKeZz!!hz{!#T{#O!!h#O#P!$[#P#QNe#Q~!!h+{!#WYOY!!hYZKeZz!!hz{!#T{!P!!h!P!Q!#v!Q#O!!h#O#P!$[#P#QNe#Q~!!h+{!#{TT+{OYFTZ#OFT#O#PFg#P#QEQ#Q~FT+{!$_TOY!!hYZKeZz!!hz{!#T{~!!h+{!$qTOYNeYZKeZzNez{! Y{~Ne+{!%V_yPOzKez{Kq{#ZKe#Z#[!%Q#[#]Ke#]#^!%Q#^#aKe#a#b!%Q#b#gKe#g#h!%Q#h#iKe#i#j!%Q#j#mKe#m#n!%Q#n~Ke,T!&Z[#|WOY!&UYZIwZz!&Uz{!'P{!^!&U!^!_!!h!_#O!&U#O#P!(w#P#QHt#Q#o!&U#o#p!!h#p~!&U,T!'U^#|WOY!&UYZIwZz!&Uz{!'P{!P!&U!P!Q!(Q!Q!^!&U!^!_!!h!_#O!&U#O#P!(w#P#QHt#Q#o!&U#o#p!!h#p~!&U,T!(XY#|WT+{OYFyYZ%TZ!^Fy!^!_FT!_#OFy#O#PGn#P#QB}#Q#oFy#o#pFT#p~Fy,T!(|X#|WOY!&UYZIwZz!&Uz{!'P{!^!&U!^!_!!h!_#o!&U#o#p!!h#p~!&U,T!)nX#|WOYHtYZIwZzHtz{LY{!^Ht!^!_Ne!_#oHt#o#pNe#p~Ht,T!*bc#|WyPOzIwz{Jc{!^Iw!^!_Ke!_#ZIw#Z#[!*Z#[#]Iw#]#^!*Z#^#aIw#a#b!*Z#b#gIw#g#h!*Z#h#iIw#i#j!*Z#j#mIw#m#n!*Z#n#oIw#o#pKe#p~Iw,T!+tV#|WS+{OY!+mYZ%TZ!^!+m!^!_!,Z!_#o!+m#o#p!,Z#p~!+m+{!,`QS+{OY!,ZZ~!,Z$P!,o[#|W#g#vyPOYB}YZ%TZ!PB}!P!QCz!Q!^B}!^!_EQ!_!}B}!}#OFy#O#PHY#P#oB}#o#pEQ#p~B}]!-n[#oS#|WyPOYB}YZ%TZ!PB}!P!QCz!Q!^B}!^!_EQ!_!}B}!}#OFy#O#PHY#P#oB}#o#pEQ#p~B}y!.kd#|WjqO!O%T!O!P>z!P!Q%T!Q![!/y![!^%T!_!g%T!g!h?t!h#R%T#R#S!/y#S#U%T#U#V!1a#V#X%T#X#Y?t#Y#b%T#b#c!1P#c#d!2o#d#l%T#l#m!3w#m#o%T#p~%Ty!0Q_#|WjqO!O%T!O!P>z!P!Q%T!Q![!/y![!^%T!_!g%T!g!h?t!h#R%T#R#S!/y#S#X%T#X#Y?t#Y#b%T#b#c!1P#c#o%T#p~%Ty!1WR#|WjqO!^%T!_#o%T#p~%Ty!1fW#|WO!Q%T!Q!R!2O!R!S!2O!S!^%T!_#R%T#R#S!2O#S#o%T#p~%Ty!2VW#|WjqO!Q%T!Q!R!2O!R!S!2O!S!^%T!_#R%T#R#S!2O#S#o%T#p~%Ty!2tV#|WO!Q%T!Q!Y!3Z!Y!^%T!_#R%T#R#S!3Z#S#o%T#p~%Ty!3bV#|WjqO!Q%T!Q!Y!3Z!Y!^%T!_#R%T#R#S!3Z#S#o%T#p~%Ty!3|Z#|WO!Q%T!Q![!4o![!^%T!_!c%T!c!i!4o!i#R%T#R#S!4o#S#T%T#T#Z!4o#Z#o%T#p~%Ty!4vZ#|WjqO!Q%T!Q![!4o![!^%T!_!c%T!c!i!4o!i#R%T#R#S!4o#S#T%T#T#Z!4o#Z#o%T#p~%T%w!5rR!XV#|W#e%hO!^%T!_#o%T#p~%T!P!6SR^w#|WO!^%T!_#o%T#p~%T+c!6hR'Xd!]%Y#p&s'uP!P!Q!6q!^!_!6v!_!`!7TW!6vO$OW#v!6{P#W#v!_!`!7O#v!7TO#g#v#v!7YO#X#v%w!7aT!u%o#|WO!^%T!_!`'v!`!a!7p!a#o%T#p~%T$P!7wR#P#w#|WO!^%T!_#o%T#p~%T%w!8]T'W!s#X#v#yS#|WO!^%T!_!`!8l!`!a!8|!a#o%T#p~%T$O!8sR#X#v#|WO!^%T!_#o%T#p~%T$O!9TT#W#v#|WO!^%T!_!`3]!`!a!9d!a#o%T#p~%T$O!9kS#W#v#|WO!^%T!_!`3]!`#o%T#p~%T%w!:OV'i%o#|WO!O%T!O!P!:e!P!^%T!_!a%T!a!b!:u!b#o%T#p~%T$`!:lRs$W#|WO!^%T!_#o%T#p~%T$O!:|S#|W#b#vO!^%T!_!`3]!`#o%T#p~%T&e!;aRu&]#|WO!^%T!_#o%T#p~%TZ!;qRzR#|WO!^%T!_#o%T#p~%T$O!<RS#_#v#|WO!^%T!_!`3]!`#o%T#p~%T$P!<fR#|W']#wO!^%T!_#o%T#p~%T~!<tO!P~%r!<{T'p%j#|WO!^%T!_!`3]!`#o%T#p#q!:u#q~%T$u!=eR!O$k#|W'_QO!^%T!_#o%T#p~%TX!=uR!gP#|WO!^%T!_#o%T#p~%T,T!>]r#|W'P+{#rS'S%k'`pOX%TXY%cYZ%TZ[%c[p%Tpq%cqt%Ttu0hu}%T}!O1r!O!Q%T!Q![0h![!^%T!_!c%T!c!}0h!}#R%T#R#S0h#S#T%T#T#o0h#p$f%T$f$g%c$g#BY0h#BY#BZ!>O#BZ$IS0h$IS$I_!>O$I_$JT0h$JT$JU!>O$JU$KV0h$KV$KW!>O$KW&FU0h&FU&FV!>O&FV?HT0h?HT?HU!>O?HU~0h,T!@t_#|W'Q+{#rS'S%k'`pOt%Ttu0hu}%T}!O1r!O!Q%T!Q![0h![!^%T!_!c%T!c!}0h!}#R%T#R#S0h#S#T%T#T#o0h#p$g%T$g~0h",tokenizers:[Mk,Nk,Ek,0,1,2,3,4,5,6,7,8,Dk],topRules:{Script:[0,6]},dialects:{jsx:11129,ts:11131},dynamicPrecedences:{141:1,168:1},specialized:[{term:280,get:(g,I)=>function(g,I){return"extends"==g&&I.dialectEnabled(1)?3:-1}(g,I)<<1|1},{term:280,get:g=>Fk[g]||-1},{term:292,get:g=>Lk[g]||-1},{term:59,get:g=>Tk[g]||-1}],tokenPrec:11151}),Pk=[TQ("function ${name}(${params}) {\n\t${}\n}",{label:"function",detail:"definition",type:"keyword"}),TQ("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n\t${}\n}",{label:"for",detail:"loop",type:"keyword"}),TQ("for (let ${name} of ${collection}) {\n\t${}\n}",{label:"for",detail:"of loop",type:"keyword"}),TQ("try {\n\t${}\n} catch (${error}) {\n\t${}\n}",{label:"try",detail:"block",type:"keyword"}),TQ("class ${name} {\n\tconstructor(${params}) {\n\t\t${}\n\t}\n}",{label:"class",detail:"definition",type:"keyword"}),TQ('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),TQ('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],Uk=jY.define({parser:zk.configure({props:[dX.add({IfStatement:yX({except:/^\s*({|else\b)/}),TryStatement:yX({except:/^\s*({|catch|finally)\b/}),LabeledStatement:BX,SwitchBody:g=>{let I=g.textAfter,A=/^\s*\}/.test(I),C=/^\s*(case|default)\b/.test(I);return g.baseIndent+(A?0:C?1:2)*g.unit},Block:bX({closing:"}"}),ArrowFunction:g=>g.baseIndent+g.unit,"TemplateString BlockComment":()=>-1,"Statement Property":yX({except:/^{/}),JSXElement(g){let I=/^\s*<\//.test(g.textAfter);return g.lineIndent(g.node.from)+(I?0:g.unit)},JSXEscape(g){let I=/\s*\}/.test(g.textAfter);return g.lineIndent(g.node.from)+(I?0:g.unit)},"JSXOpenTag JSXSelfClosingTag":g=>g.column(g.node.from)+g.unit}),SX.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression":KX,BlockComment:g=>({from:g.from+2,to:g.to-2})}),cH({"get set async static":MH.modifier,"for while do if else switch try catch finally return throw break continue default case":MH.controlKeyword,"in of await yield void typeof delete instanceof":MH.operatorKeyword,"export import let var const function class extends":MH.definitionKeyword,"with debugger from as new":MH.keyword,TemplateString:MH.special(MH.string),Super:MH.atom,BooleanLiteral:MH.bool,this:MH.self,null:MH.null,Star:MH.modifier,VariableName:MH.variableName,"CallExpression/VariableName":MH.function(MH.variableName),VariableDefinition:MH.definition(MH.variableName),Label:MH.labelName,PropertyName:MH.propertyName,"CallExpression/MemberExpression/PropertyName":MH.function(MH.propertyName),"FunctionDeclaration/VariableDefinition":MH.function(MH.definition(MH.variableName)),"ClassDeclaration/VariableDefinition":MH.definition(MH.className),PropertyNameDefinition:MH.definition(MH.propertyName),UpdateOp:MH.updateOperator,LineComment:MH.lineComment,BlockComment:MH.blockComment,Number:MH.number,String:MH.string,ArithOp:MH.arithmeticOperator,LogicOp:MH.logicOperator,BitOp:MH.bitwiseOperator,CompareOp:MH.compareOperator,RegExp:MH.regexp,Equals:MH.definitionOperator,"Arrow : Spread":MH.punctuation,"( )":MH.paren,"[ ]":MH.squareBracket,"{ }":MH.brace,".":MH.derefOperator,", ;":MH.separator,TypeName:MH.typeName,TypeDefinition:MH.definition(MH.typeName),"type enum interface implements namespace module declare":MH.definitionKeyword,"abstract global privacy readonly":MH.modifier,"is keyof unique infer":MH.operatorKeyword,JSXAttributeValue:MH.string,JSXText:MH.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":MH.angleBracket,"JSXIdentifier JSXNameSpacedName":MH.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":MH.propertyName})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),xk=Uk.configure({dialect:"ts"}),jk=Uk.configure({dialect:"jsx"}),_k=Uk.configure({dialect:"jsx ts"});function $k(g={}){let I=g.jsx?g.typescript?_k:jk:g.typescript?xk:Uk;return new oX(I,Uk.data.of({autocomplete:gQ(["LineComment","BlockComment","String"],qR(Pk))}))}const qk=[21,47,48,228,63,121,52,55,203,60,61,56,59,71],gJ=new Zk(((g,I)=>{if(g.next<0)g.acceptToken(167);else if(10!=g.next&&13!=g.next);else if(I.context.depth<0)g.acceptToken(165,1);else{g.advance();let I=0;for(;32==g.next||9==g.next;)g.advance(),I++;let A=10==g.next||13==g.next||35==g.next;g.acceptToken(A?166:164,-I)}}),{contextual:!0,fallback:!0}),IJ=new Zk(((g,I)=>{let A=I.context.depth;if(A<0)return;let C=g.peek(-1);if((10==C||13==C)&&I.context.depth>=0){let I=0,C=0;for(;;){if(32==g.next)I++;else{if(9!=g.next)break;I+=8-I%8}g.advance(),C++}I!=A&&10!=g.next&&13!=g.next&&35!=g.next&&(I<A?g.acceptToken(163,-C):g.acceptToken(162))}}));function AJ(g,I){this.parent=g,this.depth=I,this.hash=(g?g.hash+g.hash<<8:0)+I+(I<<4)}const CJ=new Ok({start:new AJ(null,0),reduce:(g,I)=>g.depth<0&&qk.indexOf(I)>-1?g.parent:g,shift:(g,I,A,C)=>162==I?new AJ(g,A.pos-C.pos):163==I?g.parent:22==I||53==I||57==I?new AJ(g,-1):g,hash:g=>g.hash}),tJ=new Zk((g=>{for(let I=0;I<5;I++){if(g.next!="print".charCodeAt(I))return;g.advance()}if(!/\w/.test(String.fromCharCode(g.next)))for(let I=0;;I++){let A=g.peek(I);if(32!=A&&9!=A)return void(40!=A&&46!=A&&10!=A&&13!=A&&35!=A&&g.acceptToken(1))}})),iJ={__proto__:null,await:40,or:48,and:50,in:54,not:56,is:58,if:64,else:66,lambda:70,yield:88,from:90,async:98,for:100,None:152,True:154,False:154,del:168,pass:172,break:176,continue:180,return:184,raise:192,import:196,as:198,global:202,nonlocal:204,assert:208,elif:218,while:222,try:228,except:230,finally:232,with:236,def:240,class:250},eJ=Rk.deserialize({version:13,states:"!?pO`Q$IXOOO%cQ$I[O'#GaOOQ$IS'#Cm'#CmOOQ$IS'#Cn'#CnO'RQ$IWO'#ClO(tQ$I[O'#G`OOQ$IS'#Ga'#GaOOQ$IS'#DR'#DROOQ$IS'#G`'#G`O)bQ$IWO'#CqO)rQ$IWO'#DbO*SQ$IWO'#DfOOQ$IS'#Ds'#DsO*gO`O'#DsO*oOpO'#DsO*wO!bO'#DtO+SO#tO'#DtO+_O&jO'#DtO+jO,UO'#DtO-lQ$I[O'#GQOOQ$IS'#GQ'#GQO'RQ$IWO'#GPO/OQ$I[O'#GPOOQ$IS'#E]'#E]O/gQ$IWO'#E^OOQ$IS'#GO'#GOO/qQ$IWO'#F}OOQ$IV'#F}'#F}O/|Q$IWO'#FPOOQ$IS'#Fr'#FrO0RQ$IWO'#FOOOQ$IV'#H]'#H]OOQ$IV'#F|'#F|OOQ$IT'#FR'#FRQ`Q$IXOOO'RQ$IWO'#CoO0aQ$IWO'#CzO0hQ$IWO'#DOO0vQ$IWO'#GeO1WQ$I[O'#EQO'RQ$IWO'#EROOQ$IS'#ET'#ETOOQ$IS'#EV'#EVOOQ$IS'#EX'#EXO1lQ$IWO'#EZO2SQ$IWO'#E_O/|Q$IWO'#EaO2gQ$I[O'#EaO/|Q$IWO'#EdO/gQ$IWO'#EgO/gQ$IWO'#EkO/gQ$IWO'#EnO2rQ$IWO'#EpO2yQ$IWO'#EuO3UQ$IWO'#EqO/gQ$IWO'#EuO/|Q$IWO'#EwO/|Q$IWO'#E|OOQ$IS'#Cc'#CcOOQ$IS'#Cd'#CdOOQ$IS'#Ce'#CeOOQ$IS'#Cf'#CfOOQ$IS'#Cg'#CgOOQ$IS'#Ch'#ChOOQ$IS'#Cj'#CjO'RQ$IWO,58|O'RQ$IWO,58|O'RQ$IWO,58|O'RQ$IWO,58|O'RQ$IWO,58|O'RQ$IWO,58|O3ZQ$IWO'#DmOOQ$IS,5:W,5:WO3nQ$IWO'#GoOOQ$IS,5:Z,5:ZO3{Q%1`O,5:ZO4QQ$I[O,59WO0aQ$IWO,59_O0aQ$IWO,59_O0aQ$IWO,59_O6pQ$IWO,59_O6uQ$IWO,59_O6|Q$IWO,59gO7TQ$IWO'#G`O8ZQ$IWO'#G_OOQ$IS'#G_'#G_OOQ$IS'#DX'#DXO8rQ$IWO,59]O'RQ$IWO,59]O9QQ$IWO,59]O9VQ$IWO,5:PO'RQ$IWO,5:POOQ$IS,59|,59|O9eQ$IWO,59|O9jQ$IWO,5:VO'RQ$IWO,5:VO'RQ$IWO,5:TOOQ$IS,5:Q,5:QO9{Q$IWO,5:QO:QQ$IWO,5:UOOOO'#FZ'#FZO:VO`O,5:_OOQ$IS,5:_,5:_OOOO'#F['#F[O:_OpO,5:_O:gQ$IWO'#DuOOOO'#F]'#F]O:wO!bO,5:`OOQ$IS,5:`,5:`OOOO'#F`'#F`O;SO#tO,5:`OOOO'#Fa'#FaO;_O&jO,5:`OOOO'#Fb'#FbO;jO,UO,5:`OOQ$IS'#Fc'#FcO;uQ$I[O,5:dO>gQ$I[O,5<kO?QQ%GlO,5<kO?qQ$I[O,5<kOOQ$IS,5:x,5:xO@YQ$IXO'#FkOAiQ$IWO,5;TOOQ$IV,5<i,5<iOAtQ$I[O'#HXOB]Q$IWO,5;kOOQ$IS-E9p-E9pOOQ$IV,5;j,5;jO3PQ$IWO'#EwOOQ$IT-E9P-E9POBeQ$I[O,59ZODlQ$I[O,59fOEVQ$IWO'#GbOEbQ$IWO'#GbO/|Q$IWO'#GbOEmQ$IWO'#DQOEuQ$IWO,59jOEzQ$IWO'#GfO'RQ$IWO'#GfO/gQ$IWO,5=POOQ$IS,5=P,5=PO/gQ$IWO'#D|OOQ$IS'#D}'#D}OFiQ$IWO'#FeOFyQ$IWO,58zOGXQ$IWO,58zO)eQ$IWO,5:jOG^Q$I[O'#GhOOQ$IS,5:m,5:mOOQ$IS,5:u,5:uOGqQ$IWO,5:yOHSQ$IWO,5:{OOQ$IS'#Fh'#FhOHbQ$I[O,5:{OHpQ$IWO,5:{OHuQ$IWO'#H[OOQ$IS,5;O,5;OOITQ$IWO'#HWOOQ$IS,5;R,5;RO3UQ$IWO,5;VO3UQ$IWO,5;YOIfQ$I[O'#H^O'RQ$IWO'#H^OIpQ$IWO,5;[O2rQ$IWO,5;[O/gQ$IWO,5;aO/|Q$IWO,5;cOIuQ$IXO'#ElOKOQ$IZO,5;]ONaQ$IWO'#H_O3UQ$IWO,5;aONlQ$IWO,5;cONqQ$IWO,5;hO!#fQ$I[O1G.hO!#mQ$I[O1G.hO!&^Q$I[O1G.hO!&hQ$I[O1G.hO!)RQ$I[O1G.hO!)fQ$I[O1G.hO!)yQ$IWO'#GnO!*XQ$I[O'#GQO/gQ$IWO'#GnO!*cQ$IWO'#GmOOQ$IS,5:X,5:XO!*kQ$IWO,5:XO!*pQ$IWO'#GpO!*{Q$IWO'#GpO!+`Q$IWO,5=ZOOQ$IS'#Dq'#DqOOQ$IS1G/u1G/uOOQ$IS1G.y1G.yO!,`Q$I[O1G.yO!,gQ$I[O1G.yO0aQ$IWO1G.yO!-SQ$IWO1G/ROOQ$IS'#DW'#DWO/gQ$IWO,59qOOQ$IS1G.w1G.wO!-ZQ$IWO1G/cO!-kQ$IWO1G/cO!-sQ$IWO1G/dO'RQ$IWO'#GgO!-xQ$IWO'#GgO!-}Q$I[O1G.wO!._Q$IWO,59fO!/eQ$IWO,5=VO!/uQ$IWO,5=VO!/}Q$IWO1G/kO!0SQ$I[O1G/kOOQ$IS1G/h1G/hO!0dQ$IWO,5=QO!1ZQ$IWO,5=QO/gQ$IWO1G/oO!1xQ$IWO1G/qO!1}Q$I[O1G/qO!2_Q$I[O1G/oOOQ$IS1G/l1G/lOOQ$IS1G/p1G/pOOOO-E9X-E9XOOQ$IS1G/y1G/yOOOO-E9Y-E9YO!2oQ$IWO'#G{O/gQ$IWO'#G{O!2}Q$IWO,5:aOOOO-E9Z-E9ZOOQ$IS1G/z1G/zOOOO-E9^-E9^OOOO-E9_-E9_OOOO-E9`-E9`OOQ$IS-E9a-E9aO!3YQ%GlO1G2VO!3yQ$I[O1G2VO'RQ$IWO,5<OOOQ$IS,5<O,5<OOOQ$IS-E9b-E9bOOQ$IS,5<V,5<VOOQ$IS-E9i-E9iOOQ$IV1G0o1G0oO/|Q$IWO'#FgO!4bQ$I[O,5=sOOQ$IS1G1V1G1VO!4yQ$IWO1G1VOOQ$IS'#DS'#DSO/gQ$IWO,5<|OOQ$IS,5<|,5<|O!5OQ$IWO'#FSO!5ZQ$IWO,59lO!5cQ$IWO1G/UO!5mQ$I[O,5=QOOQ$IS1G2k1G2kOOQ$IS,5:h,5:hO!6^Q$IWO'#GPOOQ$IS,5<P,5<POOQ$IS-E9c-E9cO!6oQ$IWO1G.fOOQ$IS1G0U1G0UO!6}Q$IWO,5=SO!7_Q$IWO,5=SO/gQ$IWO1G0eO/gQ$IWO1G0eO/|Q$IWO1G0gOOQ$IS-E9f-E9fO!7pQ$IWO1G0gO!7{Q$IWO1G0gO!8QQ$IWO,5=vO!8`Q$IWO,5=vO!8nQ$IWO,5=rO!9UQ$IWO,5=rO!9gQ$IZO1G0qO!<uQ$IZO1G0tO!@QQ$IWO,5=xO!@[Q$IWO,5=xO!@dQ$I[O,5=xO/gQ$IWO1G0vO!@nQ$IWO1G0vO3UQ$IWO1G0{ONlQ$IWO1G0}OOQ$IV,5;W,5;WO!@sQ$IYO,5;WO!@xQ$IZO1G0wO!DZQ$IWO'#FoO3UQ$IWO1G0wO3UQ$IWO1G0wO!DhQ$IWO,5=yO!DuQ$IWO,5=yO/|Q$IWO,5=yOOQ$IV1G0{1G0{O!D}Q$IWO'#EyO!E`Q%1`O1G0}OOQ$IV1G1S1G1SO3UQ$IWO1G1SOOQ$IS,5=Y,5=YOOQ$IS'#Dn'#DnO/gQ$IWO,5=YO!EhQ$IWO,5=XO!E{Q$IWO,5=XOOQ$IS1G/s1G/sO!FTQ$IWO,5=[O!FeQ$IWO,5=[O!FmQ$IWO,5=[O!GQQ$IWO,5=[O!GbQ$IWO,5=[OOQ$IS1G2u1G2uOOQ$IS7+$e7+$eO!5cQ$IWO7+$mO!ITQ$IWO1G.yO!I[Q$IWO1G.yOOQ$IS1G/]1G/]OOQ$IS,5;p,5;pO'RQ$IWO,5;pOOQ$IS7+$}7+$}O!IcQ$IWO7+$}OOQ$IS-E9S-E9SOOQ$IS7+%O7+%OO!IsQ$IWO,5=RO'RQ$IWO,5=ROOQ$IS7+$c7+$cO!IxQ$IWO7+$}O!JQQ$IWO7+%OO!JVQ$IWO1G2qOOQ$IS7+%V7+%VO!JgQ$IWO1G2qO!JoQ$IWO7+%VOOQ$IS,5;o,5;oO'RQ$IWO,5;oO!JtQ$IWO1G2lOOQ$IS-E9R-E9RO!KkQ$IWO7+%ZOOQ$IS7+%]7+%]O!KyQ$IWO1G2lO!LhQ$IWO7+%]O!LmQ$IWO1G2rO!L}Q$IWO1G2rO!MVQ$IWO7+%ZO!M[Q$IWO,5=gO!MrQ$IWO,5=gO!MrQ$IWO,5=gO!NQO!LQO'#DwO!N]OSO'#G|OOOO1G/{1G/{O!NbQ$IWO1G/{O!NjQ%GlO7+'qO# ZQ$I[O1G1jP# tQ$IWO'#FdOOQ$IS,5<R,5<ROOQ$IS-E9e-E9eOOQ$IS7+&q7+&qOOQ$IS1G2h1G2hOOQ$IS,5;n,5;nOOQ$IS-E9Q-E9QOOQ$IS7+$p7+$pO#!RQ$IWO,5<kO#!lQ$IWO,5<kO#!}Q$I[O,5;qO##bQ$IWO1G2nOOQ$IS-E9T-E9TOOQ$IS7+&P7+&PO##rQ$IWO7+&POOQ$IS7+&R7+&RO#$QQ$IWO'#HZO/|Q$IWO'#HYO#$fQ$IWO7+&ROOQ$IS,5<U,5<UO#$qQ$IWO1G3bOOQ$IS-E9h-E9hOOQ$IS,5<Q,5<QO#%PQ$IWO1G3^OOQ$IS-E9d-E9dO#%gQ$IZO7+&]O!DZQ$IWO'#FmO3UQ$IWO7+&]O3UQ$IWO7+&`O#(uQ$I[O,5<YO'RQ$IWO,5<YO#)PQ$IWO1G3dOOQ$IS-E9l-E9lO#)ZQ$IWO1G3dO3UQ$IWO7+&bO/gQ$IWO7+&bOOQ$IV7+&g7+&gO!E`Q%1`O7+&iO#)cQ$IXO1G0rOOQ$IV-E9m-E9mO3UQ$IWO7+&cO3UQ$IWO7+&cOOQ$IV,5<Z,5<ZO#+UQ$IWO,5<ZOOQ$IV7+&c7+&cO#+aQ$IZO7+&cO#.lQ$IWO,5<[O#.wQ$IWO1G3eOOQ$IS-E9n-E9nO#/UQ$IWO1G3eO#/^Q$IWO'#HaO#/lQ$IWO'#HaO/|Q$IWO'#HaOOQ$IS'#Ha'#HaO#/wQ$IWO'#H`OOQ$IS,5;e,5;eO#0PQ$IWO,5;eO/gQ$IWO'#E{OOQ$IV7+&i7+&iO3UQ$IWO7+&iOOQ$IV7+&n7+&nOOQ$IS1G2t1G2tOOQ$IS,5;s,5;sO#0UQ$IWO1G2sOOQ$IS-E9V-E9VO#0iQ$IWO,5;tO#0tQ$IWO,5;tO#1XQ$IWO1G2vOOQ$IS-E9W-E9WO#1iQ$IWO1G2vO#1qQ$IWO1G2vO#2RQ$IWO1G2vO#1iQ$IWO1G2vOOQ$IS<<HX<<HXO#2^Q$I[O1G1[OOQ$IS<<Hi<<HiP#2kQ$IWO'#FUO6|Q$IWO1G2mO#2xQ$IWO1G2mO#2}Q$IWO<<HiOOQ$IS<<Hj<<HjO#3_Q$IWO7+(]OOQ$IS<<Hq<<HqO#3oQ$I[O1G1ZP#4`Q$IWO'#FTO#4mQ$IWO7+(^O#4}Q$IWO7+(^O#5VQ$IWO<<HuO#5[Q$IWO7+(WOOQ$IS<<Hw<<HwO#6RQ$IWO,5;rO'RQ$IWO,5;rOOQ$IS-E9U-E9UOOQ$IS<<Hu<<HuOOQ$IS,5;x,5;xO/gQ$IWO,5;xO#6WQ$IWO1G3ROOQ$IS-E9[-E9[O#6nQ$IWO1G3ROOOO'#F_'#F_O#6|O!LQO,5:cOOOO,5=h,5=hOOOO7+%g7+%gO#7XQ$IWO1G2VO#7rQ$IWO1G2VP'RQ$IWO'#FVO/gQ$IWO<<IkO#8TQ$IWO,5=uO#8fQ$IWO,5=uO/|Q$IWO,5=uO#8wQ$IWO,5=tOOQ$IS<<Im<<ImP/|Q$IWO'#FjP/gQ$IWO'#FfOOQ$IV-E9k-E9kO3UQ$IWO<<IwOOQ$IV,5<X,5<XO3UQ$IWO,5<XOOQ$IV<<Iw<<IwOOQ$IV<<Iz<<IzO#8|Q$I[O1G1tP#9WQ$IWO'#FnO#9_Q$IWO7+)OO#9iQ$IZO<<I|O3UQ$IWO<<I|OOQ$IV<<JT<<JTO3UQ$IWO<<JTOOQ$IV'#Fl'#FlO#<tQ$IZO7+&^OOQ$IV<<I}<<I}O#>mQ$IZO<<I}OOQ$IV1G1u1G1uO/|Q$IWO1G1uO3UQ$IWO<<I}O/|Q$IWO1G1vP/gQ$IWO'#FpO#AxQ$IWO7+)PO#BVQ$IWO7+)POOQ$IS'#Ez'#EzO/gQ$IWO,5={O#B_Q$IWO,5={OOQ$IS,5={,5={O#BjQ$IWO,5=zO#B{Q$IWO,5=zOOQ$IS1G1P1G1POOQ$IS,5;g,5;gP#CTQ$IWO'#FXO#CeQ$IWO1G1`O#CxQ$IWO1G1`O#DYQ$IWO1G1`P#DeQ$IWO'#FYO#DrQ$IWO7+(bO#ESQ$IWO7+(bO#ESQ$IWO7+(bO#E[Q$IWO7+(bO#ElQ$IWO7+(XO6|Q$IWO7+(XOOQ$ISAN>TAN>TO#FVQ$IWO<<KxOOQ$ISAN>aAN>aO/gQ$IWO1G1^O#FgQ$I[O1G1^P#FqQ$IWO'#FWOOQ$IS1G1d1G1dP#GOQ$IWO'#F^O#G]Q$IWO7+(mOOOO-E9]-E9]O#GsQ$IWO7+'qOOQ$ISAN?VAN?VO#H^Q$IWO,5<TO#HrQ$IWO1G3aOOQ$IS-E9g-E9gO#ITQ$IWO1G3aOOQ$IS1G3`1G3`OOQ$IVAN?cAN?cOOQ$IV1G1s1G1sO3UQ$IWOAN?hO#IfQ$IZOAN?hOOQ$IVAN?oAN?oOOQ$IV-E9j-E9jOOQ$IV<<Ix<<IxO3UQ$IWOAN?iO3UQ$IWO7+'aOOQ$IVAN?iAN?iOOQ$IS7+'b7+'bO#LqQ$IWO<<LkOOQ$IS1G3g1G3gO/gQ$IWO1G3gOOQ$IS,5<],5<]O#MOQ$IWO1G3fOOQ$IS-E9o-E9oO#MaQ$IWO7+&zO#MqQ$IWO7+&zOOQ$IS7+&z7+&zO#M|Q$IWO<<K|O#N^Q$IWO<<K|O#N^Q$IWO<<K|O#NfQ$IWO'#GiOOQ$IS<<Ks<<KsO#NpQ$IWO<<KsOOQ$IS7+&x7+&xO/|Q$IWO1G1oP/|Q$IWO'#FiO$ ZQ$IWO7+({O$ lQ$IWO7+({OOQ$IVG25SG25SO3UQ$IWOG25SOOQ$IVG25TG25TOOQ$IV<<J{<<J{OOQ$IS7+)R7+)RP$ }Q$IWO'#FqOOQ$IS<<Jf<<JfO$!]Q$IWO<<JfO$!mQ$IWOANAhO$!}Q$IWOANAhO$#VQ$IWO'#GjOOQ$IS'#Gj'#GjO0hQ$IWO'#DaO$#pQ$IWO,5=TOOQ$ISANA_ANA_OOQ$IS7+'Z7+'ZO$$XQ$IWO<<LgOOQ$IVLD*nLD*nOOQ$ISAN@QAN@QO$$jQ$IWOG27SO$$zQ$IWO,59{OOQ$IS1G2o1G2oO#NfQ$IWO1G/gOOQ$IS7+%R7+%RO6|Q$IWO'#CzO6|Q$IWO,59_O6|Q$IWO,59_O6|Q$IWO,59_O$%PQ$I[O,5<kO6|Q$IWO1G.yO/gQ$IWO1G/UO/gQ$IWO7+$mP$%dQ$IWO'#FdO'RQ$IWO'#GPO$%qQ$IWO,59_O$%vQ$IWO,59_O$%}Q$IWO,59jO$&SQ$IWO1G/RO0hQ$IWO'#DOO6|Q$IWO,59g",stateData:"$&j~O$oOS$lOS$kOSQOS~OPhOTeOdsOfXOltOp!SOsuO|vO}!PO!R!VO!S!UO!VYO!ZZO!fdO!mdO!ndO!odO!vxO!xyO!zzO!|{O#O|O#S}O#U!OO#X!QO#Y!QO#[!RO#c!TO#f!WO#j!XO#l!YO#q!ZO#tlO$jqO$zQO${QO%PRO%QVO%f[O%g]O%j^O%m_O%s`O%vaO%xbO~OT!aO]!aO_!bOf!iO!V!kO!d!mO$u![O$v!]O$w!^O$x!_O$y!_O$z!`O${!`O$|!aO$}!aO%O!aO~Oh%TXi%TXj%TXk%TXl%TXm%TXp%TXw%TXx%TX!s%TX#^%TX$j%TX$m%TX%V%TX!O%TX!R%TX!S%TX%W%TX!W%TX![%TX}%TX#V%TXq%TX!j%TX~P$_OdsOfXO!VYO!ZZO!fdO!mdO!ndO!odO$zQO${QO%PRO%QVO%f[O%g]O%j^O%m_O%s`O%vaO%xbO~Ow%SXx%SX#^%SX$j%SX$m%SX%V%SX~Oh!pOi!qOj!oOk!oOl!rOm!sOp!tO!s%SX~P(`OT!zOl-dOs-rO|vO~P'ROT!}Ol-dOs-rO!W#OO~P'ROT#RO_#SOl-dOs-rO![#TO~P'RO%h#WO%i#YO~O%k#ZO%l#YO~O!Z#]O%n#^O%r#`O~O!Z#]O%t#aO%u#`O~O!Z#]O%i#`O%w#cO~O!Z#]O%l#`O%y#eO~OT$tX]$tX_$tXf$tXh$tXi$tXj$tXk$tXl$tXm$tXp$tXw$tX!V$tX!d$tX$u$tX$v$tX$w$tX$x$tX$y$tX$z$tX${$tX$|$tX$}$tX%O$tX!O$tX!R$tX!S$tX~O%f[O%g]O%j^O%m_O%s`O%vaO%xbOx$tX!s$tX#^$tX$j$tX$m$tX%V$tX%W$tX!W$tX![$tX}$tX#V$tXq$tX!j$tX~P+uOw#jOx$sX!s$sX#^$sX$j$sX$m$sX%V$sX~Ol-dOs-rO~P'RO#^#mO$j#oO$m#oO~O%QVO~O!R#tO#l!YO#q!ZO#tlO~OltO~P'ROT#yO_#zO%QVOxtP~OT$OOl-dOs-rO}$PO~P'ROx$RO!s$WO%V$SO#^!tX$j!tX$m!tX~OT$OOl-dOs-rO#^!}X$j!}X$m!}X~P'ROl-dOs-rO#^#RX$j#RX$m#RX~P'RO!d$^O!m$^O%QVO~OT$hO~P'RO!S$jO#j$kO#l$lO~Ox$mO~OT${O_${Ol-dOs-rO!O$}O~P'ROl-dOs-rOx%QO~P'RO%e%SO~O_!bOf!iO!V!kO!d!mOT`a]`ah`ai`aj`ak`al`am`ap`aw`ax`a!s`a#^`a$j`a$m`a$u`a$v`a$w`a$x`a$y`a$z`a${`a$|`a$}`a%O`a%V`a!O`a!R`a!S`a%W`a!W`a![`a}`a#V`aq`a!j`a~Ok%XO~Ol%XO~P'ROl-dO~P'ROh-fOi-gOj-eOk-eOl-nOm-oOp-sO!O%SX!R%SX!S%SX%W%SX!W%SX![%SX}%SX#V%SX!j%SX~P(`O%W%ZOw%RX!O%RX!R%RX!S%RX!W%RXx%RX~Ow%^O!O%]O!R%bO!S%aO~O!O%]O~Ow%eO!R%bO!S%aO!W%_X~O!W%iO~Ow%jOx%lO!R%bO!S%aO![%YX~O![%pO~O![%qO~O%h#WO%i%sO~O%k#ZO%l%sO~OT%vOl-dOs-rO|vO~P'RO!Z#]O%n#^O%r%yO~O!Z#]O%t#aO%u%yO~O!Z#]O%i%yO%w#cO~O!Z#]O%l%yO%y#eO~OT!la]!la_!laf!lah!lai!laj!lak!lal!lam!lap!law!lax!la!V!la!d!la!s!la#^!la$j!la$m!la$u!la$v!la$w!la$x!la$y!la$z!la${!la$|!la$}!la%O!la%V!la!O!la!R!la!S!la%W!la!W!la![!la}!la#V!laq!la!j!la~P#vOw&OOx$sa!s$sa#^$sa$j$sa$m$sa%V$sa~P$_OT&QOltOsuOx$sa!s$sa#^$sa$j$sa$m$sa%V$sa~P'ROw&OOx$sa!s$sa#^$sa$j$sa$m$sa%V$sa~OPhOTeOltOsuO|vO}!PO!vxO!xyO!zzO!|{O#O|O#S}O#U!OO#X!QO#Y!QO#[!RO#^$_X$j$_X$m$_X~P'RO#^#mO$j&VO$m&VO~O!d&WOf%{X$j%{X#V%{X#^%{X$m%{X#U%{X~Of!iO$j&YO~Ohcaicajcakcalcamcapcawcaxca!sca#^ca$jca$mca%Vca!Oca!Rca!Sca%Wca!Wca![ca}ca#Vcaqca!jca~P$_Opnawnaxna#^na$jna$mna%Vna~Oh!pOi!qOj!oOk!oOl!rOm!sO!sna~PDTO%V&[Ow%UXx%UX~O%QVOw%UXx%UX~Ow&_OxtX~Ox&aO~Ow%jO#^%YX$j%YX$m%YX!O%YXx%YX![%YX!j%YX%V%YX~OT-mOl-dOs-rO|vO~P'RO%V$SO#^Sa$jSa$mSa~O%V$SO~Ow&jO#^%[X$j%[X$m%[Xk%[X~P$_Ow&mO}&lO#^#Ra$j#Ra$m#Ra~O#V&nO#^#Ta$j#Ta$m#Ta~O!d$^O!m$^O#U&pO%QVO~O#U&pO~Ow&rO#^&OX$j&OX$m&OX~Ow&tO#^%zX$j%zX$m%zXx%zX~Ow&xOk&QX~P$_Ok&{O~OPhOTeOltOsuO|vO}!PO!vxO!xyO!zzO!|{O#O|O#S}O#U!OO#X!QO#Y!QO#[!RO$j'QO~P'ROq'UO#g'SO#h'TOP#eaT#ead#eaf#eal#eap#eas#ea|#ea}#ea!R#ea!S#ea!V#ea!Z#ea!f#ea!m#ea!n#ea!o#ea!v#ea!x#ea!z#ea!|#ea#O#ea#S#ea#U#ea#X#ea#Y#ea#[#ea#c#ea#f#ea#j#ea#l#ea#q#ea#t#ea$g#ea$j#ea$z#ea${#ea%P#ea%Q#ea%f#ea%g#ea%j#ea%m#ea%s#ea%v#ea%x#ea$i#ea$m#ea~Ow'VO#V'XOx&RX~Of'ZO~Of!iOx$mO~OT!aO]!aO_!bOf!iO!V!kO!d!mO$w!^O$x!_O$y!_O$z!`O${!`O$|!aO$}!aO%O!aOhUiiUijUikUilUimUipUiwUixUi!sUi#^Ui$jUi$mUi$uUi%VUi!OUi!RUi!SUi%WUi!WUi![Ui}Ui#VUiqUi!jUi~O$v!]O~PNyO$vUi~PNyOT!aO]!aO_!bOf!iO!V!kO!d!mO$z!`O${!`O$|!aO$}!aO%O!aOhUiiUijUikUilUimUipUiwUixUi!sUi#^Ui$jUi$mUi$uUi$vUi$wUi%VUi!OUi!RUi!SUi%WUi!WUi![Ui}Ui#VUiqUi!jUi~O$x!_O$y!_O~P!#tO$xUi$yUi~P!#tO_!bOf!iO!V!kO!d!mOhUiiUijUikUilUimUipUiwUixUi!sUi#^Ui$jUi$mUi$uUi$vUi$wUi$xUi$yUi$zUi${Ui%VUi!OUi!RUi!SUi%WUi!WUi![Ui}Ui#VUiqUi!jUi~OT!aO]!aO$|!aO$}!aO%O!aO~P!&rOTUi]Ui$|Ui$}Ui%OUi~P!&rO!R%bO!S%aOw%bX!O%bX~O%V'`O%W'`O~P+uOw'bO!O%aX~O!O'dO~Ow'eOx'gO!W%dX~Ol-dOs-rOw'eOx'hO!W%dX~P'RO!W'jO~Oj!oOk!oOl!rOm!sOhgipgiwgixgi!sgi#^gi$jgi$mgi%Vgi~Oi!qO~P!+eOigi~P!+eOh-fOi-gOj-eOk-eOl-nOm-oO~Oq'lO~P!,nOT'qOl-dOs-rO!O'rO~P'ROw'sO!O'rO~O!O'uO~O!S'wO~Ow'sO!O'xO!R%bO!S%aO~P$_Oh-fOi-gOj-eOk-eOl-nOm-oO!Ona!Rna!Sna%Wna!Wna![na}na#Vnaqna!jna~PDTOT'qOl-dOs-rO!W%_a~P'ROw'{O!W%_a~O!W'|O~Ow'{O!R%bO!S%aO!W%_a~P$_OT(QOl-dOs-rO![%Ya#^%Ya$j%Ya$m%Ya!O%Yax%Ya!j%Ya%V%Ya~P'ROw(RO![%Ya#^%Ya$j%Ya$m%Ya!O%Yax%Ya!j%Ya%V%Ya~O![(UO~Ow(RO!R%bO!S%aO![%Ya~P$_Ow(XO!R%bO!S%aO![%`a~P$_Ow([Ox%oX![%oX!j%oX~Ox(_O![(aO!j(bO~OT&QOltOsuOx$si!s$si#^$si$j$si$m$si%V$si~P'ROw(cOx$si!s$si#^$si$j$si$m$si%V$si~O!d&WOf%{a$j%{a#V%{a#^%{a$m%{a#U%{a~O$j(hO~OT#yO_#zO%QVO~Ow&_Oxta~OltOsuO~P'ROw(RO#^%Ya$j%Ya$m%Ya!O%Yax%Ya![%Ya!j%Ya%V%Ya~P$_Ow(mO#^$sX$j$sX$m$sX%V$sX~O%V$SO#^Si$jSi$mSi~O#^%[a$j%[a$m%[ak%[a~P'ROw(pO#^%[a$j%[a$m%[ak%[a~OT(tOf(vO%QVO~O#U(wO~O%QVO#^&Oa$j&Oa$m&Oa~Ow(yO#^&Oa$j&Oa$m&Oa~Ol-dOs-rO#^%za$j%za$m%zax%za~P'ROw(|O#^%za$j%za$m%zax%za~Oq)QO#a)POP#_iT#_id#_if#_il#_ip#_is#_i|#_i}#_i!R#_i!S#_i!V#_i!Z#_i!f#_i!m#_i!n#_i!o#_i!v#_i!x#_i!z#_i!|#_i#O#_i#S#_i#U#_i#X#_i#Y#_i#[#_i#c#_i#f#_i#j#_i#l#_i#q#_i#t#_i$g#_i$j#_i$z#_i${#_i%P#_i%Q#_i%f#_i%g#_i%j#_i%m#_i%s#_i%v#_i%x#_i$i#_i$m#_i~Oq)ROP#biT#bid#bif#bil#bip#bis#bi|#bi}#bi!R#bi!S#bi!V#bi!Z#bi!f#bi!m#bi!n#bi!o#bi!v#bi!x#bi!z#bi!|#bi#O#bi#S#bi#U#bi#X#bi#Y#bi#[#bi#c#bi#f#bi#j#bi#l#bi#q#bi#t#bi$g#bi$j#bi$z#bi${#bi%P#bi%Q#bi%f#bi%g#bi%j#bi%m#bi%s#bi%v#bi%x#bi$i#bi$m#bi~OT)TOk&Qa~P'ROw)UOk&Qa~Ow)UOk&Qa~P$_Ok)YO~O$h)]O~Oq)`O#g'SO#h)_OP#eiT#eid#eif#eil#eip#eis#ei|#ei}#ei!R#ei!S#ei!V#ei!Z#ei!f#ei!m#ei!n#ei!o#ei!v#ei!x#ei!z#ei!|#ei#O#ei#S#ei#U#ei#X#ei#Y#ei#[#ei#c#ei#f#ei#j#ei#l#ei#q#ei#t#ei$g#ei$j#ei$z#ei${#ei%P#ei%Q#ei%f#ei%g#ei%j#ei%m#ei%s#ei%v#ei%x#ei$i#ei$m#ei~Ol-dOs-rOx$mO~P'ROl-dOs-rOx&Ra~P'ROw)fOx&Ra~OT)jO_)kO!O)nO$|)lO%QVO~Ox$mO&U)pO~OT${O_${Ol-dOs-rO!O%aa~P'ROw)vO!O%aa~Ol-dOs-rOx)yO!W%da~P'ROw)zO!W%da~Ol-dOs-rOw)zOx)}O!W%da~P'ROl-dOs-rOw)zO!W%da~P'ROw)zOx)}O!W%da~Oj-eOk-eOl-nOm-oOhgipgiwgi!Ogi!Rgi!Sgi%Wgi!Wgixgi![gi#^gi$jgi$mgi}gi#Vgiqgi!jgi%Vgi~Oi-gO~P!GmOigi~P!GmOT'qOl-dOs-rO!O*SO~P'ROk*UO~Ow*WO!O*SO~O!O*XO~OT'qOl-dOs-rO!W%_i~P'ROw*YO!W%_i~O!W*ZO~OT(QOl-dOs-rO![%Yi#^%Yi$j%Yi$m%Yi!O%Yix%Yi!j%Yi%V%Yi~P'ROw*^O!R%bO!S%aO![%`i~Ow*aO![%Yi#^%Yi$j%Yi$m%Yi!O%Yix%Yi!j%Yi%V%Yi~O![*bO~O_*dOl-dOs-rO![%`i~P'ROw*^O![%`i~O![*fO~OT*hOl-dOs-rOx%oa![%oa!j%oa~P'ROw*iOx%oa![%oa!j%oa~O!Z#]O%q*lO![!kX~O![*nO~Ox(_O![*oO~OT&QOltOsuOx$sq!s$sq#^$sq$j$sq$m$sq%V$sq~P'ROw$Wix$Wi!s$Wi#^$Wi$j$Wi$m$Wi%V$Wi~P$_OT&QOltOsuO~P'ROT&QOl-dOs-rO#^$sa$j$sa$m$sa%V$sa~P'ROw*pO#^$sa$j$sa$m$sa%V$sa~Ow#ya#^#ya$j#ya$m#yak#ya~P$_O#^%[i$j%[i$m%[ik%[i~P'ROw*sO#^#Rq$j#Rq$m#Rq~Ow*tO#V*vO#^%}X$j%}X$m%}X!O%}X~OT*xOf(vO%QVO~O%QVO#^&Oi$j&Oi$m&Oi~Ol-dOs-rO#^%zi$j%zi$m%zix%zi~P'ROq*|O#a)POP#_qT#_qd#_qf#_ql#_qp#_qs#_q|#_q}#_q!R#_q!S#_q!V#_q!Z#_q!f#_q!m#_q!n#_q!o#_q!v#_q!x#_q!z#_q!|#_q#O#_q#S#_q#U#_q#X#_q#Y#_q#[#_q#c#_q#f#_q#j#_q#l#_q#q#_q#t#_q$g#_q$j#_q$z#_q${#_q%P#_q%Q#_q%f#_q%g#_q%j#_q%m#_q%s#_q%v#_q%x#_q$i#_q$m#_q~Ok$baw$ba~P$_OT)TOk&Qi~P'ROw+TOk&Qi~OPhOTeOltOp!SOsuO|vO}!PO!R!VO!S!UO!vxO!xyO!zzO!|{O#O|O#S}O#U!OO#X!QO#Y!QO#[!RO#c!TO#f!WO#j!XO#l!YO#q!ZO#tlO~P'ROw+_Ox$mO#V+_O~O#h+`OP#eqT#eqd#eqf#eql#eqp#eqs#eq|#eq}#eq!R#eq!S#eq!V#eq!Z#eq!f#eq!m#eq!n#eq!o#eq!v#eq!x#eq!z#eq!|#eq#O#eq#S#eq#U#eq#X#eq#Y#eq#[#eq#c#eq#f#eq#j#eq#l#eq#q#eq#t#eq$g#eq$j#eq$z#eq${#eq%P#eq%Q#eq%f#eq%g#eq%j#eq%m#eq%s#eq%v#eq%x#eq$i#eq$m#eq~O#V+aOw$dax$da~Ol-dOs-rOx&Ri~P'ROw+cOx&Ri~Ox$RO%V+eOw&TX!O&TX~O%QVOw&TX!O&TX~Ow+iO!O&SX~O!O+kO~OT${O_${Ol-dOs-rO!O%ai~P'ROx+nOw#|a!W#|a~Ol-dOs-rOx+oOw#|a!W#|a~P'ROl-dOs-rOx)yO!W%di~P'ROw+rO!W%di~Ol-dOs-rOw+rO!W%di~P'ROw+rOx+uO!W%di~Ow#xi!O#xi!W#xi~P$_OT'qOl-dOs-rO~P'ROk+wO~OT'qOl-dOs-rO!O+xO~P'ROT'qOl-dOs-rO!W%_q~P'ROw#wi![#wi#^#wi$j#wi$m#wi!O#wix#wi!j#wi%V#wi~P$_OT(QOl-dOs-rO~P'RO_*dOl-dOs-rO![%`q~P'ROw+yO![%`q~O![+zO~OT(QOl-dOs-rO![%Yq#^%Yq$j%Yq$m%Yq!O%Yqx%Yq!j%Yq%V%Yq~P'ROx+{O~OT*hOl-dOs-rOx%oi![%oi!j%oi~P'ROw,QOx%oi![%oi!j%oi~O!Z#]O%q*lO![!ka~OT&QOl-dOs-rO#^$si$j$si$m$si%V$si~P'ROw,SO#^$si$j$si$m$si%V$si~O%QVO#^%}a$j%}a$m%}a!O%}a~Ow,VO#^%}a$j%}a$m%}a!O%}a~O!O,YO~Ok$biw$bi~P$_OT)TO~P'ROT)TOk&Qq~P'ROq,]OP#dyT#dyd#dyf#dyl#dyp#dys#dy|#dy}#dy!R#dy!S#dy!V#dy!Z#dy!f#dy!m#dy!n#dy!o#dy!v#dy!x#dy!z#dy!|#dy#O#dy#S#dy#U#dy#X#dy#Y#dy#[#dy#c#dy#f#dy#j#dy#l#dy#q#dy#t#dy$g#dy$j#dy$z#dy${#dy%P#dy%Q#dy%f#dy%g#dy%j#dy%m#dy%s#dy%v#dy%x#dy$i#dy$m#dy~OPhOTeOltOp!SOsuO|vO}!PO!R!VO!S!UO!vxO!xyO!zzO!|{O#O|O#S}O#U!OO#X!QO#Y!QO#[!RO#c!TO#f!WO#j!XO#l!YO#q!ZO#tlO$i,aO$m,aO~P'RO#h,bOP#eyT#eyd#eyf#eyl#eyp#eys#ey|#ey}#ey!R#ey!S#ey!V#ey!Z#ey!f#ey!m#ey!n#ey!o#ey!v#ey!x#ey!z#ey!|#ey#O#ey#S#ey#U#ey#X#ey#Y#ey#[#ey#c#ey#f#ey#j#ey#l#ey#q#ey#t#ey$g#ey$j#ey$z#ey${#ey%P#ey%Q#ey%f#ey%g#ey%j#ey%m#ey%s#ey%v#ey%x#ey$i#ey$m#ey~Ol-dOs-rOx&Rq~P'ROw,fOx&Rq~O%V+eOw&Ta!O&Ta~OT)jO_)kO$|)lO%QVO!O&Sa~Ow,jO!O&Sa~OT${O_${Ol-dOs-rO~P'ROl-dOs-rOx,lOw#|i!W#|i~P'ROl-dOs-rOw#|i!W#|i~P'ROx,lOw#|i!W#|i~Ol-dOs-rOx)yO~P'ROl-dOs-rOx)yO!W%dq~P'ROw,oO!W%dq~Ol-dOs-rOw,oO!W%dq~P'ROp,rO!R%bO!S%aO!O%Zq!W%Zq![%Zqw%Zq~P!,nO_*dOl-dOs-rO![%`y~P'ROw#zi![#zi~P$_O_*dOl-dOs-rO~P'ROT*hOl-dOs-rO~P'ROT*hOl-dOs-rOx%oq![%oq!j%oq~P'ROT&QOl-dOs-rO#^$sq$j$sq$m$sq%V$sq~P'RO#V,vOw$]a#^$]a$j$]a$m$]a!O$]a~O%QVO#^%}i$j%}i$m%}i!O%}i~Ow,xO#^%}i$j%}i$m%}i!O%}i~Oq,{OP#d!RT#d!Rd#d!Rf#d!Rl#d!Rp#d!Rs#d!R|#d!R}#d!R!R#d!R!S#d!R!V#d!R!Z#d!R!f#d!R!m#d!R!n#d!R!o#d!R!v#d!R!x#d!R!z#d!R!|#d!R#O#d!R#S#d!R#U#d!R#X#d!R#Y#d!R#[#d!R#c#d!R#f#d!R#j#d!R#l#d!R#q#d!R#t#d!R$g#d!R$j#d!R$z#d!R${#d!R%P#d!R%Q#d!R%f#d!R%g#d!R%j#d!R%m#d!R%s#d!R%v#d!R%x#d!R$i#d!R$m#d!R~Ol-dOs-rOx&Ry~P'ROT)jO_)kO$|)lO%QVO!O&Si~Ol-dOs-rOw#|q!W#|q~P'ROx-ROw#|q!W#|q~Ol-dOs-rOx)yO!W%dy~P'ROw-SO!W%dy~Ol-dOs-WO~P'ROp,rO!R%bO!S%aO!O%Zy!W%Zy![%Zyw%Zy~P!,nO%QVO#^%}q$j%}q$m%}q!O%}q~Ow-[O#^%}q$j%}q$m%}q!O%}q~OT)jO_)kO$|)lO%QVO~Ol-dOs-rOw#|y!W#|y~P'ROl-dOs-rOx)yO!W%d!R~P'ROw-_O!W%d!R~Op%^X!O%^X!R%^X!S%^X!W%^X![%^Xw%^X~P!,nOp,rO!R%bO!S%aO!O%]a!W%]a![%]aw%]a~O%QVO#^%}y$j%}y$m%}y!O%}y~Ol-dOs-rOx)yO!W%d!Z~P'ROx-bO~Ow*pO#^$sa$j$sa$m$sa%V$sa~P$_OT&QOl-dOs-rO~P'ROk-iO~Ol-iO~P'ROx-jO~Oq-kO~P!,nO%g%j%v%x%f!Z%n%t%w%y%m%s%m%Q~",goto:"!-g&UPPPP&VP&_)p*V*m+U+n,XP,sP&_-a-a&_P&_P0rPPPPPP0r3bPP3bP5n5w:zPP:};];`PPP&_&_PP;l&_PP&_&_PP&_&_&_&_;p<d&_P<gP<j<j@PP@e&_PPP@i@o&VP&V&VP&VP&VP&VP&VP&V&V&VP&VPP&VPP&VP@uP@|ASP@|P@|@|PPP@|PB{PCUC[CbB{P@|ChPCoCuC{DXDkDqD{EREoEuE{FRF]FcFiFoFuF{G_GiGoGuG{HVH]HcHiHoHyIPIZIaPPPPPPPPPIjIrI{JVJbPPPPPPPPPPPPNw! a!%o!({PP!)T!)c!)l!*b!*X!*k!*q!*t!*w!*z!+S!+pPPPPPPPPPP!+s!+vPPPPPPPPP!+|!,Y!,f!,l!,u!,x!-O!-U!-[!-_]iOr#m$m)]+Z'odOSXYZehrstvx|}!R!S!T!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z!}#R#S#]#j#m$O$P$R$T$W$h$j$k$m${%Q%X%[%^%a%e%j%l%v&O&Q&]&a&j&l&m&t&x&{'S'V'a'b'e'g'h'l'q's'w'{(Q(R(X([(c(e(m(p(|)P)T)U)Y)])f)p)v)y)z)}*T*U*W*Y*]*^*a*d*h*i*p*r*s*z+S+T+Z+b+c+f+m+n+o+q+r+u+w+y+{+},P,Q,S,f,h,l,o,r-R-S-_-b-d-e-f-g-i-j-k-l-m-o-sw!cP#i#v$X$g%c%h%n%o&b&z(d(o)S*R*[+R+|-hy!dP#i#v$X$g$s%c%h%n%o&b&z(d(o)S*R*[+R+|-h{!eP#i#v$X$g$s$t%c%h%n%o&b&z(d(o)S*R*[+R+|-h}!fP#i#v$X$g$s$t$u%c%h%n%o&b&z(d(o)S*R*[+R+|-h!P!gP#i#v$X$g$s$t$u$v%c%h%n%o&b&z(d(o)S*R*[+R+|-h!R!hP#i#v$X$g$s$t$u$v$w%c%h%n%o&b&z(d(o)S*R*[+R+|-h!V!hP!n#i#v$X$g$s$t$u$v$w$x%c%h%n%o&b&z(d(o)S*R*[+R+|-h'oSOSXYZehrstvx|}!R!S!T!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z!}#R#S#]#j#m$O$P$R$T$W$h$j$k$m${%Q%X%[%^%a%e%j%l%v&O&Q&]&a&j&l&m&t&x&{'S'V'a'b'e'g'h'l'q's'w'{(Q(R(X([(c(e(m(p(|)P)T)U)Y)])f)p)v)y)z)}*T*U*W*Y*]*^*a*d*h*i*p*r*s*z+S+T+Z+b+c+f+m+n+o+q+r+u+w+y+{+},P,Q,S,f,h,l,o,r-R-S-_-b-d-e-f-g-i-j-k-l-m-o-s&ZUOXYZhrtv|}!R!S!T!X!i!k!o!p!q!s!t#]#j#m$P$R$T$W$k$m${%Q%X%[%^%e%j%l%v&O&]&a&l&m&t&{'S'V'a'b'e'g'h'l's'{(R(X([(c(e(m(|)P)Y)])f)p)v)y)z)}*T*U*W*Y*]*^*a*h*i*p*s*z+Z+b+c+f+m+n+o+q+r+u+w+y+{+},P,Q,S,f,h,l,o,r-R-S-_-b-d-e-f-g-i-j-k-l-o-s%eWOXYZhrv|}!R!S!T!X!i!k#]#j#m$P$R$T$W$k$m${%Q%[%^%e%j%l%v&O&]&a&l&m&t&{'S'V'a'b'e'g'h'l's'{(R(X([(c(e(m(|)P)Y)])f)p)v)y)z)}*T*W*Y*]*^*a*h*i*p*s*z+Z+b+c+f+m+n+o+q+r+u+y+{+},P,Q,S,f,h,l,o-R-S-_-j-k-lQ#|uQ-`-WR-p-r'fdOSXYZehrstvx|}!R!S!T!U!X!c!d!e!f!g!h!k!o!p!q!s!t!z!}#R#S#]#j#m$O$P$R$T$W$h$j$k$m${%Q%X%[%^%a%e%j%l%v&O&Q&]&a&j&l&m&t&x&{'S'V'a'e'g'h'l'q's'w'{(Q(R(X([(c(e(m(p(|)P)T)U)Y)])f)p)y)z)}*T*U*W*Y*]*^*a*d*h*i*p*r*s*z+S+T+Z+b+c+f+n+o+q+r+u+w+y+{+},P,Q,S,f,h,l,o,r-R-S-_-b-d-e-f-g-i-j-k-l-m-o-sW#pl!O!P$_W#xu&_-W-rQ$a!QQ$q!YQ$r!ZW$z!i'b)v+mS&^#y#zQ'O$lQ(f&WQ(t&nU(u&p(v(wU(x&r(y*yQ)h'XW)i'Z+i,j-PS+h)j)kY,U*t,V,w,x-[Q,X*vQ,c+_Q,e+aR-Z,vR&]#xi!wXY!S!T%^%e's'{)P*T*W*YR%[!vQ!{XQ%w#]Q&f$TR&i$WT-V,r-b!U!jP!n#i#v$X$g$s$t$u$v$w$x%c%h%n%o&b&z(d(o)S*R*[+R+|-hQ&Z#qR'^$rR'a$zR%T!m'ncOSXYZehrstvx|}!R!S!T!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z!}#R#S#]#j#m$O$P$R$T$W$h$j$k$m${%Q%X%[%^%a%e%j%l%v&O&Q&]&a&j&l&m&t&x&{'S'V'a'b'e'g'h'l'q's'w'{(Q(R(X([(c(e(m(p(|)P)T)U)Y)])f)p)v)y)z)}*T*U*W*Y*]*^*a*d*h*i*p*r*s*z+S+T+Z+b+c+f+m+n+o+q+r+u+w+y+{+},P,Q,S,f,h,l,o,r-R-S-_-b-d-e-f-g-i-j-k-l-m-o-sT#gc#hS#^_#_S#a`#bS#ca#dS#eb#fT*l(_*mT(`%w(bQ$VwR+g)iX$Tw$U$V&hZkOr$m)]+ZXoOr)]+ZQ$n!WQ&v$eQ&w$fQ'Y$pQ']$rQ)Z&}Q)a'SQ)c'TQ)d'UQ)q'[Q)s'^Q*})PQ+P)QQ+Q)RQ+U)XS+W)[)rQ+[)_Q+])`Q+^)bQ,Z*|Q,[+OQ,^+VQ,_+XQ,d+`Q,z,]Q,|,bQ,},cR-],{WoOr)]+ZR#snQ'[$qR)['OQ+f)iR,h+gQ)r'[R+X)[ZmOnr)]+ZQrOR#urQ&`#{R(k&`S%k#Q#}S(S%k(VT(V%n&bQ%_!yQ%f!|W't%_%f'y'}Q'y%cR'}%hQ&k$XR(q&kQ(Y%oQ*_(TT*e(Y*_Q'c$|R)w'cS'f%P%QY){'f)|+s,p-TU)|'g'h'iU+s)}*O*PS,p+t+uR-T,qQ#X]R%r#XQ#[^R%t#[Q#__R%x#_Q(]%uS*j(]*kR*k(^Q*m(_R,R*mQ#b`R%z#bQ#daR%{#dQ#fbR%|#fQ#hcR%}#hQ#kfQ&P#iW&S#k&P(n*qQ(n&eR*q-hQ$UwS&g$U&hR&h$VQ&u$cR(}&uQ&X#pR(g&XQ$_!PR&o$_Q*u(uS,W*u,yR,y,XQ&s$aR(z&sQ#njR&U#nQ+Z)]R,`+ZQ)O&vR*{)OQ&y$gS)V&y)WR)W&zQ'R$nR)^'RQ'W$oS)g'W+dR+d)hQ+j)mR,k+jWnOr)]+ZR#rnSqOrT+Y)]+ZWpOr)]+ZR'P$mYjOr$m)]+ZR&T#m[wOr#m$m)]+ZR&f$T&YPOXYZhrtv|}!R!S!T!X!i!k!o!p!q!s!t#]#j#m$P$R$T$W$k$m${%Q%X%[%^%e%j%l%v&O&]&a&l&m&t&{'S'V'a'b'e'g'h'l's'{(R(X([(c(e(m(|)P)Y)])f)p)v)y)z)}*T*U*W*Y*]*^*a*h*i*p*s*z+Z+b+c+f+m+n+o+q+r+u+w+y+{+},P,Q,S,f,h,l,o,r-R-S-_-b-d-e-f-g-i-j-k-l-o-sQ!nSQ#ieQ#vsU$Xx%a'wS$g!U$jQ$s!cQ$t!dQ$u!eQ$v!fQ$w!gQ$x!hQ%c!zQ%h!}Q%n#RQ%o#SQ&b$OQ&z$hQ(d&QU(o&j(p*rW)S&x)U+S+TQ*R'qQ*[(QQ+R)TQ+|*dR-h-mQ!yXQ!|YQ$e!SQ$f!T^'p%^%e's'{*T*W*YR+O)P[fOr#m$m)]+Zh!vXY!S!T%^%e's'{)P*T*W*YQ#QZQ#lhS#}v|Q$[}W$c!R$W&{)YS$o!X$kW$y!i'b)v+mQ%P!kQ%u#]`&R#j&O(c(e(m*p,S-lQ&c$PQ&d$RQ&e$TQ'_${Q'i%QQ'o%[W(P%j(R*]*aQ(T%lQ(^%vQ(i&]S(l&a-jQ(r&lQ(s&mU({&t(|*zQ)b'SY)e'V)f+b+c,fQ)t'a^)x'e)z+q+r,o-S-_Q*O'gQ*P'hS*Q'l-kW*c(X*^+y+}W*g([*i,P,QQ+l)pQ+p)yQ+t)}Q,O*hQ,T*sQ,g+fQ,m+nQ,n+oQ,q+uQ,u+{Q-O,hQ-Q,lR-^-RhTOr#j#m$m&O&a'l(c(e)]+Z$z!uXYZhv|}!R!S!T!X!i!k#]$P$R$T$W$k${%Q%[%^%e%j%l%v&]&l&m&t&{'S'V'a'b'e'g'h's'{(R(X([(m(|)P)Y)f)p)v)y)z)}*T*W*Y*]*^*a*h*i*p*s*z+b+c+f+m+n+o+q+r+u+y+{+},P,Q,S,f,h,l,o-R-S-_-j-k-lQ#wtW%U!o!s-e-oQ%V!pQ%W!qQ%Y!tQ%d-dS'k%X-iQ'm-fQ'n-gQ+v*UQ,t+wS-U,r-bR-q-sU#{u-W-rR(j&_[gOr#m$m)]+ZX!xX#]$T$WQ#VZQ$QvR$Z|Q%`!yQ%g!|Q%m#QQ'_$yQ'z%cQ(O%hQ(W%nQ(Z%oQ*`(TQ,s+vQ-Y,tR-a-XQ$YxQ'v%aR*V'wQ-X,rR-c-bR#PYR#UZR%O!iQ$|!iV)u'b)v+m!V!lP!n#i#v$X$g$s$t$u$v$w$x%c%h%n%o&b&z(d(o)S*R*[+R+|-hR%R!kR%w#]Q(a%wR*o(bQ$d!RQ&i$WQ)X&{R+V)YQ#qlQ$]!OQ$`!PR&q$_Q(t&pR*x(wQ(t&pQ*w(vR*x(wR$b!QXpOr)]+ZQ$i!UR&|$jQ$p!XR&}$kR)o'ZQ)m'ZV,i+i,j-P",nodeNames:"‚ö† print Comment Script AssignStatement * BinaryExpression BitOp BitOp BitOp BitOp ArithOp ArithOp @ ArithOp ** UnaryExpression ArithOp BitOp AwaitExpression await ParenthesizedExpression ( BinaryExpression or and CompareOp in not is UnaryExpression ConditionalExpression if else LambdaExpression lambda ParamList VariableName AssignOp , : NamedExpression AssignOp YieldExpression yield from ) TupleExpression ComprehensionExpression async for LambdaExpression ArrayExpression [ ] ArrayComprehensionExpression DictionaryExpression { } DictionaryComprehensionExpression SetExpression SetComprehensionExpression CallExpression ArgList AssignOp MemberExpression . PropertyName Number String FormatString FormatReplacement FormatConversion FormatSpec ContinuedString Ellipsis None Boolean TypeDef AssignOp UpdateStatement UpdateOp ExpressionStatement DeleteStatement del PassStatement pass BreakStatement break ContinueStatement continue ReturnStatement return YieldStatement PrintStatement RaiseStatement raise ImportStatement import as ScopeStatement global nonlocal AssertStatement assert StatementGroup ; IfStatement Body elif WhileStatement while ForStatement TryStatement try except finally WithStatement with FunctionDefinition def ParamList AssignOp TypeDef ClassDefinition class DecoratedStatement Decorator At",maxTerm:236,context:CJ,nodeProps:[[WY.group,-14,4,80,82,83,85,87,89,91,93,94,95,97,100,103,"Statement Statement",-22,6,16,19,21,37,47,48,52,55,56,59,60,61,62,65,68,69,70,74,75,76,77,"Expression",-9,105,107,110,112,113,117,119,124,126,"Statement"]],skippedNodes:[0,2],repeatNodeCount:32,tokenData:"&AaMgR!^OX$}XY!#xY[$}[]!#x]p$}pq!#xqr!&Srs!)yst!C{tu$}uv$+}vw$.awx$/mxy$Lgyz$Mmz{$Ns{|%#c|}%$o}!O%%u!O!P%([!P!Q%3b!Q!R%6Q!R![%:S![!]%EO!]!^%Gb!^!_%Hh!_!`%KW!`!a%Ld!a!b$}!b!c& P!c!d&!_!d!e&$P!e!h&!_!h!i&.R!i!t&!_!t!u&7g!u!w&!_!w!x&,a!x!}&!_!}#O&9q#O#P!%b#P#Q&:w#Q#R&;}#R#S&!_#S#T$}#T#U&!_#U#V&$P#V#Y&!_#Y#Z&.R#Z#f&!_#f#g&7g#g#i&!_#i#j&,a#j#o&!_#o#p&=Z#p#q&>P#q#r&?]#r#s&@Z#s$g$}$g~&!_<r%`Z%q7[%hS%kW%n`%tp%w!b%y#tOr$}rs&Rsw$}wxFSx#O$}#O#P! n#P#o$}#o#p!#U#p#q$}#q#r!!S#r~$}9[&^Z%q7[%hS%n`%w!bOr'PrsCxsw'Pwx(Px#O'P#O#P>v#P#o'P#o#pCU#p#q'P#q#r?[#r~'P9['^Z%q7[%hS%kW%n`%w!bOr'Prs&Rsw'Pwx(Px#O'P#O#P>v#P#o'P#o#pCU#p#q'P#q#r?[#r~'P8z(WZ%q7[%kWOr(yrs)wsw(ywx;bx#O(y#O#P2V#P#o(y#o#p7n#p#q(y#q#r2k#r~(y8z)UZ%q7[%hS%kW%w!bOr(yrs)wsw(ywx(Px#O(y#O#P2V#P#o(y#o#p7n#p#q(y#q#r2k#r~(y8z*QZ%q7[%hS%w!bOr(yrs*ssw(ywx(Px#O(y#O#P2V#P#o(y#o#p7n#p#q(y#q#r2k#r~(y8z*|Z%q7[%hS%w!bOr(yrs+osw(ywx(Px#O(y#O#P2V#P#o(y#o#p7n#p#q(y#q#r2k#r~(y8r+xX%q7[%hS%w!bOw+owx,ex#O+o#O#P.V#P#o+o#o#p0^#p#q+o#q#r.k#r~+o8r,jX%q7[Ow+owx-Vx#O+o#O#P.V#P#o+o#o#p0^#p#q+o#q#r.k#r~+o8r-[X%q7[Ow+owx-wx#O+o#O#P.V#P#o+o#o#p0^#p#q+o#q#r.k#r~+o7[-|R%q7[O#o-w#p#q-w#r~-w8r.[T%q7[O#o+o#o#p.k#p#q+o#q#r.k#r~+o!f.rV%hS%w!bOw.kwx/Xx#O.k#O#P0W#P#o.k#o#p0^#p~.k!f/[VOw.kwx/qx#O.k#O#P0W#P#o.k#o#p0^#p~.k!f/tUOw.kx#O.k#O#P0W#P#o.k#o#p0^#p~.k!f0ZPO~.k!f0cV%hSOw0xwx1^x#O0x#O#P2P#P#o0x#o#p.k#p~0xS0}T%hSOw0xwx1^x#O0x#O#P2P#P~0xS1aTOw0xwx1px#O0x#O#P2P#P~0xS1sSOw0xx#O0x#O#P2P#P~0xS2SPO~0x8z2[T%q7[O#o(y#o#p2k#p#q(y#q#r2k#r~(y!n2tX%hS%kW%w!bOr2krs3asw2kwx4wx#O2k#O#P7h#P#o2k#o#p7n#p~2k!n3hX%hS%w!bOr2krs4Tsw2kwx4wx#O2k#O#P7h#P#o2k#o#p7n#p~2k!n4[X%hS%w!bOr2krs.ksw2kwx4wx#O2k#O#P7h#P#o2k#o#p7n#p~2k!n4|X%kWOr2krs3asw2kwx5ix#O2k#O#P7h#P#o2k#o#p7n#p~2k!n5nX%kWOr2krs3asw2kwx6Zx#O2k#O#P7h#P#o2k#o#p7n#p~2kW6`T%kWOr6Zrs6os#O6Z#O#P7b#P~6ZW6rTOr6Zrs7Rs#O6Z#O#P7b#P~6ZW7USOr6Zs#O6Z#O#P7b#P~6ZW7ePO~6Z!n7kPO~2k!n7uX%hS%kWOr8brs9Osw8bwx:Ux#O8b#O#P;[#P#o8b#o#p2k#p~8b[8iV%hS%kWOr8brs9Osw8bwx:Ux#O8b#O#P;[#P~8b[9TV%hSOr8brs9jsw8bwx:Ux#O8b#O#P;[#P~8b[9oV%hSOr8brs0xsw8bwx:Ux#O8b#O#P;[#P~8b[:ZV%kWOr8brs9Osw8bwx:px#O8b#O#P;[#P~8b[:uV%kWOr8brs9Osw8bwx6Zx#O8b#O#P;[#P~8b[;_PO~8b8z;iZ%q7[%kWOr(yrs)wsw(ywx<[x#O(y#O#P2V#P#o(y#o#p7n#p#q(y#q#r2k#r~(y7d<cX%q7[%kWOr<[rs=Os#O<[#O#P>b#P#o<[#o#p6Z#p#q<[#q#r6Z#r~<[7d=TX%q7[Or<[rs=ps#O<[#O#P>b#P#o<[#o#p6Z#p#q<[#q#r6Z#r~<[7d=uX%q7[Or<[rs-ws#O<[#O#P>b#P#o<[#o#p6Z#p#q<[#q#r6Z#r~<[7d>gT%q7[O#o<[#o#p6Z#p#q<[#q#r6Z#r~<[9[>{T%q7[O#o'P#o#p?[#p#q'P#q#r?[#r~'P#O?gX%hS%kW%n`%w!bOr?[rs@Ssw?[wx4wx#O?[#O#PCO#P#o?[#o#pCU#p~?[#O@]X%hS%n`%w!bOr?[rs@xsw?[wx4wx#O?[#O#PCO#P#o?[#o#pCU#p~?[#OARX%hS%n`%w!bOr?[rsAnsw?[wx4wx#O?[#O#PCO#P#o?[#o#pCU#p~?[!vAwV%hS%n`%w!bOwAnwx/Xx#OAn#O#PB^#P#oAn#o#pBd#p~An!vBaPO~An!vBiV%hSOw0xwx1^x#O0x#O#P2P#P#o0x#o#pAn#p~0x#OCRPO~?[#OC]X%hS%kWOr8brs9Osw8bwx:Ux#O8b#O#P;[#P#o8b#o#p?[#p~8b9[DTZ%q7[%hS%n`%w!bOr'PrsDvsw'Pwx(Px#O'P#O#P>v#P#o'P#o#pCU#p#q'P#q#r?[#r~'P9SERX%q7[%hS%n`%w!bOwDvwx,ex#ODv#O#PEn#P#oDv#o#pBd#p#qDv#q#rAn#r~Dv9SEsT%q7[O#oDv#o#pAn#p#qDv#q#rAn#r~Dv<bF_Z%q7[%kW%tp%y#tOrGQrs)wswGQwxM^x#OGQ#O#PHS#P#oGQ#o#pLj#p#qGQ#q#rHh#r~GQ<bGaZ%q7[%hS%kW%tp%w!b%y#tOrGQrs)wswGQwxFSx#OGQ#O#PHS#P#oGQ#o#pLj#p#qGQ#q#rHh#r~GQ<bHXT%q7[O#oGQ#o#pHh#p#qGQ#q#rHh#r~GQ&UHuX%hS%kW%tp%w!b%y#tOrHhrs3aswHhwxIbx#OHh#O#PLd#P#oHh#o#pLj#p~Hh&UIkX%kW%tp%y#tOrHhrs3aswHhwxJWx#OHh#O#PLd#P#oHh#o#pLj#p~Hh&UJaX%kW%tp%y#tOrHhrs3aswHhwxJ|x#OHh#O#PLd#P#oHh#o#pLj#p~Hh$nKVX%kW%tp%y#tOrJ|rs6oswJ|wxJ|x#OJ|#O#PKr#P#oJ|#o#pKx#p~J|$nKuPO~J|$nK}V%kWOr6Zrs6os#O6Z#O#P7b#P#o6Z#o#pJ|#p~6Z&ULgPO~Hh&ULqX%hS%kWOr8brs9Osw8bwx:Ux#O8b#O#P;[#P#o8b#o#pHh#p~8b<bMiZ%q7[%kW%tp%y#tOrGQrs)wswGQwxN[x#OGQ#O#PHS#P#oGQ#o#pLj#p#qGQ#q#rHh#r~GQ:zNgZ%q7[%kW%tp%y#tOrN[rs=OswN[wxN[x#ON[#O#P! Y#P#oN[#o#pKx#p#qN[#q#rJ|#r~N[:z! _T%q7[O#oN[#o#pJ|#p#qN[#q#rJ|#r~N[<r! sT%q7[O#o$}#o#p!!S#p#q$}#q#r!!S#r~$}&f!!cX%hS%kW%n`%tp%w!b%y#tOr!!Srs@Ssw!!SwxIbx#O!!S#O#P!#O#P#o!!S#o#p!#U#p~!!S&f!#RPO~!!S&f!#]X%hS%kWOr8brs9Osw8bwx:Ux#O8b#O#P;[#P#o8b#o#p!!S#p~8bMg!$]a%q7[%hS%kW$o1s%n`%tp%w!b%y#tOX$}XY!#xY[$}[]!#x]p$}pq!#xqr$}rs&Rsw$}wxFSx#O$}#O#P!%b#P#o$}#o#p!#U#p#q$}#q#r!!S#r~$}Mg!%gX%q7[OY$}YZ!#xZ]$}]^!#x^#o$}#o#p!!S#p#q$}#q#r!!S#r~$}<u!&eb%q7[%hS%kW%n`%tp%w!b%y#tOr$}rs&Rsw$}wxFSx!_$}!_!`!'m!`#O$}#O#P! n#P#T$}#T#U!(s#U#f$}#f#g!(s#g#h!(s#h#o$}#o#p!#U#p#q$}#q#r!!S#r~$}<u!(QZjR%q7[%hS%kW%n`%tp%w!b%y#tOr$}rs&Rsw$}wxFSx#O$}#O#P! n#P#o$}#o#p!#U#p#q$}#q#r!!S#r~$}<u!)WZ!jR%q7[%hS%kW%n`%tp%w!b%y#tOr$}rs&Rsw$}wxFSx#O$}#O#P! n#P#o$}#o#p!#U#p#q$}#q#r!!S#r~$}G{!*Y_%up%q7[%hS%f,X%n`%w!bOY!+XYZ'PZ]!+X]^'P^r!+Xrs!BPsw!+Xwx!-gx#O!+X#O#P!>e#P#o!+X#o#p!@}#p#q!+X#q#r!>y#r~!+XDe!+h_%q7[%hS%kW%f,X%n`%w!bOY!+XYZ'PZ]!+X]^'P^r!+Xrs!,gsw!+Xwx!-gx#O!+X#O#P!>e#P#o!+X#o#p!@}#p#q!+X#q#r!>y#r~!+XDe!,tZ%q7[%hS%f,X%n`%w!bOr'PrsCxsw'Pwx(Px#O'P#O#P>v#P#o'P#o#pCU#p#q'P#q#r?[#r~'PDT!-p_%q7[%kW%f,XOY!.oYZ(yZ]!.o]^(y^r!.ors!/{sw!.owx!;Rx#O!.o#O#P!0y#P#o!.o#o#p!6m#p#q!.o#q#r!1_#r~!.oDT!.|_%q7[%hS%kW%f,X%w!bOY!.oYZ(yZ]!.o]^(y^r!.ors!/{sw!.owx!-gx#O!.o#O#P!0y#P#o!.o#o#p!6m#p#q!.o#q#r!1_#r~!.oDT!0WZ%q7[%hS%f,X%w!bOr(yrs*ssw(ywx(Px#O(y#O#P2V#P#o(y#o#p7n#p#q(y#q#r2k#r~(yDT!1OT%q7[O#o!.o#o#p!1_#p#q!.o#q#r!1_#r~!.o-w!1j]%hS%kW%f,X%w!bOY!1_YZ2kZ]!1_]^2k^r!1_rs!2csw!1_wx!3Xx#O!1_#O#P!6g#P#o!1_#o#p!6m#p~!1_-w!2lX%hS%f,X%w!bOr2krs4Tsw2kwx4wx#O2k#O#P7h#P#o2k#o#p7n#p~2k-w!3`]%kW%f,XOY!1_YZ2kZ]!1_]^2k^r!1_rs!2csw!1_wx!4Xx#O!1_#O#P!6g#P#o!1_#o#p!6m#p~!1_-w!4`]%kW%f,XOY!1_YZ2kZ]!1_]^2k^r!1_rs!2csw!1_wx!5Xx#O!1_#O#P!6g#P#o!1_#o#p!6m#p~!1_,a!5`X%kW%f,XOY!5XYZ6ZZ]!5X]^6Z^r!5Xrs!5{s#O!5X#O#P!6a#P~!5X,a!6QT%f,XOr6Zrs7Rs#O6Z#O#P7b#P~6Z,a!6dPO~!5X-w!6jPO~!1_-w!6v]%hS%kW%f,XOY!7oYZ8bZ]!7o]^8b^r!7ors!8ksw!7owx!9Xx#O!7o#O#P!:{#P#o!7o#o#p!1_#p~!7o,e!7xZ%hS%kW%f,XOY!7oYZ8bZ]!7o]^8b^r!7ors!8ksw!7owx!9Xx#O!7o#O#P!:{#P~!7o,e!8rV%hS%f,XOr8brs9jsw8bwx:Ux#O8b#O#P;[#P~8b,e!9`Z%kW%f,XOY!7oYZ8bZ]!7o]^8b^r!7ors!8ksw!7owx!:Rx#O!7o#O#P!:{#P~!7o,e!:YZ%kW%f,XOY!7oYZ8bZ]!7o]^8b^r!7ors!8ksw!7owx!5Xx#O!7o#O#P!:{#P~!7o,e!;OPO~!7oDT!;[_%q7[%kW%f,XOY!.oYZ(yZ]!.o]^(y^r!.ors!/{sw!.owx!<Zx#O!.o#O#P!0y#P#o!.o#o#p!6m#p#q!.o#q#r!1_#r~!.oBm!<d]%q7[%kW%f,XOY!<ZYZ<[Z]!<Z]^<[^r!<Zrs!=]s#O!<Z#O#P!>P#P#o!<Z#o#p!5X#p#q!<Z#q#r!5X#r~!<ZBm!=dX%q7[%f,XOr<[rs=ps#O<[#O#P>b#P#o<[#o#p6Z#p#q<[#q#r6Z#r~<[Bm!>UT%q7[O#o!<Z#o#p!5X#p#q!<Z#q#r!5X#r~!<ZDe!>jT%q7[O#o!+X#o#p!>y#p#q!+X#q#r!>y#r~!+X.X!?W]%hS%kW%f,X%n`%w!bOY!>yYZ?[Z]!>y]^?[^r!>yrs!@Psw!>ywx!3Xx#O!>y#O#P!@w#P#o!>y#o#p!@}#p~!>y.X!@[X%hS%f,X%n`%w!bOr?[rs@xsw?[wx4wx#O?[#O#PCO#P#o?[#o#pCU#p~?[.X!@zPO~!>y.X!AW]%hS%kW%f,XOY!7oYZ8bZ]!7o]^8b^r!7ors!8ksw!7owx!9Xx#O!7o#O#P!:{#P#o!7o#o#p!>y#p~!7oGZ!B^Z%q7[%hS%f,X%n`%w!bOr'Prs!CPsw'Pwx(Px#O'P#O#P>v#P#o'P#o#pCU#p#q'P#q#r?[#r~'PGZ!C`X%l#|%q7[%hS%j,X%n`%w!bOwDvwx,ex#ODv#O#PEn#P#oDv#o#pBd#p#qDv#q#rAn#r~DvMg!D`_Q1s%q7[%hS%kW%n`%tp%w!b%y#tOY!C{YZ$}Z]!C{]^$}^r!C{rs!E_sw!C{wx#Hqx#O!C{#O#P$(i#P#o!C{#o#p$*{#p#q!C{#q#r$)]#r~!C{JP!El_Q1s%q7[%hS%n`%w!bOY!FkYZ'PZ]!Fk]^'P^r!Fkrs#Eksw!Fkwx!Gyx#O!Fk#O#P#=u#P#o!Fk#o#p#Di#p#q!Fk#q#r#>i#r~!FkJP!Fz_Q1s%q7[%hS%kW%n`%w!bOY!FkYZ'PZ]!Fk]^'P^r!Fkrs!E_sw!Fkwx!Gyx#O!Fk#O#P#=u#P#o!Fk#o#p#Di#p#q!Fk#q#r#>i#r~!FkIo!HS_Q1s%q7[%kWOY!IRYZ(yZ]!IR]^(y^r!IRrs!J_sw!IRwx#8wx#O!IR#O#P#*R#P#o!IR#o#p#2}#p#q!IR#q#r#*u#r~!IRIo!I`_Q1s%q7[%hS%kW%w!bOY!IRYZ(yZ]!IR]^(y^r!IRrs!J_sw!IRwx!Gyx#O!IR#O#P#*R#P#o!IR#o#p#2}#p#q!IR#q#r#*u#r~!IRIo!Jj_Q1s%q7[%hS%w!bOY!IRYZ(yZ]!IR]^(y^r!IRrs!Kisw!IRwx!Gyx#O!IR#O#P#*R#P#o!IR#o#p#2}#p#q!IR#q#r#*u#r~!IRIo!Kt_Q1s%q7[%hS%w!bOY!IRYZ(yZ]!IR]^(y^r!IRrs!Lssw!IRwx!Gyx#O!IR#O#P#*R#P#o!IR#o#p#2}#p#q!IR#q#r#*u#r~!IRIg!MO]Q1s%q7[%hS%w!bOY!LsYZ+oZ]!Ls]^+o^w!Lswx!Mwx#O!Ls#O#P#!y#P#o!Ls#o#p#&m#p#q!Ls#q#r##m#r~!LsIg!NO]Q1s%q7[OY!LsYZ+oZ]!Ls]^+o^w!Lswx!Nwx#O!Ls#O#P#!y#P#o!Ls#o#p#&m#p#q!Ls#q#r##m#r~!LsIg# O]Q1s%q7[OY!LsYZ+oZ]!Ls]^+o^w!Lswx# wx#O!Ls#O#P#!y#P#o!Ls#o#p#&m#p#q!Ls#q#r##m#r~!LsHP#!OXQ1s%q7[OY# wYZ-wZ]# w]^-w^#o# w#o#p#!k#p#q# w#q#r#!k#r~# w1s#!pRQ1sOY#!kZ]#!k^~#!kIg##QXQ1s%q7[OY!LsYZ+oZ]!Ls]^+o^#o!Ls#o#p##m#p#q!Ls#q#r##m#r~!Ls3Z##vZQ1s%hS%w!bOY##mYZ.kZ]##m]^.k^w##mwx#$ix#O##m#O#P#&X#P#o##m#o#p#&m#p~##m3Z#$nZQ1sOY##mYZ.kZ]##m]^.k^w##mwx#%ax#O##m#O#P#&X#P#o##m#o#p#&m#p~##m3Z#%fZQ1sOY##mYZ.kZ]##m]^.k^w##mwx#!kx#O##m#O#P#&X#P#o##m#o#p#&m#p~##m3Z#&^TQ1sOY##mYZ.kZ]##m]^.k^~##m3Z#&tZQ1s%hSOY#'gYZ0xZ]#'g]^0x^w#'gwx#(Zx#O#'g#O#P#)m#P#o#'g#o#p##m#p~#'g1w#'nXQ1s%hSOY#'gYZ0xZ]#'g]^0x^w#'gwx#(Zx#O#'g#O#P#)m#P~#'g1w#(`XQ1sOY#'gYZ0xZ]#'g]^0x^w#'gwx#({x#O#'g#O#P#)m#P~#'g1w#)QXQ1sOY#'gYZ0xZ]#'g]^0x^w#'gwx#!kx#O#'g#O#P#)m#P~#'g1w#)rTQ1sOY#'gYZ0xZ]#'g]^0x^~#'gIo#*YXQ1s%q7[OY!IRYZ(yZ]!IR]^(y^#o!IR#o#p#*u#p#q!IR#q#r#*u#r~!IR3c#+Q]Q1s%hS%kW%w!bOY#*uYZ2kZ]#*u]^2k^r#*urs#+ysw#*uwx#-}x#O#*u#O#P#2i#P#o#*u#o#p#2}#p~#*u3c#,S]Q1s%hS%w!bOY#*uYZ2kZ]#*u]^2k^r#*urs#,{sw#*uwx#-}x#O#*u#O#P#2i#P#o#*u#o#p#2}#p~#*u3c#-U]Q1s%hS%w!bOY#*uYZ2kZ]#*u]^2k^r#*urs##msw#*uwx#-}x#O#*u#O#P#2i#P#o#*u#o#p#2}#p~#*u3c#.U]Q1s%kWOY#*uYZ2kZ]#*u]^2k^r#*urs#+ysw#*uwx#.}x#O#*u#O#P#2i#P#o#*u#o#p#2}#p~#*u3c#/U]Q1s%kWOY#*uYZ2kZ]#*u]^2k^r#*urs#+ysw#*uwx#/}x#O#*u#O#P#2i#P#o#*u#o#p#2}#p~#*u1{#0UXQ1s%kWOY#/}YZ6ZZ]#/}]^6Z^r#/}rs#0qs#O#/}#O#P#2T#P~#/}1{#0vXQ1sOY#/}YZ6ZZ]#/}]^6Z^r#/}rs#1cs#O#/}#O#P#2T#P~#/}1{#1hXQ1sOY#/}YZ6ZZ]#/}]^6Z^r#/}rs#!ks#O#/}#O#P#2T#P~#/}1{#2YTQ1sOY#/}YZ6ZZ]#/}]^6Z^~#/}3c#2nTQ1sOY#*uYZ2kZ]#*u]^2k^~#*u3c#3W]Q1s%hS%kWOY#4PYZ8bZ]#4P]^8b^r#4Prs#4{sw#4Pwx#6ox#O#4P#O#P#8c#P#o#4P#o#p#*u#p~#4P2P#4YZQ1s%hS%kWOY#4PYZ8bZ]#4P]^8b^r#4Prs#4{sw#4Pwx#6ox#O#4P#O#P#8c#P~#4P2P#5SZQ1s%hSOY#4PYZ8bZ]#4P]^8b^r#4Prs#5usw#4Pwx#6ox#O#4P#O#P#8c#P~#4P2P#5|ZQ1s%hSOY#4PYZ8bZ]#4P]^8b^r#4Prs#'gsw#4Pwx#6ox#O#4P#O#P#8c#P~#4P2P#6vZQ1s%kWOY#4PYZ8bZ]#4P]^8b^r#4Prs#4{sw#4Pwx#7ix#O#4P#O#P#8c#P~#4P2P#7pZQ1s%kWOY#4PYZ8bZ]#4P]^8b^r#4Prs#4{sw#4Pwx#/}x#O#4P#O#P#8c#P~#4P2P#8hTQ1sOY#4PYZ8bZ]#4P]^8b^~#4PIo#9Q_Q1s%q7[%kWOY!IRYZ(yZ]!IR]^(y^r!IRrs!J_sw!IRwx#:Px#O!IR#O#P#*R#P#o!IR#o#p#2}#p#q!IR#q#r#*u#r~!IRHX#:Y]Q1s%q7[%kWOY#:PYZ<[Z]#:P]^<[^r#:Prs#;Rs#O#:P#O#P#=R#P#o#:P#o#p#/}#p#q#:P#q#r#/}#r~#:PHX#;Y]Q1s%q7[OY#:PYZ<[Z]#:P]^<[^r#:Prs#<Rs#O#:P#O#P#=R#P#o#:P#o#p#/}#p#q#:P#q#r#/}#r~#:PHX#<Y]Q1s%q7[OY#:PYZ<[Z]#:P]^<[^r#:Prs# ws#O#:P#O#P#=R#P#o#:P#o#p#/}#p#q#:P#q#r#/}#r~#:PHX#=YXQ1s%q7[OY#:PYZ<[Z]#:P]^<[^#o#:P#o#p#/}#p#q#:P#q#r#/}#r~#:PJP#=|XQ1s%q7[OY!FkYZ'PZ]!Fk]^'P^#o!Fk#o#p#>i#p#q!Fk#q#r#>i#r~!Fk3s#>v]Q1s%hS%kW%n`%w!bOY#>iYZ?[Z]#>i]^?[^r#>irs#?osw#>iwx#-}x#O#>i#O#P#DT#P#o#>i#o#p#Di#p~#>i3s#?z]Q1s%hS%n`%w!bOY#>iYZ?[Z]#>i]^?[^r#>irs#@ssw#>iwx#-}x#O#>i#O#P#DT#P#o#>i#o#p#Di#p~#>i3s#AO]Q1s%hS%n`%w!bOY#>iYZ?[Z]#>i]^?[^r#>irs#Awsw#>iwx#-}x#O#>i#O#P#DT#P#o#>i#o#p#Di#p~#>i3k#BSZQ1s%hS%n`%w!bOY#AwYZAnZ]#Aw]^An^w#Awwx#$ix#O#Aw#O#P#Bu#P#o#Aw#o#p#CZ#p~#Aw3k#BzTQ1sOY#AwYZAnZ]#Aw]^An^~#Aw3k#CbZQ1s%hSOY#'gYZ0xZ]#'g]^0x^w#'gwx#(Zx#O#'g#O#P#)m#P#o#'g#o#p#Aw#p~#'g3s#DYTQ1sOY#>iYZ?[Z]#>i]^?[^~#>i3s#Dr]Q1s%hS%kWOY#4PYZ8bZ]#4P]^8b^r#4Prs#4{sw#4Pwx#6ox#O#4P#O#P#8c#P#o#4P#o#p#>i#p~#4PJP#Ex_Q1s%q7[%hS%n`%w!bOY!FkYZ'PZ]!Fk]^'P^r!Fkrs#Fwsw!Fkwx!Gyx#O!Fk#O#P#=u#P#o!Fk#o#p#Di#p#q!Fk#q#r#>i#r~!FkIw#GU]Q1s%q7[%hS%n`%w!bOY#FwYZDvZ]#Fw]^Dv^w#Fwwx!Mwx#O#Fw#O#P#G}#P#o#Fw#o#p#CZ#p#q#Fw#q#r#Aw#r~#FwIw#HUXQ1s%q7[OY#FwYZDvZ]#Fw]^Dv^#o#Fw#o#p#Aw#p#q#Fw#q#r#Aw#r~#FwMV#IO_Q1s%q7[%kW%tp%y#tOY#I}YZGQZ]#I}]^GQ^r#I}rs!J_sw#I}wx$%]x#O#I}#O#P#K_#P#o#I}#o#p$$Z#p#q#I}#q#r#LR#r~#I}MV#J`_Q1s%q7[%hS%kW%tp%w!b%y#tOY#I}YZGQZ]#I}]^GQ^r#I}rs!J_sw#I}wx#Hqx#O#I}#O#P#K_#P#o#I}#o#p$$Z#p#q#I}#q#r#LR#r~#I}MV#KfXQ1s%q7[OY#I}YZGQZ]#I}]^GQ^#o#I}#o#p#LR#p#q#I}#q#r#LR#r~#I}6y#Lb]Q1s%hS%kW%tp%w!b%y#tOY#LRYZHhZ]#LR]^Hh^r#LRrs#+ysw#LRwx#MZx#O#LR#O#P$#u#P#o#LR#o#p$$Z#p~#LR6y#Mf]Q1s%kW%tp%y#tOY#LRYZHhZ]#LR]^Hh^r#LRrs#+ysw#LRwx#N_x#O#LR#O#P$#u#P#o#LR#o#p$$Z#p~#LR6y#Nj]Q1s%kW%tp%y#tOY#LRYZHhZ]#LR]^Hh^r#LRrs#+ysw#LRwx$ cx#O#LR#O#P$#u#P#o#LR#o#p$$Z#p~#LR5c$ n]Q1s%kW%tp%y#tOY$ cYZJ|Z]$ c]^J|^r$ crs#0qsw$ cwx$ cx#O$ c#O#P$!g#P#o$ c#o#p$!{#p~$ c5c$!lTQ1sOY$ cYZJ|Z]$ c]^J|^~$ c5c$#SZQ1s%kWOY#/}YZ6ZZ]#/}]^6Z^r#/}rs#0qs#O#/}#O#P#2T#P#o#/}#o#p$ c#p~#/}6y$#zTQ1sOY#LRYZHhZ]#LR]^Hh^~#LR6y$$d]Q1s%hS%kWOY#4PYZ8bZ]#4P]^8b^r#4Prs#4{sw#4Pwx#6ox#O#4P#O#P#8c#P#o#4P#o#p#LR#p~#4PMV$%j_Q1s%q7[%kW%tp%y#tOY#I}YZGQZ]#I}]^GQ^r#I}rs!J_sw#I}wx$&ix#O#I}#O#P#K_#P#o#I}#o#p$$Z#p#q#I}#q#r#LR#r~#I}Ko$&v_Q1s%q7[%kW%tp%y#tOY$&iYZN[Z]$&i]^N[^r$&irs#;Rsw$&iwx$&ix#O$&i#O#P$'u#P#o$&i#o#p$!{#p#q$&i#q#r$ c#r~$&iKo$'|XQ1s%q7[OY$&iYZN[Z]$&i]^N[^#o$&i#o#p$ c#p#q$&i#q#r$ c#r~$&iMg$(pXQ1s%q7[OY!C{YZ$}Z]!C{]^$}^#o!C{#o#p$)]#p#q!C{#q#r$)]#r~!C{7Z$)n]Q1s%hS%kW%n`%tp%w!b%y#tOY$)]YZ!!SZ]$)]]^!!S^r$)]rs#?osw$)]wx#MZx#O$)]#O#P$*g#P#o$)]#o#p$*{#p~$)]7Z$*lTQ1sOY$)]YZ!!SZ]$)]]^!!S^~$)]7Z$+U]Q1s%hS%kWOY#4PYZ8bZ]#4P]^8b^r#4Prs#4{sw#4Pwx#6ox#O#4P#O#P#8c#P#o#4P#o#p$)]#p~#4PGz$,b]$}Q%q7[%hS%kW%n`%tp%w!b%y#tOr$}rs&Rsw$}wxFSx!_$}!_!`$-Z!`#O$}#O#P! n#P#o$}#o#p!#U#p#q$}#q#r!!S#r~$}Gz$-nZ!s,W%q7[%hS%kW%n`%tp%w!b%y#tOr$}rs&Rsw$}wxFSx#O$}#O#P! n#P#o$}#o#p!#U#p#q$}#q#r!!S#r~$}Gz$.t]$wQ%q7[%hS%kW%n`%tp%w!b%y#tOr$}rs&Rsw$}wxFSx!_$}!_!`$-Z!`#O$}#O#P! n#P#o$}#o#p!#U#p#q$}#q#r!!S#r~$}G{$/|_%r`%q7[%kW%f,X%tp%y#tOY$0{YZGQZ]$0{]^GQ^r$0{rs$2]sw$0{wx$Jex#O$0{#O#P$Fw#P#o$0{#o#p$Ic#p#q$0{#q#r$G]#r~$0{Gk$1^_%q7[%hS%kW%f,X%tp%w!b%y#tOY$0{YZGQZ]$0{]^GQ^r$0{rs$2]sw$0{wx$Ewx#O$0{#O#P$Fw#P#o$0{#o#p$Ic#p#q$0{#q#r$G]#r~$0{DT$2h_%q7[%hS%f,X%w!bOY$3gYZ(yZ]$3g]^(y^r$3grs$Basw$3gwx$4sx#O$3g#O#P$5o#P#o$3g#o#p$={#p#q$3g#q#r$6T#r~$3gDT$3t_%q7[%hS%kW%f,X%w!bOY$3gYZ(yZ]$3g]^(y^r$3grs$2]sw$3gwx$4sx#O$3g#O#P$5o#P#o$3g#o#p$={#p#q$3g#q#r$6T#r~$3gDT$4|Z%q7[%kW%f,XOr(yrs)wsw(ywx;bx#O(y#O#P2V#P#o(y#o#p7n#p#q(y#q#r2k#r~(yDT$5tT%q7[O#o$3g#o#p$6T#p#q$3g#q#r$6T#r~$3g-w$6`]%hS%kW%f,X%w!bOY$6TYZ2kZ]$6T]^2k^r$6Trs$7Xsw$6Twx$=Rx#O$6T#O#P$=u#P#o$6T#o#p$={#p~$6T-w$7b]%hS%f,X%w!bOY$6TYZ2kZ]$6T]^2k^r$6Trs$8Zsw$6Twx$=Rx#O$6T#O#P$=u#P#o$6T#o#p$={#p~$6T-w$8d]%hS%f,X%w!bOY$6TYZ2kZ]$6T]^2k^r$6Trs$9]sw$6Twx$=Rx#O$6T#O#P$=u#P#o$6T#o#p$={#p~$6T-o$9fZ%hS%f,X%w!bOY$9]YZ.kZ]$9]]^.k^w$9]wx$:Xx#O$9]#O#P$:s#P#o$9]#o#p$:y#p~$9]-o$:^V%f,XOw.kwx/qx#O.k#O#P0W#P#o.k#o#p0^#p~.k-o$:vPO~$9]-o$;QZ%hS%f,XOY$;sYZ0xZ]$;s]^0x^w$;swx$<gx#O$;s#O#P$<{#P#o$;s#o#p$9]#p~$;s,]$;zX%hS%f,XOY$;sYZ0xZ]$;s]^0x^w$;swx$<gx#O$;s#O#P$<{#P~$;s,]$<lT%f,XOw0xwx1px#O0x#O#P2P#P~0x,]$=OPO~$;s-w$=YX%kW%f,XOr2krs3asw2kwx5ix#O2k#O#P7h#P#o2k#o#p7n#p~2k-w$=xPO~$6T-w$>U]%hS%kW%f,XOY$>}YZ8bZ]$>}]^8b^r$>}rs$?ysw$>}wx$Amx#O$>}#O#P$BZ#P#o$>}#o#p$6T#p~$>},e$?WZ%hS%kW%f,XOY$>}YZ8bZ]$>}]^8b^r$>}rs$?ysw$>}wx$Amx#O$>}#O#P$BZ#P~$>},e$@QZ%hS%f,XOY$>}YZ8bZ]$>}]^8b^r$>}rs$@ssw$>}wx$Amx#O$>}#O#P$BZ#P~$>},e$@zZ%hS%f,XOY$>}YZ8bZ]$>}]^8b^r$>}rs$;ssw$>}wx$Amx#O$>}#O#P$BZ#P~$>},e$AtV%kW%f,XOr8brs9Osw8bwx:px#O8b#O#P;[#P~8b,e$B^PO~$>}DT$Bl_%q7[%hS%f,X%w!bOY$3gYZ(yZ]$3g]^(y^r$3grs$Cksw$3gwx$4sx#O$3g#O#P$5o#P#o$3g#o#p$={#p#q$3g#q#r$6T#r~$3gC{$Cv]%q7[%hS%f,X%w!bOY$CkYZ+oZ]$Ck]^+o^w$Ckwx$Dox#O$Ck#O#P$Ec#P#o$Ck#o#p$:y#p#q$Ck#q#r$9]#r~$CkC{$DvX%q7[%f,XOw+owx-Vx#O+o#O#P.V#P#o+o#o#p0^#p#q+o#q#r.k#r~+oC{$EhT%q7[O#o$Ck#o#p$9]#p#q$Ck#q#r$9]#r~$CkGk$FUZ%q7[%kW%f,X%tp%y#tOrGQrs)wswGQwxM^x#OGQ#O#PHS#P#oGQ#o#pLj#p#qGQ#q#rHh#r~GQGk$F|T%q7[O#o$0{#o#p$G]#p#q$0{#q#r$G]#r~$0{1_$Gl]%hS%kW%f,X%tp%w!b%y#tOY$G]YZHhZ]$G]]^Hh^r$G]rs$7Xsw$G]wx$Hex#O$G]#O#P$I]#P#o$G]#o#p$Ic#p~$G]1_$HpX%kW%f,X%tp%y#tOrHhrs3aswHhwxJWx#OHh#O#PLd#P#oHh#o#pLj#p~Hh1_$I`PO~$G]1_$Il]%hS%kW%f,XOY$>}YZ8bZ]$>}]^8b^r$>}rs$?ysw$>}wx$Amx#O$>}#O#P$BZ#P#o$>}#o#p$G]#p~$>}Gk$JrZ%q7[%kW%f,X%tp%y#tOrGQrs)wswGQwx$Kex#OGQ#O#PHS#P#oGQ#o#pLj#p#qGQ#q#rHh#r~GQGk$KtZ%i!f%q7[%kW%g,X%tp%y#tOrN[rs=OswN[wxN[x#ON[#O#P! Y#P#oN[#o#pKx#p#qN[#q#rJ|#r~N[G{$LzZf,X%q7[%hS%kW%n`%tp%w!b%y#tOr$}rs&Rsw$}wxFSx#O$}#O#P! n#P#o$}#o#p!#U#p#q$}#q#r!!S#r~$}<u$NQZ!OR%q7[%hS%kW%n`%tp%w!b%y#tOr$}rs&Rsw$}wxFSx#O$}#O#P! n#P#o$}#o#p!#U#p#q$}#q#r!!S#r~$}G{% W_T,X%q7[%hS%kW%n`%tp%w!b%y#tOr$}rs&Rsw$}wxFSxz$}z{%!V{!_$}!_!`$-Z!`#O$}#O#P! n#P#o$}#o#p!#U#p#q$}#q#r!!S#r~$}G{%!j]_R%q7[%hS%kW%n`%tp%w!b%y#tOr$}rs&Rsw$}wxFSx!_$}!_!`$-Z!`#O$}#O#P! n#P#o$}#o#p!#U#p#q$}#q#r!!S#r~$}G{%#v]$z,X%q7[%hS%kW%n`%tp%w!b%y#tOr$}rs&Rsw$}wxFSx!_$}!_!`$-Z!`#O$}#O#P! n#P#o$}#o#p!#U#p#q$}#q#r!!S#r~$}<u%%SZwR%q7[%hS%kW%n`%tp%w!b%y#tOr$}rs&Rsw$}wxFSx#O$}#O#P! n#P#o$}#o#p!#U#p#q$}#q#r!!S#r~$}Mg%&Y^${,X%q7[%hS%kW%n`%tp%w!b%y#tOr$}rs&Rsw$}wxFSx!_$}!_!`$-Z!`!a%'U!a#O$}#O#P! n#P#o$}#o#p!#U#p#q$}#q#r!!S#r~$}B^%'iZ&U&j%q7[%hS%kW%n`%tp%w!b%y#tOr$}rs&Rsw$}wxFSx#O$}#O#P! n#P#o$}#o#p!#U#p#q$}#q#r!!S#r~$}G{%(o_!dQ%q7[%hS%kW%n`%tp%w!b%y#tOr$}rs&Rsw$}wxFSx!O$}!O!P%)n!P!Q$}!Q![%,O![#O$}#O#P! n#P#o$}#o#p!#U#p#q$}#q#r!!S#r~$}G{%*P]%q7[%hS%kW%n`%tp%w!b%y#tOr$}rs&Rsw$}wxFSx!O$}!O!P%*x!P#O$}#O#P! n#P#o$}#o#p!#U#p#q$}#q#r!!S#r~$}G{%+]Z!m,X%q7[%hS%kW%n`%tp%w!b%y#tOr$}rs&Rsw$}wxFSx#O$}#O#P! n#P#o$}#o#p!#U#p#q$}#q#r!!S#r~$}Gy%,cg!f,V%q7[%hS%kW%n`%tp%w!b%y#tOr$}rs&Rsw$}wxFSx!Q$}!Q![%,O![!g$}!g!h%-z!h!l$}!l!m%2[!m#O$}#O#P! n#P#R$}#R#S%,O#S#X$}#X#Y%-z#Y#^$}#^#_%2[#_#o$}#o#p!#U#p#q$}#q#r!!S#r~$}Gy%.]a%q7[%hS%kW%n`%tp%w!b%y#tOr$}rs&Rsw$}wxFSx{$}{|%/b|}$}}!O%/b!O!Q$}!Q![%0l![#O$}#O#P! n#P#o$}#o#p!#U#p#q$}#q#r!!S#r~$}Gy%/s]%q7[%hS%kW%n`%tp%w!b%y#tOr$}rs&Rsw$}wxFSx!Q$}!Q![%0l![#O$}#O#P! n#P#o$}#o#p!#U#p#q$}#q#r!!S#r~$}Gy%1Pc!f,V%q7[%hS%kW%n`%tp%w!b%y#tOr$}rs&Rsw$}wxFSx!Q$}!Q![%0l![!l$}!l!m%2[!m#O$}#O#P! n#P#R$}#R#S%0l#S#^$}#^#_%2[#_#o$}#o#p!#U#p#q$}#q#r!!S#r~$}Gy%2oZ!f,V%q7[%hS%kW%n`%tp%w!b%y#tOr$}rs&Rsw$}wxFSx#O$}#O#P! n#P#o$}#o#p!#U#p#q$}#q#r!!S#r~$}G{%3u_$|R%q7[%hS%kW%n`%tp%w!b%y#tOr$}rs&Rsw$}wxFSx!P$}!P!Q%4t!Q!_$}!_!`$-Z!`#O$}#O#P! n#P#o$}#o#p!#U#p#q$}#q#r!!S#r~$}Gz%5X]%OQ%q7[%hS%kW%n`%tp%w!b%y#tOr$}rs&Rsw$}wxFSx!_$}!_!`$-Z!`#O$}#O#P! n#P#o$}#o#p!#U#p#q$}#q#r!!S#r~$}Gy%6eu!f,V%q7[%hS%kW%n`%tp%w!b%y#tOr$}rs&Rsw$}wxFSx!O$}!O!P%8x!P!Q$}!Q![%:S![!d$}!d!e%<U!e!g$}!g!h%-z!h!l$}!l!m%2[!m!q$}!q!r%?O!r!z$}!z!{%Ar!{#O$}#O#P! n#P#R$}#R#S%:S#S#U$}#U#V%<U#V#X$}#X#Y%-z#Y#^$}#^#_%2[#_#c$}#c#d%?O#d#l$}#l#m%Ar#m#o$}#o#p!#U#p#q$}#q#r!!S#r~$}Gy%9Z]%q7[%hS%kW%n`%tp%w!b%y#tOr$}rs&Rsw$}wxFSx!Q$}!Q![%,O![#O$}#O#P! n#P#o$}#o#p!#U#p#q$}#q#r!!S#r~$}Gy%:gi!f,V%q7[%hS%kW%n`%tp%w!b%y#tOr$}rs&Rsw$}wxFSx!O$}!O!P%8x!P!Q$}!Q![%:S![!g$}!g!h%-z!h!l$}!l!m%2[!m#O$}#O#P! n#P#R$}#R#S%:S#S#X$}#X#Y%-z#Y#^$}#^#_%2[#_#o$}#o#p!#U#p#q$}#q#r!!S#r~$}Gy%<g`%q7[%hS%kW%n`%tp%w!b%y#tOr$}rs&Rsw$}wxFSx!Q$}!Q!R%=i!R!S%=i!S#O$}#O#P! n#P#R$}#R#S%=i#S#o$}#o#p!#U#p#q$}#q#r!!S#r~$}Gy%=|`!f,V%q7[%hS%kW%n`%tp%w!b%y#tOr$}rs&Rsw$}wxFSx!Q$}!Q!R%=i!R!S%=i!S#O$}#O#P! n#P#R$}#R#S%=i#S#o$}#o#p!#U#p#q$}#q#r!!S#r~$}Gy%?a_%q7[%hS%kW%n`%tp%w!b%y#tOr$}rs&Rsw$}wxFSx!Q$}!Q!Y%@`!Y#O$}#O#P! n#P#R$}#R#S%@`#S#o$}#o#p!#U#p#q$}#q#r!!S#r~$}Gy%@s_!f,V%q7[%hS%kW%n`%tp%w!b%y#tOr$}rs&Rsw$}wxFSx!Q$}!Q!Y%@`!Y#O$}#O#P! n#P#R$}#R#S%@`#S#o$}#o#p!#U#p#q$}#q#r!!S#r~$}Gy%BTc%q7[%hS%kW%n`%tp%w!b%y#tOr$}rs&Rsw$}wxFSx!Q$}!Q![%C`![!c$}!c!i%C`!i#O$}#O#P! n#P#R$}#R#S%C`#S#T$}#T#Z%C`#Z#o$}#o#p!#U#p#q$}#q#r!!S#r~$}Gy%Csc!f,V%q7[%hS%kW%n`%tp%w!b%y#tOr$}rs&Rsw$}wxFSx!Q$}!Q![%C`![!c$}!c!i%C`!i#O$}#O#P! n#P#R$}#R#S%C`#S#T$}#T#Z%C`#Z#o$}#o#p!#U#p#q$}#q#r!!S#r~$}Mg%Ec]x1s%q7[%hS%kW%n`%tp%w!b%y#tOr$}rs&Rsw$}wxFSx!_$}!_!`%F[!`#O$}#O#P! n#P#o$}#o#p!#U#p#q$}#q#r!!S#r~$}<u%FoZ%WR%q7[%hS%kW%n`%tp%w!b%y#tOr$}rs&Rsw$}wxFSx#O$}#O#P! n#P#o$}#o#p!#U#p#q$}#q#r!!S#r~$}G{%GuZ#^,X%q7[%hS%kW%n`%tp%w!b%y#tOr$}rs&Rsw$}wxFSx#O$}#O#P! n#P#o$}#o#p!#U#p#q$}#q#r!!S#r~$}G{%H{_jR%q7[%hS%kW%n`%tp%w!b%y#tOr$}rs&Rsw$}wxFSx!^$}!^!_%Iz!_!`!'m!`!a!'m!a#O$}#O#P! n#P#o$}#o#p!#U#p#q$}#q#r!!S#r~$}Gz%J_]$xQ%q7[%hS%kW%n`%tp%w!b%y#tOr$}rs&Rsw$}wxFSx!_$}!_!`$-Z!`#O$}#O#P! n#P#o$}#o#p!#U#p#q$}#q#r!!S#r~$}G{%Kk]%V,X%q7[%hS%kW%n`%tp%w!b%y#tOr$}rs&Rsw$}wxFSx!_$}!_!`!'m!`#O$}#O#P! n#P#o$}#o#p!#U#p#q$}#q#r!!S#r~$}G{%Lw^jR%q7[%hS%kW%n`%tp%w!b%y#tOr$}rs&Rsw$}wxFSx!_$}!_!`!'m!`!a%Ms!a#O$}#O#P! n#P#o$}#o#p!#U#p#q$}#q#r!!S#r~$}Gz%NW]$yQ%q7[%hS%kW%n`%tp%w!b%y#tOr$}rs&Rsw$}wxFSx!_$}!_!`$-Z!`#O$}#O#P! n#P#o$}#o#p!#U#p#q$}#q#r!!S#r~$}G{& f]]Q#tP%q7[%hS%kW%n`%tp%w!b%y#tOr$}rs&Rsw$}wxFSx!_$}!_!`$-Z!`#O$}#O#P! n#P#o$}#o#p!#U#p#q$}#q#r!!S#r~$}Mg&!tc%q7[%hS%kW%e&j%n`%tp%w!b%y#t%Q,XOr$}rs&Rsw$}wxFSx!Q$}!Q![&!_![!c$}!c!}&!_!}#O$}#O#P! n#P#R$}#R#S&!_#S#T$}#T#o&!_#o#p!#U#p#q$}#q#r!!S#r$g$}$g~&!_Mg&$fg%q7[%hS%kW%e&j%n`%tp%w!b%y#t%Q,XOr$}rs&%}sw$}wx&)Tx!Q$}!Q![&!_![!c$}!c!t&!_!t!u&,a!u!}&!_!}#O$}#O#P! n#P#R$}#R#S&!_#S#T$}#T#f&!_#f#g&,a#g#o&!_#o#p!#U#p#q$}#q#r!!S#r$g$}$g~&!_De&&[_%q7[%hS%f,X%n`%w!bOY!+XYZ'PZ]!+X]^'P^r!+Xrs&'Zsw!+Xwx!-gx#O!+X#O#P!>e#P#o!+X#o#p!@}#p#q!+X#q#r!>y#r~!+XDe&'hZ%q7[%hS%f,X%n`%w!bOr'Prs&(Zsw'Pwx(Px#O'P#O#P>v#P#o'P#o#pCU#p#q'P#q#r?[#r~'PD]&(hX%q7[%hS%j,X%n`%w!bOwDvwx,ex#ODv#O#PEn#P#oDv#o#pBd#p#qDv#q#rAn#r~DvGk&)b_%q7[%kW%f,X%tp%y#tOY$0{YZGQZ]$0{]^GQ^r$0{rs$2]sw$0{wx&*ax#O$0{#O#P$Fw#P#o$0{#o#p$Ic#p#q$0{#q#r$G]#r~$0{Gk&*nZ%q7[%kW%f,X%tp%y#tOrGQrs)wswGQwx&+ax#OGQ#O#PHS#P#oGQ#o#pLj#p#qGQ#q#rHh#r~GQFT&+nZ%q7[%kW%g,X%tp%y#tOrN[rs=OswN[wxN[x#ON[#O#P! Y#P#oN[#o#pKx#p#qN[#q#rJ|#r~N[Mg&,vc%q7[%hS%kW%e&j%n`%tp%w!b%y#t%Q,XOr$}rs&%}sw$}wx&)Tx!Q$}!Q![&!_![!c$}!c!}&!_!}#O$}#O#P! n#P#R$}#R#S&!_#S#T$}#T#o&!_#o#p!#U#p#q$}#q#r!!S#r$g$}$g~&!_Mg&.hg%q7[%hS%kW%e&j%n`%tp%w!b%y#t%Q,XOr$}rs&0Psw$}wx&2wx!Q$}!Q![&!_![!c$}!c!t&!_!t!u&5u!u!}&!_!}#O$}#O#P! n#P#R$}#R#S&!_#S#T$}#T#f&!_#f#g&5u#g#o&!_#o#p!#U#p#q$}#q#r!!S#r$g$}$g~&!_De&0^Z%q7[%hS%n`%w!b%s,XOr'Prs&1Psw'Pwx(Px#O'P#O#P>v#P#o'P#o#pCU#p#q'P#q#r?[#r~'PDe&1[Z%q7[%hS%n`%w!bOr'Prs&1}sw'Pwx(Px#O'P#O#P>v#P#o'P#o#pCU#p#q'P#q#r?[#r~'PD]&2[X%q7[%hS%x,X%n`%w!bOwDvwx,ex#ODv#O#PEn#P#oDv#o#pBd#p#qDv#q#rAn#r~DvGk&3UZ%q7[%kW%tp%y#t%m,XOrGQrs)wswGQwx&3wx#OGQ#O#PHS#P#oGQ#o#pLj#p#qGQ#q#rHh#r~GQGk&4SZ%q7[%kW%tp%y#tOrGQrs)wswGQwx&4ux#OGQ#O#PHS#P#oGQ#o#pLj#p#qGQ#q#rHh#r~GQFT&5SZ%q7[%kW%v,X%tp%y#tOrN[rs=OswN[wxN[x#ON[#O#P! Y#P#oN[#o#pKx#p#qN[#q#rJ|#r~N[Mg&6[c%q7[%hS%kW%e&j%n`%tp%w!b%y#t%Q,XOr$}rs&0Psw$}wx&2wx!Q$}!Q![&!_![!c$}!c!}&!_!}#O$}#O#P! n#P#R$}#R#S&!_#S#T$}#T#o&!_#o#p!#U#p#q$}#q#r!!S#r$g$}$g~&!_Mg&7|k%q7[%hS%kW%e&j%n`%tp%w!b%y#t%Q,XOr$}rs&%}sw$}wx&)Tx!Q$}!Q![&!_![!c$}!c!h&!_!h!i&5u!i!t&!_!t!u&,a!u!}&!_!}#O$}#O#P! n#P#R$}#R#S&!_#S#T$}#T#U&!_#U#V&,a#V#Y&!_#Y#Z&5u#Z#o&!_#o#p!#U#p#q$}#q#r!!S#r$g$}$g~&!_G{&:UZ!V,X%q7[%hS%kW%n`%tp%w!b%y#tOr$}rs&Rsw$}wxFSx#O$}#O#P! n#P#o$}#o#p!#U#p#q$}#q#r!!S#r~$}<u&;[Z!WR%q7[%hS%kW%n`%tp%w!b%y#tOr$}rs&Rsw$}wxFSx#O$}#O#P! n#P#o$}#o#p!#U#p#q$}#q#r!!S#r~$}Gz&<b]$vQ%q7[%hS%kW%n`%tp%w!b%y#tOr$}rs&Rsw$}wxFSx!_$}!_!`$-Z!`#O$}#O#P! n#P#o$}#o#p!#U#p#q$}#q#r!!S#r~$}Gy&=dX%hS%kW!ZGmOr8brs9Osw8bwx:Ux#O8b#O#P;[#P#o8b#o#p!!S#p~8bGz&>d]$uQ%q7[%hS%kW%n`%tp%w!b%y#tOr$}rs&Rsw$}wxFSx!_$}!_!`$-Z!`#O$}#O#P! n#P#o$}#o#p!#U#p#q$}#q#r!!S#r~$}<u&?nX![7_%hS%kW%n`%tp%w!b%y#tOr!!Srs@Ssw!!SwxIbx#O!!S#O#P!#O#P#o!!S#o#p!#U#p~!!SGy&@nZ%P,V%q7[%hS%kW%n`%tp%w!b%y#tOr$}rs&Rsw$}wxFSx#O$}#O#P! n#P#o$}#o#p!#U#p#q$}#q#r!!S#r~$}",tokenizers:[tJ,IJ,0,1,2,3,4,5,6,7,8,9,10,gJ],topRules:{Script:[0,3]},specialized:[{term:186,get:g=>iJ[g]||-1}],tokenPrec:6589});function oJ(g,I){let A=g.lineIndent(I.from),C=g.lineAt(g.pos,-1),t=C.from+C.text.length;return!/\S/.test(C.text)&&g.node.to<t+100&&!/\S/.test(g.state.sliceDoc(t,g.node.to))&&g.lineIndent(g.pos,-1)<=A||/^\s*(else:|elif |except |finally:)/.test(g.textAfter)&&g.lineIndent(g.pos,-1)>A?null:A+g.unit}const nJ=jY.define({parser:eJ.configure({props:[dX.add({Body:g=>{var I;return null!==(I=oJ(g,g.node))&&void 0!==I?I:g.continue()},IfStatement:g=>/^\s*(else:|elif )/.test(g.textAfter)?g.baseIndent:g.continue(),TryStatement:g=>/^\s*(except |finally:)/.test(g.textAfter)?g.baseIndent:g.continue(),"TupleExpression ComprehensionExpression ParamList ArgList ParenthesizedExpression":bX({closing:")"}),"DictionaryExpression DictionaryComprehensionExpression SetExpression SetComprehensionExpression":bX({closing:"}"}),"ArrayExpression ArrayComprehensionExpression":bX({closing:"]"}),Script:g=>{if(g.pos+/\s*/.exec(g.textAfter)[0].length>=g.node.to){let I=null;for(let A=g.node,C=A.to;A=A.lastChild,A&&A.to==C;)"Body"==A.type.name&&(I=A);if(I){let A=oJ(g,I);if(null!=A)return A}}return g.continue()}}),SX.add({"Body ArrayExpression DictionaryExpression":KX}),cH({"async '*' '**' FormatConversion":MH.modifier,"for while if elif else try except finally return raise break continue with pass assert await yield":MH.controlKeyword,"in not and or is del":MH.operatorKeyword,"import from def class global nonlocal lambda":MH.definitionKeyword,"with as print":MH.keyword,self:MH.self,Boolean:MH.bool,None:MH.null,VariableName:MH.variableName,"CallExpression/VariableName":MH.function(MH.variableName),"FunctionDefinition/VariableName":MH.function(MH.definition(MH.variableName)),"ClassDefinition/VariableName":MH.definition(MH.className),PropertyName:MH.propertyName,"CallExpression/MemberExpression/PropertyName":MH.function(MH.propertyName),Comment:MH.lineComment,Number:MH.number,String:MH.string,FormatString:MH.special(MH.string),UpdateOp:MH.updateOperator,ArithOp:MH.arithmeticOperator,BitOp:MH.bitwiseOperator,CompareOp:MH.compareOperator,AssignOp:MH.definitionOperator,Ellipsis:MH.punctuation,At:MH.meta,"( )":MH.paren,"[ ]":MH.squareBracket,"{ }":MH.brace,".":MH.derefOperator,", ;":MH.separator})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"'''",'"""']},commentTokens:{line:"#"},indentOnInput:/^\s*([\}\]\)]|else:|elif |except |finally:)$/}});const sJ={__proto__:null,nil:16,self:18,true:30,false:30,def:36,end:42},lJ=Rk.deserialize({version:13,states:"(|O]QPOOOOQO'#Cc'#CcOOQO'#Cb'#CbOOQO'#Ca'#CaOnQPO'#C`QOQPOOOsQPO'#CcOxQPO'#CvO!WQPO,58zOOQO,58},58}OOQO'#Do'#DoO!wQPO,59bO#RQPO'#CaOOQO'#Cj'#CjO%WQQO'#ClOOQO'#Ch'#ChOOQO'#Cg'#CgOOQO'#Cf'#CfOOQO1G.f1G.fO#dQQO'#CgO%bQPO1G.|OOQO'#Cm'#CmOOQO,59W,59WO%pQPO,59WO%uQPO,59ROOQO7+$h7+$hOOQO1G.r1G.rO&ZQPO'#CpO&iQPO'#CoO&wQPO'#CoO'PQPO'#CpO'UQPO'#CpO]QPO1G.mO'ZQPO,59[O'fQPO,59[O'tQPO,59ZOOQO,59Z,59ZO'yQPO,59[OOQO,59[,59[O(XQPO7+$XOOQO,59^,59^O(^QPO1G.vO(cQPO1G.vO(hQPO1G.vOOQO-E6p-E6pOOQO1G.u1G.uO(sQPO1G.vOOQO<<Gs<<GsOOQO7+$b7+$bO(xQPO7+$bO)WQPO7+$bO)]QPO7+$bP)bQPO'#CrO)gQPO<<G|OOQO<<G|<<G|O)lQPO<<G|O)zQPOAN=hO*PQPOAN=hOOQOG23SG23SO*UQPOG23SOOQOLD(nLD(n",stateData:"*Z~OiOSPOSQOS~OWQOXQOkUOlPOmUO~OnWO~OlXO~O!dYO!eYOgjXejX~O]_O__ObcOo]Op]Oq]Or]Os]Ot^O~P]Ogjaeja~P]OgZXnTX!dZX!eZXeZX~OleOueOveOweOxeOyeOzeO{eO|eO}eO!OeO!PeO!QeO!ReO!SeO!TeO!UeO!VeO!WeO!XeO!YeO!ZeO![eO!]eO!^eO!_eO~OkgOmgO~P#dO!dYO!eYOgjieji~OljO~OlkOxoO!TnO!`lO!ddP!edP~O!aqO!ddX!edX!bdX~OlkOxoO!TnO!bdP~O!dYO!eYO~OluO~OlvO~OlxOxyO!TzO~O!a{O!dda!eda!bda~O!b}O~O!a!OO!dda!eda!bda~Oe!PO~Ol!QO~Ol!RO~OlxOx!SO!T!TO~Ox!SO~O!a!VO!ddq!edq!bdq~Ol!WO~Ol!XO~OlxO~Ox!YO~O!a!ZO!ddy!edy!bdy~Ol![O~Ox!]O~Ol!^O~O",goto:"$V!dPPPP!e!o!u!}PP#T#W#ZP#^P#^#aP#g#jP#pPPP#vPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPP#|SVOpQaWRdZXSOWZpUROZpR[WXQOWZpRbWRaWR`WR_WQf^RhcRphQmhRslQrkR|rQTORwpQZVQidRtm",nodeNames:"‚ö† LineComment BlockComment Program AssignmentExpression LeftHandSide Variable VarName nil self Arg Primary Literal String Number BooleanLiteral Symbol FunctionName def ArgDeclaration ArgumentList end",maxTerm:67,skippedNodes:[0,1,2],repeatNodeCount:1,tokenData:"2^~RwXY#lYZ$aZ[#lpq#lrs$fst%Ytu%euv%jvw%owx%txy&cyz&hz{&m{|&z|}'X}!O'^!O!P'k!P!Q)P!Q!R)U!R![*Y![!]-r!]!^-w!^!_-|!_!`.k!`!a0m!b!c1S!c!}1X!}#O1j#Q#R1}#T#o1X#p#q2S#r#s2X$f$g#l#BY#BZ#l$IS$I_#l$JT$JU#l$KV$KW#l&FU&FV#l?HT?HU#l~#qYi~XY#lZ[#lpq#l$f$g#l#BY#BZ#l$IS$I_#l$JT$JU#l$KV$KW#l&FU&FV#l?HT?HU#l~$fO!e~~$kU]~OY$fZr$frs$}s#O$f#O#P%S#P~$f~%SO]~~%VPO~$f~%_QP~OY%YZ~%Y~%jOk~~%oO!V~~%tOx~~%yU]~OY%tZw%twx$}x#O%t#O#P&]#P~%t~&`PO~%t~&hO!`~~&mO!b~~&rP!T~z{&u~&zO!W~~'PP!R~!b!c'S~'XO![~~'^O!a~~'cP!S~!b!c'f~'kO!]~~'nQ!O!P't!Q!['y~'yOu~~(OSo~!Q!['y!g!h([#R#S'y#X#Y([~(_S{|(k}!O(k!Q![(t#R#S(t~(nQ!Q![(t#R#S(t~(yQo~!Q![(t#R#S(t~)UO!U~~)Z_o~!O!P'y!Q![*Y!d!e*y!f!g+p!g!h([!q!r,U!z!{,u#R#S*Y#U#V*y#W#X+p#X#Y([#]#^*t#c#d,U#f#g*t#l#m,u~*_Vo~!O!P'y!Q![*Y!g!h([#R#S*Y#X#Y([#]#^*t#f#g*t~*yOo~~*|R!Q!R+V!R!S+V#R#S+V~+[Ts~!Q!R+V!R!S+V#R#S+V#]#^+k#f#g+k~+pOs~~+sQ!Q![+y#R#S+y~,OQp~!Q![+y#R#S+y~,XQ!Q!Y,_#R#S,_~,dSr~!Q!Y,_#R#S,_#]#^,p#f#g,p~,uOr~~,xS!Q![-U!c!i-U#R#S-U#T#Z-U~-ZUq~!Q![-U!c!i-U#R#S-U#T#Z-U#]#^-m#f#g-m~-rOq~~-wOt~~-|O!d~~.RQ!P~!^!_.X!_!`.^~.^O!X~~.cP!Q~!`!a.f~.kOy~~.pRnP!_!`.y#U#V/W#r#s0hQ/OPzQ!_!`/RQ/WO{Q~/ZP#X#Y/^~/aP#Z#[/d~/gP#]#^/j~/mP#b#c/p~/sRO!_/p!_!`/|!`~/p~0PQ!_!`/|#X#Y0V~0YP#b#c0]~0`P#W#X0c~0hOQ~Q0mO|Q~0rQ}~!_!`0x!`!a0}~0}O!O~~1SO!Y~~1XOm~~1^Sl~!Q![1X!c!}1X#R#S1X#T#o1X~1mP#P#Q1p~1uP!^~!_!`1x~1}O!_~~2SOw~~2XOv~~2^O!Z~",tokenizers:[0,1],topRules:{Program:[0,3]},specialized:[{term:28,get:g=>sJ[g]||-1}],tokenPrec:0}),rJ=jY.define({parser:lJ.configure({props:[dX.add({Parenthesized:bX({closing:")"}),AttrSet:bX({closing:"}"}),List:bX({closing:"]"}),Let:yX({except:/^\s*in\b/})}),SX.add({AttrSet:KX,List:KX,Let(g){let I=g.getChild("let"),A=g.getChild("in");return I&&A?{from:I.to,to:A.from}:null}}),cH({"for while do if else switch begin rescue ensure return throw break continue default case":MH.controlKeyword,"def end":MH.definitionKeyword,VarName:MH.variableName,BooleanLiteral:MH.bool,String:MH.string,LineComment:MH.lineComment,BlockComment:MH.blockComment,Number:MH.integer,Symbol:MH.atom,Null:MH.null,"( )":MH.paren,"{ }":MH.brace,"[ ]":MH.squareBracket,"if then else unless":MH.controlKeyword,"import with let in rec builtins inherit assert or":MH.keyword,", ;":MH.separator})]}),languageData:{commentTokens:{line:"#",block:{open:"/*",close:"*/"}},closeBrackets:{brackets:["(","[","{","''",'"']},indentOnInput:/^\s*(in|\}|\)|\])$/}}),cJ=[TQ("let ${binds} in ${expression}",{label:"let",detail:"Let ... in statement",type:"keyword"}),TQ("with ${expression}; ${expression}",{label:"with",detail:"With statement",type:"keyword"})];function aJ(g){return g>=65&&g<=90||g>=97&&g<=122||g>=48&&g<=57}function dJ(g,I,A){for(let C=!1;;){if(g.next<0)return;if(g.next==I&&!C)return void g.advance();C=A&&!C&&92==g.next,g.advance()}}function hJ(g,I){for(;95==g.next||aJ(g.next);)null!=I&&(I+=String.fromCharCode(g.next)),g.advance();return I}function mJ(g,I){for(;;){if(46==g.next){if(I)break;I=!0}else if(g.next<48||g.next>57)break;g.advance()}if(69==g.next||101==g.next)for(g.advance(),43!=g.next&&45!=g.next||g.advance();g.next>=48&&g.next<=57;)g.advance()}function ZJ(g){for(;!(g.next<0||10==g.next);)g.advance()}function uJ(g,I){for(let A=0;A<I.length;A++)if(I.charCodeAt(A)==g)return!0;return!1}const GJ=" \t\r\n";function bJ(g,I,A){let C=Object.create(null);C.true=C.false=5,C.null=C.unknown=6;for(let t of g.split(" "))t&&(C[t]=20);for(let t of I.split(" "))t&&(C[t]=21);for(let t of(A||"").split(" "))t&&(C[t]=22);return C}const pJ={backslashEscapes:!1,hashComments:!1,spaceAfterDashes:!1,slashComments:!1,doubleQuotedStrings:!1,charSetCasts:!1,operatorChars:"*+-%<>!=&|~^/",specialVar:"?",identifierQuotes:'"',words:bJ("absolute action add after all allocate alter and any are as asc assertion at authorization before begin between blob both breadth by call cascade cascaded case cast catalog check close collate collation column commit condition connect connection constraint constraints constructor continue corresponding count create cross cube current current_date current_default_transform_group current_transform_group_for_type current_path current_role current_time current_timestamp current_user cursor cycle data day deallocate dec declare default deferrable deferred delete depth deref desc describe descriptor deterministic diagnostics disconnect distinct do domain drop dynamic each else elseif end end-exec equals escape except exception exec execute exists exit external fetch first for foreign found from free full function general get global go goto grant group grouping handle having hold hour identity if immediate in indicator initially inner inout input insert intersect into is isolation join key language last lateral leading leave left level like limit local localtime localtimestamp locator loop map match method minute modifies module month names natural nesting new next no none not of old on only open option or order ordinality out outer output overlaps pad parameter partial path prepare preserve primary prior privileges procedure public read reads recursive redo ref references referencing relative release repeat resignal restrict result return returns revoke right role rollback rollup routine row rows savepoint schema scroll search second section select session session_user set sets signal similar size some space specific specifictype sql sqlexception sqlstate sqlwarning start state static system_user table temporary then timezone_hour timezone_minute to trailing transaction translation treat trigger under undo union unique unnest until update usage user using value values view when whenever where while with without work write year zone ","array binary bit boolean char character clob date decimal double float int integer interval large national nchar nclob numeric object precision real smallint time timestamp varchar varying ")};function BJ(g){return new Zk((I=>{var A;let{next:C}=I;if(I.advance(),uJ(I.next,GJ)){for(;uJ(I.next,GJ);)I.advance();I.acceptToken(34)}else if(39==C||34==C&&g.doubleQuotedStrings)dJ(I,C,g.backslashEscapes),I.acceptToken(3);else if(35==C&&g.hashComments||47==C&&47==I.next&&g.slashComments)ZJ(I),I.acceptToken(1);else if(45!=C||45!=I.next||g.spaceAfterDashes&&32!=I.peek(2))if(47==C&&42==I.next){I.advance();for(let g=-1,A=1;!(I.next<0);)if(I.advance(),42==g&&47==I.next){if(A--,!A)break;g=-1}else 47==g&&42==I.next?(A++,g=-1):g=I.next;I.acceptToken(2)}else if(101!=C&&69!=C||39!=I.next)if(110!=C&&78!=C||39!=I.next||!g.charSetCasts){if(95==C&&g.charSetCasts)for(let i=0;;i++){if(39==I.next&&i>1){I.advance(),dJ(I,39,g.backslashEscapes),I.acceptToken(3);break}if(!aJ(I.next))break;I.advance()}else if(40==C)I.acceptToken(7);else if(41==C)I.acceptToken(8);else if(123==C)I.acceptToken(9);else if(125==C)I.acceptToken(10);else if(91==C)I.acceptToken(11);else if(93==C)I.acceptToken(12);else if(59==C)I.acceptToken(13);else if(48==C&&(98==I.next||66==I.next)||(98==C||66==C)&&39==I.next){let g=39==I.next;for(I.advance();48==I.next||49==I.next;)I.advance();g&&39==I.next&&I.advance(),I.acceptToken(4)}else if(48==C&&(120==I.next||88==I.next)||(120==C||88==C)&&39==I.next){let g=39==I.next;for(I.advance();(t=I.next)>=48&&t<=57||t>=97&&t<=102||t>=65&&t<=70;)I.advance();g&&39==I.next&&I.advance(),I.acceptToken(4)}else if(46==C&&I.next>=48&&I.next<=57)mJ(I,!0),I.acceptToken(4);else if(46==C)I.acceptToken(14);else if(C>=48&&C<=57)mJ(I,!1),I.acceptToken(4);else if(uJ(C,g.operatorChars)){for(;uJ(I.next,g.operatorChars);)I.advance();I.acceptToken(15)}else if(uJ(C,g.specialVar))I.next==C&&I.advance(),function(g){if(39==g.next||34==g.next||96==g.next){let I=g.next;g.advance(),dJ(g,I,!1)}else hJ(g)}(I),I.acceptToken(17);else if(uJ(C,g.identifierQuotes))dJ(I,C,!1),I.acceptToken(19);else if(58==C||44==C)I.acceptToken(16);else if(aJ(C)){let t=hJ(I,String.fromCharCode(C));I.acceptToken(null!==(A=g.words[t.toLowerCase()])&&void 0!==A?A:18)}}else I.advance(),dJ(I,39,g.backslashEscapes),I.acceptToken(3);else I.advance(),dJ(I,39,!0);else ZJ(I),I.acceptToken(1);var t}))}const yJ=BJ(pJ);function wJ(g){let I=g.cursor.moveTo(g.from,-1);for(;/Comment/.test(I.name);)I.moveTo(I.from,-1);return I.node}function WJ(g){let I=/^[`'"](.*)[`'"]$/.exec(g);return I?I[1]:g}const SJ=/^\w*$/,KJ=/^[`'"]?\w*[`'"]?$/;function fJ(g,I,A){let C=Object.create(null);for(let i in g)C[i]=g[i].map((g=>"string"==typeof g?{label:g,type:"property"}:g));let t=(I||Object.keys(C).map((g=>({label:g,type:"type"})))).concat(A&&C[A]||[]);return g=>{let{parent:I,from:A,quoted:i,empty:e}=function(g,I){let A=_Y(g).resolveInner(I,-1),C=!1;if("Identifier"==A.name||"QuotedIdentifier"==A.name){C=!1;let I=null,t=wJ(A);if(t&&"."==t.name){let A=wJ(t);(A&&"Identifier"==A.name||"QuotedIdentifier"==A.name)&&(I=WJ(g.sliceDoc(A.from,A.to).toLowerCase()))}return{parent:I,from:A.from,quoted:"QuotedIdentifier"==A.name?g.sliceDoc(A.from,A.from+1):null}}if("."==A.name){let C=wJ(A);if(C&&"Identifier"==C.name||"QuotedIdentifier"==C.name)return{parent:WJ(g.sliceDoc(C.from,C.to).toLowerCase()),from:I,quoted:null}}else C=!0;return{parent:null,from:I,quoted:null,empty:C}}(g.state,g.pos);if(e&&!g.explicit)return null;let o=t;if(I){let g=C[I];if(!g)return null;o=g}return{from:A,to:i&&g.state.sliceDoc(g.pos,g.pos+1)==i?g.pos+1:void 0,options:(n=i,s=o,n?s.map((g=>Object.assign(Object.assign({},g),{label:n+g.label+n,apply:void 0}))):s),span:i?KJ:SJ};var n,s}}function YJ(g,I){return gQ(["QuotedIdentifier","SpecialVar","String","LineComment","BlockComment","."],qR(Object.keys(g).map((A=>({label:I?A.toUpperCase():A,type:21==g[A]?"type":20==g[A]?"keyword":"variable",boost:-1})))))}let XJ=Rk.deserialize({version:13,states:"%dQ]QQOOO#kQRO'#DQO#rQQO'#CuO%RQQO'#CvO%YQQO'#CwO%aQQO'#CxOOQQ'#DQ'#DQOOQQ'#C{'#C{O&lQRO'#CyOOQQ'#Ct'#CtOOQQ'#Cz'#CzQ]QQOOQOQQOOO&vQQO,59aO'RQQO,59aO'WQQO'#DQOOQQ,59b,59bO'eQQO,59bOOQQ,59c,59cO'lQQO,59cOOQQ,59d,59dO'sQQO,59dOOQQ-E6y-E6yOOQQ,59`,59`OOQQ-E6x-E6xOOQQ'#C|'#C|OOQQ1G.{1G.{O&vQQO1G.{OOQQ1G.|1G.|OOQQ1G.}1G.}OOQQ1G/O1G/OP'zQQO'#C{POQQ-E6z-E6zOOQQ7+$g7+$g",stateData:"(R~OrOSPOSQOS~ORUOSUOTUOUUOVROXSOZTO]XO^QO_UO`UOaPObPOcPOdUOeUOfUO~O^]ORtXStXTtXUtXVtXXtXZtX]tX_tX`tXatXbtXctXdtXetXftX~OqtX~P!dOa^Ob^Oc^O~ORUOSUOTUOUUOVROXSOZTO^QO_UO`UOa_Ob_Oc_OdUOeUOfUO~OW`O~P#}OYbO~P#}O[dO~P#}ORUOSUOTUOUUOVROXSOZTO^QO_UO`UOaPObPOcPOdUOeUOfUO~O]gOqmX~P%hOaiObiOciO~O^kO~OWtXYtX[tX~P!dOWlO~P#}OYmO~P#}O[nO~P#}O]gO~P#}O",goto:"#YuPPPPPPPPPPPPPPPPPPPPPPPPvzzzz!W![!b!vPPP!|TYOZeUORSTWZaceoT[OZQZORhZSWOZQaRQcSQeTZfWaceoQj]RqkeVORSTWZaceo",nodeNames:"‚ö† LineComment BlockComment String Number Bool Null ( ) [ ] { } ; . Operator Punctuation SpecialVar Identifier QuotedIdentifier Keyword Type Builtin Script Statement CompositeIdentifier Parens Braces Brackets Statement",maxTerm:36,skippedNodes:[0,1,2],repeatNodeCount:3,tokenData:"RORO",tokenizers:[0,yJ],topRules:{Script:[0,23]},tokenPrec:0}).configure({props:[dX.add({Statement:yX()}),SX.add({Statement:g=>({from:g.firstChild.to,to:g.to}),BlockComment:g=>({from:g.from+2,to:g.to-2})}),cH({Keyword:MH.keyword,Type:MH.typeName,Builtin:MH.standard(MH.name),Bool:MH.bool,Null:MH.null,Number:MH.number,String:MH.string,Identifier:MH.name,QuotedIdentifier:MH.special(MH.string),SpecialVar:MH.special(MH.name),LineComment:MH.lineComment,BlockComment:MH.blockComment,Operator:MH.operator,"Semi Punctuation":MH.punctuation,"( )":MH.paren,"{ }":MH.brace,"[ ]":MH.squareBracket})]});class VJ{constructor(g,I){this.dialect=g,this.language=I}get extension(){return this.language.extension}static define(g){let I=function(g,I,A,C){let t={};for(let i in pJ)t[i]=(g.hasOwnProperty(i)?g:pJ)[i];return I&&(t.words=bJ(I,A||"",C)),t}(g,g.keywords,g.types,g.builtin),A=jY.define({parser:XJ.configure({tokenizers:[{from:yJ,to:BJ(I)}]}),languageData:{commentTokens:{line:"--",block:{open:"/*",close:"*/"}},closeBrackets:{brackets:["(","[","{","'",'"',"`"]}}});return new VJ(I,A)}}function OJ(g,I=!1){return g.language.data.of({autocomplete:YJ(g.dialect.words,I)})}function RJ(g){return g.schema?(g.dialect||HJ).language.data.of({autocomplete:fJ(g.schema,g.tables,g.defaultTable)}):[]}function QJ(g={}){let I=g.dialect||HJ;return new oX(I.language,[RJ(g),OJ(I,!!g.upperCaseKeywords)])}const HJ=VJ.define({}),kJ=new Zk((g=>{if(76==g.next||85==g.next?g.advance():117==g.next&&(g.advance(),56==g.next&&g.advance()),82!=g.next)return;if(g.advance(),34!=g.next)return;g.advance();let I="";for(;40!=g.next;){if(32==g.next||g.next<=13||41==g.next)return;I+=String.fromCharCode(g.next),g.advance()}for(g.advance();;){if(g.next<0)return g.acceptToken(1);if(41==g.next){let A=!0;for(let C=0;A&&C<I.length;C++)g.peek(C+1)!=I.charCodeAt(C)&&(A=!1);if(A&&34==g.peek(I.length+1))return g.acceptToken(1,2+I.length)}g.advance()}})),JJ=new Zk((g=>{if(62==g.next)62==g.peek(1)&&g.acceptToken(2,1);else{let I=!1,A=0;for(;;A++){if(g.next>=65&&g.next<=90)I=!0;else{if(g.next>=97&&g.next<=122)return;if(95!=g.next&&!(g.next>=48&&g.next<=57))break}g.advance()}I&&A>1&&g.acceptToken(3)}}),{extend:!0}),vJ={__proto__:null,bool:34,char:34,int:34,float:34,double:34,void:34,size_t:34,ssize_t:34,intptr_t:34,uintptr_t:34,charptr_t:34,int8_t:34,int16_t:34,int32_t:34,int64_t:34,uint8_t:34,uint16_t:34,uint32_t:34,uint64_t:34,char8_t:34,char16_t:34,char32_t:34,char64_t:34,const:68,volatile:70,restrict:72,_Atomic:74,mutable:76,constexpr:78,struct:82,__declspec:86,final:90,override:90,public:94,private:94,protected:94,virtual:154,extern:156,static:158,register:160,inline:162,__attribute__:166,__based:172,__restrict:174,__uptr:174,__sptr:174,_unaligned:174,__unaligned:174,noexcept:188,throw:192,template:248,typename:254,class:256,using:266,__cdecl:274,__clrcall:274,__stdcall:274,__fastcall:274,__thiscall:274,__vectorcall:274,case:284,default:286,if:298,else:304,switch:308,do:312,while:314,for:322,return:326,break:330,continue:334,goto:338,typedef:342,try:356,catch:360,namespace:366,static_assert:372,explicit:382,delete:392,operator:400,friend:420,union:422,enum:430,signed:434,unsigned:434,long:434,short:434,decltype:446,auto:448,sizeof:480,TRUE:734,true:734,FALSE:736,false:736,NULL:488,new:494,nullptr:508,this:510},DJ={__proto__:null,"<":139},MJ={__proto__:null,">":143},NJ={__proto__:null,operator:398,new:492,delete:500},EJ=Rk.deserialize({version:13,states:"$ArQ!QQVOOP&tOUOOO'fOWO'#CdO+PQUO'#CgO+ZQUO'#FdO-SQbO'#CwO-ZQUO'#CwO.yQUO'#JZO/QQUO'#CvO/]OpO'#DyO/eQ!dO'#DbOOQQ'#IV'#IVO/pQUO'#JxO1aQUO'#IZOOQQ'#IZ'#IZO4fQUO'#JlO7gQUO'#JlO9nQVO'#EZO:OQUO'#EZO:TQUOOO:]QVO'#EhO<pQVO'#EiO<}QUO'#EiO?iQUO'#JpO?sQUO'#JpO?}QVO'#HrOOQQ'#Jp'#JpOAnQUO'#JpOCsQUO'#JpODQQUO'#FWODrQUO'#FbOOQR'#Fd'#FdO,lQUO'#FdOOQR'#J|'#J|OOQR'#J{'#J{ODwQVO'#JQOFrQUO'#KPOGPQUO'#KPOOQR'#Ga'#GaOGtQUO'#KROOQR'#Gi'#GiOOQR'#Gm'#GmOOQR'#Jz'#JzOOQR'#Ij'#IjQ!QQVOOOHPQVO'#F[OOQQ'#Iq'#IqOHWQUO'#G|OOQQ'#JZ'#JZOKoQUO'#JZOL]QUO'#JQONYQVO'#H`ONYQVO'#HcOOQQ'#Hh'#HhOOQQ'#Hi'#HiO!!UQUO'#HqOOQQ'#JQ'#JQO!$YQUO'#JZOOQR'#JY'#JYO!$aQUO'#DWO!$fQUO'#JmOOQQ'#Jm'#JmO!&uQUO'#EQO!&zQUO'#ETO!'PQUO'#G[O!'[QUO'#FfO!'dQUO'#FkO!'iQVO'#FmO!'dQUO'#FqO!*RQUO'#FrO!*WQVO'#FtO!*bQUO'#FvO!*gQUO'#FxO!*lQUO'#FzO!*qQUO'#F|O!+xQVO'#F_O!-cQUO'#F_O!-hQUO'#GTO!-mQVO'#GXO!-tQUO'#GYO!-|QUO'#G]O!0OQUO'#G`O!0]QUO'#GbO!1QQUO'#GjO4fQUO'#FYO!1hQUO'#DUO!1|QUO'#GyO!2bQUO'#GzO!2sQUO'#HQO!3XQUO'#HRO!3|QUO'#HSO!5iQVO'#HeO!5sQUO'#HkO!6kQVO'#HoP!8U{#tO'#CbP!-w{#tO'#CbP!8a{&jO'#CbP!-w{#tO'#CbP!8f{#tO'#CbP!8kOSO'#IPPOOO)CDn)CDnOOOO'#IR'#IRO!8vOWO,59OOOQR,59O,59OO!+xQVO,59UOOQQ,59W,59WONYQVO,5<POOQR,5<O,5<OO!9RQUO,59YONYQVO,5=uOOQR'#H]'#H]OOQR'#H^'#H^OOQR'#H_'#H_ONYQVO,5=vONYQVO,5=vONYQVO,5=vONYQVO,5=vONYQVO,5=vONYQVO,5=vONYQVO,5=vONYQVO,5=vONYQVO,5=vO!;gQVO,5=}OOQQ,5>_,5>_O!<dQVO'#ChO!?|QUO'#CyOOQQ,59c,59cOOQQ,59b,59bOOQQ,5;U,5;UO!1QQUO,5=UO!5sQUO,5>VO!AqQVO,5>ZO!AxQbO,59cO!BWQVO'#EwOOQQ,5>R,5>RONYQVO,59VO!BhO`O,5:eO!BmQbO'#DcO!COQbO'#JaO!C^QbO,59|O!E`QUO'#CsO!GOQbO'#CwO!GTQUO'#CvO!JhQUO'#JZOOQQ-E<T-E<TO!JoQUO,5@dODQQUO,5;rO!JvQUO'#JZO4fQUO,5;tOOQQ-E<X-E<XO!KQQUO,5@WO!KQQUO,5@WOOQR,5@d,5@dO# QQUO'#CgO#!xQUO,5=tO##fQbO'#CwO##wQUO'#EjO##|QUO'#HgO#$UQUO'#CvOOQR'#IS'#ISO#$aQUO,5:uO#$wQUO,5:uO#%sQUO,5:uO#&QQUO'#CtO!&zQUO'#ClOOQQ'#I['#I[O#$wQUO,5:uO#'^QUO,5:vO#)bQVO,5;RO#)lQUO'#EXO#+^QUO,5<[O#,`QUO'#JZO!*qQUO'#C}O#,gQUO,5;SO#,rQUO,5<[O#,wQUO'#C}O#-qQUO,5>OO#.XQUO,5;TO#.fQbO'#CwO#$wQUO'#EZO<}QUO'#EhO#.qQUO'#JpO!-wQUO'#EnO#/fQUO'#CtOOQQ,5;X,5;XO#2QQVO'#C{O#3oQUO'#K]O#5jQUO'#JsO#5qQUO'#JQO#6UQUO,5;YO#6ZQVO'#FpONYQVO'#HYO#8pQVO,5>^O?}QVO'#HrO#8zQUO,5>^O#8}QUO,5>^OOQQ,5>^,5>^O#9SQUO'#GdOOQR,5@k,5@kO#9[QUO,5@kO#9dQUO'#GfO#9lQUO,5;tO#:QQUO'#JyO#:YQUO,5;rO!'iQVO,5;|OOQR'#In'#InO#:_QVO,5<yO#<eQbO'#CwO#<sQUO'#EjOAnQUO,5@kOOQQ'#Io'#IoOOQQ-E<m-E<mOGPQUO,5@kO#9[QUO,5@mO#<xQUO,5@mOOQR,5@m,5@mOOQR,5@n,5@nO#=TQVO,5@nOOQR-E<h-E<hO#>qQVO,5;vOOQR,5;v,5;vOOQQ-E<o-E<oOOQQ,5=h,5=hOOQQ,59`,59`O#>xQUO,5=zO#@xQUO'#JQO#BdQUO,5=}O#CQQUO'#EbO#DoQUO'#EcO#D|QUO'#EcO#EUQVO'#EdO#E`QUO'#EeO#E|QUO'#EfOOQQ'#Jr'#JrO#FdQUO,5>]OOQQ,5>],5>]O!-wQUO,59rO#FoQUO,5;wO!&zQUO,5:lOOQQ,5:o,5:oO#F|QUO,5;pO#GUQUO,5<vO#GZQUO,5<vO#J_QVO'#FhO!'iQVO,5<QO!'dQUO,5<QO!-hQUO,5<VO#JfQUO,5<XO!'iQVO,5<]O#JkQVO,5<^O#MjQUO,5<`OOQR,5<`,5<`O#MqQUO,5<`OOQR,5<b,5<bOOQR,5<d,5<dOOQQ'#Fc'#FcO#MvQUO,5<fO!*qQUO,5<hO#M{QUO,5<hO$ kQUO,5;yO$ rQVO,5;yO$#wQUO,5<oO$%^QUO,5<sOOQR,5<s,5<sOOQQ'#Cg'#CgO$%eQVO'#F^OOQR,5<t,5<tO$%lQUO,5<tONYQVO,5<wO$'UQUO'#JZO$']QUO'#JlO$'|QUO,5<zO$)xQUO'#E}O<}QUO,5<zO$*SQUO,5;gONYQVO,5<|O$*sQUO,5=UODQQUO,5;tOOQQ'#J['#J[O$.^QUO'#J[O$.nQUO'#D[O$.yQUO'#D_O$2PQUO,59pOOQQ,59p,59pO$2jQUO,59pO$2oQUO,59pO$2wQUO,59pO$4yQUO,5=eOOQQ,5=e,5=eO$2jQUO,5=eO$2oQUO,5=eO$5dQUO,5=eO$5uQUO'#HOO$7hQUO,5=fOOQQ,5=f,5=fO$8bQUO,5=fO$:mQUO,5=lOOQQ,5=l,5=lO$2jQUO,5=lO$2oQUO,5=lO$:wQUO,5=lOOQQ,5=m,5=mONYQVO,5=nO$<dQUO,5>PO#6ZQVO'#FpOOQQ,5>P,5>PO$=ZQUO,5>PO$=`QUO,5>VO!5vQUO,5>VO$?cQUO,5>ZO$ApQVO,5>ZP$Aw{#tO,58|P$A|{#tO,58|P$BU{&jO,58|POOO,58|,58|POOO,5>k,5>kP$B^OSO,5>kOOOO-E<P-E<POOQR1G.j1G.jO$BfQUO1G.pO$BmQUO1G1kOOQQ1G1k1G1kO$BwQUO'#CoO$ETQbO'#CwO$E`QUO'#CrO$EeQUO1G.tO#/fQUO'#CqOOQQ1G.t1G.tO$GhQUO1G3aO$IiQUO1G3bO$KdQUO1G3bO$MkQUO1G3bO$MrQUO1G3bO% sQUO1G3bO% zQUO1G3bO%#uQUO1G3bO%$SQUO1G3bO%$aQUO1G3bO%%rQUO1G3bO%&iQUO'#JPO%&sQUO'#JPO%&{QUO,59SO$*sQUO1G2pO%)QQUO1G3qO!5vQUO1G3qO%)XQUO1G3uO%)xQVO1G3uOOQQ1G.}1G.}OOQQ1G.|1G.|OOQQ1G0p1G0pO!1QQUO1G2pO%*PQUO'#JuO?}QVO'#HrO%*ZQUO'#EzOOQQ'#If'#IfO%*`QUO'#ExO%*kQUO'#JuO%*sQUO,5;cO%*xQUO1G.qOOQR1G0P1G0PO%+oQ!dO'#IWO%+tQbO,59}O%.VQ!eO'#DeO%.^Q!dO'#IYO%.cQbO,5?{O%.cQbO,5?{OOQQ1G/h1G/hO%.nQbO1G/hO%0pQUO'#CyO!GOQbO,59cOOQR1G6O1G6OO#9lQUO1G1`O%2]QUO1G1^ODQQUO1G1`O%3YQUO1G5rO%4iQbO,59cOOQR-E<Q-E<QO%5VQUO1G0aO#$aQUO1G0aOOQQ-E<Y-E<YO#$wQUO1G0aOOQQ'#I]'#I]O%6kQUO1G0bO%7mQUO'#EaOOQQ'#I^'#I^O%5dQUO1G0bO%7}QUO'#E]O%9bQUO'#E_O%9gQUO1G0mO%9nQVO1G0mOOQQ1G0m1G0mO%9xQVO1G0mO#FuQUO'#EYO%:nQUO'#EYO%;XQUO'#JoO%;aQUO,5:sOOQQ1G1v1G1vO%;fQUO,59iOOQQ1G0n1G0nO%;fQUO,59iO%<`QUO,59iO%<zQVO1G3jO%=RQUO'#J[O%=YQUO'#JsO%=bQUO'#KVO%=oQUO'#JXO%=}QUO'#JWO%>YQUO,59gONYQVO'#ItO%>bQUO,5@wO!-wQUO'#IbO%>jQUO,5@_OOQQ1G0t1G0tOOQQ1G3x1G3xONYQVO1G3xO%>rQUO'#GeO%>zQUO'#KQOOQQ,5=O,5=OOOQR1G6V1G6VO%?VQUO,5=QO%?[QUO,5=RO%?aQVO'#EXO%FcQVO'#F[O%<zQVO,5;sOOQQ,5;s,5;sODQQUO'#IiO%FsQUO,5@eOOQR1G1`1G1`OOQR1G1^1G1^OOQR1G1h1G1hOOQR-E<l-E<lO#9[QUO1G6VOAnQUO1G6VO#9[QUO1G6XOOQR1G6X1G6XOOQR1G6Y1G6YO#=TQVO1G6YO%F{QUO1G6YO%GSQVO,5=ROOQR1G1b1G1bOOQQ'#I`'#I`O%GZQUO,5:|O%HlQUO,5:|OOQQ'#Ia'#IaO%HsQUO,5:}OOQQ,5:},5:}O%HsQUO,5:}O%IqQVO,5;OO%I{QUO,5;OO%IqQVO,5;OOOQQ,5;O,5;OO%JSQVO,5;OO%JZQUO,5;PO%J}QUO,5;QOOQQ1G3w1G3wO%KUQUO1G/^O/pQUO'#FWOOQR1G1c1G1cO%KZQUO1G0WO!*qQUO1G1[OOQR1G2b1G2bO%K`QUO1G2bO%KeQUO,5<SO#FuQUO'#FWODQQUO'#FWO%KlQUO,5<SONYQVO,5<SO%KtQUO,5<SO%KyQVO1G1lO!'iQVO1G1lOOQR1G1q1G1qO&!vQUO1G1sOOQR1G1w1G1wO&!{QUO1G1xO&#SQUO1G2YO&#tQVO1G1xO&#{QUO1G1xOOQR1G1z1G1zOOQR1G2Q1G2QO#M{QUO1G2SOOQQ'#Cu'#CuO&$QQUO'#GOO&$uQUO'#GOO&$zQUO'#J}O#M{QUO'#GROOQQ'#KO'#KOO&%YQUO1G2SO&%_QVO1G1eODQQUO'#FWOOQR'#Ik'#IkO&%_QVO1G1eO&'dQUO'#FrOOQR'#Im'#ImO&'iQVO1G2ZO&,iQUO'#GVOOQR1G2_1G2_OOQR,5;x,5;xO&,nQVO,5;xOOQR1G2`1G2`O&,uQUO1G2cOOQR1G2f1G2fOOQQ'#Jw'#JwO&-PQUO'#JvO&-[QUO,5;iO&-dQUO'#FOO&-wQUO'#FOO&.[QUO'#FTO&.aQUO1G2fO&.lQUO'#JZOGPQUO'#KPO#9[QUO'#KROOQR'#Gn'#GnOOQR'#Go'#GoO&.vQUO'#FUO&.[QUO'#E{OOQR1G1R1G1RO&.{QUO1G2hO&/SQUO1G2pO&/eQUO1G1`O&/pQUO'#J]OOQQ,59v,59vO&/{QUO'#J]O&0TQUO'#DaO&1QQUO'#JpO&1yQUO'#DaOGPQUO'#KPOOQQ'#Gq'#GqOOQQ'#Gs'#GsOOQQ'#Gt'#GtOOQQ'#J_'#J_OOQQ'#IU'#IUO&2TQUO,59yOOQQ,59y,59yO&3jQUO'#DaO&4|QUO'#GuO&5yQUO'#GxOOQQ1G/[1G/[O$2jQUO1G/[O$2oQUO1G/[O&7oQUO1G/[OOQQ1G3P1G3PO$2jQUO1G3PO$2oQUO1G3PO&9yQUO1G3PO&:dQUO'#HPO&:oQUO'#KUO&:wQUO,5=jO&:|QUO'#KTOOQQ1G3Q1G3QO&;[QUO1G3QO&=hQUO1G3QOOQQ1G3W1G3WO$2jQUO1G3WO$2oQUO1G3WO&?oQUO1G3WO&?yQUO1G3YO&@QQUO,5@tO!-wQUO1G3kONYQVO'#HnOOQQ1G3q1G3qO&@VQUO1G3qO&@^QVO1G3uPOOO1G.h1G.hP&A}{#tO1G.hP&BSQUO'#K_P&B_{&jO1G.hPOOO1G4V1G4VONYQVO7+$[O&BdQUO'#CyOOQQ,59^,59^O&BoQbO,59cOOQQ,59],59]OOQQ7+({7+({O%<zQVO'#IuO&BzQUO,5?kOOQQ1G.n1G.nO&CSQUO7+([OOQQ7+)]7+)]O&EeQUO7+)]O&ElQUO7+)]O&@^QVO7+)aO$*sQUO7+([O&EsQVO'#IgO&FWQUO,5@aO&F`QUO,5;eOOQQ'#Co'#CoOOQQ,5;f,5;fONYQVO'#EyOOQQ-E<d-E<dO%<zQVO,5;dOOQQ1G0}1G0}OOQQ,5>r,5>rOOQQ-E<U-E<UOOQR'#Dk'#DkOOQR'#Dm'#DmOOQR'#Dp'#DpO&FgQ!eO'#JbO&FnQ,XO'#JbO&FuQ!eO'#JbOOQR'#Jb'#JbOOQR'#IX'#IXO&F|Q!eO,5:POOQQ,5:P,5:PO&GTQbO,5>tOOQQ-E<W-E<WO&GcQbO1G5gOOQQ7+%S7+%SOOQR7+&z7+&zOOQR7+&x7+&xO&/eQUO7+&zO&HPQUO7+%{O#$aQUO7+%{OOQQ-E<Z-E<ZO&I_QUO7+%|O&JQQUO,5:{O&KWQUO,5:{OOQQ-E<[-E<[O&K{QVO,5:wO&LSQUO,5:yOOQQ7+&X7+&XO&LZQUO7+&XO&LbQVO7+&XO&MZQUO,5:tO&NrQUO'#EbO' eQUO,5:tO#EUQVO'#EdO' lQUO'#EeO'#UQUO'#EfO'#lQUO,5:tONYQVO,5;ZO'#vQUO'#EqOOQQ,5;[,5;[O'$XQUO'#IcO'$cQUO,5@ZOOQQ1G0_1G0_O'$kQUO1G/TO'%eQUO1G/TO'&PQUO7+)UOOQQ7+)X7+)XOOQQ,5=q,5=qO#/kQVO'#IsO'&pQUO,5?rOOQQ1G/R1G/RO'&{QUO,5?`OOQQ-E<r-E<rOOQQ,5>|,5>|OOQQ-E<`-E<`O''VQUO7+)dO''[QUO,5=PO#9SQUO'#IpO''jQUO,5@lOOQR1G2l1G2lOOQR1G2m1G2mO''uQUO'#JuO?}QVO'#HrO'(SQUO1G1_OOQQ1G1_1G1_O'(^QUO,5?TOOQQ,5?T,5?TOOQQ-E<g-E<gOOQR7++q7++qO#9[QUO7++qOOQR7++s7++sO'(rQUO7++tOOQR7++t7++tOOQQ-E<^-E<^O')bQUO1G0hOOQQ-E<_-E<_OOQQ1G0i1G0iO'*^QUO1G0iO'*kQUO1G0jO'*rQVO1G0jOOQQ1G0j1G0jO'*|QVO1G0jOOQQ1G0k1G0kOOQQ7+$x7+$xOOQQ7+%r7+%rO'+TQUO7+&vOOQR7+'|7+'|OOQR1G1n1G1nODQQUO,5;rO'+kQUO,5<TO'+rQUO1G1nO'+yQUO1G1nO!'iQVO7+'WO',OQVO7+'WONYQVO'#FpO'0{QUO7+'_O'1QQVO7+'dO'1XQUO7+'tO'1cQUO7+'dO'1jQVO7+'dO'1qQUO7+'nO'1vQUO,5<jO&$QQUO,5<jO'2hQUO,5<jO&$QQUO,5<jOOQQ,5<k,5<kO'2yQVO,5<lO#M{QUO'#IlO'3TQUO,5@iO'3]QUO,5<mOOQR7+'n7+'nO'3hQVO7+'PO'1[QUO'#JyOOQR-E<i-E<iO#JkQVO,5<^OOQR-E<k-E<kO!-hQUO,5<qOOQR1G1d1G1dO'5mQUO7+'}O'5rQVO7+'}O$(XQUO'#IhO'5zQUO,5@bOOQQ1G1T1G1TO'6VQUO,5;jO'6pQUO,5;mO'7eQUO,5;nO'7sQUO,5;jO'9vQUO,5;oOOQR7+(Q7+(QO#GPQUO,5;pOOQQ7+(S7+(SO':OQUO'#ITO':ZQUO,5?wO':ZQUO,5?wO':cQUO,5?wO':nQUO,59{O':xQUO,59{OOQQ,5=^,5=^O';oQUO'#ESO'<pQUO'#ESO'=WQUO,59{O'=bQUO'#EtO'=|QUO'#EuOOQQ'#Jn'#JnO'>hQUO'#JnONYQVO'#EvOOQQ,59{,59{O'?VQUO,59{O%<zQVO,59{O'?[QUO,5@kOOQQ-E<S-E<SOOQQ1G/e1G/eO'?cQUO'#J[O'?mQUO'#J[OOQQ,5=a,5=aO'?zQUO,5=aO!2sQUO,5=aO!1hQUO,5=aO!1|QUO,5=aOOQQ,5=d,5=dOOQQ7+$v7+$vO$2jQUO7+$vO$2oQUO7+$vOOQQ7+(k7+(kO$2jQUO7+(kO$2oQUO7+(kONYQVO,5=kO'@PQUO'#IrO'@[QUO,5@pOOQQ1G3U1G3UO'@dQUO,5@oOOQQ,5@o,5@oOOQQ7+(l7+(lO'CxQUO7+(lOOQQ7+(r7+(rO$2jQUO7+(rO$2oQUO7+(rOOQQ7+(t7+(tO'HbQVO1G6`O'I_QUO7+)VO'IdQUO,5>YO'IkQUO7+)aPOOO7+$S7+$SP'J[QUO'#K`P'JdQUO,5@yP'Ji{#tO7+$SO'JnQUO<<GvOOQQ1G.x1G.xO'K_QUO,5?aOOQQ,5?a,5?aOOQQ-E<s-E<sOOQQ<<Lw<<LwO'KiQUO<<LwO'MlQUO<<L{O'N]QUO<<KvO'NnQUO,5?ROOQQ,5?R,5?ROOQQ-E<e-E<eOOQQ1G1P1G1PO'NxQUO,5;eO( PQUO1G1OOOQQ1G1O1G1OOOQR,5?|,5?|O( ZQ!eO,5?|O( bQ,XO,5?|O( iQ!eO,5?|OOQR-E<V-E<VOOQQ1G/k1G/kO( pQ!eO'#DzOOQQ1G4`1G4`OOQR<<Jf<<JfO(!YQUO<<IgOOQQ'#Ec'#EcO(#qQUO1G0gO(#{QUO1G0gO($`QUO1G0cOOQQ1G0c1G0cO($gQUO'#JqO($oQUO1G0eOOQQ<<Is<<IsO(%VQUO1G0`O(%^QUO'#EfO(%nQUO1G0`O(%uQUO'#ISOOQQ,5;^,5;^ONYQVO1G0uO('VQUO1G0uOOQQ,5;],5;]OOQQ,5>},5>}OOQQ-E<a-E<aO('gQUO7+$oO((RQUO'#KXO((`QUO'#KWOOQQ,5?_,5?_OOQQ-E<q-E<qOOQQ<<MO<<MOOOQQ1G2k1G2kOOQQ,5?[,5?[OOQQ-E<n-E<nO&EsQVO,5<POOQR<= ]<= ]OOQR<= `<= `OOQQ7+&T7+&TOOQQ7+&U7+&UO((nQUO7+&UO((uQVO7+&UOOQR<<Jb<<JbO%<zQVO1G1oO((|QUO1G1oOOQR7+'Y7+'YOOQR<<Jr<<JrO!'iQVO<<JrOOQR<<Jy<<JyO()XQUO<<KOO()`QVO<<KOO%<zQVO<<K`O()gQUO<<KOO!'iQVO<<KOO()nQUO<<KOOOQR<<KY<<KYO()sQUO1G2UO'1vQUO1G2UO&$QQUO1G2UO(*UQUO1G2WO(*]QVO1G2WOOQQ1G2W1G2WO(*gQVO1G2WO(*nQUO,5?WOOQQ-E<j-E<jOOQQ1G2X1G2XOOQR1G2]1G2]OOQR<<Ki<<KiO(*|QVO<<KiO(+XQUO<<KiOOQQ,5?S,5?SOOQQ-E<f-E<fO'6pQUO1G1XOOQQ1G1X1G1XOOQQ1G1Y1G1YO(+^QUO'#FOOOQQ1G1Z1G1ZO(+rQUO,5>oO&/{QUO,5>oOOQQ-E<R-E<RO(+}QUO1G5cO(+}QUO1G5cO(,VQUO1G/gOOQQ1G/g1G/gO(,aQUO1G/gO%<zQVO1G/gO(,fQUO1G/gO(,pQUO,5:nO';oQUO,5:nO(-WQUO,5:nO';oQUO,5:nO(.dQUO,5:rO(.zQVO,5;_O'=|QUO'#IeO(/UQUO1G/gO(/gQVO1G/gOOQQ1G2v1G2vO(/nQUO,5;`O(/yQUO,5;aO(0bQUO,5;bO(0iQUO1G/gOOQQ1G2x1G2xOOQQ1G2{1G2{O(2ZQUO1G2{O(2hQUO1G2{O(2oQUO1G2{OOQQ<<Hb<<HbO$2jQUO<<HbOOQQ<<LV<<LVO$2jQUO<<LVO(2vQUO1G3VOOQQ,5?^,5?^OOQQ-E<p-E<pOOQQ<<LW<<LWOOQQ<<L^<<L^O$2jQUO<<L^OOQQ<<Lq<<LqO(3QQUO1G3tP(5TQUO'#IvP(5]QUO,5@zPO{O1G6e1G6ePOOO<<Gn<<GnOOQQANBcANBcOOQR1G5h1G5hO(5eQ!eO,5:fOOQQ,5:f,5:fO(6TQUO7+&ROOQQ7+%}7+%}O!*qQUO'#I_O(7QQUO,5@]OOQQ7+&P7+&PO(7YQUO7+&aOOQQ,5=r,5=rO(7jQUO1G1kOOQQ<<Ip<<IpO(7tQUO7+'ZOOQRAN@^AN@^O(8RQVOAN@jO(8YQUOAN@jO!'iQVOAN@jO(8aQUOAN@jO(8fQUOAN@zO(8mQUOAN@zOOQRAN@jAN@jO(8rQUO7+'pO'1vQUO7+'pOOQQ7+'r7+'rO(9TQUO7+'rO(9[QVO7+'rO(9cQUOANATOOQQ7+&s7+&sO(9hQUO,5;jOOQQ1G4Z1G4ZO(9vQUO1G4ZO(:RQUO7+*}O(:ZQUO7+%ROOQQ7+%R7+%RO(:lQUO7+%RO(/gQVO7+%ROOQQ7+(b7+(bO(:qQUO7+%RO(:xQUO7+%RO%<zQVO7+%RO(;SQUO1G0YO(,pQUO1G0YO';oQUO1G0YOOQQ'#Id'#IdO(<`QUO1G0^O(<vQUO1G0yO(<}QVO1G0yOOQQ1G0y1G0yO(=XQVO1G0yO(=`QUO,5?POOQQ-E<c-E<cOOQQ1G0z1G0zOOQQ7+(g7+(gOOQQAN=|AN=|OOQQANAqANAqOOQQANAxANAxOOQQ7+)`7+)`POQQ,5?b,5?bPOQQ-E<t-E<tOOQQ1G0Q1G0QOOQQ,5>y,5>yOOQQ-E<]-E<]O(=wQUOG26UO!'iQVOG26UO(>OQUOG26UOOQRG26UG26UO!'iQVOG26fO(>TQUO<<K[OOQQ<<K^<<K^OOQRG26oG26oOOQQ7+)u7+)uOOQQ<<Hm<<HmO(>fQUO<<HmO%<zQVO<<HmO(>kQUO<<HmO(>rQUO<<HmO(/gQVO<<HmOOQQ<<K|<<K|O(?TQUO7+%tO(,pQUO7+%tOOQQ-E<b-E<bOOQQ7+&e7+&eO(?lQUO7+&eO(?sQVO7+&eO!'iQVOLD+pOOQRLD+pLD+pOOQRLD,QLD,QOOQQAN>XAN>XO(?zQUOAN>XO(@RQUOAN>XO%<zQVOAN>XO(@WQUO<<I`OOQQ<<JP<<JPOOQR!$( [!$( [OOQQG23sG23sO(@oQUOG23sO(@vQUOG23sOOQQLD)_LD)_O(@{QUO'#CgO'qQUO'#CgO!1hQUO'#DUO!1hQUO'#DUO!1|QUO'#GyO!1|QUO'#GyO(BxQUO'#GzO(CZQUO'#GzO(ClQUO'#GzO!2sQUO'#HQO'6pQUO'#HRO&KWQUO'#HRO(C}QUO'#HRO(DrQUO'#HRO(EgQUO'#HkO(GUQVO'#HoO!+xQVO,5=vO!+xQVO,5=vO!+xQVO,5=vO!+xQVO,5=vO!+xQVO,5=vO!+xQVO,5=vO!+xQVO,5=vO!+xQVO,5=vO!+xQVO,5=vO(G]QVO,5=}O(IvQUO'#CyO(LWQUO'#CyO(MPQUO'#CyO(MaQUO'#CyO) hQUO'#CyO) uQUO'#CyO)#hQUO'#CyO)%_QUO'#CyO(EgQUO,5>VO)%jQVO,5>ZO)%qQbO,59cO)&PQbO,59cO)&_QbO,59cO!+xQVO,59VO)&mQUO'#CgO)(qQUO'#CgO)({QUO'#CgO)+^QUO'#CgO).TQUO'#CgO).eQUO'#CgO)/bQUO'#CgO)2hQUO'#CgO)2uQUO'#CgO)3PQUO,5=tO,qQbO'#CwO)3ZQbO'#CwO)3lQbO'#CwO)3}QbO'#CwO)4`QUO'#CvO)4kQUO,5:uO)5RQUO,5:uO)5RQUO,5:uO)5lQbO'#CwO)5wQbO'#CwO)6SQbO'#CwO)6_QbO'#CwO)5RQUO'#EZO)6jQUO'#EZODQQUO'#EiO)7qQUO'#EiO#3vQUO'#JsO!+xQVO'#HYO)8cQbO'#CwO)8qQbO'#CwO)9PQUO'#CvO)9UQUO'#CvO):tQUO'#JQO):{QUO,5=}O);zQUO'#EbO)=VQUO'#EfO)@SQUO,59pO)AzQUO,59pO)B[QUO,59pO)BcQUO,59pO$2wQUO,59pO$2wQUO,59pO)E]QUO,5=eO)GTQUO,5=eO)GeQUO,5=eO)GlQUO,5=eO$5dQUO,5=eO$5dQUO,5=eO)HuQUO,5=fO$8bQUO,5=fO$8bQUO,5=fO$8bQUO,5=fO)JOQUO,5=lO)LiQUO,5=lO)LyQUO,5=lO$:wQUO,5=lO)MQQUO,5>PO(C}QUO,5>VO)MeQUO,5>ZO)MrQUO'#CoO* hQUO1G3bO*#PQUO1G3bO*$tQUO1G3bO*${QUO1G3bO*&jQUO1G3bO*&qQUO1G3bO*(YQUO1G3bO*(gQUO1G3bO*(tQUO1G3bO**VQUO1G3bO(C}QUO1G3qO**jQUO1G3uO**wQUO1G.qO*+[QbO,59cO*+gQbO,59cO*+rQbO,59cO*+}QbO,59cO*,YQbO,59cO*,eQbO,59cO*,pQbO,59cO)4kQUO1G0aO*,{QUO1G0aO)5RQUO1G0aO)6jQUO1G0aO*-cQUO'#EaO*-yQUO1G0bO*/TQVO1G3jO*/[QUO,5:|O*0UQUO,5:|O*1RQUO,5;QO*3`QUO'#JZO*5aQUO1G/[O*7XQUO1G/[O*7iQUO1G/[O*7pQUO1G/[O*:jQUO1G3PO*<bQUO1G3PO*<rQUO1G3PO*<yQUO1G3PO*>SQUO1G3QO*@rQUO1G3WO*C]QUO1G3WO*CmQUO1G3WO*CtQVO1G3uO!+xQVO7+$[O*EeQUO'#CyO*EsQbO,59cO*CtQVO7+)aO)4kQUO7+%{O*,{QUO7+%{O*F|QUO7+%|O*G^QUO,5:{O!5vQUO,5:{O*GkQUO'#EbO*G{QUO7+)UO*HYQUO1G0hO*IVQVO1G6`O*IpQUO7+)aO*I}QUO<<GvO*J[QUO<<L{O*JiQUO1G0gO*JzQUO1G0gO*KjQUO'#EfO*LZQUO,5:rO*LeQUO,5;aO*LpQUO7+&RO*MRQUO1G0YO*M^QUO1G0^O*MhQUO7+%tO*MsQUO<<I`O!1QQUO'#JlO':xQUO'#JlO*NOQUO'#EZO)9ZQUO'#JQO!+xQVO'#H`O!+xQVO'#HcO!1hQUO'#DUO!1|QUO'#GyO!2sQUO'#HQO+ kQVO'#HeO+ uQUO'#CwO+ zQUO'#EjO+!PQUO'#EjO+!UQUO'#CvO+!ZQUO'#CvO+!`QUO'#CwO+!eQUO'#CwO+!jQUO'#CvO+!uQUO'#CvO+#QQUO'#CvO*,{QUO,5:uO)6jQUO,5:uO)6jQUO,5:uO+$^QUO,5:vO+$nQUO'#JZO+%[QUO'#JZO+%fQUO,5>OO+%kQUO,5;TO#6ZQVO'#FpO+%uQUO'#JZO$2wQUO,59pO$5dQUO,5=eO$:wQUO,5=lO+&YQVO,5>ZO+&aQUO1G.pO+&hQbO'#CwO+&sQUO'#CrO+&xQVO1G3uO+'PQUO1G0aO+'ZQUO1G0bO+'bQUO,5@tO+'gQUO7+%{O'=bQUO'#EuO+'qQUO<<IgO+'{QUO,5:nO+(cQUO,5:nO+(|QUO,5:nO+(cQUO,5:nO+'{QUO1G0YO+(cQUO1G0YO+'{QUO7+%tO!1hQUO'#DUO!1hQUO'#DUO!1hQUO'#DUO!1hQUO'#DUO!1|QUO'#GyO!1|QUO'#GyO!1|QUO'#GyO!1|QUO'#GyO+)XQUO'#GzO!2sQUO'#HQO!2sQUO'#HQO!2sQUO'#HQO+)jQUO'#HRO!5vQUO'#HRO+*_QUO'#HRO++SQUO,5:uO++jQUO,5:uO++jQUO,5:uO++jQUO'#EZO&#SQUO'#EiO$2wQUO,59pO$2wQUO,59pO$2wQUO,59pO$2wQUO,59pO$5dQUO,5=eO$5dQUO,5=eO$5dQUO,5=eO$5dQUO,5=eO$8bQUO,5=fO$:wQUO,5=lO$:wQUO,5=lO$:wQUO,5=lO++SQUO1G0aO++jQUO1G0aO+,TQUO'#EaO!*qQUO'#EaO+,kQUO'#EaO+,{QUO1G0bO++SQUO7+%{O+.PQUO7+%|O+)jQUO,5:{O'6pQUO,5:{O+*_QUO,5:{O+.WQUO'#EZO!+xQVO,59UO+.]QUO,5:uO+.gQUO'#EcO+.}QUO'#EfO#6ZQVO'#FpO+/[QUO,5:|O+/{QUO,5:}O+/{QUO,5:}O+1SQUO,5;QO+1eQUO1G0hO+1vQUO1G0iO+(cQUO'#ESO+2^QUO'#ESO+2cQUO,5:{O+3XQUO1G0gO+3cQUO1G0gO+3vQUO7+&RO+3}QUO'#EZO+4SQUO,5:vO+4ZQUO1G0bO+4bQUO,5:uO+4iQUO,5;TO+4pQUO'#EbO+5aQUO1G0aO+5hQUO,5:|O+5yQUO7+%{O+6QQUO<<Ig",stateData:"+6x~O'nOSSOSTOSRPQVPQ&jPQ&lPQ&mPQ&nPQ&oPQ&pPQ&qPQ&rPQ~O)TOS~OPsO]dOa!ZOdjOlTOr![Os![Ot![Ou![Ov![Ow![Oy!wO{!]O!S}O!ZiO!]!UO!^!TO!l!YO!ouO!p!^O!q!_O!r!_O!s!_O!u!`O!x!aO#S!pO#`jO#p!sO#s!{O#t!zO#y!bO#}!vO$S!mO$T!nO$Z!cO$`!dO$b!eO$c!fO$g!gO$i!hO$k!iO$m!jO$o!kO$q!lO$x!oO$}!qO%Q!rO%V!tO%[#PO%`!uO%k!xO%o!yO%q!OO%w!|O%x!QO&T!TO&U!TO&Y!}O&^!YO&a#OO&h!YO&i!YO'oQO'rRO(SYO(VaO(XfO(YeO(ZoO([XO(}!VO)O!WO~OR#VOV#QO&j#RO&l#SO&m#TO&n#TO&o#UO&p#UO&q#SO&r#SO~OX#XO'p#XO'q#ZO~O]ZX]iXdiXlgXpZXpiXriXsiXtiXuiXviXwiX{iX!QZX!SiX!ZZX!ZiX!]ZX!^ZX!`ZX!bZX!cZX!eZX!fZX!gZX!iZX!jZX!kZX!piX!qiX!riX!siX!uiX!xiX#`iX'riX'uZX'v$VX'wZX'xZX(QZX(VZX(ViX(WZX(XZX(XiX(YZX(YiX(ZZX(hZX~O(ZiX!YZX~P'qO]#pO!Q#^O!Z#aO!]#nO!^#eO!`#fO!b#hO!c#iO!e#kO!f#lO!g#lO!i#lO!j#mO'u#[O'w#`O'x#`O(Q#oO(V#bO(W#cO(X#cO(Y#dO(Z#_O~Od#tO#`#tO&`#vO&d#wO'y#qO~O%_#uO~P,qOl#xO~O!S#yO]'}Xd'}Xr'}Xs'}Xt'}Xu'}Xv'}Xw'}X{'}X!Z'}X!p'}X!q'}X!r'}X!s'}X!u'}X!x'}X#`'}X'r'}X(V'}X(X'}X(Y'}X(Z'}X~Ol#xO~P-`Ol#xO!k#{O(h#{O~OX#|O(]#|O~O!W#}O(Q(TP(_(TP~Oa!QOl$ROr![Os![Ot![Ou![Ov![Ow![Oy!wO{!]O!p!_O!q!_O!r!_O!s!_O!u!`O#s!{O#t!zO#}$YO%k!xO%o!yO%q!OO%w!|O%x!QO'r$QO(SYO~O]'cXa&}Xd'cXl&}Xl'cXr&}Xr'cXs&}Xs'cXt&}Xt'cXu&}Xu'cXv&}Xv'cXw&}Xw'cXy&}X{&}X!Z'cX!o'cX!p&}X!p'cX!q&}X!q'cX!r&}X!r'cX!s&}X!s'cX!u&}X!u'cX!x'cX#`'cX#s&}X#t&}X%V'cX%`'cX%k&}X%o&}X%q&}X%w&}X%x&}X'r&}X'r'cX(V'cX(X'cX(Y'cX~Oa!QOl$ROr![Os![Ot![Ou![Ov![Ow![Oy!wO{!]O!p!_O!q!_O!r!_O!s!_O!u!`O#s!{O#t!zO%k!xO%o!yO%q!OO%w!|O%x!QO'r$QO~Or![Os![Ot![Ou![Ov![Ow![O{!]O!p!_O!q!_O!r!_O!s!_O!u!`O](`Xd(`Xl(`X!Z(`X!x(`X#`(`X'r(`X(V(`X(X(`X(Y(`X~O(Z$^O~P6POPsO]dOdjOr![Os![Ot![Ou![Ov![Ow![O!ZiO!]!UO!^!TO!l!YO!x!aO#`jO%[#PO&T!TO&U!TO&Y!}O&^!YO&a#OO&h!YO&i!YO'oQO(VaO(XfO(YeO([XO(}!VO)O!WO~Oa$jOl$aO!y$kO'r$_O~P7nO(V$lO~O]$oO!Z$nO~Oa!ZOl8XOy7VO#s7_O#t7^O%k7XO%o7ZO%q!OO%w!|O%x!QO'r7}O~P7nOPsO]dOdjO!ZiO!]!UO!^!TO!l!YO!x!aO#`jO%[#PO&T!TO&U!TO&Y!}O&^!YO&a#OO&h!YO&i!YO'oQO(VaO(XfO(YeO([XO(}!VO)O!WO~Oa$jOl$aO'r$_O~P;SO]$zOdjOl$xO!Z$|O!x!aO#`jO'r$_O(V$yO(XfO(YfO~Op%PO]'tX](dX!Q'tX!Z'tX!Z(dX!]'tX!^'tX!`'tX!b'tX!c'tX!e'tX!f'tX!g'tX!i'tX!j'tX'u'tX'w'tX'x'tX(Q'tX(V'tX(W'tX(X'tX(Y'tX(Z'tX|'tX|(dX!Y'tX~O!k#{O(h#{O~P=oO!k'tX(h'tX~P=oOPsO]%UOa$jOl$aO!Z%XO![%[O!]!UO!^!TO!l!YO%[#PO&T!TO&U!TO&Y!}O&^!YO&a#OO&h!YO&i!YO'oQO'r$_O(V%VO(Y%WO([XO(h%YO(}!VO)O!WO~O!S}O'v%]O(h%`O](dX!Z(dX~O]'tX!Q'tX!Z'tX!]'tX!^'tX!`'tX!b'tX!c'tX!e'tX!f'tX!g'tX!i'tX!j'tX'u'tX'w'tX'x'tX(Q'tX(V'tX(W'tX(X'tX(Y'tX(Z'tX!k'tX(h'tX|'tX!Y'tX~O](dX!Z(dX|(dX~PBPO]$zOdjOl8aO!Z$|O!x!aO#`jO'r8OO(V8eO(X8gO(Y8gO~O'v%dO~OP%eO'oQO!['tX'v'tXQ'tX!h'tX~PBPO]$zOdjOr![Os![Ot![Ou![Ov![Ow![O!Z$|O!p!_O!q!_O!r!_O!s!_O!u!`O!x!aO#`jO%V!tO%`!uO(V$yO(XfO(YfO~Ol%gO!o%lO'r$_O~PE_O]$zOdjOl%gO!Z$|O!x!aO#`jO%`!uO'r$_O(V$yO(XfO(YfO~O!S}O(Z%pO(h%qO~O!Y%tO~P!QOa%vO%q!OO]%pXd%pXl%pXr%pXs%pXt%pXu%pXv%pXw%pX{%pX!Z%pX!p%pX!q%pX!r%pX!s%pX!u%pX!x%pX#`%pX'r%pX(V%pX(X%pX(Y%pX(Z%pX|%pX!Q%pX!S%pX!]%pX!^%pX!`%pX!b%pX!c%pX!e%pX!f%pX!g%pX!i%pX!j%pX'u%pX'w%pX'x%pX(Q%pX(W%pX!k%pX(h%pXQ%pX!h%pX![%pX'v%pX!Y%pX}%pX#Q%pX#S%pX~Op%POl'}X|'}XQ'}X!Q'}X!h'}X(Q'}X(h'}X~P-`O!k#{O(h#{O]'tX!Q'tX!Z'tX!]'tX!^'tX!`'tX!b'tX!c'tX!e'tX!f'tX!g'tX!i'tX!j'tX'u'tX'w'tX'x'tX(Q'tX(V'tX(W'tX(X'tX(Y'tX(Z'tX|'tX!['tX!Y'tXQ'tX!h'tX~OPsO]%UOa$jOl$aO!Z%XO!]!UO!^!TO!l!YO%[#PO&T!TO&U!TO&Y!}O&^!YO&a#OO&h!YO&i!YO'oQO'r$_O(V%VO(Y%VO([XO(}!VO)O!WO~O]&PO!Z&OO(V%{O(X&QO(Y&QO~O!S}O~P! sO]'}Xd'}Xl'}Xr'}Xs'}Xt'}Xu'}Xv'}Xw'}X{'}X!Z'}X!p'}X!q'}X!r'}X!s'}X!u'}X!x'}X#`'}X'r'}X(V'}X(X'}X(Y'}X(Z'}X|'}XQ'}X!Q'}X!h'}X(Q'}X(h'}X~O]#pO~P!!]O]&UO~O'oQO](aXa(aXd(aXl(aXr(aXs(aXt(aXu(aXv(aXw(aXy(aX{(aX!Z(aX!o(aX!p(aX!q(aX!r(aX!s(aX!u(aX!x(aX#`(aX#s(aX#t(aX%V(aX%`(aX%k(aX%o(aX%q(aX%w(aX%x(aX'r(aX(V(aX(X(aX(Y(aX~O]&WO~O]#pO~Ol8bO$}&[O'r8PO~O]&]Ow&_O~O]&]O~OPsO]%UOa$jOl$aO!S}O!Z%XO!]!UO!^!TO!l!YO#S!pO$S!mO$T!nO$Z!cO$`!dO$b!eO$c!fO$g!gO$i!hO$k!iO$m!jO$o!kO$x!oO%[#PO&T!TO&U!TO&Y!}O&^!YO&a#OO&h!YO&i!YO'oQO'r7TO(V%VO(Y%VO(ZoO([XO(}!VO)O!WO~O]&cO~O!S#yO(Z&eO~PNYO(Z&gO~O(Z&hO~O'r&iO~Oa!QOl$ROr![Os![Ot![Ou![Ov![Ow![Oy7VO#s7_O#t7^O%k7XO%o7ZO%q!OO%w!|O%x!QO'r$QO~OPsO];cOa$jOl8YO!Z%XO!]:zO!^:yO!l!YO%[7dO&T:yO&U:yO&Y;OO&^!YO&a7cO&h!YO&i!YO'oQO'r$_O(V8jO(Y8jO([XO(}!VO)O!WO~O'v&nO~O!S}O~O(Z&qO~PNYO!S&sO'r&rO~O]&vO~O]$zOa!QOdjOr![Os![Ot![Ou![Ov![Ow![Oy!wO{!]O!Z$|O!p!_O!q!_O!r!_O!s!_O!u!`O!x!aO#`jO#s!{O#t!zO%k!xO%o!yO%q!OO%w!|O%x!QO(V$yO(XfO(YfO~Ol8dOp&zO'r8QO~P!.RO]&}Od%UXl%UX!Z%UX!x%UX#`%UX%`%UX'r%UX(V%UX(X%UX(Y%UX~O{!]O!p!_O!q!_O!r!_O!s!_O!u!`O~P!*qOl$RO{!]O}'XO!S'TO'r$QO'v'SO~Ol$RO{!]O}'^O!S'TO'r$QO'v'SO~Ol$ROy'cO!S'`O#t'cO'r$QO~Ol$RO{!]O}'gO!S'TO'r$QO'v'SO~Oa!QOl$ROy!wO#s!{O#t!zO%k!xO%o!yO%q!OO%w!|O%x!QO'r$QO~O]'jO~OPsOa$jOl$aO!Z%XO!]!UO!^!TO!l!YO%[#PO&T!TO&U!TO&Y!}O&^!YO&a#OO&h!YO&i!YO'oQO'r$_O(V%VO(Y%VO([XO(}!VO)O!WO~O]'lO(Q'nO~P!4RO]#pOa!QOl$ROy;{O#s<XO#t<UO%k<PO%o<SO%q!OO%w!|O%x!QO'r$QO~OPsO]%UOa$jOl$aO!Z'rO!]!UO!^!TO!l!YO%[#PO&T!TO&U!TO&Y!}O&^!YO&a#OO&h!YO&i!YO'oQO'r$_O(V%VO(Y%VO([XO(}!VO)O!WO~OY'sO'oQO'r&rO~O&k'sO~O)Q'vO~O]#pO'n'xO'k&sX~OX#XO'p#XO'q'zO~Od(TOl(PO'r(OO~OPsOa$jO!l!YO&^!YO&h!YO&i!YO'oQO'r$_O([XO(}!VO)O!WO]&Va!Z&Va!]&Va!^&Va!`&Va!b&Va!c&Va!e&Va!f&Va!g&Va!i&Va!j&Va'u&Va'w&Va'x&Va(Q&Va(V&Va(W&Va(X&Va(Y&Va!k&Va(h&Va~Ol$aO%[#PO&T!TO&U!TO&Y!}O&a#OO!Q&Va(Z&Va|&Va![&Va!Y&VaQ&Va!h&Va~P!9^O!S#yO|'sP~PNYO]nX]#_XdnXlmXpnXp#_XrnXsnXtnXunXvnXwnX{nX!Q#_X!SnX!ZnX!Z#_X!]#_X!^#_X!`#_X!b#_X!c#_X!e#_X!f#_X!g#_X!i#_X!j#_X!kmX!pnX!qnX!rnX!snX!unX!xnX#`nX'rnX'u#_X'w#_X'x#_X(Q#_X(VnX(V#_X(W#_X(XnX(X#_X(YnX(Y#_X(hmX|nX|#_X~O(ZnX(Z#_X!Y#_X~P!<nOPsO]%UOa$jOl$aO!]!UO!^!TO!l!YO%[#PO&T!TO&U!TO&Y!}O&^!YO&a#OO&h!YO&i!YO'oQO'r$_O(V%VO(Y%VO([XO(}!VO)O!WO~O!Z(hO~P!@ZOd(kO#`(kO%_(lO'y#qO~O!S#yO!Z(nO'w(oO!Y(iP~P!@ZO(^(uO~Ol(vO]!VX!Q!VX(Q!VX(_!VX~O](xO!Q(yO(Q(TX(_(TX~O(Q(}O(_(|O~O]iXdiXlgXpiXriXsiXtiXuiXviXwiX{iX!ZiX!piX!qiX!riX!siX!uiX!xiX#`iX'riX(ViX(XiX(YiX!SiX!QiX(QiX(hiX|iX~O(ZiX}iX'viX!]iX!^iX!`iX!biX!ciX!eiX!fiX!giX!iiX!jiX'uiX'wiX'xiX(WiX!kiX![iXQiX!hiX!YiX#QiX#SiX~P!CfO'y)OO~Ol)PO~O]'}Xd'}Xr'}Xs'}Xt'}Xu'}Xv'}Xw'}X{'}X!Z'}X!p'}X!q'}X!r'}X!s'}X!u'}X!x'}X#`'}X'r'}X(V'}X(X'}X(Y'}X(Z'}X!Q'}X!S'}X!]'}X!^'}X!`'}X!b'}X!c'}X!e'}X!f'}X!g'}X!i'}X!j'}X'u'}X'w'}X'x'}X(Q'}X(W'}X!k'}X(h'}X|'}X!['}X'v'}XQ'}X!h'}X!Y'}X}'}X#Q'}X#S'}X~Ol)PO~P!GYO(Z)QO~P6POp%POl'}X~P!GYOr![Os![Ot![Ou![Ov![Ow![O{!]O!p!_O!q!_O!r!_O!s!_O!u!`O](`ad(`al(`a!Z(`a!x(`a#`(`a'r(`a(V(`a(X(`a(Y(`a|(`a!Q(`a(Q(`a(h(`aQ(`a!h(`a!S(`a'v(`a(Z(`a~O]ZXlgXpZXpiX!QZX!SiX!ZZX!]ZX!^ZX!`ZX!bZX!cZX!eZX!fZX!gZX!iZX!jZX!kZX'uZX'wZX'xZX(QZX(VZX(WZX(XZX(YZX(ZZX(hZX|ZX~O![ZX'vZX!YZXQZX!hZX~P!MTO]#pO!Z#aO'w#`O'x#`O!^%|a!`%|a!b%|a!c%|a!e%|a!f%|a!g%|a!i%|a!j%|a!k%|a'u%|a(Q%|a(V%|a(W%|a(X%|a(Y%|a(h%|a~O!]#nO!Q%|a(Z%|a|%|a![%|a!Y%|aQ%|a!h%|a~P# eOd#tO#`#tO&`#vO&d#wO'y7oO~Ol)VO~Ol)VO!S#yO~Ol)VO!k#{O(h#{O~Or![Os![Ot![Ou![Ov![Ow![O~P<}Or![Os![Ot![Ou![Ov![Ow![O!y$kO~P<}O]$oO!Z$nO(Z!}a!Q!}a(h!}a~O|!}aQ!}a!h!}a~P#%bOp%PO!S#yO~Or![Os![Ot![Ou![Ov![Ow![O})`O!u!`O#Q)bO#S)cO]#Oa!S#Oa!Z#Oa(h#Oa(Z#Oa!Q#Oa~O'x)_O'v#Oa~P#&YOPsO]%UOa$jOl$aOr![Os![Ot![Ou![Ov![Ow![O!Z%XO!]!UO!^!TO!l!YO%[#PO&T!TO&U!TO&Y!}O&^!YO&a#OO&h!YO&i!YO'oQO'r$_O(Y%VO([XO(}!VO)O!WO~O![)fO(V)gO~P#'hO(Q)jO(SYO|(cP~P4fO]#pO!Q#^O!Z#aO!]#nO!^#eO!`#fO!b#hO!c#iO!e#kO!f#lO!g#lO!i#lO!j#mO'u#[O'w#`O'x#`O(Q#oO(V#bO(W#cO(X#cO(Y#dO~O|)lO~P#)yO!S#yO]'}Xr'}Xs'}Xt'}Xu'}Xv'}Xw'}X|'}X!Z'}X(V'}X(X'}X(Y'}X~Ol9jO~P#+eO]$oO|)nO!Z$nO~O|)lO~Or![Os![Ot![Ou![Ov![Ow![O|qXQqX!QqX!hqX(QqX(ZqX~P! sO|)qO~O]$oO!Z$nO(Z#]a!Q#]a(h#]a~O|#]aQ#]a!h#]a~P#-vOd#tO#`#tO'y7oO~Op%PO](dX!Z(dX!Q(dX!S(dX(Z(dX(h(dX|(dX'v(dXQ(dX!h(dX~Op%PO~OPsO]%UOa!ZOl8ZOr![Os![Ot![Ou![Ov![Ow![Oy7VO!Z%XO!]!UO!^!TO!l!YO#s7_O#t7^O%[#PO%k7XO%o7ZO%q!OO%w!|O%x!QO&T!TO&U!TO&Y!}O&^!YO&a#OO&h!YO&i!YO'oQO'r8RO(V%VO(Y%VO([XO(}!VO)O!WO~OQ'zP!h'zP~P#/kO]#pO!Q)xO!Z#aO!]#nO!^#eO!`#fO!b#hO!c#iO!e#kO!f#lO!g#lO!i#lO!j#mO'u#[O'w#`O'x#`O(Q#oO(V#bO(W#cO(X#cO(Y#dO~O![)PX~P#2[Op%PO!Q)zO!k#{O(h#{O]'tX!Z'tX!['tX![(gX!]'tX!^'tX!`'tX!b'tX!c'tX!e'tX!f'tX!g'tX!i'tX!j'tX'u'tX'w'tX'x'tX(Q'tX(V'tX(W'tX(X'tX(Y'tX~O!Q'tX~P#3vOp%PO!['tX'v'tXQ'tX!h'tX~PBPO![)|O~OPsO]%UOa!ZOl8XOr![Os![Ot![Ou![Ov![Ow![Oy7VO!Z%XO!]!UO!^!TO!l!YO#s7_O#t7^O%[#PO%k7XO%o7ZO%q!OO%w!|O%x!QO&T!TO&U!TO&Y!}O&^!YO&a#OO&h!YO&i!YO'oQO'r7}O(V%VO(Y%VO([XO(}!VO)O!WO~O!Q*OO![)}O~PNYO!Q*OO![)}O~Ol;jO'r9[O~O!S}O(h%`O~O$T*TO%[*UO~O]*VO!Q*ZO!S*WO!Z$nO(h*XO(Z(mX~O!Q*ZO(Z(mX~O(Z*^O~OP%eO'oQO]%Ra!Q%Ra!Z%Ra!]%Ra!^%Ra!`%Ra!b%Ra!c%Ra!e%Ra!f%Ra!g%Ra!i%Ra!j%Ra'u%Ra'w%Ra'x%Ra(Q%Ra(V%Ra(W%Ra(X%Ra(Y%Ra(Z%Ra!k%Ra(h%Ra|%Ra![%Ra'v%Ra!Y%RaQ%Ra!h%Ra~Od#tO#`#tO%_#uO'y7oO~Ol7yO~O!S}O(Z*eO(h*fO~OPsO]%UOa$jOl$aO!Z%XO!]!UO!^!TO!l!YO$T*TO%[*hO&T!TO&U!TO&Y!}O&^!YO&a#OO&h!YO&i!YO'oQO'r$_O(V%VO(Y%VO([XO(}!VO)O!WO~O!Y*iO~P!QO]#pO!Z#aO'w#`O'x#`O!Q&Sa!]&Sa!^&Sa!`&Sa!b&Sa!c&Sa!e&Sa!f&Sa!g&Sa!i&Sa!j&Sa'u&Sa(Q&Sa(V&Sa(W&Sa(X&Sa(Y&Sa(Z&Sa!k&Sa(h&Sa|&Sa![&Sa'v&Sa!Y&SaQ&Sa!h&Sa~Op%PO~PL]O]#pO!Z#aO'w#`O'x#`O!^&Va!`&Va!b&Va!c&Va!e&Va!f&Va!g&Va!i&Va!j&Va'u&Va(Q&Va(V&Va(W&Va(X&Va(Y&Va!k&Va(h&Va~O!]#nO!Q&Va(Z&Va|&Va![&Va!Y&VaQ&Va!h&Va~P#APOr![Os![Ot![Ou![Ov![Ow![O|#UXQ#UX!Q#UX!h#UX(Q#UX(Z#UX~P! sOr![Os![Ot![Ou![Ov![Ow![O#Q)bO#S)cO]#VX!Z#VX(Z#VX~O'x9uO!S#VX(h#VX~P#CzO]$oO!Z*qO~O![*tO(V*uO~P#'hO]&PO!Z&OO(Q)jO(SYO(V%{O(X&QO(Y&QO|(cP~P4fO|#YXQ#YX!Q#YX!h#YX(Q#YX(Z#YX~P! sO!S}O](fX!Z(fX~O!S&sO#}!vO(SYO~P4fOp%PO(h*}O~O(Z+OO~Ol8bO'r8PO~OPsO]%UOa!ZOl8[Or![Os![Ot![Ou![Ov![Ow![Oy!wO{!]O!Z%XO!]!UO!^!TO!l!YO!p!_O!q!_O!r!_O!s!_O!u!`O#s!{O#t!zO%[#PO%k!xO%o!yO%q!OO%w!|O%x!QO&T!TO&U!TO&Y!}O&^!YO&a#OO&h!YO&i!YO'oQO(SYO(V%VO(Y%VO(ZoO([XO(}!VO)O!WO~O'r8TO~P#GcO$c+ZO~OPsO]%UOa!ZOl8[Or![Os![Ot![Ou![Ov![Ow![Oy!wO{!]O!Z%XO!]!UO!^!TO!l!YO!p!_O!q!_O!r!_O!s!_O!u!`O#s!{O#t!zO%[#PO%k!xO%o!yO%q!OO%w!|O%x!QO&T!TO&U!TO&Y!}O&^!YO&a#OO&h!YO&i!YO'oQO'r7}O(SYO(V%VO(Y%VO(Z+_O([XO(}!VO)O!WO~O(Z+aO~P#)yO(Z+aO~O(Z+bO~O]+hO!x!aO'r+dO(V+eO~O]#pO!Z#aO!]7nO!^7eO!`7fO!b7hO!c7iO!e7kO!f7lO!g7lO!i7lO!j7mO'u<xO'w#`O'x#`O(Q#oO(V#bO(W#cO(X#cO(Y#dO~O'v+kO~P#NZO!S}O$Z!cO$`!dO$b!eO$c!fO$g+oO$i!hO$k!iO$m!jO$o!kO$q!lO'r7UOd$Ra!o$Ra!x$Ra#S$Ra#`$Ra#p$Ra#y$Ra#}$Ra$S$Ra$T$Ra$x$Ra$}$Ra%Q$Ra%V$Ra%`$Ra'k$Ra(X$Ra!Y$Ra$^$Ra~P#GcO$z+rO~O]#pO!Z#aO!]#nO!^#eO!`#fO!b#hO!c#iO!e#kO!f#lO!g#lO!i#lO!j#mO'u#[O'w#`O'x#`O(Q#oO(V#bO(W#cO(X#cO(Y#dO~O(Z+sO~P$#|O!Y+tO~P!QO!S&sO~O]'}Xd'}Xr'}Xs'}Xt'}Xu'}Xv'}Xw'}X{'}X!Z'}X!p'}X!q'}X!r'}X!s'}X!u'}X!x'}X#`'}X'r'}X(V'}X(X'}X(Y'}X~Ol9mO~P$%qO|(`X!Q(`X(Q(`X(h(`XQ(`X!h(`X!S(`X'v(`X(Z(`X~P6PO]$oO!Z$nO(Z+xO~Oa!QOl$ROr![Os![Ot![Ou![Ov![Ow![Oy!wO{!]O!p!_O!q!_O!r!_O!s!_O!u!`O#p,OO#s+|O#t+}O%k!xO%o!yO%q!OO%w!|O%x!QO'r$QO(SYO~OQ(jP!h(jP~P$(XOl8kO!o,RO#p,WO#y,VO#}!vO%V!tO%`!uO'r8VO(SYO~P!.RO]&PO!Z&OO(V=`O(X<{O(Y<{O~O](OXr(OXs(OXt(OXu(OXv(OXw(OX{(OX}(OX!S(OX!Z(OX!p(OX!q(OX!r(OX!s(OX!u(OX!x(OX'r(OX'v(OX(V(OX(X(OX(Y(OX(Z(OX|(OX!Q(OX(Q(OX!](OX!^(OX!`(OX!b(OX!c(OX!e(OX!f(OX!g(OX!i(OX!j(OX'u(OX'w(OX'x(OX(W(OX!k(OX(h(OXQ(OX!h(OX![(OX!Y(OX#Q(OX#S(OX~Op%POd(OXl(OX#`(OX~P$+UOl$RO!P,_O'r$QO~Oa!QOl8lOy:{O{!]O!P,mO!Y,jO!o,kO#p,WO#s7bO#t:}O#y!bO$q!lO%Q!rO%j,lO%k:|O%o7]O%q!OO%w!|O%x!QO'r8UO(SYO~PE_O},pO!S'TO'v'SO]xadxalxarxasxatxauxavxawxa{xa!Zxa!pxa!qxa!rxa!sxa!uxa!xxa#`xa'rxa(Vxa(Xxa(Yxa~O(Zxa|xa!Qxa(Qxa(hxaQxa!hxa~P$0`O!S'TO~O!S'TO'v'SO~Ol$RO},pO!S'TO'r$QO'v'SO~O},tO!S'TO'v'SO]%mad%mal%mar%mas%mat%mau%mav%maw%ma{%ma!Z%ma!p%ma!q%ma!r%ma!s%ma!u%ma!x%ma#`%ma'r%ma(V%ma(X%ma(Y%ma~O(Z%ma|%ma!Q%ma(Q%ma(h%maQ%ma!h%ma~P$3YOl$RO},tO!S'TO'r$QO'v'SO~O'r&rO!Y(xP~O'v,yO]%nar%nas%nat%nau%nav%naw%na!Z%na(V%na(X%na(Y%na(Z%na|%na!Q%na(Q%na(h%naQ%na!h%na}%na#Q%na#S%na'x%na~O!S'`Od%nal%na{%na!p%na!q%na!r%na!s%na!u%na!x%na#`%na'r%na~P$5}Ol$RO!S'`O'r$QO~O}-PO'v'SO]%tal%tar%tas%tat%tau%tav%taw%ta{%ta!Z%ta!p%ta!q%ta!r%ta!s%ta!u%ta!x%ta#`%ta'r%ta(V%ta(X%ta(Y%ta(Z%ta|%ta!Q%ta(Q%ta(h%taQ%ta!h%ta~O!S'TOd%ta~P$8mOl$RO}-PO!S'TO'r$QO'v'SO~O]#pO!Z#aO'w#`O'x#`O(V#bO!b&Xa!c&Xa!e&Xa!f&Xa!g&Xa!i&Xa'u&Xa(Q&Xa(W&Xa(X&Xa(Y&Xa!k&Xa(h&Xa~O!]#nO!^#eO!`#fO!j#mO!Q&Xa(Z&Xa|&Xa![&Xa!Y&XaQ&Xa!h&Xa~P$;YO]-TO~O]#pO!S#yO!Z-UO!Q&_a!]&_a!^&_a!`&_a!b&_a!c&_a!e&_a!f&_a!g&_a!i&_a!j&_a'u&_a'w&_a'x&_a(Q&_a(V&_a(W&_a(X&_a(Y&_a(Z&_a!k&_a(h&_a|&_a![&_a'v&_a!Y&_aQ&_a!h&_a~O!Q&ca(Z&ca!k&ca(h&ca|&ca![&ca!Y&caQ&ca!h&ca~P$#|OPsO]%UOa$jOl$aO!Z%XO!]!UO!^!TO!l!YO%[#PO&T!TO&U!TO&Y!}O&^!YO&a#OO&h!YO&i!YO'oQO'r$_O(V%VO(Y%WO([XO(h%YO(}!VO)O!WO~O![-XO~P$@SO)Q-YO~O]#pO)Q-YO~O]-[O&k-ZO~O]#pO'k&sa~O'v-_O~P#NZO(Z$Xi|$Xi~P#)yO]cXlgXpcXpiX!QcX!ZcX!]cX!^cX!`cX!bcX!ccX!ecX!fcX!gcX!icX!jcX!kcX'ucX'wcX'xcX(QcX(VcX(WcX(XcX(YcX(ZcX(hcX|cX![cX'vcX!ScX!YcXQcX!hcX~Od-aO#`-aO'y-`O~Ol-bO~Op%PO]bi!Qbi!Zbi!]bi!^bi!`bi!bbi!cbi!ebi!fbi!gbi!ibi!jbi!kbi'ubi'wbi'xbi(Qbi(Vbi(Wbi(Xbi(Ybi(Zbi(hbi|bi![bi'vbi!YbiQbi!hbi~O![-dO~P$#|O]#pO!Z#aO!]#nO!`#fO'w#`O'x#`O(V#bO!Q&Oi!b&Oi!c&Oi!e&Oi!f&Oi!g&Oi!i&Oi!j&Oi'u&Oi(Q&Oi(W&Oi(X&Oi(Y&Oi(Z&Oi!k&Oi(h&Oi|&Oi![&Oi!Y&OiQ&Oi!h&Oi~O!^&Oi~P$GoO]#pO!Z#aO!]#nO'w#`O'x#`O!Q&Oi!b&Oi!c&Oi!e&Oi!f&Oi!g&Oi!i&Oi!j&Oi'u&Oi(Q&Oi(W&Oi(X&Oi(Y&Oi(Z&Oi!k&Oi(h&Oi|&Oi![&Oi!Y&OiQ&Oi!h&Oi~O!^&Oi!`&Oi(V&Oi~P$IpO]#pO!Z#aO!]#nO!^#eO!`#fO!c#iO!e#kO!f#lO!g#lO!i#lO!j#mO'w#`O'x#`O(V#bO(Y#dO!Q&Oi'u&Oi(Q&Oi(W&Oi(X&Oi(Z&Oi!k&Oi(h&Oi|&Oi![&Oi!Y&OiQ&Oi!h&Oi~O!b#hO~P$KqO!b&Oi~P$KqO]#pO!Z#aO!]#nO!^#eO!`#fO!e#kO!f#lO!g#lO!i#lO!j#mO'w#`O'x#`O(V#bO!Q&Oi!b&Oi!c&Oi'u&Oi(Q&Oi(W&Oi(X&Oi(Z&Oi!k&Oi(h&Oi|&Oi![&Oi!Y&OiQ&Oi!h&Oi~O(Y#dO~P$MyO(Y&Oi~P$MyO]#pO!Z#aO!]#nO!^#eO!`#fO!j#mO'w#`O'x#`O(V#bO!Q&Oi!b&Oi!c&Oi!e&Oi'u&Oi(Q&Oi(W&Oi(X&Oi(Y&Oi(Z&Oi!k&Oi(h&Oi|&Oi![&Oi!Y&OiQ&Oi!h&Oi~O!f#lO!g#lO!i#lO~P%!RO!f&Oi!g&Oi!i&Oi~P%!RO!^#eO~P$GoO]#pO!Z#aO!]#nO!^#eO!`#fO!b#hO!c#iO!e#kO!f#lO!g#lO!i#lO!j#mO'w#`O'x#`O(V#bO(W#cO(X#cO(Y#dO~O!Q&Oi'u&Oi(Q&Oi(Z&Oi!k&Oi(h&Oi|&Oi![&Oi!Y&OiQ&Oi!h&Oi~P%$hO!Q-eO|'sX~P$#|O!Q-eO|'sX~O|-gO~O]#pO!S#yO!Q&_i!]&_i!^&_i!`&_i!b&_i!c&_i!e&_i!f&_i!g&_i!i&_i!j&_i'u&_i'w&_i'x&_i(Q&_i(V&_i(W&_i(X&_i(Y&_i(Z&_i!k&_i(h&_i|&_i![&_i'v&_i!Y&_iQ&_i!h&_i~O!Z-UO~P%'QO!Q&ci(Z&ci!k&ci(h&ci|&ci![&ci!Y&ciQ&ci!h&ci~P$#|O![-lO~P$@SO!Q-nO!Y(iX~P$#|O'r-qO~O!Z-sO'w(oO(h-uO~O!Q-nO!Y(iX~O!Y-vO~O(Q#oO!Q_i'u_i(Z_i!k_i(h_i|_i![_i!Y_iQ_i!h_i~P%$hO!W-wO~Ol(vO]!Va!Q!Va(Q!Va(_!Va~OP.PO].OOl.PO!Q.PO!S-|O!W.PO!Z-}O!].PO!^.PO!`.PO!b.PO!c.PO!e.PO!f.PO!g.PO!i.PO!j.PO!k.PO!l.PO'oQO'v.PO'w.PO'x.PO(Q.PO(V-yO(W-zO(X-zO(Y-{O(Z.PO([XO~O|.SO~P%,VO!W#}O~O!Q(yO(Q(Ta(_(Ta~O(_.WO~O]nXdnXlmXpnXrnXsnXtnXunXvnXwnX{nX!ZnX!pnX!qnX!rnX!snX!unX!xnX#`nX'rnX(VnX(XnX(YnX!SnX!QnX(QnX|nXQnX!hnX~O(ZnX}nX'vnX!]nX!^nX!`nX!bnX!cnX!enX!fnX!gnX!inX!jnX'unX'wnX'xnX(WnX!knX(hnX![nX!YnX#QnX#SnX~P%.sO(Z.YO~Or![Os![Ot![Ou![Ov![Ow![O{!]O!p!_O!q!_O!r!_O!s!_O!u!`O~O](`id(`il(`i!Z(`i!x(`i#`(`i'r(`i(V(`i(X(`i(Y(`i|(`i!Q(`i(Q(`i(h(`iQ(`i!h(`i!S(`i'v(`i(Z(`i~P%2bOd(kO#`(kO'y7oO~O]$oO!Z$nO(Z!}i!Q!}i(h!}i~O|!}iQ!}i!h!}i~P%4tOr![Os![Ot![Ou![Ov![Ow![O})`O#Q)bO#S)cO'x)_O]#Oi!S#Oi!Z#Oi'v#Oi(h#Oi(Z#Oi!Q#Oi~O!u!`O~P%5dOa!QOl$ROr![Os![Ot![Ou![Ov![Ow![O#t<VO%q!OO%w!|O%x!QO'r$QO~Oy7WO#s7`O%k7YO%o7[O~P%6rO].cOr#PXs#PXt#PXu#PXv#PXw#PX}#PX!S#PX!Z#PX#Q#PX#S#PX'v#PX'x#PX(h#PX|#PX!Q#PX(Z#PXQ#PX!h#PX(Q#PX~O].dO~O![.eO~P$#|O![.eO(V.gO~P#'hO![.eO~PNYO].lOdjOl8aO!Z.kO!x!aO#`jO'r$_O(Q.pO(V.iO~O(X.mO(Y.mO(h.oO|!|X!Q!|XQ!|X!h!|X~P%:PO!Q.rO|(cX~O|.tO~Or![Os![Ot![Ou![Ov![Ow![O|qaQqa!Qqa!hqa(Qqa(Zqa~P! sO]$oO!Z*qO|qaQqa!Qqa!hqa(Qqa(Zqa~O!S#yO~PNYOl)PO~P$+UO!Q)zO![(gX~OQ(yX!Q(yX!h(yX~P$#|O(Q.yOQ'{X!Q'{X!h'{X~O!Q.zOQ'zX!h'zX~OQ.|O!h.|O~O!Q)xO![)Pa~O!Q)zO![(ga~O]#pO!S#yO~O!Q/TO!S(tX(h(tX~O(Z/VO~O(Z/WO~OPsO]%UOa!ZOl8ZOy!wO!S#yO!Z%XO!]!UO!^!TO!l!YO#s!{O#t!zO%[#PO%k!xO%o!yO%q!OO%w!|O%x!QO&T!TO&U!TO&Y!}O&^!YO&a#OO&h!YO&i!YO'oQO'r8SO(Q)jO(SYO(V%VO(Y%VO([XO(}!VO)O!WO|'sP|(cP~P%2bOPsO]dOa!ZOdjOlTOr![Os![Ot![Ou![Ov![Ow![Oy!wO{!]O!]!UO!^!TO!l!YO!ouO!p!^O!q!_O!r!_O!s!_O!u!`O!x!aO#S!pO#`jO#p!sO#s!{O#t!zO#y!bO#}!vO$S!mO$T!nO$Z!cO$`!dO$b!eO$c!fO$g!gO$i!hO$k!iO$m!jO$o!kO$q!lO$x!oO$}!qO%Q!rO%V!tO%[#PO%`!uO%k!xO%o!yO%q!OO%w!|O%x!QO&T!TO&U!TO&Y!}O&^!YO&a#OO&h!YO&i!YO'oQO'rRO(SYO(VaO(XfO(YeO(ZoO([XO(}!VO)O!WO~O!S*WO!Y%tO!Z/YO'w(oO~P%AuO!Q*ZO(Z(ma~O(Z/dO~P$#|O(Z/WO~P!6kOr![Os![Ot![Ou![Ov![Ow![O|#Ua!Q#UaQ#Ua!h#Ua(Q#Ua(Z#Ua~P! sO]$oO!Z*qO|#Ua!Q#UaQ#Ua!h#Ua(Z#Ua~O(Q#Ua~P%HTOr![Os![Ot![Ou![Ov![Ow![O#Q)bO#S)cO'x9uO]#Va!S#Va!Z#Va(Z#Va(h#Va~O![/lO(V/mO~P#'hO![/lO~P$#|O![/lO~PNYO]$oO|/nO!Z*qO~O]$oO!Z*qO|#Ya!Q#YaQ#Ya!h#Ya(Z#Ya~O(Q#Ya~P%JfO|/oO~O|/pO~O(Z/rO~O|/sO~P+ZO|/sO(Z#_O~O|/sO~O$^/xOP$Yi]$Yia$Yid$Yil$Yir$Yis$Yit$Yiu$Yiv$Yiw$Yiy$Yi{$Yi!S$Yi!Z$Yi!]$Yi!^$Yi!l$Yi!o$Yi!p$Yi!q$Yi!r$Yi!s$Yi!u$Yi!x$Yi#S$Yi#`$Yi#p$Yi#s$Yi#t$Yi#y$Yi#}$Yi$S$Yi$T$Yi$Z$Yi$`$Yi$b$Yi$c$Yi$g$Yi$i$Yi$k$Yi$m$Yi$o$Yi$q$Yi$x$Yi$}$Yi%Q$Yi%V$Yi%[$Yi%`$Yi%k$Yi%o$Yi%q$Yi%w$Yi%x$Yi&T$Yi&U$Yi&Y$Yi&^$Yi&a$Yi&h$Yi&i$Yi'k$Yi'o$Yi'r$Yi(S$Yi(V$Yi(X$Yi(Y$Yi(Z$Yi([$Yi(}$Yi)O$Yi!Y$Yi~O]/zO~O(Z/|O~P#)yO]$zOdjOl8aO!Z$|O!x!aO#`jO'r8OO(V<^O(X<_O(Y<_O~O(Z0PO~PNYO(Z/|O~O]+hOr![Os![Ot![Ou![Ov![Ow![O!x!aO!y$kO'r+dO(V+eO~O(V0UO~O]$oO!Q0XO!Z0WO(Z(qX~O(Z0[O~O!S}O$Z!cO$`!dO$b!eO$c!fO$g+oO$i!hO$k!iO$m!jO$o!kO$q!lO'r7UOd$Ri!o$Ri!x$Ri#S$Ri#`$Ri#p$Ri#y$Ri#}$Ri$S$Ri$T$Ri$x$Ri$}$Ri%Q$Ri%V$Ri%`$Ri'k$Ri(X$Ri!Y$Ri$^$Ri~P#GcO]0`O~O$z+rOP$wi]$wia$wid$wil$wir$wis$wit$wiu$wiv$wiw$wiy$wi{$wi!S$wi!Z$wi!]$wi!^$wi!l$wi!o$wi!p$wi!q$wi!r$wi!s$wi!u$wi!x$wi#S$wi#`$wi#p$wi#s$wi#t$wi#y$wi#}$wi$S$wi$T$wi$Z$wi$`$wi$b$wi$c$wi$g$wi$i$wi$k$wi$m$wi$o$wi$q$wi$x$wi$}$wi%Q$wi%V$wi%[$wi%`$wi%k$wi%o$wi%q$wi%w$wi%x$wi&T$wi&U$wi&Y$wi&^$wi&a$wi&h$wi&i$wi'k$wi'o$wi'r$wi(S$wi(V$wi(X$wi(Y$wi(Z$wi([$wi(}$wi)O$wi!Y$wi$^$wi~O]$oO~O!Y0cO~P!QO|0dO!Q0eO~P$#|O!Q0fOQ(jX!h(jX~OQ0hO!h0hO~O(Q0kO(h0jOQ#rX!Q#rX!h#rX~P!3XO(Q0kO(h0jOQ#rX!Q#rX!h#rX~P!2sOp&zO~O]$oO!Z$nO(Z0nO~Ol7{O(Z'}X~P$%qO'r+dO~O|0pO~P$#|O]$oO!Z*qO!S%^i(Z%^i(h%^i~O]$oO!S}O!Z$nO~O!Q0qO(Q0sO!S(PX~Ol$RO'r$QO~Oa!QOl$ROy:{O!o0vO#s7bO#t:}O%k:|O%o7]O%q!OO%w!|O%x!QO'r$QO(SYO~P%2bO(Z0wO~PAnO]0{Ol(PO!S#yO!x!aO#`0}O'r(OO'v1PO(V0xO(X0|O(Y0|O~O(Z1QO(h1SO~P&1XOa!QOl8lOy:{O{!]O!P,mO!Y1VO!o,kO#p,WO#s7bO#t:}O#y!bO$q!lO%Q!rO%j,lO%k:|O%o7]O%q!OO%w!|O%x!QO'r8UO(SYO~PE_O]$zOa!QOdjOl8lOy:{O!Z$|O!x!aO#`jO#s7bO#t:}O%`!uO%k:|O%o7]O%q!OO%w!|O%x!QO'r8UO(V$yO(XfO(YfO~P%2bOa!QOl$ROy1]O#s!{O#t1[O#}!vO%k1^O%o!yO%q!OO%w!|O%x!QO'r$QO(SYO~P%2bO'v1_O~O}1bO]xilxirxisxitxiuxivxiwxi{xi!Zxi!pxi!qxi!rxi!sxi!uxi!xxi#`xi'rxi(Vxi(Xxi(Yxi(Zxi(Qxi(hxi~O!S'TO'v'SOdxi|xi!QxiQxi!hxi~P&6OO}1eO]%mil%mir%mis%mit%miu%miv%miw%mi{%mi!Z%mi!p%mi!q%mi!r%mi!s%mi!u%mi!x%mi#`%mi'r%mi(V%mi(X%mi(Y%mi(Z%mi(Q%mi(h%mi~O!S'TO'v'SOd%mi|%mi!Q%miQ%mi!h%mi~P&8YO(h1fO!Q%sX!Y%sX~O!Q1gO!Y(xX~O!Y1iO~Oa1kOl$RO%q!OO'r$QO~O!S'`O]%nid%nil%nir%nis%nit%niu%niv%niw%ni{%ni!Z%ni!p%ni!q%ni!r%ni!s%ni!u%ni!x%ni#`%ni'r%ni(V%ni(X%ni(Y%ni(Z%ni|%ni!Q%ni(Q%ni(h%niQ%ni!h%ni}%ni#Q%ni#S%ni'x%ni~O'v,yO~P&;[O}1pO'v'SO]%til%tir%tis%tit%tiu%tiv%tiw%ti{%ti!Z%ti!p%ti!q%ti!r%ti!s%ti!u%ti!x%ti#`%ti'r%ti(V%ti(X%ti(Y%ti(Z%ti|%ti!Q%ti(Q%ti(h%tiQ%ti!h%ti~O!S'TOd%ti~P&=oO|1qO~P$#|O|1rO~O!Z&_i~P%'QOPsOa$jOl$aO!]!UO!^!TO!l!YO%[#PO&T!TO&U!TO&Y!}O&^!YO&a#OO&h!YO&i!YO'oQO'r$_O([XO(}!VO)O!WO]&fa!S&fa!Z&fa(V&fa(X&fa(Y&fa~O)Q1vO~O'r&rO(Q1wO|)SP~O&k1yO~OlmXpnXp%{X~Od1{O#`1{O'y-`O~O!Q-eO|'sa~O]$oO!Z*qO!S%^q(Z%^q(h%^q~O]#pO!S#yO!Q&_q!]&_q!^&_q!`&_q!b&_q!c&_q!e&_q!f&_q!g&_q!i&_q!j&_q'u&_q'w&_q'x&_q(Q&_q(V&_q(W&_q(X&_q(Y&_q(Z&_q!k&_q(h&_q|&_q![&_q'v&_q!Y&_qQ&_q!h&_q~O!Z&_q~P&CeO!Z-UO~P&CeO!S#yO!Z(nO'w(oO!Q'ZX!Y'ZX~P!@ZO!Q-nO!Y(ia~O![2WO~P#2[O!Y2[O~P%,VO![2[O~P%,VO|2[O~P%,VO|2aO~P%,VO]2bO!Q&|a(Q&|a(_&|a~O!Q(yO(Q(Ti(_(Ti~O]$oO!Z$nO(Z!}q!Q!}q(h!}q~O|!}qQ!}q!h!}q~P&GnOr![Os![Ot![Ou![Ov![Ow![O})`O#Q)bO#S)cO]#Oq!S#Oq!Z#Oq(h#Oq(Z#Oq!Q#Oq~O'x)_O'v#Oq~P&H^O]&PO!Z&OO|#Ta!Q#Ta(Z#TaQ#Ta!h#Ta~O(V8qO(X8rO(Y8rOr#Tas#Tat#Tau#Tav#Taw#Ta}#Ta!S#Ta#Q#Ta#S#Ta'v#Ta'x#Ta(h#Ta~P&IiOa!QOl$ROy7WO#s7`O#t<VO%k7YO%o7[O%q!OO%w!|O%x!QO'r$QO~O|2jO~PNYO|(eP~P!*qO![2mO~P$#|O![2mO~PNYO].lOdjOl$xO!Z.kO!x!aO#`jO'r$_O(V:dO(X2oO(Y2oO~O|!|a!Q!|aQ!|a!h!|a~P&LiO].lOdjOr![Os![Ot![Ou![Ov![Ow![O!Z.kO!x!aO!y$kO#`jO'r$_O|#UX!Q#UXQ#UX!h#UX~Ol8aO(V.iO(X:mO(Y:mO~P&MkO]$oO|!|a!Q!|aQ!|a!h!|a~O!Z*qO~P' SO].lOa!QOdjOl8cOy!wO!Z.kO!x!aO#`jO#s!{O#t!zO%k!xO%o!yO%q!OO%w!|O%x!QO'r8QO(Q)jO(SYO(V:dO(X2oO(Y2oO|(cP~P%2bO(X:mO(Y:mO|#YX!Q#YXQ#YX!h#YX~P%:PO!Z$nO(h2sO~P' SO'r&rO|#eX!Q#eXQ#eX!h#eX~O(Q2vO(SYO~P4fO!Q.rO|(ca~Or![Os![Ot![Ou![Ov![Ow![O|qiQqi!Qqi!hqi(Qqi(Zqi~P! sO]$oO!Z*qO|qiQqi!Qqi!hqi(Qqi(Zqi~O!Q&Wq(Z&Wq!k&Wq(h&Wq|&Wq![&Wq!Y&WqQ&Wq!h&Wq~P$#|O!Q.zOQ'za!h'za~O!Q'ha!['ha~P$#|O![2}O~O(Q3OO!Q%Xa!S%Xa(h%Xa~O!Q/TO!S(ta(h(ta~O!Q3RO(Z#_O!Y(iX~P$#|O!Q#{i(Z#{i~P$#|O]*VO!S#yO!Z$nO(h*XO!Q']a(Z']a~O(Z3TO~P$#|O]$oO!Z*qO|#Ui!Q#UiQ#Ui!h#Ui(Z#Ui~O(Q#Ui~P'(yOr![Os![Ot![Ou![Ov![Ow![O#Q)bO#S)cO]#Vi!Z#Vi(Z#Vi~O'x9uO!S#Vi(h#Vi~P')iO![3VO~P$#|O![3VO(V3XO~P#'hO![3VO~PNYO(Z3YO~O]*VO!Q*ZO!S#yO!Z$nO(Z(mX~O(h3ZO~P'+YO|3]O~P#)yO|3]O~O$^3_OP$Yq]$Yqa$Yqd$Yql$Yqr$Yqs$Yqt$Yqu$Yqv$Yqw$Yqy$Yq{$Yq!S$Yq!Z$Yq!]$Yq!^$Yq!l$Yq!o$Yq!p$Yq!q$Yq!r$Yq!s$Yq!u$Yq!x$Yq#S$Yq#`$Yq#p$Yq#s$Yq#t$Yq#y$Yq#}$Yq$S$Yq$T$Yq$Z$Yq$`$Yq$b$Yq$c$Yq$g$Yq$i$Yq$k$Yq$m$Yq$o$Yq$q$Yq$x$Yq$}$Yq%Q$Yq%V$Yq%[$Yq%`$Yq%k$Yq%o$Yq%q$Yq%w$Yq%x$Yq&T$Yq&U$Yq&Y$Yq&^$Yq&a$Yq&h$Yq&i$Yq'k$Yq'o$Yq'r$Yq(S$Yq(V$Yq(X$Yq(Y$Yq(Z$Yq([$Yq(}$Yq)O$Yq!Y$Yq~O(Z3`O~O(Z3bO~PNYO'v3cO(h*XO~P'+YO(Z3bO~P$#|O|3eO~PNYO(Z3gO~O]+hOr![Os![Ot![Ou![Ov![Ow![O!x!aO'r+dO(V+eO~O]$oO!Z0WO!Q$ra(Z$ra|$ra~O![3mO(V3nO~P#'hO!Q0XO(Z(qa~O]$oO|3qO!Z0WO~O!S}O$Z!cO$`!dO$b!eO$c!fO$g+oO$i!hO$k!iO$m!jO$o!kO$q!lO'r7UOd$Rq!o$Rq!x$Rq#S$Rq#`$Rq#p$Rq#y$Rq#}$Rq$S$Rq$T$Rq$x$Rq$}$Rq%Q$Rq%V$Rq%`$Rq'k$Rq(X$Rq!Y$Rq$^$Rq~P#GcO(Z3sO~OP3tO'oQO~O!Q0fOQ(ja!h(ja~Op%PO(h3xOQ#ral'}X!Q#ra!h#ra(Q'}X~P$%qOa!QOl$ROy7VO#s7_O#t7^O%k7XO%o7ZO%q!OO%w!|O%x!QO'r$QO~O'r+dOQ#va!Q#va!h#va~Op%PO(h3xOQ#ra](OXd(OXl(OXr(OXs(OXt(OXu(OXv(OXw(OX{(OX}(OX!Q#ra!S(OX!Z(OX!h#ra!p(OX!q(OX!r(OX!s(OX!u(OX!x(OX#`(OX'r(OX'v(OX(Q(OX(V(OX(X(OX(Y(OX~O#s3{O#t3{O~Ol$RO!P4OO'r$QO~O!Q0qO!S(Pa~O!Q0qO(Q4RO!S(Pa~O(Z4TO(h4VO~P&1XOa!QOl$ROy:{O#s7bO#t:}O%k:|O%o7]O%q!OO%w!|O%x!QO'r$QO~P%2bO]0{Ol(POr![Os![Ot![Ou![Ov![Ow![O!x!aO!y$kO#`0}O'r(OO(V0xO(X0|O(Y0|O~O(V4[O~O]$oO!Q4_O!S*WO!Z4^O'v1PO~O(Z4TO(h4aO~P'<uO]0{Ol(PO!x!aO#`0}O'r(OO(V=TO(X;qO(Y;qO~O]0{Ol(PO!x!aO#`0}O'r(OO(V0xO(X0|O(Y0|O~Op%PO](bX!Q(bX!S(bX!Z(bX'v(bX(Z(bX(h(bX|(bX~O(Z4TO~O(Z4gO~PAnOl)PO(Z(OX~P$%qOp%POl'}X(Z(OX~P$%qO(Z4hO~O'r&rO!Q'fX!Y'fX~O!Q1gO!Y(xa~Op%PO](wad(wal(war(was(wat(wau(wav(waw(wa{(wa!S(wa!Z(wa!p(wa!q(wa!r(wa!s(wa!u(wa!x(wa#`(wa'r(wa(V(wa(X(wa(Y(wa(Z(wa|(wa!Q(wa!](wa!^(wa!`(wa!b(wa!c(wa!e(wa!f(wa!g(wa!i(wa!j(wa'u(wa'w(wa'x(wa(Q(wa(W(wa!k(wa(h(waQ(wa!h(wa![(wa'v(wa!Y(wa}(wa#Q(wa#S(wa~O!S'`O]%nqd%nql%nqr%nqs%nqt%nqu%nqv%nqw%nq{%nq!Z%nq!p%nq!q%nq!r%nq!s%nq!u%nq!x%nq#`%nq'r%nq(V%nq(X%nq(Y%nq(Z%nq|%nq!Q%nq(Q%nq(h%nqQ%nq!h%nq}%nq#Q%nq#S%nq'x%nq~OPsOa$jO!S#yO!l!YO&^!YO&h!YO&i!YO'oQO'r$_O([XO(}!VO)O!WO](|i!Z(|i!](|i!^(|i!`(|i!b(|i!c(|i!e(|i!f(|i!g(|i!i(|i!j(|i'u(|i'w(|i'x(|i(Q(|i(V(|i(W(|i(X(|i(Y(|i!k(|i(h(|i~Ol$aO%[#PO&T!TO&U!TO&Y!}O&a#OO!Q(|i(Z(|i|(|i![(|i!Y(|iQ(|i!h(|i~P'FUO|4vO~O![4wO~P$#|O!Q&cq(Z&cq!k&cq(h&cq|&cq![&cq!Y&cqQ&cq!h&cq~P$#|O!Q4xO|)SX~O|4zO~O)Q4{O~O!Q^y(Z^y!k^y(h^y|^y![^y!Y^yQ^y!h^y~P$#|O|'ia!Q'ia~P$#|O]#pO!S#yO!Q&_y!Z&_y!]&_y!^&_y!`&_y!b&_y!c&_y!e&_y!f&_y!g&_y!i&_y!j&_y'u&_y'w&_y'x&_y(Q&_y(V&_y(W&_y(X&_y(Y&_y(Z&_y!k&_y(h&_y|&_y![&_y'v&_y!Y&_yQ&_y!h&_y~O!Q&cy(Z&cy!k&cy(h&cy|&cy![&cy!Y&cyQ&cy!h&cy~P$#|O]$oO!Z*qO!S%^y(Z%^y(h%^y~O!Q'Za!Y'Za~P$#|O![2WO~P$#|O!Q#li!Y#li~P$#|O!Y4}O~P%,VO![4}O~P%,VO|4}O~P%,VO|5PO~P%,VO]$oO!Z$nO(Z!}y!Q!}y(h!}y~O|!}yQ!}y!h!}y~P( wOr#Tis#Tit#Tiu#Tiv#Tiw#Ti}#Ti!S#Ti#Q#Ti#S#Ti'v#Ti'x#Ti(h#Ti|#Ti!Q#Ti(Z#TiQ#Ti!h#Ti~O]$oO!Z*qO~P(!gO]&PO!Z&OO(V8qO(X8rO(Y8rO~P(!gO|5RO~P$#|O!Q5SO|(eX~O|5UO~O]$oO|!|i!Q!|iQ!|i!h!|i~O!Z*qO~P($tO|#YX!Q#YXQ#YX!h#YX~P&LiO!Z$nO~P($tO]'SXd&vXl&vXr'SXs'SXt'SXu'SXv'SXw'SX|'SX!Q'SX!Z'SX!x&vX#`&vX'r&vX(V'SX(X'SX(Y'SXQ'SX!h'SX~O|#ci!Q#ciQ#ci!h#ci~P$#|O]$oO!Z*qO|qqQqq!Qqq!hqq(Qqq(Zqq~OQ({X!Q({X!h({X~P$#|O(Q5WOQ(zX!Q(zX!h(zX~O![5YO~P$#|O![5YO~PNYO|$]i!Q#{a(Z#{a~O(Z5]O~P$#|O|5_O~PNYO|5_O~P#)yO|5_O~O]$oO!Z0WO!Q$ri(Z$ri|$ri~O![5fO~P$#|O![5fO(V5hO~P#'hO![5fO~PNYO]$oO!Z0WO!Q'`a(Z'`a~OP%eO|5iO'oQO~O|5iO~O'r+dO(Q0kO(h0jOQ#rX!Q#rX!h#rX~O(Q5lO!Q&wa!S&wa~O!Q0qO!S(Pi~O(Z5pO(h5rO~P'<uO(Z5pO~O(Z5pO(h5vO~P&1XOr![Os![Ot![Ou![Ov![Ow![O~P'=|O]$oO!Z4^O!Q!va!S!va'v!va(Z!va(h!va~Or![Os![Ot![Ou![Ov![Ow![O}5zO#Q)bO#S)cO]!za!Z!za~O'x)_O!Q!za!S!za'v!za(Z!za(h!za~P(-oO![6OO(V6PO~P#'hO!Q4_O!S#yO'v1PO(Z5pO(h5vO~O!S#yO~P#=TO]$oO|6SO!Z4^O~O]$oO!Z4^O!Q#ia!S#ia'v#ia(Z#ia(h#ia~O(Z#ja~P$#|O(Z5pO~P$#|O}-PO'v'SO]%tal%tar%tas%tat%tau%tav%taw%ta{%ta!Z%ta!p%ta!q%ta!r%ta!s%ta!u%ta!x%ta#`%ta'r%ta(V%ta(X%ta(Y%ta~O!S'TO(Z6TOd%ta~P(0pO(Z6TO~P$0`O(Z6TO~P$3YO!Q%si!Y%si~P$#|O!Z-UO]&bi!Q&bi!S&bi!]&bi!^&bi!`&bi!b&bi!c&bi!e&bi!f&bi!g&bi!i&bi!j&bi'u&bi'w&bi'x&bi(Q&bi(V&bi(W&bi(X&bi(Y&bi(Z&bi!k&bi(h&bi|&bi![&bi'v&bi!Y&biQ&bi!h&bi~O'r&rO(Q6YO~O!Q4xO|)Sa~O|6[O~P%,VO]$oO!Z*qO|#Tq!Q#Tq(Z#TqQ#Tq!h#Tq~Or#Tqs#Tqt#Tqu#Tqv#Tqw#Tq}#Tq!S#Tq#Q#Tq#S#Tq'v#Tq'x#Tq(h#Tq~P(5lO!Q5SO|(ea~O|#cq!Q#cqQ#cq!h#cq~P$#|O!Y'Za(Z$Xi~P#)yO|$]q!Q#{i(Z#{i~P$#|O|6`O~PNYO|6`O~P#)yO|6`O~O|6cO~P$#|O|6cO~O]$oO!Z0WO!Q$rq(Z$rq|$rq~O![6eO~P$#|O![6eO~PNYO(Z6fO~O(h3xOQ#ra!Q#ra!h#ra~O(Q6gO!Q&wi!S&wi~O!Q0qO!S(Pq~O!Q4_O!S#yO'v1PO(Z6hO(h6jO~O(Z6hO~O(Z6hO~P$#|O(Z6hO(h6mO~P'<uO]$oO!Z4^O!Q!vi!S!vi'v!vi(Z!vi(h!vi~Or![Os![Ot![Ou![Ov![Ow![O}5zO#Q)bO#S)cO]!zi!Z!zi~O'x)_O!Q!zi!S!zi'v!zi(Z!zi(h!zi~P(;kO![6rO~P$#|O![6rO(V6tO~P#'hO![6rO~PNYO]$oO!Z4^O!Q'Xa!S'Xa'v'Xa(Z'Xa(h'Xa~O|6uO~P#)yO|6uO~O]$oO!Z0WO!Q$ry(Z$ry|$ry~O(Z6xO~O(Z6xO~P$#|O!Q4_O!S#yO'v1PO(Z6xO(h6{O~O]$oO!Z4^O!Q!vq!S!vq'v!vq(Z!vq(h!vq~O![6}O~P$#|O![6}O~PNYO(Z7PO~P$#|O(Z7PO~O]$oO!Z4^O!Q!vy!S!vy'v!vy(Z!vy(h!vy~O(Z7SO~P$#|O(Z7SO~O]ZXlgXpZXpiX!QZX!SiX!ZZX!]ZX!^ZX!`ZX!bZX!cZX!eZX!fZX!gZX!iZX!jZX!kZX'uZX'v$VX'wZX'xZX(QZX(VZX(WZX(XZX(YZX(ZZX(hZX~Ol$ROy9QO!S'`O#t9QO'r$QO~Ol$ROy9RO!S'`O#t9RO'r$QO~Ol$ROy9SO!S'`O#t9SO'r$QO~Oa!QOl$ROy;|O#s7aO#t<UO%k<QO%o7[O%q!OO%w!|O%x!QO'r$QO~Oa!QOl$ROy:{O#s7bO#t:}O%k:|O%o7]O%q!OO%w!|O%x!QO'r$QO~O]#pO~P(C}OPsO];cOa$jOl8YO!]:zO!^:yO!l!YO%[7dO&T:yO&U:yO&Y;OO&^!YO&a7cO&h!YO&i!YO'oQO'r$_O(V8jO(Y8jO([XO(}!VO)O!WO~O!Z;hO~P(EnOl8YO%[7dO&T:yO&U:yO&Y;OO&a7cO'v&Va~P!9^O]#_XlmXpnXp#_X!Q#_X!SnX!Z#_X!]#_X!^#_X!`#_X!b#_X!c#_X!e#_X!f#_X!g#_X!i#_X!j#_X!kmX'u#_X'w#_X'x#_X(Q#_X(V#_X(W#_X(X#_X(Y#_X(hmX|#_XQ#_X!h#_X~O(Z#_X![#_X'v#_X!Y#_X~P(GvO]nX]#_XdnXlmXpnXp#_XrnXsnXtnXunXvnXwnX{nX!ZnX!Z#_X!pnX!qnX!rnX!snX!unX!xnX#`nX'rnX(VnX(XnX(YnX|nX|#_X!QnX(QnX~O(ZnX(hnX~P(JWO]#_XlmXpnXp#_X!Q#_X!Z#_X|#_XQ#_X!h#_X~O!S#_X(Z#_X(h#_X'v#_X~P(LbOQnXQ#_X!QnX!hnX!h#_X(QnX~P!<nO]nX]#_XlmXpnXp#_XrnXsnXtnXunXvnXwnX{nX!SnX!Z#_X!pnX!qnX!rnX!snX!unX!xnX#`nX'rnX(VnX(XnX(YnX~O'vnX(ZnX(hnX~P(MwOdnX|#_X!Q#_X!ZnX!]#_X!^#_X!`#_X!b#_X!c#_X!e#_X!f#_X!g#_X!i#_X!j#_X!kmX'u#_X'w#_X'x#_X(Q#_X(V#_X(W#_X(X#_X(Y#_X(Z#_X(hmX~P(MwO]nX]#_XdnXlmXpnXp#_XrnXsnXtnXunXvnXwnX{nX!ZnX!Z#_X!pnX!qnX!rnX!snX!unX!xnX#`nX'rnX(VnX(XnX(YnX(Z#_X~OlmXpnX(Z#_X~O!Z;lO~P(EnOd(kO#`(kO%_(lO'y7oO~Od(kO#`(kO%_(lO'y7sO~Od(kO#`(kO%_(lO'y7pO~O]iXriXsiXtiXuiXviXwiX|iX!ZiX(ViX(XiX(YiXdiX{iX!piX!qiX!riX!siX!uiX!xiX#`iX'riX~P!MTO]ZXlgXpZXpiX!QZX!ZZX(ZZX(hZX~O!SZX'vZX~P)(VOlgXpiX(ZZX(hiX~O]ZX]iXdiXlgXpZXpiXriXsiXtiXuiXviXwiX{iX!ZZX!ZiX!piX!qiX!riX!siX!uiX!xiX#`iX'riX(ViX(XiX(YiX|ZX|iX!QiX(QiX(hiX~O(ZZX~P))ZO]ZX]iXlgXpZXpiXriXsiXtiXuiXviXwiX!QZX!QiX!SiX!ZZX!ZiX!]ZX!^ZX!`ZX!bZX!cZX!eZX!fZX!gZX!iZX!jZX!kZX'uZX'wZX'xZX(QZX(QiX(VZX(ViX(WZX(XZX(XiX(YZX(YiX(hZX~OQZXQiX!hZX!hiX~P)+eOdiX{iX|ZX|iX!piX!qiX!riX!siX!uiX!xiX#`iX'riX(hiX~P)+eO]iXdiXriXsiXtiXuiXviXwiX{iX!ZiX!piX!qiX!riX!siX!uiX!xiX#`iX'riX(ViX(XiX(YiX~P!MTO]ZX]iXlgXpZXpiXriXsiXtiXuiXviXwiX{iX!ZZX!piX!qiX!riX!siX!uiX!xiX#`iX'riX(ViX(XiX(YiX(ZiX~O!SiX'viX(hiX~P)0wOdiX!ZiX~P)0wO!]7nO'v%|a~P# eOd#tO#`#tO&`7wO&d7xO'y7oO~Od#tO#`#tO&`#vO&d#wO'y7rO~Od#tO#`#tO&`#vO&d#wO'y7tO~Ol)VO!k7|O(h7|O~Or![Os![Ot![Ou![Ov![Ow![O~PDQOr![Os![Ot![Ou![Ov![Ow![O!y$kO~PDQOd#tO#`#tO'y7qO~Od#tO#`#tO'y7vO~Od#tO#`#tO'y7pO~Od#tO#`#tO'y7uO~O]$zOdjOl8aOr![Os![Ot![Ou![Ov![Ow![O!Z$|O!x!aO!y$kO#`jO'r$_O(V8fO(X8hO(Y8hO~O]$zOdjOl8aO!Z$|O!x!aO#`jO'r$_O(V8fO(X8hO(Y8hO~Od#tO#`#tO%_#uO'y7pO~Od#tO#`#tO%_#uO'y7sO~Ol7{O~Ol7zO~O!k7|O(h7|O]'tX!Z'tX!]'tX!^'tX!`'tX!b'tX!c'tX!e'tX!f'tX!g'tX!i'tX!j'tX'u'tX'v'tX'w'tX'x'tX(Q'tX(V'tX(W'tX(X'tX(Y'tX~Op%PO~P)9ZO!]7nO'v&Va~P#APO]&POr![Os![Ot![Ou![Ov![Ow![O!Z&OO(V8qO(X8rO(Y8rO~O}#UX!S#UX#Q#UX#S#UX'v#UX'x#UX(h#UX|#UX!Q#UX(Z#UXQ#UX!h#UX~P);VO]&PO!Z&OO(V8qO(X8rO(Y8rO~Or#YXs#YXt#YXu#YXv#YXw#YX}#YX!S#YX#Q#YX#S#YX'v#YX'x#YX(h#YX|#YX!Q#YX(Z#YXQ#YX!h#YX~P)<tO},pO]xa!Sxa!Zxa!]xa!^xa!`xa!bxa!cxa!exa!fxa!gxa!ixa!jxa'uxa'wxa'xxa(Qxa(Vxa(Wxa(Xxa(Yxa(Zxa!kxa(hxa~O'v'SO!Qxa|xa![xa!YxaQxa!hxa~P)>cO'v'SO]xarxasxatxauxavxawxa}xa!Zxa#Qxa#Sxa'xxa(Vxa(Xxa(Yxa(Zxa!Qxa(hxa~O!S'TO|xaQxa!hxa~P)@mO!Sxa~P)@mO'vxalxarxasxatxauxavxawxa{xa!pxa!qxa!rxa!sxa!uxa!xxa#`xa'rxa~P)>cO},tO]%ma!S%ma!Z%ma!]%ma!^%ma!`%ma!b%ma!c%ma!e%ma!f%ma!g%ma!i%ma!j%ma'u%ma'w%ma'x%ma(Q%ma(V%ma(W%ma(X%ma(Y%ma(Z%ma!k%ma(h%ma~O'v'SO!Q%ma|%ma![%ma!Y%maQ%ma!h%ma~P)ClO'v'SO]%mar%mas%mat%mau%mav%maw%ma}%ma!Z%ma#Q%ma#S%ma'x%ma(V%ma(X%ma(Y%ma(Z%ma!Q%ma(h%ma~O!S'TO|%maQ%ma!h%ma~P)EvO!S%ma~P)EvO'v%mal%mar%mas%mat%mau%mav%maw%ma{%ma!p%ma!q%ma!r%ma!s%ma!u%ma!x%ma#`%ma'r%ma~P)ClO!S%na!]%na!^%na!`%na!b%na!c%na!e%na!f%na!g%na!i%na!j%na'u%na'w%na(W%na!k%na![%na!Y%na~P$5}O!S%ta!]%ta!^%ta!`%ta!b%ta!c%ta!e%ta!f%ta!g%ta!i%ta!j%ta'u%ta'w%ta'x%ta(W%ta!k%ta![%ta!Y%ta~P$8mO'v'SO]%tar%tas%tat%tau%tav%taw%ta}%ta!Z%ta#Q%ta#S%ta'x%ta(V%ta(X%ta(Y%ta(Z%ta!Q%ta(h%ta~O!S'TO|%taQ%ta!h%ta~P)K[O!S%ta~P)K[O!]7nO!^7eO!`7fO!j7mO'v&Xa~P$;YO'v&ca!k&ca(h&ca~P#NZO]cXlgXpiX!ScX~O]#pO!Z#aO!]7nO!`7fO'w#`O'x#`O(V#bO!b&Oi!c&Oi!e&Oi!f&Oi!g&Oi!i&Oi!j&Oi'u&Oi'v&Oi(Q&Oi(W&Oi(X&Oi(Y&Oi!k&Oi(h&Oi~O!^&Oi~P)NQO]#pO!Z#aO!]7nO'w#`O'x#`O!b&Oi!c&Oi!e&Oi!f&Oi!g&Oi!i&Oi!j&Oi'u&Oi'v&Oi(Q&Oi(W&Oi(X&Oi(Y&Oi!k&Oi(h&Oi~O!^&Oi!`&Oi(V&Oi~P* oO]#pO!Z#aO!]7nO!^7eO!`7fO!c7iO!e7kO!f7lO!g7lO!i7lO!j7mO'w#`O'x#`O(V#bO(Y#dO'u&Oi'v&Oi(Q&Oi(W&Oi(X&Oi!k&Oi(h&Oi~O!b7hO~P*#^O!b&Oi~P*#^O]#pO!Z#aO!]7nO!^7eO!`7fO!e7kO!f7lO!g7lO!i7lO!j7mO'w#`O'x#`O(V#bO!b&Oi!c&Oi'u&Oi'v&Oi(Q&Oi(W&Oi(X&Oi!k&Oi(h&Oi~O(Y#dO~P*%SO(Y&Oi~P*%SO]#pO!Z#aO!]7nO!^7eO!`7fO!j7mO'w#`O'x#`O(V#bO!b&Oi!c&Oi!e&Oi'u&Oi'v&Oi(Q&Oi(W&Oi(X&Oi(Y&Oi!k&Oi(h&Oi~O!f7lO!g7lO!i7lO~P*&xO!f&Oi!g&Oi!i&Oi~P*&xO!^7eO~P)NQO]#pO!Z#aO!]7nO!^7eO!`7fO!b7hO!c7iO!e7kO!f7lO!g7lO!i7lO!j7mO'w#`O'x#`O(V#bO(W#cO(X#cO(Y#dO~O'u&Oi'v&Oi(Q&Oi!k&Oi(h&Oi~P*({O'v&ci!k&ci(h&ci~P#NZO(Q#oO'u_i'v_i!k_i(h_i~P*({Od(kO#`(kO'y#qO~Od(kO#`(kO'y7qO~Od(kO#`(kO'y7vO~Od(kO#`(kO'y7uO~Od(kO#`(kO'y7pO~Od(kO#`(kO'y7rO~Od(kO#`(kO'y7tO~Or![Os![Ot![Ou![Ov![Ow![O~P)7qOr![Os![Ot![Ou![Ov![Ow![O~P!5vOr![Os![Ot![Ou![Ov![Ow![O})`O#Q)bO#S)cO'x<nO]#Oi!Z#Oi|#Oi(Z#Oi!Q#Oi(h#OiQ#Oi!h#Oi~O!S#yO~P!+xO}#Ua!S#Ua#Q#Ua#S#Ua'v#Ua'x#Ua(h#Ua|#Ua!Q#Ua(Z#UaQ#Ua!h#Ua~P);VOr#Uas#Uat#Uau#Uav#Uaw#Ua}#Ua!S#Ua#Q#Ua#S#Ua'v#Ua'x#Ua(h#Ua~P%HTOr#Yas#Yat#Yau#Yav#Yaw#Ya}#Ya!S#Ya#Q#Ya#S#Ya'v#Ya'x#Ya(h#Ya~P%JfO]'}Xr'}Xs'}Xt'}Xu'}Xv'}Xw'}X{'}X!p'}X!q'}X!r'}X!s'}X!u'}X!x'}X#`'}X'r'}X(V'}X(X'}X(Y'}X(h'}X~Ol7zO!S'}X'v'}X(Z'}X~P*2OO}1bO]xi!Sxi!Zxi!]xi!^xi!`xi!bxi!cxi!exi!fxi!gxi!ixi!jxi'uxi'wxi'xxi(Qxi(Vxi(Wxi(Xxi(Yxi(Zxi!kxi(hxi~O'v'SO!Qxi|xi![xi!YxiQxi!hxi~P*3pO'v'SO]xirxisxitxiuxivxiwxi}xi!Zxi#Qxi#Sxi'xxi(Vxi(Xxi(Yxi(Zxi!Qxi(hxi~O!S'TO|xiQxi!hxi~P*5zO!Sxi~P*5zO!Sxi!]xi!^xi!`xi!bxi!cxi!exi!fxi!gxi!ixi!jxi'uxi'vxi'wxi'xxi(Wxi!kxi~P&6OO}1eO]%mi!S%mi!Z%mi!]%mi!^%mi!`%mi!b%mi!c%mi!e%mi!f%mi!g%mi!i%mi!j%mi'u%mi'w%mi'x%mi(Q%mi(V%mi(W%mi(X%mi(Y%mi(Z%mi!k%mi(h%mi~O'v'SO!Q%mi|%mi![%mi!Y%miQ%mi!h%mi~P*8yO'v'SO]%mir%mis%mit%miu%miv%miw%mi}%mi!Z%mi#Q%mi#S%mi'x%mi(V%mi(X%mi(Y%mi(Z%mi!Q%mi(h%mi~O!S'TO|%miQ%mi!h%mi~P*;TO!S%mi~P*;TO!S%mi!]%mi!^%mi!`%mi!b%mi!c%mi!e%mi!f%mi!g%mi!i%mi!j%mi'u%mi'v%mi'w%mi'x%mi(W%mi!k%mi~P&8YO'v,yO]%ni!Q%ni!S%ni!Z%ni!]%ni!^%ni!`%ni!b%ni!c%ni!e%ni!f%ni!g%ni!i%ni!j%ni'u%ni'w%ni'x%ni(Q%ni(V%ni(W%ni(X%ni(Y%ni(Z%ni!k%ni(h%ni|%ni![%ni!Y%niQ%ni!h%nir%nis%nit%niu%niv%niw%ni}%ni#Q%ni#S%ni~O!S%ti!]%ti!^%ti!`%ti!b%ti!c%ti!e%ti!f%ti!g%ti!i%ti!j%ti'u%ti'w%ti'x%ti(W%ti!k%ti![%ti!Y%ti~P&=oO'v'SO]%tir%tis%tit%tiu%tiv%tiw%ti}%ti!Z%ti#Q%ti#S%ti'x%ti(V%ti(X%ti(Y%ti(Z%ti!Q%ti(h%ti~O!S'TO|%tiQ%ti!h%ti~P*BOO!S%ti~P*BOOPsOa$jOl8YO!]:zO!^:yO!l!YO%[7dO&T:yO&U:yO&Y;OO&^!YO&a7cO&h!YO&i!YO'oQO'r$_O([XO(}!VO)O!WO]&fa!S&fa!Z&fa(V&fa(X&fa(Y&fa~O]%{XlmXpnX!S%{X~Od1{O#`1{O'y:[O~Or![Os![Ot![Ou![Ov![Ow![O})`O#Q)bO#S)cO]#Oq!Z#Oq(Z#Oq!Q#Oq(h#Oq~O'x<nO|#OqQ#Oq!h#Oq~P*FOO!S#Ta(Z#Ta(h#Ta~P$*sOl$xO(V:dO(X2oO(Y2oO~P&MkO'v&Wq!k&Wq(h&Wq~P#NZOr#Uis#Uit#Uiu#Uiv#Uiw#Ui}#Ui!S#Ui#Q#Ui#S#Ui'v#Ui'x#Ui(h#Ui~P'(yOl8YO%[7dO&T:yO&U:yO&Y;OO&a7cO'v(|i~P'FUO'v&cq!k&cq(h&cq~P#NZO'v^y!k^y(h^y~P#NZO'v&cy!k&cy(h&cy~P#NZO]$oO!Z*qO!S#Ti(Z#Ti(h#Ti~O!S#Ti(Z#Ti(h#Ti~P$*sOdjOl8aO!x!aO#`jO'r$_O~O].lO!Z.kO(V.iO(X:mO(Y:mO|#YX!Q#YXQ#YX!h#YX~P*KXO'x<nO|!za~P(-oO]$oO!Z4^O|#ia~O]$oO!Z*qO!S#Tq(Z#Tq(h#Tq~O]$oO!Z4^O|!vi~O'x<nO|!zi~P(;kO]$oO!Z4^O|!vq~O]$oO!Z4^O|!vy~O(V8`O~OPsOa$jOl8YO!Z%XO!]:zO!^:yO!l!YO%[7dO&T:yO&U:yO&Y;OO&^!YO&a7cO&h!YO&i!YO'oQO'r$_O(V8jO(Y8jO([XO(}!VO)O!WO~O]<|O(Q'nO~P*NTOl9jO~Ol9kO~Ol9lO~Ol9mO~Ol9nO~Ol9oO~Ol9pO~Ol9jO!k#{O(h#{O~Ol9oO!k#{O(h#{O~Ol9pO!k#{O(h#{O~Or![Os![Ot![Ou![Ov![Ow![O})`O!u!`O#Q)bO#S)cO]#Oa!Z#Oa(Z#Oa!Q#Oa(h#Oa~O'x<nO|#OaQ#Oa!h#Oa~P+#]Ol9oO!S#yOQ'}X!Q'}X!h'}X(Q'}X|'}X(h'}X~P$%qOl9pO!S#yO~P$%qO|9wO~O!S#]a'v#]a~P#-vOl9nO|'}X!Q'}X(Q'}X(h'}X~P$%qO![:YO~P$@SO'v:ZO~P#NZOd-aO#`-aO'y:[O~Ol:]O~O![:^O~P$@SO!S!}i'v!}i~P%4tO!u!`O~P*-yO|:gO~O!S!}q'v!}q~P&GnO!S!}y'v!}y~P( wOr![Os![Ot![Ou![Ov![Ow![O~P'=bOr![Os![Ot![Ou![Ov![Ow![O!y$kO~P'=bO]$oO!Z4^O|!va~Ol$ROy<hO!S'`O#t<hO'r$QO~Oa!QOl$ROy;zO#s<WO#t<TO%k<OO%o7ZO%q!OO%w!|O%x!QO'r$QO~Oa!QOl$ROy;}O#s<YO#t<VO%k<RO%o<SO%q!OO%w!|O%x!QO'r$QO~Or![Os![Ot![Ou![Ov![Ow![O~P&#SOr![Os![Ot![Ou![Ov![Ow![O!y$kO~P&#SOr![Os![Ot![Ou![Ov![Ow![O~P+)jOy;}O#s<YO%k<RO%o<SO~P%6rOr![Os![Ot![Ou![Ov![Ow![O})`O#Q)bO#S)cO'x<pO]#Oi!Q#Oi!S#Oi!Z#Oi(Z#Oi(h#Oi~O'x<pO~P&H^O(V;]O~O!S!}a'v!}a~P#%bO'x<oO|#VX!Q#VXQ#VX!h#VX(Q#VX~P#CzO!S#YX(Z#YX(h#YX~P$*sOr![Os![Ot![Ou![Ov![Ow![O!S#Ua(Z#Ua(h#Ua~P$*sOr![Os![Ot![Ou![Ov![Ow![O#Q)bO#S)cO'x<oO]#Va|#Va!Z#Va!Q#VaQ#Va!h#Va(Q#Va(Z#Va~O]$oO!Z*qO!S#Ya(Z#Ya(h#Ya~O]$oO!Z*qO!S#Ui(Z#Ui(h#Ui~O'x<oO|#Vi!Q#ViQ#Vi!h#Vi(Q#Vi~P')iO(V;vO~O(V%{O(X&QO(Y&QO(Q#Ta~P&IiO|#Ti!Q#TiQ#Ti!h#Ti(Q#Ti(Z#Ti~O]$oO!Z*qO~P+2sO]&PO!Z&OO(V%{O(X&QO(Y&QO~P+2sO(Q#Tq~P(5lO(V<]O~O'x<pO~P#&YO!u!`O~P+,{O!S!}a~P#%bO!S#]a~P#-vOr![Os![Ot![Ou![Ov![Ow![O!S#UX(Z#UX(h#UX~P$*sO!S!}i~P%4tO]$oO!Z*qO!S#Ua(Z#Ua(h#Ua~O!S!}q~P&GnO!S!}y~P( wOV&j&m'o([!W#`'r'y&n&lST!`!^d!b!l'w&U]&k)T&p&o!j!c&q&r&q~",goto:"%2f)TPPPPPP)UP)XPP-W3RP6d6d9wP9w=^P>P>k?XGp!!c!+W!3_P!;z!<p!=fP!>RPPPPPP!>oP!@iPPP!CVPP!EgP!G}!HR!HtP!HzPPPPP!H}P!H}PP!H}PPPPPPPP!IZ!LzPPPPP!L}P>S!N`PP>S#!y#%v#&T#'p#)gP#)gP#*V#*y#+m#*y#*y#*y#&T#&T#&T#,c#1aP#2P#&T#%v#%v#6w#6}>S>S>S#7Q#7e#9l#9t#9t#9{P#:]#:dPP#:d#:d#:k#9{P#:o#;`#;kP#;}#=w#>Q#>ZPP#>p#?Z#?w#@e#>pP#Ar#BOP#>pP#>pPP#BR#>p#>pP#>pP#>pP#>pP#>pP#EcP#Ev#Ev#Ev#Ev#>Z#>ZP#FTP#>Z#=wP#FX#FXP#Ff#=w#=w#I|P#Ja#Jl#Jr#JrP#=w#KhPP#=w#LS#LS!G}!G}!G}!G}!G}!G}PP!G}!>o!>oP#LVP#NS#Nj!>o!>o!>oPP#Np#Ns#Nv$ O9w6d$$]$&a$(R6dPP6d$)y6dP6d6d6dP6dPP$-U6dP$)y$-b6dPPPPPPPPPPP)UP$0m$0s$3w$4W$4^$5Z$5a$5w$6R$7a$8p$9O$9j$9p$:Q$:d$:l$:r$:|$;[$;e$;m$;s$<O$<_$<i$<o$<u$<|$=]$=c$?a$?g$?m$?t$?{PPPPPPPP$@R$@VPPPPP$Gv#Np$Gy$LR$Ns%$UP%$XP%$]%$`PPPPPPPPP%$l%&X%'b%(g%(m%+d%+g%-]P%-c%-g%-j%-p%-|%.W%.a%/`%/{%0R%0l%0|%1P%1a%1n%1z#Np#Ns#Ns%1}PP%2RP%2`%2cR#WP'rsOadei|}!T!U!e!h!m!p!}#P#[#^#a#e#f#g#h#i#j#k#l#m#n#p#w#y#{$n%P%U%V%W%X%d%q%s&O&]&^&b&c&n&s&v&}'j'l'r(h(n)e)g)q)x*O*V*W*X*f*h*q*s*u+U+X+_+k+n+u-U-X-_-e-l-n-s-u.c.g.k.o.z/Y/k/m/x/z/|0P0W0]0`1P1S1f1r2s3R3X3Z3_3b3c3e3l3n4V4^4a5]5_5h5r5v5}6P6`6c6j6m6t6u6{7d7e7f7g7h7i7j7k7l7m7n7x7|8j9w:Y:Z:^:g:y:z;O;c;h;l<x<|U%es%f3tQ&V!^Q's#Qd.P(x-|-}.O.R2]2^2_2b5OR3t0edgOade|}%s&s*W+u#n${fmtu!s$W$f$g$l$y$z%l&{&|'P'T)T)Y)[)i*Z+S+^+l,R,c,i,k.].h.i.l.m/t2o8^8_8`8e8f8g8h9q9r9s9t:_:`:d:m;Z;[;]<Z<[<]<^<_<l<m<rS%Ri/Y&S%y!T!U!e!h!p!}#P#^#a#e#f#g#h#i#j#k#l#m#n#p#w#y#{$n%P%U%V%W%X%d%q&O&]&^&b&c&n&v&}'j'l'r(h(n)e)g)q)x*O*V*X*f*h*q*s*u+U+X+_+k+n-U-X-_-e-l-n-s-u.c.g.o.z/k/m/x/z/|0P0W0]0`1P1S1f1r2s3R3X3Z3_3b3c3e3l3n4V4^4a5]5_5h5r5v5}6P6`6c6j6m6t6u6{;c;h;l<|Q&Z!bQ&u!qQ's#TQ't#QQ'u#RQ)s$|Q*y&UQ+P&[S,v'`1gQ/P)zQ1s-TQ1w-[Q2u.pQ6Y4xQ8i.k!T8o!m#[7d7e7f7g7h7i7j7k7l7m7n7x7|8j9w:Y:Z:^:g:y:z;O<x%b#]S!Z$`$j$p%Q%x%z&d&m&p'k'q'{'|(U(V(W(X(Y(Z([(](^(_(`(a(g(m(t)d)t*g*r+Q+]+w,Y-R-p.f.w.}/X/Z/c/j/v0O1t1u1z1|2R2T2X2Y2i2t2y3W3a3d3k4e4f4p5V5X5Z5^5a5g5t5|6_6k6s6y7Q8W8p9X9Z9]9^9_9`9a9b9c9d9e9f9h9i:e:h:i:j;iQ&X!aQ'p#OQ'w#VQ(f#v[*Y%a)R/]/u/}0^Q*|&WQ-V'oQ-Z'tQ-^'xS-i(e-WQ/S*PS2P-j-kQ4|2QQ9Y7cR9g7w's!YOadei|}!T!U!e!h!m!p!}#P#[#^#a#e#f#g#h#i#j#k#l#m#n#p#w#y#{$n%P%U%V%W%X%d%q%s&O&]&^&b&c&n&s&v&}'j'l'r(h(n)e)g)q)x*O*V*W*X*f*h*q*s*u+U+X+_+k+n+u-U-X-_-e-l-n-s-u.c.g.k.o.z/Y/k/m/x/z/|0P0W0]0`1P1S1f1r2s3R3X3Z3_3b3c3e3l3n4V4^4a5]5_5h5r5v5}6P6`6c6j6m6t6u6{7d7e7f7g7h7i7j7k7l7m7n7x7|8j9w:Y:Z:^:g:y:z;O;c;h;l<x<|&n!SOadei|}!T!U!e!h!p!}#P#^#a#e#f#g#h#i#j#k#l#m#n#p#w#y#{$n%P%U%V%W%X%d%q%s&O&]&^&b&c&n&s&v&}'j'l'r(h(n)e)g)q)x*O*V*W*X*f*h*q*s*u+U+X+_+k+n+u-U-X-_-e-l-n-s-u.c.g.k.o.z/Y/k/m/x/z/|0P0W0]0`1P1S1f1r2s3R3X3Z3_3b3c3e3l3n4V4^4a5]5_5h5r5v5}6P6`6c6j6m6t6u6{;c;h;l<|!T:x!m#[7d7e7f7g7h7i7j7k7l7m7n7x7|8j9w:Y:Z:^:g:y:z;O<xQ(R#`S*P%]/TQ-r(o{1O,b0u0x0{0|4W4X4Y4[4_5x5y6p;q;s;t;v;w;x;y=TQ(T#`{0},b0u0x0{0|4W4X4Y4[4_5x5y6p;q;s;t;v;w;x;y=T|(S#`,b0u0x0{0|4W4X4Y4[4_5x5y6p;q;s;t;v;w;x;y=TT*P%]/T^UO|}%s&s*W+u&W$S[_!l!u!v!w!x!y!z!{#O#u#v$Y$o$r&P&V&k&z'S'Y'_'c'h'p(f(l)_)h*z*}+R+|+},_,`,l,y.a.d.r0f0j0q0v1[1]1^3x4O5S7V7W7X7Y7Z7[7]7^7_7`7a7b7c7w8w8x8}9O9Q9R9S9W9Y9g9u:c:u:v:{:|:};e;f;g;z;{;|;}<O<P<Q<R<S<T<U<V<W<X<Y<`<a<b<c<d<e<f<g<h<i<j<k<n<o<p<t<u<v'`$baefi!T!U!e!h!m!p!}#P#[#^#a#e#f#g#h#i#j#k#l#m#n#p#w#y#{$f$g$l$n$y$z%V%W%X%d%q&O&^&b&v&{&}'j'r(h(n)Y)[)e)g)q)x*O*X*f*h*q*s*u+U+X+_-U-X-_-e-l-n-s-u.].c.g.h.k.o/Y/k/m/x/z/|0P0W1P1S1f1r2o2s3R3X3Z3_3b3c3e3l3n4V4^4a5]5_5h5r5v5}6P6`6c6j6m6t6u6{7d7e7f7g7h7i7j7k7l7m7n7x7|8j9w:Y:Z:^:d:g:y:z;O;h;l<xY%htu%l,R,c|(Q#`,b0u0x0{0|4W4X4Y4[4_5x5y6p;q;s;t;v;w;x;y=TQ8m&|U8n'T,i,kY;Pd%U'l;c<|!l;Qm$W'P)T)i*Z+S+^+l.i.m/t8^8_8`8e8f8g8h9q9r9s9t:_:`:m;Z;[;]<Z<[<]<^<_<l<m<rS;R!b&[Q;S!sQ;T.lU;U%P*V.z^;V&]&c&n+k+n0]0`T;k%]/T^VO|}%s&s*W+uQ$S,y#b$T[_!l!u!v!{#O#u#v$Y$o$r&P&V&k&z'p(f(l)_)h*z*}+R+|,`.a.d.r0f0j0v3x5S7_7`7a7b7c7w9Y9g9u:c:u:v<W<X<Y<n<o<p<t<u<vj$bf$f$g$l$y$z&{)Y)[.].h2o:d&t$caei!T!U!e!h!m!p!}#P#[#^#a#e#f#g#h#i#j#k#l#m#n#p#w#y#{$n%V%W%X%d%q&O&^&b&v&}'j'r(h(n)e)g)q)x*O*X*f*h*q*s*u+U+X+_-U-X-_-e-l-n-s-u.c.g.k.o/Y/k/m/x/z/|0P0W1P1S1f1r2s3R3X3Z3_3b3c3e3l3n4V4^4a5]5_5h5r5v5}6P6`6c6j6m6t6u6{7d7e7f7g7h7i7j7k7l7m7n7x7|8j9w:Y:Z:^:g:y:z;O;h;l<xY$qd%U'l;c<|Y%htu%l,R,cQ&w!sx'Q!w!x!y!z'Y'_'c'h+}1[1]1^7]9S:{:|:};e;f;g|(Q#`,b0u0x0{0|4W4X4Y4[4_5x5y6p;q;s;t;v;w;x;y=T!v)r'S,_0q4O7V7W7X7Y7Z7[7^8w8x8}9O9Q9R9W;z;{;|;}<O<P<Q<R<S<T<U<V<`<a<b<c<d<e<f<g<h<i<j<kQ,Q&|Q1W,lU9{'T,i,k!l;Qm$W'P)T)i*Z+S+^+l.i.m/t8^8_8`8e8f8g8h9q9r9s9t:_:`:m;Z;[;]<Z<[<]<^<_<l<m<rS;R!b&[U;_%P*V.z^;`&]&c&n+k+n0]0`Q;d.lT;k%]/T|!ROd|}%P%U%s&]&c&n&s'l*V*W+k+n+u.z0]0`;c<|#l$X[_!l!s!u!v!{#O#u#v$Y$o$r&P&V&k&z&|'T'p(f(l)_)h*z*}+R,`,i,k.a.d.l.r0f0j0v3x5S7_7`7a7b7c7w9Y9g9u:c:u:v<W<X<Y<n<o<p<t<u<v&t$iaei!T!U!e!h!m!p!}#P#[#^#a#e#f#g#h#i#j#k#l#m#n#p#w#y#{$n%V%W%X%d%q&O&^&b&v&}'j'r(h(n)e)g)q)x*O*X*f*h*q*s*u+U+X+_-U-X-_-e-l-n-s-u.c.g.k.o/Y/k/m/x/z/|0P0W1P1S1f1r2s3R3X3Z3_3b3c3e3l3n4V4^4a5]5_5h5r5v5}6P6`6c6j6m6t6u6{7d7e7f7g7h7i7j7k7l7m7n7x7|8j9w:Y:Z:^:g:y:z;O;h;l<x$f$}fmtu#`$W$f$g$l$y$z%]%l&[&{'P)T)Y)[)i*Z+S+^+l,R,b,c.].h.i.m/T/t0u0x0{0|2o4W4X4Y4[4_5x5y6p8^8_8`8e8f8g8h9q9r9s9t:_:`:d:m;Z;[;];q;s;t;v;w;x;y<Z<[<]<^<_<l<m<r=TQ&Y!b#n'R!w!x!y!z'S'Y'_'c'h,_0q1[1]1^4O7V7W7X7Y7Z7[7]7^8w8x8}9O9Q9R9S9W:{:|:};e;f;g;z;{;|;}<O<P<Q<R<S<T<U<V<`<a<b<c<d<e<f<g<h<i<j<kf+i&l+c+e+h0R0S0U0X3i3j5eQ0i+|Q0l+}Q0o,VQ1X,lQ1j,yQ3z0kR5k3{|!ROd|}%P%U%s&]&c&n&s'l*V*W+k+n+u.z0]0`;c<|#n$X[_!l!s!u!v!{#O#u#v$Y$o$r&P&V&k&z&|'T'p(f(l)_)h*z*}+R+|,`,i,k.a.d.l.r0f0j0v3x5S7_7`7a7b7c7w9Y9g9u:c:u:v<W<X<Y<n<o<p<t<u<v&t$iaei!T!U!e!h!m!p!}#P#[#^#a#e#f#g#h#i#j#k#l#m#n#p#w#y#{$n%V%W%X%d%q&O&^&b&v&}'j'r(h(n)e)g)q)x*O*X*f*h*q*s*u+U+X+_-U-X-_-e-l-n-s-u.c.g.k.o/Y/k/m/x/z/|0P0W1P1S1f1r2s3R3X3Z3_3b3c3e3l3n4V4^4a5]5_5h5r5v5}6P6`6c6j6m6t6u6{7d7e7f7g7h7i7j7k7l7m7n7x7|8j9w:Y:Z:^:g:y:z;O;h;l<x$h$}fmtu!b#`$W$f$g$l$y$z%]%l&[&{'P)T)Y)[)i*Z+S+^+l,R,b,c.].h.i.m/T/t0u0x0{0|2o4W4X4Y4[4_5x5y6p8^8_8`8e8f8g8h9q9r9s9t:_:`:d:m;Z;[;];q;s;t;v;w;x;y<Z<[<]<^<_<l<m<r=T#p'R!w!x!y!z'S'Y'_'c'h+},_0q1[1]1^4O7V7W7X7Y7Z7[7]7^8w8x8}9O9Q9R9S9W:{:|:};e;f;g;z;{;|;}<O<P<Q<R<S<T<U<V<`<a<b<c<d<e<f<g<h<i<j<kQ1X,lR1j,y^WO|}%s&s*W+u&W$S[_!l!u!v!w!x!y!z!{#O#u#v$Y$o$r&P&V&k&z'S'Y'_'c'h'p(f(l)_)h*z*}+R+|+},_,`,l,y.a.d.r0f0j0q0v1[1]1^3x4O5S7V7W7X7Y7Z7[7]7^7_7`7a7b7c7w8w8x8}9O9Q9R9S9W9Y9g9u:c:u:v:{:|:};e;f;g;z;{;|;}<O<P<Q<R<S<T<U<V<W<X<Y<`<a<b<c<d<e<f<g<h<i<j<k<n<o<p<t<u<vj$bf$f$g$l$y$z&{)Y)[.].h2o:d%p$daei!T!U!e!h!p!}#P#^#a#e#f#g#h#i#j#k#l#m#n#p#w#y#{$n%V%W%X%d%q&O&^&b&v&}'j'r(h(n)e)g)q)x*O*X*f*h*q*s*u+U+X+_-U-X-_-e-l-n-s-u.c.g.k.o/Y/k/m/x/z/|0P0W1P1S1f1r2s3R3X3Z3_3b3c3e3l3n4V4^4a5]5_5h5r5v5}6P6`6c6j6m6t6u6{;h;lY%htu%l,R,c|(Q#`,b0u0x0{0|4W4X4Y4[4_5x5y6p;q;s;t;v;w;x;y=T!S8]!m#[7d7e7f7g7h7i7j7k7l7m7n7x7|8j9w:Y:Z:^:g:y:z;O<xQ8m&|U8n'T,i,k!l;Qm$W'P)T)i*Z+S+^+l.i.m/t8^8_8`8e8f8g8h9q9r9s9t:_:`:m;Z;[;]<Z<[<]<^<_<l<m<rS;R!b&[Q;S!sQ;T.lY;Wd%U'l;c<|U;X%P*V.z^;Y&]&c&n+k+n0]0`T;k%]/Tr#rT$R$a$x%g(P8X8Y8Z8[8a8b8c8d8k8l;jo(i#x)P)V-b7y7z7{9j9k9l9m9n9o9p:]r#sT$R$a$x%g(P8X8Y8Z8[8a8b8c8d8k8l;jo(j#x)P)V-b7y7z7{9j9k9l9m9n9o9p:]`%Ogh${%R%S%y8i8od%w!R$X$i$}&Y'R0i0l1X1jV-c(R(S1OS$vd%UQ)u%PQ-S'lQ/q*}Q2k.dQ2z.zQ6]5SQ;a;cR;o<|$o!QO[_d|}!l!s!u!v!{#O#u#v$Y$o$r%P%U%s&P&V&]&c&k&n&s&z&|'T'l'p(f(l)_)h*V*W*z*}+R+k+n+u+|,`,i,k,l.a.d.l.r.z0]0`0f0j0v3x5S7_7`7a7b7c7w9Y9g9u:c:u:v;c<W<X<Y<n<o<p<t<u<v<|#S^O[_`|}!s!u!v#u$V$Y$[$]$o%s&P&V&]&c&n&s&x&z&|'T(l)U)h*V*W*z+R+k+n+u,`,i,k,l.l.r0]0`0f0v:u:vS'Y!w1]S'_!x1^U'h!z+}1[Q8w7VQ8x7WQ8}7XQ9O7YQ9W7^Q;e:{Q;f:|Q;g:}Q<`;zQ<a;{Q<b;|Q<c;}Q<d<OQ<e<PQ<f<QQ<g<RQ<i<TQ<j<UR<k<Vb'W!w1]7V7W:{;z;{;|;}b']!x1^7X7Y:|<O<P<Q<R`'f!z+}1[7^:}<T<U<Vl,o'U'X'Y4j8s8t8u8w8x;e<`<a<b<cl,s'Z'^'_4k8y8z8{8}9O;f<d<e<f<gh-O'd'g'h4i9T9U9V9W;g<i<j<kY1a,p,q9|9}:OY1d,t,u:Q:R:SY1o-P-Q:V:W:XQ4m1bQ4o1eR4u1pb'V!w1]7V7W:{;z;{;|;}b'[!x1^7X7Y:|<O<P<Q<R`'e!z+}1[7^:}<T<U<Vj,n'U'W'X'Y4j8t8w8x;e<`<a<b<cj,r'Z']'^'_4k8z8}9O;f<d<e<f<gf,}'d'f'g'h4i9U9W;g<i<j<kW1`,o,p,q9}W1c,s,t,u:RW1n-O-P-Q:WS4l1a1bS4n1d1eS4t1o1pQ6U4mQ6V4oR6W4uT,g'T,i!aZO[|}$o%s&P&V&]&c&n&s&z&|'T)h*V*W*z+R+k+n+u,`,i,l.l.r0]0`0fQ$OYR.T(yR({$Oe.P(x-|-}.O.R2]2^2_2b5O'r!YOadei|}!T!U!e!h!m!p!}#P#[#^#a#e#f#g#h#i#j#k#l#m#n#p#w#y#{$n%P%U%V%W%X%d%q%s&O&]&^&b&c&n&s&v&}'j'l'r(h(n)e)g)q)x*O*V*W*X*f*h*q*s*u+U+X+_+k+n+u-U-X-_-e-l-n-s-u.c.g.k.o.z/Y/k/m/x/z/|0P0W0]0`1P1S1f1r2s3R3X3Z3_3b3c3e3l3n4V4^4a5]5_5h5r5v5}6P6`6c6j6m6t6u6{7d7e7f7g7h7i7j7k7l7m7n7x7|8j9w:Y:Z:^:g:y:z;O;c;h;l<x<|e.P(x-|-}.O.R2]2^2_2b5OR2c.Td]O|}%s&s&|'T*W+u,i!n^[_`!s!u!v#u$V$Y$[$]$o&P&V&]&c&n&x&z(l)U)h*V*z+R+k+n,`,k,l.l.r0]0`0f0v:u:vQ%jt])]$m)^;^;n=[=]!fbOadeftu|}!s$f$g$l$y$z%l%s&s&{&|'T)Y)[*W+u,R,c,i,k.].h.l2o:df+f&l+c+e+h0R0S0U0X3i3j5eh0y,b0u0x0|4W4X4Y4[4_5x5y6pp:wm$W'P)T*Z+S+l/t8^8_8`8e8g9q9s:_h<w)i.i.m8f8h9r9t:`:m;Z;[;]b=U0{;q;s;t;v;w;x;y=Tc=Z+^<Z<[<]<^<_<l<m<r^$mc/};b;m;p;r<yb%|!X'O(d-m:b:l<{<}=`Y*o2g5Q9y9z:fb*p%},Z-h2S:k:p=Q=R=b^0V+g0T0Z3h3o5d6dQ0b+rY2f.`2h8q8r9xb4]0z4S4Z4d5u5w6Q6o6|[:n4c:o:q:s:t;ud;^$h$s$w&y)X,P.[.n2e2pt<z$u%{&P&Q)i)m)o*k.h.i.l.m.u2o:d:m=V=Xf=P)p*l*v*w.j.v/f2n2x=W=Yi=[%a)R,[.Z/]/u0^=^=_=a=c=dW)j$o&P*V.lS+y&z0fR2v.r$TjOadefmtu|}!s$W$f$g$l$y$z%l%s&s&{&|'P'T)T)Y)[)i*W*Z+S+^+l+u,R,c,i,k.].h.i.l.m/t2o8^8_8`8e8f8g8h9q9r9s9t:_:`:d:m;Z;[;]<Z<[<]<^<_<l<m<r#bjadefm!s$W$f$g$l$y$z&{'P)T)Y)[)i*Z+S+^+l.].h.i.l.m/t2o8^8_8`8e8f8g8h9q9r9s9t:_:`:d:m;Z;[;]<Z<[<]<^<_<l<m<r`kO|}%s&s&|*W+uU%itu,RQ*b%lS,a'T,iT1T,c,kh)`$m)^)a._9v:a;^;n<q<s=[=]`*m%|*n*p/i<z=O=P=SX5z4]5{:n:rh)`$m)^)a._9v:a;^;n<q<s=[=]S*o%|<zW/h*n*p=O=PS3U/i=SX5z4]5{:n:r!c&R!X$u%{&P&Q'O(d)i)m)o*k-m.`.h.i.l.m.u2h2o8q8r9x:b:d:l:m<{<}=V=X=`!`&R$u%{&P&Q'O(d)i)m)o*k-m.`.h.i.l.m.u2h2o8q8r9x:b:d:l:m<{<}=V=X=`R&S!XdhOade|}%s&s*W+u#n${fmtu!s$W$f$g$l$y$z%l&{&|'P'T)T)Y)[)i*Z+S+^+l,R,c,i,k.].h.i.l.m/t2o8^8_8`8e8f8g8h9q9r9s9t:_:`:d:m;Z;[;]<Z<[<]<^<_<l<m<r'^%Si!T!U!e!h!m!p!}#P#[#^#a#e#f#g#h#i#j#k#l#m#n#p#w#y#{$n%P%U%V%W%X%d%q&O&]&^&b&c&n&v&}'j'l'r(h(n)e)g)q)x*O*V*X*f*h*q*s*u+U+X+_+k+n-U-X-_-e-l-n-s-u.c.g.k.o.z/Y/k/m/x/z/|0P0W0]0`1P1S1f1r2s3R3X3Z3_3b3c3e3l3n4V4^4a5]5_5h5r5v5}6P6`6c6j6m6t6u6{7d7e7f7g7h7i7j7k7l7m7n7x7|8j9w:Y:Z:^:g:y:z;O;c;h;l<x<|Q&Z!bR+P&[l#tT$a$x%g8X8Y8Z8[8a8b8c8d8k8li(k#x)V7y7z7{9j9k9l9m9n9o9p#njfmtu!s$W$f$g$l$y$z%l&{&|'P'T)T)Y)[)i*Z+S+^+l,R,c,i,k.].h.i.l.m/t2o8^8_8`8e8f8g8h9q9r9s9t:_:`:d:m;Z;[;]<Z<[<]<^<_<l<m<rdlOade|}%s&s*W+u'_!Yi!T!U!e!h!m!p!}#P#[#^#a#e#f#g#h#i#j#k#l#m#n#p#w#y#{$n%P%U%V%W%X%d%q&O&]&^&b&c&n&v&}'j'l'r(h(n)e)g)q)x*O*V*X*f*h*q*s*u+U+X+_+k+n-U-X-_-e-l-n-s-u.c.g.k.o.z/Y/k/m/x/z/|0P0W0]0`1P1S1f1r2s3R3X3Z3_3b3c3e3l3n4V4^4a5]5_5h5r5v5}6P6`6c6j6m6t6u6{7d7e7f7g7h7i7j7k7l7m7n7x7|8j9w:Y:Z:^:g:y:z;O;c;h;l<x<|Q.q)iR2r.mR.q)iQ1R,bS4U0u0zU5q4S4W4`S6i5o5uR6z6l^#zV!R$c$i$q;_;`Q&f!hS(b#p*VS(r#y*WY*Y%a)R/]/}0^Q-V'oS-i(e-WW.x)q1r9w:gQ/S*PS/[*X3ZQ1R,bQ1}-eS2P-j-kS2U-n3RQ2Z-uQ3[/uU4U0u0z1SQ4|2QQ5b3cY5q4S4V4W4`4aW6i5o5r5u5vU6z6j6l6mR7R6{S(r#y*WT2U-n3RZ(p#y(q*W-n3R^zO|}%s&s*W+uQ,X&|T,g'T,iS&|!s,WR0m,OS+y&z0fR3|0mT+y&z0f^zO|}%s&s*W+uQ*{&VQ+U&]S+_&c0`W+m&n+k+n0]Q,X&|R1Y,l[%bm$W+S+^+l/tR/^*Z^zO|}%s&s*W+uQ*{&VQ,X&|R1Y,l!OqO|}!e%d%s&^&b&n&s*W+X+k+n+u/x0]3_3e5_6`6c6uS%^k,aS%ow,SQ&T!XQ&o!oU*S%_%i1TQ*]%aS*d%m%nQ*x&SQ+Y&`S.X)R,[S/`*a*bQ/b*cQ2d.ZQ3S/aQ3r0bQ4b0zQ5s4SR6n5u_zO|}%s&s*W+uQ&t!qQ*{&VR+v&uwrO|}!e%d%s&^&b&s*W+X+u/x3_3e5_6`6c6u!PqO|}!e%d%s&^&b&n&s*W+X+k+n+u/x0]3_3e5_6`6c6u!OnO|}!e%d%s&^&b&n&s*W+X+k+n+u/x0]3_3e5_6`6c6uR&j!k!OqO|}!e%d%s&^&b&n&s*W+X+k+n+u/x0]3_3e5_6`6c6uR+U&]!OpO|}!e%d%s&^&b&n&s*W+X+k+n+u/x0]3_3e5_6`6c6u[$td%U'l/z;c<|Q&f!hS'}#^3RQ+T&]S+`&c0`Q/w+UQ3f0PQ5`3bR6a5]Q&^!cQ&`!dQ&b!fR+X&_R+V&]&f!SOadei|}!T!U!e!h!p!}#P#^#a#e#f#g#h#i#j#k#l#m#p#w#y#{$n%P%U%V%W%X%d%q%s&O&]&^&b&c&n&s&v&}'j'l'r(h(n)e)g)q)x*O*V*W*X*f*h*q*s*u+U+X+_+k+n+u-U-_-e-n-s-u.c.g.k.o.z/Y/k/m/x/z/|0P0W0]0`1P1S1f2s3R3X3Z3_3b3c3e3l3n4V4^4a5]5_5h5r5v5}6P6`6c6j6m6t6u6{;c;h;l<|Q/{+Z{:x!m#[7d7e7f7g7h7i7j7k7l7m7x7|8j9w:Z:y:z;O<x^zO|}%s&s*W+uW+m&n+k+n0]T,g'T,ig+i&l+c+e+h0R0S0U0X3i3j5eT+p&o+q^zO|}%s&s*W+uT,g'T,i'r!YOadei|}!T!U!e!h!m!p!}#P#[#^#a#e#f#g#h#i#j#k#l#m#n#p#w#y#{$n%P%U%V%W%X%d%q%s&O&]&^&b&c&n&s&v&}'j'l'r(h(n)e)g)q)x*O*V*W*X*f*h*q*s*u+U+X+_+k+n+u-U-X-_-e-l-n-s-u.c.g.k.o.z/Y/k/m/x/z/|0P0W0]0`1P1S1f1r2s3R3X3Z3_3b3c3e3l3n4V4^4a5]5_5h5r5v5}6P6`6c6j6m6t6u6{7d7e7f7g7h7i7j7k7l7m7n7x7|8j9w:Y:Z:^:g:y:z;O;c;h;l<x<|R3u0e^uO|}%s&s*W+uQ%ltQ,R&|T,c'T,iS%_k,aS*a%i1TR/a*bQ*Q%]R3P/TS%^k,aS%ow,SU*S%_%i1TS*d%m%nS/`*a*bQ/b*cQ3S/aQ4b0zQ5s4SR6n5ubwO|}%s&s'T*W+u,iS%mt,RU%nu,c,kQ*c%lR,S&|R,X&|$n!QO[_d|}!l!s!u!v!{#O#u#v$Y$o$r%P%U%s&P&V&]&c&k&n&s&z&|'T'l'p(f(l)_)h*V*W*z*}+R+k+n+u+|,`,i,k,l.a.d.l.r.z0]0`0f0j0v3x5S7_7`7a7b7c7w9Y9g9u:c:u:v;c<W<X<Y<n<o<p<t<u<v<|R1k,yY'b!y7Z7[7]<S[,z'a'c9Q9R9S<hS1l,{,|R4s1mQ,w'`R4q1gR)v%PR2{.zS-a(P;jT1{-b:]&f!SOadei|}!T!U!e!h!p!}#P#^#a#e#f#g#h#i#j#k#l#m#p#w#y#{$n%P%U%V%W%X%d%q%s&O&]&^&b&c&n&s&v&}'j'l'r(h(n)e)g)q)x*O*V*W*X*f*h*q*s*u+U+X+_+k+n+u-U-_-e-n-s-u.c.g.k.o.z/Y/k/m/x/z/|0P0W0]0`1P1S1f2s3R3X3Z3_3b3c3e3l3n4V4^4a5]5_5h5r5v5}6P6`6c6j6m6t6u6{;c;h;l<|{:x!m#[7d7e7f7g7h7i7j7k7l7m7x7|8j9w:Z:y:z;O<x$U#fS$p%Q&d&p'k'q'|(U(V(X(Y(Z([(](^(_(`(a(g(m(t)d)t*g*r+Q+]+w,Y-R-p.f.w.}/X/Z/c/j/v0O1t1u1z1|2R2T2X2Y2i2t2y3W3a3d3k4e4f4p5V5X5Z5^5a5g5t5|6_6k6s6y7Qy7f&m'{9X9Z9]9_9`9a9b9c9d9e9f9h9i:e:h:i:j;i#r#gS$p%Q&d&p'q'|(U(`(a(g(m(t)d)t*g*r+Q+]+w,Y-R-p.f.w.}/X/Z/c/j/v0O1t1u1z1|2R2T2X2Y2i2t2y3W3a3d3k4e4f4p5V5X5Z5^5a5g5t5|6_6k6s6y7Qg7g&m'{9Z9f9h9i:e:h:i:j;i#x#jS$p%Q&d&p'q'|(U(X(Y(Z(`(a(g(m(t)d)t*g*r+Q+]+w,Y-R-p.f.w.}/X/Z/c/j/v0O1t1u1z1|2R2T2X2Y2i2t2y3W3a3d3k4e4f4p5V5X5Z5^5a5g5t5|6_6k6s6y7Qm7j&m'{9Z9_9`9a9f9h9i:e:h:i:j;i'c!YOadei|}!T!U!e!h!m!p!}#P#[#^#a#e#f#g#h#i#j#k#l#m#p#w#y#{$n%P%U%V%W%X%d%q%s&O&]&^&b&c&n&s&v&}'j'l'r(h(n)e)g)q)x*O*V*W*X*f*h*q*s*u+U+X+_+k+n+u-U-_-e-n-s-u.c.g.k.o.z/Y/k/m/x/z/|0P0W0]0`1P1S1f2s3R3X3Z3_3b3c3e3l3n4V4^4a5]5_5h5r5v5}6P6`6c6j6m6t6u6{7d7e7f7g7h7i7j7k7l7m7x7|8j9w:Z:y:z;O;c;h;l<x<|Q-W'oQ-j(eQ2Q-kR6X4w'c!XOadei|}!T!U!e!h!m!p!}#P#[#^#a#e#f#g#h#i#j#k#l#m#p#w#y#{$n%P%U%V%W%X%d%q%s&O&]&^&b&c&n&s&v&}'j'l'r(h(n)e)g)q)x*O*V*W*X*f*h*q*s*u+U+X+_+k+n+u-U-_-e-n-s-u.c.g.k.o.z/Y/k/m/x/z/|0P0W0]0`1P1S1f2s3R3X3Z3_3b3c3e3l3n4V4^4a5]5_5h5r5v5}6P6`6c6j6m6t6u6{7d7e7f7g7h7i7j7k7l7m7x7|8j9w:Z:y:z;O;c;h;l<x<|Q#YQR'y#YU$fa$y:dd$rd%P%U'l*}.d.z5S;c<|Q&k!l!^)W$f$r&k)Y)e)o*s.].u/k0R3i3l4X5e5x5}6p8^9q9r:_:`;Z;s;w;y<Z<l<rS)Y$g$lQ)e$nQ)o$uS*s&O.kQ.])[Q.u)mQ/k*qQ0R+eS3i0S0UQ3l0WQ4X0xQ5e3jS5x4Y4[Q5}4^Q6p5yQ8^8eS9q8_8`S9r;[;]Q:_9sQ:`9tS;Z.i8fQ;s=TS;w;t;vQ;y;xQ<Z<^S<l<[<]R<r<mQ0r,]U4P0r4Q5nS4Q0s0tR5n4RQ,i'TR1U,i`[O|}%s&s&|*W+uY$U[)h*z+R,`^)h$o&P&z*V.l.r0fS*z&V,l^+R&]&c&n+k+n0]0`T,`'T,iQ(w#}R-x(wQ.R(xQ2]-|Q2^-}Q2_.OY2`.R2]2^2_5OR5O2bQ(z$OS.U(z.VR.V({!`_O[|}!s!v$Y$o%s&P&V&]&c&n&s&z&|)h*V*W*z+R+k+n+u,l.l.r0]0`0fY$Z_$])U:u:vU$]`$V&xQ)U$[U:u!u#u(lZ:v'T,`,i,k0vU$ga$y:dl)Z$g)[0S3j4Y5y8_9s9t;[;t;x<[<mQ)[$lQ0S+eQ3j0UQ4Y0xQ5y4[Q8_8eQ9s8`Q9t;]S;[.i8fQ;t=TQ;x;vQ<[<^R<m<]Q)^$mU.^)^;n=]Q;n;^R=]=[Q)a$mQ._)^[.b)a._9v:a<q<sQ9v;^Q:a;nQ<q=[R<s=]Q5T2kR6^5TU*k%{.i:dU/e*k9x<}Q9x8qR<}=`Q*n%|W/g*n/i=O=SQ/i*pQ=O<zR=S=PU){%R)s8iR/Q){Q.s)jR2w.sQ5{4]S6q5{:rR:r:nQ4`0zQ5o4SU6R4`5o6lR6l5uW(q#y*W-n3RR-t(qU-o(m(r/XR2V-oQ0g+zR3w0g[*[%a%b)R/u/}0^R/_*[Q|OU%r|%s+uS%s}*WR+u&sQ+n&nQ0]+kT0_+n0]Q0Y+gR3p0YQ+q&oR0a+qS%fs3tR*`%fdtO|}%s&s&|'T*W+u,iR%ktQ/U*QR3Q/U$p!PO[_d|}!l!s!u!v!{#O#u#v$Y$o$r%P%U%s&P&V&]&c&k&n&s&z&|'T'l'p(f(l)_)h*V*W*z*}+R+k+n+u+|,`,i,k,l,y.a.d.l.r.z0]0`0f0j0v3x5S7_7`7a7b7c7w9Y9g9u:c:u:v;c<W<X<Y<n<o<p<t<u<v<|R%u!PQ1h,wR4r1hQ.{)vR2|.{S)y%Q-pR/O)yS-f(a(bR2O-fQ4y1wR6Z4yT(c#p*V|SO|}!e%d%s&^&b&n&s+X+k+n+u/x0]3_3e5_6`6c6uj$`ae%V%W)g*u.g/m3X3n5h6P6t[$pd%U'l/z;c<|^%Qi%X'r(h*O;h;lS%x!T:yQ%z!UQ&d!hQ&m!mQ&p!pQ'k!}S'q#P*hQ'{#[Q'|#^Q(U#aQ(V#eQ(W#fQ(X#gQ(Y#hQ(Z#iQ([#jQ(]#kQ(^#lQ(_#mQ(`#nS(a#p*VQ(g#wQ(m#yQ(t#{Q)d$nQ)t%PQ*g%qS*r&O.kQ+Q&]S+]&c0`Q+w&vQ,Y&}Q-R'jS-p(n/YQ.f)eS.w)q1rQ.})xQ/X*WQ/Z*XQ/c*fS/j*q*sQ/v+UQ0O+_Q1t-UQ1u-XQ1z-_Q1|-eQ2R-lQ2T-nQ2X-sQ2Y-uQ2i.cQ2t.oQ2y.zQ3W/kQ3a/|Q3d0PQ3k0WQ4e1PQ4f1SQ4p1fQ5V2sQ5X3RQ5Z3ZQ5^3bQ5a3cQ5g3lS5t4V4aQ5|4^Q6_5]S6k5r5vQ6s5}S6y6j6mQ7Q6{Q8W8jQ8p:zQ9X;OQ9Z7dQ9]7eQ9^7fQ9_7gQ9`7hQ9a7iQ9b7jQ9c7kQ9d7lQ9e7mQ9f7nQ9h7xQ9i7|S:e9w:gQ:h:YQ:i:ZQ:j:^R;i<xR)w%Pd]O|}%s&s&|'T*W+u,i!n^[_`!s!u!v#u$V$Y$[$]$o&P&V&]&c&n&x&z(l)U)h*V*z+R+k+n,`,k,l.l.r0]0`0f0v:u:v$b$ead!l$f$g$l$n$r$u$y%P%U&O&k'l)Y)[)e)m)o*q*s*}+e.].d.k.u.z/k0R0S0U0W0x3i3j3l4X4Y4[4^5S5e5x5y5}6p8^8_8`8e8f9q9r9s9t:_:`;Z;[;];c;s;t;v;w;x;y<Z<[<]<^<l<m<r<|=TQ%jth)`$m)^)a._9v:a;^;n<q<s=[=][*j%{*k8q9x<}=``*m%|*n*p/i<z=O=P=SQ.a)_S2q.i:dW5z4]5{:n:rQ:c9uQ<t<nQ<u<oR<v<p``O|}%s&s&|*W+uQ$V[U$[_:u:vd$ud%P%U'l*}.d.z5S;c<|Q&l!l!^&x!s!u!v#u$Y$o&P&V&]&c&n&z'T(l)h*V*z+R+k+n,`,i,k,l.l.r0]0`0f0vb'i!{+|7_7`7a7b<W<X<YS'o#O7cW(e#v'p7w9YQ)m$rQ+c&kS-k(f9gU.`)_<n<pU2h.a<t<vQ3y0jQ5j3xQ:b9uQ:l:cQ=V<oR=X<uS'U!w7VQ'V7WS'Z!x7XQ'[7YS'a!y7ZS'b7[7]U'd!z+}7^Q,]'SQ,n8xS,q'Y8wQ,r9OS,u'_8}S,z9R9SS,|'c9QS-Q'h9WQ0t,_Q1Z,lQ3}0qQ4i1[Q4j1]Q4k1^Q5m4OQ8s;{Q8t;zQ8u;}S8v:{;|Q8y<PQ8z<OQ8{<RS8|:|<QQ9P<SS9T:}<UQ9U<TQ9V<VQ9|<aQ9}<`Q:O<cS:P;e<bQ:Q<eQ:R<dQ:S<gS:T;f<fQ:U<hS:V;g<jQ:W<iR:X<kR,^'ST,h'T,iR$PYe.Q(x-|-}.O.R2]2^2_2b5OdmO|}%s&V&s&|*W+u,lS$W[*zQ&{!sQ'O!uQ'P!vQ(d#uQ)T$Y^)i$o&P&z*V.l.r0fQ+S&]Q+^&cY+l&n+k+n0]0`S,b'T,iQ-m(lQ.h)hQ/t+RS0u,`,kR4W0vd]O|}%s&s&|'T*W+u,i!n^[_`!s!u!v#u$V$Y$[$]$o&P&V&]&c&n&x&z(l)U)h*V*z+R+k+n,`,k,l.l.r0]0`0f0v:u:vR%jtQ0z,bQ4S0uQ4Z0xQ4c0{Q4d0|Q5u4WU5w4X4Y4[Q6Q4_S6o5x5yQ6|6pQ:o;qU:q;s;t;vS:s;w;xQ:t;yR;u=TX)k$o&P*V.lpcOtu|}%l%s&s&|'T*W+u,R,c,i,kY$ha$y.i8f:dU$sd$z.l[$wef.m2o8h:mQ%amQ&y!sQ)R$W[)X$f$g$l;Z;[;]Q,P&{Q,['PQ.Z)TW.[)Y)[9r9tQ.n)iQ/]*ZQ/u+SQ/}+^S0^+l/tS2e.]:`Q2p.hQ;b<_U;m<Z<[<]S;p<l<mQ;r<rQ<y<^Q=^8eQ=_8gU=a8^8_8`S=c9q9sR=d:_R2l.dQ%}!XQ)p$uU*l%{.i:dS*v&P.lW*w&Q.m2o:mQ,Z'OQ-h(dQ.j)iS.v)m)oQ/f*kQ2S-mQ2g.`Q2n.hQ2x.uQ5Q2hQ9y8qQ9z8rQ:f9xQ:k:bQ:p:lQ=Q<{Q=R<}Q=W=VQ=Y=XR=b=`X%Ti$|.k/YT(s#y*WR+{&zQ+z&zR3v0f^zO|}%s&s*W+uR,X&|W%cm+S+^+lT)S$W/t_{O|}%s&s*W+u^zO|}%s&s*W+uQ&a!eQ*_%dQ+W&^Q+[&bQ/y+XQ3^/xQ5[3_Q5c3eQ6b5_Q6v6`Q6w6cR7O6uvrO|}!e%d%s&^&b&s*W+X+u/x3_3e5_6`6c6uX+m&n+k+n0]Q+j&lR0Q+cS+g&l+cQ0T+eQ0Z+hU3h0R0S0UQ3o0XS5d3i3jR6d5e^vO|}%s&s*W+uQ,T&|T,d'T,iR*R%]^xO|}%s&s*W+uQ,U&|T,e'T,i^yO|}%s&s*W+uT,f'T,iQ,z9PQ,{'aQ1l:UR1m,|R,x'`T'm!};O`%Zi%X'r(h(n/Y;h;lR/R*OR-]'uR1x-[",nodeNames:"‚ö† RawString > MacroName LineComment BlockComment PreprocDirective #include String EscapeSequence SystemLibString Identifier ArgumentList ( ConditionalExpression AssignmentExpression CallExpression PrimitiveType FieldExpression FieldIdentifier DestructorName TemplateMethod ScopedFieldIdentifier NamespaceIdentifier TemplateType TypeIdentifier ScopedTypeIdentifier ScopedNamespaceIdentifier :: NamespaceIdentifier TypeIdentifier TemplateArgumentList < TypeDescriptor const volatile restrict _Atomic mutable constexpr StructSpecifier struct MsDeclspecModifier __declspec ) VirtualSpecifier BaseClassClause Access , FieldDeclarationList { FieldDeclaration Attribute AttributeName Identifier AttributeArgs } [ ] UpdateOp ArithOp ArithOp ArithOp LogicOp BitOp BitOp BitOp CompareOp CompareOp CompareOp > CompareOp BitOp UpdateOp Number CharLiteral AttributeArgs virtual extern static register inline AttributeSpecifier __attribute__ PointerDeclarator MsBasedModifier __based MsPointerModifier FunctionDeclarator ParameterList ParameterDeclaration PointerDeclarator FunctionDeclarator Noexcept noexcept ThrowSpecifier throw TrailingReturnType AbstractPointerDeclarator AbstractFunctionDeclarator AbstractArrayDeclarator AbstractParenthesizedDeclarator AbstractReferenceDeclarator ArrayDeclarator ParenthesizedDeclarator ReferenceDeclarator ScopedIdentifier Identifier OperatorName TemplateFunction StructuredBindingDeclarator OptionalParameterDeclaration VariadicParameterDeclaration VariadicDeclarator ReferenceDeclarator ArrayDeclarator ParenthesizedDeclarator ReferenceDeclarator BitfieldClause InitializerList InitializerPair SubscriptDesignator FieldDesignator TemplateDeclaration template TemplateParameterList TypeParameterDeclaration typename class OptionalTypeParameterDeclaration VariadicTypeParameterDeclaration TemplateTemplateParameterDeclaration AliasDeclaration using Declaration InitDeclarator FunctionDefinition MsCallModifier CompoundStatement LinkageSpecification DeclarationList CaseStatement case default LabeledStatement StatementIdentifier ExpressionStatement CommaExpression IfStatement if ConditionClause Declaration else SwitchStatement switch DoStatement do while ParenthesizedExpression WhileStatement ForStatement for ReturnStatement return BreakStatement break ContinueStatement continue GotoStatement goto TypeDefinition typedef PointerDeclarator FunctionDeclarator ArrayDeclarator ParenthesizedDeclarator ForRangeLoop TryStatement try CatchClause catch ThrowStatement NamespaceDefinition namespace UsingDeclaration StaticAssertDeclaration static_assert ConcatenatedString TemplateInstantiation FunctionDefinition ExplicitFunctionSpecifier explicit FieldInitializerList FieldInitializer DefaultMethodClause DeleteMethodClause delete FunctionDefinition OperatorCast operator operator Declaration FunctionDefinition FunctionDefinition FunctionDefinition FunctionDefinition Declaration FunctionDefinition Declaration FriendDeclaration friend union AccessSpecifier UnionSpecifier EnumSpecifier enum SizedTypeSpecifier TypeSize EnumeratorList Enumerator ClassSpecifier DependentType Decltype decltype auto ParameterPackExpansion ParameterPackExpansion FieldIdentifier PointerExpression SubscriptExpression BinaryExpression ArithOp LogicOp BitOp UnaryExpression LogicOp BitOp UpdateExpression CastExpression SizeofExpression sizeof CompoundLiteralExpression True False NULL NewExpression new new NewDeclarator DeleteExpression delete LambdaExpression LambdaCaptureSpecifier ParameterPackExpansion nullptr this #define PreprocArg #if #ifdef #ifndef #else #endif #elif PreprocDirectiveName Macro Program",maxTerm:373,nodeProps:[[WY.group,-30,1,8,11,14,15,16,18,74,75,106,109,158,187,228,229,230,234,237,238,239,241,242,243,244,245,249,251,253,254,255,"Expression",-12,17,24,25,26,40,213,214,216,220,221,222,224,"Type",-16,138,141,144,146,148,153,155,159,160,162,164,166,168,176,177,181,"Statement"]],skippedNodes:[0,3,4,5,6,7,10,256,257,258,259,260,261,262,263,264,265,302],repeatNodeCount:36,tokenData:"%Dt&iR!UOX$eXY'mYZ,iZ]$e]^)k^p$epq'mqr-Prs.ost/^tu$euv!/wvw!1gwx!3Yxy!3wyz!4lz{!5a{|!6[|}!8Q}!O!8u!O!P!:n!P!Q!Nh!Q!R#1{!R![#Ek![!]$.n!]!^$0^!^!_$1R!_!`$;p!`!a$<k!a!b$?X!b!c$e!c!n$?|!n!o$A_!o!w$?|!w!x$A_!x!}$?|!}#O$Cx#O#P$Ee#P#Q%$b#Q#R%%}#R#S$?|#S#T$e#T#c$?|#c#d%&x#d#i$?|#i#j%<Q#j#o$?|#o#p%=i#p#q%>^#q#r%@S#r#s%@w#s~$e!l$nW(]W'pQ&k!bOY$eZr$ers%Wsw$ewx'Sx#O$e#O#P&S#P~$e!j%_U(]W&k!bOY%WZw%Wwx%qx#O%W#O#P&S#P~%W!b%vS&k!bOY%qZ#O%q#O#P&S#P~%q!b&XV&k!bOY%qYZ%qZ]%q]^&n^#O%q#O#P&S#P~%q!b&sT&k!bOY%qYZ%qZ#O%q#O#P&S#P~%q!d'ZU'pQ&k!bOY'SZr'Srs%qs#O'S#O#P&S#P~'S&i'z^(]W'pQ'n$Z&k!b)T#SOX$eXY'mYZ(vZ]$e]^)k^p$epq'mqr$ers%Wsw$ewx'Sx#O$e#O#P*r#P~$e$Z({T'n$ZXY(vYZ(v]^(vpq(v#O#P)[$Z)_QYZ(v]^)e$Z)hPYZ(v%w)v^(]W'pQ'n$Z&k!bOX$eXY)kYZ(vZ]$e]^)k^p$epq)kqr$ers%Wsw$ewx'Sx#O$e#O#P*r#P~$e%m*wV&k!bOY%qYZ+^Z]%q]^,T^#O%q#O#P&S#P~%q%m+eY'n$Z&k!bOX%qXY+^YZ(vZ]%q]^+^^p%qpq+^q#O%q#O#P*r#P~%q%m,YT&k!bOY%qYZ+^Z#O%q#O#P&S#P~%q${,pT)Qp'n$ZXY(vYZ(v]^(vpq(v#O#P)[%s-[Y&TP(]W'pQ&k!bOY$eZr$ers%Wsw$ewx'Sx!_$e!_!`-z!`#O$e#O#P&S#P~$e%s.VW!e$V(]W'pQ&k!bOY$eZr$ers%Wsw$ewx'Sx#O$e#O#P&S#P~$e&e.zU(]W'qQ'o$w&k!bOY%WZw%Wwx%qx#O%W#O#P&S#P~%W%w/gd(]W'pQ&k!bOX$eXY/^Zp$epq/^qr$ers%Wsw$ewx'Sx!c$e!c!}0u!}#O$e#O#P&S#P#T$e#T#W0u#W#X2S#X#Y:f#Y#]0u#]#^Hl#^#o0u#o~$e%w1Q`(]W'pQ&k!b&r$ZOY$eZr$ers%Wsw$ewx'Sx!Q$e!Q![0u![!c$e!c!}0u!}#O$e#O#P&S#P#R$e#R#S0u#S#T$e#T#o0u#o~$e%w2_b(]W'pQ&k!b&r$ZOY$eZr$ers%Wsw$ewx'Sx!Q$e!Q![0u![!c$e!c!}0u!}#O$e#O#P&S#P#R$e#R#S0u#S#T$e#T#X0u#X#Y3g#Y#o0u#o~$e%w3rb(]W'pQ&k!b&r$ZOY$eZr$ers%Wsw$ewx'Sx!Q$e!Q![0u![!c$e!c!}0u!}#O$e#O#P&S#P#R$e#R#S0u#S#T$e#T#Y0u#Y#Z4z#Z#o0u#o~$e%w5Vb(]W'pQ&k!b&r$ZOY$eZr$ers%Wsw$ewx'Sx!Q$e!Q![0u![!c$e!c!}0u!}#O$e#O#P&S#P#R$e#R#S0u#S#T$e#T#]0u#]#^6_#^#o0u#o~$e%w6jb(]W'pQ&k!b&r$ZOY$eZr$ers%Wsw$ewx'Sx!Q$e!Q![0u![!c$e!c!}0u!}#O$e#O#P&S#P#R$e#R#S0u#S#T$e#T#b0u#b#c7r#c#o0u#o~$e%w7}b(]W'pQ&k!b&r$ZOY$eZr$ers%Wsw$ewx'Sx!Q$e!Q![0u![!c$e!c!}0u!}#O$e#O#P&S#P#R$e#R#S0u#S#T$e#T#X0u#X#Y9V#Y#o0u#o~$e%w9d`(]W'pQ&j$Z&k!b&r$ZOY$eZr$ers%Wsw$ewx'Sx!Q$e!Q![0u![!c$e!c!}0u!}#O$e#O#P&S#P#R$e#R#S0u#S#T$e#T#o0u#o~$e%w:qd(]W'pQ&k!b&r$ZOY$eZr$ers%Wsw$ewx'Sx!Q$e!Q![0u![!c$e!c!}0u!}#O$e#O#P&S#P#R$e#R#S0u#S#T$e#T#`0u#`#a<P#a#b0u#b#cCQ#c#o0u#o~$e%w<[d(]W'pQ&k!b&r$ZOY$eZr$ers%Wsw$ewx'Sx!Q$e!Q![0u![!c$e!c!}0u!}#O$e#O#P&S#P#R$e#R#S0u#S#T$e#T#]0u#]#^=j#^#g0u#g#h@^#h#o0u#o~$e%w=ub(]W'pQ&k!b&r$ZOY$eZr$ers%Wsw$ewx'Sx!Q$e!Q![0u![!c$e!c!}0u!}#O$e#O#P&S#P#R$e#R#S0u#S#T$e#T#Y0u#Y#Z>}#Z#o0u#o~$e%w?[`(]W'pQ&k!b&q$Z&r$ZOY$eZr$ers%Wsw$ewx'Sx!Q$e!Q![0u![!c$e!c!}0u!}#O$e#O#P&S#P#R$e#R#S0u#S#T$e#T#o0u#o~$e%w@ib(]W'pQ&k!b&r$ZOY$eZr$ers%Wsw$ewx'Sx!Q$e!Q![0u![!c$e!c!}0u!}#O$e#O#P&S#P#R$e#R#S0u#S#T$e#T#X0u#X#YAq#Y#o0u#o~$e%wBO`(]W'pQ&k!b&o$Z&r$ZOY$eZr$ers%Wsw$ewx'Sx!Q$e!Q![0u![!c$e!c!}0u!}#O$e#O#P&S#P#R$e#R#S0u#S#T$e#T#o0u#o~$e%wC]b(]W'pQ&k!b&r$ZOY$eZr$ers%Wsw$ewx'Sx!Q$e!Q![0u![!c$e!c!}0u!}#O$e#O#P&S#P#R$e#R#S0u#S#T$e#T#W0u#W#XDe#X#o0u#o~$e%wDpb(]W'pQ&k!b&r$ZOY$eZr$ers%Wsw$ewx'Sx!Q$e!Q![0u![!c$e!c!}0u!}#O$e#O#P&S#P#R$e#R#S0u#S#T$e#T#]0u#]#^Ex#^#o0u#o~$e%wFTb(]W'pQ&k!b&r$ZOY$eZr$ers%Wsw$ewx'Sx!Q$e!Q![0u![!c$e!c!}0u!}#O$e#O#P&S#P#R$e#R#S0u#S#T$e#T#Y0u#Y#ZG]#Z#o0u#o~$e%wGj`(]W'pQ&k!b&p$Z&r$ZOY$eZr$ers%Wsw$ewx'Sx!Q$e!Q![0u![!c$e!c!}0u!}#O$e#O#P&S#P#R$e#R#S0u#S#T$e#T#o0u#o~$e%wHwd(]W'pQ&k!b&r$ZOY$eZr$ers%Wsw$ewx'Sx!Q$e!Q![0u![!c$e!c!}0u!}#O$e#O#P&S#P#R$e#R#S0u#S#T$e#T#Y0u#Y#ZJV#Z#b0u#b#c!'e#c#o0u#o~$e%wJdd(]W'pQ&l$Z&k!b&r$ZOY$eZr$ers%Wsw$ewx'Sx!Q$e!Q![0u![!c$e!c!}0u!}#O$e#O#P&S#P#R$e#R#S0u#S#T$e#T#W0u#W#XKr#X#b0u#b#c! y#c#o0u#o~$e%wK}b(]W'pQ&k!b&r$ZOY$eZr$ers%Wsw$ewx'Sx!Q$e!Q![0u![!c$e!c!}0u!}#O$e#O#P&S#P#R$e#R#S0u#S#T$e#T#X0u#X#YMV#Y#o0u#o~$e%wMbb(]W'pQ&k!b&r$ZOY$eZr$ers%Wsw$ewx'Sx!Q$e!Q![0u![!c$e!c!}0u!}#O$e#O#P&S#P#R$e#R#S0u#S#T$e#T#Y0u#Y#ZNj#Z#o0u#o~$e%wNw`(]W'pQ&m$Z&k!b&r$ZOY$eZr$ers%Wsw$ewx'Sx!Q$e!Q![0u![!c$e!c!}0u!}#O$e#O#P&S#P#R$e#R#S0u#S#T$e#T#o0u#o~$e%w!!Ub(]W'pQ&k!b&r$ZOY$eZr$ers%Wsw$ewx'Sx!Q$e!Q![0u![!c$e!c!}0u!}#O$e#O#P&S#P#R$e#R#S0u#S#T$e#T#W0u#W#X!#^#X#o0u#o~$e%w!#ib(]W'pQ&k!b&r$ZOY$eZr$ers%Wsw$ewx'Sx!Q$e!Q![0u![!c$e!c!}0u!}#O$e#O#P&S#P#R$e#R#S0u#S#T$e#T#X0u#X#Y!$q#Y#o0u#o~$e%w!$|b(]W'pQ&k!b&r$ZOY$eZr$ers%Wsw$ewx'Sx!Q$e!Q![0u![!c$e!c!}0u!}#O$e#O#P&S#P#R$e#R#S0u#S#T$e#T#Y0u#Y#Z!&U#Z#o0u#o~$e%w!&c`(]W'pQ&n$Z&k!b&r$ZOY$eZr$ers%Wsw$ewx'Sx!Q$e!Q![0u![!c$e!c!}0u!}#O$e#O#P&S#P#R$e#R#S0u#S#T$e#T#o0u#o~$e%w!'pb(]W'pQ&k!b&r$ZOY$eZr$ers%Wsw$ewx'Sx!Q$e!Q![0u![!c$e!c!}0u!}#O$e#O#P&S#P#R$e#R#S0u#S#T$e#T#V0u#V#W!(x#W#o0u#o~$e%w!)Tb(]W'pQ&k!b&r$ZOY$eZr$ers%Wsw$ewx'Sx!Q$e!Q![0u![!c$e!c!}0u!}#O$e#O#P&S#P#R$e#R#S0u#S#T$e#T#`0u#`#a!*]#a#o0u#o~$e%w!*hb(]W'pQ&k!b&r$ZOY$eZr$ers%Wsw$ewx'Sx!Q$e!Q![0u![!c$e!c!}0u!}#O$e#O#P&S#P#R$e#R#S0u#S#T$e#T#i0u#i#j!+p#j#o0u#o~$e%w!+{b(]W'pQ&k!b&r$ZOY$eZr$ers%Wsw$ewx'Sx!Q$e!Q![0u![!c$e!c!}0u!}#O$e#O#P&S#P#R$e#R#S0u#S#T$e#T#W0u#W#X!-T#X#o0u#o~$e%w!-`b(]W'pQ&k!b&r$ZOY$eZr$ers%Wsw$ewx'Sx!Q$e!Q![0u![!c$e!c!}0u!}#O$e#O#P&S#P#R$e#R#S0u#S#T$e#T#X0u#X#Y!.h#Y#o0u#o~$e%w!.u`(]W'pQV$Z&k!b&r$ZOY$eZr$ers%Wsw$ewx'Sx!Q$e!Q![0u![!c$e!c!}0u!}#O$e#O#P&S#P#R$e#R#S0u#S#T$e#T#o0u#o~$e%s!0SY(]W'pQ!`$V&k!bOY$eZr$ers%Wsw$ewx'Sx!_$e!_!`!0r!`#O$e#O#P&S#P~$e%s!0}W!k$V(]W'pQ&k!bOY$eZr$ers%Wsw$ewx'Sx#O$e#O#P&S#P~$e%s!1rZ(Y$V(]W'pQ&k!bOY$eZr$ers%Wsv$evw!2ewx'Sx!_$e!_!`!0r!`#O$e#O#P&S#P~$e%s!2pW(X$V(]W'pQ&k!bOY$eZr$ers%Wsw$ewx'Sx#O$e#O#P&S#P~$e%o!3eU(^S'pQ([$V&k!bOY'SZr'Srs%qs#O'S#O#P&S#P~'S&i!4SW(]W'pQ]&_&k!bOY$eZr$ers%Wsw$ewx'Sx#O$e#O#P&S#P~$e!}!4wW|a(]W'pQ&k!bOY$eZr$ers%Wsw$ewx'Sx#O$e#O#P&S#P~$e%s!5lY(V$V(]W'pQ&k!bOY$eZr$ers%Wsw$ewx'Sx!_$e!_!`!0r!`#O$e#O#P&S#P~$e%s!6g[(]W'pQ!^$V&k!bOY$eZr$ers%Wsw$ewx'Sx{$e{|!7]|!_$e!_!`!0r!`#O$e#O#P&S#P~$e%s!7hW(]W!]$V'pQ&k!bOY$eZr$ers%Wsw$ewx'Sx#O$e#O#P&S#P~$e%w!8]W!Q$Z(]W'pQ&k!bOY$eZr$ers%Wsw$ewx'Sx#O$e#O#P&S#P~$e%s!9Q](]W'pQ!^$V&k!bOY$eZr$ers%Wsw$ewx'Sx}$e}!O!7]!O!_$e!_!`!0r!`!a!9y!a#O$e#O#P&S#P~$e%s!:UW'x$V(]W'pQ&k!bOY$eZr$ers%Wsw$ewx'Sx#O$e#O#P&S#P~$e%w!:y[(]W'pQ'w$V&k!bOY$eZr$ers%Wsw$ewx'Sx!O$e!O!P!;o!P!Q$e!Q![!=]![#O$e#O#P&S#P~$e%w!;xY(]W'pQ&k!bOY$eZr$ers%Wsw$ewx'Sx!O$e!O!P!<h!P#O$e#O#P&S#P~$e%w!<sW(Q$Z(]W'pQ&k!bOY$eZr$ers%Wsw$ewx'Sx#O$e#O#P&S#P~$e%s!=hl(]W'pQ!l$V&k!bOY$eZr$ers%Wsw$ewx!?`x!Q$e!Q![!=]![!g$e!g!h!HO!h!i!L}!i!n$e!n!o!L}!o!r$e!r!s!HO!s!w$e!w!x!L}!x#O$e#O#P&S#P#X$e#X#Y!HO#Y#Z!L}#Z#`$e#`#a!L}#a#d$e#d#e!HO#e#i$e#i#j!L}#j~$e%k!?gW'pQ&k!bOY'SZr'Srs%qs!Q'S!Q![!@P![#O'S#O#P&S#P~'S%k!@Yl'pQ!l$V&k!bOY'SZr'Srs%qsw'Swx!?`x!Q'S!Q![!@P![!g'S!g!h!BQ!h!i!Fm!i!n'S!n!o!Fm!o!r'S!r!s!BQ!s!w'S!w!x!Fm!x#O'S#O#P&S#P#X'S#X#Y!BQ#Y#Z!Fm#Z#`'S#`#a!Fm#a#d'S#d#e!BQ#e#i'S#i#j!Fm#j~'S%k!BZj'pQ!l$V&k!bOY'SZr'Srs%qs{'S{|!C{|!Q'S!Q![!Dx![!c'S!c!h!Dx!h!i!Dx!i!n'S!n!o!Fm!o!w'S!w!x!Fm!x#O'S#O#P&S#P#T'S#T#Y!Dx#Y#Z!Dx#Z#`'S#`#a!Fm#a#i'S#i#j!Fm#j?Ar'S?Ar?As!C{?As~'S%k!DS['pQ&k!bOY'SZr'Srs%qs!Q'S!Q![!Dx![!c'S!c!i!Dx!i#O'S#O#P&S#P#T'S#T#Z!Dx#Z~'S%k!ERh'pQ!l$V&k!bOY'SZr'Srs%qsw'Swx!C{x!Q'S!Q![!Dx![!c'S!c!h!Dx!h!i!Dx!i!n'S!n!o!Fm!o!w'S!w!x!Fm!x#O'S#O#P&S#P#T'S#T#Y!Dx#Y#Z!Dx#Z#`'S#`#a!Fm#a#i'S#i#j!Fm#j~'S%k!Fvb'pQ!l$V&k!bOY'SZr'Srs%qs!h'S!h!i!Fm!i!n'S!n!o!Fm!o!w'S!w!x!Fm!x#O'S#O#P&S#P#Y'S#Y#Z!Fm#Z#`'S#`#a!Fm#a#i'S#i#j!Fm#j~'S%s!HZl(]W'pQ!l$V&k!bOY$eZr$ers%Wsw$ewx'Sx{$e{|!JR|!Q$e!Q![!KW![!c$e!c!h!KW!h!i!KW!i!n$e!n!o!L}!o!w$e!w!x!L}!x#O$e#O#P&S#P#T$e#T#Y!KW#Y#Z!KW#Z#`$e#`#a!L}#a#i$e#i#j!L}#j?Ar$e?Ar?As!JR?As~$e%s!J[^(]W'pQ&k!bOY$eZr$ers%Wsw$ewx'Sx!Q$e!Q![!KW![!c$e!c!i!KW!i#O$e#O#P&S#P#T$e#T#Z!KW#Z~$e%s!Kch(]W'pQ!l$V&k!bOY$eZr$ers%Wsw$ewx!C{x!Q$e!Q![!KW![!c$e!c!h!KW!h!i!KW!i!n$e!n!o!L}!o!w$e!w!x!L}!x#O$e#O#P&S#P#T$e#T#Y!KW#Y#Z!KW#Z#`$e#`#a!L}#a#i$e#i#j!L}#j~$e%s!MYd(]W'pQ!l$V&k!bOY$eZr$ers%Wsw$ewx'Sx!h$e!h!i!L}!i!n$e!n!o!L}!o!w$e!w!x!L}!x#O$e#O#P&S#P#Y$e#Y#Z!L}#Z#`$e#`#a!L}#a#i$e#i#j!L}#j~$e%w!Ns^(]W'pQ!`$V&k!bOY$eZr$ers%Wsw$ewx'Sxz$ez{# o{!P$e!P!Q#,f!Q!_$e!_!`!0r!`#O$e#O#P&S#P~$e%w# xZ(]W'pQ&k!bOY# oYZ#!kZr# ors##`sw# owx#(fxz# oz{#*o{#O# o#O#P#%s#P~# o$Z#!nROz#!kz{#!w{~#!k$Z#!zTOz#!kz{#!w{!P#!k!P!Q##Z!Q~#!k$Z##`OT$Z%u##gX(]W&k!bOY##`YZ#!kZw##`wx#$Sxz##`z{#'P{#O##`#O#P#%s#P~##`%m#$XV&k!bOY#$SYZ#!kZz#$Sz{#$n{#O#$S#O#P#%s#P~#$S%m#$sX&k!bOY#$SYZ#!kZz#$Sz{#$n{!P#$S!P!Q#%`!Q#O#$S#O#P#%s#P~#$S%m#%gST$Z&k!bOY%qZ#O%q#O#P&S#P~%q%m#%xX&k!bOY#$SYZ#$SZ]#$S]^#&e^z#$Sz{#$n{#O#$S#O#P#%s#P~#$S%m#&jV&k!bOY#$SYZ#$SZz#$Sz{#$n{#O#$S#O#P#%s#P~#$S%u#'WZ(]W&k!bOY##`YZ#!kZw##`wx#$Sxz##`z{#'P{!P##`!P!Q#'y!Q#O##`#O#P#%s#P~##`%u#(SU(]WT$Z&k!bOY%WZw%Wwx%qx#O%W#O#P&S#P~%W%o#(mX'pQ&k!bOY#(fYZ#!kZr#(frs#$Ssz#(fz{#)Y{#O#(f#O#P#%s#P~#(f%o#)aZ'pQ&k!bOY#(fYZ#!kZr#(frs#$Ssz#(fz{#)Y{!P#(f!P!Q#*S!Q#O#(f#O#P#%s#P~#(f%o#*]U'pQT$Z&k!bOY'SZr'Srs%qs#O'S#O#P&S#P~'S%w#*x](]W'pQ&k!bOY# oYZ#!kZr# ors##`sw# owx#(fxz# oz{#*o{!P# o!P!Q#+q!Q#O# o#O#P#%s#P~# o%w#+|W(]W'pQT$Z&k!bOY$eZr$ers%Wsw$ewx'Sx#O$e#O#P&S#P~$e%w#,qW(]W'pQS$Z&k!bOY#,fZr#,frs#-Zsw#,fwx#1`x#O#,f#O#P#.Z#P~#,f%u#-dU(]WS$Z&k!bOY#-ZZw#-Zwx#-vx#O#-Z#O#P#.Z#P~#-Z%m#-}SS$Z&k!bOY#-vZ#O#-v#O#P#.Z#P~#-v%m#.bVS$Z&k!bOY#-vYZ%qZ]#-v]^#.w^#O#-v#O#P#/_#P~#-v%m#/OTS$Z&k!bOY#-vYZ%qZ#O#-v#O#P#.Z#P~#-v%m#/fZS$Z&k!bOY#-vYZ%qZ]#-v]^#.w^#O#-v#O#P#/_#P#b#-v#b#c#-v#c#f#-v#f#g#0X#g~#-v%m#0`SS$Z&k!bOY#-vZ#O#-v#O#P#0l#P~#-v%m#0sXS$Z&k!bOY#-vYZ%qZ]#-v]^#.w^#O#-v#O#P#/_#P#b#-v#b#c#-v#c~#-v%o#1iU'pQS$Z&k!bOY#1`Zr#1`rs#-vs#O#1`#O#P#.Z#P~#1`%s#2Wr(]W'pQ!l$V&k!bOY$eZr$ers%Wsw$ewx#4bx!O$e!O!P#>r!P!Q$e!Q![#Ek![!g$e!g!h!HO!h!i!L}!i!n$e!n!o!L}!o!r$e!r!s!HO!s!w$e!w!x!L}!x#O$e#O#P&S#P#U$e#U#V#Gt#V#X$e#X#Y!HO#Y#Z!L}#Z#`$e#`#a!L}#a#d$e#d#e!HO#e#i$e#i#j!L}#j#l$e#l#m$*s#m~$e%k#4iW'pQ&k!bOY'SZr'Srs%qs!Q'S!Q![#5R![#O'S#O#P&S#P~'S%k#5[n'pQ!l$V&k!bOY'SZr'Srs%qsw'Swx#4bx!O'S!O!P#7Y!P!Q'S!Q![#5R![!g'S!g!h!BQ!h!i!Fm!i!n'S!n!o!Fm!o!r'S!r!s!BQ!s!w'S!w!x!Fm!x#O'S#O#P&S#P#X'S#X#Y!BQ#Y#Z!Fm#Z#`'S#`#a!Fm#a#d'S#d#e!BQ#e#i'S#i#j!Fm#j~'S%k#7cl'pQ!l$V&k!bOY'SZr'Srs%qs!Q'S!Q![#9Z![!c'S!c!g#9Z!g!h#<_!h!i#9Z!i!n'S!n!o!Fm!o!r'S!r!s!BQ!s!w'S!w!x!Fm!x#O'S#O#P&S#P#T'S#T#X#9Z#X#Y#<_#Y#Z#9Z#Z#`'S#`#a!Fm#a#d'S#d#e!BQ#e#i'S#i#j!Fm#j~'S%k#9dn'pQ!l$V&k!bOY'SZr'Srs%qsw'Swx#;bx!Q'S!Q![#9Z![!c'S!c!g#9Z!g!h#<_!h!i#9Z!i!n'S!n!o!Fm!o!r'S!r!s!BQ!s!w'S!w!x!Fm!x#O'S#O#P&S#P#T'S#T#X#9Z#X#Y#<_#Y#Z#9Z#Z#`'S#`#a!Fm#a#d'S#d#e!BQ#e#i'S#i#j!Fm#j~'S%k#;i['pQ&k!bOY'SZr'Srs%qs!Q'S!Q![#9Z![!c'S!c!i#9Z!i#O'S#O#P&S#P#T'S#T#Z#9Z#Z~'S%k#<hr'pQ!l$V&k!bOY'SZr'Srs%qsw'Swx#;bx{'S{|!C{|!Q'S!Q![#9Z![!c'S!c!g#9Z!g!h#<_!h!i#9Z!i!n'S!n!o!Fm!o!r'S!r!s!BQ!s!w'S!w!x!Fm!x#O'S#O#P&S#P#T'S#T#X#9Z#X#Y#<_#Y#Z#9Z#Z#`'S#`#a!Fm#a#d'S#d#e!BQ#e#i'S#i#j!Fm#j?Ar'S?Ar?As!C{?As~'S%s#>}n(]W'pQ!l$V&k!bOY$eZr$ers%Wsw$ewx'Sx!Q$e!Q![#@{![!c$e!c!g#@{!g!h#CU!h!i#@{!i!n$e!n!o!L}!o!r$e!r!s!HO!s!w$e!w!x!L}!x#O$e#O#P&S#P#T$e#T#X#@{#X#Y#CU#Y#Z#@{#Z#`$e#`#a!L}#a#d$e#d#e!HO#e#i$e#i#j!L}#j~$e%s#AWn(]W'pQ!l$V&k!bOY$eZr$ers%Wsw$ewx#;bx!Q$e!Q![#@{![!c$e!c!g#@{!g!h#CU!h!i#@{!i!n$e!n!o!L}!o!r$e!r!s!HO!s!w$e!w!x!L}!x#O$e#O#P&S#P#T$e#T#X#@{#X#Y#CU#Y#Z#@{#Z#`$e#`#a!L}#a#d$e#d#e!HO#e#i$e#i#j!L}#j~$e%s#Car(]W'pQ!l$V&k!bOY$eZr$ers%Wsw$ewx#;bx{$e{|!JR|!Q$e!Q![#@{![!c$e!c!g#@{!g!h#CU!h!i#@{!i!n$e!n!o!L}!o!r$e!r!s!HO!s!w$e!w!x!L}!x#O$e#O#P&S#P#T$e#T#X#@{#X#Y#CU#Y#Z#@{#Z#`$e#`#a!L}#a#d$e#d#e!HO#e#i$e#i#j!L}#j?Ar$e?Ar?As!JR?As~$e%s#Evn(]W'pQ!l$V&k!bOY$eZr$ers%Wsw$ewx#4bx!O$e!O!P#>r!P!Q$e!Q![#Ek![!g$e!g!h!HO!h!i!L}!i!n$e!n!o!L}!o!r$e!r!s!HO!s!w$e!w!x!L}!x#O$e#O#P&S#P#X$e#X#Y!HO#Y#Z!L}#Z#`$e#`#a!L}#a#d$e#d#e!HO#e#i$e#i#j!L}#j~$e%s#G}](]W'pQ&k!bOY$eZr$ers%Wsw$ewx'Sx!O$e!O!P#Hv!P!Q$e!Q!R#Io!R![#Ek![#O$e#O#P&S#P~$e%s#IPY(]W'pQ&k!bOY$eZr$ers%Wsw$ewx'Sx!Q$e!Q![!=]![#O$e#O#P&S#P~$e%s#Izr(]W'pQ!l$V&k!bOY$eZr$ers%Wsw$ewx#4bx!O$e!O!P#>r!P!Q$e!Q![#Ek![!g$e!g!h!HO!h!i!L}!i!n$e!n!o!L}!o!r$e!r!s!HO!s!w$e!w!x!L}!x#O$e#O#P&S#P#U$e#U#V#LU#V#X$e#X#Y!HO#Y#Z!L}#Z#`$e#`#a!L}#a#d$e#d#e!HO#e#i$e#i#j!L}#j#l$e#l#m#L}#m~$e%s#L_Y(]W'pQ&k!bOY$eZr$ers%Wsw$ewx'Sx!Q$e!Q![#Ek![#O$e#O#P&S#P~$e%s#MW^(]W'pQ&k!bOY$eZr$ers%Wsw$ewx'Sx!Q$e!Q![#NS![!c$e!c!i#NS!i#O$e#O#P&S#P#T$e#T#Z#NS#Z~$e%s#N_p(]W'pQ!l$V&k!bOY$eZr$ers%Wsw$ewx$!cx!O$e!O!P#>r!P!Q$e!Q![#NS![!c$e!c!g#NS!g!h$(W!h!i#NS!i!n$e!n!o!L}!o!r$e!r!s!HO!s!w$e!w!x!L}!x#O$e#O#P&S#P#T$e#T#X#NS#X#Y$(W#Y#Z#NS#Z#`$e#`#a!L}#a#d$e#d#e!HO#e#i$e#i#j!L}#j~$e%k$!j['pQ&k!bOY'SZr'Srs%qs!Q'S!Q![$#`![!c'S!c!i$#`!i#O'S#O#P&S#P#T'S#T#Z$#`#Z~'S%k$#ip'pQ!l$V&k!bOY'SZr'Srs%qsw'Swx$!cx!O'S!O!P#7Y!P!Q'S!Q![$#`![!c'S!c!g$#`!g!h$%m!h!i$#`!i!n'S!n!o!Fm!o!r'S!r!s!BQ!s!w'S!w!x!Fm!x#O'S#O#P&S#P#T'S#T#X$#`#X#Y$%m#Y#Z$#`#Z#`'S#`#a!Fm#a#d'S#d#e!BQ#e#i'S#i#j!Fm#j~'S%k$%vt'pQ!l$V&k!bOY'SZr'Srs%qsw'Swx$!cx{'S{|!C{|!O'S!O!P#7Y!P!Q'S!Q![$#`![!c'S!c!g$#`!g!h$%m!h!i$#`!i!n'S!n!o!Fm!o!r'S!r!s!BQ!s!w'S!w!x!Fm!x#O'S#O#P&S#P#T'S#T#X$#`#X#Y$%m#Y#Z$#`#Z#`'S#`#a!Fm#a#d'S#d#e!BQ#e#i'S#i#j!Fm#j?Ar'S?Ar?As!C{?As~'S%s$(ct(]W'pQ!l$V&k!bOY$eZr$ers%Wsw$ewx$!cx{$e{|!JR|!O$e!O!P#>r!P!Q$e!Q![#NS![!c$e!c!g#NS!g!h$(W!h!i#NS!i!n$e!n!o!L}!o!r$e!r!s!HO!s!w$e!w!x!L}!x#O$e#O#P&S#P#T$e#T#X#NS#X#Y$(W#Y#Z#NS#Z#`$e#`#a!L}#a#d$e#d#e!HO#e#i$e#i#j!L}#j?Ar$e?Ar?As!JR?As~$e%s$*|a(]W'pQ&k!bOY$eZr$ers%Wsw$ewx'Sx!O$e!O!P#Hv!P!Q$e!Q!R$,R!R![#NS![!c$e!c!i#NS!i#O$e#O#P&S#P#T$e#T#Z#NS#Z~$e%s$,^t(]W'pQ!l$V&k!bOY$eZr$ers%Wsw$ewx$!cx!O$e!O!P#>r!P!Q$e!Q![#NS![!c$e!c!g#NS!g!h$(W!h!i#NS!i!n$e!n!o!L}!o!r$e!r!s!HO!s!w$e!w!x!L}!x#O$e#O#P&S#P#T$e#T#U#NS#U#V#NS#V#X#NS#X#Y$(W#Y#Z#NS#Z#`$e#`#a!L}#a#d$e#d#e!HO#e#i$e#i#j!L}#j#l$e#l#m#L}#m~$e%w$.yY'v$V(]W'pQ&k!bOY$eZr$ers%Wsw$ewx'Sx![$e![!]$/i!]#O$e#O#P&S#P~$e%w$/tWl$Z(]W'pQ&k!bOY$eZr$ers%Wsw$ewx'Sx#O$e#O#P&S#P~$e%s$0iW(Z$V(]W'pQ&k!bOY$eZr$ers%Wsw$ewx'Sx#O$e#O#P&S#P~$e&e$1^[p$V(]W'pQ&k!bOY$2SZr$2Srs$2{sw$2Swx$6{x!^$2S!^!_$8|!_!`$:u!`!a$8X!a#O$2S#O#P$4h#P~$2S#^$2]Y(]W'pQ&k!bOY$2SZr$2Srs$2{sw$2Swx$6{x!`$2S!`!a$8X!a#O$2S#O#P$4h#P~$2S#[$3SW(]W&k!bOY$2{Zw$2{wx$3lx!`$2{!`!a$6`!a#O$2{#O#P$4h#P~$2{#S$3qU&k!bOY$3lZ!`$3l!`!a$4T!a#O$3l#O#P$4h#P~$3l#S$4[SYp&k!bOY%qZ#O%q#O#P&S#P~%q#S$4mV&k!bOY$3lYZ$3lZ]$3l]^$5S^#O$3l#O#P$5n#P~$3l#S$5XV&k!bOY$3lYZ%qZ!`$3l!`!a$4T!a#O$3l#O#P$4h#P~$3l#S$5sX&k!bOY$3lYZ%qZ]$3l]^$5S^!`$3l!`!a$4T!a#O$3l#O#P$4h#P~$3l#[$6iUYp(]W&k!bOY%WZw%Wwx%qx#O%W#O#P&S#P~%W#U$7SW'pQ&k!bOY$6{Zr$6{rs$3ls!`$6{!`!a$7l!a#O$6{#O#P$4h#P~$6{#U$7uUYp'pQ&k!bOY'SZr'Srs%qs#O'S#O#P&S#P~'S#^$8dWYp(]W'pQ&k!bOY$eZr$ers%Wsw$ewx'Sx#O$e#O#P&S#P~$e&e$9XZ(]W'pQ&k!b!j$VOY$2SZr$2Srs$2{sw$2Swx$6{x!_$2S!_!`$9z!`!a$8X!a#O$2S#O#P$4h#P~$2S&e$:VY!k$V(]W'pQ&k!bOY$2SZr$2Srs$2{sw$2Swx$6{x!`$2S!`!a$8X!a#O$2S#O#P$4h#P~$2S&e$;QY!f$V(]W'pQ&k!bOY$2SZr$2Srs$2{sw$2Swx$6{x!`$2S!`!a$8X!a#O$2S#O#P$4h#P~$2S%s$;{Y(hP(]W'pQ&k!bOY$eZr$ers%Wsw$ewx'Sx!_$e!_!`-z!`#O$e#O#P&S#P~$e%s$<vZ(]W'pQ!h$V&k!bOY$eZr$ers%Wsw$ewx'Sx!_$e!_!`$=i!`!a$>^!a#O$e#O#P&S#P~$e%s$=tW!f$V(]W'pQ&k!bOY$eZr$ers%Wsw$ewx'Sx#O$e#O#P&S#P~$e%s$>iY(]W'pQ&k!b!j$VOY$eZr$ers%Wsw$ewx'Sx!_$e!_!`!0r!`#O$e#O#P&S#P~$e!m$?dW'uP(]W'pQ&k!bOY$eZr$ers%Wsw$ewx'Sx#O$e#O#P&S#P~$e&i$@]`(]W'pQ!W$U'rq'yS&k!bOY$eZr$ers%Wsw$ewx'Sx!Q$e!Q![$?|![!c$e!c!}$?|!}#O$e#O#P&S#P#R$e#R#S$?|#S#T$e#T#o$?|#o~$e&i$An`(]W'pQ!W$U'rq'yS&k!bOY$eZr$ers$Bpsw$ewx$C]x!Q$e!Q![$?|![!c$e!c!}$?|!}#O$e#O#P&S#P#R$e#R#S$?|#S#T$e#T#o$?|#o~$e&c$ByU(]W'o$w&k!bOY%WZw%Wwx%qx#O%W#O#P&S#P~%W%k$CfU'pQ([$V&k!bOY'SZr'Srs%qs#O'S#O#P&S#P~'S%s$DTX!Z$V(]W'pQ&k!bOY$eZr$ers%Wsw$ewx'Sx!}$e!}#O$Dp#O#P&S#P~$e!m$D{W(SP(]W'pQ&k!bOY$eZr$ers%Wsw$ewx'Sx#O$e#O#P&S#P~$e%w$Ej_&k!bOY$FiYZ$F|Z]$Fi]^$Gu^!Q$Fi!Q![$H]![!w$Fi!w!x$Ia!x#O$Fi#O#P% e#P#i$Fi#i#j$Lc#j#l$Fi#l#m%!R#m~$Fi!l$FpSXY&k!bOY%qZ#O%q#O#P&S#P~%q%w$GVYXY'n$Z&k!bOX%qXY+^YZ(vZ]%q]^+^^p%qpq+^q#O%q#O#P*r#P~%q%w$G|TXY&k!bOY%qYZ+^Z#O%q#O#P&S#P~%q!l$HdUXY&k!bOY%qZ!Q%q!Q![$Hv![#O%q#O#P&S#P~%q!l$H}UXY&k!bOY%qZ!Q%q!Q![$Fi![#O%q#O#P&S#P~%q!l$IfY&k!bOY%qZ!Q%q!Q![$JU![!c%q!c!i$JU!i#O%q#O#P&S#P#T%q#T#Z$JU#Z~%q!l$JZY&k!bOY%qZ!Q%q!Q![$Jy![!c%q!c!i$Jy!i#O%q#O#P&S#P#T%q#T#Z$Jy#Z~%q!l$KOY&k!bOY%qZ!Q%q!Q![$Kn![!c%q!c!i$Kn!i#O%q#O#P&S#P#T%q#T#Z$Kn#Z~%q!l$KsY&k!bOY%qZ!Q%q!Q![$Lc![!c%q!c!i$Lc!i#O%q#O#P&S#P#T%q#T#Z$Lc#Z~%q!l$LhY&k!bOY%qZ!Q%q!Q![$MW![!c%q!c!i$MW!i#O%q#O#P&S#P#T%q#T#Z$MW#Z~%q!l$M]Y&k!bOY%qZ!Q%q!Q![$M{![!c%q!c!i$M{!i#O%q#O#P&S#P#T%q#T#Z$M{#Z~%q!l$NQY&k!bOY%qZ!Q%q!Q![$Np![!c%q!c!i$Np!i#O%q#O#P&S#P#T%q#T#Z$Np#Z~%q!l$NuY&k!bOY%qZ!Q%q!Q![$Fi![!c%q!c!i$Fi!i#O%q#O#P&S#P#T%q#T#Z$Fi#Z~%q!l% lVXY&k!bOY%qYZ%qZ]%q]^&n^#O%q#O#P&S#P~%q!l%!WY&k!bOY%qZ!Q%q!Q![%!v![!c%q!c!i%!v!i#O%q#O#P&S#P#T%q#T#Z%!v#Z~%q!l%!{Y&k!bOY%qZ!Q%q!Q![%#k![!c%q!c!i%#k!i#O%q#O#P&S#P#T%q#T#Z%#k#Z~%q!l%#rYXY&k!bOY%qZ!Q%q!Q![%#k![!c%q!c!i%#k!i#O%q#O#P&S#P#T%q#T#Z%#k#Z~%q%w%$mX![#u(]W'pQ&k!bOY$eZr$ers%Wsw$ewx'Sx#O$e#O#P&S#P#Q%%Y#Q~$e#Q%%eW(_d(]W'pQ&k!bOY$eZr$ers%Wsw$ewx'Sx#O$e#O#P&S#P~$e%s%&YY(]W'pQ&k!b!c$VOY$eZr$ers%Wsw$ewx'Sx!_$e!_!`!0r!`#O$e#O#P&S#P~$e&i%'Xb(]W'pQ!W$U'rq'yS&k!bOY$eZr$ers%Wsw$ewx'Sx!Q$e!Q![$?|![!c$e!c!}$?|!}#O$e#O#P&S#P#R$e#R#S$?|#S#T$e#T#d$?|#d#e%(a#e#o$?|#o~$e&i%(pb(]W'pQ!W$U'rq'yS&k!bOY$eZr$ers%Wsw$ewx'Sx!Q$e!Q![$?|![!c$e!c!}$?|!}#O$e#O#P&S#P#R$e#R#S$?|#S#T$e#T#X$?|#X#Y%)x#Y#o$?|#o~$e&i%*Xb(]W'pQ!W$U'rq'yS&k!bOY$eZr$ers%Wsw$ewx'Sx!Q$e!Q![$?|![!c$e!c!}$?|!}#O$e#O#P&S#P#R$e#R#S$?|#S#T$e#T#f$?|#f#g%+a#g#o$?|#o~$e&i%+pa(]W'pQ!W$U'rq'yS&k!bOY$eZr$ers%Wsw$ewx'Sx!Q$e!Q![$?|![!c$e!c!}$?|!}#O$e#O#P&S#P#R$e#R#S$?|#S#T$e#T#U%,u#U#o$?|#o~$e&i%-Ub(]W'pQ!W$U'rq'yS&k!bOY$eZr$ers%Wsw$ewx'Sx!Q$e!Q![$?|![!c$e!c!}$?|!}#O$e#O#P&S#P#R$e#R#S$?|#S#T$e#T#h$?|#h#i%.^#i#o$?|#o~$e&i%.mb(]W'pQ!W$U'rq'yS&k!bOY$eZr$ers%Wsw$ewx'Sx!Q$e!Q![$?|![!c$e!c!}$?|!}#O$e#O#P&S#P#R$e#R#S$?|#S#T$e#T#c$?|#c#d%/u#d#o$?|#o~$e&i%0Ub(]W'pQ!W$U'rq'yS&k!bOY$eZr$ers%Wsw$ewx'Sx!Q$e!Q![$?|![!c$e!c!}$?|!}#O$e#O#P&S#P#R$e#R#S$?|#S#T$e#T#f$?|#f#g%1^#g#o$?|#o~$e&i%1ms(]W'pQ!W$U'rq'yS&k!bOY$eZq$eqr%3zrs%Wsu$euv%3zvw%5jwx'Sxy%6hyz$ez{%3z{|%3z|}$e}!O%7a!O!P$e!P!Q%3z!Q![$?|![!^$e!^!_%8_!_!`%3z!`!a%9]!a!c$e!c!}$?|!}#O%:Z#O#P&S#P#Q$e#Q#R%3z#R#S$?|#S#T$e#T#o$?|#o#p$e#p#q%;P#q#r$e#r#s%4u#s~$e!q%4VY(]W'pQ#`T&k!bOY$eZr$ers%Wsw$ewx'Sx!_$e!_!`%4u!`#O$e#O#P&S#P~$e!q%5QW(]W'pQ#`T&k!bOY$eZr$ers%Wsw$ewx'Sx#O$e#O#P&S#P~$e!q%5uZ(]W'pQ#`T&k!bOY$eZr$ers%Wsv$evw%4uwx'Sx!_$e!_!`%4u!`#O$e#O#P&S#P~$e!q%6qY(]W'pQ&k!bOY$eZr$ers%Wsw$ewx'Sxy$eyz%4uz#O$e#O#P&S#P~$e!q%7lZ(]W'pQ#`T&k!bOY$eZr$ers%Wsw$ewx'Sx!_$e!_!`%4u!`!a%4u!a#O$e#O#P&S#P~$e!q%8jZ(]W'pQ#`T&k!bOY$eZr$ers%Wsw$ewx'Sx!^$e!^!_%3z!_!`%4u!`#O$e#O#P&S#P~$e!q%9hZ(]W'pQ#`T&k!bOY$eZr$ers%Wsw$ewx'Sx!_$e!_!`%4u!`!a%3z!a#O$e#O#P&S#P~$e!q%:dX(]W'pQ&k!bOY$eZr$ers%Wsw$ewx'Sx#O$e#O#P&S#P#Q%4u#Q~$e!q%;[[(]W'pQ#`T&k!bOY$eZr$ers%Wsw$ewx'Sx!_$e!_!`%4u!`#O$e#O#P&S#P#p$e#p#q%4u#q~$e&i%<ab(]W'pQ!W$U'rq'yS&k!bOY$eZr$ers$Bpsw$ewx$C]x!Q$e!Q!Y$?|!Y!Z$A_!Z![$?|![!c$e!c!}$?|!}#O$e#O#P&S#P#R$e#R#S$?|#S#T$e#T#o$?|#o~$e%s%=tW!S$V(]W'pQ&k!bOY$eZr$ers%Wsw$ewx'Sx#O$e#O#P&S#P~$e%s%>i[(]W'pQ!b$V&k!bOY$eZr$ers%Wsw$ewx'Sx!_$e!_!`!0r!`#O$e#O#P&S#P#p$e#p#q%?_#q~$e%s%?jW(W$V(]W'pQ&k!bOY$eZr$ers%Wsw$ewx'Sx#O$e#O#P&S#P~$e!}%@_W!Ya(]W'pQ&k!bOY$eZr$ers%Wsw$ewx'Sx#O$e#O#P&S#P~$e!q%ASa(]W'pQ&UP&k!bOX$eXY%BXZp$epq%BXqr$ers%Wsw$ewx'Sx!c$e!c!}%Cg!}#O$e#O#P&S#P#R$e#R#S%Cg#S#T$e#T#o%Cg#o~$e!q%Bba(]W'pQ&k!bOX$eXY%BXZp$epq%BXqr$ers%Wsw$ewx'Sx!c$e!c!}%Cg!}#O$e#O#P&S#P#R$e#R#S%Cg#S#T$e#T#o%Cg#o~$e!q%Cr`(]W'pQdT&k!bOY$eZr$ers%Wsw$ewx'Sx!Q$e!Q![%Cg![!c$e!c!}%Cg!}#O$e#O#P&S#P#R$e#R#S%Cg#S#T$e#T#o%Cg#o~$e",tokenizers:[kJ,JJ,0,1,2,3,4,5,6,7],topRules:{Program:[0,266]},dynamicPrecedences:{84:1,91:1,98:1,104:-10,105:1,110:-1,116:-10,117:1,172:1,175:-10,221:-1,225:2,226:2,265:-10,319:3,363:1,364:3,365:1,366:1},specialized:[{term:310,get:g=>vJ[g]||-1},{term:32,get:g=>DJ[g]||-1},{term:70,get:g=>MJ[g]||-1},{term:317,get:g=>NJ[g]||-1}],tokenPrec:22135}),FJ=jY.define({parser:EJ.configure({props:[dX.add({IfStatement:yX({except:/^\s*({|else\b)/}),TryStatement:yX({except:/^\s*({|catch)\b/}),LabeledStatement:BX,CaseStatement:g=>g.baseIndent+g.unit,BlockComment:()=>-1,Statement:yX({except:/^{/})}),SX.add({"DeclarationList CompoundStatement EnumeratorList FieldDeclarationList InitializerList":KX,BlockComment:g=>({from:g.from+2,to:g.to-2})}),cH({"typedef struct union enum class typename decltype auto template operator friend noexcept namespace using __attribute__ __declspec __based":MH.definitionKeyword,"extern MsCallModifier MsPointerModifier extern static register inline const volatile restrict _Atomic mutable constexpr virtual explicit VirtualSpecifier Access":MH.modifier,"if else switch for while do case default return break continue goto throw try catch":MH.controlKeyword,"new sizeof delete static_assert":MH.operatorKeyword,"NULL nullptr":MH.null,this:MH.self,"True False":MH.bool,"TypeSize PrimitiveType":MH.standard(MH.typeName),TypeIdentifier:MH.typeName,FieldIdentifier:MH.propertyName,"CallExpression/FieldExpression/FieldIdentifier":MH.function(MH.propertyName),StatementIdentifier:MH.labelName,Identifier:MH.variableName,"CallExpression/Identifier":MH.function(MH.variableName),"CallExpression/ScopedIdentifier/Identifier":MH.function(MH.variableName),DestructorName:MH.name,NamespaceIdentifier:MH.namespace,OperatorName:MH.operator,ArithOp:MH.arithmeticOperator,LogicOp:MH.logicOperator,BitOp:MH.bitwiseOperator,CompareOp:MH.compareOperator,AssignOp:MH.definitionOperator,UpdateOp:MH.updateOperator,LineComment:MH.lineComment,BlockComment:MH.blockComment,Number:MH.number,String:MH.string,"RawString SystemLibString":MH.special(MH.string),CharLiteral:MH.character,EscapeSequence:MH.escape,PreProcArg:MH.meta,"PreprocDirectiveName #include #ifdef #ifndef #if #define #else #endif #elif":MH.processingInstruction,MacroName:MH.special(MH.name),"( )":MH.paren,"[ ]":MH.squareBracket,"{ }":MH.brace,"< >":MH.angleBracket,". ->":MH.derefOperator,", ;":MH.separator})]}),languageData:{commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\})$/}});function LJ(g){const I=g.split(/\n/);let A=null;for(const t of I){if(t.match(/^\s*$/))continue;const g=t.match(/^\s+/);if(null===g){A="";break}const I=g[0];(null===A||I.length<A.length)&&(A=I)}let C="";if(A)for(const t of I)C+=t.slice(A.length)+"\n";else C=g;return C.replace(/^\s*/,"").replace(/\s*$/,"")}function TJ(g){let I=LJ(g.innerText);return 0==I.length&&(I=LJ(g.textContent||"")),I}!function(g,I){g(I={exports:{}},I.exports)}((function(g){var I=function(g){var I,A=Object.prototype,C=A.hasOwnProperty,t="function"==typeof Symbol?Symbol:{},i=t.iterator||"@@iterator",e=t.asyncIterator||"@@asyncIterator",o=t.toStringTag||"@@toStringTag";function n(g,I,A){return Object.defineProperty(g,I,{value:A,enumerable:!0,configurable:!0,writable:!0}),g[I]}try{n({},"")}catch(V){n=function(g,I,A){return g[I]=A}}function s(g,I,A,C){var t=I&&I.prototype instanceof m?I:m,i=Object.create(t.prototype),e=new f(C||[]);return i._invoke=function(g,I,A){var C=r;return function(t,i){if(C===a)throw new Error("Generator is already running");if(C===d){if("throw"===t)throw i;return X()}for(A.method=t,A.arg=i;;){var e=A.delegate;if(e){var o=W(e,A);if(o){if(o===h)continue;return o}}if("next"===A.method)A.sent=A._sent=A.arg;else if("throw"===A.method){if(C===r)throw C=d,A.arg;A.dispatchException(A.arg)}else"return"===A.method&&A.abrupt("return",A.arg);C=a;var n=l(g,I,A);if("normal"===n.type){if(C=A.done?d:c,n.arg===h)continue;return{value:n.arg,done:A.done}}"throw"===n.type&&(C=d,A.method="throw",A.arg=n.arg)}}}(g,A,e),i}function l(g,I,A){try{return{type:"normal",arg:g.call(I,A)}}catch(V){return{type:"throw",arg:V}}}g.wrap=s;var r="suspendedStart",c="suspendedYield",a="executing",d="completed",h={};function m(){}function Z(){}function u(){}var G={};G[i]=function(){return this};var b=Object.getPrototypeOf,p=b&&b(b(Y([])));p&&p!==A&&C.call(p,i)&&(G=p);var B=u.prototype=m.prototype=Object.create(G);function y(g){["next","throw","return"].forEach((function(I){n(g,I,(function(g){return this._invoke(I,g)}))}))}function w(g,I){function A(t,i,e,o){var n=l(g[t],g,i);if("throw"!==n.type){var s=n.arg,r=s.value;return r&&"object"==typeof r&&C.call(r,"__await")?I.resolve(r.__await).then((function(g){A("next",g,e,o)}),(function(g){A("throw",g,e,o)})):I.resolve(r).then((function(g){s.value=g,e(s)}),(function(g){return A("throw",g,e,o)}))}o(n.arg)}var t;this._invoke=function(g,C){function i(){return new I((function(I,t){A(g,C,I,t)}))}return t=t?t.then(i,i):i()}}function W(g,A){var C=g.iterator[A.method];if(C===I){if(A.delegate=null,"throw"===A.method){if(g.iterator.return&&(A.method="return",A.arg=I,W(g,A),"throw"===A.method))return h;A.method="throw",A.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var t=l(C,g.iterator,A.arg);if("throw"===t.type)return A.method="throw",A.arg=t.arg,A.delegate=null,h;var i=t.arg;return i?i.done?(A[g.resultName]=i.value,A.next=g.nextLoc,"return"!==A.method&&(A.method="next",A.arg=I),A.delegate=null,h):i:(A.method="throw",A.arg=new TypeError("iterator result is not an object"),A.delegate=null,h)}function S(g){var I={tryLoc:g[0]};1 in g&&(I.catchLoc=g[1]),2 in g&&(I.finallyLoc=g[2],I.afterLoc=g[3]),this.tryEntries.push(I)}function K(g){var I=g.completion||{};I.type="normal",delete I.arg,g.completion=I}function f(g){this.tryEntries=[{tryLoc:"root"}],g.forEach(S,this),this.reset(!0)}function Y(g){if(g){var A=g[i];if(A)return A.call(g);if("function"==typeof g.next)return g;if(!isNaN(g.length)){var t=-1,e=function A(){for(;++t<g.length;)if(C.call(g,t))return A.value=g[t],A.done=!1,A;return A.value=I,A.done=!0,A};return e.next=e}}return{next:X}}function X(){return{value:I,done:!0}}return Z.prototype=B.constructor=u,u.constructor=Z,Z.displayName=n(u,o,"GeneratorFunction"),g.isGeneratorFunction=function(g){var I="function"==typeof g&&g.constructor;return!!I&&(I===Z||"GeneratorFunction"===(I.displayName||I.name))},g.mark=function(g){return Object.setPrototypeOf?Object.setPrototypeOf(g,u):(g.__proto__=u,n(g,o,"GeneratorFunction")),g.prototype=Object.create(B),g},g.awrap=function(g){return{__await:g}},y(w.prototype),w.prototype[e]=function(){return this},g.AsyncIterator=w,g.async=function(I,A,C,t,i){void 0===i&&(i=Promise);var e=new w(s(I,A,C,t),i);return g.isGeneratorFunction(A)?e:e.next().then((function(g){return g.done?g.value:e.next()}))},y(B),n(B,o,"Generator"),B[i]=function(){return this},B.toString=function(){return"[object Generator]"},g.keys=function(g){var I=[];for(var A in g)I.push(A);return I.reverse(),function A(){for(;I.length;){var C=I.pop();if(C in g)return A.value=C,A.done=!1,A}return A.done=!0,A}},g.values=Y,f.prototype={constructor:f,reset:function(g){if(this.prev=0,this.next=0,this.sent=this._sent=I,this.done=!1,this.delegate=null,this.method="next",this.arg=I,this.tryEntries.forEach(K),!g)for(var A in this)"t"===A.charAt(0)&&C.call(this,A)&&!isNaN(+A.slice(1))&&(this[A]=I)},stop:function(){this.done=!0;var g=this.tryEntries[0].completion;if("throw"===g.type)throw g.arg;return this.rval},dispatchException:function(g){if(this.done)throw g;var A=this;function t(C,t){return o.type="throw",o.arg=g,A.next=C,t&&(A.method="next",A.arg=I),!!t}for(var i=this.tryEntries.length-1;i>=0;--i){var e=this.tryEntries[i],o=e.completion;if("root"===e.tryLoc)return t("end");if(e.tryLoc<=this.prev){var n=C.call(e,"catchLoc"),s=C.call(e,"finallyLoc");if(n&&s){if(this.prev<e.catchLoc)return t(e.catchLoc,!0);if(this.prev<e.finallyLoc)return t(e.finallyLoc)}else if(n){if(this.prev<e.catchLoc)return t(e.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<e.finallyLoc)return t(e.finallyLoc)}}}},abrupt:function(g,I){for(var A=this.tryEntries.length-1;A>=0;--A){var t=this.tryEntries[A];if(t.tryLoc<=this.prev&&C.call(t,"finallyLoc")&&this.prev<t.finallyLoc){var i=t;break}}i&&("break"===g||"continue"===g)&&i.tryLoc<=I&&I<=i.finallyLoc&&(i=null);var e=i?i.completion:{};return e.type=g,e.arg=I,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(e)},complete:function(g,I){if("throw"===g.type)throw g.arg;return"break"===g.type||"continue"===g.type?this.next=g.arg:"return"===g.type?(this.rval=this.arg=g.arg,this.method="return",this.next="end"):"normal"===g.type&&I&&(this.next=I),h},finish:function(g){for(var I=this.tryEntries.length-1;I>=0;--I){var A=this.tryEntries[I];if(A.finallyLoc===g)return this.complete(A.completion,A.afterLoc),K(A),h}},catch:function(g){for(var I=this.tryEntries.length-1;I>=0;--I){var A=this.tryEntries[I];if(A.tryLoc===g){var C=A.completion;if("throw"===C.type){var t=C.arg;K(A)}return t}}throw new Error("illegal catch attempt")},delegateYield:function(g,A,C){return this.delegate={iterator:Y(g),resultName:A,nextLoc:C},"next"===this.method&&(this.arg=I),h}},g}(g.exports);try{regeneratorRuntime=I}catch(A){Function("r","regeneratorRuntime = r")(I)}}));const zJ="#E3439D",PJ="#B0B9C8",UJ="#E38730",xJ=uH.define([{tag:MH.keyword,color:"#C067DA"},{tag:[MH.name,MH.deleted,MH.character,MH.propertyName,MH.macroName],color:zJ},{tag:[MH.function(MH.variableName),MH.labelName],color:"#008CFF"},{tag:[MH.color,MH.constant(MH.name),MH.standard(MH.name)],color:UJ},{tag:[MH.definition(MH.name),MH.separator],color:"#8A909C"},{tag:[MH.typeName,MH.className,MH.number,MH.changed,MH.annotation,MH.modifier,MH.self,MH.namespace],color:"#D3C101"},{tag:[MH.operator,MH.operatorKeyword,MH.url,MH.escape,MH.regexp,MH.link,MH.special(MH.string)],color:"#2CB2C3"},{tag:[MH.meta,MH.comment],color:PJ},{tag:MH.strong,fontWeight:"bold"},{tag:MH.emphasis,fontStyle:"italic"},{tag:MH.strikethrough,textDecoration:"line-through"},{tag:MH.link,color:PJ,textDecoration:"underline"},{tag:MH.heading,fontWeight:"bold",color:zJ},{tag:[MH.atom,MH.bool,MH.special(MH.variableName)],color:UJ},{tag:[MH.processingInstruction,MH.string,MH.inserted],color:"#77CA3B"},{tag:MH.invalid,color:"#000000"}]),jJ=hf.theme({".cm-gutters":{backgroundColor:"white",border:"none"}});function _J(g){return"python"==g?[ek,jJ,xJ,new oX(nJ)]:"ruby"==g?[ek,jJ,xJ,new oX(rJ,rJ.data.of({autocomplete:gQ(["LineComment","BlockComment","String","IndentedString"],qR(cJ))}))]:"js"==g?[ek,jJ,xJ,$k()]:"sql"==g?[ek,jJ,xJ,QJ()]:"cpp"==g?[ek,jJ,xJ,new oX(FJ)]:[ek,jJ,xJ]}class $J extends HTMLElement{static get observedAttributes(){return["runtime","syntax","code"]}get program(){return this.view.state.doc.toString()}constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML="\n    <style>\n      .cm-editor {\n        background: white;\n        height: 100%;\n      }\n    </style>\n    <pre hidden><slot></slot></pre>\n    ",this.view=new hf({state:pw.create({doc:this.code,extensions:_J(void 0)}),root:this.shadowRoot,parent:this.shadowRoot})}connectedCallback(){setTimeout((()=>{if(!this.code){const g=TJ(this);""!=g.trim()&&(this.code=g)}}),0)}attributeChangedCallback(g,I,A){this[g]=A,I!=A&&this.runtime&&this.setProgram(this.syntax,this.runtime,this.code||this.program)}setProgram(g,I,A){this.runtime=I,g||(g=function(g){return"python"==g?"python":"quickjs"==g?"js":"sqlite"==g?"sql":"clang"==g||"clangpp"==g?"cpp":"ruby"==g?"ruby":void 0}(I)),this.code=void 0,this.view.setState(pw.create({doc:A,extensions:_J(g)}))}show(){this.hidden=!1}hide(){this.hidden=!0}}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.
  
    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.
  
    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function qJ(g,I,A,C){var t,i=arguments.length,e=i<3?I:null===C?C=Object.getOwnPropertyDescriptor(I,A):C;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)e=Reflect.decorate(g,I,A,C);else for(var o=g.length-1;o>=0;o--)(t=g[o])&&(e=(i<3?t(e):i>3?t(I,A,e):t(I,A))||e);return i>3&&e&&Object.defineProperty(I,A,e),e
/**
   * @license
   * Copyright 2019 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */}const gv=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Iv=Symbol(),Av=new Map;class Cv{constructor(g,I){if(this._$cssResult$=!0,I!==Iv)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=g}get styleSheet(){let g=Av.get(this.cssText);return gv&&void 0===g&&(Av.set(this.cssText,g=new CSSStyleSheet),g.replaceSync(this.cssText)),g}toString(){return this.cssText}}const tv=(g,...I)=>{const A=1===g.length?g[0]:I.reduce(((I,A,C)=>I+(g=>{if(!0===g._$cssResult$)return g.cssText;if("number"==typeof g)return g;throw Error("Value passed to 'css' function must be a 'css' function result: "+g+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(A)+g[C+1]),g[0]);return new Cv(A,Iv)},iv=gv?g=>g:g=>g instanceof CSSStyleSheet?(g=>{let I="";for(const A of g.cssRules)I+=A.cssText;return(g=>new Cv("string"==typeof g?g:g+"",Iv))(I)})(g):g
/**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */;var ev,ov;const nv={toAttribute(g,I){switch(I){case Boolean:g=g?"":null;break;case Object:case Array:g=null==g?g:JSON.stringify(g)}return g},fromAttribute(g,I){let A=g;switch(I){case Boolean:A=null!==g;break;case Number:A=null===g?null:Number(g);break;case Object:case Array:try{A=JSON.parse(g)}catch(C){A=null}}return A}},sv=(g,I)=>I!==g&&(I==I||g==g),lv={attribute:!0,type:String,converter:nv,reflect:!1,hasChanged:sv};class rv extends HTMLElement{constructor(){super(),this._$Et=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Ei=null,this.o()}static addInitializer(g){var I;null!==(I=this.l)&&void 0!==I||(this.l=[]),this.l.push(g)}static get observedAttributes(){this.finalize();const g=[];return this.elementProperties.forEach(((I,A)=>{const C=this._$Eh(A,I);void 0!==C&&(this._$Eu.set(C,A),g.push(C))})),g}static createProperty(g,I=lv){if(I.state&&(I.attribute=!1),this.finalize(),this.elementProperties.set(g,I),!I.noAccessor&&!this.prototype.hasOwnProperty(g)){const A="symbol"==typeof g?Symbol():"__"+g,C=this.getPropertyDescriptor(g,A,I);void 0!==C&&Object.defineProperty(this.prototype,g,C)}}static getPropertyDescriptor(g,I,A){return{get(){return this[I]},set(C){const t=this[g];this[I]=C,this.requestUpdate(g,t,A)},configurable:!0,enumerable:!0}}static getPropertyOptions(g){return this.elementProperties.get(g)||lv}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const g=Object.getPrototypeOf(this);if(g.finalize(),this.elementProperties=new Map(g.elementProperties),this._$Eu=new Map,this.hasOwnProperty("properties")){const g=this.properties,I=[...Object.getOwnPropertyNames(g),...Object.getOwnPropertySymbols(g)];for(const A of I)this.createProperty(A,g[A])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(g){const I=[];if(Array.isArray(g)){const A=new Set(g.flat(1/0).reverse());for(const g of A)I.unshift(iv(g))}else void 0!==g&&I.push(iv(g));return I}static _$Eh(g,I){const A=I.attribute;return!1===A?void 0:"string"==typeof A?A:"string"==typeof g?g.toLowerCase():void 0}o(){var g;this._$Ev=new Promise((g=>this.enableUpdating=g)),this._$AL=new Map,this._$Ep(),this.requestUpdate(),null===(g=this.constructor.l)||void 0===g||g.forEach((g=>g(this)))}addController(g){var I,A;(null!==(I=this._$Em)&&void 0!==I?I:this._$Em=[]).push(g),void 0!==this.renderRoot&&this.isConnected&&(null===(A=g.hostConnected)||void 0===A||A.call(g))}removeController(g){var I;null===(I=this._$Em)||void 0===I||I.splice(this._$Em.indexOf(g)>>>0,1)}_$Ep(){this.constructor.elementProperties.forEach(((g,I)=>{this.hasOwnProperty(I)&&(this._$Et.set(I,this[I]),delete this[I])}))}createRenderRoot(){var g;const I=null!==(g=this.shadowRoot)&&void 0!==g?g:this.attachShadow(this.constructor.shadowRootOptions);return A=I,C=this.constructor.elementStyles,gv?A.adoptedStyleSheets=C.map((g=>g instanceof CSSStyleSheet?g:g.styleSheet)):C.forEach((g=>{const I=document.createElement("style"),C=window.litNonce;void 0!==C&&I.setAttribute("nonce",C),I.textContent=g.cssText,A.appendChild(I)})),I;var A,C}connectedCallback(){var g;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(g=this._$Em)||void 0===g||g.forEach((g=>{var I;return null===(I=g.hostConnected)||void 0===I?void 0:I.call(g)}))}enableUpdating(g){}disconnectedCallback(){var g;null===(g=this._$Em)||void 0===g||g.forEach((g=>{var I;return null===(I=g.hostDisconnected)||void 0===I?void 0:I.call(g)}))}attributeChangedCallback(g,I,A){this._$AK(g,A)}_$Eg(g,I,A=lv){var C,t;const i=this.constructor._$Eh(g,A);if(void 0!==i&&!0===A.reflect){const e=(null!==(t=null===(C=A.converter)||void 0===C?void 0:C.toAttribute)&&void 0!==t?t:nv.toAttribute)(I,A.type);this._$Ei=g,null==e?this.removeAttribute(i):this.setAttribute(i,e),this._$Ei=null}}_$AK(g,I){var A,C,t;const i=this.constructor,e=i._$Eu.get(g);if(void 0!==e&&this._$Ei!==e){const g=i.getPropertyOptions(e),o=g.converter,n=null!==(t=null!==(C=null===(A=o)||void 0===A?void 0:A.fromAttribute)&&void 0!==C?C:"function"==typeof o?o:null)&&void 0!==t?t:nv.fromAttribute;this._$Ei=e,this[e]=n(I,g.type),this._$Ei=null}}requestUpdate(g,I,A){let C=!0;void 0!==g&&(((A=A||this.constructor.getPropertyOptions(g)).hasChanged||sv)(this[g],I)?(this._$AL.has(g)||this._$AL.set(g,I),!0===A.reflect&&this._$Ei!==g&&(void 0===this._$ES&&(this._$ES=new Map),this._$ES.set(g,A))):C=!1),!this.isUpdatePending&&C&&(this._$Ev=this._$EC())}async _$EC(){this.isUpdatePending=!0;try{await this._$Ev}catch(I){Promise.reject(I)}const g=this.scheduleUpdate();return null!=g&&await g,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var g;if(!this.isUpdatePending)return;this.hasUpdated,this._$Et&&(this._$Et.forEach(((g,I)=>this[I]=g)),this._$Et=void 0);let I=!1;const A=this._$AL;try{I=this.shouldUpdate(A),I?(this.willUpdate(A),null===(g=this._$Em)||void 0===g||g.forEach((g=>{var I;return null===(I=g.hostUpdate)||void 0===I?void 0:I.call(g)})),this.update(A)):this._$ET()}catch(C){throw I=!1,this._$ET(),C}I&&this._$AE(A)}willUpdate(g){}_$AE(g){var I;null===(I=this._$Em)||void 0===I||I.forEach((g=>{var I;return null===(I=g.hostUpdated)||void 0===I?void 0:I.call(g)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(g)),this.updated(g)}_$ET(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$Ev}shouldUpdate(g){return!0}update(g){void 0!==this._$ES&&(this._$ES.forEach(((g,I)=>this._$Eg(I,this[I],g))),this._$ES=void 0),this._$ET()}updated(g){}firstUpdated(g){}}
/**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */
var cv,av;rv.finalized=!0,rv.elementProperties=new Map,rv.elementStyles=[],rv.shadowRootOptions={mode:"open"},null===(ev=globalThis.reactiveElementPolyfillSupport)||void 0===ev||ev.call(globalThis,{ReactiveElement:rv}),(null!==(ov=globalThis.reactiveElementVersions)&&void 0!==ov?ov:globalThis.reactiveElementVersions=[]).push("1.0.0");const dv=globalThis.trustedTypes,hv=dv?dv.createPolicy("lit-html",{createHTML:g=>g}):void 0,mv=`lit$${(Math.random()+"").slice(9)}$`,Zv="?"+mv,uv=`<${Zv}>`,Gv=document,bv=(g="")=>Gv.createComment(g),pv=g=>null===g||"object"!=typeof g&&"function"!=typeof g,Bv=Array.isArray,yv=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,wv=/-->/g,Wv=/>/g,Sv=/>|[ 	\n\r](?:([^\s"'>=/]+)([ 	\n\r]*=[ 	\n\r]*(?:[^ 	\n\r"'`<>=]|("|')|))|$)/g,Kv=/'/g,fv=/"/g,Yv=/^(?:script|style|textarea)$/i,Xv=(Hv=1,(g,...I)=>({_$litType$:Hv,strings:g,values:I})),Vv=Symbol.for("lit-noChange"),Ov=Symbol.for("lit-nothing"),Rv=new WeakMap,Qv=Gv.createTreeWalker(Gv,129,null,!1);var Hv,kv,Jv,vv;class Dv{constructor({strings:g,_$litType$:I},A){let C;this.parts=[];let t=0,i=0;const e=g.length-1,o=this.parts,[n,s]=((g,I)=>{const A=g.length-1,C=[];let t,i=2===I?"<svg>":"",e=yv;for(let n=0;n<A;n++){const I=g[n];let A,o,s=-1,l=0;for(;l<I.length&&(e.lastIndex=l,o=e.exec(I),null!==o);)l=e.lastIndex,e===yv?"!--"===o[1]?e=wv:void 0!==o[1]?e=Wv:void 0!==o[2]?(Yv.test(o[2])&&(t=RegExp("</"+o[2],"g")),e=Sv):void 0!==o[3]&&(e=Sv):e===Sv?">"===o[0]?(e=null!=t?t:yv,s=-1):void 0===o[1]?s=-2:(s=e.lastIndex-o[2].length,A=o[1],e=void 0===o[3]?Sv:'"'===o[3]?fv:Kv):e===fv||e===Kv?e=Sv:e===wv||e===Wv?e=yv:(e=Sv,t=void 0);const r=e===Sv&&g[n+1].startsWith("/>")?" ":"";i+=e===yv?I+uv:s>=0?(C.push(A),I.slice(0,s)+"$lit$"+I.slice(s)+mv+r):I+mv+(-2===s?(C.push(void 0),n):r)}const o=i+(g[A]||"<?>")+(2===I?"</svg>":"");return[void 0!==hv?hv.createHTML(o):o,C]})(g,I);if(this.el=Dv.createElement(n,A),Qv.currentNode=this.el.content,2===I){const g=this.el.content,I=g.firstChild;I.remove(),g.append(...I.childNodes)}for(;null!==(C=Qv.nextNode())&&o.length<e;){if(1===C.nodeType){if(C.hasAttributes()){const g=[];for(const I of C.getAttributeNames())if(I.endsWith("$lit$")||I.startsWith(mv)){const A=s[i++];if(g.push(I),void 0!==A){const g=C.getAttribute(A.toLowerCase()+"$lit$").split(mv),I=/([.?@])?(.*)/.exec(A);o.push({type:1,index:t,name:I[2],strings:g,ctor:"."===I[1]?Lv:"?"===I[1]?Tv:"@"===I[1]?zv:Fv})}else o.push({type:6,index:t})}for(const I of g)C.removeAttribute(I)}if(Yv.test(C.tagName)){const g=C.textContent.split(mv),I=g.length-1;if(I>0){C.textContent=dv?dv.emptyScript:"";for(let A=0;A<I;A++)C.append(g[A],bv()),Qv.nextNode(),o.push({type:2,index:++t});C.append(g[I],bv())}}}else if(8===C.nodeType)if(C.data===Zv)o.push({type:2,index:t});else{let g=-1;for(;-1!==(g=C.data.indexOf(mv,g+1));)o.push({type:7,index:t}),g+=mv.length-1}t++}}static createElement(g,I){const A=Gv.createElement("template");return A.innerHTML=g,A}}function Mv(g,I,A=g,C){var t,i,e,o;if(I===Vv)return I;let n=void 0!==C?null===(t=A._$Cl)||void 0===t?void 0:t[C]:A._$Cu;const s=pv(I)?void 0:I._$litDirective$;return(null==n?void 0:n.constructor)!==s&&(null===(i=null==n?void 0:n._$AO)||void 0===i||i.call(n,!1),void 0===s?n=void 0:(n=new s(g),n._$AT(g,A,C)),void 0!==C?(null!==(e=(o=A)._$Cl)&&void 0!==e?e:o._$Cl=[])[C]=n:A._$Cu=n),void 0!==n&&(I=Mv(g,n._$AS(g,I.values),n,C)),I}class Nv{constructor(g,I){this.v=[],this._$AN=void 0,this._$AD=g,this._$AM=I}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(g){var I;const{el:{content:A},parts:C}=this._$AD,t=(null!==(I=null==g?void 0:g.creationScope)&&void 0!==I?I:Gv).importNode(A,!0);Qv.currentNode=t;let i=Qv.nextNode(),e=0,o=0,n=C[0];for(;void 0!==n;){if(e===n.index){let I;2===n.type?I=new Ev(i,i.nextSibling,this,g):1===n.type?I=new n.ctor(i,n.name,n.strings,this,g):6===n.type&&(I=new Pv(i,this,g)),this.v.push(I),n=C[++o]}e!==(null==n?void 0:n.index)&&(i=Qv.nextNode(),e++)}return t}m(g){let I=0;for(const A of this.v)void 0!==A&&(void 0!==A.strings?(A._$AI(g,A,I),I+=A.strings.length-2):A._$AI(g[I])),I++}}class Ev{constructor(g,I,A,C){var t;this.type=2,this._$AH=Ov,this._$AN=void 0,this._$AA=g,this._$AB=I,this._$AM=A,this.options=C,this._$Cg=null===(t=null==C?void 0:C.isConnected)||void 0===t||t}get _$AU(){var g,I;return null!==(I=null===(g=this._$AM)||void 0===g?void 0:g._$AU)&&void 0!==I?I:this._$Cg}get parentNode(){let g=this._$AA.parentNode;const I=this._$AM;return void 0!==I&&11===g.nodeType&&(g=I.parentNode),g}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(g,I=this){g=Mv(this,g,I),pv(g)?g===Ov||null==g||""===g?(this._$AH!==Ov&&this._$AR(),this._$AH=Ov):g!==this._$AH&&g!==Vv&&this.$(g):void 0!==g._$litType$?this.T(g):void 0!==g.nodeType?this.S(g):(g=>{var I;return Bv(g)||"function"==typeof(null===(I=g)||void 0===I?void 0:I[Symbol.iterator])})(g)?this.M(g):this.$(g)}A(g,I=this._$AB){return this._$AA.parentNode.insertBefore(g,I)}S(g){this._$AH!==g&&(this._$AR(),this._$AH=this.A(g))}$(g){this._$AH!==Ov&&pv(this._$AH)?this._$AA.nextSibling.data=g:this.S(Gv.createTextNode(g)),this._$AH=g}T(g){var I;const{values:A,_$litType$:C}=g,t="number"==typeof C?this._$AC(g):(void 0===C.el&&(C.el=Dv.createElement(C.h,this.options)),C);if((null===(I=this._$AH)||void 0===I?void 0:I._$AD)===t)this._$AH.m(A);else{const g=new Nv(t,this),I=g.p(this.options);g.m(A),this.S(I),this._$AH=g}}_$AC(g){let I=Rv.get(g.strings);return void 0===I&&Rv.set(g.strings,I=new Dv(g)),I}M(g){Bv(this._$AH)||(this._$AH=[],this._$AR());const I=this._$AH;let A,C=0;for(const t of g)C===I.length?I.push(A=new Ev(this.A(bv()),this.A(bv()),this,this.options)):A=I[C],A._$AI(t),C++;C<I.length&&(this._$AR(A&&A._$AB.nextSibling,C),I.length=C)}_$AR(g=this._$AA.nextSibling,I){var A;for(null===(A=this._$AP)||void 0===A||A.call(this,!1,!0,I);g&&g!==this._$AB;){const I=g.nextSibling;g.remove(),g=I}}setConnected(g){var I;void 0===this._$AM&&(this._$Cg=g,null===(I=this._$AP)||void 0===I||I.call(this,g))}}class Fv{constructor(g,I,A,C,t){this.type=1,this._$AH=Ov,this._$AN=void 0,this.element=g,this.name=I,this._$AM=C,this.options=t,A.length>2||""!==A[0]||""!==A[1]?(this._$AH=Array(A.length-1).fill(new String),this.strings=A):this._$AH=Ov}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(g,I=this,A,C){const t=this.strings;let i=!1;if(void 0===t)g=Mv(this,g,I,0),i=!pv(g)||g!==this._$AH&&g!==Vv,i&&(this._$AH=g);else{const C=g;let e,o;for(g=t[0],e=0;e<t.length-1;e++)o=Mv(this,C[A+e],I,e),o===Vv&&(o=this._$AH[e]),i||(i=!pv(o)||o!==this._$AH[e]),o===Ov?g=Ov:g!==Ov&&(g+=(null!=o?o:"")+t[e+1]),this._$AH[e]=o}i&&!C&&this.k(g)}k(g){g===Ov?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=g?g:"")}}class Lv extends Fv{constructor(){super(...arguments),this.type=3}k(g){this.element[this.name]=g===Ov?void 0:g}}class Tv extends Fv{constructor(){super(...arguments),this.type=4}k(g){g&&g!==Ov?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name)}}class zv extends Fv{constructor(g,I,A,C,t){super(g,I,A,C,t),this.type=5}_$AI(g,I=this){var A;if((g=null!==(A=Mv(this,g,I,0))&&void 0!==A?A:Ov)===Vv)return;const C=this._$AH,t=g===Ov&&C!==Ov||g.capture!==C.capture||g.once!==C.once||g.passive!==C.passive,i=g!==Ov&&(C===Ov||t);t&&this.element.removeEventListener(this.name,this,C),i&&this.element.addEventListener(this.name,this,g),this._$AH=g}handleEvent(g){var I,A;"function"==typeof this._$AH?this._$AH.call(null!==(A=null===(I=this.options)||void 0===I?void 0:I.host)&&void 0!==A?A:this.element,g):this._$AH.handleEvent(g)}}class Pv{constructor(g,I,A){this.element=g,this.type=6,this._$AN=void 0,this._$AM=I,this.options=A}get _$AU(){return this._$AM._$AU}_$AI(g){Mv(this,g)}}null===(cv=globalThis.litHtmlPolyfillSupport)||void 0===cv||cv.call(globalThis,Dv,Ev),(null!==(av=globalThis.litHtmlVersions)&&void 0!==av?av:globalThis.litHtmlVersions=[]).push("2.0.0");class Uv extends rv{constructor(){super(...arguments),this.renderOptions={host:this},this._$Dt=void 0}createRenderRoot(){var g,I;const A=super.createRenderRoot();return null!==(g=(I=this.renderOptions).renderBefore)&&void 0!==g||(I.renderBefore=A.firstChild),A}update(g){const I=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(g),this._$Dt=((g,I,A)=>{var C,t;const i=null!==(C=null==A?void 0:A.renderBefore)&&void 0!==C?C:I;let e=i._$litPart$;if(void 0===e){const g=null!==(t=null==A?void 0:A.renderBefore)&&void 0!==t?t:null;i._$litPart$=e=new Ev(I.insertBefore(bv(),g),g,void 0,null!=A?A:{})}return e._$AI(g),e})(I,this.renderRoot,this.renderOptions)}connectedCallback(){var g;super.connectedCallback(),null===(g=this._$Dt)||void 0===g||g.setConnected(!0)}disconnectedCallback(){var g;super.disconnectedCallback(),null===(g=this._$Dt)||void 0===g||g.setConnected(!1)}render(){return Vv}}Uv.finalized=!0,Uv._$litElement$=!0,null===(kv=globalThis.litElementHydrateSupport)||void 0===kv||kv.call(globalThis,{LitElement:Uv}),null===(Jv=globalThis.litElementPolyfillSupport)||void 0===Jv||Jv.call(globalThis,{LitElement:Uv}),(null!==(vv=globalThis.litElementVersions)&&void 0!==vv?vv:globalThis.litElementVersions=[]).push("3.0.0");
/**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */
const xv=(g,I)=>"method"===I.kind&&I.descriptor&&!("value"in I.descriptor)?__spreadProps(__spreadValues({},I),{finisher(A){A.createProperty(I.key,g)}}):{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:I.key,initializer(){"function"==typeof I.initializer&&(this[I.key]=I.initializer.call(this))},finisher(A){A.createProperty(I.key,g)}};function jv(g){return(I,A)=>{return void 0!==A?(C=g,t=A,void I.constructor.createProperty(t,C)):xv(g,I);var C,t}}
/**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */class _v extends Uv{constructor(){super(...arguments),this.running=!1}run(){const g=new Event("runno-run",{bubbles:!0,composed:!0});this.dispatchEvent(g)}stop(){const g=new Event("runno-stop",{bubbles:!0,composed:!0});this.dispatchEvent(g)}show(){this.hidden=!1}hide(){this.hidden=!0}render(){return this.running?Xv`
        <button id="stop" @click=${this.stop}>
          <span>Running&hellip;</span>
          <svg
            width="13px"
            height="13px"
            viewBox="0 0 13 13"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            xmlns:xlink="http://www.w3.org/1999/xlink"
          >
            <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
              <line
                x1="1"
                y1="1"
                x2="12"
                y2="12"
                id="Path-21"
                stroke="#FFFFFF"
              ></line>
              <line
                x1="1"
                y1="1"
                x2="12"
                y2="12"
                id="Path-21"
                stroke="#FFFFFF"
                transform="translate(6.500000, 6.500000) scale(1, -1) translate(-6.500000, -6.500000) "
              ></line>
            </g>
          </svg>
        </button>
      `:Xv`
        <button id="run" @click=${this.run}>
          <span>Run</span>
          <svg
            width="13px"
            height="18px"
            viewBox="0 0 13 18"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            xmlns:xlink="http://www.w3.org/1999/xlink"
          >
            <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
              <polyline
                stroke="#000000"
                points="3.33556662 14.65592 0.5 17 0.5 1 3.33556662 2.80955051"
              ></polyline>
              <polyline
                stroke="#000000"
                points="6.5 12.6288197 12 8.14251005 6.5 4.53125876"
              ></polyline>
            </g>
          </svg>
        </button>
      `}}_v.styles=tv`
    :host {
      background: white;
    }

    #run {
      font-size: 16px;
      font-family: monospace;
      background: #ffe234;
      border: none;
      color: black;
      padding: 8px;
      margin: 8px;
      display: inline-flex;
      align-items: center;
      height: 36px;
    }

    #run svg {
      margin-left: 8px;
    }

    #stop {
      font-size: 16px;
      font-family: monospace;
      border: none;
      background: #d0d0d0;
      color: black;
      padding: 0px;
      margin: 8px;
      display: inline-flex;
      align-items: center;
      height: 36px;
    }

    #stop span {
      padding: 0 8px;
    }

    #stop svg {
      padding: 0 8px;
      background: #ff3449;
      height: 36px;
    }
  `,qJ([jv({type:Boolean})],_v.prototype,"running",void 0);
/**
   * @license
   * Copyright 2020 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */
const $v=2;
/**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */
/**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */
const qv=(g,I)=>{var A,C;const t=g._$AN;if(void 0===t)return!1;for(const i of t)null===(C=(A=i)._$AO)||void 0===C||C.call(A,I,!1),qv(i,I);return!0},gD=g=>{let I,A;do{if(void 0===(I=g._$AM))break;A=I._$AN,A.delete(g),g=I}while(0===(null==A?void 0:A.size))},ID=g=>{for(let I;I=g._$AM;g=I){let A=I._$AN;if(void 0===A)I._$AN=A=new Set;else if(A.has(g))break;A.add(g),tD(I)}};function AD(g){void 0!==this._$AN?(gD(this),this._$AM=g,ID(this)):this._$AM=g}function CD(g,I=!1,A=0){const C=this._$AH,t=this._$AN;if(void 0!==t&&0!==t.size)if(I)if(Array.isArray(C))for(let i=A;i<C.length;i++)qv(C[i],!1),gD(C[i]);else null!=C&&(qv(C,!1),gD(C));else qv(this,g)}const tD=g=>{var I,A,C,t;g.type==$v&&(null!==(I=(C=g)._$AP)&&void 0!==I||(C._$AP=CD),null!==(A=(t=g)._$AQ)&&void 0!==A||(t._$AQ=AD))};
/**
   * @license
   * Copyright 2020 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */
const iD=()=>new eD;class eD{}const oD=new WeakMap,nD=(g=>(...I)=>({_$litDirective$:g,values:I}))(class extends class extends class{constructor(g){}get _$AU(){return this._$AM._$AU}_$AT(g,I,A){this._$Ct=g,this._$AM=I,this._$Ci=A}_$AS(g,I){return this.update(g,I)}update(g,I){return this.render(...I)}}{constructor(){super(...arguments),this._$AN=void 0}_$AT(g,I,A){super._$AT(g,I,A),ID(this),this.isConnected=g._$AU}_$AO(g,I=!0){var A,C;g!==this.isConnected&&(this.isConnected=g,g?null===(A=this.reconnected)||void 0===A||A.call(this):null===(C=this.disconnected)||void 0===C||C.call(this)),I&&(qv(this,g),gD(this))}setValue(g){if(void 0===this._$Ct.strings)this._$Ct._$AI(g,this);else{const I=[...this._$Ct._$AH];I[this._$Ci]=g,this._$Ct._$AI(I,this,0)}}disconnected(){}reconnected(){}}{render(g){return Ov}update(g,[I]){var A;const C=I!==this.U;return C&&void 0!==this.U&&this.nt(void 0),(C||this.rt!==this.lt)&&(this.U=I,this.ht=null===(A=g.options)||void 0===A?void 0:A.host,this.nt(this.lt=g.element)),Ov}nt(g){"function"==typeof this.U?(void 0!==oD.get(this.U)&&this.U.call(this.ht,void 0),oD.set(this.U,g),void 0!==g&&this.U.call(this.ht,g)):this.U.value=g}get rt(){var g;return"function"==typeof this.U?oD.get(this.U):null===(g=this.U)||void 0===g?void 0:g.value}disconnected(){this.rt===this.lt&&this.nt(void 0)}reconnected(){this.nt(this.lt)}});class sD extends Error{}function lD(g,I,A){return new Promise((function(C){const t=I||new KB,i=new jB(t),e=A?A.split("\n"):[];new vu(new ZC({fetchCommand:i.runCommand.bind(i),processWorkerUrl:Fu,wasmFs:t}),g,(()=>{if(0==e.length)throw new sD("Process requested stdin but none was available");return Promise.resolve(e.shift())}),C).runCommand()}))}function rD(g,I){if("python"===g)return{run:`python ${I}`};if("ruby"===g)return{run:`cat ${I} | ruby --disable=gems`};if("quickjs"===g)return{run:`quickjs --std ${I}`};if("sqlite"===g)return{run:`cat ${I} | sqlite`};if("clang"===g)return{prepare:[`clang -cc1 -Werror -triple wasm32-unkown-wasi -isysroot /sys -internal-isystem /sys/include -ferror-limit 4 -fmessage-length 80 -fcolor-diagnostics -O2 -emit-obj -o ./program.o ${I}`,"wasm-ld -L/sys/lib/wasm32-wasi /sys/lib/wasm32-wasi/crt1.o ./program.o -lc -o ./program.wasm"],run:"wasmer run ./program.wasm"};if("clangpp"===g)return{prepare:[`runno-clang -cc1 -Werror -emit-obj -disable-free -isysroot /sys -internal-isystem /sys/include/c++/v1 -internal-isystem /sys/include -internal-isystem /sys/lib/clang/8.0.1/include -ferror-limit 4 -fmessage-length 80 -fcolor-diagnostics -O2 -o program.o -x c++  ${I}`,"runno-wasm-ld --no-threads --export-dynamic -z stack-size=1048576 -L/sys/lib/wasm32-wasi /sys/lib/wasm32-wasi/crt1.o program.o -lc -lc++ -lc++abi -o ./program.wasm"],run:"wasmer run ./program.wasm"};throw new Error(`Unknown runtime ${g}`)}class cD{constructor(g,I,A){this.terminal=g,this.editor=I,this.controls=A}writeFS(g){for(const[I,A]of Object.entries(g))this.terminal.writeFile(I,A.content)}showControls(){var g;null==(g=this.controls)||g.show()}hideControls(){var g;null==(g=this.controls)||g.hide()}showEditor(){this.editor.show()}hideEditor(){this.editor.hide()}setEditorProgram(g,I,A){this.editor.setProgram(g,I,A)}getEditorProgram(){return Promise.resolve(this.editor.program)}interactiveRunCode(g,I){return this.interactiveRunFS(g,"program",{program:{name:"program",content:I}})}async interactiveRunFS(g,I,A){const C=rD(g,I);let t;if(this.writeFS(A),C.prepare){t={stdin:"",stdout:"",stderr:"",tty:"",fs:{},exit:0};for(const g of C.prepare||[]){const{result:I}=await this.interactiveUnsafeCommand(g,{});if(!I)throw new Error("Unexpected missing result");if(t.stdin+=I.stdin,t.stdout+=I.stdout,t.stderr+=I.stderr,t.tty+=I.tty,t.fs=I.fs,t.exit=I.exit,0!==I.exit)return{prepare:t}}}const{result:i}=await this.interactiveUnsafeCommand(C.run,{});return{result:i,prepare:t}}async interactiveUnsafeCommand(g,I){this.writeFS(I),this.terminal.clear();let A=await this.terminal.runCommand(g);if(1===A.exit){/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&(this.writeFS(I),this.terminal.clear(),this.terminal.wasmTerminal.wasmTty.clearTty(),A=await this.terminal.runCommand(g))}return{result:A}}interactiveStop(){return this.terminal.stop()}headlessRunCode(g,I,A){return this.headlessRunFS(g,"program",{program:{name:"program",content:I}},A)}async headlessRunFS(g,I,A,C){const t=rD(g,I);let i;if(t.prepare){i={stdin:"",stdout:"",stderr:"",tty:"",fs:{},exit:0};for(const g of t.prepare||[]){const{result:I}=await this.interactiveUnsafeCommand(g,{});if(!I)throw new Error("Unexpected missing result");if(i.stdin+=I.stdin,i.stdout+=I.stdout,i.stderr+=I.stderr,i.tty+=I.tty,i.fs=I.fs,i.exit=I.exit,0!==I.exit)return{prepare:i}}}const{result:e}=await this.headlessUnsafeCommand(t.run,A,C);return{result:e,prepare:i}}async headlessUnsafeCommand(g,I,A){const C=new KB,t={"/dev/stdin":"","/dev/stdout":"","/dev/stderr":""};for(const i of Object.keys(I))t[i]=I[i].content;C.fromJSON(t);return{result:await lD(g,C,A)}}}class aD extends Uv{constructor(){super(...arguments),this.runtime="python",this.editor=!1,this.controls=!1,this.editorRef=iD(),this.controlsRef=iD(),this.terminalRef=iD(),this._running=!1}get running(){return this._running}async run(){const g=this.editorRef.value;if(!g.runtime)throw new Error("The editor has no runtime");return this.interactiveRunCode(g.runtime,g.program)}stop(){return this.interactiveStop()}setProgram(g,I,A){this.editorRef.value.setProgram(g,I,A)}showControls(){this.controls=!0}hideControls(){this.controls=!1}showEditor(){this.editor=!0}hideEditor(){this.editor=!1}setEditorProgram(g,I,A){return this._provider.setEditorProgram(g,I,A)}getEditorProgram(){return this._provider.getEditorProgram()}async interactiveRunCode(g,I){this._running=!0;const A=await this._provider.interactiveRunCode(g,I);return this._running=!1,A}async interactiveRunFS(g,I,A){this._running=!0;const C=await this._provider.interactiveRunFS(g,I,A);return this._running=!1,C}async interactiveUnsafeCommand(g,I){this._running=!0;const A=await this._provider.interactiveUnsafeCommand(g,I);return this._running=!1,A}interactiveStop(){return this._provider.interactiveStop()}headlessRunCode(g,I,A){return this._provider.headlessRunCode(g,I,A)}headlessRunFS(g,I,A,C){return this._provider.headlessRunFS(g,I,A,C)}headlessUnsafeCommand(g,I,A){return this._provider.headlessUnsafeCommand(g,I,A)}connectedCallback(){super.connectedCallback(),setTimeout((()=>{if(!this.code){const g=TJ(this);""!=g.trim()&&(this.code=g)}}),0)}firstUpdated(){this._provider=new cD(this.terminalRef.value,this.editorRef.value);const g=new Event("runno-ready",{bubbles:!0,composed:!0});this.dispatchEvent(g)}render(){return Xv`
      <runno-editor
        runtime=${this.runtime}
        syntax=${this.syntax}
        code=${this.code}
        ${nD(this.editorRef)}
        ?hidden=${!this.editor}
      ></runno-editor>
      <runno-controls
        ${nD(this.controlsRef)}
        ?hidden=${!this.controls}
        ?running=${this._running}
        @runno-run=${this.run}
        @runno-stop=${this.stop}
      ></runno-controls>
      <runno-terminal ${nD(this.terminalRef)}></runno-terminal>
      <pre hidden><slot></slot></pre>
    `}}aD.styles=tv`
    :host {
      display: flex;
      flex-direction: column;
      min-height: 140px;
    }

    runno-editor {
      background: white;
      color: black;
      height: var(--runno-editor-height, auto);
      max-height: var(--runno-editor-max-height, 60%);
    }

    runno-controls {
      flex-shrink: 0;
    }

    runno-terminal {
      background: black;
      flex-grow: 1;
      height: var(--runno-terminal-height, auto);
      min-height: var(--runno-terminal-min-height, 4rem);
    }
  `,qJ([jv({type:String})],aD.prototype,"runtime",void 0),qJ([jv({type:String})],aD.prototype,"syntax",void 0),qJ([jv({type:String})],aD.prototype,"code",void 0),qJ([jv({type:Boolean,reflect:!0})],aD.prototype,"editor",void 0),qJ([jv({type:Boolean,reflect:!0})],aD.prototype,"controls",void 0),qJ([function(g){return jv(__spreadProps(__spreadValues({},g),{state:!0}))}()],aD.prototype,"_running",void 0),g.ControlsElement=_v,g.EditorElement=$J,g.RunElement=aD,g.RunnoProvider=cD,g.TerminalElement=_B,g.defineElements=function(){customElements.define("runno-terminal",_B),customElements.define("runno-editor",$J),customElements.define("runno-controls",_v),customElements.define("runno-run",aD)},g.headlessRunCommand=lD,Object.defineProperty(g,"__esModule",{value:!0}),g[Symbol.toStringTag]="Module"}));
